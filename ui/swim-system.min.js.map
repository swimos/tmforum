{"version":3,"sources":["../../../../swim-core-js/@swim/util/main/lang/Equals.ts","../../../../swim-core-js/@swim/util/main/lang/HashCode.ts","../../../../swim-core-js/@swim/util/main/lang/Equivalent.ts","../../../../swim-core-js/@swim/util/main/lang/Compare.ts","../../../../swim-core-js/@swim/util/main/lang/FromAny.ts","../../../../swim-core-js/@swim/util/main/lang/ToAny.ts","../../../../swim-core-js/@swim/util/main/lang/Lazy.ts","../../../../swim-core-js/@swim/util/main/runtime/String.ts","../../../../swim-core-js/@swim/util/main/runtime/Random.ts","../../../../swim-core-js/@swim/util/main/runtime/ByteOrder.ts","../../../../swim-core-js/@swim/util/main/runtime/Identity.ts","../../../../swim-core-js/@swim/util/main/runtime/Murmur3.ts","../../../../swim-core-js/@swim/util/main/runtime/Numbers.ts","../../../../swim-core-js/@swim/util/main/runtime/Booleans.ts","../../../../swim-core-js/@swim/util/main/runtime/Strings.ts","../../../../swim-core-js/@swim/util/main/runtime/Functions.ts","../../../../swim-core-js/@swim/util/main/runtime/Constructors.ts","../../../../swim-core-js/@swim/util/main/runtime/Objects.ts","../../../../swim-core-js/@swim/util/main/runtime/Values.ts","../../../../swim-core-js/@swim/util/main/runtime/Arrays.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../swim-core-js/@swim/util/main/collections/Cursor.ts","../../../../swim-core-js/@swim/util/main/collections/CursorEmpty.ts","../../../../swim-core-js/@swim/util/main/collections/CursorUnary.ts","../../../../swim-core-js/@swim/util/main/collections/CursorArray.ts","../../../../swim-core-js/@swim/util/main/assert/AssertException.ts","../../../../swim-core-js/@swim/util/main/assert/Assert.ts","../../../../swim-core-js/@swim/codec/main/format/Format.ts","../../../../swim-core-js/@swim/util/main/assert/Severity.ts","../../../../swim-core-js/@swim/util/main/cache/HashGenCacheMap.ts","../../../../swim-core-js/@swim/util/main/cache/HashGenCacheSet.ts","../../../../swim-core-js/@swim/codec/main/source/Tag.ts","../../../../swim-core-js/@swim/codec/main/source/Mark.ts","../../../../swim-core-js/@swim/codec/main/source/Span.ts","../../../../swim-core-js/@swim/codec/main/format/OutputStyle.ts","../../../../swim-core-js/@swim/codec/main/output/OutputException.ts","../../../../swim-core-js/@swim/codec/main/output/OutputSettings.ts","../../../../swim-core-js/@swim/codec/main/output/Output.ts","../../../../swim-core-js/@swim/codec/main/input/InputException.ts","../../../../swim-core-js/@swim/codec/main/input/InputSettings.ts","../../../../swim-core-js/@swim/codec/main/input/Input.ts","../../../../swim-core-js/@swim/codec/main/input/InputError.ts","../../../../swim-core-js/@swim/codec/main/unicode/StringInput.ts","../../../../swim-core-js/@swim/codec/main/unicode/StringOutput.ts","../../../../swim-core-js/@swim/codec/main/writer/WriterException.ts","../../../../swim-core-js/@swim/codec/main/writer/Writer.ts","../../../../swim-core-js/@swim/codec/main/unicode/StringWriter.ts","../../../../swim-core-js/@swim/codec/main/unicode/Unicode.ts","../../../../swim-core-js/@swim/codec/main/number/Base10.ts","../../../../swim-core-js/@swim/codec/main/source/Diagnostic.ts","../../../../swim-core-js/@swim/codec/main/input/InputEmpty.ts","../../../../swim-core-js/@swim/codec/main/input/InputDone.ts","../../../../swim-core-js/@swim/codec/main/input/InputBuffer.ts","../../../../swim-core-js/@swim/codec/main/input/InputBufferEmpty.ts","../../../../swim-core-js/@swim/codec/main/input/InputBufferDone.ts","../../../../swim-core-js/@swim/codec/main/input/InputBufferError.ts","../../../../swim-core-js/@swim/codec/main/output/OutputFull.ts","../../../../swim-core-js/@swim/codec/main/output/OutputDone.ts","../../../../swim-core-js/@swim/codec/main/output/OutputError.ts","../../../../swim-core-js/@swim/codec/main/output/OutputBuffer.ts","../../../../swim-core-js/@swim/codec/main/output/OutputBufferFull.ts","../../../../swim-core-js/@swim/codec/main/output/OutputBufferDone.ts","../../../../swim-core-js/@swim/codec/main/output/OutputBufferError.ts","../../../../swim-core-js/@swim/codec/main/parser/ParserException.ts","../../../../swim-core-js/@swim/codec/main/parser/Parser.ts","../../../../swim-core-js/@swim/codec/main/parser/ParserDone.ts","../../../../swim-core-js/@swim/codec/main/parser/ParserError.ts","../../../../swim-core-js/@swim/codec/main/writer/WriterEnd.ts","../../../../swim-core-js/@swim/codec/main/writer/WriterDone.ts","../../../../swim-core-js/@swim/codec/main/writer/WriterError.ts","../../../../swim-core-js/@swim/codec/main/writer/WriterSequence.ts","../../../../swim-core-js/@swim/codec/main/binary/ByteOutput.ts","../../../../swim-core-js/@swim/codec/main/binary/ByteOutputUint8Array.ts","../../../../swim-core-js/@swim/codec/main/binary/ByteOutputBuffer.ts","../../../../swim-core-js/@swim/codec/main/binary/Binary.ts","../../../../swim-core-js/@swim/codec/main/unicode/UtfErrorMode.ts","../../../../swim-core-js/@swim/codec/main/unicode/UtfErrorModeFatal.ts","../../../../swim-core-js/@swim/codec/main/unicode/UtfErrorModeReplacement.ts","../../../../swim-core-js/@swim/codec/main/number/Base16.ts","../../../../swim-core-js/@swim/codec/main/unicode/Utf8DecodedOutput.ts","../../../../swim-core-js/@swim/codec/main/unicode/Utf8EncodedOutput.ts","../../../../swim-core-js/@swim/codec/main/unicode/Utf8.ts","../../../../swim-core-js/@swim/codec/main/number/Base10NumberParser.ts","../../../../swim-core-js/@swim/codec/main/number/Base10IntegerWriter.ts","../../../../swim-core-js/@swim/codec/main/number/Base16Parser.ts","../../../../swim-core-js/@swim/codec/main/number/Base16Writer.ts","../../../../swim-core-js/@swim/codec/main/number/Base16IntegerWriter.ts","../../../../swim-core-js/@swim/codec/main/number/Base64.ts","../../../../swim-core-js/@swim/codec/main/number/Base64Parser.ts","../../../../swim-core-js/@swim/codec/main/number/Base64Writer.ts","../../../../swim-core-js/@swim/mapping/main/mapping/Mapping.ts","../../../../swim-core-js/@swim/mapping/main/mapping/Domain.ts","../../../../swim-core-js/@swim/mapping/main/mapping/Range.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/Interpolate.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/Interpolator.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/InterpolatorMap.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/IdentityInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/StepInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/NumberInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/ArrayInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/interpolate/InterpolatorInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/transition/Timing.ts","../../../../swim-core-js/@swim/mapping/main/transition/Easing.ts","../../../../swim-core-js/@swim/mapping/main/transition/Tweening.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearDomain.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearDomainInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearRange.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearRangeInterpolator.ts","../../../../swim-core-js/@swim/mapping/main/scale/Scale.ts","../../../../swim-core-js/@swim/mapping/main/scale/ContinuousScale.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearScale.ts","../../../../swim-core-js/@swim/mapping/main/scale/LinearScaleInterpolator.ts","../../../../swim-core-js/@swim/collections/main/KeysCursor.ts","../../../../swim-core-js/@swim/collections/main/ValuesCursor.ts","../../../../swim-core-js/@swim/collections/main/NodeCursor.ts","../../../../swim-core-js/@swim/collections/main/BTreeContext.ts","../../../../swim-core-js/@swim/collections/main/BTree.ts","../../../../swim-core-js/@swim/collections/main/BTreePage.ts","../../../../swim-core-js/@swim/collections/main/BTreeLeaf.ts","../../../../swim-core-js/@swim/collections/main/BTreeNode.ts","../../../../swim-core-js/@swim/collections/main/BTreeNodeCursor.ts","../../../../swim-core-js/@swim/collections/main/STreeContext.ts","../../../../swim-core-js/@swim/collections/main/STree.ts","../../../../swim-core-js/@swim/collections/main/STreePage.ts","../../../../swim-core-js/@swim/collections/main/STreeLeaf.ts","../../../../swim-core-js/@swim/collections/main/STreeNode.ts","../../../../swim-core-js/@swim/collections/main/STreeNodeCursor.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintKey.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintMap.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintSymbol.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintExpression.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintSum.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintTerm.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintProduct.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintConstant.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintBinding.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintStrength.ts","../../../../swim-core-js/@swim/constraint/main/Constraint.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintGroup.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintRow.ts","../../../../swim-core-js/@swim/constraint/main/ConstraintSolver.ts","../../../../swim-core-js/@swim/structure/main/Item.ts","../../../../swim-core-js/@swim/structure/main/ItemInterpolator.ts","../../../../swim-core-js/@swim/structure/main/Field.ts","../../../../swim-core-js/@swim/structure/main/Slot.ts","../../../../swim-core-js/@swim/structure/main/FieldInterpolator.ts","../../../../swim-core-js/@swim/structure/main/Attr.ts","../../../../swim-core-js/@swim/structure/main/AttrInterpolator.ts","../../../../swim-core-js/@swim/structure/main/SlotInterpolator.ts","../../../../swim-core-js/@swim/structure/main/Value.ts","../../../../swim-core-js/@swim/structure/main/Record.ts","../../../../swim-core-js/@swim/structure/main/ValueBuilder.ts","../../../../swim-core-js/@swim/structure/main/RecordInterpolator.ts","../../../../swim-core-js/@swim/structure/main/RecordCursor.ts","../../../../swim-core-js/@swim/structure/main/RecordMap.ts","../../../../swim-core-js/@swim/structure/main/RecordMapView.ts","../../../../swim-core-js/@swim/structure/main/Data.ts","../../../../swim-core-js/@swim/structure/main/DataOutput.ts","../../../../swim-core-js/@swim/structure/main/Text.ts","../../../../swim-core-js/@swim/structure/main/TextOutput.ts","../../../../swim-core-js/@swim/structure/main/Num.ts","../../../../swim-core-js/@swim/structure/main/NumInterpolator.ts","../../../../swim-core-js/@swim/structure/main/Bool.ts","../../../../swim-core-js/@swim/structure/main/Extant.ts","../../../../swim-core-js/@swim/structure/main/Absent.ts","../../../../swim-core-js/@swim/structure/main/Expression.ts","../../../../swim-core-js/@swim/structure/main/operator/Operator.ts","../../../../swim-core-js/@swim/structure/main/operator/BinaryOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/BinaryOperatorInterpolator.ts","../../../../swim-core-js/@swim/structure/main/operator/UnaryOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/UnaryOperatorInterpolator.ts","../../../../swim-core-js/@swim/structure/main/operator/ConditionalOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/ConditionalOperatorInterpolator.ts","../../../../swim-core-js/@swim/structure/main/interpreter/InterpreterException.ts","../../../../swim-core-js/@swim/structure/main/interpreter/InterpreterSettings.ts","../../../../swim-core-js/@swim/structure/main/interpreter/Interpreter.ts","../../../../swim-core-js/@swim/structure/main/operator/OrOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/AndOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/BitwiseOrOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/BitwiseXorOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/BitwiseAndOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/LtOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/LeOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/EqOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/NeOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/GeOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/GtOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/PlusOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/MinusOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/TimesOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/DivideOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/ModuloOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/NotOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/BitwiseNotOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/NegativeOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/PositiveOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/InvokeOperator.ts","../../../../swim-core-js/@swim/structure/main/operator/InvokeOperatorInterpolator.ts","../../../../swim-core-js/@swim/structure/main/selector/Selector.ts","../../../../swim-core-js/@swim/structure/main/selector/IdentitySelector.ts","../../../../swim-core-js/@swim/structure/main/selector/GetSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/GetAttrSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/GetItemSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/KeysSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/ValuesSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/ChildrenSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/DescendantsSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/FilterSelector.ts","../../../../swim-core-js/@swim/structure/main/selector/LiteralSelector.ts","../../../../swim-core-js/@swim/structure/main/func/Func.ts","../../../../swim-core-js/@swim/structure/main/func/LambdaFunc.ts","../../../../swim-core-js/@swim/structure/main/func/BridgeFunc.ts","../../../../swim-core-js/@swim/structure/main/func/MathModule.ts","../../../../swim-core-js/@swim/streamlet/main/KeyEffect.ts","../../../../swim-core-js/@swim/structure/main/form/FormException.ts","../../../../swim-core-js/@swim/structure/main/form/Form.ts","../../../../swim-core-js/@swim/structure/main/form/TagForm.ts","../../../../swim-core-js/@swim/structure/main/form/UnitForm.ts","../../../../swim-core-js/@swim/structure/main/form/StringForm.ts","../../../../swim-core-js/@swim/structure/main/form/NumberForm.ts","../../../../swim-core-js/@swim/structure/main/form/BooleanForm.ts","../../../../swim-core-js/@swim/structure/main/form/AnyForm.ts","../../../../swim-core-js/@swim/structure/main/form/ItemForm.ts","../../../../swim-core-js/@swim/structure/main/form/ValueForm.ts","../../../../swim-core-js/@swim/structure/main/collections/ValueCursor.ts","../../../../swim-core-js/@swim/structure/main/collections/ValueEntryCursor.ts","../../../../swim-core-js/@swim/streamlet/main/Inlet.ts","../../../../swim-core-js/@swim/streamlet/main/Outlet.ts","../../../../swim-core-js/@swim/streamlet/main/OutletCombinators.ts","../../../../swim-core-js/@swim/streamlet/main/MapInlet.ts","../../../../swim-core-js/@swim/streamlet/main/MapOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/MapOutletCombinators.ts","../../../../swim-core-js/@swim/streamlet/main/StreamletException.ts","../../../../swim-core-js/@swim/streamlet/main/StreamletScope.ts","../../../../swim-core-js/@swim/streamlet/main/Streamlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractInlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractInoutlet.ts","../../../../swim-core-js/@swim/streamlet/main/KeyOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractMapInlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractMapOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractMapInoutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractMapInletOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractMapInletMapOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/OutletInlet.ts","../../../../swim-core-js/@swim/streamlet/main/OutletMapInlet.ts","../../../../swim-core-js/@swim/streamlet/main/ValueInput.ts","../../../../swim-core-js/@swim/streamlet/main/ValueOutput.ts","../../../../swim-core-js/@swim/streamlet/main/MapInput.ts","../../../../swim-core-js/@swim/streamlet/main/MapOutput.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MemoizeValueCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MemoizeMapCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/FilterFieldsOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/FilterFieldsCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MapValueOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MapValueCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MapFieldValuesOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/MapFieldValuesCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/ReduceFieldsOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/ReduceFieldsCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/WatchValueOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/WatchValueCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/WatchFieldsOperator.ts","../../../../swim-core-js/@swim/streamlet/main/combinator/WatchFieldsCombinator.ts","../../../../swim-core-js/@swim/streamlet/main/StreamletInlet.ts","../../../../swim-core-js/@swim/streamlet/main/StreamletOutlet.ts","../../../../swim-core-js/@swim/streamlet/main/StreamletInoutlet.ts","../../../../swim-core-js/@swim/streamlet/main/AbstractStreamlet.ts","../../../../swim-core-js/@swim/streamlet/main/Out.ts","../../../../swim-core-js/@swim/streamlet/main/Inout.ts","../../../../swim-core-js/@swim/dataflow/main/RecordOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/AbstractRecordOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/RecordStreamlet.ts","../../../../swim-core-js/@swim/dataflow/main/AbstractRecordStreamlet.ts","../../../../swim-core-js/@swim/dataflow/main/RecordFieldUpdater.ts","../../../../swim-core-js/@swim/dataflow/main/RecordModel.ts","../../../../swim-core-js/@swim/dataflow/main/RecordScope.ts","../../../../swim-core-js/@swim/dataflow/main/Reifier.ts","../../../../swim-core-js/@swim/dataflow/main/selector/GetOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/BinaryOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/UnaryOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/ConditionalOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/OrOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/AndOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/BitwiseOrOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/BitwiseXorOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/BitwiseAndOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/LtOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/LeOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/EqOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/NeOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/GeOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/GtOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/PlusOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/MinusOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/TimesOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/DivideOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/ModuloOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/NotOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/BitwiseNotOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/NegativeOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/PositiveOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/operator/InvokeOutlet.ts","../../../../swim-core-js/@swim/dataflow/main/Dataflow.ts","../../../../swim-core-js/@swim/recon/main/Recon.ts","../../../../swim-core-js/@swim/recon/main/parser/BlockParser.ts","../../../../swim-core-js/@swim/recon/main/parser/AttrParser.ts","../../../../swim-core-js/@swim/recon/main/parser/BlockItemParser.ts","../../../../swim-core-js/@swim/recon/main/parser/InlineItemParser.ts","../../../../swim-core-js/@swim/recon/main/parser/RecordParser.ts","../../../../swim-core-js/@swim/recon/main/parser/MarkupParser.ts","../../../../swim-core-js/@swim/recon/main/parser/DataParser.ts","../../../../swim-core-js/@swim/recon/main/parser/IdentParser.ts","../../../../swim-core-js/@swim/recon/main/parser/StringParser.ts","../../../../swim-core-js/@swim/recon/main/parser/NumberParser.ts","../../../../swim-core-js/@swim/recon/main/parser/LambdaFuncParser.ts","../../../../swim-core-js/@swim/recon/main/parser/ConditionalOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/OrOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/AndOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/BitwiseOrOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/BitwiseXorOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/BitwiseAndOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/ComparisonOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/AttrExpressionParser.ts","../../../../swim-core-js/@swim/recon/main/parser/AdditiveOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/MultiplicativeOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/PrefixOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/InvokeOperatorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/PrimaryParser.ts","../../../../swim-core-js/@swim/recon/main/parser/LiteralParser.ts","../../../../swim-core-js/@swim/recon/main/parser/SelectorParser.ts","../../../../swim-core-js/@swim/recon/main/parser/ReconParser.ts","../../../../swim-core-js/@swim/recon/main/parser/ReconStructureParser.ts","../../../../swim-core-js/@swim/recon/main/writer/AttrWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/SlotWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/BlockWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/PrimaryWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/MarkupTextWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/DataWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/IdentWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/StringWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/LambdaFuncWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/ConditionalOperatorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/InfixOperatorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/PrefixOperatorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/InvokeOperatorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/LiteralSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/GetSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/GetAttrSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/GetItemSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/KeysSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/ValuesSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/ChildrenSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/DescendantsSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/FilterSelectorWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/ReconWriter.ts","../../../../swim-core-js/@swim/recon/main/writer/ReconStructureWriter.ts","../../../../swim-core-js/@swim/uri/main/UriException.ts","../../../../swim-core-js/@swim/uri/main/Uri.ts","../../../../swim-core-js/@swim/uri/main/UriScheme.ts","../../../../swim-core-js/@swim/uri/main/UriAuthority.ts","../../../../swim-core-js/@swim/uri/main/UriUser.ts","../../../../swim-core-js/@swim/uri/main/UriHost.ts","../../../../swim-core-js/@swim/uri/main/UriHostName.ts","../../../../swim-core-js/@swim/uri/main/UriHostIPv4.ts","../../../../swim-core-js/@swim/uri/main/UriHostIPv6.ts","../../../../swim-core-js/@swim/uri/main/UriHostUndefined.ts","../../../../swim-core-js/@swim/uri/main/UriPort.ts","../../../../swim-core-js/@swim/uri/main/UriPath.ts","../../../../swim-core-js/@swim/uri/main/UriPathSegment.ts","../../../../swim-core-js/@swim/uri/main/UriPathSlash.ts","../../../../swim-core-js/@swim/uri/main/UriPathEmpty.ts","../../../../swim-core-js/@swim/uri/main/UriPathBuilder.ts","../../../../swim-core-js/@swim/uri/main/UriPathForm.ts","../../../../swim-core-js/@swim/uri/main/UriQuery.ts","../../../../swim-core-js/@swim/uri/main/UriQueryParam.ts","../../../../swim-core-js/@swim/uri/main/UriQueryUndefined.ts","../../../../swim-core-js/@swim/uri/main/UriQueryBuilder.ts","../../../../swim-core-js/@swim/uri/main/UriFragment.ts","../../../../swim-core-js/@swim/uri/main/UriForm.ts","../../../../swim-core-js/@swim/uri/main/UriCache.ts","../../../../swim-core-js/@swim/uri/main/parser/UriParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriAbsoluteParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriSchemeParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriAuthorityParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriUserParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriHostParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriHostAddressParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriHostLiteralParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriPortParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriPathParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriQueryParser.ts","../../../../swim-core-js/@swim/uri/main/parser/UriFragmentParser.ts","../../../../swim-core-js/@swim/math/main/length/LengthException.ts","../../../../swim-core-js/@swim/math/main/length/Length.ts","../../../../swim-core-js/@swim/math/main/length/PxLength.ts","../../../../swim-core-js/@swim/math/main/length/EmLength.ts","../../../../swim-core-js/@swim/math/main/length/RemLength.ts","../../../../swim-core-js/@swim/math/main/length/PctLength.ts","../../../../swim-core-js/@swim/math/main/length/UnitlessLength.ts","../../../../swim-core-js/@swim/math/main/length/LengthInterpolator.ts","../../../../swim-core-js/@swim/math/main/length/LengthForm.ts","../../../../swim-core-js/@swim/math/main/length/LengthParser.ts","../../../../swim-core-js/@swim/math/main/angle/Angle.ts","../../../../swim-core-js/@swim/math/main/angle/DegAngle.ts","../../../../swim-core-js/@swim/math/main/angle/RadAngle.ts","../../../../swim-core-js/@swim/math/main/angle/GradAngle.ts","../../../../swim-core-js/@swim/math/main/angle/TurnAngle.ts","../../../../swim-core-js/@swim/math/main/angle/AngleInterpolator.ts","../../../../swim-core-js/@swim/math/main/angle/AngleForm.ts","../../../../swim-core-js/@swim/math/main/angle/AngleParser.ts","../../../../swim-core-js/@swim/math/main/r2/VectorR2.ts","../../../../swim-core-js/@swim/math/main/r2/VectorR2Interpolator.ts","../../../../swim-core-js/@swim/math/main/r2/ShapeR2.ts","../../../../swim-core-js/@swim/math/main/r2/PointR2.ts","../../../../swim-core-js/@swim/math/main/r2/PointR2Interpolator.ts","../../../../swim-core-js/@swim/math/main/r2/CurveR2.ts","../../../../swim-core-js/@swim/math/main/r2/CurveR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/BezierCurveR2.ts","../../../../swim-core-js/@swim/math/main/r2/SegmentR2.ts","../../../../swim-core-js/@swim/math/main/r2/SegmentR2Interpolator.ts","../../../../swim-core-js/@swim/math/main/r2/SegmentR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/QuadraticCurveR2.ts","../../../../swim-core-js/@swim/math/main/r2/QuadraticCurveR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/CubicCurveR2.ts","../../../../swim-core-js/@swim/math/main/r2/CubicCurveR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/EllipticCurveR2.ts","../../../../swim-core-js/@swim/math/main/r2/EllipticCurveR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/SplineR2.ts","../../../../swim-core-js/@swim/math/main/r2/SplineR2Builder.ts","../../../../swim-core-js/@swim/math/main/r2/SplineR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/PathR2.ts","../../../../swim-core-js/@swim/math/main/r2/PathR2Builder.ts","../../../../swim-core-js/@swim/math/main/r2/PathR2Parser.ts","../../../../swim-core-js/@swim/math/main/r2/CircleR2.ts","../../../../swim-core-js/@swim/math/main/r2/BoxR2.ts","../../../../swim-core-js/@swim/math/main/r2/BoxR2Interpolator.ts","../../../../swim-core-js/@swim/math/main/r2/CircleR2Interpolator.ts","../../../../swim-core-js/@swim/math/main/r2/SetR2.ts","../../../../swim-core-js/@swim/math/main/transform/Transform.ts","../../../../swim-core-js/@swim/math/main/transform/TransformForm.ts","../../../../swim-core-js/@swim/math/main/transform/TransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/IdentityTransform.ts","../../../../swim-core-js/@swim/math/main/transform/TranslateTransform.ts","../../../../swim-core-js/@swim/math/main/transform/TranslateTransformInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/TranslateTransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/ScaleTransform.ts","../../../../swim-core-js/@swim/math/main/transform/ScaleTransformInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/ScaleTransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/RotateTransform.ts","../../../../swim-core-js/@swim/math/main/transform/RotateTransformInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/RotateTransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/SkewTransform.ts","../../../../swim-core-js/@swim/math/main/transform/SkewTransformInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/SkewTransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/AffineTransform.ts","../../../../swim-core-js/@swim/math/main/transform/AffineTransformInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/AffineTransformParser.ts","../../../../swim-core-js/@swim/math/main/transform/TransformList.ts","../../../../swim-core-js/@swim/math/main/transform/TransformListInterpolator.ts","../../../../swim-core-js/@swim/math/main/transform/TransformListParser.ts","../../../../swim-core-js/@swim/geo/main/GeoProjection.ts","../../../../swim-core-js/@swim/geo/main/GeoShape.ts","../../../../swim-core-js/@swim/geo/main/GeoPoint.ts","../../../../swim-core-js/@swim/geo/main/GeoPointInterpolator.ts","../../../../swim-core-js/@swim/geo/main/GeoCurve.ts","../../../../swim-core-js/@swim/geo/main/GeoSegment.ts","../../../../swim-core-js/@swim/geo/main/GeoSegmentInterpolator.ts","../../../../swim-core-js/@swim/geo/main/GeoSpline.ts","../../../../swim-core-js/@swim/geo/main/GeoSplineBuilder.ts","../../../../swim-core-js/@swim/geo/main/GeoPath.ts","../../../../swim-core-js/@swim/geo/main/GeoPathBuilder.ts","../../../../swim-core-js/@swim/geo/main/GeoBox.ts","../../../../swim-core-js/@swim/geo/main/GeoBoxInterpolator.ts","../../../../swim-core-js/@swim/geo/main/GeoSet.ts","../../../../swim-core-js/@swim/geo/main/GeoJson.ts","../../../../swim-core-js/@swim/time/main/TimeZone.ts","../../../../swim-core-js/@swim/time/main/TimeZoneForm.ts","../../../../swim-core-js/@swim/time/main/DateTime.ts","../../../../swim-core-js/@swim/time/main/DateTimeInterpolator.ts","../../../../swim-core-js/@swim/time/main/DateTimeForm.ts","../../../../swim-core-js/@swim/time/main/DateTimeParser.ts","../../../../swim-core-js/@swim/time/main/format/DateTimeLocale.ts","../../../../swim-core-js/@swim/time/main/format/DateTimeSpecifiers.ts","../../../../swim-core-js/@swim/time/main/format/DateTimeFormat.ts","../../../../swim-core-js/@swim/time/main/format/YearFormat.ts","../../../../swim-core-js/@swim/time/main/format/MonthOfYearFormat.ts","../../../../swim-core-js/@swim/time/main/format/MonthFormat.ts","../../../../swim-core-js/@swim/time/main/format/ShortMonthFormat.ts","../../../../swim-core-js/@swim/time/main/format/DayOfMonthFormat.ts","../../../../swim-core-js/@swim/time/main/format/WeekdayFormat.ts","../../../../swim-core-js/@swim/time/main/format/ShortWeekdayFormat.ts","../../../../swim-core-js/@swim/time/main/format/Hour24Format.ts","../../../../swim-core-js/@swim/time/main/format/Hour12Format.ts","../../../../swim-core-js/@swim/time/main/format/PeriodFormat.ts","../../../../swim-core-js/@swim/time/main/format/MinuteFormat.ts","../../../../swim-core-js/@swim/time/main/format/SecondFormat.ts","../../../../swim-core-js/@swim/time/main/format/MillisecondFormat.ts","../../../../swim-core-js/@swim/time/main/format/PatternFormat.ts","../../../../swim-core-js/@swim/time/main/format/YearParser.ts","../../../../swim-core-js/@swim/time/main/format/MonthOfYearParser.ts","../../../../swim-core-js/@swim/time/main/format/MonthParser.ts","../../../../swim-core-js/@swim/time/main/format/ShortMonthParser.ts","../../../../swim-core-js/@swim/time/main/format/DayOfMonthParser.ts","../../../../swim-core-js/@swim/time/main/format/WeekdayParser.ts","../../../../swim-core-js/@swim/time/main/format/ShortWeekdayParser.ts","../../../../swim-core-js/@swim/time/main/format/Hour24Parser.ts","../../../../swim-core-js/@swim/time/main/format/Hour12Parser.ts","../../../../swim-core-js/@swim/time/main/format/PeriodParser.ts","../../../../swim-core-js/@swim/time/main/format/MinuteParser.ts","../../../../swim-core-js/@swim/time/main/format/SecondParser.ts","../../../../swim-core-js/@swim/time/main/format/MillisecondParser.ts","../../../../swim-core-js/@swim/time/main/format/PatternParser.ts","../../../../swim-core-js/@swim/time/main/interval/TimeInterval.ts","../../../../swim-core-js/@swim/time/main/interval/FilterTimeInterval.ts","../../../../swim-core-js/@swim/time/main/interval/YearInterval.ts","../../../../swim-core-js/@swim/time/main/interval/YearsInterval.ts","../../../../swim-core-js/@swim/time/main/interval/MonthInterval.ts","../../../../swim-core-js/@swim/time/main/interval/WeekInterval.ts","../../../../swim-core-js/@swim/time/main/interval/DayInterval.ts","../../../../swim-core-js/@swim/time/main/interval/HourInterval.ts","../../../../swim-core-js/@swim/time/main/interval/MinuteInterval.ts","../../../../swim-core-js/@swim/time/main/interval/SecondInterval.ts","../../../../swim-core-js/@swim/time/main/interval/MillisecondInterval.ts","../../../../swim-core-js/@swim/time/main/interval/MillisecondsInterval.ts","../../../../swim-core-js/@swim/time/main/scale/TimeDomain.ts","../../../../swim-core-js/@swim/time/main/scale/TimeDomainInterpolator.ts","../../../../swim-core-js/@swim/time/main/scale/TimeRange.ts","../../../../swim-core-js/@swim/time/main/scale/TimeRangeInterpolator.ts","../../../../swim-core-js/@swim/time/main/scale/TimeScale.ts","../../../../swim-core-js/@swim/time/main/scale/TimeScaleInterpolator.ts","../../../../swim-mesh-js/@swim/client/main/downlink/Downlink.ts","../../../../swim-mesh-js/@swim/warp/main/Envelope.ts","../../../../swim-mesh-js/@swim/warp/main/HostAddressed.ts","../../../../swim-mesh-js/@swim/warp/main/LaneAddressed.ts","../../../../swim-mesh-js/@swim/warp/main/LinkAddressed.ts","../../../../swim-mesh-js/@swim/warp/main/EventMessage.ts","../../../../swim-mesh-js/@swim/warp/main/CommandMessage.ts","../../../../swim-mesh-js/@swim/warp/main/LinkRequest.ts","../../../../swim-mesh-js/@swim/warp/main/LinkedResponse.ts","../../../../swim-mesh-js/@swim/warp/main/SyncRequest.ts","../../../../swim-mesh-js/@swim/warp/main/SyncedResponse.ts","../../../../swim-mesh-js/@swim/warp/main/UnlinkRequest.ts","../../../../swim-mesh-js/@swim/warp/main/UnlinkedResponse.ts","../../../../swim-mesh-js/@swim/warp/main/AuthRequest.ts","../../../../swim-mesh-js/@swim/warp/main/AuthedResponse.ts","../../../../swim-mesh-js/@swim/warp/main/DeauthRequest.ts","../../../../swim-mesh-js/@swim/warp/main/DeauthedResponse.ts","../../../../swim-mesh-js/@swim/client/main/host/Host.ts","../../../../swim-mesh-js/@swim/client/main/host/RemoteHost.ts","../../../../swim-mesh-js/@swim/client/main/host/WebSocketHost.ts","../../../../swim-mesh-js/@swim/client/main/downlink/DownlinkModel.ts","../../../../swim-mesh-js/@swim/client/main/downlink/EventDownlinkModel.ts","../../../../swim-mesh-js/@swim/client/main/downlink/EventDownlink.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ListDownlinkModel.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ListDownlink.ts","../../../../swim-mesh-js/@swim/client/main/downlink/MapDownlinkModel.ts","../../../../swim-mesh-js/@swim/client/main/downlink/MapDownlink.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ValueDownlinkModel.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ValueDownlink.ts","../../../../swim-mesh-js/@swim/client/main/downlink/DownlinkRecord.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ListDownlinkRecord.ts","../../../../swim-mesh-js/@swim/client/main/downlink/MapDownlinkRecord.ts","../../../../swim-mesh-js/@swim/client/main/downlink/ValueDownlinkRecord.ts","../../../../swim-mesh-js/@swim/client/main/downlink/DownlinkReifier.ts","../../../../swim-mesh-js/@swim/client/main/downlink/DownlinkStreamlet.ts","../../../../swim-mesh-js/@swim/client/main/ref/BaseRef.ts","../../../../swim-mesh-js/@swim/client/main/ref/LaneRef.ts","../../../../swim-mesh-js/@swim/client/main/ref/NodeRef.ts","../../../../swim-mesh-js/@swim/client/main/ref/HostRef.ts","../../../../swim-mesh-js/@swim/client/main/WarpClient.ts","../../../../swim-mesh-js/@swim/client/main/index.ts","../../../../swim-core-js/@swim/streamlet/main/In.ts"],"names":["Equals","x","y","equals","is","object","HashCode","hashCode","Equivalent","epsilon","equivalentTo","Epsilon","Compare","compareTo","NaN","FromAny","fromAny","ToAny","toAny","Lazy","target","propertyKey","descriptor","writable","enumerable","configurable","get","get_1","value","call","this","Object","defineProperty","Error","method_1","String","prototype","codePointAt","index","size","length","Number","c1","charCodeAt","c2","offsetByCodePoints","count","Random","window","crypto","fillBytes","array","getRandomValues","msCrypto","Int8Array","i","Math","round","random","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","TypeError","ByteOrder","nativeEndian","bom","ArrayBuffer","b","BigEndian","LittleEndian","nextId","Murmur3","mix","code","rotl","mixUint8Array","NativeOrder","mixUint8ArrayBE","mixUInt8ArrayLE","offset","limit","word","mixString","string","mixStringBE","mixStringLE","k","n","utf8Length","c","mash","distance","Identity","compare","xh","hash","yh","_hashCode","hashArrayBuffer","hashFloat64Array","hashInt32Array","Booleans","Numbers","equal","isNaN","equivalent","abs","Float64Array","Strings","Functions","Constructors","name","Objects","xKeys","keys","yKeys","key","Values","p","q","min","order","xKey","yKey","hashValue","Date","getTime","Array","isArray","Arrays","freeze","inserted","newElement","oldArray","newArray","element","removed","oldElement","empty","extendStatics","d","setPrototypeOf","__proto__","hasOwnProperty","__extends","__","constructor","create","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","__spreadArray","to","from","il","j","Cursor","set","newValue","delete","CursorEmpty","unary","CursorUnary","CursorArray","_super","isEmpty","head","step","skip","hasNext","nextIndex","next","done","hasPrevious","previousIndex","previous","_this","max","AssertException","message","assert","condition","ok","notOk","lhs","rhs","notEqual","identical","notIdentical","instanceOf","notInstanceOf","compareLessThan","compareNotLessThan","compareLessThanOrEqual","compareNotLessThanOrEqual","compareEqual","compareNotEqual","compareGreaterThanOrEqual","compareNotGreaterThanOrEqual","compareGreaterThan","compareNotGreaterThan","prefixes","Severity","level","label","isTrace","TRACE_LEVEL","isDebug","DEBUG_LEVEL","isInfo","INFO_LEVEL","isNote","NOTE_LEVEL","isWarning","WARNING_LEVEL","isError","ERROR_LEVEL","isAlert","ALERT_LEVEL","isFatal","FATAL_LEVEL","that","localeCompare","toString","trace","debug","info","note","warning","error","alert","fatal","_trace","_debug","_info","_note","_warning","_error","_alert","_fatal","HashGenCacheMap","buckets","gen4Hits","gen3Hits","gen2Hits","gen1Hits","misses","bucket","gen4Key","gen4Val","gen4Weight","gen3Key","gen3Val","gen3Weight","HashGenCacheMapBucket","gen2Key","gen2Val","gen2Weight","gen1Key","gen1Val","gen1Weight","put","remove","clear","hits","hitRatio","HashGenCacheSet","HashGenCacheSetBucket","Mark","line","column","withNote","at","union","Span","start","end","shift","mark","display","output","Format","displayNumber","write","debugNumber","debugString","Tag","tmp","OutputStyle","reset","settings","isStyled","bold","faint","black","red","green","yellow","blue","magenta","cyan","gray","blackBold","redBold","greenBold","yellowBold","blueBold","magentaBold","cyanBold","grayBold","OutputException","OutputSettings","lineSeparator","pretty","styled","precision","withLineSeparator","copy","isPretty","asPretty","asStyled","withPrecision","canEqual","standard","prettyStyled","fromInit","init","Output","writeln","flush","push","tokens","_i","trap","clone","full","OutputFull","OutputDone","OutputError","InputException","InputSettings","stripped","isStripped","asStripped","Input","InputEmpty","zero","InputDone","InputError","id","isCont","isDone","isPart","asPart","part","seek","withId","withMark","withSettings","StringInput","StringOutput","isFull","token","fromCharCode","u","concat","bind","WriterException","Writer","feed","input","fork","asDone","asError","andThen","WriterSequence","WriterEnd","WriterDone","WriterError","StringWriter","pull","Unicode","stringInput","stringOutput","stringWriter","writeString","isAlpha","isSpace","isNewline","isWhitespace","exports","module","require","os","EOL","notOutput","isFinite","floor","digits","decimal","debugChar","character","encodeHex","prefix","exponential","toExponential","exponentIndex","indexOf","exponent","slice","power","scaled","pow","s","trimTrailingZeros","toFixed","i1","i0","duration","millis","separator","SECOND","MINUTE","HOUR","DAY","WEEK","weeks","days","hours","minutes","seconds","Base10","isDigit","decodeDigit","encodeDigit","countDigits","integerParser","Base10NumberParser","parseInteger","parse","decimalParser","parseDecimal","numberParser","parseNumber","integerWriter","Base10IntegerWriter","writeInteger","Diagnostic","tag","severity","cause","lineDigits","displayDiagnostic","source","unexpected","expected","contextLines","displayMessage","displayAnchor","displayContext","formatSeverity","displayLineLeadArrow","displayLineLead","displayCause","causeOrder","displayLineLeadEllipsis","displayLines","displayNote","startLine","endLine","consumeLineText","displayLine","displayLineComment","displaySingleLine","displayStartLine","displayEndLine","displayMidLine","displayLineLeadNumber","i_1","displayLineText","i_2","comment","displayLineLeadComment","padding","InputBuffer","InputBufferEmpty","InputBufferDone","InputBufferError","withIndex","withLimit","has","tokenOrString","OutputBuffer","OutputBufferFull","OutputBufferDone","OutputBufferError","ParserException","diagnostic","Parser","ParserDone","ParserError","tail","ByteOutput","expand","toUint8Array","cloneArray","ByteOutputUint8Array","ByteOutputBuffer","buffer","Binary","initialCapacity","outputBuffer","UtfErrorMode","isReplacement","UtfErrorModeFatal","fatalNonZero","replacement","UtfErrorModeReplacement","replacementNonZero","nonZero","isNonZero","asNonZero","replacementChar","Base16","alphabet","uint8ArrayWriter","Base16Writer","writeUint8Array","width","Base16IntegerWriter","writeIntegerLiteral","writeLiteral","writeQuantum","parser","Base16Parser","parseUint8Array","Utf8DecodedOutput","errorMode","c3","have","c4","invalid","base16","uppercase","Utf8EncodedOutput","Utf8","sizeOf","decodedOutput","encodedOutput","decodedString","sign","mode","Base10DecimalParser","Base64","z","w","Base64Parser","Base64Writer","Base64Standard","padded","standardPadded","standardUnpadded","Base64Url","url","urlPadded","urlUnpadded","isPadded","asPadded","base64","Mapping","domain","range","mapping","Domain","x0","x1","Range","unit","contains","LinearDomain","y0","y1","LinearRange","Interpolate","interpolateTo","Interpolator","interpolator","IdentityInterpolator","NumberInterpolator","ArrayInterpolator","StepInterpolator","map","transform","InterpolatorMap","InterpolatorInterpolator","interpolators","interpolatorCount","Timing","easing","t0","t1","timing","t","withDomain","withDuration","dt","overRange","Tweening","Easing","linear","type","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","expoIn","expoOut","expoInOut","circIn","circOut","circInOut","backIn","backOut","backInOut","elasticIn","elasticOut","elasticInOut","bounceIn","bounceOut","bounceInOut","v","sqrt","st","m","PI","asin","sin","st1","invert","tweening","dx","LinearDomainInterpolator","x00","x01","x10","x11","LinearRangeInterpolator","y00","y01","y10","y11","Scale","ContinuousScale","LinearScale","scale","inverse","clampDomain","xMin","xMax","zMin","zMax","dy","xSum","dz","solveDomain","x2","y2","reflect","y3","x3","LinearScaleInterpolator","s0","s1","KeysCursor","cursor","_a","ValuesCursor","NodeCursor","pages","childIndex","childCursor","pageCursor","page","pageSize","reversePageCursor","BTreeContext","pageSplitSize","pageShouldSplit","arity","pageShouldMerge","BTree","root","BTreePage","getEntry","firstKey","entry","firstEntry","firstValue","lastKey","lastEntry","lastValue","nextKey","nextEntry","nextValue","previousKey","previousEntry","previousValue","oldRoot","newRoot","updated","balanced","drop","lower","take","upper","cleared","reduced","identity","accumulator","combiner","fold","forEach","callback","thisArg","forEachKey","forEachValue","values","entries","reverseKeys","reverseValues","reverseEntries","tree","BTreeLeaf","slots","minKey","maxKey","lookup","updatedSlot","insertedSlot","oldSlots","newSlots","removedSlot","split","newPages","newLeftPage","splitLeft","newRightPage","splitRight","newKnots","BTreeNode","slot","result","lo","hi","mid","knots","xx","oldPage","newPage","updatedPageSplit","updatedPage","oldKnots","oldPages","updatedPageMerge","midPages","midKnots","replacedPage","removedPage","newSize","newArity","newNode","BTreeNodeCursor","STreeContext","identify","STree","STreePage","RangeError","insert","newValues","pop","oldValue","unshift","move","fromIndex","toIndex","splice","deleteCount","deleted","STreeLeaf","updatedItem","oldItems","oldSlot","insertedItem","STreeNode","subIndex","STreeNodeCursor","ConstraintKey","idCount","ConstraintMap","getField","item","last","newIndex","ConstraintSymbol","ConstraintSlack","isExternal","isDummy","isInvalid","addConstraintCondition","constraint","solver","removeConstraintCondition","updateConstraintSolution","ConstraintDummy","ConstraintError","ConstraintInvalid","ConstraintExpression","constant","sum","expressions","terms","expression","ConstraintTerm","variable","field","coefficient","subterms","ConstraintSum","product","ConstraintProduct","ConstraintConstant","isConstant","plus","negative","oldTerms","newTerms","minus","times","scalar","divide","ConstraintBinding","owner","state","strength","setState","newState","oldState","willSetState","onSetState","didSetState","isConstraining","setConstraintVariable","evaluateConstraintVariable","isConstrained","setConstraintFlags","constraintFlags","ConstrainedFlag","constrain","constrained","conditionCount","stopConstraining","startConstraining","updateConstraintVariable","oldConditionCount","newConditionCount","ConstrainingFlag","willStartConstraining","onStartConstraining","didStartConstraining","addConstraintVariable","willStopConstraining","onStopConstraining","didStopConstraining","removeConstraintVariable","ConstraintStrength","clip","Required","Strong","Medium","Weak","Constraint","scope","relation","hasConstraint","addConstraint","removeConstraint","ConstraintGroup","constraints","enableConstraints","disableConstraints","ConstraintRow","symbol","cells","setSymbol","invalidate","setConstant","add","insertSymbol","insertRow","removeSymbol","negate","solveFor","solveForEx","coefficientFor","substitute","row","ConstraintSolver","createRow","addConstraintRow","willAddConstraint","subject","chooseSubject","marker","addWithArtificialVariable","rows","optimize","objective","didAddConstraint","updateSolution","removeConstraintRow","willRemoveConstraint","removeConstraintEffects","leaving","getMarkerLeavingSymbol","didRemoveConstraint","constraintVariable","hasConstraintVariable","constraintVariables","willAddConstraintVariable","didAddConstraintVariable","binding","willRemoveConstraintVariable","didRemoveConstraintVariable","delta","willSetConstraintVariable","infeasible","dualOptimize","other","row_1","didSetConstraintVariable","invalidated","basic","slack","eplus","eminus","dummy","artificial","success","entering","anyPivotableSymbol","getEnteringSymbol","getLeavingSymbol","getDualEnteringSymbol","ratio","MAX_VALUE","coratio","found","r1","r2","first","second","third","removeMarkerEffects","Item","record","Record","updatedAttr","setAttr","setSlot","appended","items","apply","prepended","lt","Bool","absent","le","eq","ne","ge","gt","invoke","args","filter","predicate","selector","Selector","literal","evaluate","interpreter","cast","form","orElse","coerce","iterator","ItemInterpolator","extant","Extant","Absent","Value","globalScope","MathModule","commit","Field","isDefined","isDistinct","toValue","flattened","unflattened","of","header","headers","body","getAttr","getSlot","getItem","conditional","thenTerm","elseTerm","or","and","lambda","template","stringValue","numberValue","booleanValue","FieldInterpolator","Text","Attr","Slot","$key","$value","ImmutableFlag","flags","setValue","updatedValue","bitwiseOr","Expression","BitwiseOrOperator","bitwiseXor","BitwiseXorOperator","bitwiseAnd","BitwiseAndOperator","PlusOperator","MinusOperator","TimesOperator","DivideOperator","modulo","ModuloOperator","not","bitwiseNot","positive","Interpreter","isAliased","isMutable","alias","branch","SlotInterpolator","typeOrder","keyEquals","keyInterpolator","valueInterpolator","AttrInterpolator","LtOperator","LeOperator","EqOperator","NeOperator","GeOperator","GtOperator","LambdaFunc","builder","ValueBuilder","Num","Data","wrap","fromArray","fromObject","fieldCount","isObject","valueCount","member","modified","lastIndexOf","subRecord","attr","pushScope","changed","oldItem","newItem","popScope","recordString","itemString","toArray","toObject","RecordCursor","RecordInterpolator","xs","ys","RecordMap","AliasedFlag","pushField","pushValue","direction","setItem","table","RecordMapView","hashTable","setAliased","pushAliased","setMutable","updateMutable","pushMutable","field_1","setAttrAliased","setAttrMutable","updateAttrMutable","field_2","setSlotAliased","setSlotMutable","updateSlotMutable","field_3","setItemAliased","setItemMutable","newItems","spliceAliased","spliceMutable","deleteAliased","deleteMutable","itemCount","_b","clearAliased","clearMutable","l","getByte","setByte","setByteAliased","setByteMutable","addByte","addByteAliased","addByteMutable","addData","data","addUint8Array","addUint8ArrayAliased","addUint8ArrayMutable","asUint8Array","byteOffset","writeBase16","toBase16","writeBase64","toBase64","xn","yn","fromBase16","fromBase64","DataOutput","valueOf","text","cache","TextOutput","isInfinite","isUint32","Uint32Flag","isUint64","Uint64Flag","ceil","NumInterpolator","uint32","uint64","Infinity","negativeZero","one","negativeOne","nan","num","TypeMask","true","false","cond","ConditionalOperator","OrOperator","AndOperator","NotOperator","BitwiseNotOperator","NegativeOperator","PositiveOperator","Operator","binary","operand1","operator","operand2","operand","BinaryOperator","BinaryOperatorInterpolator","operand1Interpolator","operand2Interpolator","UnaryOperator","UnaryOperatorInterpolator","operandInterpolator","ifTerm","willOperate","didOperate","ConditionalOperatorInterpolator","ifTermInterpolator","thenTermInterpolator","elseTermInterpolator","InterpreterException","InterpreterSettings","maxScopeDepth","withMaxScopeDepth","scopeStack","scopeDepth","peekScope","getScope","newScopeStack","oldScopeStack","swapScope","newScope","oldScope","willSelect","didSelect","willTransform","didTransform","objects","scopes","argument1","argument2","InvokeOperator","func","Func","InvokeOperatorInterpolator","funcInterpolator","argsInterpolator","selected","forSelected","GetSelector","GetAttrSelector","GetItemSelector","children","descendants","FilterSelector","debugThen","IdentitySelector","KeysSelector","ValuesSelector","ChildrenSelector","DescendantsSelector","LiteralSelector","mapSelected","then","oldField","child","oldKey","newKey","oldChild","newChild","filterSelected","precedence","bindings","params","arg","BridgeFunc","MaxFunc","MinFunc","AbsFunc","CeilFunc","FloorFunc","RoundFunc","SqrtFunc","PowFunc","RateFunc","RandomFunc","rate","KeyEffect","period","v0","now","dv","FormException","Form","withTag","TagForm","withUnit","UnitForm","forString","StringForm","forNumber","NumberForm","forBoolean","BooleanForm","forAny","AnyForm","forItem","ItemForm","forValue","ValueForm","mold","ValueCursor","ValueEntryCursor","keyForm","valueForm","pair","Inlet","inlet","bindInput","unbindInput","Outlet","outlet","outputIterator","bindOutput","unbindOutput","OutletCombinators","define","memoize","watch","combinator","MemoizeValueCombinator","MapValueCombinator","WatchValueCombinator","MapInlet","decohereOutputKey","recohereOutputKey","MapOutlet","keyIterator","MapOutletCombinators","reduce","MemoizeMapCombinator","FilterFieldsCombinator","MapFieldValuesCombinator","ReduceFieldsCombinator","WatchFieldsCombinator","StreamletException","StreamletScope","Streamlet","streamlet","setStreamletScope","setStreamletContext","AbstractInlet","newInput","oldInput","disconnectInputs","disconnectOutputs","decohereOutput","version","willDecohereOutput","onDecohereOutput","didDecohereOutput","recohereOutput","willRecohereOutput","recohereInput","onRecohereOutput","didRecohereOutput","AbstractOutlet","outputs","unbindOutputs","oldOutputs","decohereInput","willDecohereInput","onDecohereInput","didDecohereInput","willRecohereInput","onRecohereInput","didRecohereInput","AbstractInoutlet","decohere","willDecohere","onDecohere","didDecohere","recohere","willRecohere","onRecohere","didRecohere","KeyOutlet","AbstractMapInlet","effect","oldEffects","effects","willDecohereOutputKey","onDecohereOutputKey","didDecohereOutputKey","willRecohereOutputKey","recohereInputKey","onRecohereOutputKey","didRecohereOutputKey","AbstractMapOutlet","oldOutlets","outlets","keyOutlet","decohereInputKey","willDecohereInputKey","onDecohereInputKey","didDecohereInputKey","willRecohereInputKey","onRecohereInputKey","didRecohereInputKey","AbstractMapInoutlet","decohereKey","willDecohereKey","onDecohereKey","didDecohereKey","recohereKey","willRecohereKey","onRecohereKey","didRecohereKey","AbstractMapInletOutlet","AbstractMapInletMapOutlet","oldOutputEffects","outputEffects","oldInputEffects","inputEffects","oldEffect","newEffect","OutletInlet","OutletMapInlet","ValueInput","ValueOutput","MapInput","MapOutput","FilterFieldsOperator","key_1","MapValueOperator","MapFieldValuesOperator","ReduceFieldsOperator","accumulate","combine","WatchValueOperator","WatchFieldsOperator","StreamletInlet","willDecohereInlet","didDecohereInlet","willRecohereInlet","didRecohereInlet","StreamletOutlet","getOutput","willDecohereOutlet","didDecohereOutlet","willRecohereOutlet","didRecohereOutlet","StreamletInoutlet","InoutletDescriptor","AbstractStreamlet","context","reflectInletKey","getPrototypeOf","reflectOutletKey","inoutlet","onDecohereOutlets","onRecohereInlets","onRecohereOutlets","getInput","streamletPrototype","name_1","inlets","inletDescriptor","InletDescriptor","reflectInletField","reflectInoutletField","name_2","outletDescriptor","OutletDescriptor","reflectOutletField","decohereOutlets","name_3","recohereInlets","name_4","recohereOutlets","name_5","reflectEachInlet","name_6","reflectEachOutlet","name_7","reflectInletCount","_","reflectOutletCount","reflectInletIndex","name_8","reflectOutletIndex","name_9","reflectValueInletField","reflectMapInletField","reflectValueOutletField","reflectMapOutletField","inoutletDescriptor","reflectValueInoutletField","reflectMapInoutletField","inoutlets","decorateInlet","options","decorateOutlet","decorateInoutlet","Out","Inout","RecordOutlet","AbstractRecordOutlet","streamletScope","streamletContext","hasOwn","RecordStreamlet","compile","compileInlet","AbstractRecordStreamlet","castInput","coerceInput","RecordFieldUpdater","RecordModel","bindValue","expr","fieldUpdater","valueInput","Dataflow","fieldUpdaters","oldFieldUpdaters","materialize","materializeItem","materializeField","materializeValue","RecordScope","compileItem","compileField","compileValue","reify","reifier","Reifier","system","reifyItem","model","GetOutlet","keyInput","keyInlet","mapInput","mapInlet","BinaryOutlet","operand1Input","operand1Inlet","operand2Input","operand2Inlet","UnaryOutlet","operandInput","operandInlet","argument","ConditionalOutlet","ifInput","ifInlet","thenInput","thenInlet","elseInput","elseInlet","OrOutlet","AndOutlet","BitwiseOrOutlet","BitwiseXorOutlet","BitwiseAndOutlet","LtOutlet","LeOutlet","EqOutlet","NeOutlet","GeOutlet","GtOutlet","PlusOutlet","MinusOutlet","TimesOutlet","DivideOutlet","ModuloOutlet","NotOutlet","BitwiseNotOutlet","NegativeOutlet","PositiveOutlet","InvokeOutlet","funcInput","funcInlet","argsInput","argsInlet","compileSelector","compileOperator","compileIdentitySelector","compileGetSelector","compileGetAttrSelector","compileGetItemSelector","compileKeysSelector","compileValuesSelector","compileChildrenSelector","compileDescendantsSelector","compileFilterSelector","getOutlet","compileConditionalOperator","compileBinaryOperator","compileUnaryOperator","compileInvokeOperator","ifOutlet","thenOutlet","elseOutlet","compileOrOperator","compileAndOperator","compileBitwiseOrOperator","compileBitwiseXorOperator","compileBitwiseAndOperator","compileLtOperator","compileLeOperator","compileEqOperator","compileNeOperator","compileGeOperator","compileGtOperator","compilePlusOperator","compileMinusOperator","compileTimesOperator","compileDivideOperator","compileModuloOperator","compileBinaryOutlet","operand1Outlet","operand2Outlet","compileNotOperator","compileBitwiseNotOperator","compileNegativeOperator","compilePositiveOperator","compileUnaryOutlet","operandOutlet","invokeOutlet","funcOutlet","argsOutlet","Recon","structureParser","ReconStructureParser","structureWriter","ReconStructureWriter","recon","parseBlockString","blockParser","sizeOfItem","sizeOfBlock","sizeOfBlockItem","writeItem","writeBlock","writeBlockItem","toBlockString","toData","toBlockData","isIdentStartChar","isIdentChar","toRecon","toReconBlock","parseRecon","BlockParser","keyParser","valueParser","block","valueBuilder","parseBlockExpression","AttrParser","parseString","parseIdent","parseBlock","BlockItemParser","fieldParser","parseAttr","recordBuilder","parseRecord","parseMarkup","parseData","parseSelector","InlineItemParser","RecordParser","MarkupParser","textOutput","parseInlineItem","DataParser","base64Parser","dataOutput","IdentParser","ident","StringParser","quote","NumberParser","DecimalParser","HexadecimalParser","LambdaFuncParser","bindingsParser","templateParser","parseConditionalOperator","ConditionalOperatorParser","ifParser","thenParser","elseParser","parseOrOperator","OrOperatorParser","lhsParser","rhsParser","parseAndOperator","AndOperatorParser","parseBitwiseOrOperator","BitwiseOrOperatorParser","parseBitwiseXorOperator","BitwiseXorOperatorParser","parseBitwiseAndOperator","BitwiseAndOperatorParser","parseComparisonOperator","ComparisonOperatorParser","parseAttrExpression","AttrExpressionParser","parseAdditiveOperator","AdditiveOperatorParser","parseMultiplicativeOperator","MultiplicativeOperatorParser","parsePrefixOperator","PrefixOperatorParser","operandParser","parseInvokeOperator","InvokeOperatorParser","exprParser","argsParser","parsePrimary","PrimaryParser","parseLiteral","LiteralParser","SelectorParser","ReconParser","parseBlockItem","parseLambdaFunc","bool","AttrWriter","sizeOfValue","isExtant","sizeOfBlockValue","writeValue","writeBlockValue","SlotWriter","BlockWriter","inBlock","inMarkup","inBraces","inBrackets","markupSafe","isExpression","isAttr","isText","sizeOfMarkupText","isRecord","isMarkupSafe","isField","isBool","isValue","isIdent","isNum","sizeOfSlot","writeMarkupText","writeSlot","PrimaryWriter","inParens","MarkupTextWriter","escape","DataWriter","IdentWriter","LambdaFuncWriter","sizeOfPrimary","writePrimary","ConditionalOperatorWriter","InfixOperatorWriter","PrefixOperatorWriter","InvokeOperatorWriter","LiteralSelectorWriter","sizeOfThen","writeThen","GetSelectorWriter","GetAttrSelectorWriter","GetItemSelectorWriter","KeysSelectorWriter","ValuesSelectorWriter","ChildrenSelectorWriter","DescendantsSelectorWriter","FilterSelectorWriter","ReconWriter","sizeOfAttr","writeAttr","isBlockSafe","sizeOfRecord","writeRecord","sizeOfData","writeData","sizeOfText","writeText","sizeOfNum","writeNum","sizeOfUint32","writeUint32","lowercase","sizeOfUint64","writeUint64","sizeOfBool","writeBool","sizeOfLambdaFunc","writeLambdaFunc","sizeOfConditionalOperator","writeConditionalOperator","sizeOfInfixOperator","writeInfixOperator","sizeOfPrefixOperator","writePrefixOperator","sizeOfInvokeOperator","writeInvokeOperator","sizeOfIdentitySelector","writeIdentitySelector","sizeOfThenIdentitySelector","writeThenIdentitySelector","sizeOfLiteralSelector","writeLiteralSelector","sizeOfThenLiteralSelector","writeThenLiteralSelector","sizeOfGetSelector","writeGetSelector","sizeOfThenGetSelector","writeThenGetSelector","sizeOfGetAttrSelector","writeGetAttrSelector","sizeOfThenGetAttrSelector","writeThenGetAttrSelector","sizeOfGetItemSelector","writeGetItemSelector","sizeOfThenGetItemSelector","writeThenGetItemSelector","sizeOfKeysSelector","writeKeysSelector","sizeOfThenKeysSelector","writeThenKeysSelector","sizeOfValuesSelector","writeValuesSelector","sizeOfThenValuesSelector","writeThenValuesSelector","sizeOfChildrenSelector","writeChildrenSelector","sizeOfThenChildrenSelector","writeThenChildrenSelector","sizeOfDescendantsSelector","writeDescendantsSelector","sizeOfThenDescendantsSelector","writeThenDescendantsSelector","sizeOfFilterSelector","writeFilterSelector","sizeOfThenFilterSelector","writeThenFilterSelector","sizeOfExtant","writeExtant","sizeOfAbsent","writeAbsent","isSlot","sizeOfSelector","sizeOfOperator","sizeOfFunc","writeSelector","writeOperator","writeFunc","UriException","Uri","scheme","authority","path","query","fragment","withScheme","UriScheme","withSchemePart","schemePart","withSchemeName","schemeName","withAuthority","UriAuthority","withAuthorityPart","authorityPart","user","withUser","userPart","withUserPart","username","withUsername","password","withPassword","host","withHost","hostPart","withHostPart","hostAddress","hostName","withHostName","hostIPv4","withHostIPv4","hostIPv6","withHostIPv6","port","withPort","portPart","withPortPart","portNumber","withPortNumber","withPath","components","UriPath","withPathPart","pathPart","withPathName","pathName","withName","parentPath","parent","basePath","base","appendedPath","appendedSlash","appendedSegment","segment","prependedPath","prependedSlash","prependedSegment","withQuery","UriQuery","withQueryPart","updatedQuery","removedQuery","appendedQuery","prependedQuery","withFragment","UriFragment","withFragmentPart","fragmentPart","identifier","withFragmentIdentifier","fragmentIdentifier","endpoint","resolve","relative","removeDotSegments","isAbsolute","merge","unresolve","absolute","undefined","unmerge","uri","queryPart","UriParser","standardParser","parseAbsoluteString","pathBuilder","UriPathBuilder","queryBuilder","UriQueryBuilder","UriForm","isUnreservedChar","isSubDelimChar","isSchemeChar","isUserInfoChar","isUserChar","isHostChar","isPathChar","isQueryChar","isParamChar","isFragmentChar","toLowerCase","writeScheme","writeUserInfo","userInfo","writeEncoded","writeUser","writeHost","address","writeHostLiteral","writePathSegment","writeQuery","writeParam","param","writeFragment","writePctEncoded","parseSchemeString","UriUser","UriHost","hostname","ipv4","ipv6","hostIPv5","UriPort","number","parseAuthorityString","parseUserString","UriHostUndefined","UriHostName","UriHostIPv4","UriHostIPv6","parseHostString","parsePortString","isRelative","addPath","addSegment","foot","isSubpathOf","a","addSlash","UriPathSlash","rest","slash","prev","UriPathEmpty","cacheSegment","UriPathSegment","parsePathString","pathForm","UriPathForm","segmentCache","setTail","dealias","aliased","component","xi","addParam","addQuery","UriQueryUndefined","cacheKey","UriQueryParam","parseQueryString","keyCache","value_1","parseFragmentString","UriCache","resolveCache","unresolveCache","pathEmpty","absoluteParser","UriAbsoluteParser","parseAbsolute","schemeParser","UriSchemeParser","parseScheme","authorityParser","UriAuthorityParser","parseAuthority","userParser","UriUserParser","parseUser","hostParser","UriHostParser","parseHost","hostAddressParser","UriHostAddressParser","parseHostAddress","hostLiteralParser","UriHostLiteralParser","parseHostLiteral","portParser","UriPortParser","parsePort","pathParser","UriPathParser","parsePath","queryParser","UriQueryParser","parseQuery","fragmentParser","UriFragmentParser","parseFragment","look","usernameOutput","passwordOutput","keyOutput","valueOutput","LengthException","Length","units","basis","emValue","pxValue","emUnit","remValue","remUnit","pctValue","pctUnit","px","em","rem","pct","LengthInterpolator","PxLength","EmLength","RemLength","PctLength","UnitlessLength","unitless","fromCssValue","CSSUnitValue","defaultUnits","fromValue","LengthParser","LengthForm","isAny","Node","node","Element","fontSize","getComputedStyle","parseFloat","parentNode","document","documentElement","toCssValue","l0","l1","e","unitsOutput","Angle","norm","total","deg","degValue","rad","radValue","grad","gradValue","turn","turnValue","AngleInterpolator","DegAngle","RadAngle","GradAngle","TurnAngle","AngleParser","AngleForm","a0","a1","angle","VectorR2","VectorR2Interpolator","isInit","v1","ShapeR2","BoxR2","yMin","yMax","PointR2","isTuple","fromTuple","SegmentR2","CircleR2","vector","intersects","f","transformX","transformY","PointR2Interpolator","origin","p0","p1","CurveR2","draw","drawMove","drawRest","transformDraw","transformDrawMove","transformDrawRest","writePath","writeMove","writeRest","toPathString","outputSettings","quadratic","QuadraticCurveR2","cubic","CubicCurveR2","elliptic","cx","cy","rx","ry","phi","da","EllipticCurveR2","CurveR2Parser","x0Parser","y0Parser","command","SegmentR2Parser","QuadraticCurveR2Parser","CubicCurveR2Parser","EllipticCurveR2Parser","parseRest","BezierCurveR2","interpolateX","interpolateY","interpolate","containsPoint","containsSegment","ax","ay","bx","by","intersectsPoint","intersectsSegment","py","qx","qy","sx","sy","pqx","pqy","pqr","rs","rr","sr","moveTo","lineTo","SegmentR2Interpolator","x1Parser","y1Parser","x12","y12","x02","y02","quadraticCurveTo","x2Parser","y2Parser","x23","y23","x13","y13","x03","y03","bezierCurveTo","x3Parser","y3Parser","cos","a0x","a0y","a1x","a1y","b0x","b0y","b1x","b1y","b0","atan2","b1","toEndpoints","ellipse","large","sweep","cosPhi","sinPhi","cosA0","sinA0","cosA1","sinA1","fromEndpoints","x0p","y0p","rx2","ry2","x0p2","y0p2","sp","cxp","cyp","ux","uy","vx","vy","uv","uu","vv","acos","rxParser","ryParser","phiParser","SplineR2","curves","closed","isClosed","bounds","c0","curves0","curves1","subdivide","oldCurves","newCurves","boundingBox","curve","closePath","pathString","open","SplineR2Builder","SplineR2Parser","arcTo","dx01","dy01","dx12","dy12","r0x","r0y","r1x","r1y","r0x0","r0y0","r0x1","r0y1","r1x1","r1y1","r1x2","r1y2","intersection","arc","ccw","rect","h","xParser","yParser","curveParser","prevCurve","PathR2","splines","splines0","splines1","oldSplines","newSplines","spline","toAttributeString","PathR2Builder","PathR2Parser","splineParser","containsBox","containsCircle","dx0","dy0","dx1","dy1","dxMin","dyMin","dxMax","dyMax","intersectsBox","intersectsCircle","unitX","unitY","dcx0","dcy0","dcx1","dcy1","uc","u0","u1","CircleR2Interpolator","hitY","hitX","d0","d1","BoxR2Interpolator","SetR2","shapes","oldShapes","newShapes","shape","Transform","translate","translateX","translateY","scaleX","scaleY","rotate","skew","skewX","skewY","toMatrix","toAffine","toCssTransformComponent","CSSTransformValue","AffineTransformInterpolator","IdentityTransform","TranslateTransform","ScaleTransform","RotateTransform","SkewTransform","affine","tx","ty","AffineTransform","list","transforms","TransformList","fromCssTransform","fromCssTransformComponent","CSSTranslate","CSSRotate","CSSScale","CSSSkew","CSSMatrixComponent","TransformListParser","TransformForm","TransformParser","identOutput","TranslateTransformParser","ScaleTransformParser","RotateTransformParser","SkewTransformParser","AffineTransformParser","CSSKeywordValue","conformsTo","TranslateTransformInterpolator","x_1","y_1","f0","f1","ScaleTransformInterpolator","cosA","sinA","RotateTransformInterpolator","angle_1","angleParser","tan","SkewTransformInterpolator","multiply","m00","m10","m01","m11","m02","m12","det","MIN_VALUE","DOMMatrix","fromMatrix","matrix","x0_1","y0_1","x1_1","y1_1","tx_1","ty_1","entryParser","yi","inverseTransforms","n_1","TransformListInterpolator","transforms0","transforms1","transformParser","GeoProjection","projection","project","unproject","GeoShape","GeoBox","lngMin","latMin","lngMax","latMax","GeoPoint","GeoSegment","lng","lat","normalized","oldLng","oldLat","newLng","normalizeLng","newLat","normalizeLat","GeoPointInterpolator","lng0","lat0","lng1","lat1","uw","ue","GeoCurve","interpolateLng","interpolateLat","lng01","lat01","forEachCoord","forEachCoordRest","GeoSegmentInterpolator","GeoSpline","fromPoints","points","p2","isPoints","GeoSplineBuilder","isAnySpline","GeoPath","centroid","lngSum","latSum","fromSplines","isSplines","GeoPathBuilder","isAnyPath","bottomLeft","topRight","GeoBoxInterpolator","globe","GeoSet","GeoJson","GeoJsonGeometry","GeoJsonFeature","GeoJsonFeatureCollection","toShape","toShapes","coordinates","geometries","GeoJsonPoint","GeoJsonMultiPoint","GeoJsonLineString","GeoJsonMultiLineString","GeoJsonPolygon","GeoJsonMultiPolygon","GeoJsonGeometryCollection","position","positions","lineString","multiLineString","polygons","polygon","multiPolygon","o","geometry","properties","feature","features","TimeZone","isUTC","isLocal","getTimezoneOffset","forOffset","forName","utc","zone","TimeZoneForm","DateTime","time","toUTCLocalDate","getUTCFullYear","withYear","year","month","day","hour","minute","millisecond","date","setUTCFullYear","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","fromUTCLocalDate","getUTCMonth","withMonth","getUTCDate","withDay","getUTCHours","withHour","getUTCMinutes","withMinute","getUTCSeconds","withSecond","getUTCMilliseconds","withMillisecond","getUTCDay","toDate","DateTimeInterpolator","format","DateTimeFormat","iso8601","writeDate","current","local","UTC","positional","DateTimeForm","DateTimeParser","dateParser","DateTimeLocale","periods","weekdays","shortWeekdays","months","shortMonths","Periods","Weekdays","ShortWeekdays","Months","ShortMonths","DateTimeSpecifiers","locale","specifiers","_standard","Y","monthOfYear","B","withLocale","shortMonth","dayOfMonth","A","weekday","shortWeekday","H","hour24","I","hour12","M","S","L","parseDate","parseDateTime","YearFormat","MonthOfYearFormat","MonthFormat","ShortMonthFormat","DayOfMonthFormat","WeekdayFormat","ShortWeekdayFormat","Hour24Format","Hour12Format","PeriodFormat","MinuteFormat","SecondFormat","MillisecondFormat","pattern","PatternFormat","parseDateNumber","factory","minDigits","maxDigits","cont","parseDateString","writeDateNumber2","writeDateNumber3","writeDateNumber4","YearParser","MonthOfYearParser","MonthParser","ShortMonthParser","DayOfMonthParser","WeekdayParser","ShortWeekdayParser","Hour24Parser","Hour12Parser","PeriodParser","MinuteParser","SecondParser","MillisecondParser","charAt","PatternParser","TimeInterval","ds","FilterTimeInterval","YearInterval","MonthInterval","WeekInterval","DayInterval","HourInterval","MinuteInterval","SecondInterval","MillisecondInterval","years","week","milliseconds","MillisPerSecond","MillisPerMinute","MillisPerHour","UnitTimeInterval","every","YearsInterval","stride","dtz","MillisecondsInterval","TimeDomain","TimeRange","TimeDomainInterpolator","TimeRangeInterpolator","TimeScale","tMin","tMax","tSum","t2","t3","TimeScaleInterpolator","DownlinkFlags","Envelope","withPrio","prio","withRate","EventMessage","CommandMessage","LinkRequest","LinkedResponse","SyncRequest","SyncedResponse","UnlinkRequest","UnlinkedResponse","AuthRequest","AuthedResponse","DeauthRequest","DeauthedResponse","HostAddressed","withNode","withLane","lane","withBody","LaneAddressed","LinkAddressed","RemoteHost","hostUri","reconnectTimer","reconnectTimeout","idleTimer","credentials","unlinkDelay","UnlinkDelay","maxReconnectTimeout","MaxReconnectTimeout","idleTimeout","IdleTimeout","sendBufferSize","SendBufferSize","isAuthenticated","authenticated","isIdle","sendBuffer","downlinkCount","uriCache","authenticate","isConnected","request","openDownlink","downlink","clearIdle","nodeUri","laneUri","nodeDownlinks","downlinks","openUp","hostDidConnect","unlinkDownlink","onUnlinkRequest","closeDownlink","watchIdle","closeUp","onEnvelope","envelope","onEventMessage","onCommandMessage","onLinkRequest","onLinkedResponse","onSyncRequest","onSyncedResponse","onUnlinkedResponse","onAuthRequest","onAuthedResponse","onDeauthRequest","onDeauthedResponse","onUnknownEnvelope","resolvedMessage","response","resolvedResponse","hostDidAuthenticate","hostDidDeauthenticate","onConnect","onDisconnect","hostDidDisconnect","onError","hostDidFail","reconnect","setTimeout","clearReconnect","clearTimeout","checkIdle","close","closeHost","Host","WebSocketHost","WebSocket","socket","readyState","OPEN","WebSocket_1","protocols","onopen","onWebSocketOpen","onmessage","onWebSocketMessage","onclose","onWebSocketClose","onerror","onWebSocketError","isOnline","send","DownlinkModel","keepLinked","views","keepSynced","isLinked","status","Linked","isSynced","Synced","session","addDownlink","view","removeDownlink","oldViews","newViews","unlink","doUnlink","Linking","Syncing","Unlinking","sync","link","Downlink","observers","observer","onEvent","onCommand","willLink","_c","didLink","_d","willSync","_e","didSync","_f","willUnlink","_g","didUnlink","_h","didConnect","_j","didDisconnect","_k","didClose","_l","didFail","_m","ownHostUri","ownNodeUri","ownLaneUri","ownPrio","ownRate","ownBody","observe","unobserve","oldObservers","oldObserver","newObservers","initForm","DownlinkInitForm","EventDownlinkModel","EventDownlink","getDownlink","ListDownlinkModel","listWillUpdate","oldEntry","listDidUpdate","newEntry","listWillRemove","listDidRemove","listWillMove","listDidMove","listWillClear","listDidClear","snapshot","event","onUpdateEvent","onInsertEvent","onMoveEvent","onRemoveEvent","onDropEvent","onTakeEvent","onClearEvent","listWillDrop","listDidDrop","listWillTake","listDidTake","ListDownlink","state0","willUpdate","didUpdate","willMove","didMove","willRemove","didRemove","willDrop","didDrop","willTake","didTake","willClear","didClear","ownValueForm","newObject","newObjects","oldValues","oldObjects","newResult","oldObject","initialState","didAliasModel","MapDownlinkModel","mapWillUpdate","mapDidUpdate","mapWillRemove","mapDidRemove","mapWillDrop","mapDidDrop","mapWillTake","mapDidTake","mapWillClear","mapDidClear","MapDownlink","ownKeyForm","keyObject","nextKeyObject","nextObject","previousKeyObject","previousObject","ValueDownlinkModel","valueWillSet","valueDidSet","onSetEvent","ValueDownlink","willSet","didSet","DownlinkRecord","ListDownlinkRecord","MapDownlinkRecord","ValueDownlinkRecord","DownlinkReifier","warp","reifyField","reifyValue","reifyModel","DownlinkStreamlet","bodyValue","downlinkRecord","inputHostUri","inputNodeUri","inputLaneUri","inputPrio","inputRate","inputBody","inputType","client","downlinkMap","downlinkValue","_reifier","BaseRef","openRef","closeRef","didAuthenticate","didDeauthenticate","LaneRef","hostRef","HostRef","nodeRef","NodeRef","laneRef","downlinkList","WarpClient","keepOnline","onOnline","onOffline","watchOnline","online","hosts","addEventListener","removeEventListener","getHost","openHost","hostDownlinks","ref","refs"],"mappings":"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","file":"/Users/c9r/Swim/Code/swim-continuum/swim-system-js/@swim/system/dist/main/swim-system.min.js","sourcesContent":["// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Type that implements a universal equality relation.\n */\nexport interface Equals {\n  /**\n   * Returns `true` if `this` is equal to `that`, otherwise returns `false`.\n   */\n  equals(that: unknown): boolean;\n}\n\nexport const Equals = function (x: unknown, y: unknown): boolean {\n  if (x === y) {\n    return true;\n  } else if (x !== void 0 && x !== null && typeof (x as Equals).equals === \"function\") {\n    return (x as Equals).equals(y);\n  }\n  return false;\n} as {\n  /**\n   * Returns `true` if `x` conforms to [[Equals]] and is [[Equals.equals\n   * equal]] to `y`, otherwise returns `x === y`.\n   */\n  (x: unknown, y: unknown): boolean;\n\n  /**\n   * Returns `true` if `object` conforms to the [[Equals]] interface.\n   */\n  is(object: unknown): object is Equals;\n};\n\nEquals.is = function (object: unknown): object is Equals {\n  return object !== void 0 && object !== null\n      && typeof (object as Equals).equals === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Equals} from \"./Equals\";\n\n/**\n * Type that is convertible to a hash value consistent with its universal\n * equality relation.\n */\nexport interface HashCode extends Equals {\n  /**\n   * Returns a 32-bit hash value for this object.\n   */\n  hashCode(): number;\n}\n\nexport const HashCode = function (x: HashCode | null | undefined): number {\n  if (x === void 0) {\n    return 0;\n  } else if (x === null) {\n    return 1;\n  } else {\n    return x.hashCode();\n  }\n} as {\n  /**\n   * Returns the [[HashCode.hashCode hash code]] of `x`, if `x` is an object;\n   * otherwise returns `0` or `1` if `x` is `undefined` or `null`, respectively.\n   */\n  (x: HashCode | null | undefined): number;\n\n  /**\n   * Returns `true` if `object` conforms to the [[HashCode]] interface.\n   */\n  is(object: unknown): object is HashCode;\n};\n\nHashCode.is = function (object: unknown): object is HashCode {\n  return object !== void 0 && object !== null\n      && typeof (object as HashCode).hashCode === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Type that implements a universal equivalence relation.\n */\nexport interface Equivalent {\n  /**\n   * Returns `true` if `this` is equivalent to `that` within some optionally\n   * specified error tolerance `epsilon`, otherwise returns `false`.\n   */\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n}\n\nexport const Equivalent = function (x:unknown, y: unknown, epsilon?: number): boolean {\n  if (x === y) {\n    return true;\n  } else if (x !== void 0 && x !== null && typeof (x as Equivalent).equivalentTo === \"function\") {\n    return (x as Equivalent).equivalentTo(y, epsilon);\n  }\n  return false;\n} as {\n  /**\n   * Returns `true` if `x` conforms to [[Equivalent]] and is\n   * [[Equivalent.equivalentTo equivalent to]] `y`, otherwise returns `x === y`.\n   */\n  (x: unknown, y: unknown, epsilon?: number): boolean;\n\n  /**\n   * Returns `true` if `object` conforms to the [[Equivalent]] interface.\n   */\n  is(object: unknown): object is Equivalent;\n\n  /**\n   * Default equivalence tolerance.\n   */\n  Epsilon: number;\n};\n\nEquivalent.is = function (object: unknown): object is Equivalent {\n  return object !== void 0 && object !== null\n      && typeof (object as Equivalent).equivalentTo === \"function\";\n};\n\nEquivalent.Epsilon = 1.0e-8;\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Type that implements a universal partial order.\n */\nexport interface Compare {\n  /**\n   * Returns the relative order of `this` with respect to `that`.  Returns `-1`\n   * if `this` orders before `that`; returns `1` if `this` orders after `that`;\n   * returns `0` if `this` and `that` are equivalent; and returns `NaN` if\n   * `this` is not comparable to `that`.\n   */\n  compareTo(that: unknown): number;\n}\n\nexport const Compare = function (x: unknown, y: unknown): number {\n  if (x === void 0) {\n    if (y === void 0) {\n      return 0;\n    } else {\n      return 1;\n    }\n  } else if (x === null) {\n    if (y === void 0) {\n      return -1;\n    } else if (y === null) {\n      return 0;\n    } else {\n      return 1;\n    }\n  } else if (typeof (x as Compare).compareTo === \"function\") {\n    if (y === void 0 || y === null) {\n      return -1;\n    } else {\n      return (x as Compare).compareTo(y);\n    }\n  } else {\n    return NaN;\n  }\n} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`. Returns `-1` if `x`\n   * orders before `y`; returns `1` if `x` orders after `y`; returns `0` if `x`\n   * and `y` are equivalent; and returns `NaN` if `x` is not comparable to `y`.\n   * Objects are [[Compare.compareTo compared to]] each other when both are\n   * defined, otherwise defined objects order before `null`, and `null` orders\n   * before `undefined`.\n   */\n  (x: unknown, y: unknown): number;\n\n  /**\n   * Returns `true` if `object` conforms to the [[Compare]] interface.\n   */\n  is(object: unknown): object is Compare;\n};\n\nCompare.is = function (object: unknown): object is Compare {\n  return object !== void 0 && object !== null\n      && typeof (object as Compare).compareTo === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface FromAny<T, U = never> {\n  fromAny(value: T | U): T;\n}\n\nexport const FromAny = {} as {\n  /**\n   * Returns `true` if `object` conforms to the [[FromAny]] interface.\n   */\n  is<T, U = never>(object: unknown): object is FromAny<T, U>;\n};\n\nFromAny.is = function <T, U = never>(object: unknown): object is FromAny<T, U> {\n  return object !== void 0 && object !== null\n      && typeof (object as FromAny<T, U>).fromAny === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface ToAny<T> {\n  toAny(): T;\n}\n\nexport const ToAny = {} as {\n  /**\n   * Returns `true` if `object` conforms to the [[ToAny]] interface.\n   */\n  is<T>(object: unknown): object is ToAny<T>;\n};\n\nToAny.is = function <T>(object: unknown): object is ToAny<T> {\n  return object !== void 0 && object !== null\n      && typeof (object as ToAny<T>).toAny === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Decorator that memoizes the computed value of a getter or nullary method.\n */\nexport const Lazy: MethodDecorator = function <T>(target: Object, propertyKey: string | symbol,\n                                                  descriptor: TypedPropertyDescriptor<T>): void {\n  const writable = descriptor.writable;\n  const enumerable = descriptor.enumerable;\n  const configurable = descriptor.configurable;\n  if (descriptor.get !== void 0) {\n    const get = descriptor.get;\n    descriptor.get = function (this: unknown): T {\n      const value = get.call(this);\n      Object.defineProperty(target, propertyKey, {\n        value,\n        writable,\n        enumerable,\n        configurable,\n      });\n      return value;\n    };\n  } else if (descriptor.value !== void 0) {\n    const method = descriptor.value as unknown as () => T;\n    descriptor.value = function (this: unknown): T {\n      const value = method.call(this);\n      Object.defineProperty(target, propertyKey, {\n        value: function (): T {\n          return value;\n        },\n        writable,\n        enumerable,\n        configurable,\n      });\n      return value;\n    } as unknown as T;\n  } else {\n    throw new Error(\"invalid lazy property descriptor\");\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nif (String.prototype.codePointAt === void 0) {\n  String.prototype.codePointAt = function (this: string, index: number): number | undefined {\n    const size = this.length;\n    index = index ? Number(index) : 0; // Coerce to number.\n    if (index !== index) { // Convert NaN to zero.\n      index = 0;\n    }\n    if (index >= 0 && index < size) {\n      const c1 = this.charCodeAt(index);\n      if (c1 <= 0xd7ff || c1 >= 0xe000) { // U+0000..U+D7FF | U+E000..U+FFFF\n        return c1;\n      } else if (c1 <= 0xdbff && index + 1 < size) {\n        const c2 = this.charCodeAt(index + 1);\n        if (c2 >= 0xdc00 && c2 <= 0xdfff) { // U+10000..U+10FFFF\n          return ((c1 & 0x03ff) << 10 + c2 & 0x03ff) + 0x10000;\n        }\n      }\n    }\n    return void 0;\n  };\n}\n\nif (String.prototype.offsetByCodePoints === void 0) {\n  String.prototype.offsetByCodePoints = function (this: string, index: number, count: number): number {\n    if (count > 0) {\n      const size = this.length;\n      while (count > 0 && index < size) {\n        const c1 = this.charCodeAt(index);\n        if (c1 <= 0xd7ff || c1 >= 0xe000) { // U+0000..U+D7FF | U+E000..U+FFFF\n          index += 1;\n        } else if (c1 <= 0xdbff && index + 1 < size) {\n          const c2 = this.charCodeAt(index + 1);\n          if (c2 >= 0xdc00 && c2 <= 0xdfff) { // U+10000..U+10FFFF\n            index += 2;\n          } else {\n            index += 1;\n          }\n        } else {\n          index += 1;\n        }\n        count -= 1;\n      }\n    } else if (count < 0) {\n      while (count < 0 && index > 0) {\n        const c2 = this.charCodeAt(index - 1);\n        if (c2 <= 0xd7ff || c2 >= 0xe000) { // U+0000..U+D7FF | U+E000..U+FFFF\n          index -= 1;\n        } else if (c2 >= 0xdc00 && c2 <= 0xdfff && index - 1 > 0) {\n          const c1 = this.charCodeAt(index - 2);\n          if (c1 >= 0xd800 && c1 <= 0xdfff) { // U+10000..U+10FFFF\n            index -= 2;\n          } else {\n            index -= 1;\n          }\n        } else {\n          index -= 1;\n        }\n        count -= 1;\n      }\n    }\n    return index;\n  };\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const Random = {} as {\n  fillBytes(array: Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array): void;\n};\n\nif (typeof window !== \"undefined\" && window.crypto !== void 0) {\n  Random.fillBytes = function (array: Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array): void {\n    window.crypto.getRandomValues(array);\n  };\n} else if (typeof window !== \"undefined\" && (window as any).msCrypto !== void 0) {\n  Random.fillBytes = function (array: Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array): void {\n    ((window as any).msCrypto as RandomSource).getRandomValues(array);\n  };\n} else {\n  Random.fillBytes = function (array: Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array): void {\n    if (array instanceof Int8Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = 128 - Math.round(Math.random() * 256);\n      }\n    } else if (array instanceof Uint8Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = Math.round(Math.random() * 256);\n      }\n    } else if (array instanceof Int16Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = 32768 - Math.round(Math.random() * 65536);\n      }\n    } else if (array instanceof Uint16Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = Math.round(Math.random() * 65536);\n      }\n    } else if (array instanceof Int32Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = 2147483648 - Math.round(Math.random() * 4294967296);\n      }\n    } else if (array instanceof Uint32Array) {\n      for (let i = 0; i < array.length; i += 1) {\n        array[i] = Math.round(Math.random() * 4294967296);\n      }\n    } else {\n      throw new TypeError(\"\" + array);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Endianness of multi-byte words.\n */\nexport type ByteOrder = \"BE\" | \"LE\";\n\nexport const ByteOrder = {} as {\n  /**\n   * Most significant byte first.\n   */\n  readonly BigEndian: ByteOrder;\n\n  /**\n   * Least significant byte first.\n   */\n  readonly LittleEndian: ByteOrder;\n\n  /**\n   * `ByteOrder` of the host machine.\n   */\n  readonly NativeOrder: ByteOrder;\n};\n\nObject.defineProperty(ByteOrder, \"BigEndian\", {\n  value: \"BE\",\n  enumerable: true,\n});\n\nObject.defineProperty(ByteOrder, \"LittleEndian\", {\n  value: \"LE\",\n  enumerable: true,\n});\n\nObject.defineProperty(ByteOrder, \"NativeOrder\", {\n  get(): ByteOrder {\n    let nativeEndian: ByteOrder;\n    const bom = new ArrayBuffer(2);\n    new Uint16Array(bom)[0] = 0xfeff;\n    const b = new Uint8Array(bom);\n    if (b[0] === 0xfe && b[1] === 0xff) {\n      nativeEndian = ByteOrder.BigEndian;\n    } else if (b[0] === 0xff && b[1] === 0xfe) {\n      nativeEndian = ByteOrder.LittleEndian;\n    } else {\n      throw new Error();\n    }\n    Object.defineProperty(ByteOrder, \"NativeOrder\", {\n      value: nativeEndian,\n      enumerable: true,\n    });\n    return nativeEndian;\n  },\n  configurable: true,\n  enumerable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities for comparing and hashing object identities.\n */\nexport const Identity = {} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the hash code of object `x` is less than the hash code of object `y`;\n   * returns `1` if the hash code of object `x` is greater than the hash code\n   * of object `y`; and returns `0` if `x` and `y` are identical objects.\n   * If either `x` or `y` is `null` or `undefined`, then objects order before\n   * `null`, and `null` orders before `undefined`.\n   */\n  compare(x: object | null | undefined, y: object | null | undefined): number;\n\n  /**\n   * Returns a unique 32-bit hash value for a particular object instance.\n   */\n  hash(x: object | null | undefined): number;\n};\n\nIdentity.compare = function (x: object | null | undefined, y: object | null | undefined): number {\n  if (typeof x === \"object\" && x !== null) {\n    if (typeof y === \"object\" && y !== null) {\n      const xh = Identity.hash(x);\n      const yh = Identity.hash(y);\n      return xh < yh ? -1 : xh > yh ? 1 : 0;\n    } else {\n      return -1;\n    }\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nIdentity.hash = (function () {\n  let nextId = -1;\n  return function (x: object | null | undefined): number {\n    if (typeof x === \"object\" && x !== null) {\n      let hashCode = (x as any)._hashCode as number | undefined;\n      if (hashCode === void 0) {\n        hashCode = ~~nextId;\n        nextId -= 1;\n        Object.defineProperty(x, \"_hashCode\", {\n          value: hashCode,\n          configurable: true,\n        });\n      }\n      return hashCode;\n    } else if (x === null) {\n      return 1;\n    } else if (x === void 0) {\n      return 0;\n    } else {\n      throw new TypeError(\"\" + x);\n    }\n  };\n})();\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ByteOrder} from \"./ByteOrder\";\n\n/**\n * 32-bit [MurmurHash](https://en.wikipedia.org/wiki/MurmurHash) algorithm,\n * version 3.\n */\nexport const Murmur3 = {} as {\n  /**\n   * Mixes a new hash `value` into the accumulated hash `code`,\n   * and returns the accumulated hash value.\n   */\n  mix(code: number, value: number): number;\n\n  /**\n   * Mixes each consecutive 4-byte word of `array` into `code`,\n   * and returns the accumulated hash value.\n   */\n  mixUint8Array(code: number, array: Uint8Array): number;\n\n  /** @hidden */\n  mixUint8ArrayBE(code: number, array: Uint8Array): number;\n\n  /** @hidden */\n  mixUInt8ArrayLE(code: number, array: Uint8Array): number;\n\n  /**\n   * Mixes each consecutive 4-byte word of the UTF-8 encoding of `string`\n   * into `code`, and returns the accumulated hash value.\n   */\n  mixString(code: number, string: string): number;\n\n  /** @hidden */\n  mixStringBE(code: number, string: string): number;\n\n  /** @hidden */\n  mixStringLE(code: number, string: string): number;\n\n  /**\n   * Finalizes a hash `code`.\n   */\n  mash(code: number): number;\n\n  /** @hidden */\n  rotl(value: number, distance: number): number;\n};\n\nMurmur3.mix = function (code: number, value: number): number {\n  value = ((value & 0xffff) * 0xcc9e2d51) + (((value >>> 16) * 0xcc9e2d51 & 0xffff) << 16) & 0xffffffff;\n  value = Murmur3.rotl(value, 15);\n  value = ((value & 0xffff) * 0x1b873593) + (((value >>> 16) * 0x1b873593 & 0xffff) << 16) & 0xffffffff;\n  code ^= value;\n  code = Murmur3.rotl(code, 13);\n  code = ((code & 0xffff) * 5) + (((code >>> 16) * 5 & 0xffff) << 16) & 0xffffffff;\n  code = ((code & 0xffff) + 0x6b64) + (((code >>> 16) + 0xe654 & 0xffff) << 16);\n  return code;\n};\n\nMurmur3.mixUint8Array = function (code: number, array: Uint8Array): number {\n  if (ByteOrder.NativeOrder === ByteOrder.BigEndian) {\n    return Murmur3.mixUint8ArrayBE(code, array);\n  } else if (ByteOrder.NativeOrder === ByteOrder.LittleEndian) {\n    return Murmur3.mixUInt8ArrayLE(code, array);\n  } else {\n    throw new Error();\n  }\n};\n\nMurmur3.mixUint8ArrayBE = function (code: number, array: Uint8Array): number {\n  let offset = 0;\n  const limit = array.length;\n  while (offset + 3 < limit) {\n    const word = (array[offset    ]! & 0xff) << 24 | (array[offset + 1]! & 0xff) << 16\n               | (array[offset + 2]! & 0xff) <<  8 |  array[offset + 3]! & 0xff;\n    code = Murmur3.mix(code, word);\n    offset += 4;\n  }\n  if (offset < limit) {\n    let word = (array[offset]! & 0xff) << 24;\n    if (offset + 1 < limit) {\n      word |= (array[offset + 1]! & 0xff) << 16;\n      if (offset + 2 < limit) {\n        word |= (array[offset + 2]! & 0xff) << 8;\n        //assert offset + 3 === limit;\n      }\n    }\n    word = ((word & 0xffff) * 0xcc9e2d51) + (((word >>> 16) * 0xcc9e2d51 & 0xffff) << 16) & 0xffffffff;\n    word = Murmur3.rotl(word, 15);\n    word = ((word & 0xffff) * 0x1b873593) + (((word >>> 16) * 0x1b873593 & 0xffff) << 16) & 0xffffffff;\n    code ^= word;\n  }\n  return code ^ limit;\n};\n\nMurmur3.mixUInt8ArrayLE = function (code: number, array: Uint8Array): number {\n  let offset = 0;\n  const limit = array.length;\n  while (offset + 3 < limit) {\n    const word =  array[offset    ]! & 0xff        | (array[offset + 1]! & 0xff) <<  8\n               | (array[offset + 2]! & 0xff) << 16 | (array[offset + 3]! & 0xff) << 24;\n    code = Murmur3.mix(code, word);\n    offset += 4;\n  }\n  if (offset < limit) {\n    let word = array[offset]! & 0xff;\n    if (offset + 1 < limit) {\n      word |= (array[offset + 1]! & 0xff) << 8;\n      if (offset + 2 < limit) {\n        word |= (array[offset + 2]! & 0xff) << 16;\n        //assert offset + 3 === limit;\n      }\n    }\n    word = ((word & 0xffff) * 0xcc9e2d51) + (((word >>> 16) * 0xcc9e2d51 & 0xffff) << 16) & 0xffffffff;\n    word = Murmur3.rotl(word, 15);\n    word = ((word & 0xffff) * 0x1b873593) + (((word >>> 16) * 0x1b873593 & 0xffff) << 16) & 0xffffffff;\n    code ^= word;\n  }\n  return code ^ limit;\n};\n\nMurmur3.mixString = function (code: number, string: string): number {\n  if (ByteOrder.NativeOrder === ByteOrder.BigEndian) {\n    return Murmur3.mixStringBE(code, string);\n  } else if (ByteOrder.NativeOrder === ByteOrder.LittleEndian) {\n    return Murmur3.mixStringLE(code, string);\n  } else {\n    throw new Error();\n  }\n};\n\nMurmur3.mixStringBE = function (code: number, string: string): number {\n  let word = 0;\n  let k = 32;\n  let i = 0;\n  const n = string.length;\n  let utf8Length = 0;\n  while (i < n) {\n    let c = string.codePointAt(i);\n    if (c === void 0) {\n      c = string.charCodeAt(i);\n    }\n    if (c >= 0 && c <= 0x7f) { // U+0000..U+007F\n      k -= 8;\n      word |= c << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      utf8Length += 1;\n    } else if (c >= 0x80 && c <= 0x7ff) { // U+0080..U+07FF\n      k -= 8;\n      word |= (0xc0 | (c >>> 6)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | (c & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      utf8Length += 2;\n    } else if (c >= 0x0800 && c <= 0xffff || // U+0800..U+D7FF\n               c >= 0xe000 && c <= 0xffff) { // U+E000..U+FFFF\n      k -= 8;\n      word |= (0xe0 | (c  >>> 12)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | ((c >>>  6) & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | (c & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      utf8Length += 3;\n    } else if (c >= 0x10000 && c <= 0x10ffff) { // U+10000..U+10FFFF\n      k -= 8;\n      word |= (0xf0 | (c  >>> 18)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | ((c >>> 12) & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | ((c >>>  6) & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= (0x80 | (c & 0x3f)) << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      utf8Length += 4;\n    } else { // surrogate or invalid code point\n      k -= 8;\n      word |= 0xef << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= 0xbf << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      k -= 8;\n      word |= 0xbd << k;\n      if (k === 0) { code = Murmur3.mix(code, word); word = 0; k = 32; }\n      utf8Length += 3;\n    }\n    i = string.offsetByCodePoints(i, 1);\n  }\n  if (k !== 32) {\n    word = ((word & 0xffff) * 0xcc9e2d51) + (((word >>> 16) * 0xcc9e2d51 & 0xffff) << 16) & 0xffffffff;\n    word = Murmur3.rotl(word, 15);\n    word = ((word & 0xffff) * 0x1b873593) + (((word >>> 16) * 0x1b873593 & 0xffff) << 16) & 0xffffffff;\n    code ^= word;\n  }\n  return code ^ utf8Length;\n};\n\nMurmur3.mixStringLE = function (code: number, string: string): number {\n  let word = 0;\n  let k = 0;\n  let i = 0;\n  const n = string.length;\n  let utf8Length = 0;\n  while (i < n) {\n    let c = string.codePointAt(i);\n    if (c === void 0) {\n      c = string.charCodeAt(i);\n    }\n    if (c >= 0 && c <= 0x7f) { // U+0000..U+007F\n      word |= c << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      utf8Length += 1;\n    } else if (c >= 0x80 && c <= 0x7ff) { // U+0080..U+07FF\n      word |= (0xc0 | (c >>> 6)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | (c & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      utf8Length += 2;\n    } else if (c >= 0x0800 && c <= 0xffff || // U+0800..U+D7FF\n               c >= 0xe000 && c <= 0xffff) { // U+E000..U+FFFF\n      word |= (0xe0 | (c  >>> 12)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | ((c >>>  6) & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | (c & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      utf8Length += 3;\n    } else if (c >= 0x10000 && c <= 0x10ffff) { // U+10000..U+10FFFF\n      word |= (0xf0 | (c  >>> 18)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | ((c >>> 12) & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | ((c >>>  6) & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= (0x80 | (c & 0x3f)) << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      utf8Length += 4;\n    } else { // surrogate or invalid code point\n      word |= 0xef << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= 0xbf << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      word |= 0xbd << k;\n      k += 8;\n      if (k === 32) { code = Murmur3.mix(code, word); word = 0; k = 0; }\n      utf8Length += 3;\n    }\n    i = string.offsetByCodePoints(i, 1);\n  }\n  if (k !== 32) {\n    word = ((word & 0xffff) * 0xcc9e2d51) + (((word >>> 16) * 0xcc9e2d51 & 0xffff) << 16) & 0xffffffff;\n    word = Murmur3.rotl(word, 15);\n    word = ((word & 0xffff) * 0x1b873593) + (((word >>> 16) * 0x1b873593 & 0xffff) << 16) & 0xffffffff;\n    code ^= word;\n  }\n  return code ^ utf8Length;\n};\n\nMurmur3.mash = function (code: number): number {\n  code ^= code >>> 16;\n  code = ((code & 0xffff) * 0x85ebca6b) + (((code >>> 16) * 0x85ebca6b & 0xffff) << 16) & 0xffffffff;\n  code ^= code >>> 13;\n  code = ((code & 0xffff) * 0xc2b2ae35) + (((code >>> 16) * 0xc2b2ae35 & 0xffff) << 16) & 0xffffffff;\n  code ^= code >>> 16;\n  return code >>> 0;\n};\n\nMurmur3.rotl = function (value: number, distance: number): number {\n  return (value << distance) | (value >>> (32 - distance));\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent} from \"../lang/Equivalent\";\n\n/**\n * Utilities for comparing and hashing numbers.\n */\nexport const Numbers = {} as {\n  /**\n   * Returns `true` if `x` and `y` are equal numbers, or if both are `NaN`;\n   * otherwise returns `x === y` if either `x` or `y` is not defined.\n   */\n  equal(x: number | null | undefined, y: number | null | undefined): boolean;\n\n  /**\n   * Returns `true` if `x` and `y` are both defined, and the difference between\n   * the two is less than `epsilon`, or if both are `NaN`; otherwise returns\n   * `x === y` if either `x` or `y` is not defined.\n   */\n  equivalent(x: number | null | undefined, y: number | null | undefined, epsilon?: number): boolean;\n\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the number `x` less than the number `y`; returns `1` if the number `x` is\n   * greater than the number `y`; and returns `0` if `x` and `y` are equal\n   * numbers, or if both are `NaN`.  If either `x` or `y` is `NaN`, `null`,\n   * or `undefined`, then numbers order before `NaN`, `NaN` orders before\n   * `null`, and `null` orders before `undefined`.\n   */\n  compare(x: number | null | undefined, y: number | null | undefined): number;\n\n  /**\n   * Returns a 32-bit hash value for the number `x`, if defined; otherwise\n   * returns `0` or `1` if `x` is `undefined` or `null`, respectively.\n   */\n  hash(x: number | null | undefined): number;\n};\n\nNumbers.equal = function (x: number | null | undefined, y: number | null | undefined): boolean {\n  return x === y || typeof x === \"number\" && typeof y === \"number\" && isNaN(x) && isNaN(y);\n};\n\nNumbers.equivalent = function (x: number | null | undefined, y: number | null | undefined, epsilon?: number): boolean {\n  return x === y || typeof x === \"number\" && typeof y === \"number\" && (isNaN(x) && isNaN(y) || Math.abs(y - x) < (epsilon !== void 0 ? epsilon : Equivalent.Epsilon));\n};\n\nNumbers.compare = function (x: number | null | undefined, y: number | null | undefined): number {\n  if (typeof x === \"number\") {\n    return typeof y === \"number\" ? (x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0) : -1;\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nNumbers.hash = (function () {\n  const hashArrayBuffer = new ArrayBuffer(8);\n  const hashFloat64Array = new Float64Array(hashArrayBuffer);\n  const hashInt32Array = new Int32Array(hashArrayBuffer);\n  return function (x: number | null | undefined): number {\n    if (typeof x === \"number\") {\n      if (x === ~~x) {\n        return ~~x;\n      } else {\n        hashFloat64Array[0] = x;\n        return hashInt32Array[0]! ^ hashInt32Array[1]!;\n      }\n    } else if (x === null) {\n      return 1;\n    } else if (x === void 0) {\n      return 0;\n    } else {\n      throw new TypeError(\"\" + x);\n    }\n  };\n})();\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities for comparing and hashing booleans.\n */\nexport const Booleans = {} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * `x` is `true` and `y` is `false`; returns `1` if `x` is `false` and `y`\n   * is `true`; and returns `0` if `x` and `y` are equal booleans.  If either\n   * `x` or `y` is `null` or `undefined`, then booleans order before `null`,\n   * and `null` orders before `undefined`.\n   */\n  compare(x: boolean | null | undefined, y: boolean | null | undefined): number;\n\n  /**\n   * Returns a hash code for a number.\n   */\n  hash(x: boolean | null | undefined): number;\n};\n\nBooleans.compare = function (x: boolean | null | undefined, y: boolean | null | undefined): number {\n  if (typeof x === \"boolean\") {\n    return typeof y === \"boolean\" ? (x && !y ? -1 : !x && y ? 1 : 0) : -1;\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nBooleans.hash = function (x: boolean | null | undefined): number {\n  if (x === true) {\n    return 3;\n  } else if (x === false) {\n    return 2;\n  } else if (x === null) {\n    return 1;\n  } else if (x === void 0) {\n    return 0;\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"./Murmur3\";\n\n/**\n * Utilities for comparing and hashing strings.\n */\nexport const Strings = {} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the string `x` lexicographically orders before the string `y`; returns `1`\n   * if the string `x` lexicographically orders after the string `y`; and\n   * returns `0` if `x` and `y` are equal strings.  If either `x` or `y` is\n   * `null` or `undefined`, then strings order before `null`, and `null` orders\n   * before `undefined`.\n   */\n  compare(x: string | null | undefined, y: string | null | undefined): number;\n\n  /**\n   * Returns a hash code for a string.\n   */\n  hash(x: string | null | undefined): number;\n};\n\nStrings.compare = function (x: string | null | undefined, y: string | null | undefined): number {\n  if (typeof x === \"string\") {\n    return typeof y === \"string\" ? (x < y ? -1 : x > y ? 1 : 0) : -1;\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nStrings.hash = function (x: string | null | undefined): number {\n  if (typeof x === \"string\") {\n    return Murmur3.mash(Murmur3.mixString(0, x));\n  } else if (x === null) {\n    return 1;\n  } else if (x === void 0) {\n    return 0;\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities for comparing and hashing functions.\n */\nexport const Functions = {} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the hash code of function `x` is less than the hash code of function `y`;\n   * returns `1` if the hash code of function `x` is greater than the hash code\n   * of function `y`; and returns `0` if `x` and `y` are identical functions.\n   * If either `x` or `y` is `null` or `undefined`, then functions order before\n   * `null`, and `null` orders before `undefined`.\n   */\n  compare(x: Function | null | undefined, y: Function | null | undefined): number;\n\n  /**\n   * Returns a 32-bit hash value for a function.\n   */\n  hash(x: Function | null | undefined): number;\n};\n\nFunctions.compare = function (x: Function | null | undefined, y: Function | null | undefined): number {\n  if (typeof x === \"function\") {\n    if (typeof y === \"function\") {\n      const xh = Functions.hash(x);\n      const yh = Functions.hash(y);\n      return xh < yh ? -1 : xh > yh ? 1 : 0;\n    } else {\n      return -1;\n    }\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nFunctions.hash = (function () {\n  let nextId = -1;\n  return function (x: Function | null | undefined): number {\n    if (typeof x === \"function\") {\n      let hashCode = (x as any)._hashCode as number | undefined;\n      if (hashCode === void 0) {\n        hashCode = ~~nextId;\n        nextId -= 1;\n        Object.defineProperty(x, \"_hashCode\", {\n          value: hashCode,\n          configurable: true,\n        });\n      }\n      return hashCode;\n    } else if (x === null) {\n      return 1;\n    } else if (x === void 0) {\n      return 0;\n    } else {\n      throw new TypeError(\"\" + x);\n    }\n  };\n})();\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"./Murmur3\";\n\n/**\n * Utilities for comparing and hashing constructors.\n */\nexport const Constructors = {} as {\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the hash code of constructor `x` is less than the hash code of constructor\n   * `y`; returns `1` if the hash code of constructor `x` is greater than the\n   * hash code of constructor `y`; and returns `0` if `x` and `y` are identical\n   * constructors.  If either `x` or `y` is `null` or `undefined`, then\n   * constructors order before `null`, and `null` orders before `undefined`.\n   */\n  compare(x: Function | null | undefined, y: Function | null | undefined): number;\n\n  /**\n   * Returns a 32-bit hash value for a constructor.\n   */\n  hash(x: Function | null | undefined): number;\n};\n\nConstructors.compare = function (x: Function | null | undefined, y: Function | null | undefined): number {\n  if (typeof x === \"function\") {\n    if (typeof y === \"function\") {\n      const xh = Constructors.hash(x);\n      const yh = Constructors.hash(y);\n      return xh < yh ? -1 : xh > yh ? 1 : 0;\n    } else {\n      return -1;\n    }\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nConstructors.hash = function (x: Function | null | undefined): number {\n  if (typeof x === \"function\") {\n    let hashCode = (x as any)._hashCode as number | undefined;\n    if (hashCode === void 0) {\n      hashCode = Murmur3.mash(Murmur3.mixString(0, x.name));\n      Object.defineProperty(x, \"_hashCode\", {\n        value: hashCode,\n        configurable: true,\n      });\n    }\n    return hashCode;\n  } else if (x === null) {\n    return 1;\n  } else if (x === void 0) {\n    return 0;\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"./Murmur3\";\nimport {Strings} from \"./Strings\";\nimport {Values} from \"./Values\";\n\n/**\n * Utilities for comparing and hashing structural objects.\n */\nexport const Objects = {} as {\n  /**\n   * Returns `true` if `x` and `y` are structurally equal objects; otherwise\n   * returns `x === y` if either `x` or `y` is not an object.\n   */\n  equal(x: object | null | undefined, y: object | null | undefined): boolean;\n\n  /**\n   * Returns `true` if `x` and `y` are structurally [[Equivalent.equivalentTo\n   * equivalent]] objects; otherwise returns `x === y` if either `x` or `y` is\n   * not an object.\n   */\n  equivalent(x: object | null | undefined, y: object | null | undefined, epsilon?: number): boolean;\n\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the entries of object `x` order lexicographically before the entries of\n   * object `y`; returns `1` if the entries of object `x` order\n   * lexicographically after the entries of object `y`; and returns `0` if `x`\n   * and `y` are equal objects.  If either `x` or `y` is `null` or `undefined`,\n   * then objects order before `null`, and `null` orders before `undefined`.\n   */\n  compare(x: object | null | undefined, y: object | null | undefined): number;\n\n  /**\n   * Returns a 32-bit hash value for the entries of object `x`, if defined;\n   * otherwise returns `0` or `1` if `x` is `undefined` or `null`, respectively.\n   */\n  hash(x: object | null | undefined): number;\n};\n\nObjects.equal = function (x: object | null | undefined, y: object | null | undefined): boolean {\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"object\" && x !== null && typeof y === \"object\" && y !== null) {\n    const xKeys = Object.keys(x);\n    const yKeys = Object.keys(y);\n    const n = xKeys.length;\n    if (n !== yKeys.length) {\n      return false;\n    }\n    for (let i = 0; i < n; i += 1) {\n      const key = xKeys[i]!;\n      if (key !== yKeys[i] || !Values.equal((x as any)[key], (y as any)[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n\nObjects.equivalent = function (x: object | null | undefined, y: object | null | undefined, epsilon?: number): boolean {\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"object\" && x !== null && typeof y === \"object\" && y !== null) {\n    const xKeys = Object.keys(x);\n    const yKeys = Object.keys(y);\n    const n = xKeys.length;\n    if (n !== yKeys.length) {\n      return false;\n    }\n    for (let i = 0; i < n; i += 1) {\n      const key = xKeys[i]!;\n      if (key !== yKeys[i] || !Values.equivalent((x as any)[key], (y as any)[key], epsilon)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n\nObjects.compare = function (x: object | null | undefined, y: object | null | undefined): number {\n  if (typeof x === \"object\" && x !== null) {\n    if (typeof y === \"object\" && y !== null) {\n      if (x !== y) {\n        const xKeys = Object.keys(x);\n        const yKeys = Object.keys(y);\n        const p = xKeys.length;\n        const q = yKeys.length;\n        const n = Math.min(p, q);\n        let order = 0;\n        for (let i = 0; i < n && order === 0; i += 1) {\n          const xKey = xKeys[i]!;\n          const yKey = yKeys[i]!;\n          order = Strings.compare(xKey, yKey);\n          if (order === 0) {\n            order = Values.compare((x as any)[xKey], (y as any)[yKey]);\n          }\n        }\n        return order !== 0 ? order : p > q ? 1 : p < q ? -1 : 0;\n      } else {\n        return 0;\n      }\n    } else {\n      return -1;\n    }\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nObjects.hash = function (x: object | null | undefined): number {\n  if (typeof x === \"object\" && x !== null) {\n    let hashValue = 0;\n    const keys = Object.keys(x);\n    for (let i = 0, n = keys.length; i < n; i += 1) {\n      const key = keys[i]!;\n      hashValue = Murmur3.mix(Murmur3.mix(hashValue, Strings.hash(key)), Values.hash((x as any)[key]));\n    }\n    return Murmur3.mash(hashValue);\n  } else if (x === null) {\n    return 1;\n  } else if (x === void 0) {\n    return 0;\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals} from \"../lang/Equals\";\nimport {HashCode} from \"../lang/HashCode\";\nimport {Equivalent} from \"../lang/Equivalent\";\nimport {Compare} from \"../lang/Compare\";\nimport {Numbers} from \"./Numbers\";\nimport {Strings} from \"./Strings\";\nimport {Functions} from \"./Functions\";\nimport {Arrays} from \"./Arrays\";\nimport {Objects} from \"./Objects\";\n\n/**\n * Utilities for comparing and hashing structural values.  A structural value\n * is typed by object structure, rather than by name.\n */\nexport const Values = {} as {\n  /**\n   * Returns `true` if `x` and `y` are structurally equal, otherwise returns `false`.\n   */\n  equal(x: unknown, y: unknown): boolean;\n\n  /**\n   * Returns a hash code for a structural value.\n   */\n  hash(x: unknown): number;\n\n  /**\n   * Returns `true` if `x` and `y` are structurally equivalent, otherwise returns `false`.\n   */\n  equivalent(x: unknown, y: unknown, epsilon?: number): boolean;\n\n  /**\n   * Returns `-1` if `x` orders before `y`; returns `1` if `x` orders after `y`;\n   * returns `0` if `x` and `y` are equivalent; and returns `NaN` if `x` is not\n   * comparable to `y`.\n   */\n  compare(x: unknown, y: unknown): number;\n};\n\nValues.equal = function (x: unknown, y: unknown): boolean {\n  if (x instanceof Date) {\n    x = x.getTime();\n  }\n  if (y instanceof Date) {\n    y = y.getTime();\n  }\n\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"number\") {\n    if (typeof y === \"number\") {\n      return isNaN(x) && isNaN(y);\n    }\n  } else if (Equals.is(x)) {\n    return x.equals(y);\n  } else if (Array.isArray(x)) {\n    if (Array.isArray(y)) {\n      return Arrays.equal(x, y);\n    }\n  } else if (typeof x === \"object\" && x !== null) {\n    if (typeof y === \"object\" && y !== null) {\n      return Objects.equal(x, y);\n    }\n  }\n  return false;\n};\n\nValues.hash = function (x: unknown): number {\n  if (x === void 0) {\n    return 0;\n  } else if (x === null) {\n    return 1;\n  } else if (x === false) {\n    return 2;\n  } else if (x === true) {\n    return 3;\n  } else if (typeof x === \"number\") {\n    return Numbers.hash(x);\n  } else if (typeof x === \"string\") {\n    return Strings.hash(x);\n  } else if (HashCode.is(x)) {\n    return x.hashCode();\n  } else if (typeof x === \"function\") {\n    return Functions.hash(x);\n  } else if (Array.isArray(x)) {\n    return Arrays.hash(x);\n  } else if (typeof x === \"object\") {\n    return Objects.hash(x);\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n\nValues.equivalent = function (x: unknown, y: unknown, epsilon: number = Equivalent.Epsilon): boolean {\n  if (x instanceof Date) {\n    x = x.getTime();\n  }\n  if (y instanceof Date) {\n    y = y.getTime();\n  }\n\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"number\") {\n    if (typeof y === \"number\") {\n      return isNaN(x) && isNaN(y) || Math.abs(y - x) < epsilon;\n    }\n  } else if (Equivalent.is(x)) {\n    return x.equivalentTo(y, epsilon);\n  } else if (Array.isArray(x)) {\n    if (Array.isArray(y)) {\n      return Arrays.equivalent(x, y, epsilon);\n    }\n  } else if (typeof x === \"object\" && x !== null) {\n    if (typeof y === \"object\" && y !== null) {\n      return Objects.equivalent(x, y, epsilon);\n    }\n  }\n  return false;\n};\n\nValues.compare = function (x: unknown, y: unknown): number {\n  if (x instanceof Date) {\n    x = x.getTime();\n  }\n  if (y instanceof Date) {\n    y = y.getTime();\n  }\n\n  if (x === void 0) {\n    if (y === void 0) {\n      return 0;\n    } else {\n      return 1;\n    }\n  } else if (x === null) {\n    if (y === void 0) {\n      return -1;\n    } else if (y === null) {\n      return 0;\n    } else {\n      return 1;\n    }\n  } else if (typeof x === \"boolean\") {\n    if (y === void 0 || y === null) {\n      return -1;\n    } else if (typeof y === \"boolean\") {\n      return x && !y ? -1 : !x && y ? 1 : 0;\n    } else {\n      return 1;\n    }\n  } else if (typeof x === \"number\") {\n    if (y === void 0 || y === null || typeof y === \"boolean\") {\n      return -1;\n    } else if (typeof y === \"number\") {\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    } else {\n      return 1;\n    }\n  } else if (typeof x === \"string\") {\n    if (y === void 0 || y === null || typeof y === \"boolean\" || typeof y === \"number\") {\n      return -1;\n    } else if (typeof y === \"string\") {\n      return x < y ? -1 : x > y ? 1 : 0;\n    } else {\n      return 1;\n    }\n  } else if (Compare.is(x)) {\n    return x.compareTo(y);\n  } else if (typeof x === \"function\") {\n    if (y === void 0 || y === null || typeof y === \"boolean\" || typeof y === \"number\" || typeof y === \"string\") {\n      return -1;\n    } else if (typeof y === \"function\") {\n      return Functions.compare(x, y);\n    } else {\n      return 1;\n    }\n  } else if (Array.isArray(x)) {\n    if (y === void 0 || y === null || typeof y === \"boolean\" || typeof y === \"number\" || typeof y === \"string\" || typeof y === \"function\") {\n      return -1;\n    } else if (Array.isArray(y)) {\n      return Arrays.compare(x, y);\n    } else {\n      return 1;\n    }\n  } else if (typeof x === \"object\") {\n    if (y === void 0 || y === null || typeof y === \"boolean\" || typeof y === \"number\" || typeof y === \"string\" || typeof y === \"function\" || Array.isArray(y)) {\n      return -1;\n    } else if (typeof y === \"object\") {\n      return Objects.compare(x, y);\n    } else {\n      return 1;\n    }\n  } else {\n    return NaN;\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"./Murmur3\";\nimport {Values} from \"./Values\";\n\n/**\n * Utilities for immutably updating, comparing, and hashing arrays.\n */\nexport const Arrays = {} as {\n  readonly empty: ReadonlyArray<never>;\n\n  /**\n   * Returns a copy of an array with the given element inserted, if the element\n   * is not already present in the arrary; otherwise returns the input array if\n   * it already containts the specified element.\n   */\n  inserted<T>(newElement: T, oldArray: ReadonlyArray<T> | null | undefined): ReadonlyArray<T>;\n\n  /**\n   * Returns a copy of an array with the given element removed; returns the\n   * input array if it does not contain the specified element.\n   */\n  removed<T>(oldElement: T, oldArray: ReadonlyArray<T> | null | undefined): ReadonlyArray<T>;\n\n  /**\n   * Returns `true` if `x` and `y` are structurally equal arrays; otherwise\n   * returns `x === y` if either `x` or `y` is not an array.\n   */\n  equal(x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined): boolean;\n\n  /**\n   * Returns `true` if `x` and `y` are structurally [[Equivalent.equivalentTo\n   * equivalent]] arrays; otherwise returns `x === y` if either `x` or `y` is\n   * not an array.\n   */\n  equivalent(x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined, epsilon?: number): boolean;\n\n  /**\n   * Returns the relative order of `x` with respect to `y`.  Returns `-1` if\n   * the elements of array `x` order lexicographically before the elements of\n   * array `y`; returns `1` if the elements of array `x` order lexicographically\n   * after the elements of array `y`; and returns `0` if `x` and `y` are equal\n   * arrays.  If either `x` or `y` is `null` or `undefined`, then arrays order\n   * before `null`, and `null` orders before `undefined`.\n   */\n  compare(x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined): number;\n\n  /**\n   * Returns a 32-bit hash value for the elements of array `x`, if defined;\n   * otherwise returns `0` or `1` if `x` is `undefined` or `null`, respectively.\n   */\n  hash(x: ArrayLike<unknown> | null | undefined): number;\n};\n\nObject.defineProperty(Arrays, \"empty\", {\n  value: Object.freeze([]),\n  enumerable: true,\n  configurable: true,\n});\n\nArrays.inserted = function <T>(newElement: T, oldArray: ReadonlyArray<T> | null | undefined): ReadonlyArray<T> {\n  const n = oldArray !== void 0 && oldArray !== null ? oldArray.length : 0;\n  const newArray = new Array<T>(n + 1);\n  for (let i = 0; i < n; i += 1) {\n    const element = oldArray![i]!;\n    if (element !== newElement) {\n      newArray[i] = element;\n    } else {\n      return oldArray!;\n    }\n  }\n  newArray[n] = newElement;\n  return newArray\n};\n\nArrays.removed = function <T>(oldElement: T, oldArray: ReadonlyArray<T> | null | undefined): ReadonlyArray<T> {\n  const n = oldArray !== void 0 && oldArray !== null ? oldArray.length : 0;\n  if (n === 0) {\n    return oldArray !== void 0 && oldArray !== null ? oldArray : Arrays.empty;\n  } else if (n === 1) {\n    return oldArray![0]! !== oldElement ? oldArray! : Arrays.empty;\n  } else {\n    const newArray = new Array<T>(n - 1);\n    let i = 0;\n    while (i < n) {\n      const element = oldArray![i]!;\n      if (element !== oldElement) {\n        newArray[i] = element;\n        i += 1;\n      } else {\n        i += 1;\n        while (i < n) {\n          newArray[i - 1] = oldArray![i]!;\n          i += 1\n        }\n        return newArray;\n      }\n    }\n    return oldArray!;\n  }\n};\n\nArrays.equal = function (x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined): boolean {\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"object\" && x !== null && typeof y === \"object\" && y !== null) {\n    const n = x.length;\n    if (n !== y.length) {\n      return false;\n    }\n    for (let i = 0; i < n; i += 1) {\n      if (!Values.equal(x[i], y[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n\nArrays.equivalent = function (x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined, epsilon?: number): boolean {\n  if (x === y) {\n    return true;\n  } else if (typeof x === \"object\" && x !== null && typeof y === \"object\" && y !== null) {\n    const n = x.length;\n    if (n !== y.length) {\n      return false;\n    }\n    for (let i = 0; i < n; i += 1) {\n      if (!Values.equivalent(x[i], y[i], epsilon)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\n\nArrays.compare = function (x: ArrayLike<unknown> | null | undefined, y: ArrayLike<unknown> | null | undefined): number {\n  if (typeof x === \"object\" && x !== null) {\n    if (typeof y === \"object\" && y !== null) {\n      if (x !== y) {\n        const p = x.length as number;\n        const q = y.length as number;\n        let order = 0;\n        for (let i = 0, n = Math.min(p, q); i < n && order === 0; i += 1) {\n          order = Values.compare(x[i], y[i]);\n        }\n        return order !== 0 ? order : p > q ? 1 : p < q ? -1 : 0;\n      } else {\n        return 0;\n      }\n    } else {\n      return -1;\n    }\n  } else if (x === null) {\n    return y === void 0 ? -1 : y === null ? 0 : 1;\n  } else if (x === void 0) {\n    return y === void 0 ? 0 : 1;\n  } else {\n    return NaN;\n  }\n};\n\nArrays.hash = function (x: ArrayLike<unknown> | null | undefined): number {\n  if (typeof x === \"object\" && x !== null) {\n    let hashValue = 0;\n    for (let i = 0, n = x.length; i < n; i += 1) {\n      hashValue = Murmur3.mix(hashValue, Values.hash(x[i]));\n    }\n    return Murmur3.mash(hashValue);\n  } else if (x === null) {\n    return 1;\n  } else if (x === void 0) {\n    return 0;\n  } else {\n    throw new TypeError(\"\" + x);\n  }\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"../lang/Lazy\";\nimport type {Iterator} from \"./Iterator\";\nimport {CursorEmpty} from \"../\"; // forward import\nimport {CursorUnary} from \"../\"; // forward import\nimport {CursorArray} from \"../\"; // forward import\n\nexport abstract class Cursor<T> implements Iterator<T> {\n  abstract isEmpty(): boolean;\n\n  abstract head(): T;\n\n  abstract step(): void;\n\n  abstract skip(count: number): void;\n\n  abstract hasNext(): boolean;\n\n  abstract nextIndex(): number;\n\n  abstract next(): {value?: T, done: boolean};\n\n  abstract hasPrevious(): boolean;\n\n  abstract previousIndex(): number;\n\n  abstract previous(): {value?: T, done: boolean};\n\n  set(newValue: T): void {\n    throw new Error(\"immutable\");\n  }\n\n  delete(): void {\n    throw new Error(\"immutable\");\n  }\n\n  @Lazy\n  static empty<T>(): Cursor<T> {\n    return new CursorEmpty();\n  }\n\n  static unary<T>(value: T): Cursor<T> {\n    return new CursorUnary<T>(value);\n  }\n\n  static array<T>(array: ReadonlyArray<T>, index?: number, limit?: number): Cursor<T> {\n    if (index === void 0) {\n      index = 0;\n    }\n    if (limit === void 0) {\n      limit = array.length;\n    }\n    return new CursorArray<T>(array, index, limit);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"./Cursor\";\n\n/** @hidden */\nexport class CursorEmpty<T> extends Cursor<T> {\n  isEmpty(): boolean {\n    return true;\n  }\n\n  head(): T {\n    throw new Error(\"empty\");\n  }\n\n  step(): void {\n    throw new Error(\"empty\");\n  }\n\n  skip(count: number): void {\n    // nop\n  }\n\n  hasNext(): boolean {\n    return false;\n  }\n\n  nextIndex(): number {\n    return 0;\n  }\n\n  next(): {value?: T, done: boolean} {\n    return {done: true};\n  }\n\n  hasPrevious(): boolean {\n    return false;\n  }\n\n  previousIndex(): number {\n    return -1;\n  }\n\n  previous(): {value?: T, done: boolean} {\n    return {done: true};\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"./Cursor\";\n\n/** @hidden */\nexport class CursorUnary<T> extends Cursor<T> {\n  private declare readonly value: T;\n  private declare index: number;\n\n  constructor(value: T) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: 0,\n      configurable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.index !== 0;\n  }\n\n  head(): T {\n    if (this.index === 0) {\n      return this.value;\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  step(): void {\n    if (this.index === 0) {\n      Object.defineProperty(this, \"index\", {\n        value: 1,\n        configurable: true,\n      });\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  skip(count: number): void {\n    this.index = Math.min(Math.max(0, this.index + count), 1);\n  }\n\n  hasNext(): boolean {\n    return this.index === 0;\n  }\n\n  nextIndex(): number {\n    return this.index;\n  }\n\n  next(): {value?: T, done: boolean} {\n    if (this.index === 0) {\n      Object.defineProperty(this, \"index\", {\n        value: 1,\n        configurable: true,\n      });\n      return {value: this.value, done: true};\n    } else {\n      return {done: true};\n    }\n  }\n\n  hasPrevious(): boolean {\n    return this.index === 1;\n  }\n\n  previousIndex(): number {\n    return this.index - 1;\n  }\n\n  previous(): {value?: T, done: boolean} {\n    if (this.index === 1) {\n      Object.defineProperty(this, \"index\", {\n        value: 0,\n        configurable: true,\n      });\n      return {value: this.value, done: true};\n    } else {\n      return {done: true};\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"./Cursor\";\n\n/** @hidden */\nexport class CursorArray<T> extends Cursor<T> {\n  private declare readonly array: ReadonlyArray<T>;\n  private declare index: number;\n  private declare readonly limit: number;\n\n  constructor(array: ReadonlyArray<T>, index: number, limit: number) {\n    super();\n    Object.defineProperty(this, \"array\", {\n      value: array,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"limit\", {\n      value: limit,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.index >= this.limit;\n  }\n\n  head(): T {\n    if (this.index < this.limit) {\n      return this.array[this.index]!;\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  step(): void {\n    const index = this.index;\n    if (index < this.limit) {\n      Object.defineProperty(this, \"index\", {\n        value: index + 1,\n        configurable: true,\n      });\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  skip(count: number): void {\n    Object.defineProperty(this, \"index\", {\n      value: Math.min(this.index + count, this.limit),\n      configurable: true,\n    });\n  }\n\n  hasNext(): boolean {\n    return this.index < this.limit;\n  }\n\n  nextIndex(): number {\n    return this.index;\n  }\n\n  next(): {value?: T, done: boolean} {\n    const index = this.index;\n    if (index < this.limit) {\n      Object.defineProperty(this, \"index\", {\n        value: index + 1,\n        configurable: true,\n      });\n      return {value: this.array[index]!, done: this.index === this.limit};\n    } else {\n      Object.defineProperty(this, \"index\", {\n        value: this.limit,\n        configurable: true,\n      });\n      return {done: true};\n    }\n  }\n\n  hasPrevious(): boolean {\n    return this.index > 0;\n  }\n\n  previousIndex(): number {\n    return this.index - 1;\n  }\n\n  previous(): {value?: T, done: boolean} {\n    const index = this.index - 1;\n    if (index >= 0) {\n      Object.defineProperty(this, \"index\", {\n        value: index,\n        configurable: true,\n      });\n      return {value: this.array[index]!, done: index === 0};\n    } else {\n      Object.defineProperty(this, \"index\", {\n        value: 0,\n        configurable: true,\n      });\n      return {done: true};\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Exception thrown when an [[Assert]] fails.\n */\nexport class AssertException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, AssertException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"../runtime/Values\";\nimport {AssertException} from \"./AssertException\";\n\n/**\n * Callable assertion function.\n *\n * @throws [[AssertException]] if the assertion fails.\n */\nexport interface AssertFunction {\n  (condition: unknown, message?: string): void;\n}\n\n/**\n * Type that implements common assertion functions.\n */\nexport interface Assert {\n  /**\n   * Asserts that `condition` is truthy.\n   *\n   * @throws [[AssertException]] with `message` if `condition` is falsy.\n   */\n  ok(condition: unknown, message?: string): void;\n\n  /**\n   * Asserts that `condition` is falsy.\n   *\n   * @throws [[AssertException]] with `message` if `condition` is truthy.\n   */\n  notOk(condition: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is identical (`===`) to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is not identical (`!==`) to `rhs`.\n   */\n  identical(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is not identical (`!==`) to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is identical (`===`) to `rhs`.\n   */\n  notIdentical(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `object` has the prototype of `constructor` in its prototype chain.\n   *\n   * @throws [[AssertException]] with `message` if `object` does not have the prototype of `constructor` in its prototype chain.\n   */\n  instanceOf(object: unknown, constructor: Function, message?: string): void;\n\n  /**\n   * Asserts that `object` does not have the prototype of `constructor` in its prototype chain.\n   *\n   * @throws [[AssertException]] with `message` if `object` does have the prototype of `constructor` in its prototype chain.\n   */\n  notInstanceOf(object: unknown, constructor: Function, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is [[Values.equal structurally equal]] to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is not structurally equal to `rhs`.\n   */\n  equal(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is not [[Values.equal structurally equal]] to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is structurally equal to `rhs`.\n   */\n  notEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is [[Values.equivalent structurally equivalent]] to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is not structurally equivalent to `rhs`.\n   */\n  equivalent(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` is not [[Values.equivalent structurally equivalent]] to `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` is structurally equivalent to `rhs`.\n   */\n  notEquivalent(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` [[Values.compare structurally orders before]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does not structurally order before `rhs`.\n   */\n  compareLessThan(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` does not [[Values.compare structurally order before]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does structurally order before `rhs`.\n   */\n  compareNotLessThan(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` [[Values.compare structurally orders before or the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does not structurally order before or the same as `rhs`.\n   */\n  compareLessThanOrEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` does not [[Values.compare structurally order before or the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does structurally order before or the same as `rhs`.\n   */\n  compareNotLessThanOrEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` [[Values.compare structurally orders the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does not structurally order before or the same as `rhs`.\n   */\n  compareEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` does not [[Values.compare structurally order the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does structurally order before or the same as `rhs`.\n   */\n  compareNotEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` [[Values.compare structurally orders after or the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does not structurally order after or the same as `rhs`.\n   */\n  compareGreaterThanOrEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` does not [[Values.compare structurally order after or the same as]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does structurally order after or the same as `rhs`.\n   */\n  compareNotGreaterThanOrEqual(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` [[Values.compare structurally orders after]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does not structurally order after `rhs`.\n   */\n  compareGreaterThan(lhs: unknown, rhs: unknown, message?: string): void;\n\n  /**\n   * Asserts that `lhs` does not [[Values.compare structurally order after]] `rhs`.\n   *\n   * @throws [[AssertException]] with `message` if `lhs` does structurally order after `rhs`.\n   */\n  compareNotGreaterThan(lhs: unknown, rhs: unknown, message?: string): void;\n}\n\n/**\n * General `Assert` implementation.  When called as a function, asserts that\n * `condition` is truthy.\n *\n * @throws [[AssertException]] with `message` if `condition` is falsy.\n */\nexport const assert = function (condition: unknown, message?: string): void {\n  if (!condition) {\n    throw new AssertException(message);\n  }\n} as Assert & AssertFunction;\n\nassert.ok = function (condition: unknown, message?: string): void {\n  if (!condition) {\n    throw new AssertException(message);\n  }\n};\n\nassert.notOk = function (condition: unknown, message?: string): void {\n  if (condition) {\n    throw new AssertException(message);\n  }\n};\n\nassert.equal = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!Values.equal(lhs, rhs)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.notEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.equal(lhs, rhs)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.identical = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (lhs !== rhs) {\n    throw new AssertException(message);\n  }\n};\n\nassert.notIdentical = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (lhs === rhs) {\n    throw new AssertException(message);\n  }\n};\n\nassert.instanceOf = function (object: unknown, constructor: Function, message?: string): void {\n  if (!(object instanceof constructor)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.notInstanceOf = function (object: unknown, constructor: Function, message?: string): void {\n  if (object instanceof constructor) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareLessThan = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!(Values.compare(lhs, rhs) < 0)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareNotLessThan = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.compare(lhs, rhs) < 0) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareLessThanOrEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!(Values.compare(lhs, rhs) <= 0)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareNotLessThanOrEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.compare(lhs, rhs) <= 0) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!(Values.compare(lhs, rhs) === 0)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareNotEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.compare(lhs, rhs) === 0) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareGreaterThanOrEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!(Values.compare(lhs, rhs) >= 0)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareNotGreaterThanOrEqual = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.compare(lhs, rhs) >= 0) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareGreaterThan = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (!(Values.compare(lhs, rhs) > 0)) {\n    throw new AssertException(message);\n  }\n};\n\nassert.compareNotGreaterThan = function (lhs: unknown, rhs: unknown, message?: string): void {\n  if (Values.compare(lhs, rhs) > 0) {\n    throw new AssertException(message);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {AnyOutputSettings} from \"../output/OutputSettings\";\nimport {Output} from \"../output/Output\";\nimport type {Display} from \"./Display\";\nimport type {Debug} from \"./Debug\";\nimport {Unicode} from \"../unicode/Unicode\";\n\n/**\n * utility functions for formatting values.\n */\nexport const Format = {} as {\n  /**\n   * The operting system specific string used to separate lines of text.\n   */\n  readonly lineSeparator: string;\n\n  /**\n   * Writes the code points of the human-readable [[Display]] string for the\n   * given `object` to `output`.  Assumes `output` is a Unicode `Output` writer\n   * with sufficient capacity.  Delegates to [[Display.display]], if `object`\n   * implements `Display`; otherwise writes the result of `Object.toString`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full display string has been written.\n   */\n  display(object: unknown, output: Output): void;\n\n  /**\n   * Returns the human-readable [[Display]] string for the givem `object`,\n   * output using the given `settings`.  Delegates to [[Display.displa]],\n   * if `object` implements `Display`; otherwise returns the result of\n   * `Object.toString`.\n   */\n  display(object: unknown, settings?: AnyOutputSettings): string;\n\n  /**\n   * Writes the code points of the developer-readable [[Debug]] string for the\n   * given `object` to `output`.  Assumes `output` is a Unicode `Output` writer\n   * with sufficient capacity.  Delegates to [[Debug.debug]], if `object`\n   * implements `Debug`; writes a JavaScript string literal, if `object` is a\n   * `string`, and writes a JavaScript number literal, if `object` is a\n   * `number`; otherwise writes the result of `Object.toString`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full debug string has been written.\n   */\n  debug(object: unknown, output: Output): void;\n\n  /**\n   * Returns the developer-readable [[Debug]] string for the givem `object`,\n   * output using the given `settings`.  Delegates to [[Debug.debug]], if\n   * `object` implements `Debug`; returns a JavaScript string literal, if\n   * `object` is a `string`, and returns a JavaScript number literal, if\n   * `object` is a `number`; otherwise returns the result of `Object.toString`.\n   */\n  debug(object: unknown, settings?: AnyOutputSettings): string;\n\n  /**\n   * Writes the code points of the numeric string for the given `value`\n   * to `output`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full numeric string has been written.\n   */\n  displayNumber(value: number, output: Output): void;\n\n  /**\n   * Writes the code points of the JavaScript numeric literal for the given\n   * `value` to `output`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full numeric literal has been written.\n   */\n  debugNumber(value: number, output: Output): void;\n\n  /**\n   * Writes the code points of the JavaScript character literal for the given\n   * `character` to `output`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full character literal has been written.\n   */\n  debugChar(character: number, output: Output): void;\n\n  /**\n   * Writes the code points of the JavaScript string literal for the given\n   * `string` to `output`.\n   *\n   * @throws [[OutputException]] if the `output` exits the _cont_ state before\n   *         the full string literal has been written.\n   */\n  debugString(string: string, output: Output): void;\n\n  /** @hidden */\n  encodeHex(x: number): number;\n\n  /**\n   * Returns a string representation of `value` scaled by its SI magnitude,\n   * keeping at most `precision` digits past the decimal place, appended with\n   * the appropriate SI prefix.\n   */\n  prefix(value: number, precision?: number): string;\n\n  decimal(value: number, precision?: number): string;\n\n  /** @hidden */\n  trimTrailingZeros(s: string): string;\n\n  /**\n   * Returns a string representation of the duration represented by the given\n   * number of milliseconds.\n   */\n  duration(millis: number, separator?: string): string;\n};\n\nObject.defineProperty(Format, \"lineSeparator\", {\n  get(): string {\n    let lineSeparator: string | undefined;\n    if (typeof exports === \"object\" && typeof module !== \"undefined\" && typeof require === \"function\") {\n      const os = require(\"os\");\n      if (typeof os === \"object\" && os !== null) {\n        lineSeparator = os.EOL;\n      }\n    }\n    if (lineSeparator === void 0) {\n      lineSeparator = \"\\n\";\n    }\n    Object.defineProperty(Format, \"lineSeparator\", {\n      value: lineSeparator,\n      enumerable: true,\n      configurable: true,\n    })\n    return lineSeparator;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nFormat.display = function (object: unknown, output?: Output | AnyOutputSettings): void | string {\n  const notOutput = !(output instanceof Output);\n  if (object === void 0) {\n    if (output === void 0) {\n      return \"undefined\";\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"undefined\");\n    }\n  } else if (object === null) {\n    if (output === void 0) {\n      return \"null\";\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"null\");\n    }\n  } else if (typeof object === \"number\") {\n    if (output === void 0) {\n      return \"\" + object;\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      Format.displayNumber(object, output);\n    }\n  } else if (typeof object === \"string\") {\n    if (output === void 0) {\n      return object;\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(object);\n    }\n  } else if (typeof (object as any).display === \"function\") {\n    if (!(output instanceof Output)) {\n      output = Unicode.stringOutput(output);\n    }\n    (object as Display).display(output);\n  } else {\n    if (output === void 0) {\n      return \"\" + object;\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"\" + object);\n    }\n  }\n  if (notOutput) {\n    return output.toString();\n  }\n} as typeof Format.display;\n\nFormat.debug = function (object: unknown, output?: Output | AnyOutputSettings): void | string {\n  const notOutput = !(output instanceof Output);\n  if (object === void 0) {\n    if (output === void 0) {\n      return \"undefined\";\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"undefined\");\n    }\n  } else if (object === null) {\n    if (output === void 0) {\n      return \"null\";\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"null\");\n    }\n  } else if (typeof object === \"number\") {\n    if (output === void 0) {\n      return \"\" + object;\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      Format.debugNumber(object, output);\n    }\n  } else if (typeof object === \"string\") {\n    if (!(output instanceof Output)) {\n      output = Unicode.stringOutput(output);\n    }\n    Format.debugString(object, output);\n  } else if (typeof (object as any).debug === \"function\") {\n    if (!(output instanceof Output)) {\n      output = Unicode.stringOutput(output);\n    }\n    (object as Debug).debug(output);\n  } else {\n    if (output === void 0) {\n      return \"\" + object;\n    } else {\n      if (!(output instanceof Output)) {\n        output = Unicode.stringOutput(output);\n      }\n      output = output.write(\"\" + object);\n    }\n  }\n  if (notOutput) {\n    return output.toString();\n  }\n} as typeof Format.debug;\n\nFormat.displayNumber = function (value: number, output: Output): void {\n  if (isFinite(value) && Math.floor(value) === value && Math.abs(value) < 2147483648) {\n    if (value < 0) {\n      output = output.write(45/*'-'*/);\n    }\n    if (value > -10 && value < 10) {\n      output = output.write(48/*'0'*/ + Math.abs(value));\n    } else {\n      const digits = new Array<number>(19);\n      let x = value;\n      let i = 18;\n      while (x !== 0) {\n        digits[i] = Math.abs((x % 10) | 0);\n        x = (x / 10) | 0;\n        i -= 1;\n      }\n      i += 1;\n      while (i < 19) {\n        output = output.write(48/*'0'*/ + digits[i]!);\n        i += 1;\n      }\n    }\n  } else {\n    output = output.write(Format.decimal(value, output.settings.precision));\n  }\n};\n\nFormat.debugNumber = function (value: number, output: Output): void {\n  Format.displayNumber(value, output);\n};\n\nFormat.debugChar = function (character: number, output: Output): void {\n  output = output.write(39/*'\\''*/);\n  switch (character) {\n      case 8/*'\\b'*/: output.write(92/*'\\\\'*/).write(98/*'b'*/); break;\n      case 9/*'\\t'*/: output.write(92/*'\\\\'*/).write(116/*'t'*/); break;\n      case 10/*'\\n'*/: output.write(92/*'\\\\'*/).write(110/*'n'*/); break;\n      case 12/*'\\f'*/: output.write(92/*'\\\\'*/).write(102/*'f'*/); break;\n      case 13/*'\\r'*/: output.write(92/*'\\\\'*/).write(114/*'r'*/); break;\n      case 34/*'\\\"'*/: output.write(92/*'\\\\'*/).write(34/*'\\\"'*/); break;\n      case 39/*'\\\"'*/: output.write(92/*'\\\\'*/).write(39/*'\\''*/); break;\n      case 92/*'\\\\'*/: output.write(92/*'\\\\'*/).write(92/*'\\\\'*/); break;\n    default:\n      if (character >= 0x0000 && character <= 0x001f\n          || character >= 0x007f && character <= 0x009f) {\n        output = output.write(92/*'\\\\'*/).write(117/*'u'*/)\n          .write(Format.encodeHex(character >>> 12 & 0xf))\n          .write(Format.encodeHex(character >>>  8 & 0xf))\n          .write(Format.encodeHex(character >>>  4 & 0xf))\n          .write(Format.encodeHex(character        & 0xf));\n      } else {\n        output = output.write(character);\n      }\n  }\n  output = output.write(39/*'\\''*/);\n};\n\nFormat.debugString = function (string: string, output: Output): void {\n  output = output.write(34/*'\\\"'*/);\n  let input = Unicode.stringInput(string);\n  while (input.isCont()) {\n    const c = input.head();\n    switch (c) {\n      case 8/*'\\b'*/: output.write(92/*'\\\\'*/).write(98/*'b'*/); break;\n      case 9/*'\\t'*/: output.write(92/*'\\\\'*/).write(116/*'t'*/); break;\n      case 10/*'\\n'*/: output.write(92/*'\\\\'*/).write(110/*'n'*/); break;\n      case 12/*'\\f'*/: output.write(92/*'\\\\'*/).write(102/*'f'*/); break;\n      case 13/*'\\r'*/: output.write(92/*'\\\\'*/).write(114/*'r'*/); break;\n      case 34/*'\\\"'*/: output.write(92/*'\\\\'*/).write(34/*'\\\"'*/); break;\n      case 92/*'\\\\'*/: output.write(92/*'\\\\'*/).write(92/*'\\\\'*/); break;\n      default:\n        if (c >= 0x0000 && c <= 0x001f || c >= 0x007f && c <= 0x009f) {\n          output = output.write(92/*'\\\\'*/).write(117/*'u'*/)\n            .write(Format.encodeHex(c >>> 12 & 0xf))\n            .write(Format.encodeHex(c >>>  8 & 0xf))\n            .write(Format.encodeHex(c >>>  4 & 0xf))\n            .write(Format.encodeHex(c        & 0xf));\n        } else {\n          output = output.write(c);\n        }\n    }\n    input = input.step();\n  }\n  output = output.write(34/*'\\\"'*/);\n};\n\nFormat.encodeHex = function (x: number): number {\n  if (x < 10) {\n    return 48/*'0'*/ + x;\n  } else {\n    return 65/*'A'*/ + (x - 10);\n  }\n};\n\nFormat.prefix = (function () {\n  const prefixes: ReadonlyArray<string> = [\"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\",\" Z\", \"Y\"];\n  return function (value: number, precision: number = 1): string {\n    if (isFinite(value)) {\n      const exponential = Math.abs(value).toExponential();\n      const exponentIndex = exponential.indexOf(\"e\");\n      const exponent = exponentIndex >= 0 ? +exponential.slice(exponentIndex + 1) : NaN;\n      const power = Math.min(Math.max(-8, Math.floor(exponent / 3)), 8) * 3;\n      const scaled = Math.pow(10, -power) * value;\n      let s = Format.trimTrailingZeros(Math.abs(scaled).toFixed(precision));\n      if (scaled < 0 && +s !== 0) {\n        s = \"-\" + s;\n      }\n      s += prefixes[8 + power / 3];\n      return s;\n    } else {\n      return \"\" + value;\n    }\n  }\n})();\n\nFormat.decimal = function (value: number, precision: number = -1): string {\n  if (precision >= 0) {\n    let s = Format.trimTrailingZeros(Math.abs(value).toFixed(precision));\n    if (value < 0 && +s !== 0) {\n      s = \"-\" + s;\n    }\n    return s;\n  } else {\n    return \"\" + value;\n  }\n};\n\nFormat.trimTrailingZeros = function (s: string): string {\n  let i0 = -1;\n  let i1: number | undefined;\n  for (let i = 1, n = s.length; i < n; i += 1) {\n    const c = s.charCodeAt(i);\n    if (c === 46/*'.'*/) {\n      i0 = i; // candidate start of trailing zeros\n      i1 = i; // candidate end of trailing zeros\n    } else if (c === 48/*'0'*/) {\n      if (i0 === 0) { // if after decimal\n        i0 = i; // new candidate start of trailing zeros\n      }\n      i1 = i; // new candidate end of trailing zeros\n    } else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n      if (i0 > 0) { // if non-zero digit after decimal\n        i0 = 0; // no candidate start of trailing zeros\n      }\n    } else if (i0 > 0) { // if non-numeric character after decimal\n      break; // accept current range of trailing zeros\n    }\n  }\n  if (i0 > 0) {\n    s = s.slice(0, i0) + s.slice(i1! + 1); // cut out trailing zeros\n  }\n  return s;\n};\n\nFormat.duration = function (millis: number, separator: string = \" \"): string {\n  if (isFinite(millis)) {\n    const SECOND = 1000;\n    const MINUTE = 60 * SECOND;\n    const HOUR = 60 * MINUTE;\n    const DAY = 24 * HOUR;\n    const WEEK = 7 * DAY;\n    let weeks: number | undefined;\n    if (millis > WEEK) {\n      weeks = Math.floor(millis / WEEK);\n      millis %= WEEK;\n    }\n    let days: number | undefined;\n    if (millis > DAY) {\n      days = Math.floor(millis / DAY);\n      millis %= DAY;\n    }\n    let hours: number | undefined;\n    if (millis > HOUR) {\n      hours = Math.floor(millis / HOUR);\n      millis %= HOUR;\n    }\n    let minutes: number | undefined;\n    if (millis > MINUTE) {\n      minutes = Math.floor(millis / MINUTE);\n      millis %= MINUTE;\n    }\n    let seconds: number | undefined;\n    if (millis > SECOND) {\n      seconds = Math.floor(millis / SECOND);\n      millis %= SECOND;\n    }\n    let s = \"\";\n    if (weeks !== void 0) {\n      s += weeks + \"w\";\n    }\n    if (days !== void 0) {\n      s += (s.length !== 0 ? separator : \"\") + days + \"d\";\n    }\n    if (hours !== void 0) {\n      s += (s.length !== 0 ? separator : \"\") + hours + \"h\";\n    }\n    if (minutes !== void 0) {\n      s += (s.length !== 0 ? separator : \"\") + minutes + \"m\";\n    }\n    if (seconds !== void 0 || millis === 0) {\n      s += (s.length !== 0 ? separator : \"\") + (seconds !== void 0 ? seconds : 0) + \"s\";\n    }\n    if (millis !== 0 && s.length === 0) {\n      s += millis + \"ms\";\n    }\n    return s;\n  } else {\n    return \"\" + millis;\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"../runtime/Murmur3\";\nimport type {HashCode} from \"../lang/HashCode\";\nimport type {Compare} from \"../lang/Compare\";\nimport {Numbers} from \"../runtime/Numbers\";\nimport {Strings} from \"../runtime/Strings\";\nimport {Constructors} from \"../runtime/Constructors\";\n\n/**\n * Level of importance.  Used for log levels and diagnostic classifications.\n */\nexport class Severity implements HashCode, Compare {\n  private constructor(level: number, label: string) {\n    Object.defineProperty(this, \"level\", {\n      value: level,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"label\", {\n      value: label,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /**\n   * The integer level of importance of this `Severity`, with higher  levels\n   * signifying greater importance.  An integer between `0` and `7`, inclusive.\n   * One of `TRACE_LEVEL`, `DEBUG_LEVEL`, `INFO_LEVEL`, `NOTE_LEVEL`,\n   * `WARNING_LEVEL`, `ERROR_LEVEL`, `ALERT_LEVEL`, `FATAL_LEVEL`.\n   */\n  declare readonly level: number;\n\n  /**\n   * A descriptive label for this `Severity`.\n   */\n  declare readonly label: string;\n\n  /**\n   * Returns `true` if this `Severity` has `TRACE_LEVEL` of importance.\n   */\n  isTrace(): boolean {\n    return this.level === Severity.TRACE_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `DEBUG_LEVEL` of importance.\n   */\n  isDebug(): boolean {\n    return this.level === Severity.DEBUG_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `INFO_LEVEL` of importance.\n   */\n  isInfo(): boolean {\n    return this.level === Severity.INFO_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `NOTE_LEVEL` of importance.\n   */\n  isNote(): boolean {\n    return this.level === Severity.NOTE_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `WARNING_LEVEL` of importance.\n   */\n  isWarning(): boolean {\n    return this.level === Severity.WARNING_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `ERROR_LEVEL` of importance.\n   */\n  isError(): boolean {\n    return this.level === Severity.ERROR_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `ALERT_LEVEL` of importance.\n   */\n  isAlert(): boolean {\n    return this.level === Severity.ALERT_LEVEL;\n  }\n\n  /**\n   * Returns `true` if this `Severity` has `FATAL_LEVEL` of importance.\n   */\n  isFatal(): boolean {\n    return this.level === Severity.FATAL_LEVEL;\n  }\n\n  compareTo(that: unknown): number {\n    if (this === that) {\n      return 0;\n    } else if (that instanceof Severity) {\n      if (this.level < that.level) {\n        return -1;\n      } else if (this.level > that.level) {\n        return 1;\n      } else {\n        return this.label.localeCompare(that.label);\n      }\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Severity) {\n      return this.level === that.level && this.label === that.label;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(Severity),\n        Numbers.hash(this.level)), Strings.hash(this.label)));\n  }\n\n  toString(): string {\n    return this.label;\n  }\n\n  static readonly TRACE_LEVEL: number = 0;\n  static readonly DEBUG_LEVEL: number = 1;\n  static readonly INFO_LEVEL: number = 2;\n  static readonly NOTE_LEVEL: number = 3;\n  static readonly WARNING_LEVEL: number = 4;\n  static readonly ERROR_LEVEL: number = 5;\n  static readonly ALERT_LEVEL: number = 6;\n  static readonly FATAL_LEVEL: number = 7;\n\n  private static _trace?: Severity;\n  private static _debug?: Severity;\n  private static _info?: Severity;\n  private static _note?: Severity;\n  private static _warning?: Severity;\n  private static _error?: Severity;\n  private static _alert?: Severity;\n  private static _fatal?: Severity;\n\n  /**\n   * Returns a `Severity` with the given importance `level`, and optional\n   * descriptive `label`.\n   *\n   * @throws `Error` if `level` is not a valid level of importance.\n   */\n  static create(level: number, label?: string): Severity {\n    switch (level) {\n      case Severity.TRACE_LEVEL: return Severity.trace(label);\n      case Severity.DEBUG_LEVEL: return Severity.debug(label);\n      case Severity.INFO_LEVEL: return Severity.info(label);\n      case Severity.NOTE_LEVEL: return Severity.note(label);\n      case Severity.WARNING_LEVEL: return Severity.warning(label);\n      case Severity.ERROR_LEVEL: return Severity.error(label);\n      case Severity.ALERT_LEVEL: return Severity.alert(label);\n      case Severity.FATAL_LEVEL: return Severity.fatal(label);\n      default: throw new Error(\"\" + level);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `TRACE_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static trace(label: string = \"trace\"): Severity {\n    if (label === \"trace\") {\n      if (Severity._trace === void 0) {\n        Severity._trace = new Severity(Severity.TRACE_LEVEL, label);\n      }\n      return Severity._trace;\n    } else {\n      return new Severity(Severity.TRACE_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `DEBUG_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static debug(label: string = \"debug\"): Severity {\n    if (label === \"debug\") {\n      if (Severity._debug === void 0) {\n        Severity._debug = new Severity(Severity.DEBUG_LEVEL, label);\n      }\n      return Severity._debug;\n    } else {\n      return new Severity(Severity.DEBUG_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `INFO_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static info(label: string = \"info\"): Severity {\n    if (label === \"info\") {\n      if (Severity._info === void 0) {\n        Severity._info = new Severity(Severity.INFO_LEVEL, label);\n      }\n      return Severity._info;\n    } else {\n      return new Severity(Severity.INFO_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `NOTE_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static note(label: string = \"note\"): Severity {\n    if (label === \"note\") {\n      if (Severity._note === void 0) {\n        Severity._note = new Severity(Severity.NOTE_LEVEL, label);\n      }\n      return Severity._note;\n    } else {\n      return new Severity(Severity.NOTE_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `WARNING_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static warning(label: string = \"warning\"): Severity {\n    if (label === \"warning\") {\n      if (Severity._warning === void 0) {\n        Severity._warning = new Severity(Severity.WARNING_LEVEL, label);\n      }\n      return Severity._warning;\n    } else {\n      return new Severity(Severity.WARNING_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `ERROR_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static error(label: string = \"error\"): Severity {\n    if (label === \"error\") {\n      if (Severity._error === void 0) {\n        Severity._error = new Severity(Severity.ERROR_LEVEL, label);\n      }\n      return Severity._error;\n    } else {\n      return new Severity(Severity.ERROR_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `ALERT_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static alert(label: string = \"alert\"): Severity {\n    if (label === \"alert\") {\n      if (Severity._alert === void 0) {\n        Severity._alert = new Severity(Severity.ALERT_LEVEL, label);\n      }\n      return Severity._alert;\n    } else {\n      return new Severity(Severity.ALERT_LEVEL, label);\n    }\n  }\n\n  /**\n   * Returns a `Severity` with `FATAL_LEVEL` of importance, and an optional\n   * descriptive `label`.\n   */\n  static fatal(label: string = \"fatal\"): Severity {\n    if (label === \"fatal\") {\n      if (Severity._fatal === void 0) {\n        Severity._fatal = new Severity(Severity.FATAL_LEVEL, label);\n      }\n      return Severity._fatal;\n    } else {\n      return new Severity(Severity.FATAL_LEVEL, label);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"../runtime/Values\";\n\n/**\n * A hashed generational cache map discards the least recently used value\n * with the worst hit rate per hash bucket.  HashGenCacheMap is a concurrent\n * and lock-free LRFU cache, with O(1) access time.\n *\n * Maintaining four \"generations\" of cached values per hash bucket, the cache\n * discards from the younger generations based on least recent usage, and\n * promotes younger generations to older generations based on most frequent\n * usage.  Cache misses count as negative usage of the older generations,\n * biasing the cache against least recently used values with poor hit rates.\n */\nexport class HashGenCacheMap<K, V> {\n  /** @hidden */\n  readonly buckets: Array<HashGenCacheMapBucket<K, V> | undefined>;\n  /** @hidden */\n  gen4Hits: number;\n  /** @hidden */\n  gen3Hits: number;\n  /** @hidden */\n  gen2Hits: number;\n  /** @hidden */\n  gen1Hits: number;\n  /** @hidden */\n  misses: number;\n\n  constructor(size: number) {\n    this.buckets = new Array(size);\n    this.gen4Hits = 0;\n    this.gen3Hits = 0;\n    this.gen2Hits = 0;\n    this.gen1Hits = 0;\n    this.misses = 0;\n  }\n\n  get(key: K): V | undefined {\n    if (this.buckets.length === 0) {\n      return void 0;\n    }\n    const index = Math.abs(Values.hash(key)) % this.buckets.length;\n    const bucket = this.buckets[index];\n    if (bucket === void 0) {\n      return void 0;\n    }\n\n    const gen4Key = bucket.gen4Key;\n    if (gen4Key !== void 0 && Values.equal(key, gen4Key)) {\n      const gen4Val = bucket.gen4Val;\n      if (gen4Val !== void 0) {\n        this.gen4Hits += 1;\n        bucket.gen4Weight++;\n        return gen4Val;\n      } else {\n        bucket.gen4Key = void 0;\n      }\n    }\n\n    const gen3Key = bucket.gen3Key;\n    if (gen3Key !== void 0 && Values.equal(key, gen3Key)) {\n      const gen3Val = bucket.gen3Val;\n      if (gen3Val !== void 0) {\n        this.gen3Hits += 1;\n        if (bucket.gen3Weight++ > bucket.gen4Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight);\n        }\n        return gen3Val;\n      } else {\n        bucket.gen3Key = void 0;\n      }\n    }\n\n    const gen2Key = bucket.gen2Key;\n    if (gen2Key !== void 0 && Values.equal(key, gen2Key)) {\n      const gen2Val = bucket.gen2Val;\n      if (gen2Val !== void 0) {\n        this.gen2Hits += 1;\n        if (bucket.gen2Weight++ > bucket.gen3Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight);\n        }\n        return gen2Val;\n      } else {\n        bucket.gen2Key = void 0;\n      }\n    }\n\n    const gen1Key = bucket.gen1Key;\n    if (gen1Key !== void 0 && Values.equal(key, gen1Key)) {\n      const gen1Val = bucket.gen1Val;\n      if (gen1Val !== void 0) {\n        this.gen1Hits += 1;\n        if (bucket.gen1Weight++ > bucket.gen2Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight);\n        }\n        return gen1Val;\n      } else {\n        bucket.gen1Key = void 0;\n      }\n    }\n\n    this.misses += 1;\n    return void 0;\n  }\n\n  put(key: K, value: V): V {\n    if (this.buckets.length === 0) {\n      return value;\n    }\n    const index = Math.abs(Values.hash(key)) % this.buckets.length;\n    const bucket = this.buckets[index] || new HashGenCacheMapBucket();\n\n    let gen4Key = bucket.gen4Key;\n    if (gen4Key !== void 0 && Values.equal(key, gen4Key)) {\n      const gen4Val = bucket.gen4Val;\n      if (gen4Val !== void 0) {\n        this.gen4Hits += 1;\n        bucket.gen4Weight++;\n        return gen4Val;\n      } else {\n        bucket.gen4Key = void 0;\n        gen4Key = void 0;\n      }\n    }\n\n    let gen3Key = bucket.gen3Key;\n    if (gen3Key !== void 0 && Values.equal(key, gen3Key)) {\n      const gen3Val = bucket.gen3Val;\n      if (gen3Val !== void 0) {\n        this.gen3Hits += 1;\n        if (bucket.gen3Weight++ > bucket.gen4Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight);\n        }\n        return gen3Val;\n      } else {\n        bucket.gen3Key = void 0;\n        gen3Key = void 0;\n      }\n    }\n\n    let gen2Key = bucket.gen2Key;\n    if (gen2Key !== void 0 && Values.equal(key, gen2Key)) {\n      const gen2Val = bucket.gen2Val;\n      if (gen2Val !== void 0) {\n        this.gen2Hits += 1;\n        if (bucket.gen2Weight++ > bucket.gen3Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight);\n        }\n        return gen2Val;\n      } else {\n        bucket.gen2Key = void 0;\n        gen2Key = void 0;\n      }\n    }\n\n    let gen1Key = bucket.gen1Key;\n    if (gen1Key !== void 0 && Values.equal(key, gen1Key)) {\n      const gen1Val = bucket.gen1Val;\n      if (gen1Val !== void 0) {\n        this.gen1Hits += 1;\n        if (bucket.gen1Weight++ > bucket.gen2Weight) {\n          this.buckets[index] = new HashGenCacheMapBucket(\n              bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n              bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n              bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n              bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight);\n        }\n        return gen1Val;\n      } else {\n        bucket.gen1Key = void 0;\n        gen1Key = void 0;\n      }\n    }\n\n    this.misses += 1;\n    if (gen4Key === void 0) {\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          key, value, 1);\n    } else if (gen3Key === void 0) {\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          key, value, 1);\n    } else if (gen2Key === void 0) {\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          key, value, 1);\n    } else if (gen1Key === void 0) {\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          key, value, 1);\n    } else {\n      // Penalize older gens for thrash. Promote gen1 to prevent nacent gens\n      // from flip-flopping. If sacrificed gen2 was worth keeping, it likely\n      // would have already been promoted.\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight - 1,\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight - 1,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          key, value, 1);\n    }\n\n    return value;\n  }\n\n  remove(key: K): V | undefined {\n    if (this.buckets.length === 0) {\n      return void 0;\n    }\n    const index = Math.abs(Values.hash(key)) % this.buckets.length;\n    const bucket = this.buckets[index];\n    if (bucket === void 0) {\n      return void 0;\n    }\n\n    const gen4Key = bucket.gen4Key;\n    if (gen4Key !== void 0 && Values.equal(key, gen4Key)) {\n      const gen4Val = bucket.gen4Val;\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          void 0, void 0, 0);\n      return gen4Val;\n    }\n\n    const gen3Key = bucket.gen3Key;\n    if (gen3Key !== void 0 && Values.equal(key, gen3Key)) {\n      const gen3Val = bucket.gen3Val;\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          void 0, void 0, 0);\n      return gen3Val;\n    }\n\n    const gen2Key = bucket.gen2Key;\n    if (gen2Key !== void 0 && Values.equal(key, gen2Key)) {\n      const gen2Val = bucket.gen2Val;\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen1Key, bucket.gen1Val, bucket.gen1Weight,\n          void 0, void 0, 0);\n      return gen2Val;\n    }\n\n    const gen1Key = bucket.gen1Key;\n    if (gen1Key !== void 0 && Values.equal(key, gen1Key)) {\n      const gen1Val = bucket.gen1Val;\n      this.buckets[index] = new HashGenCacheMapBucket(\n          bucket.gen4Key, bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Key, bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Key, bucket.gen2Val, bucket.gen2Weight,\n          void 0, void 0, 0);\n      return gen1Val;\n    }\n\n    return void 0;\n  }\n\n  clear(): void {\n    for (let i = 0; i < this.buckets.length; i += 1) {\n      this.buckets[i] = void 0;\n    }\n  }\n\n  /** @hidden */\n  hits(): number {\n    return this.gen4Hits + this.gen3Hits + this.gen2Hits + this.gen1Hits;\n  }\n\n  hitRatio(): number {\n    const hits = this.hits();\n    return hits / (hits + this.misses);\n  }\n}\n\n/** @hidden */\nexport class HashGenCacheMapBucket<K, V> {\n  /** @hidden */\n  gen4Key: K | undefined;\n  /** @hidden */\n  gen4Val: V | undefined;\n  /** @hidden */\n  gen4Weight: number;\n  /** @hidden */\n  gen3Key: K | undefined;\n  /** @hidden */\n  gen3Val: V | undefined;\n  /** @hidden */\n  gen3Weight: number;\n  /** @hidden */\n  gen2Key: K | undefined;\n  /** @hidden */\n  gen2Val: V | undefined;\n  /** @hidden */\n  gen2Weight: number;\n  /** @hidden */\n  gen1Key: K | undefined;\n  /** @hidden */\n  gen1Val: V | undefined;\n  /** @hidden */\n  gen1Weight: number;\n\n  constructor(gen4Key?: K, gen4Val?: V, gen4Weight: number = 0,\n              gen3Key?: K, gen3Val?: V, gen3Weight: number = 0,\n              gen2Key?: K, gen2Val?: V, gen2Weight: number = 0,\n              gen1Key?: K, gen1Val?: V, gen1Weight: number = 0) {\n    this.gen4Key = gen4Key;\n    this.gen4Val = gen4Val;\n    this.gen4Weight = gen4Weight;\n    this.gen3Key = gen3Key;\n    this.gen3Val = gen3Val;\n    this.gen3Weight = gen3Weight;\n    this.gen2Key = gen2Key;\n    this.gen2Val = gen2Val;\n    this.gen2Weight = gen2Weight;\n    this.gen1Key = gen1Key;\n    this.gen1Val = gen1Val;\n    this.gen1Weight = gen1Weight;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"../runtime/Values\";\n\n/**\n * A hashed generational cache set discards the least recently used value\n * with the worst hit rate per hash bucket.  HashGenCacheSet is a concurrent\n * and lock-free LRFU cache, with O(1) access time.\n *\n * Maintaining four \"generations\" of cached values per hash bucket, the cache\n * discards from the younger generations based on least recent usage, and\n * promotes younger generations to older generations based on most frequent\n * usage.  Cache misses count as negative usage of the older generations,\n * biasing the cache against least recently used values with poor hit rates.\n *\n * The cache soft references the older generations, and weak references the\n * younger generations; the garbage collector can reclaim the entire cache,\n * but will preferentially wipe the younger cache generations before the older\n * cache generations.\n */\nexport class HashGenCacheSet<T> {\n  readonly buckets: Array<HashGenCacheSetBucket<T> | undefined>;\n  gen4Hits: number;\n  gen3Hits: number;\n  gen2Hits: number;\n  gen1Hits: number;\n  misses: number;\n\n  constructor(size: number) {\n    this.buckets = new Array(size);\n    this.gen4Hits = 0;\n    this.gen3Hits = 0;\n    this.gen2Hits = 0;\n    this.gen1Hits = 0;\n    this.misses = 0;\n  }\n\n  put(value: T): T {\n    if (this.buckets.length === 0) {\n      return value;\n    }\n    const index = Math.abs(Values.hash(value)) % this.buckets.length;\n    const bucket = this.buckets[index] || new HashGenCacheSetBucket<T>();\n\n    const gen4Val = bucket.gen4Val;\n    if (gen4Val !== void 0 && Values.equal(value, gen4Val)) {\n      this.gen4Hits += 1;\n      bucket.gen4Weight++;\n      return gen4Val;\n    }\n\n    const gen3Val = bucket.gen3Val;\n    if (gen3Val !== void 0 && Values.equal(value, gen3Val)) {\n      this.gen3Hits += 1;\n      if (bucket.gen3Weight++ > bucket.gen4Weight) {\n        this.buckets[index] = new HashGenCacheSetBucket<T>(\n            bucket.gen3Val, bucket.gen3Weight,\n            bucket.gen4Val, bucket.gen4Weight,\n            bucket.gen2Val, bucket.gen2Weight,\n            bucket.gen1Val, bucket.gen1Weight);\n      }\n      return gen3Val;\n    }\n\n    const gen2Val = bucket.gen2Val;\n    if (gen2Val !== void 0 && Values.equal(value, gen2Val)) {\n      this.gen2Hits += 1;\n      if (bucket.gen2Weight++ > bucket.gen3Weight) {\n        this.buckets[index] = new HashGenCacheSetBucket<T>(\n            bucket.gen4Val, bucket.gen4Weight,\n            bucket.gen2Val, bucket.gen2Weight,\n            bucket.gen3Val, bucket.gen3Weight,\n            bucket.gen1Val, bucket.gen1Weight);\n      }\n      return gen2Val;\n    }\n\n    const gen1Val = bucket.gen1Val;\n    if (gen1Val !== void 0 && Values.equal(value, gen1Val)) {\n      this.gen1Hits += 1;\n      if (bucket.gen1Weight++ > bucket.gen2Weight) {\n        this.buckets[index] = new HashGenCacheSetBucket<T>(\n            bucket.gen4Val, bucket.gen4Weight,\n            bucket.gen3Val, bucket.gen3Weight,\n            bucket.gen1Val, bucket.gen1Weight,\n            bucket.gen2Val, bucket.gen2Weight);\n      }\n      return gen1Val;\n    }\n\n    this.misses += 1;\n    if (gen4Val === void 0) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          value, 1);\n    } else if (gen3Val === void 0) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          value, 1);\n    } else if (gen2Val === void 0) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          value, 1);\n    } else if (gen1Val === void 0) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          value, 1);\n    } else {\n      // Penalize older gens for thrash. Promote gen1 to prevent nacent gens\n      // from flip-flopping. If sacrificed gen2 was worth keeping, it likely\n      // would have already been promoted.\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight - 1,\n          bucket.gen3Val, bucket.gen3Weight - 1,\n          bucket.gen1Val, bucket.gen1Weight,\n          value, 1);\n    }\n\n    return value;\n  }\n\n  remove(value: T): boolean {\n    if (this.buckets.length === 0) {\n      return false;\n    }\n    const index = Math.abs(Values.hash(value)) % this.buckets.length;\n    const bucket = this.buckets[index];\n    if (bucket === void 0) {\n      return false;\n    }\n\n    const gen4Val = bucket.gen4Val;\n    if (gen4Val !== void 0 && Values.equal(value, gen4Val)) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          void 0, 0);\n      return true;\n    }\n\n    const gen3Val = bucket.gen3Val;\n    if (gen3Val !== void 0 && Values.equal(value, gen3Val)) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          void 0, 0);\n      return true;\n    }\n\n    const gen2Val = bucket.gen2Val;\n    if (gen2Val !== void 0 && Values.equal(value, gen2Val)) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen1Val, bucket.gen1Weight,\n          void 0, 0);\n      return true;\n    }\n\n    const gen1Val = bucket.gen1Val;\n    if (gen1Val !== void 0 && Values.equal(value, gen1Val)) {\n      this.buckets[index] = new HashGenCacheSetBucket<T>(\n          bucket.gen4Val, bucket.gen4Weight,\n          bucket.gen3Val, bucket.gen3Weight,\n          bucket.gen2Val, bucket.gen2Weight,\n          void 0, 0);\n      return true;\n    }\n\n    return false;\n  }\n\n  clear(): void {\n    for (let i = 0; i < this.buckets.length; i += 1) {\n      this.buckets[i] = void 0;\n    }\n  }\n\n  /** @hidden */\n  get hits(): number {\n    return this.gen4Hits + this.gen3Hits + this.gen2Hits + this.gen1Hits;\n  }\n\n  get hitRatio(): number {\n    const hits = this.hits;\n    return hits / (hits + this.misses);\n  }\n}\n\n/** @hidden */\nexport class HashGenCacheSetBucket<T> {\n  /** @hidden */\n  gen4Val: T | undefined;\n  /** @hidden */\n  gen4Weight: number;\n  /** @hidden */\n  gen3Val: T | undefined;\n  /** @hidden */\n  gen3Weight: number;\n  /** @hidden */\n  gen2Val: T | undefined;\n  /** @hidden */\n  gen2Weight: number;\n  /** @hidden */\n  gen1Val: T | undefined;\n  /** @hidden */\n  gen1Weight: number;\n\n  constructor(gen4Val?: T, gen4Weight: number = 0,\n              gen3Val?: T, gen3Weight: number = 0,\n              gen2Val?: T, gen2Weight: number = 0,\n              gen1Val?: T, gen1Weight: number = 0) {\n    this.gen4Val = gen4Val;\n    this.gen4Weight = gen4Weight;\n    this.gen3Val = gen3Val;\n    this.gen3Weight = gen3Weight;\n    this.gen2Val = gen2Val;\n    this.gen2Weight = gen2Weight;\n    this.gen1Val = gen1Val;\n    this.gen1Weight = gen1Weight;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {HashCode} from \"@swim/util\";\nimport type {Mark} from \"./Mark\";\nimport type {Output} from \"../output/Output\";\nimport type {Display} from \"../format/Display\";\nimport type {Debug} from \"../format/Debug\";\n\n/**\n * Description of a source location.  Tags are used to annotate input sources,\n * particularly for [[Diagnostic diagnostic]] purposes.  A [[Mark]] tag\n * annotates a source position.  A [[Span]] tag annotate a source range.\n *\n * @see [[Diagnostic]]\n */\nexport abstract class Tag implements HashCode, Display, Debug {\n  /**\n   * The first source position covered by this `Tag`.\n   */\n  abstract get start(): Mark;\n\n  /**\n   * The last source position covered by this `Tag`.\n   */\n  abstract get end(): Mark;\n\n  /**\n   * Returns a `Tag` that includes all source locations covered by\n   * both this tag, and `that` tag.\n   */\n  abstract union(that: Tag): Tag;\n\n  /**\n   * Returns the position of this `Tag` relative to the given `mark`.\n   */\n  abstract shift(mark: Mark): Tag;\n\n  abstract display(output: Output): void;\n\n  abstract debug(output: Output): void;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Strings, Constructors} from \"@swim/util\";\nimport {Tag} from \"./Tag\";\nimport {Span} from \"../\"; // forward import\nimport type {Output} from \"../output/Output\";\nimport {Format} from \"../\"; // forward import\n\n/**\n * Description of a source position, identified by byte offset, line, and\n * column number, with an optional note.\n */\nexport class Mark extends Tag {\n  /** @hidden */\n  constructor(offset: number, line: number, column: number, note: string | undefined) {\n    super();\n    Object.defineProperty(this, \"offset\", {\n      value: offset,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"line\", {\n      value: line,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"column\", {\n      value: column,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"note\", {\n      value: note,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /**\n   * The zero-based byte offset of this position.\n   */\n  declare readonly offset: number;\n\n  /**\n   * The one-based line number of this position.\n   */\n  declare readonly line: number;\n\n  /**\n   * The one-based column number of this position.\n   */\n  declare readonly column: number;\n\n  /**\n   * The note attached to the marked position, or `null` if this position has\n   * no attached note.\n   */\n  declare readonly note: string | undefined;\n\n  withNote(note: string | undefined): Mark {\n    if (this.note !== note) {\n      return Mark.at(this.offset, this.line, this.column, note);\n    } else {\n      return this;\n    }\n  }\n\n  /**\n   * Returns this position, if its byte offset is less than or equal to\n   * `that` position; otherwise returns `that` position.\n   */\n  min(that: Mark): Mark {\n    return this.offset <= that.offset ? this : that;\n  }\n\n  /**\n   * Returns this position, if its byte offset is greater than or equal to\n   * `that` position; otherwise returns `that` position.\n   */\n  max(that: Mark): Mark {\n    return this.offset >= that.offset ? this : that;\n  }\n\n  get start(): Mark {\n    return this;\n  }\n\n  get end(): Mark {\n    return this;\n  }\n\n  union(that: Tag): Tag {\n    if (that instanceof Mark) {\n      if (this.offset === that.offset && this.line === that.line\n          && this.column === that.column) {\n        return this;\n      } else {\n        return Span.from(this, that);\n      }\n    } else if (that instanceof Span) {\n      const start = this.min(that.start);\n      const end = this.max(that.end);\n      if (start === that.start && end === that.end) {\n        return that;\n      } else {\n        return Span.from(start, end);\n      }\n    }\n    throw new Error(that.toString());\n  }\n\n  shift(mark: Mark): Mark {\n    const offset = this.offset + (this.offset - mark.offset);\n    const line = this.line + (this.line - mark.line);\n    let column = this.column;\n    if (line === 1) {\n      column += (this.column - mark.column);\n    }\n    if (offset === this.offset && line === this.line && column === this.column) {\n      return this;\n    } else {\n      return Mark.at(offset, line, column, this.note);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Mark) {\n      return this.offset === that.offset && this.line === that.line\n          && this.column === that.column && this.note === that.note;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(Constructors.hash(Mark),\n        Numbers.hash(this.offset)), Numbers.hash(this.line)), Numbers.hash(this.column)),\n        Strings.hash(this.note)));\n  }\n\n  display(output: Output): void {\n    Format.displayNumber(this.line, output);\n    output = output.write(58/*':'*/);\n    Format.displayNumber(this.column, output);\n    if (this.note !== void 0) {\n      output = output.write(58/*':'*/).write(32/*' '*/).write(this.note);\n    }\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Mark\").write(\".\").write(\"at\").write(\"(\");\n    Format.debugNumber(this.offset, output);\n    output = output.write(\", \");\n    Format.debugNumber(this.line, output);\n    output = output.write(\", \");\n    Format.debugNumber(this.column, output);\n    if (this.note !== void 0) {\n      output = output.write(\", \");\n      Format.debugString(this.note, output);\n    }\n    output = output.write(\")\");\n  }\n\n  toString(): string {\n    return Format.display(this);\n  }\n\n  /**\n   * Returns a `Mark` at byte offset `0`, line `1`, and column `1`, with no\n   * attached note.\n   */\n  @Lazy\n  static get zero(): Mark {\n    return new Mark(0, 1, 1, void 0);\n  }\n\n  /**\n   * Returns a new `Mark` at the given zero-based byte `offset`, one-based\n   * `line` number, and one-based `column` number, with an optionally attached\n   * `note`.\n   */\n  static at(offset: number, line: number, column: number, note?: string | undefined): Mark {\n    return new Mark(offset, line, column, note);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport {Tag} from \"./Tag\";\nimport {Mark} from \"./Mark\";\nimport type {Output} from \"../output/Output\";\nimport {Format} from \"../\"; // forward import\n\n/**\n * Description of a source range, identified by a closed interval between start\n * and end [[Mark marks]].\n */\nexport class Span extends Tag {\n  /** @hidden */\n  constructor(start: Mark, end: Mark) {\n    super();\n    Object.defineProperty(this, \"start\", {\n      value: start,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"end\", {\n      value: end,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly start: Mark;\n\n  declare readonly end: Mark;\n\n  union(that: Tag): Tag {\n    if (that instanceof Mark) {\n      const start = this.start.min(that);\n      const end = this.end.max(that);\n      if (start === this.start && end === this.end) {\n        return this;\n      } else {\n        return Span.from(start, end);\n      }\n    } else if (that instanceof Span) {\n      const start = this.start.min(that.start);\n      const end = this.end.max(that.end);\n      if (start === this.start && end === this.end) {\n        return this;\n      } else {\n        return Span.from(start, end);\n      }\n    }\n    throw new Error(that.toString());\n  }\n\n  shift(mark: Mark): Span {\n    const start = this.start.shift(mark);\n    const end = this.end.shift(mark);\n    if (start === this.start && end === this.end) {\n      return this;\n    } else {\n      return Span.from(start, end);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Span) {\n      return this.start.equals(that.start) && this.end.equals(that.end);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(Span),\n        this.start.hashCode()), this.end.hashCode()));\n  }\n\n  display(output: Output): void {\n    if (this.start.note !== void 0) {\n      output = output.write(this.start.note).write(58/*':'*/).write(32/*' '*/);\n    }\n    Format.displayNumber(this.start.line, output);\n    output = output.write(58/*':'*/);\n    Format.displayNumber(this.start.column, output);\n    output = output.write(45/*'-'*/);\n    Format.displayNumber(this.end.line, output);\n    output = output.write(58/*':'*/);\n    Format.displayNumber(this.end.column, output);\n    if (this.end.note !== void 0) {\n      output = output.write(58/*':'*/).write(32/*' '*/).write(this.end.note);\n    }\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Span\").write(\".\").write(\"from\").write(\"(\");\n    this.start.debug(output);\n    output = output.write(\", \");\n    this.end.debug(output);\n    output = output.write(\")\");\n  }\n\n  toString(): string {\n    return Format.display(this);\n  }\n\n  /**\n   * Returns a new `Span` representing the closed interval between the given\n   * `start` and `end` marks.\n   */\n  static from(start: Mark, end: Mark): Span {\n    if (start.offset > end.offset) {\n      const tmp = start;\n      start = end;\n      end = tmp;\n    }\n    return new Span(start, end);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\n\n/**\n * Stylized text output utility functions.\n */\nexport const OutputStyle = {} as {\n  /**\n   * Writes the ASCII reset escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  reset(output: Output): void\n\n  /**\n   * Writes the ASCII bold (increased intensity) escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  bold(output: Output): void;\n\n  /**\n   * Writes the ASCII faint (decreased intensity) escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  faint(output: Output): void;\n\n  /**\n   * Writes the ASCII black foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  black(output: Output): void;\n\n  /**\n   * Writes the ASCII red foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  red(output: Output): void;\n\n  /**\n   * Writes the ASCII green foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  green(output: Output): void;\n\n  /**\n   * Writes the ASCII yellow foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  yellow(output: Output): void;\n\n  /**\n   * Writes the ASCII blue foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  blue(output: Output): void;\n\n  /**\n   * Writes the ASCII magenta foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  magenta(output: Output): void;\n\n  /**\n   * Writes the ASCII cyan foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  cyan(output: Output): void;\n\n  /**\n   * Writes the ASCII gray foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  gray(output: Output): void;\n\n  /**\n   * Writes the ASCII bold black foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  blackBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold red foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  redBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold green foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  greenBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold yellow foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  yellowBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold blue foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  blueBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold magenta foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  magentaBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold cyan foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  cyanBold(output: Output): void;\n\n  /**\n   * Writes the ASCII bold gray foreground color escape code to `output`,\n   * if [[OutputSettings.isStyled `output.settings.isStyled()`]] is `true`.\n   *\n   * @throws [[OutputException]] if `output` exits the _cont_ state before the\n   *         full escape code has been written.\n   */\n  grayBold(output: Output): void;\n};\n\nOutputStyle.reset = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.bold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.faint = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(50/*'2'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.black = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(48/*'0'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.red = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(49/*'1'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.green = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(50/*'2'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.yellow = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(51/*'3'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.blue = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(52/*'4'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.magenta = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(53/*'5'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.cyan = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(54/*'6'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.gray = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(48/*'0'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(55/*'7'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.blackBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(48/*'0'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.redBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(49/*'1'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.greenBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(50/*'2'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.yellowBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(51/*'3'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.blueBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(52/*'4'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.magentaBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(53/*'5'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.cyanBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(54/*'6'*/).write(109/*'m'*/);\n  }\n};\n\nOutputStyle.grayBold = function (output: Output): void {\n  if (output.settings.isStyled()) {\n    output = output.write(27).write(91/*'['*/).write(49/*'1'*/).write(59/*';'*/)\n        .write(51/*'3'*/).write(55/*'7'*/).write(109/*'m'*/);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Thrown when writing invalid [[Output]].\n */\nexport class OutputException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, OutputException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, HashCode, Booleans, Numbers, Strings, Constructors} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport type {Debug} from \"../format/Debug\";\nimport {Format} from \"../format/Format\";\n\n/**\n * Either an [[OutputSettings]] instance, or an [[OutputSettingsInit]] object\n * initializer.\n */\nexport type AnyOutputSettings = OutputSettings | OutputSettingsInit;\n\n/**\n * [[OutputSettings]] object initializer.\n */\nexport interface OutputSettingsInit {\n  lineSeparator?: string;\n  isPretty?: boolean;\n  isStyled?: boolean;\n  precision?: number;\n}\n\n/**\n * [[Output]] production parameters.  `OutputSettings` provide contextual\n * configuration parameters to output producers, such as [[Writer Writers]].\n * Uses include enabling pretty printing and styling generated output.\n * Subclasses can provide additional parameters understood by specialized\n * output producers.\n */\nexport class OutputSettings implements Debug, HashCode {\n  protected constructor(lineSeparator: string, pretty: boolean,\n                        styled: boolean, precision: number) {\n    Object.defineProperty(this, \"lineSeparator\", {\n      value: lineSeparator,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"pretty\", {\n      value: pretty,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"styled\", {\n      value: styled,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"precision\", {\n      value: precision,\n      enumerable: true,\n    });\n  }\n\n  /**\n   * The Unicode code point sequence used to separate lines of text.\n   * Defaults to the runtime operating system's line separator.\n   */\n  declare readonly lineSeparator: string;\n\n  /**\n   * Returns a copy of these settings with the given `lineSeparator`.\n   */\n  withLineSeparator(lineSeparator: string | undefined): string | OutputSettings {\n    return this.copy(lineSeparator, this.pretty, this.styled, this.precision);\n  }\n\n  /** @hidden */\n  declare readonly pretty: boolean;\n\n  /**\n   * Returns `true` if output producers should pretty print their output,\n   * when possible.\n   */\n  isPretty(): boolean {\n    return this.pretty;\n  }\n\n  /**\n   * Returns a copy of these settings with the given `pretty` flag.\n   */\n  asPretty(pretty: boolean): OutputSettings {\n    return this.copy(this.lineSeparator, pretty, this.styled, this.precision);\n  }\n\n  /** @hidden */\n  declare readonly styled: boolean;\n\n  /**\n   * Returns `true` if output producers should style their output,\n   * when possible.\n   */\n  isStyled(): boolean {\n    return this.styled;\n  }\n\n  /**\n   * Returns a copy of these settings with the given `styled` flag.\n   */\n  asStyled(styled: boolean): OutputSettings {\n    return this.copy(this.lineSeparator, this.pretty, styled, this.precision);\n  }\n\n  /**\n   * Returns the numeric precision output producers should use\n   * when formatting numbers.\n   */\n  declare readonly precision: number;\n\n  /**\n   * Returns a copy of these settings with the given numeric `precision`.\n   */\n  withPrecision(precision: number): OutputSettings {\n    return this.copy(this.lineSeparator, this.pretty, this.styled, precision);\n  }\n\n  protected copy(lineSeparator: string | undefined, pretty: boolean,\n                 styled: boolean, precision: number): OutputSettings {\n    return OutputSettings.create(lineSeparator, pretty, styled, precision);\n  }\n\n  protected canEqual(that: unknown): boolean {\n    return that instanceof OutputSettings;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof OutputSettings) {\n      return that.canEqual(this) && this.lineSeparator === that.lineSeparator\n          && this.pretty === that.pretty && this.styled === that.styled\n          && this.precision === that.precision;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(OutputSettings), Strings.hash(this.lineSeparator)),\n        Booleans.hash(this.pretty)), Booleans.hash(this.styled)),\n        Numbers.hash(this.precision)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"OutputSettings\").write(46/*'.'*/);\n    if (!this.pretty && !this.styled) {\n      output = output.write(\"standard\");\n    } else if (this.pretty && !this.styled) {\n      output = output.write(\"pretty\");\n    } else if (!this.pretty && this.styled) {\n      output = output.write(\"styled\");\n    } else {\n      output = output.write(\"prettyStyled\");\n    }\n    output = output.write(40/*'('*/).write(41/*')'*/);\n    if (this.lineSeparator !== Format.lineSeparator) {\n      output = output.write(46/*'.'*/).write(\"lineSeparator\").write(40/*'('*/)\n          .display(this.lineSeparator).write(41/*')'*/);\n    }\n    if (this.precision !== -1) {\n      output = output.write(46/*'.'*/).write(\"precision\").write(40/*'('*/)\n          .display(this.precision).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  /**\n   * Returns `OutputSettings` configured with the system line separator,\n   * pretty printing disabled, and styling disabled.\n   */\n  @Lazy\n  static standard(): OutputSettings {\n    return new OutputSettings(Format.lineSeparator, false, false, -1);\n  }\n\n  /**\n   * Returns `OutputSettings` configured with the system line separator,\n   * pretty printing enabled, and styling disabled.\n   */\n  @Lazy\n  static pretty(): OutputSettings {\n    return new OutputSettings(Format.lineSeparator, true, false, -1);\n  }\n\n  /**\n   * Returns `OutputSettings` configured with the system line separator,\n   * pretty printing disabled, and styling enabled.\n   */\n  @Lazy\n  static styled(): OutputSettings {\n    return new OutputSettings(Format.lineSeparator, false, true, -1);\n  }\n\n  /**\n   * Returns `OutputSettings` configured with the system line separator,\n   * pretty printing enabled, and styling enabled.\n   */\n  @Lazy\n  static prettyStyled(): OutputSettings {\n    return new OutputSettings(Format.lineSeparator, true, true, -1);\n  }\n\n  /**\n   * Returns `OutputSettings` configured with the given `lineSeparator`, pretty\n   * rinting enabled if `isPretty` is `true`, styling enabled if `isStyled` is\n   * `true`, and with the given numeric `precision`.\n   */\n  static create(lineSeparator?: string, pretty?: boolean,\n                styled?: boolean, precision?: number): OutputSettings {\n    if (typeof lineSeparator !== \"string\") {\n      lineSeparator = Format.lineSeparator;\n    }\n    if (typeof pretty !== \"boolean\") {\n      pretty = false;\n    }\n    if (typeof styled !== \"boolean\") {\n      styled = false;\n    }\n    if (typeof precision !== \"number\") {\n      precision = -1;\n    }\n    if (lineSeparator === Format.lineSeparator && precision === -1) {\n      if (!pretty && !styled) {\n        return OutputSettings.standard();\n      } else if (pretty && !styled) {\n        return OutputSettings.pretty();\n      } else if (!pretty && styled) {\n        return OutputSettings.styled();\n      } else {\n        return OutputSettings.prettyStyled();\n      }\n    }\n    return new OutputSettings(lineSeparator, pretty, styled, precision);\n  }\n\n  /**\n   * Converts a settings `init` object to an instance of `OutputSettings`.\n   */\n  static fromInit(init: OutputSettingsInit): OutputSettings {\n    return OutputSettings.create(init.lineSeparator, init.isPretty,\n                                 init.isStyled, init.precision);\n  }\n\n  /**\n   * Converts a loosely typed settings `value` to an instance of `OutputSettings`.\n   */\n  static fromAny(value: AnyOutputSettings | undefined): OutputSettings {\n    if (value instanceof OutputSettings) {\n      return value;\n    } else if (typeof value === \"object\" && value !== null) {\n      return OutputSettings.fromInit(value);\n    }\n    return OutputSettings.standard();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Builder} from \"@swim/util\";\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {OutputFull} from \"../\"; // forward import\nimport {OutputDone} from \"../\"; // forward import\nimport {OutputError} from \"../\"; // forward import\nimport {Format} from \"../\"; // forward import\n\n/**\n * Non-blocking token stream writer.  `Output` enables incremental,\n * interruptible writing of network protocols and data formats.\n *\n * ### Output tokens\n * Output tokens are modeled as primitive numbers, commonly representing\n * Unicode code points, or raw octets; each `Output` implementation specifies\n * the semantic type of its tokens.\n *\n * ### Output states\n * An `Output` writer is always in one of three states: _cont_inue, _full_,\n * or _done_.  The _cont_ state indicates that the stream is ready to write a\n * single token; the _full_ state indicates that the stream is unable to write\n * additional tokens at this time, but that the stream may logically resume at\n * some point in the future; and the _done_ state indicates that the stream has\n * terminated, and that [[bind]] will return the output result.  [[isCont]]\n * returns `true` when in the _cont_ state; [[isFull]] returns `true` when in\n * the _full_ state; and [[isDone]] returns `true` when in the _done_ state.\n *\n * ### Output results\n * An `Output` writer yields a value of type `T`, obtained via the [[bind]]\n * method, representing some implementation defined result of writing the\n * output.  For example, an `Output<string>` implementation maybut is not\n * required toyield a `string` containing all code points written to the\n * output.\n *\n * ### Non-blocking behavior\n * `Output` writers never block.  An `Output` writer that would otherwise block\n * writing additional output instead enters the _full_ state, signaling the\n * output generator to back off producing the output, but to remain prepared to\n * produce additional output in the future.  An `Output` writer enters the\n * _done_ state when it encounters the final end of its output, signaling to\n * the output generator to stop producing.\n *\n * ### Output settings\n * An output generator may alter the tokens it produces based on its `Output`\n * writer's [[settings]].  Uses include pretty printing and styling generated\n * output.  [[OutputSettings]] subclasses can provide additional parameters\n * understood by specialized output producers.\n *\n * ### Cloning\n * An `Output` writer may be [[clone cloned]] to branch the token stream in an\n * implementation specified manner.  Not all `Output` implementations support\n * cloning.\n *\n * @see [[OutputSettings]]\n * @see [[Writer]]\n */\nexport abstract class Output<T = unknown> implements Builder<number, T> {\n  /**\n   * Returns `true` when the next [[write write(number)]] will succeed.\n   * i.e. this `Output` is in the _cont_ state.\n   */\n  abstract isCont(): boolean;\n\n  /**\n   * Returns `true` when an immediate `write` will fail, but writes may succeed\n   * at some point in the future.  i.e. this `Output` is in the _full_ state.\n   */\n  abstract isFull(): boolean;\n\n  /**\n   * Returns `true` when no `write` will ever again suucced.\n   * i.e. this `Output` is in the _done_ state.\n   */\n  abstract isDone(): boolean;\n\n  /**\n   * Returns `true` when an immediate `write` will fail due to an\n   * error with the token stream. i.e. this `Output` is in the `error` state.\n   * When `true`, `trap()` will return the output error.\n   */\n  abstract isError(): boolean;\n\n  /**\n   * Returns `true` if this is a partial `Output` that will enter\n   * the `full` state when it is unable to write additional tokens.\n   */\n  abstract isPart(): boolean;\n\n  /**\n   * Returns a partial `Output` equivalent to this `Output`, if `part` is `true`;\n   * returns a final `Output` equivalent to this `Output` if `part` is `false`.\n   * The caller's reference to this `Output` should be replaced by the returned\n   * `Output`.\n   */\n  abstract asPart(part: boolean): Output<T>;\n\n  /**\n   * Writes a single `token` to the stream, if this `Output` is in the\n   * _cont_ state.\n   *\n   * @return `this`\n   * @throws [[OutputException]] if this `Output` is not in the _cont_ state.\n   */\n  abstract write(token: number): Output<T>;\n\n  /**\n   * Writes the code points of the given `string`.  Assumes this is a Unicode\n   * `Output` writer with sufficient capacity.\n   *\n   * @return `this`\n   * @throws [[OutputException]] if this `Output` exits the _cont_ state before\n   *         the full `string` has been written.\n   */\n  abstract write(string: string): Output<T>;\n\n  /**\n   * Writes the code points of the given `string`, followed by the code points\n   * of the `settings`' [[OutputSettings.lineSeparator line separator].\n   * Assumes this is a Unicode `Output` writer with sufficient capacity.\n   *\n   * @return `this`\n   * @throws [[OutputException]] if this `Output` exits the _cont_ state before\n   *         the full `string` and line separator has been written.\n   */\n  writeln(string?: string): Output<T> {\n    if (typeof string === \"string\") {\n      this.write(string);\n    }\n    return this.write(this.settings.lineSeparator);\n  }\n\n  /**\n   * Writes the code points of the human-readable [[Display]] string of the\n   * given `object`.  Assumes this is a Unicode `Output` writer with sufficient\n   * capacity.\n   *\n   * @return `this`\n   * @throws [[OutputException]] if this `Output` exits the _cont_ state before\n   *         the full display string has been written.\n   */\n  display(object: unknown): Output<T> {\n    Format.display(object, this);\n    return this;\n  }\n\n  /**\n   * Writes the code points of the developer-readable [[Debug]] string of the\n   * given `object`.  Assumes this is a Unicode `Output` writer with sufficient\n   * capacity.\n   *\n   * @return `this`\n   * @throws [[OutputException]] if this `Output` exits the _cont_ state before\n   *         the full debug string has been written.\n   */\n  debug(object: unknown): Output<T> {\n    Format.debug(object, this);\n    return this;\n  }\n\n  /**\n   * Writes any internally buffered state to the underlying output stream.\n   */\n  flush(): Output<T> {\n    return this;\n  }\n\n  push(...tokens: number[]): void {\n    const n = tokens.length;\n    for (let i = 0; i < n; i += 1) {\n      this.write(tokens[i]!);\n    }\n  }\n\n  /**\n   * The `OutputSettings` used to configure the behavior of output producers\n   * that write to this `Output`.\n   */\n  abstract readonly settings: OutputSettings;\n\n  /**\n   * Updates the `settings` associated with this `Output`.\n   *\n   * @return `this`\n   */\n  abstract withSettings(settings: AnyOutputSettings): Output<T>;\n\n  /**\n   * Returns the implementation-defined result of writing the output.\n   */\n  abstract bind(): T;\n\n  /**\n   * Returns the output error. Only guaranteed to return an error when in the\n   * _error_ state.\n   *\n   * @throws OutputException if this `Output` is not in the _error_ state.\n   */\n  trap(): Error {\n    throw new OutputException();\n  }\n\n  /**\n   * Returns an implementation-defined branch of the token stream.\n   *\n   * @throws `Error` if this `Output` writer cannot be cloned.\n   */\n  clone(): Output<T> {\n    throw new Error();\n  }\n\n  /**\n   * Return an `Output` in the _full_ state.\n   */\n  @Lazy\n  static full(): Output<never> {\n    return new OutputFull(OutputSettings.standard());\n  }\n\n  /**\n   * Returns an `Output` in the _done_ state.\n   */\n  @Lazy\n  static done(): Output<never> {\n    return new OutputDone(OutputSettings.standard());\n  }\n\n  /**\n   * Return an `Output` in the _error_ state that traps the given `error`.\n   */\n  static error(error: Error): Output<never> {\n    return new OutputError(error, OutputSettings.standard());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Thrown when reading invalid [[Input]].\n */\nexport class InputException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, InputException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, HashCode, Booleans, Constructors} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport type {Debug} from \"../format/Debug\";\nimport {Format} from \"../format/Format\";\n\n/**\n * Either an [[InputSettings]] instance, or an [[InputSettingsInit]] object\n * initializer.\n */\nexport type AnyInputSettings = InputSettings | InputSettingsInit;\n\nexport interface InputSettingsInit {\n  isStripped?: boolean;\n}\n\n/**\n * [[Input]] consumption parameters.  `InputSettings` provide contextual\n * configuration parameters to input consumers, such as [[Parser Parsers]].\n */\nexport class InputSettings implements HashCode, Debug {\n  /** @hidden */\n  declare readonly stripped: boolean;\n\n  protected constructor(stripped: boolean) {\n    Object.defineProperty(this, \"stripped\", {\n      value: stripped,\n      enumerable: true,\n    });\n  }\n\n  /**\n   * Returns `true` if input consumers should not include diagnostic metadata\n   * in generated output.\n   */\n  isStripped(): boolean {\n    return this.stripped;\n  }\n\n  /**\n   * Returns a copy of these settings with the given `stripped` flag.\n   */\n  asStripped(stripped: boolean): InputSettings {\n    return this.copy(stripped);\n  }\n\n  protected copy(stripped: boolean): InputSettings {\n    return InputSettings.create(stripped);\n  }\n\n  protected canEqual(that: unknown): boolean {\n    return that instanceof InputSettings;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof InputSettings) {\n      return that.canEqual(this) && this.stripped === that.stripped;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(InputSettings),\n        Booleans.hash(this.stripped)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"InputSettings\").write(46/*'.'*/);\n    if (!this.stripped) {\n      output = output.write(\"standard\");\n    } else {\n      output = output.write(\"stripped\");\n    }\n    output = output.write(40/*'('*/).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  /**\n   * Returns `InputSettings` configured to include diagnostic metadata in\n   * generated output.\n   */\n  @Lazy\n  static standard(): InputSettings {\n    return new InputSettings(false);\n  }\n\n  /**\n   * Returns `InputSettings` configured to omit diagnostic metadata in\n   * generated output.\n   */\n  @Lazy\n  static stripped(): InputSettings {\n    return new InputSettings(true);\n  }\n\n  /**\n   * Returns `InputSettings` configured to not include diagnostic metadata in\n   * generated output, if `isStripped` is `true`.\n   */\n  static create(isStripped?: boolean): InputSettings {\n    if (isStripped) {\n      return InputSettings.stripped();\n    }\n    return InputSettings.standard();\n  }\n\n  /**\n   * Converts the loosely typed `settings` to an instance of `InputSettings`.\n   */\n  static fromAny(settings: AnyInputSettings | undefined): InputSettings {\n    if (settings instanceof InputSettings) {\n      return settings;\n    } else if (typeof settings === \"object\" && settings !== null) {\n       return InputSettings.create(settings.isStripped);\n    } else {\n      return InputSettings.standard();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {InputEmpty} from \"../\"; // forward import\nimport {InputDone} from \"../\"; // forward import\nimport {InputError} from \"../\"; // forward import\n\n/**\n * Non-blocking token stream reader, with single token lookahead.\n * `Input` enables incremental, interruptible parsing of network protocols and\n * data formats.\n *\n * ### Input tokens\n * Input tokens are modeled as primitive numbers, commonly representing Unicode\n * code points, or raw octets; each `Input` implementation specifies the\n * semantic type of its tokens.  The [[head]]  method peeks at the lookahead\n * token, without consuming it, and the [[step]] method advances the input to\n * the next token.\n *\n * ### Input states\n * An `Input` reader is always in one of three states: _cont_inue, _empty_, or\n * _done_.  The _cont_ state indicates that a lookahead token is immediately\n * available; the _empty_ state indicates that no additional tokens are\n * available at this time, but that the stream may logically resume at some\n * point in the future; and the _done_ state indicates that the stream has\n * terminated.  [[isCont]] returns `true` when in the _cont_ state; [[isEmpty]]\n * returns `true` when in the _empty_ state; and [[isDone]] returns `true` when\n * in the _done_ state.\n *\n * ### Non-blocking behavior\n * `Input` readers never block.  An `Input` reader that would otherwise block\n * awaiting additional input instead enters the _empty_ state, signaling the\n * input consumer to back off processing the input, but to remain prepared to\n * process additional input in the future.  An `Input` reader enters the _done_\n * state when it encounters the final end of its input, signaling the input\n * consumer to stop processing.  [[Input.empty]] returns an `Input` reader in\n * the _empty_ state.  [[Input.done]] returns an `Input` reader in the _done_\n * state.\n *\n * ### Position tracking\n * The logical position of the lookahead token is made available via the\n * [[mark]] method, with optimized callouts for the byte [[offset]], one-based\n * [[line]] number, and one-based [[column]] in the current line.  The [[id]]\n * method returns a diagnostic identifier for the token stream.\n *\n * ### Cloning\n * An `Input` reader may be [[clone cloned]] to provide an indepently mutable\n * position into a shared token stream.  Not all `Input` implementations\n * support cloning.\n *\n * @see [[InputSettings]]\n * @see [[Parser]]\n */\nexport abstract class Input {\n  /**\n   * Returns `true` when a [[head lookahead]] token is immediately available.\n   * i.e. this `Input` is in the _cont_ state.\n   */\n  abstract isCont(): boolean;\n\n  /**\n   * Returns `true` when no lookahead token is currently available, but\n   * additional input may be available at some point in the future.  i.e. this\n   * `Input` is in the _empty_ state.\n   */\n  abstract isEmpty(): boolean;\n\n  /**\n   * Returns `true` when no lookahead token is currently available, and no\n   * additional input will ever become available.  i.e. this `Input` is in\n   * the _done_ state.\n   */\n  abstract isDone(): boolean;\n\n  /**\n   * Returns `true` when no lookahead token is currently available due to an\n   * error with the token stream. i.e. this `Input` is in the `error` state.\n   * When `true`, `trap()` will return the input error\n   */\n  abstract isError(): boolean;\n\n  /**\n   * Returns `true` if this is a partial `Input` will that enter the _empty_\n   * state after it consumes the last available input token.\n   */\n  abstract isPart(): boolean;\n\n   /**\n    * Returns a partial `Input` equivalent to this `Input`, if `part` is `true`;\n    * returns a final `Input` equivalent to this `Input` if `part` is `false`.\n    * The caller's reference to this `Input` should be replaced by the returned\n    * `Input`\n    */\n  abstract asPart(part: boolean): Input;\n\n  /**\n   * Returns the current lookahead token, if this `Input` is in the\n   * _cont_ state.\n   *\n   * @throws [[InputException]] if this `Input` is not in the _cont_ state.\n   */\n  abstract head(): number;\n\n  /**\n   * Advances to the next token, if this `Input` is in the _cont_ state.\n   *\n   * @throws `Error` if this `Input` is not in the _cont_ state.\n   */\n  abstract step(): Input;\n\n  /**\n   * Sets the position of this `Input` to the given `mark`.  Rewinds to the\n   * start of this `Input`, if `mark` is `undefined`.\n   *\n   * @throws [[InputException]] if this `Input` does not support seeking,\n   *         or is unable to reposition to the `mark`.\n   */\n  abstract seek(mark?: Mark): Input;\n\n  /**\n   * Returns the input error when in the _error_ state\n   *\n   * @throws InputException if the `Input` is not the _error_state\n   */\n  trap(): Error {\n    throw new InputException();\n  }\n\n  /**\n   * An informative identifier for this token stream, or `undefined` if this\n   * stream is unidentified.\n   */\n  abstract readonly id: string | undefined;\n\n  /**\n   * Returns an `Input` equivalent to this `Input`, but logically identified\n   * by the givenpossibly `undefined``id`.  The caller's reference to this\n   * `Input` should be replaced by the returned `Input`.\n   */\n  abstract withId(id: string | undefined): Input;\n\n  /**\n   * The position of the current lookahead token, relative to the start\n   * of the stream.\n   */\n  abstract readonly mark: Mark;\n\n  /**\n   * Returns an `Input` equivalent to this `Input`, but logically positioned\n   * at the given `mark`.  The physical position in the input stream is not\n   * modified.  The caller's reference to this `Input` should be replaced by\n   * the returned `Input`.\n   */\n  abstract withMark(mark: Mark): Input;\n\n  /**\n   * The byte offset of the current lookahead token, relative to the start\n   * of the stream.\n   */\n  abstract readonly offset: number;\n\n  /**\n   * The one-based line number of the current lookahead token, relative to\n   * the start of the stream.\n   */\n  abstract readonly line: number;\n\n  /**\n   * The one-based column number of the current lookahead token, relative to\n   * the current line in the stream.\n   */\n  abstract readonly column: number;\n\n  /**\n   * The `InputSettings` used to configure the behavior of input consumers\n   * that read from this `Input`.\n   */\n  abstract readonly settings: InputSettings;\n\n  /**\n   * Returns a clone of this `Input` with the given `settings`.\n   *\n   * @throws `Error` if this `Input` reader cannot be cloned.\n   */\n  abstract withSettings(settings: AnyInputSettings): Input;\n\n  /**\n   * Returns an independently positioned view into the token stream,\n   * initialized with identical state to this `Input`.\n   *\n   * @throws `Error` if this `Input` reader cannot be cloned.\n   */\n  abstract clone(): Input;\n\n  /**\n   * Returns an `Input` reader in the _empty_ state.\n   */\n  @Lazy\n  static empty(): Input {\n    return new InputEmpty(void 0, Mark.zero, InputSettings.standard());\n  }\n\n  /**\n   * Returns an `Input` reader in the _done_ state.\n   */\n  @Lazy\n  static done(): Input {\n    return new InputDone(void 0, Mark.zero, InputSettings.standard());\n  }\n\n  /**\n   * Returns an `Input` in the _error_ state that traps the given `error`.\n   */\n  static error(error: Error): Input {\n    return new InputError(error, void 0, Mark.zero, InputSettings.standard());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {Input} from \"./Input\";\n\n/** @hidden */\nexport class InputError extends Input {\n  /** @hidden */\n  declare readonly error: Error;\n\n  constructor(error: Error, id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Input {\n    return this;\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(): Input {\n    const error = new InputException(\"error step\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  trap(): Error {\n    return this.error;\n  }\n\n  seek(mark?: Mark): Input {\n    const error = new InputException(\"error seek\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): Input {\n    return new InputError(this.error, id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): Input {\n    return new InputError(this.error, this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): Input {\n    settings = InputSettings.fromAny(settings);\n    return new InputError(this.error, this.id, this.mark, settings);\n  }\n\n  clone(): Input {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Mark} from \"../source/Mark\";\nimport {InputException} from \"../input/InputException\";\nimport {AnyInputSettings, InputSettings} from \"../input/InputSettings\";\nimport {Input} from \"../input/Input\";\nimport {InputError} from \"../input/InputError\";\n\n/** @hidden */\nexport class StringInput extends Input {\n  /** @hidden */\n  declare readonly string: string;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly part: boolean;\n\n  constructor(string: string, id: string | undefined, offset: number,\n              line: number, column: number, settings: InputSettings,\n              index: number, part: boolean) {\n    super();\n    Object.defineProperty(this, \"string\", {\n      value: string,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"part\", {\n      value: part,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"offset\", {\n      value: offset,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"line\", {\n      value: line,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"column\", {\n      value: column,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return this.index < this.string.length;\n  }\n\n  isEmpty(): boolean {\n    return this.part && this.index >= this.string.length;\n  }\n\n  isDone(): boolean {\n    return !this.part && this.index >= this.string.length;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return this.part;\n  }\n\n  asPart(part: boolean): Input {\n    Object.defineProperty(this, \"part\", {\n      value: part,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  head(): number {\n    const string = this.string;\n    const index = this.index;\n    if (index < string.length) {\n      const c = string.codePointAt(index);\n      if (c !== void 0) {\n        return c;\n      } else {\n        return string.charCodeAt(index);\n      }\n    }\n    throw new InputException();\n  }\n\n  step(): Input {\n    const string = this.string;\n    const index = this.index;\n    if (index < string.length) {\n      const c = string.codePointAt(index);\n      Object.defineProperty(this, \"index\", {\n        value: string.offsetByCodePoints(index, 1),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"offset\", {\n        value: this.offset + (this.index - index),\n        enumerable: true,\n        configurable: true,\n      });\n      if (c === 10/*'\\n'*/) {\n        Object.defineProperty(this, \"line\", {\n          value: this.line + 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"column\", {\n          value: 1,\n          enumerable: true,\n          configurable: true,\n        });\n      } else {\n        Object.defineProperty(this, \"column\", {\n          value: this.column + 1,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n      return this;\n    } else {\n      const error = new InputException(\"invalid step\");\n      return new InputError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  seek(mark?: Mark): Input {\n    if (mark !== void 0) {\n      const index = this.index + (mark.offset - this.offset);\n      if (0 <= index && index <= this.string.length) {\n        Object.defineProperty(this, \"index\", {\n          value: index,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"offset\", {\n          value: mark.offset,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"line\", {\n          value: mark.line,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"column\", {\n          value: mark.column,\n          enumerable: true,\n          configurable: true,\n        });\n        return this;\n      } else {\n        const error = new InputException(\"invalid seek to \" + mark);\n        return new InputError(error, this.id, this.mark, this.settings);\n      }\n    } else {\n      Object.defineProperty(this, \"index\", {\n        value: 0,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"offset\", {\n        value: 0,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"line\", {\n        value: 1,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"column\", {\n        value: 1,\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    }\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): Input {\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  get mark(): Mark {\n    return Mark.at(this.offset, this.line, this.column);\n  }\n\n  withMark(mark: Mark): Input {\n    Object.defineProperty(this, \"offset\", {\n      value: mark.offset,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"line\", {\n      value: mark.line,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"column\", {\n      value: mark.column,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  declare readonly offset: number;\n\n  declare readonly line: number;\n\n  declare readonly column: number;\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): Input {\n    settings = InputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  clone(): Input {\n    return new StringInput(this.string, this.id, this.offset, this.line,\n                           this.column, this.settings, this.index, this.part);\n  }\n\n  static create(string: string): Input {\n    return new StringInput(string, void 0, 0, 1, 1, InputSettings.standard(), 0, false);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport {Output} from \"../output/Output\";\n\n/** @hidden */\nexport class StringOutput extends Output<string> {\n  /** @hidden */\n  declare readonly string: string;\n\n  constructor(string: string, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"string\", {\n      value: string,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return true;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<string> {\n    return this;\n  }\n\n  write(token: number | string): Output<string> {\n    if (typeof token === \"number\") {\n      if ((token >= 0x0000 && token <= 0xd7ff)\n          || (token >= 0xe000 && token <= 0xffff)) { // U+0000..U+D7FF | U+E000..U+FFFF\n        token = String.fromCharCode(token);\n      } else if (token >= 0x10000 && token <= 0x10ffff) { // U+10000..U+10FFFF\n        const u = token - 0x10000;\n        token = String.fromCharCode(0xd800 | (u >>> 10), 0xdc00 | (u & 0x3ff));\n      } else { // invalid code point\n        token = \"\\ufffd\";\n      }\n    }\n    Object.defineProperty(this, \"string\", {\n      value: this.string + token,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  writeln(string?: string): Output<string> {\n    if (string === void 0) {\n      Object.defineProperty(this, \"string\", {\n        value: this.string.concat(this.settings.lineSeparator),\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      Object.defineProperty(this, \"string\", {\n        value: this.string.concat(string).concat(this.settings.lineSeparator),\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    }\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<string> {\n    settings = OutputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  bind(): string {\n    return this.string;\n  }\n\n  clone(): Output<string> {\n    return new StringOutput(this.string, this.settings);\n  }\n\n  toString(): string {\n    return this.string;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Thrown when a [[Writer]] attempts to write invalid syntax.\n */\nexport class WriterException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, WriterException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"./WriterException\";\nimport {WriterEnd} from \"../\"; // forward import\nimport {WriterDone} from \"../\"; // forward import\nimport {WriterError} from \"../\"; // forward import\nimport {WriterSequence} from \"../\"; // forward import\n\n/**\n * Continuation of how to write subsequent [[Output]] tokens to a stream.\n * `Writer` enables efficient, interruptible writing of network protocols and\n * data formats, without intermediate buffering.\n *\n * ### Output tokens\n * A `Writer` writes tokens to an `Output` writer.  Output tokens are modeled\n * as primitive numbers, commonly representing Unicode code points, or raw\n * octets.  Each `Writer` implementation specifies the semantic type of output\n * tokens it produces.\n *\n * ### Writer states\n * A `Writer` is always in one of three states: _cont_inue, _done_, or _error_.\n * The _cont_ state indicates that [[pull]] is ready to produce `Output`; the\n * _done_ state indicates that writing terminated successfully, and that\n * [[bind]] will return the written result; the _error_ state indicates that\n * writing terminated in failure, and that [[trap]] will return the write error.\n * `Writer` subclasses default to the _cont_ state.\n *\n * ### Feeding input\n * The [[feed]] method returns a `Writer` that represents the continuation\n * of how to write the given input object to subsequent `Output` writers.\n * `feed` can be used to specify an initial object to write, or to change\n * the object to be written.\n *\n * ### Pulling output\n * The [[pull]] method incrementally writes as much `Output` as it can, before\n * returning another `Writer` that represents the continuation of how to write\n * additional `Output`.  The `Output` passed to `pull` is only guaranteed to be\n * valid for the duration of the method call; references to the provided\n * `Output` instance must not be stored.\n *\n * ### Writer results\n * A `Writer` produces a written result of type `O`, obtained via the [[bind]]\n * method.  `bind` is only guaranteed to return a result when in the _done_\n * state; though `bind` may optionally make available partial results in other\n * states.  A failed `Writer` provides a write error via the [[trap]] method.\n * `trap` is only guaranteed to return an error when in the _error_ state.\n *\n * ### Continuations\n * A `Writer` instance represents a continuation of how to write remaining\n * `Output`.  Rather than writing a complete output in one go, a `Writer` takes\n * an `Output` chunk and returns another `Writer` instance that knows how to\n * write subsequent `Output` chunks.  This enables non-blocking, incremental\n * writing that can be interrupted whenever an `Output` writer runs out of\n * space.  A `Writer` terminates by returning a continuation in either the\n * _done_ state, or the _error_ state.  [[Writer.done]] returns a `Writer` in\n * the _done_ state.  [[Writer.error]] returns a `Writer` in the _error_ state.\n *\n * ### Forking\n * The [[fork]] method passes an out-of-band condition to a `Writer`, yielding\n * a `Writer` continuation whose behavior may be altered by the given condition.\n * For example, a console `Writer` might support a `fork` condition that changes\n * the color and style of printed text.  The types of conditions accepted by\n * `fork`, and their intended semantics, are implementation defined.\n */\nexport abstract class Writer<I = unknown, O = unknown> {\n  /**\n   * Returns `true` when [[pull]] is able to produce `Output`.  i.e. this\n   * `Writer` is in the _cont_ state.\n   */\n  isCont(): boolean {\n    return true;\n  }\n\n  /**\n   * Returns `true` when writing has terminated successfully, and [[bind]] will\n   * return the written result.  i.e. this `Writer` is in the _done_ state.\n   */\n  isDone(): boolean {\n    return false;\n  }\n\n  /**\n   * Returns `true` when writing has terminated in failure, and [[trap]] will\n   * return the write error.  i.e. this `Writer` is in the _error_ state.\n   */\n  isError(): boolean {\n    return false;\n  }\n\n  /**\n   * Returns a `Writer` that represents the continuation of how to write the\n   * given `input` object.\n   *\n   * @throws `WriterException` if this `Writer` does not know how to write the\n   *         given `input` object.\n   */\n  feed(input: I): Writer<I, O> {\n    throw new WriterException();\n  }\n\n  /**\n   * Incrementally writes as much `output` as possible, and returns another\n   * `Writer` that represents the continuation of how to write additional\n   * `Output`.  If `output` enters the _done_ state, `pull` _must_ return a\n   * terminated `Writer`, i.e. a `Writer` in the _done_ state, or in the\n   * _error_ state.  The given `output` is only guaranteed to be valid for the\n   * duration of the method call; references to `output` must not be stored.\n   */\n  abstract pull(output: Output): Writer<I, O>;\n\n  /**\n   * Returns a `Writer` continuation whose behavior may be altered by the given\n   * out-of-band `condition`.\n   */\n  fork(condition: unknown): Writer<I, O> {\n    return this;\n  }\n\n  /**\n   * Returns the written result.  Only guaranteed to return a result when in\n   * the _done_ state.\n   *\n   * @throws `Error` if this `Writer` is not in the _done_ state.\n   */\n  bind(): O {\n    throw new WriterException();\n  }\n\n  /**\n   * Returns the write error.  Only guaranteed to return an error when in the\n   * _error_ state.\n   *\n   * @throws `Error` if this `Writer` is not in the _error_ state.\n   */\n  trap(): Error {\n    throw new WriterException();\n  }\n\n  /**\n   * Casts a done `Writer` to a different input type.  A `Writer` in the _done_\n   * state can have any input type.\n   *\n   * @throws `WriterException` if this `Writer` is not in the _done_ state.\n   */\n  asDone<I2>(): Writer<I2, O> {\n    throw new WriterException();\n  }\n\n  /**\n   * Casts an errored `Writer` to different input and output types.  A `Writer`\n   * in the _error_ state can have any input type, and any output type.\n   *\n   * @throws `WriterException` if this `Writer` is not in the _error_ state.\n   */\n  asError<I2, O2>(): Writer<I2, O2> {\n    throw new WriterException();\n  }\n\n  /**\n   * Returns a `Writer` that continues writing `that` `Writer`, after it\n   * finishes writing this `Writer`.\n   */\n  andThen<O2>(that: Writer<unknown, O2>): Writer<never, O2> {\n    return new WriterSequence(this, that);\n  }\n\n  /**\n   * Returns a `Writer` in the _done_ state that never binds a value.\n   */\n  @Lazy\n  static end<I>(): Writer<I, never> {\n    return new WriterEnd();\n  }\n\n  /**\n   * Returns a `Writer` in the _done_ state that binds the given written `value`.\n   */\n  static done<I, O>(value: O): Writer<I, O> {\n    return new WriterDone(value);\n  }\n\n  /**\n   * Returns a `Writer` in the _error_ state that traps the given write `error`.\n   */\n  static error<I, O>(error: Error): Writer<I, O> {\n    return new WriterError(error);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"../writer/WriterException\";\nimport {Writer} from \"../writer/Writer\";\n\n/** @hidden */\nexport class StringWriter extends Writer<unknown, unknown> {\n  /** @hidden */\n  declare readonly value: unknown;\n  /** @hidden */\n  declare readonly input: string;\n  /** @hidden */\n  declare readonly index: number;\n\n  constructor(value: unknown, input: string, index: number = 0) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n    });\n  }\n\n  feed(input: unknown): Writer<unknown, unknown> {\n    return new StringWriter(input, \"\" + input);\n  }\n\n  pull(output: Output): Writer<unknown, unknown> {\n    return StringWriter.write(output, this.value, this.input, this.index);\n  }\n\n  static write(output: Output, value: unknown, input: string, index: number = 0): Writer<unknown, unknown> {\n    const length = input.length;\n    while (index < length && output.isCont()) {\n      let c = input.codePointAt(index);\n      if (c === void 0) {\n        c = input.charCodeAt(index);\n      }\n      output = output.write(c);\n      index = input.offsetByCodePoints(index, 1);\n    }\n    if (index === length) {\n      return Writer.done(value);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new StringWriter(value, input, index);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input} from \"../input/Input\";\nimport {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport type {Output} from \"../output/Output\";\nimport type {Writer} from \"../writer/Writer\";\nimport {StringInput} from \"./StringInput\";\nimport {StringOutput} from \"./StringOutput\";\nimport {StringWriter} from \"./StringWriter\";\n\n/**\n * Unicode code point [[Input]]/[[Output]]/[[Writer]] factory.\n *\n * The `Unicode.stringInput(...)` function returns an `Input` that reads the\n * Unicode code points of a `string`.\n *\n * The `Unicode.stringOutput(...)` function returns an `Output` that writes\n * Unicode code points to an internal buffer, and [[Output.bind binds]] a\n * `string` containing all written code points.\n */\nexport const Unicode = {} as {\n  stringInput(string: string): Input;\n\n  /**\n   * Returns a new `Output` that appends Unicode code points to the given\n   * `string`, using the given output `settings`.  The returned `Output`\n   * accepts an unbounded number of code points, remaining permanently in the\n   * _cont_ state, and [[Output.bind binds]] a `string` containing the given\n   * `string`, and all appended code points.\n   */\n  stringOutput(string?: string, settings?: AnyOutputSettings): Output<string>;\n\n  /**\n   * Returns a new `Output` that buffers Unicode code points, using the given\n   * output `settings`.  The returned `Output` accepts an unbounded number of\n   * code points, remaining permanently in the _cont_ state, and [[Output.bind\n   * binds]] a `string` containing all written code points.\n   */\n  stringOutput(settings?: AnyOutputSettings): Output<string>;\n\n  stringWriter<I>(): Writer<I, unknown>;\n\n  stringWriter<I, O>(input: O): Writer<I, O>;\n\n  writeString<I>(input: unknown, output: Output): Writer<I, unknown>;\n\n  /** @hidden */\n  isAlpha(c: number): boolean;\n\n  /** @hidden */\n  isSpace(c: number): boolean;\n\n  /** @hidden */\n  isNewline(c: number): boolean;\n\n  /** @hidden */\n  isWhitespace(c: number): boolean;\n};\n\nUnicode.stringInput = function (string: string): Input {\n  return StringInput.create(string);\n};\n\nUnicode.stringOutput = function (string?: string | AnyOutputSettings, settings?: AnyOutputSettings): Output<string> {\n  if (settings === void 0 && typeof string !== \"string\") {\n    settings = string;\n    string = \"\";\n  } else if (typeof string !== \"string\") {\n    string = \"\";\n  }\n  settings = OutputSettings.fromAny(settings);\n  return new StringOutput(string, settings);\n};\n\nUnicode.stringWriter = function <I, O>(input?: O): Writer<I, unknown> {\n  if (input === void 0) {\n    return new StringWriter(void 0, \"\");\n  } else {\n    return new StringWriter(input, \"\" + input);\n  }\n};\n\nUnicode.writeString = function <I>(input: unknown, output: Output): Writer<I, unknown> {\n  return StringWriter.write(output, void 0, \"\" + input);\n};\n\nUnicode.isAlpha = function (c: number): boolean {\n  return c >= 65/*'A'*/ && c <= 90/*'Z'*/\n      || c >= 97/*'a'*/ && c <= 122/*'z'*/;\n};\n\nUnicode.isSpace = function (c: number): boolean {\n  return c === 0x20 || c === 0x9;\n};\n\nUnicode.isNewline = function (c: number): boolean {\n  return c === 0xa || c === 0xd;\n};\n\nUnicode.isWhitespace = function (c: number): boolean {\n  return Unicode.isSpace(c) || Unicode.isNewline(c);\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport type {Parser} from \"../parser/Parser\";\nimport type {Writer} from \"../writer/Writer\";\nimport {Format} from \"../format/Format\";\nimport {Unicode} from \"../unicode/Unicode\";\nimport {Base10NumberParser} from \"../\"; // forward import\nimport {Base10IntegerWriter} from \"../\"; // forward import\n\n/**\n * Base-10 (decimal) encoding [[Parser]]/[[Writer]] factory.\n */\nexport const Base10 = {} as {\n  /**\n   * Returns `true` if the Unicode code point `c` is a valid base-10 digit.\n   */\n  isDigit(c: number): boolean;\n\n  /**\n   * Returns the decimal quantity between `0` (inclusive) and `10` (exclusive)\n   * represented by the base-10 digit `c`.\n   *\n   * @throws `Error` if `c` is not a valid base-10 digit.\n   */\n  decodeDigit(c: number): number;\n\n  /**\n   * Returns the Unicode code point of the base-10 digit that encodes the given\n   * decimal quantity between `0` (inclusive) and `10` (exclusive).\n   */\n  encodeDigit(b: number): number;\n\n  /**\n   * Returns the number of whole decimal digits in the given absolute `value`.\n   */\n  countDigits(value: number): number;\n\n  integerParser(): Parser<number>;\n\n  parseInteger(input: Input): Parser<number>;\n\n  decimalParser(): Parser<number>;\n\n  parseDecimal(input: Input): Parser<number>;\n\n  numberParser(): Parser<number>;\n\n  parseNumber(input: Input): Parser<number>;\n\n  /**\n   * Returns a `Writer` that, when fed an input `number` value, returns a\n   * continuation that writes the base-10 (decimal) encoding of the input value.\n   */\n  integerWriter(): Writer<number, unknown>;\n\n  /**\n   * Returns a `Writer` continuation that writes the base-10 (decimal) encoding\n   * of the `input` value.\n   */\n  integerWriter(input: number): Writer<unknown, number>;\n\n  /**\n   * Writes the base-10 (decimal) encoding of the `input` value to the `output`,\n   * returning a `Writer` continuation that knows how to write any remaining\n   * output that couldn't be immediately generated.\n   */\n  writeInteger(input: number, output: Output): Writer;\n};\n\nBase10.isDigit = function (c: number): boolean {\n  return c >= 48/*'0'*/ && c <= 57/*'9'*/;\n};\n\nBase10.decodeDigit = function (c: number): number {\n  if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n    return c - 48/*'0'*/;\n  } else {\n    const message = Unicode.stringOutput();\n    message.write(\"Invalid base-10 digit: \");\n    Format.debugChar(c, message);\n    throw new Error(message.bind());\n  }\n};\n\nBase10.encodeDigit = function (b: number): number {\n  if (b >= 0 && b <= 9) {\n    return 48/*'0'*/ + b;\n  } else {\n    throw new Error(\"\" + b);\n  }\n};\n\nBase10.countDigits = function (value: number): number {\n  let size = 0;\n  do {\n    size += 1;\n    value = (value / 10) | 0;\n  } while (value !== 0);\n  return size;\n};\n\nBase10.integerParser = function (): Parser<number> {\n  return new Base10NumberParser(void 0, void 0, 0);\n};\n\nBase10.parseInteger = function (input: Input): Parser<number> {\n  return Base10NumberParser.parse(input, void 0, void 0, 0);\n};\n\nBase10.decimalParser = function (): Parser<number> {\n  return new Base10NumberParser(void 0, void 0, 1);\n};\n\nBase10.parseDecimal = function (input: Input): Parser<number> {\n  return Base10NumberParser.parse(input, void 0, void 0, 1);\n};\n\nBase10.numberParser = function (): Parser<number> {\n  return new Base10NumberParser();\n};\n\nBase10.parseNumber = function (input: Input): Parser<number> {\n  return Base10NumberParser.parse(input);\n};\n\nBase10.integerWriter = function (input?: number): Writer {\n  if (input === void 0) {\n    return new Base10IntegerWriter(void 0, 0);\n  } else {\n    return new Base10IntegerWriter(void 0, input);\n  }\n} as typeof Base10.integerWriter;\n\nBase10.writeInteger = function (input: number, output: Output): Writer {\n  return Base10IntegerWriter.write(output, void 0, input);\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values, Severity} from \"@swim/util\";\nimport type {Tag} from \"./Tag\";\nimport type {Mark} from \"./Mark\";\nimport type {Input} from \"../input/Input\";\nimport type {OutputSettings} from \"../output/OutputSettings\";\nimport type {Output} from \"../output/Output\";\nimport type {Display} from \"../format/Display\";\nimport {OutputStyle} from \"../format/OutputStyle\";\nimport {Format} from \"../format/Format\";\nimport {Unicode} from \"../unicode/Unicode\";\nimport {Base10} from \"../number/Base10\";\n\n/**\n * Informational message attached to an input location.\n */\nexport class Diagnostic implements Display {\n  constructor(input: Input, tag: Tag, severity: Severity, message: string | undefined,\n              note: string | undefined, cause: Diagnostic | null) {\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"tag\", {\n      value: tag,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"severity\", {\n      value: severity,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"message\", {\n      value: message,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"note\", {\n      value: note,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"cause\", {\n      value: cause,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly input: Input;\n\n  /**\n   * The location in the `input` to which this diagnostic is attached.\n   */\n  declare readonly tag: Tag;\n\n  /**\n   * The level of importance of this diagnostic.\n   */\n  declare readonly severity: Severity;\n\n  /**\n   * The help message that describes this diagnostic.\n   */\n  declare readonly message: string | undefined;\n\n  /**\n   * An informative comment on the source context to which this diagnostic is attached.\n   */\n  declare readonly note: string | undefined;\n\n  /**\n   * The `Diagnostic` cause of this diagnostic, forming a linked chain of\n   * diagnostics, or `null` if this diagnostic has no cause.\n   */\n  declare readonly cause: Diagnostic | null;\n\n  private lineDigits(): number {\n    let digits = Base10.countDigits(this.tag.end.line);\n    if (this.cause !== null) {\n      digits = Math.max(digits, this.cause.lineDigits());\n    }\n    return digits;\n  }\n\n  display(output: Output): void {\n    const input = this.input.clone();\n    const start = this.tag.start;\n    const end = this.tag.end;\n    const severity = this.severity;\n    const message = this.message;\n    const note = this.note;\n    const cause = this.cause;\n    const contextLines = 2;\n    const lineDigits = this.lineDigits();\n    Diagnostic.displayDiagnostic(input, start, end, severity, message, note,\n                                 cause, contextLines, lineDigits, output);\n  }\n\n  toString(settings?: OutputSettings): string {\n    return Format.display(this, settings);\n  }\n\n  static create(input: Input, tag: Tag, severity: Severity, cause?: Diagnostic | null): Diagnostic;\n  static create(input: Input, tag: Tag, severity: Severity, message: string | undefined,\n                cause?: Diagnostic | null): Diagnostic;\n  static create(input: Input, tag: Tag, severity: Severity, message: string | undefined,\n                note: string | undefined, cause?: Diagnostic | null): Diagnostic;\n  static create(input: Input, tag: Tag, severity: Severity, message?: Diagnostic | null | string | undefined,\n                note?: Diagnostic | null | string | undefined, cause?: Diagnostic | null): Diagnostic {\n    if (arguments.length === 3) { // (input, tag, severity)\n      cause = null;\n      note = void 0;\n      message = void 0;\n    } else if (arguments.length === 4) {\n      if (message === null || message instanceof Diagnostic) { // (input, tag, severity, cause)\n        cause = message;\n        message = void 0;\n      } else { // (input, tag, severity, message)\n        cause = null;\n      }\n    } else if (arguments.length === 5) {\n      if (note === null || note instanceof Diagnostic) { // (input, tag, severity, message, cause)\n        cause = note;\n        note = void 0;\n      } else { // (input, tag, severity, message, note)\n        cause = null;\n      }\n    } else { // (input, tag, severity, message, note, cause)\n      if (cause === void 0) {\n        cause = null;\n      }\n    }\n    return new Diagnostic(input.clone(), tag, severity, message as string | undefined, note as string | undefined, cause);\n  }\n\n  static message(message: string, input: Input, cause?: Diagnostic | null): Diagnostic;\n  static message(message: string, input: Input, note: string, cause?: Diagnostic | null): Diagnostic;\n  static message(message: string, input: Input, severity: Severity, cause?: Diagnostic | null): Diagnostic;\n  static message(message: string, input: Input, severity?: Severity, note?: string, cause?: Diagnostic | null): Diagnostic;\n  static message(message: string, input: Input, severity?: Diagnostic | null | Severity | string | undefined,\n                 note?: Diagnostic | null | string | undefined, cause?: Diagnostic | null): Diagnostic {\n    if (arguments.length === 2) { // (message, input)\n      cause = null;\n      note = void 0;\n      severity = Severity.error();\n    } else if (arguments.length === 3) {\n      if (severity === null || severity instanceof Diagnostic) { // (message, input, cause)\n        cause = severity;\n        severity = Severity.error();\n      } else if (typeof severity === \"string\") { // (message, input, note)\n        cause = null;\n        note = severity;\n        severity = Severity.error();\n      } else { // (message, input, severity)\n        cause = null;\n      }\n    } else if (arguments.length === 4) {\n      if (typeof severity === \"string\") { // (message, input, note, cause)\n        cause = note as Diagnostic | null;\n        note = severity;\n        severity = Severity.error();\n      } else if (note === null || note instanceof Diagnostic) { // (message, input, severity, cause)\n        cause = note;\n        note = void 0;\n      } else { // (message, input, severity, note)\n        cause = null;\n      }\n    } else { // (message, input, severity, note, cause)\n      if (cause === void 0) {\n        cause = null;\n      }\n    }\n\n    const mark = input.mark;\n    const source = input.clone();\n    source.seek();\n    return new Diagnostic(source, mark, severity as Severity, message, note as string | undefined, cause);\n  }\n\n  static unexpected(input: Input, cause?: Diagnostic | null): Diagnostic;\n  static unexpected(input: Input, note: string, cause?: Diagnostic | null): Diagnostic;\n  static unexpected(input: Input, severity: Severity, cause?: Diagnostic | null): Diagnostic;\n  static unexpected(input: Input, severity?: Severity, note?: string, cause?: Diagnostic | null): Diagnostic;\n  static unexpected(input: Input, severity?: Diagnostic | null | Severity | string | undefined,\n                    note?: Diagnostic | null | string | undefined, cause?: Diagnostic | null): Diagnostic {\n    if (arguments.length === 1) { // (input)\n      cause = null;\n    } else if (arguments.length === 2) {\n      if (severity === null || severity instanceof Diagnostic) { // (input, cause)\n        cause = severity;\n        severity = Severity.error();\n      } else if (typeof severity === \"string\") { // (input, note)\n        cause = null;\n        note = severity;\n        severity = Severity.error();\n      } else { // (input, severity)\n        cause = null;\n      }\n    } else if (arguments.length === 3) {\n      if (typeof severity === \"string\") { // (input, note, cause)\n        cause = note as Diagnostic | null;\n        note = severity;\n        severity = Severity.error();\n      } else if (note === null || note instanceof Diagnostic) { // (input, severity, cause)\n        cause = note;\n        note = void 0;\n      } else { // (input, severity, note)\n        cause = null;\n      }\n    } else { // (input, severity, note, cause)\n      if (cause === void 0) {\n        cause = null;\n      }\n    }\n\n    let message;\n    if (input.isCont()) {\n      const output = Unicode.stringOutput().write(\"unexpected\").write(32/*' '*/);\n      Format.debugChar(input.head(), output);\n      message = output.bind();\n    } else {\n      message = \"unexpected end of input\";\n    }\n    const mark = input.mark;\n    const source = input.clone();\n    source.seek();\n    return new Diagnostic(source, mark, severity as Severity, message, note as string | undefined, cause);\n  }\n\n  static expected(expected: string | number, input: Input, cause?: Diagnostic | null): Diagnostic;\n  static expected(expected: string | number, input: Input, note: string, cause?: Diagnostic | null): Diagnostic;\n  static expected(expected: string | number, input: Input, severity: Severity, cause?: Diagnostic | null): Diagnostic;\n  static expected(expected: string | number, input: Input, severity?: Severity, note?: string, cause?: Diagnostic | null): Diagnostic;\n  static expected(expected: string | number, input: Input, severity?: Diagnostic | null | Severity | string | undefined,\n                  note?: Diagnostic | null | string | undefined, cause?: Diagnostic | null): Diagnostic {\n    if (arguments.length === 1) { // (excpected, input)\n      cause = null;\n    } else if (arguments.length === 2) {\n      if (severity === null || severity instanceof Diagnostic) { // (excpected, input, cause)\n        cause = severity;\n        severity = Severity.error();\n      } else if (typeof severity === \"string\") { // (excpected, input, note)\n        cause = null;\n        note = severity;\n        severity = Severity.error();\n      } else { // (expected, input, severity)\n        cause = null;\n      }\n    } else if (arguments.length === 3) {\n      if (typeof severity === \"string\") { // (excpected, input, note, cause)\n        cause = note as Diagnostic | null;\n        note = severity;\n        severity = Severity.error();\n      } else if (note === null || note instanceof Diagnostic) { // (excpected, input, severity, cause)\n        cause = note;\n        note = void 0;\n      } else { // (excpected, input, severity, note)\n        cause = null;\n      }\n    } else { // (excpected, input, severity, note, cause)\n      if (cause === void 0) {\n        cause = null;\n      }\n    }\n\n    let output = Unicode.stringOutput().write(\"expected\").write(32/*' '*/);\n    if (typeof expected === \"number\") {\n      Format.debugChar(expected, output);\n    } else {\n      output = output.write(expected);\n    }\n    output = output.write(44/*','*/).write(32/*' '*/).write(\"but found\").write(32/*' '*/);\n    if (input.isCont()) {\n      Format.debugChar(input.head(), output);\n    } else {\n      output = output.write(\"end of input\");\n    }\n    const message = output.bind();\n    const mark = input.mark;\n    const source = input.clone();\n    source.seek();\n    return new Diagnostic(source, mark, severity as Severity, message, note as string | undefined, cause);\n  }\n\n  private static displayDiagnostic(input: Input, start: Mark, end: Mark,\n                                   severity: Severity, message: string | undefined,\n                                   note: string | undefined, cause: Diagnostic | null,\n                                   contextLines: number, lineDigits: number,\n                                   output: Output): void {\n    do {\n      if (message !== void 0) {\n        Diagnostic.displayMessage(severity, message, output);\n        output = output.writeln();\n      }\n      Diagnostic.displayAnchor(input, start, lineDigits, output);\n      output = output.writeln();\n      const next = Diagnostic.displayContext(input, start, end, severity, note,\n                                             cause, contextLines, lineDigits, output);\n      if (next !== null) {\n        output = output.writeln();\n        input = next.input.clone();\n        start = next.tag.start;\n        end = next.tag.end;\n        severity = next.severity;\n        message = next.message;\n        note = next.note;\n        cause = next.cause;\n      } else {\n        break;\n      }\n    } while (true);\n  }\n\n  /** @hidden */\n  static displayMessage(severity: Severity, message: string | undefined, output: Output): void {\n    Diagnostic.formatSeverity(severity, output);\n    output = output.write(severity.label);\n    OutputStyle.reset(output);\n    OutputStyle.bold(output);\n    output = output.write(58/*':'*/);\n    if (message !== void 0) {\n      output = output.write(32/*' '*/).write(message);\n    }\n    OutputStyle.reset(output);\n  }\n\n  private static displayAnchor(input: Input, start: Mark, lineDigits: number,\n                               output: Output): void {\n    Diagnostic.displayLineLeadArrow(lineDigits, output);\n    output = output.write(32/*' '*/);\n    const id = input.id;\n    if (id !== void 0) {\n      Format.display(id, output);\n    }\n    output = output.write(58/*':'*/);\n    Format.displayNumber(start.line, output);\n    output = output.write(58/*':'*/);\n    Format.displayNumber(start.column, output);\n    output = output.writeln();\n\n    Diagnostic.displayLineLead(lineDigits, output);\n  }\n\n  private static displayCause(cause: Diagnostic, contextLines: number,\n                              lineDigits: number, output: Output): Diagnostic | null {\n    const input = cause.input.clone();\n    const start = cause.tag.start;\n    const end = cause.tag.end;\n    const severity = cause.severity;\n    const note = cause.note;\n    const next = cause.cause;\n    return Diagnostic.displayContext(input, start, end, severity, note, next,\n                                     contextLines, lineDigits, output);\n  }\n\n  private static displayContext(input: Input, start: Mark, end: Mark,\n                                severity: Severity, note: string | undefined,\n                                cause: Diagnostic | null, contextLines: number,\n                                lineDigits: number, output: Output): Diagnostic | null {\n    let next = cause;\n    const sameCause = cause !== null && cause.message === void 0\n                   && Values.equal(input.id, cause.input.id);\n    const causeOrder = sameCause ? (start.offset <= cause!.tag.start.offset ? -1 : 1) : 0;\n    if (causeOrder === 1) {\n      next = Diagnostic.displayCause(cause!, contextLines, lineDigits, output);\n      output = output.writeln();\n      Diagnostic.displayLineLeadEllipsis(lineDigits, output);\n      output = output.writeln();\n    }\n    Diagnostic.displayLines(input, start, end, severity, contextLines, lineDigits, output);\n    if (note !== void 0) {\n      Diagnostic.displayNote(note, lineDigits, output);\n    }\n    if (causeOrder === -1) {\n      output = output.writeln();\n      Diagnostic.displayLineLeadEllipsis(lineDigits, output);\n      output = output.writeln();\n      next = Diagnostic.displayCause(cause!, contextLines, lineDigits, output);\n    }\n    return next;\n  }\n\n  private static displayLines(input: Input, start: Mark, end: Mark,\n                              severity: Severity, contextLines: number,\n                              lineDigits: number, output: Output): void {\n    const startLine = start.line;\n    const endLine = end.line;\n    let line = input.line;\n\n    while (line < startLine) {\n      Diagnostic.consumeLineText(input, line);\n      line += 1;\n    }\n\n    if (endLine - startLine > 2 * contextLines + 2) {\n      while (line <= startLine + contextLines) {\n        Diagnostic.displayLine(input, start, end, severity, line, lineDigits, output);\n        line += 1;\n      }\n      Diagnostic.displayLineLeadEllipsis(lineDigits, output);\n      output = output.write(32/*' '*/);\n      Diagnostic.formatSeverity(severity, output);\n      output = output.write(124/*'|'*/);\n      OutputStyle.reset(output);\n      output = output.writeln();\n      while (line < endLine - contextLines) {\n        Diagnostic.consumeLineText(input, line);\n        line += 1;\n      }\n    }\n\n    while (line <= endLine) {\n      Diagnostic.displayLine(input, start, end, severity, line, lineDigits, output);\n      line += 1;\n    }\n  }\n\n  private static displayNote(note: string | undefined, lineDigits: number, output: Output): void {\n    output = output.writeln();\n    Diagnostic.displayLineLead(lineDigits, output);\n    output = output.writeln();\n    Diagnostic.displayLineComment('note', note, lineDigits, output);\n  }\n\n  private static displayLine(input: Input, start: Mark, end: Mark,\n                             severity: Severity, line: number,\n                             lineDigits: number, output: Output): void {\n    if (start.line === line && end.line === line) {\n      Diagnostic.displaySingleLine(input, start, end, severity, line, lineDigits, output);\n    } else if (start.line === line) {\n      Diagnostic.displayStartLine(input, start, severity, line, lineDigits, output);\n    } else if (end.line === line) {\n      Diagnostic.displayEndLine(input, end, severity, line, lineDigits, output);\n    } else {\n      Diagnostic.displayMidLine(input, severity, line, lineDigits, output);\n    }\n  }\n\n  private static displaySingleLine(input: Input, start: Mark, end: Mark,\n                                   severity: Severity, line: number,\n                                   lineDigits: number, output: Output): void {\n    Diagnostic.displayLineLeadNumber(line, lineDigits, output);\n    output = output.write(32/*' '*/);\n    for (let i = 1; i < input.column; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    Diagnostic.displayLineText(input, line, output);\n\n    Diagnostic.displayLineLead(lineDigits, output);\n    output = output.write(32/*' '*/);\n    let i = 1;\n    while (i < start.column) {\n      output = output.write(32/*' '*/);\n      i += 1;\n    }\n    Diagnostic.formatSeverity(severity, output);\n    while (i <= end.column) {\n      output = output.write(94/*'^'*/);\n      i += 1;\n    }\n    if (end.note !== void 0) {\n      output = output.write(32/*' '*/).write(end.note);\n    }\n    OutputStyle.reset(output);\n  }\n\n  private static displayStartLine(input: Input, start: Mark,\n                                  severity: Severity, line: number,\n                                  lineDigits: number, output: Output): void {\n    Diagnostic.displayLineLeadNumber(line, lineDigits, output);\n    output = output.write(32/*' '*/).write(32/*' '*/).write(32/*' '*/);\n    for (let i = 1; i < input.column; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    Diagnostic.displayLineText(input, line, output);\n\n    Diagnostic.displayLineLead(lineDigits, output);\n    output = output.write(32/*' '*/).write(32/*' '*/);\n    Diagnostic.formatSeverity(severity, output);\n    output = output.write(95/*'_'*/);\n    let i = 1;\n    while (i < start.column) {\n      output = output.write(95/*'_'*/);\n      i += 1;\n    }\n    output = output.write(94/*'^'*/);\n    if (start.note !== void 0) {\n      output = output.write(32/*' '*/).write(start.note);\n    }\n    OutputStyle.reset(output);\n    output = output.writeln();\n  }\n\n  private static displayEndLine(input: Input, end: Mark,\n                                severity: Severity, line: number,\n                                lineDigits: number, output: Output): void {\n    Diagnostic.displayLineLeadNumber(line, lineDigits, output);\n    output = output.write(32/*' '*/);\n    Diagnostic.formatSeverity(severity, output);\n    output = output.write(124/*'|'*/);\n    OutputStyle.reset(output);\n    output = output.write(32/*' '*/);\n    Diagnostic.displayLineText(input, line, output);\n\n    Diagnostic.displayLineLead(lineDigits, output);\n    output = output.write(32/*' '*/);\n    Diagnostic.formatSeverity(severity, output);\n    output = output.write(124/*'|'*/).write(95/*'_'*/);\n    let i = 1;\n    while (i < end.column) {\n      output = output.write(95/*'_'*/);\n      i += 1;\n    }\n    output = output.write(94/*'^'*/);\n    if (end.note !== void 0) {\n      output = output.write(32/*' '*/).write(end.note);\n    }\n    OutputStyle.reset(output);\n  }\n\n  private static displayMidLine(input: Input, severity: Severity, line: number,\n                                lineDigits: number, output: Output): void {\n    Diagnostic.displayLineLeadNumber(line, lineDigits, output);\n    output = output.write(32/*' '*/);\n    Diagnostic.formatSeverity(severity, output);\n    output = output.write(124/*'|'*/);\n    OutputStyle.reset(output);\n    output = output.write(32/*' '*/);\n    Diagnostic.displayLineText(input, line, output);\n  }\n\n  private static displayLineComment(label: string, comment: string | undefined,\n                                    lineDigits: number, output: Output): void {\n    Diagnostic.displayLineLeadComment(lineDigits, output);\n    output = output.write(32/*' '*/);\n    OutputStyle.bold(output);\n    output = output.write(label).write(58/*':'*/);\n    OutputStyle.reset(output);\n    if (comment !== void 0) {\n      output = output.write(32/*' '*/).write(comment);\n    }\n  }\n\n  private static displayLineLead(lineDigits: number, output: Output): void {\n    OutputStyle.blueBold(output);\n    const padding = 1 + lineDigits;\n    for (let i = 0; i < padding; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    output = output.write(124/*'|'*/);\n    OutputStyle.reset(output);\n  }\n\n  private static displayLineLeadComment(lineDigits: number, output: Output): void {\n    OutputStyle.blueBold(output);\n    const padding = 1 + lineDigits;\n    for (let i = 0; i < padding; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    output = output.write(61/*'='*/);\n    OutputStyle.reset(output);\n  }\n\n  private static displayLineLeadArrow(lineDigits: number, output: Output): void {\n    for (let i = 0; i < lineDigits; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    OutputStyle.blueBold(output);\n    output = output.write(45/*'-'*/).write(45/*'-'*/).write(62/*'>'*/);\n    OutputStyle.reset(output);\n  }\n\n  private static displayLineLeadEllipsis(lineDigits: number, output: Output): void {\n    OutputStyle.blueBold(output);\n    for (let i = 0; i < lineDigits; i += 1) {\n      output = output.write(46/*'.'*/);\n    }\n    OutputStyle.reset(output);\n    output = output.write(32/*' '*/).write(32/*' '*/);\n  }\n\n  private static displayLineLeadNumber(line: number, lineDigits: number, output: Output): void {\n    const padding = lineDigits - Base10.countDigits(line);\n    for (let i = 0; i < padding; i += 1) {\n      output = output.write(32/*' '*/);\n    }\n    OutputStyle.blueBold(output);\n    Format.displayNumber(line, output);\n    output = output.write(32/*' '*/).write(124/*'|'*/);\n    OutputStyle.reset(output);\n  }\n\n  private static displayLineText(input: Input, line: number, output: Output): void {\n    while (input.isCont() && input.line === line) {\n      output = output.write(input.head());\n      input = input.step();\n    }\n    if (input.line === line) {\n      output = output.writeln();\n    }\n  }\n\n  private static consumeLineText(input: Input, line: number): void {\n    while (input.isCont() && input.line === line) {\n      input = input.step();\n    }\n  }\n\n  private static formatSeverity(severity: Severity, output: Output): void {\n    switch (severity.level) {\n      case Severity.FATAL_LEVEL:\n      case Severity.ALERT_LEVEL:\n      case Severity.ERROR_LEVEL:\n        OutputStyle.redBold(output);\n        break;\n      case Severity.WARNING_LEVEL:\n        OutputStyle.yellowBold(output);\n        break;\n      case Severity.NOTE_LEVEL:\n        OutputStyle.greenBold(output);\n        break;\n      case Severity.INFO_LEVEL:\n        OutputStyle.cyanBold(output);\n        break;\n      case Severity.DEBUG_LEVEL:\n      case Severity.TRACE_LEVEL:\n      default:\n        OutputStyle.magentaBold(output);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {Input} from \"./Input\";\nimport {InputDone} from \"../\"; // forward import\nimport {InputError} from \"../\"; // forward import\n\n/** @hidden */\nexport class InputEmpty extends Input {\n  constructor(id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return true;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return true;\n  }\n\n  asPart(part: boolean): Input {\n    return part ? this : new InputDone(this.id, this.mark, this.settings);\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(): Input {\n    const error = new InputException(\"empty step\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  seek(mark?: Mark): Input {\n    const error = new InputException(\"empty seek\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): Input {\n    return new InputEmpty(id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): Input {\n    return new InputEmpty(this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): Input {\n    settings = InputSettings.fromAny(settings);\n    return new InputEmpty(this.id, this.mark, settings);\n  }\n\n  clone(): Input {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {Input} from \"./Input\";\nimport {InputEmpty} from \"../\"; // forward import\nimport {InputError} from \"../\"; // forward import\n\n/** @hidden */\nexport class InputDone extends Input {\n  constructor(id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Input {\n    return part ? new InputEmpty(this.id, this.mark, this.settings) : this;\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(): Input {\n    const error = new InputException(\"done step\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  seek(mark?: Mark): Input {\n    const error = new InputException(\"empty seek\");\n    return new InputError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): Input {\n    return new InputDone(id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): Input {\n    return new InputDone(this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): Input {\n    settings = InputSettings.fromAny(settings);\n    return new InputDone(this.id, this.mark, settings);\n  }\n\n  clone(): Input {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {Mark} from \"../source/Mark\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {Input} from \"./Input\";\nimport {InputBufferEmpty} from \"../\"; // forward import\nimport {InputBufferDone} from \"../\"; // forward import\nimport {InputBufferError} from \"../\"; // forward import\n\n/**\n * Non-blocking token stream buffer.\n */\nexport abstract class InputBuffer extends Input {\n  abstract asPart(part: boolean): InputBuffer;\n\n  abstract readonly index: number;\n\n  abstract withIndex(index: number): InputBuffer;\n\n  abstract readonly limit: number;\n\n  abstract withLimit(limit: number): InputBuffer;\n\n  abstract readonly capacity: number;\n\n  abstract readonly remaining: number;\n\n  abstract has(index: number): boolean;\n\n  abstract get(index: number): number;\n\n  abstract set(index: number, token: number): void;\n\n  abstract step(offset?: number): InputBuffer;\n\n  abstract seek(mark: Mark): InputBuffer;\n\n  abstract withId(id: string | undefined): InputBuffer;\n\n  abstract withMark(mark: Mark): InputBuffer;\n\n  abstract withSettings(settings: AnyInputSettings): InputBuffer;\n\n  abstract clone(): InputBuffer;\n\n  /**\n   * Returns an `InputBuffer` in the _empty_ state.\n   */\n  @Lazy\n  static empty(): InputBuffer {\n    return new InputBufferEmpty(void 0, Mark.zero, InputSettings.standard());\n  }\n\n  /**\n   * Returns an `InputBuffer` in the _done_ state.\n   */\n  @Lazy\n  static done(): InputBuffer {\n    return new InputBufferDone(void 0, Mark.zero, InputSettings.standard());\n  }\n\n  /**\n   * Returns an `InputBuffer` in the _error_ state that traps the given `error`.\n   */\n  static error(error: Error): InputBuffer {\n    return new InputBufferError(error, void 0, Mark.zero, InputSettings.standard());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {InputBuffer} from \"./InputBuffer\";\nimport {InputBufferDone} from \"../\"; // forward import\nimport {InputBufferError} from \"../\"; // forward import\n\n/** @hidden */\nexport class InputBufferEmpty extends InputBuffer {\n  constructor(id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return true;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return true;\n  }\n\n  asPart(part: boolean): InputBuffer {\n    return part ? this : new InputBufferDone(this.id, this.mark, this.settings);\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): InputBuffer {\n    if (index === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid index\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): InputBuffer {\n    if (limit === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid limit\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new InputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new InputException();\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(offset?: number): InputBuffer {\n    const error = new InputException(\"empty step\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  seek(mark: Mark): InputBuffer {\n    const error = new InputException(\"empty seek\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): InputBuffer {\n    return new InputBufferEmpty(id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): InputBuffer {\n    return new InputBufferEmpty(this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): InputBuffer {\n    settings = InputSettings.fromAny(settings);\n    return new InputBufferEmpty(this.id, this.mark, settings);\n  }\n\n  clone(): InputBuffer {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {InputBuffer} from \"./InputBuffer\";\nimport {InputBufferEmpty} from \"../\"; // forward import\nimport {InputBufferError} from \"../\"; // forward import\n\n/** @hidden */\nexport class InputBufferDone extends InputBuffer {\n  constructor(id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): InputBuffer {\n    return part ? new InputBufferEmpty(this.id, this.mark, this.settings) : this;\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): InputBuffer {\n    if (index === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid index\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): InputBuffer {\n    if (limit === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid limit\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new InputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new InputException();\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(offset?: number): InputBuffer {\n    const error = new InputException(\"done step\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  seek(mark: Mark): InputBuffer {\n    const error = new InputException(\"done seek\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): InputBuffer {\n    return new InputBufferDone(id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): InputBuffer {\n    return new InputBufferDone(this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): InputBuffer {\n    settings = InputSettings.fromAny(settings);\n    return new InputBufferDone(this.id, this.mark, settings);\n  }\n\n  clone(): InputBuffer {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mark} from \"../source/Mark\";\nimport {InputException} from \"./InputException\";\nimport {AnyInputSettings, InputSettings} from \"./InputSettings\";\nimport {InputBuffer} from \"./InputBuffer\";\n\n/** @hidden */\nexport class InputBufferError extends InputBuffer {\n  /** @hidden */\n  declare readonly error: Error;\n\n  constructor(error: Error, id: string | undefined, mark: Mark, settings: InputSettings) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"id\", {\n      value: id,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mark\", {\n      value: mark,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): InputBuffer {\n    return this;\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): InputBuffer {\n    if (index === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid index\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): InputBuffer {\n    if (limit === 0) {\n      return this;\n    } else {\n      const error = new InputException(\"invalid limit\");\n      return new InputBufferError(error, this.id, this.mark, this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new InputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new InputException();\n  }\n\n  head(): number {\n    throw new InputException();\n  }\n\n  step(offset?: number): InputBuffer {\n    const error = new InputException(\"error step\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  trap(): Error {\n    return this.error;\n  }\n\n  seek(mark: Mark): InputBuffer {\n    const error = new InputException(\"error seek\");\n    return new InputBufferError(error, this.id, this.mark, this.settings);\n  }\n\n  declare readonly id: string | undefined;\n\n  withId(id: string | undefined): InputBuffer {\n    return new InputBufferError(this.error, id, this.mark, this.settings);\n  }\n\n  declare readonly mark: Mark;\n\n  withMark(mark: Mark): InputBuffer {\n    return new InputBufferError(this.error, this.id, mark, this.settings);\n  }\n\n  get offset(): number {\n    return this.mark.offset;\n  }\n\n  get line(): number {\n    return this.mark.line;\n  }\n\n  get column(): number {\n    return this.mark.column;\n  }\n\n  declare readonly settings: InputSettings;\n\n  withSettings(settings: AnyInputSettings): InputBuffer {\n    settings = InputSettings.fromAny(settings);\n    return new InputBufferError(this.error, this.id, this.mark, settings);\n  }\n\n  clone(): InputBuffer {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {Output} from \"./Output\";\nimport {OutputDone} from \"../\"; // forward import\nimport {OutputError} from \"../\"; // forward import\n\n/** @hidden */\nexport class OutputFull extends Output<never> {\n  constructor(settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return true;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return true;\n  }\n\n  asPart(part: boolean): Output<never> {\n    return part ? this : new OutputDone(this.settings);\n  }\n\n  write(token: number): Output<never>;\n  write(string: string): Output<never>;\n  write(tokenOrString: number | string): Output<never> {\n    return new OutputError(new OutputException(\"full\"), this.settings);\n  }\n\n  writeln(string?: string): Output<never> {\n    return new OutputError(new OutputException(\"full\"), this.settings);\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputFull(settings);\n  }\n\n  clone(): Output<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {Output} from \"./Output\";\nimport {OutputFull} from \"../\"; // forward import\nimport {OutputError} from \"../\"; // forward import\n\n/** @hidden */\nexport class OutputDone extends Output<never> {\n  constructor(settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<never> {\n    return part ? new OutputFull(this.settings) : this;\n  }\n\n  write(token: number): Output<never>;\n  write(string: string): Output<never>;\n  write(tokenOrString: number | string): Output<never> {\n    return new OutputError(new OutputException(\"done\"), this.settings);\n  }\n\n  writeln(string?: string): Output<never> {\n    return new OutputError(new OutputException(\"done\"), this.settings);\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputDone(settings);\n  }\n\n  clone(): Output<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {Output} from \"./Output\";\n\n/** @hidden */\nexport class OutputError extends Output<never> {\n  constructor(error: Error, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<never> {\n    return this;\n  }\n\n  write(token: number): Output<never>;\n  write(string: string): Output<never>;\n  write(tokenOrString: number | string): Output<never> {\n    return this;\n  }\n\n  writeln(string?: string): Output<never> {\n    return this;\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  /** @hidden */\n  declare readonly error: Error;\n\n  trap(): Error {\n    return this.error;\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputError(this.error, settings);\n  }\n\n  clone(): Output<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {Output} from \"./Output\";\nimport {OutputBufferFull} from \"../\"; // forward import\nimport {OutputBufferDone} from \"../\"; // forward import\nimport {OutputBufferError} from \"../\"; // forward import\nimport {Format} from \"../\"; // forward import\n\n/**\n * Non-blocking token stream buffer.\n */\nexport abstract class OutputBuffer<T = unknown> extends Output<T> {\n  abstract asPart(part: boolean): OutputBuffer<T>;\n\n  abstract readonly index: number;\n\n  abstract withIndex(index: number): OutputBuffer<T>;\n\n  abstract readonly limit: number;\n\n  abstract withLimit(limit: number): OutputBuffer<T>;\n\n  abstract readonly capacity: number;\n\n  abstract readonly remaining: number;\n\n  abstract has(index: number): boolean;\n\n  abstract get(index: number): number;\n\n  abstract set(index: number, token: number): void;\n\n  abstract write(token: number): OutputBuffer<T>;\n  abstract write(string: string): OutputBuffer<T>;\n\n  writeln(string?: string): OutputBuffer<T> {\n    if (typeof string === \"string\") {\n      this.write(string);\n    }\n    return this.write(this.settings.lineSeparator);\n  }\n\n  display(object: unknown): OutputBuffer<T> {\n    Format.display(object, this);\n    return this;\n  }\n\n  debug(object: unknown): OutputBuffer<T> {\n    Format.debug(object, this);\n    return this;\n  }\n\n  abstract step(offset?: number): OutputBuffer<T>;\n\n  flush(): OutputBuffer<T> {\n    return this;\n  }\n\n  abstract withSettings(settings: AnyOutputSettings): Output<T>;\n\n  clone(): OutputBuffer<T> {\n    throw new Error();\n  }\n\n  /**\n   * Returns an `OutputBuffer` in the _full_ state.\n   */\n  @Lazy\n  static full(): OutputBuffer<never> {\n    return new OutputBufferFull(OutputSettings.standard());\n  }\n\n  /**\n   * Returns an `OutputBuffer` in the _done_ state.\n   */\n  @Lazy\n  static done(): OutputBuffer<never> {\n    return new OutputBufferDone(OutputSettings.standard());\n  }\n\n  /**\n   * Returns an `OutputBuffer` in the _error_ state that traps the given `error`.\n   */\n  static error(error: Error): OutputBuffer<never> {\n    return new OutputBufferError(error, OutputSettings.standard());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {OutputBuffer} from \"./OutputBuffer\";\nimport {OutputBufferDone} from \"../\"; // forward import\nimport {OutputBufferError} from \"../\"; // forward import\n\n/** @hidden */\nexport class OutputBufferFull extends OutputBuffer<never> {\n  constructor(settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return true;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return true;\n  }\n\n  asPart(part: boolean): OutputBuffer<never> {\n    return part ? this : new OutputBufferDone(this.settings);\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): OutputBuffer<never> {\n    if (index === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid index\"), this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): OutputBuffer<never> {\n    if (limit === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid limit\"), this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new OutputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new OutputException();\n  }\n\n  write(token: number): OutputBuffer<never>;\n  write(string: string): OutputBuffer<never>;\n  write(tokenOrString: number | string): OutputBuffer<never> {\n    return new OutputBufferError(new OutputException(\"full\"), this.settings);\n  }\n\n  writeln(string?: string): OutputBuffer<never> {\n    return new OutputBufferError(new OutputException(\"full\"), this.settings);\n  }\n\n  step(offset: number = 1): OutputBuffer<never> {\n    if (offset === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid step\"), this.settings);\n    }\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): OutputBuffer<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputBufferFull(settings);\n  }\n\n  clone(): OutputBuffer<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {OutputBuffer} from \"./OutputBuffer\";\nimport {OutputBufferFull} from \"../\"; // forward import\nimport {OutputBufferError} from \"../\"; // forward import\n\n/** @hidden */\nexport class OutputBufferDone extends OutputBuffer<never> {\n  constructor(settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): OutputBuffer<never> {\n    return part ? new OutputBufferFull(this.settings) : this;\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): OutputBuffer<never> {\n    if (index === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid index\"), this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): OutputBuffer<never> {\n    if (limit === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid limit\"), this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new OutputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new OutputException();\n  }\n\n  write(token: number): OutputBuffer<never>;\n  write(string: string): OutputBuffer<never>;\n  write(tokenOrString: number | string): OutputBuffer<never> {\n    return new OutputBufferError(new OutputException(\"done\"), this.settings);\n  }\n\n  writeln(string?: string): OutputBuffer<never> {\n    return new OutputBufferError(new OutputException(\"done\"), this.settings);\n  }\n\n  step(offset: number = 1): OutputBuffer<never> {\n    if (offset === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid step\"), this.settings);\n    }\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): OutputBuffer<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputBufferDone(settings);\n  }\n\n  clone(): OutputBuffer<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"./OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"./OutputSettings\";\nimport {OutputBuffer} from \"./OutputBuffer\";\n\n/** @hidden */\nexport class OutputBufferError extends OutputBuffer<never> {\n  constructor(error: Error, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): OutputBuffer<never> {\n    return this;\n  }\n\n  get index(): number {\n    return 0;\n  }\n\n  withIndex(index: number): OutputBuffer<never> {\n    if (index === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid index\"), this.settings);\n    }\n  }\n\n  get limit(): number {\n    return 0;\n  }\n\n  withLimit(limit: number): OutputBuffer<never> {\n    if (limit === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid limit\"), this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return 0;\n  }\n\n  get remaining(): number {\n    return 0;\n  }\n\n  has(index: number): boolean {\n    return false;\n  }\n\n  get(index: number): number {\n    throw new OutputException();\n  }\n\n  set(index: number, token: number): void {\n    throw new OutputException();\n  }\n\n  write(token: number): OutputBuffer<never>;\n  write(string: string): OutputBuffer<never>;\n  write(tokenOrString: number | string): OutputBuffer<never> {\n    return this;\n  }\n\n  writeln(string?: string): OutputBuffer<never> {\n    return this;\n  }\n\n  step(offset: number = 1): OutputBuffer<never> {\n    if (offset === 0) {\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid step\"), this.settings);\n    }\n  }\n\n  bind(): never {\n    throw new OutputException();\n  }\n\n  /** @hidden */\n  declare readonly error: Error;\n\n  trap(): Error {\n    return this.error;\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): OutputBuffer<never> {\n    settings = OutputSettings.fromAny(settings);\n    return new OutputBufferError(this.error, settings);\n  }\n\n  clone(): OutputBuffer<never> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Thrown when a [[Parser]] parses invalid syntax.\n */\nimport {Diagnostic} from \"../source/Diagnostic\";\n\nexport class ParserException extends Error {\n  declare readonly diagnostic: Diagnostic | null;\n\n  constructor(message?: Diagnostic | string) {\n    super(message instanceof Diagnostic ? message.message : message);\n    Object.setPrototypeOf(this, ParserException.prototype);\n    Object.defineProperty(this, \"diagnostic\", {\n      value: message instanceof Diagnostic ? message : null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  toString(): string {\n    if (this.diagnostic !== null) {\n      return this.diagnostic.toString();\n    } else {\n      return super.toString();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Diagnostic} from \"../source/Diagnostic\";\nimport type {Input} from \"../input/Input\";\nimport {ParserException} from \"./ParserException\";\nimport {ParserDone} from \"../\"; // forward import\nimport {ParserError} from \"../\"; // forward import\n\n/**\n * Continuation of how to parse subsequent [[Input]] tokens from a stream.\n * `Parser` enables efficient, interruptible parsing of network protocols and\n * data formats, without intermediate buffering.\n *\n * ### Input tokens\n * A `Parser` reads tokens from an `Input` reader.  Input tokens are modeled as\n * primitive numbers, commonly representing Unicode code points, or raw octets.\n * Each `Parser` implementation specifies the semantic type of input tokens it\n * consumes.\n *\n * ### Parser states\n * A `Parser` is always in one of three states: _cont_inue, _done_, or _error_.\n * The _cont_ state indicates that [[feed]] is ready to consume `Input`; the\n * _done_ state indicates that parsing terminated successfully, and that\n * [[bind]] will return the parsed result; the _error_ state indicates that\n * parsing terminated in failure, and that [[trap]] will return the parse error.\n * `Parser` subclasses default to the _cont_ state.\n *\n * ### Feeding input\n * The [[feed]] method incrementally parses as much `Input` as it can, before\n * returning another `Parser` that represents the continuation of how to parse\n * additional `Input`.  The `Input` passed to `feed` is only guaranteed to be\n * valid for the duration of the method call; references to the provided `Input`\n * instance must not be stored.\n *\n * ### Parser results\n * A `Parser` produces a parsed result of type `O`, obtained via the [[bind]]\n * method.  `bind` is only guaranteed to return a result when in the _done_\n * state; though `bind` may optionally make available partial results in other\n * states.  A failed `Parser` provides a parse error via the [[trap]] method.\n * `trap` is only guaranteed to return an error when in the _error_ state.\n *\n * ### Continuations\n * A `Parser` instance represents a continuation of how to parse remaining\n * `Input`.  Rather than parsing a complete input in one go, a `Parser` takes\n * an `Input` chunk and returns another `Parser` instance that knows how to\n * parse subsequent `Input` chunks.  This enables non-blocking, incremental\n * parsing that can be interrupted whenever an `Input` reader runs out of\n * immediately available data.  A `Parser` terminates by returning a\n * continuation in either the _done_ state, or the _error_ state.\n * [[Parser.done]] returns a `Parser` in the _done_ state.  [[Parser.error]]\n * returns a `Parser` in the _error_ state.\n *\n * ### Iteratees\n * `Parser` is an [Iteratee](https://en.wikipedia.org/wiki/Iteratee).  Though\n * unlike strictly functional iteratees, a `Parser` statefully iterates over\n * its `Input`, rather than allocating an object for each incremental input\n * continutaion.  This internal mutability minimizes garbage collector memory\n * pressure, without violating the functional Iteratee abstraction, provided\n * that `feed` logically takes exclusive ownership of its `Input` when invoked,\n * and logically returns ownership of the `Input` in a state that's consistent\n * with the returned `Parser` continuation.\n *\n * ### Immutability\n * A `Parser` should be immutable.  Specifically, an invocation of `feed`\n * should not alter the behavior of future calls to `feed` on the same `Parser`\n * instance.  A `Parser` should only mutate its internal state if it's essential\n * to do so, such as for critical path performance reasons.\n *\n * ### Backtracking\n * `feed` can internally [[Input.clone clone]] its `Input`, if it might need to\n * backtrack.  Keep in mind that, because `Input` is only valid for the duration\n * of a call to `feed`, input must be internally buffered if it needs to be\n * preserved between `feed` invocations.\n *\n * ### Forking\n * The [[fork]] method passes an out-of-band condition to a `Parser`, yielding\n * a `Parser` continuation whose behavior may be altered by the given condition.\n * For example, an HTML `Parser` might `fork` an inner text parser to directly\n * parse an embedded micro format out of an HTML element, based on some\n * out-of-band schema information.  The types of conditions accepted by `fork`,\n * and their intended semantics, are implementation defined.\n */\nexport abstract class Parser<O> {\n  /**\n   * Returns `true` when [[feed]] is able to consume `Input`.  i.e. this\n   * `Parser` is in the _cont_ state.\n   */\n  isCont(): boolean {\n    return true;\n  }\n\n  /**\n   * Returns `true` when parsing has terminated successfully, and [[bind]] will\n   * return the parsed result.  i.e. this `Parser` is in the _done_ state.\n   */\n  isDone(): boolean {\n    return false;\n  }\n\n  /**\n   * Returns `true` when parsing has terminated in failure, and [[trap]] will\n   * return the parse error.  i.e. this `Parser` is in the _error_ state.\n   */\n  isError(): boolean {\n    return false;\n  }\n\n  /**\n   * Incrementally parses as much `input` as possible, and returns another\n   * `Parser` that represents the continuation of how to parse additional\n   * `Input`.  If `input` enters the _done_ state, `feed` _must_ return a\n   * terminated `Parser`, i.e. a `Parser` in the _done_ state, or in the\n   * _error_ state.  The given `input` is only guaranteed to be valid for the\n   * duration of the method call; references to `input` must not be stored.\n   */\n  abstract feed(input: Input): Parser<O>;\n\n  /**\n   * Returns a `Parser` continuation whose behavior may be altered by the\n   * given out-of-band `condition`.\n   */\n  fork(condition: unknown): Parser<O> {\n    return this;\n  }\n\n  /**\n   * Returns the parsed result.  Only guaranteed to return a result when in the\n   * _done_ state.\n   *\n   * @throws `Error` if this `Parser is not in the _done_ state.\n   */\n  bind(): O {\n    throw new ParserException();\n  }\n\n  /**\n   * Returns the parse error.  Only guaranteed to return an error when in the\n   * _error_ state.\n   *\n   * @throws `Error` if this `Parser` is not in the _error_ state.\n   */\n  trap(): Error {\n    throw new ParserException();\n  }\n\n  /**\n   * Casts an errored `Parser` to a different output type.  A `Parser` in the\n   * _error_ state can have any output type.\n   *\n   * @throws `ParserException` if this `Parser` is not in the _error_ state.\n   */\n  asError<O2>(): Parser<O2> {\n    throw new ParserException();\n  }\n\n  /**\n   * Returns a `Parser` in the _done_ state that binds the given parsed `value`.\n   */\n  static done<O>(value: O): Parser<O> {\n    return new ParserDone(value);\n  }\n\n  /**\n   * Returns a `Parser` in the _error_ state that `trap`s the given parse `error`.\n   */\n  static error<O>(error: Error | Diagnostic): Parser<O> {\n    if (error instanceof Error) {\n      return new ParserError(error);\n    } else {\n      return new ParserError(new ParserException(error));\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input} from \"../input/Input\";\nimport {Parser} from \"./Parser\";\n\n/** @hidden */\nexport class ParserDone<O> extends Parser<O> {\n  /** @hidden */\n  declare readonly value: O;\n\n  constructor(value: O) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  feed(input: Input): Parser<O> {\n    return this;\n  }\n\n  bind(): O {\n    return this.value;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input} from \"../input/Input\";\nimport {Parser} from \"./Parser\";\n\n/** @hidden */\nexport class ParserError extends Parser<never> {\n  /** @hidden */\n  declare readonly error: Error;\n\n  constructor(error: Error) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  feed(input: Input): Parser<never> {\n    return this;\n  }\n\n  bind(): never {\n    throw this.error;\n  }\n\n  trap(): Error {\n    return this.error;\n  }\n\n  asError<O2>(): Parser<O2> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"./WriterException\";\nimport {Writer} from \"./Writer\";\n\n/** @hidden */\nexport class WriterEnd extends Writer<unknown, never> {\n  constructor() {\n    super();\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  pull(output: Output): Writer<unknown, never> {\n    return this;\n  }\n\n  bind(): never {\n    throw new WriterException();\n  }\n\n  asDone<I2>(): Writer<I2, never> {\n    return this;\n  }\n\n  andThen<O2>(that: Writer<unknown, O2>): Writer<unknown, O2> {\n    return that;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {Writer} from \"./Writer\";\n\n/** @hidden */\nexport class WriterDone<O> extends Writer<unknown, O> {\n  /** @hidden */\n  declare readonly value: O;\n\n  constructor(value: O) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return true;\n  }\n\n  pull(output: Output): Writer<unknown, O> {\n    return this;\n  }\n\n  bind(): O {\n    return this.value;\n  }\n\n  asDone<I2>(): Writer<I2, O> {\n    return this;\n  }\n\n  andThen<O2>(that: Writer<unknown, O2>): Writer<unknown, O2> {\n    return that;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {Writer} from \"./Writer\";\n\n/** @hidden */\nexport class WriterError extends Writer<never, never> {\n  /** @hidden */\n  declare readonly error: Error;\n\n  constructor(error: Error) {\n    super();\n    Object.defineProperty(this, \"error\", {\n      value: error,\n      enumerable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return true;\n  }\n\n  pull(output: Output): Writer<never, never> {\n    return this;\n  }\n\n  bind(): never {\n    throw this.error;\n  }\n\n  trap(): Error {\n    return this.error;\n  }\n\n  asError<I2, O2>(): Writer<I2, O2> {\n    return this;\n  }\n\n  andThen<O2>(that: Writer<never, O2>): Writer<never, O2> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {Writer} from \"./Writer\";\n\n/** @hidden */\nexport class WriterSequence<O> extends Writer<never, O> {\n  /** @hidden */\n  declare readonly head: Writer<unknown, unknown>;\n  /** @hidden */\n  declare readonly tail: Writer<unknown, O>;\n\n  constructor(head: Writer<unknown, unknown>, tail: Writer<unknown, O>) {\n    super();\n    Object.defineProperty(this, \"head\", {\n      value: head,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"tail\", {\n      value: tail,\n      enumerable: true,\n    });\n  }\n\n  pull(output: Output): Writer<never, O> {\n    let head = this.head;\n    if (head.isCont()) {\n      head = head.pull(output);\n    }\n    if (head.isError()) {\n      return head.asError();\n    } else if (head.isDone()) {\n      return this.tail.pull(output);\n    } else {\n      return new WriterSequence(head, this.tail);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport {Output} from \"../output/Output\";\n\n/** @hidden */\nexport abstract class ByteOutput<T> extends Output<T> {\n  /** @hidden */\n  declare readonly array: Uint8Array | null;\n  /** @hidden */\n  declare readonly size: number;\n\n  constructor(array: Uint8Array | null, size: number, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"array\", {\n      value: array,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: size,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return true;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<T> {\n    return this;\n  }\n\n  write(b: number | string): Output<T> {\n    if (typeof b === \"number\") {\n      const n = this.size;\n      const oldArray = this.array;\n      let newArray;\n      if (oldArray === null || n + 1 > oldArray.length) {\n        newArray = new Uint8Array(ByteOutput.expand(n + 1));\n        if (oldArray !== null) {\n          newArray.set(oldArray, 0);\n        }\n        Object.defineProperty(this, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n      } else {\n        newArray = oldArray;\n      }\n      newArray[n] = b;\n      Object.defineProperty(this, \"size\", {\n        value: n + 1,\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      throw new TypeError(\"\" + b);\n    }\n  }\n\n  writeln(string?: string): Output<T> {\n    throw new TypeError(\"\" + string);\n  }\n\n  toUint8Array(): Uint8Array {\n    const n = this.size;\n    const oldArray = this.array;\n    if (oldArray !== null && n === oldArray.length) {\n      return oldArray;\n    } else {\n      const newArray = new Uint8Array(n);\n      if (oldArray !== null) {\n        newArray.set(oldArray.slice(0, n), 0);\n      }\n      Object.defineProperty(this, \"array\", {\n        value: newArray,\n        enumerable: true,\n        configurable: true,\n      });\n      return newArray;\n    }\n  }\n\n  cloneArray(): Uint8Array | null {\n    const oldArray = this.array;\n    if (oldArray !== null) {\n      return oldArray.slice(0, this.size);\n    } else {\n      return null;\n    }\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<T> {\n    settings = OutputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  /** @hidden */\n  static expand(n: number): number {\n    n = Math.max(32, n) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8; n |= n >> 16;\n    return n + 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {OutputSettings} from \"../output/OutputSettings\";\nimport type {Output} from \"../output/Output\";\nimport {ByteOutput} from \"./ByteOutput\";\n\n/** @hidden */\nexport class ByteOutputUint8Array extends ByteOutput<Uint8Array> {\n  constructor(array: Uint8Array | null, size: number, settings: OutputSettings) {\n    super(array, size, settings);\n  }\n\n  bind(): Uint8Array {\n    return this.toUint8Array();\n  }\n\n  clone(): Output<Uint8Array> {\n    return new ByteOutputUint8Array(this.cloneArray(), this.size, this.settings);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"../output/OutputException\";\nimport {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport {OutputBuffer} from \"../output/OutputBuffer\";\nimport {OutputBufferError} from \"../output/OutputBufferError\";\n\n/** @hidden */\nexport class ByteOutputBuffer extends OutputBuffer<Uint8Array> {\n  /** @hidden */\n  declare readonly array: Uint8Array;\n  /** @hidden */\n  declare readonly part: boolean;\n\n  constructor(array: Uint8Array, index: number, limit: number,\n              part: boolean, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"array\", {\n      value: array,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"limit\", {\n      value: limit,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"part\", {\n      value: part,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return this.index < this.limit;\n  }\n\n  isFull(): boolean {\n    return this.part && this.index >= this.limit;\n  }\n\n  isDone(): boolean {\n    return !this.part && this.index >= this.limit;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return this.part;\n  }\n\n  asPart(part: boolean): OutputBuffer<Uint8Array> {\n    Object.defineProperty(this, \"part\", {\n      value: part,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  declare readonly index: number;\n\n  withIndex(index: number): OutputBuffer<Uint8Array> {\n    if (0 <= index && index <= this.limit) {\n      Object.defineProperty(this, \"index\", {\n        value: index,\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid index\"), this.settings);\n    }\n  }\n\n  declare readonly limit: number;\n\n  withLimit(limit: number): OutputBuffer<Uint8Array> {\n    if (0 <= limit && limit <= this.array.length) {\n      Object.defineProperty(this, \"limit\", {\n        value: limit,\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid limit\"), this.settings);\n    }\n  }\n\n  get capacity(): number {\n    return this.array.length;\n  }\n\n  get remaining(): number {\n    return this.limit - this.index;\n  }\n\n  has(index: number): boolean {\n    return 0 <= index && index < this.limit;\n  }\n\n  get(index: number): number {\n    if (0 <= index && index < this.limit) {\n      return this.array[index]!;\n    } else {\n      throw new OutputException();\n    }\n  }\n\n  set(index: number, token: number): void {\n    if (0 <= index && index < this.limit) {\n      this.array[index] = token;\n    } else {\n      throw new OutputException();\n    }\n  }\n\n  write(token: number | string): OutputBuffer<Uint8Array> {\n    if (typeof token === \"number\") {\n      const index = this.index;\n      if (index < this.limit) {\n        this.array[index] = token;\n        Object.defineProperty(this, \"index\", {\n          value: index + 1,\n          enumerable: true,\n          configurable: true,\n        });\n        return this;\n      } else {\n        return new OutputBufferError(new OutputException(\"full\"), this.settings);\n      }\n    } else {\n      return new OutputBufferError(new OutputException(\"binary output\"), this.settings);\n    }\n  }\n\n  writeln(string?: string): OutputBuffer<Uint8Array> {\n    return new OutputBufferError(new OutputException(\"binary output\"), this.settings);\n  }\n\n  step(offset: number): OutputBuffer<Uint8Array> {\n    const index = this.index + offset;\n    if (0 <= index && index <= this.limit) {\n      Object.defineProperty(this, \"index\", {\n        value: index,\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      return new OutputBufferError(new OutputException(\"invalid step\"), this.settings);\n    }\n  }\n\n  bind(): Uint8Array {\n    return new Uint8Array(this.array.buffer, 0, this.index);\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): OutputBuffer<Uint8Array> {\n    settings = OutputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  clone(): OutputBuffer<Uint8Array> {\n    return new ByteOutputBuffer(this.array, this.index, this.limit, this.part, this.settings);\n  }\n\n  static create(array: Uint8Array, offset?: number, length?: number): OutputBuffer<Uint8Array> {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    if (length === void 0) {\n      length = array.length;\n    }\n    return new ByteOutputBuffer(array, offset, offset + length, false, OutputSettings.standard());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport type {Output} from \"../output/Output\";\nimport type {OutputBuffer} from \"../output/OutputBuffer\";\nimport {ByteOutputBuffer} from \"./ByteOutputBuffer\";\nimport {ByteOutputUint8Array} from \"./ByteOutputUint8Array\";\n\n/**\n * Byte [[Input]]/[[Output]] factory.\n *\n * The `Binary.outputBuffer(...)` function returns an `Output` that writes\n * bytes to a growable array, and [[Output.bind binds]] a `Uint8Array`\n * containing all written bytes.\n */\nexport const Binary = {} as {\n  /**\n   * Returns a new `Output` that appends bytes to a growable array,\n   * pre-allocated with space for `initialCapacity` bytes, if `initialCapacity`\n   * is defined, using the given `settings`, if `settings` is defined.  The\n   * returned `Output` accepts an unbounded number of bytes, remaining\n   * permanently in the _cont_ state, and can [[Output.bind bind]] a\n   * `Uint8Array` with the current output state at any time.\n   */\n  output(initialCapacity?: number, settings?: AnyOutputSettings): Output<Uint8Array>;\n\n  /**\n   * Returns a new `Output` that appends bytes to a growable array, using the\n   * given `settings`.  The returned `Output` accepts an unbounded number of\n   * bytes, remaining permanently in the _cont_ state, and can [[Output.bind\n   * bind]] a `Uint8Array` array with the current output state at any time.\n   */\n  output(settings: AnyOutputSettings): Output<Uint8Array>;\n\n  outputBuffer(array: Uint8Array, offset?: number, length?: number): OutputBuffer<Uint8Array>;\n};\n\nBinary.output = function (initialCapacity?: number | AnyOutputSettings,\n                          settings?: AnyOutputSettings): Output<Uint8Array> {\n  if (settings === void 0 && typeof initialCapacity !== \"number\") {\n    settings = initialCapacity;\n    initialCapacity = void 0;\n  } else if (typeof initialCapacity !== \"number\") {\n    initialCapacity = void 0;\n  }\n  let array: Uint8Array | null;\n  if (typeof initialCapacity === \"number\") {\n    array = new Uint8Array(initialCapacity);\n  } else {\n    array = null;\n  }\n  settings = OutputSettings.fromAny(settings);\n  return new ByteOutputUint8Array(array, 0, settings);\n};\n\nBinary.outputBuffer = function (array: Uint8Array, offset?: number,\n                                length?: number): OutputBuffer<Uint8Array> {\n  return ByteOutputBuffer.create(array, offset, length);\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, HashCode} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport type {Debug} from \"../format/Debug\";\nimport {Format} from \"../format/Format\";\nimport {UtfErrorModeFatal} from \"../\"; // forward import\nimport {UtfErrorModeReplacement} from \"../\"; // forward import\n\n/**\n * Unicode transformation format error handling mode.\n */\nexport abstract class UtfErrorMode implements HashCode, Debug {\n  /**\n   * Returns `true` if a Unicode decoding should abort with an error when an\n   * invalid code unit sequence is encountered.\n   */\n  isFatal(): boolean {\n    return false;\n  }\n\n  /**\n   * Returns `true` if a Unicode decoding should substitute invalid code unit\n   * sequences with a replacement character.\n   */\n  isReplacement(): boolean {\n    return false;\n  }\n\n  /**\n   * The Unicode code point of the replacement character used to substitute\n   * for invalid code unit sequences.\n   */\n  abstract readonly replacementChar: number;\n\n  /**\n   * Returns `true` if Unicode decoding should abort with an error when a\n   * `NUL` byte is encountered.\n   */\n  abstract isNonZero(): boolean;\n\n  /**\n   * Returns a `UtfErrorMode` that, if `isNonZero` is `true`, aborts when\n   * Unicode decoding encounters a `NUL` byte.\n   */\n  abstract asNonZero(isNonZero: boolean): UtfErrorMode;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  /**\n   * Returns a `UtfErrorMode` that aborts Unicode decoding with an error when\n   * invalid code unit sequences are encountered.\n   */\n  @Lazy\n  static fatal(): UtfErrorMode {\n    return new UtfErrorModeFatal(false);\n  }\n\n  /**\n   * Returns a `UtfErrorMode` that aborts Unicode decoding with an error when\n   * invalid code unit sequences, and `NUL` bytes, are encountered.\n   */\n  @Lazy\n  static fatalNonZero(): UtfErrorMode {\n    return new UtfErrorModeFatal(true);\n  }\n\n  /**\n   * Returns a `UtfErrorMode` that substitutes invalid code unit sequences\n   * with the replacement character (`U+FFFD`).\n   */\n  @Lazy\n  static replacement(): UtfErrorMode {\n    return new UtfErrorModeReplacement(0xfffd, false);\n  }\n\n  /**\n   * Returns a `UtfErrorMode` that substitutes invalid code unit sequences\n   * with the replacement character (`U+FFFD`), and aborts decoding with an\n   * error when `NUL` bytes are encountered.\n   */\n  @Lazy\n  static replacementNonZero(): UtfErrorMode {\n    return new UtfErrorModeReplacement(0xfffd, true);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Booleans, Constructors} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport {UtfErrorMode} from \"./UtfErrorMode\";\n\n/** @hidden */\nexport class UtfErrorModeFatal extends UtfErrorMode {\n  constructor(nonZero: boolean) {\n    super();\n    Object.defineProperty(this, \"nonZero\", {\n      value: nonZero,\n      enumerable: true,\n    });\n  }\n\n  isFatal(): boolean {\n    return true;\n  }\n\n  get replacementChar(): number {\n    return 0xfffd;\n  }\n\n  /** @hidden */\n  declare readonly nonZero: boolean;\n\n  isNonZero(): boolean {\n    return this.nonZero;\n  }\n\n  asNonZero(nonZero: boolean): UtfErrorMode {\n    if (nonZero) {\n      return UtfErrorMode.fatalNonZero();\n    } else {\n      return UtfErrorMode.fatal();\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UtfErrorModeFatal) {\n      return this.nonZero === that.nonZero;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(UtfErrorModeFatal),\n        Booleans.hash(this.nonZero)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UtfErrorMode\").write(46/*'.'*/)\n        .write(this.nonZero ? \"fatalNonZero\" : \"fatal\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Booleans, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"../output/Output\";\nimport {UtfErrorMode} from \"./UtfErrorMode\";\n\n/** @hidden */\nexport class UtfErrorModeReplacement extends UtfErrorMode {\n  constructor(replacementChar: number, nonZero: boolean) {\n    super();\n    Object.defineProperty(this, \"replacementChar\", {\n      value: replacementChar,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"nonZero\", {\n      value: nonZero,\n      enumerable: true,\n    });\n  }\n\n  isReplacement(): boolean {\n    return true;\n  }\n\n  declare readonly replacementChar: number;\n\n  /** @hidden */\n  declare readonly nonZero: boolean;\n\n  isNonZero(): boolean {\n    return this.nonZero;\n  }\n\n  asNonZero(nonZero: boolean): UtfErrorMode {\n    if (this.replacementChar === 0xfffd) {\n      if (nonZero) {\n        return UtfErrorMode.replacementNonZero();\n      } else {\n        return UtfErrorMode.replacement();\n      }\n    } else {\n      return new UtfErrorModeReplacement(this.replacementChar, nonZero);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UtfErrorModeReplacement) {\n      return this.replacementChar === that.replacementChar\n          && this.nonZero === that.nonZero;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(UtfErrorModeReplacement),\n        Numbers.hash(this.replacementChar)), Booleans.hash(this.nonZero)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UtfErrorMode\").write(46/*'.'*/)\n        .write(this.nonZero ? \"replacementNonZero\" : \"replacement\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport type {Parser} from \"../parser/Parser\";\nimport type {Writer} from \"../writer/Writer\";\nimport {Format} from \"../format/Format\";\nimport {Binary} from \"../binary/Binary\";\nimport {Unicode} from \"../unicode/Unicode\";\nimport {Base16Parser} from \"../\"; // forward import\nimport {Base16Writer} from \"../\"; // forward import\nimport {Base16IntegerWriter} from \"../\"; // forward import\n\n/**\n * Base-16 (hexadecimal) encoding [[Parser]]/[[Writer]] factory.\n */\nexport class Base16 {\n  constructor(alphabet: string) {\n    Object.defineProperty(this, \"alphabet\", {\n      value: alphabet,\n      enumerable: true,\n    });\n  }\n\n  /**\n   * Returns a 16 character string, where the character at index `i` is the\n   * encoding of the base-16 digit `i`.\n   */\n  declare readonly alphabet: string;\n\n  /**\n   * Returns the Unicode code point of the base-16 digit that encodes the given\n   * 4-bit quantity.\n   */\n  encodeDigit(b: number): number {\n    return this.alphabet.charCodeAt(b);\n  }\n\n  /**\n   * Returns a `Writer` that, when fed an input `Uint8Array`, returns a\n   * continuation that writes the base-16 (hexadecimal) encoding of the input\n   * byte array.\n   */\n  uint8ArrayWriter(): Writer<Uint8Array, unknown>;\n  /**\n   * Returns a `Writer` continuation that writes the base-16 (hexadecimal)\n   * encoding of the `input` `Uint8Array`.\n   */\n  uint8ArrayWriter(input: Uint8Array): Writer<unknown, Uint8Array>;\n  uint8ArrayWriter(input?: Uint8Array): Writer<unknown, unknown> {\n    if (input === void 0) {\n      return new Base16Writer(void 0, null, this);\n    } else {\n      return new Base16Writer(input, input, this);\n    }\n  }\n\n  /**\n   * Writes the base-16 (hexadecimal) encoding of the `input` `Uint8Array` to\n   * the `output`, returning a `Writer` continuation that knows how to write any\n   * remaining output that couldn't be immediately generated.\n   */\n  writeUint8Array(input: Uint8Array, output: Output): Writer<unknown, unknown> {\n    return Base16Writer.write(output, void 0, input, this);\n  }\n\n  writeInteger(input: number, output: Output, width: number = 0): Writer<unknown, unknown> {\n    return Base16IntegerWriter.write(output, void 0, input, width, this);\n  }\n\n  writeIntegerLiteral(input: number, output: Output, width: number = 0): Writer<unknown, unknown> {\n    return Base16IntegerWriter.writeLiteral(output, void 0, input, width, this);\n  }\n\n  /**\n   * Returns the `Base16` encoding with lowercase alphanumeric digits.\n   */\n  @Lazy\n  static get lowercase(): Base16 {\n    return new Base16(\"0123456789abcdef\");\n  }\n\n  /**\n   * Returns the `Base16` encoding with uppercase alphanumeric digits.\n   */\n  @Lazy\n  static get uppercase(): Base16 {\n    return new Base16(\"0123456789ABCDEF\");\n  }\n\n  /**\n   * Returns `true` if the Unicode code point `c` is a valid base-16 digit.\n   */\n  static isDigit(c: number): boolean {\n    return c >= 48/*'0'*/ && c <= 57/*'9'*/\n        || c >= 65/*'A'*/ && c <= 70/*'F'*/\n        || c >= 97/*'a'*/ && c <= 102/*'f'*/;\n  }\n\n  /**\n   * Returns the 4-bit quantity represented by the base-16 digit `c`.\n   *\n   * @throws `Error` if `c` is not a valid base-16 digit.\n   */\n  static decodeDigit(c: number): number {\n    if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n      return c - 48/*'0'*/;\n    } else if (c >= 65/*'A'*/ && c <= 70/*'F'*/) {\n      return 10 + (c - 65/*'A'*/);\n    } else if (c >= 97/*'a'*/ && c <= 102/*'f'*/) {\n      return 10 + (c - 97/*'a'*/);\n    } else {\n      const message = Unicode.stringOutput();\n      message.write(\"Invalid base-16 digit: \");\n      Format.debugChar(c, message);\n      throw new Error(message.bind());\n    }\n  }\n\n  /**\n   * Decodes the base-16 digits `c1` and `c2`, and writes the 8-bit  quantity\n   * they represent to the given `output`.\n   */\n  static writeQuantum(c1: number, c2: number, output: Output): void {\n    const x = Base16.decodeDigit(c1);\n    const y = Base16.decodeDigit(c2);\n    output = output.write(x << 4 | y);\n  }\n\n  /**\n   * Returns a `Parser` that decodes base-16 (hexadecimal) encoded input, and\n   * writes the decoded bytes to `output`.\n   */\n  static parser<O>(output: Output<O>): Parser<O> {\n    return new Base16Parser<O>(output);\n  }\n\n  /**\n   * Parses the base-16 (hexadecimal) encoded `input`, and writes the decoded\n   * bytes to `output`, returning a `Parser` continuation that knows how to\n   * parse any additional input.\n   */\n  static parse<O>(input: Input, output: Output<O>): Parser<O> {\n    return Base16Parser.parse(input, output);\n  }\n\n  /**\n   * Parses the base-16 (hexadecimal) encoded `input`, and writes the decoded\n   * bytes to a growable array, returning a `Parser` continuation that knows\n   * how to parse any additional input.  The returned `Parser` [[Parser.bind\n   * binds]] a `Uint8Array` array containing all parsed base-16 data.\n   */\n  static parseUint8Array(input: Input): Parser<Uint8Array> {\n    return Base16Parser.parse(input, Binary.output());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"../output/OutputException\";\nimport type {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport {Output} from \"../output/Output\";\nimport {Unicode} from \"./Unicode\";\nimport {UtfErrorMode} from \"./UtfErrorMode\";\nimport {Base16} from \"../number/Base16\";\n\n/** @hidden */\nexport class Utf8DecodedOutput<T> extends Output<T> {\n  /** @hidden */\n  declare readonly output: Output<T>;\n  /** @hidden */\n  declare readonly errorMode: UtfErrorMode;\n  /** @hidden */\n  c1: number;\n  /** @hidden */\n  c2: number;\n  /** @hidden */\n  c3: number;\n  /** @hidden */\n  have: number;\n\n  constructor(output: Output<T>, errorMode: UtfErrorMode,\n              c1: number, c2: number, c3: number, have: number) {\n    super();\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"errorMode\", {\n      value: errorMode,\n      enumerable: true,\n      configurable: true,\n    });\n    this.c1 = c1;\n    this.c2 = c2;\n    this.c3 = c3;\n    this.have = have;\n  }\n\n  isCont(): boolean {\n    return this.output.isCont();\n  }\n\n  isFull(): boolean {\n    return this.output.isFull();\n  }\n\n  isDone(): boolean {\n    return this.output.isDone();\n  }\n\n  isError(): boolean {\n    return this.output.isError();\n  }\n\n  isPart(): boolean {\n    return this.output.isPart();\n  }\n\n  asPart(part: boolean): Output<T> {\n    Object.defineProperty(this, \"output\", {\n      value: this.output.asPart(part),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  write(token: number | string): Output<T> {\n    if (typeof token === \"number\") {\n      let c1 = this.c1;\n      let c2 = this.c2;\n      let c3 = this.c3;\n      let c4 = -1;\n      let have = this.have;\n\n      if (token >= 0) {\n        switch (have) {\n          case 0:\n            c1 = token & 0xff;\n            have = 1;\n            break;\n          case 1:\n            c2 = token & 0xff;\n            have = 2;\n            break;\n          case 2:\n            c3 = token & 0xff;\n            have = 3;\n            break;\n          case 3:\n            c4 = token & 0xff;\n            have = 4;\n            break;\n          default:\n            throw new Error(\"unreachable\");\n        }\n      }\n\n      if (c1 === 0 && this.errorMode.isNonZero()) { // invalid NUL byte\n        return Output.error(new OutputException(\"unexpected NUL byte\"));\n      } else if (c1 >= 0 && c1 <= 0x7f) { // U+0000..U+007F\n        Object.defineProperty(this, \"output\", {\n          value: this.output.write(c1),\n          enumerable: true,\n          configurable: true,\n        });\n        this.have = 0;\n      } else if (c1 >= 0xc2 && c1 <= 0xf4) {\n        if (c1 >= 0xc2 && c1 <= 0xdf && c2 >= 0x80 && c2 <= 0xbf) { // U+0080..U+07FF\n          Object.defineProperty(this, \"output\", {\n            value: this.output.write((c1 & 0x1f) << 6 | c2 & 0x3f),\n            enumerable: true,\n            configurable: true,\n          });\n          this.c1 = -1;\n          this.have = 0;\n        } else if (c1 === 0xe0 && c2 >= 0xa0 && c2 <= 0xbf // U+0800..U+0FFF\n                || c1 >= 0xe1 && c1 <= 0xec && c2 >= 0x80 && c2 <= 0xbf // U+1000..U+CFFF\n                || c1 === 0xed && c2 >= 0x80 && c2 <= 0x9f // U+D000..U+D7FF\n                || c1 >= 0xee && c1 <= 0xef && c2 >= 0x80 && c2 <= 0xbf) { // U+E000..U+FFFF\n          if (c3 >= 0x80 && c3 <= 0xbf) {\n            Object.defineProperty(this, \"output\", {\n              value: this.output.write((c1 & 0x0f) << 12 | (c2 & 0x3f) << 6 | c3 & 0x3f),\n              enumerable: true,\n              configurable: true,\n            });\n            this.c1 = -1;\n            this.c2 = -1;\n            this.have = 0;\n          } else if (c3 >= 0) { // invalid c3\n            if (this.errorMode.isFatal()) {\n              return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2, c3)));\n            }\n            Object.defineProperty(this, \"output\", {\n              value: this.output.write(this.errorMode.replacementChar),\n              enumerable: true,\n              configurable: true,\n            });\n            this.c1 = c3;\n            this.c2 = -1;\n            this.have = 1;\n          } else if (token < 0 || this.output.isDone()) { // incomplete c3\n            return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2)));\n          } else { // awaiting c3\n            this.c2 = c2;\n            this.have = 2;\n          }\n        } else if (c1 === 0xf0 && c2 >= 0x90 && c2 <= 0xbf // U+10000..U+3FFFF\n                || c1 >= 0xf1 && c1 <= 0xf3 && c2 >= 0x80 && c2 <= 0xbf // U+40000..U+FFFFF\n                || c1 === 0xf4 && c2 >= 0x80 && c2 <= 0x8f) { // U+100000..U+10FFFF\n          if (c3 >= 0x80 && c3 <= 0xbf) {\n            if (c4 >= 0x80 && c4 <= 0xbf) {\n              this.have = 4;\n              Object.defineProperty(this, \"output\", {\n                value: this.output.write((c1 & 0x07) << 18 | (c2 & 0x3f) << 12 | (c3 & 0x3f) << 6 | c4 & 0x3f),\n                enumerable: true,\n                configurable: true,\n              });\n              this.c1 = -1;\n              this.c2 = -1;\n              this.c3 = -1;\n              this.have = 0;\n            } else if (c4 >= 0) { // invalid c4\n              if (this.errorMode.isFatal()) {\n                return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2, c3, c4)));\n              }\n              Object.defineProperty(this, \"output\", {\n                value: this.output.write(this.errorMode.replacementChar),\n                enumerable: true,\n                configurable: true,\n              });\n              this.c1 = c4;\n              this.c2 = -1;\n              this.c3 = -1;\n              this.have = 1;\n            } else if (token < 0 || this.output.isDone()) { // incomplete c4\n              return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2, c3)));\n            } else { // awaiting c4\n              this.c3 = c3;\n              this.have = 3;\n            }\n          } else if (c3 >= 0) { // invalid c3\n            if (this.errorMode.isFatal()) {\n              return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2, c3)));\n            }\n            Object.defineProperty(this, \"output\", {\n              value: this.output.write(this.errorMode.replacementChar),\n              enumerable: true,\n              configurable: true,\n            });\n            this.c1 = c3;\n            this.c2 = -1;\n            this.have = 1;\n          } else if (token < 0 || this.output.isDone()) { // incomplete c3\n            return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2)));\n          } else { // awaiting c3\n            this.c2 = c2;\n            this.have = 2;\n          }\n        } else if (c2 >= 0) { // invalid c2\n          if (this.errorMode.isFatal()) {\n            return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1, c2)));\n          }\n          Object.defineProperty(this, \"output\", {\n            value: this.output.write(this.errorMode.replacementChar),\n            enumerable: true,\n            configurable: true,\n          });\n          this.c1 = c2;\n          this.have = 1;\n        } else if (token < 0 || this.output.isDone()) { // incomplete c2\n          return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1)));\n        } else { // awaiting c2\n          this.c1 = c1;\n          this.have = 1;\n        }\n      } else if (c1 >= 0) { // invalid c1\n        if (this.errorMode.isFatal()) {\n          return Output.error(new OutputException(Utf8DecodedOutput.invalid(c1)));\n        }\n        Object.defineProperty(this, \"output\", {\n          value: this.output.write(this.errorMode.replacementChar),\n          enumerable: true,\n          configurable: true,\n        });\n        this.have = 0;\n      }\n      if (this.output.isError()) {\n        return this.output;\n      }\n      return this;\n    } else if (typeof token === \"string\") {\n      Object.defineProperty(this, \"output\", {\n        value: this.output.write(token),\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      throw new TypeError(\"\" + token);\n    }\n  }\n\n  static invalid(c1: number, c2?: number, c3?: number, c4?: number): string {\n    let output = Unicode.stringOutput();\n    output = output.write(\"invalid UTF-8 code unit sequence: \");\n    const base16 = Base16.uppercase;\n    base16.writeIntegerLiteral(c1, output, 2);\n    if (c2 !== void 0) {\n      output = output.write(' ');\n      base16.writeIntegerLiteral(c2, output, 2);\n      if (c3 !== void 0) {\n        output = output.write(' ');\n        base16.writeIntegerLiteral(c3, output, 2);\n        if (c4 !== void 0) {\n          output = output.write(' ');\n          base16.writeIntegerLiteral(c4, output, 2);\n        }\n      }\n    }\n    return output.bind();\n  }\n\n  get settings(): OutputSettings {\n    return this.output.settings;\n  }\n\n  withSettings(settings: AnyOutputSettings): Output<T> {\n    Object.defineProperty(this, \"output\", {\n      value: this.output.withSettings(settings),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  bind(): T {\n    if (this.have === 0) {\n      return this.output.bind();\n    } else {\n      return this.write(-1).bind();\n    }\n  }\n\n  trap(): Error {\n    return this.output.trap();\n  }\n\n  clone(): Output<T> {\n    return new Utf8DecodedOutput(this.output.clone(), this.errorMode,\n                                 this.c1, this.c2, this.c3, this.have);\n  }\n\n  static create<T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T> {\n    if (errorMode === void 0) {\n      errorMode = UtfErrorMode.fatal();\n    }\n    return new Utf8DecodedOutput(output, errorMode, -1, -1, -1, 0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {OutputException} from \"../output/OutputException\";\nimport type {AnyOutputSettings, OutputSettings} from \"../output/OutputSettings\";\nimport {Output} from \"../output/Output\";\nimport {UtfErrorMode} from \"./UtfErrorMode\";\n\n/** @hidden */\nexport class Utf8EncodedOutput<T> extends Output<T> {\n  /** @hidden */\n  declare readonly output: Output<T>;\n  /** @hidden */\n  declare readonly errorMode: UtfErrorMode;\n  /** @hidden */\n  c2: number;\n  /** @hidden */\n  c3: number;\n  /** @hidden */\n  c4: number;\n  /** @hidden */\n  index: number;\n\n  constructor(output: Output<T>, errorMode: UtfErrorMode, c2: number,\n              c3: number, c4: number, index: number) {\n    super();\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"errorMode\", {\n      value: errorMode,\n      enumerable: true,\n      configurable: true,\n    });\n    this.c2 = c2;\n    this.c3 = c3;\n    this.c4 = c4;\n    this.index = index;\n  }\n\n  isCont(): boolean {\n    return this.output.isCont();\n  }\n\n  isFull(): boolean {\n    return this.output.isFull();\n  }\n\n  isDone(): boolean {\n    return this.output.isDone();\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return this.output.isPart();\n  }\n\n  asPart(part: boolean): Output<T> {\n    Object.defineProperty(this, \"output\", {\n      value: this.output.asPart(part),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  write(token: number | string): Output<T> {\n    if (typeof token === \"number\") {\n      let c1 = 0;\n      let c2 = this.c2;\n      let c3 = this.c3;\n      let c4 = this.c4;\n      let output = this.output;\n      let index = this.index;\n      while (index < 4) {\n        if (output.isCont()) {\n          switch (index) {\n            case 1: output = output.write(c2); this.c2 = 0; break;\n            case 2: output = output.write(c3); this.c3 = 0; break;\n            case 3: output = output.write(c4); this.c4 = 0; break;\n            default: throw new Error(\"unreachable\");\n          }\n          index += 1;\n        } else {\n          return Output.error(new OutputException(\"unable to flush buffered code units\"));\n        }\n      }\n      if (token >= 0 && token <= 0x7f) { // U+0000..U+007F\n        c4 = token;\n        index = 3;\n      } else if (token >= 0x80 && token <= 0x7ff) { // U+0080..U+07FF\n        c3 = 0xc0 | (token >>> 6);\n        c4 = 0x80 | (token & 0x3f);\n        index = 2;\n      } else if (token >= 0x0800 && token <= 0xffff || // U+0800..U+D7FF\n                 token >= 0xe000 && token <= 0xffff) { // U+E000..U+FFFF\n        c2 = 0xe0 | (token  >>> 12);\n        c3 = 0x80 | ((token >>>  6) & 0x3f);\n        c4 = 0x80 | (token & 0x3f);\n        index = 1;\n      } else if (token >= 0x10000 && token <= 0x10ffff) { // U+10000..U+10FFFF\n        c1 = 0xf0 | (token  >>> 18);\n        c2 = 0x80 | ((token >>> 12) & 0x3f);\n        c3 = 0x80 | ((token >>>  6) & 0x3f);\n        c4 = 0x80 | (token & 0x3f);\n        index = 0;\n      } else { // surrogate or invalid code point\n        if (this.errorMode.isFatal()) {\n          return Output.error(new OutputException(\"invalid code point: \" + token));\n        } else {\n          return this.write(this.errorMode.replacementChar);\n        }\n      }\n      do {\n        switch (index) {\n          case 0: output = output.write(c1); break;\n          case 1: output = output.write(c2); this.c2 = 0; break;\n          case 2: output = output.write(c3); this.c3 = 0; break;\n          case 3: output = output.write(c4); this.c4 = 0; break;\n          default: throw new Error(\"unreachable\");\n        }\n        Object.defineProperty(this, \"output\", {\n          value: output,\n          enumerable: true,\n          configurable: true,\n        });\n        index += 1;\n      } while (index < 4 && output.isCont());\n      if (index < 4) {\n        if (index < 3) {\n          if (index < 2) {\n            this.c2 = c2;\n          }\n          this.c3 = c3;\n        }\n        this.c4 = c4;\n      }\n      Object.defineProperty(this, \"output\", {\n        value: output,\n        enumerable: true,\n        configurable: true,\n      });\n      this.index = index;\n      return this;\n    } else if (typeof token === \"string\") {\n      Object.defineProperty(this, \"output\", {\n        value: this.output.write(token),\n        enumerable: true,\n        configurable: true,\n      });\n      return this;\n    } else {\n      throw new TypeError(\"\" + token);\n    }\n  }\n\n  flush(): Output<T> {\n    let output = this.output;\n    let index = this.index;\n    while (index < 4) {\n      if (output.isCont()) {\n        switch (index) {\n          case 1: output = output.write(this.c2); this.c2 = 0; break;\n          case 2: output = output.write(this.c3); this.c3 = 0; break;\n          case 3: output = output.write(this.c4); this.c4 = 0; break;\n          default: throw new Error(\"unreachable\");\n        }\n        index += 1;\n      } else {\n        return Output.error(new OutputException(\"unable to flush buffered code units\"));\n      }\n    }\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n      configurable: true,\n    });\n    this.index = index;\n    return this;\n  }\n\n  get settings(): OutputSettings {\n    return this.output.settings;\n  }\n\n  withSettings(settings: AnyOutputSettings): Output<T> {\n    Object.defineProperty(this, \"output\", {\n      value: this.output.withSettings(settings),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  bind(): T {\n    return this.output.bind();\n  }\n\n  clone(): Output<T> {\n    return new Utf8EncodedOutput(this.output.clone(), this.errorMode,\n                                 this.c2, this.c3, this.c4, this.index);\n  }\n\n  static create<T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T> {\n    if (errorMode === void 0) {\n      errorMode = UtfErrorMode.fatal();\n    }\n    return new Utf8EncodedOutput(output, errorMode, 0, 0, 0, 4);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {Unicode} from \"./Unicode\";\nimport type {UtfErrorMode} from \"./UtfErrorMode\";\nimport {Utf8DecodedOutput} from \"./Utf8DecodedOutput\";\nimport {Utf8EncodedOutput} from \"./Utf8EncodedOutput\";\n\n/**\n * UTF-8 [[Input]]/[[Output]] factory.\n */\nexport const Utf8 = {} as {\n  /**\n   * Returns the number of bytes in the UTF-8 encoding of the Unicode code\n   * point `c`, handling invalid code unit sequences according to the\n   * `errorMode` policy.  Returns the size of the\n   * [[UtfErrorMode.replacementChar]] for surrogates and invalid code points,\n   * if [[UtfErrorMode.isReplacement]] is `true`; otherwise returns `0` for\n   * surrogates and invalid code points.  Uses the two byte modified UTF-8\n   * encoding of the NUL character (`U+0000`), if [[UtfErrorMode.isNonZero]]\n   * is `true`.\n   */\n  sizeOf(c: number | undefined, errorMode?: UtfErrorMode): number;\n\n  /**\n   * Returns the number of bytes in the UTF-8 encoding of the Unicode code\n   * point `c`; returns the size of the Unicode replacement character (`U+FFFD`)\n   * for surrogates and invalid code points.\n   */\n  sizeOf(c: number | undefined): number;\n\n  /**\n   * Returns the number of bytes in the UTF-8 encoding the given `string`,\n   * handling invalid code unit sequences according to the `errorMode` policy.\n   */\n  sizeOf(string: string, errorMode?: UtfErrorMode): number;\n\n  /**\n   * Returns the number of bytes in the UTF-8 encoding the given `string`,\n   * assuming the Unicode replacement character (`U+FFFD`) replaces unpaired\n   * surrogates and invalid code points.\n   */\n  sizeOf(string: string): number;\n\n  /**\n   * Returns a new `Output` that accepts UTF-8 code unit sequences, and writes\n   * writes decoded Unicode code points to the composed `output`, handling\n   * invalid code unit sequences according to the `errorMode` policy.\n   */\n  decodedOutput<T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T>;\n\n  /**\n   * Returns a new `Output` that accepts Unicode code points, and writes\n   * encoded UTF-8 code unit sequences to the composed `output`, handling\n   * invalid code unit sequences according to the `errorMode` policy.\n   */\n  encodedOutput<T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T>;\n\n  /**\n   * Returns a new `Output` that accepts UTF-8 code unit sequences, and writes\n   * decoded Unicode code points to a growable `string`, handling invalid code\n   * unit sequences according to the [[UtfErrorMode.fatal]] policy.  The\n   * returned `Output` accepts an unbounded number of UTF-8 code units,\n   * remaining permanently in the _cont_ state, and [[Output.bind binds]] a\n   * `string` containing all decoded code points.\n   */\n  decodedString(): Output<string>;\n};\n\nUtf8.sizeOf = function (u: string | number | undefined, errorMode?: UtfErrorMode): number {\n  if (typeof u === \"number\" || u === void 0) {\n    if (typeof u === \"number\") {\n      if (u === 0x0000 && errorMode !== void 0 && errorMode.isNonZero()) { // Modified UTF-8\n        return 2; // U+0000 encoded as 0xC0, 0x80\n      } else if (u >= 0x0000 && u <= 0x007F) { // U+0000..U+007F\n        return 1;\n      } else if (u >= 0x0080 && u <= 0x07FF) { // U+0080..U+07FF\n        return 2;\n      } else if (u >= 0x0800 && u <= 0xFFFF || // U+0800..U+D7FF\n                 u >= 0xE000 && u <= 0xFFFF) { // U+E000..U+FFFF\n        return 3;\n      } else if (u >= 0x10000 && u <= 0x10FFFF) { // U+10000..U+10FFFF\n        return 4;\n      }\n    }\n    // surrogate or invalid code point\n    if (errorMode === void 0) {\n      return 3;\n    } else if (errorMode.isReplacement()) {\n      return Utf8.sizeOf(errorMode.replacementChar);\n    } else {\n      return 0;\n    }\n  } else if (typeof u === \"string\") {\n    let size = 0;\n    for (let i = 0, n = u.length; i < n; i = u.offsetByCodePoints(i, 1)) {\n      size += Utf8.sizeOf(u.charCodeAt(i), errorMode);\n    }\n    return size;\n  } else {\n    throw new TypeError(\"\" + u);\n  }\n};\n\nUtf8.decodedOutput = function <T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T> {\n  return Utf8DecodedOutput.create(output, errorMode);\n};\n\nUtf8.encodedOutput = function <T>(output: Output<T>, errorMode?: UtfErrorMode): Output<T> {\n  return Utf8EncodedOutput.create(output, errorMode);\n};\n\nUtf8.decodedString = function (): Output<string> {\n  return Utf8.decodedOutput(Unicode.stringOutput());\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Diagnostic} from \"../source/Diagnostic\";\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport {Parser} from \"../parser/Parser\";\nimport {Unicode} from \"../unicode/Unicode\";\n\n/** @hidden */\nexport class Base10NumberParser extends Parser<number> {\n  /** @hidden */\n  declare readonly sign: number;\n  /** @hidden */\n  declare readonly value: number;\n  /** @hidden */\n  declare readonly mode: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(sign: number = 1, value: number = 0, mode: number = 2, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"sign\", {\n      value: sign,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mode\", {\n      value: mode,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(input: Input): Parser<number> {\n    return Base10NumberParser.parse(input, this.sign, this.value, this.mode, this.step);\n  }\n\n  static parse(input: Input, sign: number = 1, value: number = 0,\n               mode: number = 2, step: number = 1): Parser<number> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 45/*'-'*/) {\n          input = input.step();\n          sign = -1;\n        } else if (c === 43/*'+'*/) {\n          input = input.step();\n          sign = 1;\n        }\n        step = 2;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"number\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 48/*'0'*/) {\n          input = input.step();\n          step = 4;\n        } else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          value = sign * (c - 48/*'0'*/);\n          step = 3;\n        } else if (mode > 0 && c === 46/*'.'*/) {\n          let output = Unicode.stringOutput();\n          if (sign < 0) {\n            output = output.write(45/*'-'*/);\n          }\n          return Base10DecimalParser.parse(input, output, mode);\n        } else {\n          return Parser.error(Diagnostic.expected(\"number\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"number\", input));\n      }\n    }\n    if (step === 3) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          const newValue = 10 * value + sign * (c - 48/*'0'*/);\n          if (-9007199254740991 <= newValue && newValue <= 9007199254740992) {\n            value = newValue;\n            input = input.step();\n          } else {\n            return Parser.error(Diagnostic.message(\"integer overflow\", input));\n          }\n        } else {\n          break;\n        }\n      }\n      if (input.isCont()) {\n        step = 4;\n      } else if (input.isDone()) {\n        return Parser.done(value);\n      }\n    }\n    if (step === 4) {\n      if (input.isCont()) {\n        c = input.head();\n        if (mode > 0 && c === 46/*'.'*/ || mode > 1 && (c === 69/*'E'*/ || c === 101/*'e'*/)) {\n          let output = Unicode.stringOutput();\n          if (sign < 0 && value === 0) {\n            output = output.write(45/*'-'*/).write(48/*'0'*/);\n          } else {\n            output = output.write(\"\" + value);\n          }\n          return Base10DecimalParser.parse(input, output, mode);\n        } else {\n          return Parser.done(value);\n        }\n      } else if (input.isDone()) {\n        return Parser.done(value);\n      }\n    }\n    return new Base10NumberParser(sign, value, mode, step);\n  }\n}\n\n/** @hidden */\nclass Base10DecimalParser extends Parser<number> {\n  /** @hidden */\n  declare readonly output: Output<string>;\n  /** @hidden */\n  declare readonly mode: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(output: Output<string>, mode: number = 2, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mode\", {\n      value: mode,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(input: Input): Parser<number> {\n    return Base10DecimalParser.parse(input, this.output, this.mode, this.step);\n  }\n\n  static parse(input: Input, output: Output<string>, mode: number = 2,\n               step: number = 1): Parser<number> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 46/*'.'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 2;\n        } else if (mode > 1 && (c === 69/*'E'*/ || c === 101/*'e'*/)) {\n          input = input.step();\n          output = output.write(c);\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\"decimal or exponent\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"decimal or exponent\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 3;\n        } else {\n          return Parser.error(Diagnostic.expected(\"digit\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"digit\", input));\n      }\n    }\n    if (step === 3) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n        } else {\n          break;\n        }\n      }\n      if (input.isCont()) {\n        if (mode > 1) {\n          step = 4;\n        } else {\n          return Parser.done(+output.bind());\n        }\n      } else if (input.isDone()) {\n        return Parser.done(+output.bind());\n      }\n    }\n    if (step === 4) {\n      c = input.head();\n      if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input = input.step();\n        output = output.write(c);\n        step = 5;\n      } else {\n        return Parser.done(+output.bind());\n      }\n    }\n    if (step === 5) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n          input = input.step();\n          output = output.write(c);\n        }\n        step = 6;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 6) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 7;\n        } else {\n          return Parser.error(Diagnostic.expected(\"digit\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"digit\", input));\n      }\n    }\n    if (step === 7) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n        } else {\n          break;\n        }\n      }\n      if (!input.isEmpty()) {\n        return Parser.done(+output.bind());\n      }\n    }\n    return new Base10DecimalParser(output, mode, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"../writer/WriterException\";\nimport {Writer} from \"../writer/Writer\";\nimport {Base10} from \"./Base10\";\n\n/** @hidden */\nexport class Base10IntegerWriter extends Writer {\n  /** @hidden */\n  declare readonly value: unknown;\n  /** @hidden */\n  declare readonly input: number;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(value: unknown, input: number, index: number = 0, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  pull(output: Output): Writer {\n    return Base10IntegerWriter.write(output, this.value, this.input, this.index, this.step);\n  }\n\n  static write(output: Output, value: unknown, input: number, index: number = 0,\n               step: number = 1): Writer {\n    if (step === 0) {\n      return Writer.end();\n    }\n    if (step === 1) {\n      if (input < 0) {\n        if (output.isCont()) {\n          output = output.write(45/*'-'*/);\n          step = 2;\n        }\n      } else {\n        step = 2;\n      }\n    }\n    if (step === 2) {\n      if (input > -10 && input < 10) {\n        if (output.isCont()) {\n          output = output.write(Base10.encodeDigit(Math.abs(input | 0)));\n          return Writer.done(value);\n        }\n      } else {\n        const digits = new Array<number>(19);\n        let x = input;\n        let i = 18;\n        while (x !== 0) {\n          digits[i] = Math.abs((x % 10) | 0);\n          x = (x / 10) | 0;\n          i -= 1;\n        }\n        i += 1 + index;\n        while (i < 19 && output.isCont()) {\n          output = output.write(Base10.encodeDigit(digits[i]!));\n          index += 1;\n          i += 1;\n        }\n        if (i === 19) {\n          return Writer.done(value);\n        }\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new Base10IntegerWriter(value, input, index, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Diagnostic} from \"../source/Diagnostic\";\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport {Parser} from \"../parser/Parser\";\nimport {Base16} from \"./Base16\";\n\n/** @hidden */\nexport class Base16Parser<O> extends Parser<O> {\n  /** @hidden */\n  declare readonly output: Output<O>;\n  /** @hidden */\n  declare readonly p: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(output: Output<O>, p: number = 0, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"p\", {\n      value: p,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(input: Input): Parser<O> {\n    return Base16Parser.parse(input, this.output.clone(), this.p, this.step);\n  }\n\n  static parse<O>(input: Input, output: Output<O>, p: number = 0, step: number = 1): Parser<O> {\n    let c = 0;\n    while (!input.isEmpty()) {\n      if (step === 1) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          p = c;\n          step = 2;\n        } else if (!input.isEmpty()) {\n          return Parser.done(output.bind());\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          Base16.writeQuantum(p, c, output);\n          p = 0;\n          step = 1;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"base16 digit\", input));\n        }\n      }\n    }\n    return new Base16Parser<O>(output, p, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"../writer/WriterException\";\nimport {Writer} from \"../writer/Writer\";\nimport type {Base16} from \"./Base16\";\n\n/** @hidden */\nexport class Base16Writer extends Writer {\n  /** @hidden */\n  declare readonly value: unknown;\n  /** @hidden */\n  declare readonly input: Uint8Array | null;\n  /** @hidden */\n  declare readonly base16: Base16;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(value: unknown, input: Uint8Array | null, base16: Base16,\n              index: number = 0, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"base16\", {\n      value: base16,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(value: unknown): Writer {\n    if (value instanceof Uint8Array) {\n      return new Base16Writer(void 0, value, this.base16);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  pull(output: Output): Writer {\n    if (this.input === null) {\n      throw new WriterException();\n    }\n    return Base16Writer.write(output, this.value, this.input, this.base16,\n                              this.index, this.step);\n  }\n\n  static write(output: Output, value: unknown, input: Uint8Array,\n               base16: Base16, index: number = 0, step: number = 1): Writer {\n    while (index < input.length) {\n      const x = input[index]!;\n      if (step === 1 && output.isCont()) {\n        output = output.write(base16.encodeDigit(x >>> 4));\n        step = 2;\n      }\n      if (step === 2 && output.isCont()) {\n        output = output.write(base16.encodeDigit(x & 0x0f));\n        index += 1;\n        step = 1;\n      }\n    }\n    if (index === input.length) {\n      return Writer.done(value);\n    } else if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new Base16Writer(value, input, base16, index, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"../writer/WriterException\";\nimport {Writer} from \"../writer/Writer\";\nimport type {Base16} from \"./Base16\";\n\n/** @hidden */\nexport class Base16IntegerWriter extends Writer {\n  /** @hidden */\n  declare readonly value: unknown;\n  /** @hidden */\n  declare readonly input: number;\n  /** @hidden */\n  declare readonly width: number;\n  /** @hidden */\n  declare readonly base16: Base16;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(value: unknown, input: number, width: number,\n              base16: Base16, index: number = 0, step: number = 3) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"width\", {\n      value: width,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"base16\", {\n      value: base16,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  pull(output: Output): Writer {\n    return Base16IntegerWriter.write(output, this.value, this.input, this.width,\n                                     this.base16, this.index, this.step);\n  }\n\n  static write(output: Output, value: unknown, input: number, width: number,\n               base16: Base16, index: number = 0, step: number = 3): Writer {\n    if (step <= 0) {\n      return Writer.end();\n    }\n    if (step === 1 && output.isCont()) {\n      output = output.write(48/*'0'*/);\n      step = 2;\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(120/*'x'*/);\n      step = 3;\n    }\n    if (step === 3) {\n      if (input >= 0 && input < 16 && width <= 1) {\n        if (output.isCont()) {\n          output = output.write(base16.encodeDigit(input));\n          return Writer.done(value);\n        }\n      } else {\n        let i = 15;\n        const digits = new Array<number>(16);\n        let x = input;\n        while (x !== 0 || i >= 16 - width) {\n          digits[i] = x & 0xf;\n          x >>>= 4;\n          i -= 1;\n        }\n        i += 1 + index;\n        while (i < 16 && output.isCont()) {\n          output = output.write(base16.encodeDigit(digits[i]!));\n          index += 1;\n          i += 1;\n        }\n        if (i === 16) {\n          return Writer.done(value);\n        }\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new Base16IntegerWriter(value, input, width, base16, index, step);\n  }\n\n  static writeLiteral(output: Output, value: unknown, input: number,\n                      width: number, base16: Base16): Writer {\n    return Base16IntegerWriter.write(output, value, input, width, base16, 0, 1);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport type {Parser} from \"../parser/Parser\";\nimport type {Writer} from \"../writer/Writer\";\nimport {Format} from \"../format/Format\";\nimport {Binary} from \"../binary/Binary\";\nimport {Unicode} from \"../unicode/Unicode\";\nimport {Base64Parser} from \"../\"; // forward import\nimport {Base64Writer} from \"../\"; // forward import\n\n/**\n * Base-64 (7-bit ASCII) encoding [[Parser]]/[[Writer]] factory.\n */\nexport abstract class Base64 {\n  /**\n   * The 64 character string, where the character at index `i` is the encoding\n   * of the base-64 digit `i`.\n   */\n  abstract readonly alphabet: string;\n\n  /**\n   * Returns `true` if this base-64 encoding requires padding.\n   */\n  abstract isPadded(): boolean;\n\n  /**\n   * Returns this `Base64` encoding with required padding, if `padded` is `true`.\n   */\n  abstract asPadded(padded: boolean): Base64;\n\n  /**\n   * Returns `true` if the Unicode code point `c` is a valid base-64 digit.\n   */\n  abstract isDigit(c: number): boolean;\n\n  /**\n   * Returns the 7-bit quantity represented by the base-64 digit `c`.\n   *\n   * @throws `Error` if `c` is not a valid base-64 digit.\n   */\n  decodeDigit(c: number): number {\n    if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) {\n      return c - 65/*'A'*/;\n    } else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) {\n      return c + (26 - 97/*'a'*/);\n    } else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n      return c + (52 - 48/*'0'*/);\n    } else if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n      return 62;\n    } else if (c === 47/*'/'*/ || c === 95/*'_'*/) {\n      return 63;\n    } else {\n      const message = Unicode.stringOutput();\n      message.write(\"Invalid base-64 digit: \");\n      Format.debugChar(c, message);\n      throw new Error(message.bind());\n    }\n  }\n\n  /**\n   * Returns the Unicode code point of the base-64 digit that encodes the given\n   * 7-bit quantity.\n   */\n  encodeDigit(b: number): number {\n    return this.alphabet.charCodeAt(b);\n  }\n\n  /**\n   * Decodes the base-64 digits `c1`, `c2`, `c3`, and `c4`, and writes the 8 to\n   * 24 bit quantity they represent to the given `output`.\n   */\n  writeQuantum(c1: number, c2: number, c3: number, c4: number, output: Output): void {\n    const x = this.decodeDigit(c1);\n    const y = this.decodeDigit(c2);\n    if (c3 !== 61/*'='*/) {\n      const z = this.decodeDigit(c3);\n      if (c4 !== 61/*'='*/) {\n        const w = this.decodeDigit(c4);\n        output = output.write((x << 2) | (y >>> 4));\n        output = output.write((y << 4) | (z >>> 2));\n        output = output.write((z << 6) | w);\n      } else {\n        output = output.write((x << 2) | (y >>> 4));\n        output = output.write((y << 4) | (z >>> 2));\n      }\n    } else {\n      if (c4 !== 61/*'='*/) {\n        throw new Error(\"Improperly padded base-64\");\n      }\n      output = output.write((x << 2) | (y >>> 4));\n    }\n  }\n\n  /**\n   * Returns a `Parser` that decodes base-64 (7-bit ASCII) encoded input, and\n   * writes the decoded bytes to `output`.\n   */\n  parser<O>(output: Output<O>): Parser<O> {\n    return new Base64Parser<O>(output, this);\n  }\n\n  /**\n   * Parses the base-64 (7-bit ASCII) encoded `input`, and writes the decoded\n   * bytes to `output`, returning a `Parser` continuation that knows how to\n   * parse any additional input.\n   */\n  parse<O>(input: Input, output: Output<O>): Parser<O> {\n    return Base64Parser.parse(input, output, this);\n  }\n\n  /**\n   * Parses the base-64 (7-bit ASCII) encoded `input`, and writes the decoded\n   * bytes to a growable array, returning a `Parser` continuation that knows\n   * how to parse any additional input.  The returned `Parser` [[Parser.bind\n   * binds]] a `Uint8Array` array containing all parsed base-64 data.\n   */\n  parseUint8Array(input: Input): Parser<Uint8Array> {\n    return Base64Parser.parse(input, Binary.output(), this);\n  }\n\n  /**\n   * Returns a `Writer` that, when fed an input `Uint8Array`, returns a\n   * continuation that writes the base-64 (7-bit ASCII) encoding of the input\n   * `Uint8Array`.\n   */\n  uint8ArrayWriter(): Writer<Uint8Array, unknown>;\n  /**\n   * Returns a `Writer` continuation that writes the base-64 (7-bit ASCII)\n   * encoding of the `input` byte array.\n   */\n  uint8ArrayWriter(input: Uint8Array): Writer<unknown, Uint8Array>;\n  uint8ArrayWriter(input?: Uint8Array): Writer {\n    if (input === void 0) {\n      return new Base64Writer(void 0, null, this);\n    } else {\n      return new Base64Writer(input, input, this);\n    }\n  }\n\n  /**\n   * Writes the base-64 (7-bit ASCII) encoding of the `input` `Uint8Array` to\n   * the `output`, returning a `Writer` continuation that knows how to write\n   * any remaining output that couldn't be immediately generated.\n   */\n  writeUint8Array(input: Uint8Array, output: Output): Writer {\n    return Base64Writer.write(output, void 0, input, this);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get standardPadded(): Base64 {\n    return new Base64Standard(true);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get standardUnpadded(): Base64 {\n    return new Base64Standard(false);\n  }\n\n  /**\n   * Returns the `Base64` encoding with the standard alphabet, and required\n   * padding, if `isPadding` is `true`.\n   */\n  static standard(padded: boolean = true): Base64 {\n    if (padded) {\n      return Base64.standardPadded;\n    } else {\n      return Base64.standardUnpadded;\n    }\n  }\n\n  /** @hidden */\n  @Lazy\n  static get urlPadded(): Base64 {\n    return new Base64Url(true);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get urlUnpadded(): Base64 {\n    return new Base64Url(false);\n  }\n\n  /**\n   * Returns the `Base64` encoding with the url and filename safe alphabet,\n   * and required padding, if `padded` is `true`.\n   */\n  static url(padded: boolean = true): Base64 {\n    if (padded) {\n      return Base64.urlPadded;\n    } else {\n      return Base64.urlUnpadded;\n    }\n  }\n}\n\n/** @hidden */\nclass Base64Standard extends Base64 {\n  /** @hidden */\n  declare readonly padded: boolean;\n\n  constructor(padded: boolean) {\n    super();\n    Object.defineProperty(this, \"padded\", {\n      value: padded,\n      enumerable: true,\n    });\n  }\n\n  get alphabet(): string {\n    return \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  }\n\n  isPadded(): boolean {\n    return this.padded;\n  }\n\n  asPadded(padded: boolean): Base64 {\n    if (padded === this.padded) {\n      return this;\n    } else {\n      return Base64.standard(padded);\n    }\n  }\n\n  isDigit(c: number): boolean {\n    return c >= 48/*'0'*/ && c <= 57/*'9'*/\n        || c >= 65/*'A'*/ && c <= 90/*'Z'*/\n        || c >= 97/*'a'*/ && c <= 122/*'z'*/\n        || c === 43/*'+'*/ || c === 47/*'/'*/;\n  }\n}\n\n/** @hidden */\nclass Base64Url extends Base64 {\n  /** @hidden */\n  declare readonly padded: boolean;\n\n  constructor(padded: boolean) {\n    super();\n    Object.defineProperty(this, \"padded\", {\n      value: padded,\n      enumerable: true,\n    });\n  }\n\n  get alphabet(): string {\n    return \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n  }\n\n  isPadded(): boolean {\n    return this.padded;\n  }\n\n  asPadded(padded: boolean): Base64 {\n    if (padded === this.padded) {\n      return this;\n    } else {\n      return Base64.url(padded);\n    }\n  }\n\n  isDigit(c: number): boolean {\n    return c >= 48/*'0'*/ && c <= 57/*'9'*/\n        || c >= 65/*'A'*/ && c <= 90/*'Z'*/\n        || c >= 97/*'a'*/ && c <= 122/*'z'*/\n        || c === 45/*'-'*/ || c === 95/*'_'*/;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Diagnostic} from \"../source/Diagnostic\";\nimport type {Input} from \"../input/Input\";\nimport type {Output} from \"../output/Output\";\nimport {Parser} from \"../parser/Parser\";\nimport type {Base64} from \"./Base64\";\n\n/** @hidden */\nexport class Base64Parser<O> extends Parser<O> {\n  /** @hidden */\n  declare readonly output: Output<O>;\n  /** @hidden */\n  declare readonly base64: Base64;\n  /** @hidden */\n  declare readonly p: number;\n  /** @hidden */\n  declare readonly q: number;\n  /** @hidden */\n  declare readonly r: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(output: Output<O>, base64: Base64, p: number = 0, q: number = 0,\n              r: number = 0, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"output\", {\n      value: output,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"base64\", {\n      value: base64,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"p\", {\n      value: p,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"q\", {\n      value: q,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"r\", {\n      value: r,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(input: Input): Parser<O> {\n    return Base64Parser.parse(input, this.output.clone(), this.base64,\n                              this.p, this.q, this.r, this.step);\n  }\n\n  static parse<O>(input: Input, output: Output<O>, base64: Base64, p: number = 0,\n                  q: number = 0, r: number = 0, step: number = 1): Parser<O> {\n    let c = 0;\n    while (!input.isEmpty()) {\n      if (step === 1) {\n        if (input.isCont() && (c = input.head(), base64.isDigit(c))) {\n          input = input.step();\n          p = c;\n          step = 2;\n        } else if (!input.isEmpty()) {\n          return Parser.done(output.bind());\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), base64.isDigit(c))) {\n          input = input.step();\n          q = c;\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"base64 digit\", input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont() && (c = input.head(), base64.isDigit(c) || c === 61/*'='*/)) {\n          input = input.step();\n          r = c;\n          if (c !== 61/*'='*/) {\n            step = 4;\n          } else {\n            step = 5;\n          }\n        } else if (!input.isEmpty()) {\n          if (!base64.isPadded()) {\n            base64.writeQuantum(p, q, 61/*'='*/, 61/*'='*/, output);\n            return Parser.done(output.bind());\n          } else {\n            return Parser.error(Diagnostic.unexpected(input));\n          }\n        }\n      }\n      if (step === 4) {\n        if (input.isCont() && (c = input.head(), base64.isDigit(c) || c === 61/*'='*/)) {\n          input = input.step();\n          base64.writeQuantum(p, q, r, c, output);\n          r = 0;\n          q = 0;\n          p = 0;\n          if (c !== 61/*'='*/) {\n            step = 1;\n          } else {\n            return Parser.done(output.bind());\n          }\n        } else if (!input.isEmpty()) {\n          if (!base64.isPadded()) {\n            base64.writeQuantum(p, q, r, 61/*'='*/, output);\n            return Parser.done(output.bind());\n          } else {\n            return Parser.error(Diagnostic.unexpected(input));\n          }\n        }\n      } else if (step === 5) {\n        if (input.isCont() && (c = input.head(), c === 61/*'='*/)) {\n          input = input.step();\n          base64.writeQuantum(p, q, r, c, output);\n          r = 0;\n          q = 0;\n          p = 0;\n          return Parser.done(output.bind());\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(61/*'='*/, input));\n        }\n      }\n    }\n    return new Base64Parser<O>(output, base64, p, q, r, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"../output/Output\";\nimport {WriterException} from \"../writer/WriterException\";\nimport {Writer} from \"../writer/Writer\";\nimport type {Base64} from \"./Base64\";\n\n/** @hidden */\nexport class Base64Writer extends Writer {\n  /** @hidden */\n  declare readonly value: unknown;\n  /** @hidden */\n  declare readonly input: Uint8Array | null;\n  /** @hidden */\n  declare readonly base64: Base64;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly step: number;\n\n  constructor(value: unknown, input: Uint8Array | null, base64: Base64,\n              index: number = 0, step: number = 1) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"base64\", {\n      value: base64,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"step\", {\n      value: step,\n      enumerable: true,\n    });\n  }\n\n  feed(value: unknown): Writer {\n    if (value instanceof Uint8Array) {\n      return new Base64Writer(null, value, this.base64);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  pull(output: Output): Writer {\n    if (this.input === null) {\n      throw new WriterException();\n    }\n    return Base64Writer.write(output, this.value, this.input, this.base64,\n                              this.index, this.step);\n  }\n\n  static write(output: Output, value: unknown, input: Uint8Array, base64: Base64,\n               index: number = 0, step: number = 1): Writer {\n    while (index + 2 < input.length && output.isCont()) {\n      const x = input[index]!;\n      const y = input[index + 1]!;\n      const z = input[index + 2]!;\n      if (step === 1 && output.isCont()) {\n        output = output.write(base64.encodeDigit(x >>> 2));\n        step = 2;\n      }\n      if (step === 2 && output.isCont()) {\n        output = output.write(base64.encodeDigit(((x << 4) | (y >>> 4)) & 0x3f));\n        step = 3;\n      }\n      if (step === 3 && output.isCont()) {\n        output = output.write(base64.encodeDigit(((y << 2) | (z >>> 6)) & 0x3f));\n        step = 4;\n      }\n      if (step === 4 && output.isCont()) {\n        output = output.write(base64.encodeDigit(z & 0x3f));\n        index += 3;\n        step = 1;\n      }\n    }\n    if (index + 1 < input.length && output.isCont()) {\n      const x = input[index]!;\n      const y = input[index + 1]!;\n      if (step === 1 && output.isCont()) {\n        output = output.write(base64.encodeDigit(x >>> 2));\n        step = 2;\n      }\n      if (step === 2 && output.isCont()) {\n        output = output.write(base64.encodeDigit(((x << 4) | (y >>> 4)) & 0x3f));\n        step = 3;\n      }\n      if (step === 3 && output.isCont()) {\n        output = output.write(base64.encodeDigit((y << 2) & 0x3f));\n        step = 4;\n      }\n      if (step === 4) {\n        if (!base64.isPadded()) {\n          index += 2;\n        } else if (output.isCont()) {\n          output = output.write(61/*'='*/);\n          index += 2;\n        }\n      }\n    } else if (index < input.length && output.isCont()) {\n      const x = input[index]!;\n      if (step === 1 && output.isCont()) {\n        output = output.write(base64.encodeDigit(x >>> 2));\n        step = 2;\n      }\n      if (step === 2 && output.isCont()) {\n        output = output.write(base64.encodeDigit((x << 4) & 0x3f));\n        step = 3;\n      }\n      if (step === 3) {\n        if (!base64.isPadded()) {\n          index += 1;\n        } else if (output.isCont()) {\n          output = output.write(61/*'='*/);\n          step = 4;\n        }\n      }\n      if (step === 4 && output.isCont()) {\n        output = output.write(61/*'='*/);\n        index += 1;\n      }\n    }\n    if (index === input.length) {\n      return Writer.done(value);\n    } else if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new Base64Writer(value, input, base64, index, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Equals, Equivalent} from \"@swim/util\";\nimport type {Domain} from \"./Domain\";\nimport type {Range} from \"./Range\";\n \nexport interface Mapping<X, Y> extends Equals, Equivalent {\n  (x: X): Y;\n\n  readonly domain: Domain<X>;\n\n  readonly range: Range<Y>;\n\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Mapping = function <X, Y>(domain: Domain<X>, range: Range<Y>): Mapping<X, Y> {\n  const mapping = function (x: X): Y {\n    return mapping.range(mapping.domain(x));\n  } as Mapping<X, Y>;\n  Object.setPrototypeOf(mapping, Mapping.prototype);\n  Object.defineProperty(mapping, \"domain\", {\n    value: domain,\n    enumerable: true,\n  });\n  Object.defineProperty(mapping, \"range\", {\n    value: range,\n    enumerable: true,\n  });\n  return mapping;\n} as {\n  <X, Y>(domain: Domain<X>, range: Range<Y>): Mapping<X, Y>;\n\n  /** @hidden */\n  prototype: Mapping<any, any>;\n};\n\nMapping.prototype = Object.create(Object.prototype);\n\nMapping.prototype.equivalentTo = function (that: unknown, epsilon?: number): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Mapping) {\n    return this.domain.equivalentTo(that.domain, epsilon)\n        && this.range.equivalentTo(that.range, epsilon);\n  }\n  return false;\n};\n\nMapping.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Mapping;\n};\n\nMapping.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Mapping) {\n    return that.canEqual(this)\n        && this.domain.equals(that.domain)\n        && this.range.equals(that.range);\n  }\n  return false;\n};\n\nMapping.prototype.toString = function (): string {\n  return \"Mapping(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"@swim/util\";\nimport {Mapping} from \"./Mapping\";\nimport {Range} from \"../\"; // forward import\nimport {LinearDomain} from \"../\"; // forward import\nimport type {LinearRange} from \"../scale/LinearRange\";\n\nexport type AnyDomain<X> = Domain<X> | readonly [X, X];\n\nexport interface Domain<X> extends Mapping<X, number> {\n  readonly 0: X;\n\n  readonly 1: X;\n\n  readonly domain: this;\n\n  readonly range: LinearRange;\n\n  contains(x: X): boolean;\n\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Domain = function <X>(x0: X, x1: X): Domain<X> {\n  const domain = function (x: X): number {\n    return Values.equal(x, domain[1]) ? 1 : 0;\n  } as Domain<X>;\n  Object.setPrototypeOf(domain, Domain.prototype);\n  Object.defineProperty(domain, 0, {\n    value: x0,\n    enumerable: true,\n  });\n  Object.defineProperty(domain, 1, {\n    value: x1,\n    enumerable: true,\n  });\n  return domain;\n} as {\n  <X>(x0: X, x1: X): Domain<X>;\n\n  /** @hidden */\n  prototype: Domain<any>;\n\n  readonly unit: LinearDomain;\n};\n\nDomain.prototype = Object.create(Mapping.prototype);\n\nObject.defineProperty(Domain.prototype, \"domain\", {\n  get<X>(this: Domain<X>): Domain<X> {\n    return this;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(Domain.prototype, \"range\", {\n  get(): LinearRange {\n    return Range.unit;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nDomain.prototype.contains = function (x: unknown): boolean {\n  return Values.compare(this[0], x) <= 0 && Values.compare(x, this[1]) <= 0;\n};\n\nDomain.prototype.equivalentTo = function (that: unknown, epsilon?: number): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Domain) {\n    return Values.equivalent(this[0], that[0], epsilon)\n        && Values.equivalent(this[1], that[1], epsilon);\n  }\n  return false;\n};\n\nDomain.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Domain;\n};\n\nDomain.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Domain) {\n    return that.canEqual(this)\n        && Values.equal(this[0], that[0])\n        && Values.equal(this[1], that[1]);\n  }\n  return false;\n};\n\nDomain.prototype.toString = function (): string {\n  return \"Domain(\" + this[0] + \", \" + this[1] + \")\";\n};\n\nObject.defineProperty(Domain, \"unit\", {\n  get(): Domain<number> {\n    const value = LinearDomain(0, 1);\n    Object.defineProperty(Domain, \"unit\", {\n      value: value,\n      enumerable: true,\n      configurable: true,\n    });\n    return value;\n  },\n  enumerable: true,\n  configurable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"@swim/util\";\nimport {Mapping} from \"./Mapping\";\nimport {Domain} from \"../\"; // forward import\nimport type {LinearDomain} from \"../scale/LinearDomain\";\nimport {LinearRange} from \"../\"; // forward import\n\nexport type AnyRange<Y> = Range<Y> | readonly [Y, Y];\n\nexport interface Range<Y> extends Mapping<number, Y> {\n  readonly 0: Y;\n\n  readonly 1: Y;\n\n  readonly domain: LinearDomain;\n\n  readonly range: this;\n\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Range = function <Y>(y0: Y, y1: Y): Range<Y> {\n  const range = function (u: number): Y {\n    return u < 1 ? range[0] : range[1];\n  } as Range<Y>;\n  Object.setPrototypeOf(range, Range.prototype);\n  Object.defineProperty(range, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(range, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return range;\n} as {\n  <Y>(y0: Y, y1: Y): Range<Y>;\n\n  /** @hidden */\n  prototype: Range<any>;\n\n  readonly unit: LinearRange;\n};\n\nRange.prototype = Object.create(Mapping.prototype);\n\nObject.defineProperty(Range.prototype, \"domain\", {\n  get(): LinearDomain {\n    return Domain.unit;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(Range.prototype, \"range\", {\n  get<Y>(this: Range<Y>): Range<Y> {\n    return this;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nRange.prototype.equivalentTo = function (that: unknown, epsilon?: number): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Range) {\n    return Values.equivalent(this[0], that[0], epsilon)\n        && Values.equivalent(this[1], that[1], epsilon);\n  }\n  return false;\n};\n\nRange.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Range;\n};\n\nRange.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Range) {\n    return that.canEqual(this)\n        && Values.equal(this[0], that[0])\n        && Values.equal(this[1], that[1]);\n  }\n  return false;\n};\n\nRange.prototype.toString = function (): string {\n  return \"Range(\" + this[0] + \", \" + this[1] + \")\";\n};\n\nObject.defineProperty(Range, \"unit\", {\n  get(): LinearRange {\n    const value = LinearRange(0, 1);\n    Object.defineProperty(Range, \"unit\", {\n      value: value,\n      enumerable: true,\n      configurable: true,\n    });\n    return value;\n  },\n  enumerable: true,\n  configurable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Interpolator} from \"./Interpolator\";\n\n/**\n * Type that can be [[Interpolator interpolated]] to values of type `T`.\n */\nexport interface Interpolate<T = unknown> {\n  /**\n   * Returns an [[Interpolator]] function that blends between `this` value and\n   * `that` value, if possible; otherwise returns `null` if `this` is unable to\n   * construct an interpolator to `that`.\n   */\n  interpolateTo(that: unknown): Interpolator<T> | null;\n}\n\nexport const Interpolate = function (x: unknown, y: unknown): Interpolator | null {\n  if (x !== void 0 && x !== null && typeof (x as Interpolate).interpolateTo === \"function\") {\n    return (x as Interpolate).interpolateTo(y);\n  } else {\n    return null;\n  }\n} as {\n  /**\n   * Returns `x.interpolateTo(y)`, if `x` conforms to the [[Interpolate]]\n   * interface; otherwise returns `null`.\n   */\n  <T>(x: Interpolate<T> | null | undefined, y: unknown): Interpolator<T> | null;\n  (x: unknown, y: unknown): Interpolator | null;\n\n  /**\n   * Returns `true` if `object` conforms to the [[Interpolate]] interface.\n   */\n  is(object: unknown): object is Interpolate;\n};\n\nInterpolate.is = function (object: unknown): object is Interpolate {\n  return object !== void 0 && object !== null\n      && typeof (object as Interpolate).interpolateTo === \"function\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"@swim/util\";\nimport {Range} from \"../mapping/Range\";\nimport {Interpolate} from \"./Interpolate\";\nimport {InterpolatorMap} from \"../\"; // forward import\nimport {IdentityInterpolator} from \"../\"; // forward import\nimport {StepInterpolator} from \"../\"; // forward import\nimport {NumberInterpolator} from \"../\"; // forward import\nimport {ArrayInterpolator} from \"../\"; // forward import\nimport {InterpolatorInterpolator} from \"../\"; // forward import\n\nexport interface Interpolator<Y = unknown> extends Range<Y>, Interpolate<Interpolator<Y>> {\n  readonly 0: Y;\n\n  readonly 1: Y;\n\n  map<FY>(transform: (y: Y) => FY): Interpolator<FY>;\n\n  interpolateTo(that: Interpolator<Y>): Interpolator<Interpolator<Y>>;\n  interpolateTo(that: unknown): Interpolator<Interpolator<Y>> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Interpolator = function (y0: unknown, y1: unknown): Interpolator {\n  let interpolator: Interpolator | null;\n  if (y0 === y1) {\n    interpolator = IdentityInterpolator(y0);\n  } else if (typeof y0 === \"number\" && typeof y1 === \"number\") {\n    interpolator = NumberInterpolator(y0, y1);\n  } else if (Array.isArray(y0) && Array.isArray(y1)) {\n    interpolator = ArrayInterpolator(y0, y1);\n  } else {\n    interpolator = Interpolate(y0, y1);\n    if (interpolator === null) {\n      interpolator = StepInterpolator(y0, y1);\n    }\n  }\n  return interpolator;\n} as {\n  <Y>(y0: Y, y1: Y): Interpolator<Y>;\n  (y0: unknown, y1: unknown): Interpolator;\n\n  /** @hidden */\n  prototype: Interpolator<any>;\n};\n\nInterpolator.prototype = Object.create(Range.prototype);\n\nInterpolator.prototype.map = function <Y, FY>(this: Interpolator<Y>, transform: (y: Y) => FY): Interpolator<FY> {\n  return InterpolatorMap(this, transform);\n};\n\nInterpolator.prototype.interpolateTo = function <Y>(this: Interpolator<Y>, that: unknown): Interpolator<Interpolator<Y>> | null {\n  if (that instanceof Interpolator) {\n    return InterpolatorInterpolator(this, that);\n  }\n  return null;\n} as typeof Interpolator.prototype.interpolateTo;\n\nInterpolator.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof this.constructor;\n};\n\nInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Interpolator) {\n    return that.canEqual(this)\n        && Values.equal(this[0], that[0])\n        && Values.equal(this[1], that[1]);\n  }\n  return false;\n};\n\nInterpolator.prototype.toString = function (): string {\n  return \"Interpolator(\" + this[0] + \", \" + this[1] + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport interface InterpolatorMap<Y, FY> extends Interpolator<FY> {\n  /** @hidden */\n  readonly interpolator: Interpolator<Y>;\n\n  /** @hidden */\n  readonly transform: (y: Y) => FY;\n\n  readonly 0: FY;\n\n  readonly 1: FY;\n\n  equals(that: unknown): boolean;\n}\n\nexport const InterpolatorMap = function <Y, FY>(interpolator: Interpolator<Y>,\n                                                transform: (y: Y) => FY): InterpolatorMap<Y, FY> {\n  const map = function (u: number): FY {\n    return map.transform(map.interpolator(u));\n  } as InterpolatorMap<Y, FY>;\n  Object.setPrototypeOf(map, InterpolatorMap.prototype);\n  Object.defineProperty(map, \"interpolator\", {\n    value: interpolator,\n    enumerable: true,\n  });\n  Object.defineProperty(map, \"transform\", {\n    value: transform,\n    enumerable: true,\n  });\n  return map;\n} as {\n  <Y, FY>(interpolator: Interpolator<Y>, transform: (y: Y) => FY): InterpolatorMap<Y, FY>;\n\n  /** @hidden */\n  prototype: InterpolatorMap<any, any>;\n};\n\nInterpolatorMap.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(InterpolatorMap.prototype, 0, {\n  get<Y, FY>(this: InterpolatorMap<Y, FY>): FY {\n    return this.transform(this.interpolator[0]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(InterpolatorMap.prototype, 1, {\n  get<Y, FY>(this: InterpolatorMap<Y, FY>): FY {\n    return this.transform(this.interpolator[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nInterpolatorMap.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof InterpolatorMap) {\n    return this.interpolator.equals(that.interpolator)\n        && this.transform === that.transform;\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport interface IdentityInterpolator<Y> extends Interpolator<Y> {\n  /** @hidden */\n  readonly value: Y;\n\n  readonly 0: Y;\n\n  readonly 1: Y;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const IdentityInterpolator = function <Y>(value: Y): IdentityInterpolator<Y> {\n  const interpolator = function (u: number): Y {\n    return interpolator.value;\n  } as IdentityInterpolator<Y>;\n  Object.setPrototypeOf(interpolator, IdentityInterpolator.prototype);\n  Object.defineProperty(interpolator, \"value\", {\n    value: value,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  <Y>(value: Y): IdentityInterpolator<Y>;\n\n  /** @hidden */\n  prototype: IdentityInterpolator<any>;\n};\n\nIdentityInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(IdentityInterpolator.prototype, 0, {\n  get<Y>(this: IdentityInterpolator<Y>): Y {\n    return this.value;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(IdentityInterpolator.prototype, 1, {\n  get<Y>(this: IdentityInterpolator<Y>): Y {\n    return this.value;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nIdentityInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof IdentityInterpolator) {\n    return this.value === that.value;\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport const StepInterpolator = function <Y>(y0: Y, y1: Y): Interpolator<Y> {\n  const interpolator = function (u: number): Y {\n    return u < 1 ? interpolator[0] : interpolator[1];\n  } as Interpolator<Y>;\n  Object.setPrototypeOf(interpolator, StepInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  <Y>(y0: Y, y1: Y): Interpolator<Y>;\n\n  /** @hidden */\n  prototype: Interpolator<any>;\n};\n\nStepInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport const NumberInterpolator = function (y0: number, y1: number): Interpolator<number> {\n  const interpolator = function (u: number): number {\n    const y0 = interpolator[0];\n    const y1 = interpolator[1];\n    return y0 + u * (y1 - y0);\n  } as Interpolator<number>;\n  Object.setPrototypeOf(interpolator, NumberInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: number, y1: number): Interpolator<number>;\n\n  /** @hidden */\n  prototype: Interpolator<number>;\n};\n\nNumberInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport interface ArrayInterpolator<Y> extends Interpolator<ReadonlyArray<Y>> {\n  /** @hidden */\n  readonly interpolators: ReadonlyArray<Interpolator<Y>>;\n\n  readonly 0: ReadonlyArray<Y>;\n\n  readonly 1: ReadonlyArray<Y>;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const ArrayInterpolator = function <Y>(y0: ReadonlyArray<Y>, y1: ReadonlyArray<Y>): ArrayInterpolator<Y> {\n  const interpolator = function (u: number): ReadonlyArray<Y> {\n    const interpolators = interpolator.interpolators;\n    const interpolatorCount = interpolators.length;\n    const array = new Array<Y>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      array[i] = interpolators[i]!(u);\n    }\n    return array;\n  } as ArrayInterpolator<Y>;\n  Object.setPrototypeOf(interpolator, ArrayInterpolator.prototype);\n  const interpolatorCount = Math.min(y0.length, y1.length);\n  const interpolators = new Array<Interpolator<Y>>(interpolatorCount);\n  for (let i = 0; i < interpolatorCount; i += 1) {\n    interpolators[i] = Interpolator(y0[i]!, y1[i]!);\n  }\n  Object.defineProperty(interpolator, \"interpolators\", {\n    value: interpolators,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  <Y>(y0: ReadonlyArray<Y>, y1: ReadonlyArray<Y>): ArrayInterpolator<Y>;\n\n  /** @hidden */\n  prototype: ArrayInterpolator<any>;\n};\n\nArrayInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(ArrayInterpolator.prototype, 0, {\n  get<Y>(this: ArrayInterpolator<Y>): ReadonlyArray<Y> {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const array = new Array<Y>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      array[i] = interpolators[i]![0];\n    }\n    return array;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ArrayInterpolator.prototype, 1, {\n  get<Y>(this: ArrayInterpolator<Y>): ReadonlyArray<Y> {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const array = new Array<Y>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      array[i] = interpolators[i]![1];\n    }\n    return array;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nArrayInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof ArrayInterpolator) {\n    const n = this.interpolators.length;\n    if (n === that.interpolators.length) {\n      for (let i = 0; i < n; i += 1) {\n        if (!this.interpolators[i]!.equals(that.interpolators[i]!)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"./Interpolator\";\n\n/** @hidden */\nexport const InterpolatorInterpolator = function <Y>(y0: Interpolator<Y>, y1: Interpolator<Y>): Interpolator<Interpolator<Y>> {\n  const interpolator = function (u: number): Interpolator<Y> {\n    if (u === 0) {\n      return interpolator[0];\n    } else if (u === 1) {\n      return interpolator[1];\n    } else {\n      return Interpolator(interpolator[0](u), interpolator[1](u));\n    }\n  } as Interpolator<Interpolator<Y>>;\n  Object.setPrototypeOf(interpolator, InterpolatorInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  <Y>(y0: Interpolator<Y>, y1: Interpolator<Y>): Interpolator<Interpolator<Y>>;\n\n  /** @hidden */\n  prototype: Interpolator<any>;\n};\n\nInterpolatorInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"@swim/util\";\nimport {Domain} from \"../mapping/Domain\";\nimport {Interpolator} from \"../interpolate/Interpolator\";\nimport {AnyEasing, Easing} from \"../\"; // forward import\nimport {Tweening} from \"../\"; // forward import\n\nexport type AnyTiming = Timing | TimingInit;\n\nexport interface TimingInit {\n  easing?: AnyEasing;\n  t0?: number;\n  t1?: number;\n  dt?: number;\n}\n\nexport interface Timing extends Domain<number> {\n  readonly 0: number;\n\n  readonly 1: number;\n\n  readonly duration: number;\n\n  readonly easing: Easing;\n\n  contains(t: number): boolean;\n\n  withDomain(t0: number, t1: number): Timing;\n\n  withDuration(dt: number): Timing;\n\n  overRange<Y>(range: Interpolator<Y>): Tweening<Y>;\n  overRange<Y>(y0: Y, y1: Y): Tweening<Y>;\n\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Timing = function (easing: Easing, t0: number, t1: number): Timing {\n  const timing = function (t: number): number {\n    const t0 = timing[0];\n    const t1 = timing[1];\n    return timing.easing(Math.min(Math.max(0, (t - t0) / (t1 - t0)), 1));\n  } as Timing;\n  Object.setPrototypeOf(timing, Timing.prototype);\n  Object.defineProperty(timing, \"easing\", {\n    value: easing,\n    enumerable: true,\n  });\n  Object.defineProperty(timing, 0, {\n    value: t0,\n    enumerable: true,\n  });\n  Object.defineProperty(timing, 1, {\n    value: t1,\n    enumerable: true,\n  });\n  return timing;\n} as {\n  (easing: Easing, t0: number, t1: number): Timing;\n\n  /** @hidden */\n  prototype: Timing;\n\n  fromInit(init: TimingInit): Timing;\n\n  fromAny(value: AnyTiming): Timing;\n  fromAny(value: AnyTiming | boolean | null | undefined): Timing | boolean;\n};\n\nTiming.prototype = Object.create(Domain.prototype);\n\nObject.defineProperty(Timing.prototype, \"duration\", {\n  get(this: Timing): number {\n    return this[1] - this[0];\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nTiming.prototype.contains = function (t: number): boolean {\n  return this[0] <= t && t <= this[1];\n};\n\nTiming.prototype.withDomain = function (t0: number, t1: number): Timing {\n  return Timing(this.easing, t0, t1);\n};\n\nTiming.prototype.withDuration = function (dt: number): Timing {\n  const t0 = this[0];\n  return Timing(this.easing, t0, t0 + dt);\n};\n\nTiming.prototype.overRange = function <Y>(this: Timing, y0: Interpolator<Y> | Y, y1: Y): Tweening<Y> {\n  let range: Interpolator<Y>;\n  if (arguments.length === 1) {\n    range = y0 as Interpolator<Y>;\n  } else {\n    range = Interpolator(y0 as Y, y1);\n  }\n  return Tweening(this, range);\n} as typeof Timing.prototype.overRange;\n\nTiming.prototype.equivalentTo = function (that: unknown, epsilon?: number): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Timing) {\n    return this.easing.equivalentTo(that.easing, epsilon)\n        && Values.equivalent(this[0], that[0], epsilon)\n        && Values.equivalent(this[1], that[1], epsilon);\n  }\n  return false;\n};\n\nTiming.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Timing;\n};\n\nTiming.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Timing) {\n    return that.canEqual(this)\n        && this.easing.equals(that.easing)\n        && Values.equal(this[0], that[0])\n        && Values.equal(this[1], that[1]);\n  }\n  return false;\n};\n\nTiming.prototype.toString = function (): string {\n  return \"Timing(\" + this.easing + \", \" + this[0] + \", \" + this[1] + \")\";\n};\n\nTiming.fromInit = function (init: TimingInit): Timing {\n  let easing = init.easing;\n  if (easing === void 0) {\n    easing = Easing.linear;\n  } else if (typeof easing === \"string\") {\n    easing = Easing(easing);\n  }\n  let t0 = init.t0;\n  if (t0 === void 0) {\n    t0 = 0;\n  }\n  let t1 = init.t1;\n  if (t1 === void 0) {\n    const dt = init.dt;\n    if (dt !== void 0) {\n      t1 = t0 + dt;\n    } else {\n      t1 = t0;\n    }\n  }\n  return Timing(easing, t0, t1);\n};\n\nTiming.fromAny = function (value: AnyTiming | boolean | null | undefined): Timing | boolean {\n  if (value === void 0 || value === null) {\n    return false;\n  } else if (value instanceof Timing || typeof value === \"boolean\") {\n    return value;\n  } else if (typeof value === \"object\") {\n    return Timing.fromInit(value);\n  }\n  throw new TypeError(\"\" + value);\n} as typeof Timing.fromAny;\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Timing} from \"./Timing\";\n\nexport type AnyEasing = Easing | EasingType;\n\nexport type EasingType = \"linear\" | \"quad-in\" | \"quad-out\" | \"quad-in-out\"\n                       | \"cubic-in\" | \"cubic-out\" | \"cubic-in-out\"\n                       | \"quart-in\" | \"quart-out\" | \"quart-in-out\"\n                       | \"expo-in\" | \"expo-out\" | \"expo-in-out\"\n                       | \"circ-in\" | \"circ-out\" | \"circ-in-out\"\n                       | \"back-in\" | \"back-out\" | \"back-in-out\"\n                       | \"elastic-in\" | \"elastic-out\" | \"elastic-in-out\"\n                       | \"bounce-in\" | \"bounce-out\" | \"bounce-in-out\";\n\nexport interface Easing extends Timing {\n  readonly type: string;\n\n  readonly 0: 0;\n\n  readonly 1: 1;\n\n  readonly easing: this;\n\n  equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Easing = function (type: string): Easing {\n  switch (type) {\n    case \"linear\": return Easing.linear;\n    case \"quad-in\": return Easing.quadIn;\n    case \"quad-out\": return Easing.quadOut;\n    case \"quad-in-out\": return Easing.quadInOut;\n    case \"cubic-in\": return Easing.cubicIn;\n    case \"cubic-out\": return Easing.cubicOut;\n    case \"cubic-in-out\": return Easing.cubicInOut;\n    case \"quart-in\": return Easing.quartIn;\n    case \"quart-out\": return Easing.quartOut;\n    case \"quart-in-out\": return Easing.quartInOut;\n    case \"expo-in\": return Easing.expoIn;\n    case \"expo-out\": return Easing.expoOut;\n    case \"expo-in-out\": return Easing.expoInOut;\n    case \"circ-in\": return Easing.circIn;\n    case \"circ-out\": return Easing.circOut;\n    case \"circ-in-out\": return Easing.circInOut;\n    case \"back-in\": return Easing.backIn;\n    case \"back-out\": return Easing.backOut;\n    case \"back-in-out\": return Easing.backInOut;\n    case \"elastic-in\": return Easing.elasticIn;\n    case \"elastic-out\": return Easing.elasticOut;\n    case \"elastic-in-out\": return Easing.elasticInOut;\n    case \"bounce-in\": return Easing.bounceIn;\n    case \"bounce-out\": return Easing.bounceOut;\n    case \"bounce-in-out\": return Easing.bounceInOut;\n    default: throw new Error(\"unknown easing: \" + type);\n  }\n} as {\n  (type: string): Easing;\n\n  /** @hidden */\n  prototype: Easing;\n\n  linear: Easing;\n  quadIn: Easing;\n  quadOut: Easing;\n  quadInOut: Easing;\n  cubicIn: Easing;\n  cubicOut: Easing;\n  cubicInOut: Easing;\n  quartIn: Easing;\n  quartOut: Easing;\n  quartInOut: Easing;\n  expoIn: Easing;\n  expoOut: Easing;\n  expoInOut: Easing;\n  circIn: Easing;\n  circOut: Easing;\n  circInOut: Easing;\n  backIn: Easing;\n  backOut: Easing;\n  backInOut: Easing;\n  elasticIn: Easing;\n  elasticOut: Easing;\n  elasticInOut: Easing;\n  bounceIn: Easing;\n  bounceOut: Easing;\n  bounceInOut: Easing;\n\n  fromAny(value: AnyEasing): Easing;\n};\n\nEasing.prototype = Object.create(Timing.prototype);\n\nObject.defineProperty(Easing.prototype, 0, {\n  value: 0,\n  enumerable: true,\n});\n\nObject.defineProperty(Easing.prototype, 1, {\n  value: 1,\n  enumerable: true,\n});\n\nObject.defineProperty(Easing.prototype, \"easing\", {\n  get(this: Easing): Easing {\n    return this;\n  },\n  enumerable: true,\n});\n\nEasing.prototype.equivalentTo = function (that: unknown, epsilon?: number): boolean {\n  return this === that;\n};\n\nEasing.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Easing;\n};\n\nEasing.prototype.equals = function (that: unknown): boolean {\n  return this === that;\n};\n\nEasing.prototype.toString = function (): string {\n  return \"Easing(\\\"\" + this.type + \"\\\")\";\n};\n\nEasing.fromAny = function (value: AnyEasing): Easing {\n  if (value instanceof Easing) {\n    return value;\n  } else if (typeof value === \"string\") {\n    return Easing(value);\n  }\n  throw new TypeError(\"\" + value);\n};\n\nEasing.linear = function (u: number): number {\n  return u;\n} as unknown as Easing;\nObject.setPrototypeOf(Easing.linear, Easing.prototype);\nObject.defineProperty(Easing.linear, \"type\", {\n  value: \"linear\",\n  enumerable: true,\n});\n\nEasing.quadIn = function (u: number): number {\n  return u * u;\n} as Easing;\nObject.setPrototypeOf(Easing.quadIn, Easing.prototype);\nObject.defineProperty(Easing.quadIn, \"type\", {\n  value: \"quad-in\",\n  enumerable: true,\n});\n\nEasing.quadOut = function (u: number): number {\n  return u * (2 - u);\n} as Easing;\nObject.setPrototypeOf(Easing.quadOut, Easing.prototype);\nObject.defineProperty(Easing.quadOut, \"type\", {\n  value: \"quad-out\",\n  enumerable: true,\n});\n\nEasing.quadInOut = function (u: number): number {\n  u *= 2;\n  if (u <= 1) {\n    u = u * u;\n  } else {\n    u -= 1;\n    u = u * (2 - u);\n    u += 1;\n  }\n  u /= 2;\n  return u;\n} as Easing;\nObject.setPrototypeOf(Easing.quadInOut, Easing.prototype);\nObject.defineProperty(Easing.quadInOut, \"type\", {\n  value: \"quad-in-out\",\n  enumerable: true,\n});\n\nEasing.cubicIn = function (u: number): number {\n  return u * u * u;\n} as Easing;\nObject.setPrototypeOf(Easing.cubicIn, Easing.prototype);\nObject.defineProperty(Easing.cubicIn, \"type\", {\n  value: \"cubic-in\",\n  enumerable: true,\n});\n\nEasing.cubicOut = function (u: number): number {\n  u -= 1;\n  u = u * u * u;\n  u += 1;\n  return u;\n} as Easing;\nObject.setPrototypeOf(Easing.cubicOut, Easing.prototype);\nObject.defineProperty(Easing.cubicOut, \"type\", {\n  value: \"cubic-out\",\n  enumerable: true,\n});\n\nEasing.cubicInOut = function (u: number): number {\n  u *= 2;\n  if (u <= 1) {\n    u = u * u * u;\n  } else {\n    u -= 2;\n    u = u * u * u;\n    u += 2;\n  }\n  u /= 2;\n  return u;\n} as Easing;\nObject.setPrototypeOf(Easing.cubicInOut, Easing.prototype);\nObject.defineProperty(Easing.cubicInOut, \"type\", {\n  value: \"cubic-in-out\",\n  enumerable: true,\n});\n\nEasing.quartIn = function (u: number): number {\n  return u * u * u * u;\n} as Easing;\nObject.setPrototypeOf(Easing.quartIn, Easing.prototype);\nObject.defineProperty(Easing.quartIn, \"type\", {\n  value: \"quart-in\",\n  enumerable: true,\n});\n\nEasing.quartOut = function (u: number): number {\n  u -= 1;\n  return 1 - u * u * u * u;\n} as Easing;\nObject.setPrototypeOf(Easing.quartOut, Easing.prototype);\nObject.defineProperty(Easing.quartOut, \"type\", {\n  value: \"quart-out\",\n  enumerable: true,\n});\n\nEasing.quartInOut = function (u: number): number {\n  const v = u - 1;\n  return u < 0.5 ? 8 * u * u * u * u : 1 - 8 * v * v * v * v;\n} as Easing;\nObject.setPrototypeOf(Easing.quartInOut, Easing.prototype);\nObject.defineProperty(Easing.quartInOut, \"type\", {\n  value: \"quart-in-out\",\n  enumerable: true,\n});\n\nEasing.expoIn = function (u: number): number {\n  if (u === 0) {\n    return 0;\n  }\n  return Math.pow(2, 10 * (u - 1) );\n} as Easing;\nObject.setPrototypeOf(Easing.expoIn, Easing.prototype);\nObject.defineProperty(Easing.expoIn, \"type\", {\n  value: \"expo-in\",\n  enumerable: true,\n});\n\nEasing.expoOut = function (u: number): number {\n  if (u === 1) {\n    return 1;\n  }\n  return (-Math.pow(2, -10 * u) + 1);\n} as Easing;\nObject.setPrototypeOf(Easing.expoOut, Easing.prototype);\nObject.defineProperty(Easing.expoOut, \"type\", {\n  value: \"expo-out\",\n  enumerable: true,\n});\n\nEasing.expoInOut = function (u: number): number {\n  if (u === 1 || u === 0) {\n    return u;\n  }\n  u *= 2;\n  if (u < 1) {\n    return 0.5 * Math.pow(2, 10 * (u - 1));\n  }\n  return 0.5 * (-Math.pow(2, -10 * (u - 1)) + 2);\n} as Easing;\nObject.setPrototypeOf(Easing.expoInOut, Easing.prototype);\nObject.defineProperty(Easing.expoInOut, \"type\", {\n  value: \"expo-in-out\",\n  enumerable: true,\n});\n\nEasing.circIn = function (u: number): number {\n  return -1 * (Math.sqrt(1 - (u / 1) * u) - 1);\n} as Easing;\nObject.setPrototypeOf(Easing.circIn, Easing.prototype);\nObject.defineProperty(Easing.circIn, \"type\", {\n  value: \"circ-in\",\n  enumerable: true,\n});\n\nEasing.circOut = function (u: number): number {\n  u -= 1;\n  return Math.sqrt(1 - u * u);\n} as Easing;\nObject.setPrototypeOf(Easing.circOut, Easing.prototype);\nObject.defineProperty(Easing.circOut, \"type\", {\n  value: \"circ-out\",\n  enumerable: true,\n});\n\nEasing.circInOut = function (u: number): number {\n  u *= 2;\n  if (u < 1) {\n    return -0.5 * (Math.sqrt(1 - u * u) - 1);\n  }\n  const st = u - 2;\n  return 0.5 * (Math.sqrt(1 - st * st) + 1);\n} as Easing;\nObject.setPrototypeOf(Easing.circInOut, Easing.prototype);\nObject.defineProperty(Easing.circInOut, \"type\", {\n  value: \"circ-in-ou\",\n  enumerable: true,\n});\n\nEasing.backIn = function (u: number): number {\n  const m = 1.70158; // m - Magnitude\n  return u * u * (( m + 1) * u - m);\n} as Easing;\nObject.setPrototypeOf(Easing.backIn, Easing.prototype);\nObject.defineProperty(Easing.backIn, \"type\", {\n  value: \"back-in\",\n  enumerable: true,\n});\n\nEasing.backOut = function (u: number): number {\n  const m = 1.70158;\n  const st = (u / 1) - 1;\n  return (st * st * ((m + 1) * m + m)) + 1;\n} as Easing;\nObject.setPrototypeOf(Easing.backOut, Easing.prototype);\nObject.defineProperty(Easing.backOut, \"type\", {\n  value: \"back-out\",\n  enumerable: true,\n});\n\nEasing.backInOut = function (u: number): number {\n  const m = 1.70158;\n  const s = m * 1.525;\n  if ((u *= 2) < 1) {\n    return 0.5 * u * u * (((s + 1) * u) - s);\n  }\n  const st = u - 2;\n  return 0.5 * (st * st * ((s + 1) * st + s) + 2);\n} as Easing;\nObject.setPrototypeOf(Easing.backInOut, Easing.prototype);\nObject.defineProperty(Easing.backInOut, \"type\", {\n  value: \"back-in-out\",\n  enumerable: true,\n});\n\nEasing.elasticIn = function (u: number): number {\n  if (u === 0 || u === 1) {\n    return u;\n  }\n  const m = 0.7;\n  const st = (u / 1) - 1;\n  const s = (1 - m) / 2 * Math.PI * Math.asin(1);\n  return -(Math.pow(2, 10 * st) * Math.sin((st - s) * 2 * Math.PI / (1 - m)));\n} as Easing;\nObject.setPrototypeOf(Easing.elasticIn, Easing.prototype);\nObject.defineProperty(Easing.elasticIn, \"type\", {\n  value: \"elastic-in\",\n  enumerable: true,\n});\n\nEasing.elasticOut = function (u: number): number {\n  if (u === 0 || u === 1) {\n    return u;\n  }\n  const m = 0.7;\n  const s = (1 -  m) / (2 * Math.PI) * Math.asin(1);\n  u *= 2;\n  return (Math.pow(2, -10 * u) * Math.sin((u - s) * 2 * Math.PI / (1 - m))) + 1;\n} as Easing;\nObject.setPrototypeOf(Easing.elasticOut, Easing.prototype);\nObject.defineProperty(Easing.elasticOut, \"type\", {\n  value: \"elastic-out\",\n  enumerable: true,\n});\n\nEasing.elasticInOut = function (u: number): number {\n  if (u === 0 || u === 1) {\n    return u;\n  }\n  const m = 0.65;\n  const s = (1 - m) / (2 * Math.PI) * Math.asin(1);\n  const st = u * 2;\n  const st1 = st - 1;\n  if(st < 1) {\n    return -0.5 * (Math.pow(2, 10 * st1) * Math.sin((st1 - s) * 2 * Math.PI / (1 - m)));\n  }\n  return (Math.pow(2, -10 * st1) * Math.sin((st1 - s) * 2 * Math.PI / (1 - m)) * 0.5) + 1;\n} as Easing;\nObject.setPrototypeOf(Easing.elasticInOut, Easing.prototype);\nObject.defineProperty(Easing.elasticInOut, \"type\", {\n  value: \"elastic-in-out\",\n  enumerable: true,\n});\n\nEasing.bounceIn = function (u: number): number {\n  const p = 7.5625;\n  if ((u = 1 - u) < 1 / 2.75) {\n    return 1 - (p * u * u);\n  } else if (u < 2 / 2.75) {\n    return 1 - (p * (u -= 1.5 / 2.75) * u + 0.75);\n  } else if (u < 2.5 / 2.75) {\n    return 1 - (p * (u -= 2.25 / 2.75) * u + 0.9375);\n  }\n  return 1 - (p * (u -= 2.625 / 2.75) * u + 0.984375);\n} as Easing;\nObject.setPrototypeOf(Easing.bounceIn, Easing.prototype);\nObject.defineProperty(Easing.bounceIn, \"type\", {\n  value: \"bounce-in\",\n  enumerable: true,\n});\n\nEasing.bounceOut = function (u: number): number {\n  const p = 7.5625;\n  if (u < 1 / 2.75) {\n    return p * u * u;\n  } else if (u < 2 / 2.75) {\n    return p * (u -= 1.5 / 2.75) * u + 0.75;\n  } else if (u < 2.5 / 2.75) {\n    return p * (u -= 2.25 / 2.75) * u + 0.9375;\n  }\n  return p * (u -= 2.625 / 2.75) * u + 0.984375;\n} as Easing;\nObject.setPrototypeOf(Easing.bounceOut, Easing.prototype);\nObject.defineProperty(Easing.bounceOut, \"type\", {\n  value: \"bounce-out\",\n  enumerable: true,\n});\n\nEasing.bounceInOut = function (u: number): number {\n  const invert = u < 0.5;\n  u = invert ? 1 - (u * 2) : (u * 2) - 1;\n  const p = 7.5625;\n  if (u < 1 / 2.75) {\n    u = p * u * u;\n  } else if (u < 2 / 2.75) {\n    u = p * (u -= 1.5 / 2.75) * u + 0.75;\n  } else if (u < 2.5 / 2.75) {\n    u = p * (u -= 2.25 / 2.75) * u + 0.9375;\n  } else {\n    u = p * (u -= 2.625 / 2.75) * u + 0.984375;\n  }\n  return invert ? (1 - u) * 0.5 : u * 0.5 + 0.5;\n} as Easing;\nObject.setPrototypeOf(Easing.bounceInOut, Easing.prototype);\nObject.defineProperty(Easing.bounceInOut, \"type\", {\n  value: \"bounce-in-out\",\n  enumerable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Mapping} from \"../mapping/Mapping\";\nimport type {Interpolator} from \"../interpolate/Interpolator\";\nimport type {Timing} from \"./Timing\";\n\nexport interface Tweening<Y> extends Mapping<number, Y> {\n  readonly domain: Timing;\n\n  readonly range: Interpolator<Y>;\n\n  withDomain(t0: number, t1: number): Tweening<Y>;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Tweening = function <Y>(domain: Timing, range: Interpolator<Y>): Tweening<Y> {\n  const tweening = function (u: number): Y {\n    return tweening.range(tweening.domain(u));\n  } as Tweening<Y>;\n  Object.setPrototypeOf(tweening, Tweening.prototype);\n  Object.defineProperty(tweening, \"domain\", {\n    value: domain,\n    enumerable: true,\n  });\n  Object.defineProperty(tweening, \"range\", {\n    value: range,\n    enumerable: true,\n  });\n  return tweening;\n} as {\n  <Y>(domain: Timing, range: Interpolator<Y>): Tweening<Y>\n\n  /** @hidden */\n  prototype: Tweening<any>;\n};\n\nTweening.prototype = Object.create(Mapping.prototype);\n\nTweening.prototype.withDomain = function <Y>(this: Tweening<Y>, t0: number, t1: number): Tweening<Y> {\n  return this.domain.withDomain(t0, t1).overRange(this.range);\n};\n\nTweening.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Tweening;\n};\n\nTweening.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Tweening) {\n    return this.domain.equals(that.domain) && this.range.equals(that.range);\n  }\n  return false;\n};\n\nTweening.prototype.toString = function (): string {\n  return \"Tweening(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Domain} from \"../mapping/Domain\";\nimport type {Interpolate} from \"../interpolate/Interpolate\";\nimport type {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearDomainInterpolator} from \"../\"; // forward import\nimport {LinearRange} from \"../\"; // forward import\n\nexport interface LinearDomain extends Domain<number>, Interpolate<LinearDomain> {\n  readonly 0: number;\n\n  readonly 1: number;\n\n  readonly inverse: LinearRange;\n\n  contains(x: number): boolean;\n\n  interpolateTo(that: LinearDomain): Interpolator<LinearDomain>;\n  interpolateTo(that: unknown): Interpolator<LinearDomain> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const LinearDomain = function (x0: number, x1: number): LinearDomain {\n  const domain = function (x: number): number {\n    const x0 = domain[0];\n    const x1 = domain[1];\n    const dx = x1 - x0;\n    return dx !== 0 ? (x - x0) / dx : 0;\n  } as LinearDomain;\n  Object.setPrototypeOf(domain, LinearDomain.prototype);\n  Object.defineProperty(domain, 0, {\n    value: x0,\n    enumerable: true,\n  });\n  Object.defineProperty(domain, 1, {\n    value: x1,\n    enumerable: true,\n  });\n  return domain;\n} as {\n  (x0: number, x1: number): LinearDomain;\n\n  /** @hidden */\n  prototype: LinearDomain;\n};\n\nLinearDomain.prototype = Object.create(Domain.prototype);\n\nObject.defineProperty(LinearDomain.prototype, \"inverse\", {\n  get(this: LinearDomain): LinearRange {\n    return LinearRange(this[0], this[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nLinearDomain.prototype.contains = function (x: number): boolean {\n  return this[0] <= x && x <= this[1];\n};\n\nLinearDomain.prototype.interpolateTo = function (this: LinearDomain, that: unknown): Interpolator<LinearDomain> | null {\n  if (that instanceof LinearDomain) {\n    return LinearDomainInterpolator(this, that);\n  }\n  return null;\n} as typeof LinearDomain.prototype.interpolateTo;\n\nLinearDomain.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof LinearDomain;\n};\n\nLinearDomain.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof LinearDomain) {\n    return that.canEqual(this) && this[0] === that[0] && this[1] === that[1];\n  }\n  return false;\n};\n\nLinearDomain.prototype.toString = function (): string {\n  return \"LinearDomain(\" + this[0] + \", \" + this[1] + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearDomain} from \"./LinearDomain\";\n\n/** @hidden */\nexport const LinearDomainInterpolator = function (x0: LinearDomain, x1: LinearDomain): Interpolator<LinearDomain> {\n  const interpolator = function (u: number): LinearDomain {\n    const x0 = interpolator[0];\n    const x00 = x0[0];\n    const x01 = x0[1];\n    const x1 = interpolator[1];\n    const x10 = x1[0];\n    const x11 = x1[1];\n    return LinearDomain(x00 + u * (x10 - x00), x01 + u * (x11 - x01));\n  } as Interpolator<LinearDomain>;\n  Object.setPrototypeOf(interpolator, LinearDomainInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: x0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: x1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (x0: LinearDomain, x1: LinearDomain): Interpolator<LinearDomain>;\n\n  /** @hidden */\n  prototype: Interpolator<LinearDomain>;\n};\n\nLinearDomainInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Range} from \"../mapping/Range\";\nimport type {Interpolate} from \"../interpolate/Interpolate\";\nimport type {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearDomain} from \"../\"; // forward import\nimport {LinearRangeInterpolator} from \"../\"; // forward import\n\nexport interface LinearRange extends Range<number>, Interpolate<LinearRange> {\n  readonly 0: number;\n\n  readonly 1: number;\n\n  readonly inverse: LinearDomain;\n\n  interpolateTo(that: LinearRange): Interpolator<LinearRange>;\n  interpolateTo(that: unknown): Interpolator<LinearRange> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const LinearRange = function (y0: number, y1: number): LinearRange {\n  const range = function (u: number): number {\n    const y0 = range[0];\n    const y1 = range[1];\n    return y0 + u * (y1 - y0);\n  } as LinearRange;\n  Object.setPrototypeOf(range, LinearRange.prototype);\n  Object.defineProperty(range, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(range, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return range;\n} as {\n  (y0: number, y1: number): LinearRange;\n\n  /** @hidden */\n  prototype: LinearRange;\n};\n\nLinearRange.prototype = Object.create(Range.prototype);\n\nObject.defineProperty(LinearRange.prototype, \"inverse\", {\n  get(this: LinearRange): LinearDomain {\n    return LinearDomain(this[0], this[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nLinearRange.prototype.interpolateTo = function (this: LinearRange, that: unknown): Interpolator<LinearRange> | null {\n  if (that instanceof LinearRange) {\n    return LinearRangeInterpolator(this, that);\n  }\n  return null;\n} as typeof LinearRange.prototype.interpolateTo;\n\nLinearRange.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof LinearRange;\n};\n\nLinearRange.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof LinearRange) {\n    return that.canEqual(this) && this[0] === that[0] && this[1] === that[1];\n  }\n  return false;\n};\n\nLinearRange.prototype.toString = function (): string {\n  return \"LinearRange(\" + this[0] + \", \" + this[1] + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearRange} from \"./LinearRange\";\n\n/** @hidden */\nexport const LinearRangeInterpolator = function (y0: LinearRange, y1: LinearRange): Interpolator<LinearRange> {\n  const interpolator = function (u: number): LinearRange {\n    const y0 = interpolator[0];\n    const y00 = y0[0];\n    const y01 = y0[1];\n    const y1 = interpolator[1];\n    const y10 = y1[0];\n    const y11 = y1[1];\n    return LinearRange(y00 + u * (y10 - y00), y01 + u * (y11 - y01));\n  } as Interpolator<LinearRange>;\n  Object.setPrototypeOf(interpolator, LinearRangeInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: LinearRange, y1: LinearRange): Interpolator<LinearRange>;\n\n  /** @hidden */\n  prototype: Interpolator<LinearRange>;\n};\n\nLinearRangeInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Mapping} from \"../mapping/Mapping\";\nimport type {Domain} from \"../mapping/Domain\";\nimport type {Range} from \"../mapping/Range\";\n\nexport interface Scale<X, Y> extends Mapping<X, Y> {\n  readonly inverse: Mapping<Y, X>;\n\n  withDomain(domain: Domain<X>): Scale<X, Y>;\n  withDomain(x0: X, x1: X): Scale<X, Y>;\n\n  overRange(range: Range<Y>): Scale<X, Y>;\n  overRange(y0: Y, y1: Y): Scale<X, Y>;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const Scale = function (): never {\n  throw new Error();\n} as {\n  /** @hidden */\n  (): never;\n\n  /** @hidden */\n  prototype: Scale<any, any>;\n};\n\nScale.prototype = Object.create(Mapping.prototype);\n\nScale.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof Scale;\n};\n\nScale.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof Scale) {\n    return this.domain.equals(that.domain) && this.range.equals(that.range);\n  }\n  return false;\n};\n\nScale.prototype.toString = function (): string {\n  return \"Scale(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Mapping} from \"../mapping/Mapping\";\nimport type {Domain} from \"../mapping/Domain\";\nimport type {Range} from \"../mapping/Range\";\nimport {Scale} from \"./Scale\";\n\nexport interface ContinuousScale<X, Y> extends Scale<X, Y> {\n  readonly inverse: Mapping<Y, X>;\n\n  withDomain(domain: Domain<X>): ContinuousScale<X, Y>;\n  withDomain(x0: X, x1: X): ContinuousScale<X, Y>;\n\n  overRange(range: Range<Y>): ContinuousScale<X, Y>;\n  overRange(y0: Y, y1: Y): ContinuousScale<X, Y>;\n\n  clampDomain(xMin: X | undefined, xMax: X | undefined,\n              zMin: number | undefined, zMax: number | undefined,\n              epsilon?: number): ContinuousScale<X, Y>;\n\n  solveDomain(x1: X, y1: Y, x2?: X, y2?: Y,\n              reflect?: boolean, epsilon?: number): ContinuousScale<X, Y>;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const ContinuousScale = function (): never {\n  throw new Error();\n} as {\n  /** @hidden */\n  (): never;\n\n  /** @hidden */\n  prototype: ContinuousScale<any, any>;\n};\n\nContinuousScale.prototype = Object.create(Scale.prototype);\n\nContinuousScale.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof ContinuousScale;\n};\n\nContinuousScale.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof ContinuousScale) {\n    return this.domain.equals(that.domain) && this.range.equals(that.range);\n  }\n  return false;\n};\n\nContinuousScale.prototype.toString = function (): string {\n  return \"ContinuousScale(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent} from \"@swim/util\";\nimport type {Interpolate} from \"../interpolate/Interpolate\";\nimport type {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearDomain} from \"./LinearDomain\";\nimport {LinearRange} from \"./LinearRange\";\nimport {ContinuousScale} from \"./ContinuousScale\";\nimport {LinearScaleInterpolator} from \"./\"; // forward import\n\nexport interface LinearScale extends ContinuousScale<number, number>, Interpolate<LinearScale> {\n  readonly domain: LinearDomain;\n\n  readonly range: LinearRange;\n\n  readonly inverse: LinearScale;\n\n  withDomain(domain: LinearDomain): LinearScale;\n  withDomain(x0: number, x1: number): LinearScale;\n\n  overRange(range: LinearRange): LinearScale;\n  overRange(y0: number, y1: number): LinearScale;\n\n  clampDomain(xMin: number | undefined, xMax: number | undefined,\n              zMin: number | undefined, zMax: number | undefined,\n              epsilon?: number): LinearScale;\n\n  solveDomain(x1: number, y1: number, x2?: number, y2?: number,\n              reflect?: boolean, epsilon?: number): LinearScale;\n\n  interpolateTo(that: LinearScale): Interpolator<LinearScale>;\n  interpolateTo(that: unknown): Interpolator<LinearScale> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const LinearScale = function (domain: LinearDomain, range: LinearRange): LinearScale {\n  const scale = function (x: number): number {\n    return scale.range(scale.domain(x));\n  } as LinearScale;\n  Object.setPrototypeOf(scale, LinearScale.prototype);\n  Object.defineProperty(scale, \"domain\", {\n    value: domain,\n    enumerable: true,\n  });\n  Object.defineProperty(scale, \"range\", {\n    value: range,\n    enumerable: true,\n  });\n  return scale;\n} as {\n  (domain: LinearDomain, range: LinearRange): LinearScale;\n\n  /** @hidden */\n  prototype: LinearScale;\n};\n\nLinearScale.prototype = Object.create(ContinuousScale.prototype);\n\nObject.defineProperty(LinearScale.prototype, \"inverse\", {\n  get(this: LinearScale): LinearScale {\n    return LinearScale(this.range.inverse, this.domain.inverse);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nLinearScale.prototype.withDomain = function (x0: LinearDomain | number, x1?: number): LinearScale {\n  let domain: LinearDomain;\n  if (arguments.length === 1) {\n    domain = x0 as LinearDomain;\n  } else {\n    domain = LinearDomain(x0 as number, x1!);\n  }\n  return LinearScale(domain, this.range);\n};\n\nLinearScale.prototype.overRange = function (y0: LinearRange | number, y1?: number): LinearScale {\n  let range: LinearRange;\n  if (arguments.length === 1) {\n    range = y0 as LinearRange;\n  } else {\n    range = LinearRange(y0 as number, y1!);\n  }\n  return LinearScale(this.domain, range);\n};\n\nLinearScale.prototype.clampDomain = function (xMin: number | undefined, xMax: number | undefined,\n                                              zMin: number | undefined, zMax: number | undefined,\n                                              epsilon?: number): LinearScale {\n  if (epsilon === void 0) {\n    epsilon = Equivalent.Epsilon;\n  }\n  let x0 = this.domain[0];\n  let x1 = this.domain[1];\n  if (xMin !== void 0 && xMax !== void 0 && Math.abs(x1 - x0) > xMax - xMin) {\n    if (x0 < x1) {\n      x0 = xMin;\n      x1 = xMax;\n    } else {\n      x1 = xMin;\n      x0 = xMax;\n    }\n  } else {\n    if (xMin !== void 0) {\n      if (x0 < x1 && x0 < xMin) {\n        x1 += xMin - x0;\n        x0 = xMin;\n      } else if (x1 < x0 && x1 < xMin) {\n        x0 += xMin - x1;\n        x1 = xMin;\n      }\n    }\n    if (xMax !== void 0) {\n      if (x0 < x1 && x1 > xMax) {\n        x0 -= x1 - xMax;\n        x1 = xMax;\n      } else if (x1 < x0 && x0 > xMax) {\n        x1 -= x0 - xMax;\n        x0 = xMax;\n      }\n    }\n  }\n\n  const y0 = this(x0);\n  const y1 = this(x1);\n  const dy = y0 < y1 ? y1 - y0 : y0 - y1;\n  const z = Math.abs(dy / (x1 - x0));\n  if (zMin !== void 0 && z < 1 / zMin) {\n    const dz = dy * zMin;\n    const xSum = x0 + x1;\n    x0 = (xSum - dz) / 2;\n    x1 = (xSum + dz) / 2;\n  } else if (zMax !== void 0 && z > 1 / zMax) {\n    const dz = dy * zMax;\n    const xSum = x0 + x1;\n    x0 = (xSum - dz) / 2;\n    x1 = (xSum + dz) / 2;\n  }\n\n  if (Math.abs(x0 - this.domain[0]) < epsilon && Math.abs(x1 - this.domain[1]) < epsilon) {\n    return this;\n  } else {\n    return LinearScale(LinearDomain(x0, x1), this.range);\n  }\n};\n\nLinearScale.prototype.solveDomain = function (x1: number, y1: number, x2?: number, y2?: number,\n                                              reflect?: boolean, epsilon?: number): LinearScale {\n  if (epsilon === void 0) {\n    epsilon = Equivalent.Epsilon;\n  }\n  const dx = this.domain[1] - this.domain[0];\n  const y0 = this.range[0];\n  const y3 = this.range[1];\n  let m: number;\n  if (x2 === void 0 || y2 === void 0 || Math.abs(x2 - x1) < epsilon || Math.abs(y2 - y1) < epsilon) {\n    m = (y3 - y0) / (dx !== 0 ? dx : epsilon);\n  } else {\n    m = (y2 - y1) / (x2 - x1);\n    if ((reflect === void 0 || !reflect) && (m < 0 !== (y3 - y0) / dx < 0)) {\n      m = -m;\n    }\n  }\n  const b = y1 - m * x1;\n  const x0 = (y0 - b) / m;\n  const x3 = (y3 - b) / m;\n\n  if (Math.abs(x0 - this.domain[0]) < epsilon && Math.abs(x3 - this.domain[1]) < epsilon) {\n    return this;\n  } else {\n    return LinearScale(LinearDomain(x0, x3), this.range);\n  }\n};\n\nLinearScale.prototype.interpolateTo = function (this: LinearScale, that: unknown): Interpolator<LinearScale> | null {\n  if (that instanceof LinearScale) {\n    return LinearScaleInterpolator(this, that);\n  }\n  return null;\n} as typeof LinearScale.prototype.interpolateTo;\n\nLinearScale.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof LinearScale;\n};\n\nLinearScale.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof LinearScale) {\n    return this.domain.equals(that.domain) && this.range.equals(that.range);\n  }\n  return false;\n};\n\nLinearScale.prototype.toString = function (): string {\n  return \"LinearScale(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"../interpolate/Interpolator\";\nimport {LinearDomain} from \"./LinearDomain\";\nimport {LinearRange} from \"./LinearRange\";\nimport {LinearScale} from \"./LinearScale\";\n\n/** @hidden */\nexport const LinearScaleInterpolator = function (s0: LinearScale, s1: LinearScale): Interpolator<LinearScale> {\n  const interpolator = function (u: number): LinearScale {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const x0 = s0.domain;\n    const x00 = x0[0];\n    const x01 = x0[1];\n    const x1 = s1.domain;\n    const x10 = x1[0];\n    const x11 = x1[1];\n    const domain = LinearDomain(x00 + u * (x10 - x00), x01 + u * (x11 - x01));\n    const y0 = s0.range;\n    const y00 = y0[0];\n    const y01 = y0[1];\n    const y1 = s1.range;\n    const y10 = y1[0];\n    const y11 = y1[1];\n    const range = LinearRange(y00 + u * (y10 - y00), y01 + u * (y11 - y01));\n    return LinearScale(domain, range);\n  } as Interpolator<LinearScale>;\n  Object.setPrototypeOf(interpolator, LinearScaleInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: LinearScale, s1: LinearScale): Interpolator<LinearScale>;\n\n  /** @hidden */\n  prototype: Interpolator<LinearScale>;\n};\n\nLinearScaleInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\n\n/** @hidden */\nexport class KeysCursor<K, V> extends Cursor<K> {\n  /** @hidden */\n  declare readonly cursor: Cursor<[K, V]>;\n\n  constructor(cursor: Cursor<[K, V]>) {\n    super();\n    Object.defineProperty(this, \"cursor\", {\n      value: cursor,\n      enumerable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.cursor.isEmpty();\n  }\n\n  head(): K {\n    return this.cursor.head()[0];\n  }\n\n  step(): void {\n    this.cursor.step();\n  }\n\n  skip(count: number): void {\n    this.cursor.skip(count);\n  }\n\n  hasNext(): boolean {\n    return this.cursor.hasNext();\n  }\n\n  nextIndex(): number {\n    return this.cursor.nextIndex();\n  }\n\n  next(): {value?: K, done: boolean} {\n    const {value, done} = this.cursor.next();\n    return {value: value && value[0], done};\n  }\n\n  hasPrevious(): boolean {\n    return this.cursor.hasPrevious();\n  }\n\n  previousIndex(): number {\n    return this.cursor.previousIndex();\n  }\n\n  previous(): {value?: K, done: boolean} {\n    const {value, done} = this.cursor.previous();\n    return {value: value && value[0], done};\n  }\n\n  delete(): void {\n    this.cursor.delete();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\n\n/** @hidden */\nexport class ValuesCursor<K, V> extends Cursor<V> {\n  /** @hidden */\n  declare readonly cursor: Cursor<[K, V]>;\n\n  constructor(cursor: Cursor<[K, V]>) {\n    super();\n    Object.defineProperty(this, \"cursor\", {\n      value: cursor,\n      enumerable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.cursor.isEmpty();\n  }\n\n  head(): V {\n    return this.cursor.head()[1];\n  }\n\n  step(): void {\n    this.cursor.step();\n  }\n\n  skip(count: number): void {\n    this.cursor.skip(count);\n  }\n\n  hasNext(): boolean {\n    return this.cursor.hasNext();\n  }\n\n  nextIndex(): number {\n    return this.cursor.nextIndex();\n  }\n\n  next(): {value?: V, done: boolean} {\n    const {value, done} = this.cursor.next();\n    return {value: value && value[1], done};\n  }\n\n  hasPrevious(): boolean {\n    return this.cursor.hasPrevious();\n  }\n\n  previousIndex(): number {\n    return this.cursor.previousIndex();\n  }\n\n  previous(): {value?: V, done: boolean} {\n    const {value, done} = this.cursor.previous();\n    return {value: value && value[1], done};\n  }\n\n  delete(): void {\n    this.cursor.delete();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\n\n/** @hidden */\nexport abstract class NodeCursor<T, P> extends Cursor<T> {\n  /** @hidden */\n  declare readonly pages: ReadonlyArray<P>;\n  /** @hidden */\n  index: number;\n  /** @hidden */\n  childIndex: number;\n  /** @hidden */\n  childCursor: Cursor<T> | null;\n\n  constructor(pages: ReadonlyArray<P>, index: number,\n              childIndex: number, childCursor: Cursor<T> | null) {\n    super();\n    Object.defineProperty(this, \"pages\", {\n      value: pages,\n      enumerable: true,\n    });\n    this.index = index;\n    this.childIndex = childIndex;\n    this.childCursor = childCursor;\n  }\n\n  protected abstract pageSize(page: P): number;\n\n  protected abstract pageCursor(page: P): Cursor<T>;\n\n  protected abstract reversePageCursor(page: P): Cursor<T>;\n\n  isEmpty(): boolean {\n    do {\n      if (this.childCursor !== null) {\n        if (!this.childCursor.isEmpty()) {\n          return false;\n        } else {\n          this.childCursor = null;\n        }\n      } else if (this.childIndex < this.pages.length) {\n        this.childCursor = this.pageCursor(this.pages[this.childIndex]!);\n        this.childIndex += 1;\n      } else {\n        this.childIndex = this.pages.length;\n        return true;\n      }\n    } while (true);\n  }\n\n  head(): T {\n    do {\n      if (this.childCursor !== null) {\n        if (!this.childCursor.isEmpty()) {\n          return this.childCursor.head();\n        } else {\n          this.childCursor = null;\n        }\n      } else {\n        if (this.childIndex < this.pages.length) {\n          this.childCursor = this.pageCursor(this.pages[this.childIndex]!);\n          this.childIndex += 1;\n        } else {\n          this.childIndex = this.pages.length;\n          throw new Error(\"empty\");\n        }\n      }\n    } while (true);\n  }\n\n  step(): void {\n    do {\n      if (this.childCursor !== null) {\n        if (!this.childCursor.isEmpty()) {\n          this.index += 1;\n          return;\n        } else {\n          this.childCursor = null;\n        }\n      } else {\n        if (this.childIndex < this.pages.length) {\n          this.childCursor = this.pageCursor(this.pages[this.childIndex]!);\n          this.childIndex += 1;\n        } else {\n          this.childIndex = this.pages.length;\n          throw new Error(\"empty\");\n        }\n      }\n    } while (true);\n  }\n\n  skip(count: number): void {\n    while (count > 0) {\n      if (this.childCursor !== null) {\n        if (this.childCursor.hasNext()) {\n          this.index += 1;\n          count -= 1;\n          this.childCursor.next();\n        } else {\n          this.childCursor = null;\n        }\n      } else if (this.childIndex < this.pages.length) {\n        const page = this.pages[this.childIndex]!;\n        const pageSize = this.pageSize(page);\n        this.childIndex += 1;\n        if (pageSize < count) {\n          this.childCursor = this.pageCursor(page);\n          if (count > 0) {\n            this.index += count;\n            this.childCursor!.skip(count);\n            count = 0;\n          }\n          break;\n        } else {\n          this.index += pageSize;\n          count -= pageSize;\n        }\n      } else {\n        break;\n      }\n    }\n  }\n\n  hasNext(): boolean {\n    do {\n      if (this.childCursor !== null) {\n        if (this.childCursor.hasNext()) {\n          return true;\n        } else {\n          this.childCursor = null;\n        }\n      } else if (this.childIndex < this.pages.length) {\n        this.childCursor = this.pageCursor(this.pages[this.childIndex]!);\n        this.childIndex += 1;\n      } else {\n        this.childIndex = this.pages.length;\n        return false;\n      }\n    } while (true);\n  }\n\n  nextIndex(): number {\n    return this.index;\n  }\n\n  next(): {value?: T, done: boolean} {\n    do {\n      if (this.childCursor !== null) {\n        if (this.childCursor.hasNext()) {\n          this.index += 1;\n          return this.childCursor.next();\n        } else {\n          this.childCursor = null;\n        }\n      } else {\n        if (this.childIndex < this.pages.length) {\n          this.childCursor = this.pageCursor(this.pages[this.childIndex]!);\n          this.childIndex += 1;\n        } else {\n          this.childIndex = this.pages.length;\n          return {done: true};\n        }\n      }\n    } while (true);\n  }\n\n  hasPrevious(): boolean {\n    do {\n      if (this.childCursor !== null) {\n        if (this.childCursor.hasPrevious()) {\n          return true;\n        } else {\n          this.childCursor = null;\n        }\n      } else if (this.childIndex > 0) {\n        this.childCursor = this.reversePageCursor(this.pages[this.childIndex - 1]!);\n        this.childIndex -= 1;\n      } else {\n        this.childIndex = 0;\n        return false;\n      }\n    } while (true);\n  }\n\n  previousIndex(): number {\n    return this.index - 1;\n  }\n\n  previous(): {value?: T, done: boolean} {\n    do {\n      if (this.childCursor !== null) {\n        if (this.childCursor.hasPrevious()) {\n          this.index -= 1;\n          return this.childCursor.previous();\n        } else {\n          this.childCursor = null;\n        }\n      } else if (this.childIndex > 0) {\n        this.childCursor = this.reversePageCursor(this.pages[this.childIndex - 1]!);\n        this.childIndex -= 1;\n      } else {\n        this.childIndex = 0;\n        return {done: true};\n      }\n    } while (true);\n  }\n\n  set(newValue: T): void {\n    this.childCursor!.set(newValue);\n  }\n\n  delete(): void {\n    this.childCursor!.delete();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Values} from \"@swim/util\";\nimport type {BTreePage} from \"./BTreePage\";\n\n/** @hidden */\nexport abstract class BTreeContext<K, V> {\n  get pageSplitSize(): number {\n    return 32;\n  }\n\n  set pageSplitSize(pageSplitSize: number) {\n    Object.defineProperty(this, \"pageSplitSize\", {\n      value: pageSplitSize,\n      configurable: true,\n      enumerable: true,\n      writable: true,\n    });\n  }\n\n  compare(x: K, y: K): number {\n    return Values.compare(x, y);\n  }\n\n  pageShouldSplit(page: BTreePage<K, V, unknown>): boolean {\n    return page.arity > this.pageSplitSize;\n  }\n\n  pageShouldMerge(page: BTreePage<K, V, unknown>): boolean {\n    return page.arity < this.pageSplitSize >>> 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor, ReducedMap} from \"@swim/util\";\nimport {BTreeContext} from \"./BTreeContext\";\nimport {BTreePage} from \"./\"; // forward import\n\nexport class BTree<K = unknown, V = unknown, U = never> extends BTreeContext<K, V> implements ReducedMap<K, V, U> {\n  root: BTreePage<K, V, U>;\n\n  constructor(root?: BTreePage<K, V, U>) {\n    super();\n    if (root === void 0) {\n      root = BTreePage.empty();\n    }\n    this.root = root;\n  }\n\n  get size(): number {\n    return this.root.size;\n  }\n\n  isEmpty(): boolean {\n    return this.root.isEmpty();\n  }\n\n  has(key: K): boolean {\n    return this.root.has(key, this);\n  }\n\n  get(key: K): V | undefined {\n    return this.root.get(key, this);\n  }\n\n  getEntry(index: number): [K, V] | undefined {\n    return this.root.getEntry(index);\n  }\n\n  firstKey(): K | undefined {\n    const entry = this.root.firstEntry();\n    if (entry !== void 0) {\n      return entry[0];\n    } else {\n      return void 0;\n    }\n  }\n\n  firstValue(): V | undefined {\n    const entry = this.root.firstEntry();\n    if (entry !== void 0) {\n      return entry[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  firstEntry(): [K, V] | undefined {\n    return this.root.firstEntry();\n  }\n\n  lastKey(): K | undefined {\n    const entry = this.root.lastEntry();\n    if (entry !== void 0) {\n      return entry[0];\n    } else {\n      return void 0;\n    }\n  }\n\n  lastValue(): V | undefined {\n    const entry = this.root.lastEntry();\n    if (entry !== void 0) {\n      return entry[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  lastEntry(): [K, V] | undefined {\n    return this.root.lastEntry();\n  }\n\n  nextKey(key: K): K | undefined {\n    const entry = this.root.nextEntry(key, this);\n    if (entry !== void 0) {\n      return entry[0];\n    } else {\n      return void 0;\n    }\n  }\n\n  nextValue(key: K): V | undefined {\n    const entry = this.root.nextEntry(key, this);\n    if (entry !== void 0) {\n      return entry[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  nextEntry(key: K): [K, V] | undefined {\n    return this.root.nextEntry(key, this);\n  }\n\n  previousKey(key: K): K | undefined {\n    const entry = this.root.previousEntry(key, this);\n    if (entry !== void 0) {\n      return entry[0];\n    } else {\n      return void 0;\n    }\n  }\n\n  previousValue(key: K): V | undefined {\n    const entry = this.root.previousEntry(key, this);\n    if (entry !== void 0) {\n      return entry[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  previousEntry(key: K): [K, V] | undefined {\n    return this.root.previousEntry(key, this);\n  }\n\n  set(key: K, newValue: V): this {\n    const oldRoot = this.root;\n    let newRoot = this.root.updated(key, newValue, this);\n    if (oldRoot !== newRoot) {\n      if (newRoot.size > oldRoot.size) {\n        newRoot = newRoot.balanced(this);\n      }\n      this.root = newRoot;\n    }\n    return this;\n  }\n\n  delete(key: K): boolean {\n    const oldRoot = this.root;\n    const newRoot = this.root.removed(key, this);\n    if (oldRoot !== newRoot) {\n      this.root = newRoot;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  drop(lower: number): this {\n    if (lower > 0 && this.root.size > 0) {\n      if (lower < this.root.size) {\n        this.root = this.root.drop(lower, this);\n      } else {\n        this.root = BTreePage.empty();\n      }\n    }\n    return this;\n  }\n\n  take(upper: number): this {\n    if (upper < this.root.size && this.root.size > 0) {\n      if (upper > 0) {\n        this.root = this.root.take(upper, this);\n      } else {\n        this.root = BTreePage.empty();\n      }\n    }\n    return this;\n  }\n\n  clear(): void {\n    this.root = BTreePage.empty();\n  }\n\n  updated(key: K, newValue: V): BTree<K, V, U> {\n    const oldRoot = this.root;\n    let newRoot = oldRoot.updated(key, newValue, this);\n    if (oldRoot !== newRoot) {\n      if (newRoot.size > oldRoot.size) {\n        newRoot = newRoot.balanced(this);\n      }\n      return this.copy(newRoot);\n    } else {\n      return this;\n    }\n  }\n\n  removed(key: K): BTree<K, V, U> {\n    const oldRoot = this.root;\n    const newRoot = oldRoot.removed(key, this);\n    if (oldRoot !== newRoot) {\n      return this.copy(newRoot);\n    } else {\n      return this;\n    }\n  }\n\n  cleared(): BTree<K, V, U> {\n    if (!this.root.isEmpty()) {\n      return this.copy(BTreePage.empty());\n    } else {\n      return this;\n    }\n  }\n\n  reduced(identity: U, accumulator: (result: U, element: V) => U, combiner: (result: U, result2: U) => U): U {\n    const oldRoot = this.root;\n    const newRoot = oldRoot.reduced(identity, accumulator, combiner);\n    if (oldRoot !== newRoot) {\n      this.root = newRoot;\n    }\n    return newRoot.fold!;\n  }\n\n  forEach<T>(callback: (key: K, value: V) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, key: K, value: V) => T | void,\n                thisArg?: S): T | undefined {\n    return this.root.forEach(callback, thisArg);\n  }\n\n  forEachKey<T>(callback: (key: K) => T | void): T | undefined;\n  forEachKey<T, S>(callback: (this: S, key: K) => T | void,\n                   thisArg: S): T | undefined;\n  forEachKey<T, S>(callback: (this: S | undefined, key: K) => T | void,\n                   thisArg?: S): T | undefined {\n    return this.root.forEachKey(callback, thisArg);\n  }\n\n  forEachValue<T>(callback: (value: V) => T | void): T | undefined;\n  forEachValue<T, S>(callback: (this: S, value: V) => T | void,\n                     thisArg: S): T | undefined;\n  forEachValue<T, S>(callback: (this: S | undefined, value: V) => T | void,\n                     thisArg?: S): T | undefined {\n    return this.root.forEachValue(callback, thisArg);\n  }\n\n  keys(): Cursor<K> {\n    return this.root.keys();\n  }\n\n  values(): Cursor<V> {\n    return this.root.values();\n  }\n\n  entries(): Cursor<[K, V]> {\n    return this.root.entries();\n  }\n\n  reverseKeys(): Cursor<K> {\n    return this.root.reverseKeys();\n  }\n\n  reverseValues(): Cursor<V> {\n    return this.root.reverseValues();\n  }\n\n  reverseEntries(): Cursor<[K, V]> {\n    return this.root.reverseEntries();\n  }\n\n  clone(): BTree<K, V, U> {\n    return this.copy(this.root);\n  }\n\n  protected copy(root: BTreePage<K, V, U>): BTree<K, V, U> {\n    const tree = new BTree(root);\n    if (tree.compare !== this.compare) {\n      tree.compare = this.compare;\n    }\n    if (tree.pageSplitSize !== this.pageSplitSize) {\n      tree.pageSplitSize = this.pageSplitSize;\n    }\n    return tree;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Cursor} from \"@swim/util\";\nimport {KeysCursor} from \"./KeysCursor\";\nimport {ValuesCursor} from \"./ValuesCursor\";\nimport type {BTreeContext} from \"./BTreeContext\";\nimport {BTreeLeaf} from \"./\"; // forward import\n\n/** @hidden */\nexport abstract class BTreePage<K, V, U> {\n  abstract readonly arity: number;\n\n  abstract readonly size: number;\n\n  abstract isEmpty(): boolean;\n\n  abstract readonly fold: U | undefined;\n\n  abstract minKey(): K;\n\n  abstract maxKey(): K;\n\n  abstract has(key: K, tree: BTreeContext<K, V>): boolean;\n\n  abstract get(key: K, tree: BTreeContext<K, V>): V | undefined;\n\n  abstract getEntry(index: number): [K, V] | undefined;\n\n  abstract firstEntry(): [K, V] | undefined;\n\n  abstract lastEntry(): [K, V] | undefined;\n\n  abstract nextEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined;\n\n  abstract previousEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined;\n\n  abstract updated(key: K, newValue: V, tree: BTreeContext<K, V>): BTreePage<K, V, U>;\n\n  abstract removed(key: K, tree: BTreeContext<K, V>): BTreePage<K, V, U>;\n\n  abstract drop(lower: number, tree: BTreeContext<K, V>): BTreePage<K, V, U>;\n\n  abstract take(upper: number, tree: BTreeContext<K, V>): BTreePage<K, V, U>;\n\n  abstract balanced(tree: BTreeContext<K, V>): BTreePage<K, V, U>;\n\n  abstract split(index: number): BTreePage<K, V, U>;\n\n  abstract splitLeft(index: number): BTreePage<K, V, U>;\n\n  abstract splitRight(index: number): BTreePage<K, V, U>;\n\n  abstract reduced(identity: U, accumulator: (result: U, element: V) => U,\n                   combiner: (result: U, result2: U) => U): BTreePage<K, V, U>;\n\n  abstract forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                         thisArg: S): T | undefined;\n\n  abstract forEachKey<T, S>(callback: (this: S, key: K) => T | void,\n                            thisArg: S): T | undefined;\n\n  abstract forEachValue<T, S>(callback: (this: S, value: V) => T | void,\n                              thisArg: S): T | undefined;\n\n  keys(): Cursor<K> {\n    return new KeysCursor(this.entries());\n  }\n\n  values(): Cursor<V> {\n    return new ValuesCursor(this.entries());\n  }\n\n  abstract entries(): Cursor<[K, V]>;\n\n  reverseKeys(): Cursor<K> {\n    return new KeysCursor(this.reverseEntries());\n  }\n\n  reverseValues(): Cursor<V> {\n    return new ValuesCursor(this.reverseEntries());\n  }\n\n  abstract reverseEntries(): Cursor<[K, V]>;\n\n  @Lazy\n  static empty<K, V, U>(): BTreeLeaf<K, V, U> {\n    return new BTreeLeaf([], void 0 as U | undefined);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport type {BTreeContext} from \"./BTreeContext\";\nimport {BTreePage} from \"./BTreePage\";\nimport {BTreeNode} from \"./\"; // forward import\n\n/** @hidden */\nexport class BTreeLeaf<K, V, U> extends BTreePage<K, V, U> {\n  /** @hidden */\n  declare readonly slots: ReadonlyArray<[K, V]>;\n\n  constructor(slots: ReadonlyArray<[K, V]>, fold: U | undefined) {\n    super();\n    Object.defineProperty(this, \"slots\", {\n      value: slots,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"fold\", {\n      value: fold,\n      enumerable: true,\n    });\n  }\n\n  get arity(): number {\n    return this.slots.length;\n  }\n\n  get size(): number {\n    return this.slots.length;\n  }\n\n  isEmpty(): boolean {\n    return this.slots.length === 0;\n  }\n\n  declare readonly fold: U | undefined;\n\n  minKey(): K {\n    return this.slots[0]![0];\n  }\n\n  maxKey(): K {\n    return this.slots[this.slots.length - 1]![0];\n  }\n\n  has(key: K, tree: BTreeContext<K, V>): boolean {\n    return this.lookup(key, tree) >= 0;\n  }\n\n  get(key: K, tree: BTreeContext<K, V>): V | undefined {\n    const x = this.lookup(key, tree);\n    if (x >= 0) {\n      return this.slots[x]![1];\n    } else {\n      return void 0;\n    }\n  }\n\n  getEntry(index: number): [K, V] | undefined {\n    return this.slots[index];\n  }\n\n  firstEntry(): [K, V] | undefined {\n    const slots = this.slots;\n    if (slots.length !== 0) {\n      return slots[0];\n    } else {\n      return void 0;\n    }\n  }\n\n  lastEntry(): [K, V] | undefined {\n    const slots = this.slots;\n    if (slots.length !== 0) {\n      return slots[slots.length - 1];\n    } else {\n      return void 0;\n    }\n  }\n\n  nextEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    return this.slots[x];\n  }\n\n  previousEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x -= 1;\n    } else {\n      x = -(x + 2);\n    }\n    return this.slots[x];\n  }\n\n  updated(key: K, newValue: V, tree: BTreeContext<K, V>): BTreeLeaf<K, V, U> {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      return this.updatedSlot(x, key, newValue);\n    } else {\n      x = -(x + 1);\n      return this.insertedSlot(x, key, newValue);\n    }\n  }\n\n  private updatedSlot(x: number, key: K, newValue: V): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    if (newValue !== oldSlots[x]![1]) {\n      const newSlots = oldSlots.slice(0);\n      newSlots[x] = [key, newValue];\n      return new BTreeLeaf(newSlots, void 0 as U | undefined);\n    } else {\n      return this;\n    }\n  }\n\n  private insertedSlot(x: number, key: K, newValue: V): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    const n = oldSlots.length + 1;\n    const newSlots = new Array<[K, V]>(n);\n    for (let i = 0; i < x; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    newSlots[x] = [key, newValue];\n    for (let i = x; i < n - 1; i += 1) {\n      newSlots[i + 1] = oldSlots[i]!;\n    }\n    return new BTreeLeaf(newSlots, void 0 as U | undefined);\n  }\n\n  removed(key: K, tree: BTreeContext<K, V>): BTreeLeaf<K, V, U> {\n    const x = this.lookup(key, tree);\n    if (x >= 0) {\n      if (this.slots.length > 1) {\n        return this.removedSlot(x);\n      } else {\n        return BTreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  private removedSlot(x: number): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    const newSlots = new Array<[K, V]>(oldSlots.length - 1);\n    for (let i = 0; i < x; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    for (let i = x; i < newSlots.length; i += 1) {\n      newSlots[i] = oldSlots[i + 1]!;\n    }\n    return new BTreeLeaf(newSlots, void 0 as U | undefined);\n  }\n\n  drop(lower: number, tree: BTreeContext<K, V>): BTreeLeaf<K, V, U> {\n    if (lower > 0) {\n      const oldSlots = this.slots;\n      if (lower < oldSlots.length) {\n        const size = oldSlots.length - lower;\n        const newSlots = new Array<[K, V]>(size);\n        for (let i = 0; i < size; i += 1) {\n          newSlots[i] = oldSlots[i + lower]!;\n        }\n        return new BTreeLeaf(newSlots, void 0 as U | undefined);\n      } else {\n        return BTreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  take(upper: number, tree: BTreeContext<K, V>): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    if (upper < oldSlots.length) {\n      if (upper > 0) {\n        const newSlots = new Array<[K, V]>(upper);\n        for (let i = 0; i < upper; i += 1) {\n          newSlots[i] = oldSlots[i]!;\n        }\n        return new BTreeLeaf(newSlots, void 0 as U | undefined);\n      } else {\n        return BTreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  balanced(tree: BTreeContext<K, V>): BTreePage<K, V, U> {\n    const n = this.slots.length;\n    if (n > 1 && tree.pageShouldSplit(this)) {\n      const x = n >>> 1;\n      return this.split(x);\n    } else {\n      return this;\n    }\n  }\n\n  split(x: number): BTreeNode<K, V, U> {\n    const newPages = new Array<BTreePage<K, V, U>>(2);\n    const newLeftPage = this.splitLeft(x);\n    const newRightPage = this.splitRight(x);\n    newPages[0] = newLeftPage;\n    newPages[1] = newRightPage;\n\n    const newKnots = new Array<K>(1);\n    newKnots[0] = newRightPage.minKey();\n\n    return new BTreeNode(newPages, newKnots, void 0, this.slots.length);\n  }\n\n  splitLeft(x: number): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    const newSlots = new Array<[K, V]>(x);\n    for (let i = 0; i < x; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    return new BTreeLeaf(newSlots, void 0 as U | undefined);\n  }\n\n  splitRight(x: number): BTreeLeaf<K, V, U> {\n    const oldSlots = this.slots;\n    const y = oldSlots.length - x;\n    const newSlots = new Array<[K, V]>(y);\n    for (let i = 0; i < y; i += 1) {\n      newSlots[i] = oldSlots[i + x]!;\n    }\n    return new BTreeLeaf(newSlots, void 0 as U | undefined);\n  }\n\n  reduced(identity: U, accumulator: (result: U, element: V) => U,\n          combiner: (result: U, result2: U) => U): BTreeLeaf<K, V, U> {\n    if (this.fold === void 0) {\n      const slots = this.slots;\n      let fold = identity;\n      for (let i = 0, n = slots.length; i < n; i += 1) {\n        fold = accumulator(fold, slots[i]![1]);\n      }\n      return new BTreeLeaf(slots, fold);\n    } else {\n      return this;\n    }\n  }\n\n  forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                thisArg: S): T | undefined {\n    const slots = this.slots;\n    for (let i = 0, n = slots.length; i < n; i += 1) {\n      const slot = slots[i]!;\n      const result = callback.call(thisArg, slot[0], slot[1]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  forEachKey<T, S>(callback: (this: S, key: K) => T | void,\n                   thisArg: S): T | undefined {\n    const slots = this.slots;\n    for (let i = 0, n = slots.length; i < n; i += 1) {\n      const slot = slots[i]!;\n      const result = callback.call(thisArg, slot[0]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  forEachValue<T, S>(callback: (this: S, value: V) => T | void,\n                     thisArg: S): T | undefined {\n    const slots = this.slots;\n    for (let i = 0, n = slots.length; i < n; i += 1) {\n      const slot = slots[i]!;\n      const result = callback.call(thisArg, slot[1]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  entries(): Cursor<[K, V]> {\n    return Cursor.array(this.slots);\n  }\n\n  reverseEntries(): Cursor<[K, V]> {\n    return Cursor.array(this.slots, this.slots.length);\n  }\n\n  private lookup(key: K, tree: BTreeContext<K, V>): number {\n    let lo = 0;\n    let hi = this.slots.length - 1;\n    while (lo <= hi) {\n      const mid = (lo + hi) >>> 1;\n      const order = tree.compare(key, this.slots[mid]![0]);\n      if (order > 0) {\n        lo = mid + 1;\n      } else if (order < 0) {\n        hi = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -(lo + 1);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport type {BTreeContext} from \"./BTreeContext\";\nimport {BTreePage} from \"./BTreePage\";\nimport {BTreeNodeCursor} from \"./\"; // forward import\n\n/** @hidden */\nexport class BTreeNode<K, V, U> extends BTreePage<K, V, U> {\n  /** @hidden */\n  declare readonly pages: ReadonlyArray<BTreePage<K, V, U>>;\n  /** @hidden */\n  declare readonly knots: ReadonlyArray<K>;\n\n  constructor(pages: ReadonlyArray<BTreePage<K, V, U>>, knots: ReadonlyArray<K>,\n              fold: U | undefined, size: number) {\n    super();\n    Object.defineProperty(this, \"pages\", {\n      value: pages,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"knots\", {\n      value: knots,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"fold\", {\n      value: fold,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: size,\n      enumerable: true,\n    });\n  }\n\n  get arity(): number {\n    return this.pages.length;\n  }\n\n  declare readonly size: number;\n\n  isEmpty(): boolean {\n    return this.size === 0;\n  }\n\n  declare readonly fold: U | undefined;\n\n  minKey(): K {\n    return this.pages[0]!.minKey();\n  }\n\n  maxKey(): K {\n    return this.pages[this.pages.length - 1]!.maxKey();\n  }\n\n  has(key: K, tree: BTreeContext<K, V>): boolean {\n    let xx = this.lookup(key, tree);\n    if (xx > 0) {\n      xx += 1;\n    } else if (xx < 0) {\n      xx = -(xx + 1);\n    } else {\n      return true;\n    }\n    return this.pages[xx]!.has(key, tree);\n  }\n\n  get(key: K, tree: BTreeContext<K, V>): V | undefined {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    return this.pages[x]!.get(key, tree);\n  }\n\n  getEntry(x: number): [K, V] | undefined {\n    const pages = this.pages;\n    for (let i = 0, n = pages.length; i < n; i += 1) {\n      const page = pages[i]!;\n      if (x < page.size) {\n        return page.getEntry(x);\n      } else {\n        x -= page.size;\n      }\n    }\n    return void 0;\n  }\n\n  firstEntry(): [K, V] | undefined {\n    const pages = this.pages;\n    if (pages.length !== 0) {\n      return pages[0]!.firstEntry();\n    } else {\n      return void 0;\n    }\n  }\n\n  lastEntry(): [K, V] | undefined {\n    const pages = this.pages;\n    if (pages.length !== 0) {\n      return pages[pages.length - 1]!.lastEntry();\n    } else {\n      return void 0;\n    }\n  }\n\n  nextEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const pages = this.pages;\n    let entry = pages[x]!.nextEntry(key, tree);\n    if (entry === void 0 && x + 1 < pages.length) {\n      entry = pages[x + 1]!.nextEntry(key, tree);\n    }\n    return entry;\n  }\n\n  previousEntry(key: K, tree: BTreeContext<K, V>): [K, V] | undefined {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const pages = this.pages;\n    let entry = pages[x]!.previousEntry(key, tree);\n    if (entry === void 0 && x > 0) {\n      entry = pages[x - 1]!.previousEntry(key, tree);\n    }\n    return entry;\n  }\n\n  updated(key: K, newValue: V, tree: BTreeContext<K, V>): BTreeNode<K, V, U> {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const oldPage = this.pages[x]!;\n    const newPage = oldPage.updated(key, newValue, tree);\n    if (oldPage !== newPage) {\n      if (oldPage.size !== newPage.size && tree.pageShouldSplit(newPage)) {\n        return this.updatedPageSplit(x, newPage, oldPage);\n      } else {\n        return this.updatedPage(x, newPage, oldPage);\n      }\n    } else {\n      return this;\n    }\n  }\n\n  private updatedPage(x: number, newPage: BTreePage<K, V, U>, oldPage: BTreePage<K, V, U>): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const newPages = oldPages.slice(0);\n    newPages[x] = newPage;\n\n    const oldKnots = this.knots;\n    let newKnots: K[];\n    if (oldKnots.length > 0) {\n      newKnots = oldKnots.slice(0);\n      if (x > 0) {\n        newKnots[x - 1] = newPage.minKey();\n      }\n    } else {\n      newKnots = [];\n    }\n\n    const newSize = this.size - oldPage.size + newPage.size;\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  private updatedPageSplit(x: number, newPage: BTreePage<K, V, U>, oldPage: BTreePage<K, V, U>): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const newPages = new Array<BTreePage<K, V, U>>(oldPages.length + 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n\n    const newLeftPage = newPage.splitLeft(newPage.arity >>> 1);\n    const newRightPage = newPage.splitRight(newPage.arity >>> 1);\n    newPages[x] = newLeftPage;\n    newPages[x + 1] = newRightPage;\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i + 1] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<K>(oldPages.length);\n    if (x > 0) {\n      for (let i = 0; i < x - 1; i += 1) {\n        newKnots[i] = oldKnots[i]!;\n      }\n      newKnots[x - 1] = newLeftPage.minKey();\n      newKnots[x] = newRightPage.minKey();\n      for (let i = x; i < oldKnots.length; i += 1) {\n        newKnots[i + 1] = oldKnots[i]!;\n      }\n    } else {\n      newKnots[0] = newRightPage.minKey();\n      for (let i = 0; i < oldKnots.length; i += 1) {\n        newKnots[i + 1] = oldKnots[i]!;\n      }\n    }\n\n    const newSize = this.size - oldPage.size + newPage.size;\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  private updatedPageMerge(x: number, newPage: BTreeNode<K, V, U>, oldPage: BTreePage<K, V, U>): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const midPages = newPage.pages;\n    const newPages = new Array<BTreePage<K, V, U>>(oldPages.length + midPages.length - 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n    for (let i = 0; i < midPages.length; i += 1) {\n      newPages[i + x] = midPages[i]!;\n    }\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i + midPages.length - 1] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const midKnots = newPage.knots;\n    const newKnots = new Array<K>(newPages.length - 1);\n    if (x > 0) {\n      for (let i = 0; i < x - 1; i += 1) {\n        newKnots[i] = oldKnots[i]!;\n      }\n      newKnots[x - 1] = midPages[0]!.minKey();\n      for (let i = 0; i < midKnots.length; i += 1) {\n        newKnots[i + x] = midKnots[i]!;\n      }\n      for (let i = x; i < oldKnots.length; i += 1) {\n        newKnots[i + midKnots.length] = oldKnots[i]!;\n      }\n    } else {\n      for (let i = 0; i < midKnots.length; i += 1) {\n        newKnots[i] = midKnots[i]!;\n      }\n      newKnots[midKnots.length] = oldPages[1]!.minKey();\n      for (let i = 1; i < oldKnots.length; i += 1) {\n        newKnots[i + midKnots.length] = oldKnots[i]!;\n      }\n    }\n\n    const newSize = this.size - oldPage.size + newPage.size;\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  removed(key: K, tree: BTreeContext<K, V>): BTreePage<K, V, U> {\n    let x = this.lookup(key, tree);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const oldPage = this.pages[x]!;\n    const newPage = oldPage.removed(key, tree);\n    if (oldPage !== newPage) {\n      return this.replacedPage(x, newPage, oldPage, tree);\n    } else {\n      return this;\n    }\n  }\n\n  private replacedPage(x: number, newPage: BTreePage<K, V, U>, oldPage: BTreePage<K, V, U>,\n                       tree: BTreeContext<K, V>): BTreePage<K, V, U> {\n    if (!newPage.isEmpty()) {\n      if (newPage instanceof BTreeNode && tree.pageShouldMerge(newPage)) {\n        return this.updatedPageMerge(x, newPage, oldPage);\n      } else {\n        return this.updatedPage(x, newPage, oldPage);\n      }\n    } else if (this.pages.length > 2) {\n      return this.removedPage(x, newPage, oldPage);\n    } else if (this.pages.length > 1) {\n      if (x === 0) {\n        return this.pages[1]!;\n      } else {\n        return this.pages[0]!;\n      }\n    } else {\n      return BTreePage.empty();\n    }\n  }\n\n  private removedPage(x: number, newPage: BTreePage<K, V, U>, oldPage: BTreePage<K, V, U>): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const newPages = new Array<BTreePage<K, V, U>>(oldPages.length - 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i - 1] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<K>(oldKnots.length - 1);\n    if (x > 0) {\n      for (let i = 0; i < x - 1; i += 1) {\n        newKnots[i] = oldKnots[i]!;\n      }\n      for (let i = x; i < oldKnots.length; i += 1) {\n        newKnots[i - 1] = oldKnots[i]!;\n      }\n    } else {\n      for (let i = 1; i < oldKnots.length; i += 1) {\n        newKnots[i - 1] = oldKnots[i]!;\n      }\n    }\n\n    const newSize = this.size - oldPage.size;\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  drop(lower: number, tree: BTreeContext<K, V>): BTreePage<K, V, U> {\n    if (lower > 0) {\n      let newSize = this.size;\n      if (lower < newSize) {\n        const oldPages = this.pages;\n        let x = 0;\n        while (x < oldPages.length) {\n          const size = oldPages[x]!.size;\n          if (size <= lower) {\n            newSize -= size;\n            lower -= size;\n            x += 1;\n          } else {\n            break;\n          }\n        }\n        const newArity = oldPages.length - x;\n        if (newArity > 1) {\n          let newNode: BTreeNode<K, V, U>;\n          if (x > 0) {\n            const newPages = new Array<BTreePage<K, V, U>>(newArity);\n            for (let i = 0; i < newArity; i += 1) {\n              newPages[i] = oldPages[i + x]!;\n            }\n            const newKnots = new Array<K>(newArity - 1);\n            for (let i = 0; i < newKnots.length; i += 1) {\n              newKnots[i] = this.knots[i + x]!;\n            }\n            newNode = new BTreeNode(newPages, newKnots, void 0, newSize);\n          } else {\n            newNode = this;\n          }\n          if (lower > 0) {\n            const oldPage = oldPages[x]!;\n            const newPage = oldPage.drop(lower, tree);\n            return newNode.replacedPage(0, newPage, oldPage, tree);\n          } else {\n            return newNode;\n          }\n        } else {\n          return oldPages[x]!.drop(lower, tree);\n        }\n      } else {\n        return BTreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  take(upper: number, tree: BTreeContext<K, V>): BTreePage<K, V, U> {\n    if (upper < this.size) {\n      if (upper > 0) {\n        const oldPages = this.pages;\n        let x = 0;\n        let newSize = 0;\n        while (x < oldPages.length && upper > 0) {\n          const size = oldPages[x]!.size;\n          newSize += size;\n          x += 1;\n          if (size <= upper) {\n            upper -= size;\n          } else {\n            break;\n          }\n        }\n        const newArity = upper === 0 ? x : x + 1;\n        if (newArity > 1) {\n          let newNode: BTreeNode<K, V, U>;\n          if (x < oldPages.length) {\n            const newPages = new Array<BTreePage<K, V, U>>(newArity);\n            for (let i = 0; i < newArity; i += 1) {\n              newPages[i] = oldPages[i]!;\n            }\n            const newKnots = new Array<K>(newArity - 1);\n            for (let i = 0; i < newKnots.length; i += 1) {\n              newKnots[i] = this.knots[i]!;\n            }\n            newNode = new BTreeNode(newPages, newKnots, void 0, newSize);\n          } else {\n            newNode = this;\n          }\n          if (upper > 0) {\n            const oldPage = oldPages[x - 1]!;\n            const newPage = oldPage.take(upper, tree);\n            return newNode.replacedPage(x - 1, newPage, oldPage, tree);\n          } else {\n            return newNode;\n          }\n        } else if (upper > 0) {\n          return oldPages[0]!.take(upper, tree);\n        } else {\n          return oldPages[0]!;\n        }\n      } else {\n        return BTreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  balanced(tree: BTreeContext<K, V>): BTreeNode<K, V, U> {\n    if (this.pages.length > 1 && tree.pageShouldSplit(this)) {\n      const x = this.knots.length >>> 1;\n      return this.split(x);\n    } else {\n      return this;\n    }\n  }\n\n  split(x: number): BTreeNode<K, V, U> {\n    const newPages = new Array<BTreePage<K, V, U>>(2);\n    const newLeftPage = this.splitLeft(x);\n    const newRightPage = this.splitRight(x);\n    newPages[0] = newLeftPage;\n    newPages[1] = newRightPage;\n\n    const newKnots = new Array<K>(1);\n    newKnots[0] = newRightPage.minKey();\n\n    return new BTreeNode(newPages, newKnots, void 0, this.size);\n  }\n\n  splitLeft(x: number): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const newPages = new Array<BTreePage<K, V, U>>(x + 1);\n    for (let i = 0; i < x + 1; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<K>(x);\n    for (let i = 0; i < x; i += 1) {\n      newKnots[i] = oldKnots[i]!;\n    }\n\n    let newSize = 0;\n    for (let i = 0; i <= x; i += 1) {\n      newSize += newPages[i]!.size;\n    }\n\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  splitRight(x: number): BTreeNode<K, V, U> {\n    const oldPages = this.pages;\n    const newArity = oldPages.length - (x + 1);\n    const newPages = new Array<BTreePage<K, V, U>>(newArity);\n    for (let i = 0; i < newArity; i += 1) {\n      newPages[i] = oldPages[i + (x + 1)]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<K>(newArity - 1);\n    for (let i = 0; i < newKnots.length; i += 1) {\n      newKnots[i] = oldKnots[i + (x + 1)]!;\n    }\n\n    let newSize = 0;\n    for (let i = 0; i < newArity; i += 1) {\n      newSize += newPages[i]!.size;\n    }\n\n    return new BTreeNode(newPages, newKnots, void 0, newSize);\n  }\n\n  reduced(identity: U, accumulator: (result: U, element: V) => U,\n          combiner: (result: U, result2: U) => U): BTreeNode<K, V, U> {\n    if (this.fold === void 0) {\n      const oldPages = this.pages;\n      const n = oldPages.length;\n      const newPages = new Array<BTreePage<K, V, U>>(n);\n      for (let i = 0; i < n; i += 1) {\n        newPages[i] = oldPages[i]!.reduced(identity, accumulator, combiner);\n      }\n      // assert n > 0;\n      let fold: U = newPages[0]!.fold!;\n      for (let i = 1; i < n; i += 1) {\n        fold = combiner(fold, newPages[i]!.fold!);\n      }\n      return new BTreeNode(newPages, this.knots, fold, this.size);\n    } else {\n      return this;\n    }\n  }\n\n  forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                thisArg: S): T | undefined {\n    const pages = this.pages;\n    for (let i = 0, n = pages.length; i < n; i += 1) {\n      const result = pages[i]!.forEach(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  forEachKey<T, S>(callback: (this: S, key: K) => T | void,\n                   thisArg: S): T | undefined {\n    const pages = this.pages;\n    for (let i = 0, n = pages.length; i < n; i += 1) {\n      const result = pages[i]!.forEachKey(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  forEachValue<T, S>(callback: (this: S, value: V) => T | void,\n                     thisArg: S): T | undefined {\n    const pages = this.pages;\n    for (let i = 0, n = pages.length; i < n; i += 1) {\n      const result = pages[i]!.forEachValue(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  entries(): Cursor<[K, V]> {\n    return new BTreeNodeCursor(this.pages);\n  }\n\n  reverseEntries(): Cursor<[K, V]> {\n    return new BTreeNodeCursor(this.pages, this.size, this.pages.length);\n  }\n\n  private lookup(key: K, tree: BTreeContext<K, V>): number {\n    let lo = 0;\n    let hi = this.knots.length - 1;\n    while (lo <= hi) {\n      const mid = (lo + hi) >>> 1;\n      const order = tree.compare(key, this.knots[mid]!);\n      if (order > 0) {\n        lo = mid + 1;\n      } else if (order < 0) {\n        hi = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -(lo + 1);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {NodeCursor} from \"./NodeCursor\";\nimport type {BTreePage} from \"./BTreePage\";\n\n/** @hidden */\nexport class BTreeNodeCursor<K, V, U> extends NodeCursor<[K, V], BTreePage<K, V, U>> {\n  constructor(pages: ReadonlyArray<BTreePage<K, V, U>>, index: number = 0,\n              childIndex: number = 0, childCursor: Cursor<[K, V]> | null = null) {\n    super(pages, index, childIndex, childCursor);\n  }\n\n  protected pageSize(page: BTreePage<K, V, U>): number {\n    return page.size;\n  }\n\n  protected pageCursor(page: BTreePage<K, V, U>): Cursor<[K, V]> {\n    return page.entries();\n  }\n\n  protected reversePageCursor(page: BTreePage<K, V, U>): Cursor<[K, V]> {\n    return page.reverseEntries();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Random, Values} from \"@swim/util\";\nimport type {STreePage} from \"./STreePage\";\n\n/** @hidden */\nexport abstract class STreeContext<V, I> {\n  get pageSplitSize(): number {\n    return 32;\n  }\n\n  set pageSplitSize(pageSplitSize: number) {\n    Object.defineProperty(this, \"pageSplitSize\", {\n      value: pageSplitSize,\n      configurable: true,\n      enumerable: true,\n      writable: true,\n    });\n  }\n\n  identify(value: V): I {\n    const id = new Uint8Array(6);\n    Random.fillBytes(id);\n    return id as unknown as I;\n  }\n\n  compare(x: I, y: I): number {\n    return Values.compare(x, y);\n  }\n\n  pageShouldSplit(page: STreePage<V, I>): boolean {\n    return page.arity > this.pageSplitSize;\n  }\n\n  pageShouldMerge(page: STreePage<V, I>): boolean {\n    return page.arity < this.pageSplitSize >>> 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {STreeContext} from \"./STreeContext\";\nimport {STreePage} from \"./\"; // forward import\n\nexport class STree<V = unknown, I = unknown> extends STreeContext<V, I> {\n  root: STreePage<V, I>;\n\n  constructor(root?: STreePage<V, I>) {\n    super();\n    if (root === void 0) {\n      root = STreePage.empty();\n    }\n    this.root = root;\n  }\n\n  get length(): number {\n    return this.root.size;\n  }\n\n  isEmpty(): boolean {\n    return this.root.isEmpty();\n  }\n\n  get(index: number, id?: I): V | undefined {\n    if (id !== void 0) {\n      index = this.lookup(id, index);\n      if (index < 0) {\n        return void 0;\n      }\n    }\n    return this.root.get(index);\n  }\n\n  getEntry(index: number, id?: I): [I, V] | undefined {\n    if (id !== void 0) {\n      index = this.lookup(id, index);\n      if (index < 0) {\n        return void 0;\n      }\n    }\n    return this.root.getEntry(index);\n  }\n\n  set(index: number, newValue: V, id?: I): this {\n    if (id !== void 0) {\n      index = this.lookup(id, index);\n      if (index < 0) {\n        throw new RangeError(\"\" + id);\n      }\n    }\n    const oldRoot = this.root;\n    if (index < 0 || index >= oldRoot.size) {\n      throw new RangeError(\"\" + index);\n    }\n    this.root = oldRoot.updated(index, newValue, this);\n    return this;\n  }\n\n  insert(index: number, newValue: V, id?: I): this {\n    const oldRoot = this.root;\n    if (index < 0 || index > oldRoot.size) {\n      throw new RangeError(\"\" + index);\n    }\n    this.root = oldRoot.inserted(index, newValue, id, this).balanced(this);\n    return this;\n  }\n\n  remove(index: number, id?: I): this {\n    if (id !== void 0) {\n      index = this.lookup(id, index);\n      if (index < 0) {\n        throw new RangeError(\"\" + id);\n      }\n    }\n    const oldRoot = this.root;\n    if (index < 0 || index > oldRoot.size) {\n      throw new RangeError(\"\" + index);\n    }\n    this.root = oldRoot.removed(index, this);\n    return this;\n  }\n\n  push(...newValues: V[]): number {\n    let newRoot = this.root;\n    for (let i = 0; i < newValues.length; i += 1) {\n      newRoot = newRoot.inserted(newRoot.size, newValues[i]!, void 0, this).balanced(this);\n    }\n    this.root = newRoot;\n    return newRoot.size;\n  }\n\n  pop(): V | undefined {\n    const oldRoot = this.root;\n    const index = oldRoot.size - 1;\n    if (index >= 0) {\n      const oldValue = oldRoot.get(index);\n      this.root = oldRoot.removed(index, this);\n      return oldValue;\n    } else {\n      return void 0;\n    }\n  }\n\n  unshift(...newValues: V[]): number {\n    let newRoot = this.root;\n    for (let i = newValues.length - 1; i >= 0; i -= 1) {\n      newRoot = newRoot.inserted(0, newValues[i]!, void 0, this).balanced(this);\n    }\n    this.root = newRoot;\n    return newRoot.size;\n  }\n\n  shift(): V | undefined {\n    const oldRoot = this.root;\n    if (oldRoot.size > 0) {\n      const oldValue = oldRoot.get(0);\n      this.root = oldRoot.removed(0, this);\n      return oldValue;\n    } else {\n      return void 0;\n    }\n  }\n\n  move(fromIndex: number, toIndex: number, id?: I): this {\n    if (id !== void 0) {\n      fromIndex = this.lookup(id, fromIndex);\n      if (fromIndex < 0) {\n        throw new RangeError(\"\" + id);\n      }\n    }\n    const oldRoot = this.root;\n    if (fromIndex < 0 || fromIndex >= oldRoot.size) {\n      throw new RangeError(\"\" + fromIndex);\n    }\n    if (toIndex < 0 || toIndex >= oldRoot.size) {\n      throw new RangeError(\"\" + toIndex);\n    }\n    if (fromIndex !== toIndex) {\n      const entry = oldRoot.getEntry(fromIndex)!;\n      this.root = oldRoot.removed(fromIndex, this)\n                         .inserted(toIndex, entry[1], entry[0], this)\n                         .balanced(this);\n    }\n    return this;\n  }\n\n  splice(start: number, deleteCount?: number, ...newValues: V[]): V[] {\n    let newRoot = this.root;\n    if (start < 0) {\n      start = newRoot.size + start;\n    }\n    start = Math.min(Math.max(0, start), newRoot.size);\n    if (deleteCount === void 0) {\n      deleteCount = newRoot.size - start;\n    }\n    const deleted = [] as V[];\n    for (let i = start, n = start + deleteCount; i < n; i += 1) {\n      deleted.push(newRoot.get(start)!);\n      newRoot = newRoot.removed(start, this);\n    }\n    for (let i = 0; i < newValues.length; i += 1) {\n      newRoot = newRoot.inserted(start + i, newValues[i]!, void 0, this).balanced(this);\n    }\n    this.root = newRoot;\n    return deleted;\n  }\n\n  drop(lower: number): this {\n    const oldRoot = this.root;\n    if (lower > 0 && oldRoot.size > 0) {\n      if (lower < oldRoot.size) {\n        this.root = oldRoot.drop(lower, this);\n      } else {\n        this.root = STreePage.empty();\n      }\n    }\n    return this;\n  }\n\n  take(upper: number): this {\n    const oldRoot = this.root;\n    if (upper < oldRoot.size && oldRoot.size > 0) {\n      if (upper > 0) {\n        this.root = oldRoot.take(upper, this);\n      } else {\n        this.root = STreePage.empty();\n      }\n    }\n    return this;\n  }\n\n  clear(): void {\n    this.root = STreePage.empty();\n  }\n\n  forEach<T>(callback: (value: V, index: number, id: I) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, value: V, index: number, id: I) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, value: V, index: number, id: I) => T | void,\n                thisArg?: S): T | undefined {\n    return this.root.forEach(callback, thisArg, 0);\n  }\n\n  keys(): Cursor<I> {\n    return this.root.keys();\n  }\n\n  values(): Cursor<V> {\n    return this.root.values();\n  }\n\n  entries(): Cursor<[I, V]> {\n    return this.root.entries();\n  }\n\n  reverseKeys(): Cursor<I> {\n    return this.root.reverseKeys();\n  }\n\n  reverseValues(): Cursor<V> {\n    return this.root.reverseValues();\n  }\n\n  reverseEntries(): Cursor<[I, V]> {\n    return this.root.reverseEntries();\n  }\n\n  clone(): STree<V, I> {\n    return this.copy(this.root);\n  }\n\n  protected copy(root: STreePage<V, I>): STree<V, I> {\n    const tree = new STree(root);\n    if (tree.identify !== this.identify) {\n      tree.identify = this.identify;\n    }\n    if (tree.compare !== this.compare) {\n      tree.compare = this.compare;\n    }\n    if (tree.pageSplitSize !== this.pageSplitSize) {\n      tree.pageSplitSize = this.pageSplitSize;\n    }\n    return tree;\n  }\n\n  lookup(id: I, start: number = 0): number {\n    const root = this.root;\n    start = Math.min(Math.max(0, start), root.size - 1);\n    let index = start;\n    do {\n      const entry = root.getEntry(index);\n      if (entry !== void 0 && this.compare(entry[0], id) === 0) {\n        return index;\n      }\n      index = (index + 1) % root.size;\n    } while (isFinite(index) && index !== start);\n    return -1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Cursor} from \"@swim/util\";\nimport {KeysCursor} from \"./KeysCursor\";\nimport {ValuesCursor} from \"./ValuesCursor\";\nimport type {STreeContext} from \"./STreeContext\";\nimport {STreeLeaf} from \"./\"; // forward import\n\n/** @hidden */\nexport abstract class STreePage<V = unknown, I = unknown> {\n  abstract readonly arity: number;\n\n  abstract readonly size: number;\n\n  abstract isEmpty(): boolean;\n\n  abstract get(index: number): V | undefined;\n\n  abstract getEntry(index: number): [I, V] | undefined;\n\n  abstract updated(index: number, newValue: V, tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract inserted(index: number, newValue: V, id: I | undefined, tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract removed(index: number, tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract drop(lower: number, tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract take(upper: number, tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract balanced(tree: STreeContext<V, I>): STreePage<V, I>;\n\n  abstract split(index: number): STreePage<V, I>;\n\n  abstract splitLeft(index: number): STreePage<V, I>;\n\n  abstract splitRight(index: number): STreePage<V, I>;\n\n  abstract forEach<T, S>(callback: (this: S, value: V, index: number, id: I) => T | void,\n                         thisArg: S, offset: number): T | undefined;\n\n  keys(): Cursor<I> {\n    return new KeysCursor(this.entries());\n  }\n\n  values(): Cursor<V> {\n    return new ValuesCursor(this.entries());\n  }\n\n  abstract entries(): Cursor<[I, V]>;\n\n  reverseKeys(): Cursor<I> {\n    return new KeysCursor(this.reverseEntries());\n  }\n\n  reverseValues(): Cursor<V> {\n    return new ValuesCursor(this.reverseEntries());\n  }\n\n  abstract reverseEntries(): Cursor<[I, V]>;\n\n  @Lazy\n  static empty<V, I>(): STreeLeaf<V, I> {\n    return new STreeLeaf([]);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport type {STreeContext} from \"./STreeContext\";\nimport {STreePage} from \"./STreePage\";\nimport {STreeNode} from \"./\"; // forward import\n\n/** @hidden */\nexport class STreeLeaf<V, I> extends STreePage<V, I> {\n  /** @hidden */\n  declare readonly slots: ReadonlyArray<[I, V]>;\n\n  constructor(slots: ReadonlyArray<[I, V]>) {\n    super();\n    Object.defineProperty(this, \"slots\", {\n      value: slots,\n      enumerable: true,\n    });\n  }\n\n  get arity(): number {\n    return this.slots.length;\n  }\n\n  get size(): number {\n    return this.slots.length;\n  }\n\n  isEmpty(): boolean {\n    return this.slots.length === 0;\n  }\n\n  get(index: number): V | undefined {\n    const slot = this.slots[index];\n    if (slot !== void 0) {\n      return slot[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  getEntry(index: number): [I, V] | undefined {\n    return this.slots[index];\n  }\n\n  updated(index: number, newValue: V, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    if (index < 0 || index >= this.slots.length) {\n      throw new RangeError(\"\" + index);\n    }\n    return this.updatedItem(index, newValue);\n  }\n\n  private updatedItem(index: number, newValue: V): STreeLeaf<V, I> {\n    const oldItems = this.slots;\n    const oldSlot = oldItems[index];\n    if (oldSlot !== void 0 && newValue !== oldSlot[1]) {\n      const newValues = oldItems.slice(0);\n      newValues[index] = [oldSlot[0], newValue];\n      return new STreeLeaf(newValues);\n    } else {\n      return this;\n    }\n  }\n\n  inserted(index: number, newValue: V, id: I | undefined, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    if (index < 0 || index > this.slots.length) {\n      throw new RangeError(\"\" + index);\n    }\n    return this.insertedItem(index, newValue, id, tree);\n  }\n\n  private insertedItem(index: number, newValue: V, id: I | undefined, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    if (id === void 0) {\n      id = tree.identify(newValue);\n    }\n    const oldSlots = this.slots;\n    const newSlots = new Array<[I, V]>(oldSlots.length + 1);\n    for (let i = 0; i < index; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    newSlots[index] = [id, newValue];\n    for (let i = index; i < oldSlots.length; i += 1) {\n      newSlots[i + 1] = oldSlots[i]!;\n    }\n    return new STreeLeaf(newSlots);\n  }\n\n  removed(index: number, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    if (index < 0 || index >= this.slots.length) {\n      throw new RangeError(\"\" + index);\n    }\n    if (this.slots.length > 1) {\n      return this.removedSlot(index);\n    } else {\n      return STreePage.empty();\n    }\n  }\n\n  private removedSlot(index: number): STreeLeaf<V, I> {\n    const oldSlots = this.slots;\n    const newSlots = new Array<[I, V]>(oldSlots.length - 1);\n    for (let i = 0; i < index; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    for (let i = index; i < newSlots.length; i += 1) {\n      newSlots[i] = oldSlots[i + 1]!;\n    }\n    return new STreeLeaf(newSlots);\n  }\n\n  drop(lower: number, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    const oldSlots = this.slots;\n    if (lower > 0 && oldSlots.length > 0) {\n      if (lower < oldSlots.length) {\n        const size = oldSlots.length - lower;\n        const newSlots = new Array<[I, V]>(size);\n        for (let i = 0; i < size; i += 1) {\n          newSlots[i] = oldSlots[i + lower]!;\n        }\n        return new STreeLeaf(newSlots);\n      } else {\n        return STreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  take(upper: number, tree: STreeContext<V, I>): STreeLeaf<V, I> {\n    const oldSlots = this.slots;\n    if (upper < oldSlots.length && oldSlots.length > 0) {\n      if (upper > 0) {\n        const newSlots = new Array<[I, V]>(upper);\n        for (let i = 0; i < upper; i += 1) {\n          newSlots[i] = oldSlots[i]!;\n        }\n        return new STreeLeaf(newSlots);\n      } else {\n        return STreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  balanced(tree: STreeContext<V, I>): STreePage<V, I> {\n    const size = this.slots.length;\n    if (size > 1 && tree.pageShouldSplit(this)) {\n      return this.split(size >>> 1);\n    } else {\n      return this;\n    }\n  }\n\n  split(index: number): STreeNode<V, I> {\n    const newPages = new Array<STreePage<V, I>>(2);\n    const newLeftPage = this.splitLeft(index);\n    const newRightPage = this.splitRight(index);\n    newPages[0] = newLeftPage;\n    newPages[1] = newRightPage;\n\n    const newKnots = new Array<number>(1);\n    newKnots[0] = index;\n\n    return new STreeNode(newPages, newKnots, this.slots.length);\n  }\n\n  splitLeft(index: number): STreeLeaf<V, I> {\n    const oldSlots = this.slots;\n    const newSlots = new Array<[I, V]>(index);\n    for (let i = 0; i < index; i += 1) {\n      newSlots[i] = oldSlots[i]!;\n    }\n    return new STreeLeaf(newSlots);\n  }\n\n  splitRight(index: number): STreeLeaf<V, I> {\n    const oldSlots = this.slots;\n    const newSize = oldSlots.length - index;\n    const newSlots = new Array<[I, V]>(newSize);\n    for (let i = 0; i < newSize; i += 1) {\n      newSlots[i] = oldSlots[i + index]!;\n    }\n    return new STreeLeaf(newSlots);\n  }\n\n  forEach<T, S>(callback: (this: S, value: V, index: number, id: I) => T | void,\n                thisArg: S, offset: number): T | undefined {\n    for (let i = 0; i < this.slots.length; i += 1) {\n      const slot = this.slots[i]!;\n      const result = callback.call(thisArg, slot[1], offset + i, slot[0]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  entries(): Cursor<[I, V]> {\n    return Cursor.array(this.slots);\n  }\n\n  reverseEntries(): Cursor<[I, V]> {\n    return Cursor.array(this.slots, this.slots.length);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport type {STreeContext} from \"./STreeContext\";\nimport {STreePage} from \"./STreePage\";\nimport {STreeNodeCursor} from \"./\"; // forward import\n\n/** @hidden */\nexport class STreeNode<V, I> extends STreePage<V, I> {\n  /** @hidden */\n  declare readonly pages: ReadonlyArray<STreePage<V, I>>;\n  /** @hidden */\n  declare readonly knots: ReadonlyArray<number>;\n\n  constructor(pages: ReadonlyArray<STreePage<V, I>>, knots: ReadonlyArray<number>, size: number) {\n    super();\n    Object.defineProperty(this, \"pages\", {\n      value: pages,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"knots\", {\n      value: knots,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: size,\n      enumerable: true,\n    });\n  }\n\n  get arity(): number {\n    return this.pages.length;\n  }\n\n  declare readonly size: number;\n\n  isEmpty(): boolean {\n    return this.size === 0;\n  }\n\n  get(index: number): V | undefined {\n    let x = this.lookup(index);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const i = x === 0 ? index : index - this.knots[x - 1]!;\n    return this.pages[x]!.get(i);\n  }\n\n  getEntry(index: number): [I, V] | undefined {\n    let x = this.lookup(index);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const i = x === 0 ? index : index - this.knots[x - 1]!;\n    return this.pages[x]!.getEntry(i);\n  }\n\n  updated(index: number, newValue: V, tree: STreeContext<V, I>): STreeNode<V, I> {\n    let x = this.lookup(index);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const i = x === 0 ? index : index - this.knots[x - 1]!;\n    const oldPage = this.pages[x]!;\n    const newPage = oldPage.updated(i, newValue, tree);\n    if (oldPage !== newPage) {\n      if (oldPage.size !== newPage.size && tree.pageShouldSplit(newPage)) {\n        return this.updatedPageSplit(x, newPage, oldPage);\n      } else {\n        return this.updatedPage(x, newPage, oldPage);\n      }\n    } else {\n      return this;\n    }\n  }\n\n  private updatedPage(x: number, newPage: STreePage<V, I>, oldPage: STreePage<V, I>): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const newPages = oldPages.slice(0);\n    newPages[x] = newPage;\n\n    const oldKnots = this.knots;\n    let newKnots: number[];\n    let newSize: number;\n    if (oldPages.length - 1 > 0) {\n      newKnots = oldKnots.slice(0);\n      if (x > 0) {\n        newSize = oldKnots[x - 1]!;\n      } else {\n        newSize = 0;\n      }\n      for (let i = x; i < newKnots.length; i += 1) {\n        newSize += newPages[i]!.size;\n        newKnots[i] = newSize;\n      }\n      newSize += newPages[newKnots.length]!.size;\n    } else {\n      newKnots = [];\n      newSize = 0;\n    }\n\n    return new STreeNode(newPages, newKnots, newSize);\n  }\n\n  private updatedPageSplit(x: number, newPage: STreePage<V, I>, oldPage: STreePage<V, I>): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const newPages = new Array<STreePage<V, I>>(oldPages.length + 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n\n    const newLeftPage = newPage.splitLeft(newPage.arity >>> 1);\n    const newRightPage = newPage.splitRight(newPage.arity >>> 1);\n    newPages[x] = newLeftPage;\n    newPages[x + 1] = newRightPage;\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i + 1] = oldPages[i]!;\n    }\n\n    return STreeNode.create(newPages);\n  }\n\n  private updatedPageMerge(x: number, newPage: STreeNode<V, I>, oldPage: STreePage<V, I>): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const midPages = newPage.pages;\n    const newPages = new Array<STreePage<V, I>>(oldPages.length + midPages.length - 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n    for (let i = 0; i < midPages.length; i += 1) {\n      newPages[i + x] = midPages[i]!;\n    }\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i + midPages.length - 1] = oldPages[i]!;\n    }\n\n    return STreeNode.create(newPages);\n  }\n\n  inserted(index: number, newValue: V, id: I | undefined, tree: STreeContext<V, I>): STreeNode<V, I> {\n    let x = this.lookup(index);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const subIndex = x === 0 ? index : index - this.knots[x - 1]!;\n    const oldPage = this.pages[x]!;\n    const newPage = oldPage.inserted(subIndex, newValue, id, tree);\n    if (oldPage !== newPage) {\n      if (tree.pageShouldSplit(newPage)) {\n        return this.updatedPageSplit(x, newPage, oldPage);\n      } else {\n        return this.updatedPage(x, newPage, oldPage);\n      }\n    } else {\n      return this;\n    }\n  }\n\n  removed(index: number, tree: STreeContext<V, I>): STreePage<V, I> {\n    let x = this.lookup(index);\n    if (x >= 0) {\n      x += 1;\n    } else {\n      x = -(x + 1);\n    }\n    const subIndex = x === 0 ? index : index - this.knots[x - 1]!;\n    const oldPage = this.pages[x]!;\n    const newPage = oldPage.removed(subIndex, tree);\n    if (oldPage !== newPage) {\n      return this.replacedPage(x, newPage, oldPage, tree);\n    } else {\n      return this;\n    }\n  }\n\n  private replacedPage(x: number, newPage: STreePage<V, I>, oldPage: STreePage<V, I>,\n                       tree: STreeContext<V, I>): STreePage<V, I> {\n    if (!newPage.isEmpty()) {\n      if (newPage instanceof STreeNode && tree.pageShouldMerge(newPage)) {\n        return this.updatedPageMerge(x, newPage, oldPage);\n      } else {\n        return this.updatedPage(x, newPage, oldPage);\n      }\n    } else if (this.pages.length > 2) {\n      return this.removedPage(x, newPage, oldPage);\n    } else if (this.pages.length > 1) {\n      if (x === 0) {\n        return this.pages[1]!;\n      } else {\n        return this.pages[0]!;\n      }\n    } else {\n      return STreePage.empty();\n    }\n  }\n\n  private removedPage(x: number, newPage: STreePage<V, I>, oldPage: STreePage<V, I>): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const newPages = new Array<STreePage<V, I>>(oldPages.length - 1);\n    for (let i = 0; i < x; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n    for (let i = x + 1; i < oldPages.length; i += 1) {\n      newPages[i - 1] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<number>(oldKnots.length - 1);\n    let newSize: number;\n    if (x > 0) {\n      for (let i = 0; i < x; i += 1) {\n        newKnots[i] = oldKnots[i]!;\n      }\n      newSize = oldKnots[x - 1]!;\n    } else {\n      newSize = 0;\n    }\n    for (let i = x; i < newKnots.length; i += 1) {\n      newSize += newPages[i]!.size;\n      newKnots[i] = newSize;\n    }\n    newSize += newPages[newKnots.length]!.size;\n\n    return new STreeNode(newPages, newKnots, newSize);\n  }\n\n  drop(lower: number, tree: STreeContext<V, I>): STreePage<V, I> {\n    if (lower > 0) {\n      if (lower < this.size) {\n        let x = this.lookup(lower);\n        if (x >= 0) {\n          x += 1;\n        } else {\n          x = -(x + 1);\n        }\n        lower = x === 0 ? lower : lower - this.knots[x - 1]!;\n        const oldPages = this.pages;\n        const n = oldPages.length - x;\n        if (n > 1) {\n          let newNode: STreeNode<V, I>;\n          if (x > 0) {\n            const newPages = new Array<STreePage<V, I>>(n);\n            for (let i = 0; i < n; i += 1) {\n              newPages[i] = oldPages[i + x]!;\n            }\n            newNode = STreeNode.create(newPages);\n          } else {\n            newNode = this;\n          }\n          if (lower > 0) {\n            const oldPage = oldPages[x]!;\n            const newPage = oldPage.drop(lower, tree);\n            return newNode.replacedPage(0, newPage, oldPage, tree);\n          } else {\n            return newNode;\n          }\n        } else {\n          return oldPages[x]!.drop(lower, tree);\n        }\n      } else {\n        return STreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  take(upper: number, tree: STreeContext<V, I>): STreePage<V, I> {\n    if (upper < this.size) {\n      if (upper > 0) {\n        let x = this.lookup(upper);\n        if (x >= 0) {\n          x += 1;\n        } else {\n          x = -(x + 1);\n        }\n        upper = x === 0 ? upper : upper - this.knots[x - 1]!;\n        const oldPages = this.pages;\n        const n = upper === 0 ? x : x + 1;\n        if (n > 1) {\n          let newNode: STreeNode<V, I>;\n          if (x < oldPages.length) {\n            const newPages = new Array<STreePage<V, I>>(n);\n            for (let i = 0; i < n; i += 1) {\n              newPages[i] = oldPages[i]!;\n            }\n            const newKnots = new Array<number>(n - 1);\n            for (let i = 0; i < newKnots.length; i += 1) {\n              newKnots[i] = this.knots[i]!;\n            }\n            const newSize = newKnots[n - 2]! + newPages[n - 1]!.size;\n            newNode = new STreeNode(newPages, newKnots, newSize);\n          } else {\n            newNode = this;\n          }\n          if (upper > 0) {\n            const oldPage = oldPages[x]!;\n            const newPage = oldPage.take(upper, tree);\n            return newNode.replacedPage(x, newPage, oldPage, tree);\n          } else {\n            return newNode;\n          }\n        } else if (upper > 0) {\n          return oldPages[0]!.take(upper, tree);\n        } else {\n          return oldPages[0]!;\n        }\n      } else {\n        return STreePage.empty();\n      }\n    } else {\n      return this;\n    }\n  }\n\n  balanced(tree: STreeContext<V, I>): STreeNode<V, I> {\n    if (this.pages.length > 1 && tree.pageShouldSplit(this)) {\n      const x = this.knots.length >>> 1;\n      return this.split(x);\n    } else {\n      return this;\n    }\n  }\n\n  split(x: number): STreeNode<V, I> {\n    const newPages = new Array<STreePage<V, I>>(2);\n    const newLeftPage = this.splitLeft(x);\n    const newRightPage = this.splitRight(x);\n    newPages[0] = newLeftPage;\n    newPages[1] = newRightPage;\n\n    const newKnots = new Array<number>(1);\n    newKnots[0] = newLeftPage.size;\n\n    return new STreeNode(newPages, newKnots, this.size);\n  }\n\n  splitLeft(x: number): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const newPages = new Array<STreePage<V, I>>(x + 1);\n    for (let i = 0; i < x + 1; i += 1) {\n      newPages[i] = oldPages[i]!;\n    }\n\n    const oldKnots = this.knots;\n    const newKnots = new Array<number>(x);\n    for (let i = 0; i < x; i += 1) {\n      newKnots[i] = oldKnots[i]!;\n    }\n\n    let newSize = 0;\n    for (let i = 0; i <= x; i += 1) {\n      newSize += newPages[i]!.size;\n    }\n\n    return new STreeNode(newPages, newKnots, newSize);\n  }\n\n  splitRight(x: number): STreeNode<V, I> {\n    const oldPages = this.pages;\n    const y = oldPages.length - (x + 1);\n    const newPages = new Array<STreePage<V, I>>(y);\n    for (let i = 0; i < y; i += 1) {\n      newPages[i] = oldPages[i + (x + 1)]!;\n    }\n\n    const newKnots = new Array<number>(y - 1);\n    let newSize;\n    if (y > 0) {\n      newSize = newPages[0]!.size;\n      for (let i = 1; i < y; i += 1) {\n        newKnots[i - 1] = newSize;\n        newSize += newPages[i]!.size;\n      }\n    } else {\n      newSize = 0;\n    }\n\n    return new STreeNode(newPages, newKnots, newSize);\n  }\n\n  forEach<T, S>(callback: (this: S, value: V, index: number, id: I) => T | void,\n                thisArg: S, offset: number): T | undefined {\n    for (let i = 0; i < this.pages.length; i += 1) {\n      const page = this.pages[i]!;\n      const result = page.forEach(callback, thisArg, offset);\n      if (result !== void 0) {\n        return result;\n      }\n      offset += page.size;\n    }\n    return void 0;\n  }\n\n  entries(): Cursor<[I, V]> {\n    return new STreeNodeCursor(this.pages);\n  }\n\n  reverseEntries(): Cursor<[I, V]> {\n    return new STreeNodeCursor(this.pages, this.size, this.pages.length);\n  }\n\n  private lookup(index: number): number {\n    let lo = 0;\n    let hi = this.knots.length - 1;\n    while (lo <= hi) {\n      const mid = (lo + hi) >>> 1;\n      if (index > this.knots[mid]!) {\n        lo = mid + 1;\n      } else if (index < this.knots[mid]!) {\n        hi = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -(lo + 1);\n  }\n\n  static create<V, I>(pages: ReadonlyArray<STreePage<V, I>>): STreeNode<V, I> {\n    const knots = new Array<number>(pages.length - 1);\n    let size = 0;\n    for (let i = 0, n  = knots.length; i < n; i += 1) {\n      size += pages[i]!.size;\n      knots[i] = size;\n    }\n    size += pages[knots.length]!.size;\n    return new STreeNode(pages, knots, size);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {NodeCursor} from \"./NodeCursor\";\nimport type {STreePage} from \"./STreePage\";\n\n/** @hidden */\nexport class STreeNodeCursor<V, I> extends NodeCursor<[I, V], STreePage<V, I>> {\n  constructor(pages: ReadonlyArray<STreePage<V, I>>, index: number = 0,\n              childIndex: number = 0, childCursor: Cursor<[I, V]> | null = null) {\n    super(pages, index, childIndex, childCursor);\n  }\n\n  protected pageSize(page: STreePage<V, I>): number {\n    return page.size;\n  }\n\n  protected pageCursor(page: STreePage<V, I>): Cursor<[I, V]> {\n    return page.entries();\n  }\n\n  protected reversePageCursor(page: STreePage<V, I>): Cursor<[I, V]> {\n    return page.reverseEntries();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface ConstraintKey {\n  readonly id: number;\n}\n\nexport const ConstraintKey = {} as {\n  /** @hidden */\n  idCount: number;\n\n  nextId(): number;\n};\n\nObject.defineProperty(ConstraintKey, \"idCount\", {\n  value: 0,\n  enumerable: true,\n  configurable: true,\n});\n\nConstraintKey.nextId = function (): number {\n  const nextId = ConstraintKey.idCount + 1;\n  Object.defineProperty(ConstraintKey, \"idCount\", {\n    value: nextId,\n    enumerable: true,\n    configurable: true,\n  });\n  return nextId;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {ConstraintKey} from \"./ConstraintKey\";\n\n/** @hidden */\nexport class ConstraintMap<K extends ConstraintKey, V> {\n  constructor(index?: {[id: number]: number | undefined}, array?: Array<[K, V]>) {\n    Object.defineProperty(this, \"index\", {\n      value: index !== void 0 ? index : {},\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"array\", {\n      value: array !== void 0 ? array : [],\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly index: {[id: number]: number | undefined};\n\n  /** @hidden */\n  declare readonly array: Array<[K, V]>;\n\n  get size(): number {\n    return this.array.length;\n  }\n\n  isEmpty(): boolean {\n    return this.array.length === 0;\n  }\n\n  has(key: K): boolean {\n    return this.index[key.id] !== void 0;\n  }\n\n  get(key: K): V | undefined {\n    const k = this.index[key.id];\n    return k !== void 0 ? this.array[k]![1] : void 0;\n  }\n\n  getField(key: K): [K, V] | undefined {\n    const k = this.index[key.id];\n    return k !== void 0 ? this.array[k] : void 0;\n  }\n\n  getEntry(k: number): [K, V] | undefined {\n    return this.array[k];\n  }\n\n  set(key: K, newValue: V): V | undefined {\n    const k = this.index[key.id];\n    if (k !== void 0) {\n      const entry = this.array[k]!;\n      const oldValue = entry[1];\n      entry[1] = newValue;\n      return oldValue;\n    } else {\n      this.index[key.id] = this.array.length;\n      this.array.push([key, newValue]);\n      return void 0;\n    }\n  }\n\n  delete(key: K): boolean {\n    const k = this.index[key.id];\n    if (k !== void 0) {\n      delete this.index[key.id];\n      const item = this.array[k];\n      const last = this.array.pop()!;\n      if (item !== last) {\n        this.array[k] = last;\n        this.index[last[0].id] = k;\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  remove(key: K): V | undefined {\n    const k = this.index[key.id];\n    if (k !== void 0) {\n      delete this.index[key.id];\n      const item = this.array[k]!;\n      const last = this.array.pop()!;\n      if (item !== last) {\n        this.array[k] = last;\n        this.index[last[0].id] = k;\n      }\n      return item[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  clear(): void {\n    Object.defineProperty(this, \"index\", {\n      value: {},\n      enumerable: true,\n      configurable: true,\n    });\n    this.array.length = 0;\n  }\n\n  forEach<T>(callback: (key: K, value: V) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, key: K, value: V) => T | void,\n                thisArg?: S): T | undefined {\n    const array = this.array;\n    for (let i = 0, n = array.length; i < n; i += 1) {\n      const item = array[i]!;\n      const result = callback.call(thisArg, item[0], item[1]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  clone(): ConstraintMap<K, V> {\n    const oldArray = this.array;\n    const n = oldArray.length;\n    const newIndex = {} as {[id: number]: number | undefined};\n    const newArray = new Array<[K, V]>(n);\n    for (let i = 0; i < n; i += 1) {\n      const [key, value] = oldArray[i]!;\n      newArray[i] = [key, value];\n      newIndex[key.id] = i;\n    }\n    return new ConstraintMap(newIndex, newArray);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstraintKey} from \"./ConstraintKey\";\nimport type {Constraint} from \"./Constraint\";\nimport type {ConstraintSolver} from \"./ConstraintSolver\";\n\n/** @hidden */\nexport interface ConstraintSymbol extends ConstraintKey {\n  /** @hidden */\n  isExternal(): boolean;\n\n  /** @hidden */\n  isDummy(): boolean;\n\n  /** @hidden */\n  isInvalid(): boolean;\n\n  /** @hidden */\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void;\n\n  /** @hidden */\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void;\n\n  updateConstraintSolution(value: number): void;\n}\n\n/** @hidden */\nexport const ConstraintSymbol = {} as {\n  readonly invalid: ConstraintInvalid; // defined by ConstraintInvalid\n};\n\n/** @hidden */\nexport class ConstraintSlack implements ConstraintSymbol {\n  constructor() {\n    Object.defineProperty(this, \"id\", {\n      value: ConstraintKey.nextId(),\n      enumerable: true,\n    });\n  }\n\n  declare readonly id: number;\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  updateConstraintSolution(value: number): void {\n    // nop\n  }\n}\n\n/** @hidden */\nexport class ConstraintDummy implements ConstraintSymbol {\n  constructor() {\n    Object.defineProperty(this, \"id\", {\n      value: ConstraintKey.nextId(),\n      enumerable: true,\n    });\n  }\n\n  declare readonly id: number;\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return true;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  updateConstraintSolution(value: number): void {\n    // nop\n  }\n}\n\n/** @hidden */\nexport class ConstraintError implements ConstraintSymbol {\n  constructor() {\n    Object.defineProperty(this, \"id\", {\n      value: ConstraintKey.nextId(),\n      enumerable: true,\n    });\n  }\n\n  declare readonly id: number;\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  updateConstraintSolution(value: number): void {\n    // nop\n  }\n}\n\n/** @hidden */\nexport class ConstraintInvalid implements ConstraintSymbol {\n  get id(): number {\n    return -1;\n  }\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return true;\n  }\n\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    // nop\n  }\n\n  updateConstraintSolution(value: number): void {\n    // nop\n  }\n}\nObject.defineProperty(ConstraintSymbol, \"invalid\", {\n  value: new ConstraintInvalid(),\n  enumerable: true,\n  configurable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\nimport {ConstraintSum} from \"./\"; // forward import\nimport {ConstraintTerm} from \"./\"; // forward import\nimport {ConstraintProduct} from \"./\"; // forward import\nimport {ConstraintConstant} from \"./\"; // forward import\n\nexport type AnyConstraintExpression = ConstraintExpression | number;\n\nexport interface ConstraintExpression {\n  readonly terms: ConstraintMap<ConstraintVariable, number>;\n\n  readonly constant: number;\n\n  isConstant(): boolean;\n\n  plus(that: AnyConstraintExpression): ConstraintExpression;\n\n  negative(): ConstraintExpression;\n\n  minus(that: AnyConstraintExpression): ConstraintExpression;\n\n  times(scalar: number): ConstraintExpression;\n\n  divide(scalar: number): ConstraintExpression;\n}\n\nexport const ConstraintExpression = {} as {\n  fromAny(value: AnyConstraintExpression): ConstraintExpression;\n\n  sum(...expressions: AnyConstraintExpression[]): ConstraintSum;\n\n  product(coefficient: number, variable: ConstraintVariable): ConstraintProduct;\n\n  constant(value: number): ConstraintConstant;\n\n  readonly zero: ConstraintConstant; // defined by ConstraintConstant\n};\n\nConstraintExpression.fromAny = function (value: AnyConstraintExpression): ConstraintExpression {\n  if (typeof value === \"number\") {\n    return ConstraintExpression.constant(value);\n  } else {\n    return value;\n  }\n};\n\nConstraintExpression.sum = function (...expressions: AnyConstraintExpression[]): ConstraintSum {\n  const terms = new ConstraintMap<ConstraintVariable, number>();\n  let constant = 0;\n  for (let i = 0, n = expressions.length; i < n; i += 1) {\n    const expression = expressions[i]!;\n    if (typeof expression === \"number\") {\n      constant += expression;\n    } else if (ConstraintTerm.is(expression)) {\n      const variable = expression.variable;\n      if (variable !== null) {\n        const field = terms.getField(variable);\n        if (field !== void 0) {\n          field[1] += expression.coefficient;\n        } else {\n          terms.set(variable, expression.coefficient);\n        }\n      } else {\n        constant += expression.constant;\n      }\n    } else {\n      const subterms = expression.terms;\n      for (let j = 0, k = subterms.size; j < k; j += 1) {\n        const [variable, coefficient] = subterms.getEntry(j)!;\n        const field = terms.getField(variable);\n        if (field !== void 0) {\n          field[1] += coefficient;\n        } else {\n          terms.set(variable, coefficient);\n        }\n      }\n      constant += expression.constant;\n    }\n  }\n  return new ConstraintSum(terms, constant);\n};\n\nConstraintExpression.product = function (coefficient: number, variable: ConstraintVariable): ConstraintProduct {\n  return new ConstraintProduct(coefficient, variable);\n};\n\nConstraintExpression.constant = function (value: number): ConstraintConstant {\n  if (value === 0) {\n    return ConstraintExpression.zero;\n  } else {\n    return new ConstraintConstant(value);\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\n\n/** @hidden */\nexport class ConstraintSum implements ConstraintExpression, Debug {\n  constructor(terms: ConstraintMap<ConstraintVariable, number>, constant: number) {\n    Object.defineProperty(this, \"terms\", {\n      value: terms,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"constant\", {\n      value: constant,\n      enumerable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return this.terms.isEmpty();\n  }\n\n  declare readonly terms: ConstraintMap<ConstraintVariable, number>;\n\n  declare readonly constant: number;\n\n  plus(that: AnyConstraintExpression): ConstraintExpression {\n    return ConstraintExpression.sum(this, that);\n  }\n\n  negative(): ConstraintExpression {\n    const oldTerms = this.terms;\n    const newTerms = new ConstraintMap<ConstraintVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, -coefficient);\n    }\n    return new ConstraintSum(newTerms, -this.constant);\n  }\n\n  minus(that: AnyConstraintExpression): ConstraintExpression {\n    if (typeof that === \"number\") {\n      that = ConstraintExpression.constant(that);\n    } else {\n      that = that.negative();\n    }\n    return ConstraintExpression.sum(this, that);\n  }\n\n  times(scalar: number): ConstraintExpression {\n    const oldTerms = this.terms;\n    const newTerms = new ConstraintMap<ConstraintVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, coefficient * scalar);\n    }\n    return new ConstraintSum(newTerms, this.constant * scalar);\n  }\n\n  divide(scalar: number): ConstraintExpression {\n    const oldTerms = this.terms;\n    const newTerms = new ConstraintMap<ConstraintVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, coefficient / scalar);\n    }\n    return new ConstraintSum(newTerms, this.constant / scalar);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"ConstraintExpression\").write(46/*'.'*/).write(\"sum\").write(40/*'('*/);\n    const n = this.terms.size;\n    for (let i = 0; i < n; i += 1) {\n      const [variable, coefficient] = this.terms.getEntry(i)!;\n      if (i > 0) {\n        output = output.write(\", \");\n      }\n      if (coefficient === 1) {\n        output = output.debug(variable);\n      } else {\n        output = output.debug(ConstraintExpression.product(coefficient, variable));\n      }\n    }\n    if (this.constant !== 0) {\n      if (n > 0) {\n        output = output.write(\", \");\n      }\n      output = output.debug(this.constant);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\n\n/** @hidden */\nexport interface ConstraintTerm extends ConstraintExpression {\n  readonly coefficient: number;\n\n  readonly variable: ConstraintVariable | null;\n\n  negative(): ConstraintTerm;\n}\n\n/** @hidden */\nexport const ConstraintTerm = {} as {\n  is(value: unknown): value is ConstraintTerm;\n};\n\nConstraintTerm.is = function (value: unknown): value is ConstraintTerm {\n  if (typeof value !== void 0 && value !== null) {\n    const term = value as ConstraintTerm;\n    return \"coefficient\" in term && \"variable\" in term;\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintTerm} from \"./ConstraintTerm\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\n\n/** @hidden */\nexport class ConstraintProduct implements ConstraintTerm, Debug {\n  constructor(coefficient: number, variable: ConstraintVariable) {\n    Object.defineProperty(this, \"coefficient\", {\n      value: coefficient,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"variable\", {\n      value: variable,\n      enumerable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n\n  declare readonly coefficient: number;\n\n  declare readonly variable: ConstraintVariable;\n\n  get terms(): ConstraintMap<ConstraintVariable, number> {\n    const terms = new ConstraintMap<ConstraintVariable, number>();\n    terms.set(this.variable, this.coefficient);\n    return terms;\n  }\n\n  get constant(): number {\n    return 0;\n  }\n\n  plus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (that instanceof ConstraintProduct && this.variable === that.variable) {\n      return ConstraintExpression.product(this.coefficient + that.coefficient, this.variable);\n    } else if (this.variable === that) {\n      return ConstraintExpression.product(this.coefficient + 1, this.variable);\n    } else {\n      return ConstraintExpression.sum(this, that);\n    }\n  }\n\n  negative(): ConstraintTerm {\n    return ConstraintExpression.product(-this.coefficient, this.variable);\n  }\n\n  minus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (that instanceof ConstraintProduct && this.variable === that.variable) {\n      return ConstraintExpression.product(this.coefficient - that.coefficient, this.variable);\n    } else if (this.variable === that) {\n      return ConstraintExpression.product(this.coefficient - 1, this.variable);\n    } else {\n      return ConstraintExpression.sum(this, that.negative());\n    }\n  }\n\n  times(scalar: number): ConstraintExpression {\n    return ConstraintExpression.product(this.coefficient * scalar, this.variable);\n  }\n\n  divide(scalar: number): ConstraintExpression {\n    return ConstraintExpression.product(this.coefficient / scalar, this.variable);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"ConstraintExpression\").write(46/*'.'*/).write(\"product\").write(40/*'('*/)\n        .debug(this.coefficient).write(\", \").debug(this.variable).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintTerm} from \"./ConstraintTerm\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\n\n/** @hidden */\nexport class ConstraintConstant implements ConstraintTerm, Debug {\n  constructor(constant: number) {\n    Object.defineProperty(this, \"constant\", {\n      value: constant,\n      enumerable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  get coefficient(): number {\n    return 0;\n  }\n\n  get variable(): ConstraintVariable | null {\n    return null;\n  }\n\n  get terms(): ConstraintMap<ConstraintVariable, number> {\n    return new ConstraintMap<ConstraintVariable, number>();\n  }\n\n  declare readonly constant: number;\n\n  plus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (that instanceof ConstraintConstant) {\n      return ConstraintExpression.constant(this.constant + that.constant);\n    } else {\n      return ConstraintExpression.sum(this, that);\n    }\n  }\n\n  negative(): ConstraintTerm {\n    return ConstraintExpression.constant(-this.constant);\n  }\n\n  minus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (that instanceof ConstraintConstant) {\n      return ConstraintExpression.constant(this.constant - that.constant);\n    } else {\n      return ConstraintExpression.sum(this, that.negative());\n    }\n  }\n\n  times(scalar: number): ConstraintExpression {\n    return ConstraintExpression.constant(this.constant * scalar);\n  }\n\n  divide(scalar: number): ConstraintExpression {\n    return ConstraintExpression.constant(this.constant / scalar);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"ConstraintExpression\").write(46/*'.'*/)\n    if (this.constant === 0) {\n      output = output.write(\"zero\");\n    } else {\n      output = output.write(\"constant\").write(40/*'('*/).debug(this.constant).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n\nObject.defineProperty(ConstraintExpression, \"zero\", {\n  value: new ConstraintConstant(0),\n  enumerable: true,\n  configurable: true,\n});\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintKey} from \"./ConstraintKey\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintTerm} from \"./ConstraintTerm\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\nimport type {ConstraintStrength} from \"./ConstraintStrength\";\nimport type {Constraint} from \"./Constraint\";\nimport type {ConstraintScope} from \"./ConstraintScope\";\nimport type {ConstraintSolver} from \"./ConstraintSolver\";\n\nexport class ConstraintBinding implements ConstraintVariable, Debug {\n  constructor(owner: ConstraintScope, name: string, state: number, strength: ConstraintStrength) {\n    Object.defineProperty(this, \"id\", {\n      value: ConstraintKey.nextId(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"owner\", {\n      value: owner,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"name\", {\n      value: name,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"strength\", {\n      value: strength,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"constraintFlags\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"conditionCount\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly id: number;\n\n  declare readonly owner: ConstraintScope;\n\n  declare readonly name: string;\n\n  /** @hidden */\n  isExternal(): boolean {\n    return true;\n  }\n\n  /** @hidden */\n  isDummy(): boolean {\n    return false;\n  }\n\n  /** @hidden */\n  isInvalid(): boolean {\n    return false;\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n\n  declare readonly state: number;\n\n  setState(newState: number): void {\n    const oldState = this.state;\n    if (oldState !== newState) {\n      this.willSetState(newState, oldState);\n      Object.defineProperty(this, \"state\", {\n        value: newState,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onSetState(newState, oldState);\n      this.didSetState(newState, oldState);\n    }\n  }\n\n  protected willSetState(newState: number, oldState: number): void {\n    // hook\n  }\n\n  protected onSetState(newState: number, oldState: number): void {\n    if (this.isConstraining()) {\n      this.owner.setConstraintVariable(this, newState);\n    }\n  }\n\n  protected didSetState(newState: number, oldState: number): void {\n    // hook\n  }\n\n  evaluateConstraintVariable(): void {\n    // nop\n  }\n\n  updateConstraintSolution(newState: number): void {\n    if (this.isConstrained()) {\n      this.setState(newState);\n    }\n  }\n\n  declare readonly strength: ConstraintStrength;\n\n  get coefficient(): number {\n    return 1;\n  }\n\n  get variable(): ConstraintVariable {\n    return this;\n  }\n\n  get terms(): ConstraintMap<ConstraintVariable, number> {\n    const terms = new ConstraintMap<ConstraintVariable, number>();\n    terms.set(this, 1);\n    return terms;\n  }\n\n  get constant(): number {\n    return 0;\n  }\n\n  plus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (this === that) {\n      return ConstraintExpression.product(2, this);\n    } else {\n      return ConstraintExpression.sum(this, that);\n    }\n  }\n\n  negative(): ConstraintTerm {\n    return ConstraintExpression.product(-1, this);\n  }\n\n  minus(that: AnyConstraintExpression): ConstraintExpression {\n    that = ConstraintExpression.fromAny(that);\n    if (this === that) {\n      return ConstraintExpression.zero;\n    } else {\n      return ConstraintExpression.sum(this, that.negative());\n    }\n  }\n\n  times(scalar: number): ConstraintExpression {\n    return ConstraintExpression.product(scalar, this);\n  }\n\n  divide(scalar: number): ConstraintExpression {\n    return ConstraintExpression.product(1 / scalar, this);\n  }\n\n  /** @hidden */\n  declare readonly constraintFlags: number;\n\n  /** @hidden */\n  setConstraintFlags(constraintFlags: number): void {\n    Object.defineProperty(this, \"constraintFlags\", {\n      value: constraintFlags,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isConstrained(): boolean {\n    return (this.constraintFlags & ConstraintBinding.ConstrainedFlag) !== 0;\n  }\n\n  constrain(constrained: boolean = true): this {\n    const constraintFlags = this.constraintFlags;\n    if (constrained && (constraintFlags & ConstraintBinding.ConstrainedFlag) === 0) {\n      this.setConstraintFlags(constraintFlags | ConstraintBinding.ConstrainedFlag);\n      if (this.conditionCount !== 0) {\n        this.stopConstraining();\n      }\n    } else if (!constrained && (constraintFlags & ConstraintBinding.ConstrainedFlag) !== 0) {\n      this.setConstraintFlags(constraintFlags & ~ConstraintBinding.ConstrainedFlag);\n      if (this.conditionCount !== 0) {\n        this.startConstraining();\n        this.updateConstraintVariable();\n      }\n    }\n    return this;\n  }\n\n  /** @hidden */\n  declare readonly conditionCount: number;\n\n  /** @hidden */\n  addConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    const oldConditionCount = this.conditionCount;\n    const newConditionCount = oldConditionCount + 1;\n    Object.defineProperty(this, \"conditionCount\", {\n      value: newConditionCount,\n      enumerable: true,\n      configurable: true,\n    });\n    if (!this.isConstrained() && oldConditionCount === 0) {\n      this.startConstraining();\n      this.updateConstraintVariable();\n    }\n  }\n\n  /** @hidden */\n  removeConstraintCondition(constraint: Constraint, solver: ConstraintSolver): void {\n    const oldConditionCount = this.conditionCount;\n    const newConditionCount = oldConditionCount - 1;\n    Object.defineProperty(this, \"conditionCount\", {\n      value: newConditionCount,\n      enumerable: true,\n      configurable: true,\n    });\n    if (!this.isConstrained() && newConditionCount === 0) {\n      this.stopConstraining();\n    }\n  }\n\n  /** @hidden */\n  isConstraining(): boolean {\n    return (this.constraintFlags & ConstraintBinding.ConstrainingFlag) !== 0;\n  }\n\n  /** @hidden */\n  startConstraining(): void {\n    if ((this.constraintFlags & ConstraintBinding.ConstrainingFlag) === 0) {\n      this.willStartConstraining();\n      this.setConstraintFlags(this.constraintFlags | ConstraintBinding.ConstrainingFlag);\n      this.onStartConstraining();\n      this.didStartConstraining();\n    }\n  }\n\n  /** @hidden */\n  willStartConstraining(): void {\n    // hook\n  }\n\n  /** @hidden */\n  onStartConstraining(): void {\n    this.owner.addConstraintVariable(this);\n  }\n\n  /** @hidden */\n  didStartConstraining(): void {\n    // hook\n  }\n\n  /** @hidden */\n  stopConstraining(): void {\n    if ((this.constraintFlags & ConstraintBinding.ConstrainingFlag) !== 0) {\n      this.willStopConstraining();\n      this.setConstraintFlags(this.constraintFlags & ~ConstraintBinding.ConstrainingFlag);\n      this.onStopConstraining();\n      this.didStopConstraining();\n    }\n  }\n\n  /** @hidden */\n  willStopConstraining(): void {\n    // hook\n  }\n\n  /** @hidden */\n  onStopConstraining(): void {\n    this.owner.removeConstraintVariable(this);\n  }\n\n  /** @hidden */\n  didStopConstraining(): void {\n    // hook\n  }\n\n  updateConstraintVariable(): void {\n    const state = this.state;\n    if (state !== void 0) {\n      this.owner.setConstraintVariable(this, this.state);\n    }\n  }\n\n  debug(output: Output): void {\n    output = output.debug(this.owner).write(46/*'.'*/).write(\"constraintVariable\")\n        .write(40/*'('*/).debug(this.name).write(\", \").debug(this.state).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  /** @hidden */\n  static readonly ConstrainedFlag: number = 1 << 0;\n  /** @hidden */\n  static readonly ConstrainingFlag: number = 1 << 1;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport type AnyConstraintStrength = ConstraintStrength | ConstraintStrengthInit;\n\nexport type ConstraintStrengthInit = \"required\" | \"strong\" | \"medium\" | \"weak\";\n\nexport type ConstraintStrength = number;\n\nexport const ConstraintStrength = {} as {\n  readonly Required: number;\n  readonly Strong: number;\n  readonly Medium: number;\n  readonly Weak: number;\n  readonly Unbound: number;\n\n  clip(strength: ConstraintStrength): ConstraintStrength;\n\n  fromAny(strength: AnyConstraintStrength): ConstraintStrength;\n};\n\nObject.defineProperty(ConstraintStrength, \"Required\", {\n  value: 1001001000,\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ConstraintStrength, \"Strong\", {\n  value: 1000000,\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ConstraintStrength, \"Medium\", {\n  value: 1000,\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ConstraintStrength, \"Weak\", {\n  value: 1,\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ConstraintStrength, \"Unbound\", {\n  value: -1,\n  enumerable: true,\n  configurable: true,\n});\n\nConstraintStrength.clip = function (strength: ConstraintStrength): ConstraintStrength {\n  return Math.min(Math.max(0, strength), ConstraintStrength.Required);\n};\n\nConstraintStrength.fromAny = function (strength: AnyConstraintStrength): ConstraintStrength {\n  if (typeof strength === \"number\") {\n    return ConstraintStrength.clip(strength);\n  } else if (strength === \"required\") {\n    return ConstraintStrength.Required;\n  } else if (strength === \"strong\") {\n    return ConstraintStrength.Strong;\n  } else if (strength === \"medium\") {\n    return ConstraintStrength.Medium;\n  } else if (strength === \"weak\") {\n    return ConstraintStrength.Weak;\n  }\n  throw new TypeError(\"\" + strength);\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintKey} from \"./ConstraintKey\";\nimport type {ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintRelation} from \"./ConstraintRelation\";\nimport {ConstraintStrength} from \"./ConstraintStrength\";\nimport type {ConstraintScope} from \"./ConstraintScope\";\n\nexport class Constraint implements ConstraintKey, Debug {\n  constructor(scope: ConstraintScope, expression: ConstraintExpression,\n              relation: ConstraintRelation, strength: ConstraintStrength) {\n    Object.defineProperty(this, \"id\", {\n      value: ConstraintKey.nextId(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"scope\", {\n      value: scope,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"expression\", {\n      value: expression,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"relation\", {\n      value: relation,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"strength\", {\n      value: strength,\n      enumerable: true,\n    });\n  }\n\n  declare readonly id: number;\n\n  declare readonly scope: ConstraintScope;\n\n  declare readonly expression: ConstraintExpression;\n\n  declare readonly relation: ConstraintRelation;\n\n  declare readonly strength: ConstraintStrength;\n\n  isConstrained(): boolean {\n    return this.scope.hasConstraint(this);\n  }\n\n  constrain(constrained: boolean = true): this {\n    if (constrained) {\n      this.scope.addConstraint(this);\n    } else {\n      this.scope.removeConstraint(this);\n    }\n    return this;\n  }\n\n  debug(output: Output): void {\n    output = output.debug(this.scope).write(46/*'.'*/).write(\"constraint\").write(40/*'('*/)\n        .debug(this.expression).write(\", \").debug(this.relation).write(\", \").debug(void 0).write(\", \");\n    if (this.strength === ConstraintStrength.Required) {\n      output = output.debug(\"required\");\n    } else if (this.strength === ConstraintStrength.Strong) {\n      output = output.debug(\"strong\");\n    } else if (this.strength === ConstraintStrength.Medium) {\n      output = output.debug(\"medium\");\n    } else if (this.strength === ConstraintStrength.Weak) {\n      output = output.debug(\"weak\");\n    } else {\n      output = output.debug(this.strength);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintRelation} from \"./ConstraintRelation\";\nimport {AnyConstraintStrength, ConstraintStrength} from \"./ConstraintStrength\";\nimport {Constraint} from \"./Constraint\";\nimport type {ConstraintScope} from \"./ConstraintScope\";\n\nexport class ConstraintGroup {\n  constructor(scope: ConstraintScope) {\n    Object.defineProperty(this, \"scope\", {\n      value: scope,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"constraints\", {\n      value: [],\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"constrained\", {\n      value: false,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly scope: ConstraintScope;\n\n  constraint(lhs: AnyConstraintExpression, relation: ConstraintRelation,\n             rhs?: AnyConstraintExpression, strength?: AnyConstraintStrength): Constraint {\n    lhs = ConstraintExpression.fromAny(lhs);\n    if (rhs !== void 0) {\n      rhs = ConstraintExpression.fromAny(rhs);\n    }\n    const expression = rhs !== void 0 ? lhs.minus(rhs) : lhs;\n    if (strength === void 0) {\n      strength = ConstraintStrength.Required;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    const constraint = new Constraint(this.scope, expression, relation, strength);\n    this.addConstraint(constraint);\n    return constraint;\n  }\n\n  declare readonly constraints: ReadonlyArray<Constraint>;\n\n  hasConstraint(constraint: Constraint): boolean {\n    const constraints = this.constraints;\n    return constraints.indexOf(constraint) >= 0;\n  }\n\n  addConstraint(constraint: Constraint): void {\n    const constraints = this.constraints as Constraint[];\n    if (constraints.indexOf(constraint) < 0) {\n      constraints.push(constraint);\n      constraint.constrain(this.constrained);\n    }\n  }\n\n  removeConstraint(constraint: Constraint): void {\n    const constraints = this.constraints as Constraint[];\n    if (constraints !== void 0) {\n      const index = constraints.indexOf(constraint);\n      if (index >= 0) {\n        constraints.splice(index, 1);\n        constraint.constrain(false);\n      }\n    }\n  }\n\n  /** @hidden */\n  enableConstraints(): void {\n    const constraints = this.constraints;\n    for (let i = 0, n = constraints.length ; i < n; i += 1) {\n      constraints[i]!.constrain(true);\n    }\n  }\n\n  /** @hidden */\n  disableConstraints(): void {\n    const constraints = this.constraints;\n    for (let i = 0, n = constraints.length ; i < n; i += 1) {\n      constraints[i]!.constrain(false);\n    }\n  }\n\n  /** @hidden */\n  declare readonly constrained: boolean;\n\n  isConstrained(): boolean {\n    return this.constrained;\n  }\n\n  constrain(constrained: boolean = true): this {\n    if (constrained && !this.constrained) {\n      Object.defineProperty(this, \"constrained\", {\n        value: true,\n        enumerable: true,\n        configurable: true,\n      });\n      this.enableConstraints();\n    } else if (!constrained && this.constrained) {\n      Object.defineProperty(this, \"constrained\", {\n        value: false,\n        enumerable: true,\n        configurable: true,\n      });\n      this.disableConstraints();\n    }\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent} from \"@swim/util\";\nimport type {ConstraintMap} from \"./ConstraintMap\";\nimport {ConstraintSymbol, ConstraintDummy} from \"./ConstraintSymbol\";\nimport type {ConstraintSolver} from \"./ConstraintSolver\";\n\n/** @hidden */\nexport class ConstraintRow {\n  constructor(solver: ConstraintSolver, symbol: ConstraintSymbol | null,\n              cells: ConstraintMap<ConstraintSymbol, number>, constant: number) {\n    Object.defineProperty(this, \"solver\", {\n      value: solver,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"symbol\", {\n      value: symbol,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"cells\", {\n      value: cells,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"constant\", {\n      value: constant,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly solver: ConstraintSolver;\n\n  declare readonly symbol: ConstraintSymbol | null;\n\n  /** @hidden */\n  setSymbol(symbol: ConstraintSymbol | null): void {\n    Object.defineProperty(this, \"symbol\", {\n      value: symbol,\n      enumerable: true,\n      configurable: true,\n    });\n    this.invalidate();\n  }\n\n  declare readonly cells: ConstraintMap<ConstraintSymbol, number>;\n\n  declare readonly constant: number;\n\n  /** @hidden */\n  setConstant(constant: number): void {\n    if (this.constant !== constant) {\n      Object.defineProperty(this, \"constant\", {\n        value: constant,\n        enumerable: true,\n        configurable: true,\n      });\n      this.invalidate();\n    }\n  }\n\n  isConstant(): boolean {\n    return this.cells.isEmpty();\n  }\n\n  isDummy(): boolean {\n    for (let i = 0, n = this.cells.size; i < n; i += 1) {\n      const symbol = this.cells.getEntry(i)![0];\n      if (!(symbol instanceof ConstraintDummy)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  clone(): ConstraintRow {\n    return new ConstraintRow(this.solver, this.symbol, this.cells.clone(), this.constant);\n  }\n\n  add(value: number): number {\n    const sum = this.constant + value;\n    this.setConstant(sum);\n    return sum;\n  }\n\n  insertSymbol(symbol: ConstraintSymbol, coefficient: number = 1): void {\n    coefficient += this.cells.get(symbol) ?? 0;\n    if (Math.abs(coefficient) < Equivalent.Epsilon) {\n      this.cells.remove(symbol);\n    } else {\n      this.cells.set(symbol, coefficient);\n    }\n  }\n\n  insertRow(that: ConstraintRow, coefficient: number): void {\n    this.setConstant(this.constant + that.constant * coefficient);\n    for (let i = 0, n = that.cells.size; i < n; i += 1) {\n      const [symbol, value] = that.cells.getEntry(i)!;\n      this.insertSymbol(symbol, value * coefficient);\n    }\n  }\n\n  removeSymbol(symbol: ConstraintSymbol): void {\n    this.cells.remove(symbol);\n  }\n\n  negate(): void {\n    this.setConstant(-this.constant);\n    for (let i = 0, n = this.cells.size; i < n; i += 1) {\n      const entry = this.cells.getEntry(i)!;\n      entry[1] = -entry[1];\n    }\n  }\n\n  solveFor(symbol: ConstraintSymbol): void {\n    const value = this.cells.remove(symbol);\n    if (value !== void 0) {\n      const coefficient = -1 / value;\n      this.setConstant(this.constant * coefficient);\n      for (let i = 0, n = this.cells.size; i < n; i += 1) {\n        const entry = this.cells.getEntry(i)!;\n        entry[1] *= coefficient;\n      }\n    }\n  }\n\n  solveForEx(lhs: ConstraintSymbol, rhs: ConstraintSymbol): void {\n    this.insertSymbol(lhs, -1.0);\n    this.solveFor(rhs);\n  }\n\n  coefficientFor(symbol: ConstraintSymbol): number {\n    const value = this.cells.get(symbol);\n    return value !== void 0 ? value : 0;\n  }\n\n  substitute(symbol: ConstraintSymbol, row: ConstraintRow): void {\n    const value = this.cells.remove(symbol);\n    if (value !== void 0) {\n      this.insertRow(row, value);\n    }\n  }\n\n  invalidate(): void {\n    const symbol = this.symbol;\n    if (symbol !== null) {\n      this.solver.invalidate(symbol, this);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent} from \"@swim/util\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {ConstraintSymbol, ConstraintSlack, ConstraintError, ConstraintDummy} from \"./ConstraintSymbol\";\nimport {AnyConstraintExpression, ConstraintExpression} from \"./ConstraintExpression\";\nimport type {ConstraintVariable} from \"./ConstraintVariable\";\nimport {ConstraintBinding} from \"./ConstraintBinding\";\nimport type {ConstraintRelation} from \"./ConstraintRelation\";\nimport {AnyConstraintStrength, ConstraintStrength} from \"./ConstraintStrength\";\nimport {Constraint} from \"./Constraint\";\nimport type {ConstraintScope} from \"./ConstraintScope\";\nimport {ConstraintRow} from \"./ConstraintRow\";\n\n/** @hidden */\nexport interface ConstraintTag {\n  readonly marker: ConstraintSymbol;\n  readonly other: ConstraintSymbol;\n}\n\n/** @hidden */\nexport interface ConstraintVariableBinding {\n  readonly constraint: Constraint;\n  readonly tag: ConstraintTag;\n  state: number;\n}\n\nexport class ConstraintSolver implements ConstraintScope {\n  constructor() {\n    Object.defineProperty(this, \"constraints\", {\n      value: new ConstraintMap(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"constraintVariables\", {\n      value: new ConstraintMap(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rows\", {\n      value: new ConstraintMap(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"infeasible\", {\n      value: [],\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"objective\", {\n      value: new ConstraintRow(this, null, new ConstraintMap(), 0),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"artificial\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"invalidated\", {\n      value: new ConstraintMap(),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly constraints: ConstraintMap<Constraint, ConstraintTag>;\n\n  /** @hidden */\n  declare readonly constraintVariables: ConstraintMap<ConstraintVariable, ConstraintVariableBinding>;\n\n  /** @hidden */\n  declare readonly rows: ConstraintMap<ConstraintSymbol, ConstraintRow>;\n\n  /** @hidden */\n  declare readonly infeasible: ConstraintSymbol[];\n\n  /** @hidden */\n  declare readonly objective: ConstraintRow;\n\n  /** @hidden */\n  declare readonly artificial: ConstraintRow | null;\n\n  /** @hidden */\n  declare readonly invalidated: ConstraintMap<ConstraintSymbol, ConstraintRow | null>;\n\n  constraint(lhs: AnyConstraintExpression, relation: ConstraintRelation,\n             rhs?: AnyConstraintExpression, strength?: AnyConstraintStrength): Constraint {\n    lhs = ConstraintExpression.fromAny(lhs);\n    if (rhs !== void 0) {\n      rhs = ConstraintExpression.fromAny(rhs);\n    }\n    const expression = rhs !== void 0 ? lhs.minus(rhs) : lhs;\n    if (strength === void 0) {\n      strength = ConstraintStrength.Required;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    const constraint = new Constraint(this, expression, relation, strength);\n    this.addConstraint(constraint);\n    return constraint;\n  }\n\n  hasConstraint(constraint: Constraint): boolean {\n    return this.constraints.has(constraint);\n  }\n\n  addConstraint(constraint: Constraint): void {\n    if (this.constraints.has(constraint)) {\n      return;\n    }\n\n    const terms = constraint.expression.terms;\n    for (let i = 0, n = terms.size; i < n; i += 1) {\n      const variable = terms.getEntry(i)![0];\n      variable.addConstraintCondition(constraint, this);\n    }\n\n    // Creating a row causes symbols to be reserved for the variables in the constraint.\n    const {row, tag} = this.createRow(constraint);\n\n    this.addConstraintRow(constraint, row, tag);\n  }\n\n  /** @hidden */\n  protected addConstraintRow(constraint: Constraint, row: ConstraintRow, tag: ConstraintTag): void {\n    this.willAddConstraint(constraint);\n\n    let subject = this.chooseSubject(row, tag);\n\n    // If chooseSubject couldn't find a valid entering symbol, one last option\n    // is available if the entire row is composed of dummy variables. If the\n    // constant of the row is zero, then this represents redundant constraints\n    // and the new dummy marker can enter the basis. If the constant is\n    // non-zero, then it represents an unsatisfiable constraint.\n    if (subject.isInvalid() && row.isDummy()) {\n      if (Math.abs(row.constant) < Equivalent.Epsilon) {\n        subject = tag.marker;\n      } else {\n        throw new Error(\"unsatisfiable constraint\");\n      }\n    }\n\n    // If an entering symbol still isn't found, then the row must be added\n    // using an artificial variable. If that fails, then the row represents\n    // an unsatisfiable constraint.\n    if (subject.isInvalid()) {\n      if (!this.addWithArtificialVariable(row)) {\n        throw new Error(\"unsatisfiable constraint\");\n      }\n    } else {\n      row.setSymbol(subject);\n      row.solveFor(subject);\n      this.substitute(subject, row);\n      this.rows.set(subject, row);\n    }\n\n    this.constraints.set(constraint, tag);\n\n    // Optimizing after each constraint is added performs less aggregate work\n    // due to a smaller average system size. It also ensures the solver remains\n    // in a consistent state.\n    this.optimize(this.objective);\n\n    this.didAddConstraint(constraint);\n\n    this.updateSolution();\n  }\n\n  protected willAddConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  protected didAddConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  removeConstraint(constraint: Constraint): void {\n    const tag = this.constraints.get(constraint);\n    if (tag === void 0) {\n      return;\n    }\n\n    this.removeConstraintRow(constraint);\n\n    const terms = constraint.expression.terms;\n    for (let i = 0, n = terms.size; i < n; i += 1) {\n      const variable = terms.getEntry(i)![0];\n      variable.removeConstraintCondition(constraint, this);\n    }\n  }\n\n  /** @hidden */\n  protected removeConstraintRow(constraint: Constraint): void {\n    const tag = this.constraints.get(constraint);\n    if (tag === void 0) {\n      return;\n    }\n\n    this.willRemoveConstraint(constraint);\n\n    this.constraints.remove(constraint);\n\n    // Remove the error effects from the objective function *before* pivoting,\n    // or substitutions into the objective will lead to incorrect solver results.\n    this.removeConstraintEffects(constraint, tag);\n\n    // If the marker is basic, simply drop the row. Otherwise pivot the marker\n    // into the basis and then drop the row.\n    const marker = tag.marker;\n    if (this.rows.remove(marker) === void 0) {\n      const leaving = this.getMarkerLeavingSymbol(marker);\n      if (leaving.isInvalid()) {\n        throw new Error(\"failed to find leaving row\");\n      }\n      const row = this.rows.remove(leaving)!;\n      row.solveForEx(leaving, marker);\n      this.substitute(marker, row);\n    }\n\n    // Optimizing after each constraint is removed ensures that the solver\n    // remains consistent. It makes the solver API easier to use at a small\n    // tradeoff for speed.\n    this.optimize(this.objective);\n\n    this.didRemoveConstraint(constraint);\n\n    this.updateSolution();\n  }\n\n  protected willRemoveConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  protected didRemoveConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  constraintVariable(name: string, value?: number, strength?: AnyConstraintStrength): ConstraintBinding {\n    if (value === void 0) {\n      value = 0;\n    }\n    if (strength === void 0) {\n      strength = ConstraintStrength.Strong;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    return new ConstraintBinding(this, name, value, strength);\n  }\n\n  hasConstraintVariable(variable: ConstraintVariable): boolean {\n    return this.constraintVariables.has(variable);\n  }\n\n  addConstraintVariable(variable: ConstraintVariable): void {\n    if (this.constraintVariables.has(variable)) {\n      return;\n    }\n\n    const strength = ConstraintStrength.clip(variable.strength);\n    if (strength === ConstraintStrength.Required) {\n      throw new Error(\"invalid variable strength\");\n    }\n\n    this.willAddConstraintVariable(variable);\n\n    const constraint = new Constraint(this, variable, \"eq\", strength);\n    const {row, tag} = this.createRow(constraint);\n    this.constraintVariables.set(variable, {constraint, tag, state: 0});\n\n    this.addConstraintRow(constraint, row, tag);\n\n    this.didAddConstraintVariable(variable);\n  }\n\n  protected willAddConstraintVariable(variable: ConstraintVariable): void {\n    // hook\n  }\n\n  protected didAddConstraintVariable(variable: ConstraintVariable): void {\n    // hook\n  }\n\n  removeConstraintVariable(variable: ConstraintVariable): void {\n    const binding = this.constraintVariables.get(variable);\n    if (binding === void 0) {\n      return;\n    }\n\n    this.willRemoveConstraintVariable(variable);\n\n    this.constraintVariables.remove(variable);\n    this.removeConstraintRow(binding.constraint);\n\n    this.didRemoveConstraintVariable(variable);\n  }\n\n  protected willRemoveConstraintVariable(variable: ConstraintVariable): void {\n    // hook\n  }\n\n  protected didRemoveConstraintVariable(variable: ConstraintVariable): void {\n    // hook\n  }\n\n  setConstraintVariable(variable: ConstraintVariable, newState: number): void {\n    const binding = this.constraintVariables.get(variable);\n    if (binding === void 0) {\n      throw new Error(\"unbound variable\");\n    }\n\n    const oldState = binding.state;\n    if (oldState !== newState) {\n      binding.state = newState;\n      const delta = newState - oldState;\n\n      this.willSetConstraintVariable(variable, newState, oldState);\n\n      // Check first if the positive error variable is basic.\n      const marker = binding.tag.marker;\n      let row = this.rows.get(marker);\n      if (row !== void 0) {\n        if (row.add(-delta) < 0) {\n          this.infeasible.push(marker);\n        }\n        this.dualOptimize();\n        return;\n      }\n\n      // Check next if the negative error variable is basic.\n      const other = binding.tag.other;\n      row = this.rows.get(other);\n      if (row !== void 0) {\n        if (row.add(delta) < 0) {\n          this.infeasible.push(other);\n        }\n        this.dualOptimize();\n        return;\n      }\n\n      // Otherwise update each row where the error variables exist.\n      for (let i = 0, n = this.rows.size; i < n; i += 1) {\n        const [symbol, row] = this.rows.getEntry(i)!;\n        const coefficient = row.coefficientFor(marker);\n        if (coefficient !== 0 && row.add(delta * coefficient) < 0 && !symbol.isExternal()) {\n          this.infeasible.push(symbol);\n        }\n      }\n      this.dualOptimize();\n\n      this.didSetConstraintVariable(variable, newState, oldState);\n\n      this.updateSolution();\n    }\n  }\n\n  protected willSetConstraintVariable(variable: ConstraintVariable, newState: number, oldState: number): void {\n    // hook\n  }\n\n  protected didSetConstraintVariable(variable: ConstraintVariable, newState: number, oldState: number): void {\n    // hook\n  }\n\n  /** @hidden */\n  invalidate(symbol: ConstraintSymbol, row: ConstraintRow | null = null): void {\n    if (symbol.isExternal()) {\n      this.invalidated.set(symbol, row);\n    }\n  }\n\n  /** @hidden */\n  updateSolution(): void {\n    const invalidated = this.invalidated;\n    if (!invalidated.isEmpty()) {\n      Object.defineProperty(this, \"invalidated\", {\n        value: new ConstraintMap(),\n        enumerable: true,\n        configurable: true,\n      });\n      for (let i = 0, n = invalidated.size; i < n; i += 1) {\n        const symbol = invalidated.getEntry(i)![0];\n        const row = this.rows.get(symbol);\n        if (row !== void 0) {\n          symbol.updateConstraintSolution(row.constant);\n        }\n      }\n    }\n  }\n\n  // Returns a new row for the given constraint.\n  //\n  // The terms in the constraint will be converted to cells in the row.\n  // Any term in the constraint with a coefficient of zero is ignored.\n  // If the symbol for a given cell variable is basic, the cell variable\n  // will be substituted with the basic row.\n  //\n  // The necessary slack and error variables will be added to the row.\n  // If the constant for the row is negative, the sign for the row will\n  // be inverted so the constant becomes positive.\n  private createRow(constraint: Constraint): {row: ConstraintRow, tag: ConstraintTag} {\n    const expression = constraint.expression;\n    const row = new ConstraintRow(this, null, new ConstraintMap(), expression.constant);\n\n    // Substitute the current basic variables into the row.\n    const terms = expression.terms;\n    for (let i = 0, n = terms.size; i < n; i += 1) {\n      const [variable, coefficient] = terms.getEntry(i)!;\n      if (Math.abs(coefficient) >= Equivalent.Epsilon) {\n        const basic = this.rows.get(variable);\n        if (basic !== void 0) {\n          row.insertRow(basic, coefficient);\n        } else {\n          row.insertSymbol(variable, coefficient);\n        }\n      }\n    }\n\n    // Add the necessary slack, error, and dummy variables.\n    const objective = this.objective;\n    const relation = constraint.relation;\n    const strength = constraint.strength;\n    const tag = {marker: ConstraintSymbol.invalid, other: ConstraintSymbol.invalid};\n    if (relation === \"le\" || relation === \"ge\") {\n      const coefficient = relation === \"le\" ? 1 : -1;\n      const slack = new ConstraintSlack();\n      tag.marker = slack;\n      row.insertSymbol(slack, coefficient);\n      if (strength < ConstraintStrength.Required) {\n        const error = new ConstraintError();\n        tag.other = error;\n        row.insertSymbol(error, -coefficient);\n        objective.insertSymbol(error, strength);\n      }\n    } else {\n      if (strength < ConstraintStrength.Required) {\n        const eplus = new ConstraintError();\n        const eminus = new ConstraintError();\n        tag.marker = eplus;\n        tag.other = eminus;\n        row.insertSymbol(eplus, -1); // v = eplus - eminus\n        row.insertSymbol(eminus, 1); // v - eplus + eminus = 0\n        objective.insertSymbol(eplus, strength);\n        objective.insertSymbol(eminus, strength);\n      } else {\n        const dummy = new ConstraintDummy();\n        tag.marker = dummy;\n        row.insertSymbol(dummy);\n      }\n    }\n\n    // Ensure the row has a positive constant.\n    if (row.constant < 0) {\n      row.negate();\n    }\n\n    return {row, tag};\n  }\n\n  // Returns the symbol to use for solving for the row.\n  //\n  // This method will choose the best subject to use as the solve target for\n  // the row. An invalid symbol will be returned if there is no valid target.\n  //\n  // The symbols are chosen according to the following precedence:\n  //\n  // 1) The first symbol representing an external variable.\n  // 2) A negative slack or error tag variable.\n  //\n  // If a subject cannot be found, an invalid symbol will be returned.\n  private chooseSubject(row: ConstraintRow, tag: ConstraintTag): ConstraintSymbol {\n    for (let i = 0, n = row.cells.size; i < n; i += 1) {\n      const symbol = row.cells.getEntry(i)![0];\n      if (symbol.isExternal()) {\n        return symbol;\n      }\n    }\n    if (tag.marker instanceof ConstraintSlack || tag.marker instanceof ConstraintError) {\n      if (row.coefficientFor(tag.marker) < 0) {\n        return tag.marker;\n      }\n    }\n    if (tag.other instanceof ConstraintSlack || tag.other instanceof ConstraintError) {\n      if (row.coefficientFor(tag.other) < 0) {\n        return tag.other;\n      }\n    }\n    return ConstraintSymbol.invalid;\n  }\n\n  // Adds the row to the tableau using an artificial variable; returns `false`\n  // if the constraint cannot be satisfied.\n  private addWithArtificialVariable(row: ConstraintRow): boolean {\n    // Create and add the artificial variable to the tableau.\n    const artificial = new ConstraintSlack();\n    this.rows.set(artificial, row.clone());\n    Object.defineProperty(this, \"artificial\", {\n      value: row.clone(),\n      enumerable: true,\n      configurable: true,\n    });\n\n    // Optimize the artificial objective. This is successful\n    // only if the artificial objective is optimized to zero.\n    this.optimize(this.artificial!);\n    const success = Math.abs(this.artificial!.constant) < Equivalent.Epsilon;\n    Object.defineProperty(this, \"artificial\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n\n    // If the artificial variable is basic, pivot the row so that\n    // it becomes non-basic. If the row is constant, exit early.\n    const basic = this.rows.remove(artificial);\n    if (basic !== void 0) {\n      if (basic.isConstant()) {\n        return success;\n      }\n      const entering = this.anyPivotableSymbol(basic);\n      if (entering.isInvalid()) {\n        return false; // unsatisfiable (will this ever happen?)\n      }\n      basic.setSymbol(entering);\n      basic.solveForEx(artificial, entering);\n      this.substitute(entering, basic);\n      this.rows.set(entering, basic);\n    }\n\n    // Remove the artificial variable from the tableau.\n    for (let i = 0, n = this.rows.size; i < n; i += 1) {\n      this.rows.getEntry(i)![1].removeSymbol(artificial);\n    }\n    this.objective.removeSymbol(artificial);\n    return success;\n  }\n\n  // Substitutues all instances of the parametric symbol in the tableau\n  // and the objective function with the given row.\n  private substitute(symbol: ConstraintSymbol, row: ConstraintRow): void {\n    for (let i = 0, n = this.rows.size; i < n; i += 1) {\n      const [key, value] = this.rows.getEntry(i)!;\n      value.substitute(symbol, row);\n      if (value.constant < 0 && !key.isExternal()) {\n        this.infeasible.push(key);\n      }\n    }\n    this.objective.substitute(symbol, row);\n    if (this.artificial !== null) {\n      this.artificial.substitute(symbol, row);\n    }\n  }\n\n  // Optimizes the system for the given objective function.\n  //\n  // Performs iterations of Phase 2 of the simplex method until the objective\n  // function reaches a minimum.\n  private optimize(objective: ConstraintRow): void {\n    do {\n      const entering = this.getEnteringSymbol(objective);\n      if (entering.isInvalid()) {\n        return;\n      }\n      const leaving = this.getLeavingSymbol(entering);\n      if (leaving.isInvalid()) {\n        throw new Error(\"objective is unbounded\");\n      }\n      // Pivot the entering symbol into the basis.\n      const row = this.rows.remove(leaving)!;\n      row.setSymbol(entering);\n      row.solveForEx(leaving, entering);\n      this.substitute(entering, row);\n      this.rows.set(entering, row);\n    } while (true);\n  }\n\n  // Optimizes the system using the dual of the simplex method.\n  //\n  // The current state of the system should be such that the objective\n  // function is optimal, but not feasible. This method will perform\n  // an iteration of the dual simplex method to make the solution both\n  // optimal and feasible.\n  private dualOptimize(): void {\n    let leaving: ConstraintSymbol | undefined;\n    while ((leaving = this.infeasible.pop(), leaving !== void 0)) {\n      const row = this.rows.get(leaving);\n      if (row !== void 0 && row.constant < 0) {\n        const entering = this.getDualEnteringSymbol(row);\n        if (entering.isInvalid()) {\n          throw new Error(\"dual optimize failed\");\n        }\n        // Pivot the entering symbol into the basis.\n        this.rows.remove(leaving);\n        row.setSymbol(entering);\n        row.solveForEx(leaving, entering);\n        this.substitute(entering, row);\n        this.rows.set(entering, row);\n      }\n    }\n  }\n\n  // Returns the entering variable for a pivot operation.\n  //\n  // Returns the first symbol in the objective function which is non-dummy and\n  // has a coefficient less than zero. If no symbol meets the criteria then the\n  // objective function is at a minimum, and an invalid symbol is returned.\n  private getEnteringSymbol(objective: ConstraintRow): ConstraintSymbol {\n    for (let i = 0, n = objective.cells.size; i < n; i += 1) {\n      const [symbol, value] = objective.cells.getEntry(i)!;\n      if (value < 0 && !symbol.isDummy()) {\n        return symbol;\n      }\n    }\n    return ConstraintSymbol.invalid;\n  }\n\n  // Returns the entering symbol for the dual optimize operation.\n  //\n  // Returns the symbol in the row which has a positive coefficient and yields\n  // the minimum ratio for its respective symbol in the objective function.\n  // The provided row *must* be infeasible. If no symbol is found which meets\n  // the criteria, an invalid symbol is returned.\n  private getDualEnteringSymbol(row: ConstraintRow): ConstraintSymbol {\n    let ratio = Number.MAX_VALUE;\n    let entering = ConstraintSymbol.invalid;\n    for (let i = 0, n = row.cells.size; i < n; i += 1) {\n      const [symbol, value] = row.cells.getEntry(i)!;\n      if (value > 0 && !symbol.isDummy()) {\n        const coefficient = this.objective.coefficientFor(symbol);\n        const coratio = coefficient / value;\n        if (coratio < ratio) {\n          ratio = coratio;\n          entering = symbol;\n        }\n      }\n    }\n    return entering;\n  }\n\n  // Returns the symbol for the pivot exit row. If no appropriate exit symbol\n  // is found, an invalid symbol will be returned, indicating that the\n  // objective function is unbounded.\n  private getLeavingSymbol(entering: ConstraintSymbol): ConstraintSymbol {\n    let ratio = Number.MAX_VALUE;\n    let found = ConstraintSymbol.invalid;\n    for (let i = 0, n = this.rows.size; i < n; i += 1) {\n      const [symbol, row] = this.rows.getEntry(i)!;\n      if (!symbol.isExternal()) {\n        const coefficient = row.coefficientFor(entering);\n        if (coefficient < 0) {\n          const coratio = -row.constant / coefficient;\n          if (coratio < ratio) {\n            ratio = coratio;\n            found = symbol;\n          }\n        }\n      }\n    }\n    return found;\n  }\n\n  // Returns a symbol corresponding to a basic row which holds the given marker\n  // variable. The row will be chosen according to the following precedence:\n  //\n  // 1) The row with a restricted basic varible and a negative coefficient\n  //    for the marker with the smallest ratio of `-constant / coefficient`.\n  // 2) The row with a restricted basic variable and the smallest ratio of\n  //    `constant / coefficient`.\n  // 3) The last unrestricted row which contains the marker.\n  //\n  // If the marker does not exist in any row, an invalid symbol will be\n  // returned, indicating an internal solver error since the marker *should*\n  // exist somewhere in the tableau.\n  private getMarkerLeavingSymbol(marker: ConstraintSymbol): ConstraintSymbol {\n    let r1 = Number.MAX_VALUE;\n    let r2 = Number.MAX_VALUE;\n    let first = ConstraintSymbol.invalid;\n    let second = ConstraintSymbol.invalid;\n    let third = ConstraintSymbol.invalid;\n    for (let i = 0, n = this.rows.size; i < n; i += 1) {\n      const [symbol, row] = this.rows.getEntry(i)!;\n      const coefficient = row.coefficientFor(marker);\n      if (coefficient === 0) {\n        continue;\n      }\n      if (symbol.isExternal()) {\n        third = symbol;\n      } else if (coefficient < 0) {\n        const ratio = -row.constant / coefficient;\n        if (ratio < r1) {\n          r1 = ratio;\n          first = symbol;\n        }\n      } else {\n        const ratio = row.constant / coefficient;\n        if (ratio < r2) {\n          r2 = ratio;\n          second = symbol;\n        }\n      }\n    }\n    if (!first.isInvalid()) {\n      return first;\n    } else if (!second.isInvalid()) {\n      return second;\n    } else {\n      return third;\n    }\n  }\n\n  // Removes the effects of a constraint on the objective function.\n  private removeConstraintEffects(constraint: Constraint, tag: ConstraintTag): void {\n    if (tag.marker instanceof ConstraintError) {\n      this.removeMarkerEffects(tag.marker, constraint.strength);\n    }\n    if (tag.other instanceof ConstraintError) {\n      this.removeMarkerEffects(tag.other, constraint.strength);\n    }\n  }\n\n  // Removes the effects of an error marker on the objective function.\n  private removeMarkerEffects(marker: ConstraintSymbol, strength: ConstraintStrength): void {\n    const row = this.rows.get(marker);\n    if (row !== void 0) {\n      this.objective.insertRow(row, -strength);\n    } else {\n      this.objective.insertSymbol(marker, -strength);\n    }\n  }\n\n  // Returns the first Slack or Error symbol in the row. If no such symbol\n  // is present, an invalid symbol will be returned.\n  private anyPivotableSymbol(row: ConstraintRow): ConstraintSymbol {\n    for (let i = 0, n = row.cells.size; i < n; i += 1) {\n      const symbol = row.cells.getEntry(i)![0];\n      if (symbol instanceof ConstraintSlack || symbol instanceof ConstraintError) {\n        return symbol;\n      }\n    }\n    return ConstraintSymbol.invalid;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, HashCode, Equivalent, Compare, Cursor} from \"@swim/util\";\nimport {Debug, Display, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {ItemInterpolator} from \"./\"; // forward import\nimport type {Field} from \"./Field\";\nimport {AnyValue, Value} from \"./\"; // forward import\nimport {Record} from \"./\"; // forward import\nimport type {AnyText} from \"./Text\";\nimport type {AnyNum} from \"./Num\";\nimport {Bool} from \"./\"; // forward import\nimport {Extant} from \"./\"; // forward import\nimport {Absent} from \"./\"; // forward import\nimport {Selector} from \"./\"; // forward import\nimport {MathModule} from \"./\"; // forward import\nimport type {AnyInterpreter} from \"./interpreter/Interpreter\";\nimport type {Form} from \"./form/Form\";\n\nexport type AnyItem = Item\n                    | {readonly $key: AnyValue, readonly $value: AnyValue}\n                    | {readonly [key: string]: AnyValue}\n                    | ReadonlyArray<AnyItem>\n                    | Uint8Array\n                    | string\n                    | number\n                    | boolean\n                    | null\n                    | undefined;\n\nexport abstract class Item implements Interpolate<Item>, HashCode, Equivalent, Compare, Debug, Display {\n  /** @hidden */\n  constructor() {\n    // stub\n  }\n\n  /**\n   * Returns `true` if this `Item` is not [[Absent]].\n   */\n  abstract isDefined(): boolean;\n\n  /**\n   * Returns `true` if this `Item is neither [[Extant]] nor [[Absent]].\n   */\n  abstract isDistinct(): boolean;\n\n  /**\n   * Returns `true` if this `Item` always [[Item.evaluate evaluates]] to the\n   * same `Item`.\n   */\n  abstract isConstant(): boolean;\n\n  /**\n   * Returns the key component of this `Item`, if this `Item is a [[Field]];\n   * otherwise returns [[Absent]] if this `Item` is a `Value`.\n   */\n  abstract readonly key: Value;\n\n  /**\n   * Returns the value component of this `Item`, if this `Item` is a [[Field]];\n   * otherwise returns `this` if this `Item is a `Value`.\n   */\n  abstract toValue(): Value;\n\n  /**\n   * Returns the `key` string of the first member of this `Item`, if this `Item`\n   * is a [[Record]], and its first member is an [[Attr]]; otherwise returns\n   * `undefined` if this `Item` is not a `Record`, or if this `Item` is a\n   * `Record` whose first member is not an `Attr`.\n   *\n   * Used to concisely get the name of the discriminating attribute of a\n   * structure.  The `tag` can be used to discern the nominal type of a\n   * polymorphic structure, similar to an XML element tag.\n   */\n  abstract readonly tag: string | undefined;\n\n  /**\n   * Returns the [[Item.flattened flattened]] members of this `Item` after all\n   * attributes have been removed, if this `Item` is a [[Record]]; otherwise\n   * returns `this` if this `Item` is a non-`Record` `Value`, or returns\n   * the value component if this `Item` is a `Field`.\n   *\n   * Used to concisely get the scalar value of an attributed structure.  An\n   * attributed structure is a `Record` with one or more attributes that modify\n   * one or more other members.\n   */\n  abstract readonly target: Value;\n\n  /**\n   * Returns the sole member of this `Item`, if this `Item` is a [[Record]]\n   * with exactly one member, and its member is a `Value`; returns [[Extant]]\n   * if this `Item` is an empty `Record`; returns [[Absent]] if this `Item` is\n   * a `Field`; otherwise returns `this` if this `Item` is a `Record` with more\n   * than one member, or if this `Item` is a non-`Record` `Value`.\n   *\n   * Used to convert a unary `Record` into its member `Value`.  Facilitates\n   * writing code that treats a unary `Record` equivalently to a bare `Value`.\n   */\n  abstract flattened(): Value;\n\n  /**\n   * Returns `this` if this `Item` is a [[Record]]; returns a `Record`\n   * containing just this `Item`, if this `Item` is [[Item.isDistinct\n   * distinct]]; otherwise returns an empty `Record` if this `Item` is\n   * [[Extant]] or [[Absent]].  Facilitates writing code that treats a bare\n   * `Value` equivalently to a unary `Record`.\n   */\n  abstract unflattened(): Record;\n\n  /**\n   * Returns the value of the first member of this `Item`, if this `Item` is a\n   * [[Record]], and its first member is an [[Attr]] whose `key` string is\n   * equal to `tag`; otherwise returns [[Absent]] if this `Item` is not a\n   * `Record`, or if this `Item` is a `Record` whose first member is not an\n   * `Attr`, or if this `Item` is a `Record` whose first member is an `Attr`\n   * whose `key` does not equal the `tag`.\n   *\n   * Used to conditionally get the value of the head `Attr` of a structure, if\n   * and only if the key string of the head `Attr` is equal to the `tag`.  Can\n   * be used to check if a structure might conform to a nominal type named\n   * `tag`, while simultaneously getting the value of the `tag` attribute.\n   */\n  abstract header(tag: string): Value;\n\n  /**\n   * Returns the [[Item.unflattened unflattened]] [[Item.header header]] of\n   * this `Item`, if this `Item` is a [[Record]], and its first member is an\n   * [[Attr]] whose `key` string is equal to `tag`; otherwise returns\n   * `undefined`.\n   *\n   * The `headers` of the `tag` attribute of a structure are like the\n   * attributes of an XML element tag; through unlike an XML element, `tag`\n   * attribute headers are not limited to string keys and values.\n   */\n  abstract headers(tag: string): Record | undefined;\n\n  /**\n   * Returns the first member of this `Item`, if this `Item` is a non-empty\n   * [[Record]]; otherwise returns [[Absent]].\n   */\n  abstract head(): Item;\n\n  /**\n   * Returns a view of all but the first member of this `Item`, if this `Item`\n   * is a non-empty [[Record]]; otherwise returns an empty `Record` if this\n   * `Item` is not a `Record`, or if this `Item` is itself an empty `Record`.\n   */\n  abstract tail(): Record;\n\n  /**\n   * Returns the [[Record.flattened flattened]] [[Item.tail tail]] of this\n   * `Item`.  Used to recursively deconstruct a structure, terminating with its\n   * last `Value`, rather than a unary `Record` containing its last value, if\n   * the structure ends with a `Value` member.\n   */\n  abstract body(): Value;\n\n  /**\n   * Returns the number of members contained in this `Item`, if this `Item` is\n   * a [[Record]]; otherwise returns `0` if this `Item` is not a `Record`.\n   */\n  abstract readonly length: number;\n\n  /**\n   * Returns `true` if this `Item` is a [[Record]] that has a [[Field]] member\n   * with a key that is equal to the given `key`; otherwise returns `false` if\n   * this `Item` is not a `Record`, or if this `Item` is a `Record`, but has no\n   * `Field` member with a key equal to the given `key`.\n   */\n  abstract has(key: AnyValue): boolean;\n\n  /**\n   * Returns the value of the last [[Field]] member of this `Item` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Item` is not a\n   * [[Record]], or if this `Item` is a `Record`, but has no `Field` member\n   * with a key equal to the given `key`.\n   */\n  abstract get(key: AnyValue): Value;\n\n  /**\n   * Returns the value of the last [[Attr]] member of this `Item` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Item` is not a\n   * [[Record]], or if this `Item` is a `Record`, but has no `Attr` member\n   * with a key equal to the given `key`.\n   */\n  abstract getAttr(key: AnyText): Value;\n\n  /**\n   * Returns the value of the last [[Slot]] member of this `Item` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Item` is not a\n   * [[Record]], or if this `Item` is a `Record`, but has no `Slot` member\n   * with a key equal to the given `key`.\n   */\n  abstract getSlot(key: AnyValue): Value;\n\n  /**\n   * Returns the last [[Field]] member of this `Item` whose key is equal to the\n   * given `key`; returns `undefined` if this `Item` is not a [[Record]], or if\n   * this `Item` is a `Record`, but has no `Field` member with a `key` equal to\n   * the given `key`.\n   */\n  abstract getField(key: AnyValue): Field | undefined;\n\n  /**\n   * Returns the member of this `Item` at the given `index`, if this `Item` is\n   * a [[Record]], and the `index` is greater than or equal to zero, and less\n   * than the [[Record.length length]] of the `Record`; otherwise returns\n   * [[Absent]] if this `Item` is not a `Record`, or if this `Item` is a\n   * `Record`, but the `index` is out of bounds.\n   */\n  abstract getItem(index: AnyNum): Item;\n\n  updated(key: AnyValue, value: AnyValue): Record {\n    const record = Record.create(2);\n    record.push(this);\n    record.set(key, value);\n    return record;\n  }\n\n  updatedAttr(key: AnyText, value: AnyValue): Record {\n    const record = Record.create(2);\n    record.push(this);\n    record.setAttr(key, value);\n    return record;\n  }\n\n  updatedSlot(key: AnyValue, value: AnyValue): Record {\n    const record = Record.create(2);\n    record.push(this);\n    record.setSlot(key, value);\n    return record;\n  }\n\n  appended(...items: AnyItem[]): Record {\n    const record = Record.create(1 + arguments.length);\n    record.push(this);\n    record.push(...items);\n    return record;\n  }\n\n  prepended(...items: AnyItem[]): Record {\n    const record = Record.create(arguments.length + 1);\n    record.push(...items);\n    record.push(this);\n    return record;\n  }\n\n  abstract deleted(key: AnyValue): Item;\n\n  concat(...items: AnyItem[]): Record {\n    const record = Record.create();\n    record.push(this);\n    for (let i = 0, n = items.length; i < n; i += 1) {\n      Item.fromAny(items[i]).forEach(function (item: Item): void {\n        record.push(item);\n      });\n    }\n    return record;\n  }\n\n  abstract conditional(thenTerm: Item, elseTerm: Item): Item;\n\n  abstract or(that: Item): Item;\n\n  abstract and(that: Item): Item;\n\n  abstract bitwiseOr(that: AnyItem): Item;\n\n  abstract bitwiseXor(that: AnyItem): Item;\n\n  abstract bitwiseAnd(that: AnyItem): Item;\n\n  lt(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return this.compareTo(that) < 0 ? Bool.from(true) : Item.absent();\n  }\n\n  le(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return this.compareTo(that) <= 0 ? Bool.from(true) : Item.absent();\n  }\n\n  eq(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return this.equals(that) ? Bool.from(true) : Item.absent();\n  }\n\n  ne(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return !this.equals(that) ? Bool.from(true) : Item.absent();\n  }\n\n  ge(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return this.compareTo(that) >= 0 ? Bool.from(true) : Item.absent();\n  }\n\n  gt(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return this.compareTo(that) > 0 ? Bool.from(true) : Item.absent();\n  }\n\n  abstract plus(that: AnyItem): Item;\n\n  abstract minus(that: AnyItem): Item;\n\n  abstract times(that: AnyItem): Item;\n\n  abstract divide(that: AnyItem): Item;\n\n  abstract modulo(that: AnyItem): Item;\n\n  abstract not(): Item;\n\n  abstract bitwiseNot(): Item;\n\n  abstract negative(): Item;\n\n  abstract positive(): Item;\n\n  abstract inverse(): Item;\n\n  invoke(args: Value): Item {\n    return Item.absent();\n  }\n\n  abstract lambda(template: Value): Value;\n\n  filter(predicate?: AnyItem): Selector {\n    const selector = Selector.literal(this);\n    if (arguments.length === 0) {\n      return selector.filter();\n    } else {\n      return selector.filter(predicate);\n    }\n  }\n\n  max(that: Item): Item {\n    return this.compareTo(that) >= 0 ? this : that;\n  }\n\n  min(that: Item): Item {\n    return this.compareTo(that) <= 0 ? this : that;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    return this;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    return this;\n  }\n\n  /**\n   * Converts this `Item` into a `string` value, if possible; otherwise returns\n   * `undefined` if this `Item` can't be converted into a `string` value.\n   */\n  abstract stringValue(): string | undefined;\n\n  /**\n   * Converts this `Item` into a `string` value, if possible; otherwise returns\n   * `orElse` if this `Item` can't be converted into a `string` value.\n   */\n  abstract stringValue<T>(orElse: T): string | T;\n\n  /**\n   * Converts this `Item` into a `number` value, if possible; otherwise returns\n   * `undefined` if this `Item` can't be converted into a `number` value.\n   */\n  abstract numberValue(): number | undefined;\n\n  /**\n   * Converts this `Item` into a `number` value, if possible; otherwise returns\n   * `orElse` if this `Item` can't be converted into a `number` value.\n   */\n  abstract numberValue<T>(orElse: T): number | T;\n\n  /**\n   * Converts this `Item` into a `boolean` value, if possible; otherwise returns\n   * `undefined` if this `Item` can't be converted into a `boolean` value.\n   */\n  abstract booleanValue(): boolean | undefined;\n\n  /**\n   * Converts this `Item` into a `boolean` value, if possible; otherwise returns\n   * `orElse` if this `Item` can't be converted into a `boolean` value.\n   */\n  abstract booleanValue<T>(orElse: T): boolean | T;\n\n  cast<T>(form: Form<T, unknown>): T | undefined;\n\n  cast<T, E = T>(form: Form<T, unknown>, orElse: E): T | E;\n\n  cast<T, E = T>(form: Form<T, unknown>, orElse?: E): T | E | undefined {\n    let object: T | E | undefined = form.cast(this);\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object;\n  }\n\n  coerce<T>(form: Form<T, unknown>): T;\n\n  coerce<T, E = T>(form: Form<T, unknown>, orElse: E): T | E;\n\n  coerce<T, E = T>(form: Form<T, unknown>, orElse?: E): T | E {\n    let object: T | E | undefined = form.cast(this);\n    if (object === void 0) {\n      object = form.unit;\n    }\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object!;\n  }\n\n  abstract toAny(): AnyItem;\n\n  abstract isAliased(): boolean;\n\n  abstract isMutable(): boolean;\n\n  abstract alias(): void;\n\n  abstract branch(): Item;\n\n  abstract clone(): Item;\n\n  abstract commit(): this;\n\n  /** @hidden */\n  get precedence(): number {\n    return 11;\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | undefined,\n                thisArg?: S): T | undefined {\n    return callback.call(thisArg, this, 0);\n  }\n\n  iterator(): Cursor<Item> {\n    return Cursor.unary(this);\n  }\n\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Item) {\n      return ItemInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Returns the heterogeneous sort order of this `Item`.  Used to impose a\n   * total order on the set of all items.  When comparing two items of\n   * different types, the items order according to their `typeOrder`.\n   */\n  abstract readonly typeOrder: number;\n\n  abstract compareTo(that: unknown): number;\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract keyEquals(key: unknown): boolean;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  display(output: Output): void {\n    this.debug(output);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static empty(): Item {\n    return Record.empty();\n  }\n\n  static extant(): Item {\n    return Extant.extant();\n  }\n\n  static absent(): Item {\n    return Absent.absent();\n  }\n\n  static fromAny(item: AnyItem): Item {\n    if (item instanceof Item) {\n      return item;\n    } else {\n      return Value.fromAny(item);\n    }\n  }\n\n  @Lazy\n  static globalScope(): Item {\n    return Record.create(1)\n        .slot(\"math\", MathModule.scope)\n        .commit();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"./Item\";\n\n/** @hidden */\nexport const ItemInterpolator = function <Y extends Item>(y0: Y, y1: Y): Interpolator<Y> {\n  const interpolator = function (u: number): Y {\n    return u < 1 ? interpolator[0] : interpolator[1];\n  } as Interpolator<Y>;\n  Object.setPrototypeOf(interpolator, ItemInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0.commit(),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1.commit(),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  <Y extends Item>(y0: Y, y1: Y): Interpolator<Y>;\n\n  /** @hidden */\n  prototype: Interpolator<any>;\n};\n\nItemInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {FieldInterpolator} from \"./\"; // forward import\nimport {Attr} from \"./\"; // forward import\nimport {Slot} from \"./\" // forward import\nimport {AnyValue, Value} from \"./\"; // forward import\nimport {Record} from \"./\"; // forward import\nimport {AnyText, Text} from \"./\"; // forward import\nimport type {AnyNum} from \"./Num\";\n\nexport type AnyField = Field\n                     | {readonly $key: AnyValue, readonly $value: AnyValue}\n                     | {[key: string]: AnyValue};\n\nexport abstract class Field extends Item {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Always returns `true` because a `Field` can never be [[Absent]].\n   */\n  isDefined(): boolean {\n    return true;\n  }\n\n  /**\n   * Always returns `true` because a `Field` can be neither [[Extant]] nor\n   * [[Absent]].\n   */\n  isDistinct(): boolean {\n    return true;\n  }\n\n  /**\n   * Returns the key component of this `Field`.\n   */\n  abstract get key(): Value;\n\n  /**\n   * Returns the value component of this `Field`.\n   */\n  abstract get value(): Value;\n\n  /**\n   * Sets the value of this `Field` to the new `value`, returning the old value.\n   *\n   * @throws `Error` if this `Field` is immutable.\n   */\n  abstract setValue(value: AnyValue): Value;\n\n  /**\n   * Returns a copy of this `Field` with the updated `value`.\n   */\n  abstract updatedValue(value: AnyValue): Field;\n\n  /**\n   * Returns the value component of this `Field`.\n   */\n  toValue(): Value {\n    return this.value;\n  }\n\n  /**\n   * Always returns `undefined` because a `Field` can't be a `Record`, so it\n   * can't have a first member `Attr` whose key string could be returned.\n   */\n  get tag(): string | undefined {\n    return void 0;\n  }\n\n  /**\n   * Always returns the value component of this `Field`.\n   */\n  get target(): Value {\n    return this.value;\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be flattened into a\n   * `Value`.\n   */\n  flattened(): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Returns a `Record` containing just this `Field`.\n   */\n  unflattened(): Record {\n    return Record.of(this);\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have a head `Attr` whose value could be returned if its key were\n   * equal to the `tag`.\n   */\n  header(tag: string): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns `undefined` because a `Field` can't be a `Record`, so it\n   * can't have a head `Attr` whose value could be returned as a `Record` if\n   * its key were equal to the `tag`.\n   */\n  headers(tag: string): Record | undefined {\n    return void 0;\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have a first member.\n   */\n  head(): Item {\n    return Item.absent();\n  }\n\n  /**\n   * Always returns an empty `Record` because a `Field` can't itself be a\n   * `Record`, so it can't have any non-first members.\n   */\n  tail(): Record {\n    return Record.empty();\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have any non-first members to flatten, and because a `Field` isn't\n   * a distinct `Value`, so it can't return `Extant`.\n   */\n  body(): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns `0` because a `Field` can't be a `Record`, so it can't\n   * contain any members.\n   */\n  get length(): number {\n    return 0;\n  }\n\n  /**\n   * Always returns `false` because a `Field` can't be a `Record`, so it can't\n   * have a `Field` member whose key is equal to the given `key`.\n   */\n  has(key: AnyValue): boolean {\n    return false;\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have a `Field` member whose key is equal to the given `key`.\n   */\n  get(key: AnyValue): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have an `Attr` member whose key is equal to the given `key`.\n   */\n  getAttr(key: AnyText): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have a `Slot` member whose key is equal to the given `key`.\n   */\n  getSlot(key: AnyValue): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns `undefined` because a `Field` can't be a `Record`, so it\n   * can't have a `Field` member whose key is equal to the given `key`.\n   */\n  getField(key: AnyValue): Field | undefined {\n    return void 0;\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Field` can't be a `Record`, so it\n   * can't have a member at the given `index`.\n   */\n  getItem(index: AnyNum): Item {\n    return Item.absent();\n  }\n\n  deleted(key: AnyValue): Field {\n    return this;\n  }\n\n  conditional(thenTerm: Field, elseTerm: Field): Field;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item {\n    thenTerm = Item.fromAny(thenTerm);\n    return thenTerm;\n  }\n\n  or(that: Field): Field;\n  or(that: AnyItem): Item;\n  or(that: AnyItem): Item {\n    return this;\n  }\n\n  and(that: Field): Field;\n  and(that: AnyItem): Item;\n  and(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return that;\n  }\n\n  lambda(template: Value): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Converts the value of this `Field` into a `string` value, if possible.\n   *\n   * @throws `Error` if the value of this `Field` can't be converted into a\n   *         `string` value.\n   */\n  stringValue(): string | undefined;\n  /**\n   * Converts the value of this `Field` into a `string` value, if possible;\n   * otherwise returns `orElse` if the value of this `Field` can't be converted\n   * into a `string` value.\n   */\n  stringValue<T>(orElse: T): string | T;\n  stringValue<T>(orElse?: T): string | T | undefined {\n    return this.value.stringValue(orElse);\n  }\n\n  /**\n   * Converts the value of this `Field` into a `number` value, if possible.\n   *\n   * @throws `Error` if the value of this `Field` can't be converted into a\n   *         `number` value.\n   */\n  numberValue(): number | undefined;\n  /**\n   * Converts the value of this `Field` into a `number` value, if possible;\n   * otherwise returns `orElse` if the value of this `Field` can't be converted\n   * into a `number` value.\n   */\n  numberValue<T>(orElse: T): number | T;\n  numberValue<T>(orElse?: T): number | T | undefined {\n    return this.value.numberValue(orElse);\n  }\n\n  /**\n   * Converts the value of this `Field` into a `boolean` value, if possible.\n   *\n   * @throws `Error` if the value of this `Field` can't be converted into a\n   *         `boolean` value.\n   */\n  booleanValue(): boolean | undefined;\n  /**\n   * Converts the value of this `Field` into a `boolean` value, if possible;\n   * otherwise returns `orElse` if the value of this `Field` can't be converted\n   * into a `boolean` value.\n   */\n  booleanValue<T>(orElse: T): boolean | T;\n  booleanValue<T>(orElse?: T): boolean | T | undefined {\n    return this.value.booleanValue(orElse);\n  }\n\n  abstract toAny(): AnyField;\n\n  abstract branch(): Field;\n\n  abstract clone(): Field;\n\n  abstract commit(): this;\n\n  interpolateTo(that: Field): Interpolator<Field>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Field) {\n      return FieldInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  /** @hidden */\n  static readonly ImmutableFlag: number = 1 << 0;\n\n  static of(key: AnyValue, value?: AnyValue): Field {\n    let name: string | undefined;\n    if (typeof key === \"string\") {\n      name = key;\n    } else if (key instanceof Text) {\n      name = key.value;\n    }\n    if (name !== void 0 && name.charCodeAt(0) === 64/*'@'*/) {\n      name = name.slice(1);\n      if (arguments.length === 1) {\n        return Attr.of(name);\n      } else {\n        return Attr.of(name, value);\n      }\n    } else {\n      if (arguments.length === 1) {\n        return Slot.of(key);\n      } else {\n        return Slot.of(key, value);\n      }\n    }\n  }\n\n  static fromAny(field: AnyField): Field {\n    if (field instanceof Field) {\n      return field;\n    } else if (typeof field === \"object\" && field !== null) {\n      if ((field as any).$key !== void 0) {\n        return Field.of((field as any).$key, (field as any).$value);\n      } else {\n        for (const key in field) {\n          return Field.of(key, (field as any)[key]);\n        }\n      }\n    }\n    throw new TypeError(\"\" + field);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyField, Field} from \"./Field\";\nimport {SlotInterpolator} from \"./\"; // forward import\nimport {AnyValue, Value} from \"./\"; // forward import\nimport {Text} from \"./\"; // forward import\nimport {Extant} from \"./\" // forward import\nimport {Expression} from \"./\"; // forward import\nimport {BitwiseOrOperator} from \"./\"; // forward import\nimport {BitwiseXorOperator} from \"./\"; // forward import\nimport {BitwiseAndOperator} from \"./\"; // forward import\nimport {PlusOperator} from \"./\"; // forward import\nimport {MinusOperator} from \"./\"; // forward import\nimport {TimesOperator} from \"./\"; // forward import\nimport {DivideOperator} from \"./\"; // forward import\nimport {ModuloOperator} from \"./\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"./\"; // forward import\n\nexport class Slot extends Field {\n  constructor(key: Value, value: Value, flags?: number) {\n    super();\n    Object.defineProperty(this, \"key\", {\n      value: key.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags !== void 0 ? flags : 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly key: Value;\n\n  declare readonly value: Value;\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  isConstant(): boolean {\n    return this.key.isConstant() && this.value.isConstant();\n  }\n\n  setValue(newValue: Value): Value {\n    if ((this.flags & Field.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    const oldValue = this.value;\n    Object.defineProperty(this, \"value\", {\n      value: newValue,\n      enumerable: true,\n      configurable: true,\n    });\n    return oldValue;\n  }\n\n  updatedValue(value: Value): Slot {\n    return new Slot(this.key, value);\n  }\n\n  bitwiseOr(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseOrOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseOr(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseOr(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseXor(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseXorOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseXor(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseXor(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseAnd(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseAndOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseAnd(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseAnd(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  plus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new PlusOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.plus(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.plus(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  minus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new MinusOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.minus(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.minus(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  times(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new TimesOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.times(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.times(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  divide(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new DivideOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.divide(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.divide(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  modulo(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new ModuloOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Slot && this.key.equals(that.key)) {\n      newValue = this.value.modulo(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.modulo(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  not(): Item {\n    const newValue = this.value.not();\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseNot(): Item {\n    const newValue = this.value.bitwiseNot();\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  negative(): Item {\n    const newValue = this.value.negative();\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  positive(): Item {\n    const newValue = this.value.positive();\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  inverse(): Item {\n    const newValue = this.value.inverse();\n    if (newValue.isDefined()) {\n      return new Slot(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const key = this.key.evaluate(interpreter).toValue();\n    const value = this.value.evaluate(interpreter).toValue();\n    if (key === this.key && value === this.value) {\n      return this;\n    } else if (key.isDefined() && value.isDefined()) {\n      return new Slot(key, value);\n    }\n    return Item.absent();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const key = this.key.substitute(interpreter).toValue();\n    const value = this.value.substitute(interpreter).toValue();\n    if (key === this.key && value === this.value) {\n      return this;\n    } else if (key.isDefined() && value.isDefined()) {\n      return new Slot(key, value);\n    }\n    return Item.absent();\n  }\n\n  toAny(): AnyField {\n    const field = {} as {[key: string]: AnyValue};\n    if (this.key instanceof Text) {\n      field[this.key.value] = this.value.toAny();\n    } else {\n      field.$key = this.key.toAny();\n      field.$value = this.value.toAny();\n    }\n    return field;\n  }\n\n  isAliased(): boolean {\n    return false;\n  }\n\n  isMutable(): boolean {\n    return (this.flags & Field.ImmutableFlag) === 0;\n  }\n\n  alias(): void {\n    if ((this.flags & Field.ImmutableFlag) === 0) {\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags | Field.ImmutableFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"value\", {\n        value: this.value,\n        enumerable: true,\n      });\n    }\n  }\n\n  branch(): Slot {\n    if ((this.flags & Field.ImmutableFlag) !== 0) {\n      return new Slot(this.key, this.value, this.flags & ~Field.ImmutableFlag);\n    } else {\n      return this;\n    }\n  }\n\n  clone(): Slot {\n    return new Slot(this.key.clone(), this.value.clone());\n  }\n\n  commit(): this {\n    if ((this.flags & Field.ImmutableFlag) === 0) {\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags | Field.ImmutableFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"value\", {\n        value: this.value,\n        enumerable: true,\n      });\n    }\n    this.value.commit();\n    return this;\n  }\n\n  interpolateTo(that: Slot): Interpolator<Slot>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Slot) {\n      return SlotInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 2;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Slot) {\n      let order = this.key.compareTo(that.key);\n      if (order === 0) {\n        order = this.value.compareTo(that.value);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Slot) {\n      return this.key.equals(that.key) && this.value.equivalentTo(that.value, epsilon);\n    }\n    return false;\n  }\n\n  keyEquals(key: unknown): boolean {\n    if (typeof key === \"string\" && this.key instanceof Text) {\n      return this.key.value === key;\n    } else if (key instanceof Field) {\n      return this.key.equals(key.key);\n    } else {\n      return this.key.equals(key);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Slot) {\n      return this.key.equals(that.key) && this.value.equals(that.value);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(Slot),\n        this.key.hashCode()), this.value.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Slot\").write(46/*'.'*/).write(\"of\").write(40/*'('*/).display(this.key);\n    if (!(this.value instanceof Extant)) {\n      output = output.write(44/*','*/).write(32/*' '*/).display(this.value);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    this.debug(output);\n  }\n\n  static of(key: AnyValue, value?: AnyValue): Slot {\n    key = Value.fromAny(key);\n    if (arguments.length === 1) {\n      value = Value.extant();\n    } else {\n      value = Value.fromAny(value);\n    }\n    return new Slot(key, value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Field} from \"./Field\";\nimport {Slot} from \"./Slot\";\nimport type {Value} from \"./Value\";\n\n/** @hidden */\nexport interface FieldInterpolator extends Interpolator<Field> {\n  /** @hidden */\n  readonly keyInterpolator: Interpolator<Value>;\n  /** @hidden */\n  readonly valueInterpolator: Interpolator<Value>;\n\n  readonly 0: Field;\n\n  readonly 1: Field;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const FieldInterpolator = function (y0: Field, y1: Field): FieldInterpolator {\n  const interpolator = function (u: number): Field {\n    const key = interpolator.keyInterpolator(u);\n    const value = interpolator.valueInterpolator(u);\n    return Slot.of(key, value);\n  } as FieldInterpolator;\n  Object.setPrototypeOf(interpolator, FieldInterpolator.prototype);\n  Object.defineProperty(interpolator, \"keyInterpolator\", {\n    value: y0.key.interpolateTo(y1.key),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"valueInterpolator\", {\n    value: y0.value.interpolateTo(y1.value),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: Field, y1: Field): FieldInterpolator;\n\n  /** @hidden */\n  prototype: FieldInterpolator;\n};\n\nFieldInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(FieldInterpolator.prototype, 0, {\n  get(this: FieldInterpolator): Field {\n    return Slot.of(this.keyInterpolator[0], this.valueInterpolator[0]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(FieldInterpolator.prototype, 1, {\n  get(this: FieldInterpolator): Field {\n    return Slot.of(this.keyInterpolator[1], this.valueInterpolator[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nFieldInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof FieldInterpolator) {\n    return this.keyInterpolator.equals(that.keyInterpolator)\n        && this.valueInterpolator.equals(that.valueInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyField, Field} from \"./Field\";\nimport {AttrInterpolator} from \"./\"; // forward import\nimport {Slot} from \"./\"; // forward import\nimport {AnyValue, Value} from \"./\"; // forward import\nimport {AnyText, Text} from \"./\"; // forward import\nimport {Extant} from \"./\" // forward import\nimport {Expression} from \"./\"; // forward import\nimport {BitwiseOrOperator} from \"./\"; // forward import\nimport {BitwiseXorOperator} from \"./\"; // forward import\nimport {BitwiseAndOperator} from \"./\"; // forward import\nimport {PlusOperator} from \"./\"; // forward import\nimport {MinusOperator} from \"./\"; // forward import\nimport {TimesOperator} from \"./\"; // forward import\nimport {DivideOperator} from \"./\"; // forward import\nimport {ModuloOperator} from \"./\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"./\"; // forward import\n\nexport class Attr extends Field {\n  constructor(key: Text, value: Value, flags?: number) {\n    super();\n    Object.defineProperty(this, \"key\", {\n      value: key,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags !== void 0 ? flags : 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return this.key.isConstant() && this.value.isConstant();\n  }\n\n  get name(): string {\n    return this.key.value;\n  }\n\n  declare readonly key: Text;\n\n  declare readonly value: Value;\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  setValue(newValue: Value): Value {\n    if ((this.flags & Field.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    const oldValue = this.value;\n    Object.defineProperty(this, \"value\", {\n      value: newValue,\n      enumerable: true,\n      configurable: true,\n    });\n    return oldValue;\n  }\n\n  updatedValue(value: Value): Attr {\n    return new Attr(this.key, value);\n  }\n\n  bitwiseOr(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseOrOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseOr(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseOr(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseXor(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseXorOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseXor(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseXor(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseAnd(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseAndOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.bitwiseAnd(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.bitwiseAnd(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  plus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new PlusOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.plus(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.plus(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  minus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new MinusOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.minus(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.minus(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  times(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new TimesOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.times(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.times(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  divide(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new DivideOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.divide(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.divide(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  modulo(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new ModuloOperator(this, that);\n    }\n    let newValue;\n    if (that instanceof Attr && this.key.equals(that.key)) {\n      newValue = this.value.modulo(that.value);\n    } else if (that instanceof Value) {\n      newValue = this.value.modulo(that);\n    } else {\n      newValue = Value.absent();\n    }\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  not(): Item {\n    const newValue = this.value.not();\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  bitwiseNot(): Item {\n    const newValue = this.value.bitwiseNot();\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  negative(): Item {\n    const newValue = this.value.negative();\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  positive(): Item {\n    const newValue = this.value.positive();\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  inverse(): Item {\n    const newValue = this.value.inverse();\n    if (newValue.isDefined()) {\n      return new Attr(this.key, newValue);\n    }\n    return Item.absent();\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const key = this.key.evaluate(interpreter).toValue();\n    const value = this.value.evaluate(interpreter).toValue();\n    if (key === this.key && value === this.value) {\n      return this;\n    } else if (key.isDefined() && value.isDefined()) {\n      if (key instanceof Text) {\n        return new Attr(key, value);\n      } else {\n        return new Slot(key, value);\n      }\n    }\n    return Item.absent();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const key = this.key.substitute(interpreter).toValue();\n    const value = this.value.substitute(interpreter).toValue();\n    if (key === this.key && value === this.value) {\n      return this;\n    } else if (key.isDefined() && value.isDefined()) {\n      if (key instanceof Text) {\n        return new Attr(key, value);\n      } else {\n        return new Slot(key, value);\n      }\n    }\n    return Item.absent();\n  }\n\n  toAny(): AnyField {\n    const field = {} as {[key: string]: AnyValue};\n    field[\"@\" + this.key.value] = this.value.toAny();\n    return field;\n  }\n\n  isAliased(): boolean {\n    return false;\n  }\n\n  isMutable(): boolean {\n    return (this.flags & Field.ImmutableFlag) === 0;\n  }\n\n  alias(): void {\n    if ((this.flags & Field.ImmutableFlag) === 0) {\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags | Field.ImmutableFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"value\", {\n        value: this.value,\n        enumerable: true,\n      });\n    }\n  }\n\n  branch(): Attr {\n    if ((this.flags & Field.ImmutableFlag) !== 0) {\n      return new Attr(this.key, this.value, this.flags & ~Field.ImmutableFlag);\n    } else {\n      return this;\n    }\n  }\n\n  clone(): Attr {\n    return new Attr(this.key.clone(), this.value.clone());\n  }\n\n  commit(): this {\n    if ((this.flags & Field.ImmutableFlag) === 0) {\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags | Field.ImmutableFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"value\", {\n        value: this.value,\n        enumerable: true,\n      });\n    }\n    this.value.commit();\n    return this;\n  }\n\n  interpolateTo(that: Attr): Interpolator<Attr>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Attr) {\n      return AttrInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 1;\n  }\n\n  compareTo(that: Item): number {\n    if (that instanceof Attr) {\n      let order = this.key.compareTo(that.key);\n      if (order === 0) {\n        order = this.value.compareTo(that.value);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Attr) {\n      return this.key.equals(that.key) && this.value.equivalentTo(that.value, epsilon);\n    }\n    return false;\n  }\n\n  keyEquals(key: unknown): boolean {\n    if (typeof key === \"string\") {\n      return this.key.value === key;\n    } else if (key instanceof Field) {\n      return this.key.equals(key.key);\n    } else {\n      return this.key.equals(key);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Attr) {\n      return this.key.equals(that.key) && this.value.equals(that.value);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(Attr),\n        this.key.hashCode()), this.value.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Attr\").write(46/*'.'*/).write(\"of\").write(40/*'('*/).display(this.key);\n    if (!(this.value instanceof Extant)) {\n      output = output.write(44/*','*/).write(32/*' '*/).display(this.value);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    this.debug(output);\n  }\n\n  static of(key: AnyText, value?: AnyValue): Attr {\n    key = Text.fromAny(key);\n    if (arguments.length === 1) {\n      value = Value.extant();\n    } else {\n      value = Value.fromAny(value);\n    }\n    return new Attr(key, value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Attr} from \"./Attr\";\nimport type {Value} from \"./Value\";\nimport type {Text} from \"./Text\";\n\n/** @hidden */\nexport interface AttrInterpolator extends Interpolator<Attr> {\n  /** @hidden */\n  readonly keyInterpolator: Interpolator<Text>;\n  /** @hidden */\n  readonly valueInterpolator: Interpolator<Value>;\n\n  readonly 0: Attr;\n\n  readonly 1: Attr;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const AttrInterpolator = function (y0: Attr, y1: Attr): AttrInterpolator {\n  const interpolator = function (u: number): Attr {\n    const key = interpolator.keyInterpolator(u);\n    const value = interpolator.valueInterpolator(u);\n    return Attr.of(key, value);\n  } as AttrInterpolator;\n  Object.setPrototypeOf(interpolator, AttrInterpolator.prototype);\n  Object.defineProperty(interpolator, \"keyInterpolator\", {\n    value: y0.key.interpolateTo(y1.key),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"valueInterpolator\", {\n    value: y0.value.interpolateTo(y1.value),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: Attr, y1: Attr): AttrInterpolator;\n\n  /** @hidden */\n  prototype: AttrInterpolator;\n};\n\nAttrInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(AttrInterpolator.prototype, 0, {\n  get(this: AttrInterpolator): Attr {\n    return Attr.of(this.keyInterpolator[0], this.valueInterpolator[0]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(AttrInterpolator.prototype, 1, {\n  get(this: AttrInterpolator): Attr {\n    return Attr.of(this.keyInterpolator[1], this.valueInterpolator[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nAttrInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof AttrInterpolator) {\n    return this.keyInterpolator.equals(that.keyInterpolator)\n        && this.valueInterpolator.equals(that.valueInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Slot} from \"./Slot\";\nimport type {Value} from \"./Value\";\n\n/** @hidden */\nexport interface SlotInterpolator extends Interpolator<Slot> {\n  /** @hidden */\n  readonly keyInterpolator: Interpolator<Value>;\n  /** @hidden */\n  readonly valueInterpolator: Interpolator<Value>;\n\n  readonly 0: Slot;\n\n  readonly 1: Slot;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const SlotInterpolator = function (y0: Slot, y1: Slot): SlotInterpolator {\n  const interpolator = function (u: number): Slot {\n    const key = interpolator.keyInterpolator(u);\n    const value = interpolator.valueInterpolator(u);\n    return Slot.of(key, value);\n  } as SlotInterpolator;\n  Object.setPrototypeOf(interpolator, SlotInterpolator.prototype);\n  Object.defineProperty(interpolator, \"keyInterpolator\", {\n    value: y0.key.interpolateTo(y1.key),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"valueInterpolator\", {\n    value: y0.value.interpolateTo(y1.value),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: Slot, y1: Slot): SlotInterpolator;\n\n  /** @hidden */\n  prototype: SlotInterpolator;\n};\n\nSlotInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(SlotInterpolator.prototype, 0, {\n  get(this: SlotInterpolator): Slot {\n    return Slot.of(this.keyInterpolator[0], this.valueInterpolator[0]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(SlotInterpolator.prototype, 1, {\n  get(this: SlotInterpolator): Slot {\n    return Slot.of(this.keyInterpolator[1], this.valueInterpolator[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nSlotInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof SlotInterpolator) {\n    return this.keyInterpolator.equals(that.keyInterpolator)\n        && this.valueInterpolator.equals(that.valueInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item} from \"./Item\";\nimport type {Builder} from \"@swim/util\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport type {Field} from \"./Field\";\nimport {Attr} from \"./Attr\";\nimport {Slot} from \"./Slot\";\nimport {ValueBuilder} from \"./\"; // forward import\nimport {Record} from \"./\"; // forward import\nimport {Data} from \"./\"; // forward import\nimport {AnyText, Text} from \"./\"; // forward import\nimport {AnyNum, Num} from \"./\"; // forward import\nimport {Bool} from \"./\"; // forward import\nimport {Extant} from \"./\"; // forward import\nimport {Absent} from \"./\"; // forward import\nimport {Expression} from \"./\"; // forward import\nimport {BitwiseOrOperator} from \"./\"; // forward import\nimport {BitwiseXorOperator} from \"./\"; // forward import\nimport {BitwiseAndOperator} from \"./\"; // forward import\nimport {LtOperator} from \"./\"; // forward import\nimport {LeOperator} from \"./\"; // forward import\nimport {EqOperator} from \"./\"; // forward import\nimport {NeOperator} from \"./\"; // forward import\nimport {GeOperator} from \"./\"; // forward import\nimport {GtOperator} from \"./\"; // forward import\nimport {PlusOperator} from \"./\"; // forward import\nimport {MinusOperator} from \"./\"; // forward import\nimport {TimesOperator} from \"./\"; // forward import\nimport {DivideOperator} from \"./\"; // forward import\nimport {ModuloOperator} from \"./\"; // forward import\nimport {LambdaFunc} from \"./\"; // forward import\n\nexport type AnyValue = Value\n                     | {readonly [key: string]: AnyValue}\n                     | ReadonlyArray<AnyItem>\n                     | Uint8Array\n                     | string\n                     | number\n                     | boolean\n                     | null\n                     | undefined;\n\nexport abstract class Value extends Item {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Returns `true` if this `Value` is not [[Absent]].\n   */\n  isDefined(): boolean {\n    return true;\n  }\n\n  /**\n   * Returns `true` if this `Value` is neither [[Extant]] nor [[Absent]].\n   */\n  isDistinct(): boolean {\n    return true;\n  }\n\n  /**\n   * Always returns [[Absent]] because a `Value` can't be a `Field`, so it\n   * can't have a key component.\n   */\n  get key(): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns `this` because every `Value` is its own value component.\n   */\n  toValue(): Value {\n    return this;\n  }\n\n  /**\n   * Returns the `key` string of the first member of this `Value`, if this\n   * `Value` is a [[Record]], and its first member is an [[Attr]]; otherwise\n   * returns `undefined` if this `Value` is not a `Record`, or if this `Value`\n   * is a `Record` whose first member is not an `Attr`.\n   *\n   * Used to concisely get the name of the discriminating attribute of a\n   * structure.  The `tag` can be used to discern the nominal type of a\n   * polymorphic structure, similar to an XML element tag.\n   */\n  get tag(): string | undefined {\n    return void 0;\n  }\n\n  /**\n   * Returns the [[Value.flattened flattened]] members of this `Value` after\n   * all attributes have been removed, if this `Value` is a [[Record]];\n   * otherwise returns `this` if this `Value` is not a `Record`.\n   *\n   * Used to concisely get the scalar value of an attributed structure.  An\n   * attributed structure is a `Record` with one or more attributes that modify\n   * one or more other members.\n   */\n  get target(): Value {\n    return this;\n  }\n\n  /**\n   * Returns the sole member of this `Value`, if this `Value` is a [[Record]]\n   * with exactly one member, and its member is a `Value`; returns [[Extant]]\n   * if this `Value` is an empty `Record`; otherwise returns `this` if this\n   * `Value` is a `Record` with more than one member, or if this `Value` is a\n   * not a `Record`.\n   *\n   * Used to convert a unary `Record` into its member `Value`.  Facilitates\n   * writing code that treats a unary `Record` equivalently to a bare `Value`.\n   */\n  flattened(): Value {\n    return this;\n  }\n\n  /**\n   * Returns `this` if this `Value` is a [[Record]]; returns a `Record`\n   * containing just this `Value`, if this `Value` is [[Value.isDistinct\n   * distinct]]; otherwise returns an empty `Record` if this `Value` is\n   * [[Extant]] or [[Absent]].  Facilitates writing code that treats a bare\n   * `Value` equivalently to a unary `Record`.\n   */\n  unflattened(): Record {\n    return Record.of(this);\n  }\n\n  /**\n   * Returns the value of the first member of this `Value`, if this `Value` is\n   * a `Record`, and its first member is an [[Attr]] whose `key` string is\n   * equal to `tag`; otherwise returns [[Absent]] if this `Value` is not a\n   * `Record`, or if this `Value` is a `Record` whose first member is not an\n   * `Attr`, or if this `Value` is a `Record` whose first member is an `Attr`\n   * whose `key` does not equal the `tag`.\n   *\n   * Used to conditionally get the value of the head `Attr` of a structure, if\n   * and only if the key string of the head `Attr` is equal to the `tag`.  Can\n   * be used to check if a structure might conform to a nominal type named\n   * `tag`, while simultaneously getting the value of the `tag` attribute.\n   */\n  header(tag: string): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Returns the [[Value.unflattened unflattened]] [[Value.header header]] of\n   * this `Value`, if this `Value` is a [[Record]], and its first member is an\n   * [[Attr]] whose `key` string is equal to `tag`; otherwise returns\n   * `undefined`.\n   *\n   * The `headers` of the `tag` attribute of a structure are like the\n   * attributes of an XML element tag; through unlike an XML element, `tag`\n   * attribute headers are not limited to string keys and values.\n   */\n  headers(tag: string): Record | undefined {\n    return void 0;\n  }\n\n  /**\n   * Returns the first member of this `Value`, if this `Value` is a non-empty\n   * [[Record]]; otherwise returns [[Absent]].\n   */\n  head(): Item {\n    return Item.absent();\n  }\n\n  /**\n   * Returns a view of all but the first member of this `Value`, if this\n   * `Value` is a non-empty [[Record]]; otherwise returns an empty `Record`\n   * if this `Value` is not a `Record`, of if this `Value` is itself an\n   * empty `Record`.\n   */\n  tail(): Record {\n    return Record.empty();\n  }\n\n  /**\n   * Returns the [[Record.flattened flattened]] [[Value.tail tail]] of this\n   * `Value`.  Used to recursively deconstruct a structure, terminating with\n   * its last `Value`, rather than a unary `Record` containing its last value,\n   * if the structure ends with a `Value` member.\n   */\n  body(): Value {\n    return Value.extant();\n  }\n\n  /**\n   * Returns the number of members contained in this `Value`, if this `Value`\n   * is a [[Record]]; otherwise returns `0` if this `Value` is not a `Record`.\n   */\n  get length(): number {\n    return 0;\n  }\n\n  /**\n   * Returns `true` if this `Value` is a [[Record]] that has a [[Field]] member\n   * with a key that is equal to the given `key`; otherwise returns `false` if\n   * this `Value` is not a `Record`, or if this `Value` is a `Record`, but has\n   * no `Field` member with a key equal to the given `key`.\n   */\n  has(key: AnyValue): boolean {\n    return false;\n  }\n\n  /**\n   * Returns the value of the last [[Field]] member of this `Value` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Value` is not a\n   * [[Record]], or if this `Value` is a `Record`, but has no `Field` member\n   * with a key equal to the given `key`.\n   */\n  get(key: AnyValue): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Returns the value of the last [[Attr]] member of this `Value` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Value` is not a\n   * [[Record]], or if this `Value` is a `Record`, but has no `Attr` member\n   * with a key equal to the given `key`.\n   */\n  getAttr(key: AnyText): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Returns the value of the last [[Slot]] member of this `Value` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Value` is not a\n   * [[Record]], or if this `Value` is a `Record`, but has no `Slot` member\n   * with a key equal to the given `key`.\n   */\n  getSlot(key: AnyValue): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Returns the last [[Field]] member of this `Value` whose key is equal to\n   * the given `key`; returns `undefined` if this `Value` is not a [[Record]],\n   * or if this `Value` is a `Record`, but has no `Field` member with a `key`\n   * equal to the given `key`.\n   */\n  getField(key: AnyValue): Field | undefined {\n    return void 0;\n  }\n\n  /**\n   * Returns the member of this `Value` at the given `index`, if this `Value`\n   * is a [[Record]], and the `index` is greater than or equal to zero, and\n   * less than the [[Record.length length]] of the `Record`; otherwise returns\n   * [[Absent]] if this `Value` is not a `Record`, or if this `Value` is a\n   * `Record`, but the `index` is out of bounds.\n   */\n  getItem(index: AnyNum): Item {\n    return Item.absent();\n  }\n\n  deleted(key: AnyValue): Value {\n    return this;\n  }\n\n  conditional(thenTerm: AnyValue, elseTerm: AnyValue): Value;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item {\n    thenTerm = Item.fromAny(thenTerm);\n    return thenTerm;\n  }\n\n  or(that: AnyValue): Value;\n  or(that: AnyItem): Item;\n  or(that: AnyItem): Item {\n    return this;\n  }\n\n  and(that: AnyValue): Value;\n  and(that: AnyItem): Item;\n  and(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    return that;\n  }\n\n  bitwiseOr(that: AnyValue): Value;\n  bitwiseOr(that: AnyItem): Item;\n  bitwiseOr(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseOrOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.bitwiseOr(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.bitwiseOr(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  bitwiseXor(that: AnyValue): Value;\n  bitwiseXor(that: AnyItem): Item;\n  bitwiseXor(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseXorOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.bitwiseXor(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.bitwiseXor(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  bitwiseAnd(that: AnyValue): Value;\n  bitwiseAnd(that: AnyItem): Item;\n  bitwiseAnd(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new BitwiseAndOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.bitwiseAnd(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.bitwiseAnd(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  lt(that: AnyValue): Value;\n  lt(that: AnyItem): Item;\n  lt(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new LtOperator(this, that);\n    }\n    return super.lt(that);\n  }\n\n  le(that: AnyValue): Value;\n  le(that: AnyItem): Item;\n  le(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new LeOperator(this, that);\n    }\n    return super.le(that);\n  }\n\n  eq(that: AnyValue): Value;\n  eq(that: AnyItem): Item;\n  eq(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new EqOperator(this, that);\n    }\n    return super.eq(that);\n  }\n\n  ne(that: AnyValue): Value;\n  ne(that: AnyItem): Item;\n  ne(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new NeOperator(this, that);\n    }\n    return super.ne(that);\n  }\n\n  ge(that: AnyValue): Value;\n  ge(that: AnyItem): Item;\n  ge(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new GeOperator(this, that);\n    }\n    return super.ge(that);\n  }\n\n  gt(that: AnyValue): Value;\n  gt(that: AnyItem): Item;\n  gt(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new GtOperator(this, that);\n    }\n    return super.gt(that);\n  }\n\n  plus(that: AnyValue): Value;\n  plus(that: AnyItem): Item;\n  plus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new PlusOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.plus(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.plus(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  minus(that: AnyValue): Value;\n  minus(that: AnyItem): Item;\n  minus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new MinusOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.minus(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.minus(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  times(that: AnyValue): Value;\n  times(that: AnyItem): Item;\n  times(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new TimesOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.times(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.times(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  divide(that: AnyValue): Value;\n  divide(that: AnyItem): Item;\n  divide(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new DivideOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.divide(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.divide(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  modulo(that: AnyValue): Value;\n  modulo(that: AnyItem): Item;\n  modulo(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Expression) {\n      return new ModuloOperator(this, that);\n    } else if (that instanceof Attr) {\n      const newValue = this.modulo(that.value);\n      if (newValue.isDefined()) {\n        return new Attr(that.key, newValue);\n      }\n    } else if (that instanceof Slot) {\n      const newValue = this.modulo(that.value);\n      if (newValue.isDefined()) {\n        return new Slot(that.key, newValue);\n      }\n    }\n    return Item.absent();\n  }\n\n  not(): Value {\n    return Value.absent();\n  }\n\n  bitwiseNot(): Value {\n    return Value.absent();\n  }\n\n  negative(): Value {\n    return Value.absent();\n  }\n\n  positive(): Value {\n    return Value.absent();\n  }\n\n  inverse(): Value {\n    return Value.absent();\n  }\n\n  lambda(template: Value): Value {\n    return new LambdaFunc(this, template);\n  }\n\n  /**\n   * Converts this `Value` into a `string` value, if possible; otherwise returns\n   * `undefined` if this `Value` can't be converted into a `string` value.\n   */\n  stringValue(): string | undefined;\n  /**\n   * Converts this `Value` into a `string` value, if possible; otherwise returns\n   * `orElse` if this `Value` can't be converted into a `string` value.\n   */\n  stringValue<T>(orElse: T): string | T;\n  stringValue<T>(orElse?: T): string | T | undefined {\n    return orElse;\n  }\n\n  /**\n   * Converts this `Value` into a `number` value, if possible; otherwise returns\n   * `undefined` if this `Value` can't be converted into a `number` value.\n   */\n  numberValue(): number | undefined;\n  /**\n   * Converts this `Value` into a `number` value, if possible; otherwise returns\n   * `orElse` if this `Value` can't be converted into a `number` value.\n   */\n  numberValue<T>(orElse: T): number | T;\n  numberValue<T>(orElse?: T): number | T | undefined {\n    return orElse;\n  }\n\n  /**\n   * Converts this `Value` into a `boolean` value, if possible; otherwise\n   * returns `undefined` if this `Value` can't be converted into a `boolean`\n   * value.\n   */\n  booleanValue(): boolean | undefined;\n  /**\n   * Converts this `Value` into a `boolean` value, if possible; otherwise\n   * returns `orElse` if this `Value` can't be converted into a `boolean` value.\n   */\n  booleanValue<T>(orElse: T): boolean | T;\n  booleanValue<T>(orElse?: T): boolean | T | undefined {\n    return orElse;\n  }\n\n  abstract toAny(): AnyValue;\n\n  isAliased(): boolean {\n    return false;\n  }\n\n  isMutable(): boolean {\n    return false;\n  }\n\n  alias(): void {\n    // nop\n  }\n\n  branch(): Value {\n    return this;\n  }\n\n  clone(): Value {\n    return this;\n  }\n\n  commit(): this {\n    return this;\n  }\n\n  interpolateTo(that: Value): Interpolator<Value>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    return super.interpolateTo(that);\n  }\n\n  keyEquals(key: unknown): boolean {\n    return false;\n  }\n\n  static builder(): Builder<Item, Value> {\n    return new ValueBuilder();\n  }\n\n  static empty(): Value {\n    return Record.empty();\n  }\n\n  static extant(): Value {\n    return Extant.extant();\n  }\n\n  static absent(): Value {\n    return Absent.absent();\n  }\n\n  static fromAny(value: AnyValue): Value {\n    if (value instanceof Value) {\n      return value;\n    } else if (value === void 0) {\n      return Absent.absent();\n    } else if (value === null) {\n      return Extant.extant();\n    } else if (typeof value === \"boolean\") {\n      return Bool.from(value);\n    } else if (typeof value === \"number\") {\n      return Num.from(value);\n    } else if (typeof value === \"string\") {\n      return Text.from(value);\n    } else if (value instanceof Uint8Array) {\n      return Data.wrap(value);\n    } else if (Array.isArray(value)) {\n      return Record.fromArray(value);\n    } else if (typeof value === \"object\") {\n      return Record.fromObject(value as {[key: string]: AnyValue});\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors, Cursor, Builder} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {Field} from \"./Field\";\nimport {Attr} from \"./Attr\";\nimport {Slot} from \"./Slot\";\nimport {AnyValue, Value} from \"./Value\";\nimport {RecordInterpolator} from \"./\"; // forward import\nimport {RecordCursor} from \"./\"; // forward import\nimport {RecordMap} from \"./\"; // forward import\nimport {AnyText, Text} from \"./\"; // forward import\nimport type {AnyNum} from \"./Num\";\nimport {AnyInterpreter, Interpreter} from \"./\"; // forward import\n\nexport type AnyRecord = Record\n                      | {readonly [key: string]: AnyValue}\n                      | ReadonlyArray<AnyItem>;\n\nexport abstract class Record extends Value implements Builder<Item, Record> {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Returns `true` if this `Record` has no members.\n   */\n  abstract isEmpty(): boolean;\n\n  /**\n   * Returns `true` if this `Record` has only [[Value]] membersno `Field`\n   * members.\n   */\n  isArray(): boolean {\n    return this.fieldCount === 0;\n  }\n\n  /**\n   * Returns `true` if this `Record` has only [[Field]] membersno `Value`\n   * members.\n   */\n  isObject(): boolean {\n    return this.valueCount === 0;\n  }\n\n  /**\n   * Returns the number of members contained in this `Record`.\n   */\n  abstract get length(): number;\n\n  /**\n   * Returns the number of [[Field]] members contained in this `Record`.\n   */\n  get fieldCount(): number {\n    let count = 0;\n    this.forEach(function (member: Item): void {\n      if (member instanceof Field) {\n        count += 1;\n      }\n    }, this);\n    return count;\n  }\n\n  /**\n   * Returns the number of [[Value]] members contained in this `Record`.\n   */\n  get valueCount(): number {\n    let count = 0;\n    this.forEach(function (member: Item): void {\n      if (member instanceof Value) {\n        count += 1;\n      }\n    }, this);\n    return count;\n  }\n\n  isConstant(): boolean {\n    return this.forEach(function (member: Item): boolean | undefined {\n      return member.isConstant() ? void 0 : false;\n    }, this) === void 0;\n  }\n\n  /**\n   * Returns the `key` string of the first member of this `Record`, if the\n   * first member is an [[Attr]]; otherwise returns `undefined` if the first\n   * member is not an `Attr`.\n   *\n   * Used to concisely get the name of the discriminating attribute of a\n   * structure.  The `tag` can be used to discern the nominal type of a\n   * polymorphic structure, similar to an XML element tag.\n   */\n  get tag(): string | undefined {\n    const item = this.head();\n    if (item instanceof Attr) {\n      return item.key.value;\n    }\n    return void 0;\n  }\n\n  /**\n   * Returns the [[Record.flattened flattened]] members of this `Record` after\n   * all attributes have been removed.\n   *\n   * Used to concisely get the scalar value of an attributed structure.  An\n   * attributed structure is a `Record` with one or more attributes that modify\n   * one or more other members.\n   */\n  get target(): Value {\n    let value: Value | undefined;\n    let record: Record | undefined;\n    let modified = false;\n    this.forEach(function (item: Item): void {\n      if (item instanceof Attr) {\n        modified = true;\n      } else if (value === void 0 && item instanceof Value) {\n        value = item;\n      } else {\n        if (record === void 0) {\n          record = Record.create();\n          if (value !== void 0) {\n            record.push(value);\n          }\n        }\n        record.push(item);\n      }\n    }, this);\n    if (value === void 0) {\n      return Value.extant();\n    } else if (record === void 0) {\n      return value;\n    } else if (modified) {\n      return record;\n    } else {\n      return this;\n    }\n  }\n\n  /**\n   * Returns the sole member of this `Record`, if this `Record` has exactly one\n   * member, and its member is a `Value`; returns [[Extant]] if this `Record`\n   * is empty; otherwise returns `this` if this `Record` has more than one\n   * member.\n   *\n   * Used to convert a unary `Record` into its member `Value`.  Facilitates\n   * writing code that treats a unary `Record` equivalently to a bare `Value`.\n   */\n  flattened(): Value {\n    if (this.isEmpty()) {\n      return Value.extant();\n    } else {\n      const items = this.iterator();\n      const head = items.head();\n      items.step();\n      if (items.isEmpty() && head instanceof Value) {\n        return head;\n      } else {\n        return this.branch();\n      }\n    }\n  }\n\n  /**\n   * Returns this `Record`.\n   */\n  unflattened(): Record {\n    return this;\n  }\n\n  /**\n   * Returns the value of the first member of this `Record`, if the first\n   * member is an [[Attr]] whose `key` string is equal to `tag`; otherwise\n   * returns [[Absent]] if the first member of this `Record` is not an `Attr`,\n   * or if the first member of this `Record` is an `Attr` whose `key` does not\n   * equal the `tag`.\n   *\n   * Used to conditionally get the value of the head `Attr` of a structure, if\n   * and only if the key string of the head `Attr` is equal to the `tag`.  Can\n   * be used to check if a structure might conform to a nominal type named\n   * `tag`, while simultaneously getting the value of the `tag` attribute.\n   */\n  header(tag: string): Value {\n    const head = this.head();\n    if (head instanceof Attr && head.key.value === tag) {\n      return head.value;\n    } else {\n      return Value.absent();\n    }\n  }\n\n  /**\n   * Returns the [[Record.unflattened unflattened]] [[Record.header header]] of\n   * this `Record`.  The `headers` of the `tag` attribute of a structure are\n   * like the attributes of an XML element tag; through unlike an XML element,\n   * `tag` attribute headers are not limited to string keys and values.\n   */\n  headers(tag: string): Record | undefined {\n    const head = this.head();\n    if (head instanceof Attr && head.key.value === tag) {\n      const header = head.value;\n      if (header instanceof Record) {\n        return header;\n      } else {\n        return Record.of(header);\n      }\n    }\n    return void 0;\n  }\n\n  /**\n   * Returns the first member of this `Record`, if this `Record` is non-empty;\n   * otherwise returns [[Absent]].\n   */\n  head(): Item {\n    return this.forEach(function (item: Item): Item {\n      return item;\n    }, this) || Item.absent();\n  }\n\n  /**\n   * Returns a view of all but the first member of this `Record`, if this\n   * `Record` is non-empty; otherwise returns an empty `Record`, if this\n   * `Record` is itself empty.\n   */\n  tail(): Record {\n    const tail = Record.create();\n    this.forEach(function (item: Item, index: number): void {\n      if (index > 0) {\n        tail.push(item);\n      }\n    }, this);\n    return tail;\n  }\n\n  /**\n   * Returns the [[Record.flattened flattened]] [[Record.tail tail]] of this\n   * `Record`.  Used to recursively deconstruct a structure, terminating\n   * with its last `Value`, rather than a unary `Record` containing its last\n   * value, if the structure ends with a `Value` member.\n   */\n  body(): Value {\n    const tail = this.tail();\n    if (!tail.isEmpty()) {\n      return tail.flattened();\n    } else {\n      return Value.absent();\n    }\n  }\n\n  /**\n   * Returns `true` if this `Record` has a [[Field]] member with a key that is\n   * equal to the given `key`; otherwise returns `false` if this `Record` has\n   * no `Field` member with a key equal to the given `key`.\n   */\n  has(key: AnyValue): boolean {\n    key = Value.fromAny(key);\n    return this.forEach(function (item: Item): boolean | undefined {\n      return item instanceof Field && item.key.equals(key) ? true : void 0;\n    }, this) || false;\n  }\n\n  indexOf(item: AnyItem, index: number = 0): number {\n    item = Item.fromAny(item);\n    if (index < 0) {\n      index = Math.max(0, this.length + index);\n    }\n    const i = this.forEach(function (member: Item, i: number): number | undefined {\n      return i >= index && (item as Item).equals(member) ? i : void 0;\n    }, this);\n    return i !== void 0 ? i : -1;\n  }\n\n  lastIndexOf(item: AnyItem, index?: number): number {\n    item = Item.fromAny(item);\n    const n = this.length;\n    if (index === void 0) {\n      index = n - 1;\n    } else if (index < 0) {\n      index = n + index;\n    }\n    index = Math.min(index, n - 1);\n    while (index >= 0) {\n      if (item.equals(this.getItem(index))) {\n        return index;\n      }\n      index -= 1;\n    }\n    return -1;\n  }\n\n  /**\n   * Returns the value of the last [[Field]] member of this `Record` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Record` has no\n   * `Field` member with a key equal to the given `key`.\n   */\n  get(key: AnyValue): Value {\n    key = Value.fromAny(key);\n    return this.forEach(function (item: Item): Value | undefined {\n      return item instanceof Field && item.key.equals(key) ? item.value : void 0;\n    }, this) || Value.absent();\n  }\n\n  /**\n   * Returns the value of the last [[Attr]] member of this `Record` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Record` has no\n   * `Attr` member with a key equal to the given `key`.\n   */\n  getAttr(key: AnyText): Value {\n    key = Text.fromAny(key);\n    return this.forEach(function (item: Item): Value | undefined {\n      return item instanceof Attr && item.key.equals(key) ? item.value : void 0;\n    }, this) || Value.absent();\n  }\n\n  /**\n   * Returns the value of the last [[Slot]] member of this `Record` whose key\n   * is equal to the given `key`; returns [[Absent]] if this `Record` has no\n   * `Slot` member with a key equal to the given `key`.\n   */\n  getSlot(key: AnyValue): Value {\n    key = Value.fromAny(key);\n    return this.forEach(function (item: Item): Value | undefined {\n      return item instanceof Slot && item.key.equals(key) ? item.value : void 0;\n    }, this) || Value.absent();\n  }\n\n  /**\n   * Returns the last [[Field]] member of this `Record` whose key is equal to\n   * the given `key`; returns `undefined` if this `Record` has no `Field` member\n   * with a `key` equal to the given `key`.\n   */\n  getField(key: AnyValue): Field | undefined {\n    key = Value.fromAny(key);\n    return this.forEach(function (item: Item): Field | undefined {\n      return item instanceof Field && item.key.equals(key) ? item : void 0;\n    }, this);\n  }\n\n  /**\n   * Returns the member of this `Record` at the given `index`, if the `index`\n   * is greater than or equal to zero, and less than the [[Record.length\n   * length]] of this `Record`; otherwise returns [[Absent]] if the `index` is\n   * out of bounds.\n   */\n  abstract getItem(index: AnyNum): Item;\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const items = this.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item instanceof Field && item.key.equals(key)) {\n        if (item.isMutable()) {\n          item.setValue(newValue);\n        } else {\n          items.set(item.updatedValue(newValue));\n        }\n        return this;\n      }\n      items.step();\n    }\n    this.push(new Slot(key, newValue));\n    return this;\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    key = Text.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const items = this.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item instanceof Field && item.key.equals(key)) {\n        if (item instanceof Attr && item.isMutable()) {\n          item.setValue(newValue);\n        } else {\n          items.set(new Attr(key, newValue));\n        }\n        return this;\n      }\n      items.step();\n    }\n    this.push(new Attr(key, newValue));\n    return this;\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const items = this.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item instanceof Field && item.key.equals(key)) {\n        if (item instanceof Slot && item.isMutable()) {\n          item.setValue(newValue);\n        } else {\n          items.set(new Slot(key, newValue));\n        }\n        return this;\n      }\n      items.step();\n    }\n    this.push(new Slot(key, newValue));\n    return this;\n  }\n\n  /**\n   * Replaces the member of this `Record` at the given `index` with a new\n   * `item`, returning {@code this} {@code Record}, if the {@code index} is\n   * greater than or equal to zero, and less than the [[Record.length length]]\n   * of this {@code Record}.\n   *\n   * @throws `Error` if this is an immutable `Record`.\n   * @throws `RangeError` if the `index` is out of bounds.\n   */\n  abstract setItem(index: number, item: AnyItem): this;\n\n  updated(key: AnyValue, value: AnyValue): Record {\n    key = Value.fromAny(key);\n    value = Value.fromAny(value);\n    const record = this.isMutable() ? this : this.branch();\n    const items = record.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item.key.equals(key)) {\n        if (item instanceof Field && item.isMutable()) {\n          item.setValue(value);\n        } else {\n          items.set(new Slot(key, value));\n        }\n        return record;\n      }\n      items.step();\n    }\n    record.push(new Slot(key, value));\n    return record;\n  }\n\n  updatedAttr(key: AnyText, value: AnyValue): Record {\n    key = Text.fromAny(key);\n    value = Value.fromAny(value);\n    const record = this.isMutable() ? this : this.branch();\n    const items = record.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item.key.equals(key)) {\n        if (item instanceof Attr && item.isMutable()) {\n          item.setValue(value);\n        } else {\n          items.set(new Attr(key, value));\n        }\n        return record;\n      }\n      items.step();\n    }\n    record.push(new Attr(key, value));\n    return record;\n  }\n\n  updatedSlot(key: AnyValue, value: AnyValue): Record {\n    key = Value.fromAny(key);\n    value = Value.fromAny(value);\n    const record = this.isMutable() ? this : this.branch();\n    const items = record.iterator();\n    while (!items.isEmpty()) {\n      const item = items.head();\n      if (item.key.equals(key)) {\n        if (item instanceof Slot && item.isMutable()) {\n          item.setValue(value);\n        } else {\n          items.set(new Slot(key, value));\n        }\n        return record;\n      }\n      items.step();\n    }\n    record.push(new Slot(key, value));\n    return record;\n  }\n\n  abstract push(...items: AnyItem[]): number;\n\n  abstract splice(start: number, deleteCount?: number, ...newItems: AnyItem[]): Item[];\n\n  abstract delete(key: AnyValue): Item;\n\n  abstract clear(): void;\n\n  appended(...items: AnyItem[]): Record {\n    const record = this.isMutable() ? this : this.branch();\n    record.push(...items);\n    return record;\n  }\n\n  prepended(...items: AnyItem[]): Record {\n    const record = this.isMutable() ? this : this.branch();\n    record.splice(0, 0, ...items);\n    return record;\n  }\n\n  deleted(key: AnyValue): Record {\n    const record = this.isMutable() ? this : this.branch();\n    record.delete(key);\n    return record;\n  }\n\n  concat(...items: AnyItem[]): Record {\n    const record = this.isMutable() ? this : this.branch();\n    for (let i = 0, n = items.length; i < n; i += 1) {\n      Item.fromAny(items[i]).forEach(function (item: Item): void {\n        record.push(item);\n      });\n    }\n    return record;\n  }\n\n  slice(lower?: number, upper?: number): Record {\n    return this.subRecord(lower, upper).branch();\n  }\n\n  attr(key: AnyText, value?: AnyValue): this {\n    let field: Field;\n    if (arguments.length === 1) {\n      field = Attr.of(key);\n    } else {\n      field = Attr.of(key, value);\n    }\n    this.push(field);\n    return this;\n  }\n\n  slot(key: AnyValue, value?: AnyValue): this {\n    let field: Field;\n    if (arguments.length === 1) {\n      field = Slot.of(key);\n    } else {\n      field = Slot.of(key, value);\n    }\n    this.push(field);\n    return this;\n  }\n\n  item(item: AnyItem): this {\n    this.push(item);\n    return this;\n  }\n\n  items(...items: AnyItem[]): this {\n    this.push(this, ...items);\n    return this;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Record {\n    interpreter = Interpreter.fromAny(interpreter);\n    const scope = Record.create();\n    interpreter.pushScope(scope);\n    let changed = false;\n    this.forEach(function (oldItem: Item): void {\n      const newItem = oldItem.evaluate(interpreter);\n      if (newItem.isDefined()) {\n        scope.push(newItem);\n      }\n      if (oldItem !== newItem) {\n        changed = true;\n      }\n    }, this);\n    interpreter.popScope();\n    return changed ? scope : this;\n  }\n\n  substitute(interpreter: AnyInterpreter): Record {\n    interpreter = Interpreter.fromAny(interpreter);\n    const scope = Record.create();\n    interpreter.pushScope(scope);\n    let changed = false;\n    this.forEach(function (oldItem: Item) {\n      const newItem = oldItem.substitute(interpreter);\n      if (newItem.isDefined()) {\n        scope.push(newItem);\n      }\n      if (oldItem !== newItem) {\n        changed = true;\n      }\n    }, this);\n    interpreter.popScope();\n    return changed ? scope : this;\n  }\n\n  stringValue(): string | undefined;\n  stringValue<T>(orElse: T): string | T;\n  stringValue<T>(orElse?: T): string | T | undefined {\n    let recordString = \"\";\n    const defined = this.forEach(function (item: Item): null | void {\n      if (item instanceof Value) {\n        const itemString = item.stringValue();\n        if (itemString !== void 0) {\n          recordString += itemString;\n          return;\n        }\n      }\n      return null; // break\n    }, this) === void 0;\n    return defined ? recordString : void 0;\n  }\n\n  toAny(): AnyValue {\n    if (!this.isEmpty() && this.isArray()) {\n      return this.toArray();\n    } else {\n      return this.toObject();\n    }\n  }\n\n  toArray(): AnyItem[] {\n    const array = new Array<AnyItem>(this.length);\n    this.forEach(function (item: Item, index: number): void {\n      if (item instanceof Value) {\n        array[index] = item.toAny();\n      } else if (item instanceof Field) {\n        array[index] = {\n          $key: item.key.toAny(),\n          $value: item.value.toAny(),\n        };\n      }\n    }, this);\n    return array;\n  }\n\n  toObject(): {[key: string]: AnyValue} {\n    const object = {} as {[key: string]: AnyValue};\n    this.forEach(function (item: Item, index: number): void {\n      if (item instanceof Attr) {\n        object[\"@\" + item.key.value] = item.value.toAny();\n      } else if (item instanceof Slot) {\n        if (item.key instanceof Text) {\n          object[item.key.value] = item.value.toAny();\n        } else {\n          object[\"$\" + index] = {\n            $key: item.key.toAny(),\n            $value: item.value.toAny(),\n          };\n        }\n      } else if (item instanceof Value) {\n        object[\"$\" + index] = item.toAny();\n      }\n    }, this);\n    return object;\n  }\n\n  isAliased(): boolean {\n    return false;\n  }\n\n  isMutable(): boolean {\n    return true;\n  }\n\n  alias(): void {\n    // nop\n  }\n\n  branch(): Record {\n    const branch = Record.create();\n    this.forEach(function (item: Item): void {\n      branch.push(item);\n    }, this);\n    return branch;\n  }\n\n  clone(): Record {\n    const clone = Record.create();\n    this.forEach(function (item: Item): void {\n      clone.push(item.clone());\n    }, this);\n    return clone;\n  }\n\n  commit(): this {\n    return this;\n  }\n\n  bind(): Record {\n    return this;\n  }\n\n  subRecord(lower?: number, upper?: number): Record {\n    const n = this.length;\n    if (lower === void 0) {\n      lower = 0;\n    } else if (lower < 0) {\n      lower = n + lower;\n    }\n    lower = Math.min(Math.max(0, lower), n);\n    if (upper === void 0) {\n      upper = n;\n    } else if (upper < 0) {\n      upper = n + upper;\n    }\n    const record = Record.create();\n    this.forEach(function (item: Item, index: number): null | void {\n      if (index < lower!) {\n        return;\n      } else if (index < upper!) {\n        record.push(item);\n        return;\n      } else {\n        return null;\n      }\n    }, this);\n    return record;\n  }\n\n  abstract forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  abstract forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                         thisArg: S): T | undefined;\n\n  iterator(): Cursor<Item> {\n    return new RecordCursor(this);\n  }\n\n  interpolateTo(that: Record): Interpolator<Record>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Record) {\n      return RecordInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 3;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Record) {\n      const xs = this.iterator();\n      const ys = that.iterator();\n      let order = 0;\n      do {\n        if (!xs.isEmpty() && !ys.isEmpty()) {\n          order = xs.head().compareTo(ys.head());\n          xs.step();\n          ys.step();\n        } else {\n          break;\n        }\n      } while (order === 0);\n      if (order !== 0) {\n        return order;\n      } else if (xs.isEmpty() && !ys.isEmpty()) {\n        return -1;\n      } else if (!xs.isEmpty() && ys.isEmpty()) {\n        return 1;\n      } else {\n        return 0;\n      }\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Record) {\n      const xs = this.iterator();\n      const ys = that.iterator();\n      while (!xs.isEmpty() && !ys.isEmpty()) {\n        if (!xs.head().equivalentTo(ys.head(), epsilon)) {\n          return false;\n        }\n        xs.step();\n        ys.step();\n      }\n      return xs.isEmpty() && ys.isEmpty();\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Record) {\n      const xs = this.iterator();\n      const ys = that.iterator();\n      while (!xs.isEmpty() && !ys.isEmpty()) {\n        if (!xs.head().equals(ys.head())) {\n          return false;\n        }\n        xs.step();\n        ys.step();\n      }\n      return xs.isEmpty() && ys.isEmpty();\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    let hashValue = Constructors.hash(Record);\n    this.forEach(function (item: Item): void {\n      hashValue = Murmur3.mix(hashValue, item.hashCode());\n    }, this);\n    return hashValue;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Record\").write(46/*'.'*/);\n    if (this.isEmpty()) {\n      output = output.write(\"empty\").write(40/*'('*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"of\").write(40/*'('*/);\n      this.forEach(function (item: Item, index: number): void {\n        if (index !== 0) {\n          output = output.write(44/*','*/).write(32/*' '*/);\n        }\n        output.display(item);\n      }, this);\n      output = output.write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    this.debug(output);\n  }\n\n  /** @hidden */\n  static readonly AliasedFlag: number = 1;\n  /** @hidden */\n  static readonly ImmutableFlag: number = 2;\n\n  static empty(): Record {\n    return RecordMap.empty();\n  }\n\n  static create(initialCapacity?: number): Record {\n    return RecordMap.create(initialCapacity);\n  }\n\n  static of(...items: AnyItem[]): Record {\n    return RecordMap.of(...items);\n  }\n\n  static fromAny(value: AnyRecord): Record {\n    if (value instanceof Record) {\n      return value;\n    } else if (Array.isArray(value)) {\n      return Record.fromArray(value);\n    } else if (typeof value === \"object\" && value !== null) {\n      return Record.fromObject(value as {[key: string]: AnyValue});\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static fromArray(array: {[index: number]: AnyItem, length?: number}): Record {\n    const n = array.length || 0;\n    const record = Record.create(n);\n    for (let i = 0; i < n; i += 1) {\n      record.push(Item.fromAny(array[i]));\n    }\n    return record;\n  }\n\n  static fromObject(object: {[key: string]: AnyValue}): Record {\n    const record = Record.create();\n    for (const key in object) {\n      const value = object[key];\n      if (key.charCodeAt(0) === 36/*'$'*/) {\n        if (!value || typeof value !== \"object\" || !Object.prototype.hasOwnProperty.call(value, \"$key\")) {\n          record.push(Value.fromAny(value));\n        } else {\n          record.push(Field.of((value as any).$key, (value as any).$value));\n        }\n      } else {\n        record.push(Field.of(key, value));\n      }\n    }\n    return record;\n  }\n\n  /** @hidden */\n  static expand(n: number): number {\n    n = Math.max(8, n) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8; n |= n >> 16;\n    return n + 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport type {Item} from \"./Item\";\nimport {Field} from \"./Field\";\nimport {Value} from \"./Value\";\nimport {Record} from \"./Record\";\n\n/** @hidden */\nexport class ValueBuilder implements Builder<Item, Value> {\n  /** @hidden */\n  record: Record | null;\n  /** @hidden */\n  value: Value | null;\n\n  constructor() {\n    this.record = null;\n    this.value = null;\n  }\n\n  push(...items: Item[]): void {\n    for (let i = 0, n = items.length; i < n; i += 1) {\n      const item = items[i]!;\n      if (item instanceof Field) {\n        return this.pushField(item);\n      } else if (item instanceof Value) {\n        return this.pushValue(item);\n      } else {\n        throw new TypeError(\"\" + item);\n      }\n    }\n  }\n\n  /** @hidden */\n  pushField(item: Field): void {\n    if (this.record === null) {\n      this.record = Record.create();\n      if (this.value !== null) {\n        this.record.push(this.value);\n        this.value = null;\n      }\n    }\n    this.record.push(item);\n  }\n\n  /** @hidden */\n  pushValue(item: Value): void {\n    if (this.record !== null) {\n      this.record.push(item);\n    } else if (this.value === null) {\n      this.value = item;\n    } else {\n      this.record = Record.create();\n      this.record.push(this.value);\n      this.value = null;\n      this.record.push(item);\n    }\n  }\n\n  bind(): Value {\n    if (this.record !== null) {\n      return this.record;\n    } else if (this.value !== null) {\n      return this.value;\n    } else {\n      return Value.absent();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"./Item\";\nimport {Record} from \"./Record\";\n\n/** @hidden */\nexport interface RecordInterpolator extends Interpolator<Record> {\n  /** @hidden */\n  readonly interpolators: ReadonlyArray<Interpolator<Item>>;\n\n  readonly 0: Record;\n\n  readonly 1: Record;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const RecordInterpolator = function (y0: Record, y1: Record): RecordInterpolator {\n  const interpolator = function (u: number): Record {\n    const interpolators = interpolator.interpolators;\n    const interpolatorCount = interpolators.length;\n    const record = Record.create(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      record.push(interpolators[i]!(u));\n    }\n    return record;\n  } as RecordInterpolator;\n  Object.setPrototypeOf(interpolator, RecordInterpolator.prototype);\n  const interpolatorCount = Math.min(y0.length, y1.length);\n  const interpolators = new Array<Interpolator<Item>>(interpolatorCount);\n  for (let i = 0; i < interpolatorCount; i += 1) {\n    interpolators[i] = y0.getItem(i)!.interpolateTo(y1.getItem(i)!);\n  }\n  Object.defineProperty(interpolator, \"interpolators\", {\n    value: interpolators,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: Record, y1: Record): RecordInterpolator;\n\n  /** @hidden */\n  prototype: RecordInterpolator;\n};\n\nRecordInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(RecordInterpolator.prototype, 0, {\n  get(this: RecordInterpolator): Record {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const record = Record.create(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      record.push(interpolators[i]![0]);\n    }\n    return record;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(RecordInterpolator.prototype, 1, {\n  get(this: RecordInterpolator): Record {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const record = Record.create(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      record.push(interpolators[i]![1]);\n    }\n    return record;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nRecordInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof RecordInterpolator) {\n    const n = this.interpolators.length;\n    if (n === that.interpolators.length) {\n      for (let i = 0; i < n; i += 1) {\n        if (!this.interpolators[i]!.equals(that.interpolators[i]!)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport type {Item} from \"./Item\";\nimport type {Record} from \"./Record\";\n\n/** @hidden */\nexport class RecordCursor extends Cursor<Item> {\n  /** @hidden */\n  declare readonly record: Record;\n  /** @hidden */\n  declare readonly lower: number;\n  /** @hidden */\n  declare readonly upper: number;\n  /** @hidden */\n  declare readonly index: number;\n  /** @hidden */\n  declare readonly direction: number;\n\n  constructor(record: Record, lower?: number, upper?: number, index?: number) {\n    super();\n    if (lower === void 0) {\n      lower = 0;\n    }\n    if (upper === void 0) {\n      upper = record.length;\n    }\n    if (index === void 0) {\n      index = lower;\n    }\n    Object.defineProperty(this, \"record\", {\n      value: record,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lower\", {\n      value: lower,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"upper\", {\n      value: upper,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"index\", {\n      value: index,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"direction\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.index >= this.upper;\n  }\n\n  head(): Item {\n    Object.defineProperty(this, \"direction\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    if (this.index < this.upper) {\n      return this.record.getItem(this.index);\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  step(): void {\n    Object.defineProperty(this, \"direction\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    if (this.index < this.upper) {\n      Object.defineProperty(this, \"index\", {\n        value: this.index + 1,\n        enumerable: true,\n        configurable: true,\n      });\n    } else {\n      throw new Error(\"empty\");\n    }\n  }\n\n  skip(count: number): void {\n    Object.defineProperty(this, \"index\", {\n      value: Math.min(Math.max(this.lower, this.index + count, this.upper)),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  hasNext(): boolean {\n    return this.index < this.upper;\n  }\n\n  nextIndex(): number {\n    return this.index - this.lower;\n  }\n\n  next(): {value?: Item, done: boolean} {\n    Object.defineProperty(this, \"direction\", {\n      value: 1,\n      enumerable: true,\n      configurable: true,\n    });\n    const index = this.index;\n    if (index < this.upper) {\n      Object.defineProperty(this, \"index\", {\n        value: index + 1,\n        enumerable: true,\n        configurable: true,\n      });\n      return {value: this.record.getItem(index), done: this.index === this.upper};\n    } else {\n      Object.defineProperty(this, \"index\", {\n        value: this.upper,\n        enumerable: true,\n        configurable: true,\n      });\n      return {done: true};\n    }\n  }\n\n  hasPrevious(): boolean {\n    return this.index > this.lower;\n  }\n\n  previousIndex(): number {\n    return this.index - this.lower - 1;\n  }\n\n  previous(): {value?: Item, done: boolean} {\n    Object.defineProperty(this, \"direction\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n    const index = this.index - 1;\n    if (index >= this.lower) {\n      Object.defineProperty(this, \"index\", {\n        value: index,\n        enumerable: true,\n        configurable: true,\n      });\n      return {value: this.record.getItem(index), done: index === this.lower};\n    } else {\n      Object.defineProperty(this, \"index\", {\n        value: 0,\n        enumerable: true,\n        configurable: true,\n      });\n      return {done: true};\n    }\n  }\n\n  set(newItem: Item): void {\n    if (this.direction > 0) {\n      this.record.setItem(this.index - 1, newItem);\n    } else {\n      this.record.setItem(this.index, newItem);\n    }\n  }\n\n  delete(): void {\n    if (this.direction > 0) {\n      Object.defineProperty(this, \"index\", {\n        value: this.index - 1,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    this.record.splice(this.index, 1);\n    Object.defineProperty(this, \"direction\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {AnyItem, Item} from \"./Item\";\nimport {Field} from \"./Field\";\nimport {Attr} from \"./Attr\";\nimport {Slot} from \"./Slot\";\nimport {AnyValue, Value} from \"./Value\";\nimport {Record} from \"./Record\";\nimport {RecordMapView} from \"./\"; // forward import\nimport {AnyText, Text} from \"./\"; // forward import\nimport {AnyNum, Num} from \"./\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"./\"; // forward import\n\n/** @hidden */\nexport class RecordMap extends Record {\n  constructor(array: Array<Item> | null, table: Array<Field> | null,\n              length: number, fieldCount: number, flags: number) {\n    super();\n    Object.defineProperty(this, \"array\", {\n      value: array,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: table,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: length,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: fieldCount,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly array: Array<Item> | null;\n\n  /** @hidden */\n  declare readonly table: Array<Field> | null;\n\n  isEmpty(): boolean {\n    return this.length === 0;\n  }\n\n  declare readonly length: number;\n\n  // @ts-ignore\n  declare readonly fieldCount: number;\n\n  get valueCount(): number {\n    return this.length - this.fieldCount;\n  }\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  isConstant(): boolean {\n    const array = this.array;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      if (!array![i]!.isConstant()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get tag(): string | undefined {\n    if (this.fieldCount > 0) {\n      const head = this.array![0];\n      if (head instanceof Attr) {\n        return head.key.value;\n      }\n    }\n    return void 0;\n  }\n\n  get target(): Value {\n    let value: Value | undefined;\n    let record: Record | undefined;\n    let modified = false;\n    const array = this.array!;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      const item = array[i];\n      if (item instanceof Attr) {\n        modified = true;\n      } else if (value === void 0 && item instanceof Value) {\n        value = item;\n      } else {\n        if (record === void 0) {\n          record = Record.create();\n          if (value !== void 0) {\n            record.push(value);\n          }\n        }\n        record.push(item);\n      }\n    }\n    if (value === void 0) {\n      return Value.extant();\n    } else if (record === void 0) {\n      return value;\n    } else if (modified) {\n      return record;\n    } else {\n      return this;\n    }\n  }\n\n  head(): Item {\n    if (this.length > 0) {\n      return this.array![0]!;\n    }\n    return Item.absent();\n  }\n\n  tail(): Record {\n    const n = this.length;\n    if (n > 0) {\n      return new RecordMapView(this, 1, n);\n    } else {\n      return Record.empty();\n    }\n  }\n\n  body(): Value {\n    const n = this.length;\n    if (n > 2) {\n      return new RecordMapView(this, 1, n).branch();\n    } else if (n === 2) {\n      const item = this.array![1];\n      if (item instanceof Value) {\n        return item;\n      } else {\n        return Record.of(item);\n      }\n    }\n    return Value.absent();\n  }\n\n  has(key: AnyValue): boolean {\n    if (this.fieldCount !== 0) {\n      key = Value.fromAny(key);\n      const table = this.hashTable()!;\n      const n = table.length;\n      //assert(n > 0);\n      const x = Math.abs(key.hashCode() % n);\n      let i = x;\n      do {\n        const field = table[i];\n        if (field !== void 0) {\n          if (field.key.equals(key)) {\n            return true;\n          }\n        } else {\n          break;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n    }\n    return false;\n  }\n\n  indexOf(item: AnyItem, index: number = 0): number {\n    item = Item.fromAny(item);\n    const array = this.array!;\n    const n = this.length;\n    if (index < 0) {\n      index = Math.max(0, n + index);\n    }\n    while (index < n) {\n      if (item.equals(array[index])) {\n        return index;\n      }\n      index += 1;\n    }\n    return -1;\n  }\n\n  lastIndexOf(item: AnyItem, index?: number): number {\n    item = Item.fromAny(item);\n    const array = this.array!;\n    const n = this.length;\n    if (index === void 0) {\n      index = n - 1;\n    } else if (index < 0) {\n      index = n + index;\n    }\n    index = Math.min(index, n - 1);\n    while (index >= 0) {\n      if (item.equals(array[index])) {\n        return index;\n      }\n      index -= 1;\n    }\n    return -1;\n  }\n\n  get(key: AnyValue): Value {\n    if (this.fieldCount > 0) {\n      key = Value.fromAny(key);\n      const table = this.hashTable()!;\n      const n = table.length;\n      //assert(n > 0);\n      const x = Math.abs(key.hashCode() % n);\n      let i = x;\n      do {\n        const field = table[i];\n        if (field !== void 0) {\n          if (field.key.equals(key)) {\n            return field.value;\n          }\n        } else {\n          break;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n    }\n    return Value.absent();\n  }\n\n  getAttr(key: AnyText): Value {\n    if (this.fieldCount > 0) {\n      key = Text.fromAny(key);\n      const table = this.hashTable()!;\n      const n = table.length;\n      //assert(n > 0);\n      const x = Math.abs(key.hashCode() % n);\n      let i = x;\n      do {\n        const field = table[i];\n        if (field !== void 0) {\n          if (field instanceof Attr && field.key.equals(key)) {\n            return field.value;\n          }\n        } else {\n          break;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n    }\n    return Value.absent();\n  }\n\n  getSlot(key: AnyValue): Value {\n    if (this.fieldCount > 0) {\n      key = Value.fromAny(key);\n      const table = this.hashTable()!;\n      const n = table.length;\n      //assert(n > 0);\n      const x = Math.abs(key.hashCode() % n);\n      let i = x;\n      do {\n        const field = table[i];\n        if (field !== void 0) {\n          if (field instanceof Slot && field.key.equals(key)) {\n            return field.value;\n          }\n        } else {\n          break;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n    }\n    return Value.absent();\n  }\n\n  getField(key: AnyValue): Field | undefined {\n    if (this.fieldCount > 0) {\n      key = Value.fromAny(key);\n      const table = this.hashTable()!;\n      const n = table.length;\n      //assert(n > 0);\n      const x = Math.abs(key.hashCode() % n);\n      let i = x;\n      do {\n        const field = table[i];\n        if (field !== void 0) {\n          if (field.key.equals(key)) {\n            return field;\n          }\n        } else {\n          break;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n    }\n    return void 0;\n  }\n\n  getItem(index: AnyNum): Item {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const n = this.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    if (index >= 0 && index < n) {\n      return this.array![index]!;\n    } else {\n      return Item.absent();\n    }\n  }\n\n  set(key: AnyValue, newValue: Value): this {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      if (this.fieldCount > 0) {\n        this.setAliased(key, newValue);\n      } else {\n        this.pushAliased(new Slot(key, newValue));\n      }\n    } else {\n      if (this.fieldCount > 0) {\n        if (this.table !== null) {\n          this.setMutable(key, newValue);\n        } else {\n          this.updateMutable(key, newValue);\n        }\n      } else {\n        this.pushMutable(new Slot(key, newValue));\n      }\n    }\n    return this;\n  }\n\n  private setAliased(key: Value, newValue: Value): void {\n    const n = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(n + 1));\n    for (let i = 0; i < n; i += 1) {\n      const item = oldArray[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        newArray[i] = item.updatedValue(newValue);\n        i += 1;\n        while (i < n) {\n          newArray[i] = oldArray[i];\n          i += 1;\n        }\n        Object.defineProperty(this, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"flags\", {\n          value: this.flags & ~Record.AliasedFlag,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n      newArray[i] = item;\n    }\n    newArray[n] = new Slot(key, newValue);\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: n + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: this.fieldCount + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private setMutable(key: Value, newValue: Value): void {\n    const table = this.table!;\n    const n = table.length;\n    //assert(n > 0);\n    const x = Math.abs(key.hashCode() % n);\n    let i = x;\n    do {\n      const field = table[i];\n      if (field !== void 0) {\n        if (field.key.equals(key)) {\n          if (field.isMutable()) {\n            field.setValue(newValue);\n            return;\n          } else {\n            this.updateMutable(key, newValue);\n            return;\n          }\n        }\n      } else {\n        break;\n      }\n      i = (i + 1) % n;\n    } while (i !== x);\n    const field = new Slot(key, newValue);\n    this.pushMutable(field);\n    RecordMap.put(table, field);\n  }\n\n  private updateMutable(key: Value, newValue: Value): void {\n    const array = this.array!;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      const item = array[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        array[i] = item.updatedValue(newValue);\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n    }\n    const field = new Slot(key, newValue);\n    this.pushMutable(field);\n    RecordMap.put(this.table, field);\n  }\n\n  setAttr(key: AnyText, newValue: Value): this {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    key = Text.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      if (this.fieldCount > 0) {\n        this.setAttrAliased(key, newValue);\n      } else {\n        this.pushAliased(new Attr(key, newValue));\n      }\n    } else {\n      if (this.fieldCount > 0) {\n        if (this.table !== null) {\n          this.setAttrMutable(key, newValue);\n        } else {\n          this.updateAttrMutable(key, newValue);\n        }\n      } else {\n        this.pushMutable(new Attr(key, newValue));\n      }\n    }\n    return this;\n  }\n\n  private setAttrAliased(key: Text, newValue: Value): void {\n    const n = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(n + 1));\n    for (let i = 0; i < n; i += 1) {\n      const item = oldArray[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        newArray[i] = new Attr(key, newValue);\n        i += 1;\n        while (i < n) {\n          newArray[i] = oldArray[i];\n          i += 1;\n        }\n        Object.defineProperty(this, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"flags\", {\n          value: this.flags & ~Record.AliasedFlag,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n      newArray[i] = item;\n    }\n    newArray[n] = new Attr(key, newValue);\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: n + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: this.fieldCount + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private setAttrMutable(key: Text, newValue: Value): void {\n    const table = this.table!;\n    const n = table.length;\n    //assert(n > 0);\n    const x = Math.abs(key.hashCode() % n);\n    let i = x;\n    do {\n      const field = table[i];\n      if (field !== void 0) {\n        if (field.key.equals(key)) {\n          if (field instanceof Attr && field.isMutable()) {\n            field.setValue(newValue);\n          } else {\n            this.updateAttrMutable(key, newValue);\n          }\n          return;\n        }\n      } else {\n        break;\n      }\n      i = (i + 1) % n;\n    } while (i !== x);\n    const field = new Attr(key, newValue);\n    this.push(field);\n    RecordMap.put(table, field);\n  }\n\n  private updateAttrMutable(key: Text, newValue: Value): void {\n    const array = this.array!;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      const item = array[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        array[i] = new Attr(key, newValue);\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n    }\n    const field = new Attr(key, newValue);\n    this.push(field);\n    RecordMap.put(this.table, field);\n  }\n\n  setSlot(key: AnyValue, newValue: Value): this {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      if (this.fieldCount > 0) {\n        this.setSlotAliased(key, newValue);\n      } else {\n        this.pushAliased(new Slot(key, newValue));\n      }\n    } else {\n      if (this.fieldCount > 0) {\n        if (this.table !== null) {\n          this.setSlotMutable(key, newValue);\n        } else {\n          this.updateSlotMutable(key, newValue);\n        }\n      } else {\n        this.pushMutable(new Slot(key, newValue));\n      }\n    }\n    return this;\n  }\n\n  private setSlotAliased(key: Value, newValue: Value): void {\n    const n = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(n + 1));\n    for (let i = 0; i < n; i += 1) {\n      const item = oldArray[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        newArray[i] = new Slot(key, newValue);\n        i += 1;\n        while (i < n) {\n          newArray[i] = oldArray[i];\n          i += 1;\n        }\n        Object.defineProperty(this, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"flags\", {\n          value: this.flags & ~Record.AliasedFlag,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n      newArray[i] = item;\n    }\n    newArray[n] = new Slot(key, newValue);\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: n + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: this.fieldCount + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private setSlotMutable(key: Value, newValue: Value): void {\n    const table = this.table!;\n    const n = table.length;\n    //assert(n > 0);\n    const x = Math.abs(key.hashCode() % n);\n    let i = x;\n    do {\n      const field = table[i];\n      if (field !== void 0) {\n        if (field.key.equals(key)) {\n          if (field instanceof Slot && field.isMutable()) {\n            field.setValue(newValue);\n          } else {\n            this.updateSlotMutable(key, newValue);\n          }\n          return;\n        }\n      } else {\n        break;\n      }\n      i = (i + 1) % n;\n    } while (i !== x);\n    const field = new Slot(key, newValue);\n    this.push(field);\n    RecordMap.put(table, field);\n  }\n\n  private updateSlotMutable(key: Value, newValue: Value): void {\n    const array = this.array!;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      const item = array[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        array[i] = new Slot(key, newValue);\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        return;\n      }\n    }\n    const field = new Slot(key, newValue);\n    this.push(field);\n    RecordMap.put(this.table, field);\n  }\n\n  setItem(index: number, newItem: AnyItem): this {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    newItem = Item.fromAny(newItem);\n    const n = this.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    if (index < 0 || index > n) {\n      throw new RangeError(\"\" + index);\n    }\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      this.setItemAliased(index, newItem);\n    } else {\n      this.setItemMutable(index, newItem);\n    }\n    return this;\n  }\n\n  private setItemAliased(index: number, newItem: Item): void {\n    const n = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(n));\n    for (let i = 0; i < n; i += 1) {\n      newArray[i] = oldArray[i];\n    }\n    const oldItem = oldArray[index];\n    newArray[index] = newItem;\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    if (newItem instanceof Field) {\n      if (!(oldItem instanceof Field)) {\n        Object.defineProperty(this, \"fieldCount\", {\n          value: this.fieldCount + 1,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    } else if (oldItem instanceof Field) {\n      Object.defineProperty(this, \"fieldCount\", {\n        value: this.fieldCount - 1,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private setItemMutable(index: number, newItem: Item): void {\n    const array = this.array!;\n    const oldItem = array[index];\n    array[index] = newItem;\n    if (newItem instanceof Field) {\n      Object.defineProperty(this, \"table\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      if (!(oldItem instanceof Field)) {\n        Object.defineProperty(this, \"fieldCount\", {\n          value: this.fieldCount + 1,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    } else if (oldItem instanceof Field) {\n      Object.defineProperty(this, \"table\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"fieldCount\", {\n        value: this.fieldCount - 1,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  updated(key: AnyValue, newValue: AnyValue): Record {\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const record = (this.flags & Record.ImmutableFlag) === 0 ? this : this.branch();\n    if ((record.flags & Record.AliasedFlag) !== 0) {\n      if (record.fieldCount > 0) {\n        record.setAliased(key, newValue);\n      } else {\n        record.pushAliased(new Slot(key, newValue));\n      }\n    } else {\n      if (record.fieldCount > 0) {\n        if (record.table !== null) {\n          record.setMutable(key, newValue);\n        } else {\n          record.updateMutable(key, newValue);\n        }\n      } else {\n        record.pushMutable(new Slot(key, newValue));\n      }\n    }\n    return record;\n  }\n\n  updatedAttr(key: AnyText, newValue: AnyValue): Record {\n    key = Text.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const record = (this.flags & Record.ImmutableFlag) === 0 ? this : this.branch();\n    if ((record.flags & Record.AliasedFlag) !== 0) {\n      if (record.fieldCount > 0) {\n        record.setAttrAliased(key, newValue);\n      } else {\n        record.pushAliased(new Attr(key, newValue));\n      }\n    } else {\n      if (record.fieldCount > 0) {\n        if (record.table !== null) {\n          record.setAttrMutable(key, newValue);\n        } else {\n          record.updateAttrMutable(key, newValue);\n        }\n      } else {\n        record.pushMutable(new Attr(key, newValue));\n      }\n    }\n    return record;\n  }\n\n  updatedSlot(key: AnyValue, newValue: AnyValue): Record {\n    key = Value.fromAny(key);\n    newValue = Value.fromAny(newValue);\n    const record = (this.flags & Record.ImmutableFlag) === 0 ? this : this.branch();\n    if ((record.flags & Record.AliasedFlag) !== 0) {\n      if (record.fieldCount > 0) {\n        record.setSlotAliased(key, newValue);\n      } else {\n        record.pushAliased(new Slot(key, newValue));\n      }\n    } else {\n      if (record.fieldCount > 0) {\n        if (record.table !== null) {\n          record.setSlotMutable(key, newValue);\n        } else {\n          record.updateSlotMutable(key, newValue);\n        }\n      } else {\n        record.pushMutable(new Slot(key, newValue));\n      }\n    }\n    return record;\n  }\n\n  push(...newItems: AnyItem[]): number {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      this.pushAliased(...newItems);\n    } else {\n      this.pushMutable(...newItems);\n    }\n    return this.length;\n  }\n\n  private pushAliased(...newItems: AnyItem[]): void {\n    const k = newItems.length;\n    let m = this.length;\n    let n = this.fieldCount;\n    const oldArray = this.array;\n    const newArray = new Array(Record.expand(m + k));\n    if (oldArray !== null) {\n      for (let i = 0; i < m; i += 1) {\n        newArray[i] = oldArray[i];\n      }\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[m] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n      }\n    }\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private pushMutable(...newItems: AnyItem[]): void {\n    const k = newItems.length;\n    let m = this.length;\n    let n = this.fieldCount;\n    const oldArray = this.array;\n    let newArray;\n    if (oldArray === null || m + k > oldArray.length) {\n      newArray = new Array(Record.expand(m + k));\n      if (oldArray !== null) {\n        for (let i = 0; i < m; i += 1) {\n          newArray[i] = oldArray[i];\n        }\n      }\n    } else {\n      newArray = oldArray;\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[m] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    }\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  splice(start: number, deleteCount: number = 0, ...newItems: AnyItem[]): Item[] {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    const n = this.length;\n    if (start < 0) {\n      start = n + start;\n    }\n    start = Math.min(Math.max(0, start), n);\n    deleteCount = Math.min(Math.max(0, deleteCount), n - start);\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      return this.spliceAliased(start, deleteCount, ...newItems);\n    } else {\n      return this.spliceMutable(start, deleteCount, ...newItems);\n    }\n  }\n\n  /** @hidden */\n  spliceAliased(start: number, deleteCount: number, ...newItems: AnyItem[]): Item[] {\n    const k = newItems.length;\n    let m = this.length;\n    let n = this.fieldCount;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(m - deleteCount + k));\n    for (let i = 0; i < start; i += 1) {\n      newArray[i] = oldArray[i];\n    }\n    const oldItems: Item[] = [];\n    for (let i = start; i < start + deleteCount; i += 1) {\n      const oldItem = oldArray[i]!;\n      oldItems.push(oldItem);\n      m -= 1;\n      if (oldItem instanceof Field) {\n        n -= 1;\n      }\n    }\n    for (let i = start; i < m; i += 1) {\n      newArray[i + k] = oldArray[i + deleteCount];\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[i + start] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n      }\n    }\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return oldItems;\n  }\n\n  /** @hidden */\n  spliceMutable(start: number, deleteCount: number, ...newItems: AnyItem[]): Item[] {\n    const k = newItems.length;\n    let m = this.length;\n    let n = this.fieldCount;\n    const oldArray = this.array!;\n    let newArray;\n    if (oldArray === null || m - deleteCount + k > oldArray.length) {\n      newArray = new Array(Record.expand(m - deleteCount + k));\n      if (oldArray !== null) {\n        for (let i = 0; i < start; i += 1) {\n          newArray[i] = oldArray[i];\n        }\n      }\n    } else {\n      newArray = oldArray;\n    }\n    const oldItems: Item[] = [];\n    for (let i = start; i < start + deleteCount; i += 1) {\n      const oldItem = oldArray[i]!;\n      oldItems.push(oldItem);\n      m -= 1;\n      if (oldItem instanceof Field) {\n        n -= 1;\n      }\n    }\n    if (k > deleteCount) {\n      for (let i = m - 1; i >= start; i -= 1) {\n        newArray[i + k] = oldArray[i + deleteCount];\n      }\n    } else {\n      for (let i = start; i < m; i += 1) {\n        newArray[i + k] = oldArray[i + deleteCount];\n      }\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[i + start] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n      }\n    }\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    return oldItems;\n  }\n\n  delete(key: AnyValue): Item {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    key = Value.fromAny(key);\n    if ((this.flags & Record.AliasedFlag) !== 0) {\n      return this.deleteAliased(key);\n    } else {\n      return this.deleteMutable(key);\n    }\n  }\n\n  private deleteAliased(key: Value): Item {\n    const n = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(Record.expand(n));\n    for (let i = 0; i < n; i += 1) {\n      const item = oldArray[i];\n      if (item instanceof Field && item.key.equals(key)) {\n        for (let j = i + 1; j < n; j += 1, i += 1) {\n          newArray[i] = oldArray[j];\n        }\n        Object.defineProperty(this, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"length\", {\n          value: n - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"fieldCount\", {\n          value: this.fieldCount - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"flags\", {\n          value: this.flags & ~Record.AliasedFlag,\n          enumerable: true,\n          configurable: true,\n        });\n        return item;\n      }\n      newArray[i] = item;\n    }\n    return Item.absent();\n  }\n\n  private deleteMutable(key: Value): Item {\n    const n = this.length;\n    const array = this.array!;\n    for (let i = 0; i < n; i += 1) {\n      const item = array[i]!;\n      if (item instanceof Field && item.key.equals(key)) {\n        for (let j = i + 1; j < n; j += 1, i += 1) {\n          array[i] = array[j]!;\n        }\n        array[n - 1] = void 0 as any;\n        Object.defineProperty(this, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"length\", {\n          value: n - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"fieldCount\", {\n          value: this.fieldCount - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        return item;\n      }\n    }\n    return Item.absent();\n  }\n\n  clear(): void {\n    if ((this.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    Object.defineProperty(this, \"array\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"length\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldCount\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isAliased(): boolean {\n    return (this.flags & Record.AliasedFlag) !== 0;\n  }\n\n  isMutable(): boolean {\n    return (this.flags & Record.ImmutableFlag) === 0;\n  }\n\n  alias(): void {\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags | Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  branch(): RecordMap {\n    if ((this.flags & (Record.AliasedFlag | Record.ImmutableFlag)) === 0) {\n      const array = this.array!;\n      for (let i = 0, n = this.length; i < n; i += 1) {\n        array[i]!.alias();\n      }\n    }\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags | Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return new RecordMap(this.array, this.table, this.length, this.fieldCount, Record.AliasedFlag);\n  }\n\n  clone(): RecordMap {\n    const itemCount = this.length;\n    const oldArray = this.array!;\n    const newArray = new Array(itemCount);\n    for (let i = 0; i < itemCount; i += 1) {\n      newArray[i] = oldArray[i]!.clone();\n    }\n    return new RecordMap(newArray, null, itemCount, this.fieldCount, 0);\n  }\n\n  commit(): this {\n    if ((this.flags & Record.ImmutableFlag) === 0) {\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags | Record.ImmutableFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      const array = this.array!;\n      for (let i = 0, n = this.length; i < n; i += 1) {\n        array[i]!.commit();\n      }\n    }\n    return this;\n  }\n\n  hashTable(): Array<Field> | null {\n    const n = this.fieldCount;\n    let table = this.table;\n    if (n !== 0 && table === null) {\n      table = new Array(Record.expand(Math.max(n, n * 10 / 7)));\n      const array = this.array!;\n      for (let i = 0, m = this.length; i < m; i += 1) {\n        const item = array[i];\n        if (item instanceof Field) {\n          RecordMap.put(table, item);\n        }\n      }\n      Object.defineProperty(this, \"table\", {\n        value: table,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return table;\n  }\n\n  /** @hidden */\n  static put(table: Field[] | null, field: Field): void {\n    if (table !== null) {\n      const n = table.length;\n      const x = Math.abs(field.key.hashCode() % n);\n      let i = x;\n      do {\n        const item = table[i];\n        if (item !== void 0) {\n          if (field.key.equals(item.key)) {\n            table[i] = field;\n            return;\n          }\n        } else {\n          table[i] = field;\n          return;\n        }\n        i = (i + 1) % n;\n      } while (i !== x);\n      throw new Error();\n    }\n  }\n\n  evaluate(interpreter: AnyInterpreter): Record {\n    interpreter = Interpreter.fromAny(interpreter);\n    const array = this.array!;\n    const n = this.length;\n    const scope = Record.create(n);\n    interpreter.pushScope(scope);\n    let changed = false;\n    for (let i = 0; i < n; i += 1) {\n      const oldItem = array[i]!;\n      const newItem = oldItem.evaluate(interpreter);\n      if (newItem.isDefined()) {\n        scope.push(newItem);\n      }\n      if (oldItem !== newItem) {\n        changed = true;\n      }\n    }\n    interpreter.popScope();\n    return changed ? scope : this;\n  }\n\n  substitute(interpreter: AnyInterpreter): Record {\n    interpreter = Interpreter.fromAny(interpreter);\n    const array = this.array!;\n    const n = this.length;\n    const scope = Record.create(n);\n    interpreter.pushScope(scope);\n    let changed = false;\n    for (let i = 0; i < n; i += 1) {\n      const oldItem = array[i]!;\n      const newItem = oldItem.substitute(interpreter);\n      if (newItem.isDefined()) {\n        scope.push(newItem);\n      }\n      if (oldItem !== newItem) {\n        changed = true;\n      }\n    }\n    interpreter.popScope();\n    return changed ? scope : this;\n  }\n\n  subRecord(lower?: number, upper?: number): Record {\n    const n = this.length;\n    if (lower === void 0) {\n      lower = 0;\n    } else if (lower < 0) {\n      lower = n + lower;\n    }\n    if (upper === void 0) {\n      upper = n;\n    } else if (upper < 0) {\n      upper = n + upper;\n    }\n    if (lower < 0 || upper > n || lower > upper) {\n      throw new RangeError(lower + \", \" + upper);\n    }\n    return new RecordMapView(this, lower, upper);\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    const array = this.array!;\n    for (let i = 0, n = this.length; i < n; i += 1) {\n      const result = callback.call(thisArg, array[i]!, i);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  @Lazy\n  static empty(): RecordMap {\n    return new RecordMap(null, null, 0, 0, Record.AliasedFlag | Record.ImmutableFlag);\n  }\n\n  static create(initialCapacity?: number): RecordMap {\n    if (initialCapacity === void 0) {\n      return new RecordMap(null, null, 0, 0, Record.AliasedFlag);\n    } else {\n      return new RecordMap(new Array(initialCapacity), null, 0, 0, 0);\n    }\n  }\n\n  static of(...items: AnyItem[]): RecordMap {\n    const n = items.length;\n    if (n === 0) {\n      return new RecordMap(null, null, 0, 0, Record.AliasedFlag);\n    } else {\n      const array = new Array(n);\n      let itemCount = 0;\n      let fieldCount = 0;\n      for (let i = 0; i < n; i += 1) {\n        const item = Item.fromAny(items[i]);\n        array[i] = item;\n        itemCount += 1;\n        if (item instanceof Field) {\n          fieldCount += 1;\n        }\n      }\n      return new RecordMap(array, null, itemCount, fieldCount, 0);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item} from \"./Item\";\nimport {Field} from \"./Field\";\nimport {Attr} from \"./Attr\";\nimport {AnyValue, Value} from \"./Value\";\nimport {Record} from \"./Record\";\nimport {RecordMap} from \"./RecordMap\";\nimport {AnyNum, Num} from \"./\"; // forward import\n\n/** @hidden */\nexport class RecordMapView extends Record {\n  constructor(record: RecordMap, lower: number, upper: number) {\n    super();\n    Object.defineProperty(this, \"record\", {\n      value: record,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lower\", {\n      value: lower,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"upper\", {\n      value: upper,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly record: RecordMap;\n\n  /** @hidden */\n  declare readonly lower: number;\n\n  /** @hidden */\n  declare readonly upper: number;\n\n  isEmpty(): boolean {\n    return this.lower === this.upper;\n  }\n\n  isArray(): boolean {\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      if (array![i] instanceof Field) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  isObject(): boolean {\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      if (array![i] instanceof Value) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get length(): number {\n    return this.upper - this.lower;\n  }\n\n  get fieldCount(): number {\n    const array = this.record.array;\n    let k = 0;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      if (array![i] instanceof Field) {\n        k += 1;\n      }\n    }\n    return k;\n  }\n\n  get valueCount(): number {\n    let k = 0;\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      if (array![i] instanceof Value) {\n        k += 1;\n      }\n    }\n    return k;\n  }\n\n  isConstant(): boolean {\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      if (!array![i]!.isConstant()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get tag(): string | undefined {\n    if (this.length > 0) {\n      const item = this.record.array![this.lower];\n      if (item instanceof Attr) {\n        return item.key.value;\n      }\n    }\n    return void 0;\n  }\n\n  get target(): Value {\n    let value: Value | undefined;\n    let record: Record | undefined;\n    let modified = false;\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      const item = array![i];\n      if (item instanceof Attr) {\n        modified = true;\n      } else if (value === void 0 && item instanceof Value) {\n        value = item;\n      } else {\n        if (record === void 0) {\n          record = Record.create();\n          if (value !== void 0) {\n            record.push(value);\n          }\n        }\n        record.push(item);\n      }\n    }\n    if (value === void 0) {\n      return Value.extant();\n    } else if (record === void 0) {\n      return value;\n    } else if (modified) {\n      return record;\n    } else {\n      return this;\n    }\n  }\n\n  head(): Item {\n    if (this.length > 0) {\n      return this.record.array![this.lower]!;\n    } else {\n      return Item.absent();\n    }\n  }\n\n  tail(): Record {\n    if (this.length > 0) {\n      return new RecordMapView(this.record, this.lower + 1, this.upper);\n    } else {\n      return Record.empty();\n    }\n  }\n\n  body(): Value {\n    const n = this.length;\n    if (n > 2) {\n      return new RecordMapView(this.record, this.lower + 1, this.upper).branch();\n    } else if (n === 2) {\n      const item = this.record.array![this.lower + 1];\n      if (item instanceof Value) {\n        return item;\n      } else {\n        return Record.of(item);\n      }\n    } else {\n      return Value.absent();\n    }\n  }\n\n  indexOf(item: AnyItem, index: number = 0): number {\n    item = Item.fromAny(item);\n    const array = this.record.array;\n    const n = this.length;\n    if (index < 0) {\n      index = Math.max(0, n + index);\n    }\n    index = this.lower + index;\n    while (index < this.upper) {\n      if (item.equals(array![index])) {\n        return index - this.lower;\n      }\n      index += 1;\n    }\n    return -1;\n  }\n\n  lastIndexOf(item: AnyItem, index?: number): number {\n    item = Item.fromAny(item);\n    const array = this.record.array;\n    const n = this.length;\n    if (index === void 0) {\n      index = n - 1;\n    } else if (index < 0) {\n      index = n + index;\n    }\n    index = this.lower + Math.min(index, n - 1);\n    while (index >= this.lower) {\n      if (item.equals(array![index])) {\n        return index - this.lower;\n      }\n      index -= 1;\n    }\n    return -1;\n  }\n\n  getItem(index: AnyNum): Item {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const n = this.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    if (index >= 0 && index < n) {\n      return this.record.array![this.lower + index]!;\n    } else {\n      return Item.absent();\n    }\n  }\n\n  setItem(index: number, newItem: AnyItem): this {\n    if ((this.record.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    newItem = Item.fromAny(newItem);\n    const n = this.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    if (index < 0 || index > n) {\n      throw new RangeError(\"\" + index);\n    }\n    if ((this.record.flags & Record.AliasedFlag) !== 0) {\n      this.setItemAliased(index, newItem);\n    } else {\n      this.setItemMutable(index, newItem);\n    }\n    return this;\n  }\n\n  private setItemAliased(index: number, newItem: Item): void {\n    const record = this.record;\n    const n = record.length;\n    const oldArray = record.array;\n    const newArray = new Array(Record.expand(n));\n    for (let i = 0; i < n; i += 1) {\n      newArray[i] = oldArray![i];\n    }\n    const oldItem = oldArray !== null ? oldArray[this.lower + index] : null;\n    newArray[this.lower + index] = newItem;\n    Object.defineProperty(record, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    if (newItem instanceof Field) {\n      if (!(oldItem instanceof Field)) {\n        Object.defineProperty(record, \"fieldCount\", {\n          value: record.fieldCount + 1,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    } else if (oldItem instanceof Field) {\n      Object.defineProperty(record, \"fieldCount\", {\n        value: record.fieldCount - 1,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    Object.defineProperty(record, \"flags\", {\n      value: record.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private setItemMutable(index: number, newItem: Item): void {\n    const record = this.record;\n    const array = record.array!;\n    const oldItem = array[this.lower + index];\n    array[this.lower + index] = newItem;\n    if (newItem instanceof Field) {\n      Object.defineProperty(record, \"table\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      if (!(oldItem instanceof Field)) {\n        Object.defineProperty(record, \"fieldCount\", {\n          value: record.fieldCount + 1,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    } else if (oldItem instanceof Field) {\n      Object.defineProperty(record, \"table\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(record, \"fieldCount\", {\n        value: record.fieldCount - 1,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  push(...newItems: AnyItem[]): number {\n    if ((this.record.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    if ((this.record.flags & Record.AliasedFlag) !== 0) {\n      this.pushAliased(...newItems);\n    } else {\n      this.pushMutable(...newItems);\n    }\n    return this.length;\n  }\n\n  private pushAliased(...newItems: AnyItem[]): void {\n    const record = this.record;\n    const k = newItems.length;\n    let m = record.length;\n    let n = record.fieldCount;\n    const oldArray = record.array;\n    const newArray = new Array(Record.expand(m + k));\n    if (oldArray !== null) {\n      for (let i = 0; i < this.upper; i += 1) {\n        newArray[i] = oldArray[i];\n      }\n      for (let i = this.upper; i < m; i += 1) {\n        newArray[i + k] = oldArray[i];\n      }\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[i + this.upper] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n      }\n    }\n    Object.defineProperty(record, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"flags\", {\n      value: record.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"upper\", {\n      value: this.upper + k,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private pushMutable(...newItems: AnyItem[]): void {\n    const record = this.record;\n    const k = newItems.length;\n    let m = record.length;\n    let n = record.fieldCount;\n    const oldArray = record.array!;\n    let newArray;\n    if (oldArray === null || m + k > oldArray.length) {\n      newArray = new Array(Record.expand(m + k));\n      if (oldArray !== null) {\n        for (let i = 0; i < this.upper; i += 1) {\n          newArray[i] = oldArray[i];\n        }\n      }\n    } else {\n      newArray = oldArray;\n    }\n    for (let i = m - 1; i >= this.upper; i -= 1) {\n      newArray[i + k] = oldArray[i];\n    }\n    for (let i = 0; i < k; i += 1) {\n      const newItem = Item.fromAny(newItems[i]);\n      newArray[i + this.upper] = newItem;\n      m += 1;\n      if (newItem instanceof Field) {\n        n += 1;\n        Object.defineProperty(record, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    }\n    Object.defineProperty(record, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"length\", {\n      value: m,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"upper\", {\n      value: this.upper + k,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  splice(start: number, deleteCount: number = 0, ...newItems: AnyItem[]): Item[] {\n    if ((this.record.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    const n = this.length;\n    if (start < 0) {\n      start = n + start;\n    }\n    start = Math.min(Math.max(0, start), n);\n    deleteCount = Math.min(Math.max(0, deleteCount), n - start);\n    let deleted;\n    if ((this.record.flags & Record.AliasedFlag) !== 0) {\n      deleted = this.record.spliceAliased(this.lower + start, deleteCount, ...newItems);\n    } else {\n      deleted = this.record.spliceMutable(this.lower + start, deleteCount, ...newItems);\n    }\n    Object.defineProperty(this, \"upper\", {\n      value: this.upper + newItems.length - deleted.length,\n      enumerable: true,\n      configurable: true,\n    });\n    return deleted;\n  }\n\n  delete(key: AnyValue): Item {\n    if ((this.record.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    key = Value.fromAny(key);\n    if ((this.record.flags & Record.AliasedFlag) !== 0) {\n      return this.deleteAliased(key);\n    } else {\n      return this.deleteMutable(key);\n    }\n  }\n\n  /** @hidden */\n  deleteAliased(key: Value): Item {\n    const record = this.record;\n    const n = record.length;\n    const oldArray = record.array;\n    const newArray = new Array(Record.expand(n));\n    for (let i = this.lower; i < this.upper; i += 1) {\n      const item = oldArray![i];\n      if (item instanceof Field && item.key.equals(key)) {\n        for (let j = i + 1; j < n; j += 1, i += 1) {\n          newArray[i] = oldArray![j];\n        }\n        Object.defineProperty(record, \"array\", {\n          value: newArray,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"length\", {\n          value: n - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"fieldCount\", {\n          value: record.fieldCount - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"flags\", {\n          value: record.flags & ~Record.AliasedFlag,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"upper\", {\n          value: this.upper - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        return item;\n      }\n      newArray[i] = item;\n    }\n    return Item.absent();\n  }\n\n  /** @hidden */\n  deleteMutable(key: Value): Item {\n    const record = this.record;\n    const n = record.length;\n    const array = record.array;\n    for (let i = this.lower; i < this.upper; i += 1) {\n      const item = array![i]!;\n      if (item instanceof Field && item.key.equals(key)) {\n        for (let j = i + 1; j < n; j += 1, i += 1) {\n          array![i] = array![j]!;\n        }\n        array![n - 1] = void 0 as any;\n        Object.defineProperty(record, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"length\", {\n          value: n - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(record, \"fieldCount\", {\n          value: record.fieldCount - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        Object.defineProperty(this, \"upper\", {\n          value: this.upper - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        return item;\n      }\n    }\n    return Item.absent();\n  }\n\n  clear(): void {\n    if ((this.record.flags & Record.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    if ((this.record.flags & Record.AliasedFlag) !== 0) {\n      this.clearAliased();\n    } else {\n      this.clearMutable();\n    }\n  }\n\n  private clearAliased(): void {\n    const record = this.record;\n    const m = record.length;\n    let n = record.fieldCount;\n    const l = m - this.length;\n    const oldArray = record.array;\n    const newArray = new Array(Record.expand(l));\n    let i = 0;\n    while (i < this.lower) {\n      newArray[i] = oldArray![i];\n      i += 1;\n    }\n    while (i < this.upper) {\n      if (oldArray![i] instanceof Field) {\n        n -= 1;\n      }\n      i += 1;\n    }\n    i = this.lower;\n    let j = this.upper;\n    while (j < m) {\n      newArray[i] = oldArray![j];\n      i += 1;\n      j += 1;\n    }\n    Object.defineProperty(record, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"table\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"length\", {\n      value: l,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"flags\", {\n      value: record.flags & ~Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"upper\", {\n      value: this.lower,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  private clearMutable(): void {\n    const record = this.record;\n    const m = record.length;\n    let n = record.fieldCount;\n    const array = record.array;\n    let i = this.lower;\n    while (i < this.upper) {\n      if (array![i] instanceof Field) {\n        n -= 1;\n      }\n      i += 1;\n    }\n    i = this.lower;\n    let j = this.upper;\n    while (j < m) {\n      const item = array![j]!;\n      if (item instanceof Field) {\n        Object.defineProperty(record, \"table\", {\n          value: null,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n      array![i] = item;\n      i += 1;\n      j += 1;\n    }\n    Object.defineProperty(record, \"length\", {\n      value: i,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(record, \"fieldCount\", {\n      value: n,\n      enumerable: true,\n      configurable: true,\n    });\n    while (i < m) {\n      array![i] = void 0 as any;\n      i += 1;\n    }\n    Object.defineProperty(this, \"upper\", {\n      value: this.lower,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isAliased(): boolean {\n    return (this.record.flags & Record.AliasedFlag) !== 0;\n  }\n\n  isMutable(): boolean {\n    return (this.record.flags & Record.ImmutableFlag) === 0;\n  }\n\n  alias(): void {\n    Object.defineProperty(this.record, \"flags\", {\n      value: this.record.flags | Record.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  branch(): RecordMap {\n    const m = this.length;\n    let n = 0;\n    const oldArray = this.record.array;\n    const newArray = new Array(Record.expand(m));\n    let i = this.lower;\n    let j = 0;\n    while (j < m) {\n      const item = oldArray![i];\n      newArray[j] = item;\n      if (item instanceof Field) {\n        n += 1;\n      }\n      i += 1;\n      j += 1;\n    }\n    return new RecordMap(newArray, null, m, n, 0);\n  }\n\n  clone(): RecordMap {\n    const m = this.length;\n    let n = 0;\n    const oldArray = this.record.array;\n    const newArray = new Array(Record.expand(m));\n    let i = this.lower;\n    let j = 0;\n    while (j < m) {\n      const item = oldArray![i]!;\n      newArray[j] = item.clone();\n      if (item instanceof Field) {\n        n += 1;\n      }\n      i += 1;\n      j += 1;\n    }\n    return new RecordMap(newArray, null, m, n, 0);\n  }\n\n  commit(): this {\n    this.record.commit();\n    return this;\n  }\n\n  subRecord(lower?: number, upper?: number): Record {\n    const n = this.length;\n    if (lower === void 0) {\n      lower = 0;\n    } else if (lower < 0) {\n      lower = n + lower;\n    }\n    if (upper === void 0) {\n      upper = n;\n    } else if (upper < 0) {\n      upper = n + upper;\n    }\n    if (lower < 0 || upper > n || lower > upper) {\n      throw new RangeError(lower + \", \" + upper);\n    }\n    return new RecordMapView(this.record, this.lower + lower, this.upper + upper);\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    const array = this.record.array;\n    for (let i = this.lower, n = this.upper; i < n; i += 1) {\n      const result = callback.call(thisArg, array![i]!, i);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Random, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Input, OutputSettings, Output, Writer, Unicode, Base16, Base64} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item} from \"./Item\";\nimport {Value} from \"./Value\";\nimport {DataOutput} from \"./\"; // forward import\n\nexport type AnyData = Data | Uint8Array;\n\nexport class Data extends Value {\n  constructor(array: Uint8Array | null, size: number, flags: number) {\n    super();\n    Object.defineProperty(this, \"array\", {\n      value: array,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: size,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly array: Uint8Array | null;\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  declare readonly size: number;\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  getByte(index: number): number {\n    if (index < 0 || index >= this.size) {\n      throw new RangeError(\"\" + index);\n    }\n    return this.array![index]!;\n  }\n\n  setByte(index: number, value: number): Data {\n    const flags = this.flags;\n    if ((flags & Data.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    } else if (index < 0 || index >= this.size) {\n      throw new RangeError(\"\" + index);\n    }\n    if ((flags & Data.AliasedFlag) !== 0) {\n      return this.setByteAliased(index, value);\n    } else {\n      return this.setByteMutable(index, value);\n    }\n  }\n\n  private setByteAliased(index: number, value: number): Data {\n    const n = this.size;\n    const oldArray = this.array!;\n    const newArray = new Uint8Array(Data.expand(n));\n    newArray.set(oldArray, 0);\n    newArray[index] = value;\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Data.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  private setByteMutable(index: number, value: number): Data {\n    this.array![index] = value;\n    return this;\n  }\n\n  addByte(value: number): Data {\n    const flags = this.flags;\n    if ((flags & Data.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    if ((flags & Data.AliasedFlag) !== 0) {\n      return this.addByteAliased(value);\n    } else {\n      return this.addByteMutable(value);\n    }\n  }\n\n  private addByteAliased(value: number): Data {\n    const n = this.size;\n    const oldArray = this.array;\n    const newArray = new Uint8Array(Data.expand(n + 1));\n    if (oldArray !== null) {\n      newArray.set(oldArray, 0);\n    }\n    newArray[n] = value;\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: n + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Data.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  private addByteMutable(value: number): Data {\n    const n = this.size;\n    const oldArray = this.array;\n    let newArray;\n    if (oldArray === null || n + 1 > oldArray.length) {\n      newArray = new Uint8Array(Data.expand(n + 1));\n      if (oldArray !== null) {\n        newArray.set(oldArray, 0);\n      }\n      Object.defineProperty(this, \"array\", {\n        value: newArray,\n        enumerable: true,\n        configurable: true,\n      });\n    } else {\n      newArray = oldArray;\n    }\n    newArray[n] = value;\n    Object.defineProperty(this, \"size\", {\n      value: n + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  addData(data: Data): Data {\n    let array = data.array;\n    if (array !== null) {\n      const size = data.size;\n      if (array.length > size) {\n        array = array.slice(0, size);\n      }\n      return this.addUint8Array(array);\n    } else {\n      return this;\n    }\n  }\n\n  addUint8Array(array: Uint8Array): Data {\n    const flags = this.flags;\n    if ((flags & Data.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    if ((flags & Data.AliasedFlag) !== 0) {\n      return this.addUint8ArrayAliased(array);\n    } else {\n      return this.addUint8ArrayMutable(array);\n    }\n  }\n\n  private addUint8ArrayAliased(array: Uint8Array): Data {\n    const size = array.length;\n    if (size === 0) {\n      return this;\n    }\n    const n = this.size;\n    const oldArray = this.array;\n    const newArray = new Uint8Array(Data.expand(n + size));\n    if (oldArray !== null) {\n      newArray.set(oldArray, 0);\n    }\n    newArray.set(array, n);\n    Object.defineProperty(this, \"array\", {\n      value: newArray,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: n + size,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags & ~Data.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  private addUint8ArrayMutable(array: Uint8Array): Data {\n    const size = array.length;\n    if (size === 0) {\n      return this;\n    }\n    const n = this.size;\n    const oldArray = this.array;\n    let newArray;\n    if (oldArray === null || n + size > oldArray.length) {\n      newArray = new Uint8Array(Data.expand(n + size));\n      if (oldArray !== null) {\n        newArray.set(oldArray, 0);\n      }\n      Object.defineProperty(this, \"array\", {\n        value: newArray,\n        enumerable: true,\n        configurable: true,\n      });\n    } else {\n      newArray = oldArray;\n    }\n    newArray.set(array, n);\n    Object.defineProperty(this, \"size\", {\n      value: n + size,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  clear(): void {\n    if ((this.flags & Data.ImmutableFlag) !== 0) {\n      throw new Error(\"immutable\");\n    }\n    Object.defineProperty(this, \"array\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"size\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: Data.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  toUint8Array(): Uint8Array {\n    const oldArray = this.array;\n    const flags = this.flags;\n    if ((flags & Data.ImmutableFlag) !== 0) {\n      return oldArray !== null ? oldArray.slice(0) : new Uint8Array(0);\n    } else if ((flags & Data.AliasedFlag) !== 0 || this.size !== oldArray!.length) {\n      const newArray = oldArray !== null ? oldArray.slice(0) : new Uint8Array(0);\n      Object.defineProperty(this, \"array\", {\n        value: newArray,\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"flags\", {\n        value: this.flags & ~Data.AliasedFlag,\n        enumerable: true,\n        configurable: true,\n      });\n      return newArray;\n    } else {\n      return oldArray!;\n    }\n  }\n\n  asUint8Array(): Uint8Array | undefined {\n    let array: Uint8Array | undefined;\n    if (this.array !== null && this.size > 0) {\n      array = this.array;\n      if (array.length !== this.size) {\n        array = new Uint8Array(array.buffer, array.byteOffset, this.size);\n      }\n    } else {\n      array = void 0;\n    }\n    return array;\n  }\n\n  toAny(): AnyData {\n    return this.toUint8Array();\n  }\n\n  isAliased(): boolean {\n    return (this.flags & Data.AliasedFlag) !== 0;\n  }\n\n  isMutable(): boolean {\n    return (this.flags & Data.ImmutableFlag) === 0;\n  }\n\n  branch(): Data {\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags | Data.AliasedFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return new Data(this.array, this.size, Data.AliasedFlag);\n  }\n\n  clone(): Data {\n    return this.branch();\n  }\n\n  commit(): this {\n    Object.defineProperty(this, \"flags\", {\n      value: this.flags | Data.ImmutableFlag,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  writeBase16(output: Output, base16: Base16 = Base16.uppercase): Writer<unknown, unknown> {\n    let array = this.array;\n    const size = this.size;\n    if (array !== null && size !== 0) {\n      if (array.length !== size) {\n        array = array.slice(0, size);\n      }\n      return base16.writeUint8Array(array, output);\n    } else {\n      return Writer.end();\n    }\n  }\n\n  toBase16(base16: Base16 = Base16.uppercase): string {\n    const output = Unicode.stringOutput();\n    this.writeBase16(output, base16);\n    return output.bind();\n  }\n\n  writeBase64(output: Output, base64: Base64 = Base64.standard()): Writer<unknown, unknown> {\n    let array = this.array;\n    const size = this.size;\n    if (array !== null && size !== 0) {\n      if (array.length !== size) {\n        array = array.slice(0, size);\n      }\n      return base64.writeUint8Array(array, output);\n    } else {\n      return Writer.end();\n    }\n  }\n\n  toBase64(base64: Base64 = Base64.standard()): string {\n    const output = Unicode.stringOutput();\n    this.writeBase64(output, base64);\n    return output.bind();\n  }\n\n  interpolateTo(that: Data): Interpolator<Data>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    return super.interpolateTo(that);\n  }\n\n  get typeOrder(): number {\n    return 4;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Data) {\n      const xs = this.array!;\n      const ys = that.array!;\n      const xn = this.size;\n      const yn = that.size;\n      let order = 0;\n      let i = 0;\n      do {\n        if (i < xn && i < yn) {\n          order = xs[i]! - ys[i]!;\n          i += 1;\n        } else {\n          break;\n        }\n      } while (order === 0);\n      if (order > 0) {\n        return 1;\n      } else if (order < 0) {\n        return -1;\n      } else if (xn > yn) {\n        return 1;\n      } else if (xn < yn) {\n        return -1;\n      } else {\n        return 0;\n      }\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: Item): boolean {\n    return this.equals(that);\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Data) {\n      const xs = this.array!;\n      const ys = that.array!;\n      const xn = this.size;\n      if (xn !== that.size) {\n        return false;\n      }\n      for (let i = 0; i < xn; i += 1) {\n        if (xs[i] !== ys[i]) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mixUint8Array(Constructors.hash(Data),\n        this.array !== null ? this.array : new Uint8Array(0)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Data\").write(46/*'.'*/);\n    if (this.size === 0) {\n      output = output.write(\"empty\").write(40/*'('*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"base16\").write(40/*'('*/).write(34/*'\"'*/);\n      this.writeBase16(output);\n      output = output.write(34/*'\"'*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    this.debug(output);\n  }\n\n  /** @hidden */\n  static readonly AliasedFlag: number = 1 << 0;\n  /** @hidden */\n  static readonly ImmutableFlag: number = 1 << 1;\n\n  @Lazy\n  static empty(): Data {\n    return new Data(null, 0, Data.AliasedFlag | Data.ImmutableFlag);\n  }\n\n  static create(initialCapacity?: number): Data {\n    if (initialCapacity === void 0) {\n      return new Data(null, 0, Data.AliasedFlag);\n    } else {\n      return new Data(new Uint8Array(initialCapacity), 0, 0);\n    }\n  }\n\n  static wrap(value: Uint8Array): Data {\n    return new Data(value, value.length, Data.AliasedFlag);\n  }\n\n  static fromBase16(input: Input | string): Data {\n    if (typeof input === \"string\") {\n      input = Unicode.stringInput(input);\n    }\n    return Base16.parse(input, Data.output()).bind();\n  }\n\n  static fromBase64(input: Input | string, base64: Base64 = Base64.standard()): Data {\n    if (typeof input === \"string\") {\n      input = Unicode.stringInput(input);\n    }\n    return base64.parse(input, Data.output()).bind();\n  }\n\n  static fromAny(value: AnyData): Data {\n    if (value instanceof Data) {\n      return value;\n    } else if (value instanceof Uint8Array) {\n      return Data.wrap(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static random(size: number): Data {\n    const array = new Uint8Array(size);\n    Random.fillBytes(array);\n    return Data.wrap(array);\n  }\n\n  static output(): Output<Data>;\n  static output(initialCapacity: number): Output<Data>;\n  static output(data: Data): Output<Data>;\n  static output(data?: number | Data): Output<Data> {\n    if (!(data instanceof Data)) {\n      data = Data.create(data);\n    }\n    return new DataOutput(data, OutputSettings.standard());\n  }\n\n  /** @hidden */\n  static expand(n: number): number {\n    n = Math.max(32, n) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8; n |= n >> 16;\n    return n + 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyOutputSettings, OutputSettings, Output} from \"@swim/codec\";\nimport type {Data} from \"./Data\";\n\n/** @hidden */\nexport class DataOutput extends Output<Data> {\n  /** @hidden */\n  declare readonly data: Data;\n\n  constructor(data: Data, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"data\", {\n      value: data,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return true;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<Data> {\n    return this;\n  }\n\n  write(b: number | string): Output<Data> {\n    if (typeof b === \"number\") {\n      this.data.addByte(b);\n      return this;\n    } else {\n      throw new TypeError(\"\" + b);\n    }\n  }\n\n  writeln(string?: string): Output<Data> {\n    throw new TypeError(\"\" + string);\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<Data> {\n    settings = OutputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  bind(): Data {\n    return this.data;\n  }\n\n  clone(): Output<Data> {\n    return new DataOutput(this.data.branch(), this.settings);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Numbers, Strings, HashGenCacheSet} from \"@swim/util\";\nimport {OutputSettings, Output, Format} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyValue, Value} from \"./Value\";\nimport {Num} from \"./\"; // forward import\nimport {TextOutput} from \"./\"; // forward import\n\nexport type AnyText = Text | string;\n\nexport class Text extends Value {\n  private constructor(value: string) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hashValue\", {\n      value: void 0,\n      configurable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  declare readonly value: string;\n\n  get size(): number {\n    return this.value.length;\n  }\n\n  stringValue(): string;\n  stringValue<T>(orElse: T): string;\n  stringValue<T>(orElse?: T): string {\n    return this.value;\n  }\n\n  numberValue(): number | undefined;\n  numberValue<T>(orElse: T): number | T;\n  numberValue<T>(orElse?: T): number | T | undefined {\n    try {\n      return Num.parse(this.value).numberValue();\n    } catch (error) {\n      return orElse;\n    }\n  }\n\n  booleanValue(): boolean | undefined;\n  booleanValue<T>(orElse: T): boolean | T;\n  booleanValue<T>(orElse?: T): boolean | T | undefined {\n    if (this.value === \"true\") {\n      return true;\n    } else if (this.value === \"false\") {\n      return false;\n    } else {\n      return orElse;\n    }\n  }\n\n  toAny(): AnyText {\n    return this.value;\n  }\n\n  valueOf(): string {\n    return this.value;\n  }\n\n  plus(that: AnyValue): Value;\n  plus(that: AnyItem): Item;\n  plus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Text) {\n      return Text.from(this.value + that.value);\n    }\n    return super.plus(that);\n  }\n\n  branch(): Text {\n    return this;\n  }\n\n  clone(): Text {\n    return this;\n  }\n\n  commit(): this {\n    return this;\n  }\n\n  interpolateTo(that: Text): Interpolator<Text>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    return super.interpolateTo(that);\n  }\n\n  get typeOrder(): number {\n    return 5;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Text) {\n      return this.value.localeCompare(that.value);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this.equals(that);\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Text) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  /** @hidden */\n  declare readonly hashValue: number | undefined;\n\n  hashCode(): number {\n    let hashValue = this.hashValue;\n    if (hashValue === void 0) {\n      hashValue = Strings.hash(this.value);\n      Object.defineProperty(this, \"hashValue\", {\n        value: hashValue,\n      });\n    }\n    return hashValue;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Text\").write(46/*'.'*/);\n    if (this.value.length === 0) {\n      output = output.write(\"empty\").write(40/*'('*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"from\").write(40/*'('*/).debug(this.value).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    Format.debug(this.value, output);\n  }\n\n  toString(): string {\n    return this.value;\n  }\n\n  @Lazy\n  static empty(): Text {\n    return new Text(\"\");\n  }\n\n  static from(value: string): Text {\n    const n = value.length;\n    if (n === 0) {\n      return Text.empty();\n    } else {\n      let text = new Text(value);\n      if (n <= 64) {\n        text = Text.cache.put(text);\n      }\n      return text;\n    }\n  }\n\n  static fromAny(value: AnyText): Text {\n    if (value instanceof Text) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return Text.from(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static output(settings?: OutputSettings): Output<Text> {\n    if (settings === void 0) {\n      settings = OutputSettings.standard();\n    }\n    return new TextOutput(\"\", settings);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheSet<Text> {\n    const cacheSize = 128;\n    return new HashGenCacheSet<Text>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyOutputSettings, OutputSettings, Output} from \"@swim/codec\";\nimport {Text} from \"./Text\";\n\n/** @hidden */\nexport class TextOutput extends Output<Text> {\n  /** @hidden */\n  declare readonly string: string;\n\n  constructor(string: string, settings: OutputSettings) {\n    super();\n    Object.defineProperty(this, \"string\", {\n      value: string,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isCont(): boolean {\n    return true;\n  }\n\n  isFull(): boolean {\n    return false;\n  }\n\n  isDone(): boolean {\n    return false;\n  }\n\n  isError(): boolean {\n    return false;\n  }\n\n  isPart(): boolean {\n    return false;\n  }\n\n  asPart(part: boolean): Output<Text> {\n    return this;\n  }\n\n  write(token: number | string): Output<Text> {\n    if (typeof token === \"number\") {\n      if ((token >= 0x0000 && token <= 0xd7ff)\n          || (token >= 0xe000 && token <= 0xffff)) { // U+0000..U+D7FF | U+E000..U+FFFF\n        token = String.fromCharCode(token);\n      } else if (token >= 0x10000 && token <= 0x10ffff) { // U+10000..U+10FFFF\n        const u = token - 0x10000;\n        token = String.fromCharCode(0xd800 | (u >>> 10), 0xdc00 | (u & 0x3ff));\n      } else { // invalid code point\n        token = \"\\ufffd\";\n      }\n    }\n    Object.defineProperty(this, \"string\", {\n      value: this.string + token,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  declare readonly settings: OutputSettings;\n\n  withSettings(settings: AnyOutputSettings): Output<Text> {\n    settings = OutputSettings.fromAny(settings);\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  bind(): Text {\n    return Text.from(this.string);\n  }\n\n  clone(): Output<Text> {\n    return new TextOutput(this.string, this.settings);\n  }\n\n  toString(): string {\n    return this.string;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, Lazy, Numbers, HashGenCacheSet} from \"@swim/util\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Output, Format} from \"@swim/codec\";\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyValue, Value} from \"./Value\";\nimport {NumInterpolator} from \"./\"; // forward import\n\nexport type AnyNum = Num | number;\n\nexport class Num extends Value {\n  private constructor(value: number, flags?: number ) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags !== void 0 ? flags : 0,\n      enumerable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  declare readonly value: number;\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  isNaN(): boolean {\n    return isNaN(this.value);\n  }\n\n  isInfinite(): boolean {\n    return !isNaN(this.value) && !isFinite(this.value);\n  }\n\n  isUint32(): boolean {\n    return (this.flags & Num.Uint32Flag) !== 0;\n  }\n\n  isUint64(): boolean {\n    return (this.flags & Num.Uint64Flag) !== 0;\n  }\n\n  stringValue(): string;\n  stringValue<T>(orElse: T): string;\n  stringValue<T>(orElse?: T): string {\n    return \"\" + this.value;\n  }\n\n  numberValue(): number;\n  numberValue<T>(orElse: T): number;\n  numberValue<T>(orElse?: T): number {\n    return this.value;\n  }\n\n  booleanValue(): boolean;\n  booleanValue<T>(orElse: T): boolean;\n  booleanValue<T>(orElse?: T): boolean {\n    return !!this.value;\n  }\n\n  toAny(): AnyNum {\n    return this.value;\n  }\n\n  valueOf(): number {\n    return this.value;\n  }\n\n  bitwiseOr(that: AnyValue): Value;\n  bitwiseOr(that: AnyItem): Item;\n  bitwiseOr(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from((this.value | that.value) >>> 0);\n    }\n    return super.bitwiseOr(that);\n  }\n\n  bitwiseXor(that: AnyValue): Value;\n  bitwiseXor(that: AnyItem): Item;\n  bitwiseXor(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from((this.value ^ that.value) >>> 0);\n    }\n    return super.bitwiseXor(that);\n  }\n\n  bitwiseAnd(that: AnyValue): Value;\n  bitwiseAnd(that: AnyItem): Item;\n  bitwiseAnd(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from((this.value & that.value) >>> 0);\n    }\n    return super.bitwiseAnd(that);\n  }\n\n  plus(that: AnyValue): Value;\n  plus(that: AnyItem): Item;\n  plus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from(this.value + that.value);\n    }\n    return super.plus(that);\n  }\n\n  minus(that: AnyValue): Value;\n  minus(that: AnyItem): Item;\n  minus(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from(this.value - that.value);\n    }\n    return super.minus(that);\n  }\n\n  times(that: AnyValue): Value;\n  times(that: AnyItem): Item;\n  times(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from(this.value * that.value);\n    }\n    return super.times(that);\n  }\n\n  divide(that: AnyValue): Value;\n  divide(that: AnyItem): Item;\n  divide(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from(this.value / that.value);\n    }\n    return super.divide(that);\n  }\n\n  modulo(that: AnyValue): Value;\n  modulo(that: AnyItem): Item;\n  modulo(that: AnyItem): Item {\n    that = Item.fromAny(that);\n    if (that instanceof Num) {\n      return Num.from(this.value % that.value);\n    }\n    return super.modulo(that);\n  }\n\n  bitwiseNot(): Value {\n    return Num.from(~this.value >>> 0);\n  }\n\n  negative(): Value {\n    return Num.from(-this.value);\n  }\n\n  positive(): Value {\n    return this;\n  }\n\n  inverse(): Value {\n    return Num.from(1 / this.value);\n  }\n\n  abs(): Num {\n    return Num.from(Math.abs(this.value));\n  }\n\n  ceil(): Num {\n    return Num.from(Math.ceil(this.value));\n  }\n\n  floor(): Num {\n    return Num.from(Math.floor(this.value));\n  }\n\n  round(): Num {\n    return Num.from(Math.round(this.value));\n  }\n\n  sqrt(): Num {\n    return Num.from(Math.sqrt(this.value));\n  }\n\n  pow(that: AnyNum): Num {\n    that = Num.fromAny(that);\n    return Num.from(Math.pow(this.value, that.value));\n  }\n\n  max(that: Num): Num;\n  max(that: Item): Item;\n  max(that: Item): Item {\n    return this.compareTo(that) >= 0 ? this : that;\n  }\n\n  min(that: Num): Num;\n  min(that: Item): Item;\n  min(that: Item): Item {\n    return this.compareTo(that) <= 0 ? this : that;\n  }\n\n  interpolateTo(that: Num): Interpolator<Num>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof Num) {\n      return NumInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 6;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Num) {\n      const x = this.value;\n      const y = that.value;\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Num) {\n      const x = this.value;\n      const y = that.value;\n      return x === y || isNaN(x) && isNaN(y) || Math.abs(y - x) < (epsilon !== void 0 ? epsilon : Equivalent.Epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Num) {\n      const x = this.value;\n      const y = that.value;\n      return x === y || isNaN(x) && isNaN(y);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Numbers.hash(this.value);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Num\").write(46/*'.'*/).write(\"from\")\n        .write(40/*'('*/).display(this).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    Format.displayNumber(this.value, output);\n  }\n\n  /** @hidden */\n  static readonly Uint32Flag: number = 1;\n  /** @hidden */\n  static readonly Uint64Flag: number = 2;\n  /** @hidden */\n  static readonly TypeMask = 0x3;\n\n  @Lazy\n  static get zero(): Num {\n    return new Num(0);\n  }\n\n  @Lazy\n  static get negativeZero(): Num {\n    return new Num(-0);\n  }\n\n  @Lazy\n  static get one(): Num {\n    return new Num(1);\n  }\n\n  @Lazy\n  static get negativeOne(): Num {\n    return new Num(-1);\n  }\n\n  @Lazy\n  static get nan(): Num {\n    return new Num(NaN);\n  }\n\n  static uint32(value: number): Num {\n    return new Num(value, Num.Uint32Flag);\n  }\n\n  static uint64(value: number): Num {\n    return new Num(value, Num.Uint64Flag);\n  }\n\n  static from(value: number): Num {\n    if (value === 0) {\n      if (1 / value === -Infinity) {\n        return Num.negativeZero;\n      } else {\n        return Num.zero;\n      }\n    } else if (value === 1) {\n      return Num.one;\n    } else if (value === -1) {\n      return Num.negativeOne;\n    } else if (isNaN(value)) {\n      return Num.nan;\n    } else {\n      return Num.cache.put(new Num(value));\n    }\n  }\n\n  static fromAny(value: AnyNum): Num {\n    if (value instanceof Num) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return Num.from(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(value: string): Num {\n    if (value === \"NaN\") {\n      return Num.nan;\n    } else {\n      const num = +value;\n      if (isFinite(num)) {\n        return Num.from(num);\n      }\n    }\n    throw new Error(value);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheSet<Num> {\n    const cacheSize = 128;\n    return new HashGenCacheSet<Num>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Num} from \"./Num\";\n\n/** @hidden */\nexport const NumInterpolator = function (y0: Num, y1: Num): Interpolator<Num> {\n  const interpolator = function (u: number): Num {\n    const y0 = interpolator[0].value;\n    const y1 = interpolator[1].value;\n    return Num.from(y0 + u * (y1 - y0));\n  } as Interpolator<Num>;\n  Object.setPrototypeOf(interpolator, NumInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: Num, y1: Num): Interpolator<Num>;\n\n  /** @hidden */\n  prototype: Interpolator<Num>;\n};\n\nNumInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Numbers, Strings} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyValue, Value} from \"./Value\";\n\nexport type AnyBool = Bool | boolean;\n\nexport class Bool extends Value {\n  private constructor(value: boolean) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hashValue\", {\n      value: Strings.hash(value ? \"true\" : \"false\"),\n    });\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  declare readonly value: boolean;\n\n  stringValue(): string;\n  stringValue<T>(orElse: T): string;\n  stringValue<T>(orElse?: T): string {\n    return this.value ? \"true\" : \"false\";\n  }\n\n  booleanValue(): boolean;\n  booleanValue<T>(orElse: T): boolean;\n  booleanValue<T>(orElse?: T): boolean {\n    return this.value;\n  }\n\n  toAny(): AnyBool {\n    return this.value;\n  }\n\n  valueOf(): boolean {\n    return this.value;\n  }\n\n  conditional(thenTerm: AnyValue, elseTerm: AnyValue): Value;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item {\n    return this.value ? Item.fromAny(thenTerm) : Item.fromAny(elseTerm);\n  }\n\n  or(that: AnyValue): Value;\n  or(that: AnyItem): Item;\n  or(that: AnyItem): Item {\n    return this.value ? this : Item.fromAny(that);\n  }\n\n  and(that: AnyValue): Value;\n  and(that: AnyItem): Item;\n  and(that: AnyItem): Item {\n    return this.value ? Item.fromAny(that) : this;\n  }\n\n  not(): Value {\n    return Bool.from(!this.value);\n  }\n\n  get typeOrder(): number {\n    return 7;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Bool) {\n      if (this.value && !that.value) {\n        return -1;\n      } else if (!this.value && that.value) {\n        return 1;\n      } else {\n        return 0;\n      }\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this.equals(that);\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Bool) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  /** @hidden */\n  declare readonly hashValue: number;\n\n  hashCode(): number {\n    return this.hashValue;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Bool\").write(46/*'.'*/).write(\"from\")\n        .write(40/*'('*/).write(this.value ? \"true\" : \"false\").write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    output = output.write(this.value ? \"true\" : \"false\");\n  }\n\n  @Lazy\n  static get true(): Bool {\n    return new Bool(true);\n  }\n\n  @Lazy\n  static get false(): Bool {\n    return new Bool(false);\n  }\n\n  static from(value: boolean): Bool {\n    return value ? Bool.true : Bool.false;\n  }\n\n  static fromAny(value: AnyBool): Bool {\n    if (value instanceof Bool) {\n      return value;\n    } else if (typeof value === \"boolean\") {\n      return Bool.from(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item} from \"./Item\";\nimport {Value} from \"./Value\";\nimport {Record} from \"./Record\";\n\nexport type AnyExtant = Extant | null;\n\nexport class Extant extends Value {\n  /** @hidden */\n  private constructor() {\n    super();\n  }\n\n  /**\n   * Always returns `true` because `Extant` is a defined value.\n   */\n  isDefined(): boolean {\n    return true;\n  }\n\n  /**\n   * Always returns `false` because `Extant` is not a distinct\n   * value.\n   */\n  isDistinct(): boolean {\n    return false;\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  /**\n   * Always returns an empty `Record` because `Extant` is not a distinct value.\n   */\n  unflattened(): Record {\n    return Record.empty();\n  }\n\n  not(): Value {\n    return Value.absent();\n  }\n\n  /**\n   * Always returns the empty `string` because `Extant` behaves like an empty\n   * `Record`, which converts to a `string` by concatenating the string values\n   * of all its members, if all its members convert to string values.\n   */\n  stringValue(): string;\n  /**\n   * Always returns the empty `string` because `Extant` behaves like an empty\n   * `Record`, which converts to a `string` by concatenating the string values\n   * of all its members, if all its members convert to string values.\n   */\n  stringValue<T>(orElse: T): string;\n  stringValue<T>(orElse?: T): string {\n    return \"\";\n  }\n\n  /**\n   * Always returns `true` because `Extant` behaves like a truthy value.\n   */\n  booleanValue(): boolean;\n  /**\n   * Always returns `true` because `Extant` behaves like a truthy value.\n   */\n  booleanValue<T>(orElse: T): boolean;\n  booleanValue<T>(orElse?: T): boolean {\n    return true;\n  }\n\n  toAny(): AnyExtant {\n    return null;\n  }\n\n  interpolateTo(that: Extant): Interpolator<Extant>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    return super.interpolateTo(that);\n  }\n\n  get typeOrder(): number {\n    return 98;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this === that;\n  }\n\n  equals(that: unknown): boolean {\n    return this === that;\n  }\n\n  hashCode(): number {\n    return Constructors.hash(Extant);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Value\").write(46/*'.'*/).write(\"extant\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    output = output.write(\"null\");\n  }\n\n  @Lazy\n  static extant(): Extant {\n    return new Extant();\n  }\n\n  static fromAny(value: AnyExtant): Extant {\n    if (value instanceof Extant) {\n      return value;\n    } else if (value === null) {\n      return Extant.extant();\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Numbers, Constructors, Cursor} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {AnyItem, Item} from \"./Item\";\nimport {Attr} from \"./Attr\";\nimport {Slot} from \"./Slot\";\nimport {AnyValue, Value} from \"./Value\";\nimport {Record} from \"./Record\";\nimport type {AnyText} from \"./Text\";\n\nexport type AnyAbsent = Absent | undefined;\n\nexport class Absent extends Value {\n  /** @hidden */\n  private constructor() {\n    super();\n  }\n\n  /**\n   * Always returns `false` because `Absent` represents an undefined value.\n   */\n  isDefined(): boolean {\n    return false;\n  }\n\n  /**\n   * Always returns `false` because `Absent` is not a distinct value.\n   */\n  isDistinct(): boolean {\n    return false;\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  /**\n   * Always returns an empty `Record` because `Absent` is not a distinct value.\n   */\n  unflattened(): Record {\n    return Record.empty();\n  }\n\n  updated(key: AnyValue, value: AnyValue): Record {\n    return Record.of(Slot.of(key, value));\n  }\n\n  updatedAttr(key: AnyText, value: AnyValue): Record {\n    return Record.of(Attr.of(key, value));\n  }\n\n  updatedSlot(key: AnyValue, value: AnyValue): Record {\n    return Record.of(Slot.of(key, value));\n  }\n\n  appended(...items: AnyItem[]): Record {\n    return Record.of(items);\n  }\n\n  prepended(...items: AnyItem[]): Record {\n    return Record.of(items);\n  }\n\n  concat(...items: AnyItem[]): Record {\n    const record = Record.create();\n    for (let i = 0, n = items.length; i < n; i += 1) {\n      Item.fromAny(items[i]).forEach(function (item: Item): void {\n        record.push(item);\n      });\n    }\n    return record;\n  }\n\n  cond(thenTerm: AnyValue, elseTerm: AnyValue): Value;\n  cond(thenTerm: AnyItem, elseTerm: AnyItem): Item;\n  cond(thenTerm: AnyItem, elseTerm: AnyItem): Item {\n    return Item.fromAny(elseTerm);\n  }\n\n  or(that: AnyValue): Value;\n  or(that: AnyItem): Item;\n  or(that: AnyItem): Item {\n    return Item.fromAny(that);\n  }\n\n  and(that: AnyValue): Value;\n  and(that: AnyItem): Item;\n  and(that: AnyItem): Item {\n    return this;\n  }\n\n  not(): Value {\n    return Value.extant();\n  }\n\n  /**\n   * Always returns `false` because `Absent` behaves like a falsey value.\n   */\n  booleanValue(): boolean;\n  /**\n   * Always returns `false` because `Absent` behaves like a falsey value.\n   */\n  booleanValue<T>(orElse: T): boolean;\n  booleanValue<T>(orElse?: T): boolean {\n    return false;\n  }\n\n  toAny(): AnyAbsent {\n    return void 0;\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    return void 0;\n  }\n\n  iterator(): Cursor<Item> {\n    return Cursor.empty();\n  }\n\n  interpolateTo(that: Absent): Interpolator<Absent>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    return super.interpolateTo(that);\n  }\n\n  get typeOrder(): number {\n    return 99;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this === that;\n  }\n\n  equals(that: unknown): boolean {\n    return this === that;\n  }\n\n  hashCode(): number {\n    return Constructors.hash(Absent);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Value\").write(46/*'.'*/).write(\"absent\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    output = output.write(\"undefined\");\n  }\n\n  @Lazy\n  static absent(): Absent {\n    return new Absent();\n  }\n\n  static fromAny(value: AnyAbsent): Absent {\n    if (value instanceof Absent) {\n      return value;\n    } else if (value === void 0) {\n      return Absent.absent();\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item} from \"./Item\";\nimport {AnyValue, Value} from \"./Value\";\nimport {Num} from \"./Num\";\nimport type {Operator} from \"./operator/Operator\";\nimport {ConditionalOperator} from \"./\"; // forward import\nimport {OrOperator} from \"./\"; // forward import\nimport {AndOperator} from \"./\"; // forward import\nimport {BitwiseOrOperator} from \"./\"; // forward import\nimport {BitwiseXorOperator} from \"./\"; // forward import\nimport {BitwiseAndOperator} from \"./\"; // forward import\nimport {LtOperator} from \"./\"; // forward import\nimport {LeOperator} from \"./\"; // forward import\nimport {EqOperator} from \"./\"; // forward import\nimport {NeOperator} from \"./\"; // forward import\nimport {GeOperator} from \"./\"; // forward import\nimport {GtOperator} from \"./\"; // forward import\nimport {PlusOperator} from \"./\"; // forward import\nimport {MinusOperator} from \"./\"; // forward import\nimport {TimesOperator} from \"./\"; // forward import\nimport {DivideOperator} from \"./\"; // forward import\nimport {ModuloOperator} from \"./\"; // forward import\nimport {NotOperator} from \"./\"; // forward import\nimport {BitwiseNotOperator} from \"./\"; // forward import\nimport {NegativeOperator} from \"./\"; // forward import\nimport {PositiveOperator} from \"./\"; // forward import\n\nexport abstract class Expression extends Value {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  conditional(thenTerm: Value, elseTerm: Value): Value;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item;\n  conditional(thenTerm: AnyItem, elseTerm: AnyItem): Item {\n    thenTerm = Item.fromAny(thenTerm);\n    elseTerm = Item.fromAny(elseTerm);\n    return new ConditionalOperator(this, thenTerm, elseTerm);\n  }\n\n  or(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new OrOperator(this, that);\n  }\n\n  and(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new AndOperator(this, that);\n  }\n\n  bitwiseOr(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new BitwiseOrOperator(this, that);\n  }\n\n  bitwiseXor(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new BitwiseXorOperator(this, that);\n  }\n\n  bitwiseAnd(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new BitwiseAndOperator(this, that);\n  }\n\n  lt(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new LtOperator(this, that);\n  }\n\n  le(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new LeOperator(this, that);\n  }\n\n  eq(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new EqOperator(this, that);\n  }\n\n  ne(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new NeOperator(this, that);\n  }\n\n  ge(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new GeOperator(this, that);\n  }\n\n  gt(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new GtOperator(this, that);\n  }\n\n  plus(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new PlusOperator(this, that);\n  }\n\n  minus(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new MinusOperator(this, that);\n  }\n\n  times(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new TimesOperator(this, that);\n  }\n\n  divide(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new DivideOperator(this, that);\n  }\n\n  modulo(that: AnyItem): Operator {\n    that = Item.fromAny(that);\n    return new ModuloOperator(this, that);\n  }\n\n  not(): Operator {\n    return new NotOperator(this);\n  }\n\n  bitwiseNot(): Operator {\n    return new BitwiseNotOperator(this);\n  }\n\n  negative(): Operator {\n    return new NegativeOperator(this);\n  }\n\n  positive(): Operator {\n    return new PositiveOperator(this);\n  }\n\n  inverse(): Operator {\n    return new DivideOperator(Num.one, this);\n  }\n\n  toAny(): AnyValue {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Expression} from \"../Expression\";\nimport type {BinaryOperator} from \"./BinaryOperator\";\nimport type {UnaryOperator} from \"./UnaryOperator\";\nimport {OrOperator} from \"../\"; // forward import\nimport {AndOperator} from \"../\"; // forward import\nimport {BitwiseOrOperator} from \"../\"; // forward import\nimport {BitwiseXorOperator} from \"../\"; // forward import\nimport {BitwiseAndOperator} from \"../\"; // forward import\nimport {LtOperator} from \"../\"; // forward import\nimport {LeOperator} from \"../\"; // forward import\nimport {EqOperator} from \"../\"; // forward import\nimport {NeOperator} from \"../\"; // forward import\nimport {GeOperator} from \"../\"; // forward import\nimport {GtOperator} from \"../\"; // forward import\nimport {PlusOperator} from \"../\"; // forward import\nimport {MinusOperator} from \"../\"; // forward import\nimport {TimesOperator} from \"../\"; // forward import\nimport {DivideOperator} from \"../\"; // forward import\nimport {ModuloOperator} from \"../\"; // forward import\nimport {NotOperator} from \"../\"; // forward import\nimport {BitwiseNotOperator} from \"../\"; // forward import\nimport {NegativeOperator} from \"../\"; // forward import\nimport {PositiveOperator} from \"../\"; // forward import\n\nexport abstract class Operator extends Expression {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  static binary(operand1: Item, operator: string, operand2: Item): BinaryOperator {\n    switch (operator) {\n      case \"||\": return new OrOperator(operand1, operand2);\n      case \"&&\": return new AndOperator(operand1, operand2);\n      case \"|\": return new BitwiseOrOperator(operand1, operand2);\n      case \"^\": return new BitwiseXorOperator(operand1, operand2);\n      case \"&\": return new BitwiseAndOperator(operand1, operand2);\n      case \"<\": return new LtOperator(operand1, operand2);\n      case \"<=\": return new LeOperator(operand1, operand2);\n      case \"==\": return new EqOperator(operand1, operand2);\n      case \"!=\": return new NeOperator(operand1, operand2);\n      case \">=\": return new GeOperator(operand1, operand2);\n      case \">\": return new GtOperator(operand1, operand2);\n      case \"+\": return new PlusOperator(operand1, operand2);\n      case \"-\": return new MinusOperator(operand1, operand2);\n      case \"*\": return new TimesOperator(operand1, operand2);\n      case \"/\": return new DivideOperator(operand1, operand2);\n      case \"%\": return new ModuloOperator(operand1, operand2);\n      default: throw new Error(operator);\n    }\n  }\n\n  static unary(operator: string, operand: Item): UnaryOperator {\n    switch (operator) {\n      case \"!\": return new NotOperator(operand);\n      case \"~\": return new BitwiseNotOperator(operand);\n      case \"-\": return new NegativeOperator(operand);\n      case \"+\": return new PositiveOperator(operand);\n      default: throw new Error(operator);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {Operator} from \"./Operator\";\nimport {BinaryOperatorInterpolator} from \"../\"; // forward import\n\nexport abstract class BinaryOperator extends Operator {\n  constructor(operand1: Item, operand2: Item) {\n    super();\n    Object.defineProperty(this, \"operand1\", {\n      value: operand1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"operand2\", {\n      value: operand2,\n      enumerable: true,\n    });\n  }\n\n  declare readonly operand1: Item;\n\n  abstract readonly operator: string;\n\n  declare readonly operand2: Item;\n\n  isConstant(): boolean {\n    return this.operand1.isConstant() && this.operand2.isConstant();\n  }\n\n  interpolateTo(that: BinaryOperator): Interpolator<BinaryOperator>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof BinaryOperator && this.operator === that.operator) {\n      return BinaryOperatorInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {Operator} from \"./Operator\";\nimport type {BinaryOperator} from \"./BinaryOperator\";\n\n/** @hidden */\nexport interface BinaryOperatorInterpolator extends Interpolator<BinaryOperator> {\n  /** @hidden */\n  readonly operand1Interpolator: Interpolator<Item>;\n  /** @hidden */\n  readonly operator: string;\n  /** @hidden */\n  readonly operand2Interpolator: Interpolator<Item>;\n\n  readonly 0: BinaryOperator;\n\n  readonly 1: BinaryOperator;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const BinaryOperatorInterpolator = function (y0: BinaryOperator, y1: BinaryOperator): BinaryOperatorInterpolator {\n  const operator = y0.operator;\n  if (operator !== y1.operator) {\n    throw new Error();\n  }\n  const interpolator = function (u: number): BinaryOperator {\n    const operand1 = interpolator.operand1Interpolator(u);\n    const operand2 = interpolator.operand2Interpolator(u);\n    return Operator.binary(operand1, interpolator.operator, operand2);\n  } as BinaryOperatorInterpolator;\n  Object.setPrototypeOf(interpolator, BinaryOperatorInterpolator.prototype);\n  Object.defineProperty(interpolator, \"operand1Interpolator\", {\n    value: y0.operand1.interpolateTo(y1.operand1),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"operator\", {\n    value: operator,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"operand2Interpolator\", {\n    value: y0.operand2.interpolateTo(y1.operand2),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: BinaryOperator, y1: BinaryOperator): BinaryOperatorInterpolator;\n\n  /** @hidden */\n  prototype: BinaryOperatorInterpolator;\n};\n\nBinaryOperatorInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(BinaryOperatorInterpolator.prototype, 0, {\n  get(this: BinaryOperatorInterpolator): BinaryOperator {\n    const operand1 = this.operand1Interpolator[0];\n    const operand2 = this.operand2Interpolator[0];\n    return Operator.binary(operand1, this.operator, operand2);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(BinaryOperatorInterpolator.prototype, 1, {\n  get(this: BinaryOperatorInterpolator): BinaryOperator {\n    const operand1 = this.operand1Interpolator[1];\n    const operand2 = this.operand2Interpolator[1];\n    return Operator.binary(operand1, this.operator, operand2);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nBinaryOperatorInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof BinaryOperatorInterpolator) {\n    return this.operator === that.operator\n        && this.operand1Interpolator.equals(that.operand1Interpolator)\n        && this.operand2Interpolator.equals(that.operand2Interpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {Operator} from \"./Operator\";\nimport {UnaryOperatorInterpolator} from \"../\"; // forward import\n\nexport abstract class UnaryOperator extends Operator {\n  constructor(operand: Item) {\n    super();\n    Object.defineProperty(this, \"operand\", {\n      value: operand,\n      enumerable: true,\n    });\n  }\n\n  declare readonly operand: Item;\n\n  abstract readonly operator: string;\n\n  isConstant(): boolean {\n    return this.operand.isConstant();\n  }\n\n  interpolateTo(that: UnaryOperator): Interpolator<UnaryOperator>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof UnaryOperator && this.operator === that.operator) {\n      return UnaryOperatorInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {Operator} from \"./Operator\";\nimport type {UnaryOperator} from \"./UnaryOperator\";\n\n/** @hidden */\nexport interface UnaryOperatorInterpolator extends Interpolator<UnaryOperator> {\n  /** @hidden */\n  readonly operator: string;\n  /** @hidden */\n  readonly operandInterpolator: Interpolator<Item>;\n\n  readonly 0: UnaryOperator;\n\n  readonly 1: UnaryOperator;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const UnaryOperatorInterpolator = function (y0: UnaryOperator, y1: UnaryOperator): UnaryOperatorInterpolator {\n  const operator = y0.operator;\n  if (operator !== y1.operator) {\n    throw new Error();\n  }\n  const interpolator = function (u: number): UnaryOperator {\n    const operand = interpolator.operandInterpolator(u);\n    return Operator.unary(interpolator.operator, operand);\n  } as UnaryOperatorInterpolator;\n  Object.setPrototypeOf(interpolator, UnaryOperatorInterpolator.prototype);\n  Object.defineProperty(interpolator, \"operator\", {\n    value: operator,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"operandInterpolator\", {\n    value: y0.operand.interpolateTo(y1.operand),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: UnaryOperator, y1: UnaryOperator): UnaryOperatorInterpolator;\n\n  /** @hidden */\n  prototype: UnaryOperatorInterpolator;\n};\n\nUnaryOperatorInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(UnaryOperatorInterpolator.prototype, 0, {\n  get(this: UnaryOperatorInterpolator): UnaryOperator {\n    const operand = this.operandInterpolator[0];\n    return Operator.unary(this.operator, operand);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(UnaryOperatorInterpolator.prototype, 1, {\n  get(this: UnaryOperatorInterpolator): UnaryOperator {\n    const operand = this.operandInterpolator[1];\n    return Operator.unary(this.operator, operand);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nUnaryOperatorInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof UnaryOperatorInterpolator) {\n    return this.operator === that.operator\n        && this.operandInterpolator.equals(that.operandInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item} from \"../Item\";\nimport {Operator} from \"./Operator\";\nimport {ConditionalOperatorInterpolator} from \"../\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class ConditionalOperator extends Operator {\n  constructor(ifTerm: Item, thenTerm: Item, elseTerm: Item) {\n    super();\n    Object.defineProperty(this, \"ifTerm\", {\n      value: ifTerm.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"thenTerm\", {\n      value: thenTerm.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"elseTerm\", {\n      value: elseTerm.commit(),\n      enumerable: true,\n    });\n  }\n\n  declare readonly ifTerm: Item;\n\n  declare readonly thenTerm: Item;\n\n  declare readonly elseTerm: Item;\n\n  isConstant(): boolean {\n    return this.ifTerm.isConstant() && this.thenTerm.isConstant()\n        && this.elseTerm.isConstant();\n  }\n\n  get precedence(): number {\n    return 2;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    let result;\n    const ifTerm = this.ifTerm.evaluate(interpreter);\n    if (ifTerm.booleanValue(false)) {\n      const theTerm = this.thenTerm.evaluate(interpreter);\n      result = theTerm;\n    } else {\n      const elseTerm = this.elseTerm.evaluate(interpreter);\n      result = elseTerm;\n    }\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const ifTerm = this.ifTerm.substitute(interpreter);\n    const thenTerm = this.thenTerm.substitute(interpreter);\n    const elseTerm = this.elseTerm.substitute(interpreter);\n    return new ConditionalOperator(ifTerm, thenTerm, elseTerm);\n  }\n\n  interpolateTo(that: ConditionalOperator): Interpolator<ConditionalOperator>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof ConditionalOperator) {\n      return ConditionalOperatorInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 20;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof ConditionalOperator) {\n      let order = this.ifTerm.compareTo(that.ifTerm);\n      if (order === 0) {\n        order = this.thenTerm.compareTo(that.thenTerm);\n        if (order === 0) {\n          order = this.elseTerm.compareTo(that.elseTerm);\n        }\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ConditionalOperator) {\n      return this.ifTerm.equivalentTo(that.ifTerm, epsilon)\n          && this.thenTerm.equivalentTo(that.thenTerm, epsilon)\n          && this.elseTerm.equivalentTo(that.elseTerm, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ConditionalOperator) {\n      return this.ifTerm.equals(that.ifTerm) && this.thenTerm.equals(that.thenTerm)\n          && this.elseTerm.equals(that.elseTerm);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Constructors.hash(ConditionalOperator),\n        this.ifTerm.hashCode()), this.thenTerm.hashCode()), this.elseTerm.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.ifTerm).write(46/*'.'*/).write(\"conditional\").write(40/*'('*/)\n        .debug(this.thenTerm).write(44/*','*/).write(32/*' '*/)\n        .debug(this.elseTerm).write(41/*')'*/);\n  }\n\n  clone(): ConditionalOperator {\n    return new ConditionalOperator(this.ifTerm.clone(), this.thenTerm.clone(), this.elseTerm.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {ConditionalOperator} from \"./ConditionalOperator\";\n\n/** @hidden */\nexport interface ConditionalOperatorInterpolator extends Interpolator<ConditionalOperator> {\n  /** @hidden */\n  readonly ifTermInterpolator: Interpolator<Item>;\n  /** @hidden */\n  readonly thenTermInterpolator: Interpolator<Item>;\n  /** @hidden */\n  readonly elseTermInterpolator: Interpolator<Item>;\n\n  readonly 0: ConditionalOperator;\n\n  readonly 1: ConditionalOperator;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const ConditionalOperatorInterpolator = function (y0: ConditionalOperator, y1: ConditionalOperator): ConditionalOperatorInterpolator {\n  const interpolator = function (u: number): ConditionalOperator {\n    const ifTerm = interpolator.ifTermInterpolator(u);\n    const thenTerm = interpolator.thenTermInterpolator(u);\n    const elseTerm = interpolator.elseTermInterpolator(u);\n    return new ConditionalOperator(ifTerm, thenTerm, elseTerm);\n  } as ConditionalOperatorInterpolator;\n  Object.setPrototypeOf(interpolator, ConditionalOperatorInterpolator.prototype);\n  Object.defineProperty(interpolator, \"ifTermInterpolator\", {\n    value: y0.ifTerm.interpolateTo(y1.ifTerm),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"thenTermInterpolator\", {\n    value: y0.thenTerm.interpolateTo(y1.thenTerm),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"elseTermInterpolator\", {\n    value: y0.elseTerm.interpolateTo(y1.elseTerm),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: ConditionalOperator, y1: ConditionalOperator): ConditionalOperatorInterpolator;\n\n  /** @hidden */\n  prototype: ConditionalOperatorInterpolator;\n};\n\nConditionalOperatorInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(ConditionalOperatorInterpolator.prototype, 0, {\n  get(this: ConditionalOperatorInterpolator): ConditionalOperator {\n    const ifTerm = this.ifTermInterpolator[0];\n    const thenTerm = this.thenTermInterpolator[0];\n    const elseTerm = this.elseTermInterpolator[0];\n    return new ConditionalOperator(ifTerm, thenTerm, elseTerm);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(ConditionalOperatorInterpolator.prototype, 1, {\n  get(this: ConditionalOperatorInterpolator): ConditionalOperator {\n    const ifTerm = this.ifTermInterpolator[1];\n    const thenTerm = this.thenTermInterpolator[1];\n    const elseTerm = this.elseTermInterpolator[1];\n    return new ConditionalOperator(ifTerm, thenTerm, elseTerm);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nConditionalOperatorInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof ConditionalOperatorInterpolator) {\n    return this.ifTermInterpolator.equals(that.ifTermInterpolator)\n        && this.thenTermInterpolator.equals(that.thenTermInterpolator)\n        && this.elseTermInterpolator.equals(that.elseTermInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class InterpreterException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, InterpreterException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, HashCode, Numbers, Constructors} from \"@swim/util\";\nimport {Output, Format, Debug} from \"@swim/codec\";\n\n/**\n * Either an [[InterpreterSettings]] instance, or an [[InterpreterSettingsInit]]\n * object initializer.\n */\nexport type AnyInterpreterSettings = InterpreterSettings | InterpreterSettingsInit;\n\n/**\n * [[InterpreterSettings]] object initializer.\n */\nexport interface InterpreterSettingsInit {\n  maxScopeDepth?: number;\n}\n\nexport class InterpreterSettings implements Debug, HashCode {\n  constructor(maxScopeDepth: number) {\n    Object.defineProperty(this, \"maxScopeDepth\", {\n      value: maxScopeDepth,\n      enumerable: true,\n    });\n  }\n\n  declare readonly maxScopeDepth: number;\n\n  withMaxScopeDepth(maxScopeDepth: number): InterpreterSettings {\n    return this.copy(maxScopeDepth);\n  }\n\n  protected copy(maxScopeDepth: number): InterpreterSettings {\n    return new InterpreterSettings(maxScopeDepth);\n  }\n\n  protected canEqual(that: unknown): boolean {\n    return that instanceof InterpreterSettings;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof InterpreterSettings) {\n      return that.canEqual(this) && this.maxScopeDepth === that.maxScopeDepth;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(InterpreterSettings),\n        Numbers.hash(this.maxScopeDepth)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"new\").write(32/*' '*/).write(\"InterpreterSettings\")\n        .write(40/*'('*/).debug(this.maxScopeDepth).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static standard(): InterpreterSettings {\n    const maxScopeDepth = 1024;\n    return new InterpreterSettings(maxScopeDepth);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {InterpreterException} from \"./InterpreterException\";\nimport {InterpreterSettings} from \"./InterpreterSettings\";\nimport {AnyItem, Item} from \"../Item\";\nimport type {Operator} from \"../operator/Operator\";\nimport type {Selector} from \"../selector/Selector\";\n\nexport type AnyInterpreter = Interpreter | AnyItem;\n\nexport class Interpreter {\n  constructor(settings?: InterpreterSettings, scopeStack?: Item[] | null, scopeDepth?: number) {\n    Object.defineProperty(this, \"settings\", {\n      value: settings !== void 0 ? settings : InterpreterSettings.standard(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"scopeStack\", {\n      value: scopeStack !== void 0 ? scopeStack : null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"scopeDepth\", {\n      value: scopeDepth !== void 0 ? scopeDepth : 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly settings: InterpreterSettings;\n\n  withSettings(settings: InterpreterSettings): this {\n    Object.defineProperty(this, \"settings\", {\n      value: settings,\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  /** @hidden */\n  declare readonly scopeStack: Item[] | null;\n\n  declare readonly scopeDepth: number;\n\n  peekScope(): Item {\n    const scopeDepth = this.scopeDepth;\n    if (scopeDepth <= 0) {\n      throw new InterpreterException(\"scope stack empty\");\n    }\n    return this.scopeStack![scopeDepth - 1]!;\n  }\n\n  getScope(index: number): Item {\n    if (index < 0 || index >= this.scopeDepth) {\n      throw new RangeError(\"\" + index);\n    }\n    return this.scopeStack![index]!;\n  }\n\n  pushScope(scope: Item): void {\n    const scopeDepth = this.scopeDepth;\n    if (scopeDepth >= this.settings.maxScopeDepth) {\n      throw new InterpreterException(\"scope stack overflow\");\n    }\n    const oldScopeStack = this.scopeStack;\n    let newScopeStack;\n    if (oldScopeStack === null || scopeDepth + 1 > oldScopeStack.length) {\n      newScopeStack = new Array<Item>(Interpreter.expand(scopeDepth + 1));\n      if (oldScopeStack !== null) {\n        for (let i = 0; i < scopeDepth; i += 1) {\n          newScopeStack[i] = oldScopeStack[i]!;\n        }\n      }\n      Object.defineProperty(this, \"scopeStack\", {\n        value: newScopeStack,\n        enumerable: true,\n        configurable: true,\n      });\n    } else {\n      newScopeStack = oldScopeStack;\n    }\n    newScopeStack[scopeDepth] = scope;\n    Object.defineProperty(this, \"scopeDepth\", {\n      value: scopeDepth + 1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  popScope(): Item {\n    const scopeDepth = this.scopeDepth;\n    if (scopeDepth <= 0) {\n      throw new InterpreterException(\"scope stack empty\");\n    }\n    const scopeStack = this.scopeStack!;\n    const scope = scopeStack[scopeDepth - 1]!;\n    scopeStack[scopeDepth - 1] = void 0 as any;\n    Object.defineProperty(this, \"scopeDepth\", {\n      value: scopeDepth - 1,\n      enumerable: true,\n      configurable: true,\n    });\n    return scope;\n  }\n\n  swapScope(newScope: Item): Item {\n    const scopeDepth = this.scopeDepth;\n    if (scopeDepth <= 0) {\n      throw new InterpreterException(\"scope stack empty\");\n    }\n    const scopeStack = this.scopeStack!;\n    const oldScope = scopeStack[scopeDepth - 1]!;\n    scopeStack[scopeDepth - 1] = newScope;\n    return oldScope;\n  }\n\n  willOperate(operator: Operator): void {\n    // stub\n  }\n\n  didOperate(operator: Operator, result: Item): void {\n    // stub\n  }\n\n  willSelect(selector: Selector): void {\n    // stub\n  }\n\n  didSelect(selector: Selector, result: unknown): void {\n    // stub\n  }\n\n  willTransform(selector: Selector): void {\n    // stub\n  }\n\n  didTransform(selector: Selector, result: Item): void {\n    // stub\n  }\n\n  static of(...objects: AnyItem[]): Interpreter {\n    const n = objects.length;\n    const scopes = new Array(Interpreter.expand(n));\n    for (let i = 0; i < n; i += 1) {\n      const scope = Item.fromAny(objects[i]);\n      scopes[i] = scope;\n    }\n    return new Interpreter(InterpreterSettings.standard(), scopes, n);\n  }\n\n  static fromAny(interpreter: AnyInterpreter, globalScope: Item = Item.globalScope()): Interpreter {\n    if (!(interpreter instanceof Interpreter)) {\n      const scope = interpreter;\n      interpreter = new Interpreter();\n      if (globalScope !== void 0) {\n        interpreter.pushScope(globalScope);\n      }\n      if (scope !== void 0) {\n        interpreter.pushScope(Item.fromAny(scope));\n      }\n    }\n    return interpreter;\n  }\n\n  private static expand(n: number): number {\n    n = Math.max(32, n) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8; n |= n >> 16;\n    return n + 1;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class OrOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"||\";\n  }\n\n  get precedence(): number {\n    return 3;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    let result: Item;\n    const argument1 = this.operand1.evaluate(interpreter);\n    if (argument1.booleanValue(false)) {\n      result = argument1;\n    } else {\n      const argument2 = this.operand2.evaluate(interpreter);\n      result = argument2;\n    }\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.or(argument2);\n  }\n\n  get typeOrder(): number {\n    return 21;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof OrOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof OrOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof OrOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(OrOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"or\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): OrOperator {\n    return new OrOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class AndOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"&&\";\n  }\n\n  get precedence(): number {\n    return 4;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    let result: Item;\n    const argument1 = this.operand1.evaluate(interpreter);\n    if (argument1.booleanValue(false)) {\n      const argument2 = this.operand2.evaluate(interpreter);\n      result = argument2;\n    } else {\n      result = argument1;\n    }\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.and(argument2);\n  }\n\n  get typeOrder(): number {\n    return 22;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof AndOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof AndOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof AndOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(AndOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"and\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): AndOperator {\n    return new AndOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class BitwiseOrOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"|\";\n  }\n\n  get precedence(): number {\n    return 5;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.bitwiseOr(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.bitwiseOr(argument2);\n  }\n\n  get typeOrder(): number {\n    return 23;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof BitwiseOrOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseOrOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseOrOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(BitwiseOrOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"bitwiseOr\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): BitwiseOrOperator {\n    return new BitwiseOrOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class BitwiseXorOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"^\";\n  }\n\n  get precedence(): number {\n    return 6;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.bitwiseXor(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.bitwiseXor(argument2);\n  }\n\n  get typeOrder(): number {\n    return 24;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof BitwiseXorOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseXorOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseXorOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(BitwiseXorOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"bitwiseXor\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): BitwiseXorOperator {\n    return new BitwiseXorOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class BitwiseAndOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"&\";\n  }\n\n  get precedence(): number {\n    return 7;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.bitwiseAnd(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.bitwiseAnd(argument2);\n  }\n\n  get typeOrder(): number {\n    return 25;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof BitwiseAndOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseAndOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseAndOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(BitwiseAndOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"bitwiseAnd\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): BitwiseAndOperator {\n    return new BitwiseAndOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class LtOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"<\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.lt(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.lt(argument2);\n  }\n\n  get typeOrder(): number {\n    return 26;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof LtOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LtOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LtOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(LtOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"lt\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): LtOperator {\n    return new LtOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class LeOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"<=\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.le(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.le(argument2);\n  }\n\n  get typeOrder(): number {\n    return 27;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof LeOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LeOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LeOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(LeOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"le\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): LeOperator {\n    return new LeOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class EqOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"==\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.eq(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.eq(argument2);\n  }\n\n  get typeOrder(): number {\n    return 28;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof EqOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof EqOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof EqOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(EqOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"eq\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): EqOperator {\n    return new EqOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class NeOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"!=\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.ne(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.ne(argument2);\n  }\n\n  get typeOrder(): number {\n    return 29;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof NeOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NeOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NeOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(NeOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"ne\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): NeOperator {\n    return new NeOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class GeOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \">=\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.ge(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.ge(argument2);\n  }\n\n  get typeOrder(): number {\n    return 30;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof GeOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GeOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"ge\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): GeOperator {\n    return new GeOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class GtOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \">\";\n  }\n\n  get precedence(): number {\n    return 0;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.gt(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.gt(argument2);\n  }\n\n  get typeOrder(): number {\n    return 31;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof GtOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GtOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GtOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GtOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"gt\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): GtOperator {\n    return new GtOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class PlusOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"+\";\n  }\n\n  get precedence(): number {\n    return 8;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.plus(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.plus(argument2);\n  }\n\n  get typeOrder(): number {\n    return 32;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof PlusOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PlusOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PlusOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(PlusOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"plus\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): PlusOperator {\n    return new PlusOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class MinusOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"-\";\n  }\n\n  get precedence(): number {\n    return 8;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.minus(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.minus(argument2);\n  }\n\n  get typeOrder(): number {\n    return 33;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof MinusOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof MinusOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof MinusOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(MinusOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"minus\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): MinusOperator {\n    return new MinusOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class TimesOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"*\";\n  }\n\n  get precedence(): number {\n    return 9;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.times(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.times(argument2);\n  }\n\n  get typeOrder(): number {\n    return 34;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof TimesOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TimesOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TimesOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(TimesOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"times\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): TimesOperator {\n    return new TimesOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class DivideOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"/\";\n  }\n\n  get precedence(): number {\n    return 9;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.divide(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.divide(argument2);\n  }\n\n  get typeOrder(): number {\n    return 35;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof DivideOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DivideOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DivideOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(DivideOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"divide\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): DivideOperator {\n    return new DivideOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {BinaryOperator} from \"./BinaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class ModuloOperator extends BinaryOperator {\n  constructor(operand1: Item, operand2: Item) {\n    super(operand1, operand2);\n  }\n\n  get operator(): string {\n    return \"%\";\n  }\n\n  get precedence(): number {\n    return 9;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    interpreter.willOperate(this);\n    const argument1 = this.operand1.evaluate(interpreter);\n    const argument2 = this.operand2.evaluate(interpreter);\n    const result = argument1.modulo(argument2);\n    interpreter.didOperate(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument1 = this.operand1.substitute(interpreter);\n    const argument2 = this.operand2.substitute(interpreter);\n    return argument1.modulo(argument2);\n  }\n\n  get typeOrder(): number {\n    return 36;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof ModuloOperator) {\n      let order = this.operand1.compareTo(that.operand1);\n      if (order === 0) {\n        order = this.operand2.compareTo(that.operand2);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ModuloOperator) {\n      return this.operand1.equivalentTo(that.operand1, epsilon)\n          && this.operand2.equivalentTo(that.operand2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ModuloOperator) {\n      return this.operand1.equals(that.operand1) && this.operand2.equals(that.operand2);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(ModuloOperator),\n        this.operand1.hashCode()), this.operand2.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand1).write(46/*'.'*/).write(\"modulo\").write(40/*'('*/)\n        .debug(this.operand2).write(41/*')'*/);\n  }\n\n  clone(): ModuloOperator {\n    return new ModuloOperator(this.operand1.clone(), this.operand2.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Item} from \"../Item\";\nimport {UnaryOperator} from \"./UnaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class NotOperator extends UnaryOperator {\n  constructor(operand: Item) {\n    super(operand);\n  }\n\n  get operator(): string {\n    return \"!\";\n  }\n\n  get precedence(): number {\n    return 10;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.evaluate(interpreter);\n    return argument.not();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.substitute(interpreter);\n    return argument.not();\n  }\n\n  get typeOrder(): number {\n    return 37;\n  }\n\n  compareTo(that: Item): number {\n    return Numbers.compare(this.typeOrder, that.typeOrder);\n  }\n\n  equivalentTo(that: Item, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NotOperator) {\n      return this.operand.equivalentTo(that.operand, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NotOperator) {\n      return this.operand.equals(that.operand);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(NotOperator), this.operand.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand).write(46/*'.'*/).write(\"not\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  clone(): NotOperator {\n    return new NotOperator(this.operand.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {UnaryOperator} from \"./UnaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class BitwiseNotOperator extends UnaryOperator {\n  constructor(operand: Item) {\n    super(operand);\n  }\n\n  get operator(): string {\n    return \"~\";\n  }\n\n  get precedence(): number {\n    return 10;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.evaluate(interpreter);\n    return argument.bitwiseNot();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.substitute(interpreter);\n    return argument.bitwiseNot();\n  }\n\n  get typeOrder(): number {\n    return 38;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof BitwiseNotOperator) {\n      return this.operand.compareTo(that.operand);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseNotOperator) {\n      return this.operand.equivalentTo(that.operand, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BitwiseNotOperator) {\n      return this.operand.equals(that.operand);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(BitwiseNotOperator), this.operand.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand).write(46/*'.'*/).write(\"bitwiseNot\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  clone(): BitwiseNotOperator {\n    return new BitwiseNotOperator(this.operand.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {UnaryOperator} from \"./UnaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class NegativeOperator extends UnaryOperator {\n  constructor(operand: Item) {\n    super(operand);\n  }\n\n  get operator(): string {\n    return \"-\";\n  }\n\n  get precedence(): number {\n    return 10;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.evaluate(interpreter);\n    return argument.negative();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.substitute(interpreter);\n    return argument.negative();\n  }\n\n  get typeOrder(): number {\n    return 39;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof NegativeOperator) {\n      return this.operand.compareTo(that.operand);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NegativeOperator) {\n      return this.operand.equivalentTo(that.operand, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof NegativeOperator) {\n      return this.operand.equals(that.operand);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(NegativeOperator), this.operand.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand).write(46/*'.'*/).write(\"negative\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  clone(): NegativeOperator {\n    return new NegativeOperator(this.operand.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {UnaryOperator} from \"./UnaryOperator\";\nimport {AnyInterpreter, Interpreter} from \"../interpreter/Interpreter\";\n\nexport class PositiveOperator extends UnaryOperator {\n  constructor(operand: Item) {\n    super(operand);\n  }\n\n  get operator(): string {\n    return \"+\";\n  }\n\n  get precedence(): number {\n    return 10;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.evaluate(interpreter);\n    return argument.positive();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const argument = this.operand.substitute(interpreter);\n    return argument.positive();\n  }\n\n  get typeOrder(): number {\n    return 40;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof PositiveOperator) {\n      return this.operand.compareTo(that.operand);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PositiveOperator) {\n      return this.operand.equivalentTo(that.operand, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PositiveOperator) {\n      return this.operand.equals(that.operand);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(PositiveOperator), this.operand.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.operand).write(46/*'.'*/).write(\"positive\").write(40/*'('*/).write(41/*')'*/);\n  }\n\n  clone(): PositiveOperator {\n    return new PositiveOperator(this.operand.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item} from \"../Item\";\nimport type {Value} from \"../Value\";\nimport {Operator} from \"./Operator\";\nimport {InvokeOperatorInterpolator} from \"../\"; // forward import\nimport {Func} from \"../\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class InvokeOperator extends Operator {\n  constructor(func: Value, args: Value) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"args\", {\n      value: args.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"state\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly func: Value;\n\n  declare readonly args: Value;\n\n  declare readonly state: unknown;\n\n  setState(state: unknown): void {\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isConstant(): boolean {\n    return this.func.isConstant() && this.args.isConstant();\n  }\n\n  get precedence(): number {\n    return 11;\n  }\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const func = this.func.evaluate(interpreter);\n    if (func instanceof Func) {\n      return func.invoke(this.args, interpreter, this);\n    }\n    return Item.absent();\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const func = this.func.evaluate(interpreter);\n    if (func instanceof Func) {\n      const result = func.expand(this.args, interpreter, this);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    const args = this.args.substitute(interpreter).toValue();\n    return new InvokeOperator(this.func, args);\n  }\n\n  interpolateTo(that: InvokeOperator): Interpolator<InvokeOperator>;\n  interpolateTo(that: Item): Interpolator<Item>;\n  interpolateTo(that: unknown): Interpolator<Item> | null;\n  interpolateTo(that: unknown): Interpolator<Item> | null {\n    if (that instanceof InvokeOperator) {\n      return InvokeOperatorInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  get typeOrder(): number {\n    return 41;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof InvokeOperator) {\n      let order = this.func.compareTo(that.func);\n      if (order === 0) {\n        order = this.args.compareTo(that.args);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof InvokeOperator) {\n      return this.func.equals(that.func)\n          && this.args.equivalentTo(that.args, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof InvokeOperator) {\n      return this.func.equals(that.func) && this.args.equals(that.args);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(InvokeOperator),\n        this.func.hashCode()), this.args.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.func).write(46/*'.'*/).write(\"invoke\").write(40/*'('*/)\n        .debug(this.args).write(41/*')'*/);\n  }\n\n  clone(): InvokeOperator {\n    return new InvokeOperator(this.func.clone(), this.args.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Item} from \"../Item\";\nimport {InvokeOperator} from \"./InvokeOperator\";\n\n/** @hidden */\nexport interface InvokeOperatorInterpolator extends Interpolator<InvokeOperator> {\n  /** @hidden */\n  readonly funcInterpolator: Interpolator<Item>;\n  /** @hidden */\n  readonly argsInterpolator: Interpolator<Item>;\n\n  readonly 0: InvokeOperator;\n\n  readonly 1: InvokeOperator;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const InvokeOperatorInterpolator = function (y0: InvokeOperator, y1: InvokeOperator): InvokeOperatorInterpolator {\n  const interpolator = function (u: number): InvokeOperator {\n    const func = interpolator.funcInterpolator(u);\n    const args = interpolator.argsInterpolator(u);\n    return new InvokeOperator(func, args);\n  } as InvokeOperatorInterpolator;\n  Object.setPrototypeOf(interpolator, InvokeOperatorInterpolator.prototype);\n  Object.defineProperty(interpolator, \"funcInterpolator\", {\n    value: y0.func.interpolateTo(y1.func),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, \"argsInterpolator\", {\n    value: y0.args.interpolateTo(y1.args),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: InvokeOperator, y1: InvokeOperator): InvokeOperatorInterpolator;\n\n  /** @hidden */\n  prototype: InvokeOperatorInterpolator;\n};\n\nInvokeOperatorInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(InvokeOperatorInterpolator.prototype, 0, {\n  get(this: InvokeOperatorInterpolator): InvokeOperator {\n    const func = this.funcInterpolator[0];\n    const args = this.argsInterpolator[0];\n    return new InvokeOperator(func, args);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(InvokeOperatorInterpolator.prototype, 1, {\n  get(this: InvokeOperatorInterpolator): InvokeOperator {\n    const func = this.funcInterpolator[1];\n    const args = this.argsInterpolator[1];\n    return new InvokeOperator(func, args);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nInvokeOperatorInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof InvokeOperatorInterpolator) {\n    return this.funcInterpolator.equals(that.funcInterpolator)\n        && this.argsInterpolator.equals(that.argsInterpolator);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AnyItem, Item} from \"../Item\";\nimport {AnyValue, Value} from \"../Value\";\nimport {Record} from \"../Record\";\nimport {AnyText, Text} from \"../Text\";\nimport {AnyNum, Num} from \"../Num\";\nimport {Expression} from \"../Expression\";\nimport type {Operator} from \"../operator/Operator\";\nimport {InvokeOperator} from \"../operator/InvokeOperator\";\nimport {IdentitySelector} from \"../\"; // forward import\nimport {GetSelector} from \"../\"; // forward import\nimport {GetAttrSelector} from \"../\"; // forward import\nimport {GetItemSelector} from \"../\"; // forward import\nimport {KeysSelector} from \"../\"; // forward import\nimport {ValuesSelector} from \"../\"; // forward import\nimport {ChildrenSelector} from \"../\"; // forward import\nimport {DescendantsSelector} from \"../\"; // forward import\nimport {FilterSelector} from \"../\"; // forward import\nimport {LiteralSelector} from \"../\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport abstract class Selector extends Expression {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n\n  /**\n   * The `Selector` that this `Selector` uses to match sub-selections.\n   */\n  abstract readonly then: Selector;\n\n  abstract forSelected<T>(interpreter: Interpreter,\n                          callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  abstract forSelected<T, S>(interpreter: Interpreter,\n                             callback: (this: S, interpreter: Interpreter) => T | undefined,\n                             thisArg: S): T | undefined;\n\n  abstract mapSelected(interpreter: Interpreter,\n                       transform: (interpreter: Interpreter) => Item): Item;\n  abstract mapSelected<S>(interpreter: Interpreter,\n                          transform: (this: S, interpreter: Interpreter) => Item,\n                          thisArg: S): Item;\n\n  evaluate(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const selected = Record.create();\n    this.forSelected(interpreter, function (interpreter: Interpreter): void {\n      const scope = interpreter.peekScope();\n      if (scope !== void 0) {\n        selected.push(scope);\n      }\n    }, this);\n    return selected.isEmpty() ? Item.absent() : selected.flattened();\n  }\n\n  abstract substitute(interpreter: AnyInterpreter): Item;\n\n  abstract andThen(then: Selector): Selector;\n\n  get(key: AnyValue): Selector {\n    key = Value.fromAny(key);\n    return this.andThen(new GetSelector(key, Selector.identity()));\n  }\n\n  getAttr(key: AnyText): Selector {\n    key = Text.fromAny(key);\n    return this.andThen(new GetAttrSelector(key, Selector.identity()));\n  }\n\n  getItem(index: AnyNum): Selector {\n    index = Num.fromAny(index);\n    return this.andThen(new GetItemSelector(index, Selector.identity()));\n  }\n\n  keys(): Selector {\n    return this.andThen(Selector.keys());\n  }\n\n  values(): Selector {\n    return this.andThen(Selector.values());\n  }\n\n  children(): Selector {\n    return this.andThen(Selector.children());\n  }\n\n  descendants(): Selector {\n    return this.andThen(Selector.descendants());\n  }\n\n  filter(predicate?: AnyItem): Selector {\n    if (arguments.length === 0) {\n      return new FilterSelector(this, Selector.identity());\n    } else {\n      predicate = Item.fromAny(predicate);\n      return this.andThen(predicate.filter());\n    }\n  }\n\n  invoke(args: Value): Operator {\n    return new InvokeOperator(this, args);\n  }\n\n  get precedence(): number {\n    return 11;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Selector\").write(46/*'.'*/).write(\"identity\").write(40/*'('*/).write(41/*')'*/);\n    this.debugThen(output);\n  }\n\n  abstract debugThen(output: Output): void;\n\n  abstract clone(): Selector;\n\n  @Lazy\n  static identity(): Selector {\n    return new IdentitySelector();\n  }\n\n  static get(key: AnyValue): Selector {\n    key = Value.fromAny(key);\n    return new GetSelector(key, Selector.identity());\n  }\n\n  static getAttr(key: AnyText): Selector {\n    key = Text.fromAny(key);\n    return new GetAttrSelector(key, Selector.identity());\n  }\n\n  static getItem(index: AnyNum): Selector {\n    index = Num.fromAny(index);\n    return new GetItemSelector(index, Selector.identity());\n  }\n\n  @Lazy\n  static keys(): Selector {\n    return new KeysSelector(Selector.identity());\n  }\n\n  @Lazy\n  static values(): Selector {\n    return new ValuesSelector(Selector.identity());\n  }\n\n  @Lazy\n  static children(): Selector {\n    return new ChildrenSelector(Selector.identity());\n  }\n\n  @Lazy\n  static descendants(): Selector {\n    return new DescendantsSelector(Selector.identity());\n  }\n\n  static literal(item: AnyItem): Selector {\n    item = Item.fromAny(item);\n    if (!(item instanceof Selector)) {\n      item = new LiteralSelector(item, Selector.identity());\n    }\n    return item as Selector;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AnyItem, Item} from \"../Item\";\nimport {AnyValue, Value} from \"../Value\";\nimport {AnyText, Text} from \"../Text\";\nimport {AnyNum, Num} from \"../Num\";\nimport {Selector} from \"./Selector\";\nimport {GetSelector} from \"../\"; // forward import\nimport {GetAttrSelector} from \"../\"; // forward import\nimport {GetItemSelector} from \"../\"; // forward import\nimport {FilterSelector} from \"../\"; // forward import\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class IdentitySelector extends Selector {\n  get then(): Selector {\n    return this;\n  }\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const oldScope = interpreter.popScope();\n      // Evaluate the current selection.\n      const newScope = oldScope.evaluate(interpreter);\n      // Push the evaluated selection onto the scope stack.\n      interpreter.pushScope(newScope);\n      // Visit the evaluated selection.\n      selected = callback.call(thisArg, interpreter);\n      // Restore the original selection to the top of the scope stack.\n      interpreter.swapScope(oldScope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    return transform.call(thisArg, interpreter);\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    return interpreter.peekScope().substitute(interpreter);\n  }\n\n  get(key: AnyValue): Selector {\n    key = Value.fromAny(key);\n    return new GetSelector(key, this);\n  }\n\n  getAttr(key: AnyText): Selector {\n    key = Text.fromAny(key);\n    return new GetAttrSelector(key, this);\n  }\n\n  getItem(index: AnyNum): Selector {\n    index = Num.fromAny(index);\n    return new GetItemSelector(index, this);\n  }\n\n  andThen(then: Selector): Selector {\n    return then;\n  }\n\n  keys(): Selector {\n    return Selector.keys();\n  }\n\n  values(): Selector {\n    return Selector.values();\n  }\n\n  children(): Selector {\n    return Selector.children();\n  }\n\n  descendants(): Selector {\n    return Selector.descendants();\n  }\n\n  filter(predicate?: AnyItem): Selector {\n    if (arguments.length === 0) {\n      return new FilterSelector(this, this);\n    } else {\n      predicate = Item.fromAny(predicate);\n      return predicate.filter();\n    }\n  }\n\n  get typeOrder(): number {\n    return 10;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this === that;\n  }\n\n  equals(that: unknown): boolean {\n    return this === that;\n  }\n\n  hashCode(): number {\n    return Constructors.hash(IdentitySelector);\n  }\n\n  debugThen(output: Output): void {\n    // nop\n  }\n\n  clone(): Selector {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Field} from \"../Field\";\nimport type {Value} from \"../Value\";\nimport {Record} from \"../Record\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class GetSelector extends Selector {\n  constructor(key: Value, then: Selector) {\n    super();\n    Object.defineProperty(this, \"item\", {\n      value: key.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly item: Value;\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    interpreter.willSelect(this);\n    // Evaluate the key, in case it's dynamic.\n    const key = this.item.evaluate(interpreter).toValue();\n    const selected = GetSelector.forSelected(key, this.then, interpreter, callback, thisArg);\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  private static forSelected<T, S>(key: Value, then: Selector, interpreter: Interpreter,\n                                   callback: (this: S | undefined, interpreter: Interpreter) => T,\n                                   thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the next selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      let field: Field | undefined;\n      // Only records can have members.\n      if (scope instanceof Record) {\n        field = scope.getField(key);\n        if (field !== void 0) {\n          // Push the field value onto the scope stack.\n          interpreter.pushScope(field.toValue());\n          // Subselect the field value.\n          selected = then.forSelected(interpreter, callback, thisArg);\n          // Pop the field value off of the scope stack.\n          interpreter.popScope();\n        }\n      }\n      if (field === void 0 && selected === void 0) {\n        GetSelector.forSelected(key, then, interpreter, callback, thisArg);\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    // Evaluate the key, if it's dynamic.\n    const key = this.item.evaluate(interpreter).toValue();\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have members.\n      if (scope instanceof Record) {\n        const oldField = scope.getField(key);\n        if (oldField !== void 0) {\n          // Push the field value onto the scope stack.\n          interpreter.pushScope(oldField.toValue());\n          // Transform the field value.\n          const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n          // Pop the field value off the scope stack.\n          interpreter.popScope();\n          if (newItem instanceof Field) {\n            // Replace the original field with the transformed field.\n            if (key.equals(newItem.key)) {\n              scope.set(key, newItem.toValue());\n            } else {\n              scope.delete(key);\n              scope.push(newItem);\n            }\n          } else if (newItem.isDefined()) {\n            // Update the field with the transformed value.\n            scope.set(key, newItem.toValue());\n          } else {\n            // Remove the field.\n            scope.delete(key);\n          }\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    // Evaluate the key, in case it's dynamic.\n    const key = this.item.evaluate(interpreter).toValue();\n    const value = GetSelector.substitute(key, this.then, interpreter);\n    if (value !== void 0) {\n      return value;\n    }\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new GetSelector(this.item, then as Selector);\n  }\n\n  private static substitute(key: Value, then: Selector, interpreter: Interpreter): Item | undefined {\n    let selected: Item | undefined;\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the next selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      let field: Field | undefined;\n      // Only records can have members.\n      if (scope instanceof Record) {\n        field = scope.getField(key);\n        if (field !== void 0) {\n          // Substitute the field value.\n          selected = field.toValue().substitute(interpreter);\n        }\n      }\n      if (field === void 0 && selected === void 0) {\n        GetSelector.substitute(key, then, interpreter);\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    return selected;\n  }\n\n  andThen(then: Selector): Selector {\n    return new GetSelector(this.item, this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 12;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof GetSelector) {\n      let order = this.item.compareTo(that.item);\n      if (order === 0) {\n        order = this.then.compareTo(that.then);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetSelector) {\n      return this.item.equals(that.item) && this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetSelector) {\n      return this.item.equals(that.item) && this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GetSelector),\n        this.item.hashCode()), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"get\").write(40/*'('*/).debug(this.item).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new GetSelector(this.item.clone(), this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Field} from \"../Field\";\nimport {Attr} from \"../Attr\";\nimport {Record} from \"../Record\";\nimport type {Text} from \"../Text\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class GetAttrSelector extends Selector {\n  constructor(key: Text, then: Selector) {\n    super();\n    Object.defineProperty(this, \"item\", {\n      value: key,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly item: Text;\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    interpreter.willSelect(this);\n    const key = this.item;\n    const selected = GetAttrSelector.forSelected(key, this.then, interpreter, callback);\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  private static forSelected<T, S>(key: Text, then: Selector, interpreter: Interpreter,\n                                   callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                                   thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the next selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      let field: Field | undefined;\n      // Only records can have members.\n      if (scope instanceof Record) {\n        field = scope.getField(key);\n        if (field instanceof Attr) {\n          // Push the field value onto the scope stack.\n          interpreter.pushScope(field.toValue());\n          // Subselect the field value.\n          selected = then.forSelected(interpreter, callback, thisArg);\n          // Pop the field value off of the scope stack.\n          interpreter.popScope();\n        }\n      }\n      if (field === void 0 && selected === void 0) {\n        GetAttrSelector.forSelected(key, then, interpreter, callback, thisArg);\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    const key = this.item;\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have members.\n      if (scope instanceof Record) {\n        const oldField = scope.getField(key);\n        if (oldField instanceof Attr) {\n          // Push the field value onto the scope stack.\n          interpreter.pushScope(oldField.toValue());\n          // Transform the field value.\n          const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n          // Pop the field value off the scope stack.\n          interpreter.popScope();\n          if (newItem instanceof Field) {\n            // Replace the original field with the transformed field.\n            if (key.equals(newItem.key)) {\n              scope.setAttr(key, newItem.toValue());\n            } else {\n              scope.delete(key);\n              scope.push(newItem);\n            }\n          } else if (newItem.isDefined()) {\n            // Update the field with the transformed value.\n            scope.setAttr(key, newItem.toValue());\n          } else {\n            // Remove the field.\n            scope.delete(key);\n          }\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const key = this.item;\n    const value = GetAttrSelector.substitute(key, this.then, interpreter);\n    if (value !== void 0) {\n      return value;\n    }\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new GetAttrSelector(this.item, then as Selector);\n  }\n\n  private static substitute(key: Text, then: Selector, interpreter: Interpreter): Item | undefined {\n    let selected: Item | undefined;\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the next selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      let field: Field | undefined;\n      // Only records can have members.\n      if (scope instanceof Record) {\n        field = scope.getField(key);\n        if (field instanceof Attr) {\n          // Substitute the field value.\n          selected = field.toValue().substitute(interpreter);\n        }\n      }\n      if (field === void 0 && selected === void 0) {\n        GetAttrSelector.substitute(key, then, interpreter);\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    return selected;\n  }\n\n  andThen(then: Selector): Selector {\n    return new GetAttrSelector(this.item, this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 13;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof GetAttrSelector) {\n      let order = this.item.compareTo(that.item);\n      if (order === 0) {\n        order = this.then.compareTo(that.then);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetAttrSelector) {\n      return this.item.equals(that.item) && this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetAttrSelector) {\n      return this.item.equals(that.item) && this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GetAttrSelector),\n        this.item.hashCode()), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"getAttr\").write(40/*'('*/)\n        .debug(this.item).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new GetAttrSelector(this.item.clone(), this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Record} from \"../Record\";\nimport type {Num} from \"../Num\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class GetItemSelector extends Selector {\n  constructor(index: Num, then: Selector) {\n    super();\n    Object.defineProperty(this, \"item\", {\n      value: index,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly item: Num;\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    const index = this.item.numberValue();\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      if (scope instanceof Record && index < scope.length) {\n        const item = scope.getItem(index);\n        // Push the item onto the scope stack.\n        interpreter.pushScope(item);\n        // Subselect the item.\n        selected = this.then.forSelected(interpreter, callback, thisArg);\n        // Pop the item off of the scope stack.\n        interpreter.popScope();\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      const index = this.item.numberValue();\n      if (scope instanceof Record && index < scope.length) {\n        const oldItem = scope.getItem(index);\n        // Push the item onto the scope stack.\n        interpreter.pushScope(oldItem);\n        // Transform the item.\n        const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n        // Pop the item off the scope stack.\n        interpreter.popScope();\n        if (newItem.isDefined()) {\n          scope.setItem(index, newItem);\n        } else {\n          scope.splice(index, 1);\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const index = this.item.numberValue();\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      let selected: Item | undefined;\n      if (scope instanceof Record && index < scope.length) {\n        const item = scope.getItem(index);\n        // Substitute the item.\n        selected = item.substitute(interpreter);\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n      if (selected !== void 0) {\n        return selected;\n      }\n    }\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new GetItemSelector(this.item, then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new GetItemSelector(this.item, this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 14;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof GetItemSelector) {\n      let order = this.item.compareTo(that.item);\n      if (order === 0) {\n        order = this.then.compareTo(that.then);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetItemSelector) {\n      return this.item.equals(that.item) && this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GetItemSelector) {\n      return this.item.equals(that.item) && this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GetItemSelector),\n        this.item.hashCode()), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"getItem\").write(40/*'('*/)\n      .debug(this.item).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new GetItemSelector(this.item, this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Field} from \"../Field\";\nimport {Attr} from \"../Attr\";\nimport {Slot} from \"../Slot\";\nimport {Record} from \"../Record\";\nimport {Text} from \"../Text\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class KeysSelector extends Selector {\n  constructor(then: Selector) {\n    super();\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope();\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child, while none have been selected:\n        while (selected === void 0 && children.hasNext()) {\n          const child = children.next().value!;\n          // Only fields can have keys.\n          if (child instanceof Field) {\n            // Push the child key onto the scope stack.\n            interpreter.pushScope(child.key);\n            // Subselect the child key.\n            selected = this.then.forSelected(interpreter, callback, thisArg);\n            // Pop the child key off of the scope stack.\n            interpreter.popScope();\n          }\n        }\n      } else if (scope instanceof Field) {\n        // Push the key onto the scope stack.\n        interpreter.pushScope(scope.key);\n        // Subselect the key.\n        selected = this.then.forSelected(interpreter, callback, thisArg);\n        // Pop the key off of the scope stack.\n        interpreter.popScope();\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      let scope = interpreter.popScope();\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        while (children.hasNext()) {\n          const child = children.next().value!;\n          if (child instanceof Field) {\n            const oldKey = child.key;\n            // Push the key onto the scope stack.\n            interpreter.pushScope(oldKey);\n            // Subselect the key.\n            const newKey = this.then.mapSelected(interpreter, transform, thisArg).toValue();\n            // Pop the key off of the scope stack.\n            interpreter.popScope();\n            if (newKey.isDefined()) {\n              if (oldKey !== newKey) {\n                if (scope instanceof Attr && newKey instanceof Text) {\n                  children.set(Attr.of(newKey, scope.toValue()));\n                } else {\n                  children.set(Slot.of(newKey, scope.toValue()));\n                }\n              }\n            } else {\n              children.delete();\n            }\n          }\n        }\n      } else if (scope instanceof Field) {\n        const oldKey = scope.key;\n        // Push the key onto the scope stack.\n        interpreter.pushScope(oldKey);\n        // Subselect the key.\n        const newKey = this.then.mapSelected(interpreter, transform, thisArg).toValue();\n        // Pop the key off of the scope stack.\n        interpreter.popScope();\n        if (newKey.isDefined()) {\n          if (oldKey !== newKey) {\n            if (scope instanceof Attr && newKey instanceof Text) {\n              scope = Attr.of(newKey, scope.toValue());\n            } else {\n              scope = Slot.of(newKey, scope.toValue());\n            }\n          }\n        } else {\n          scope = Item.absent();\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new KeysSelector(then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new KeysSelector(this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 15;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof KeysSelector) {\n      return this.then.compareTo(that.then);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof KeysSelector) {\n      return this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof KeysSelector) {\n      return this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(KeysSelector), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"keys\").write(40/*'('*/).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new KeysSelector(this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Field} from \"../Field\";\nimport {Record} from \"../Record\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class ValuesSelector extends Selector {\n  constructor(then: Selector) {\n    super();\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope();\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child, while none have been selected:\n        while (selected === void 0 && children.hasNext()) {\n          const child = children.next().value!;\n          // Push the child value onto the scope stack.\n          interpreter.pushScope(child.toValue());\n          // Subselect the child value.\n          selected = this.then.forSelected(interpreter, callback, thisArg);\n          // Pop the child value off of the scope stack.\n          interpreter.popScope();\n        }\n      } else {\n        // Push the value onto the scope stack.\n        interpreter.pushScope(scope.toValue());\n        // Subselect the value.\n        selected = this.then.forSelected(interpreter, callback, thisArg);\n        // Pop the value off of the scope stack.\n        interpreter.popScope();\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      let scope = interpreter.popScope();\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        while (children.hasNext()) {\n          const child = children.next().value!;\n          if (child instanceof Field) {\n            const oldValue = child.toValue();\n            // Push the child value onto the scope stack.\n            interpreter.pushScope(oldValue);\n            // Transform the child value.\n            const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n            // Pop the child value off of the scope stack.\n            interpreter.popScope();\n            if (newItem.isDefined()) {\n              if (newItem instanceof Field) {\n                children.set(newItem);\n              } else if (newItem !== oldValue) {\n                children.set(child.updatedValue(newItem.toValue()));\n              }\n            } else {\n              children.delete();\n            }\n          } else {\n            // Push the child onto the scope stack.\n            interpreter.pushScope(child.toValue());\n            // Transform the child.\n            const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n            // Pop the child off of the scope stack.\n            interpreter.popScope();\n            if (newItem.isDefined()) {\n              if (child !== newItem) {\n                children.set(newItem);\n              }\n            } else {\n              children.delete();\n            }\n          }\n        }\n      } else if (scope instanceof Field) {\n        const oldValue = scope.toValue();\n        // Push the field value onto the scope stack.\n        interpreter.pushScope(oldValue);\n        // Transform the field value.\n        const newItem = this.then.mapSelected(interpreter, transform, thisArg);\n        // Pop the field value off of the scope stack.\n        interpreter.popScope();\n        if (newItem.isDefined()) {\n          if (newItem instanceof Field) {\n            scope = newItem;\n          } else if (newItem !== oldValue) {\n            scope = scope.updatedValue(newItem.toValue());\n          }\n        } else {\n          scope = Item.absent();\n        }\n      } else {\n        // Push the value onto the scope stack.\n        interpreter.pushScope(scope);\n        // Transform the value.\n        scope = this.then.mapSelected(interpreter, transform, thisArg);\n        // Pop the value off of the scope stack.\n        interpreter.popScope();\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new ValuesSelector(then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new ValuesSelector(this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 16;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof ValuesSelector) {\n      return this.then.compareTo(that.then);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ValuesSelector) {\n      return this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ValuesSelector) {\n      return this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(ValuesSelector), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"values\").write(40/*'('*/).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new ValuesSelector(this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Record} from \"../Record\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class ChildrenSelector extends Selector {\n  constructor(then: Selector) {\n    super();\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have children.\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child, while none have been selected:\n        while (selected === void 0 && children.hasNext()) {\n          const child = children.next().value!;\n          // Push the child onto the scope stack.\n          interpreter.pushScope(child);\n          // Subselect the child.\n          selected = this.then.forSelected(interpreter, callback, thisArg);\n          // Pop the child off of the scope stack.\n          interpreter.popScope();\n        }\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have children.\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child:\n        while (children.hasNext()) {\n          const oldChild = children.next().value!;\n          // Push the child onto the scope stack.\n          interpreter.pushScope(oldChild);\n          // Transform the child.\n          const newChild = this.then.mapSelected(interpreter, transform);\n          // Pop the child off the scope stack.\n          interpreter.popScope();\n          if (newChild.isDefined()) {\n            // Update the child, if its identity changed.\n            if (newChild !== oldChild) {\n              children.set(newChild);\n            }\n          } else {\n            // Remove the child, if it transformed to Absent.\n            children.delete();\n          }\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new ChildrenSelector(then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new ChildrenSelector(this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 17;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof ChildrenSelector) {\n      return this.then.compareTo(that.then);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ChildrenSelector) {\n      return this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ChildrenSelector) {\n      return this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(ChildrenSelector), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"children\").write(40/*'('*/).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new ChildrenSelector(this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Record} from \"../Record\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class DescendantsSelector extends Selector {\n  constructor(then: Selector) {\n    super();\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have descendants.\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child, while none have selected a result:\n        while (selected === void 0 && children.hasNext()) {\n          const child = children.next().value!;\n          // Push the child onto the scope stack.\n          interpreter.pushScope(child);\n          // Subselect the child.\n          selected = this.then.forSelected(interpreter, callback, thisArg);\n          // If the child was not selected:\n          if (selected === void 0) {\n            // Recursively select the child's children.\n            this.forSelected(interpreter, callback, thisArg);\n          }\n          // Pop the child off of the scope stack.\n          interpreter.popScope();\n        }\n      }\n      // Push the current selection back onto the stack.\n      interpreter.pushScope(scope);\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // Pop the current selection off of the stack to take it out of scope.\n      const scope = interpreter.popScope().toValue();\n      // Only records can have descendants.\n      if (scope instanceof Record) {\n        const children = scope.iterator();\n        // For each child:\n        while (children.hasNext()) {\n          const oldChild = children.next().value!;\n          // Push the child onto the scope stack.\n          interpreter.pushScope(oldChild);\n          // Transform the child.\n          let newChild = this.then.mapSelected(interpreter, transform, thisArg);\n          // If the child was not removed:\n          if (newChild.isDefined()) {\n            // Recursively transform the child's children.\n            newChild = this.mapSelected(interpreter, transform, thisArg);\n          }\n          // Pop the child off the scope stack.\n          interpreter.popScope();\n          if (newChild.isDefined()) {\n            // Update the child, if its identity changed.\n            if (newChild !== oldChild) {\n              children.set(newChild);\n            }\n          } else {\n            // Remove the child, if it transformed to Absent.\n            children.delete();\n          }\n        }\n      }\n      // Push the transformed selection back onto the stack.\n      interpreter.pushScope(scope);\n      result = scope;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new DescendantsSelector(then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new DescendantsSelector(this.then.andThen(then));\n  }\n\n  get typeOrder(): number {\n    return 18;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof DescendantsSelector) {\n      return this.then.compareTo(that.then);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DescendantsSelector) {\n      return this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DescendantsSelector) {\n      return this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(DescendantsSelector), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"descendants\").write(40/*'('*/).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new DescendantsSelector(this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AnyItem, Item} from \"../Item\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class FilterSelector extends Selector {\n  constructor(predicate: Selector, then: Selector) {\n    super();\n    Object.defineProperty(this, \"predicate\", {\n      value: predicate,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly predicate: Selector;\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      // If the filter matches the selection scope:\n      if (this.filterSelected(interpreter)) {\n        // Then subselect the selection scope.\n        selected = this.then.forSelected(interpreter, callback, thisArg);\n      }\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      // If the filter matches the selection scope:\n      if (this.filterSelected(interpreter)) {\n        // Then transform the selection scope.\n        result = this.then.mapSelected(interpreter, transform, thisArg);\n      } else {\n        result = interpreter.peekScope().toValue();\n      }\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let predicate = this.predicate.substitute(interpreter);\n    if (!(predicate instanceof Selector)) {\n      predicate = this.predicate;\n    }\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new FilterSelector(predicate as Selector, then as Selector);\n  }\n\n  protected filterSelected(interpreter: Interpreter): boolean {\n    return this.predicate.forSelected(interpreter, this.selected, this) !== void 0;\n  }\n\n  protected selected(interpreter: Interpreter): null {\n    return null;\n  }\n\n  andThen(then: Selector): Selector {\n    return new FilterSelector(this.predicate, this.then.andThen(then));\n  }\n\n  filter(predicate?: AnyItem): Selector {\n    if (arguments.length === 0) {\n      return this;\n    } else {\n      predicate = Item.fromAny(predicate);\n      return this.andThen(predicate.filter());\n    }\n  }\n\n  get typeOrder(): number {\n    return 19;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof FilterSelector) {\n      let order = this.predicate.compareTo(that.predicate);\n      if (order === 0) {\n        order = this.then.compareTo(that.then);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof FilterSelector) {\n      return this.predicate.equivalentTo(that.predicate, epsilon)\n          && this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof FilterSelector) {\n      return this.predicate.equals(that.predicate) && this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(FilterSelector),\n        this.predicate.hashCode()), this.then.hashCode()));\n  }\n\n  debugThen(output: Output): void {\n    output = output.write(46/*'.'*/).write(\"filter\").write(40/*'('*/)\n        .debug(this.predicate).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  clone(): Selector {\n    return new FilterSelector(this.predicate.clone(), this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Selector} from \"./Selector\";\nimport {AnyInterpreter, Interpreter} from \"../\"; // forward import\n\nexport class LiteralSelector extends Selector {\n  constructor(item: Item, then: Selector) {\n    super();\n    Object.defineProperty(this, \"item\", {\n      value: item.commit(),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"then\", {\n      value: then,\n      enumerable: true,\n    });\n  }\n\n  declare readonly item: Item;\n\n  declare readonly then: Selector;\n\n  forSelected<T>(interpreter: Interpreter,\n                 callback: (interpreter: Interpreter) => T | undefined): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S, interpreter: Interpreter) => T | undefined,\n                    thisArg: S): T | undefined;\n  forSelected<T, S>(interpreter: Interpreter,\n                    callback: (this: S | undefined, interpreter: Interpreter) => T | undefined,\n                    thisArg?: S): T | undefined {\n    let selected: T | undefined;\n    interpreter.willSelect(this);\n    if (interpreter.scopeDepth !== 0) {\n      const literal = this.item.evaluate(interpreter);\n      if (literal.isDefined()) {\n        // Push the literal onto the scope stack.\n        interpreter.pushScope(literal);\n        // Subselect the literal.\n        selected = this.then.forSelected(interpreter, callback, thisArg);\n        // Pop the literal off of the scope stack.\n        interpreter.popScope();\n      }\n    }\n    interpreter.didSelect(this, selected);\n    return selected;\n  }\n\n  mapSelected(interpreter: Interpreter,\n              transform: (interpreter: Interpreter) => Item): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S, interpreter: Interpreter) => Item,\n                 thisArg: S): Item;\n  mapSelected<S>(interpreter: Interpreter,\n                 transform: (this: S | undefined, interpreter: Interpreter) => Item,\n                 thisArg?: S): Item {\n    let result: Item;\n    interpreter.willTransform(this);\n    if (interpreter.scopeDepth !== 0) {\n      let literal = this.item.evaluate(interpreter);\n      if (literal.isDefined()) {\n        // Push the literal onto the scope stack.\n        interpreter.pushScope(literal);\n        // Transform the literal.\n        literal = this.then.mapSelected(interpreter, transform, thisArg);\n        // Pop the literal off of the scope stack.\n        interpreter.popScope();\n      }\n      result = literal;\n    } else {\n      result = Item.absent();\n    }\n    interpreter.didTransform(this, result);\n    return result;\n  }\n\n  substitute(interpreter: AnyInterpreter): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const item = this.item.substitute(interpreter);\n    let then = this.then.substitute(interpreter);\n    if (!(then instanceof Selector)) {\n      then = this.then;\n    }\n    return new LiteralSelector(item, then as Selector);\n  }\n\n  andThen(then: Selector): Selector {\n    return new LiteralSelector(this.item, this.then.andThen(then));\n  }\n\n  get precedence(): number {\n    return this.item.precedence;\n  }\n\n  get typeOrder(): number {\n    return 11;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof LiteralSelector) {\n      let order = this.item.compareTo(that.item);\n      if (order === 0) {\n        order = this.then.compareTo(that.then);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LiteralSelector) {\n      return this.item.equivalentTo(that.item, epsilon)\n          && this.then.equivalentTo(that.then, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LiteralSelector) {\n      return this.item.equals(that.item) && this.then.equals(that.then);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(LiteralSelector),\n        this.item.hashCode()), this.then.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Selector\").write(46/*'.'*/).write(\"literal\").write(40/*'('*/)\n        .debug(this.item).write(41/*')'*/);\n    this.then.debugThen(output);\n  }\n\n  debugThen(output: Output): void {\n    // nop\n  }\n\n  clone(): Selector {\n    return new LiteralSelector(this.item.clone(), this.then.clone());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport type {Value} from \"../Value\";\nimport {Expression} from \"../Expression\";\nimport type {InvokeOperator} from \"../operator/InvokeOperator\";\nimport type {Interpreter} from \"../interpreter/Interpreter\";\n\nexport abstract class Func extends Expression {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  abstract invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item;\n\n  expand(args: Value, interpreter: Interpreter, operator: InvokeOperator): Item | undefined {\n    return void 0;\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Slot} from \"../Slot\";\nimport {Value} from \"../Value\";\nimport {Record} from \"../Record\";\nimport {Text} from \"../Text\";\nimport type {InvokeOperator} from \"../operator/InvokeOperator\";\nimport {Func} from \"./Func\";\nimport {Interpreter} from \"../\"; // forward import\n\nexport class LambdaFunc extends Func {\n  constructor(bindings: Value, template: Value) {\n    super();\n    Object.defineProperty(this, \"bindings\", {\n      value: bindings,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"template\", {\n      value: template,\n      enumerable: true,\n    });\n  }\n\n  declare readonly bindings: Value;\n\n  declare readonly template: Value;\n\n  get precedence(): number {\n    return 1;\n  }\n\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const bindings = this.bindings;\n    const arity = Math.max(1, bindings.length);\n    const params = Record.create(arity);\n    let i = 0;\n    let j = 0;\n    while (i < arity) {\n      const binding = bindings instanceof Record ? bindings.getItem(i) : i === 0 ? bindings : Item.absent();\n      const arg = args instanceof Record ? args.getItem(j).toValue() : j === 0 ? args : Value.absent();\n      if (binding instanceof Text && arg.isDistinct()) {\n        params.push(Slot.of(binding, arg));\n        j += 1;\n      } else if (binding instanceof Slot) {\n        if (arg.isDistinct()) {\n          params.push(binding.updatedValue(arg));\n        } else {\n          params.push(binding);\n        }\n        j += 1;\n      }\n      i += 1;\n    }\n    interpreter.pushScope(params);\n    const result = this.template.evaluate(interpreter);\n    interpreter.popScope();\n    return result;\n  }\n\n  get typeOrder(): number {\n    return 50;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof LambdaFunc) {\n      let order = this.bindings.compareTo(that.bindings);\n      if (order === 0) {\n        order = this.template.compareTo(that.template);\n      }\n      return order;\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LambdaFunc) {\n      return this.bindings.equivalentTo(that.bindings, epsilon)\n          && this.template.equivalentTo(that.template, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LambdaFunc) {\n      return this.bindings.equals(that.bindings) && this.template.equals(that.template);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(LambdaFunc),\n        this.bindings.hashCode()), this.template.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output.debug(this.bindings).write(46/*'.'*/).write(\"lambda\").write(40/*'('*/)\n        .debug(this.template).write(41/*')'*/);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item} from \"../Item\";\nimport {Func} from \"./Func\";\n\nexport abstract class BridgeFunc extends Func {\n  get typeOrder(): number {\n    return 51;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof BridgeFunc) {\n      return Constructors.compare(this.constructor, that.constructor);\n    } else if (that instanceof Item) {\n      return Numbers.compare(this.typeOrder, that.typeOrder);\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown): boolean {\n    return this === that;\n  }\n\n  equals(that: unknown): boolean {\n    return this === that;\n  }\n\n  hashCode(): number {\n    return Constructors.hash(this.constructor);\n  }\n\n  debug(output: Output): void {\n    output = output.write(this.constructor.name);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item} from \"../Item\";\nimport type {Value} from \"../Value\";\nimport {Record} from \"../Record\";\nimport {Num} from \"../Num\";\nimport type {InvokeOperator} from \"../operator/InvokeOperator\";\nimport type {Func} from \"./Func\";\nimport {BridgeFunc} from \"./BridgeFunc\";\nimport {Interpreter} from \"../\"; // forward import\n\nexport const MathModule = {} as {\n  readonly max: Func;\n\n  readonly min: Func;\n\n  readonly abs: Func;\n\n  readonly ceil: Func;\n\n  readonly floor: Func;\n\n  readonly round: Func;\n\n  readonly sqrt: Func;\n\n  readonly pow: Func;\n\n  readonly rate: Func;\n\n  readonly random: Func;\n\n  readonly scope: Record;\n};\n\nObject.defineProperty(MathModule, \"max\", {\n  get(): Func {\n    const func = new MaxFunc();\n    Object.defineProperty(MathModule, \"max\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"min\", {\n  get(): Func {\n    const func = new MinFunc();\n    Object.defineProperty(MathModule, \"min\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"abs\", {\n  get(): Func {\n    const func = new AbsFunc();\n    Object.defineProperty(MathModule, \"abs\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"ceil\", {\n  get(): Func {\n    const func = new CeilFunc();\n    Object.defineProperty(MathModule, \"ceil\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"floor\", {\n  get(): Func {\n    const func = new FloorFunc();\n    Object.defineProperty(MathModule, \"floor\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"round\", {\n  get(): Func {\n    const func = new RoundFunc();\n    Object.defineProperty(MathModule, \"round\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"sqrt\", {\n  get(): Func {\n    const func = new SqrtFunc();\n    Object.defineProperty(MathModule, \"sqrt\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"pow\", {\n  get(): Func {\n    const func = new PowFunc();\n    Object.defineProperty(MathModule, \"pow\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"rate\", {\n  get(): Func {\n    const func = new RateFunc();\n    Object.defineProperty(MathModule, \"rate\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"random\", {\n  get(): Func {\n    const func = new RandomFunc();\n    Object.defineProperty(MathModule, \"random\", {\n      value: func,\n      configurable: true,\n      enumerable: true,\n    });\n    return func;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\nObject.defineProperty(MathModule, \"scope\", {\n  get(): Record {\n    const scope = Record.create(10)\n        .slot(\"max\", MathModule.max)\n        .slot(\"min\", MathModule.min)\n        .slot(\"abs\", MathModule.abs)\n        .slot(\"ceil\", MathModule.ceil)\n        .slot(\"floor\", MathModule.floor)\n        .slot(\"round\", MathModule.round)\n        .slot(\"pow\", MathModule.pow)\n        .slot(\"sqrt\", MathModule.sqrt)\n        .slot(\"rate\", MathModule.rate)\n        .slot(\"random\", MathModule.random)\n        .commit();\n    Object.defineProperty(MathModule, \"scope\", {\n      value: scope,\n      configurable: true,\n      enumerable: true,\n    });\n    return scope;\n  },\n  configurable: true,\n  enumerable: true,\n});\n\n/** @hidden */\nclass MaxFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let x: Item;\n    let y: Item | undefined;\n    if (args.length >= 2) {\n      x = args.getItem(0).evaluate(interpreter);\n      y = args.getItem(1).evaluate(interpreter);\n    } else {\n      x = args.evaluate(interpreter);\n    }\n    if (y !== void 0) {\n      return x.max(y);\n    } else if (operator !== void 0) {\n      y = operator.state as Item;\n      const max = y !== void 0 ? x.max(y) : x;\n      operator.setState(max);\n      return max;\n    }\n    return Item.absent();\n  }\n\n  expand(args: Value, interpreter: Interpreter, operator: InvokeOperator): Item | undefined {\n    if (args.length === 1) {\n      args = args.evaluate(interpreter).toValue();\n      return this.invoke(args, interpreter, operator);\n    }\n    return void 0;\n  }\n}\n\n/** @hidden */\nclass MinFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let x: Item;\n    let y: Item | undefined;\n    if (args.length >= 2) {\n      x = args.getItem(0).evaluate(interpreter);\n      y = args.getItem(1).evaluate(interpreter);\n    } else {\n      x = args.evaluate(interpreter);\n    }\n    if (y !== void 0) {\n      return x.min(y);\n    } else if (operator !== void 0) {\n      y = operator.state as Item;\n      const min = y !== void 0 ? x.min(y) : x;\n      operator.setState(min);\n      return min;\n    }\n    return Item.absent();\n  }\n\n  expand(args: Value, interpreter: Interpreter, operator: InvokeOperator): Item | undefined {\n    if (args.length === 1) {\n      args = args.evaluate(interpreter).toValue();\n      return this.invoke(args, interpreter, operator);\n    }\n    return void 0;\n  }\n}\n\n/** @hidden */\nclass AbsFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    if (args instanceof Num) {\n      return args.abs();\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass CeilFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    if (args instanceof Num) {\n      return args.ceil();\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass FloorFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    if (args instanceof Num) {\n      return args.floor();\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass RoundFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    if (args instanceof Num) {\n      return args.round();\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass SqrtFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    if (args instanceof Num) {\n      return args.sqrt();\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass PowFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    const x = args.getItem(0).evaluate(interpreter);\n    const y = args.getItem(1).evaluate(interpreter);\n    if (x instanceof Num && y instanceof Num) {\n      return x.pow(y);\n    }\n    return Item.absent();\n  }\n}\n\n/** @hidden */\nclass RateFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    interpreter = Interpreter.fromAny(interpreter);\n    let value: number;\n    let period: number;\n    if (args.length >= 2) {\n      value = args.getItem(0).evaluate(interpreter).numberValue(NaN);\n      period = args.getItem(1).evaluate(interpreter).numberValue(1000);\n    } else {\n      value = args.evaluate(interpreter).numberValue(NaN);\n      period = 1000;\n    }\n    if (isFinite(value) && operator !== void 0) {\n      let state = operator.state as {v0: number, t0: number, dv: number, dt: number} | undefined;\n      if (state === void 0) {\n        state = {v0: value, t0: Date.now(), dv: 0, dt: 0};\n        operator.setState(state);\n      } else {\n        const t1 = Date.now();\n        const dt = t1 - state.t0;\n        if (dt > period && t1 > state.t0 || dt > 2 * period) {\n          const dv = value - state.v0;\n          state.v0 = value;\n          state.t0 = t1;\n          state.dv = dv;\n          state.dt = dt;\n        }\n        operator.setState(state);\n        if (state.dt !== 0) {\n          const rate = period * state.dv / state.dt;\n          return Num.from(rate);\n        }\n      }\n    }\n    return Item.absent();\n  }\n\n  expand(args: Value, interpreter: Interpreter, operator: InvokeOperator): Item | undefined {\n    args = args.evaluate(interpreter).toValue();\n    return this.invoke(args, interpreter, operator);\n  }\n}\n\n/** @hidden */\nclass RandomFunc extends BridgeFunc {\n  invoke(args: Value, interpreter?: Interpreter, operator?: InvokeOperator): Item {\n    args = args.evaluate(interpreter).toValue();\n    const lower = args.length >= 1 ? args.getItem(0).numberValue(0.0) : 0.0;\n    const upper = args.length >= 2 ? args.getItem(1).numberValue(lower + 1.0) : lower + 1.0;\n    const value = lower + Math.random() * (upper - lower);\n    return Num.from(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const enum KeyEffect {\n  Update,\n  Remove,\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class FormException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, FormException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {AnyItem, Item} from \"../Item\";\nimport {AnyValue, Value} from \"../Value\";\nimport {TagForm} from \"../\"; // forward import\nimport {UnitForm} from \"../\"; // forward import\nimport {StringForm} from \"../\"; // forward import\nimport {NumberForm} from \"../\"; // forward import\nimport {BooleanForm} from \"../\"; // forward import\nimport {AnyForm} from \"../\"; // forward import\nimport {ItemForm} from \"../\"; // forward import\nimport {ValueForm} from \"../\"; // forward import\n\n/**\n * Transformation between a structurally typed [Item] and a nominally typed\n * JavaScript object.\n */\nexport abstract class Form<T, U = never> {\n  /**\n   * Returns the key of the tag attribute that distinguishes structures of this\n   * `Form`; returns `undefined` if this `Form` has no distinguishing tag\n   * attribute.  Used to accelerate distrcrimination of polymorphic structural\n   * types with nominal type hints.\n   */\n  get tag(): string | undefined {\n    return void 0;\n  }\n\n  /**\n   * Returns a version of this `Form` that requires a head [Attr] with the\n   * given `tag` name.\n   */\n  withTag(tag: string | undefined): Form<T, U> {\n    if (tag !== void 0 && tag !== this.tag) {\n      return new TagForm(this, tag);\n    } else {\n      return this;\n    }\n  }\n\n  /**\n   * Returns a defaultpossibly `undefined`value of type `T`.  Used as the\n   * fallback return value when [Item.coerce coercing] an invalid structural\n   * value.\n   */\n  get unit(): T | undefined {\n    return void 0;\n  }\n\n  /**\n   * Returns a version of this `Form` with the given `unit` value.\n   */\n  withUnit(unit: T | undefined): Form<T, U> {\n    if (unit !== this.unit) {\n      return new UnitForm(this, unit);\n    } else {\n      return this;\n    }\n  }\n\n  /**\n   * Converts a nominally typed JavaScript `object` into its structurally typed\n   * equivalent, optionally based on the provided prototype `item`.\n   */\n  abstract mold(object: T | U, item?: Item): Item;\n\n  /**\n   * Converts a structurally typed `item` into a nominally typed JavaScript\n   * object, optionally based on the provided prototype `object`.\n   */\n  abstract cast(item: Item, object?: T): T | undefined;\n\n  @Lazy\n  static forString(): Form<string> {\n    return new StringForm(\"\");\n  }\n\n  @Lazy\n  static forNumber(): Form<number> {\n    return new NumberForm(0);\n  }\n\n  @Lazy\n  static forBoolean(): Form<boolean> {\n    return new BooleanForm(false);\n  }\n\n  @Lazy\n  static forAny(): Form<AnyItem> {\n    return new AnyForm(void 0);\n  }\n\n  @Lazy\n  static forItem(): Form<Item, AnyItem> {\n    return new ItemForm(Item.absent());\n  }\n\n  @Lazy\n  static forValue(): Form<Value, AnyValue> {\n    return new ValueForm(Value.absent());\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Attr} from \"../Attr\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class TagForm<T, U = never> extends Form<T, U> {\n  constructor(form: Form<T, U>, tag: string) {\n    super();\n    Object.defineProperty(this, \"form\", {\n      value: form,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"tag\", {\n      value: tag,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly form: Form<T, U>;\n\n  // @ts-ignore\n  declare readonly tag: string;\n\n  withTag(tag: string | undefined): Form<T, U> {\n     if (tag !== void 0 && tag !== this.tag) {\n      return new TagForm(this.form, tag);\n    } else if (tag === void 0) {\n      return this.form;\n    } else {\n      return this;\n    }\n  }\n\n  get unit(): T | undefined {\n    return this.form.unit;\n  }\n\n  withUnit(unit: T | undefined): Form<T, U> {\n    if (unit !== this.unit) {\n      return new TagForm(this.form.withUnit(unit), this.tag);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: T | U, item?: Item): Item {\n    item = this.form.mold(object, item);\n    if (!item.header(this.tag).isDefined()) {\n      item = item.prepended(Attr.of(this.tag));\n    }\n    return item;\n  }\n\n  cast(item: Item, object?: T): T | undefined {\n    if (item.header(this.tag).isDefined()) {\n      return this.form.cast(item, object);\n    } else if (item.keyEquals(this.tag)) {\n      return this.form.cast(item.toValue(), object);\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class UnitForm<T, U = never> extends Form<T, U> {\n  constructor(form: Form<T, U>, unit: T | undefined) {\n    super();\n    Object.defineProperty(this, \"form\", {\n      value: form,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly form: Form<T, U>;\n\n  get tag(): string | undefined {\n    return this.form.tag;\n  }\n\n  withTag(tag: string | undefined): Form<T, U> {\n    if (tag !== this.tag) {\n      return new UnitForm(this.form.withTag(tag), this.unit);\n    } else {\n      return this;\n    }\n  }\n\n  // @ts-ignore\n  declare readonly unit: T | undefined;\n\n  withUnit(unit: T | undefined): Form<T, U> {\n    if (unit !== this.unit) {\n      return new UnitForm(this.form, unit);\n    } else if (unit === this.form.unit) {\n      return this.form;\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: T | U, item?: Item): Item {\n    if (arguments.length === 1) {\n      return this.form.mold(object);\n    } else {\n      return this.form.mold(object, item);\n    }\n  }\n\n  cast(item: Item, object?: T): T | undefined {\n    if (arguments.length === 1) {\n      return this.form.cast(item);\n    } else {\n      return this.form.cast(item, object);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Text} from \"../Text\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class StringForm extends Form<string> {\n  constructor(unit?: string) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: string | undefined;\n\n  withUnit(unit: string | undefined): Form<string> {\n    if (unit !== this.unit) {\n      return new StringForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: string, item?: Item): Item {\n    if (item === void 0) {\n      return Text.from(object);\n    } else {\n      return item.concat(Text.from(object));\n    }\n  }\n\n  cast(item: Item, object?: string): string | undefined {\n    const value = item.target;\n    try {\n      return value.stringValue();\n    } catch (error) {\n      return void 0;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Num} from \"../Num\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class NumberForm extends Form<number> {\n  constructor(unit?: number) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: number | undefined;\n\n  withUnit(unit: number | undefined): Form<number> {\n    if (unit !== this.unit) {\n      return new NumberForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: number, item?: Item): Item {\n    if (item === void 0) {\n      return Num.from(object);\n    } else {\n      return item.concat(Num.from(object));\n    }\n  }\n\n  cast(item: Item, object?: number): number | undefined {\n    const value = item.target;\n    try {\n      return value.numberValue();\n    } catch (error) {\n      return void 0;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {Bool} from \"../Bool\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class BooleanForm extends Form<boolean> {\n  constructor(unit?: boolean) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: boolean | undefined;\n\n  withUnit(unit: boolean | undefined): Form<boolean> {\n    if (unit !== this.unit) {\n      return new BooleanForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: boolean, item?: Item): Item {\n    if (item === void 0) {\n      return Bool.from(object);\n    } else {\n      return item.concat(Bool.from(object));\n    }\n  }\n\n  cast(item: Item, object?: boolean): boolean | undefined {\n    const value = item.target;\n    try {\n      return value.booleanValue();\n    } catch (error) {\n      return void 0;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item} from \"../Item\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class AnyForm extends Form<AnyItem> {\n  constructor(unit?: AnyItem) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: AnyItem | undefined;\n\n  withUnit(unit: AnyItem | undefined): Form<AnyItem> {\n    if (unit !== this.unit) {\n      return new AnyForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: AnyItem, item?: Item): Item {\n    object = Item.fromAny(object);\n    if (item !== void 0) {\n      object = item.concat(object);\n    }\n    return object;\n  }\n\n  cast(item: Item, object?: AnyItem): AnyItem | undefined {\n    return item.toAny();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item} from \"../Item\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class ItemForm extends Form<Item, AnyItem> {\n  constructor(unit?: Item) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit !== void 0 ? unit.commit() : void 0,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: Item | undefined;\n\n  withUnit(unit: Item | undefined): Form<Item> {\n    if (unit !== this.unit) {\n      return new ItemForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: AnyItem, item?: Item): Item {\n    object = Item.fromAny(object);\n    if (item !== void 0) {\n      object = item.concat(object);\n    }\n    return object;\n  }\n\n  cast(item: Item, object?: Item): Item | undefined {\n    return item;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"../Item\";\nimport {AnyValue, Value} from \"../Value\";\nimport {Form} from \"./Form\";\n\n/** @hidden */\nexport class ValueForm extends Form<Value, AnyValue> {\n  constructor(unit?: Value) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit !== void 0 ? unit.commit() : void 0,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: Value | undefined;\n\n  withUnit(unit: Value | undefined): Form<Value> {\n    if (unit !== this.unit) {\n      return new ValueForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: AnyValue, item?: Item): Item {\n    object = Value.fromAny(object);\n    if (item !== void 0) {\n      object = item.concat(object);\n    }\n    return object;\n  }\n\n  cast(item: Item, object?: Value): Value | undefined {\n    return item.toValue();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport type {Value} from \"../Value\";\nimport type {Form} from \"../form/Form\";\n\n/** @hidden */\nexport class ValueCursor<V> extends Cursor<V> {\n  /** @hidden */\n  declare readonly cursor: Cursor<Value>;\n  /** @hidden */\n  declare readonly form: Form<V, unknown>;\n\n  constructor(cursor: Cursor<Value>, form: Form<V, unknown>) {\n    super();\n    Object.defineProperty(this, \"cursor\", {\n      value: cursor,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"form\", {\n      value: form,\n      enumerable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.cursor.isEmpty();\n  }\n\n  head(): V {\n    const value = this.cursor.head();\n    return value.coerce(this.form);\n  }\n\n  step(): void {\n    this.cursor.step();\n  }\n\n  skip(count: number): void {\n    this.cursor.skip(count);\n  }\n\n  hasNext(): boolean {\n    return this.cursor.hasNext();\n  }\n\n  nextIndex(): number {\n    return this.cursor.nextIndex();\n  }\n\n  next(): {value?: V, done: boolean} {\n    const {value, done} = this.cursor.next();\n    if (value !== void 0) {\n      return {value: value.coerce(this.form), done};\n    } else {\n      return {done};\n    }\n  }\n\n  hasPrevious(): boolean {\n    return this.cursor.hasPrevious();\n  }\n\n  previousIndex(): number {\n    return this.cursor.previousIndex();\n  }\n\n  previous(): {value?: V, done: boolean} {\n    const {value, done} = this.cursor.previous();\n    if (value !== void 0) {\n      return {value: value.coerce(this.form), done};\n    } else {\n      return {done};\n    }\n  }\n\n  delete(): void {\n    this.cursor.delete();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport type {Value} from \"../Value\";\nimport type {Form} from \"../form/Form\";\n\n/** @hidden */\nexport class ValueEntryCursor<K, V> extends Cursor<[K, V]> {\n  /** @hidden */\n  declare readonly cursor: Cursor<[Value, Value]>;\n  /** @hidden */\n  declare readonly keyForm: Form<K, unknown>;\n  /** @hidden */\n  declare readonly valueForm: Form<V, unknown>;\n\n  constructor(cursor: Cursor<[Value, Value]>, keyForm: Form<K, unknown>, valueForm: Form<V, unknown>) {\n    super();\n    Object.defineProperty(this, \"cursor\", {\n      value: cursor,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"keyForm\", {\n      value: keyForm,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"valueForm\", {\n      value: valueForm,\n      enumerable: true,\n    });\n  }\n\n  isEmpty(): boolean {\n    return this.cursor.isEmpty();\n  }\n\n  head(): [K, V] {\n    const pair = this.cursor.head();\n    return [pair[0].coerce(this.keyForm), pair[1].coerce(this.valueForm)];\n  }\n\n  step(): void {\n    this.cursor.step();\n  }\n\n  skip(count: number): void {\n    this.cursor.skip(count);\n  }\n\n  hasNext(): boolean {\n    return this.cursor.hasNext();\n  }\n\n  nextIndex(): number {\n    return this.cursor.nextIndex();\n  }\n\n  next(): {value?: [K, V], done: boolean} {\n    const {value, done} = this.cursor.next();\n    if (value !== void 0) {\n      return {value: [value[0].coerce(this.keyForm), value[1].coerce(this.valueForm)], done};\n    } else {\n      return {done};\n    }\n  }\n\n  hasPrevious(): boolean {\n    return this.cursor.hasPrevious();\n  }\n\n  previousIndex(): number {\n    return this.cursor.previousIndex();\n  }\n\n  previous(): {value?: [K, V], done: boolean} {\n    const {value, done} = this.cursor.previous();\n    if (value !== void 0) {\n      return {value: [value[0].coerce(this.keyForm), value[1].coerce(this.valueForm)], done};\n    } else {\n      return {done};\n    }\n  }\n\n  delete(): void {\n    this.cursor.delete();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"./Outlet\";\n\nexport type InletType = \"value\" | \"map\";\n\nexport interface InletOptions {\n  name?: string;\n  type?: InletType;\n}\n\n/**\n * Input connector into a [[Streamlet]].  An `Inlet` represents a source from\n * which a `Streamlet` acquires state.\n *\n * In order for an `Inlet` to provide state to its `Streamlet`, it must bind to\n * an [[input]] source.  The input source of an `Inlet` is an [[Outlet]] of\n * some other `Streamlet`.  The [[bindInput]] method \"plugs\" the `Inlet` into\n * an `Outlet`.  The [[unbindInput]] method \"unplugs\" the `Inlet` from its\n * connected `Outlet`.\n *\n * The state of an `Inlet` has an integral _version_.  When its version is\n * negative, the state of the `Inlet` is considered _decoherent_.  When any\n * state on which an `Inlet` transitively depends changes, the `Inlet` will be\n * [[decohereOutput decohered]].  Decoherence does not immediately cause an\n * `Inlet` to recompute its state.  Instead, a separate [[recohereOutput\n * recohere]] step causes all of the decoherent paths in the dataflow graph\n * passing through the `Inlet` to make their states coherent again.\n */\nexport interface Inlet<I = unknown> {\n  /**\n   * The `Outlet` from which this `Inlet` acquires its state, or `null` if\n   * this `Inlet` is disconnected.\n   */\n  readonly input: Outlet<I> | null;\n\n  /**\n   * Connects this `Inlet` to an `Outlet` from which it will  acquire its\n   * state.  If this `Inlet` is already connected, it will first disconnect\n   * from its existing input.  Then, after updating its [[input]] property,\n   * the `Inlet` will invoke [[Outlet.bindOutput]] on its new `input`.\n   */\n  bindInput(input: Outlet<I> | null): void;\n\n  /**\n   * Disconnects this `Inlet` from its input `Outlet`, if connected.  After\n   * setting its [[input]] property to `null`, the `Inlet` will invoke\n   * [[Outlet.unbindOutput]] on its old input, if defined.\n   */\n  unbindInput(): void;\n\n  /**\n   * Disconnects all `Inlet`s dominated by this `Inlet` in the dataflow\n   * dependency graph.  Used to recursively clean up chains of combinators\n   * terminating at this `Inlet`.\n   */\n  disconnectInputs(): void;\n\n  /**\n   * Disconnects all `Outlet`s dominated by this `Inlet` in the dataflow graph.\n   * Used to recursively clean up chains of combinators passing through this\n   * `Inlet`.\n   */\n  disconnectOutputs(): void;\n\n  /**\n   * Marks this `Inlet`and the `Streamlet` to which this `Inlet` is attachedas\n   * having decoherent state.  Decohering an `Inlet` will recursively decohere\n   * all streamlets that transitively depend on the state of this `Inlet`.\n   * Decohering an `Inlet` does not cause its state to be recomputed.  A\n   * subsequent [[recohereOutput]] call will eventually make the state of the\n   * `Inlet` coherent again.\n   */\n  decohereOutput(): void;\n\n  /**\n   * Updates the state of this `Inlet` to make it consistent with the target\n   * `version`. The `Inlet` only needs to update if its current `version`\n   * differs from the target `version`.  To update its state, the `Inlet` first\n   * invokes [[Outlet.recohereInput]] on its [[input]], to ensure that its\n   * input is coherent.  It then invokes [[Streamlet.recohere]] on the\n   * `Streamlet` to which it's attached, causing the `Streamlet` to make its\n   * own state coherent again.\n   */\n  recohereOutput(version: number): void;\n}\n\nexport const Inlet = {} as {\n   is<I>(object: unknown): object is Inlet<I>;\n};\n\nInlet.is = function <I>(object: unknown): object is Inlet<I> {\n  if (typeof object === \"object\" && object !== null) {\n    const inlet = object as Inlet<I>;\n    return \"input\" in inlet\n        && typeof inlet.bindInput === \"function\"\n        && typeof inlet.unbindInput === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Iterator} from \"@swim/util\";\nimport type {Inlet} from \"./Inlet\";\nimport type {OutletCombinators} from \"./OutletCombinators\";\nimport type {MapValueFunction, WatchValueFunction} from \"./function\";\n\nexport type OutletType = \"value\" | \"map\";\n\nexport interface OutletOptions {\n  name?: string;\n  type?: OutletType;\n}\n\n/**\n * Output connector from a [[Streamlet]].  An `Outlet` represents a sink to\n * which a `Streamlet` provides state.\n *\n * An `Outlet` has a one-to-many relationship with a set of output sinks.\n * An output sink of an `Outlet` is an `Inlet` of some other `Streamlet`.\n * The [[bindOutput]] method \"plugs\" an `Inlet` into the `Outlet`.\n * The [[unbindOutput]] method \"unplugs\" an `Inlet` from the `Outlet`.\n */\nexport interface Outlet<O = unknown> extends OutletCombinators<O> {\n  /**\n   * Returns the current state of this `Outlet`.\n   */\n  get(): O | undefined;\n\n  /**\n   * Returns an `Iterator` over the set of `Inlet`s that depend on the state of\n   * this `Outlet`.\n   */\n  outputIterator(): Iterator<Inlet<O>>;\n\n  /**\n   * Adds an `output` to the set of `Inlet`s that depend on the state of this\n   * `Outlet`.  The `output` will be decohered when the state of this\n   * `Outlet` is decohered, and recohered when this `Outlet` is recohered.\n   */\n  bindOutput(output: Inlet<O>): void;\n\n  /**\n   * Removes an `output` from the set of `Inlet`s that depend on the state of\n   * this `Outlet`.\n   */\n  unbindOutput(output: Inlet<O>): void;\n\n  /**\n   * Disconnects all outputs from this `Outlet` by invoking\n   * [[Inlet.unbindInput]] on each `Inelt` that depends on the state of this\n   * `Outlet`.\n   */\n  unbindOutputs(): void;\n\n  /**\n   * Disconnects all `Outlet`s dominated by this `Outlet` in the dataflow\n   * graph.  Used to recursively clean up chains of combinators originating\n   * from this `Inlet`.\n   */\n  disconnectOutputs(): void;\n\n  /**\n   * Disconnects all `Inlet`s dominated by this `Outlet` in the dataflow\n   * dependency graph.  Used to recursively clean up chains of combinators\n   * passing through this `Outlet`.\n   */\n  disconnectInputs(): void;\n\n  /**\n   * Marks this `Outlet`and all [[outputIterator outputs]] that depend on the\n   * state of this `Outlet`as having decoherent state.\n   */\n  decohereInput(): void;\n\n  /**\n   * Updates the state of this `Outlet` to make it consistent with the target\n   * `version`.  The `Outlet` only needs to update if its current `version`\n   * differs from the target `version`.  To update its state, the `Outlet`\n   * first invokes [[Streamlet.recohere]] on the `Streamlet` to which\n   * it's attached. It then invokes [[Inlet.recohereOutput]] on each of its\n   * dependent [[outputIterator outputs]].\n   */\n  recohereInput(version: number): void;\n\n  memoize(): Outlet<O>;\n\n  map<O2>(func: MapValueFunction<O, O2>): Outlet<O2>;\n\n  watch(func: WatchValueFunction<O>): this;\n}\n\nexport const Outlet = {} as {\n  is<O>(object: unknown): object is Outlet<O>;\n};\n\nOutlet.is = function <O>(object: unknown): object is Outlet<O> {\n  if (typeof object === \"object\" && object !== null) {\n    const outlet = object as Outlet<O>;\n    return typeof outlet.outputIterator === \"function\"\n        && typeof outlet.bindOutput === \"function\"\n        && typeof outlet.unbindOutput === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"./Outlet\";\nimport type {MapValueFunction, WatchValueFunction} from \"./function\";\nimport {MemoizeValueCombinator} from \"./\"; // forward import\nimport {MapValueCombinator} from \"./\"; // forward import\nimport {WatchValueCombinator} from \"./\"; // forward import\n\nexport interface OutletCombinators<O> {\n  memoize(): Outlet<O>;\n\n  map<O2>(func: MapValueFunction<O, O2>): Outlet<O2>;\n\n  watch(func: WatchValueFunction<O>): this;\n}\n\nexport const OutletCombinators = {} as {\n  define<O>(prototype: OutletCombinators<O>): void;\n\n  /** @hidden */\n  memoize<O>(this: Outlet<O>): Outlet<O>;\n\n  /** @hidden */\n  map<O, O2>(this: Outlet<O>, func: MapValueFunction<O, O2>): Outlet<O2>;\n\n  /** @hidden */\n  watch<O>(this: Outlet<O>, func: WatchValueFunction<O>): Outlet<O>;\n};\n\nOutletCombinators.define = function <O>(prototype: Outlet<O>): void {\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"memoize\")) {\n    prototype.memoize = OutletCombinators.memoize;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"map\")) {\n    prototype.map = OutletCombinators.map;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"watch\")) {\n    prototype.watch = OutletCombinators.watch;\n  }\n};\n\nOutletCombinators.memoize = function <O>(this: Outlet<O>): Outlet<O> {\n  const combinator = new MemoizeValueCombinator<O>();\n  combinator.bindInput(this);\n  return combinator;\n};\n\nOutletCombinators.map = function <O, O2>(this: Outlet<O>, func: MapValueFunction<O, O2>): Outlet<O2> {\n  const combinator = new MapValueCombinator<O, O2>(func);\n  combinator.bindInput(this);\n  return combinator;\n};\n\nOutletCombinators.watch = function <O>(this: Outlet<O>, func: WatchValueFunction<O>): Outlet<O> {\n  const combinator = new WatchValueCombinator<O>(func);\n  combinator.bindInput(this);\n  return this;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Inlet} from \"./Inlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\n\n/**\n * Input connector into a `Streamlet` for a key-value map state.\n */\nexport interface MapInlet<K, V, I> extends Inlet<I> {\n  /**\n   * Marks this `MapInlet` as needing an `effect` applied to a given `key`.\n   * Decohering an individual key decoheres the entire state of the `Inlet`.\n   * But only the decoherent keys need to be updated in order to recohere the\n   * overall state of the `Inlet`.\n   */\n  decohereOutputKey(key: K, effect: KeyEffect): void;\n\n  /**\n   * Updates the state of an individual `key` in this `MapInlet` to make it\n   * consistent with the target `version`.  The `MapInlet` only needs to update\n   * if the current `version` differs from the target `version`.  To update the\n   * state of a key, the `MapInlet` first invokes [[MapOutlet.recohereInputKey]]\n   * on its [[input]], if its input is a `MapOutlet`, or it invokes\n   * [[Outlet.recohereInput]], if its input is not a `MapOutlet`.  Then,\n   * if all decoherent keys have been recohered, the `MapInlet` invokes\n   * [[Streamlet.recohere]] on its attached streamlet.\n   */\n  recohereOutputKey(key: K, version: number): void;\n}\n\nexport const MapInlet = {} as {\n  is<K, V, I>(object: unknown): object is MapInlet<K, V, I>;\n};\n\nMapInlet.is = function <K, V, I>(object: unknown): object is MapInlet<K, V, I> {\n  if (typeof object === \"object\" && object !== null) {\n    const inlet = object as MapInlet<K, V, I>;\n    return Inlet.is(inlet)\n        && typeof inlet.decohereOutputKey === \"function\"\n        && typeof inlet.recohereOutputKey === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Iterator, Map} from \"@swim/util\";\nimport {Outlet} from \"./Outlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport type {MapOutletCombinators} from \"./MapOutletCombinators\";\nimport type {FilterFieldsFunction} from \"./function\";\nimport type {MapValueFunction, MapFieldValuesFunction} from \"./function\";\nimport type {WatchValueFunction, WatchFieldsFunction} from \"./function\";\n\n/**\n * Output connector from a [[Streamlet]] for a key-value map state.\n */\nexport interface MapOutlet<K, V, O> extends Outlet<O>, MapOutletCombinators<K, V, O> {\n  /**\n   * Returns `true` if the current state of this `MapOutlet` contains the given\n   * `key`; otherwise returns `false`.\n   */\n  has(key: K): boolean;\n\n  /**\n   * Returns the current state of this `Outlet`.\n   */\n  get(): O | undefined;\n\n  /**\n   * Returns the value assocaited with the given `key` in the current state of\n   * this `MapOutlet`, if defined; otherwise returns `undefined`.\n   */\n  get(key: K): V | undefined;\n\n  /**\n   * Returns an `Iterator` over the keys in the current state of this `MapOutlet`.\n   */\n  keyIterator(): Iterator<K>;\n\n  /**\n   * Returns an `Outlet` that updates when the specified `key` updates.\n   */\n  outlet(key: K): Outlet<V>;\n\n  /**\n   * Marks this `MapOutlet` as needing an `effect` applied to a given `key`.\n   * Decohering an individual key decoheres the entire state of the `Outlet`.\n   * But only the decoherent keys need to be updated in order to recohere the\n   * overall state of the `Outlet`.\n   */\n  decohereInputKey(key: K, effect: KeyEffect): void;\n\n  /**\n   * Updates the state of an individual `key` in this `MapOutlet` to make it\n   * consistent with the target `version`.  The `MapOutlet` only needs to\n   * update if its current `version` differs from the target `version`.\n   * To update the state of a key, the `MapOutlet` first invokes\n   * [[Streamlet.recohere]] on its attached streamlets.  Then, for each\n   * dependent output, it invokes [[MapInlet.recohereOutputKey]], if the\n   * dependent output is a [[MapInlet]], or it invokes [[Inlet.recohere]],\n   * if the dependent output is not a `MapInlet`.\n   */\n  recohereInputKey(key: K, version: number): void;\n\n  memoize(): MapOutlet<K, V, O>;\n\n  filter(func: FilterFieldsFunction<K, V>): MapOutlet<K, V, Map<K, V>>;\n\n  map<O2>(func: MapValueFunction<O, O2>): Outlet<O2>;\n  map<V2>(func: MapFieldValuesFunction<K, V, V2>): MapOutlet<K, V2, Map<K, V2>>;\n\n  reduce<U>(identity: U, accumulator: (result: U, element: V) => U, combiner: (result: U, result2: U) => U): Outlet<U>;\n\n  watch(func: WatchValueFunction<O>): this;\n  watch(func: WatchFieldsFunction<K, V>): this;\n}\n\nexport const MapOutlet = {} as {\n  is<K, V, I>(object: unknown): object is MapOutlet<K, V, I>;\n};\n\nMapOutlet.is = function <K, V, I>(object: unknown): object is MapOutlet<K, V, I> {\n  if (typeof object === \"object\" && object !== null) {\n    const outlet = object as MapOutlet<K, V, I>;\n    return Outlet.is(outlet)\n        && typeof outlet.keyIterator === \"function\"\n        && typeof outlet.outlet === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Map} from \"@swim/util\";\nimport type {Outlet} from \"./Outlet\";\nimport type {OutletCombinators} from \"./OutletCombinators\";\nimport type {MapOutlet} from \"./MapOutlet\";\nimport type {FilterFieldsFunction} from \"./function\";\nimport type {MapValueFunction, MapFieldValuesFunction} from \"./function\";\nimport type {WatchValueFunction, WatchFieldsFunction} from \"./function\";\nimport {MemoizeMapCombinator} from \"./\"; // forward import\nimport {FilterFieldsCombinator} from \"./\"; // forward import\nimport {MapValueCombinator} from \"./\"; // forward import\nimport {MapFieldValuesCombinator} from \"./\"; // forward import\nimport {ReduceFieldsCombinator} from \"./\"; // forward import\nimport {WatchValueCombinator} from \"./\"; // forward import\nimport {WatchFieldsCombinator} from \"./\"; // forward import\n\nexport interface MapOutletCombinators<K, V, O> extends OutletCombinators<O> {\n  memoize(): MapOutlet<K, V, O>;\n\n  filter(func: FilterFieldsFunction<K, V>): MapOutlet<K, V, Map<K, V>>;\n\n  map<O2>(func: MapValueFunction<O, O2>): Outlet<O2>;\n  map<V2>(func: MapFieldValuesFunction<K, V, V2>): MapOutlet<K, V2, Map<K, V2>>;\n\n  reduce<U>(identity: U, accumulator: (result: U, element: V) => U, combiner: (result: U, result2: U) => U): Outlet<U>;\n\n  watch(func: WatchValueFunction<O>): this;\n  watch(func: WatchFieldsFunction<K, V>): this;\n}\n\nexport const MapOutletCombinators = {} as {\n  define<K, V, O>(prototype: MapOutletCombinators<K, V, O>): void;\n\n  /** @hidden */\n  memoize<K, V, O>(this: MapOutlet<K, V, O>): MapOutlet<K, V, O>;\n\n  /** @hidden */\n  filter<K, V, O>(this: MapOutlet<K, V, O>, func: FilterFieldsFunction<K, V>): MapOutlet<K, V, Map<K, V>>;\n\n  /** @hidden */\n  map<K, V, O, O2>(this: MapOutlet<K, V, O>, func: MapValueFunction<O, O2>): Outlet<O2>;\n  /** @hidden */\n  map<K, V, O, V2>(this: MapOutlet<K, V, O>, func: MapFieldValuesFunction<K, V, V2>): MapOutlet<K, V2, Map<K, V2>>;\n\n  /** @hidden */\n  reduce<K, V, O, U>(this: MapOutlet<K, V, O>, identity: U, accumulator: (result: U, element: V) => U, combiner: (result: U, result2: U) => U): Outlet<U>;\n\n  /** @hidden */\n  watch<K, V, O>(this: MapOutlet<K, V, O>, func: WatchValueFunction<O>): MapOutlet<K, V, O>;\n  /** @hidden */\n  watch<K, V, O>(this: MapOutlet<K, V, O>, func: WatchFieldsFunction<K, V>): MapOutlet<K, V, O>;\n};\n\nMapOutletCombinators.define = function <K, V, O>(prototype: MapOutlet<K, V, O>): void {\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"memoize\")) {\n    prototype.memoize = MapOutletCombinators.memoize;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"filterr\")) {\n    prototype.filter = MapOutletCombinators.filter;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"map\")) {\n    prototype.map = MapOutletCombinators.map;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"reduce\")) {\n    prototype.reduce = MapOutletCombinators.reduce;\n  }\n  if (!Object.prototype.hasOwnProperty.call(prototype, \"watch\")) {\n    prototype.watch = MapOutletCombinators.watch;\n  }\n};\n\nMapOutletCombinators.memoize = function <K, V, O>(this: MapOutlet<K, V, O>): MapOutlet<K, V, O> {\n  const combinator = new MemoizeMapCombinator<K, V, O>();\n  combinator.bindInput(this);\n  return combinator;\n};\n\nMapOutletCombinators.filter = function <K, V, O>(this: MapOutlet<K, V, O>, func: FilterFieldsFunction<K, V>): MapOutlet<K, V, Map<K, V>> {\n  const combinator = new FilterFieldsCombinator<K, V, O>(func);\n  combinator.bindInput(this);\n  return combinator;\n};\n\nMapOutletCombinators.map = function <K, V, O, V2>(this: MapOutlet<K, V, O>, func: MapValueFunction<O, V2> | MapFieldValuesFunction<K, V, V2>): Outlet<V2> | MapOutlet<K, V2, Map<K, V2>> {\n  if (func.length === 1) {\n    const combinator = new MapValueCombinator<O, V2>(func as MapValueFunction<O, V2>);\n    combinator.bindInput(this);\n    return combinator;\n  } else {\n    const combinator = new MapFieldValuesCombinator<K, V, V2, O>(func as MapFieldValuesFunction<K, V, V2>);\n    combinator.bindInput(this);\n    return combinator;\n  }\n} as typeof MapOutletCombinators.map;\n\nMapOutletCombinators.reduce = function <K, V, O, U>(this: MapOutlet<K, V, O>, identity: U, accumulator: (result: U, element: V) => U, combiner: (result: U, result2: U) => U): Outlet<U> {\n  const combinator = new ReduceFieldsCombinator<K, V, O, U>(identity, accumulator, combiner);\n  combinator.bindInput(this);\n  return combinator;\n};\n\nMapOutletCombinators.watch = function <K, V, O>(this: MapOutlet<K, V, O>, func: WatchValueFunction<O> | WatchFieldsFunction<K, V>): MapOutlet<K, V, O> {\n  if (func.length === 1) {\n    const combinator = new WatchValueCombinator<O>(func as WatchValueFunction<O>);\n    combinator.bindInput(this);\n    return this;\n  } else {\n    const combinator = new WatchFieldsCombinator<K, V, O>(func as WatchFieldsFunction<K, V>);\n    combinator.bindInput(this);\n    return this;\n  }\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class StreamletException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, StreamletException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"./Outlet\";\nimport type {StreamletContext} from \"./StreamletContext\";\n\nexport interface StreamletScope<O> {\n  /**\n   * The lexically scoped parent of this `StreamletScope`, or `null` if this\n   * `StreamletScope` has no lexical parent.\n   */\n  readonly streamletScope: StreamletScope<O> | null;\n\n  /**\n   * The environment in which this `StreamletScope` operates.\n   */\n  readonly streamletContext: StreamletContext | null;\n\n  /**\n   * Returns an `Outlet` that updates when the specified `key` updates.\n   */\n  outlet(key: string): Outlet<O> | null;\n}\n\nexport const StreamletScope = {} as {\n  is<O>(object: unknown): object is StreamletScope<O>;\n};\n\nStreamletScope.is = function <O>(object: unknown): object is StreamletScope<O> {\n  if (typeof object === \"object\" && object !== null) {\n    const scope = object as StreamletScope<O>;\n    return \"streamletScope\" in scope\n        && \"streamletContext\" in scope\n        && typeof scope.outlet === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport type {StreamletContext} from \"./StreamletContext\";\nimport type {StreamletScope} from \"./StreamletScope\";\n\n/**\n * Stateful node in a dataflow graph that uses the state of its [[Inlet\n * inlets]] to compute the state of its [[Outlet Outlets]].\n */\nexport interface Streamlet<I = unknown, O = I> extends StreamletScope<O> {\n  /**\n   * The lexically scoped parent of this `Streamlet`, or `null` if this\n   * `Streamlet` has no lexical parent.\n   */\n  readonly streamletScope: StreamletScope<O> | null;\n\n  /**\n   * Sets the lexically scoped parent of this `Streamlet`.\n   */\n  setStreamletScope(scope: StreamletScope<O> | null): void;\n\n  /**\n   * The environment in which this `Streamlet` operates.\n   */\n  readonly streamletContext: StreamletContext | null;\n\n  /**\n   * Sets the environment in which this `Streamlet` operates.\n   */\n  setStreamletContext(context: StreamletContext | null): void;\n\n  /**\n   * Returns the `Inlet` to this `Streamlet` identified by the given `key`;\n   * returns `null` if this `Streamlet` has no such `Inlet`.\n   */\n  inlet(key: string): Inlet<I> | null;\n\n  /**\n   * Connects the `Inlet` of this `Streamlet`, identified by the given `key` to\n   * the `input` from which the `Inlet` should acquire its state.  Delegates to\n   * [[Inlet.bindInput]] on the identified `Inlet`.\n   *\n   * @throws `Error` if this `Streamlet` has no `Inlet` with the given `key`.\n   */\n  bindInput(key: string, input: Outlet<I>): void;\n\n  /**\n   * Disconnects the `Inlet` of this `Streamlet`, identified by the given\n   * `key`, from its [[Inlet.input input]] `Outlet`, if connected.  Delegates\n   * to [[Inlet.unbindInput]] on the identified `Inlet`.\n   *\n   * @throws `Error` if this `Streamlet` has no `Inlet` with the given `key`.\n   */\n  unbindInput(key: string): void;\n\n  /**\n   * Returns the `Outlet` of this `Streamlet` identified by the given `key`;\n   * returns `null` if this `Streamlet` has no such `Outlet`.\n   */\n  outlet(key: string): Outlet<O> | null;\n\n  /**\n   * Disconnects all `Inlet`s dominated by this `Streamlet` in the dataflow\n   * dependency graph.  Used to recursively clean up chains of combinators\n   * terminating at this `Streamlet`.\n   */\n  disconnectInputs(): void;\n\n  /**\n   * Disconnects all `Inlets`s dominated by this `Streamlet` in the dataflow\n   * graph.  Used to recursively clean up chains of combinators originating\n   * from this `Streamlet`.\n   */\n  disconnectOutputs(): void;\n\n  /**\n   * Marks this `Streamlet`and all of its outletsas having decoherent state.\n   * Decohering a `Streamlet` will recursively decohere all streamlets that\n   * transitively depend on the state of this `Streamlet`.  Decohering a\n   * `Streamlet` does not cause its state to be recomputed.  A subsequent\n   * [[recohere]] call will eventually make the state of the `Streamlet`\n   * coherent again.\n   */\n  decohere(): void;\n\n  /**\n   * Updates the state of this `Streamlet` to make it consistent with the\n   * target `version`.  The `Streamlet` only needs to update if its current\n   * `version` differs from the target `version`.  To update its state, the\n   * `Streamlet` first invokes [[Inlet.recohereOutput]] on each of its inlets,\n   * to ensure that its input states are coherent.  It then recomputes its own\n   * state in an implementation defined manner.  Finally, it invokes\n   * [[Outlet.recohereInput]] on its outlets, causing all transitively\n   * dependent streamlets to make their own states coherent again.\n   */\n  recohere(version: number): void;\n}\n\nexport const Streamlet = {} as {\n  is<I, O>(object: unknown): object is Streamlet<I, O>;\n};\n\nStreamlet.is = function <I, O>(object: unknown): object is Streamlet<I, O> {\n  if (typeof object === \"object\" && object !== null) {\n    const streamlet = object as Streamlet<I, O>;\n    return \"streamletScope\" in streamlet\n        && typeof streamlet.setStreamletScope === \"function\"\n        && \"streamletContext\" in streamlet\n        && typeof streamlet.setStreamletContext === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\n\nexport abstract class AbstractInlet<I> implements Inlet<I> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: Outlet<I> | null;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: Outlet<I> | null): void {\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  disconnectOutputs(): void {\n    // nop\n  }\n\n  decohereOutput(): void {\n    if (this.version >= 0) {\n      this.willDecohereOutput();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereOutput();\n      this.didDecohereOutput();\n    }\n  }\n\n  recohereOutput(version: number): void {\n    if (this.version < 0) {\n      this.willRecohereOutput(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      if (this.input !== null) {\n        this.input.recohereInput(version);\n      }\n      this.onRecohereOutput(version);\n      this.didRecohereOutput(version);\n    }\n  }\n\n  protected willDecohereOutput(): void {\n    // hook\n  }\n\n  protected onDecohereOutput(): void {\n    // hook\n  }\n\n  protected didDecohereOutput(): void {\n    // hook\n  }\n\n  protected willRecohereOutput(version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutput(version: number): void {\n    // hook\n  }\n\n  protected didRecohereOutput(version: number): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Cursor} from \"@swim/util\";\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport {OutletCombinators} from \"./OutletCombinators\";\n\nexport abstract class AbstractOutlet<O> implements Outlet<O> {\n  constructor() {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  abstract get(): O | undefined;\n\n  outputIterator(): Cursor<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  disconnectInputs(): void {\n    // nop\n  }\n\n  decohereInput(): void {\n    if (this.version >= 0) {\n      this.willDecohereInput();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInput();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.decohereOutput();\n      }\n      this.didDecohereInput();\n    }\n  }\n\n  recohereInput(version: number): void {\n    if (this.version < 0) {\n      this.willRecohereInput(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereInput(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.recohereOutput(version);\n      }\n      this.didRecohereInput(version);\n    }\n  }\n\n  protected willDecohereInput(): void {\n    // hook\n  }\n\n  protected onDecohereInput(): void {\n    // hook\n  }\n\n  protected didDecohereInput(): void {\n    // hook\n  }\n\n  protected willRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected onRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected didRecohereInput(version: number): void {\n    // hook\n  }\n}\nexport interface AbstractOutlet<O> extends OutletCombinators<O> {\n}\nOutletCombinators.define(AbstractOutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Iterator, Cursor} from \"@swim/util\";\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport {OutletCombinators} from \"./OutletCombinators\";\nimport type {Inoutlet} from \"./Inoutlet\";\n\nexport abstract class AbstractInoutlet<I, O> implements Inoutlet<I, O> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: Outlet<I> | null;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: Outlet<I> | null): void {\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  abstract get(): O | undefined;\n\n  outputIterator(): Iterator<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.decohereOutput();\n      }\n      this.didDecohere();\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      if (this.input !== null) {\n        this.input.recohereInput(version);\n      }\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohere(): void {\n    // stub\n  }\n\n  protected onDecohere(): void {\n    // stub\n  }\n\n  protected didDecohere(): void {\n    // stub\n  }\n\n  protected willRecohere(version: number): void {\n    // stub\n  }\n\n  protected onRecohere(version: number): void {\n    // stub\n  }\n\n  protected didRecohere(version: number): void {\n    // stub\n  }\n}\nexport interface AbstractInoutlet<I, O> extends OutletCombinators<O> {\n}\nOutletCombinators.define(AbstractInoutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {MapOutlet} from \"./MapOutlet\";\nimport {AbstractOutlet} from \"./AbstractOutlet\";\n\nexport class KeyOutlet<K, V> extends AbstractOutlet<V> {\n  constructor(input: MapOutlet<K, V, unknown>, key: K) {\n    super();\n    Object.defineProperty(this, \"input\", {\n      value: input,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"key\", {\n      value: key,\n      enumerable: true,\n    });\n  }\n\n  declare readonly input: MapOutlet<K, V, unknown>;\n\n  declare readonly key: K;\n\n  get(): V | undefined {\n    return this.input.get(this.key);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BTree} from \"@swim/collections\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport type {MapInlet} from \"./MapInlet\";\nimport {MapOutlet} from \"./MapOutlet\";\n\nexport abstract class AbstractMapInlet<K, V, O> implements MapInlet<K, V, O> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: MapOutlet<K, V, O> | null;\n\n  /** @hidden */\n  declare readonly effects: BTree<K, KeyEffect>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: MapOutlet<K, V, O> | null): void {\n    if (!MapOutlet.is(newInput)) {\n      throw new TypeError(\"\" + newInput);\n    }\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  disconnectOutputs(): void {\n    // nop\n  }\n\n  decohereOutputKey(key: K, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereOutputKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereOutputKey(key, effect);\n      this.didDecohereOutputKey(key, effect);\n    }\n  }\n\n  decohereOutput(): void {\n    if (this.version >= 0) {\n      this.willDecohereOutput();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereOutput();\n      this.didDecohereOutput();\n    }\n  }\n\n  recohereOutputKey(key: K, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereOutputKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        if (this.input !== null) {\n          this.input.recohereInputKey(key, version);\n        }\n        this.onRecohereOutputKey(key, effect, version);\n        this.didRecohereOutputKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereOutput(version: number): void {\n    if (this.version < 0) {\n      this.willRecohereOutput(version);\n      this.effects.forEach(function (key: K): void {\n        this.recohereOutputKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereOutput(version);\n      this.didRecohereOutput(version);\n    }\n  }\n\n  protected willDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohereOutput(): void {\n    // hook\n  }\n\n  protected onDecohereOutput(): void {\n    // hook\n  }\n\n  protected didDecohereOutput(): void {\n    // hook\n  }\n\n  protected willRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohereOutput(version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutput(version: number): void {\n    // hook\n  }\n\n  protected didRecohereOutput(version: number): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Iterator, Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport {MapInlet} from \"./MapInlet\";\nimport type {MapOutlet} from \"./MapOutlet\";\nimport {MapOutletCombinators} from \"./MapOutletCombinators\";\nimport {KeyOutlet} from \"./KeyOutlet\";\n\nexport abstract class AbstractMapOutlet<K, V, O> implements MapOutlet<K, V, O> {\n  constructor() {\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outlets\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly effects: BTree<K, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outlets: BTree<K, KeyOutlet<K, V>>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  abstract has(key: K): boolean;\n\n  abstract get(): O | undefined;\n\n  abstract get(key: K): V | undefined;\n\n  abstract keyIterator(): Iterator<K>;\n\n  outlet(key: K): Outlet<V> {\n    const oldOutlets = this.outlets;\n    let outlet = oldOutlets.get(key);\n    if (outlet === void 0) {\n      outlet = new KeyOutlet(this, key);\n      Object.defineProperty(this, \"outlets\", {\n        value: oldOutlets.updated(key, outlet),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return outlet;\n  }\n\n  outputIterator(): Iterator<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, V>) {\n        keyOutlet.unbindOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, V>) {\n        keyOutlet.disconnectOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  disconnectInputs(): void {\n    // nop\n  }\n\n  decohereInputKey(key: K, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereInputKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInputKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        if (MapInlet.is(output)) {\n          output.decohereOutputKey(key, effect);\n        } else {\n          output.decohereOutput();\n        }\n      }\n      const outlet = this.outlets.get(key);\n      if (outlet !== void 0) {\n        outlet.decohereInput();\n      }\n      this.didDecohereInputKey(key, effect);\n    }\n  }\n\n  decohereInput(): void {\n    if (this.version >= 0) {\n      this.willDecohereInput();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInput();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.outlets.forEach(function (key: K, outlet: KeyOutlet<K, V>): void {\n        outlet.decohereInput();\n      }, this);\n      this.didDecohereInput();\n    }\n  }\n\n  recohereInputKey(key: K, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereInputKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        this.onRecohereInputKey(key, effect, version);\n        const outputs = this.outputs;\n        for (let i = 0, n = outputs.length; i < n; i += 1) {\n          const output = outputs[i];\n          if (MapInlet.is(output)) {\n            output.recohereOutputKey(key, version);\n          }\n        }\n        const outlet = this.outlets.get(key);\n        if (outlet !== void 0) {\n          outlet.recohereInput(version);\n        }\n        this.didRecohereInputKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereInput(version: number): void {\n    if (this.version < 0) {\n      this.willRecohereInput(version);\n      this.effects.forEach(function (key: K): void {\n        this.recohereInputKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereInput(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.didRecohereInput(version);\n    }\n  }\n\n  protected willDecohereInputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereInputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereInputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohereInput(): void {\n    // hook\n  }\n\n  protected onDecohereInput(): void {\n    // hook\n  }\n\n  protected didDecohereInput(): void {\n    // hook\n  }\n\n  protected willRecohereInputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereInputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereInputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected onRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected didRecohereInput(version: number): void {\n    // hook\n  }\n}\nexport interface AbstractMapOutlet<K, V, O> extends MapOutletCombinators<K, V, O> {\n}\nMapOutletCombinators.define(AbstractMapOutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Iterator, Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport {MapInlet} from \"./MapInlet\";\nimport {MapOutlet} from \"./MapOutlet\";\nimport {MapOutletCombinators} from \"./MapOutletCombinators\";\nimport {KeyOutlet} from \"./KeyOutlet\";\nimport type {MapInoutlet} from \"./MapInoutlet\";\n\nexport abstract class AbstractMapInoutlet<K, VI, VO, I, O> implements MapInoutlet<K, VI, VO, I, O> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outlets\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: MapOutlet<K, VI, I> | null;\n\n  /** @hidden */\n  declare readonly effects: BTree<K, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outlets: BTree<K, KeyOutlet<K, VO>>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: MapOutlet<K, VI, I>): void {\n    if (!MapOutlet.is(newInput)) {\n      throw new TypeError(\"\" + newInput);\n    }\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  abstract has(key: K): boolean;\n\n  abstract get(): O | undefined;\n\n  abstract get(key: K): VO | undefined;\n\n  abstract keyIterator(): Iterator<K>;\n\n  outlet(key: K): Outlet<VO> {\n    const oldOutlets = this.outlets;\n    let outlet = oldOutlets.get(key);\n    if (outlet === void 0) {\n      outlet = new KeyOutlet(this, key);\n      Object.defineProperty(this, \"outlets\", {\n        value: oldOutlets.updated(key, outlet),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return outlet;\n  }\n\n  outputIterator(): Iterator<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, VO>) {\n        keyOutlet.unbindOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, VO>) {\n        keyOutlet.disconnectOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutputKey(key: K, effect: KeyEffect): void {\n    this.decohereKey(key, effect);\n  }\n\n  decohereInputKey(key: K, effect: KeyEffect): void {\n    this.decohereKey(key, effect);\n  }\n\n  decohereKey(key: K, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        if (MapInlet.is(output)) {\n          output.decohereOutputKey(key, effect);\n        } else {\n          output.decohereOutput();\n        }\n      }\n      const outlet = this.outlets.get(key);\n      if (outlet !== void 0) {\n        outlet.decohereInput();\n      }\n      this.didDecohereKey(key, effect);\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.outlets.forEach(function (key: K, outlet: KeyOutlet<K, VO>): void {\n        outlet.decohereInput();\n      }, this);\n      this.didDecohere();\n    }\n  }\n\n  recohereOutputKey(key: K, version: number): void {\n    this.recohereKey(key, version);\n  }\n\n  recohereInputKey(key: K, version: number): void {\n    this.recohereKey(key, version);\n  }\n\n  recohereKey(key: K, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        if (this.input !== null) {\n          this.input.recohereInputKey(key, version);\n        }\n        this.onRecohereKey(key, effect, version);\n        const outputs = this.outputs;\n        for (let i = 0, n = outputs.length; i < n; i += 1) {\n          const output = outputs[i];\n          if (MapInlet.is(output)) {\n            output.recohereOutputKey(key, version);\n          }\n        }\n        const outlet = this.outlets.get(key);\n        if (outlet !== void 0) {\n          outlet.recohereInput(version);\n        }\n        this.didRecohereKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      this.effects.forEach(function (key: K): void {\n        this.recohereKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\nexport interface AbstractMapInoutlet<K, VI, VO, I, O> extends MapOutletCombinators<K, VO, O> {\n}\nMapOutletCombinators.define(AbstractMapInoutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Iterator, Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport type {Inlet} from \"./Inlet\";\nimport {OutletCombinators} from \"./OutletCombinators\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport {MapOutlet} from \"./MapOutlet\";\nimport type {MapInletOutlet} from \"./MapInletOutlet\";\n\nexport abstract class AbstractMapInletOutlet<K, V, I, O> implements MapInletOutlet<K, V, I, O> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: MapOutlet<K, V, I> | null;\n\n  /** @hidden */\n  declare readonly effects: BTree<K, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: MapOutlet<K, V, I>): void {\n    if (!MapOutlet.is(newInput)) {\n      throw new TypeError(\"\" + newInput);\n    }\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  abstract get(): O | undefined;\n\n  outputIterator(): Iterator<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutputKey(key: K, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereOutputKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereOutputKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.didDecohereOutputKey(key, effect);\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.didDecohere();\n    }\n  }\n\n  recohereOutputKey(key: K, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereOutputKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        if (this.input !== null) {\n          this.input.recohereInputKey(key, version);\n        }\n        this.onRecohereOutputKey(key, effect, version);\n        this.didRecohereOutputKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      this.effects.forEach(function (key: K): void {\n        this.recohereOutputKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereOutputKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\nexport interface AbstractMapInletOutlet<K, V, I, O> extends OutletCombinators<O> {\n}\nOutletCombinators.define(AbstractMapInletOutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Iterator, Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport type {Inlet} from \"./Inlet\";\nimport type {Outlet} from \"./Outlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport {MapInlet} from \"./MapInlet\";\nimport {MapOutlet} from \"./MapOutlet\";\nimport {MapOutletCombinators} from \"./MapOutletCombinators\";\nimport {KeyOutlet} from \"./KeyOutlet\";\nimport type {MapInletMapOutlet} from \"./MapInletMapOutlet\";\n\nexport abstract class AbstractMapInletMapOutlet<KI, KO, VI, VO, I, O> implements MapInletMapOutlet<KI, KO, VI, VO, I, O> {\n  constructor() {\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputEffects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"inputEffects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outlets\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly input: MapOutlet<KI, VI, I> | null;\n\n  /** @hidden */\n  declare readonly outputEffects: BTree<KI, KeyEffect>;\n\n  /** @hidden */\n  declare readonly inputEffects: BTree<KO, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outlets: BTree<KO, KeyOutlet<KO, VO>>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<O>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: MapOutlet<KI, VI, I>): void {\n    if (!MapOutlet.is(newInput)) {\n      throw new TypeError(\"\" + newInput);\n    }\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  abstract has(key: KO): boolean;\n\n  abstract get(): O;\n\n  abstract get(key: KO): VO | undefined;\n\n  abstract keyIterator(): Iterator<KO>;\n\n  outlet(key: KO): Outlet<VO> {\n    const oldOutlets = this.outlets;\n    let outlet = oldOutlets.get(key);\n    if (outlet === void 0) {\n      outlet = new KeyOutlet(this, key);\n      Object.defineProperty(this, \"outlets\", {\n        value: oldOutlets.updated(key, outlet),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return outlet;\n  }\n\n  outputIterator(): Iterator<Inlet<O>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<O>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: KO, keyOutlet: KeyOutlet<KO, VO>) {\n        keyOutlet.unbindOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: KO, keyOutlet: KeyOutlet<KO, VO>) {\n        keyOutlet.disconnectOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutputKey(key: KI, effect: KeyEffect): void {\n    const oldOutputEffects = this.outputEffects;\n    if (oldOutputEffects.get(key) !== effect) {\n      this.willDecohereOutputKey(key, effect);\n      Object.defineProperty(this, \"outputEffects\", {\n        value: oldOutputEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereOutputKey(key, effect);\n      this.didDecohereOutputKey(key, effect);\n    }\n  }\n\n  decohereInputKey(key: KO, effect: KeyEffect): void {\n    const oldInputEffects = this.inputEffects;\n    if (oldInputEffects.get(key) !== effect) {\n      this.willDecohereInputKey(key, effect);\n      Object.defineProperty(this, \"inputEffects\", {\n        value: oldInputEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInputKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        if (MapInlet.is(output)) {\n          output.decohereOutputKey(key, effect);\n        } else {\n          output.decohereOutput();\n        }\n      }\n      const outlet = this.outlets.get(key);\n      if (outlet !== void 0) {\n        outlet.decohereInput();\n      }\n      this.didDecohereInputKey(key, effect);\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.outlets.forEach(function (key: KO, outlet: KeyOutlet<KO, VO>): void {\n        outlet.decohereInput();\n      }, this);\n      this.didDecohere();\n    }\n  }\n\n  recohereOutputKey(key: KI, version: number): void {\n    if (this.version < 0) {\n      const oldOutputEffects = this.outputEffects;\n      const effect = oldOutputEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereOutputKey(key, effect, version);\n        Object.defineProperty(this, \"outputEffects\", {\n          value: oldOutputEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        if (this.input !== null) {\n          this.input.recohereInputKey(key, version);\n        }\n        this.onRecohereOutputKey(key, effect, version);\n        this.didRecohereOutputKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereInputKey(key: KO, version: number): void {\n    if (this.version < 0) {\n      const oldInputEffects = this.inputEffects;\n      const oldEffect = oldInputEffects.get(key);\n      if (oldEffect !== void 0) {\n        const newEffect = this.willRecohereInputKey(key, oldEffect, version);\n        if (oldEffect !== newEffect) {\n          this.decohereInputKey(key, newEffect);\n        }\n        Object.defineProperty(this, \"inputEffects\", {\n          value: oldInputEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        this.onRecohereInputKey(key, newEffect, version);\n        const outputs = this.outputs;\n        for (let i = 0, n = outputs.length; i < n; i += 1) {\n          const output = outputs[i];\n          if (MapInlet.is(output)) {\n            output.recohereOutputKey(key, version);\n          }\n        }\n        const outlet = this.outlets.get(key);\n        if (outlet !== void 0) {\n          outlet.recohereInput(version);\n        }\n        this.didRecohereInputKey(key, newEffect, version);\n      }\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      this.outputEffects.forEach(function (key: KI): void {\n        this.recohereOutputKey(key, version);\n      }, this);\n      this.inputEffects.forEach(function (key: KO): void {\n        this.recohereInputKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohereOutputKey(key: KI, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereOutputKey(key: KI, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereOutputKey(key: KI, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohereInputKey(key: KO, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereInputKey(key: KO, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereInputKey(key: KO, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohereOutputKey(key: KI, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutputKey(key: KI, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereOutputKey(key: KI, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohereInputKey(key: KO, effect: KeyEffect, version: number): KeyEffect {\n    return effect;\n  }\n\n  protected onRecohereInputKey(key: KO, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereInputKey(key: KO, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\nexport interface AbstractMapInletMapOutlet<KI, KO, VI, VO, I, O> extends MapOutletCombinators<KO, VO, O> {\n}\nMapOutletCombinators.define(AbstractMapInletMapOutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"./Outlet\";\nimport {AbstractInlet} from \"./AbstractInlet\";\n\n/**\n * An `Inlet` that decoheres a parameterized `Outlet` whenever the `Inlet`\n * decoheres, and that recoheres the parameterized `Outlet` whenever the\n * `Inlet` recoheres.\n */\nexport class OutletInlet<I> extends AbstractInlet<I> {\n  constructor(outlet: Outlet<unknown>) {\n    super();\n    Object.defineProperty(this, \"outlet\", {\n      value: outlet,\n      enumerable: true,\n    });\n  }\n\n  declare readonly outlet: Outlet<unknown>;\n\n  protected onDecohereOutput(): void {\n    this.outlet.decohereInput();\n  }\n\n  protected onRecohereOutput(version: number): void {\n    this.outlet.recohereInput(version);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"./Outlet\";\nimport type {KeyEffect} from \"./KeyEffect\";\nimport {AbstractMapInlet} from \"./AbstractMapInlet\";\n\n/**\n * A `MapInlet` that decoheres a parameterized `Outlet` whenever the\n * `MapInlet` decoheres, and that recoheres the parameterized `Outlet`\n * whenever the `MapInlet` recoheres.\n */\nexport class OutletMapInlet<K, V, O> extends AbstractMapInlet<K, V, O> {\n  constructor(outlet: Outlet<unknown>) {\n    super();\n    Object.defineProperty(this, \"outlet\", {\n      value: outlet,\n      enumerable: true,\n    });\n  }\n\n  declare readonly outlet: Outlet<unknown>;\n\n  protected onDecohereOutputKey(key: K, effect: KeyEffect): void {\n    this.outlet.decohereInput();\n  }\n\n  protected onDecohereOutput(): void {\n    this.outlet.decohereInput();\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    this.outlet.recohereInput(version);\n  }\n\n  protected onRecohereOutput(version: number): void {\n    this.outlet.recohereInput(version);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AbstractOutlet} from \"./AbstractOutlet\";\n\nexport class ValueInput<O> extends AbstractOutlet<O> {\n  constructor(state?: O) {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: O | undefined;\n\n  get(): O | undefined {\n    return this.state;\n  }\n\n  set(newState: O | undefined): O | undefined {\n    const oldState = this.state;\n    if (oldState !== newState) {\n      Object.defineProperty(this, \"state\", {\n        value: newState,\n        enumerable: true,\n        configurable: true,\n      });\n      this.decohereInput();\n    }\n    return oldState;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AbstractInlet} from \"./AbstractInlet\";\n\nexport class ValueOutput<I> extends AbstractInlet<I> {\n  constructor(state?: I) {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: I | undefined;\n\n  get(): I | undefined {\n    return this.state;\n  }\n\n  protected onRecohereOutput(version: number): void {\n    const input = this.input;\n    if (input !== null) {\n      Object.defineProperty(this, \"state\", {\n        value: input.get(),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor, Map} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {KeyEffect} from \"./KeyEffect\";\nimport {AbstractMapOutlet} from \"./AbstractMapOutlet\";\n\nexport class MapInput<K, V> extends AbstractMapOutlet<K, V, Map<K, V>> {\n  constructor(state?: BTree<K, V>) {\n    super();\n    if (state === void 0) {\n      state = new BTree();\n    }\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n    let effects = this.effects;\n    state.forEach(function (key: K): void {\n      effects = effects.updated(key, KeyEffect.Update);\n    }, this);\n    Object.defineProperty(this, \"effects\", {\n      value: effects,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: BTree<K, V>;\n\n  has(key: K): boolean {\n    return this.state.has(key);\n  }\n\n  get(): Map<K, V> | undefined;\n  get(key: K): V | undefined;\n  get(key?: K): Map<K, V> | V | undefined {\n    if (key === void 0) {\n      return this.state;\n    } else {\n      return this.state.get(key);\n    }\n  }\n\n  set(key: K, newValue: V): V | undefined {\n    const oldState = this.state;\n    const oldValue = oldState.get(key);\n    if (oldValue !== newValue) {\n      Object.defineProperty(this, \"state\", {\n        value: oldState.updated(key, newValue),\n        enumerable: true,\n        configurable: true,\n      });\n      this.decohereInputKey(key, KeyEffect.Update);\n    }\n    return oldValue;\n  }\n\n  delete(key: K): this {\n    const oldState = this.state;\n    const newState = oldState.removed(key);\n    if (oldState !== newState) {\n      Object.defineProperty(this, \"state\", {\n        value: newState,\n        enumerable: true,\n        configurable: true,\n      });\n      this.decohereInputKey(key, KeyEffect.Remove);\n    }\n    return this;\n  }\n\n  keyIterator(): Cursor<K> {\n    return this.state.keys();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Map} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {KeyEffect} from \"./KeyEffect\";\nimport {AbstractMapInlet} from \"./AbstractMapInlet\";\n\nexport class MapOutput<K, V> extends AbstractMapInlet<K, V, Map<K, V>> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: BTree<K, V>;\n\n  get(): Map<K, V> {\n    return this.state;\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value !== void 0) {\n          Object.defineProperty(this, \"state\", {\n            value: this.state.updated(key, value),\n            enumerable: true,\n            configurable: true,\n          });\n        } else {\n          Object.defineProperty(this, \"state\", {\n            value: this.state.removed(key),\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n    } else if (effect === KeyEffect.Remove) {\n      Object.defineProperty(this, \"state\", {\n        value: this.state.removed(key),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Outlet} from \"../Outlet\";\nimport {AbstractInoutlet} from \"../AbstractInoutlet\";\n\nexport class MemoizeValueCombinator<IO> extends AbstractInoutlet<IO, IO> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: IO | undefined;\n\n  get(): IO | undefined {\n    return this.state;\n  }\n\n  protected onRecohere(version: number): void {\n    const input = this.input;\n    if (input !== null) {\n      Object.defineProperty(this, \"state\", {\n        value: input.get(),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  memoize(): Outlet<IO> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Iterator} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {KeyEffect} from \"../KeyEffect\";\nimport type {MapOutlet} from \"../MapOutlet\";\nimport {AbstractMapInoutlet} from \"../AbstractMapInoutlet\";\n\nexport class MemoizeMapCombinator<K, V, IO> extends AbstractMapInoutlet<K, V, V, IO, IO> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"cache\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: IO | undefined;\n\n  /** @hidden */\n  declare readonly cache: BTree<K, V>;\n\n  has(key: K): boolean {\n    return this.cache.has(key);\n  }\n\n  get(): IO | undefined;\n  get(key: K): V | undefined;\n  get(key?: K): IO | V | undefined {\n    if (key === void 0) {\n      let state = this.state;\n      const input = this.input;\n      if (state === void 0 && input !== null) {\n        state = input.get();\n        Object.defineProperty(this, \"state\", {\n          value: state,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n      return state;\n    } else {\n      return this.cache.get(key);\n    }\n  }\n\n  keyIterator(): Iterator<K> {\n    return this.cache.keys();\n  }\n\n  protected onRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value !== void 0) {\n          Object.defineProperty(this, \"cache\", {\n            value: this.cache.updated(key, value),\n            enumerable: true,\n            configurable: true,\n          });\n        } else {\n          Object.defineProperty(this, \"cache\", {\n            value: this.cache.removed(key),\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n    } else if (effect === KeyEffect.Remove) {\n      Object.defineProperty(this, \"cache\", {\n        value: this.cache.removed(key),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  protected onRecohere(version: number): void {\n    Object.defineProperty(this, \"state\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  memoize(): MapOutlet<K, V, IO> {\n    return this;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Iterator, Cursor, Map} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {KeyEffect} from \"../KeyEffect\";\nimport {AbstractMapInletMapOutlet} from \"../AbstractMapInletMapOutlet\";\n\nexport abstract class FilterFieldsOperator<K, V, I> extends AbstractMapInletMapOutlet<K, K, V, V, I, Map<K, V>> {\n  has(key: K): boolean {\n    const input = this.input;\n    if (input !== null) {\n      const value = input.get(key);\n      return value !== void 0 && this.evaluate(key, value);\n    }\n    return false;\n  }\n\n  get(): Map<K, V>;\n  get(key: K): V | undefined;\n  get(key?: K): Map<K, V> | V | undefined {\n    if (key === void 0) {\n      const output = new BTree<K, V>();\n      const keys = this.keyIterator();\n      do {\n        const next = keys.next();\n        if (!next.done) {\n          const key = next.value!;\n          const value = this.input!.get(key);\n          if (value !== void 0 && this.evaluate(key, value)) {\n            output.set(key, value);\n          }\n          continue;\n        }\n        break;\n      } while (true);\n      return output;\n    } else {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value !== void 0 && this.evaluate(key, value)) {\n          return value;\n        }\n      }\n      return void 0;\n    }\n  }\n\n  keyIterator(): Iterator<K> {\n    const input = this.input;\n    if (input !== null) {\n      return input.keyIterator(); // TODO: filter keys\n    } else {\n      return Cursor.empty();\n    }\n  }\n\n  protected onDecohereOutputKey(key: K, effect: KeyEffect): void {\n    this.decohereInputKey(key, effect);\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    this.recohereInputKey(key, version);\n  }\n\n  protected willRecohereInputKey(key: K, effect: KeyEffect, version: number): KeyEffect {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value === void 0 || !this.evaluate(key, value)) {\n          return KeyEffect.Remove;\n        }\n      }\n    }\n    return effect;\n  }\n\n  abstract evaluate(key: K, value: V): boolean;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {FilterFieldsFunction} from \"../function\";\nimport {FilterFieldsOperator} from \"./FilterFieldsOperator\";\n\nexport class FilterFieldsCombinator<K, V, I> extends FilterFieldsOperator<K, V, I> {\n  constructor(func: FilterFieldsFunction<K, V>) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly func: FilterFieldsFunction<K, V>;\n\n  evaluate(key: K, value: V): boolean {\n    const func = this.func;\n    return func(key, value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AbstractInoutlet} from \"../AbstractInoutlet\";\n\nexport abstract class MapValueOperator<I, O> extends AbstractInoutlet<I, O> {\n  get(): O | undefined {\n    const input = this.input;\n    if (input !== null) {\n      return this.evaluate(input.get());\n    } else {\n      return void 0;\n    }\n  }\n\n  abstract evaluate(value: I | undefined): O | undefined;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {MapValueFunction} from \"../function\";\nimport {MapValueOperator} from \"./MapValueOperator\";\n\nexport class MapValueCombinator<I, O> extends MapValueOperator<I, O> {\n  constructor(func: MapValueFunction<I, O>) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly func: MapValueFunction<I, O>;\n\n  evaluate(value: I | undefined): O | undefined {\n    if (value !== void 0) {\n      const func = this.func;\n      return func(value);\n    } else {\n      return void 0;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Iterator, Cursor, Map} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {AbstractMapInoutlet} from \"../AbstractMapInoutlet\";\n\nexport abstract class MapFieldValuesOperator<K, VI, VO, I> extends AbstractMapInoutlet<K, VI, VO, I, Map<K, VO>> {\n  has(key: K): boolean {\n    const input = this.input;\n    if (input !== null) {\n      return input.has(key);\n    } else {\n      return false;\n    }\n  }\n\n  get(): Map<K, VO>;\n  get(key: K): VO | undefined;\n  get(key?: K): Map<K, VO> | VO | undefined {\n    if (key === void 0) {\n      const output = new BTree<K, VO>();\n      const keys = this.keyIterator();\n      do {\n        const next = keys.next();\n        if (!next.done) {\n          const key = next.value!;\n          const value = this.evaluate(key, this.input!.get(key));\n          if (value !== void 0) {\n            output.set(key, value);\n          }\n          continue;\n        }\n        break;\n      } while (true);\n      return output;\n    } else {\n      const input = this.input;\n      if (input !== null) {\n        return this.evaluate(key, input.get(key));\n      } else {\n        return void 0;\n      }\n    }\n  }\n\n  keyIterator(): Iterator<K> {\n    const input = this.input;\n    if (input !== null) {\n      return input.keyIterator(); // TODO: filter keys\n    } else {\n      return Cursor.empty();\n    }\n  }\n\n  abstract evaluate(key: K, value: VI | undefined): VO | undefined;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {MapFieldValuesFunction} from \"../function\";\nimport {MapFieldValuesOperator} from \"./MapFieldValuesOperator\";\n\nexport class MapFieldValuesCombinator<K, VI, VO, I> extends MapFieldValuesOperator<K, VI, VO, I> {\n  constructor(func: MapFieldValuesFunction<K, VI, VO> ) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly func: MapFieldValuesFunction<K, VI, VO>;\n\n  evaluate(key: K, value: VI | undefined): VO | undefined {\n    if (value !== void 0) {\n      const func = this.func;\n      return func(key, value);\n    } else {\n      return void 0;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BTree} from \"@swim/collections\";\nimport {KeyEffect} from \"../KeyEffect\";\nimport {AbstractMapInletOutlet} from \"../AbstractMapInletOutlet\";\n\nexport abstract class ReduceFieldsOperator<K, V, I, O> extends AbstractMapInletOutlet<K, V, I, O> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"state\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: BTree<K, V, O>;\n\n  get(): O | undefined {\n    return this.state.reduced(this.identity, this.accumulate.bind(this), this.combine.bind(this));\n  }\n\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value !== void 0) {\n          this.state.set(key, value);\n        } else {\n          this.state.delete(key);\n        }\n      }\n    } else if (effect === KeyEffect.Remove) {\n      this.state.delete(key);\n    }\n  }\n\n  abstract readonly identity: O;\n\n  abstract accumulate(result: O, value: V): O;\n\n  abstract combine(result: O, value: O): O;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ReduceFieldsOperator} from \"./ReduceFieldsOperator\";\n\nexport class ReduceFieldsCombinator<K, V, I, O> extends ReduceFieldsOperator<K, V, I, O> {\n  constructor(identity: O, accumulator: (result: O, element: V) => O,\n              combiner: (result: O, result2: O) => O) {\n    super();\n    Object.defineProperty(this, \"identity\", {\n      value: identity,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"accumulator\", {\n      value: accumulator,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"combiner\", {\n      value: combiner,\n      enumerable: true,\n    });\n  }\n\n  get(): O {\n    return this.state.reduced(this.identity, this.accumulator, this.combiner);\n  }\n\n  declare readonly identity: O;\n\n  /** @hidden */\n  declare readonly accumulator: (result: O, element: V) => O;\n\n  accumulate(result: O, value: V): O {\n    const accumulator = this.accumulator;\n    return accumulator(result, value);\n  }\n\n  /** @hidden */\n  declare readonly combiner: (result: O, result2: O) => O;\n\n  combine(result: O, value: O): O {\n    const combiner = this.combiner;\n    return combiner(result, value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AbstractInlet} from \"../AbstractInlet\";\n\nexport abstract class WatchValueOperator<I> extends AbstractInlet<I> {\n  onRecohereOutput(version: number): void {\n    const input = this.input;\n    if (input !== null) {\n      this.evaluate(input.get());\n    }\n  }\n\n  abstract evaluate(value: I | undefined): void;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {WatchValueFunction} from \"../function\";\nimport {WatchValueOperator} from \"./WatchValueOperator\";\n\nexport class WatchValueCombinator<I> extends WatchValueOperator<I> {\n  constructor(func: WatchValueFunction<I>) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly func: WatchValueFunction<I>;\n\n  evaluate(value: I | undefined): void {\n    if (value !== void 0) {\n      const func = this.func;\n      return func(value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {KeyEffect} from \"../KeyEffect\";\nimport {AbstractMapInlet} from \"../AbstractMapInlet\";\n\nexport abstract class WatchFieldsOperator<K, V, O> extends AbstractMapInlet<K, V, O> {\n  protected onRecohereOutputKey(key: K, effect: KeyEffect, version: number): void {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        this.evaluate(key, input.get(key));\n      } else {\n        this.evaluate(key, void 0);\n      }\n    } else if (effect === KeyEffect.Remove) {\n      this.evaluate(key, void 0);\n    }\n  }\n\n  abstract evaluate(key: K, value: V | undefined): void;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {WatchFieldsFunction} from \"../function\";\nimport {WatchFieldsOperator} from \"./WatchFieldsOperator\";\n\nexport class WatchFieldsCombinator<K, V, O> extends WatchFieldsOperator<K, V, O> {\n  constructor(func: WatchFieldsFunction<K, V>) {\n    super();\n    Object.defineProperty(this, \"func\", {\n      value: func,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly func: WatchFieldsFunction<K, V>;\n\n  evaluate(key: K, value: V | undefined): void {\n    if (value !== void 0) {\n      const func = this.func;\n      return func(key, value);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Streamlet} from \"./Streamlet\";\nimport type {GenericStreamlet} from \"./GenericStreamlet\";\nimport {AbstractInlet} from \"./AbstractInlet\";\n\n/**\n * An `Inlet` that decoheres a parameterized `Streamlet` whenever the `Inlet`\n * decoheres, and that recoheres the parameterized `Streamlet` whenever the\n * `Inlet` recoheres.\n */\nexport class StreamletInlet<I> extends AbstractInlet<I> {\n  constructor(streamlet: Streamlet<I, unknown>) {\n    super();\n    Object.defineProperty(this, \"streamlet\", {\n      value: streamlet,\n      enumerable: true,\n    });\n  }\n\n  declare readonly streamlet: Streamlet<I, unknown>;\n\n  protected willDecohereOutput(): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, unknown>;\n    if (streamlet.willDecohereInlet !== void 0) {\n      streamlet.willDecohereInlet(this);\n    }\n  }\n\n  protected didDecohereOutput(): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, unknown>;\n    if (streamlet.didDecohereInlet !== void 0) {\n      streamlet.didDecohereInlet(this);\n    } else {\n      streamlet.decohere();\n    }\n  }\n\n  protected willRecohereOutput(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, unknown>;\n    if (streamlet.willRecohereInlet !== void 0) {\n      streamlet.willRecohereInlet(this, version);\n    }\n  }\n\n  protected didRecohereOutput(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, unknown>;\n    if (streamlet.didRecohereInlet !== void 0) {\n      streamlet.didRecohereInlet(this, version);\n    } else {\n      streamlet.recohere(version);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Streamlet} from \"./Streamlet\";\nimport type {GenericStreamlet} from \"./GenericStreamlet\";\nimport {AbstractOutlet} from \"./AbstractOutlet\";\n\n/**\n * An `Outlet` that decoheres a parameterized `Streamlet` whenever the\n * `Outlet` decoheres, and which gets its state from the parameterized\n * `Streamlet`.\n */\nexport class StreamletOutlet<O> extends AbstractOutlet<O> {\n  constructor(streamlet: Streamlet<unknown, O>) {\n    super();\n    Object.defineProperty(this, \"streamlet\", {\n      value: streamlet,\n      enumerable: true,\n    });\n  }\n\n  declare readonly streamlet: Streamlet<unknown, O>;\n\n  get(): O | undefined {\n    const streamlet = this.streamlet as GenericStreamlet<unknown, O>;\n    if (streamlet.getOutput !== void 0) {\n      return streamlet.getOutput(this);\n    } else {\n      return void 0;\n    }\n  }\n\n  protected willDecohereInput(): void {\n    const streamlet = this.streamlet as GenericStreamlet<unknown, O>;\n    if (streamlet.willDecohereOutlet !== void 0) {\n      streamlet.willDecohereOutlet(this);\n    }\n  }\n\n  protected didDecohereInput(): void {\n    const streamlet = this.streamlet as GenericStreamlet<unknown, O>;\n    if (streamlet.didDecohereOutlet !== void 0) {\n      streamlet.didDecohereOutlet(this);\n    } else {\n      streamlet.decohere();\n    }\n  }\n\n  protected willRecohereInput(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<unknown, O>;\n    if (streamlet.willRecohereOutlet !== void 0) {\n      streamlet.willRecohereOutlet(this, version);\n    }\n  }\n\n  protected didRecohereInput(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<unknown, O>;\n    if (streamlet.didRecohereOutlet !== void 0) {\n      streamlet.didRecohereOutlet(this, version);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Streamlet} from \"./Streamlet\";\nimport type {GenericStreamlet} from \"./GenericStreamlet\";\nimport {AbstractInoutlet} from \"./AbstractInoutlet\";\n\n/**\n * An `Inoutlet` that decoheres a parameterized `Streamlet` whenever the\n * `Inoutlet` decoheres, that recoheres the parameterized `Streamlet`\n * whenever the `Inoutlet` recoheres, and which gets its state from the\n * parameterized `Streamlet`.\n */\nexport class StreamletInoutlet<I, O> extends AbstractInoutlet<I, O> {\n  constructor(streamlet: Streamlet<I, O>) {\n    super();\n    Object.defineProperty(this, \"streamlet\", {\n      value: streamlet,\n      enumerable: true,\n    });\n  }\n\n  declare readonly streamlet: Streamlet<I, O>;\n\n  get(): O | undefined {\n    const streamlet = this.streamlet as GenericStreamlet<I, O>;\n    if (streamlet.getOutput !== void 0) {\n      const output = streamlet.getOutput(this);\n      if (output !== void 0) {\n        return output;\n      }\n    }\n    const input = this.input;\n    if (input !== null) {\n      return input.get() as O | undefined;\n    } else {\n      return void 0;\n    }\n  }\n\n  protected willDecohere(): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, O>;\n    if (streamlet.willDecohereOutlet !== void 0) {\n      streamlet.willDecohereOutlet(this);\n    }\n  }\n\n  protected didDecohere(): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, O>;\n    if (streamlet.didDecohereOutlet !== void 0) {\n      streamlet.didDecohereOutlet(this);\n    } else {\n      streamlet.decohere();\n    }\n  }\n\n  protected willRecohere(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, O>;\n    if (streamlet.willRecohereOutlet !== void 0) {\n      streamlet.willRecohereOutlet(this, version);\n    }\n  }\n\n  protected didRecohere(version: number): void {\n    const streamlet = this.streamlet as GenericStreamlet<I, O>;\n    if (streamlet.didRecohereOutlet !== void 0) {\n      streamlet.didRecohereOutlet(this, version);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {InletType, InletOptions, Inlet} from \"./Inlet\";\nimport type {OutletType, OutletOptions, Outlet} from \"./Outlet\";\nimport type {InoutletType, InoutletOptions, Inoutlet} from \"./Inoutlet\";\nimport type {StreamletContext} from \"./StreamletContext\";\nimport type {StreamletScope} from \"./StreamletScope\";\nimport type {Streamlet} from \"./Streamlet\";\nimport type {GenericStreamlet} from \"./GenericStreamlet\";\nimport {StreamletInlet} from \"./StreamletInlet\";\nimport {StreamletOutlet} from \"./StreamletOutlet\";\nimport {StreamletInoutlet} from \"./StreamletInoutlet\";\n\n/** @hidden */\nexport class InletDescriptor {\n  readonly key: string;\n  readonly name: string;\n  readonly type: InletType;\n\n  constructor(key: string, name: string, type: InletType) {\n    this.key = key;\n    this.name = name;\n    this.type = type;\n  }\n}\n\n/** @hidden */\nexport class OutletDescriptor {\n  readonly key: string;\n  readonly name: string;\n  readonly type: OutletType;\n\n  constructor(key: string, name: string, type: OutletType) {\n    this.key = key;\n    this.name = name;\n    this.type = type;\n  }\n}\n\n/** @hidden */\nexport class InoutletDescriptor {\n  readonly key: string;\n  readonly name: string;\n  readonly type: InoutletType;\n\n  constructor(key: string, name: string, type: InoutletType) {\n    this.key = key;\n    this.name = name;\n    this.type = type;\n  }\n}\n\n/** @hidden */\nexport interface StreamletPrototype {\n  inlets?: {[name: string]: InletDescriptor | InoutletDescriptor | undefined};\n  outlets?: {[name: string]: OutletDescriptor | InoutletDescriptor | undefined};\n  inoutlets?: {[name: string]: InoutletDescriptor | undefined};\n}\n\nexport abstract class AbstractStreamlet<I = unknown, O = I> implements GenericStreamlet<I, O> {\n  constructor(scope: StreamletScope<O> | null = null) {\n    Object.defineProperty(this, \"streamletScope\", {\n      value: scope,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"streamletContext\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly streamletScope: StreamletScope<O> | null;\n\n  setStreamletScope(scope: StreamletScope<O> | null): void {\n    Object.defineProperty(this, \"streamletScope\", {\n      value: scope,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly streamletContext: StreamletContext | null;\n\n  setStreamletContext(context: StreamletContext | null): void {\n    Object.defineProperty(this, \"streamletContext\", {\n      value: context,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly version: number;\n\n  inlet(key: string): Inlet<I> | null;\n  inlet<I2 extends I>(): Inlet<I2>;\n  inlet(key?: string): Inlet<I> | null {\n    if (key === void 0) {\n      return new StreamletInlet<I>(this);\n    } else {\n      return AbstractStreamlet.reflectInletKey<I, O>(key, this, Object.getPrototypeOf(this));\n    }\n  }\n\n  bindInput(key: string, input: Outlet<I>): void {\n    const inlet = this.inlet(key);\n    if (inlet === null) {\n      throw new Error(\"\" + key);\n    }\n    inlet.bindInput(input);\n  }\n\n  unbindInput(key: string): void {\n    const inlet = this.inlet(key);\n    if (inlet === null) {\n      throw new Error(\"\" + key);\n    }\n    inlet.unbindInput();\n  }\n\n  outlet(key: string | Outlet<O>): Outlet<O> | null;\n  outlet<O2>(): Outlet<O2>;\n  outlet(key?: string | Outlet<O>): Outlet<O> | null {\n    if (key === void 0) {\n      return new StreamletOutlet<O>(this);\n    } else if (typeof key === \"string\") {\n      return AbstractStreamlet.reflectOutletKey<I, O>(key, this, Object.getPrototypeOf(this));\n    } else {\n      return key;\n    }\n  }\n\n  inoutlet<I2 extends I, O2>(): Inoutlet<I2, O2> {\n    return new StreamletInoutlet<I2, O2>(this as Streamlet<I2, O2>);\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      this.onDecohereOutlets();\n      this.didDecohere();\n    }\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereInlets(version);\n      this.onRecohere(version);\n      this.onRecohereOutlets(version);\n      this.didRecohere(version);\n    }\n  }\n\n  getInput<I2 extends I>(inlet: Inlet<I2> | string): I2 | undefined;\n  getInput<I2 extends I, E = I2>(inlet: Inlet<I2> | string, orElse: E): I2 | E;\n  getInput<I2 extends I, E = I2>(inlet: Inlet<I2> | string, orElse?: E): I2 | E | undefined {\n    if (typeof inlet === \"string\") {\n      inlet = this.inlet(inlet) as Inlet<I2>;\n    }\n    let object: I2 | E | undefined;\n    if (inlet !== null) {\n      const input = inlet.input;\n      if (input !== null) {\n        object = input.get();\n      }\n    }\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object;\n  }\n\n  getOutput(outlet: Outlet<O> | string): O | undefined {\n    return void 0;\n  }\n\n  disconnectInputs(): void {\n    AbstractStreamlet.disconnectInputs(this, Object.getPrototypeOf(this));\n  }\n\n  /** @hidden */\n  static disconnectInputs<I, O>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): void {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        for (const name in streamletPrototype.inlets) {\n          const inletDescriptor = streamletPrototype.inlets[name]!;\n          if (inletDescriptor instanceof InletDescriptor) {\n            const inlet = AbstractStreamlet.reflectInletField(streamlet, inletDescriptor);\n            inlet.disconnectInputs();\n          } else if (inletDescriptor instanceof InoutletDescriptor) {\n            const inoutlet = AbstractStreamlet.reflectInoutletField(streamlet, inletDescriptor);\n            inoutlet.disconnectInputs();\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n  }\n\n  disconnectOutputs(): void {\n    AbstractStreamlet.disconnectOutputs(this, Object.getPrototypeOf(this));\n  }\n\n  /** @hidden */\n  static disconnectOutputs<I, O>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): void {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const name in streamletPrototype.outlets) {\n          const outletDescriptor = streamletPrototype.outlets[name]!;\n          if (outletDescriptor instanceof OutletDescriptor) {\n            const outlet = AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor);\n            outlet.disconnectOutputs();\n          } else if (outletDescriptor instanceof InoutletDescriptor) {\n            const inoutlet = AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor);\n            inoutlet.disconnectOutputs();\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n  }\n\n  willDecohereInlet(inlet: Inlet<I>): void {\n    // hook\n  }\n\n  didDecohereInlet(inlet: Inlet<I>): void {\n    this.decohere();\n  }\n\n  willRecohereInlet(inlet: Inlet<I>, version: number): void {\n    // hook\n  }\n\n  didRecohereInlet(inlet: Inlet<I>, version: number): void {\n    this.recohere(version);\n  }\n\n  willDecohereOutlet(outlet: Outlet<O>): void {\n    // hook\n  }\n\n  didDecohereOutlet(outlet: Outlet<O>): void {\n    // hook\n  }\n\n  willRecohereOutlet(outlet: Outlet<O>, version: number): void {\n    // hook\n  }\n\n  didRecohereOutlet(outlet: Outlet<O>, version: number): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected onDecohereOutlets(): void {\n    AbstractStreamlet.decohereOutlets(this, Object.getPrototypeOf(this));\n  }\n\n  /** @hidden */\n  static decohereOutlets<I, O>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): void {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const name in streamletPrototype.outlets) {\n          const outletDescriptor = streamletPrototype.outlets[name]!;\n          if (outletDescriptor instanceof OutletDescriptor) {\n            const outlet = AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor);\n            outlet.decohereInput();\n          } else if (outletDescriptor instanceof InoutletDescriptor) {\n            const inoutlet = AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor);\n            inoutlet.decohereInput();\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohereInlets(version: number): void {\n    AbstractStreamlet.recohereInlets(version, this, Object.getPrototypeOf(this));\n  }\n\n  /** @hidden */\n  static recohereInlets<I, O>(version: number, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): void {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        for (const name in streamletPrototype.inlets) {\n          const inletDescriptor = streamletPrototype.inlets[name]!;\n          if (inletDescriptor instanceof InletDescriptor) {\n            const inlet = AbstractStreamlet.reflectInletField(streamlet, inletDescriptor);\n            inlet.recohereOutput(version);\n          } else if (inletDescriptor instanceof InoutletDescriptor) {\n            const inoutlet = AbstractStreamlet.reflectInoutletField(streamlet, inletDescriptor);\n            inoutlet.recohereOutput(version);\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutlets(version: number): void {\n    AbstractStreamlet.recohereOutlets(version, this, Object.getPrototypeOf(this));\n  }\n\n  /** @hidden */\n  static recohereOutlets<I, O>(version: number, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): void {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const name in streamletPrototype.outlets) {\n          const outletDescriptor = streamletPrototype.outlets[name]!;\n          if (outletDescriptor instanceof OutletDescriptor) {\n            const outlet = AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor);\n            outlet.recohereInput(version);\n          } else if (outletDescriptor instanceof InoutletDescriptor) {\n            const inoutlet = AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor);\n            inoutlet.recohereInput(version);\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n\n  /** @hidden */\n  static reflectEachInlet<I, O, T>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                   callback: (inlet: Inlet<I>, name: string, index: number) => T | void): T | undefined;\n  /** @hidden */\n  static reflectEachInlet<I, O, T, S>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                      callback: (this: S, inlet: Inlet<I>, name: string, index: number) => T | void,\n                                      thisArg: S): T | undefined;\n  /** @hidden */\n  static reflectEachInlet<I, O, T, S>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                      callback: (this: S | undefined, inlet: Inlet<I>, name: string, index: number) => T | void,\n                                      thisArg?: S): T | undefined {\n    let index = 0;\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        for (const name in streamletPrototype.inlets) {\n          const inletDescriptor = streamletPrototype.inlets[name]!;\n          let inlet: Inlet<I> | null;\n          if (inletDescriptor instanceof InletDescriptor) {\n            inlet = AbstractStreamlet.reflectInletField(streamlet, inletDescriptor);\n          } else if (inletDescriptor instanceof InoutletDescriptor) {\n            inlet = AbstractStreamlet.reflectInoutletField(streamlet, inletDescriptor);\n          } else {\n            inlet = null;\n          }\n          if (inlet !== null) {\n            const result = callback.call(thisArg, inlet, inletDescriptor.name, index);\n            if (result !== void 0) {\n              return result;\n            }\n            index += 1;\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return void 0;\n  }\n\n  /** @hidden */\n  static reflectEachOutlet<I, O, T>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                       callback: (outlet: Outlet<O>, name: string, index: number) => T | void): T | undefined;\n  /** @hidden */\n  static reflectEachOutlet<I, O, T, S>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                       callback: (this: S, outlet: Outlet<O>, name: string, index: number) => T | void,\n                                       thisArg: S): T | undefined;\n  /** @hidden */\n  static reflectEachOutlet<I, O, T, S>(streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null,\n                                       callback: (this: S | undefined, outlet: Outlet<O>, name: string, index: number) => T | void,\n                                       thisArg?: S): T | undefined {\n    let index = 0;\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const name in streamletPrototype.outlets) {\n          const outletDescriptor = streamletPrototype.outlets[name]!;\n          let outlet: Outlet<O> | null;\n          if (outletDescriptor instanceof OutletDescriptor) {\n            outlet = AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor);\n          } else if (outletDescriptor instanceof InoutletDescriptor) {\n            outlet = AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor);\n          } else {\n            outlet = null;\n          }\n          if (outlet !== null) {\n            const result = callback.call(thisArg, outlet, outletDescriptor.name, index);\n            if (result !== void 0) {\n              return result;\n            }\n            index += 1;\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return void 0;\n  }\n\n  /** @hidden */\n  static reflectInletCount(streamletPrototype: StreamletPrototype | null): number {\n    let count = 0;\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        for (const _ in streamletPrototype.inlets) {\n          count += 1;\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return count;\n  }\n\n  /** @hidden */\n  static reflectOutletCount(streamletPrototype: StreamletPrototype | null): number {\n    let count = 0;\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const _ in streamletPrototype.outlets) {\n          count += 1;\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return count;\n  }\n\n  /** @hidden */\n  static reflectInletIndex<I, O>(index: number, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): [string, Inlet<I>] | null {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        for (const name in streamletPrototype.inlets) {\n          if (index === 0) {\n            const inletDescriptor = streamletPrototype.inlets[name]!;\n            if (inletDescriptor instanceof InletDescriptor) {\n              return [inletDescriptor.name, AbstractStreamlet.reflectInletField(streamlet, inletDescriptor)];\n            } else if (inletDescriptor instanceof InoutletDescriptor) {\n              return [inletDescriptor.name, AbstractStreamlet.reflectInoutletField(streamlet, inletDescriptor)];\n            } else {\n              return null;\n            }\n          }\n          index -= 1;\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static reflectOutletIndex<I, O>(index: number, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): [string, Outlet<O>] | null {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        for (const name in streamletPrototype.outlets) {\n          if (index === 0) {\n            const outletDescriptor = streamletPrototype.outlets[name]!;\n            if (outletDescriptor instanceof OutletDescriptor) {\n              return [outletDescriptor.name, AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor)];\n            } else if (outletDescriptor instanceof InoutletDescriptor) {\n              return [outletDescriptor.name, AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor)];\n            } else {\n              return null;\n            }\n          }\n          index -= 1;\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static reflectInletKey<I, O>(key: string, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): Inlet<I> | null {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n        const inletDescriptor = streamletPrototype.inlets![key];\n        if (inletDescriptor !== void 0) {\n          if (inletDescriptor instanceof InletDescriptor) {\n            return AbstractStreamlet.reflectInletField(streamlet, inletDescriptor);\n          } else if (inletDescriptor instanceof InoutletDescriptor) {\n            return AbstractStreamlet.reflectInoutletField(streamlet, inletDescriptor);\n          } else {\n            return null;\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static reflectOutletKey<I, O>(key: string, streamlet: Streamlet<I, O>, streamletPrototype: StreamletPrototype | null): Outlet<O> | null {\n    while (streamletPrototype !== null) {\n      if (Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n        const outletDescriptor = streamletPrototype.outlets![key];\n        if (outletDescriptor !== void 0) {\n          if (outletDescriptor instanceof OutletDescriptor) {\n            return AbstractStreamlet.reflectOutletField(streamlet, outletDescriptor);\n          } else if (outletDescriptor instanceof InoutletDescriptor) {\n            return AbstractStreamlet.reflectInoutletField(streamlet, outletDescriptor);\n          } else {\n            return null;\n          }\n        }\n      }\n      streamletPrototype = Object.getPrototypeOf(streamletPrototype);\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static reflectInletField<I, O>(streamlet: Streamlet<I, O>, inletDescriptor: InletDescriptor): Inlet<I> {\n    if (inletDescriptor.type === \"value\") {\n      return AbstractStreamlet.reflectValueInletField(streamlet, inletDescriptor.key);\n    } else if (inletDescriptor.type === \"map\") {\n      return AbstractStreamlet.reflectMapInletField(streamlet, inletDescriptor.key);\n    } else {\n      throw new TypeError(inletDescriptor.type);\n    }\n  }\n\n  /** @hidden */\n  static reflectValueInletField<I, O>(streamlet: Streamlet<I, O>, key: string): Inlet<I> {\n    let inlet = (streamlet as any)[key] as Inlet<I> | undefined;\n    if (inlet === void 0) {\n      if (streamlet instanceof AbstractStreamlet) {\n        inlet = streamlet.inlet();\n      } else {\n        inlet = new StreamletInlet<I>(streamlet);\n      }\n      (streamlet as any)[key] = inlet;\n    }\n    return inlet;\n  }\n\n  /** @hidden */\n  static reflectMapInletField<I, O>(streamlet: Streamlet<I, O>, key: string): Inlet<I> {\n    return null as any; // TODO\n  }\n\n  /** @hidden */\n  static reflectOutletField<I, O>(streamlet: Streamlet<I, O>, outletDescriptor: OutletDescriptor): Outlet<O> {\n    if (outletDescriptor.type === \"value\") {\n      return AbstractStreamlet.reflectValueOutletField(streamlet, outletDescriptor.key);\n    } else if (outletDescriptor.type === \"map\") {\n      return AbstractStreamlet.reflectMapOutletField(streamlet, outletDescriptor.key);\n    } else {\n      throw new TypeError(outletDescriptor.type);\n    }\n  }\n\n  /** @hidden */\n  static reflectValueOutletField<I, O>(streamlet: Streamlet<I, O>, key: string): Outlet<O> {\n    let outlet = (streamlet as any)[key] as Outlet<O> | undefined;\n    if (outlet === void 0) {\n      if (streamlet instanceof AbstractStreamlet) {\n        outlet = streamlet.outlet();\n      } else {\n        outlet = new StreamletOutlet<O>(streamlet);\n      }\n      (streamlet as any)[key] = outlet;\n    }\n    return outlet;\n  }\n\n  /** @hidden */\n  static reflectMapOutletField<I, O>(streamlet: Streamlet<I, O>, key: string): Outlet<O> {\n    return null as any; // TODO\n  }\n\n  /** @hidden */\n  static reflectInoutletField<I, O>(streamlet: Streamlet<I, O>, inoutletDescriptor: InoutletDescriptor): Inoutlet<I, O> {\n    if (inoutletDescriptor.type === \"value\") {\n      return AbstractStreamlet.reflectValueInoutletField(streamlet, inoutletDescriptor.key);\n    } else if (inoutletDescriptor.type === \"map\") {\n      return AbstractStreamlet.reflectMapInoutletField(streamlet, inoutletDescriptor.key);\n    } else {\n      throw new TypeError(inoutletDescriptor.type);\n    }\n  }\n\n  /** @hidden */\n  static reflectValueInoutletField<I, O>(streamlet: Streamlet<I, O>, key: string): Inoutlet<I, O> {\n    let inoutlet = (streamlet as any)[key] as Inoutlet<I, O> | undefined;\n    if (inoutlet === void 0) {\n      if (streamlet instanceof AbstractStreamlet) {\n        inoutlet = streamlet.inoutlet();\n      } else {\n        inoutlet = new StreamletInoutlet<I, O>(streamlet);\n      }\n      (streamlet as any)[key] = inoutlet;\n    }\n    return inoutlet;\n  }\n\n  /** @hidden */\n  static reflectMapInoutletField<I, O>(streamlet: Streamlet<I, O>, key: string): Inoutlet<I, O> {\n    return null as any; // TODO\n  }\n\n  /** @hidden */\n  static init(streamletPrototype: StreamletPrototype): void {\n    if (!Object.prototype.hasOwnProperty.call(streamletPrototype, \"inlets\")) {\n      streamletPrototype.inlets = {};\n    }\n    if (!Object.prototype.hasOwnProperty.call(streamletPrototype, \"outlets\")) {\n      streamletPrototype.outlets = {};\n    }\n    if (!Object.prototype.hasOwnProperty.call(streamletPrototype, \"inoutlets\")) {\n      streamletPrototype.inoutlets = {};\n    }\n  }\n\n  /** @hidden */\n  static decorateInlet(options: InletOptions, target: StreamletPrototype, propertyKey: string | symbol): void {\n    AbstractStreamlet.init(target);\n    const name = options.name !== void 0 ? options.name : propertyKey.toString();\n    const type = options.type !== void 0 ? options.type : \"value\";\n    const inletDescriptor = new InletDescriptor(propertyKey.toString(), name, type);\n    target.inlets![name] = inletDescriptor;\n  }\n\n  /** @hidden */\n  static decorateOutlet(options: OutletOptions, target: StreamletPrototype, propertyKey: string | symbol): void {\n    AbstractStreamlet.init(target);\n    const name = options.name !== void 0 ? options.name : propertyKey.toString();\n    const type = options.type !== void 0 ? options.type : \"value\";\n    const outletDescriptor = new OutletDescriptor(propertyKey.toString(), name, type);\n    target.outlets![name] = outletDescriptor;\n  }\n\n  /** @hidden */\n  static decorateInoutlet(options: InoutletOptions, target: StreamletPrototype, propertyKey: string | symbol): void {\n    AbstractStreamlet.init(target);\n    const name = options.name !== void 0 ? options.name : propertyKey.toString();\n    const type = options.type !== void 0 ? options.type : \"value\";\n    const inoutletDescriptor = new InoutletDescriptor(propertyKey.toString(), name, type);\n    target.inlets![name] = inoutletDescriptor;\n    target.outlets![name] = inoutletDescriptor;\n    target.inoutlets![name] = inoutletDescriptor;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {OutletOptions} from \"./Outlet\";\nimport {StreamletPrototype, AbstractStreamlet} from \"./AbstractStreamlet\";\n\nexport function Out(name: string): PropertyDecorator;\nexport function Out(options: OutletOptions): PropertyDecorator;\nexport function Out(target: unknown, key: string): void;\nexport function Out(target: unknown, key?: string): PropertyDecorator | void {\n  if (arguments.length === 1) {\n    if (typeof target === \"string\") {\n      target = {name: target} as OutletOptions;\n    }\n    return AbstractStreamlet.decorateOutlet.bind(void 0, target as OutletOptions);\n  } else {\n    AbstractStreamlet.decorateOutlet({}, target as StreamletPrototype, key!);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {InoutletOptions} from \"./Inoutlet\";\nimport {StreamletPrototype, AbstractStreamlet} from \"./AbstractStreamlet\";\n\nexport function Inout(name: string): PropertyDecorator;\nexport function Inout(options: InoutletOptions): PropertyDecorator;\nexport function Inout(target: unknown, key: string): void;\nexport function Inout(target: unknown, key?: string): PropertyDecorator | void {\n  if (arguments.length === 1) {\n    if (typeof target === \"string\") {\n      target = {name: target} as InoutletOptions;\n    }\n    return AbstractStreamlet.decorateInoutlet.bind(void 0, target as InoutletOptions);\n  } else {\n    AbstractStreamlet.decorateInoutlet({}, target as StreamletPrototype, key!);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Map} from \"@swim/util\";\nimport type {Value, Record} from \"@swim/structure\";\nimport {Outlet, MapOutlet, StreamletScope} from \"@swim/streamlet\";\nimport type {MapValueFunction, MapFieldValuesFunction} from \"@swim/streamlet\";\nimport type {WatchValueFunction, WatchFieldsFunction} from \"@swim/streamlet\";\n\nexport interface RecordOutlet extends Outlet<Record>, MapOutlet<Value, Value, Record>, StreamletScope<Value> {\n  outlet(key: Value | string): Outlet<Value>;\n\n  get(): Record;\n  get(key: Value): Value;\n\n  memoize(): MapOutlet<Value, Value, Record>;\n\n  map<O2>(func: MapValueFunction<Record, O2>): Outlet<O2>;\n  map<V2>(func: MapFieldValuesFunction<Value, Value, V2>): MapOutlet<Value, V2, Map<Value, V2>>;\n\n  watch(func: WatchValueFunction<Record>): this;\n  watch(func: WatchFieldsFunction<Value, Value>): this;\n}\n\nexport const RecordOutlet = {} as {\n  is(object: unknown): object is RecordOutlet;\n};\n\nRecordOutlet.is = function (object: unknown): object is RecordOutlet {\n  if (typeof object === \"object\" && object !== null) {\n    const outlet = object as RecordOutlet;\n    return MapOutlet.is(outlet) && StreamletScope.is(outlet);\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Cursor, Map} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {AnyItem, Item, Field, AnyValue, Value, Record, Text, Selector} from \"@swim/structure\";\nimport {\n  Inlet,\n  Outlet,\n  KeyEffect,\n  MapInlet,\n  MapOutlet,\n  MapOutletCombinators,\n  KeyOutlet,\n  StreamletContext,\n  StreamletScope,\n  FilterFieldsFunction,\n  FilterFieldsCombinator,\n} from \"@swim/streamlet\";\nimport {RecordOutlet} from \"./RecordOutlet\";\nimport {RecordStreamlet} from \"./\"; // forward import\n\nexport abstract class AbstractRecordOutlet extends Record implements RecordOutlet {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outlets\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly effects: BTree<Value, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outlets: BTree<Value, KeyOutlet<Value, Value>>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<Record>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  get streamletScope(): StreamletScope<Value> | null {\n    return null;\n  }\n\n  get streamletContext(): StreamletContext | null {\n    const scope = this.streamletScope;\n    if (scope !== null) {\n      return scope.streamletContext;\n    }\n    return null;\n  }\n\n  hasOwn(key: AnyValue): boolean {\n    return this.has(key);\n  }\n\n  get(): Record;\n  get(key: AnyValue): Value;\n  get(key?: AnyValue): Record | Value {\n    if (key === void 0) {\n      return this;\n    } else {\n      return super.get(key);\n    }\n  }\n\n  abstract keyIterator(): Cursor<Value>;\n\n  outlet(key: Value | string): Outlet<Value> {\n    if (typeof key === \"string\") {\n      key = Text.from(key);\n    }\n    if (!this.hasOwn(key)) {\n      const scope = this.streamletScope;\n      if (RecordOutlet.is(scope) && scope.has(key)) {\n        // TODO: Support dynamic shadowing?\n        return scope.outlet(key);\n      }\n    }\n    const oldOutlets = this.outlets;\n    let outlet = oldOutlets.get(key);\n    if (outlet === void 0) {\n      outlet = new KeyOutlet<Value, Value>(this, key);\n      Object.defineProperty(this, \"outlets\", {\n        value: oldOutlets.updated(key, outlet),\n        enumerable: true,\n        configurable: true,\n      });\n      this.decohereInputKey(key, KeyEffect.Update);\n    }\n    return outlet;\n  }\n\n  outputIterator(): Cursor<Inlet<Record>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<Record>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<Record>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: Value, keyOutlet: KeyOutlet<Value, Value>) {\n        keyOutlet.unbindOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: Value, keyOutlet: KeyOutlet<Value, Value>) {\n        keyOutlet.disconnectOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n    this.forEach(function (member: Item): void {\n      if (member instanceof Field) {\n        member = member.toValue();\n      }\n      if (member instanceof AbstractRecordOutlet) {\n        member.disconnectOutputs();\n      } else if (member instanceof RecordStreamlet) {\n        member.disconnectOutputs();\n      } else if (RecordOutlet.is(member)) {\n        member.disconnectOutputs();\n      }\n    }, this);\n  }\n\n  disconnectInputs(): void {\n    // nop\n  }\n\n  decohereInputKey(key: Value, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereInputKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInputKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        if (MapInlet.is(output)) {\n          output.decohereOutputKey(key, effect);\n        } else {\n          output.decohereOutput();\n        }\n      }\n      const outlet = this.outlets.get(key);\n      if (outlet !== void 0) {\n        outlet.decohereInput();\n      }\n      this.didDecohereInputKey(key, effect);\n    }\n  }\n\n  decohereInput(): void {\n    if (this.version >= 0) {\n      this.willDecohereInput();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereInput();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.outlets.forEach(function (key: Value, outlet: KeyOutlet<Value, Value>): void {\n        outlet.decohereInput();\n      }, this);\n      this.didDecohereInput();\n    }\n  }\n\n  recohereInputKey(key: Value, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereInputKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        this.onRecohereInputKey(key, effect, version);\n        const outputs = this.outputs;\n        for (let i = 0, n = outputs.length; i < n; i += 1) {\n          const output = outputs[i];\n          if (MapInlet.is(output)) {\n            output.recohereOutputKey(key, version);\n          }\n        }\n        const outlet = this.outlets.get(key);\n        if (outlet !== void 0) {\n          outlet.recohereInput(version);\n        }\n        this.didRecohereInputKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereInput(version: number): void {\n    if (this.version < 0) {\n      this.willRecohereInput(version);\n      this.effects.forEach(function (key: Value): void {\n        this.recohereInputKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereInput(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.forEach(function (member: Item): void {\n        if (member instanceof Field) {\n          member = member.toValue();\n        }\n        if (member instanceof AbstractRecordOutlet) {\n          member.recohereInput(version);\n        } else if (member instanceof RecordStreamlet) {\n          member.recohere(version);\n        } else if (RecordOutlet.is(member)) {\n          member.recohereInput(version);\n        }\n      }, this);\n      this.didRecohereInput(version);\n    }\n  }\n\n  protected willDecohereInputKey(key: Value, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereInputKey(key: Value, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereInputKey(key: Value, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohereInput(): void {\n    // hook\n  }\n\n  protected onDecohereInput(): void {\n    // hook\n  }\n\n  protected didDecohereInput(): void {\n    // hook\n  }\n\n  protected willRecohereInputKey(key: Value, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereInputKey(key: Value, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected didRecohereInputKey(key: Value, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected onRecohereInput(version: number): void {\n    // hook\n  }\n\n  protected didRecohereInput(version: number): void {\n    // hook\n  }\n\n  filter(predicate?: AnyItem): Selector;\n  filter(func: FilterFieldsFunction<Value, Value>): MapOutlet<Value, Value, Map<Value, Value>>;\n  filter(func: AnyItem | FilterFieldsFunction<Value, Value>): Selector | MapOutlet<Value, Value, Map<Value, Value>> {\n    if (typeof func !== \"function\") {\n      return super.filter(func as AnyItem);\n    } else {\n      const combinator = new FilterFieldsCombinator<Value, Value, Record>(func);\n      combinator.bindInput(this);\n      return combinator;\n    }\n  }\n}\nexport interface AbstractRecordOutlet extends MapOutletCombinators<Value, Value, Record> {\n}\nMapOutletCombinators.define(AbstractRecordOutlet.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value, Record} from \"@swim/structure\";\nimport {Inlet, Outlet, StreamletContext, StreamletScope, Streamlet, AbstractStreamlet} from \"@swim/streamlet\";\n\nexport abstract class RecordStreamlet<I extends Value = Value, O extends Value = I> extends Record implements Streamlet<I, O> {\n  isConstant(): boolean {\n    return false;\n  }\n\n  abstract readonly streamletScope: StreamletScope<O> | null;\n\n  abstract setStreamletScope(parent: StreamletScope<O> | null): void;\n\n  abstract readonly streamletContext: StreamletContext | null;\n\n  abstract setStreamletContext(context: StreamletContext | null): void;\n\n  abstract inlet(key: string): Inlet<I> | null;\n\n  abstract bindInput(key: string, input: Outlet<I>): void;\n\n  abstract unbindInput(key: string): void;\n\n  abstract outlet(key: string): Outlet<O> | null;\n\n  abstract disconnectInputs(): void;\n\n  abstract disconnectOutputs(): void;\n\n  abstract decohere(): void;\n\n  abstract recohere(version: number): void;\n\n  compile(): void {\n    AbstractStreamlet.reflectEachInlet<I, O, void, this>(this, Object.getPrototypeOf(this), function (inlet: Inlet<I>, name: string): void {\n      if (inlet.input === null) {\n        this.compileInlet(inlet, name);\n      }\n    }, this);\n  }\n\n  compileInlet(inlet: Inlet<I>, name: string): void {\n    const scope = this.streamletScope;\n    if (scope !== null) {\n      const input = scope.outlet(name);\n      if (input !== null) {\n        // Assume Outlet<O> conforms to Outlet<I>.\n        inlet.bindInput(input as Outlet<unknown> as Outlet<I>);\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Item, Field, Slot, AnyValue, Value, AnyText, Text, AnyNum, Num, Form} from \"@swim/structure\";\nimport {\n  Inlet,\n  Outlet,\n  Inoutlet,\n  StreamletContext,\n  GenericStreamlet,\n  AbstractStreamlet,\n  StreamletScope,\n  StreamletInlet,\n  StreamletOutlet,\n  StreamletInoutlet,\n} from \"@swim/streamlet\";\nimport {RecordStreamlet} from \"./RecordStreamlet\";\n\nexport abstract class AbstractRecordStreamlet<I extends Value = Value, O extends Value = I> extends RecordStreamlet<I, O> implements GenericStreamlet<I, O> {\n  constructor(scope: StreamletScope<O> | null = null) {\n    super();\n    Object.defineProperty(this, \"streamletScope\", {\n      value: scope,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"streamletContext\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly streamletScope: StreamletScope<O> | null;\n\n  setStreamletScope(scope: StreamletScope<O> | null): void {\n    Object.defineProperty(this, \"streamletScope\", {\n      value: scope,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly streamletContext: StreamletContext | null;\n\n  setStreamletContext(context: StreamletContext | null): void {\n    Object.defineProperty(this, \"streamletContext\", {\n      value: context,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly version: number;\n\n  isEmpty(): boolean {\n    return this.length !== 0;\n  }\n\n  get length(): number {\n    return AbstractStreamlet.reflectOutletCount(Object.getPrototypeOf(this));\n  }\n\n  has(key: AnyValue): boolean {\n    if (key instanceof Text) {\n      key = key.value;\n    } else if (typeof key !== \"string\") {\n      return false;\n    }\n    const outlet = this.outlet(key);\n    return outlet !== null;\n  }\n\n  get(key: AnyValue): Value {\n    if (key instanceof Text) {\n      key = key.value;\n    } else if (typeof key !== \"string\") {\n      return Value.absent();\n    }\n    const outlet = this.outlet(key);\n    if (outlet !== null) {\n      const output = outlet.get();\n      if (output !== void 0) {\n        return output;\n      }\n    }\n    return Value.absent();\n  }\n\n  getAttr(key: AnyText): Value {\n    return Value.absent();\n  }\n\n  getSlot(key: AnyValue): Value {\n    return this.get(key);\n  }\n\n  getField(key: AnyValue): Field | undefined {\n    if (typeof key === \"string\") {\n      key = Text.from(key);\n    } else if (!(key instanceof Text)) {\n      return void 0;\n    }\n    const value = this.get(key);\n    if (value.isDefined()) {\n      return Slot.of(key, value);\n    }\n    return void 0;\n  }\n\n  getItem(index: AnyNum): Item {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const entry = AbstractStreamlet.reflectOutletIndex<I, O>(index, this, Object.getPrototypeOf(this));\n    if (entry !== null) {\n      const name = entry[0];\n      let output = entry[1].get() as Value | undefined;\n      if (output === void 0) {\n        output = Value.extant();\n      }\n      return Slot.of(name, output);\n    }\n    return Item.absent();\n  }\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setItem(index: number, item: AnyItem): this {\n    throw new Error(\"unsupported\");\n  }\n\n  push(...items: AnyItem[]): number {\n    throw new Error(\"unsupported\");\n  }\n\n  splice(start: number, deleteCount?: number, ...newItems: AnyItem[]): Item[] {\n    throw new Error(\"unsupported\");\n  }\n\n  delete(key: AnyValue): Item {\n    throw new Error(\"unsupported\");\n  }\n\n  clear(): void {\n    throw new Error(\"unsupported\");\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | unknown, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    return AbstractStreamlet.reflectEachOutlet(this, Object.getPrototypeOf(this), function (outlet: Outlet<O>, name: string, index: number): T | void {\n      const output = outlet.get();\n      if (output !== void 0) {\n        const result = callback.call(thisArg, output, index);\n        if (result !== void 0) {\n          return result;\n        }\n      }\n    }, this);\n  }\n\n  inlet(key: string): Inlet<I> | null;\n  inlet<I2 extends I>(): Inlet<I2>;\n  inlet(key?: string): Inlet<I> | null {\n    if (key === void 0) {\n      return new StreamletInlet<I>(this);\n    } else {\n      return AbstractStreamlet.reflectInletKey<I, O>(key, this, Object.getPrototypeOf(this));\n    }\n  }\n\n  bindInput(key: string, input: Outlet<I>): void {\n    const inlet = this.inlet(key);\n    if (inlet === null) {\n      throw new Error(key);\n    }\n    inlet.bindInput(input);\n  }\n\n  unbindInput(key: string): void {\n    const inlet = this.inlet(key);\n    if (inlet === null) {\n      throw new Error(key);\n    }\n    inlet.unbindInput();\n  }\n\n  outlet(key: string | Outlet<O>): Outlet<O> | null;\n  outlet<O2 extends Value>(): Outlet<O2>;\n  outlet(key?: string | Outlet<O>): Outlet<O> | null {\n    if (key === void 0) {\n      return new StreamletOutlet<O>(this);\n    } else if (typeof key === \"string\") {\n      return AbstractStreamlet.reflectOutletKey<I, O>(key, this, Object.getPrototypeOf(this));\n    } else {\n      return key;\n    }\n  }\n\n  inoutlet<I2 extends I, O2 extends Value>(): Inoutlet<I2, O2> {\n    return new StreamletInoutlet<I2, O2>(this as RecordStreamlet<I2, O2>);\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      this.onDecohereOutlets();\n      this.didDecohere();\n    }\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohereInlets(version);\n      this.onRecohere(version);\n      this.onRecohereOutlets(version);\n      this.didRecohere(version);\n    }\n  }\n\n  getInput<I2 extends I>(inlet: Inlet<I2> | string): I2 | undefined;\n  getInput<I2 extends I, E = I2>(inlet: Inlet<I2> | string, orElse: E): I2 | E;\n  getInput<I2 extends I, E = I2>(inlet: Inlet<I2> | string, orElse?: E): I2 | E | undefined {\n    if (typeof inlet === \"string\") {\n      inlet = this.inlet(inlet) as Inlet<I2>;\n    }\n    let object: I2 | E | undefined;\n    if (inlet !== null) {\n      const input = inlet.input;\n      if (input !== null) {\n        object = input.get();\n      }\n    }\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object;\n  }\n\n  castInput<T>(inlet: Inlet<I> | string, form: Form<T, unknown>): T | undefined;\n  castInput<T, E = T>(inlet: Inlet<I> | string, form: Form<T, unknown>, orElse: E): T | E;\n  castInput<T, E = T>(inlet: Inlet<I> | string, form: Form<T, unknown>, orElse?: E): T | E | undefined {\n    const input = this.getInput(inlet);\n    let object: T | E | undefined;\n    if (input !== void 0) {\n      object = form.cast(input);\n    }\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object;\n  }\n\n  coerceInput<T>(inlet: Inlet<I> | string, form: Form<T, unknown>): T;\n  coerceInput<T, E = T>(inlet: Inlet<I> | string, form: Form<T, unknown>, orElse: E): T | E;\n  coerceInput<T, E = T>(inlet: Inlet<I> | string, form: Form<T, unknown>, orElse?: E): T | E {\n    const input = this.getInput(inlet);\n    let object: T | E | undefined;\n    if (input !== void 0) {\n      object = form.cast(input);\n    }\n    if (object === void 0) {\n      object = form.unit;\n    }\n    if (object === void 0) {\n      object = orElse;\n    }\n    return object!;\n  }\n\n  getOutput(outlet: Outlet<O> | string): O | undefined {\n    return void 0;\n  }\n\n  disconnectInputs(): void {\n    AbstractStreamlet.disconnectInputs(this, Object.getPrototypeOf(this));\n  }\n\n  disconnectOutputs(): void {\n    AbstractStreamlet.disconnectOutputs(this, Object.getPrototypeOf(this));\n  }\n\n  willDecohereInlet(inlet: Inlet<I>): void {\n    // hook\n  }\n\n  didDecohereInlet(inlet: Inlet<I>): void {\n    this.decohere();\n  }\n\n  willRecohereInlet(inlet: Inlet<I>, version: number): void {\n    // hook\n  }\n\n  didRecohereInlet(inlet: Inlet<I>, version: number): void {\n    this.recohere(version);\n  }\n\n  willDecohereOutlet(outlet: Outlet<O>): void {\n    // hook\n  }\n\n  didDecohereOutlet(outlet: Outlet<O>): void {\n    // hook\n  }\n\n  willRecohereOutlet(outlet: Outlet<O>, version: number): void {\n    // hook\n  }\n\n  didRecohereOutlet(outlet: Outlet<O>, version: number): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected onDecohereOutlets(): void {\n    AbstractStreamlet.decohereOutlets(this, Object.getPrototypeOf(this));\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohereInlets(version: number): void {\n    AbstractStreamlet.recohereInlets(version, this, Object.getPrototypeOf(this));\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohereOutlets(version: number): void {\n    AbstractStreamlet.recohereOutlets(version, this, Object.getPrototypeOf(this));\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Value, Record} from \"@swim/structure\";\nimport {KeyEffect, AbstractInlet} from \"@swim/streamlet\";\nimport {RecordOutlet} from \"./RecordOutlet\";\n\nexport class RecordFieldUpdater extends AbstractInlet<Value> {\n  constructor(record: Record, key: Value) {\n    super();\n    Object.defineProperty(this, \"record\", {\n      value: record,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"key\", {\n      value: key,\n      enumerable: true,\n    });\n  }\n\n  declare readonly record: Record;\n\n  declare readonly key: Value;\n\n  protected onDecohereOutput(): void {\n    const record = this.record;\n    if (RecordOutlet.is(record)) {\n      record.decohereInputKey(this.key, KeyEffect.Update);\n    }\n  }\n\n  protected onRecohereOutput(version: number): void {\n    const input = this.input;\n    if (input !== null) {\n      const value = input.get();\n      if (value !== void 0) {\n        this.record.set(this.key, value);\n      } else {\n        this.record.delete(this.key);\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {AnyItem, Item, Field, Slot, AnyValue, Value, Record, AnyText, Text, AnyNum, MathModule} from \"@swim/structure\";\nimport {KeyEffect, MapOutlet} from \"@swim/streamlet\";\nimport {RecordStreamlet} from \"./RecordStreamlet\";\nimport {AbstractRecordOutlet} from \"./AbstractRecordOutlet\";\nimport {RecordFieldUpdater} from \"./RecordFieldUpdater\";\nimport {RecordScope} from \"./\"; // forward import\nimport {Reifier} from \"./\"; // forward import\nimport {Dataflow} from \"./\"; // forward import\n\nexport class RecordModel extends AbstractRecordOutlet {\n  constructor(state?: Record) {\n    super();\n    if (state === void 0) {\n      state = Record.create();\n    }\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"fieldUpdaters\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly state: Record;\n\n  /** @hidden */\n  declare readonly fieldUpdaters: BTree<Value, RecordFieldUpdater>;\n\n  isEmpty(): boolean {\n    return this.state.isEmpty();\n  }\n\n  isArray(): boolean {\n    return this.state.isArray();\n  }\n\n  isObject(): boolean {\n    return this.state.isObject();\n  }\n\n  get length(): number {\n    return this.state.length;\n  }\n\n  get fieldCount(): number {\n    return this.state.fieldCount;\n  }\n\n  get valueCount(): number {\n    return this.state.valueCount;\n  }\n\n  has(key: AnyValue): boolean {\n    if (this.state.has(key)) {\n      return true;\n    } else {\n      const scope = this.streamletScope;\n      return scope instanceof Record ? scope.has(key) : false;\n    }\n  }\n\n  hasOwn(key: AnyValue): boolean {\n    return this.state.has(key);\n  }\n\n  indexOf(item: AnyItem, index?: number): number {\n    return this.state.indexOf(item, index);\n  }\n\n  lastIndexOf(item: AnyItem, index: number = 0): number {\n    return this.state.lastIndexOf(item, index);\n  }\n\n  get(): Record;\n  get(key: AnyValue): Value;\n  get(key?: AnyValue): Record | Value {\n    if (key === void 0) {\n      return this;\n    } else {\n      key = Value.fromAny(key);\n      let value = this.state.get(key);\n      if (!value.isDefined()) {\n        const scope = this.streamletScope;\n        if (scope instanceof Record) {\n          value = scope.get(key);\n        }\n      }\n      return value;\n    }\n  }\n\n  getAttr(key: AnyText): Value {\n    key = Text.fromAny(key);\n    let value = this.state.getAttr(key);\n    if (!value.isDefined()) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record) {\n        value = scope.getAttr(key);\n      }\n    }\n    return value;\n  }\n\n  getSlot(key: AnyValue): Value {\n    key = Value.fromAny(key);\n    let value = this.state.getSlot(key);\n    if (!value.isDefined()) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record) {\n        value = scope.getSlot(key);\n      }\n    }\n    return value;\n  }\n\n  getField(key: AnyValue): Field | undefined {\n    key = Value.fromAny(key);\n    let field = this.state.getField(key);\n    if (field === void 0) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record) {\n        field = scope.getField(key);\n      }\n    }\n    return field;\n  }\n\n  getItem(index: AnyNum): Item {\n    return this.state.getItem(index);\n  }\n\n  bindValue(key: Value, expr: Value): void {\n    const fieldUpdater = new RecordFieldUpdater(this, key);\n    const valueInput = Dataflow.compile(expr, this);\n    fieldUpdater.bindInput(valueInput);\n    // TODO: clean up existing field updater\n    Object.defineProperty(this, \"fieldUpdaters\", {\n      value: this.fieldUpdaters.updated(key, fieldUpdater),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    key = Value.fromAny(key);\n    if (!this.state.has(key)) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record && scope.has(key)) {\n        scope.set(key, newValue);\n      } else {\n        this.state.set(key, newValue);\n      }\n    } else {\n      this.state.set(key, newValue);\n    }\n    this.decohereInputKey(key, KeyEffect.Update);\n    return this;\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    key = Text.fromAny(key);\n    if (!this.state.has(key)) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record && scope.has(key)) {\n        scope.setAttr(key, newValue);\n      } else {\n        this.state.setAttr(key, newValue);\n      }\n    } else {\n      this.state.setAttr(key, newValue);\n    }\n    this.decohereInputKey(key, KeyEffect.Update);\n    return this;\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    key = Value.fromAny(key);\n    if (!this.state.has(key)) {\n      const scope = this.streamletScope;\n      if (scope instanceof Record && scope.has(key)) {\n        scope.setSlot(key, newValue);\n      } else {\n        this.state.setSlot(key, newValue);\n      }\n    } else {\n      this.state.setSlot(key, newValue);\n    }\n    this.decohereInputKey(key, KeyEffect.Update);\n    return this;\n  }\n\n  setItem(index: number, newItem: AnyItem): this {\n    const oldItem = this.state.getItem(index);\n    newItem = Item.fromAny(newItem);\n    this.state.setItem(index, newItem);\n    if (oldItem instanceof Field && newItem instanceof Field) {\n      if (oldItem.key.equals(newItem.key)) {\n        this.decohereInputKey(oldItem.key, KeyEffect.Update);\n      } else {\n        this.decohereInputKey(oldItem.key, KeyEffect.Remove);\n        this.decohereInputKey(newItem.key, KeyEffect.Update);\n      }\n    } else if (oldItem instanceof Field) {\n      this.decohereInputKey(oldItem.key, KeyEffect.Remove);\n    } else if (newItem instanceof Field) {\n      this.decohereInputKey(newItem.key, KeyEffect.Update);\n    } else {\n      this.decohereInput();\n    }\n    return this;\n  }\n\n  push(...newItems: AnyItem[]): number {\n    let i = this.state.length;\n    const n = this.state.push(...newItems);\n    while (i < n) {\n      const newItem = this.state.get(i);\n      if (newItem instanceof Field) {\n        this.decohereInputKey(newItem.key, KeyEffect.Update);\n      }\n      i += 1;\n    }\n    return n;\n  }\n\n  splice(start: number, deleteCount: number = 0, ...newItems: AnyItem[]): Item[] {\n    const n = this.state.length;\n    if (start < 0) {\n      start = n + start;\n    }\n    start = Math.max(0, start);\n    deleteCount = Math.max(0, deleteCount);\n    const deleted = this.state.splice(start, deleteCount, ...newItems);\n    for (let i = 0; i < deleted.length; i += 1) {\n      const oldItem = deleted[i];\n      if (oldItem instanceof Field) {\n        this.decohereInputKey(oldItem.key, KeyEffect.Remove);\n      }\n    }\n    for (let i = start; i < start + newItems.length; i += 1) {\n      const newItem = this.state.get(i);\n      if (newItem instanceof Field) {\n        this.decohereInputKey(newItem.key, KeyEffect.Update);\n      }\n    }\n    return deleted;\n  }\n\n  delete(key: AnyValue): Item {\n    const oldItem = this.state.delete(key);\n    if (oldItem instanceof Field) {\n      this.decohereInputKey(oldItem.key, KeyEffect.Remove);\n    }\n    return oldItem;\n  }\n\n  clear(): void {\n    const oldState = this.state.branch();\n    this.state.clear();\n    oldState.forEach(function (oldItem: Item): void {\n      if (oldItem instanceof Field) {\n        this.decohereInputKey(oldItem.key, KeyEffect.Remove);\n      }\n    }, this);\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    return this.state.forEach(callback, thisArg);\n  }\n\n  keyIterator(): Cursor<Value> {\n    throw new Error(); // TODO\n  }\n\n  disconnectInputs(): void {\n    const oldFieldUpdaters = this.fieldUpdaters;\n    if (!oldFieldUpdaters.isEmpty()) {\n      Object.defineProperty(this, \"fieldUpdaters\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldFieldUpdaters.forEach(function (key: Value, inlet: RecordFieldUpdater): void {\n        inlet.disconnectInputs();\n      }, this);\n    }\n  }\n\n  memoize(): MapOutlet<Value, Value, Record> {\n    return this;\n  }\n\n  materialize(record: Record): void {\n    record.forEach(function (item: Item): void {\n      this.materializeItem(item);\n    }, this);\n  }\n\n  materializeItem(item: Item): void {\n    if (item instanceof Field) {\n      this.materializeField(item);\n    } else {\n      this.materializeValue(item);\n    }\n  }\n\n  materializeField(field: Field): void {\n    const value = field.value;\n    if (value instanceof RecordStreamlet) {\n      value.setStreamletScope(this);\n      this.state.push(field);\n    } else if (value instanceof Record) {\n      // Add recursively materialized nested scope.\n      const child = new RecordScope(this);\n      child.materialize(value);\n      this.state.push(field.updatedValue(child));\n    } else {\n      this.state.push(field);\n    }\n  }\n\n  materializeValue(value: Value): void {\n    if (value instanceof RecordStreamlet) {\n      value.setStreamletScope(this);\n      this.state.push(value);\n    } else if (value instanceof Record) {\n      // Add recursively materialized nested scope.\n      const child = new RecordScope(this);\n      child.materialize(value);\n      this.state.push(child);\n    } else {\n      this.state.push(value);\n    }\n  }\n\n  compile(record: Record): void {\n    record.forEach(function (item: Item, index: number): void {\n      this.compileItem(item, index);\n    }, this);\n  }\n\n  compileItem(item: Item, index: number): void {\n    if (item instanceof Field) {\n      this.compileField(item, index);\n    } else {\n      this.compileValue(item, index);\n    }\n  }\n\n  compileField(field: Field, index: number): void {\n    const key = field.key;\n    const value = field.value;\n    if (!key.isConstant()) {\n      // TODO: Add dynamic key updater.\n    } else if (!value.isConstant()) {\n      if (value instanceof RecordStreamlet) {\n        // Lexically bind nested streamlet.\n        value.compile();\n        // Decohere nested scope key.\n        this.decohereInputKey(key, KeyEffect.Update);\n      } else if (value instanceof Record) {\n        // Recursively compile nested scope.\n        (this.state.getItem(index).toValue() as RecordModel).compile(value);\n        // Decohere nested scope key.\n        this.decohereInputKey(key, KeyEffect.Update);\n      } else {\n        // Set placeholder value.\n        field.setValue(Value.extant());\n        // Bind dynamic value updater.\n        this.bindValue(key, value);\n      }\n    } else {\n      // Decohere constant key.\n      this.decohereInputKey(key, KeyEffect.Update);\n    }\n  }\n\n  compileValue(value: Value, index: number): void {\n    if (value instanceof RecordStreamlet) {\n      value.compile();\n    } else if (value instanceof Record) {\n      // Recursively compile nested scope.\n      (this.state.getItem(index) as RecordModel).compile(value);\n    } else if (!value.isConstant()) {\n      // TODO: Bind dynamic item updater.\n    } else {\n      // TODO: Fold constant expressions.\n    }\n  }\n\n  reify(reifier: Reifier | null = Reifier.system()): void {\n    this.forEach(function (oldItem: Item, index: number): void {\n      const newItem = this.reifyItem(oldItem, reifier);\n      if (oldItem !== newItem) {\n        this.setItem(index, newItem);\n      }\n    }, this);\n  }\n\n  reifyItem(item: Item, reifier: Reifier | null): Item {\n    if (reifier !== null) {\n      item = reifier.reify(item);\n    }\n    const scope = this.streamletScope;\n    if (scope instanceof RecordModel) {\n      return scope.reifyItem(item, reifier);\n    } else {\n      return item;\n    }\n  }\n\n  static from(record: Record): RecordModel {\n    const model = new RecordModel();\n    model.materialize(record);\n    model.compile(record);\n    return model;\n  }\n\n  static of(...items: AnyItem[]): RecordModel {\n    return RecordModel.from(Record.of(...items));\n  }\n\n  static globalScope(): RecordModel {\n    const model = new RecordModel();\n    model.materializeField(Slot.of(\"math\", MathModule.scope.branch()));\n    return model;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyItem, Value, Record} from \"@swim/structure\";\nimport type {StreamletScope} from \"@swim/streamlet\";\nimport {RecordModel} from \"./RecordModel\";\n\nexport class RecordScope extends RecordModel {\n  constructor(scope: StreamletScope<Value> | null, state?: Record) {\n    super(state);\n    Object.defineProperty(this, \"streamletScope\", {\n      value: scope,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly streamletScope: StreamletScope<Value> | null;\n\n  static from(record: Record): RecordScope {\n    const scope = new RecordScope(RecordScope.globalScope());\n    scope.materialize(record);\n    scope.compile(record);\n    return scope;\n  }\n\n  static of(...items: AnyItem[]): RecordScope {\n    return RecordScope.from(Record.of(...items));\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item} from \"@swim/structure\";\n\nexport abstract class Reifier {\n  abstract reify(item: Item): Item;\n\n  static system(): Reifier {\n    return null as unknown as Reifier; // TODO\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {AbstractOutlet, OutletInlet, OutletMapInlet} from \"@swim/streamlet\";\n\n/** @hidden */\nexport class GetOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"keyInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"mapInlet\", {\n      value: new OutletMapInlet<Value, Value, unknown>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly keyInlet: OutletInlet<Value>;\n\n  declare readonly mapInlet: OutletMapInlet<Value, Value, unknown>;\n\n  get(): Value {\n    const keyInput = this.keyInlet.input;\n    if (keyInput !== null) {\n      const key = keyInput.get();\n      if (key !== void 0) {\n        const mapInput = this.mapInlet.input;\n        if (mapInput !== null) {\n          const value = mapInput.get(key);\n          if (value !== void 0) {\n            return value;\n          }\n        }\n      }\n    }\n    return Value.absent();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Value} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport abstract class BinaryOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"operand1Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"operand2Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly operand1Inlet: Inlet<Value>;\n\n  declare readonly operand2Inlet: Inlet<Value>;\n\n  get(): Value {\n    const operand1Input = this.operand1Inlet.input;\n    const operand2Input = this.operand2Inlet.input;\n    if (operand1Input !== null && operand2Input !== null) {\n      const argument1 = operand1Input.get();\n      const argument2 = operand2Input.get();\n      if (argument1 !== void 0 && argument2 !== void 0) {\n        const result = this.evaluate(argument1, argument2);\n        return result.toValue();\n      }\n    }\n    return Value.absent();\n  }\n\n  protected abstract evaluate(argument1: Value, argument2: Value): Item;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Value} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport abstract class UnaryOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"operandInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly operandInlet: Inlet<Value>;\n\n  get(): Value {\n    const operandInput = this.operandInlet.input;\n    if (operandInput !== null) {\n      const argument = operandInput.get();\n      if (argument !== void 0) {\n        const result = this.evaluate(argument);\n        return result.toValue();\n      }\n    }\n    return Value.absent();\n  }\n\n  protected abstract evaluate(argument: Value): Item;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport class ConditionalOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"ifInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"thenInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"elseInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly ifInlet: Inlet<Value>;\n\n  declare readonly thenInlet: Inlet<Value>;\n\n  declare readonly elseInlet: Inlet<Value>;\n\n  get(): Value {\n    const ifInput = this.ifInlet.input;\n    if (ifInput !== null) {\n      const ifTerm = ifInput.get();\n      if (ifTerm !== void 0) {\n        if (ifTerm.booleanValue(false)) {\n          const thenInput = this.thenInlet.input;\n          if (thenInput !== null) {\n            const thenTerm = thenInput.get();\n            if (thenTerm !== void 0) {\n              return thenTerm;\n            }\n          }\n        } else {\n          const elseInput = this.elseInlet.input;\n          if (elseInput !== null) {\n            const elseTerm = elseInput.get();\n            if (elseTerm !== void 0) {\n              return elseTerm;\n            }\n          }\n        }\n      }\n    }\n    return Value.absent();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport class OrOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"operand1Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"operand2Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly operand1Inlet: Inlet<Value>;\n\n  declare readonly operand2Inlet: Inlet<Value>;\n\n  get(): Value {\n    const operand1Input = this.operand1Inlet.input;\n    const argument1 = operand1Input !== null ? operand1Input.get() : void 0;\n    if (argument1 !== void 0 && argument1.booleanValue(false)) {\n      return argument1;\n    }\n    const operand2Input = this.operand2Inlet.input;\n    const argument2 = operand2Input !== null ? operand2Input.get() : void 0;\n    if (argument2 !== void 0) {\n      return argument2;\n    }\n    return Value.absent();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport class AndOutlet extends AbstractOutlet<Value> {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"operand1Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"operand2Inlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  declare readonly operand1Inlet: Inlet<Value>;\n\n  declare readonly operand2Inlet: Inlet<Value>;\n\n  get(): Value {\n    const operand1Input = this.operand1Inlet.input;\n    const argument1 = operand1Input !== null ? operand1Input.get() : void 0;\n    if (argument1 !== void 0) {\n      if (argument1.booleanValue(false)) {\n        const operand2Input = this.operand2Inlet.input;\n        const argument2 = operand2Input !== null ? operand2Input.get() : void 0;\n        if (argument2 !== void 0) {\n          return argument2;\n        }\n      }\n      return argument1;\n    }\n    return Value.absent();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class BitwiseOrOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.bitwiseOr(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class BitwiseXorOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.bitwiseXor(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class BitwiseAndOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.bitwiseAnd(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class LtOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.lt(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class LeOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.le(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class EqOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.eq(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class NeOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.ne(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class GeOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.ge(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class GtOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.gt(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class PlusOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.plus(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class MinusOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.minus(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class TimesOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.times(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class DivideOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.divide(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {BinaryOutlet} from \"./BinaryOutlet\";\n\nexport class ModuloOutlet extends BinaryOutlet {\n  protected evaluate(argument1: Value, argument2: Value): Item {\n    return argument1.modulo(argument2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {UnaryOutlet} from \"./UnaryOutlet\";\n\nexport class NotOutlet extends UnaryOutlet {\n  protected evaluate(argument: Value): Item {\n    return argument.not();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {UnaryOutlet} from \"./UnaryOutlet\";\n\nexport class BitwiseNotOutlet extends UnaryOutlet {\n  protected evaluate(argument: Value): Item {\n    return argument.bitwiseNot();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {UnaryOutlet} from \"./UnaryOutlet\";\n\nexport class NegativeOutlet extends UnaryOutlet {\n  protected evaluate(argument: Value): Item {\n    return argument.negative();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Item, Value} from \"@swim/structure\";\nimport {UnaryOutlet} from \"./UnaryOutlet\";\n\nexport class PositiveOutlet extends UnaryOutlet {\n  protected evaluate(argument: Value): Item {\n    return argument.positive();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value, Record, Func, Interpreter} from \"@swim/structure\";\nimport {Inlet, AbstractOutlet, OutletInlet} from \"@swim/streamlet\";\n\nexport class InvokeOutlet extends AbstractOutlet<Value> {\n  constructor(scope: Record) {\n    super();\n    Object.defineProperty(this, \"scope\", {\n      value: scope,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"funcInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"argsInlet\", {\n      value: new OutletInlet<Value>(this),\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly scope: Record;\n\n  declare readonly funcInlet: Inlet<Value>;\n\n  declare readonly argsInlet: Inlet<Value>;\n\n  get(): Value {\n    const funcInput = this.funcInlet.input;\n    const argsInput = this.argsInlet.input;\n    if (funcInput !== null && argsInput !== null) {\n      const func = funcInput.get();\n      if (func instanceof Func) {\n        const args = argsInput.get();\n        if (args !== void 0) {\n          const interpreter = new Interpreter();\n          interpreter.pushScope(this.scope);\n          const result = func.invoke(args, interpreter, void 0 /* TODO: generalize InvokeOperator to InvokeContext */);\n          return result.toValue();\n        }\n      }\n    }\n    return Value.absent();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n  Value,\n  Record,\n  Selector,\n  IdentitySelector,\n  GetSelector,\n  GetAttrSelector,\n  GetItemSelector,\n  KeysSelector,\n  ValuesSelector,\n  ChildrenSelector,\n  DescendantsSelector,\n  FilterSelector,\n  Operator,\n  BinaryOperator,\n  UnaryOperator,\n  ConditionalOperator,\n  OrOperator,\n  AndOperator,\n  BitwiseOrOperator,\n  BitwiseXorOperator,\n  BitwiseAndOperator,\n  LtOperator,\n  LeOperator,\n  EqOperator,\n  NeOperator,\n  GeOperator,\n  GtOperator,\n  PlusOperator,\n  MinusOperator,\n  TimesOperator,\n  DivideOperator,\n  ModuloOperator,\n  NotOperator,\n  BitwiseNotOperator,\n  NegativeOperator,\n  PositiveOperator,\n  InvokeOperator,\n} from \"@swim/structure\";\nimport {Outlet, MapOutlet, KeyOutlet, StreamletScope, ValueInput} from \"@swim/streamlet\";\nimport {RecordOutlet} from \"./RecordOutlet\";\nimport {GetOutlet} from \"./selector/GetOutlet\";\nimport type {BinaryOutlet} from \"./operator/BinaryOutlet\";\nimport type {UnaryOutlet} from \"./operator/UnaryOutlet\";\nimport {ConditionalOutlet} from \"./operator/ConditionalOutlet\";\nimport {OrOutlet} from \"./operator/OrOutlet\";\nimport {AndOutlet} from \"./operator/AndOutlet\";\nimport {BitwiseOrOutlet} from \"./operator/BitwiseOrOutlet\";\nimport {BitwiseXorOutlet} from \"./operator/BitwiseXorOutlet\";\nimport {BitwiseAndOutlet} from \"./operator/BitwiseAndOutlet\";\nimport {LtOutlet} from \"./operator/LtOutlet\";\nimport {LeOutlet} from \"./operator/LeOutlet\";\nimport {EqOutlet} from \"./operator/EqOutlet\";\nimport {NeOutlet} from \"./operator/NeOutlet\";\nimport {GeOutlet} from \"./operator/GeOutlet\";\nimport {GtOutlet} from \"./operator/GtOutlet\";\nimport {PlusOutlet} from \"./operator/PlusOutlet\";\nimport {MinusOutlet} from \"./operator/MinusOutlet\";\nimport {TimesOutlet} from \"./operator/TimesOutlet\";\nimport {DivideOutlet} from \"./operator/DivideOutlet\";\nimport {ModuloOutlet} from \"./operator/ModuloOutlet\";\nimport {NotOutlet} from \"./operator/NotOutlet\";\nimport {BitwiseNotOutlet} from \"./operator/BitwiseNotOutlet\";\nimport {NegativeOutlet} from \"./operator/NegativeOutlet\";\nimport {PositiveOutlet} from \"./operator/PositiveOutlet\";\nimport {InvokeOutlet} from \"./operator/InvokeOutlet\";\n\nexport const Dataflow = {} as {\n  /**\n   * Returns an `Outlet` that evaluates the given `expr` in the context of the\n   * given `scope`, and updates whenever any dependent expression updates.\n   */\n  compile(expr: Value, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileSelector(selector: Selector, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileIdentitySelector(scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileGetSelector(selector: GetSelector, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileGetAttrSelector(selector: GetAttrSelector, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileGetItemSelector(selector: GetItemSelector, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileKeysSelector(scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileValuesSelector(scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileChildrenSelector(scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileDescendantsSelector(scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileFilterSelector(selector: FilterSelector, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileOperator(operator: Operator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileConditionalOperator(operator: ConditionalOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBinaryOperator(operator: BinaryOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBinaryOutlet(operator: BinaryOperator, outlet: BinaryOutlet, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileOrOperator(operator: OrOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileAndOperator(operator: AndOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBitwiseOrOperator(operator: BitwiseOrOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBitwiseXorOperator(operator: BitwiseXorOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBitwiseAndOperator(operator: BitwiseAndOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileLtOperator(operator: LtOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileLeOperator(operator: LeOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileEqOperator(operator: EqOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileNeOperator(operator: NeOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileGeOperator(operator: GeOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileGtOperator(operator: GtOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compilePlusOperator(operator: PlusOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileMinusOperator(operator: MinusOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileTimesOperator(operator: TimesOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileDivideOperator(operator: DivideOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileModuloOperator(operator: ModuloOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileUnaryOperator(operator: UnaryOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileUnaryOutlet(operator: UnaryOperator, outlet: UnaryOutlet, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileNotOperator(operator: NotOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileBitwiseNotOperator(operator: BitwiseNotOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileNegativeOperator(operator: NegativeOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compilePositiveOperator(operator: PositiveOperator, scope: Outlet<Value>): Outlet<Value>;\n\n  /** @hidden */\n  compileInvokeOperator(operator: InvokeOperator, scope: Outlet<Value>): Outlet<Value>;\n};\n\nDataflow.compile = function (expr: Value, scope: Outlet<Value>): Outlet<Value> {\n  if (scope instanceof KeyOutlet) {\n    const value = scope.get();\n    if (Outlet.is<Value>(value)) {\n      scope = value;\n    }\n  }\n  if (expr.isConstant()) {\n    return new ValueInput<Value>(expr);\n  } else if (expr instanceof Selector) {\n    return Dataflow.compileSelector(expr, scope);\n  } else if (expr instanceof Operator) {\n    return Dataflow.compileOperator(expr, scope);\n  }\n  throw new TypeError(\"\" + expr);\n};\n\nDataflow.compileSelector = function (selector: Selector, scope: Outlet<Value>): Outlet<Value> {\n  if (selector instanceof IdentitySelector) {\n    return Dataflow.compileIdentitySelector(scope);\n  } else if (selector instanceof GetSelector) {\n    return Dataflow.compileGetSelector(selector, scope);\n  } else if (selector instanceof GetAttrSelector) {\n    return Dataflow.compileGetAttrSelector(selector, scope);\n  } else if (selector instanceof GetItemSelector) {\n    return Dataflow.compileGetItemSelector(selector, scope);\n  } else if (selector instanceof KeysSelector) {\n    return Dataflow.compileKeysSelector(scope);\n  } else if (selector instanceof ValuesSelector) {\n    return Dataflow.compileValuesSelector(scope);\n  } else if (selector instanceof ChildrenSelector) {\n    return Dataflow.compileChildrenSelector(scope);\n  } else if (selector instanceof DescendantsSelector) {\n    return Dataflow.compileDescendantsSelector(scope);\n  } else if (selector instanceof FilterSelector) {\n    return Dataflow.compileFilterSelector(selector, scope);\n  }\n  throw new TypeError(\"\" + selector);\n};\n\nDataflow.compileIdentitySelector = function (scope: Outlet<Value>): Outlet<Value> {\n  return scope;\n};\n\nDataflow.compileGetSelector = function (selector: GetSelector, scope: Outlet<Value>): Outlet<Value> {\n  const key = selector.item;\n  if (key.isConstant()) {\n    if (RecordOutlet.is(scope)) {\n      const outlet = scope.outlet(key);\n      if (outlet !== null) {\n        return Dataflow.compile(selector.then, outlet);\n      }\n    } else if (StreamletScope.is<Value>(scope)) {\n      const name = key.stringValue(void 0);\n      if (name !== void 0) {\n        const outlet = scope.outlet(name);\n        if (outlet !== null) {\n          return Dataflow.compile(selector.then, outlet);\n        }\n      }\n    }\n  } else {\n    const getOutlet = new GetOutlet();\n    const outlet = Dataflow.compile(key, scope);\n    getOutlet.keyInlet.bindInput(outlet);\n    getOutlet.mapInlet.bindInput(scope as MapOutlet<Value, Value, unknown>);\n    return getOutlet;\n  }\n  return null as unknown as Outlet<Value>;\n};\n\nDataflow.compileGetAttrSelector = function (selector: GetAttrSelector, scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileGetItemSelector = function (selector: GetItemSelector, scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileKeysSelector = function (scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileValuesSelector = function (scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileChildrenSelector = function (scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileDescendantsSelector = function (scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileFilterSelector = function (selector: FilterSelector, scope: Outlet<Value>): Outlet<Value> {\n  throw new Error(); // TODO\n};\n\nDataflow.compileOperator = function (operator: Operator, scope: Outlet<Value>): Outlet<Value> {\n  if (operator instanceof ConditionalOperator) {\n    return Dataflow.compileConditionalOperator(operator, scope);\n  } else if (operator instanceof BinaryOperator) {\n    return Dataflow.compileBinaryOperator(operator, scope);\n  } else if (operator instanceof UnaryOperator) {\n    return Dataflow.compileUnaryOperator(operator, scope);\n  } else if (operator instanceof InvokeOperator) {\n    return Dataflow.compileInvokeOperator(operator, scope);\n  }\n  throw new TypeError(\"\" + operator);\n};\n\nDataflow.compileConditionalOperator = function (operator: ConditionalOperator, scope: Outlet<Value>): Outlet<Value> {\n  const outlet = new ConditionalOutlet();\n  const ifTerm = operator.ifTerm.toValue();\n  const thenTerm = operator.thenTerm.toValue();\n  const elseTerm = operator.elseTerm.toValue();\n  const ifOutlet = Dataflow.compile(ifTerm, scope);\n  const thenOutlet = Dataflow.compile(thenTerm, scope);\n  const elseOutlet = Dataflow.compile(elseTerm, scope);\n  outlet.ifInlet.bindInput(ifOutlet);\n  outlet.thenInlet.bindInput(thenOutlet);\n  outlet.elseInlet.bindInput(elseOutlet);\n  return outlet;\n};\n\nDataflow.compileBinaryOperator = function (operator: BinaryOperator, scope: Outlet<Value>): Outlet<Value> {\n  if (operator instanceof OrOperator) {\n    return Dataflow.compileOrOperator(operator, scope);\n  } else if (operator instanceof AndOperator) {\n    return Dataflow.compileAndOperator(operator, scope);\n  } else if (operator instanceof BitwiseOrOperator) {\n    return Dataflow.compileBitwiseOrOperator(operator, scope);\n  } else if (operator instanceof BitwiseXorOperator) {\n    return Dataflow.compileBitwiseXorOperator(operator, scope);\n  } else if (operator instanceof BitwiseAndOperator) {\n    return Dataflow.compileBitwiseAndOperator(operator, scope);\n  } else if (operator instanceof LtOperator) {\n    return Dataflow.compileLtOperator(operator, scope);\n  } else if (operator instanceof LeOperator) {\n    return Dataflow.compileLeOperator(operator, scope);\n  } else if (operator instanceof EqOperator) {\n    return Dataflow.compileEqOperator(operator, scope);\n  } else if (operator instanceof NeOperator) {\n    return Dataflow.compileNeOperator(operator, scope);\n  } else if (operator instanceof GeOperator) {\n    return Dataflow.compileGeOperator(operator, scope);\n  } else if (operator instanceof GtOperator) {\n    return Dataflow.compileGtOperator(operator, scope);\n  } else if (operator instanceof PlusOperator) {\n    return Dataflow.compilePlusOperator(operator, scope);\n  } else if (operator instanceof MinusOperator) {\n    return Dataflow.compileMinusOperator(operator, scope);\n  } else if (operator instanceof TimesOperator) {\n    return Dataflow.compileTimesOperator(operator, scope);\n  } else if (operator instanceof DivideOperator) {\n    return Dataflow.compileDivideOperator(operator, scope);\n  } else if (operator instanceof ModuloOperator) {\n    return Dataflow.compileModuloOperator(operator, scope);\n  }\n  throw new TypeError(\"\" + operator);\n};\n\nDataflow.compileBinaryOutlet = function (operator: BinaryOperator, outlet: BinaryOutlet, scope: Outlet<Value>): Outlet<Value> {\n  const operand1 = operator.operand1.toValue();\n  const operand2 = operator.operand2.toValue();\n  const operand1Outlet = Dataflow.compile(operand1, scope);\n  const operand2Outlet = Dataflow.compile(operand2, scope);\n  outlet.operand1Inlet.bindInput(operand1Outlet);\n  outlet.operand2Inlet.bindInput(operand2Outlet);\n  return outlet;\n};\n\nDataflow.compileOrOperator = function (operator: OrOperator, scope: Outlet<Value>): Outlet<Value> {\n  const outlet = new OrOutlet();\n  const operand1 = operator.operand1.toValue();\n  const operand2 = operator.operand2.toValue();\n  const operand1Outlet = Dataflow.compile(operand1, scope);\n  const operand2Outlet = Dataflow.compile(operand2, scope);\n  outlet.operand1Inlet.bindInput(operand1Outlet);\n  outlet.operand2Inlet.bindInput(operand2Outlet);\n  return outlet;\n};\n\nDataflow.compileAndOperator = function (operator: AndOperator, scope: Outlet<Value>): Outlet<Value> {\n  const outlet = new AndOutlet();\n  const operand1 = operator.operand1.toValue();\n  const operand2 = operator.operand2.toValue();\n  const operand1Outlet = Dataflow.compile(operand1, scope);\n  const operand2Outlet = Dataflow.compile(operand2, scope);\n  outlet.operand1Inlet.bindInput(operand1Outlet);\n  outlet.operand2Inlet.bindInput(operand2Outlet);\n  return outlet;\n};\n\nDataflow.compileBitwiseOrOperator = function (operator: BitwiseOrOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new BitwiseOrOutlet(), scope);\n};\n\nDataflow.compileBitwiseXorOperator = function (operator: BitwiseXorOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new BitwiseXorOutlet(), scope);\n};\n\nDataflow.compileBitwiseAndOperator = function (operator: BitwiseAndOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new BitwiseAndOutlet(), scope);\n};\n\nDataflow.compileLtOperator = function (operator: LtOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new LtOutlet(), scope);\n};\n\nDataflow.compileLeOperator = function (operator: LeOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new LeOutlet(), scope);\n};\n\nDataflow.compileEqOperator = function (operator: EqOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new EqOutlet(), scope);\n};\n\nDataflow.compileNeOperator = function (operator: NeOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new NeOutlet(), scope);\n};\n\nDataflow.compileGeOperator = function (operator: GeOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new GeOutlet(), scope);\n};\n\nDataflow.compileGtOperator = function (operator: GtOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new GtOutlet(), scope);\n};\n\nDataflow.compilePlusOperator = function (operator: PlusOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new PlusOutlet(), scope);\n};\n\nDataflow.compileMinusOperator = function (operator: MinusOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new MinusOutlet(), scope);\n};\n\nDataflow.compileTimesOperator = function (operator: TimesOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new TimesOutlet(), scope);\n};\n\nDataflow.compileDivideOperator = function (operator: DivideOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new DivideOutlet(), scope);\n};\n\nDataflow.compileModuloOperator = function (operator: ModuloOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileBinaryOutlet(operator, new ModuloOutlet(), scope);\n};\n\nDataflow.compileUnaryOperator = function (operator: UnaryOperator, scope: Outlet<Value>): Outlet<Value> {\n  if (operator instanceof NotOperator) {\n    return Dataflow.compileNotOperator(operator, scope);\n  } else if (operator instanceof BitwiseNotOperator) {\n    return Dataflow.compileBitwiseNotOperator(operator, scope);\n  } else if (operator instanceof NegativeOperator) {\n    return Dataflow.compileNegativeOperator(operator, scope);\n  } else if (operator instanceof PositiveOperator) {\n    return Dataflow.compilePositiveOperator(operator, scope);\n  }\n  throw new TypeError(\"\" + operator);\n};\n\nDataflow.compileUnaryOutlet = function (operator: UnaryOperator, outlet: UnaryOutlet, scope: Outlet<Value>): Outlet<Value> {\n  const operand = operator.operand.toValue();\n  const operandOutlet = Dataflow.compile(operand, scope);\n  outlet.operandInlet.bindInput(operandOutlet);\n  return outlet;\n};\n\nDataflow.compileNotOperator = function (operator: NotOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileUnaryOutlet(operator, new NotOutlet(), scope);\n};\n\nDataflow.compileBitwiseNotOperator = function (operator: BitwiseNotOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileUnaryOutlet(operator, new BitwiseNotOutlet(), scope);\n};\n\nDataflow.compileNegativeOperator = function (operator: NegativeOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileUnaryOutlet(operator, new NegativeOutlet(), scope);\n};\n\nDataflow.compilePositiveOperator = function (operator: PositiveOperator, scope: Outlet<Value>): Outlet<Value> {\n  return Dataflow.compileUnaryOutlet(operator, new PositiveOutlet(), scope);\n};\n\nDataflow.compileInvokeOperator = function (operator: InvokeOperator, scope: Outlet<Value>): Outlet<Value> {\n  const func = operator.func;\n  const args = operator.args;\n  const invokeOutlet = new InvokeOutlet(scope as unknown as Record);\n  const funcOutlet = Dataflow.compile(func, scope);\n  const argsOutlet = Dataflow.compile(args, scope);\n  invokeOutlet.funcInlet.bindInput(funcOutlet);\n  invokeOutlet.argsInlet.bindInput(argsOutlet);\n  return invokeOutlet;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Parser, Writer, Unicode, Utf8} from \"@swim/codec\";\nimport {Item, Value, Data} from \"@swim/structure\";\nimport type {ReconParser} from \"./parser/ReconParser\";\nimport {ReconStructureParser} from \"./\"; // forward import\nimport type {ReconWriter} from \"./writer/ReconWriter\";\nimport {ReconStructureWriter} from \"./\"; // forward import\n\n/**\n * Factory for constructing Recon parsers and writers.\n */\nexport const Recon = {} as {\n  structureParser(): ReconParser<Item, Value>;\n\n  structureWriter(): ReconWriter<Item, Value>;\n\n  parse(recon: string): Value;\n\n  parser(): Parser<Value>;\n\n  sizeOf(item: Item): number;\n\n  sizeOfBlock(item: Item): number;\n\n  write(item: Item, output: Output): Writer;\n\n  writeBlock(item: Item, output: Output): Writer;\n\n  toString(item: Item): string;\n\n  toBlockString(item: Item): string;\n\n  toData(item: Item): Data;\n\n  toBlockData(item: Item): Data;\n\n  /** @hidden */\n  isSpace(c: number): boolean;\n\n  /** @hidden */\n  isNewline(c: number): boolean;\n\n  /** @hidden */\n  isWhitespace(c: number): boolean;\n\n  /** @hidden */\n  isIdentStartChar(c: number): boolean;\n\n  /** @hidden */\n  isIdentChar(c: number): boolean;\n};\n\nObject.defineProperty(Recon, \"structureParser\", {\n  value: function (): ReconStructureParser {\n    const structureParser = new ReconStructureParser();\n    Object.defineProperty(Recon, \"structureParser\", {\n      value: function(): ReconStructureParser {\n        return structureParser;\n      },\n      enumerable: true,\n      configurable: true,\n    });\n    return structureParser;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(Recon, \"structureWriter\", {\n  value: function(): ReconStructureWriter {\n    const structureWriter = new ReconStructureWriter();\n    Object.defineProperty(Recon, \"structureWriter\", {\n      value: function (): ReconStructureWriter {\n        return structureWriter;\n      },\n      enumerable: true,\n      configurable: true,\n    });\n    return structureWriter;\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nRecon.parse = function (recon: string): Value {\n  return Recon.structureParser().parseBlockString(recon);\n};\n\nRecon.parser = function (): Parser<Value> {\n  return Recon.structureParser().blockParser();\n};\n\nRecon.sizeOf = function (item: Item): number {\n  return Recon.structureWriter().sizeOfItem(item);\n};\n\nRecon.sizeOfBlock = function (item: Item): number {\n  return Recon.structureWriter().sizeOfBlockItem(item);\n};\n\nRecon.write = function (item: Item, output: Output): Writer {\n  return Recon.structureWriter().writeItem(item, output);\n};\n\nRecon.writeBlock = function (item: Item, output: Output): Writer {\n  return Recon.structureWriter().writeBlockItem(item, output);\n};\n\nRecon.toString = function (item: Item): string {\n  const output = Unicode.stringOutput();\n  Recon.write(item, output);\n  return output.bind();\n};\n\nRecon.toBlockString = function (item: Item): string {\n  const output = Unicode.stringOutput();\n  Recon.writeBlock(item, output);\n  return output.bind();\n};\n\nRecon.toData = function (item: Item): Data {\n  const output = Utf8.encodedOutput(Data.output());\n  Recon.write(item, output);\n  return output.bind();\n};\n\nRecon.toBlockData = function (item: Item): Data {\n  const output = Utf8.encodedOutput(Data.output());\n  Recon.writeBlock(item, output);\n  return output.bind();\n};\n\nRecon.isSpace = function (c: number): boolean {\n  return c === 0x20 || c === 0x9;\n};\n\nRecon.isNewline = function (c: number): boolean {\n  return c === 0xa || c === 0xd;\n};\n\nRecon.isWhitespace = function (c: number): boolean {\n  return Recon.isSpace(c) || Recon.isNewline(c);\n};\n\nRecon.isIdentStartChar = function (c: number): boolean {\n  return c >= 65/*'A'*/ && c <= 90/*'Z'*/\n      || c === 95/*'_'*/\n      || c >= 97/*'a'*/ && c <= 122/*'z'*/\n      || c >= 0xc0 && c <= 0xd6\n      || c >= 0xd8 && c <= 0xf6\n      || c >= 0xf8 && c <= 0x2ff\n      || c >= 0x370 && c <= 0x37d\n      || c >= 0x37f && c <= 0x1fff\n      || c >= 0x200c && c <= 0x200d\n      || c >= 0x2070 && c <= 0x218f\n      || c >= 0x2c00 && c <= 0x2fef\n      || c >= 0x3001 && c <= 0xd7ff\n      || c >= 0xf900 && c <= 0xfdcf\n      || c >= 0xfdf0 && c <= 0xfffd\n      || c >= 0x10000 && c <= 0xeffff;\n};\n\nRecon.isIdentChar = function (c: number): boolean {\n  return c === 45/*'-'*/\n      || c >= 48/*'0'*/ && c <= 57/*'9'*/\n      || c >= 65/*'A'*/ && c <= 90/*'Z'*/\n      || c === 95/*'_'*/\n      || c >= 97/*'a'*/ && c <= 122/*'z'*/\n      || c === 0xb7\n      || c >= 0xc0 && c <= 0xd6\n      || c >= 0xd8 && c <= 0xf6\n      || c >= 0xf8 && c <= 0x37d\n      || c >= 0x37f && c <= 0x1fff\n      || c >= 0x200c && c <= 0x200d\n      || c >= 0x203f && c <= 0x2040\n      || c >= 0x2070 && c <= 0x218f\n      || c >= 0x2c00 && c <= 0x2fef\n      || c >= 0x3001 && c <= 0xd7ff\n      || c >= 0xf900 && c <= 0xfdcf\n      || c >= 0xfdf0 && c <= 0xfffd\n      || c >= 0x10000 && c <= 0xeffff;\n};\n\nItem.prototype.toRecon = function (this: Item): string {\n  return Recon.toString(this);\n};\n\nItem.prototype.toReconBlock = function (this: Item): string {\n  return Recon.toBlockString(this);\n};\n\nValue.parseRecon = function (recon: string): Value {\n  return Recon.parse(recon);\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class BlockParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly keyParser: Parser<V> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, keyParser?: Parser<V>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.keyParser = keyParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return BlockParser.parse(input, this.recon, this.builder, this.keyParser,\n                             this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     keyParser?: Parser<V>, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    block: do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 33/*'!'*/ || c === 34/*'\"'*/ || c === 36/*'$'*/ || c === 37/*'%'*/\n              || c === 39/*'\\''*/ || c === 40/*'('*/ || c === 43/*'+'*/ || c === 45/*'-'*/\n              || c >= 48/*'0'*/ && c <= 57/*'9'*/ || c === 64/*'@'*/\n              || c === 91/*'['*/ || c === 123/*'{'*/ || c === 126/*'~'*/\n              || Recon.isIdentStartChar(c)) {\n            builder = builder || recon.valueBuilder();\n            step = 2;\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 7;\n          } else {\n            if (builder !== void 0) {\n              return Parser.done(builder.bind());\n            } else {\n              return Parser.done(recon.absent());\n            }\n          }\n        } else if (input.isDone()) {\n          if (builder !== void 0) {\n            return Parser.done(builder.bind());\n          } else {\n            return Parser.done(recon.absent());\n          }\n        }\n      }\n      if (step === 2) {\n        if (keyParser === void 0) {\n          keyParser = recon.parseBlockExpression(input);\n        }\n        while (keyParser.isCont() && !input.isEmpty()) {\n          keyParser = keyParser.feed(input);\n        }\n        if (keyParser.isDone()) {\n          step = 3;\n        } else if (keyParser.isError()) {\n          return keyParser;\n        }\n      }\n      if (step === 3) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 58/*':'*/) {\n            input = input.step();\n            step = 4;\n          } else {\n            builder!.push(recon.item(keyParser!.bind()));\n            keyParser = void 0;\n            step = 6;\n          }\n        } else if (input.isDone()) {\n          builder!.push(recon.item(keyParser!.bind()));\n          return Parser.done(builder!.bind());\n        }\n      }\n      if (step === 4) {\n        while (input.isCont() && Recon.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          step = 5;\n        } else if (input.isDone()) {\n          builder!.push(recon.slot(keyParser!.bind()));\n          return Parser.done(builder!.bind());\n        }\n      }\n      if (step === 5) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseBlockExpression(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          builder!.push(recon.slot(keyParser!.bind(), valueParser.bind()));\n          keyParser = void 0;\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser.isError()) {\n          return valueParser;\n        }\n      }\n      if (step === 6) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 44/*','*/ || c === 59/*';'*/ || Recon.isNewline(c)) {\n            input = input.step();\n            step = 1;\n            continue;\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 7;\n          } else {\n            return Parser.done(builder!.bind());\n          }\n        } else if (input.isDone()) {\n          return Parser.done(builder!.bind());\n        }\n      }\n      if (step === 7) {\n        while (input.isCont()) {\n          c = input.head();\n          if (!Recon.isNewline(c)) {\n            input = input.step();\n          } else {\n            step = 1;\n            continue block;\n          }\n        }\n        if (input.isDone()) {\n          step = 1;\n          continue;\n        }\n      }\n      break;\n    } while (true);\n    return new BlockParser<I, V>(recon, builder, keyParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class AttrParser<I, V> extends Parser<I> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly keyParser: Parser<V> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, keyParser?: Parser<V>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.keyParser = keyParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<I> {\n    return AttrParser.parse(input, this.recon, this.keyParser,\n                            this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, keyParser?: Parser<V>,\n                     valueParser?: Parser<V>, step: number = 1): Parser<I> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          input = input.step();\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(64/*'@'*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(64/*'@'*/, input));\n      }\n    }\n    if (step === 2) {\n      if (keyParser === void 0) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 34/*'\"'*/ || c === 39/*'\\''*/) {\n            keyParser = recon.parseString(input);\n          } else if (Recon.isIdentStartChar(c)) {\n            keyParser = recon.parseIdent(input);\n          } else {\n            return Parser.error(Diagnostic.expected(\"attribute name\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(\"attribute name\", input));\n        }\n      } else {\n        keyParser = keyParser.feed(input);\n      }\n      if (keyParser !== void 0) {\n        if (keyParser.isDone()) {\n          step = 3;\n        } else if (keyParser.isError()) {\n          return keyParser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      if (input.isCont() && input.head() === 40/*'('*/) {\n        input = input.step();\n        step = 4;\n      } else if (!input.isEmpty()) {\n        return Parser.done(recon.attr(keyParser!.bind()));\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 41/*')'*/) {\n          input = input.step();\n          return Parser.done(recon.attr(keyParser!.bind()));\n        } else {\n          step = 5;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    if (step === 5) {\n      if (valueParser === void 0) {\n        valueParser = recon.parseBlock(input);\n      }\n      while (valueParser.isCont() && !input.isEmpty()) {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 6;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 41/*')'*/) {\n          input = input.step();\n          return Parser.done(recon.attr(keyParser!.bind(), valueParser!.bind()));\n        } else {\n          return Parser.error(Diagnostic.expected(\")\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new AttrParser<I, V>(recon, keyParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class BlockItemParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly fieldParser: Parser<I> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, fieldParser?: Parser<I>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.fieldParser = fieldParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return BlockItemParser.parse(input, this.recon, this.builder, this.fieldParser,\n                                 this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     fieldParser?: Parser<I>, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 64/*'@'*/) {\n            fieldParser = recon.parseAttr(input);\n            step = 2;\n          } else if (c === 123/*'{'*/) {\n            builder = builder || recon.recordBuilder();\n            valueParser = recon.parseRecord(input, builder);\n            step = 5;\n          } else if (c === 91/*'['*/) {\n            builder = builder || recon.recordBuilder();\n            valueParser = recon.parseMarkup(input, builder);\n            step = 5;\n          } else if (Recon.isIdentStartChar(c)) {\n            valueParser = recon.parseIdent(input);\n            step = 4;\n          } else if (c === 34/*'\"'*/ || c === 39/*'\\''*/) {\n            valueParser = recon.parseString(input);\n            step = 4;\n          } else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n            valueParser = recon.parseNumber(input);\n            step = 4;\n          } else if (c === 37/*'%'*/) {\n            valueParser = recon.parseData(input);\n            step = 4;\n          } else if (c === 36/*'$'*/) {\n            valueParser = recon.parseSelector(input);\n            step = 4;\n          } else if (builder === void 0) {\n            return Parser.done(recon.extant());\n          } else {\n            return Parser.done(builder.bind());\n          }\n        } else if (input.isDone()) {\n          if (builder === void 0) {\n            return Parser.done(recon.extant());\n          } else {\n            return Parser.done(builder.bind());\n          }\n        }\n      }\n      if (step === 2) {\n        while (fieldParser!.isCont() && !input.isEmpty()) {\n          fieldParser = fieldParser!.feed(input);\n        }\n        if (fieldParser!.isDone()) {\n          builder = builder || recon.valueBuilder();\n          builder.push(fieldParser!.bind());\n          fieldParser = void 0;\n          step = 3;\n        } else if (fieldParser!.isError()) {\n          return fieldParser!.asError();\n        }\n      }\n      if (step === 3) {\n        while (input.isCont() && Recon.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          step = 1;\n          continue;\n        } else if (input.isDone()) {\n          return Parser.done(builder!.bind());\n        }\n      }\n      if (step === 4) {\n        while (valueParser!.isCont() && !input.isEmpty()) {\n          valueParser = valueParser!.feed(input);\n        }\n        if (valueParser!.isDone()) {\n          builder = builder || recon.valueBuilder();\n          builder.push(recon.item(valueParser!.bind()));\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser!.isError()) {\n          return valueParser!;\n        }\n      }\n      if (step === 5) {\n        while (valueParser!.isCont() && !input.isEmpty()) {\n          valueParser = valueParser!.feed(input);\n        }\n        if (valueParser!.isDone()) {\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser!.isError()) {\n          return valueParser!;\n        }\n      }\n      if (step === 6) {\n        while (input.isCont() && Recon.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (input.head() === 64/*'@'*/) {\n            step = 1;\n          } else {\n            return Parser.done(builder!.bind());\n          }\n        } else if (input.isDone()) {\n          return Parser.done(builder!.bind());\n        }\n      }\n      break;\n    } while (true);\n    return new BlockItemParser<I, V>(recon, builder, fieldParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class InlineItemParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly fieldParser: Parser<I> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, fieldParser?: Parser<I>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.fieldParser = fieldParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return InlineItemParser.parse(input, this.recon, this.builder, this.fieldParser,\n                                  this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     fieldParser?: Parser<I>,  valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          fieldParser = recon.parseAttr(input);\n          step = 2;\n        } else if (c === 123/*'{'*/) {\n          if (builder !== void 0) {\n            valueParser = recon.parseRecord(input, builder);\n            step = 5;\n          } else {\n            valueParser = recon.parseRecord(input);\n            step = 4;\n          }\n        } else if (c === 91/*'['*/) {\n          if (builder !== void 0) {\n            valueParser = recon.parseMarkup(input, builder);\n            step = 5;\n          } else {\n            valueParser = recon.parseMarkup(input);\n            step = 4;\n          }\n        } else if (builder === void 0) {\n          return Parser.done(recon.extant());\n        } else {\n          return Parser.done(builder.bind());\n        }\n      } else if (input.isDone()) {\n        if (builder === void 0) {\n          return Parser.done(recon.extant());\n        } else {\n          return Parser.done(builder.bind());\n        }\n      }\n    }\n    if (step === 2) {\n      while (fieldParser!.isCont() && !input.isEmpty()) {\n        fieldParser = fieldParser!.feed(input);\n      }\n      if (fieldParser!.isDone()) {\n        builder = builder || recon.valueBuilder();\n        builder.push(fieldParser!.bind());\n        fieldParser = void 0;\n        step = 3;\n      } else if (fieldParser!.isError()) {\n        return fieldParser!.asError();\n      }\n    }\n    if (step === 3) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 123/*'{'*/) {\n          valueParser = recon.parseRecord(input, builder);\n          step = 5;\n        } else if (c === 91/*'['*/) {\n          valueParser = recon.parseMarkup(input, builder);\n          step = 5;\n        } else {\n          return Parser.done(builder!.bind());\n        }\n      } else if (input.isDone()) {\n        return Parser.done(builder!.bind());\n      }\n    }\n    if (step === 4) {\n      while (valueParser!.isCont() && !input.isEmpty()) {\n        valueParser = valueParser!.feed(input);\n      }\n      if (valueParser!.isDone()) {\n        builder = builder || recon.valueBuilder();\n        builder.push(recon.item(valueParser!.bind()));\n        return Parser.done(builder.bind());\n      } else if (valueParser!.isError()) {\n        return valueParser!;\n      }\n    }\n    if (step === 5) {\n      while (valueParser!.isCont() && !input.isEmpty()) {\n        valueParser = valueParser!.feed(input);\n      }\n      if (valueParser!.isDone()) {\n        return Parser.done(builder!.bind());\n      } else if (valueParser!.isError()) {\n        return valueParser!;\n      }\n    }\n    return new InlineItemParser<I, V>(recon, builder, fieldParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class RecordParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly keyParser: Parser<V> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, keyParser?: Parser<V>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.keyParser = keyParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return RecordParser.parse(input, this.recon, this.builder, this.keyParser,\n                              this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     keyParser?: Parser<V>, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 123/*'{'*/) {\n          input = input.step();\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(123/*'{'*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(123/*'{'*/, input));\n      }\n    }\n    block: do {\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          builder = builder || recon.recordBuilder();\n          if (c === 125/*'}'*/) {\n            input = input.step();\n            return Parser.done(builder.bind());\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 8;\n          } else {\n            step = 3;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(125/*'}'*/, input));\n        }\n      }\n      if (step === 3) {\n        if (keyParser === void 0) {\n          keyParser = recon.parseBlockExpression(input);\n        }\n        while (keyParser.isCont() && !input.isEmpty()) {\n          keyParser = keyParser.feed(input);\n        }\n        if (keyParser.isDone()) {\n          step = 4;\n        } else if (keyParser.isError()) {\n          return keyParser;\n        }\n      }\n      if (step === 4) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 58/*':'*/) {\n            input = input.step();\n            step = 5;\n          } else {\n            builder!.push(recon.item(keyParser!.bind()));\n            keyParser = void 0;\n            step = 7;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(125/*'}'*/, input));\n        }\n      }\n      if (step === 5) {\n        while (input.isCont() && Recon.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          step = 6;\n        } else if (input.isDone()) {\n          builder!.push(recon.slot(keyParser!.bind()));\n          return Parser.done(builder!.bind());\n        }\n      }\n      if (step === 6) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseBlockExpression(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          builder!.push(recon.slot(keyParser!.bind(), valueParser.bind()));\n          keyParser = void 0;\n          valueParser = void 0;\n          step = 7;\n        } else if (valueParser.isError()) {\n          return valueParser;\n        }\n      }\n      if (step === 7) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 44/*','*/ || c === 59/*';'*/ || Recon.isNewline(c)) {\n            input = input.step();\n            step = 2;\n            continue;\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 8;\n          } else if (c === 125/*'}'*/) {\n            input = input.step();\n            return Parser.done(builder!.bind());\n          } else {\n            return Parser.error(Diagnostic.expected(\"'}', ';', ',', or newline\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(125/*'}'*/, input));\n        }\n      }\n      if (step === 8) {\n        while (input.isCont()) {\n          c = input.head();\n          if (!Recon.isNewline(c)) {\n            input = input.step();\n          } else {\n            step = 2;\n            continue block;\n          }\n        }\n        if (input.isDone()) {\n          step = 2;\n          continue;\n        }\n      }\n      break;\n    } while (true);\n    return new RecordParser<I, V>(recon, builder, keyParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class MarkupParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly textOutput: Output<V> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, textOutput?: Output<V>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.textOutput = textOutput;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return MarkupParser.parse(input, this.recon, this.builder, this.textOutput,\n                              this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     textOutput?: Output<V>, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 91/*'['*/) {\n          input = input.step();\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(91/*'['*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(91/*'['*/, input));\n      }\n    }\n    do {\n      if (step === 2) {\n        while (input.isCont()) {\n          c = input.head();\n          if (c !== 64/*'@'*/ && c !== 91/*'['*/ && c !== 92/*'\\\\'*/ && c !== 93/*']'*/\n              && c !== 123/*'{'*/ && c !== 125/*'}'*/) {\n            input = input.step();\n            textOutput = textOutput || recon.textOutput();\n            textOutput.write(c);\n          } else {\n            break;\n          }\n        }\n        if (input.isCont()) {\n          if (c === 93/*']'*/) {\n            input = input.step();\n            builder = builder || recon.recordBuilder();\n            if (textOutput !== void 0) {\n              builder.push(recon.item(textOutput.bind()));\n            }\n            return Parser.done(builder.bind());\n          } else if (c === 64/*'@'*/) {\n            builder = builder || recon.recordBuilder();\n            if (textOutput !== void 0) {\n              builder.push(recon.item(textOutput.bind()));\n              textOutput = void 0;\n            }\n            valueParser = recon.parseInlineItem(input);\n            step = 3;\n          } else if (c === 123/*'{'*/) {\n            builder = builder || recon.recordBuilder();\n            if (textOutput !== void 0) {\n              builder.push(recon.item(textOutput.bind()));\n              textOutput = void 0;\n            }\n            valueParser = recon.parseRecord(input, builder);\n            step = 4;\n          } else if (c === 91/*'['*/) {\n            builder = builder || recon.recordBuilder();\n            if (textOutput !== void 0) {\n              builder.push(recon.item(textOutput.bind()));\n              textOutput = void 0;\n            }\n            valueParser = recon.parseMarkup(input, builder);\n            step = 4;\n          } else if (c === 92/*'\\\\'*/) {\n            input = input.step();\n            step = 5;\n          } else {\n            return Parser.error(Diagnostic.unexpected(input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 3) {\n        while (valueParser!.isCont() && !input.isEmpty()) {\n          valueParser = valueParser!.feed(input);\n        }\n        if (valueParser!.isDone()) {\n          builder!.push(recon.item(valueParser!.bind()));\n          valueParser = void 0;\n          step = 2;\n          continue;\n        } else if (valueParser!.isError()) {\n          return valueParser!;\n        }\n      }\n      if (step === 4) {\n        while (valueParser!.isCont() && !input.isEmpty()) {\n          valueParser = valueParser!.feed(input);\n        }\n        if (valueParser!.isDone()) {\n          valueParser = void 0;\n          step = 2;\n          continue;\n        } else if (valueParser!.isError()) {\n          return valueParser!;\n        }\n      }\n      if (step === 5) {\n        if (input.isCont()) {\n          c = input.head();\n          textOutput = textOutput || recon.textOutput();\n          if (c === 34/*'\"'*/ || c === 36/*'$'*/ || c === 39/*'\\''*/ || c === 47/*'/'*/\n              || c === 64/*'@'*/ || c === 91/*'['*/ || c === 92/*'\\\\'*/ || c === 93/*']'*/\n              || c === 123/*'{'*/ || c === 125/*'}'*/) {\n            input = input.step();\n            textOutput.write(c);\n            step = 2;\n          } else if (c === 98/*'b'*/) {\n            input = input.step();\n            textOutput.write(8/*'\\b'*/);\n            step = 2;\n          } else if (c === 102/*'f'*/) {\n            input = input.step();\n            textOutput.write(12/*'\\f'*/);\n            step = 2;\n          } else if (c === 110/*'n'*/) {\n            input = input.step();\n            textOutput.write(10/*'\\n'*/);\n            step = 2;\n          } else if (c === 114/*'r'*/) {\n            input = input.step();\n            textOutput.write(13/*'\\r'*/);\n            step = 2;\n          } else if (c === 116/*'t'*/) {\n            input = input.step();\n            textOutput.write(9/*'\\t'*/);\n            step = 2;\n          } else {\n            return Parser.error(Diagnostic.expected(\"escape character\", input));\n          }\n          continue;\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(\"escape character\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new MarkupParser<I, V>(recon, builder, textOutput, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Base64} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class DataParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly base64Parser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, base64Parser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.base64Parser = base64Parser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return DataParser.parse(input, this.recon, this.base64Parser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>,\n                     base64Parser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 37/*'%'*/) {\n          input = input.step();\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(37/*'%'*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(37/*'%'*/, input));\n      }\n    }\n    if (step === 2) {\n      if (base64Parser === void 0) {\n        base64Parser = Base64.standard().parse(input, recon.dataOutput());\n      }\n      while (base64Parser.isCont() && !input.isEmpty()) {\n        base64Parser = base64Parser.feed(input);\n      }\n      if (base64Parser.isDone()) {\n        return base64Parser;\n      } else if (base64Parser.isError()) {\n        return base64Parser;\n      }\n    }\n    return new DataParser<I, V>(recon, base64Parser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class IdentParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly output: Output<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, output?: Output<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.output = output;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return IdentParser.parse(input, this.recon, this.output, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, output?: Output<V>,\n                     step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (Recon.isIdentStartChar(c)) {\n          input = input.step();\n          output = output || recon.textOutput();\n          output = output.write(c);\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(\"identifier\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"identifier\", input));\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Recon.isIdentChar(c))) {\n        input = input.step();\n        output!.write(c);\n      }\n      if (!input.isEmpty()) {\n        return Parser.done(recon.ident(output!.bind()));\n      }\n    }\n    return new IdentParser<I, V>(recon, output, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base16} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class StringParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly output: Output<V> | undefined;\n  private readonly quote: number | undefined;\n  private readonly code: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, output?: Output<V>, quote?: number,\n              code?: number, step?: number) {\n    super();\n    this.recon = recon;\n    this.output = output;\n    this.quote = quote;\n    this.code = code;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return StringParser.parse(input, this.recon, this.output, this.quote,\n                              this.code, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, output?: Output<V>,\n                     quote: number = 0, code: number = 0, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 34/*'\"'*/ || c === 39/*'\\''*/ && (quote === c || quote === 0)) {\n          input = input.step();\n          output = output || recon.textOutput();\n          quote = c;\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(\"string\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"string\", input));\n      }\n    }\n    string: do {\n      if (step === 2) {\n        while (input.isCont()) {\n          c = input.head();\n          if (c >= 0x20 && c !== quote && c !== 92/*'\\\\'*/) {\n            input = input.step();\n            output!.write(c);\n          } else {\n            break;\n          }\n        }\n        if (input.isCont()) {\n          if (c === quote) {\n            input = input.step();\n            return Parser.done(output!.bind());\n          } else if (c === 92/*'\\\\'*/) {\n            input = input.step();\n            step = 3;\n          } else {\n            return Parser.error(Diagnostic.expected(quote, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(quote, input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 34/*'\"'*/ || c === 36/*'$'*/ || c === 39/*'\\''*/ || c === 47/*'/'*/\n              || c === 64/*'@'*/ || c === 91/*'['*/ || c === 92/*'\\\\'*/ || c === 93/*']'*/\n              || c === 123/*'{'*/ || c === 125/*'}'*/) {\n            input = input.step();\n            output!.write(c);\n            step = 2;\n            continue;\n          } else if (c === 98/*'b'*/) {\n            input = input.step();\n            output!.write(8/*'\\b'*/);\n            step = 2;\n            continue;\n          } else if (c === 102/*'f'*/) {\n            input = input.step();\n            output!.write(12/*'\\f'*/);\n            step = 2;\n            continue;\n          } else if (c === 110/*'n'*/) {\n            input = input.step();\n            output!.write(10/*'\\n'*/);\n            step = 2;\n            continue;\n          } else if (c === 114/*'r'*/) {\n            input = input.step();\n            output!.write(13/*'\\r'*/);\n            step = 2;\n            continue;\n          } else if (c === 116/*'t'*/) {\n            input = input.step();\n            output!.write(9/*'\\t'*/);\n            step = 2;\n            continue;\n          } else if (c === 117/*'u'*/) {\n            input = input.step();\n            step = 4;\n          } else {\n            return Parser.error(Diagnostic.expected(\"escape character\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(\"escape character\", input));\n        }\n      }\n      if (step >= 4) {\n        do {\n          if (input.isCont()) {\n            c = input.head();\n            if (Base16.isDigit(c)) {\n              input = input.step();\n              code = 16 * code + Base16.decodeDigit(c);\n              if (step <= 6) {\n                step += 1;\n                continue;\n              } else {\n                output!.write(code);\n                code = 0;\n                step = 2;\n                continue string;\n              }\n            } else {\n              return Parser.error(Diagnostic.expected(\"hex digit\", input));\n            }\n          } else if (input.isDone()) {\n            return Parser.error(Diagnostic.expected(\"hex digit\", input));\n          }\n          break;\n        } while (true);\n      }\n      break;\n    } while (true);\n    return new StringParser<I, V>(recon, output, quote, code, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base16} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class NumberParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly sign: number | undefined;\n  private readonly value: number | undefined;\n  private readonly mode: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, sign?: number, value?: number, mode?: number, step?: number) {\n    super();\n    this.recon = recon;\n    this.sign = sign;\n    this.value = value;\n    this.mode = mode;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return NumberParser.parse(input, this.recon, this.sign, this.value, this.mode, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, sign: number = 1, value: number = 0,\n                     mode: number = 2, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 45/*'-'*/) {\n          input = input.step();\n          sign = -1;\n        }\n        step = 2;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"number\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 48/*'0'*/) {\n          input = input.step();\n          step = 4;\n        } else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          value = sign * (c - 48/*'0'*/);\n          step = 3;\n        } else {\n          return Parser.error(Diagnostic.expected(\"digit\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"digit\", input));\n      }\n    }\n    if (step === 3) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          const newValue = 10 * value + sign * (c - 48/*'0'*/);\n          if (-9007199254740991 <= newValue && newValue <= 9007199254740992) {\n            value = newValue;\n            input = input.step();\n          } else {\n            return Parser.error(Diagnostic.message(\"integer overflow\", input));\n          }\n        } else {\n          break;\n        }\n      }\n      if (input.isCont()) {\n        step = 4;\n      } else if (input.isDone()) {\n        return Parser.done(recon.num(value));\n      }\n    }\n    if (step === 4) {\n      if (input.isCont()) {\n        c = input.head();\n        if (mode > 0 && c === 46/*'.'*/ || mode > 1 && (c === 69/*'E'*/ || c === 101/*'e'*/)) {\n          let output = Unicode.stringOutput();\n          if (sign < 0 && value === 0) {\n            output = output.write(45/*'-'*/).write(48/*'0'*/);\n          } else {\n            output = output.write(\"\" + value);\n          }\n          return DecimalParser.parse(input, recon, output, mode);\n        } else if (c === 120/*'x'*/ && sign > 0 && value === 0) {\n          input = input.step();\n          return HexadecimalParser.parse(input, recon);\n        } else {\n          return Parser.done(recon.num(value));\n        }\n      } else if (input.isDone()) {\n        return Parser.done(recon.num(value));\n      }\n    }\n    return new NumberParser<I, V>(recon, sign, value, mode, step);\n  }\n\n  static parseInteger<I, V>(input: Input, recon: ReconParser<I, V>): Parser<V> {\n    return NumberParser.parse(input, recon, void 0, void 0, 0);\n  }\n\n  static parseDecimal<I, V>(input: Input, recon: ReconParser<I, V>): Parser<V> {\n    return NumberParser.parse(input, recon, void 0, void 0, 1);\n  }\n}\n\n/** @hidden */\nexport class DecimalParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly output: Output<string>;\n  private readonly mode: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, output: Output<string>, mode?: number, step?: number) {\n    super();\n    this.recon = recon;\n    this.output = output;\n    this.mode = mode;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return DecimalParser.parse(input, this.recon, this.output, this.mode, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, output: Output<string>,\n                     mode: number = 2, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 46/*'.'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 2;\n        } else if (mode > 1 && (c === 69/*'E'*/ || c === 101/*'e'*/)) {\n          input = input.step();\n          output = output.write(c);\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\"decimal or exponent\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"decimal or exponent\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 3;\n        } else {\n          return Parser.error(Diagnostic.expected(\"digit\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"digit\", input));\n      }\n    }\n    if (step === 3) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n        } else {\n          break;\n        }\n      }\n      if (input.isCont()) {\n        if (mode > 1) {\n          step = 4;\n        } else {\n          return Parser.done(recon.num(output.bind()));\n        }\n      } else if (input.isDone()) {\n        return Parser.done(recon.num(output.bind()));\n      }\n    }\n    if (step === 4) {\n      c = input.head();\n      if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input = input.step();\n        output = output.write(c);\n        step = 5;\n      } else {\n        return Parser.done(recon.num(output.bind()));\n      }\n    }\n    if (step === 5) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n          input = input.step();\n          output = output.write(c);\n        }\n        step = 6;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 6) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n          step = 7;\n        } else {\n          return Parser.error(Diagnostic.expected(\"digit\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"digit\", input));\n      }\n    }\n    if (step === 7) {\n      while (input.isCont()) {\n        c = input.head();\n        if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          input = input.step();\n          output = output.write(c);\n        } else {\n          break;\n        }\n      }\n      if (!input.isEmpty()) {\n        return Parser.done(recon.num(output.bind()));\n      }\n    }\n    return new DecimalParser<I, V>(recon, output, mode, step);\n  }\n}\n\n/** @hidden */\nclass HexadecimalParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly value: number | undefined;\n  private readonly size: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, value?: number, size?: number) {\n    super();\n    this.recon = recon;\n    this.value = value;\n    this.size = size;\n  }\n\n  feed(input: Input): Parser<V> {\n    return HexadecimalParser.parse(input, this.recon, this.value, this.size);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>,\n                     value: number = 0, size: number = 0): Parser<V> {\n    let c = 0;\n    while (input.isCont()) {\n      c = input.head();\n      if (Base16.isDigit(c)) {\n        input = input.step();\n        value = 16 * value + Base16.decodeDigit(c);\n        size += 1;\n      } else {\n        break;\n      }\n    }\n    if (!input.isEmpty()) {\n      if (size > 0) {\n        if (size <= 8) {\n          return Parser.done(recon.uint32(value));\n        } else {\n          return Parser.done(recon.uint64(value));\n        }\n      } else {\n        return Parser.error(Diagnostic.expected(\"hex digit\", input));\n      }\n    }\n    return new HexadecimalParser<I, V>(recon, value, size);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class LambdaFuncParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly bindingsParser: Parser<V> | undefined;\n  private readonly templateParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, bindingsParser?: Parser<V>,\n              templateParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.bindingsParser = bindingsParser;\n    this.templateParser = templateParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return LambdaFuncParser.parse(input, this.recon, this.builder, this.bindingsParser,\n                                  this.templateParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     bindingsParser?: Parser<V>, templateParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (bindingsParser === void 0) {\n        bindingsParser = recon.parseConditionalOperator(input, builder);\n      }\n      while (bindingsParser.isCont() && !input.isEmpty()) {\n        bindingsParser = bindingsParser.feed(input);\n      }\n      if (bindingsParser.isDone()) {\n        step = 2;\n      } else if (bindingsParser.isError()) {\n        return bindingsParser.asError();\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 62/*'>'*/) {\n          // leading '=' consumed by ComparisonOperatorParser\n          input = input.step();\n          step = 3;\n        } else {\n          return bindingsParser!;\n        }\n      } else if (input.isDone()) {\n        return bindingsParser!;\n      }\n    }\n    if (step === 3) {\n      if (templateParser === void 0) {\n        templateParser = recon.parseConditionalOperator(input);\n      }\n      while (templateParser.isCont() && !input.isEmpty()) {\n        templateParser = templateParser.feed(input);\n      }\n      if (templateParser.isDone()) {\n        const bindings = bindingsParser!.bind();\n        const template = templateParser.bind();\n        return Parser.done(recon.lambda(bindings, template));\n      } else if (templateParser.isError()) {\n        return templateParser.asError();\n      }\n    }\n    return new LambdaFuncParser<I, V>(recon, builder, bindingsParser, templateParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class ConditionalOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly ifParser: Parser<V> | undefined;\n  private readonly thenParser: Parser<V> | undefined;\n  private readonly elseParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, ifParser?: Parser<V>,\n              thenParser?: Parser<V>, elseParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.ifParser = ifParser;\n    this.thenParser = thenParser;\n    this.elseParser = elseParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return ConditionalOperatorParser.parse(input, this.recon, this.builder, this.ifParser,\n                                           this.thenParser, this.elseParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     ifParser?: Parser<V>, thenParser?: Parser<V>,\n                     elseParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (ifParser === void 0) {\n        ifParser = recon.parseOrOperator(input, builder);\n      }\n      while (ifParser.isCont() && !input.isEmpty()) {\n        ifParser = ifParser.feed(input);\n      }\n      if (ifParser.isDone()) {\n        step = 2;\n      } else if (ifParser.isError()) {\n        return ifParser.asError();\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 63/*'?'*/) {\n          input = input.step();\n          step = 3;\n        } else {\n          return ifParser!;\n        }\n      } else if (input.isDone()) {\n        return ifParser!;\n      }\n    }\n    if (step === 3) {\n      if (thenParser === void 0) {\n        thenParser = recon.parseConditionalOperator(input, builder);\n      }\n      while (thenParser.isCont() && !input.isEmpty()) {\n        thenParser = thenParser.feed(input);\n      }\n      if (thenParser.isDone()) {\n        step = 4;\n      } else if (thenParser.isError()) {\n        return thenParser.asError();\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 58/*':'*/) {\n          input = input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(58/*':'*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(58/*':'*/, input));\n      }\n    }\n    if (step === 5) {\n      if (elseParser === void 0) {\n        elseParser = recon.parseConditionalOperator(input, builder);\n      }\n      while (elseParser.isCont() && !input.isEmpty()) {\n        elseParser = elseParser.feed(input);\n      }\n      if (elseParser.isDone()) {\n        const ifTerm = ifParser!.bind();\n        const thenTerm = thenParser!.bind();\n        const elseTerm = elseParser.bind();\n        return Parser.done(recon.conditional(ifTerm, thenTerm, elseTerm));\n      } else if (elseParser.isError()) {\n        return elseParser.asError();\n      }\n    }\n    return new ConditionalOperatorParser<I, V>(recon, builder, ifParser, thenParser, elseParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class OrOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              lhsParser?: Parser<V>, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return OrOperatorParser.parse(input, this.recon, this.builder, this.lhsParser,\n                                  this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     lhsParser?: Parser<V>, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseAndOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 124/*'|'*/) {\n            // first '|' consumed by BitwiseOrOperatorParser\n            input = input.step();\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseAndOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          lhsParser = Parser.done(recon.or(lhs, rhs));\n          rhsParser = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new OrOperatorParser<I, V>(recon, builder, lhsParser, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class AndOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              lhsParser?: Parser<V>, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return AndOperatorParser.parse(input, this.recon, this.builder, this.lhsParser,\n                                   this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     lhsParser?: Parser<V>, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseBitwiseOrOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 38/*'&'*/) {\n            // first '&' consumed by BitwiseAndOperatorParser\n            input = input.step();\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseBitwiseOrOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          lhsParser = Parser.done(recon.and(lhs, rhs));\n          rhsParser = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new AndOperatorParser<I, V>(recon, builder, lhsParser, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class BitwiseOrOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              lhsParser?: Parser<V>, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return BitwiseOrOperatorParser.parse(input, this.recon, this.builder,\n                                         this.lhsParser, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     lhsParser?: Parser<V>, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseBitwiseXorOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 124/*'|'*/) {\n            input = input.step();\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 124/*'|'*/) {\n            return lhsParser!;\n          } else {\n            step = 4;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 4) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseBitwiseXorOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          lhsParser = Parser.done(recon.bitwiseOr(lhs, rhs));\n          rhsParser = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new BitwiseOrOperatorParser<I, V>(recon, builder, lhsParser, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class BitwiseXorOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              lhsParser?: Parser<V>, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return BitwiseXorOperatorParser.parse(input, this.recon, this.builder,\n                                          this.lhsParser, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     lhsParser?: Parser<V>, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseBitwiseAndOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 94/*'^'*/) {\n            input = input.step();\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseBitwiseAndOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          lhsParser = Parser.done(recon.bitwiseXor(lhs, rhs));\n          rhsParser = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new BitwiseXorOperatorParser<I, V>(recon, builder, lhsParser, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class BitwiseAndOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              lhsParser?: Parser<V>, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return BitwiseAndOperatorParser.parse(input, this.recon, this.builder,\n                                          this.lhsParser, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     lhsParser?: Parser<V>, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseComparisonOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 38/*'&'*/) {\n            input = input.step();\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 38/*'&'*/) {\n            return lhsParser!;\n          } else {\n            step = 4;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 4) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseComparisonOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          lhsParser = Parser.done(recon.bitwiseAnd(lhs, rhs));\n          rhsParser = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new BitwiseAndOperatorParser<I, V>(recon, builder, lhsParser, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class ComparisonOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly operator: string | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n              operator?: string, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.operator = operator;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return ComparisonOperatorParser.parse(input, this.recon, this.builder, this.lhsParser,\n                                          this.operator, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n                     operator?: string, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (lhsParser === void 0) {\n        lhsParser = recon.parseAttrExpression(input, builder);\n      }\n      while (lhsParser.isCont() && !input.isEmpty()) {\n        lhsParser = lhsParser.feed(input);\n      }\n      if (lhsParser.isDone()) {\n        step = 2;\n      } else if (lhsParser.isError()) {\n        return lhsParser.asError();\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 33/*'!'*/) {\n          input = input.step();\n          step = 3;\n        } else if (c === 60/*'<'*/) {\n          input = input.step();\n          step = 4;\n        } else if (c === 62/*'>'*/) {\n          input = input.step();\n          step = 5;\n        } else if (c === 61/*'='*/) {\n          input = input.step();\n          step = 6;\n        } else {\n          return lhsParser!;\n        }\n      } else if (input.isDone()) {\n        return lhsParser!;\n      }\n    }\n    if (step === 3) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 61/*'='*/) {\n          input = input.step();\n          operator = \"!=\";\n          step = 7;\n        } else {\n          operator = \"!\";\n          step = 7;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 4) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 61/*'='*/) {\n          input = input.step();\n          operator = \"<=\";\n          step = 7;\n        } else {\n          operator = \"<\";\n          step = 7;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 61/*'='*/) {\n          input = input.step();\n          operator = \">=\";\n          step = 7;\n        } else {\n          operator = \">\";\n          step = 7;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 6) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 61/*'='*/) {\n          input = input.step();\n          operator = \"==\";\n          step = 7;\n        } else if (c === 62/*'>'*/) {\n          return lhsParser!;\n        } else {\n          operator = \"=\";\n          step = 7;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 7) {\n      if (rhsParser === void 0) {\n        rhsParser = recon.parseAttrExpression(input, builder);\n      }\n      while (rhsParser.isCont() && !input.isEmpty()) {\n        rhsParser = rhsParser.feed(input);\n      }\n      if (rhsParser.isDone()) {\n        const lhs = lhsParser!.bind();\n        const rhs = rhsParser.bind();\n        if (operator === \"<\") {\n          return Parser.done(recon.lt(lhs, rhs));\n        } else if (operator === \"<=\") {\n          return Parser.done(recon.le(lhs, rhs));\n        } else if (operator === \"==\") {\n          return Parser.done(recon.eq(lhs, rhs));\n        } else if (operator === \"!=\") {\n          return Parser.done(recon.ne(lhs, rhs));\n        } else if (operator === \">=\") {\n          return Parser.done(recon.ge(lhs, rhs));\n        } else if (operator === \">\") {\n          return Parser.done(recon.gt(lhs, rhs));\n        } else {\n          return Parser.error(Diagnostic.message(operator!, input));\n        }\n      } else if (rhsParser.isError()) {\n        return rhsParser.asError();\n      }\n    }\n    return new ComparisonOperatorParser<I, V>(recon, builder, lhsParser, operator, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class AttrExpressionParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly fieldParser: Parser<I> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              fieldParser?: Parser<I>, valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.fieldParser = fieldParser;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return AttrExpressionParser.parse(input, this.recon, this.builder,\n                                      this.fieldParser, this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     fieldParser?: Parser<I>, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 64/*'@'*/) {\n            step = 2;\n          } else if (c === 123/*'{'*/ || c === 91/*'['*/) {\n            builder = builder || recon.recordBuilder();\n            step = 5;\n          } else if (c === 40/*'('*/) {\n            step = 4;\n          } else if (c === 33/*'!'*/ || c === 34/*'\"'*/ || c === 36/*'$'*/ || c === 37/*'%'*/\n                  || c === 39/*'\\''*/ || c === 43/*'+'*/ || c === 45/*'-'*/\n                  || c >= 48/*'0'*/ && c <= 57/*'9'*/ || c === 126/*'~'*/\n                  || Recon.isIdentStartChar(c)) {\n            step = 3;\n          } else if (builder === void 0) {\n            return Parser.done(recon.extant());\n          } else {\n            return Parser.done(builder.bind());\n          }\n        } else if (input.isDone()) {\n          if (builder === void 0) {\n            return Parser.done(recon.extant());\n          } else {\n            return Parser.done(builder.bind());\n          }\n        }\n      }\n      if (step === 2) {\n        if (fieldParser === void 0) {\n          fieldParser = recon.parseAttr(input);\n        }\n        while (fieldParser.isCont() && !input.isEmpty()) {\n          fieldParser = fieldParser.feed(input);\n        }\n        if (fieldParser.isDone()) {\n          builder = builder || recon.recordBuilder();\n          builder.push(fieldParser.bind());\n          fieldParser = void 0;\n          step = 1;\n          continue;\n        } else if (fieldParser.isError()) {\n          return fieldParser.asError();\n        }\n      }\n      if (step === 3) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseAdditiveOperator(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          builder = builder || recon.valueBuilder();\n          builder.push(recon.item(valueParser.bind()));\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 4) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseAdditiveOperator(input, builder);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          if (builder === void 0) {\n            builder = recon.valueBuilder();\n            builder.push(recon.item(valueParser.bind()));\n          }\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 5) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseAdditiveOperator(input, builder);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          valueParser = void 0;\n          step = 6;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 6) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 64/*'@'*/) {\n            step = 1;\n            continue;\n          } else {\n            return Parser.done(builder!.bind());\n          }\n        } else if (input.isDone()) {\n          return Parser.done(builder!.bind());\n        }\n      }\n      break;\n    } while (true);\n    return new AttrExpressionParser<I, V>(recon, builder, fieldParser, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class AdditiveOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly operator: string | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n              operator?: string, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.operator = operator;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return AdditiveOperatorParser.parse(input, this.recon, this.builder, this.lhsParser,\n                                        this.operator, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n                     operator?: string, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parseMultiplicativeOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 43/*'+'*/) {\n            input = input.step();\n            operator = \"+\";\n            step = 3;\n          } else if (c === 45/*'-'*/) {\n            input = input.step();\n            operator = \"-\";\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parseMultiplicativeOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          if (operator === \"+\") {\n            lhsParser = Parser.done(recon.plus(lhs, rhs));\n          } else if (operator === \"-\") {\n            lhsParser = Parser.done(recon.minus(lhs, rhs));\n          } else {\n            return Parser.error(Diagnostic.message(operator!, input));\n          }\n          rhsParser = void 0;\n          operator = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new AdditiveOperatorParser<I, V>(recon, builder, lhsParser, operator, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class MultiplicativeOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly lhsParser: Parser<V> | undefined;\n  private readonly operator: string | undefined;\n  private readonly rhsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n              operator?: string, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.lhsParser = lhsParser;\n    this.operator = operator;\n    this.rhsParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return MultiplicativeOperatorParser.parse(input, this.recon, this.builder, this.lhsParser,\n                                              this.operator, this.rhsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>, lhsParser?: Parser<V>,\n                     operator?: string, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (lhsParser === void 0) {\n          lhsParser = recon.parsePrefixOperator(input, builder);\n        }\n        while (lhsParser.isCont() && !input.isEmpty()) {\n          lhsParser = lhsParser.feed(input);\n        }\n        if (lhsParser.isDone()) {\n          step = 2;\n        } else if (lhsParser.isError()) {\n          return lhsParser.asError();\n        }\n      }\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 42/*'*'*/) {\n            input = input.step();\n            operator = \"*\";\n            step = 3;\n          } else if (c === 47/*'/'*/) {\n            input = input.step();\n            operator = \"/\";\n            step = 3;\n          } else if (c === 37/*'%'*/) {\n            input = input.step();\n            operator = \"%\";\n            step = 3;\n          } else {\n            return lhsParser!;\n          }\n        } else if (input.isDone()) {\n          return lhsParser!;\n        }\n      }\n      if (step === 3) {\n        if (rhsParser === void 0) {\n          rhsParser = recon.parsePrefixOperator(input, builder);\n        }\n        while (rhsParser.isCont() && !input.isEmpty()) {\n          rhsParser = rhsParser.feed(input);\n        }\n        if (rhsParser.isDone()) {\n          const lhs = lhsParser!.bind();\n          const rhs = rhsParser.bind();\n          if (operator === \"*\") {\n            lhsParser = Parser.done(recon.times(lhs, rhs));\n          } else if (operator === \"/\") {\n            lhsParser = Parser.done(recon.divide(lhs, rhs));\n          } else if (operator === \"%\") {\n            lhsParser = Parser.done(recon.modulo(lhs, rhs));\n          } else {\n            return Parser.error(Diagnostic.message(operator!, input));\n          }\n          rhsParser = void 0;\n          operator = void 0;\n          step = 2;\n          continue;\n        } else if (rhsParser.isError()) {\n          return rhsParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new MultiplicativeOperatorParser<I, V>(recon, builder, lhsParser, operator, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class PrefixOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly operator: string | undefined;\n  private readonly operandParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              operator?: string, rhsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.operator = operator;\n    this.operandParser = rhsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return PrefixOperatorParser.parse(input, this.recon, this.builder,\n                                      this.operator, this.operandParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     operator?: string, rhsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 33/*'!'*/) {\n          input = input.step();\n          operator = \"!\";\n        } else if (c === 126/*'~'*/) {\n          input = input.step();\n          operator = \"~\";\n        } else if (c === 45/*'-'*/) {\n          input = input.step();\n          operator = \"-\";\n        } else if (c === 43/*'+'*/) {\n          input = input.step();\n          operator = \"+\";\n        } else {\n          return recon.parseInvokeOperator(input, builder);\n        }\n        step = 2;\n      } else if (input.isDone()) {\n        return recon.parseInvokeOperator(input, builder);\n      }\n    }\n    if (step === 2) {\n      if (rhsParser === void 0) {\n        rhsParser = recon.parsePrefixOperator(input, builder);\n      }\n      while (rhsParser.isCont() && !input.isEmpty()) {\n        rhsParser = rhsParser.feed(input);\n      }\n      if (rhsParser.isDone()) {\n        const operand = rhsParser.bind();\n        if (!recon.isDistinct(operand)) {\n          return Parser.error(Diagnostic.expected(\"value\", input));\n        } else if (operator === \"!\") {\n          return Parser.done(recon.not(operand));\n        } else if (operator === \"~\") {\n          return Parser.done(recon.bitwiseNot(operand));\n        } else if (operator === \"-\") {\n          return Parser.done(recon.negative(operand));\n        } else if (operator === \"+\") {\n          return Parser.done(recon.positive(operand));\n        } else {\n          return Parser.error(Diagnostic.message(operator!, input));\n        }\n      } else if (rhsParser.isError()) {\n        return rhsParser.asError();\n      }\n    }\n    return new PrefixOperatorParser<I, V>(recon, builder, operator, rhsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class InvokeOperatorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly exprParser: Parser<V> | undefined;\n  private readonly argsParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              exprParser?: Parser<V>, argsParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.exprParser = exprParser;\n    this.argsParser = argsParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return InvokeOperatorParser.parse(input, this.recon, this.builder,\n                                      this.exprParser, this.argsParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     exprParser?: Parser<V>, argsParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      if (exprParser === void 0) {\n        exprParser = recon.parsePrimary(input, builder);\n      }\n      while (exprParser.isCont() && !input.isEmpty()) {\n        exprParser = exprParser.feed(input);\n      }\n      if (exprParser.isDone()) {\n        step = 2;\n      } else if (exprParser.isError()) {\n        return exprParser.asError();\n      }\n    }\n    do {\n      if (step === 2) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 40/*'('*/) {\n            input = input.step();\n            step = 3;\n          } else {\n            return exprParser!;\n          }\n        } else if (input.isDone()) {\n          return exprParser!;\n        }\n      }\n      if (step === 3) {\n        while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 41/*')'*/) {\n            input = input.step();\n            const expr = exprParser!.bind();\n            exprParser = Parser.done(recon.invoke(expr, recon.extant()));\n            step = 2;\n            continue;\n          } else {\n            step = 4;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(41/*')'*/, input));\n        }\n      }\n      if (step === 4) {\n        if (argsParser === void 0) {\n          argsParser = recon.parseBlock(input);\n        }\n        while (argsParser.isCont() && !input.isEmpty()) {\n          argsParser = argsParser.feed(input);\n        }\n        if (argsParser.isDone()) {\n          step = 5;\n        } else if (argsParser.isError()) {\n          return argsParser.asError();\n        }\n      }\n      if (step === 5) {\n        while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n        if (c === 41/*')'*/) {\n            input = input.step();\n            const expr = exprParser!.bind();\n            const args = argsParser!.bind();\n            exprParser = Parser.done(recon.invoke(expr, args));\n            argsParser = void 0;\n            step = 2;\n            continue;\n          } else {\n            return Parser.error(Diagnostic.expected(41/*')'*/, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(41/*')'*/, input));\n        }\n      }\n      break;\n    } while (true);\n    return new InvokeOperatorParser<I, V>(recon, builder, exprParser, argsParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class PrimaryParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly exprParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              exprParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.exprParser = exprParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return PrimaryParser.parse(input, this.recon, this.builder,\n                               this.exprParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     exprParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 40/*'('*/) {\n          input = input.step();\n          step = 3;\n        } else {\n          step = 2;\n        }\n      } else if (input.isDone()) {\n        step = 2;\n      }\n    }\n    if (step === 2) {\n      if (exprParser === void 0) {\n        exprParser = recon.parseLiteral(input, builder);\n      }\n      while (exprParser.isCont() && !input.isEmpty()) {\n        exprParser = exprParser.feed(input);\n      }\n      if (exprParser.isDone()) {\n        return exprParser;\n      } else if (exprParser.isError()) {\n        return exprParser.asError();\n      }\n    }\n    if (step === 3) {\n      if (exprParser === void 0) {\n        exprParser = recon.parseBlockExpression(input, builder);\n      }\n      while (exprParser.isCont() && !input.isEmpty()) {\n        exprParser = exprParser.feed(input);\n      }\n      if (exprParser.isDone()) {\n        step = 4;\n      } else if (exprParser.isError()) {\n        return exprParser.asError();\n      }\n    }\n    do {\n      if (step === 4) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 44/*','*/) {\n            input = input.step();\n            if (exprParser !== void 0) {\n              if (builder === void 0) {\n                builder = recon.recordBuilder();\n                builder.push(recon.item(exprParser.bind()));\n              }\n              exprParser = void 0;\n            }\n            step = 5;\n          } else if (c === 41/*')'*/) {\n            input = input.step();\n            if (exprParser !== void 0) {\n              return exprParser;\n            } else {\n              return Parser.done(builder!.bind());\n            }\n          } else {\n            return Parser.error(Diagnostic.expected(41/*')'*/, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(41/*')'*/, input));\n        }\n      }\n      if (step === 5) {\n        if (exprParser === void 0) {\n          exprParser = recon.parseBlockExpression(input, builder);\n        }\n        while (exprParser.isCont() && !input.isEmpty()) {\n          exprParser = exprParser.feed(input);\n        }\n        if (exprParser.isDone()) {\n          exprParser = void 0;\n          step = 4;\n          continue;\n        } else if (exprParser.isError()) {\n          return exprParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new PrimaryParser<I, V>(recon, builder, exprParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class LiteralParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return LiteralParser.parse(input, this.recon, this.builder, this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 40/*'('*/) {\n          input = input.step();\n          step = 4;\n        } else if (c === 123/*'{'*/) {\n          builder = builder || recon.recordBuilder();\n          valueParser = recon.parseRecord(input, builder);\n          step = 3;\n        } else if (c === 91/*'['*/) {\n          builder = builder || recon.recordBuilder();\n          valueParser = recon.parseMarkup(input, builder);\n          step = 3;\n        } else if (Recon.isIdentStartChar(c)) {\n          valueParser = recon.parseIdent(input);\n          step = 2;\n        } else if (c === 34/*'\"'*/ || c === 39/*'\\''*/) {\n          valueParser = recon.parseString(input);\n          step = 2;\n        } else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          valueParser = recon.parseNumber(input);\n          step = 2;\n        } else if (c === 37/*'%'*/) {\n          valueParser = recon.parseData(input);\n          step = 2;\n        } else if (c === 36/*'$'*/) {\n          valueParser = recon.parseSelector(input);\n          step = 2;\n        } else if (builder === void 0) {\n          return Parser.done(recon.extant());\n        } else {\n          return Parser.done(builder.bind());\n        }\n      } else if (input.isDone()) {\n        if (builder === void 0) {\n          return Parser.done(recon.extant());\n        } else {\n          return Parser.done(builder.bind());\n        }\n      }\n    }\n    if (step === 2) {\n      while (valueParser!.isCont() && !input.isEmpty()) {\n        valueParser = valueParser!.feed(input);\n      }\n      if (valueParser!.isDone()) {\n        builder = builder || recon.valueBuilder();\n        builder.push(recon.item(valueParser!.bind()));\n        return Parser.done(builder.bind());\n      } else if (valueParser!.isError()) {\n        return valueParser!.asError();\n      }\n    }\n    if (step === 3) {\n      while (valueParser!.isCont() && !input.isEmpty()) {\n        valueParser = valueParser!.feed(input);\n      }\n      if (valueParser!.isDone()) {\n        return Parser.done(builder!.bind());\n      } else if (valueParser!.isError()) {\n        return valueParser!.asError();\n      }\n    }\n    if (step === 4) {\n      if (valueParser === void 0) {\n        valueParser = recon.parseBlockExpression(input);\n      }\n      while (valueParser.isCont() && !input.isEmpty()) {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 5;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Recon.isWhitespace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 41/*')'*/) {\n          input = input.step();\n          builder = builder || recon.valueBuilder();\n          builder.push(recon.item(valueParser!.bind()));\n          return Parser.done(builder.bind());\n        } else {\n          return Parser.error(Diagnostic.expected(41/*')'*/, input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(41/*')'*/, input));\n      }\n    }\n    return new LiteralParser<I, V>(recon, builder, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport type {ReconParser} from \"./ReconParser\";\n\n/** @hidden */\nexport class SelectorParser<I, V> extends Parser<V> {\n  private readonly recon: ReconParser<I, V>;\n  private readonly builder: Builder<I, V> | undefined;\n  private readonly selector: V | undefined;\n  private readonly valueParser: Parser<V> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconParser<I, V>, builder?: Builder<I, V>,\n              selector?: V, valueParser?: Parser<V>, step?: number) {\n    super();\n    this.recon = recon;\n    this.builder = builder;\n    this.selector = selector;\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<V> {\n    return SelectorParser.parse(input, this.recon, this.builder,\n                                this.selector, this.valueParser, this.step);\n  }\n\n  static parse<I, V>(input: Input, recon: ReconParser<I, V>, builder?: Builder<I, V>,\n                     selector?: V, valueParser?: Parser<V>, step: number = 1): Parser<V> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 36/*'$'*/) {\n        input = input.step();\n        selector = selector || recon.selector();\n        step = 2;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(36/*'$'*/, input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 91/*'['*/) {\n          input = input.step();\n          step = 8;\n        } else if (c === 64/*'@'*/) {\n          input = input.step();\n          step = 7;\n        } else if (c === 58/*':'*/) {\n          input = input.step();\n          step = 6;\n        } else if (c === 42/*'*'*/) {\n          input = input.step();\n          step = 5;\n        } else if (c === 35/*'#'*/) {\n          input = input.step();\n          step = 4;\n        } else {\n          step = 3;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    do {\n      if (step === 3) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseLiteral(input, recon.valueBuilder());\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          selector = recon.get(selector!, valueParser.bind());\n          valueParser = void 0;\n          step = 10;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 4) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseInteger(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          selector = recon.value(recon.getItem(selector!, valueParser.bind()));\n          valueParser = void 0;\n          step = 10;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 5) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 58/*':'*/) {\n            input = input.step();\n            selector = recon.keys(selector!);\n            step = 10;\n          } else if (c === 42/*'*'*/) {\n            input = input.step();\n            selector = recon.descendants(selector!);\n            step = 10;\n          } else {\n            selector = recon.children(selector!);\n            step = 10;\n          }\n        } else if (input.isDone()) {\n          selector = recon.children(selector!);\n          step = 10;\n        }\n      }\n      if (step === 6) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 42/*'*'*/) {\n            input = input.step();\n            selector = recon.values(selector!);\n            step = 10;\n          } else {\n            return Parser.error(Diagnostic.expected(42/*'*'*/, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(42/*'*'*/, input));\n        }\n      }\n      if (step === 7) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseIdent(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          selector = recon.getAttr(selector!, valueParser.bind());\n          valueParser = void 0;\n          step = 10;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 8) {\n        if (valueParser === void 0) {\n          valueParser = recon.parseBlockExpression(input);\n        }\n        while (valueParser.isCont() && !input.isEmpty()) {\n          valueParser = valueParser.feed(input);\n        }\n        if (valueParser.isDone()) {\n          step = 9;\n        } else if (valueParser.isError()) {\n          return valueParser.asError();\n        }\n      }\n      if (step === 9) {\n        while (input.isCont() && (c = input.head(), Recon.isSpace(c))) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          if (c === 93/*']'*/) {\n            input = input.step();\n            selector = recon.filter(selector!, valueParser!.bind());\n            valueParser = void 0;\n            step = 10;\n          } else {\n            return Parser.error(Diagnostic.expected(93/*']'*/, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(93/*']'*/, input));\n        }\n      }\n      if (step === 10) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 91/*'['*/) {\n            input = input.step();\n            step = 8;\n            continue;\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 4;\n            continue;\n          } else if (c === 46/*'.'*/) {\n            input = input.step();\n            step = 11;\n          } else if (builder !== void 0) {\n            builder.push(recon.item(selector!));\n            return Parser.done(builder.bind());\n          } else {\n            return Parser.done(selector!);\n          }\n        } else if (input.isDone()) {\n          if (builder !== void 0) {\n            builder.push(recon.item(selector!));\n            return Parser.done(builder.bind());\n          } else {\n            return Parser.done(selector!);\n          }\n        }\n      }\n      if (step === 11) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 64/*'@'*/) {\n            input = input.step();\n            step = 7;\n            continue;\n          } else if (c === 58/*':'*/) {\n            input = input.step();\n            step = 6;\n            continue;\n          } else if (c === 42/*'*'*/) {\n            input = input.step();\n            step = 5;\n            continue;\n          } else {\n            step = 3;\n            continue;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      break;\n    } while (true);\n    return new SelectorParser<I, V>(recon, builder, selector, valueParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport {BlockParser} from \"./BlockParser\";\nimport {AttrParser} from \"./AttrParser\";\nimport {BlockItemParser} from \"./BlockItemParser\";\nimport {InlineItemParser} from \"./InlineItemParser\";\nimport {RecordParser} from \"./RecordParser\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {DataParser} from \"./DataParser\";\nimport {IdentParser} from \"./IdentParser\";\nimport {StringParser} from \"./StringParser\";\nimport {NumberParser} from \"./NumberParser\";\nimport {LambdaFuncParser} from \"./LambdaFuncParser\";\nimport {ConditionalOperatorParser} from \"./ConditionalOperatorParser\";\nimport {OrOperatorParser} from \"./OrOperatorParser\";\nimport {AndOperatorParser} from \"./AndOperatorParser\";\nimport {BitwiseOrOperatorParser} from \"./BitwiseOrOperatorParser\";\nimport {BitwiseXorOperatorParser} from \"./BitwiseXorOperatorParser\";\nimport {BitwiseAndOperatorParser} from \"./BitwiseAndOperatorParser\";\nimport {ComparisonOperatorParser} from \"./ComparisonOperatorParser\";\nimport {AttrExpressionParser} from \"./AttrExpressionParser\";\nimport {AdditiveOperatorParser} from \"./AdditiveOperatorParser\";\nimport {MultiplicativeOperatorParser} from \"./MultiplicativeOperatorParser\";\nimport {PrefixOperatorParser} from \"./PrefixOperatorParser\";\nimport {InvokeOperatorParser} from \"./InvokeOperatorParser\";\nimport {PrimaryParser} from \"./PrimaryParser\";\nimport {LiteralParser} from \"./LiteralParser\";\nimport {SelectorParser} from \"./SelectorParser\";\n\n/**\n * Factory for constructing Recon parsers and parse trees.\n */\nexport abstract class ReconParser<I, V> {\n  abstract isDistinct(value: V): boolean;\n\n  abstract item(value: V): I;\n\n  abstract value(item: I): V;\n\n  abstract attr(key: V, value: V): I;\n\n  abstract attr(key: V): I;\n\n  abstract slot(key: V, value: V): I;\n\n  abstract slot(key: V): I;\n\n  abstract valueBuilder(): Builder<I, V>;\n\n  abstract recordBuilder(): Builder<I, V>;\n\n  abstract dataOutput(): Output<V>;\n\n  abstract textOutput(): Output<V>;\n\n  abstract ident(value: V): V;\n\n  abstract num(value: number | string): V;\n\n  abstract uint32(value: number): V;\n\n  abstract uint64(value: number): V;\n\n  abstract bool(value: boolean): V;\n\n  abstract selector(): V;\n\n  abstract extant(): V;\n\n  abstract absent(): V;\n\n  abstract conditional(ifTerm: V, thenTerm: V, elseTerm: V): V;\n\n  abstract or(lhs: V, rhs: V): V;\n\n  abstract and(lhs: V, rhs: V): V;\n\n  abstract bitwiseOr(lhs: V, rhs: V): V;\n\n  abstract bitwiseXor(lhs: V, rhs: V): V;\n\n  abstract bitwiseAnd(lhs: V, rhs: V): V;\n\n  abstract lt(lhs: V, rhs: V): V;\n\n  abstract le(lhs: V, rhs: V): V;\n\n  abstract eq(lhs: V, rhs: V): V;\n\n  abstract ne(lhs: V, rhs: V): V;\n\n  abstract ge(lhs: V, rhs: V): V;\n\n  abstract gt(lhs: V, rhs: V): V;\n\n  abstract plus(lhs: V, rhs: V): V;\n\n  abstract minus(lhs: V, rhs: V): V;\n\n  abstract times(lhs: V, rhs: V): V;\n\n  abstract divide(lhs: V, rhs: V): V;\n\n  abstract modulo(lhs: V, rhs: V): V;\n\n  abstract not(rhs: V): V;\n\n  abstract bitwiseNot(rhs: V): V;\n\n  abstract negative(rhs: V): V;\n\n  abstract positive(rhs: V): V;\n\n  abstract invoke(func: V, args: V): V;\n\n  abstract lambda(bindings: V, template: V): V;\n\n  abstract get(selector: V, key: V): V;\n\n  abstract getAttr(selector: V, key: V): V;\n\n  abstract getItem(selector: V, index: V): I;\n\n  abstract children(selector: V): V;\n\n  abstract descendants(selector: V): V;\n\n  abstract keys(selector: V): V;\n\n  abstract values(selector: V): V;\n\n  abstract filter(selector: V, predicate: V): V;\n\n  parseBlock(input: Input): Parser<V> {\n    return BlockParser.parse(input, this);\n  }\n\n  parseAttr(input: Input): Parser<I> {\n    return AttrParser.parse(input, this);\n  }\n\n  parseBlockItem(input: Input): Parser<V> {\n    return BlockItemParser.parse(input, this);\n  }\n\n  parseInlineItem(input: Input): Parser<V> {\n    return InlineItemParser.parse(input, this);\n  }\n\n  parseRecord(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return RecordParser.parse(input, this, builder);\n  }\n\n  parseMarkup(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return MarkupParser.parse(input, this, builder);\n  }\n\n  parseData(input: Input): Parser<V> {\n    return DataParser.parse(input, this);\n  }\n\n  parseIdent(input: Input): Parser<V> {\n    return IdentParser.parse(input, this);\n  }\n\n  parseString(input: Input): Parser<V> {\n    return StringParser.parse(input, this);\n  }\n\n  parseNumber(input: Input): Parser<V> {\n    return NumberParser.parse(input, this);\n  }\n\n  parseInteger(input: Input): Parser<V> {\n    return NumberParser.parseInteger(input, this);\n  }\n\n  parseBlockExpression(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return this.parseLambdaFunc(input, builder);\n  }\n\n  parseLambdaFunc(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return LambdaFuncParser.parse(input, this, builder);\n  }\n\n  parseConditionalOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return ConditionalOperatorParser.parse(input, this, builder);\n  }\n\n  parseOrOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return OrOperatorParser.parse(input, this, builder);\n  }\n\n  parseAndOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return AndOperatorParser.parse(input, this, builder);\n  }\n\n  parseBitwiseOrOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return BitwiseOrOperatorParser.parse(input, this, builder);\n  }\n\n  parseBitwiseXorOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return BitwiseXorOperatorParser.parse(input, this, builder);\n  }\n\n  parseBitwiseAndOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return BitwiseAndOperatorParser.parse(input, this, builder);\n  }\n\n  parseComparisonOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return ComparisonOperatorParser.parse(input, this, builder);\n  }\n\n  parseAttrExpression(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return AttrExpressionParser.parse(input, this, builder);\n  }\n\n  parseAdditiveOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return AdditiveOperatorParser.parse(input, this, builder);\n  }\n\n  parseMultiplicativeOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return MultiplicativeOperatorParser.parse(input, this, builder);\n  }\n\n  parsePrefixOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return PrefixOperatorParser.parse(input, this, builder);\n  }\n\n  parseInvokeOperator(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return InvokeOperatorParser.parse(input, this, builder);\n  }\n\n  parsePrimary(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return PrimaryParser.parse(input, this, builder);\n  }\n\n  parseLiteral(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return LiteralParser.parse(input, this, builder);\n  }\n\n  parseSelector(input: Input, builder?: Builder<I, V>): Parser<V> {\n    return SelectorParser.parse(input, this, builder);\n  }\n\n  blockParser(): Parser<V> {\n    return new BlockParser<I, V>(this);\n  }\n\n  parseBlockString(string: string): V {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Recon.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = this.parseBlock(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Recon.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {\n  Item,\n  Attr,\n  Slot,\n  Value,\n  Record,\n  Data,\n  Text,\n  Num,\n  Bool,\n  Selector,\n  AndOperator,\n  BitwiseAndOperator,\n  BitwiseNotOperator,\n  BitwiseOrOperator,\n  BitwiseXorOperator,\n  DivideOperator,\n  EqOperator,\n  GeOperator,\n  GtOperator,\n  InvokeOperator,\n  LeOperator,\n  LtOperator,\n  MinusOperator,\n  ModuloOperator,\n  NeOperator,\n  NegativeOperator,\n  NotOperator,\n  OrOperator,\n  PlusOperator,\n  PositiveOperator,\n  TimesOperator,\n} from \"@swim/structure\";\nimport {ReconParser} from \"./ReconParser\";\n\nexport class ReconStructureParser extends ReconParser<Item, Value> {\n  isDistinct(value: Value): boolean {\n    return value.isDistinct();\n  }\n\n  item(value: Value): Item {\n    return value;\n  }\n\n  value(item: Item): Value {\n    return item.toValue();\n  }\n\n  attr(key: Value, value?: Value): Item {\n    if (arguments.length === 1) {\n      return Attr.of(key as Text);\n    } else {\n      return Attr.of(key as Text, value);\n    }\n  }\n\n  slot(key: Value, value?: Value): Item {\n    if (arguments.length === 1) {\n      return Slot.of(key);\n    } else {\n      return Slot.of(key, value);\n    }\n  }\n\n  valueBuilder(): Builder<Item, Value> {\n    return Value.builder();\n  }\n\n  recordBuilder(): Builder<Item, Value> {\n    return Record.create();\n  }\n\n  dataOutput(): Output<Value> {\n    return Data.output();\n  }\n\n  textOutput(): Output<Value> {\n    return Text.output();\n  }\n\n  ident(value: Value): Value {\n    if (value instanceof Text) {\n      const string = value.stringValue();\n      if (string === \"true\") {\n        return Bool.from(true);\n      } else if (string === \"false\") {\n        return Bool.from(false);\n      }\n    }\n    return value;\n  }\n\n  num(value: number | string): Value {\n    if (typeof value === \"number\") {\n      return Num.from(value);\n    } else if (typeof value === \"string\") {\n      return Num.from(+value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  uint32(value: number): Value {\n    return Num.uint32(value);\n  }\n\n  uint64(value: number): Value {\n    return Num.uint64(value);\n  }\n\n  bool(value: boolean): Value {\n    return Bool.from(value);\n  }\n\n  selector(): Value {\n    return Selector.identity();\n  }\n\n  extant(): Value {\n    return Value.extant();\n  }\n\n  absent(): Value {\n    return Value.absent();\n  }\n\n  conditional(ifTerm: Value, thenTerm: Value, elseTerm: Value): Value {\n    return ifTerm.conditional(thenTerm, elseTerm);\n  }\n\n  or(lhs: Value, rhs: Value): Value {\n    return new OrOperator(lhs, rhs);\n  }\n\n  and(lhs: Value, rhs: Value): Value {\n    return new AndOperator(lhs, rhs);\n  }\n\n  bitwiseOr(lhs: Value, rhs: Value): Value {\n    return new BitwiseOrOperator(lhs, rhs);\n  }\n\n  bitwiseXor(lhs: Value, rhs: Value): Value {\n    return new BitwiseXorOperator(lhs, rhs);\n  }\n\n  bitwiseAnd(lhs: Value, rhs: Value): Value {\n    return new BitwiseAndOperator(lhs, rhs);\n  }\n\n  lt(lhs: Value, rhs: Value): Value {\n    return new LtOperator(lhs, rhs);\n  }\n\n  le(lhs: Value, rhs: Value): Value {\n    return new LeOperator(lhs, rhs);\n  }\n\n  eq(lhs: Value, rhs: Value): Value {\n    return new EqOperator(lhs, rhs);\n  }\n\n  ne(lhs: Value, rhs: Value): Value {\n    return new NeOperator(lhs, rhs);\n  }\n\n  ge(lhs: Value, rhs: Value): Value {\n    return new GeOperator(lhs, rhs);\n  }\n\n  gt(lhs: Value, rhs: Value): Value {\n    return new GtOperator(lhs, rhs);\n  }\n\n  plus(lhs: Value, rhs: Value): Value {\n    return new PlusOperator(lhs, rhs);\n  }\n\n  minus(lhs: Value, rhs: Value): Value {\n    return new MinusOperator(lhs, rhs);\n  }\n\n  times(lhs: Value, rhs: Value): Value {\n    return new TimesOperator(lhs, rhs);\n  }\n\n  divide(lhs: Value, rhs: Value): Value {\n    return new DivideOperator(lhs, rhs);\n  }\n\n  modulo(lhs: Value, rhs: Value): Value {\n    return new ModuloOperator(lhs, rhs);\n  }\n\n  not(rhs: Value): Value {\n    return new NotOperator(rhs);\n  }\n\n  bitwiseNot(rhs: Value): Value {\n    return new BitwiseNotOperator(rhs);\n  }\n\n  negative(rhs: Value): Value {\n    if (rhs instanceof Num) {\n      return rhs.negative();\n    } else {\n      return new NegativeOperator(rhs);\n    }\n  }\n\n  positive(rhs: Value): Value {\n    return new PositiveOperator(rhs);\n  }\n\n  invoke(func: Value, args: Value): Value {\n    return new InvokeOperator(func, args);\n  }\n\n  lambda(bindings: Value, template: Value): Value {\n    return bindings.lambda(template);\n  }\n\n  get(selector: Value, key: Value): Value {\n    return selector.get(key);\n  }\n\n  getAttr(selector: Value, key: Value): Value {\n    return selector.getAttr(key as Text);\n  }\n\n  getItem(selector: Value, index: Value): Item {\n    return selector.getItem(index as Num);\n  }\n\n  children(selector: Value): Value {\n    return Selector.literal(selector).children();\n  }\n\n  descendants(selector: Value): Value {\n    return Selector.literal(selector).descendants();\n  }\n\n  keys(selector: Value): Value {\n    return Selector.literal(selector).keys();\n  }\n\n  values(selector: Value): Value {\n    return Selector.literal(selector).values();\n  }\n\n  filter(selector: Value, predicate: Value): Value {\n    return selector.filter(predicate);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class AttrWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly key: V;\n  private readonly value: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, key: V, value: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.key = key;\n    this.value = value;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return AttrWriter.write(output, this.recon, this.key, this.value, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, key: V, value: V): number {\n    let size = 0;\n    size += 1; // '@'\n    size += recon.sizeOfValue(key);\n    if (!recon.isExtant(recon.item(value))) {\n      size += 1; // '(';\n      size += recon.sizeOfBlockValue(value);\n      size += 1; // ')';\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, value: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(64/*'@'*/);\n      step = 2;\n    }\n    if (step === 2) {\n      if (part === void 0) {\n        part = recon.writeValue(key, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        if (recon.isExtant(recon.item(value))) {\n          return Writer.end();\n        } else {\n          step = 3;\n        }\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(40/*'('*/);\n      step = 4;\n    }\n    if (step === 4) {\n      if (part === void 0) {\n        part = recon.writeBlockValue(value, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 5;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 5 && output.isCont()) {\n      output = output.write(41/*')'*/);\n      return Writer.end();\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new AttrWriter<I, V>(recon, key, value, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class SlotWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly key: V;\n  private readonly value: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, key: V, value: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.key = key;\n    this.value = value;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return SlotWriter.write(output, this.recon, this.key, this.value, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, key: V, value: V): number {\n    let size = 0;\n    size += recon.sizeOfValue(key);\n    size += 1; // ':'\n    if (!recon.isExtant(recon.item(value))) {\n      size += recon.sizeOfValue(value);\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, value: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (part === void 0) {\n        part = recon.writeValue(key, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 2;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(58/*':'*/);\n      if (recon.isExtant(recon.item(value))) {\n        return Writer.end();\n      } else {\n        step = 3;\n      }\n    }\n    if (step === 3) {\n      if (part === void 0) {\n        part = recon.writeValue(value, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        return Writer.end();\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new SlotWriter<I, V>(recon, key, value, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class BlockWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly items: Cursor<I>;\n  private readonly inBlock: boolean;\n  private readonly inMarkup: boolean;\n  private readonly inBraces: boolean | undefined;\n  private readonly inBrackets: boolean | undefined;\n  private readonly first: boolean | undefined;\n  private readonly markupSafe: boolean | undefined;\n  private readonly item: I | undefined;\n  private readonly next: I | undefined;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, items: Cursor<I>, inBlock: boolean, inMarkup: boolean,\n              inBraces?: boolean, inBrackets?: boolean, first?: boolean, markupSafe?: boolean,\n              item?: I, next?: I, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.items = items;\n    this.inBlock = inBlock;\n    this.inMarkup = inMarkup;\n    this.inBraces = inBraces;\n    this.inBrackets = inBrackets;\n    this.first = first;\n    this.markupSafe = markupSafe;\n    this.item = item;\n    this.next = next;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return BlockWriter.write(output, this.recon, this.items, this.inBlock, this.inMarkup,\n                             this.inBraces, this.inBrackets, this.first, this.markupSafe,\n                             this.item, this.next, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, items: Cursor<I>,\n                      inBlock: boolean, inMarkup: boolean): number {\n    let size = 0;\n    let inBraces = false;\n    let inBrackets = false;\n    let first = true;\n    let markupSafe = true;\n    let next: I | undefined;\n    while (next !== void 0 || items.hasNext()) {\n      let item: I | undefined;\n      if (next === void 0 ) {\n        item = items.next().value!;\n      } else {\n        item = next;\n        next = void 0;\n      }\n      if (items.hasNext()) {\n        next = items.next().value!;\n      }\n      if (recon.isExpression(item)) {\n        markupSafe = false;\n      }\n      if (inBrackets && recon.isAttr(item)) {\n        if (inBraces) {\n          size += 1; // '}'\n          inBraces = false;\n        }\n        size += 1; // ']'\n        inBrackets = false;\n      }\n      if (recon.isAttr(item)) {\n        if (inBraces) {\n          size += 1; // '}'\n          inBraces = false;\n        } else if (inBrackets) { // FIXME: case already covered?\n          size += 1; // ']'\n          inBrackets = false;\n        }\n        size += recon.sizeOfItem(item);\n        first = false;\n      } else if (inBrackets && recon.isText(item)) {\n        if (inBraces) {\n          size += 1; // '}'\n          inBraces = false;\n        }\n        size += recon.sizeOfMarkupText(item);\n      } else if (inBraces) {\n        if (!first) {\n          size += 1; // ','\n        } else {\n          first = false;\n        }\n        size += BlockWriter.sizeOfBlockItem(recon, item);\n      } else if (inBrackets) {\n        if (recon.isRecord(item) && recon.isMarkupSafe(recon.items(item))) {\n          size += recon.sizeOfBlock(recon.items(item), false, true);\n          if (next !== void 0 && recon.isText(next)) {\n            size += recon.sizeOfMarkupText(next);\n            next = void 0;\n          } else if (next !== void 0 && !recon.isAttr(next)) {\n            size += 1; // '{'\n            inBraces = true;\n            first = true;\n          } else {\n            size += 1; // ']'\n            inBrackets = false;\n          }\n        } else {\n          size += 1; // '{'\n          size += recon.sizeOfItem(item);\n          inBraces = true;\n          first = false;\n        }\n      } else if (markupSafe && recon.isText(item) && next !== void 0 && !recon.isField(next)\n              && !recon.isText(next) && !recon.isBool(next)) {\n        size += 1; // '['\n        size += recon.sizeOfMarkupText(item);\n        inBrackets = true;\n      } else if (inBlock && !inBraces) {\n        if (!first) {\n          size += 1; // ','\n        } else {\n          first = false;\n        }\n        size += BlockWriter.sizeOfBlockItem(recon, item);\n      } else if (inMarkup && recon.isText(item) && next === void 0) {\n        size += 1; // '['\n        size += recon.sizeOfMarkupText(item);\n        size += 1; // ']'\n      } else if (!inMarkup && recon.isValue(item) && !recon.isRecord(item)\n             && (!first && next === void 0 || next !== void 0 && recon.isAttr(next))) {\n        if (!first && (recon.isText(item) && recon.isIdent(item)\n                    || recon.isNum(item) || recon.isBool(item))) {\n          size += 1; // ' '\n        }\n        size += recon.sizeOfItem(item);\n      } else {\n        size += 1; // '{'\n        size += recon.sizeOfItem(item);\n        inBraces = true;\n        first = false;\n      }\n    }\n    if (inBraces) {\n      size += 1; // '}'\n    }\n    if (inBrackets) {\n      size += 1; // ']'\n    }\n    return size;\n  }\n\n  static sizeOfBlockItem<I, V>(recon: ReconWriter<I, V>, item: I): number {\n    let size = 0;\n    if (recon.isField(item)) {\n      size += recon.sizeOfSlot(recon.key(item), recon.value(item));\n    } else {\n      size += recon.sizeOfItem(item);\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, items: Cursor<I>,\n                     inBlock: boolean, inMarkup: boolean, inBraces: boolean = false,\n                     inBrackets: boolean = false, first: boolean = true, markupSafe: boolean = true,\n                     item?: I, next?: I, part?: Writer, step: number = 1): Writer {\n    do {\n      if (step === 1) {\n        if (next === void 0 && !items.hasNext()) {\n          step = 10;\n          break;\n        } else {\n          if (next === void 0) {\n            item = items.next().value!;\n          } else {\n            item = next;\n            next = void 0;\n          }\n          if (items.hasNext()) {\n            next = items.next().value!;\n          }\n          if (recon.isExpression(item)) {\n            markupSafe = false;\n          }\n          step = 2;\n        }\n      }\n      if (step === 2 && output.isCont()) {\n        if (inBrackets && recon.isAttr(item!)) {\n          if (inBraces) {\n            output = output.write(125/*'}'*/);\n            inBraces = false;\n          }\n          step = 3;\n        } else {\n          step = 4;\n        }\n      }\n      if (step === 3 && output.isCont()) {\n        output = output.write(93/*']'*/);\n        inBrackets = false;\n        step = 4;\n      }\n      if (step === 4 && output.isCont()) {\n        if (recon.isAttr(item!)) {\n          if (inBraces) {\n            output = output.write(125/*'}'*/);\n            inBraces = false;\n          } else if (inBrackets) {\n            output = output.write(93/*']'*/);\n            inBrackets = false;\n          }\n          part = recon.writeItem(item!, output);\n          first = false;\n          step = 7;\n        } else if (inBrackets && recon.isText(item!)) {\n          if (inBraces) {\n            output = output.write(125/*'}'*/);\n            inBraces = false;\n          }\n          part = recon.writeMarkupText(item!, output);\n          step = 7;\n        } else if (inBraces) {\n          if (!first) {\n            output = output.write(44/*','*/);\n          } else {\n            first = false;\n          }\n          part = BlockWriter.writeBlockItem(output, recon, item!);\n          step = 7;\n        } else if (inBrackets) {\n          if (recon.isRecord(item!) && recon.isMarkupSafe(recon.items(item!))) {\n            part = recon.writeBlock(recon.items(item!), output, false, true);\n            step = 5;\n          } else {\n            output = output.write(123/*'{'*/);\n            part = recon.writeItem(item!, output);\n            inBraces = true;\n            first = false;\n            step = 7;\n          }\n        } else if (markupSafe && recon.isText(item!) && next !== void 0 && !recon.isField(next)\n                && !recon.isText(next) && !recon.isBool(next)) {\n          output = output.write(91/*'['*/);\n          part = recon.writeMarkupText(item!, output);\n          inBrackets = true;\n          step = 7;\n        } else if (inBlock && !inBraces) {\n          if (!first) {\n            output = output.write(44/*','*/);\n          } else {\n            first = false;\n          }\n          part = BlockWriter.writeBlockItem(output, recon, item!);\n          step = 7;\n        } else if (inMarkup && recon.isText(item!) && next === void 0) {\n          output = output.write(91/*'['*/);\n          part = recon.writeMarkupText(item!, output);\n          step = 8;\n        } else if (!inMarkup && recon.isValue(item!) && !recon.isRecord(item!)\n               && (!first && next === void 0 || next !== void 0 && recon.isAttr(next))) {\n          if (!first && (recon.isText(item!) && recon.isIdent(item!)\n                      || recon.isNum(item!) || recon.isBool(item!))) {\n            output = output.write(32/*' '*/);\n          }\n          part = recon.writeItem(item!, output);\n          step = 7;\n        } else {\n          output = output.write(123/*'{'*/);\n          part = recon.writeItem(item!, output);\n          inBraces = true;\n          first = false;\n          step = 7;\n        }\n      }\n      if (step === 5) {\n        part = part!.pull(output);\n        if (part.isDone()) {\n          part = void 0;\n          step = 6;\n        } else if (part.isError()) {\n          return part.asError();\n        }\n      }\n      if (step === 6 && output.isCont()) {\n        if (next !== void 0 && recon.isText(next)) {\n          part = recon.writeMarkupText(next, output);\n          next = void 0;\n          step = 7;\n        } else if (next !== void 0 && !recon.isAttr(next)) {\n          output = output.write(123/*'{'*/);\n          inBraces = true;\n          first = true;\n          step = 1;\n          continue;\n        } else {\n          output = output.write(93/*']'*/);\n          inBrackets = false;\n          step = 1;\n          continue;\n        }\n      }\n      if (step === 7) {\n        part = part!.pull(output);\n        if (part.isDone()) {\n          part = void 0;\n          step = 1;\n          continue;\n        } else if (part.isError()) {\n          return part.asError();\n        }\n      }\n      if (step === 8) {\n        part = part!.pull(output);\n        if (part.isDone()) {\n          part = void 0;\n          step = 9;\n        } else if (part.isError()) {\n          return part.asError();\n        }\n      }\n      if (step === 9 && output.isCont()) {\n        output = output.write(93/*']'*/);\n        step = 1;\n        continue;\n      }\n      break;\n    } while (true);\n    if (step === 10) {\n      if (inBraces) {\n        if (output.isCont()) {\n          output = output.write(125/*'}'*/);\n          step = 11;\n        }\n      } else {\n        step = 11;\n      }\n    }\n    if (step === 11) {\n      if (inBrackets) {\n        if (output.isCont()) {\n          output = output.write(93/*']'*/);\n          return Writer.end();\n        }\n      } else {\n        return Writer.end();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new BlockWriter<I, V>(recon, items, inBlock, inMarkup, inBraces, inBrackets,\n                                 first, markupSafe, item, next, part, step);\n  }\n\n  static writeBlockItem<I, V>(output: Output, recon: ReconWriter<I, V>, item: I): Writer {\n    if (recon.isField(item)) {\n      return recon.writeSlot(recon.key(item), recon.value(item), output);\n    } else {\n      return recon.writeItem(item, output);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class PrimaryWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly items: Cursor<I>;\n  private readonly inParens: boolean | undefined;\n  private readonly first: boolean | undefined;\n  private readonly item: I | undefined;\n  private readonly next: I | undefined;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, items: Cursor<I>, inParens?: boolean,\n              first?: boolean, item?: I, next?: I, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.items = items;\n    this.inParens = inParens;\n    this.first = first;\n    this.item = item;\n    this.next = next;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return PrimaryWriter.write(output, this.recon, this.items, this.inParens, this.first,\n                               this.item, this.next, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, items: Cursor<I>): number {\n    let size = 0;\n    let inParens = false;\n    let first = true;\n    let next: I | undefined;\n    while (next !== void 0 || items.hasNext()) {\n      let item: I | undefined;\n      if (next === void 0) {\n        item = items.next().value!;\n      } else {\n        item = next;\n        next = void 0;\n      }\n      if (items.hasNext()) {\n        next = items.next().value!;\n      }\n      if (!inParens && !first) {\n        size += 1; // ' '\n      }\n      if (recon.isAttr(item)) {\n        if (inParens) {\n          size += 1; // ')'\n          inParens = false;\n        }\n        size += recon.sizeOfItem(item);\n        first = false;\n      } else if (inParens) {\n        if (!first) {\n          size += 1; // ','\n        } else {\n          first = false;\n        }\n        size += recon.sizeOfBlockItem(item);\n      } else if (recon.isValue(item) && !recon.isRecord(item)\n             && (!first && next === void 0 || next !== void 0 && recon.isAttr(next))) {\n        size += recon.sizeOfItem(item);\n      } else {\n        size += 1; // '('\n        size += recon.sizeOfItem(item);\n        inParens = true;\n        first = false;\n      }\n    }\n    if (inParens) {\n      size += 1; // ')'\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, items: Cursor<I>,\n                     inParens: boolean = false, first: boolean = true, item?: I,\n                     next?: I, part?: Writer, step: number = 1): Writer {\n    do {\n      if (step === 1) {\n        if (next === void 0 && !items.hasNext()) {\n          step = 5;\n          break;\n        } else {\n          if (next === void 0) {\n            item = items.next().value!;\n          } else {\n            item = next;\n            next = void 0;\n          }\n          if (items.hasNext()) {\n            next = items.next().value!;\n          }\n          step = 2;\n        }\n      }\n      if (step === 2 && output.isCont()) {\n        if (!inParens && !first) {\n          output = output.write(32/*' '*/);\n        }\n        step = 3;\n      }\n      if (step === 3 && output.isCont()) {\n        if (recon.isAttr(item!)) {\n          if (inParens) {\n            output = output.write(41/*')'*/);\n            inParens = false;\n          }\n          part = recon.writeItem(item!, output);\n          first = false;\n          step = 4;\n        } else if (inParens) {\n          if (!first) {\n            output = output.write(44/*','*/);\n          } else {\n            first = false;\n          }\n          part = recon.writeBlockItem(item!, output);\n          step = 4;\n        } else if (recon.isValue(item!) && !recon.isRecord(item!)\n               && (!first && next === void 0 || next !== void 0 && recon.isAttr(next))) {\n          part = recon.writeItem(item!, output);\n          step = 4;\n        } else {\n          output = output.write(40/*'('*/);\n          part = recon.writeItem(item!, output);\n          inParens = true;\n          first = false;\n          step = 4;\n        }\n      }\n      if (step === 4) {\n        part = part!.pull(output);\n        if (part.isDone()) {\n          part = void 0;\n          step = 1;\n          continue;\n        } else if (part.isError()) {\n          return part.asError();\n        }\n      }\n      break;\n    } while (true);\n    if (step === 5) {\n      if (inParens) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          return Writer.end();\n        }\n      } else {\n        return Writer.end();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new PrimaryWriter<I, V>(recon, items, inParens, first, item, next, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Utf8, Base16} from \"@swim/codec\";\n\n/** @hidden */\nexport class MarkupTextWriter extends Writer {\n  private readonly text: string;\n  private readonly index: number | undefined;\n  private readonly escape: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(text: string, index?: number, escape?: number, step?: number) {\n    super();\n    this.text = text;\n    this.index = index;\n    this.escape = escape;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return MarkupTextWriter.write(output, this.text, this.index, this.escape, this.step);\n  }\n\n  static sizeOf(text: string): number {\n    let size = 0;\n    for (let i = 0, n = text.length; i < n; i = text.offsetByCodePoints(i, 1)) {\n      let c = text.codePointAt(i);\n      if (c === void 0) {\n        c = text.charCodeAt(i);\n      }\n      if (c === 36/*'$'*/ || c === 64/*'@'*/ || c === 91/*'['*/ || c === 92/*'\\\\'*/\n          || c === 93/*']'*/ || c === 123/*'{'*/ || c === 125/*'}'*/ || c === 8/*'\\b'*/\n          || c === 12/*'\\f'*/ || c === 10/*'\\n'*/ || c === 13/*'\\r'*/ || c === 9/*'\\t'*/) {\n        size += 2;\n      } else if (c < 0x20) {\n        size += 6;\n      } else {\n        size += Utf8.sizeOf(c);\n      }\n    }\n    return size;\n  }\n\n  static write(output: Output, text: string, index: number = 0,\n               escape: number = 0, step: number = 1): Writer {\n    const length = text.length;\n    while (output.isCont()) {\n      if (step === 1) {\n        if (index < length) {\n          let c = text.codePointAt(index);\n          if (c === void 0) {\n            c = text.charCodeAt(index);\n          }\n          index = text.offsetByCodePoints(index, 1);\n          if (c === 36/*'$'*/ || c === 64/*'@'*/ || c === 91/*'['*/ || c === 92/*'\\\\'*/\n              || c === 93/*']'*/ || c === 123/*'{'*/ || c === 125/*'}'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = c;\n            step = 2;\n          } else if (c === 8/*'\\b'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 98/*'b'*/;\n            step = 2;\n          } else if (c === 12/*'\\f'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 102/*'f'*/;\n            step = 2;\n          } else if (c === 10/*'\\n'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 110/*'n'*/;\n            step = 2;\n          } else if (c === 13/*'\\r'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 114/*'r'*/;\n            step = 2;\n          } else if (c === 9/*'\\t'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 116/*'t'*/;\n            step = 2;\n          } else if (c < 0x20) {\n            output = output.write(92/*'\\\\'*/);\n            escape = c;\n            step = 3;\n          } else {\n            output = output.write(c);\n          }\n        } else {\n          return Writer.end();\n        }\n      } else if (step === 2) {\n        output = output.write(escape);\n        escape = 0;\n        step = 1;\n      } else if (step === 3) {\n        output = output.write(117/*'u'*/);\n        step = 4;\n      } else if (step === 4) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 12) & 0xf));\n        step = 5;\n      } else if (step === 5) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 8) & 0xf));\n        step = 6;\n      } else if (step === 6) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 4) & 0xf));\n        step = 7;\n      } else if (step === 7) {\n        output = output.write(Base16.uppercase.encodeDigit(escape & 0xf));\n        escape = 0;\n        step = 1;\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new MarkupTextWriter(text, index, escape, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Base64} from \"@swim/codec\";\n\n/** @hidden */\nexport class DataWriter extends Writer {\n  private readonly array: Uint8Array;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(array: Uint8Array, part?: Writer, step?: number) {\n    super();\n    this.array = array;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return DataWriter.write(output, this.array, this.part, this.step);\n  }\n\n  static sizeOf(length: number): number {\n    return 1 + ((Math.floor(length * 4 / 3) + 3) & ~3);\n  }\n\n  static write(output: Output, array: Uint8Array, part?: Writer,\n               step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(37/*'%'*/);\n      step = 2;\n    }\n    if (step === 2) {\n      if (part === void 0) {\n        part = Base64.standard().writeUint8Array(array, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        return Writer.end();\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new DataWriter(array, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Utf8} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\n\n/** @hidden */\nexport class IdentWriter extends Writer {\n  private readonly ident: string;\n  private readonly index: number | undefined;\n\n  constructor(ident: string, index?: number) {\n    super();\n    this.ident = ident;\n    this.index = index;\n  }\n\n  pull(output: Output): Writer {\n    return IdentWriter.write(output, this.ident, this.index);\n  }\n\n  static sizeOf(ident: string): number {\n    return Utf8.sizeOf(ident);\n  }\n\n  static write(output: Output, ident: string, index: number = 0): Writer {\n    let c: number | undefined;\n    const length = ident.length;\n    if (length === 0) {\n      return Writer.error(new WriterException(\"empty identifier\"));\n    }\n    if (index === 0 && output.isCont()) {\n      c = ident.codePointAt(0);\n      if (c === void 0) {\n        c = ident.charCodeAt(0);\n      }\n      if (Recon.isIdentStartChar(c)) {\n        output = output.write(c);\n        index = ident.offsetByCodePoints(0, 1);\n      }\n    }\n    while (index < length && output.isCont()) {\n      c = ident.codePointAt(index);\n      if (c === void 0) {\n        c = ident.charCodeAt(index);\n      }\n      if (Recon.isIdentChar(c)) {\n        output = output.write(c);\n        index = ident.offsetByCodePoints(index, 1);\n      } else {\n        return Writer.error(new WriterException(\"invalid identifier\"));\n      }\n    }\n    if (index >= length) {\n      return Writer.end();\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new IdentWriter(ident, index);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Utf8, Base16} from \"@swim/codec\";\n\n/** @hidden */\nexport class StringWriter extends Writer {\n  private readonly string: string;\n  private readonly index: number | undefined;\n  private readonly escape: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(string: string, index?: number, escape?: number, step?: number) {\n    super();\n    this.string = string;\n    this.index = index;\n    this.escape = escape;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return StringWriter.write(output, this.string, this.index, this.escape, this.step);\n  }\n\n  static sizeOf(string: string): number {\n    let size = 0;\n    size += 1; // '\"';\n    for (let i = 0, n = string.length; i < n; i = string.offsetByCodePoints(i, 1)) {\n      let c = string.codePointAt(i);\n      if (c === void 0) {\n        c = string.charCodeAt(i);\n      }\n      if (c === 34/*'\"'*/ || c === 92/*'\\\\'*/ || c === 8/*'\\b'*/ || c === 12/*'\\f'*/\n          || c === 10/*'\\n'*/ || c === 13/*'\\r'*/ || c === 9/*'\\t'*/) {\n        size += 2;\n      } else if (c < 0x20) {\n        size += 6;\n      } else {\n        size += Utf8.sizeOf(c);\n      }\n    }\n    size += 1; // '\"';\n    return size;\n  }\n\n  static write(output: Output, string: string, index: number = 0, escape: number = 0,\n               step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(34/*'\"'*/);\n      step = 2;\n    }\n    const length = string.length;\n    while (step >= 2 && step <= 8 && output.isCont()) {\n      if (step === 2) {\n        if (index < length) {\n          let c = string.codePointAt(index);\n          if (c === void 0) {\n            c = string.charCodeAt(index);\n          }\n          index = string.offsetByCodePoints(index, 1);\n          if (c === 34/*'\"'*/ || c === 92/*'\\\\'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = c;\n            step = 3;\n          } else if (c === 8/*'\\b'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 98/*'b'*/;\n            step = 3;\n          } else if (c === 12/*'\\f'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 102/*'f'*/;\n            step = 3;\n          } else if (c === 10/*'\\n'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 110/*'n'*/;\n            step = 3;\n          } else if (c === 13/*'\\r'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 114/*'r'*/;\n            step = 3;\n          } else if (c === 9/*'\\t'*/) {\n            output = output.write(92/*'\\\\'*/);\n            escape = 116/*'t'*/;\n            step = 3;\n          } else if (c < 0x20) {\n            output = output.write('\\\\');\n            escape = c;\n            step = 4;\n          } else {\n            output = output.write(c);\n          }\n        } else {\n          step = 9;\n          break;\n        }\n      } else if (step === 3) {\n        output = output.write(escape);\n        escape = 0;\n        step = 2;\n      } else if (step === 4) {\n        output = output.write(117/*'u'*/);\n        step = 5;\n      } else if (step === 5) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 12) & 0xf));\n        step = 6;\n      } else if (step === 6) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 8) & 0xf));\n        step = 7;\n      } else if (step === 7) {\n        output = output.write(Base16.uppercase.encodeDigit((escape >>> 4) & 0xf));\n        step = 8;\n      } else if (step === 8) {\n        output = output.write(Base16.uppercase.encodeDigit(escape & 0xf));\n        escape = 0;\n        step = 2;\n      }\n    }\n    if (step === 9 && output.isCont()) {\n      output = output.write(34/*'\"'*/);\n      return Writer.end();\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new StringWriter(string, index, escape, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class LambdaFuncWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly bindings: V;\n  private readonly template: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, bindings: V, template: V,\n              part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.bindings = bindings;\n    this.template = template;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return LambdaFuncWriter.write(output, this.recon, this.bindings, this.template,\n                                  this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, bindings: V, template: V): number {\n    let size = 0;\n    size += recon.sizeOfPrimary(bindings);\n    size += 4; // \" => \"\n    size += recon.sizeOfValue(template);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, bindings: V, template: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (part === void 0) {\n        part = recon.writePrimary(bindings, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 2;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(61/*'='*/);\n      step = 4;\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(62/*'>'*/);\n      step = 5;\n    }\n    if (step === 5 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 6;\n    }\n    if (step === 6) {\n      if (part === void 0) {\n        part = recon.writeValue(template, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        return Writer.end();\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new LambdaFuncWriter<I, V>(recon, bindings, template, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class ConditionalOperatorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly ifTerm: I;\n  private readonly thenTerm: I;\n  private readonly elseTerm: I;\n  private readonly precedence: number;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, ifTerm: I, thenTerm: I, elseTerm: I,\n              precedence: number, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.ifTerm = ifTerm;\n    this.thenTerm = thenTerm;\n    this.elseTerm = elseTerm;\n    this.precedence = precedence;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return ConditionalOperatorWriter.write(output, this.recon, this.ifTerm, this.thenTerm,\n                                           this.elseTerm, this.precedence, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, ifTerm: I, thenTerm: I,\n                      elseTerm: I, precedence: number): number {\n    let size = 0;\n    if (recon.precedence(ifTerm) > 0 && recon.precedence(ifTerm) <= precedence) {\n      size += 1; // '('\n      size += recon.sizeOfItem(ifTerm);\n      size += 1; // ')'\n    } else {\n      size += recon.sizeOfItem(ifTerm);\n    }\n    size += 3; // \" ? \"\n    size += recon.sizeOfItem(thenTerm);\n    size += 3; // \" : \"\n    size += recon.sizeOfItem(elseTerm);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, ifTerm: I, thenTerm: I, elseTerm: I,\n                     precedence: number, part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (recon.precedence(ifTerm) > 0 && recon.precedence(ifTerm) <= precedence) {\n        if (output.isCont()) {\n          output = output.write(40/*'('*/);\n          step = 2;\n        }\n      } else {\n        step = 2;\n      }\n    }\n    if (step === 2) {\n      if (part === void 0) {\n        part = recon.writeItem(ifTerm, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 3;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 3) {\n      if (recon.precedence(ifTerm) > 0 && recon.precedence(ifTerm) <= precedence) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          step = 4;\n        }\n      } else {\n        step = 4;\n      }\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 5;\n    }\n    if (step === 5 && output.isCont()) {\n      output = output.write(63/*'?'*/);\n      step = 6;\n    }\n    if (step === 6 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 7;\n    }\n    if (step === 7) {\n      if (part === void 0) {\n        part = recon.writeItem(thenTerm, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 8;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 8 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 9;\n    }\n    if (step === 9 && output.isCont()) {\n      output = output.write(58/*':'*/);\n      step = 10;\n    }\n    if (step === 10 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 11;\n    }\n    if (step === 11) {\n      if (part === void 0) {\n        part = recon.writeItem(elseTerm, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        return Writer.end();\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new ConditionalOperatorWriter<I, V>(recon, ifTerm, thenTerm, elseTerm,\n                                               precedence, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Unicode, Utf8} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class InfixOperatorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly lhs: I;\n  private readonly operator: string;\n  private readonly rhs: I;\n  private readonly precedence: number;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, lhs: I, operator: string, rhs: I,\n              precedence: number, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.lhs = lhs;\n    this.operator = operator;\n    this.rhs = rhs;\n    this.precedence = precedence;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return InfixOperatorWriter.write(output, this.recon, this.lhs, this.operator, this.rhs,\n                                     this.precedence, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, lhs: I, operator: string, rhs: I, precedence: number): number {\n    let size = 0;\n    if (recon.precedence(lhs) < precedence) {\n      size += 1; // '('\n      size += recon.sizeOfItem(lhs);\n      size += 1; // ')'\n    } else {\n      size += recon.sizeOfItem(lhs);\n    }\n    size += 1; // ' '\n    size += Utf8.sizeOf(operator);\n    size += 1; // ' '\n    if (recon.precedence(rhs) < precedence) {\n      size += 1; // '('\n      size += recon.sizeOfItem(rhs);\n      size += 1; // ')'\n    } else {\n      size += recon.sizeOfItem(rhs);\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, lhs: I, operator: string, rhs: I,\n                     precedence: number, part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (recon.precedence(lhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(40/*'('*/);\n          step = 2;\n        }\n      } else {\n        step = 2;\n      }\n    }\n    if (step === 2) {\n      if (part === void 0) {\n        part = recon.writeItem(lhs, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 3;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 3) {\n      if (recon.precedence(lhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          step = 4;\n        }\n      } else {\n        step = 4;\n      }\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 5;\n    }\n    if (step === 5) {\n      if (part === void 0) {\n        part = Unicode.writeString(operator, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 6;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 6 && output.isCont()) {\n      output = output.write(32/*' '*/);\n      step = 7;\n    }\n    if (step === 7) {\n      if (recon.precedence(rhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(40/*'('*/);\n          step = 8;\n        }\n      } else {\n        step = 8;\n      }\n    }\n    if (step === 8) {\n      if (part === void 0) {\n        part = recon.writeItem(rhs, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 9;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 9) {\n      if (recon.precedence(rhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          return Writer.end();\n        }\n      } else {\n        return Writer.end();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new InfixOperatorWriter<I, V>(recon, lhs, operator, rhs, precedence, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer, Unicode, Utf8} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class PrefixOperatorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly operator: string;\n  private readonly rhs: I;\n  private readonly precedence: number;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, operator: string, rhs: I,\n              precedence: number, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.operator = operator;\n    this.rhs = rhs;\n    this.precedence = precedence;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return PrefixOperatorWriter.write(output, this.recon, this.operator, this.rhs,\n                                      this.precedence, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, operator: string, rhs: I, precedence: number): number {\n    let size = 0;\n    size += Utf8.sizeOf(operator);\n    if (recon.precedence(rhs) < precedence) {\n      size += 1; // '('\n      size += recon.sizeOfItem(rhs);\n      size += 1; // ')'\n    } else {\n      size += recon.sizeOfItem(rhs);\n    }\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, operator: string, rhs: I,\n                     precedence: number, part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (part === void 0) {\n        part = Unicode.writeString(operator, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 2;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 2) {\n      if (recon.precedence(rhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(40/*'('*/);\n          step = 3;\n        }\n      } else {\n        step = 3;\n      }\n    }\n    if (step === 3) {\n      if (part === void 0) {\n        part = recon.writeItem(rhs, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 4;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 4) {\n      if (recon.precedence(rhs) < precedence) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          return Writer.end();\n        }\n      } else {\n        return Writer.end();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new PrefixOperatorWriter<I, V>(recon, operator, rhs, precedence, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class InvokeOperatorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly func: V;\n  private readonly args: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, func: V, args: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.func = func;\n    this.args = args;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return InvokeOperatorWriter.write(output, this.recon, this.func, this.args,\n                                      this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, func: V, args: V): number {\n    let size = 0;\n    size += recon.sizeOfValue(func);\n    size += 1; // '('\n    size += recon.sizeOfBlockValue(args);\n    size += 1; // ')'\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, func: V, args: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (part === void 0) {\n        part = recon.writeValue(func, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 2;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(40/*'('*/);\n      step = 3;\n    }\n    if (step === 3) {\n      if (part === void 0) {\n        part = recon.writeBlockValue(args, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 4;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(41/*')'*/);\n      return Writer.end();\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new InvokeOperatorWriter<I, V>(recon, func, args, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class LiteralSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly item: I;\n  private readonly then: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, item: I, then: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.item = item;\n    this.then = then;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return LiteralSelectorWriter.write(output, this.recon, this.item, this.then,\n                                       this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, item: I, then: V): number {\n    let size = 0;\n    if (recon.precedence(item) < recon.precedence(recon.item(then))) {\n      size += 1; // '('\n      size += recon.sizeOfItem(item);\n      size += 1; // ')'\n    } else {\n      size += recon.sizeOfItem(item);\n    }\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, item: I, then: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1) {\n      if (recon.precedence(item) < recon.precedence(recon.item(then))) {\n        if (output.isCont()) {\n          output = output.write(40/*'('*/);\n          step = 2;\n        }\n      } else {\n        step = 2;\n      }\n    }\n    if (step === 2) {\n      if (part === void 0) {\n        part = recon.writeItem(item, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 3;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 3) {\n      if (recon.precedence(item) < recon.precedence(recon.item(then))) {\n        if (output.isCont()) {\n          output = output.write(41/*')'*/);\n          step = 4;\n        }\n      } else {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new LiteralSelectorWriter<I, V>(recon, item, then, part, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class GetSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly key: V;\n  private readonly then: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, key: V, then: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.key = key;\n    this.then = then;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return GetSelectorWriter.write(output, this.recon, this.key, this.then, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, key: V, then: V): number {\n    let size = 1; // '$' | '.'\n    if (recon.isRecord(recon.item(key))) {\n      size += 1; // '{'\n      size += recon.sizeOfBlockValue(key);\n      size += 1; // '}'\n    } else {\n      size += recon.sizeOfValue(key);\n    }\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, then: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3) {\n      if (recon.isRecord(recon.item(key))) {\n        if (output.isCont()) {\n          output = output.write(123/*'{'*/);\n          step = 4;\n        }\n      } else {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (part === void 0) {\n        if (recon.isRecord(recon.item(key))) {\n          part = recon.writeBlockValue(key, output);\n        } else {\n          part = recon.writeValue(key, output);\n        }\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 5;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 5) {\n      if (recon.isRecord(recon.item(key))) {\n        if (output.isCont()) {\n          output = output.write(125/*'}'*/);\n          step = 6;\n        }\n      } else {\n        step = 6;\n      }\n    }\n    if (step === 6) {\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new GetSelectorWriter<I, V>(recon, key, then, part, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, then: V): Writer {\n    return GetSelectorWriter.write(output, recon, key, then, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class GetAttrSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly key: V;\n  private readonly then: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, key: V, then: V, part?: Writer, step?: number) {\n    super();\n    this.recon  = recon;\n    this.key = key;\n    this.then = then;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return GetAttrSelectorWriter.write(output, this.recon, this.key, this.then,\n                                       this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, key: V, then: V): number {\n    let size = 2; // ('$' | '.') '@'\n    size += recon.sizeOfValue(key);\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, then: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(64/*'@'*/);\n      step = 4;\n    }\n    if (step === 4) {\n      if (part === void 0) {\n        part = recon.writeValue(key, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        return recon.writeThen(then, output);\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new GetAttrSelectorWriter<I, V>(recon, key, then, part, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, key: V, then: V): Writer {\n    return GetAttrSelectorWriter.write(output, recon, key, then, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class GetItemSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly index: V;\n  private readonly then: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, index: V, then: V, part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.index = index;\n    this.then = then;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return GetItemSelectorWriter.write(output, this.recon, this.index, this.then,\n                                       this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, index: V, then: V): number {\n    let size = 2; // \"$#\"\n    size += recon.sizeOfValue(index);\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static sizeOfThen<I, V>(recon: ReconWriter<I, V>, index: V, then: V): number {\n    let size = 1; // '#'\n    size += recon.sizeOfValue(index);\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, index: V, then: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 2;\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(35/*'#'*/);\n      step = 3;\n    }\n    if (step === 3) {\n      if (part === void 0) {\n        part = recon.writeValue(index, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        return recon.writeThen(then, output);\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new GetItemSelectorWriter<I, V>(recon, index, then, part, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, index: V, then: V): Writer {\n    return GetItemSelectorWriter.write(output, recon, index, then, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class KeysSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly then: V;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, then: V, step?: number) {\n    super();\n    this.recon = recon;\n    this.then = then;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return KeysSelectorWriter.write(output, this.recon, this.then, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, then: V): number {\n    let size = 3; // ('$' | '.') '*' ':'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, then: V,\n                     step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(42/*'*'*/);\n      step = 4;\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(58/*':'*/);\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new KeysSelectorWriter<I, V>(recon, then, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, then: V): Writer {\n    return KeysSelectorWriter.write(output, recon, then, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class ValuesSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly then: V;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, then: V, step?: number) {\n    super();\n    this.recon = recon;\n    this.then = then;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return ValuesSelectorWriter.write(output, this.recon, this.then, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, then: V): number {\n    let size = 3; // ('$' | '.') ':' '*'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, then: V,\n                     step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(58/*':'*/);\n      step = 4;\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(42/*'*'*/);\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new ValuesSelectorWriter<I, V>(recon, then, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, then: V): Writer {\n    return ValuesSelectorWriter.write(output, recon, then, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class ChildrenSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly then: V;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, then: V, step?: number) {\n    super();\n    this.recon = recon;\n    this.then = then;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return ChildrenSelectorWriter.write(output, this.recon, this.then, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, then: V): number {\n    let size = 2; // ('$' | '.') '*'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, then: V,\n                     step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(42/*'*'*/);\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new ChildrenSelectorWriter<I, V>(recon, then, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, then: V): Writer {\n    return ChildrenSelectorWriter.write(output, recon, then, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class DescendantsSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly then: V;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, then: V, step?: number) {\n    super();\n    this.recon = recon;\n    this.then = then;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return DescendantsSelectorWriter.write(output, this.recon, this.then, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, then: V): number {\n    let size = 3; // ('$' | '.') '*' '*'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, then: V,\n                     step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 3;\n    } else if (step === 2 && output.isCont()) {\n      output = output.write(46/*'.'*/);\n      step = 3;\n    }\n    if (step === 3 && output.isCont()) {\n      output = output.write(42/*'*'*/);\n      step = 4;\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(42/*'*'*/);\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new DescendantsSelectorWriter<I, V>(recon, then, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>, then: V): Writer {\n    return DescendantsSelectorWriter.write(output, recon, then, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport type {ReconWriter} from \"./ReconWriter\";\n\n/** @hidden */\nexport class FilterSelectorWriter<I, V> extends Writer {\n  private readonly recon: ReconWriter<I, V>;\n  private readonly predicate: V;\n  private readonly then: V;\n  private readonly part: Writer | undefined;\n  private readonly step: number | undefined;\n\n  constructor(recon: ReconWriter<I, V>, predicate: V, then: V,\n              part?: Writer, step?: number) {\n    super();\n    this.recon = recon;\n    this.predicate = predicate;\n    this.then = then;\n    this.part = part;\n    this.step = step;\n  }\n\n  pull(output: Output): Writer {\n    return FilterSelectorWriter.write(output, this.recon, this.predicate,\n                                      this.then, this.part, this.step);\n  }\n\n  static sizeOf<I, V>(recon: ReconWriter<I, V>, predicate: V, then: V): number {\n    let size = 2; // '$' '['\n    size += recon.sizeOfValue(predicate);\n    size += 1; // ']'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static sizeOfThen<I, V>(recon: ReconWriter<I, V>, predicate: V, then: V): number {\n    let size = 1; // '['\n    size += recon.sizeOfValue(predicate);\n    size += 1; // ']'\n    size += recon.sizeOfThen(then);\n    return size;\n  }\n\n  static write<I, V>(output: Output, recon: ReconWriter<I, V>, predicate: V, then: V,\n                     part?: Writer, step: number = 1): Writer {\n    if (step === 1 && output.isCont()) {\n      output = output.write(36/*'$'*/);\n      step = 2;\n    }\n    if (step === 2 && output.isCont()) {\n      output = output.write(91/*'['*/);\n      step = 3;\n    }\n    if (step === 3) {\n      if (part === void 0) {\n        part = recon.writeValue(predicate, output);\n      } else {\n        part = part.pull(output);\n      }\n      if (part.isDone()) {\n        part = void 0;\n        step = 4;\n      } else if (part.isError()) {\n        return part.asError();\n      }\n    }\n    if (step === 4 && output.isCont()) {\n      output = output.write(93/*']'*/);\n      return recon.writeThen(then, output);\n    }\n    if (output.isDone()) {\n      return Writer.error(new WriterException(\"truncated\"));\n    } else if (output.isError()) {\n      return Writer.error(output.trap());\n    }\n    return new FilterSelectorWriter<I, V>(recon, predicate, then, part, step);\n  }\n\n  static writeThen<I, V>(output: Output, recon: ReconWriter<I, V>,\n                         predicate: V, then: V): Writer {\n    return FilterSelectorWriter.write(output, recon, predicate, then, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {Output, Writer, Unicode, Base10, Base16} from \"@swim/codec\";\nimport {Recon} from \"../Recon\";\nimport {AttrWriter} from \"./AttrWriter\";\nimport {SlotWriter} from \"./SlotWriter\";\nimport {BlockWriter} from \"./BlockWriter\";\nimport {PrimaryWriter} from \"./PrimaryWriter\";\nimport {MarkupTextWriter} from \"./MarkupTextWriter\";\nimport {DataWriter} from \"./DataWriter\";\nimport {IdentWriter} from \"./IdentWriter\";\nimport {StringWriter} from \"./StringWriter\";\nimport {LambdaFuncWriter} from \"./LambdaFuncWriter\";\nimport {ConditionalOperatorWriter} from \"./ConditionalOperatorWriter\";\nimport {InfixOperatorWriter} from \"./InfixOperatorWriter\";\nimport {PrefixOperatorWriter} from \"./PrefixOperatorWriter\";\nimport {InvokeOperatorWriter} from \"./InvokeOperatorWriter\";\nimport {LiteralSelectorWriter} from \"./LiteralSelectorWriter\";\nimport {GetSelectorWriter} from \"./GetSelectorWriter\";\nimport {GetAttrSelectorWriter} from \"./GetAttrSelectorWriter\";\nimport {GetItemSelectorWriter} from \"./GetItemSelectorWriter\";\nimport {KeysSelectorWriter} from \"./KeysSelectorWriter\";\nimport {ValuesSelectorWriter} from \"./ValuesSelectorWriter\";\nimport {ChildrenSelectorWriter} from \"./ChildrenSelectorWriter\";\nimport {DescendantsSelectorWriter} from \"./DescendantsSelectorWriter\";\nimport {FilterSelectorWriter} from \"./FilterSelectorWriter\";\n\n/**\n * Factory for constructing Recon writers.\n */\nexport abstract class ReconWriter<I, V> {\n  abstract isField(item: I): boolean;\n\n  abstract isAttr(item: I): boolean;\n\n  abstract isSlot(item: I): boolean;\n\n  abstract isValue(item: I): boolean;\n\n  abstract isRecord(item: I): boolean;\n\n  abstract isText(item: I): boolean;\n\n  abstract isNum(item: I): boolean;\n\n  abstract isBool(item: I): boolean;\n\n  abstract isExpression(item: I): boolean;\n\n  abstract isExtant(item: I): boolean;\n\n  abstract items(item: I): Cursor<I>;\n\n  abstract item(value: V): I;\n\n  abstract key(item: I): V;\n\n  abstract value(item: I): V;\n\n  abstract string(item: I): string;\n\n  abstract precedence(item: I): number;\n\n  abstract sizeOfItem(item: I): number;\n\n  abstract writeItem(item: I, output: Output): Writer;\n\n  abstract sizeOfValue(value: V): number;\n\n  abstract writeValue(value: V, output: Output): Writer;\n\n  abstract sizeOfBlockValue(value: V): number;\n\n  abstract writeBlockValue(value: V, output: Output): Writer;\n\n  sizeOfAttr(key: V, value: V): number {\n    return AttrWriter.sizeOf(this, key, value);\n  }\n\n  writeAttr(key: V, value: V, output: Output): Writer {\n    return AttrWriter.write(output, this, key, value);\n  }\n\n  sizeOfSlot(key: V, value: V): number {\n    return SlotWriter.sizeOf(this, key, value);\n  }\n\n  writeSlot(key: V, value: V, output: Output): Writer {\n    return SlotWriter.write(output, this, key, value);\n  }\n\n  abstract sizeOfBlockItem(item: I): number;\n\n  abstract writeBlockItem(item: I, output: Output): Writer;\n\n  sizeOfBlock(item: I): number;\n  sizeOfBlock(items: Cursor<I>, inBlock: boolean, inMarkup: boolean): number;\n  sizeOfBlock(item: I | Cursor<I>, inBlock?: boolean, inMarkup?: boolean): number {\n    if (arguments.length === 3) {\n      return BlockWriter.sizeOf(this, item as Cursor<I>, inBlock!, inMarkup!);\n    } else {\n      const items = this.items(item as I);\n      if (items.hasNext()) {\n        return BlockWriter.sizeOf(this, items, this.isBlockSafe(this.items(item as I)), false);\n      } else {\n        return 2; // \"{}\"\n      }\n    }\n  }\n\n  writeBlock(item: I, output: Output): Writer;\n  writeBlock(items: Cursor<I>, output: Output, inBlock: boolean, inMarkup: boolean): Writer;\n  writeBlock(item: I | Cursor<I>, output: Output, inBlock?: boolean, inMarkup?: boolean): Writer {\n    if (arguments.length === 4) {\n      return BlockWriter.write(output, this, item as Cursor<I>, inBlock!, inMarkup!);\n    } else {\n      const items = this.items(item as I);\n      if (items.hasNext()) {\n        return BlockWriter.write(output, this, items, this.isBlockSafe(this.items(item as I)), false);\n      } else {\n        return Unicode.writeString(\"{}\", output);\n      }\n    }\n  }\n\n  sizeOfRecord(item: I): number {\n    const items = this.items(item);\n    if (items.hasNext()) {\n      return BlockWriter.sizeOf(this, items, false, false);\n    } else {\n      return 2; // \"{}\"\n    }\n  }\n\n  writeRecord(item: I, output: Output): Writer {\n    const items = this.items(item);\n    if (items.hasNext()) {\n      return BlockWriter.write(output, this, items, false, false);\n    } else {\n      return Unicode.writeString(\"{}\", output);\n    }\n  }\n\n  sizeOfPrimary(value: V): number {\n    if (this.isRecord(this.item(value))) {\n      const items = this.items(this.item(value));\n      if (items.hasNext()) {\n        return PrimaryWriter.sizeOf(this, items);\n      }\n    } else if (!this.isExtant(this.item(value))) {\n      return this.sizeOfValue(value);\n    }\n    return 2; // \"()\"\n  }\n\n  writePrimary(value: V, output: Output): Writer {\n    if (this.isRecord(this.item(value))) {\n      const items = this.items(this.item(value));\n      if (items.hasNext()) {\n        return PrimaryWriter.write(output, this, items);\n      }\n    } else if (!this.isExtant(this.item(value))) {\n      return this.writeValue(value, output);\n    }\n    return Unicode.writeString(\"()\", output);\n  }\n\n  isBlockSafe(items: Cursor<I>): boolean {\n    while (items.hasNext()) {\n      if (this.isAttr(items.next().value!)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  isMarkupSafe(items: Cursor<I>): boolean {\n    if (!items.hasNext() || !this.isAttr(items.next().value!)) {\n      return false;\n    }\n    while (items.hasNext()) {\n      if (this.isAttr(items.next().value!)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  sizeOfMarkupText(item: I | string): number {\n    if (typeof item !== \"string\") {\n      item = this.string(item);\n    }\n    return MarkupTextWriter.sizeOf(item);\n  }\n\n  writeMarkupText(item: I | string, output: Output): Writer {\n    if (typeof item !== \"string\") {\n      item = this.string(item);\n    }\n    return MarkupTextWriter.write(output, item);\n  }\n\n  sizeOfData(length: number): number {\n    return DataWriter.sizeOf(length);\n  }\n\n  writeData(value: Uint8Array | undefined, output: Output): Writer {\n    if (value !== void 0) {\n      return DataWriter.write(output, value);\n    } else {\n      return Unicode.writeString(\"%\", output);\n    }\n  }\n\n  isIdent(value: I | string): boolean {\n    if (typeof value !== \"string\") {\n      value = this.string(value);\n    }\n    const n = value.length;\n    let c: number | undefined;\n    if (n === 0 || (c = value.codePointAt(0), c !== void 0 && !Recon.isIdentStartChar(c))) {\n      return false;\n    }\n    for (let i = value.offsetByCodePoints(0, 1); i < n; i = value.offsetByCodePoints(i, 1)) {\n      c = value.codePointAt(i);\n      if (c === void 0 || !Recon.isIdentChar(c)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  sizeOfText(value: string): number {\n    if (this.isIdent(value)) {\n      return IdentWriter.sizeOf(value);\n    } else {\n      return StringWriter.sizeOf(value);\n    }\n  }\n\n  writeText(value: string, output: Output): Writer {\n    if (this.isIdent(value)) {\n      return IdentWriter.write(output, value);\n    } else {\n      return StringWriter.write(output, value);\n    }\n  }\n\n  sizeOfNum(value: number): number {\n    if (isFinite(value) && Math.floor(value) === value && Math.abs(value) < 2147483648) {\n      let size = Base10.countDigits(value);\n      if (value < 0) {\n        size += 1;\n      }\n      return size;\n    } else {\n      return (\"\" + value).length;\n    }\n  }\n\n  writeNum(value: number, output: Output): Writer {\n    if (isFinite(value) && Math.floor(value) === value && Math.abs(value) < 2147483648) {\n      return Base10.writeInteger(value, output);\n    } else {\n      return Unicode.writeString(\"\" + value, output);\n    }\n  }\n\n  sizeOfUint32(value: number): number {\n    return 10;\n  }\n\n  writeUint32(value: number, output: Output): Writer {\n    return Base16.lowercase.writeIntegerLiteral(value, output, 8);\n  }\n\n  sizeOfUint64(value: number): number {\n    return 18;\n  }\n\n  writeUint64(value: number, output: Output): Writer {\n    return Base16.lowercase.writeIntegerLiteral(value, output, 16);\n  }\n\n  sizeOfBool(value: boolean): number {\n    return value ? 4 : 5;\n  }\n\n  writeBool(value: boolean, output: Output): Writer {\n    return Unicode.writeString(value ? \"true\" : \"false\", output);\n  }\n\n  sizeOfLambdaFunc(bindings: V, template: V): number {\n    return LambdaFuncWriter.sizeOf(this, bindings, template);\n  }\n\n  writeLambdaFunc(bindings: V, template: V, output: Output): Writer {\n    return LambdaFuncWriter.write(output, this, bindings, template);\n  }\n\n  sizeOfConditionalOperator(ifTerm: I, thenTerm: I, elseTerm: I, precedence: number): number {\n    return ConditionalOperatorWriter.sizeOf(this, ifTerm, thenTerm, elseTerm, precedence);\n  }\n\n  writeConditionalOperator(ifTerm: I, thenTerm: I, elseTerm: I, precedence: number, output: Output): Writer {\n    return ConditionalOperatorWriter.write(output, this, ifTerm, thenTerm, elseTerm, precedence);\n  }\n\n  sizeOfInfixOperator(lhs: I, operator: string, rhs: I, precedence: number): number {\n    return InfixOperatorWriter.sizeOf(this, lhs, operator, rhs, precedence);\n  }\n\n  writeInfixOperator(lhs: I, operator: string, rhs: I, precedence: number, output: Output): Writer {\n    return InfixOperatorWriter.write(output, this, lhs, operator, rhs, precedence);\n  }\n\n  sizeOfPrefixOperator(operator: string, rhs: I, precedence: number): number {\n    return PrefixOperatorWriter.sizeOf(this, operator, rhs, precedence);\n  }\n\n  writePrefixOperator(operator: string, rhs: I, precedence: number, output: Output): Writer {\n    return PrefixOperatorWriter.write(output, this, operator, rhs, precedence);\n  }\n\n  sizeOfInvokeOperator(func: V, args: V): number {\n    return InvokeOperatorWriter.sizeOf(this, func, args);\n  }\n\n  writeInvokeOperator(func: V, args: V, output: Output): Writer {\n    return InvokeOperatorWriter.write(output, this, func, args);\n  }\n\n  abstract sizeOfThen(then: V): number;\n\n  abstract writeThen(then: V, output: Output): Writer;\n\n  sizeOfIdentitySelector(): number {\n    return 0;\n  }\n\n  writeIdentitySelector(output: Output): Writer {\n    return Writer.end();\n  }\n\n  sizeOfThenIdentitySelector(): number {\n    return 0;\n  }\n\n  writeThenIdentitySelector(output: Output): Writer {\n    return Writer.end();\n  }\n\n  sizeOfLiteralSelector(item: I, then: V): number {\n    return LiteralSelectorWriter.sizeOf(this, item, then);\n  }\n\n  writeLiteralSelector(item: I, then: V, output: Output): Writer {\n    return LiteralSelectorWriter.write(output, this, item, then);\n  }\n\n  sizeOfThenLiteralSelector(item: I, then: V): number {\n    return 0;\n  }\n\n  writeThenLiteralSelector(item: I, then: V, output: Output): Writer {\n    return Writer.end();\n  }\n\n  sizeOfGetSelector(key: V, then: V): number {\n    return GetSelectorWriter.sizeOf(this, key, then);\n  }\n\n  writeGetSelector(key: V, then: V, output: Output): Writer {\n    return GetSelectorWriter.write(output, this, key, then);\n  }\n\n  sizeOfThenGetSelector(key: V, then: V): number {\n    return GetSelectorWriter.sizeOf(this, key, then);\n  }\n\n  writeThenGetSelector(key: V, then: V, output: Output): Writer {\n    return GetSelectorWriter.writeThen(output, this, key, then);\n  }\n\n  sizeOfGetAttrSelector(key: V, then: V): number {\n    return GetAttrSelectorWriter.sizeOf(this, key, then);\n  }\n\n  writeGetAttrSelector(key: V, then: V, output: Output): Writer {\n    return GetAttrSelectorWriter.write(output, this, key, then);\n  }\n\n  sizeOfThenGetAttrSelector(key: V, then: V): number {\n    return GetAttrSelectorWriter.sizeOf(this, key, then);\n  }\n\n  writeThenGetAttrSelector(key: V, then: V, output: Output): Writer {\n    return GetAttrSelectorWriter.writeThen(output, this, key, then);\n  }\n\n  sizeOfGetItemSelector(index: V, then: V): number {\n    return GetItemSelectorWriter.sizeOf(this, index, then);\n  }\n\n  writeGetItemSelector(index: V, then: V, output: Output): Writer {\n    return GetItemSelectorWriter.write(output, this, index, then);\n  }\n\n  sizeOfThenGetItemSelector(index: V, then: V): number {\n    return GetItemSelectorWriter.sizeOfThen(this, index, then);\n  }\n\n  writeThenGetItemSelector(index: V, then: V, output: Output): Writer {\n    return GetItemSelectorWriter.writeThen(output, this, index, then);\n  }\n\n  sizeOfKeysSelector(then: V): number {\n    return KeysSelectorWriter.sizeOf(this, then);\n  }\n\n  writeKeysSelector(then: V, output: Output): Writer {\n    return KeysSelectorWriter.write(output, this, then);\n  }\n\n  sizeOfThenKeysSelector(then: V): number {\n    return KeysSelectorWriter.sizeOf(this, then);\n  }\n\n  writeThenKeysSelector(then: V, output: Output): Writer {\n    return KeysSelectorWriter.writeThen(output, this, then);\n  }\n\n  sizeOfValuesSelector(then: V): number {\n    return ValuesSelectorWriter.sizeOf(this, then);\n  }\n\n  writeValuesSelector(then: V, output: Output): Writer {\n    return ValuesSelectorWriter.write(output, this, then);\n  }\n\n  sizeOfThenValuesSelector(then: V): number {\n    return ValuesSelectorWriter.sizeOf(this, then);\n  }\n\n  writeThenValuesSelector(then: V, output: Output): Writer {\n    return ValuesSelectorWriter.writeThen(output, this, then);\n  }\n\n  sizeOfChildrenSelector(then: V): number {\n    return ChildrenSelectorWriter.sizeOf(this, then);\n  }\n\n  writeChildrenSelector(then: V, output: Output): Writer {\n    return ChildrenSelectorWriter.write(output, this, then);\n  }\n\n  sizeOfThenChildrenSelector(then: V): number {\n    return ChildrenSelectorWriter.sizeOf(this, then);\n  }\n\n  writeThenChildrenSelector(then: V, output: Output): Writer {\n    return ChildrenSelectorWriter.writeThen(output, this, then);\n  }\n\n  sizeOfDescendantsSelector(then: V): number {\n    return DescendantsSelectorWriter.sizeOf(this, then);\n  }\n\n  writeDescendantsSelector(then: V, output: Output): Writer {\n    return DescendantsSelectorWriter.write(output, this, then);\n  }\n\n  sizeOfThenDescendantsSelector(then: V): number {\n    return DescendantsSelectorWriter.sizeOf(this, then);\n  }\n\n  writeThenDescendantsSelector(then: V, output: Output): Writer {\n    return DescendantsSelectorWriter.writeThen(output, this, then);\n  }\n\n  sizeOfFilterSelector(predicate: V, then: V): number {\n    return FilterSelectorWriter.sizeOf(this, predicate, then);\n  }\n\n  writeFilterSelector(predicate: V, then: V, output: Output): Writer {\n    return FilterSelectorWriter.write(output, this, predicate, then);\n  }\n\n  sizeOfThenFilterSelector(predicate: V, then: V): number {\n    return FilterSelectorWriter.sizeOfThen(this, predicate, then);\n  }\n\n  writeThenFilterSelector(predicate: V, then: V, output: Output): Writer {\n    return FilterSelectorWriter.writeThen(output, this, predicate, then);\n  }\n\n  sizeOfExtant(): number {\n    return 0;\n  }\n\n  writeExtant(output: Output): Writer {\n    return Writer.end();\n  }\n\n  sizeOfAbsent(): number {\n    return 0;\n  }\n\n  writeAbsent(output: Output): Writer {\n    return Writer.end();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {Output, WriterException, Writer} from \"@swim/codec\";\nimport {\n  Item,\n  Field,\n  Attr,\n  Slot,\n  Value,\n  Record,\n  Data,\n  Text,\n  Num,\n  Bool,\n  Expression,\n  Operator,\n  Selector,\n  Func,\n  Extant,\n  Absent,\n  ChildrenSelector,\n  DescendantsSelector,\n  FilterSelector,\n  GetAttrSelector,\n  GetItemSelector,\n  GetSelector,\n  IdentitySelector,\n  KeysSelector,\n  LiteralSelector,\n  ValuesSelector,\n  BinaryOperator,\n  ConditionalOperator,\n  InvokeOperator,\n  UnaryOperator,\n  BridgeFunc,\n  LambdaFunc,\n} from \"@swim/structure\";\nimport {ReconWriter} from \"./ReconWriter\";\n\nexport class ReconStructureWriter extends ReconWriter<Item, Value> {\n  isField(item: Item): boolean {\n    return item instanceof Field;\n  }\n\n  isAttr(item: Item): boolean {\n    return item instanceof Attr;\n  }\n\n  isSlot(item: Item): boolean {\n    return item instanceof Slot;\n  }\n\n  isValue(item: Item): boolean {\n    return item instanceof Value;\n  }\n\n  isRecord(item: Item): boolean {\n    return item instanceof Record;\n  }\n\n  isText(item: Item): boolean {\n    return item instanceof Text;\n  }\n\n  isNum(item: Item): boolean {\n    return item instanceof Num;\n  }\n\n  isBool(item: Item): boolean {\n    return item instanceof Bool;\n  }\n\n  isExpression(item: Item): boolean {\n    return item instanceof Expression;\n  }\n\n  isExtant(item: Item): boolean {\n    return item instanceof Extant;\n  }\n\n  items(item: Item): Cursor<Item> {\n    return item.iterator();\n  }\n\n  item(value: Value): Item {\n    return value;\n  }\n\n  key(item: Item): Value {\n    return item.key;\n  }\n\n  value(item: Item): Value {\n    return item.toValue();\n  }\n\n  string(item: Item): string {\n    return item.stringValue(\"\");\n  }\n\n  precedence(item: Item): number {\n    return item.precedence;\n  }\n\n  sizeOfItem(item: Item): number {\n    if (item instanceof Field) {\n      if (item instanceof Attr) {\n        return this.sizeOfAttr(item.key, item.value);\n      } else if (item instanceof Slot) {\n        return this.sizeOfSlot(item.key, item.value);\n      }\n    } else if (item instanceof Value) {\n      return this.sizeOfValue(item);\n    }\n    throw new WriterException(\"No Recon serialization for \" + item);\n  }\n\n  writeItem(item: Item, output: Output): Writer {\n    if (item instanceof Field) {\n      if (item instanceof Attr) {\n        return this.writeAttr(item.key, item.value, output);\n      } else if (item instanceof Slot) {\n        return this.writeSlot(item.key, item.value, output);\n      }\n    } else if (item instanceof Value) {\n      return this.writeValue(item, output);\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + item));\n  }\n\n  sizeOfValue(value: Value): number {\n    if (value instanceof Record) {\n      return this.sizeOfRecord(value);\n    } else if (value instanceof Data) {\n      return this.sizeOfData(value.size);\n    } else if (value instanceof Text) {\n      return this.sizeOfText(value.value);\n    } else if (value instanceof Num) {\n      if (value.isUint32()) {\n        return this.sizeOfUint32(value.value);\n      } else if (value.isUint64()) {\n        return this.sizeOfUint64(value.value);\n      } else {\n        return this.sizeOfNum(value.value);\n      }\n    } else if (value instanceof Bool) {\n      return this.sizeOfBool(value.value);\n    } else if (value instanceof Selector) {\n      return this.sizeOfSelector(value);\n    } else if (value instanceof Operator) {\n      return this.sizeOfOperator(value);\n    } else if (value instanceof Func) {\n      return this.sizeOfFunc(value);\n    } else if (value instanceof Extant) {\n      return this.sizeOfExtant();\n    } else if (value instanceof Absent) {\n      return this.sizeOfAbsent();\n    }\n    throw new WriterException(\"No Recon serialization for \" + value);\n  }\n\n  writeValue(value: Value, output: Output): Writer {\n    if (value instanceof Record) {\n      return this.writeRecord(value, output);\n    } else if (value instanceof Data) {\n      return this.writeData(value.asUint8Array(), output);\n    } else if (value instanceof Text) {\n      return this.writeText(value.value, output);\n    } else if (value instanceof Num) {\n      if (value.isUint32()) {\n        return this.writeUint32(value.value, output);\n      } else if (value.isUint64()) {\n        return this.writeUint64(value.value, output);\n      } else {\n        return this.writeNum(value.value, output);\n      }\n    } else if (value instanceof Bool) {\n      return this.writeBool(value.value, output);\n    } else if (value instanceof Selector) {\n      return this.writeSelector(value, output);\n    } else if (value instanceof Operator) {\n      return this.writeOperator(value, output);\n    } else if (value instanceof Func) {\n      return this.writeFunc(value, output);\n    } else if (value instanceof Extant) {\n      return this.writeExtant(output);\n    } else if (value instanceof Absent) {\n      return this.writeAbsent(output);\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + value));\n  }\n\n  sizeOfSelector(selector: Selector): number {\n    if (selector instanceof IdentitySelector) {\n      return this.sizeOfIdentitySelector();\n    } else if (selector instanceof LiteralSelector) {\n      return this.sizeOfLiteralSelector(selector.item, selector.then);\n    } else if (selector instanceof GetSelector) {\n      return this.sizeOfGetSelector(selector.item, selector.then);\n    } else if (selector instanceof GetAttrSelector) {\n      return this.sizeOfGetAttrSelector(selector.item, selector.then);\n    } else if (selector instanceof GetItemSelector) {\n      return this.sizeOfGetItemSelector(selector.item, selector.then);\n    } else if (selector instanceof KeysSelector) {\n      return this.sizeOfKeysSelector(selector.then);\n    } else if (selector instanceof ValuesSelector) {\n      return this.sizeOfValuesSelector(selector.then);\n    } else if (selector instanceof ChildrenSelector) {\n      return this.sizeOfChildrenSelector(selector.then);\n    } else if (selector instanceof DescendantsSelector) {\n      return this.sizeOfDescendantsSelector(selector.then);\n    } else if (selector instanceof FilterSelector) {\n      return this.sizeOfFilterSelector(selector.predicate, selector.then);\n    }\n    throw new WriterException(\"No Recon serialization for \" + selector);\n  }\n\n  writeSelector(selector: Selector, output: Output): Writer {\n    if (selector instanceof IdentitySelector) {\n      return this.writeIdentitySelector(output);\n    } else if (selector instanceof LiteralSelector) {\n      return this.writeLiteralSelector(selector.item, selector.then, output);\n    } else if (selector instanceof GetSelector) {\n      return this.writeGetSelector(selector.item, selector.then, output);\n    } else if (selector instanceof GetAttrSelector) {\n      return this.writeGetAttrSelector(selector.item, selector.then, output);\n    } else if (selector instanceof GetItemSelector) {\n      return this.writeGetItemSelector(selector.item, selector.then, output);\n    } else if (selector instanceof KeysSelector) {\n      return this.writeKeysSelector(selector.then, output);\n    } else if (selector instanceof ValuesSelector) {\n      return this.writeValuesSelector(selector.then, output);\n    } else if (selector instanceof ChildrenSelector) {\n      return this.writeChildrenSelector(selector.then, output);\n    } else if (selector instanceof DescendantsSelector) {\n      return this.writeDescendantsSelector(selector.then, output);\n    } else if (selector instanceof FilterSelector) {\n      return this.writeFilterSelector(selector.predicate, selector.then, output);\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + selector));\n  }\n\n  sizeOfOperator(operator: Operator): number {\n    if (operator instanceof BinaryOperator) {\n      return this.sizeOfInfixOperator(operator.operand1, operator.operator, operator.operand2, operator.precedence);\n    } else if (operator instanceof UnaryOperator) {\n      return this.sizeOfPrefixOperator(operator.operator, operator.operand, operator.precedence);\n    } else if (operator instanceof InvokeOperator) {\n      return this.sizeOfInvokeOperator(operator.func, operator.args);\n    } else if (operator instanceof ConditionalOperator) {\n      return this.sizeOfConditionalOperator(operator.ifTerm, operator.thenTerm, operator.elseTerm, operator.precedence);\n    }\n    throw new WriterException(\"No Recon serialization for \" + operator);\n  }\n\n  writeOperator(operator: Operator, output: Output): Writer {\n    if (operator instanceof BinaryOperator) {\n      return this.writeInfixOperator(operator.operand1, operator.operator, operator.operand2, operator.precedence, output);\n    } else if (operator instanceof UnaryOperator) {\n      return this.writePrefixOperator(operator.operator, operator.operand, operator.precedence, output);\n    } else if (operator instanceof InvokeOperator) {\n      return this.writeInvokeOperator(operator.func, operator.args, output);\n    } else if (operator instanceof ConditionalOperator) {\n      return this.writeConditionalOperator(operator.ifTerm, operator.thenTerm, operator.elseTerm, operator.precedence, output);\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + operator));\n  }\n\n  sizeOfFunc(func: Func): number {\n    if (func instanceof LambdaFunc) {\n      return this.sizeOfLambdaFunc(func.bindings, func.template);\n    } else if (func instanceof BridgeFunc) {\n      return 0;\n    }\n    throw new WriterException(\"No Recon serialization for \" + func);\n  }\n\n  writeFunc(func: Func, output: Output): Writer {\n    if (func instanceof LambdaFunc) {\n      return this.writeLambdaFunc(func.bindings, func.template, output);\n    } else if (func instanceof BridgeFunc) {\n      return Writer.end();\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + func));\n  }\n\n  sizeOfBlockItem(item: Item): number {\n    if (item instanceof Field) {\n      return this.sizeOfItem(item);\n    } else if (item instanceof Value) {\n      return this.sizeOfBlockValue(item);\n    }\n    throw new WriterException(\"No Recon serialization for \" + item);\n  }\n\n  writeBlockItem(item: Item, output: Output): Writer {\n    if (item instanceof Field) {\n      return this.writeItem(item, output);\n    } else if (item instanceof Value) {\n      return this.writeBlockValue(item, output);\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + item));\n  }\n\n  sizeOfBlockValue(value: Value): number {\n    if (value instanceof Record) {\n      return this.sizeOfBlock(value);\n    }\n    return this.sizeOfValue(value);\n  }\n\n  writeBlockValue(value: Value, output: Output): Writer {\n    if (value instanceof Record) {\n      return this.writeBlock(value, output);\n    }\n    return this.writeValue(value, output);\n  }\n\n  sizeOfThen(then: Value): number {\n    if (then instanceof Selector) {\n      if (then instanceof IdentitySelector) {\n        return this.sizeOfThenIdentitySelector();\n      } else if (then instanceof LiteralSelector) {\n        return this.sizeOfThenLiteralSelector(then.item, then.then);\n      } else if (then instanceof GetSelector) {\n        return this.sizeOfThenGetSelector(then.item, then.then);\n      } else if (then instanceof GetAttrSelector) {\n        return this.sizeOfThenGetAttrSelector(then.item, then.then);\n      } else if (then instanceof GetItemSelector) {\n        return this.sizeOfThenGetItemSelector(then.item, then.then);\n      } else if (then instanceof KeysSelector) {\n        return this.sizeOfThenKeysSelector(then.then);\n      } else if (then instanceof ValuesSelector) {\n        return this.sizeOfThenValuesSelector(then.then);\n      } else if (then instanceof ChildrenSelector) {\n        return this.sizeOfThenChildrenSelector(then.then);\n      } else if (then instanceof DescendantsSelector) {\n        return this.sizeOfThenDescendantsSelector(then.then);\n      } else if (then instanceof FilterSelector) {\n        return this.sizeOfThenFilterSelector(then.predicate, then.then);\n      }\n    }\n    throw new WriterException(\"No Recon serialization for \" + then);\n  }\n\n  writeThen(then: Value, output: Output): Writer {\n    if (then instanceof Selector) {\n      if (then instanceof IdentitySelector) {\n        return this.writeThenIdentitySelector(output);\n      } else if (then instanceof LiteralSelector) {\n        return this.writeThenLiteralSelector(then.item, then.then, output);\n      } else if (then instanceof GetSelector) {\n        return this.writeThenGetSelector(then.item, then.then, output);\n      } else if (then instanceof GetAttrSelector) {\n        return this.writeThenGetAttrSelector(then.item, then.then, output);\n      } else if (then instanceof GetItemSelector) {\n        return this.writeThenGetItemSelector(then.item, then.then, output);\n      } else if (then instanceof KeysSelector) {\n        return this.writeThenKeysSelector(then.then, output);\n      } else if (then instanceof ValuesSelector) {\n        return this.writeThenValuesSelector(then.then, output);\n      } else if (then instanceof ChildrenSelector) {\n        return this.writeThenChildrenSelector(then.then, output);\n      } else if (then instanceof DescendantsSelector) {\n        return this.writeThenDescendantsSelector(then.then, output);\n      } else if (then instanceof FilterSelector) {\n        return this.writeThenFilterSelector(then.predicate, then.then, output);\n      }\n    }\n    return Writer.error(new WriterException(\"No Recon serialization for \" + then));\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Diagnostic} from \"@swim/codec\";\n\nexport class UriException extends Error {\n  declare readonly diagnostic: Diagnostic | null;\n\n  constructor(message?: Diagnostic | string) {\n    super(message instanceof Diagnostic ? message.message : message);\n    Object.setPrototypeOf(this, UriException.prototype);\n    Object.defineProperty(this, \"diagnostic\", {\n      value: message instanceof Diagnostic ? message : null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  toString(): string {\n    if (this.diagnostic !== null) {\n      return this.diagnostic.toString();\n    } else {\n      return super.toString();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings} from \"@swim/util\";\nimport {Output, Format, Debug, Display, Base16} from \"@swim/codec\";\nimport type {Form} from \"@swim/structure\";\nimport {UriException} from \"./UriException\";\nimport {AnyUriScheme, UriScheme} from \"./\"; // forward import\nimport {AnyUriAuthority, UriAuthorityInit, UriAuthority} from \"./\"; // forward import\nimport type {AnyUriUser, UriUser} from \"./UriUser\";\nimport type {AnyUriHost, UriHost} from \"./UriHost\";\nimport type {AnyUriPort, UriPort} from \"./UriPort\";\nimport {AnyUriPath, UriPath} from \"./\"; // forward import\nimport {UriPathBuilder} from \"./\"; // forward import\nimport {AnyUriQuery, UriQuery} from \"./\"; // forward import\nimport {UriQueryBuilder} from \"./\"; // forward import\nimport {AnyUriFragment, UriFragment} from \"./\"; // forward import\nimport {UriForm} from \"./\"; // forward import\nimport {UriParser} from \"./\"; // forward import\n\nexport type AnyUri = Uri | UriInit | string;\n\nexport interface UriInit extends UriAuthorityInit {\n  scheme?: AnyUriScheme;\n  authority?: AnyUriAuthority;\n  path?: AnyUriPath;\n  query?: AnyUriQuery;\n  fragment?: AnyUriFragment;\n}\n\nexport class Uri implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  constructor(scheme: UriScheme, authority: UriAuthority, path: UriPath,\n              query: UriQuery, fragment: UriFragment) {\n    Object.defineProperty(this, \"scheme\", {\n      value: scheme,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"authority\", {\n      value: authority,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"path\", {\n      value: path,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"query\", {\n      value: query,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"fragment\", {\n      value: fragment,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hashValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.scheme.isDefined() || this.authority.isDefined() || this.path.isDefined()\n        || this.query.isDefined() || this.fragment.isDefined();\n  }\n\n  isEmpty(): boolean {\n    return !this.scheme.isDefined() && !this.authority.isDefined() && this.path.isEmpty()\n        && !this.query.isDefined() && !this.fragment.isDefined();\n  }\n\n  declare readonly scheme: UriScheme;\n\n  withScheme(scheme: AnyUriScheme): Uri {\n    scheme = UriScheme.fromAny(scheme);\n    if (scheme !== this.scheme) {\n      return this.copy(scheme, this.authority, this.path, this.query, this.fragment);\n    } else {\n      return this;\n    }\n  }\n\n  get schemePart(): string {\n    return this.scheme.toString();\n  }\n\n  withSchemePart(schemePart: string): Uri {\n    return this.withScheme(UriScheme.parse(schemePart));\n  }\n\n  get schemeName(): string {\n    return this.scheme.name;\n  }\n\n  withSchemeName(schemeName: string): Uri {\n    return this.withScheme(UriScheme.create(schemeName));\n  }\n\n  declare readonly authority: UriAuthority;\n\n  withAuthority(authority: AnyUriAuthority): Uri {\n    authority = UriAuthority.fromAny(authority);\n    if (authority !== this.authority) {\n      return this.copy(this.scheme, authority as UriAuthority, this.path, this.query, this.fragment);\n    } else {\n      return this;\n    }\n  }\n\n  get authorityPart(): string {\n    return this.authority.toString();\n  }\n\n  withAuthorityPart(authorityPart: string): Uri {\n    return this.withAuthority(UriAuthority.parse(authorityPart));\n  }\n\n  get user(): UriUser {\n    return this.authority.user;\n  }\n\n  withUser(user: AnyUriUser): Uri {\n    return this.withAuthority(this.authority.withUser(user));\n  }\n\n  get userPart(): string {\n    return this.authority.userPart;\n  }\n\n  withUserPart(userPart: string): Uri {\n    return this.withAuthority(this.authority.withUserPart(userPart));\n  }\n\n  get username(): string | undefined {\n    return this.authority.username;\n  }\n\n  withUsername(username: string | undefined, password?: string): Uri {\n    if (arguments.length === 1) {\n      return this.withAuthority(this.authority.withUsername(username));\n    } else {\n      return this.withAuthority(this.authority.withUsername(username, password));\n    }\n  }\n\n  get password(): string | undefined {\n    return this.authority.password;\n  }\n\n  withPassword(password: string | undefined): Uri {\n    return this.withAuthority(this.authority.withPassword(password));\n  }\n\n  get host(): UriHost {\n    return this.authority.host;\n  }\n\n  withHost(host: AnyUriHost): Uri {\n    return this.withAuthority(this.authority.withHost(host));\n  }\n\n  get hostPart(): string {\n    return this.authority.hostPart;\n  }\n\n  withHostPart(hostPart: string): Uri {\n    return this.withAuthority(this.authority.withHostPart(hostPart));\n  }\n\n  get hostAddress(): string {\n    return this.authority.hostAddress;\n  }\n\n  get hostName(): string | undefined {\n    return this.authority.hostName;\n  }\n\n  withHostName(hostName: string): Uri {\n    return this.withAuthority(this.authority.withHostName(hostName));\n  }\n\n  get hostIPv4(): string | undefined {\n    return this.authority.hostIPv4;\n  }\n\n  withHostIPv4(hostIPv4: string): Uri {\n    return this.withAuthority(this.authority.withHostIPv4(hostIPv4));\n  }\n\n  get hostIPv6(): string | undefined {\n    return this.authority.hostIPv6;\n  }\n\n  withHostIPv6(hostIPv6: string): Uri {\n    return this.withAuthority(this.authority.withHostIPv6(hostIPv6));\n  }\n\n  get port(): UriPort {\n    return this.authority.port;\n  }\n\n  withPort(port: AnyUriPort): Uri {\n    return this.withAuthority(this.authority.withPort(port));\n  }\n\n  get portPart(): string {\n    return this.authority.portPart;\n  }\n\n  withPortPart(portPart: string): Uri {\n    return this.withAuthority(this.authority.withPortPart(portPart));\n  }\n\n  get portNumber(): number {\n    return this.authority.portNumber;\n  }\n\n  withPortNumber(portNumber: number): Uri {\n    return this.withAuthority(this.authority.withPortNumber(portNumber));\n  }\n\n  declare readonly path: UriPath;\n\n  withPath(...components: AnyUriPath[]): Uri {\n    const path = UriPath.of(...components);\n    if (path !== this.path) {\n      return this.copy(this.scheme, this.authority, path, this.query, this.fragment);\n    } else {\n      return this;\n    }\n  }\n\n  get pathPart(): string {\n    return this.path.toString();\n  }\n\n  withPathPart(pathPart: string): Uri {\n    return this.withPath(UriPath.parse(pathPart));\n  }\n\n  get pathName(): string {\n    return this.path.name;\n  }\n\n  withPathName(pathName: string): Uri {\n    return this.withPath(this.path.withName(pathName));\n  }\n\n  parentPath(): UriPath {\n    return this.path.parent();\n  }\n\n  basePath(): UriPath {\n    return this.path.base();\n  }\n\n  parent(): Uri {\n    return Uri.create(this.scheme, this.authority, this.path.parent());\n  }\n\n  base(): Uri {\n    return Uri.create(this.scheme, this.authority, this.path.base());\n  }\n\n  appendedPath(...components: AnyUriPath[]): Uri {\n    return this.withPath(this.path.appended(...components));\n  }\n\n  appendedSlash(): Uri {\n    return this.withPath(this.path.appendedSlash());\n  }\n\n  appendedSegment(segment: string): Uri {\n    return this.withPath(this.path.appendedSegment(segment));\n  }\n\n  prependedPath(...components: AnyUriPath[]): Uri {\n    return this.withPath(this.path.prepended(...components));\n  }\n\n  prependedSlash(): Uri {\n    return this.withPath(this.path.prependedSlash());\n  }\n\n  prependedSegment(segment: string): Uri {\n    return this.withPath(this.path.prependedSegment(segment));\n  }\n\n  declare readonly query: UriQuery;\n\n  withQuery(query: AnyUriQuery): Uri {\n    query = UriQuery.fromAny(query);\n    if (query !== this.query) {\n      return this.copy(this.scheme, this.authority, this.path, query, this.fragment);\n    } else {\n      return this;\n    }\n  }\n\n  get queryPart(): string {\n    return this.query.toString();\n  }\n\n  withQueryPart(query: string): Uri {\n    return this.withQuery(UriQuery.parse(query));\n  }\n\n  updatedQuery(key: string, value: string): Uri {\n    return this.withQuery(this.query.updated(key, value));\n  }\n\n  removedQuery(key: string): Uri {\n    return this.withQuery(this.query.removed(key));\n  }\n\n  appendedQuery(key: string | undefined, value: string): Uri;\n  appendedQuery(params: AnyUriQuery): Uri;\n  appendedQuery(key: AnyUriQuery | undefined, value?: string): Uri {\n    return this.withQuery(this.query.appended(key as any, value as any));\n  }\n\n  prependedQuery(key: string | undefined, value: string): Uri;\n  prependedQuery(params: AnyUriQuery): Uri;\n  prependedQuery(key: AnyUriQuery | undefined, value?: string): Uri {\n    return this.withQuery(this.query.prepended(key as any, value as any));\n  }\n\n  declare readonly fragment: UriFragment;\n\n  withFragment(fragment: AnyUriFragment): Uri {\n    fragment = UriFragment.fromAny(fragment);\n    if (fragment !== this.fragment) {\n      return Uri.create(this.scheme, this.authority, this.path, this.query, fragment);\n    } else {\n      return this;\n    }\n  }\n\n  get fragmentPart(): string {\n    return this.fragment.toString();\n  }\n\n  withFragmentPart(fragmentPart: string): Uri {\n    return this.withFragment(UriFragment.parse(fragmentPart));\n  }\n\n  get fragmentIdentifier(): string | undefined {\n    return this.fragment.identifier;\n  }\n\n  withFragmentIdentifier(fragmentIdentifier: string | undefined): Uri {\n    return this.withFragment(UriFragment.create(fragmentIdentifier));\n  }\n\n  endpoint(): Uri {\n    if (this.path.isDefined() || this.query.isDefined() || this.fragment.isDefined()) {\n      return Uri.create(this.scheme, this.authority);\n    } else {\n      return this;\n    }\n  }\n\n  resolve(relative: AnyUri): Uri {\n    const that = Uri.fromAny(relative);\n    if (that.scheme.isDefined()) {\n      return this.copy(that.scheme,\n                       that.authority,\n                       that.path.removeDotSegments(),\n                       that.query,\n                       that.fragment);\n    } else if (that.authority.isDefined()) {\n      return this.copy(this.scheme,\n                       that.authority,\n                       that.path.removeDotSegments(),\n                       that.query,\n                       that.fragment);\n    } else if (that.path.isEmpty()) {\n      return this.copy(this.scheme,\n                       this.authority,\n                       this.path,\n                       that.query.isDefined() ? that.query : this.query,\n                       that.fragment);\n    } else if (that.path.isAbsolute()) {\n      return this.copy(this.scheme,\n                       this.authority,\n                       that.path.removeDotSegments(),\n                       that.query,\n                       that.fragment);\n    } else {\n      return this.copy(this.scheme,\n                       this.authority,\n                       this.merge(that.path).removeDotSegments(),\n                       that.query,\n                       that.fragment);\n    }\n  }\n\n  /** @hidden */\n  merge(relative: UriPath): UriPath {\n    if (this.authority.isDefined() && this.path.isEmpty()) {\n      return relative.prependedSlash();\n    } else if (this.path.isEmpty()) {\n      return relative;\n    } else {\n      return this.path.merge(relative);\n    }\n  }\n\n  unresolve(absolute: AnyUri): Uri {\n    const that = Uri.fromAny(absolute);\n    if (!this.scheme.equals(that.scheme) || !this.authority.equals(that.authority)) {\n      return that;\n    } else {\n      return Uri.create(UriScheme.undefined(),\n                        UriAuthority.undefined(),\n                        this.path.unmerge(that.path),\n                        that.query,\n                        that.fragment);\n    }\n  }\n\n  protected copy(scheme: UriScheme, authority: UriAuthority, path: UriPath,\n                 query: UriQuery, fragment: UriFragment): Uri {\n    return Uri.create(scheme, authority, path, query, fragment);\n  }\n\n  toAny(): {scheme?: string, username?: string, password?: string, host?: string,\n            port?: number, path: string[], query?: {[key: string]: string},\n            fragment?: string} {\n    const uri = {} as {scheme?: string, username?: string, password?: string, host?: string,\n                       port?: number, path: string[], query?: {[key: string]: string},\n                       fragment?: string};\n    uri.scheme = this.scheme.toAny();\n    this.authority.toAny(uri);\n    uri.path = this.path.toAny();\n    uri.query = this.query.toAny();\n    uri.fragment = this.fragment.toAny();\n    return uri;\n  }\n\n  compareTo(that: Uri): number {\n    if (that instanceof Uri) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Uri) {\n      return this.toString() === that.toString();\n    }\n    return false;\n  }\n\n  /** @hidden */\n  declare readonly hashValue: number | undefined;\n\n  hashCode(): number {\n    let hashValue = this.hashValue;\n    if (hashValue === void 0) {\n      hashValue = Strings.hash(this.toString());\n      Object.defineProperty(this, \"hashValue\", {\n        value: hashValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return hashValue;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Uri\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"parse\").write(40/*'('*/).write(34/*'\"'*/).display(this).write(34/*'\"'*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"empty\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      if (this.scheme.isDefined()) {\n        output.display(this.scheme).write(58/*':'*/);\n      }\n      if (this.authority.isDefined()) {\n        output = output.write(47/*'/'*/).write(47/*'/'*/).display(this.authority);\n      }\n      output.display(this.path);\n      if (this.query.isDefined()) {\n        output = output.write(63/*'?'*/).display(this.query);\n      }\n      if (this.fragment.isDefined()) {\n        output = output.write(35/*'#'*/).display(this.fragment);\n      }\n    }\n  }\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  @Lazy\n  static empty(): Uri {\n    return new Uri(UriScheme.undefined(), UriAuthority.undefined(), UriPath.empty(),\n                   UriQuery.undefined(), UriFragment.undefined());\n  }\n\n  static create(scheme: UriScheme = UriScheme.undefined(),\n                authority: UriAuthority = UriAuthority.undefined(),\n                path: UriPath = UriPath.empty(),\n                query: UriQuery = UriQuery.undefined(),\n                fragment: UriFragment = UriFragment.undefined()): Uri {\n    if (scheme.isDefined() || authority.isDefined() || path.isDefined() ||\n        query.isDefined() || fragment.isDefined()) {\n      return new Uri(scheme, authority, path, query, fragment);\n    } else {\n      return Uri.empty();\n    }\n  }\n\n  static fromInit(init: UriInit): Uri {\n    const scheme = UriScheme.fromAny(init.scheme);\n    const authority = UriAuthority.fromAny(init.authority !== void 0 ? init.authority : init);\n    const path = UriPath.fromAny(init.path);\n    const query = UriQuery.fromAny(init.query);\n    const fragment = UriFragment.fromAny(init.fragment);\n    if (scheme.isDefined() || authority.isDefined() || path.isDefined() ||\n        query.isDefined() || fragment.isDefined()) {\n      return new Uri(scheme, authority, path, query, fragment);\n    } else {\n      return Uri.empty();\n    }\n  }\n\n  static fromAny(value: AnyUri | null | undefined): Uri {\n    if (value === void 0 || value === null) {\n      return Uri.empty();\n    } else if (value instanceof Uri) {\n      return value;\n    } else if (typeof value === \"object\") {\n      return Uri.fromInit(value);\n    } else if (typeof value === \"string\") {\n      return Uri.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static scheme(scheme: AnyUriScheme): Uri {\n    scheme = UriScheme.fromAny(scheme);\n    return Uri.create(scheme, void 0, void 0, void 0, void 0);\n  }\n\n  static schemePart(schemePart: string): Uri {\n    const scheme = UriScheme.parse(schemePart);\n    return Uri.create(scheme, void 0, void 0, void 0, void 0);\n  }\n\n  static schemeName(name: string): Uri {\n    const scheme = UriScheme.create(name);\n    return Uri.create(scheme, void 0, void 0, void 0, void 0);\n  }\n\n  static authority(authority: AnyUriAuthority): Uri {\n    authority = UriAuthority.fromAny(authority);\n    return Uri.create(void 0, authority as UriAuthority, void 0, void 0, void 0);\n  }\n\n  static authorityPart(authorityPart: string): Uri {\n    const authority = UriAuthority.parse(authorityPart);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static user(user: AnyUriUser): Uri {\n    const authority = UriAuthority.user(user);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static userPart(userPart: string): Uri {\n    const authority = UriAuthority.userPart(userPart);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static username(username: string, password?: string): Uri {\n    const authority = UriAuthority.username(username, password);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static password(password: string): Uri {\n    const authority = UriAuthority.password(password);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static host(host: AnyUriHost): Uri {\n    const authority = UriAuthority.host(host);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static hostPart(hostPart: string): Uri {\n    const authority = UriAuthority.hostPart(hostPart);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static hostName(hostName: string): Uri {\n    const authority = UriAuthority.hostName(hostName);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static hostIPv4(hostIPv4: string): Uri {\n    const authority = UriAuthority.hostIPv4(hostIPv4);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static hostIPv6(hostIPv6: string): Uri {\n    const authority = UriAuthority.hostIPv6(hostIPv6);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static port(port: AnyUriPort): Uri {\n    const authority = UriAuthority.port(port);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static portPart(portPart: string): Uri {\n    const authority = UriAuthority.portPart(portPart);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static portNumber(portNumber: number): Uri {\n    const authority = UriAuthority.portNumber(portNumber);\n    return Uri.create(void 0, authority, void 0, void 0, void 0);\n  }\n\n  static path(...components: AnyUriPath[]): Uri {\n    const path = UriPath.of(...components);\n    return Uri.create(void 0, void 0, path, void 0, void 0);\n  }\n\n  static pathPart(pathPart: string): Uri {\n    const path = UriPath.parse(pathPart);\n    return Uri.create(void 0, void 0, path, void 0, void 0);\n  }\n\n  static query(query: AnyUriQuery): Uri {\n    query = UriQuery.fromAny(query);\n    return Uri.create(void 0, void 0, void 0, query, void 0);\n  }\n\n  static queryPart(queryPart: string): Uri {\n    const query = UriQuery.parse(queryPart);\n    return Uri.create(void 0, void 0, void 0, query, void 0);\n  }\n\n  static fragment(fragment: AnyUriFragment): Uri {\n    fragment = UriFragment.fromAny(fragment);\n    return Uri.create(void 0, void 0, void 0, void 0, fragment);\n  }\n\n  static fragmentPart(fragmentPart: string): Uri {\n    const fragment = UriFragment.parse(fragmentPart);\n    return Uri.create(void 0, void 0, void 0, void 0, fragment);\n  }\n\n  static fragmentIdentifier(fragmentIdentifier: string | undefined): Uri {\n    const fragment = UriFragment.create(fragmentIdentifier);\n    return Uri.create(void 0, void 0, void 0, void 0, fragment);\n  }\n\n  @Lazy\n  static get standardParser(): UriParser {\n    return new UriParser();\n  }\n\n  static parse(string: string): Uri {\n    return Uri.standardParser.parseAbsoluteString(string);\n  }\n\n  static pathBuilder(): UriPathBuilder {\n    return new UriPathBuilder();\n  }\n\n  static queryBuilder(): UriQueryBuilder {\n    return new UriQueryBuilder();\n  }\n\n  @Lazy\n  static form(): Form<Uri, AnyUri> {\n    return new UriForm(Uri.empty());\n  }\n\n  /** @hidden */\n  static isUnreservedChar(c: number): boolean {\n    return c >= 65/*'A'*/ && c <= 90/*'Z'*/\n        || c >= 97/*'a'*/ && c <= 122/*'z'*/\n        || c >= 48/*'0'*/ && c <= 57/*'9'*/\n        || c === 45/*'-'*/ || c === 46/*'.'*/\n        || c === 95/*'_'*/ || c === 126/*'~'*/;\n  }\n\n  /** @hidden */\n  static isSubDelimChar(c: number): boolean {\n    return c === 33/*'!'*/ || c === 36/*'$'*/\n        || c === 38/*'&'*/ || c === 40/*'('*/\n        || c === 41/*')'*/ || c === 42/*'*'*/\n        || c === 43/*'+'*/ || c === 44/*','*/\n        || c === 59/*';'*/ || c === 61/*'='*/\n        || c === 39/*'\\''*/;\n  }\n\n  /** @hidden */\n  static isSchemeChar(c: number): boolean {\n    return c >= 65/*'A'*/ && c <= 90/*'Z'*/\n        || c >= 97/*'a'*/ && c <= 122/*'z'*/\n        || c >= 48/*'0'*/ && c <= 57/*'9'*/\n        || c === 43/*'+'*/ || c === 45/*'-'*/\n        || c === 46/*'.'*/;\n  }\n\n  /** @hidden */\n  static isUserInfoChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c)\n        || c === 58/*':'*/;\n  }\n\n  /** @hidden */\n  static isUserChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c);\n  }\n\n  /** @hidden */\n  static isHostChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c);\n  }\n\n  /** @hidden */\n  static isPathChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c)\n        || c === 58/*':'*/ || c === 64/*'@'*/;\n  }\n\n  /** @hidden */\n  static isQueryChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c)\n        || c === 47/*'/'*/ || c === 58/*':'*/\n        || c === 63/*'?'*/ || c === 64/*'@'*/;\n  }\n\n  /** @hidden */\n  static isParamChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || c === 33/*'!'*/ || c === 36/*'$'*/\n        || c === 40/*'('*/ || c === 41/*')'*/\n        || c === 42/*'*'*/ || c === 43/*'+'*/\n        || c === 44/*','*/ || c === 47/*'/'*/\n        || c === 58/*':'*/ || c === 59/*';'*/\n        || c === 63/*'?'*/ || c === 64/*'@'*/\n        || c === 39/*'\\''*/;\n  }\n\n  /** @hidden */\n  static isFragmentChar(c: number): boolean {\n    return Uri.isUnreservedChar(c)\n        || Uri.isSubDelimChar(c)\n        || c === 47/*'/'*/ || c === 58/*':'*/\n        || c === 63/*'?'*/ || c === 64/*'@'*/;\n  }\n\n  /** @hidden */\n  static isAlpha(c: number): boolean {\n    return c >= 65/*'A'*/ && c <= 90/*'Z'*/\n        || c >= 97/*'a'*/ && c <= 122/*'z'*/;\n  }\n\n  /** @hidden */\n  static toLowerCase(c: number): number {\n    if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) {\n      return c + (97/*'a'*/ - 65/*'A'*/);\n    } else {\n      return c;\n    }\n  }\n\n  /** @hidden */\n  static writeScheme(scheme: string, output: Output): void {\n    for (let i = 0, n = scheme.length; i < n; i += 1) {\n      const c = scheme.charCodeAt(i);\n      if (i > 0 && Uri.isSchemeChar(c) || i === 0 && Uri.isAlpha(c)) {\n        output = output.write(c);\n      } else {\n        throw new UriException(\"Invalid scheme: \" + scheme);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeUserInfo(userInfo: string, output: Output): void {\n    for (let i = 0, n = userInfo.length; i < n; i += 1) {\n      const c = userInfo.charCodeAt(i);\n      if (Uri.isUserInfoChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeUser(user: string, output: Output): void {\n    for (let i = 0, n = user.length; i < n; i += 1) {\n      const c = user.charCodeAt(i);\n      if (Uri.isUserChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeHost(address: string, output: Output): void {\n    for (let i = 0, n = address.length; i < n; i += 1) {\n      const c = address.charCodeAt(i);\n      if (Uri.isHostChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeHostLiteral(address: string, output: Output): void {\n    for (let i = 0, n = address.length; i < n; i += 1) {\n      const c = address.charCodeAt(i);\n      if (Uri.isHostChar(c) || c === 58/*':'*/) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writePathSegment(segment: string, output: Output): void {\n    for (let i = 0, n = segment.length; i < n; i += 1) {\n      const c = segment.charCodeAt(i);\n      if (Uri.isPathChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeQuery(query: string, output: Output): void {\n    for (let i = 0, n = query.length; i < n; i += 1) {\n      const c = query.charCodeAt(i);\n      if (Uri.isQueryChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeParam(param: string, output: Output): void {\n    for (let i = 0, n = param.length; i < n; i += 1) {\n      const c = param.charCodeAt(i);\n      if (Uri.isParamChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeFragment(fragment: string, output: Output): void {\n    for (let i = 0, n = fragment.length; i < n; i += 1) {\n      const c = fragment.charCodeAt(i);\n      if (Uri.isFragmentChar(c)) {\n        output = output.write(c);\n      } else {\n        Uri.writeEncoded(c, output);\n      }\n    }\n  }\n\n  /** @hidden */\n  static writeEncoded(c: number, output: Output): void {\n    if (c === 0x00) { // modified UTF-8\n      Uri.writePctEncoded(0xC0, output);\n      Uri.writePctEncoded(0x80, output);\n    } else if (c >= 0x00 && c <= 0x7F) { // U+0000..U+007F\n      Uri.writePctEncoded(c, output);\n    } else if (c >= 0x80 && c <= 0x07FF) { // U+0080..U+07FF\n      Uri.writePctEncoded(0xC0 | (c >>> 6), output);\n      Uri.writePctEncoded(0x80 | (c & 0x3F), output);\n    } else if (c >= 0x0800 && c <= 0xFFFF    // U+0800..U+D7FF\n            || c >= 0xE000 && c <= 0xFFFF) { // U+E000..U+FFFF\n      Uri.writePctEncoded(0xE0 | (c >>> 12), output);\n      Uri.writePctEncoded(0x80 | (c >>>  6 & 0x3F), output);\n      Uri.writePctEncoded(0x80 | (c        & 0x3F), output);\n    } else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n      Uri.writePctEncoded(0xF0 | (c >>> 18), output);\n      Uri.writePctEncoded(0x80 | (c >>> 12 & 0x3F), output);\n      Uri.writePctEncoded(0x80 | (c >>>  6 & 0x3F), output);\n      Uri.writePctEncoded(0x80 | (c        & 0x3F), output);\n    } else { // surrogate or invalid code point\n      Uri.writePctEncoded(0xEF, output);\n      Uri.writePctEncoded(0xBF, output);\n      Uri.writePctEncoded(0xBD, output);\n    }\n  }\n\n  /** @hidden */\n  static writePctEncoded(c: number, output: Output): void {\n    const base16 = Base16.lowercase;\n    output = output.write(37/*'%'*/)\n          .write(base16.encodeDigit(c >>> 4 & 0xF))\n          .write(base16.encodeDigit(c       & 0xF));\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings, HashGenCacheMap} from \"@swim/util\";\nimport type {Output, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\n\nexport type AnyUriScheme = UriScheme | string;\n\nexport class UriScheme implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  constructor(name: string) {\n    Object.defineProperty(this, \"name\", {\n      value: name,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.name.length !== 0;\n  }\n\n  declare readonly name: string;\n\n  toAny(): string | undefined {\n    return this.name.length !== 0 ? this.name : void 0;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof UriScheme) {\n      return this.name.localeCompare(that.name);\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriScheme) {\n      return this.name === that.name;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.name);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriScheme\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"parse\").write(40/*'('*/).write(34/*'\"'*/).display(this).write(34/*'\"'*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"undefined\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    Uri.writeScheme(this.name, output);\n  }\n\n  toString(): string {\n    return this.name;\n  }\n\n  @Lazy\n  static undefined(): UriScheme {\n    return new UriScheme(\"\");\n  }\n\n  static create(schemeName: string): UriScheme {\n    const cache = UriScheme.cache;\n    const scheme = cache.get(schemeName);\n    if (scheme !== void 0) {\n      return scheme;\n    } else {\n      return cache.put(schemeName, new UriScheme(schemeName));\n    }\n  }\n\n  static fromAny(value: AnyUriScheme | null | undefined): UriScheme {\n    if (value === void 0 || value === null) {\n      return UriScheme.undefined();\n    } else if (value instanceof UriScheme) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return UriScheme.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(schemePart: string): UriScheme {\n    return Uri.standardParser.parseSchemeString(schemePart);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheMap<string, UriScheme> {\n    const cacheSize = 4;\n    return new HashGenCacheMap<string, UriScheme>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings} from \"@swim/util\";\nimport {Output, Format, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {AnyUriUser, UriUserInit, UriUser} from \"./\"; // forward import\nimport {AnyUriHost, UriHost} from \"./\"; // forward import\nimport {AnyUriPort, UriPort} from \"./\"; // forward import\n\nexport type AnyUriAuthority = UriAuthority | UriAuthorityInit | string;\n\nexport interface UriAuthorityInit extends UriUserInit {\n  user?: AnyUriUser;\n  host?: AnyUriHost;\n  port?: AnyUriPort;\n}\n\nexport class UriAuthority implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  constructor(user: UriUser, host: UriHost, port: UriPort) {\n    Object.defineProperty(this, \"user\", {\n      value: user,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"host\", {\n      value: host,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"port\", {\n      value: port,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hashValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.user.isDefined() || this.host.isDefined() || this.port.isDefined();\n  }\n\n  declare readonly user: UriUser;\n\n  withUser(user: AnyUriUser): UriAuthority {\n    user = UriUser.fromAny(user);\n    if (user !== this.user) {\n      return this.copy(user as UriUser, this.host, this.port);\n    } else {\n      return this;\n    }\n  }\n\n  get userPart(): string {\n    return this.user.toString();\n  }\n\n  withUserPart(userPart: string): UriAuthority {\n    return this.withUser(UriUser.parse(userPart));\n  }\n\n  get username(): string | undefined {\n    return this.user.username;\n  }\n\n  withUsername(username: string | undefined, password?: string): UriAuthority {\n    if (arguments.length === 1) {\n      return this.withUser(this.user.withUsername(username));\n    } else {\n      return this.withUser(UriUser.create(username, password));\n    }\n  }\n\n  get password(): string | undefined {\n    return this.user.password;\n  }\n\n  withPassword(password: string | undefined): UriAuthority {\n    return this.withUser(this.user.withPassword(password));\n  }\n\n  declare readonly host: UriHost;\n\n  withHost(host: AnyUriHost): UriAuthority {\n    host = UriHost.fromAny(host);\n    if (host !== this.host) {\n      return this.copy(this.user, host, this.port);\n    } else {\n      return this;\n    }\n  }\n\n  get hostPart(): string {\n    return this.host.toString();\n  }\n\n  withHostPart(hostPart: string): UriAuthority {\n    return this.withHost(UriHost.parse(hostPart));\n  }\n\n  get hostAddress(): string {\n    return this.host.address;\n  }\n\n  get hostName(): string | undefined {\n    return this.host.name;\n  }\n\n  withHostName(hostName: string): UriAuthority {\n    return this.withHost(UriHost.hostname(hostName));\n  }\n\n  get hostIPv4(): string | undefined {\n    return this.host.ipv4;\n  }\n\n  withHostIPv4(hostIPv4: string): UriAuthority {\n    return this.withHost(UriHost.ipv4(hostIPv4));\n  }\n\n  get hostIPv6(): string | undefined {\n    return this.host.ipv6;\n  }\n\n  withHostIPv6(hostIPv5: string): UriAuthority {\n    return this.withHost(UriHost.ipv6(hostIPv5));\n  }\n\n  declare readonly port: UriPort;\n\n  withPort(port: AnyUriPort): UriAuthority {\n    port = UriPort.fromAny(port);\n    if (port !== this.port) {\n      return this.copy(this.user, this.host, port);\n    } else {\n      return this;\n    }\n  }\n\n  get portPart(): string {\n    return this.port.toString();\n  }\n\n  withPortPart(portPart: string): UriAuthority {\n    return this.withPort(UriPort.parse(portPart));\n  }\n\n  get portNumber(): number {\n    return this.port.number;\n  }\n\n  withPortNumber(portNumber: number): UriAuthority {\n    return this.withPort(UriPort.create(portNumber));\n  }\n\n  protected copy(user: UriUser, host: UriHost, port: UriPort): UriAuthority {\n    return UriAuthority.create(user, host, port);\n  }\n\n  toAny(authority?: {username?: string, password?: string, host?: string, port?: number}):\n      {username?: string, password?: string, host?: string, port?: number} | undefined {\n    if (this.isDefined()) {\n      if (authority === void 0) {\n        authority = {};\n      }\n      this.user.toAny(authority);\n      if (this.host.isDefined()) {\n        authority.host = this.host.toAny();\n      }\n      if (this.port.isDefined()) {\n        authority.port = this.port.toAny();\n      }\n    }\n    return authority;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof UriAuthority) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriAuthority) {\n      return this.toString() === that.toString();\n    }\n    return false;\n  }\n\n  /** @hidden */\n  declare readonly hashValue: number | undefined;\n\n  hashCode(): number {\n    let hashValue = this.hashValue;\n    if (hashValue === void 0) {\n      hashValue = Strings.hash(this.toString());\n      Object.defineProperty(this, \"hashValue\", {\n        value: hashValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return hashValue;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriAuthority\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"parse\").write(40/*'('*/).write(34/*'\"'*/)\n        .display(this).write(34/*'\"'*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"undefined\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      const user = this.user;\n      if (user.isDefined()) {\n        output.display(user).write(64/*'@'*/);\n      }\n      output.display(this.host);\n      const port = this.port;\n      if (port.isDefined()) {\n        output = output.write(58/*':'*/).display(port);\n      }\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  @Lazy\n  static undefined(): UriAuthority {\n    return new UriAuthority(UriUser.undefined(), UriHost.undefined(), UriPort.undefined());\n  }\n\n  static create(user: UriUser = UriUser.undefined(),\n                host: UriHost = UriHost.undefined(),\n                port: UriPort = UriPort.undefined()): UriAuthority {\n    if (user.isDefined() || host.isDefined() || port.isDefined()) {\n      return new UriAuthority(user, host, port);\n    } else {\n      return UriAuthority.undefined();\n    }\n  }\n\n  static fromInit(init: UriAuthorityInit): UriAuthority {\n    const user = UriUser.fromAny(init.user !== void 0 ? init.user : init);\n    const host = UriHost.fromAny(init.host);\n    const port = UriPort.fromAny(init.port);\n    return UriAuthority.create(user, host, port);\n  }\n\n  static fromAny(value: AnyUriAuthority | null | undefined): UriAuthority {\n    if (value === void 0 || value === null) {\n      return UriAuthority.undefined();\n    } else if (value instanceof UriAuthority) {\n      return value;\n    } else if (typeof value === \"object\") {\n      return UriAuthority.fromInit(value);\n    } else if (typeof value === \"string\") {\n      return UriAuthority.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static user(user: AnyUriUser): UriAuthority {\n    user = UriUser.fromAny(user);\n    return UriAuthority.create(user as UriUser, void 0, void 0);\n  }\n\n  static userPart(userPart: string): UriAuthority {\n    const user = UriUser.parse(userPart);\n    return UriAuthority.create(user, void 0, void 0);\n  }\n\n  static username(username: string, password?: string | undefined): UriAuthority {\n    const user = UriUser.create(username, password);\n    return UriAuthority.create(user, void 0, void 0);\n  }\n\n  static password(password: string): UriAuthority {\n    const user = UriUser.create(\"\", password);\n    return UriAuthority.create(user, void 0, void 0);\n  }\n\n  static host(host: AnyUriHost): UriAuthority {\n    host = UriHost.fromAny(host);\n    return UriAuthority.create(void 0, host, void 0);\n  }\n\n  static hostPart(hostPart: string): UriAuthority {\n    const host = UriHost.parse(hostPart);\n    return UriAuthority.create(void 0, host, void 0);\n  }\n\n  static hostName(hostName: string): UriAuthority {\n    const host = UriHost.hostname(hostName);\n    return UriAuthority.create(void 0, host, void 0);\n  }\n\n  static hostIPv4(hostIPv4: string): UriAuthority {\n    const host = UriHost.ipv4(hostIPv4);\n    return UriAuthority.create(void 0, host, void 0);\n  }\n\n  static hostIPv6(hostIPv6: string): UriAuthority {\n    const host = UriHost.ipv6(hostIPv6);\n    return UriAuthority.create(void 0, host, void 0);\n  }\n\n  static port(port: AnyUriPort): UriAuthority {\n    port = UriPort.fromAny(port);\n    return UriAuthority.create(void 0, void 0, port);\n  }\n\n  static portPart(portPart: string): UriAuthority {\n    const port = UriPort.parse(portPart);\n    return UriAuthority.create(void 0, void 0, port);\n  }\n\n  static portNumber(portNumber: number): UriAuthority {\n    const port = UriPort.create(portNumber);\n    return UriAuthority.create(void 0, void 0, port);\n  }\n\n  static parse(authorityPart: string): UriAuthority {\n    return Uri.standardParser.parseAuthorityString(authorityPart);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Lazy, Strings} from \"@swim/util\";\nimport {Output, Format, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\n\nexport type AnyUriUser = UriUser | UriUserInit | string;\n\nexport interface UriUserInit {\n  username?: string;\n  password?: string;\n}\n\nexport class UriUser implements HashCode, Debug, Display {\n  /** @hidden */\n  constructor(username: string | undefined, password: string | undefined) {\n    Object.defineProperty(this, \"username\", {\n      value: username,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"password\", {\n      value: password,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.username !== void 0;\n  }\n\n  declare readonly username: string | undefined;\n\n  withUsername(username: string | undefined): UriUser {\n    if (username !== this.username) {\n      return this.copy(username, this.password);\n    } else {\n      return this;\n    }\n  }\n\n  declare readonly password: string | undefined;\n\n  withPassword(password: string | undefined): UriUser {\n    if (password !== this.password) {\n      return this.copy(this.username, password);\n    } else {\n      return this;\n    }\n  }\n\n  protected copy(username: string | undefined, password: string | undefined): UriUser {\n    return UriUser.create(username, password);\n  }\n\n  toAny(user?: {username?: string, password?: string}): {username?: string, password?: string} | undefined {\n    if (this.username !== void 0) {\n      if (user === void 0) {\n        user = {};\n      }\n      user.username = this.username;\n      if (this.password !== void 0) {\n        user.password = this.password;\n      }\n    }\n    return user;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriUser) {\n      return this.username === that.username && this.password === that.password;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.toString());\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriUser\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"parse\").write(40/*'('*/).write(34/*'\"'*/)\n          .display(this).write(34/*'\"'*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"undefined\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    if (this.username !== void 0) {\n      Uri.writeUser(this.username, output);\n      if (this.password !== void 0) {\n        output = output.write(58/*':'*/);\n        Uri.writeUser(this.password, output);\n      }\n    }\n  }\n\n  toString(): string {\n    return Format.display(this);\n  }\n\n  @Lazy\n  static undefined(): UriUser {\n    return new UriUser(void 0, void 0);\n  }\n\n  static create(username: string | undefined, password?: string | undefined): UriUser {\n    if (username !== void 0 || password !== void 0) {\n      return new UriUser(username, password);\n    } else {\n      return UriUser.undefined();\n    }\n  }\n\n  static fromInit(init: UriUserInit): UriUser {\n    return UriUser.create(init.username, init.password);\n  }\n\n  static fromAny(value: AnyUriUser | null | undefined): UriUser {\n    if (value === void 0 || value === null) {\n      return UriUser.undefined();\n    } else if (value instanceof UriUser) {\n      return value;\n    } else if (typeof value === \"object\") {\n      return UriUser.fromInit(value);\n    } else if (typeof value === \"string\") {\n      return UriUser.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(userPart: string): UriUser {\n    return Uri.standardParser.parseUserString(userPart);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings, HashGenCacheMap} from \"@swim/util\";\nimport type {Output, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {UriHostName} from \"./\" // forward import\nimport {UriHostIPv4} from \"./\" // forward import\nimport {UriHostIPv6} from \"./\" // forward import\nimport {UriHostUndefined} from \"./\" // forward import\n\nexport type AnyUriHost = UriHost | string;\n\nexport abstract class UriHost implements HashCode, Compare, Debug, Display {\n  protected constructor() {\n    // stub\n  }\n\n  isDefined(): boolean {\n    return true;\n  }\n\n  abstract readonly address: string;\n\n  get name(): string | undefined {\n    return void 0;\n  }\n\n  get ipv4(): string | undefined {\n    return void 0;\n  }\n\n  get ipv6(): string | undefined {\n    return void 0;\n  }\n\n  toAny(): string {\n    return this.toString();\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof UriHost) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriHost) {\n      return this.toString() === that.toString();\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.toString());\n  }\n\n  abstract debug(output: Output): void;\n\n  abstract display(output: Output): void;\n\n  abstract toString(): string;\n\n  @Lazy\n  static undefined(): UriHost {\n    return new UriHostUndefined();\n  }\n\n  static hostname(name: string): UriHost {\n    const cache = UriHost.cache;\n    const host = cache.get(name);\n    if (host instanceof UriHostName) {\n      return host;\n    } else {\n      return cache.put(name, new UriHostName(name));\n    }\n  }\n\n  static ipv4(ipv4: string): UriHost {\n    const cache = UriHost.cache;\n    const host = cache.get(ipv4);\n    if (host instanceof UriHostIPv4) {\n      return host;\n    } else {\n      return cache.put(ipv4, new UriHostIPv4(ipv4));\n    }\n  }\n\n  static ipv6(ipv6: string): UriHost {\n    const cache = UriHost.cache;\n    const host = cache.get(ipv6);\n    if (host instanceof UriHostIPv6) {\n      return host;\n    } else {\n      return cache.put(ipv6, new UriHostIPv6(ipv6));\n    }\n  }\n\n  static fromAny(value: AnyUriHost | null | undefined): UriHost {\n    if (value === void 0 || value === null) {\n      return UriHost.undefined();\n    } else if (value instanceof UriHost) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return UriHost.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(hostPart: string): UriHost {\n    return Uri.standardParser.parseHostString(hostPart);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheMap<string, UriHost> {\n    const cacheSize = 16;\n    return new HashGenCacheMap<string, UriHost>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {UriHost} from \"./UriHost\";\n\n/** @hidden */\nexport class UriHostName extends UriHost {\n  /** @hidden */\n  constructor(address: string) {\n    super();\n    Object.defineProperty(this, \"address\", {\n      value: address,\n      enumerable: true,\n    });\n  }\n\n  declare readonly address: string;\n\n  get name(): string {\n    return this.address;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriHost\").write(46/*'.'*/).write(\"hostname\")\n        .write(40/*'('*/).debug(this.address).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    Uri.writeHost(this.address, output);\n  }\n\n  toString(): string {\n    return this.address;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {UriHost} from \"./UriHost\";\n\n/** @hidden */\nexport class UriHostIPv4 extends UriHost {\n  /** @hidden */\n  constructor(address: string) {\n    super();\n    Object.defineProperty(this, \"address\", {\n      value: address,\n      enumerable: true,\n    });\n  }\n\n  declare readonly address: string;\n\n  get ipv4(): string {\n    return this.address;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriHost\").write(46/*'.'*/).write(\"ipv4\")\n        .write(40/*'('*/).debug(this.address).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    Uri.writeHost(this.address, output);\n  }\n\n  toString(): string {\n    return this.address;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {UriHost} from \"./UriHost\";\n\n/** @hidden */\nexport class UriHostIPv6 extends UriHost {\n  /** @hidden */\n  constructor(address: string) {\n    super();\n    Object.defineProperty(this, \"address\", {\n      value: address,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly address: string;\n\n  get ipv6(): string {\n    return this.address;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriHost\").write(46/*'.'*/).write(\"ipv6\")\n        .write(40/*'('*/).debug(this.address).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      output = output.write(91/*'['*/);\n      Uri.writeHostLiteral(this.address, output);\n      output = output.write(93/*']'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = \"[\" + this.address + \"]\";\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {UriHost} from \"./UriHost\";\n\n/** @hidden */\nexport class UriHostUndefined extends UriHost {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  isDefined(): boolean {\n    return false;\n  }\n\n  get address(): string {\n    return \"\";\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriHost\").write(46/*'.'*/).write(\"undefined\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    // nop\n  }\n\n  toString(): string {\n    return \"\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Lazy, Compare, Strings, HashGenCacheMap} from \"@swim/util\";\nimport {Output, Format, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\n\nexport type AnyUriPort = UriPort | number | string;\n\nexport class UriPort implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  constructor(portNumber: number) {\n    Object.defineProperty(this, \"number\", {\n      value: portNumber,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.number !== 0;\n  }\n\n  declare readonly number: number;\n\n  valueOf(): number {\n    return this.number;\n  }\n\n  toAny(): number {\n    return this.number;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof UriPort) {\n      return this.number < that.number ? -1 : this.number > that.number ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriPort) {\n      return this.number === that.number;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.toString());\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriPort\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"create\").write(40/*'('*/);\n      Format.displayNumber(this.number, output);\n      output = output.write(41/*')'*/);\n    } else {\n      output = output.write(\"undefined\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    Format.displayNumber(this.number, output);\n  }\n\n  toString(): string {\n    return \"\" + this.number;\n  }\n\n  @Lazy\n  static undefined(): UriPort {\n    return new UriPort(0);\n  }\n\n  static create(number: number): UriPort {\n    if (number === 0) {\n      return UriPort.undefined();\n    } else if (number > 0) {\n      const cache = UriPort.cache;\n      const port = cache.get(number);\n      if (port !== void 0) {\n        return port;\n      } else {\n        return cache.put(number, new UriPort(number));\n      }\n    } else {\n      throw new TypeError(\"\" + number);\n    }\n  }\n\n  static fromAny(value: AnyUriPort | null | undefined): UriPort {\n    if (value === void 0 || value === null) {\n      return UriPort.undefined();\n    } else if (value instanceof UriPort) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return UriPort.create(value);\n    } else if (typeof value === \"string\") {\n      return UriPort.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(portPart: string): UriPort {\n    return Uri.standardParser.parsePortString(portPart);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheMap<number, UriPort> {\n    const cacheSize = 16;\n    return new HashGenCacheMap<number, UriPort>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings, HashGenCacheSet} from \"@swim/util\";\nimport type {Output, Debug, Display} from \"@swim/codec\";\nimport type {Form} from \"@swim/structure\";\nimport {Uri} from \"./Uri\";\nimport {UriPathSegment} from \"./\"; // forward import\nimport {UriPathSlash} from \"./\"; // forward import\nimport {UriPathEmpty} from \"./\"; // forward import\nimport {UriPathBuilder} from \"./\"; // forward import\nimport {UriPathForm} from \"./\"; // forward import\n\nexport type AnyUriPath = UriPath | string[] | string;\n\nexport abstract class UriPath implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  protected constructor() {\n    // sealed\n  }\n\n  abstract isDefined(): boolean;\n\n  abstract isAbsolute(): boolean;\n\n  abstract isRelative(): boolean;\n\n  abstract isEmpty(): boolean;\n\n  get length(): number {\n    let n = 0;\n    let path: UriPath = this;\n    while (!path.isEmpty()) {\n      n += 1;\n      path = path.tail();\n    }\n    return n;\n  }\n\n  get(index: number): string | undefined {\n    let i = 0;\n    let path: UriPath = this;\n    while (!path.isEmpty()) {\n      if (i < index) {\n        i += 1;\n        path = path.tail();\n      } else {\n        return path.head();\n      }\n    }\n    return void 0;\n  }\n\n  abstract head(): string;\n\n  abstract tail(): UriPath;\n\n  /** @hidden */\n  abstract setTail(tail: UriPath): void;\n\n  /** @hidden */\n  abstract dealias(): UriPath;\n\n  abstract parent(): UriPath;\n\n  abstract base(): UriPath;\n\n  get name(): string {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    let path: UriPath = this;\n    do {\n      const tail = path.tail();\n      if (tail.isEmpty()) {\n        return path.isRelative() ? path.head() : \"\";\n      } else {\n        path = tail;\n      }\n    } while (true);\n  }\n\n  withName(name: string): UriPath {\n    const builder = new UriPathBuilder();\n    builder.addPath(this.base());\n    builder.addSegment(name);\n    return builder.bind();\n  }\n\n  foot(): UriPath {\n    if (this.isEmpty()) {\n      return this;\n    }\n    let path: UriPath = this;\n    do {\n      const tail = path.tail();\n      if (tail.isEmpty()) {\n        return path;\n      } else {\n        path = tail;\n      }\n    } while (true);\n  }\n\n  isSubpathOf(b: AnyUriPath): boolean {\n    b = UriPath.fromAny(b);\n    let a: UriPath = this;\n    while (!a.isEmpty() && !b.isEmpty()) {\n      if (a.head() !== b.head()) {\n        return false;\n      }\n      a = a.tail();\n      b = b.tail();\n    }\n    return b.isEmpty();\n  }\n\n  appended(...components: AnyUriPath[]): UriPath {\n    if (arguments.length > 0) {\n      const builder = new UriPathBuilder();\n      builder.addPath(this);\n      builder.push(...components);\n      return builder.bind();\n    } else {\n      return this;\n    }\n  }\n\n  appendedSlash(): UriPath {\n    const builder = new UriPathBuilder();\n    builder.addPath(this);\n    builder.addSlash();\n    return builder.bind();\n  }\n\n  appendedSegment(segment: string): UriPath {\n    const builder = new UriPathBuilder();\n    builder.addPath(this);\n    builder.addSegment(segment);\n    return builder.bind();\n  }\n\n  prepended(...components: AnyUriPath[]): UriPath {\n    if (arguments.length > 0) {\n      const builder = new UriPathBuilder();\n      builder.push(...components);\n      builder.addPath(this);\n      return builder.bind();\n    } else {\n      return this;\n    }\n  }\n\n  prependedSlash(): UriPath {\n    return new UriPathSlash(this);\n  }\n\n  prependedSegment(segment: string): UriPath {\n    if (this.isEmpty() || this.isAbsolute()) {\n      return UriPath.segment(segment, this);\n    } else {\n      return UriPath.segment(segment, this.prependedSlash());\n    }\n  }\n\n  resolve(that: UriPath): UriPath {\n    if (that.isEmpty()) {\n      return this;\n    } else if (that.isAbsolute() || this.isEmpty()) {\n      return that.removeDotSegments();\n    } else {\n      return this.merge(that).removeDotSegments();\n    }\n  }\n\n  removeDotSegments(): UriPath {\n    let path: UriPath = this;\n    const builder = new UriPathBuilder();\n    while (!path.isEmpty()) {\n      const head = path.head();\n      if (head === \".\" || head === \"..\") {\n        path = path.tail();\n        if (!path.isEmpty()) {\n          path = path.tail();\n        }\n      } else if (path.isAbsolute()) {\n        const rest = path.tail();\n        if (!rest.isEmpty()) {\n          const next = rest.head();\n          if (next === \".\") {\n            path = rest.tail();\n            if (path.isEmpty()) {\n              path = UriPath.slash();\n            }\n          } else if (next === \"..\") {\n            path = rest.tail();\n            if (path.isEmpty()) {\n              path = UriPath.slash();\n            }\n            if (!builder.isEmpty() && !builder.pop().isAbsolute()) {\n              if (!builder.isEmpty()) {\n                builder.pop();\n              }\n            }\n          } else {\n            builder.push(head, next);\n            path = rest.tail();\n          }\n        } else {\n          builder.push(path.head());\n          path = path.tail();\n        }\n      } else {\n        builder.push(path.head());\n        path = path.tail();\n      }\n    }\n    return builder.bind();\n  }\n\n  merge(that: UriPath): UriPath {\n    if (!this.isEmpty()) {\n      const builder = new UriPathBuilder();\n      let prev: UriPath = this;\n      do {\n        const next = prev.tail();\n        if (!next.isEmpty()) {\n          if (prev.isAbsolute()) {\n            builder.addSlash();\n          } else {\n            builder.addSegment(prev.head());\n          }\n          prev = next;\n        } else {\n          if (prev.isAbsolute()) {\n            builder.addSlash();\n          }\n          break;\n        }\n      } while (true);\n      builder.addPath(that);\n      return builder.bind();\n    } else {\n      return that;\n    }\n  }\n\n  unmerge(relative: UriPath, root: UriPath = relative): UriPath {\n    let base: UriPath = this;\n    do {\n      if (base.isEmpty()) {\n        if (!relative.isEmpty() && !relative.tail().isEmpty()) {\n          return relative.tail();\n        } else {\n          return relative;\n        }\n      } else if (base.isRelative()) {\n        return relative;\n      } else if (relative.isRelative()) {\n        return relative.prependedSlash();\n      } else {\n        let a = base.tail();\n        let b = relative.tail();\n        if (!a.isEmpty() && b.isEmpty()) {\n          return UriPath.slash();\n        } else if (a.isEmpty() || b.isEmpty() || a.head() !== b.head()) {\n          return b;\n        } else {\n          a = a.tail();\n          b = b.tail();\n          if (!a.isEmpty() && b.isEmpty()) {\n            return root;\n          } else {\n            base = a;\n            relative = b;\n          }\n        }\n      }\n    } while (true);\n  }\n\n  toAny(): string[] {\n    const components = [];\n    let path: UriPath = this;\n    while (!path.isEmpty()) {\n      components.push(path.head());\n      path = path.tail();\n    }\n    return components;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof UriPath) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriPath) {\n      return this.toString() === that.toString();\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.toString());\n  }\n\n  abstract debug(output: Output): void;\n\n  display(output: Output): void {\n    let path: UriPath = this;\n    while (!path.isEmpty()) {\n      if (path.isAbsolute()) {\n        output = output.write(47/*'/'*/);\n      } else {\n        Uri.writePathSegment(path.head(), output);\n      }\n      path = path.tail();\n    }\n  }\n\n  abstract toString(): string;\n\n  @Lazy\n  static empty(): UriPath {\n    return new UriPathEmpty();\n  }\n\n  @Lazy\n  static slash(): UriPath {\n    return new UriPathSlash(UriPath.empty());\n  }\n\n  static segment(segment: string, tail?: UriPath): UriPath {\n    if (tail === void 0) {\n      tail = UriPath.empty();\n    }\n    segment = this.cacheSegment(segment);\n    return new UriPathSegment(segment, tail);\n  }\n\n  static of(...components: AnyUriPath[]): UriPath {\n    const builder = new UriPathBuilder();\n    builder.push(...components);\n    return builder.bind();\n  }\n\n  static fromAny(value: AnyUriPath | null | undefined): UriPath {\n    if (value === void 0 || value === null) {\n      return UriPath.empty();\n    } else if (value instanceof UriPath) {\n      return value;\n    } else if (Array.isArray(value)) {\n      return UriPath.of(...value);\n    } else if (typeof value === \"string\") {\n      return UriPath.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(pathPart: string): UriPath {\n    return Uri.standardParser.parsePathString(pathPart);\n  }\n\n  static builder(): UriPathBuilder {\n    return new UriPathBuilder();\n  }\n\n  @Lazy\n  static pathForm(): Form<UriPath, AnyUriPath> {\n    return new UriPathForm(UriPath.empty());\n  }\n\n  /** @hidden */\n  @Lazy\n  static get segmentCache(): HashGenCacheSet<string> {\n    const segmentCacheSize = 64;\n    return new HashGenCacheSet<string>(segmentCacheSize);\n  }\n\n  /** @hidden */\n  static cacheSegment(segment: string): string {\n    if (segment.length <= 32) {\n      return this.segmentCache.put(segment);\n    } else {\n      return segment;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Format} from \"@swim/codec\";\nimport {UriPath} from \"./UriPath\";\n\n/** @hidden */\nexport class UriPathSegment extends UriPath {\n  /** @hidden */\n  constructor(head: string, tail: UriPath) {\n    super();\n    Object.defineProperty(this, \"segment\", {\n      value: head,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly segment: string;\n\n  /** @hidden */\n  declare readonly rest: UriPath;\n\n  isDefined(): boolean {\n    return true;\n  }\n\n  isAbsolute(): boolean {\n    return false;\n  }\n\n  isRelative(): boolean {\n    return true;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  head(): string {\n    return this.segment;\n  }\n\n  tail(): UriPath {\n    return this.rest;\n  }\n\n  /** @hidden */\n  setTail(tail: UriPath): void {\n    if (tail instanceof UriPathSegment) {\n      throw new Error(\"adjacent path segments\");\n    }\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  dealias(): UriPath {\n    return new UriPathSegment(this.segment, this.rest);\n  }\n\n  parent(): UriPath {\n    const tail = this.rest;\n    if (tail.isEmpty()) {\n      return UriPath.empty();\n    } else {\n      const rest = tail.tail();\n      if (rest.isEmpty()) {\n        return UriPath.empty();\n      } else {\n        return new UriPathSegment(this.segment, tail.parent());\n      }\n    }\n  }\n\n  base(): UriPath {\n    const tail = this.rest;\n    if (tail.isEmpty()) {\n      return UriPath.empty();\n    } else {\n      return new UriPathSegment(this.segment, tail.base());\n    }\n  }\n\n  prependedSegment(segment: string): UriPath {\n    return UriPath.segment(segment, this.prependedSlash());\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriPath\").write(46/*'.'*/).write(\"parse\")\n        .write(40/*'('*/).write(34/*'\"'*/) .display(this).write(34/*'\"'*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      super.display(output);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Format} from \"@swim/codec\";\nimport {UriPath} from \"./UriPath\";\n\n/** @hidden */\nexport class UriPathSlash extends UriPath {\n  /** @hidden */\n  constructor(tail: UriPath) {\n    super();\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly rest: UriPath;\n\n  isDefined(): boolean {\n    return true;\n  }\n\n  isAbsolute(): boolean {\n    return true;\n  }\n\n  isRelative(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  head(): string {\n    return \"/\";\n  }\n\n  tail(): UriPath {\n    return this.rest;\n  }\n\n  /** @hidden */\n  setTail(tail: UriPath): void {\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  dealias(): UriPath {\n    return new UriPathSlash(this.rest);\n  }\n\n  parent(): UriPath {\n    const tail = this.rest;\n    if (tail.isEmpty()) {\n      return UriPath.empty();\n    } else {\n      const rest = tail.tail();\n      if (rest.isEmpty()) {\n        return UriPath.slash();\n      } else {\n        return new UriPathSlash(tail.parent());\n      }\n    }\n  }\n\n  base(): UriPath {\n    const tail = this.rest;\n    if (tail.isEmpty()) {\n      return this;\n    } else {\n      return new UriPathSlash(tail.base());\n    }\n  }\n\n  prependedSegment(segment: string): UriPath {\n    return UriPath.segment(segment, this);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriPath\").write(46/*'.'*/).write(\"parse\")\n        .write(40/*'('*/).write(34/*'\"'*/) .display(this).write(34/*'\"'*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      super.display(output);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {AnyUriPath, UriPath} from \"./UriPath\";\n\n/** @hidden */\nexport class UriPathEmpty extends UriPath {\n  /** @hidden */\n  constructor() {\n    super();\n  }\n\n  isDefined(): boolean {\n    return false;\n  }\n\n  isAbsolute(): boolean {\n    return false;\n  }\n\n  isRelative(): boolean {\n    return true;\n  }\n\n  isEmpty(): boolean {\n    return true;\n  }\n\n  head(): string {\n    throw new Error(\"empty path\");\n  }\n\n  tail(): UriPath {\n    throw new Error(\"empty path\");\n  }\n\n  /** @hidden */\n  setTail(tail: UriPath): void {\n    throw new Error(\"empty path\");\n  }\n\n  /** @hidden */\n  dealias(): UriPath {\n    return this;\n  }\n\n  parent(): UriPath {\n    return this;\n  }\n\n  base(): UriPath {\n    return this;\n  }\n\n  appended(...components: AnyUriPath[]): UriPath {\n    return UriPath.of(...components);\n  }\n\n  appendedSlash(): UriPath {\n    return UriPath.slash();\n  }\n\n  appendedSegment(segment: string): UriPath {\n    return UriPath.segment(segment);\n  }\n\n  prepended(...components: AnyUriPath[]): UriPath {\n    return UriPath.of(...components);\n  }\n\n  prependedSlash(): UriPath {\n    return UriPath.slash();\n  }\n\n  prependedSegment(segment: string): UriPath {\n    return UriPath.segment(segment);\n  }\n\n  merge(that: UriPath): UriPath {\n    return that;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriPath\").write(46/*'.'*/).write(\"empty\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    // nop\n  }\n\n  toString(): string {\n    return \"\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Builder} from \"@swim/util\";\nimport {AnyUriPath, UriPath} from \"./UriPath\";\n\nexport class UriPathBuilder implements Builder<string, UriPath> {\n  /** @hidden */\n  first: UriPath;\n  /** @hidden */\n  last: UriPath | null;\n  /** @hidden */\n  size: number;\n  /** @hidden */\n  aliased: number;\n\n  constructor() {\n    this.first = UriPath.empty();\n    this.last = null;\n    this.size = 0;\n    this.aliased = 0;\n  }\n\n  isEmpty(): boolean {\n    return this.size === 0;\n  }\n\n  push(...components: AnyUriPath[]): void {\n    for (let i = 0; i < components.length; i += 1) {\n      const component = components[i]!;\n      if (component instanceof UriPath) {\n        this.addPath(component);\n      } else if (Array.isArray(component)) {\n        this.push(...component);\n      } else if (component === \"/\") {\n        this.addSlash();\n      } else {\n        this.addSegment(component);\n      }\n    }\n  }\n\n  bind(): UriPath {\n    this.aliased = 0;\n    return this.first;\n  }\n\n  addSlash(): void {\n    const tail = UriPath.slash().dealias();\n    const size = this.size;\n    if (size === 0) {\n      this.first = tail;\n    } else {\n      this.dealias(size - 1).setTail(tail);\n    }\n    this.last = tail;\n    this.size = size + 1;\n    this.aliased += 1;\n  }\n\n  addSegment(segment: string): void {\n    const tail = UriPath.segment(segment, UriPath.empty());\n    let size = this.size;\n    if (size === 0) {\n      this.first = tail;\n    } else {\n      const last = this.dealias(size - 1);\n      if (last.isAbsolute()) {\n        last.setTail(tail);\n      } else {\n        last.setTail(tail.prependedSlash());\n        size += 1;\n        this.aliased += 1;\n      }\n    }\n    this.last = tail;\n    this.size = size + 1;\n    this.aliased += 1;\n  }\n\n  addPath(path: UriPath): void {\n    if (!path.isEmpty()) {\n      let size = this.size;\n      if (size === 0) {\n        this.first = path;\n      } else {\n        const last = this.dealias(size - 1);\n        if (last.isAbsolute() || path.isAbsolute()) {\n          last.setTail(path);\n        } else {\n          last.setTail(path.prependedSlash());\n          size += 1;\n          this.aliased += 1;\n        }\n      }\n      size += 1;\n      do {\n        const tail = path.tail();\n        if (!tail.isEmpty()) {\n          path = tail;\n          size += 1;\n        } else {\n          break;\n        }\n      } while (true);\n      this.last = path;\n      this.size = size;\n    }\n  }\n\n  pop(): UriPath {\n    const size = this.size;\n    const aliased = this.aliased;\n    if (size === 0) {\n      throw new Error(\"Empty UriPath\");\n    } else if (size === 1) {\n      const first = this.first;\n      this.first = first.tail();\n      if (first.tail().isEmpty()) {\n        this.last = null;\n      }\n      this.size = size - 1;\n      if (aliased > 0) {\n        this.aliased = aliased - 1;\n      }\n      return first;\n    } else {\n      const last = this.dealias(size - 2);\n      last.setTail(UriPath.empty());\n      this.last = last;\n      this.size = size - 1;\n      this.aliased = aliased - 1;\n      return last.tail();\n    }\n  }\n\n  /** @hidden */\n  dealias(n: number): UriPath {\n    let i = 0;\n    let xi: UriPath | null = null;\n    let xs = this.first;\n    if (this.aliased <= n) {\n      while (i < this.aliased) {\n        xi = xs;\n        xs = xs.tail();\n        i += 1;\n      }\n      while (i <= n) {\n        const xn = xs.dealias();\n        if (i === 0) {\n          this.first = xn;\n        } else {\n          xi!.setTail(xn);\n        }\n        xi = xn;\n        xs = xs.tail();\n        i += 1;\n      }\n      if (i === this.size) {\n        this.last = xi;\n      }\n      this.aliased = i;\n    } else if (n === 0) {\n      xi = this.first;\n    } else if (n === this.size - 1) {\n      xi = this.last;\n    } else {\n      while (i <= n) {\n        xi = xs;\n        xs = xs.tail();\n        i += 1;\n      }\n    }\n    return xi!;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {AnyUriPath, UriPath} from \"./UriPath\";\n\n/** @hidden */\nexport class UriPathForm extends Form<UriPath, AnyUriPath> {\n  constructor(unit: UriPath | undefined) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: UriPath | undefined;\n\n  withUnit(unit: UriPath | undefined): Form<UriPath, AnyUriPath> {\n    if (unit !== this.unit) {\n      return new UriPathForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: AnyUriPath, item?: Item): Item {\n    object = UriPath.fromAny(object);\n    if (item === void 0) {\n      return Text.from(object.toString());\n    } else {\n      return item.concat(Text.from(object.toString()));\n    }\n  }\n\n  cast(item: Item, object?: UriPath): UriPath | undefined {\n    const value = item.target;\n    try {\n      const string = value.stringValue();\n      if (typeof string === \"string\") {\n        return UriPath.parse(string);\n      }\n    } catch (error) {\n      // swallow\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings, HashGenCacheSet} from \"@swim/util\";\nimport type {Output, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\nimport {UriQueryParam} from \"./\"; // forward import\nimport {UriQueryUndefined} from \"./\"; // forward import\nimport {UriQueryBuilder} from \"./\"; // forward import\n\nexport type AnyUriQuery = UriQuery | {[key: string]: string} | string;\n\nexport abstract class UriQuery implements HashCode, Compare, Debug, Display {\n  abstract isDefined(): boolean;\n\n  abstract isEmpty(): boolean;\n\n  get length(): number {\n    let n = 0;\n    let query: UriQuery = this;\n    while (!query.isEmpty()) {\n      n += 1;\n      query = query.tail();\n    }\n    return n;\n  }\n\n  abstract head(): [string | undefined, string];\n\n  abstract readonly key: string | undefined;\n\n  abstract readonly value: string;\n\n  abstract tail(): UriQuery;\n\n  /** @hidden */\n  abstract setTail(tail: UriQuery): void;\n\n  /** @hidden */\n  abstract dealias(): UriQuery;\n\n  has(key: string): boolean {\n    let query: UriQuery = this;\n    while (!query.isEmpty()) {\n      if (key === query.key) {\n        return true;\n      }\n      query = query.tail();\n    }\n    return false;\n  }\n\n  get(key: string): string | undefined {\n    let query: UriQuery = this;\n    while (!query.isEmpty()) {\n      if (key === query.key) {\n        return query.value;\n      }\n      query = query.tail();\n    }\n    return void 0;\n  }\n\n  updated(key: string, value: string): UriQuery {\n    let query: UriQuery = this;\n    const builder = new UriQueryBuilder();\n    let updated = false;\n    while (!query.isEmpty()) {\n      if (key === query.key) {\n        builder.addParam(key, value);\n        updated = true;\n      } else {\n        builder.addParam(query.key, query.value);\n      }\n      query = query.tail();\n    }\n    if (!updated) {\n      builder.addParam(key, value);\n    }\n    return builder.bind();\n  }\n\n  removed(key: string): UriQuery {\n    let query: UriQuery = this;\n    const builder = new UriQueryBuilder();\n    let updated = false;\n    while (!query.isEmpty()) {\n      if (key === query.key) {\n        updated = true;\n      } else {\n        builder.addParam(query.key, query.value);\n      }\n      query = query.tail();\n    }\n    if (updated) {\n      return builder.bind();\n    } else {\n      return this;\n    }\n  }\n\n  appended(key: string | undefined, value: string): UriQuery;\n  appended(params: AnyUriQuery): UriQuery;\n  appended(key: AnyUriQuery | undefined, value?: string): UriQuery {\n    const builder = new UriQueryBuilder();\n    builder.addQuery(this);\n    builder.add(key as any, value as any);\n    return builder.bind();\n  }\n\n  prepended(key: string | undefined, value: string): UriQuery;\n  prepended(params: AnyUriQuery): UriQuery;\n  prepended(key: AnyUriQuery | undefined, value?: string): UriQuery {\n    const builder = new UriQueryBuilder();\n    builder.add(key as any, value as any);\n    builder.addQuery(this);\n    return builder.bind();\n  }\n\n  toAny(params?: {[key: string]: string}): {[key: string]: string} | undefined {\n    if (this.isDefined()) {\n      params = params || {};\n      let query: UriQuery = this;\n      let i = 0;\n      while (!query.isEmpty()) {\n        const key = query.key;\n        if (key !== void 0) {\n          params[key] = query.value;\n        } else {\n          params[\"$\" + i] = query.value;\n        }\n        query = query.tail();\n        i += 1;\n      }\n    }\n    return params;\n  }\n\n  compareTo(that: UriQuery): number {\n    if (that instanceof UriQuery) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriQuery) {\n      return this.toString() === that.toString();\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.toString());\n  }\n\n  abstract debug(output: Output): void;\n\n  display(output: Output): void {\n    let query: UriQuery = this;\n    let first = true;\n    while (!query.isEmpty()) {\n      if (!first) {\n        output = output.write(38/*'&'*/);\n      } else {\n        first = false;\n      }\n      const key = query.key;\n      if (key !== void 0) {\n        Uri.writeParam(key, output);\n        output = output.write(61/*'='*/);\n      }\n      Uri.writeQuery(query.value, output);\n      query = query.tail();\n    }\n  }\n\n  abstract toString(): string;\n\n  @Lazy\n  static undefined(): UriQuery {\n    return new UriQueryUndefined();\n  }\n\n  static param(value: string, tail?: UriQuery): UriQuery;\n  static param(key: string | undefined, value: string, tail?: UriQuery): UriQuery;\n  static param(key: string | undefined, value?: UriQuery | string, tail?: UriQuery): UriQuery {\n    if (tail === void 0) {\n      tail = value as UriQuery | undefined;\n      value = key!;\n      key = void 0;\n    } else if (key !== void 0) {\n      key = this.cacheKey(key);\n    }\n    if (tail === void 0) {\n      tail = UriQuery.undefined();\n    }\n    return new UriQueryParam(key, value as string, tail);\n  }\n\n  static fromAny(value: AnyUriQuery | null | undefined): UriQuery {\n    if (value === void 0 || value === null) {\n      return UriQuery.undefined();\n    } else if (value instanceof UriQuery) {\n      return value;\n    } else if (typeof value === \"object\") {\n      const builder = new UriQueryBuilder();\n      builder.add(value);\n      return builder.bind();\n    } else if (typeof value === \"string\") {\n      return UriQuery.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(queryPart: string): UriQuery {\n    return Uri.standardParser.parseQueryString(queryPart);\n  }\n\n  static builder(): UriQueryBuilder {\n    return new UriQueryBuilder();\n  }\n\n  /** @hidden */\n  @Lazy\n  static get keyCache(): HashGenCacheSet<string> {\n    const keyCacheSize = 64;\n    return new HashGenCacheSet<string>(keyCacheSize);\n  }\n\n  /** @hidden */\n  static cacheKey(key: string): string {\n    if (key.length <= 32) {\n      return UriQuery.keyCache.put(key);\n    } else {\n      return key;\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Format} from \"@swim/codec\";\nimport {UriQuery} from \"./UriQuery\";\n\n/** @hidden */\nexport class UriQueryParam extends UriQuery {\n  constructor(key: string | undefined, value: string, tail: UriQuery) {\n    super();\n    Object.defineProperty(this, \"key\", {\n      value: key,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly key: string | undefined;\n\n  declare readonly value: string;\n\n  /** @hidden */\n  declare readonly rest: UriQuery;\n\n  isDefined(): boolean {\n    return true;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  head(): [string | undefined, string] {\n    return [this.key, this.value];\n  }\n\n  tail(): UriQuery {\n    return this.rest;\n  }\n\n  /** @hidden */\n  setTail(tail: UriQuery): void {\n    Object.defineProperty(this, \"rest\", {\n      value: tail,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  dealias(): UriQuery {\n    return new UriQueryParam(this.key, this.value, this.rest);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriQuery\").write(46/*'.'*/).write(\"parse\")\n        .write(40/*'('*/).write(34/*'\"'*/).display(this).write(34/*'\"'*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue;\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else {\n      super.display(output);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Output} from \"@swim/codec\";\nimport {AnyUriQuery, UriQuery} from \"./UriQuery\";\nimport {UriQueryBuilder} from \"./\"; // forward import\n\n/** @hidden */\nexport class UriQueryUndefined extends UriQuery {\n  isDefined(): boolean {\n    return false;\n  }\n\n  isEmpty(): boolean {\n    return true;\n  }\n\n  head(): [string | undefined, string] {\n    throw new Error(\"undefined query\");\n  }\n\n  get key(): string | undefined {\n    throw new Error(\"undefined query\");\n  }\n\n  get value(): string {\n    throw new Error(\"undefined query\");\n  }\n\n  tail(): UriQuery {\n    throw new Error(\"undefined query\");\n  }\n\n  /** @hidden */\n  setTail(tail: UriQuery): void {\n    throw new Error(\"undefined query\");\n  }\n\n  /** @hidden */\n  dealias(): UriQuery {\n    return this;\n  }\n\n  updated(key: string, value: string): UriQuery {\n    return UriQuery.param(key, value, this);\n  }\n\n  removed(key: string): UriQuery {\n    return this;\n  }\n\n  appended(key: string | undefined, value: string): UriQuery;\n  appended(params: AnyUriQuery): UriQuery;\n  appended(key: AnyUriQuery | undefined, value?: string): UriQuery {\n    const builder = new UriQueryBuilder();\n    builder.add(key as any, value as any);\n    return builder.bind();\n  }\n\n  prepended(key: string | undefined, value: string): UriQuery;\n  prepended(params: AnyUriQuery): UriQuery;\n  prepended(key: AnyUriQuery | undefined, value?: string): UriQuery {\n    const builder = new UriQueryBuilder();\n    builder.add(key as any, value as any);\n    return builder.bind();\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriQuery\").write(46/*'.'*/).write(\"undefined\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n\n  display(output: Output): void {\n    // nop\n  }\n\n  toString(): string {\n    return \"\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {PairBuilder} from \"@swim/util\";\nimport {AnyUriQuery, UriQuery} from \"./UriQuery\";\n\nexport class UriQueryBuilder implements PairBuilder<string | undefined, string, UriQuery> {\n  /** @hidden */\n  first: UriQuery;\n  /** @hidden */\n  last: UriQuery | null;\n  /** @hidden */\n  size: number;\n  /** @hidden */\n  aliased: number;\n\n  constructor() {\n    this.first = UriQuery.undefined();\n    this.last = null;\n    this.size = 0;\n    this.aliased = 0;\n  }\n\n  isEmpty(): boolean {\n    return this.size === 0;\n  }\n\n  add(key: string | undefined, value: string): void;\n  add(params: AnyUriQuery): void;\n  add(key: AnyUriQuery | undefined, value?: string): void {\n    if (value !== void 0) {\n      this.addParam(key as string | undefined, value);\n    } else if (typeof key === \"string\") {\n      this.addParam(void 0, key);\n    } else if (key instanceof UriQuery) {\n      this.addQuery(key);\n    } else {\n      const params = key!;\n      for (const k in params) {\n        let key = k as string | undefined;\n        const value = params[k]!;\n        if (k.charCodeAt(0) === 36/*'$'*/) {\n          key = void 0;\n        }\n        this.addParam(key, value);\n      }\n    }\n  }\n\n  bind(): UriQuery {\n    this.aliased = 0;\n    return this.first;\n  }\n\n  addParam(value: string): void;\n  addParam(key: string | undefined, value: string): void;\n  addParam(key: string | undefined, value?: string): void {\n    if (value === void 0) {\n      value = key!;\n      key = void 0;\n    }\n    const tail = UriQuery.param(key, value, UriQuery.undefined());\n    const size = this.size;\n    if (size === 0) {\n      this.first = tail;\n    } else {\n      this.dealias(size - 1).setTail(tail);\n    }\n    this.last = tail;\n    this.size = size + 1;\n    this.aliased += 1;\n  }\n\n  addQuery(query: UriQuery): void {\n    if (!query.isEmpty()) {\n      let size = this.size;\n      if (size === 0) {\n        this.first = query;\n      } else {\n        this.dealias(size - 1).setTail(query);\n      }\n      size += 1;\n      do {\n        const tail = query.tail();\n        if (!tail.isEmpty()) {\n          query = tail;\n          size += 1;\n        } else {\n          break;\n        }\n      } while (true);\n      this.last = query;\n      this.size = size;\n    }\n  }\n\n  /** @hidden */\n  dealias(n: number): UriQuery {\n    let i = 0;\n    let xi: UriQuery | null = null;\n    let xs = this.first;\n    if (this.aliased <= n) {\n      while (i < this.aliased) {\n        xi = xs;\n        xs = xs.tail();\n        i += 1;\n      }\n      while (i <= n) {\n        const xn = xs.dealias();\n        if (i === 0) {\n          this.first = xn;\n        } else {\n          xi!.setTail(xn);\n        }\n        xi = xn;\n        xs = xs.tail();\n        i += 1;\n      }\n      if (i === this.size) {\n        this.last = xi;\n      }\n      this.aliased = i;\n    } else if (n === 0) {\n      xi = this.first;\n    } else if (n === this.size - 1) {\n      xi = this.last;\n    } else {\n      while (i <= n) {\n        xi = xs;\n        xs = xs.tail();\n        i += 1;\n      }\n    }\n    return xi!;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Compare, Lazy, Strings, HashGenCacheMap} from \"@swim/util\";\nimport {Output, Format, Debug, Display} from \"@swim/codec\";\nimport {Uri} from \"./Uri\";\n\nexport type AnyUriFragment = UriFragment | string;\n\nexport class UriFragment implements HashCode, Compare, Debug, Display {\n  /** @hidden */\n  constructor(identifier: string | undefined) {\n    Object.defineProperty(this, \"identifier\", {\n      value: identifier,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.identifier !== void 0;\n  }\n\n  declare readonly identifier: string | undefined;\n\n  toAny(): string | undefined {\n    return this.identifier;\n  }\n\n  compareTo(that: UriFragment): number {\n    if (that instanceof UriFragment) {\n      return this.toString().localeCompare(that.toString());\n    }\n    return NaN;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof UriFragment) {\n      return this.identifier === that.identifier;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Strings.hash(this.identifier);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"UriFragment\").write(46/*'.'*/);\n    if (this.isDefined()) {\n      output = output.write(\"parse\").write(40/*'('*/).write(34/*'\"'*/).display(this).write(34/*'\"'*/).write(41/*')'*/);\n    } else {\n      output = output.write(\"undefined\").write(40/*'('*/).write(41/*')'*/);\n    }\n  }\n\n  display(output: Output): void {\n    const stringValue = this.stringValue\n    if (stringValue !== void 0) {\n      output = output.write(stringValue);\n    } else if (this.identifier !== void 0) {\n      Uri.writeFragment(this.identifier, output);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = Format.display(this);\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  @Lazy\n  static undefined(): UriFragment {\n    return new UriFragment(void 0);\n  }\n\n  static create(identifier: string | undefined): UriFragment {\n    if (identifier !== void 0) {\n      const cache = UriFragment.cache;\n      const fragment = cache.get(identifier);\n      if (fragment !== void 0) {\n        return fragment;\n      } else {\n        return cache.put(identifier, new UriFragment(identifier));\n      }\n    } else {\n      return UriFragment.undefined();\n    }\n  }\n\n  static fromAny(value: AnyUriFragment | null | undefined): UriFragment {\n    if (value === void 0 || value === null) {\n      return UriFragment.undefined();\n    } else if (value instanceof UriFragment) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return UriFragment.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static parse(fragmentPart: string): UriFragment {\n    return Uri.standardParser.parseFragmentString(fragmentPart);\n  }\n\n  /** @hidden */\n  @Lazy\n  static get cache(): HashGenCacheMap<string, UriFragment> {\n    const cacheSize = 32;\n    return new HashGenCacheMap<string, UriFragment>(cacheSize);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"./Uri\";\n\n/** @hidden */\nexport class UriForm extends Form<Uri, AnyUri> {\n  constructor(unit: Uri | undefined) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: Uri | undefined;\n\n  withUnit(unit: Uri | undefined): Form<Uri, AnyUri> {\n    if (unit !== this.unit) {\n      return new UriForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(object: AnyUri, item?: Item): Item {\n    object = Uri.fromAny(object);\n    if (item === void 0) {\n      return Text.from(object.toString());\n    } else {\n      return item.concat(Text.from(object.toString()));\n    }\n  }\n\n  cast(item: Item, object?: Uri): Uri | undefined {\n    const value = item.target;\n    try {\n      const string = value.stringValue();\n      if (typeof string === \"string\") {\n        return Uri.parse(string);\n      }\n    } catch (error) {\n      // swallow\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashGenCacheMap} from \"@swim/util\";\nimport {AnyUri, Uri} from \"./Uri\";\n\nexport class UriCache {\n  constructor(base: Uri, size: number = 32) {\n    Object.defineProperty(this, \"base\", {\n      value: base,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"resolveCache\", {\n      value: new HashGenCacheMap(size),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"unresolveCache\", {\n      value: new HashGenCacheMap(size),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly base: Uri;\n\n  /** @hidden */\n  declare readonly resolveCache: HashGenCacheMap<Uri, Uri>;\n\n  /** @hidden */\n  declare readonly unresolveCache: HashGenCacheMap<Uri, Uri>;\n\n  resolve(relative: AnyUri): Uri {\n    relative = Uri.fromAny(relative);\n    let absolute = this.resolveCache.get(relative as Uri);\n    if (absolute === void 0) {\n      absolute = this.base.resolve(relative);\n      this.resolveCache.put(relative as Uri, absolute);\n    }\n    return absolute;\n  }\n\n  unresolve(absolute: AnyUri): Uri {\n    absolute = Uri.fromAny(absolute);\n    let relative = this.unresolveCache.get(absolute as Uri);\n    if (relative === void 0) {\n      relative = this.base.unresolve(absolute);\n      this.unresolveCache.put(absolute as Uri, relative);\n    }\n    return relative;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport {UriScheme} from \"../UriScheme\";\nimport {UriAuthority} from \"../UriAuthority\";\nimport {UriUser} from \"../UriUser\";\nimport {UriHost} from \"../UriHost\";\nimport {UriPort} from \"../UriPort\";\nimport {UriPath} from \"../UriPath\";\nimport {UriPathBuilder} from \"../UriPathBuilder\";\nimport type {UriQuery} from \"../UriQuery\";\nimport {UriQueryBuilder} from \"../UriQueryBuilder\";\nimport {UriFragment} from \"../UriFragment\";\nimport {UriAbsoluteParser} from \"../\"; // forward import\nimport {UriSchemeParser} from \"../\"; // forward import\nimport {UriAuthorityParser} from \"../\"; // forward import\nimport {UriUserParser} from \"../\"; // forward import\nimport {UriHostParser} from \"../\"; // forward import\nimport {UriHostAddressParser} from \"../\"; // forward import\nimport {UriHostLiteralParser} from \"../\"; // forward import\nimport {UriPortParser} from \"../\"; // forward import\nimport {UriPathParser} from \"../\"; // forward import\nimport {UriQueryParser} from \"../\"; // forward import\nimport {UriFragmentParser} from \"../\"; // forward import\n\nexport class UriParser {\n  absolute(scheme?: UriScheme, authority?: UriAuthority, path?: UriPath,\n           query?: UriQuery, fragment?: UriFragment): Uri {\n    return Uri.create(scheme, authority, path, query, fragment);\n  }\n\n  scheme(name: string): UriScheme {\n    return UriScheme.create(name);\n  }\n\n  authority(user?: UriUser, host?: UriHost, port?: UriPort): UriAuthority {\n    return UriAuthority.create(user, host, port);\n  }\n\n  user(username: string | undefined, password?: string | undefined): UriUser {\n    return UriUser.create(username, password);\n  }\n\n  hostName(address: string): UriHost {\n    return UriHost.hostname(address);\n  }\n\n  hostIPv4(address: string): UriHost {\n    return UriHost.ipv4(address);\n  }\n\n  hostIPv6(address: string): UriHost {\n    return UriHost.ipv6(address);\n  }\n\n  port(number: number): UriPort {\n    return UriPort.create(number);\n  }\n\n  pathEmpty(): UriPath {\n    return UriPath.empty();\n  }\n\n  pathBuilder(): UriPathBuilder {\n    return new UriPathBuilder();\n  }\n\n  queryBuilder(): UriQueryBuilder {\n    return new UriQueryBuilder();\n  }\n\n  fragment(identifier: string | undefined): UriFragment {\n    return UriFragment.create(identifier);\n  }\n\n  absoluteParser(): Parser<Uri> {\n    return new UriAbsoluteParser(this);\n  }\n\n  parseAbsolute(input: Input): Parser<Uri> {\n    return UriAbsoluteParser.parse(input, this);\n  }\n\n  parseAbsoluteString(string: string): Uri {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseAbsolute(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  schemeParser(): Parser<UriScheme> {\n    return new UriSchemeParser(this);\n  }\n\n  parseScheme(input: Input): Parser<UriScheme> {\n    return UriSchemeParser.parse(input, this);\n  }\n\n  parseSchemeString(string: string): UriScheme {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseScheme(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  authorityParser(): Parser<UriAuthority> {\n    return new UriAuthorityParser(this);\n  }\n\n  parseAuthority(input: Input): Parser<UriAuthority> {\n    return UriAuthorityParser.parse(input, this);\n  }\n\n  parseAuthorityString(string: string): UriAuthority {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseAuthority(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  userParser(): Parser<UriUser> {\n    return new UriUserParser(this);\n  }\n\n  parseUser(input: Input): Parser<UriUser> {\n    return UriUserParser.parse(input, this);\n  }\n\n  parseUserString(string: string): UriUser {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseUser(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  hostParser(): Parser<UriHost> {\n    return new UriHostParser(this);\n  }\n\n  parseHost(input: Input): Parser<UriHost> {\n    return UriHostParser.parse(input, this);\n  }\n\n  parseHostString(string: string): UriHost {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseHost(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  hostAddressParser(): Parser<UriHost> {\n    return new UriHostAddressParser(this);\n  }\n\n  parseHostAddress(input: Input): Parser<UriHost> {\n    return UriHostAddressParser.parse(input, this);\n  }\n\n  hostLiteralParser(): Parser<UriHost> {\n    return new UriHostLiteralParser(this);\n  }\n\n  parseHostLiteral(input: Input): Parser<UriHost> {\n    return UriHostLiteralParser.parse(input, this);\n  }\n\n  portParser(): Parser<UriPort> {\n    return new UriPortParser(this);\n  }\n\n  parsePort(input: Input): Parser<UriPort> {\n    return UriPortParser.parse(input, this);\n  }\n\n  parsePortString(string: string): UriPort {\n    const input = Unicode.stringInput(string);\n    let parser = this.parsePort(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  pathParser(builder?: UriPathBuilder): Parser<UriPath> {\n    return new UriPathParser(this, builder);\n  }\n\n  parsePath(input: Input, builder?: UriPathBuilder): Parser<UriPath> {\n    return UriPathParser.parse(input, this, builder);\n  }\n\n  parsePathString(string: string): UriPath {\n    const input = Unicode.stringInput(string);\n    let parser = this.parsePath(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  queryParser(builder?: UriQueryBuilder): Parser<UriQuery> {\n    return new UriQueryParser(this, builder);\n  }\n\n  parseQuery(input: Input, builder?: UriQueryBuilder): Parser<UriQuery> {\n    return UriQueryParser.parse(input, this, builder);\n  }\n\n  parseQueryString(string: string): UriQuery {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseQuery(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  fragmentParser(): Parser<UriFragment> {\n    return new UriFragmentParser(this);\n  }\n\n  parseFragment(input: Input): Parser<UriFragment> {\n    return UriFragmentParser.parse(input, this);\n  }\n\n  parseFragmentString(string: string): UriFragment {\n    const input = Unicode.stringInput(string);\n    let parser = this.parseFragment(input);\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriScheme} from \"../UriScheme\";\nimport type {UriAuthority} from \"../UriAuthority\";\nimport {UriPath} from \"../UriPath\";\nimport type {UriQuery} from \"../UriQuery\";\nimport type {UriFragment} from \"../UriFragment\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriAbsoluteParser extends Parser<Uri> {\n  private readonly uri: UriParser;\n  private readonly schemeParser: Parser<UriScheme> | undefined;\n  private readonly authorityParser: Parser<UriAuthority> | undefined;\n  private readonly pathParser: Parser<UriPath> | undefined;\n  private readonly queryParser: Parser<UriQuery> | undefined;\n  private readonly fragmentParser: Parser<UriFragment> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, schemeParser?: Parser<UriScheme>,\n              authorityParser?: Parser<UriAuthority>, pathParser?: Parser<UriPath>,\n              queryParser?: Parser<UriQuery>, fragmentParser?: Parser<UriFragment>, step?: number) {\n    super();\n    this.uri = uri;\n    this.schemeParser = schemeParser;\n    this.authorityParser = authorityParser;\n    this.pathParser = pathParser;\n    this.queryParser = queryParser;\n    this.fragmentParser = fragmentParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<Uri> {\n    return UriAbsoluteParser.parse(input, this.uri, this.schemeParser, this.authorityParser,\n                                   this.pathParser, this.queryParser, this.fragmentParser, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, schemeParser?: Parser<UriScheme>,\n               authorityParser?: Parser<UriAuthority>, pathParser?: Parser<UriPath>,\n               queryParser?: Parser<UriQuery>, fragmentParser?: Parser<UriFragment>,\n               step: number = 1): Parser<Uri> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        const look = input.clone();\n        while (look.isCont() && (c = look.head(), Uri.isSchemeChar(c))) {\n          look.step();\n        }\n        if (look.isCont() && c === 58/*':'*/) {\n          step = 2;\n        } else {\n          step = 3;\n        }\n      } else if (input.isDone()) {\n        step = 3;\n      }\n    }\n    if (step === 2) {\n      if (schemeParser === void 0) {\n        schemeParser = uri.parseScheme(input);\n      } else {\n        schemeParser = schemeParser.feed(input);\n      }\n      if (schemeParser.isDone()) {\n        if (input.isCont() && input.head() === 58/*':'*/) {\n          input = input.step();\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(58/*':'*/, input));\n        }\n      } else if (schemeParser.isError()) {\n        return schemeParser.asError();\n      }\n    }\n    if (step === 3) {\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 47/*'/'*/) {\n          input = input.step();\n          step = 4;\n        } else if (c === 63/*'?'*/) {\n          input = input.step();\n          step = 7;\n        } else if (c === 35/*'#'*/) {\n          input = input.step();\n          step = 8;\n        } else {\n          step = 6;\n        }\n      } else if (input.isDone()) {\n        return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0));\n      }\n    }\n    if (step === 4) {\n      if (input.isCont() && input.head() === 47/*'/'*/) {\n        input = input.step();\n        step = 5;\n      } else if (input.isCont()) {\n        const pathBuilder = uri.pathBuilder();\n        pathBuilder.addSlash();\n        pathParser = uri.parsePath(input, pathBuilder);\n        step = 6;\n      } else if (input.isDone()) {\n        return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0,\n                                        void 0,\n                                        UriPath.slash()));\n      }\n    }\n    if (step === 5) {\n      if (authorityParser === void 0) {\n        authorityParser = uri.parseAuthority(input);\n      } else {\n        authorityParser = authorityParser.feed(input);\n      }\n      if (authorityParser.isDone()) {\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 63/*'?'*/) {\n            input = input.step();\n            step = 7;\n          } else if (c === 35/*'#'*/) {\n            input = input.step();\n            step = 8;\n          } else {\n            step = 6;\n          }\n        } else if (input.isDone()) {\n          return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0,\n                                          authorityParser !== void 0 ? authorityParser.bind() : void 0));\n        }\n      } else if (authorityParser.isError()) {\n        return authorityParser.asError();\n      }\n    }\n    if (step === 6) {\n      if (pathParser === void 0) {\n        pathParser = uri.parsePath(input);\n      } else {\n        pathParser = pathParser.feed(input);\n      }\n      if (pathParser.isDone()) {\n        if (input.isCont() && input.head() === 63/*'?'*/) {\n          input = input.step();\n          step = 7;\n        } else if (input.isCont() && input.head() === 35/*'#'*/) {\n          input = input.step();\n          step = 8;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0,\n                                          authorityParser !== void 0 ? authorityParser.bind() : void 0,\n                                          pathParser.bind()));\n        }\n      } else if (pathParser.isError()) {\n        return pathParser.asError();\n      }\n    }\n    if (step === 7) {\n      if (queryParser === void 0) {\n        queryParser = uri.parseQuery(input);\n      } else {\n        queryParser = queryParser.feed(input);\n      }\n      if (queryParser.isDone()) {\n        if (input.isCont() && input.head() === 35/*'#'*/) {\n          input = input.step();\n          step = 8;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0,\n                                          authorityParser !== void 0 ? authorityParser.bind() : void 0,\n                                          pathParser !== void 0 ? pathParser.bind() : void 0,\n                                          queryParser.bind()));\n        }\n      } else if (queryParser.isError()) {\n        return queryParser.asError();\n      }\n    }\n    if (step === 8) {\n      if (fragmentParser === void 0) {\n        fragmentParser = uri.parseFragment(input);\n      } else {\n        fragmentParser = fragmentParser.feed(input);\n      }\n      if (fragmentParser.isDone()) {\n        return Parser.done(uri.absolute(schemeParser !== void 0 ? schemeParser.bind() : void 0,\n                                        authorityParser !== void 0 ? authorityParser.bind() : void 0,\n                                        pathParser !== void 0 ? pathParser.bind() : void 0,\n                                        queryParser !== void 0 ? queryParser.bind() : void 0,\n                                        fragmentParser.bind()));\n      } else if (fragmentParser.isError()) {\n        return fragmentParser.asError();\n      }\n    }\n    return new UriAbsoluteParser(uri, schemeParser, authorityParser, pathParser,\n                                 queryParser, fragmentParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriScheme} from \"../UriScheme\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriSchemeParser extends Parser<UriScheme> {\n  private readonly uri: UriParser;\n  private readonly output: Output<string> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, output?: Output<string>, step?: number) {\n    super();\n    this.uri = uri;\n    this.output = output;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriScheme> {\n    return UriSchemeParser.parse(input, this.uri, this.output, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, output?: Output<string>, step: number = 1): Parser<UriScheme> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont() && (c = input.head(), Uri.isAlpha(c))) {\n        input = input.step();\n        output = output || Utf8.decodedString();\n        output = output.write(Uri.toLowerCase(c));\n        step = 2;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"scheme\", input));\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Uri.isSchemeChar(c))) {\n        input = input.step();\n        output!.write(Uri.toLowerCase(c));\n      }\n      if (!input.isEmpty()) {\n        return Parser.done(uri.scheme(output!.bind()));\n      }\n    }\n    return new UriSchemeParser(uri, output, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Diagnostic, Parser} from \"@swim/codec\";\nimport type {UriAuthority} from \"../UriAuthority\";\nimport type {UriUser} from \"../UriUser\";\nimport type {UriHost} from \"../UriHost\";\nimport type {UriPort} from \"../UriPort\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriAuthorityParser extends Parser<UriAuthority> {\n  private readonly uri: UriParser;\n  private readonly userParser: Parser<UriUser> | undefined;\n  private readonly hostParser: Parser<UriHost> | undefined;\n  private readonly portParser: Parser<UriPort> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, userParser?: Parser<UriUser>, hostParser?: Parser<UriHost>,\n              portParser?: Parser<UriPort>, step?: number) {\n    super();\n    this.uri = uri;\n    this.userParser = userParser;\n    this.hostParser = hostParser;\n    this.portParser = portParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriAuthority> {\n    return UriAuthorityParser.parse(input, this.uri, this.userParser, this.hostParser,\n                                    this.portParser, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, userParser?: Parser<UriUser>, hostParser?: Parser<UriHost>,\n               portParser?: Parser<UriPort>, step: number = 1): Parser<UriAuthority> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        const look = input.clone();\n        while (look.isCont() && (c = look.head(), c !== 64/*'@'*/ && c !== 47/*'/'*/)) {\n          look.step();\n        }\n        if (look.isCont() && c === 64/*'@'*/) {\n          step = 2;\n        } else {\n          step = 3;\n        }\n      } else if (input.isDone()) {\n        step = 3;\n      }\n    }\n    if (step === 2) {\n      if (userParser === void 0) {\n        userParser = uri.parseUser(input);\n      } else {\n        userParser = userParser.feed(input);\n      }\n      if (userParser.isDone()) {\n        if (input.isCont() && input.head() === 64/*'@'*/) {\n          input = input.step();\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(64/*'@'*/, input));\n        }\n      } else if (userParser.isError()) {\n        return userParser.asError();\n      }\n    }\n    if (step === 3) {\n      if (hostParser === void 0) {\n        hostParser = uri.parseHost(input);\n      } else {\n        hostParser = hostParser.feed(input);\n      }\n      if (hostParser.isDone()) {\n        if (input.isCont() && input.head() === 58/*':'*/) {\n          input = input.step();\n          step = 4;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.authority(userParser !== void 0 ? userParser.bind() : void 0,\n                                           hostParser.bind()));\n        }\n      } else if (hostParser.isError()) {\n        return hostParser.asError();\n      }\n    }\n    if (step === 4) {\n      if (portParser === void 0) {\n        portParser = uri.parsePort(input);\n      } else {\n        portParser = portParser.feed(input);\n      }\n      if (portParser.isDone()) {\n        return Parser.done(uri.authority(userParser !== void 0 ? userParser.bind() : void 0,\n                                         hostParser!.bind(),\n                                         portParser.bind()));\n      } else if (portParser.isError()) {\n        return portParser.asError();\n      }\n    }\n    return new UriAuthorityParser(uri, userParser, hostParser, portParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base16, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriUser} from \"../UriUser\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriUserParser extends Parser<UriUser> {\n  private readonly uri: UriParser;\n  private readonly usernameOutput: Output<string> | undefined;\n  private readonly passwordOutput: Output<string> | undefined;\n  private readonly c1: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, usernameOutput?: Output<string>,\n              passwordOutput?: Output<string>, c1?: number, step?: number) {\n    super();\n    this.uri = uri;\n    this.usernameOutput = usernameOutput;\n    this.passwordOutput = passwordOutput;\n    this.c1 = c1;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriUser> {\n    return UriUserParser.parse(input, this.uri, this.usernameOutput,\n                               this.passwordOutput, this.c1, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, usernameOutput?: Output<string>,\n               passwordOutput?: Output<string>, c1: number = 0, step: number = 1): Parser<UriUser> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        usernameOutput = usernameOutput || Utf8.decodedString();\n        while (input.isCont() && (c = input.head(), Uri.isUserChar(c))) {\n          input = input.step();\n          usernameOutput!.write(c);\n        }\n        if (input.isCont() && c === 58/*':'*/) {\n          input = input.step();\n          step = 4;\n        } else if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 2;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.user(usernameOutput.bind()));\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          usernameOutput!.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 4) {\n        passwordOutput = passwordOutput || Utf8.decodedString();\n        while (input.isCont() && (c = input.head(), Uri.isUserInfoChar(c))) {\n          input = input.step();\n          passwordOutput.write(c);\n        }\n        if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 5;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.user(usernameOutput!.bind(), passwordOutput.bind()));\n        }\n      }\n      if (step === 5) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 6;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 6) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          passwordOutput!.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 4;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new UriUserParser(uri, usernameOutput, passwordOutput, c1, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {UriHost} from \"../UriHost\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriHostParser extends Parser<UriHost> {\n  private readonly uri: UriParser;\n\n  constructor(uri: UriParser) {\n    super();\n    this.uri = uri;\n  }\n\n  feed(input: Input): Parser<UriHost> {\n    return UriHostParser.parse(input, this.uri);\n  }\n\n  static parse(input: Input, uri: UriParser): Parser<UriHost> {\n    if (input.isCont()) {\n      const c = input.head();\n      if (c === 91/*'['*/) {\n        return uri.parseHostLiteral(input);\n      } else {\n        return uri.parseHostAddress(input);\n      }\n    } else if (input.isDone()) {\n      return Parser.done(uri.hostName(\"\"));\n    }\n    return new UriHostParser(uri);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base10, Base16, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriHost} from \"../UriHost\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriHostAddressParser extends Parser<UriHost> {\n  private readonly uri: UriParser;\n  private readonly output: Output<string> | undefined;\n  private readonly c1: number | undefined;\n  private readonly x: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, output?: Output<string>, c1?: number, x?: number, step?: number) {\n    super();\n    this.uri = uri;\n    this.output = output;\n    this.c1 = c1;\n    this.x = x;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriHost> {\n    return UriHostAddressParser.parse(input, this.uri, this.output, this.c1, this.x, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, output?: Output<string>,\n               c1: number = 0, x: number = 0, step: number = 1): Parser<UriHost> {\n    let c = 0;\n    output = output || Utf8.decodedString();\n    while (step <= 4) {\n      while (input.isCont() && (c = input.head(), Base10.isDigit(c))) {\n        input = input.step();\n        output = output.write(c);\n        x = 10 * x + Base10.decodeDigit(c);\n      }\n      if (input.isCont()) {\n        if (c === 46/*'.'*/ && step < 4 && x <= 255) {\n          input = input.step();\n          output = output.write(c);\n          x = 0;\n          step += 1;\n        } else if (!Uri.isHostChar(c) && c !== 37/*'%'*/ && step === 4 && x <= 255) {\n          return Parser.done(uri.hostIPv4(output.bind()));\n        } else {\n          x = 0;\n          step = 5;\n          break;\n        }\n      } else if (!input.isEmpty()) {\n        if (step === 4 && x <= 255) {\n          return Parser.done(uri.hostIPv4(output.bind()));\n        } else {\n          return Parser.done(uri.hostName(output.bind()));\n        }\n      } else {\n        break;\n      }\n    }\n    do {\n      if (step === 5) {\n        while (input.isCont() && (c = input.head(), Uri.isHostChar(c))) {\n          input = input.step();\n          output!.write(Uri.toLowerCase(c));\n        }\n        if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 6;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.hostName(output!.bind()));\n        }\n      }\n      if (step === 6) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 7;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 7) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          output!.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 5;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new UriHostAddressParser(uri, output, c1, x, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriHost} from \"../UriHost\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriHostLiteralParser extends Parser<UriHost> {\n  private readonly uri: UriParser;\n  private readonly output: Output<string> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, output?: Output<string>, step?: number) {\n    super();\n    this.uri = uri;\n    this.output = output;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriHost> {\n    return UriHostLiteralParser.parse(input, this.uri, this.output, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, output?: Output<string>, step: number = 1): Parser<UriHost> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont() && input.head() === 91/*'['*/) {\n        input = input.step();\n        step = 2;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(91/*'['*/, input));\n      }\n    }\n    if (step === 2) {\n      output = output || Utf8.decodedString();\n      while (input.isCont() && (c = input.head(), Uri.isHostChar(c) || c === 58/*':'*/)) {\n        input = input.step();\n        output = output.write(Uri.toLowerCase(c));\n      }\n      if (input.isCont() && c === 93/*']'*/) {\n        input = input.step();\n        return Parser.done(uri.hostIPv6(output.bind()));\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(93/*']'*/, input));\n      }\n    }\n    return new UriHostLiteralParser(uri, output, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Base10} from \"@swim/codec\";\nimport type {UriPort} from \"../UriPort\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriPortParser extends Parser<UriPort> {\n  private readonly uri: UriParser;\n  private readonly number: number | undefined;\n\n  constructor(uri: UriParser, number?: number) {\n    super();\n    this.uri = uri;\n    this.number = number;\n  }\n\n  feed(input: Input): Parser<UriPort> {\n    return UriPortParser.parse(input, this.uri, this.number);\n  }\n\n  static parse(input: Input, uri: UriParser, number: number = 0): Parser<UriPort> {\n    let c = 0;\n    while (input.isCont() && (c = input.head(), Base10.isDigit(c))) {\n      input = input.step();\n      number = 10 * number + Base10.decodeDigit(c);\n    }\n    if (!input.isEmpty()) {\n      return Parser.done(uri.port(number));\n    }\n    return new UriPortParser(uri, number);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base16, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriPath} from \"../UriPath\";\nimport type {UriPathBuilder} from \"../UriPathBuilder\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriPathParser extends Parser<UriPath> {\n  private readonly uri: UriParser;\n  private readonly builder: UriPathBuilder | undefined;\n  private readonly output: Output<string> | undefined;\n  private readonly c1: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, builder?: UriPathBuilder, output?: Output<string>,\n              c1?: number, step?: number) {\n    super();\n    this.uri = uri;\n    this.builder = builder;\n    this.output = output;\n    this.c1 = c1;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriPath> {\n    return UriPathParser.parse(input, this.uri, this.builder, this.output, this.c1, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, builder?: UriPathBuilder, output?: Output<string>,\n               c1: number = 0, step: number = 1): Parser<UriPath> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Uri.isPathChar(c))) {\n          output = output || Utf8.decodedString();\n          input = input.step();\n          output = output.write(c);\n        }\n        if (input.isCont() && c === 47/*'/'*/) {\n          input = input.step();\n          builder = builder || uri.pathBuilder();\n          if (output !== void 0) {\n            builder.addSegment(output.bind());\n            output = void 0;\n          }\n          builder.addSlash();\n          continue;\n        } else if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 2;\n        } else if (!input.isEmpty()) {\n          if (output !== void 0) {\n            builder = builder || uri.pathBuilder();\n            builder.addSegment(output.bind());\n          }\n          if (builder !== void 0) {\n            return Parser.done(builder.bind());\n          } else {\n            return Parser.done(uri.pathEmpty());\n          }\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          output = output || Utf8.decodedString();\n          input = input.step();\n          output = output.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new UriPathParser(uri, builder, output, c1, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base16, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriQuery} from \"../UriQuery\";\nimport type {UriQueryBuilder} from \"../UriQueryBuilder\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriQueryParser extends Parser<UriQuery> {\n  private readonly uri: UriParser;\n  private readonly builder: UriQueryBuilder | undefined;\n  private readonly keyOutput: Output<string> | undefined;\n  private readonly valueOutput: Output<string> | undefined;\n  private readonly c1: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, builder?: UriQueryBuilder, keyOutput?: Output<string>,\n              valueOutput?: Output<string>, c1?: number, step?: number) {\n    super();\n    this.uri = uri;\n    this.builder = builder;\n    this.keyOutput = keyOutput;\n    this.valueOutput = valueOutput;\n    this.c1 = c1;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriQuery> {\n    return UriQueryParser.parse(input, this.uri, this.builder, this.keyOutput,\n                                this.valueOutput, this.c1, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, builder?: UriQueryBuilder, keyOutput?: Output<string>,\n               valueOutput?: Output<string>, c1: number = 0, step: number = 1): Parser<UriQuery> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        keyOutput = keyOutput || Utf8.decodedString();\n        while (input.isCont() && (c = input.head(), Uri.isParamChar(c))) {\n          input = input.step();\n          keyOutput.write(c);\n        }\n        if (input.isCont() && c === 61/*'='*/) {\n          input = input.step();\n          step = 4;\n        } else if (input.isCont() && c === 38/*'&'*/) {\n          input = input.step();\n          builder = builder || uri.queryBuilder();\n          builder.addParam(keyOutput.bind());\n          keyOutput = void 0;\n          continue;\n        } else if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 2;\n        } else if (!input.isEmpty()) {\n          builder = builder || uri.queryBuilder();\n          builder.addParam(keyOutput.bind());\n          return Parser.done(builder.bind());\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          keyOutput!.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 4) {\n        valueOutput = valueOutput || Utf8.decodedString();\n        while (input.isCont() && (c = input.head(), Uri.isParamChar(c) || c === 61/*'='*/)) {\n          input = input.step();\n          valueOutput.write(c);\n        }\n        if (input.isCont() && c === 38/*'&'*/) {\n          input = input.step();\n          builder = builder || uri.queryBuilder();\n          builder.addParam(keyOutput!.bind(), valueOutput.bind());\n          keyOutput = void 0;\n          valueOutput = void 0;\n          step = 1;\n          continue;\n        } else if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 5;\n        } else if (!input.isEmpty()) {\n          builder = builder || uri.queryBuilder();\n          builder.addParam(keyOutput!.bind(), valueOutput.bind());\n          return Parser.done(builder.bind());\n        }\n      }\n      if (step === 5) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 6;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 6) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          valueOutput!.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 4;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new UriQueryParser(uri, builder, keyOutput, valueOutput, c1, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Base16, Utf8} from \"@swim/codec\";\nimport {Uri} from \"../Uri\";\nimport type {UriFragment} from \"../UriFragment\";\nimport type {UriParser} from \"./UriParser\";\n\n/** @hidden */\nexport class UriFragmentParser extends Parser<UriFragment> {\n  private readonly uri: UriParser;\n  private readonly output: Output<string> | undefined;\n  private readonly c1: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(uri: UriParser, output?: Output<string>, c1?: number, step?: number) {\n    super();\n    this.uri = uri;\n    this.output = output;\n    this.c1 = c1;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<UriFragment> {\n    return UriFragmentParser.parse(input, this.uri, this.output, this.c1, this.step);\n  }\n\n  static parse(input: Input, uri: UriParser, output?: Output<string>,\n               c1: number = 0, step: number = 1): Parser<UriFragment> {\n    let c = 0;\n    output = output || Utf8.decodedString();\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Uri.isFragmentChar(c))) {\n          input = input.step();\n          output = output.write(c);\n        }\n        if (input.isCont() && c === 37/*'%'*/) {\n          input = input.step();\n          step = 2;\n        } else if (!input.isEmpty()) {\n          return Parser.done(uri.fragment(output.bind()));\n        }\n      }\n      if (step === 2) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          c1 = c;\n          step = 3;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      if (step === 3) {\n        if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n          input = input.step();\n          output = output.write((Base16.decodeDigit(c1) << 4) | Base16.decodeDigit(c));\n          c1 = 0;\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.expected(\"hex digit\", input));\n        }\n      }\n      break;\n    } while (true);\n    return new UriFragmentParser(uri, output, c1, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class LengthException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, LengthException.prototype);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Equivalent, Compare, Lazy} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {Attr, Value, Text, Form} from \"@swim/structure\";\nimport {LengthException} from \"./LengthException\";\nimport {PxLength} from \"../\"; // forward import\nimport {EmLength} from \"../\"; // forward import\nimport {RemLength} from \"../\"; // forward import\nimport {PctLength} from \"../\"; // forward import\nimport {UnitlessLength} from \"../\"; // forward import\nimport {LengthInterpolator} from \"../\"; // forward import\nimport {LengthForm} from \"../\"; // forward import\nimport {LengthParser} from \"../\"; // forward import\n\nexport type LengthUnits = \"px\" | \"em\" | \"rem\" | \"%\" | \"\";\n\nexport interface LengthBasis {\n  emUnit?: Node | number;\n  remUnit?: number;\n  pctUnit?: number;\n}\n\nexport type AnyLength = Length | string | number;\n\nexport abstract class Length implements Interpolate<Length>, HashCode, Equivalent, Compare, Debug {\n  isDefined(): boolean {\n    return isFinite(this.value);\n  }\n\n  abstract readonly value: number;\n\n  abstract readonly units: LengthUnits;\n\n  plus(that: AnyLength, units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    that = Length.fromAny(that);\n    return Length.create(this.toValue(units, basis) + that.toValue(units, basis), units);\n  }\n\n  negative(units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    return Length.create(-this.toValue(units, basis), units);\n  }\n\n  minus(that: AnyLength, units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    that = Length.fromAny(that);\n    return Length.create(this.toValue(units, basis) - that.toValue(units, basis), units);\n  }\n\n  times(scalar: number, units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    return Length.create(this.toValue(units, basis) * scalar, units);\n  }\n\n  divide(scalar: number, units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    return Length.create(this.toValue(units, basis) / scalar, units);\n  }\n\n  combine(that: AnyLength, scalar: number = 1, units: LengthUnits = this.units, basis?: LengthBasis | number): Length {\n    that = Length.fromAny(that);\n    return Length.create(this.toValue(units, basis) + that.toValue(units, basis) * scalar, units);\n  }\n\n  abstract pxValue(basis?: LengthBasis | number): number;\n\n  emValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.pxValue(basis) / Length.emUnit(basis) : 0;\n  }\n\n  remValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.pxValue(basis) / Length.remUnit(basis) : 0;\n  }\n\n  pctValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.pxValue(basis) / Length.pctUnit(basis) : 0;\n  }\n\n  px(basis?: LengthBasis | number): PxLength {\n    return Length.px(this.pxValue(basis));\n  }\n\n  em(basis?: LengthBasis | number): EmLength {\n    return Length.em(this.emValue(basis));\n  }\n\n  rem(basis?: LengthBasis | number): RemLength {\n    return Length.rem(this.remValue(basis));\n  }\n\n  pct(basis?: LengthBasis | number): PctLength {\n    return Length.pct(this.pctValue(basis));\n  }\n\n  toValue(): Value;\n  toValue(units: LengthUnits, basis?: LengthBasis | number): number;\n  toValue(units?: LengthUnits, basis?: LengthBasis | number): Value | number {\n    if (units === void 0) {\n      return Text.from(this.toString());\n    } else {\n      switch (units) {\n        case \"px\": return this.pxValue(basis);\n        case \"em\": return this.emValue(basis);\n        case \"rem\": return this.remValue(basis);\n        case \"%\": return this.pctValue(basis);\n        default: throw new LengthException(\"unknown length units: \" + units);\n      }\n    }\n  }\n\n  to(units: LengthUnits, basis?: LengthBasis | number): Length {\n    switch (units) {\n      case \"px\": return this.px(basis);\n      case \"em\": return this.em(basis);\n      case \"rem\": return this.rem(basis);\n      case \"%\": return this.pct(basis);\n      default: throw new LengthException(\"unknown length units: \" + units);\n    }\n  }\n\n  abstract toCssValue(): CSSUnitValue | null;\n\n  interpolateTo(that: Length): Interpolator<Length>;\n  interpolateTo(that: unknown): Interpolator<Length> | null;\n  interpolateTo(that: unknown): Interpolator<Length> | null {\n    if (that instanceof Length) {\n      return LengthInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  abstract compareTo(that: unknown): number;\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  static zero(units?: LengthUnits): Length {\n    switch (units) {\n      case void 0:\n      case \"px\": return PxLength.zero();\n      case \"em\": return EmLength.zero();\n      case \"rem\": return RemLength.zero();\n      case \"%\": return PctLength.zero();\n      case \"\": return UnitlessLength.zero();\n      default: throw new LengthException(\"unknown length units: \" + units);\n    }\n  }\n\n  static px(value: number): PxLength {\n    return new PxLength(value);\n  }\n\n  static em(value: number): EmLength {\n    return new EmLength(value);\n  }\n\n  static rem(value: number): RemLength {\n    return new RemLength(value);\n  }\n\n  static pct(value: number): PctLength {\n    return new PctLength(value);\n  }\n\n  static unitless(value: number): UnitlessLength {\n    return new UnitlessLength(value);\n  }\n\n  static create(value: number, units?: LengthUnits): Length {\n    switch (units) {\n      case void 0:\n      case \"px\": return Length.px(value);\n      case \"em\": return Length.em(value);\n      case \"rem\": return Length.rem(value);\n      case \"%\": return Length.pct(value);\n      case \"\": return Length.unitless(value);\n      default: throw new LengthException(\"unknown length units: \" + units);\n    }\n  }\n\n  static fromCssValue(value: CSSStyleValue): Length {\n    if (value instanceof CSSUnitValue) {\n      return Length.create(value.value, value.unit as LengthUnits);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static fromAny(value: AnyLength, defaultUnits?: LengthUnits): Length {\n    if (value === void 0 || value === null || value instanceof Length) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return Length.create(value, defaultUnits);\n    } else if (typeof value === \"string\") {\n      return Length.parse(value, defaultUnits);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): Length | null {\n    if (value.length === 2) {\n      const num = value.getItem(0).numberValue(void 0);\n      const units = value.getItem(1);\n      if (num !== void 0 && isFinite(num) && units instanceof Attr && units.value === Value.extant()) {\n        switch (units.key.value) {\n          case \"px\": return Length.px(num);\n          case \"em\": return Length.em(num);\n          case \"rem\": return Length.rem(num);\n          case \"pct\": return Length.pct(num);\n          default:\n        }\n      }\n    }\n    return null;\n  }\n\n  static parse(string: string, defaultUnits?: LengthUnits): Length {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = LengthParser.parse(input, defaultUnits);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  @Lazy\n  static form(): Form<Length, AnyLength> {\n    return new LengthForm(void 0, Length.zero());\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyLength {\n    return value instanceof Length\n        || typeof value === \"number\"\n        || typeof value === \"string\";\n  }\n\n  /** @hidden */\n  static emUnit(basis?: LengthBasis | number): number {\n    if (typeof basis === \"object\" && typeof basis.emUnit === \"number\") {\n      return basis.emUnit;\n    } else if (typeof basis === \"object\" && basis.emUnit instanceof Node) {\n      let node: Node | null = basis.emUnit;\n      while (node !== null) {\n        if (node instanceof Element) {\n          const fontSize = getComputedStyle(node).fontSize;\n          if (typeof fontSize === \"string\") {\n            return parseFloat(fontSize);\n          }\n        }\n        node = node.parentNode;\n      }\n    }\n    throw new LengthException(\"unknown em unit\");\n  }\n\n  /** @hidden */\n  static remUnit(basis?: LengthBasis | number): number {\n    if (typeof basis === \"object\" && typeof basis.remUnit === \"number\") {\n      return basis.remUnit;\n    } else {\n      const fontSize = getComputedStyle(document.documentElement).fontSize;\n      if (typeof fontSize === \"string\") {\n        return parseFloat(fontSize);\n      }\n    }\n    throw new LengthException(\"unknown rem unit\");\n  }\n\n  /** @hidden */\n  static pctUnit(basis?: LengthBasis | number): number {\n    if (typeof basis === \"number\") {\n      return basis;\n    } else if (typeof basis === \"object\" && typeof basis.pctUnit === \"number\") {\n      return basis.pctUnit;\n    }\n    throw new LengthException(\"unknown percentage unit\");\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {LengthUnits, LengthBasis, Length} from \"./Length\";\n\nexport class PxLength extends Length {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): LengthUnits {\n    return \"px\";\n  }\n\n  pxValue(basis?: LengthBasis | number): number {\n    return this.value;\n  }\n\n  px(basis?: LengthBasis | number): PxLength {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"px\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Length) {\n      const x = this.value;\n      const y = that.pxValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Length) {\n      return Numbers.equivalent(this.value, that.pxValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof PxLength) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(PxLength), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"px\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"px\";\n  }\n\n  @Lazy\n  static zero(): PxLength {\n    return new PxLength(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {LengthUnits, LengthBasis, Length} from \"./Length\";\n\nexport class EmLength extends Length {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): LengthUnits {\n    return \"em\";\n  }\n\n  pxValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.value * Length.emUnit(basis) : 0;\n  }\n\n  emValue(basis?: LengthBasis | number): number {\n    return this.value;\n  }\n\n  em(basis?: LengthBasis | number): EmLength {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"em\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Length) {\n      const x = this.value;\n      const y = that.emValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Length) {\n      return Numbers.equivalent(this.value, that.emValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof EmLength) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(EmLength), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"em\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"em\";\n  }\n\n  @Lazy\n  static zero(): EmLength {\n    return new EmLength(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {LengthUnits, LengthBasis, Length} from \"./Length\";\n\nexport class RemLength extends Length {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): LengthUnits {\n    return \"rem\";\n  }\n\n  pxValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.value * Length.remUnit(basis) : 0;\n  }\n\n  remValue(basis?: LengthBasis | number): number {\n    return this.value;\n  }\n\n  rem(basis?: LengthBasis | number): RemLength {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"rem\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof RemLength) {\n      const x = this.value;\n      const y = that.remValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof RemLength) {\n      return Numbers.equivalent(this.value, that.remValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof RemLength) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(RemLength), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"rem\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"rem\";\n  }\n\n  @Lazy\n  static zero(): RemLength {\n    return new RemLength(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {LengthUnits, LengthBasis, Length} from \"./Length\";\n\nexport class PctLength extends Length {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): LengthUnits {\n    return \"%\";\n  }\n\n  pxValue(basis?: LengthBasis | number): number {\n    return this.value !== 0 ? this.value * Length.pctUnit(basis) / 100 : 0;\n  }\n\n  pctValue(basis?: LengthBasis | number): number {\n    return this.value;\n  }\n\n  pct(basis?: LengthBasis | number): PctLength {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"percent\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Length) {\n      const x = this.value;\n      const y = that.pctValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Length) {\n      return Numbers.equivalent(this.value, that.pctValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof PctLength) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(PctLength), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"pct\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"%\";\n  }\n\n  @Lazy\n  static zero(): PctLength {\n    return new PctLength(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {LengthException} from \"./LengthException\";\nimport {LengthUnits, LengthBasis, Length} from \"./Length\";\n\nexport class UnitlessLength extends Length {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): LengthUnits {\n    return \"\";\n  }\n\n  pxValue(basis?: LengthBasis | number): number {\n    throw new LengthException(\"unitless length\");\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    return null;\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Length) {\n      const x = this.value;\n      const y = that.value;\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Length) {\n      return Numbers.equivalent(this.value, that.value);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof UnitlessLength) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(UnitlessLength), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"unitless\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"\";\n  }\n\n  @Lazy\n  static zero(): UnitlessLength {\n    return new UnitlessLength(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Length} from \"./Length\";\n\n/** @hidden */\nexport const LengthInterpolator = function (l0: Length, l1: Length): Interpolator<Length> {\n  const interpolator = function (u: number): Length {\n    const l0 = interpolator[0];\n    const l1 = interpolator[1];\n    return Length.create(l0.value + u * (l1.value - l0.value), l1.units);\n  } as Interpolator<Length>;\n  Object.setPrototypeOf(interpolator, LengthInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: l0.to(l1.units),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: l1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (l0: Length, l1: Length): Interpolator<Length>;\n\n  /** @hidden */\n  prototype: Interpolator<Length>;\n};\n\nLengthInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {LengthUnits, AnyLength, Length} from \"./Length\";\n\n/** @hidden */\nexport class LengthForm extends Form<Length, AnyLength> {\n  constructor(defaultUnits: LengthUnits | undefined, unit: Length | undefined) {\n    super();\n    Object.defineProperty(this, \"defaultUnits\", {\n      value: defaultUnits,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  declare readonly defaultUnits: LengthUnits | undefined;\n\n  // @ts-ignore\n  declare readonly unit: Length | undefined;\n\n  withUnit(unit: Length | undefined): Form<Length, AnyLength> {\n    if (unit !== this.unit) {\n      return new LengthForm(this.defaultUnits, unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(length: AnyLength): Item {\n    length = Length.fromAny(length, this.defaultUnits);\n    return Text.from(length.toString());\n  }\n\n  cast(item: Item): Length | undefined {\n    const value = item.toValue();\n    let length: Length | null = null;\n    try {\n      length = Length.fromValue(value);\n      if (length !== void 0) {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          length = Length.parse(string, this.defaultUnits);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return length !== null ? length : void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\n/** @hidden */\nexport class LengthParser extends Parser<Length> {\n  private readonly defaultUnits: LengthUnits | undefined;\n  private readonly valueParser: Parser<number> | undefined;\n  private readonly unitsOutput: Output<string> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(defaultUnits?: LengthUnits, valueParser?: Parser<number>,\n              unitsOutput?: Output<string>, step?: number) {\n    super();\n    this.defaultUnits = defaultUnits;\n    this.valueParser = valueParser;\n    this.unitsOutput = unitsOutput;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<Length> {\n    return LengthParser.parse(input, this.defaultUnits, this.valueParser,\n                              this.unitsOutput, this.step);\n  }\n\n  static parse(input: Input, defaultUnits?: LengthUnits, valueParser?: Parser<number>,\n               unitsOutput?: Output<string>, step: number = 1): Parser<Length> {\n    let c = 0;\n    if (step === 1) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseDecimal(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 2;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 2) {\n      unitsOutput = unitsOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 37/*'%'*/)) {\n        input = input.step();\n        unitsOutput.push(c);\n      }\n      if (!input.isEmpty()) {\n        const value = valueParser!.bind();\n        const units = unitsOutput.bind() || defaultUnits;\n        switch (units) {\n          case \"px\": return Parser.done(Length.px(value));\n          case \"em\": return Parser.done(Length.em(value));\n          case \"rem\": return Parser.done(Length.rem(value));\n          case \"%\": return Parser.done(Length.pct(value));\n          case \"\":\n          case void 0: return Parser.done(Length.unitless(value));\n          default: return Parser.error(Diagnostic.message(\"unknown length units: \" + units, input));\n        }\n      }\n    }\n    return new LengthParser(defaultUnits, valueParser, unitsOutput, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Equivalent, Compare, Lazy} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {Attr, Value, Text, Form} from \"@swim/structure\";\nimport {DegAngle} from \"../\"; // forward import\nimport {RadAngle} from \"../\"; // forward import\nimport {GradAngle} from \"../\"; // forward import\nimport {TurnAngle} from \"../\"; // forward import\nimport {AngleInterpolator} from \"../\"; // forward import\nimport {AngleForm} from \"../\"; // forward import\nimport {AngleParser} from \"../\"; // forward import\n\nexport type AngleUnits = \"deg\" | \"rad\" | \"grad\" | \"turn\";\n\nexport type AnyAngle = Angle | string | number;\n\nexport abstract class Angle implements Interpolate<Angle>, HashCode, Equivalent, Compare, Debug {\n  isDefined(): boolean {\n    return isFinite(this.value);\n  }\n\n  abstract readonly value: number;\n\n  abstract readonly units: AngleUnits;\n\n  plus(that: AnyAngle, units: AngleUnits = this.units): Angle {\n    that = Angle.fromAny(that);\n    return Angle.create(this.toValue(units) + that.toValue(units), units);\n  }\n\n  negative(units: AngleUnits = this.units): Angle {\n    return Angle.create(-this.toValue(units), units);\n  }\n\n  minus(that: AnyAngle, units: AngleUnits = this.units): Angle {\n    that = Angle.fromAny(that);\n    return Angle.create(this.toValue(units) - that.toValue(units), units);\n  }\n\n  times(scalar: number, units: AngleUnits = this.units): Angle {\n    return Angle.create(this.toValue(units) * scalar, units);\n  }\n\n  divide(scalar: number, units: AngleUnits = this.units): Angle {\n    return Angle.create(this.toValue(units) / scalar, units);\n  }\n\n  combine(that: AnyAngle, scalar: number = 1, units: AngleUnits = this.units): Angle {\n    that = Angle.fromAny(that);\n    return Angle.create(this.toValue(units) + that.toValue(units) * scalar, units);\n  }\n\n  norm(total: AnyAngle, units: AngleUnits = this.units): Angle {\n    total = Angle.fromAny(total);\n    return Angle.create(this.toValue(units) / total.toValue(units), units);\n  }\n\n  abstract degValue(): number;\n\n  abstract gradValue(): number;\n\n  abstract radValue(): number;\n\n  abstract turnValue(): number;\n\n  deg(): DegAngle {\n    return Angle.deg(this.degValue());\n  }\n\n  rad(): RadAngle {\n    return Angle.rad(this.radValue());\n  }\n\n  grad(): GradAngle {\n    return Angle.grad(this.gradValue());\n  }\n\n  turn(): TurnAngle {\n    return Angle.turn(this.turnValue());\n  }\n\n  toValue(): Value;\n  toValue(units: AngleUnits): number;\n  toValue(units?: AngleUnits): Value | number {\n    if (units === void 0) {\n      return Text.from(this.toString());\n    } else {\n      switch (units) {\n        case \"deg\": return this.degValue();\n        case \"rad\": return this.radValue();\n        case \"grad\": return this.gradValue();\n        case \"turn\": return this.turnValue();\n        default: throw new Error(\"unknown angle units: \" + units);\n      }\n    }\n  }\n\n  to(units: AngleUnits): Angle {\n    switch (units) {\n      case \"deg\": return this.deg();\n      case \"rad\": return this.rad();\n      case \"grad\": return this.grad();\n      case \"turn\": return this.turn();\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  abstract toCssValue(): CSSUnitValue | null;\n\n  interpolateTo(that: Angle): Interpolator<Angle>;\n  interpolateTo(that: unknown): Interpolator<Angle> | null;\n  interpolateTo(that: unknown): Interpolator<Angle> | null {\n    if (that instanceof Angle) {\n      return AngleInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  abstract compareTo(that: unknown): number;\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  static zero(units?: AngleUnits): Angle {\n    switch (units) {\n      case \"deg\": return DegAngle.zero();\n      case void 0:\n      case \"rad\": return RadAngle.zero();\n      case \"grad\": return GradAngle.zero();\n      case \"turn\": return TurnAngle.zero();\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  static deg(value: number): DegAngle {\n    return new DegAngle(value);\n  }\n\n  static rad(value: number): RadAngle {\n    return new RadAngle(value);\n  }\n\n  static grad(value: number): GradAngle {\n    return new GradAngle(value);\n  }\n\n  static turn(value: number): TurnAngle {\n    return new TurnAngle(value);\n  }\n\n  static create(value: number, units?: AngleUnits): Angle {\n    switch (units) {\n      case \"deg\": return Angle.deg(value);\n      case void 0:\n      case \"rad\": return Angle.rad(value);\n      case \"grad\": return Angle.grad(value);\n      case \"turn\": return Angle.turn(value);\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  static fromCssValue(value: CSSStyleValue): Angle {\n    if (value instanceof CSSUnitValue) {\n      return Angle.create(value.value, value.unit as AngleUnits);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static fromAny(value: AnyAngle, defaultUnits?: AngleUnits): Angle {\n    if (value === void 0 || value === null || value instanceof Angle) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return Angle.create(value, defaultUnits);\n    } else if (typeof value === \"string\") {\n      return Angle.parse(value, defaultUnits);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): Angle | null {\n    if (value.length === 2) {\n      const num = value.getItem(0).numberValue();\n      const units = value.getItem(1);\n      if (num !== void 0 && isFinite(num) && units instanceof Attr && units.toValue() === Value.extant()) {\n        switch (units.key.value) {\n          case \"deg\": return Angle.deg(num);\n          case \"rad\": return Angle.rad(num);\n          case \"grad\": return Angle.grad(num);\n          case \"turn\": return Angle.turn(num);\n          default:\n        }\n      }\n    }\n    return null;\n  }\n\n  static parse(string: string, defaultUnits?: AngleUnits): Angle {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = AngleParser.parse(input, defaultUnits);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  @Lazy\n  static form(): Form<Angle, AnyAngle> {\n    return new AngleForm(void 0, Angle.zero());\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyAngle {\n    return value instanceof Angle\n        || typeof value === \"number\"\n        || typeof value === \"string\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class DegAngle extends Angle {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): AngleUnits {\n    return \"deg\";\n  }\n\n  degValue(): number {\n    return this.value;\n  }\n\n  gradValue(): number {\n    return this.value * 10 / 9;\n  }\n\n  radValue(): number {\n    return this.value * Math.PI / 180;\n  }\n\n  turnValue(): number {\n    return this.value / 360;\n  }\n\n  deg(): DegAngle {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"deg\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Angle) {\n      const x = this.value;\n      const y = that.degValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Angle) {\n      return Numbers.equivalent(this.value, that.degValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof DegAngle) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(DegAngle), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"deg\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"deg\";\n  }\n\n  @Lazy\n  static zero(): DegAngle {\n    return new DegAngle(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class RadAngle extends Angle {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): AngleUnits {\n    return \"rad\";\n  }\n\n  degValue(): number {\n    return this.value * 180 / Math.PI;\n  }\n\n  gradValue(): number {\n    return this.value * 200 / Math.PI;\n  }\n\n  radValue(): number {\n    return this.value;\n  }\n\n  turnValue(): number {\n    return this.value / (2 * Math.PI);\n  }\n\n  rad(): RadAngle {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"rad\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Angle) {\n      const x = this.value;\n      const y = that.radValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Angle) {\n      return Numbers.equivalent(this.value, that.radValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof RadAngle) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(RadAngle), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"rad\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"rad\";\n  }\n\n  @Lazy\n  static zero(): RadAngle {\n    return new RadAngle(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class GradAngle extends Angle {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): AngleUnits {\n    return \"grad\";\n  }\n\n  degValue(): number {\n    return this.value * 0.9;\n  }\n\n  gradValue(): number {\n    return this.value;\n  }\n\n  radValue(): number {\n    return this.value * Math.PI / 200;\n  }\n\n  turnValue(): number {\n    return this.value / 400;\n  }\n\n  grad(): GradAngle {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"grad\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Angle) {\n      const x = this.value;\n      const y = that.gradValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Angle) {\n      return Numbers.equivalent(this.value, that.gradValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof GradAngle) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(GradAngle), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"grad\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"grad\";\n  }\n\n  @Lazy\n  static zero(): GradAngle {\n    return new GradAngle(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class TurnAngle extends Angle {\n  constructor(value: number) {\n    super();\n    Object.defineProperty(this, \"value\", {\n      value: value,\n      enumerable: true,\n    });\n  }\n\n  declare readonly value: number;\n\n  get units(): AngleUnits {\n    return \"turn\";\n  }\n\n  degValue(): number {\n    return this.value * 360;\n  }\n\n  gradValue(): number {\n    return this.value * 400;\n  }\n\n  radValue(): number {\n    return this.value * (2 * Math.PI);\n  }\n\n  turnValue(): number {\n    return this.value;\n  }\n\n  turn(): TurnAngle {\n    return this;\n  }\n\n  toCssValue(): CSSUnitValue | null {\n    if (typeof CSSUnitValue !== \"undefined\") {\n      return new CSSUnitValue(this.value, \"turn\");\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof Angle) {\n      const x = this.value;\n      const y = that.turnValue();\n      return x < y ? -1 : x > y ? 1 : isNaN(y) ? (isNaN(x) ? 0 : -1) : isNaN(x) ? 1 : 0;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof Angle) {\n      return Numbers.equivalent(this.value, that.turnValue());\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof TurnAngle) {\n      return this.value === that.value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(TurnAngle), Numbers.hash(this.value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"turn\")\n        .write(40/*'('*/).debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this.value + \"turn\";\n  }\n\n  @Lazy\n  static zero(): TurnAngle {\n    return new TurnAngle(0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Angle} from \"./Angle\";\n\n/** @hidden */\nexport const AngleInterpolator = function (a0: Angle, a1: Angle): Interpolator<Angle> {\n  const interpolator = function (u: number): Angle {\n    const a0 = interpolator[0];\n    const a1 = interpolator[1];\n    return Angle.create(a0.value + u * (a1.value - a0.value), a1.units);\n  } as Interpolator<Angle>;\n  Object.setPrototypeOf(interpolator, AngleInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: a0.to(a1.units),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: a1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (a0: Angle, a1: Angle): Interpolator<Angle>;\n\n  /** @hidden */\n  prototype: Interpolator<Angle>;\n};\n\nAngleInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {AngleUnits, AnyAngle, Angle} from \"./Angle\";\n\n/** @hidden */\nexport class AngleForm extends Form<Angle, AnyAngle> {\n  constructor(defaultUnits: AngleUnits | undefined, unit: Angle | undefined) {\n    super();\n    Object.defineProperty(this, \"defaultUnits\", {\n      value: defaultUnits,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  declare readonly defaultUnits: AngleUnits | undefined;\n\n  // @ts-ignore\n  declare readonly unit: Angle | undefined;\n\n  withUnit(unit: Angle | undefined): Form<Angle, AnyAngle> {\n    if (unit !== this.unit) {\n      return new AngleForm(this.defaultUnits, unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(angle: AnyAngle): Item {\n    angle = Angle.fromAny(angle, this.defaultUnits);\n    return Text.from(angle.toString());\n  }\n\n  cast(item: Item): Angle | undefined {\n    const value = item.toValue();\n    let angle: Angle | null = null;\n    try {\n      angle = Angle.fromValue(value);\n      if (angle === void 0) {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          angle = Angle.parse(string, this.defaultUnits);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return angle !== null ? angle : void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\n/** @hidden */\nexport class AngleParser extends Parser<Angle> {\n  private readonly defaultUnits: AngleUnits | undefined;\n  private readonly valueParser: Parser<number> | undefined;\n  private readonly unitsOutput: Output<string> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(defaultUnits?: AngleUnits, valueParser?: Parser<number>,\n              unitsOutput?: Output<string>, step?: number) {\n    super();\n    this.defaultUnits = defaultUnits;\n    this.valueParser = valueParser;\n    this.unitsOutput = unitsOutput;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<Angle> {\n    return AngleParser.parse(input, this.defaultUnits, this.valueParser,\n                             this.unitsOutput, this.step);\n  }\n\n  static parse(input: Input, defaultUnits?: AngleUnits, valueParser?: Parser<number>,\n               unitsOutput?: Output<string>, step: number = 1): Parser<Angle> {\n    let c = 0;\n    if (step === 1) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseDecimal(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 2;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 2) {\n      unitsOutput = unitsOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        unitsOutput.push(c);\n      }\n      if (!input.isEmpty()) {\n        const value = valueParser!.bind();\n        const units = unitsOutput.bind() || defaultUnits;\n        switch (units) {\n          case \"deg\": return Parser.done(Angle.deg(value));\n          case \"\":\n          case \"rad\": return Parser.done(Angle.rad(value));\n          case \"grad\": return Parser.done(Angle.grad(value));\n          case \"turn\": return Parser.done(Angle.turn(value));\n          default: return Parser.error(Diagnostic.message(\"unknown units: \" + units, input));\n        }\n      }\n    }\n    return new AngleParser(defaultUnits, valueParser, unitsOutput, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {VectorR2Interpolator} from \"../\"; // forward import\n\nexport type AnyVectorR2 = VectorR2 | VectorR2Init;\n\nexport interface VectorR2Init {\n  x: number;\n  y: number;\n}\n\nexport class VectorR2 implements Interpolate<VectorR2>, HashCode, Equivalent, Debug {\n  constructor(x: number, y: number) {\n    Object.defineProperty(this, \"x\", {\n      value: x,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y\", {\n      value: y,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.x) && isFinite(this.y);\n  }\n\n  declare readonly x: number;\n\n  declare readonly y: number;\n\n  plus(that: AnyVectorR2): VectorR2 {\n    return new VectorR2(this.x + that.x, this.y + that.y);\n  }\n\n  negative(): VectorR2 {\n    return new VectorR2(-this.x, -this.y);\n  }\n\n  minus(that: AnyVectorR2): VectorR2 {\n    return new VectorR2(this.x - that.x, this.y - that.y);\n  }\n\n  times(scalar: number): VectorR2 {\n    return new VectorR2(this.x * scalar, this.y * scalar);\n  }\n\n  toAny(): VectorR2Init {\n    return {\n      x: this.x,\n      y: this.y,\n    };\n  }\n\n  interpolateTo(that: VectorR2): Interpolator<VectorR2>;\n  interpolateTo(that: unknown): Interpolator<VectorR2> | null;\n  interpolateTo(that: unknown): Interpolator<VectorR2> | null {\n    if (that instanceof VectorR2) {\n      return VectorR2Interpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof VectorR2) {\n      return Numbers.equivalent(this.x, that.x, epsilon)\n          && Numbers.equivalent(this.y, that.y, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof VectorR2) {\n      return this.x === that.x && this.y === that.y;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(VectorR2),\n        Numbers.hash(this.x)), Numbers.hash(this.y)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"VectorR2\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.x).write(\", \").debug(this.y).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static zero(): VectorR2 {\n    return new VectorR2(0, 0);\n  }\n\n  static of(x: number, y: number): VectorR2 {\n    return new VectorR2(x, y);\n  }\n\n  static fromInit(init: VectorR2Init): VectorR2 {\n    return new VectorR2(init.x, init.y);\n  }\n\n  static fromAny(value: AnyVectorR2): VectorR2 {\n    if (value === void 0 || value === null || value instanceof VectorR2) {\n      return value;\n    } else if (VectorR2.isInit(value)) {\n      return VectorR2.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is VectorR2Init {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as VectorR2Init;\n      return typeof init.x === \"number\"\n          && typeof init.y === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyVectorR2 {\n    return value instanceof VectorR2\n        || VectorR2.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {VectorR2} from \"./VectorR2\";\n\n/** @hidden */\nexport const VectorR2Interpolator = function (v0: VectorR2, v1: VectorR2): Interpolator<VectorR2> {\n  const interpolator = function (u: number): VectorR2 {\n    const v0 = interpolator[0];\n    const v1 = interpolator[1];\n    const x = v0.x + u * (v1.x - v0.x);\n    const y = v0.y + u * (v1.y - v0.y);\n    return new VectorR2(x, y);\n  } as Interpolator<VectorR2>;\n  Object.setPrototypeOf(interpolator, VectorR2Interpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: v0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: v1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (v0: VectorR2, v1: VectorR2): Interpolator<VectorR2>;\n\n  /** @hidden */\n  prototype: Interpolator<VectorR2>;\n};\n\nVectorR2Interpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {R2Function} from \"./R2Function\";\nimport {PointR2Init, PointR2Tuple, PointR2} from \"../\"; // forward import\nimport {SegmentR2Init, SegmentR2} from \"../\"; // forward import\nimport {BoxR2Init, BoxR2} from \"../\"; // forward import\nimport {CircleR2Init, CircleR2} from \"../\"; // forward import\n\nexport type AnyShapeR2 = ShapeR2 | PointR2Init | PointR2Tuple | SegmentR2Init | BoxR2Init | CircleR2Init;\n\nexport abstract class ShapeR2 {\n  abstract readonly xMin: number;\n\n  abstract readonly yMin: number;\n\n  abstract readonly xMax: number;\n\n  abstract readonly yMax: number;\n\n  abstract contains(that: AnyShapeR2): boolean;\n\n  abstract contains(x: number, y: number): boolean;\n\n  abstract intersects(that: AnyShapeR2): boolean;\n\n  union(that: AnyShapeR2): ShapeR2 {\n    that = ShapeR2.fromAny(that);\n    return new BoxR2(Math.min(this.xMin, that.xMin),\n                     Math.min(this.yMin, that.yMin),\n                     Math.max(this.xMax, that.xMax),\n                     Math.max(this.yMax, that.yMax));\n  }\n\n  abstract transform(f: R2Function): ShapeR2;\n\n  get bounds(): BoxR2 {\n    return new BoxR2(this.xMin, this.yMin, this.xMax, this.yMax);\n  }\n\n  static fromAny(value: AnyShapeR2): ShapeR2 {\n    if (value === void 0 || value === null || value instanceof ShapeR2) {\n      return value;\n    } else if (PointR2.isInit(value)) {\n      return PointR2.fromInit(value);\n    } else if (PointR2.isTuple(value)) {\n      return PointR2.fromTuple(value);\n    } else if (SegmentR2.isInit(value)) {\n      return SegmentR2.fromInit(value);\n    } else if (BoxR2.isInit(value)) {\n      return BoxR2.fromInit(value);\n    } else if (CircleR2.isInit(value)) {\n      return CircleR2.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyShapeR2 {\n    return value instanceof ShapeR2\n        || PointR2.isInit(value)\n        || PointR2.isTuple(value)\n        || SegmentR2.isInit(value)\n        || BoxR2.isInit(value)\n        || CircleR2.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyVectorR2, VectorR2} from \"./VectorR2\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {PointR2Interpolator} from \"../\"; // forward import\n\nexport type AnyPointR2 = PointR2 | PointR2Init | PointR2Tuple;\n\nexport interface PointR2Init {\n  x: number;\n  y: number;\n}\n\nexport type PointR2Tuple = [number, number];\n\nexport class PointR2 extends ShapeR2 implements Interpolate<PointR2>, HashCode, Equivalent, Debug {\n  constructor(x: number, y: number) {\n    super();\n    Object.defineProperty(this, \"x\", {\n      value: x,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y\", {\n      value: y,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.x) && isFinite(this.y);\n  }\n\n  declare readonly x: number;\n\n  declare readonly y: number;\n\n  get xMin(): number {\n    return this.x;\n  }\n\n  get yMin(): number {\n    return this.y;\n  }\n\n  get xMax(): number {\n    return this.x;\n  }\n\n  get yMax(): number {\n    return this.y;\n  }\n\n  plus(vector: AnyVectorR2): PointR2 {\n    return new PointR2(this.x + vector.x, this.y + vector.y);\n  }\n\n  minus(vector: VectorR2): PointR2;\n  minus(that: PointR2): VectorR2;\n  minus(that: VectorR2 | PointR2): PointR2 | VectorR2 {\n    if (that instanceof VectorR2) {\n      return new PointR2(this.x - that.x, this.y - that.y);\n    } else {\n      return new VectorR2(this.x - that.x, this.y - that.y);\n    }\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    if (typeof that === \"number\") {\n      return this.x === that && this.y === y!;\n    } else {\n      that = ShapeR2.fromAny(that);\n      if (that instanceof PointR2) {\n        return this.x === that.x && this.y === that.y;\n      } else if (that instanceof ShapeR2) {\n        return this.x <= that.xMin && that.xMax <= this.x\n            && this.y <= that.yMin && that.yMax <= this.y;\n      }\n      return false;\n    }\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    that = ShapeR2.fromAny(that);\n    return (that as ShapeR2).intersects(this);\n  }\n\n  transform(f: R2Function): PointR2 {\n    return new PointR2(f.transformX(this.x, this.y), f.transformY(this.x, this.y));\n  }\n\n  toAny(): PointR2Init {\n    return {\n      x: this.x,\n      y: this.y,\n    };\n  }\n\n  interpolateTo(that: PointR2): Interpolator<PointR2>;\n  interpolateTo(that: unknown): Interpolator<PointR2> | null;\n  interpolateTo(that: unknown): Interpolator<PointR2> | null {\n    if (that instanceof PointR2) {\n      return PointR2Interpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PointR2) {\n      return Numbers.equivalent(this.x, that.x, epsilon)\n          && Numbers.equivalent(this.y, that.y, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PointR2) {\n      return this.x === that.x && this.y === that.y;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(PointR2),\n        Numbers.hash(this.x)), Numbers.hash(this.y)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"PointR2\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.x).write(\", \").debug(this.y).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static origin(): PointR2 {\n    return new PointR2(0, 0);\n  }\n\n  @Lazy\n  static undefined(): PointR2 {\n    return new PointR2(NaN, NaN);\n  }\n\n  static of(x: number, y: number): PointR2 {\n    return new PointR2(x, y);\n  }\n\n  static fromInit(value: PointR2Init): PointR2 {\n    return new PointR2(value.x, value.y);\n  }\n\n  static fromTuple(value: PointR2Tuple): PointR2 {\n    return new PointR2(value[0], value[1]);\n  }\n\n  static fromAny(value: AnyPointR2): PointR2 {\n    if (value === void 0 || value === null || value instanceof PointR2) {\n      return value;\n    } else if (PointR2.isInit(value)) {\n      return PointR2.fromInit(value);\n    } else if (PointR2.isTuple(value)) {\n      return PointR2.fromTuple(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is PointR2Init {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as PointR2Init;\n      return typeof init.x === \"number\"\n          && typeof init.y === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isTuple(value: unknown): value is PointR2Tuple {\n    return Array.isArray(value)\n        && value.length === 2\n        && typeof value[0] === \"number\"\n        && typeof value[1] === \"number\";\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyPointR2 {\n    return value instanceof PointR2\n        || PointR2.isInit(value)\n        || PointR2.isTuple(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {PointR2} from \"./PointR2\";\n\n/** @hidden */\nexport const PointR2Interpolator = function (p0: PointR2, p1: PointR2): Interpolator<PointR2> {\n  const interpolator = function (u: number): PointR2 {\n    const p0 = interpolator[0];\n    const p1 = interpolator[1];\n    const x = p0.x + u * (p1.x - p0.x);\n    const y = p0.y + u * (p1.y - p0.y);\n    return new PointR2(x, y);\n  } as Interpolator<PointR2>;\n  Object.setPrototypeOf(interpolator, PointR2Interpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: p0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: p1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (p0: PointR2, p1: PointR2): Interpolator<PointR2>;\n\n  /** @hidden */\n  prototype: Interpolator<PointR2>;\n};\n\nPointR2Interpolator.prototype = Object.create(Interpolator.prototype);\n"," // Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Equivalent, Equals} from \"@swim/util\";\nimport {AnyOutputSettings, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport {ShapeR2} from \"./ShapeR2\";\nimport type {PointR2} from \"./PointR2\";\nimport type {CurveR2Context} from \"./CurveR2Context\";\nimport {CurveR2Parser} from \"../\"; // forward import\nimport {SegmentR2} from \"../\"; // forward import\nimport {QuadraticCurveR2} from \"../\"; // forward import\nimport {CubicCurveR2} from \"../\"; // forward import\nimport {EllipticCurveR2} from \"../\"; // forward import\n\nexport abstract class CurveR2 extends ShapeR2 implements Equals, Equivalent {\n  abstract interpolateX(u: number): number;\n\n  abstract interpolateY(u: number): number;\n\n  abstract interpolate(u: number): PointR2;\n\n  abstract split(u: number): [CurveR2, CurveR2];\n\n  abstract transform(f: R2Function): CurveR2;\n\n  abstract drawMove(context: CurveR2Context): void;\n\n  abstract drawRest(context: CurveR2Context): void;\n\n  draw(context: CurveR2Context): void {\n    this.drawMove(context);\n    this.drawRest(context);\n  }\n\n  abstract transformDrawMove(context: CurveR2Context, f: R2Function): void;\n\n  abstract transformDrawRest(context: CurveR2Context, f: R2Function): void;\n\n  transformDraw(context: CurveR2Context, f: R2Function): void {\n    this.transformDrawMove(context, f);\n    this.transformDrawRest(context, f);\n  }\n\n  abstract writeMove(output: Output): void;\n\n  abstract writeRest(output: Output): void;\n\n  writePath(output: Output): void {\n    this.writeMove(output);\n    this.writeRest(output);\n  }\n\n  toPathString(outputSettings?: AnyOutputSettings): string {\n    const output = Unicode.stringOutput(outputSettings);\n    this.writePath(output);\n    return output.toString();\n  }\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract equals(that: unknown): boolean;\n\n  static linear(x0: number, y0: number, x1: number, y1: number): CurveR2 {\n    return new SegmentR2(x0, y0, x1, y1);\n  }\n\n  static quadratic(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number): CurveR2 {\n    return new QuadraticCurveR2(x0, y0, x1, y1, x2, y2);\n  }\n\n  static cubic(x0: number, y0: number, x1: number, y1: number,\n               x2: number, y2: number, x3: number, y3: number): CurveR2 {\n    return new CubicCurveR2(x0, y0, x1, y1, x2, y2, x3, y3);\n  }\n\n  static elliptic(cx: number, cy: number, rx: number, ry: number,\n                  phi: number, a0: number, da: number): CurveR2 {\n    return new EllipticCurveR2(cx, cy, rx, ry, phi, a0, da);\n  }\n\n  static parse(string: string): CurveR2 {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = CurveR2Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport type {CurveR2} from \"./CurveR2\";\nimport {SegmentR2Parser} from \"../\"; // forward import\nimport {QuadraticCurveR2Parser} from \"../\"; // forward import\nimport {CubicCurveR2Parser} from \"../\"; // forward import\nimport {EllipticCurveR2Parser} from \"../\"; // forward import\n\n/** @hidden */\nexport class CurveR2Parser extends Parser<CurveR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<CurveR2> {\n    return CurveR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                               this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               command?: number, step: number = 1): Parser<CurveR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 77/*'M'*/ || c === 109/*'m'*/) {\n          input = input.step();\n          command = c;\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(\"moveto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (x0Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x0Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x0Parser = x0Parser.feed(input);\n      }\n      if (x0Parser !== void 0) {\n        if (x0Parser.isDone()) {\n          step = 3;\n        } else if (x0Parser.isError()) {\n          return x0Parser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (y0Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y0Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y0Parser = y0Parser.feed(input);\n      }\n      if (y0Parser !== void 0) {\n        if (y0Parser.isDone()) {\n          step = 5;\n        } else if (y0Parser.isError()) {\n          return y0Parser.asError();\n        }\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        switch (c) {\n          case 76/*'L'*/:\n          case 108/*'l'*/:\n          case 72/*'H'*/:\n          case 104/*'h'*/:\n          case 86/*'V'*/:\n          case 118/*'v'*/:\n            return SegmentR2Parser.parse(input, x0Parser, y0Parser);\n          case 81/*'Q'*/:\n          case 113/*'q'*/:\n            return QuadraticCurveR2Parser.parse(input, x0Parser, y0Parser);\n          case 84/*'T'*/:\n            return QuadraticCurveR2Parser.parse(input, x0Parser, y0Parser,\n                                                x0Parser, y0Parser);\n          case 116/*'t'*/:\n            return QuadraticCurveR2Parser.parse(input, x0Parser, y0Parser,\n                                                Parser.done(0), Parser.done(0));\n          case 67/*'C'*/:\n          case 99/*'c'*/:\n            return CubicCurveR2Parser.parse(input, x0Parser, y0Parser);\n          case 83/*'S'*/:\n            return CubicCurveR2Parser.parse(input, x0Parser, y0Parser,\n                                             x0Parser, y0Parser);\n          case 115/*'s'*/:\n            return CubicCurveR2Parser.parse(input, x0Parser, y0Parser,\n                                             Parser.done(0), Parser.done(0));\n          case 65/*'A'*/:\n          case 97/*'a'*/:\n            return EllipticCurveR2Parser.parse(input, x0Parser, y0Parser);\n          case 44/*','*/:\n            input = input.step();\n          case 43/*'+'*/:\n          case 45/*'-'*/:\n          case 46/*'.'*/:\n          case 48/*'0'*/:\n          case 49/*'1'*/:\n          case 50/*'2'*/:\n          case 51/*'3'*/:\n          case 52/*'4'*/:\n          case 53/*'5'*/:\n          case 54/*'6'*/:\n          case 55/*'7'*/:\n          case 56/*'8'*/:\n          case 57/*'9'*/:\n            switch (command) {\n              case 77/*'M'*/:\n              case 109/*'m'*/:\n                return SegmentR2Parser.parseRest(input, command, x0Parser, y0Parser);\n            }\n          default:\n            return Parser.error(Diagnostic.expected(\"draw command\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    return new CurveR2Parser(x0Parser, y0Parser, command, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {R2Function} from \"./R2Function\";\nimport {CurveR2} from \"./CurveR2\";\n\nexport abstract class BezierCurveR2 extends CurveR2 {\n  abstract transform(f: R2Function): BezierCurveR2;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport type {CurveR2Context} from \"./CurveR2Context\";\nimport {BezierCurveR2} from \"./BezierCurveR2\";\nimport {SegmentR2Interpolator} from \"../\"; // forward import\n\nexport type AnySegmentR2 = SegmentR2 | SegmentR2Init;\n\nexport interface SegmentR2Init {\n  x0: number;\n  y0: number;\n  x1: number;\n  y1: number;\n}\n\nexport class SegmentR2 extends BezierCurveR2 implements Interpolate<SegmentR2>, HashCode, Debug {\n  constructor(x0: number, y0: number, x1: number, y1: number) {\n    super();\n    Object.defineProperty(this, \"x0\", {\n      value: x0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y0\", {\n      value: y0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x1\", {\n      value: x1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y1\", {\n      value: y1,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.x0) && isFinite(this.y0)\n        && isFinite(this.x1) && isFinite(this.y1);\n  }\n\n  declare readonly x0: number;\n\n  declare readonly y0: number;\n\n  declare readonly x1: number;\n\n  declare readonly y1: number;\n\n  get xMin(): number {\n    return Math.min(this.x0, this.x1);\n  }\n\n  get yMin(): number {\n    return Math.min(this.y0, this.y1);\n  }\n\n  get xMax(): number {\n    return Math.max(this.x0, this.x1);\n  }\n\n  get yMax(): number {\n    return Math.max(this.y0, this.y1);\n  }\n\n  interpolateX(u: number): number {\n    return (1.0 - u) * this.x0 + u * this.x1;\n  }\n\n  interpolateY(u: number): number {\n    return (1.0 - u) * this.y0 + u * this.y1;\n  }\n\n  interpolate(u: number): PointR2 {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    return new PointR2(x01, y01);\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    if (typeof that === \"number\") {\n      return SegmentR2.contains(this.x0, this.y0, this.x1, this.y1, that, y!);\n    } else {\n      that = ShapeR2.fromAny(that);\n      if (that instanceof PointR2) {\n        return this.containsPoint(that);\n      } else if (that instanceof SegmentR2) {\n        return this.containsSegment(that);\n      }\n      return false;\n    }\n  }\n\n  /** @hidden */\n  containsPoint(that: PointR2): boolean {\n    return SegmentR2.contains(this.x0, this.y0, this.x1, this.y1, that.x, that.y);\n  }\n\n  /** @hidden */\n  containsSegment(that: SegmentR2): boolean {\n    return SegmentR2.contains(this.x0, this.y0, this.x1, this.y1, that.x0, that.y0)\n        && SegmentR2.contains(this.x0, this.y0, this.x1, this.y1, that.x1, that.y1);\n  }\n\n  /** @hidden */\n  static contains(ax: number, ay: number, bx: number, by: number, cx: number, cy: number): boolean {\n    return (ax <= cx && cx <= bx || bx <= cx && cx <= ax)\n        && (ay <= cy && cy <= by || by <= cy && cy <= ay)\n        && (bx - ax) * (cy - ay) === (cx - ax) * (by - ay);\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    that = ShapeR2.fromAny(that);\n    if (that instanceof PointR2) {\n      return this.intersectsPoint(that);\n    } else if (that instanceof SegmentR2) {\n      return this.intersectsSegment(that);\n    } else {\n      return (that as ShapeR2).intersects(this);\n    }\n    return false;\n  }\n\n  /** @hidden */\n  intersectsPoint(that: PointR2): boolean {\n    return SegmentR2.contains(this.x0, this.y0, this.x1, this.y1, that.x, that.y);\n  }\n\n  /** @hidden */\n  intersectsSegment(that: SegmentR2): boolean {\n    return SegmentR2.intersects(this.x0, this.y0, this.x1 - this.x0, this.y1 - this.y0,\n                                that.x0, that.y0, that.x1 - that.x0, that.y1 - that.y0);\n  }\n\n  /** @hidden */\n  static intersects(px: number, py: number, rx: number, ry: number,\n                    qx: number, qy: number, sx: number, sy: number): boolean {\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const pqr = pqx * ry - pqy * rx;\n    const rs = rx * sy - ry * sx;\n    if (pqr === 0 && rs === 0) { // collinear\n      const rr = rx * rx + ry * ry;\n      const sr = sx * rx + sy * ry;\n      const t0 = (pqx * rx + pqy * ry) / rr;\n      const t1 = t0 + sr / rr;\n      return sr >= 0 ? 0 < t1 && t0 < 1 : 0 < t0 && t1 < 1;\n    } else if (rs === 0) { // parallel\n      return false;\n    } else {\n      const pqs = pqx * sy - pqy * sx;\n      const t = pqs / rs; // (q  p)  s / (r  s)\n      const u = pqr / rs; // (q  p)  r / (r  s)\n      return 0 <= t && t <= 1 && 0 <= u && u <= 1;\n    }\n  }\n\n  split(u: number): [SegmentR2, SegmentR2] {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    const c0 = new SegmentR2(this.x0, this.y0, x01, y01);\n    const c1 = new SegmentR2(x01, y01, this.x1, this.y1);\n    return [c0, c1];\n  }\n\n  transform(f: R2Function): SegmentR2 {\n    return new SegmentR2(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0),\n                         f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1));\n  }\n\n  toAny(): SegmentR2Init {\n    return {\n      x0: this.x0,\n      y0: this.y0,\n      x1: this.x1,\n      y1: this.y1,\n    };\n  }\n\n  drawMove(context: CurveR2Context): void {\n    context.moveTo(this.x0, this.y0);\n  }\n\n  drawRest(context: CurveR2Context): void {\n    context.lineTo(this.x1, this.y1);\n  }\n\n  transformDrawMove(context: CurveR2Context, f: R2Function): void {\n    context.moveTo(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0));\n  }\n\n  transformDrawRest(context: CurveR2Context, f: R2Function): void {\n    context.lineTo(f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1));\n  }\n\n  writeMove(output: Output): void {\n    output.write(77/*'M'*/);\n    Format.displayNumber(this.x0, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y0, output);\n  }\n\n  writeRest(output: Output): void {\n    output.write(76/*'L'*/);\n    Format.displayNumber(this.x1, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y1, output);\n  }\n\n  interpolateTo(that: SegmentR2): Interpolator<SegmentR2>;\n  interpolateTo(that: unknown): Interpolator<SegmentR2> | null;\n  interpolateTo(that: unknown): Interpolator<SegmentR2> | null {\n    if (that instanceof SegmentR2) {\n      return SegmentR2Interpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SegmentR2) {\n      return Numbers.equivalent(this.x0, that.x0, epsilon)\n          && Numbers.equivalent(this.y0, that.y0, epsilon)\n          && Numbers.equivalent(this.x1, that.x1, epsilon)\n          && Numbers.equivalent(this.y1, that.y1, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SegmentR2) {\n      return this.x0 === that.x0 && this.y0 === that.y0\n          && this.x1 === that.x1 && this.y1 === that.y1;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(SegmentR2), Numbers.hash(this.x0)), Numbers.hash(this.y0)),\n        Numbers.hash(this.x1)), Numbers.hash(this.y1)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"SegmentR2\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.x0).write(\", \").debug(this.y0).write(\", \")\n        .debug(this.x1).write(\", \").debug(this.y1).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static of(x0: number, y0: number, x1: number, y1: number): SegmentR2 {\n    return new SegmentR2(x0, y0, x1, y1);\n  }\n\n  static fromInit(value: SegmentR2Init): SegmentR2 {\n    return new SegmentR2(value.x0, value.y0, value.x1, value.y1);\n  }\n\n  static fromAny(value: AnySegmentR2): SegmentR2 {\n    if (value === void 0 || value === null || value instanceof SegmentR2) {\n      return value;\n    } else if (SegmentR2.isInit(value)) {\n      return SegmentR2.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is SegmentR2Init {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as SegmentR2Init;\n      return typeof init.x0 === \"number\"\n          && typeof init.y0 === \"number\"\n          && typeof init.x1 === \"number\"\n          && typeof init.y1 === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnySegmentR2 {\n    return value instanceof SegmentR2\n        || SegmentR2.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {SegmentR2} from \"./SegmentR2\";\n\n/** @hidden */\nexport const SegmentR2Interpolator = function (s0: SegmentR2, s1: SegmentR2): Interpolator<SegmentR2> {\n  const interpolator = function (u: number): SegmentR2 {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const x0 = s0.x0 + u * (s1.x0 - s0.x0);\n    const y0 = s0.y0 + u * (s1.y0 - s0.y0);\n    const x1 = s0.x1 + u * (s1.x1 - s0.x1);\n    const y1 = s0.y1 + u * (s1.y1 - s0.y1);\n    return new SegmentR2(x0, y0, x1, y1);\n  } as Interpolator<SegmentR2>;\n  Object.setPrototypeOf(interpolator, SegmentR2Interpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: SegmentR2, s1: SegmentR2): Interpolator<SegmentR2>;\n\n  /** @hidden */\n  prototype: Interpolator<SegmentR2>;\n};\n\nSegmentR2Interpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {SegmentR2} from \"./SegmentR2\";\n\n/** @hidden */\nexport class SegmentR2Parser extends Parser<SegmentR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly x1Parser: Parser<number> | undefined;\n  private readonly y1Parser: Parser<number> | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.x1Parser = x1Parser;\n    this.y1Parser = y1Parser;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<SegmentR2> {\n    return SegmentR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                                 this.x1Parser, this.y1Parser,\n                                 this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n               command?: number, step: number = 1): Parser<SegmentR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        switch (c) {\n          case 77/*'M'*/:\n          case 109/*'m'*/:\n          case 76/*'L'*/:\n          case 108/*'l'*/:\n            input = input.step();\n            command = c;\n            step = 2;\n            break;\n          case 72/*'H'*/:\n            input = input.step();\n            y1Parser = y0Parser;\n            command = c;\n            step = 2;\n            break;\n          case 104/*'h'*/:\n            input = input.step();\n            y1Parser = Parser.done(0);\n            command = c;\n            step = 2;\n            break;\n          case 86/*'V'*/:\n            input = input.step();\n            x1Parser = x0Parser;\n            command = c;\n            step = 4;\n            break;\n          case 118/*'v'*/:\n            input = input.step();\n            x1Parser = Parser.done(0);\n            command = c;\n            step = 4;\n            break;\n          default:\n            return Parser.error(Diagnostic.expected(\"lineto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (x1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x1Parser = x1Parser.feed(input);\n      }\n      if (x1Parser !== void 0) {\n        if (x1Parser.isDone()) {\n          if (y1Parser === void 0 || !y1Parser.isDone()) {\n            step = 3;\n          } else { // H or h\n            step = 4;\n          }\n        } else if (x1Parser.isError()) {\n          return x1Parser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (y1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y1Parser = y1Parser.feed(input);\n      }\n      if (y1Parser !== void 0) {\n        if (y1Parser.isDone()) {\n          const x0 = x0Parser!.bind();\n          const y0 = y0Parser!.bind();\n          let x1 = x1Parser!.bind();\n          let y1 = y1Parser.bind();\n          if (command === 109/*'m'*/ || command === 108/*'l'*/ ||\n              command === 104/*'h'*/ || command === 118/*'v'*/) {\n            x1 += x0;\n            y1 += y0;\n          }\n          return Parser.done(new SegmentR2(x0, y0, x1, y1));\n        } else if (y1Parser.isError()) {\n          return y1Parser.asError();\n        }\n      }\n    }\n    return new SegmentR2Parser(x0Parser, y0Parser, x1Parser, y1Parser, command, step);\n  }\n\n  static parseRest(input: Input, command?: number, x0Parser?: Parser<number>,\n                   y0Parser?: Parser<number>): Parser<SegmentR2> {\n    let x1Parser: Parser<number> | undefined;\n    let y1Parser: Parser<number> | undefined;\n    let step: number;\n    switch (command) {\n      case 72/*'H'*/:\n        y1Parser = y0Parser;\n        step = 2;\n        break;\n      case 104/*'h'*/:\n        y1Parser = Parser.done(0);\n        step = 2;\n        break;\n      case 86/*'V'*/:\n        x1Parser = x0Parser;\n        step = 4;\n        break;\n      case 118/*'v'*/:\n        x1Parser = Parser.done(0);\n        step = 4;\n        break;\n      default:\n        step = 2;\n    }\n    return this.parse(input, x0Parser, y0Parser, x1Parser, y1Parser, command, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Numbers} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport type {AnyShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport type {CurveR2Context} from \"./CurveR2Context\";\nimport {BezierCurveR2} from \"./BezierCurveR2\";\n\nexport class QuadraticCurveR2 extends BezierCurveR2 implements Debug {\n  constructor(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number) {\n    super();\n    Object.defineProperty(this, \"x0\", {\n      value: x0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y0\", {\n      value: y0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x1\", {\n      value: x1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y1\", {\n      value: y1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x2\", {\n      value: x2,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y2\", {\n      value: y2,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.x0) && isFinite(this.y0)\n        && isFinite(this.x1) && isFinite(this.y1)\n        && isFinite(this.x2) && isFinite(this.y2);\n  }\n\n  declare readonly x0: number;\n\n  declare readonly y0: number;\n\n  declare readonly x1: number;\n\n  declare readonly y1: number;\n\n  declare readonly x2: number;\n\n  declare readonly y2: number;\n\n  get xMin(): number {\n    return Math.min(this.x0, this.x1, this.x2);\n  }\n\n  get yMin(): number {\n    return Math.min(this.y0, this.y1, this.y2);\n  }\n\n  get xMax(): number {\n    return Math.max(this.x0, this.x1, this.x2);\n  }\n\n  get yMax(): number {\n    return Math.max(this.y0, this.y1, this.y2);\n  }\n\n  interpolateX(u: number): number {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const x12 = v * this.x1 + u * this.x2;\n    return v * x01 + u * x12;\n  }\n\n  interpolateY(u: number): number {\n    const v = 1.0 - u;\n    const y01 = v * this.y0 + u * this.y1;\n    const y12 = v * this.y1 + u * this.y2;\n    return v * y01 + u * y12;\n  }\n\n  interpolate(u: number): PointR2 {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    const x12 = v * this.x1 + u * this.x2;\n    const y12 = v * this.y1 + u * this.y2;\n    const x02 = v * x01 + u * x12;\n    const y02 = v * y01 + u * y12;\n    return new PointR2(x02, y02);\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [QuadraticCurveR2, QuadraticCurveR2] {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    const x12 = v * this.x1 + u * this.x2;\n    const y12 = v * this.y1 + u * this.y2;\n    const x02 = v * x01 + u * x12;\n    const y02 = v * y01 + u * y12;\n    const c0 = new QuadraticCurveR2(this.x0, this.y0, x01, y01, x02, y02);\n    const c1 = new QuadraticCurveR2(x02, y02, x12, y12, this.x2, this.y2);\n    return [c0, c1];\n  }\n\n  transform(f: R2Function): QuadraticCurveR2 {\n    return new QuadraticCurveR2(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0),\n                                f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1),\n                                f.transformX(this.x2, this.y2), f.transformY(this.x2, this.y2));\n  }\n\n  drawMove(context: CurveR2Context): void {\n    context.moveTo(this.x0, this.y0);\n  }\n\n  drawRest(context: CurveR2Context): void {\n    context.quadraticCurveTo(this.x1, this.y1, this.x2, this.y2);\n  }\n\n  transformDrawMove(context: CurveR2Context, f: R2Function): void {\n    context.moveTo(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0));\n  }\n\n  transformDrawRest(context: CurveR2Context, f: R2Function): void {\n    context.quadraticCurveTo(f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1),\n                             f.transformX(this.x2, this.y2), f.transformY(this.x2, this.y2));\n  }\n\n  writeMove(output: Output): void {\n    output.write(77/*'M'*/);\n    Format.displayNumber(this.x0, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y0, output);\n  }\n\n  writeRest(output: Output): void {\n    output.write(81/*'Q'*/);\n    Format.displayNumber(this.x1, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y1, output);\n    output.write(44/*','*/)\n    Format.displayNumber(this.x2, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y2, output);\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof QuadraticCurveR2) {\n      return Numbers.equivalent(this.x0, that.x0, epsilon)\n          && Numbers.equivalent(this.y0, that.y0, epsilon)\n          && Numbers.equivalent(this.x1, that.x1, epsilon)\n          && Numbers.equivalent(this.y1, that.y1, epsilon)\n          && Numbers.equivalent(this.x2, that.x2, epsilon)\n          && Numbers.equivalent(this.y2, that.y2, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof QuadraticCurveR2) {\n      return this.x0 === that.x0 && this.y0 === that.y0\n          && this.x1 === that.x1 && this.y1 === that.y1\n          && this.x2 === that.x2 && this.y2 === that.y2;\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output.write(\"CurveR2\").write(46/*'.'*/).write(\"quadratic\").write(40/*'('*/)\n        .debug(this.x0).write(\", \").debug(this.y0).write(\", \")\n        .debug(this.x1).write(\", \").debug(this.y1).write(\", \")\n        .debug(this.x2).write(\", \").debug(this.y2).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {QuadraticCurveR2} from \"./QuadraticCurveR2\";\n\n/** @hidden */\nexport class QuadraticCurveR2Parser extends Parser<QuadraticCurveR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly x1Parser: Parser<number> | undefined;\n  private readonly y1Parser: Parser<number> | undefined;\n  private readonly x2Parser: Parser<number> | undefined;\n  private readonly y2Parser: Parser<number> | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n              x2Parser?: Parser<number>, y2Parser?: Parser<number>,\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.x1Parser = x1Parser;\n    this.y1Parser = y1Parser;\n    this.x2Parser = x2Parser;\n    this.y2Parser = y2Parser;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<QuadraticCurveR2> {\n    return QuadraticCurveR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                                        this.x1Parser, this.y1Parser,\n                                        this.x2Parser, this.y2Parser,\n                                        this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n               x2Parser?: Parser<number>, y2Parser?: Parser<number>,\n               command?: number, step: number = 1): Parser<QuadraticCurveR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        switch (c) {\n          case 81/*'Q'*/:\n          case 113/*'q'*/:\n            input = input.step();\n            command = c;\n            step = 2;\n            break;\n          case 84/*'T'*/:\n          case 116/*'t'*/:\n            input = input.step();\n            command = c;\n            step = 6;\n            break;\n          default:\n            return Parser.error(Diagnostic.expected(\"curveto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (x1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x1Parser = x1Parser.feed(input);\n      }\n      if (x1Parser !== void 0) {\n        if (x1Parser.isDone()) {\n          step = 3;\n        } else if (x1Parser.isError()) {\n          return x1Parser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (y1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y1Parser = y1Parser.feed(input);\n      }\n      if (y1Parser !== void 0) {\n        if (y1Parser.isDone()) {\n          step = 5;\n        } else if (y1Parser.isError()) {\n          return y1Parser.asError();\n        }\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 6;\n      } else if (!input.isEmpty()) {\n        step = 6;\n      }\n    }\n    if (step === 6) {\n      if (x2Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x2Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x2Parser = x2Parser.feed(input);\n      }\n      if (x2Parser !== void 0) {\n        if (x2Parser.isDone()) {\n          step = 7;\n        } else if (x2Parser.isError()) {\n          return x2Parser.asError();\n        }\n      }\n    }\n    if (step === 7) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 8;\n      } else if (!input.isEmpty()) {\n        step = 8;\n      }\n    }\n    if (step === 8) {\n      if (y2Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y2Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y2Parser = y2Parser.feed(input);\n      }\n      if (y2Parser !== void 0) {\n        if (y2Parser.isDone()) {\n          const x0 = x0Parser!.bind();\n          const y0 = y0Parser!.bind();\n          let x1 = x1Parser!.bind();\n          let y1 = y1Parser!.bind();\n          let x2 = x2Parser!.bind();\n          let y2 = y2Parser.bind();\n          if (command === 113/*'q'*/ || command === 116/*'t'*/) {\n            x1 += x0;\n            y1 += y0;\n            x2 += x0;\n            y2 += y0;\n          }\n          return Parser.done(new QuadraticCurveR2(x0, y0, x1, y1, x2, y2));\n        } else if (y2Parser.isError()) {\n          return y2Parser.asError();\n        }\n      }\n    }\n    return new QuadraticCurveR2Parser(x0Parser, y0Parser, x1Parser, y1Parser,\n                                      x2Parser, y2Parser, command, step);\n  }\n\n  static parseRest(input: Input, command?: number, x0Parser?: Parser<number>,\n                   y0Parser?: Parser<number>, x1Parser?: Parser<number>,\n                   y1Parser?: Parser<number>): Parser<QuadraticCurveR2> {\n    const step = command === 84/*'T'*/ || command === 116/*'t'*/ ? 6 : 2;\n    return QuadraticCurveR2Parser.parse(input, x0Parser, y0Parser, x1Parser, y1Parser,\n                                        void 0, void 0, command, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Numbers} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport type {AnyShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport type {CurveR2Context} from \"./CurveR2Context\";\nimport {BezierCurveR2} from \"./BezierCurveR2\";\n\nexport class CubicCurveR2 extends BezierCurveR2 implements Debug {\n  constructor(x0: number, y0: number, x1: number, y1: number,\n              x2: number, y2: number, x3: number, y3: number) {\n    super();\n    Object.defineProperty(this, \"x0\", {\n      value: x0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y0\", {\n      value: y0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x1\", {\n      value: x1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y1\", {\n      value: y1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x2\", {\n      value: x2,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y2\", {\n      value: y2,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x3\", {\n      value: x3,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y3\", {\n      value: y3,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.x0) && isFinite(this.y0)\n        && isFinite(this.x1) && isFinite(this.y1)\n        && isFinite(this.x2) && isFinite(this.y2)\n        && isFinite(this.x3) && isFinite(this.y3);\n  }\n\n  declare readonly x0: number;\n\n  declare readonly y0: number;\n\n  declare readonly x1: number;\n\n  declare readonly y1: number;\n\n  declare readonly x2: number;\n\n  declare readonly y2: number;\n\n  declare readonly x3: number;\n\n  declare readonly y3: number;\n\n  get xMin(): number {\n    return Math.min(this.x0, this.x1, this.x2, this.x3);\n  }\n\n  get yMin(): number {\n    return Math.min(this.y0, this.y1, this.y2, this.y3);\n  }\n\n  get xMax(): number {\n    return Math.max(this.x0, this.x1, this.x2, this.x3);\n  }\n\n  get yMax(): number {\n    return Math.max(this.y0, this.y1, this.y2, this.y3);\n  }\n\n  interpolateX(u: number): number {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const x12 = v * this.x1 + u * this.x2;\n    const x23 = v * this.x2 + u * this.x3;\n    const x02 = v * x01 + u * x12;\n    const x13 = v * x12 + u * x23;\n    return v * x02 + u * x13;\n  }\n\n  interpolateY(u: number): number {\n    const v = 1.0 - u;\n    const y01 = v * this.y0 + u * this.y1;\n    const y12 = v * this.y1 + u * this.y2;\n    const y23 = v * this.y2 + u * this.y3;\n    const y02 = v * y01 + u * y12;\n    const y13 = v * y12 + u * y23;\n    return v * y02 + u * y13;\n  }\n\n  interpolate(u: number): PointR2 {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    const x12 = v * this.x1 + u * this.x2;\n    const y12 = v * this.y1 + u * this.y2;\n    const x23 = v * this.x2 + u * this.x3;\n    const y23 = v * this.y2 + u * this.y3;\n    const x02 = v * x01 + u * x12;\n    const y02 = v * y01 + u * y12;\n    const x13 = v * x12 + u * x23;\n    const y13 = v * y12 + u * y23;\n    const x03 = v * x02 + u * x13;\n    const y03 = v * y02 + u * y13;\n    return new PointR2(x03, y03);\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [CubicCurveR2, CubicCurveR2] {\n    const v = 1.0 - u;\n    const x01 = v * this.x0 + u * this.x1;\n    const y01 = v * this.y0 + u * this.y1;\n    const x12 = v * this.x1 + u * this.x2;\n    const y12 = v * this.y1 + u * this.y2;\n    const x23 = v * this.x2 + u * this.x3;\n    const y23 = v * this.y2 + u * this.y3;\n    const x02 = v * x01 + u * x12;\n    const y02 = v * y01 + u * y12;\n    const x13 = v * x12 + u * x23;\n    const y13 = v * y12 + u * y23;\n    const x03 = v * x02 + u * x13;\n    const y03 = v * y02 + u * y13;\n    const c0 = new CubicCurveR2(this.x0, this.y0, x01, y01, x02, y02, x03, y03);\n    const c1 = new CubicCurveR2(x03, y03, x13, y13, x23, y23, this.x3, this.y3);\n    return [c0, c1];\n  }\n\n  transform(f: R2Function): CubicCurveR2 {\n    return new CubicCurveR2(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0),\n                            f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1),\n                            f.transformX(this.x2, this.y2), f.transformY(this.x2, this.y2),\n                            f.transformX(this.x3, this.y3), f.transformY(this.x3, this.y3));\n  }\n\n  drawMove(context: CurveR2Context): void {\n    context.moveTo(this.x0, this.y0);\n  }\n\n  drawRest(context: CurveR2Context): void {\n    context.bezierCurveTo(this.x1, this.y1, this.x2, this.y2, this.x3, this.y3);\n  }\n\n  transformDrawMove(context: CurveR2Context, f: R2Function): void {\n    context.moveTo(f.transformX(this.x0, this.y0), f.transformY(this.x0, this.y0));\n  }\n\n  transformDrawRest(context: CurveR2Context, f: R2Function): void {\n    context.bezierCurveTo(f.transformX(this.x1, this.y1), f.transformY(this.x1, this.y1),\n                          f.transformX(this.x2, this.y2), f.transformY(this.x2, this.y2),\n                          f.transformX(this.x3, this.y3), f.transformY(this.x3, this.y3));\n  }\n\n  writeMove(output: Output): void {\n    output.write(77/*'M'*/);\n    Format.displayNumber(this.x0, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y0, output);\n  }\n\n  writeRest(output: Output): void {\n    output.write(67/*'C'*/);\n    Format.displayNumber(this.x1, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y1, output);\n    output.write(44/*','*/)\n    Format.displayNumber(this.x2, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y2, output);\n    output.write(44/*','*/)\n    Format.displayNumber(this.x3, output)\n    output.write(44/*','*/)\n    Format.displayNumber(this.y3, output);\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof CubicCurveR2) {\n      return Numbers.equivalent(this.x0, that.x0, epsilon)\n          && Numbers.equivalent(this.y0, that.y0, epsilon)\n          && Numbers.equivalent(this.x1, that.x1, epsilon)\n          && Numbers.equivalent(this.y1, that.y1, epsilon)\n          && Numbers.equivalent(this.x2, that.x2, epsilon)\n          && Numbers.equivalent(this.y2, that.y2, epsilon)\n          && Numbers.equivalent(this.x3, that.x3, epsilon)\n          && Numbers.equivalent(this.y3, that.y3, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof CubicCurveR2) {\n      return this.x0 === that.x0 && this.y0 === that.y0\n          && this.x1 === that.x1 && this.y1 === that.y1\n          && this.x2 === that.x2 && this.y2 === that.y2\n          && this.x3 === that.x3 && this.y3 === that.y3;\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output.write(\"CurveR2\").write(46/*'.'*/).write(\"cubic\").write(40/*'('*/)\n        .debug(this.x0).write(\", \").debug(this.y0).write(\", \")\n        .debug(this.x1).write(\", \").debug(this.y1).write(\", \")\n        .debug(this.x2).write(\", \").debug(this.y2).write(\", \")\n        .debug(this.x3).write(\", \").debug(this.y3).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {CubicCurveR2} from \"./CubicCurveR2\";\n\n/** @hidden */\nexport class CubicCurveR2Parser extends Parser<CubicCurveR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly x1Parser: Parser<number> | undefined;\n  private readonly y1Parser: Parser<number> | undefined;\n  private readonly x2Parser: Parser<number> | undefined;\n  private readonly y2Parser: Parser<number> | undefined;\n  private readonly x3Parser: Parser<number> | undefined;\n  private readonly y3Parser: Parser<number> | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n              x2Parser?: Parser<number>, y2Parser?: Parser<number>,\n              x3Parser?: Parser<number>, y3Parser?: Parser<number>,\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.x1Parser = x1Parser;\n    this.y1Parser = y1Parser;\n    this.x2Parser = x2Parser;\n    this.y2Parser = y2Parser;\n    this.x3Parser = x3Parser;\n    this.y3Parser = y3Parser;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<CubicCurveR2> {\n    return CubicCurveR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                                    this.x1Parser, this.y1Parser,\n                                    this.x2Parser, this.y2Parser,\n                                    this.x3Parser, this.y3Parser,\n                                    this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n               x2Parser?: Parser<number>, y2Parser?: Parser<number>,\n               x3Parser?: Parser<number>, y3Parser?: Parser<number>,\n               command?: number, step: number = 1): Parser<CubicCurveR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        switch (c) {\n          case 67/*'C'*/:\n          case 99/*'c'*/:\n            input = input.step();\n            command = c;\n            step = 2;\n            break;\n          case 83/*'S'*/:\n          case 115/*'s'*/:\n            input = input.step();\n            command = c;\n            step = 6;\n            break;\n          default:\n            return Parser.error(Diagnostic.expected(\"curveto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (x1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x1Parser = x1Parser.feed(input);\n      }\n      if (x1Parser !== void 0) {\n        if (x1Parser.isDone()) {\n          step = 3;\n        } else if (x1Parser.isError()) {\n          return x1Parser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (y1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y1Parser = y1Parser.feed(input);\n      }\n      if (y1Parser !== void 0) {\n        if (y1Parser.isDone()) {\n          step = 5;\n        } else if (y1Parser.isError()) {\n          return y1Parser.asError();\n        }\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 6;\n      } else if (!input.isEmpty()) {\n        step = 6;\n      }\n    }\n    if (step === 6) {\n      if (x2Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x2Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x2Parser = x2Parser.feed(input);\n      }\n      if (x2Parser !== void 0) {\n        if (x2Parser.isDone()) {\n          step = 7;\n        } else if (x2Parser.isError()) {\n          return x2Parser.asError();\n        }\n      }\n    }\n    if (step === 7) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 8;\n      } else if (!input.isEmpty()) {\n        step = 8;\n      }\n    }\n    if (step === 8) {\n      if (y2Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y2Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y2Parser = y2Parser.feed(input);\n      }\n      if (y2Parser !== void 0) {\n        if (y2Parser.isDone()) {\n          step = 9;\n        } else if (y2Parser.isError()) {\n          return y2Parser.asError();\n        }\n      }\n    }\n    if (step === 9) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 10;\n      } else if (!input.isEmpty()) {\n        step = 10;\n      }\n    }\n    if (step === 10) {\n      if (x3Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x3Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x3Parser = x3Parser.feed(input);\n      }\n      if (x3Parser !== void 0) {\n        if (x3Parser.isDone()) {\n          step = 11;\n        } else if (x3Parser.isError()) {\n          return x3Parser.asError();\n        }\n      }\n    }\n    if (step === 11) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 12;\n      } else if (!input.isEmpty()) {\n        step = 12;\n      }\n    }\n    if (step === 12) {\n      if (y3Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y3Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y3Parser = y3Parser.feed(input);\n      }\n      if (y3Parser !== void 0) {\n        if (y3Parser.isDone()) {\n          const x0 = x0Parser!.bind();\n          const y0 = y0Parser!.bind();\n          let x1 = x1Parser!.bind();\n          let y1 = y1Parser!.bind();\n          let x2 = x2Parser!.bind();\n          let y2 = y2Parser!.bind();\n          let x3 = x3Parser!.bind();\n          let y3 = y3Parser.bind();\n          if (command === 99/*'c'*/ || command === 115/*'s'*/) {\n            x1 += x0;\n            y1 += y0;\n            x2 += x0;\n            y2 += y0;\n            x3 += x0;\n            y3 += y0;\n          }\n          return Parser.done(new CubicCurveR2(x0, y0, x1, y1, x2, y2, x3, y3));\n        } else if (y3Parser.isError()) {\n          return y3Parser.asError();\n        }\n      }\n    }\n    return new CubicCurveR2Parser(x0Parser, y0Parser, x1Parser, y1Parser,\n                                  x2Parser, y2Parser, x3Parser, y3Parser,\n                                  command, step);\n  }\n\n  static parseRest(input: Input, command?: number, x0Parser?: Parser<number>,\n                   y0Parser?: Parser<number>, x1Parser?: Parser<number>,\n                   y1Parser?: Parser<number>): Parser<CubicCurveR2> {\n    const step = command === 83/*'S'*/ || command === 115/*'s'*/ ? 6 : 2;\n    return CubicCurveR2Parser.parse(input, x0Parser, y0Parser, x1Parser, y1Parser,\n                                    void 0, void 0, void 0, void 0, command, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Numbers} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport type {AnyShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport type {CurveR2Context} from \"./CurveR2Context\";\nimport {CurveR2} from \"./CurveR2\";\n\nexport class EllipticCurveR2 extends CurveR2 implements Debug {\n  constructor(cx: number, cy: number, rx: number, ry: number,\n              phi: number, a0: number, da: number) {\n    super();\n    Object.defineProperty(this, \"cx\", {\n      value: cx,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"cy\", {\n      value: cy,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rx\", {\n      value: rx,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ry\", {\n      value: ry,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"phi\", {\n      value: phi,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"a0\", {\n      value: a0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"da\", {\n      value: da,\n      enumerable: true,\n    });\n  }\n\n  declare readonly cx: number;\n\n  declare readonly cy: number;\n\n  declare readonly rx: number;\n\n  declare readonly ry: number;\n\n  declare readonly phi: number;\n\n  declare readonly a0: number;\n\n  declare readonly da: number;\n\n  get xMin(): number {\n    return this.cx - Math.max(this.rx, this.ry);\n  }\n\n  get yMin(): number {\n    return this.cy - Math.max(this.rx, this.ry);\n  }\n\n  get xMax(): number {\n    return this.cx + Math.max(this.rx, this.ry);\n  }\n\n  get yMax(): number {\n    return this.cy + Math.max(this.rx, this.ry);\n  }\n\n  interpolateX(u: number): number {\n    const a0 = this.a0;\n    const da = this.da;\n    const a = a0 + u * da;\n    const dx = this.rx * Math.cos(a);\n    const dy = this.ry * Math.sin(a);\n    const phi = this.phi;\n    if (phi === 0) {\n      return this.cx + dx;\n    } else {\n      return this.cx + dx * Math.cos(phi) - dy * Math.sin(phi);\n    }\n  }\n\n  interpolateY(u: number): number {\n    const a0 = this.a0;\n    const da = this.da;\n    const a = a0 + u * da;\n    const dx = this.rx * Math.cos(a);\n    const dy = this.ry * Math.sin(a);\n    const phi = this.phi;\n    if (phi === 0) {\n      return this.cy + dy;\n    } else {\n      return this.cy + dx * Math.sin(phi) + dy * Math.cos(phi);\n    }\n  }\n\n  interpolate(u: number): PointR2 {\n    const a0 = this.a0;\n    const da = this.da;\n    const a = a0 + u * da;\n    const dx = this.rx * Math.cos(a);\n    const dy = this.ry * Math.sin(a);\n    const phi = this.phi;\n    if (phi === 0) {\n      return new PointR2(this.cx + dx, this.cy + dy);\n    } else {\n      return new PointR2(this.cx + dx * Math.cos(phi) - dy * Math.sin(phi),\n                         this.cy + dx * Math.sin(phi) + dy * Math.cos(phi));\n    }\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [EllipticCurveR2, EllipticCurveR2] {\n    const a0 = this.a0;\n    const da = this.da;\n    const a = a0 + u * da;\n    const c0 = new EllipticCurveR2(this.cx, this.cy, this.rx, this.ry,\n                                   this.phi, a0, a - a0);\n    const c1 = new EllipticCurveR2(this.cx, this.cy, this.rx, this.ry,\n                                   this.phi, a, a0 + da - a);\n    return [c0, c1];\n  }\n\n  transform(f: R2Function): EllipticCurveR2 {\n    const a0 = this.a0;\n    const a1 = a0 + this.da;\n    const a0x = Math.cos(a0);\n    const a0y = Math.sin(a0);\n    const a1x = Math.cos(a1);\n    const a1y = Math.sin(a1);\n    const b0x = f.transformX(a0x, a0y);\n    const b0y = f.transformY(a0x, a0y);\n    const b1x = f.transformX(a1x, a1y);\n    const b1y = f.transformY(a1x, a1y);\n    const b0 = Math.atan2(b0y, b0x);\n    const b1 = Math.atan2(b1y, b1x);\n    return new EllipticCurveR2(f.transformX(this.cx, this.cy), f.transformY(this.cx, this.cy),\n                               f.transformX(this.rx, this.ry), f.transformY(this.rx, this.ry),\n                               this.phi, b0, b1 - b0);\n  }\n\n  drawMove(context: CurveR2Context): void {\n    const {x0, y0} = this.toEndpoints();\n    context.moveTo(x0, y0);\n  }\n\n  drawRest(context: CurveR2Context): void {\n    context.ellipse(this.cx, this.cy, this.rx, this.ry, this.phi,\n                    this.a0, this.a0 + this.da, this.da < 0);\n  }\n\n  transformDrawMove(context: CurveR2Context, f: R2Function): void {\n    const {x0, y0} = this.toEndpoints();\n    context.moveTo(f.transformX(x0, y0), f.transformY(x0, y0));\n  }\n\n  transformDrawRest(context: CurveR2Context, f: R2Function): void {\n    const a0 = this.a0;\n    const a1 = a0 + this.da;\n    const a0x = Math.cos(a0);\n    const a0y = Math.sin(a0);\n    const a1x = Math.cos(a1);\n    const a1y = Math.sin(a1);\n    const b0x = f.transformX(a0x, a0y);\n    const b0y = f.transformY(a0x, a0y);\n    const b1x = f.transformX(a1x, a1y);\n    const b1y = f.transformY(a1x, a1y);\n    const b0 = Math.atan2(b0y, b0x);\n    const b1 = Math.atan2(b1y, b1x);\n    context.ellipse(f.transformX(this.cx, this.cy), f.transformY(this.cx, this.cy),\n                    f.transformX(this.rx, this.ry), f.transformY(this.rx, this.ry),\n                    this.phi, b0, b1, b1 - b0 < 0);\n  }\n\n  writeMove(output: Output): void {\n    const {x0, y0} = this.toEndpoints();\n    output.write(77/*'M'*/);\n    Format.displayNumber(x0, output)\n    output.write(44/*','*/)\n    Format.displayNumber(y0, output);\n  }\n\n  writeRest(output: Output): void {\n    const {rx, ry, phi, large, sweep, x1, y1} = this.toEndpoints();\n    output.write(65/*'A'*/);\n    Format.displayNumber(rx, output)\n    output.write(44/*','*/)\n    Format.displayNumber(ry, output);\n    output.write(32/*' '*/)\n    Format.displayNumber(phi, output)\n    output.write(32/*' '*/)\n    output.write(large ? 49/*'1'*/ : 48/*'0'*/);\n    output.write(44/*','*/)\n    output.write(sweep ? 49/*'1'*/ : 48/*'0'*/);\n    output.write(32/*' '*/)\n    Format.displayNumber(x1, output);\n    output.write(44/*','*/)\n    Format.displayNumber(y1, output);\n  }\n\n  toEndpoints(): {x0: number, y0: number, rx: number, ry: number, phi: number,\n                  large: boolean, sweep: boolean, x1: number, y1: number} {\n    const cx = this.cx;\n    const cy = this.cy;\n    const rx = this.rx;\n    const ry = this.ry;\n    const phi = this.phi;\n    const a0 = this.a0;\n    const da = this.da;\n    const a1 = a0 + da;\n\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const cosA0 = Math.cos(a0);\n    const sinA0 = Math.sin(a0);\n    const cosA1 = Math.cos(a1);\n    const sinA1 = Math.sin(a1);\n    const x0 = cosPhi * rx * cosA0 - sinPhi * ry * sinA0 + cx;\n    const y0 = sinPhi * rx * cosA0 + cosPhi * ry * sinA0 + cy;\n    const x1 = cosPhi * rx * cosA1 - sinPhi * ry * sinA1 + cx;\n    const y1 = sinPhi * rx * cosA1 + cosPhi * ry * sinA1 + cy;\n    const large = Math.abs(da) > Math.PI;\n    const sweep = da > 0;\n    return {x0, y0, rx, ry, phi, large, sweep, x1, y1};\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof EllipticCurveR2) {\n      return Numbers.equivalent(this.cx, that.cx, epsilon)\n          && Numbers.equivalent(this.cy, that.cy, epsilon)\n          && Numbers.equivalent(this.rx, that.rx, epsilon)\n          && Numbers.equivalent(this.ry, that.ry, epsilon)\n          && Numbers.equivalent(this.phi, that.phi, epsilon)\n          && Numbers.equivalent(this.a0, that.a0, epsilon)\n          && Numbers.equivalent(this.da, that.da, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof EllipticCurveR2) {\n      return this.cx === that.cx && this.cy === that.cy\n          && this.rx === that.rx && this.ry === that.ry\n          && this.phi === that.phi && this.a0 === that.a0\n          && this.da === that.da;\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output.write(\"CurveR2\").write(46/*'.'*/).write(\"elliptic\").write(40/*'('*/)\n        .debug(this.cx).write(\", \").debug(this.cy).write(\", \")\n        .debug(this.rx).write(\", \").debug(this.ry).write(\", \")\n        .debug(this.phi).write(\", \").debug(this.a0).write(\", \")\n        .debug(this.da).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static fromEndpoints(x0: number, y0: number, rx: number, ry: number, phi: number,\n                       large: boolean, sweep: boolean, x1: number, y1: number): EllipticCurveR2 {\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const x0p =  cosPhi * ((x0 - x1) / 2) + sinPhi * ((y0 - y1) / 2);\n    const y0p = -sinPhi * ((x0 - x1) / 2) + cosPhi * ((y0 - y1) / 2);\n\n    const rx2 = rx * rx;\n    const ry2 = ry * ry;\n    const x0p2 = x0p * x0p;\n    const y0p2 = y0p * y0p;\n    let sp = Math.sqrt((rx2 * ry2 - rx2 * y0p2 - ry2 * x0p2) / (rx2 * y0p2 + ry2 * x0p2));\n    if (large === sweep) {\n      sp = -sp;\n    }\n    const cxp =  sp * rx * y0p / ry;\n    const cyp = -sp * ry * x0p / rx;\n    const cx = cosPhi * cxp - sinPhi * cyp + (x0 + x1) / 2;\n    const cy = sinPhi * cxp + cosPhi * cyp + (y0 + y1) / 2;\n\n    function angle(ux: number, uy: number, vx: number, vy: number): number {\n      const uv = ux * vx + uy * vy;\n      const uu = ux * ux + uy * uy;\n      const vv = vx * vx + vy * vy;\n      let a = Math.acos(uv / (Math.sqrt(uu) * Math.sqrt(vv)));\n      if (ux * vy - uy * vx < 0) {\n        a = -a;\n      }\n      return a;\n    }\n    const a0 = angle(1, 0, (x0p - cxp) / rx, (y0p - cyp) / ry);\n    let da = angle((x0p - cxp) / rx, (y0p - cyp) / ry, (-x0p - cxp) / rx, (-y0p - cyp) / ry) % (2 * Math.PI);\n    if (!sweep && da > 0) {\n      da -= 2 * Math.PI;\n    } else if (sweep && da < 0) {\n      da += 2 * Math.PI;\n    }\n\n    return new EllipticCurveR2(cx, cy, rx, ry, phi, a0, da);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {EllipticCurveR2} from \"./EllipticCurveR2\";\n\n/** @hidden */\nexport class EllipticCurveR2Parser extends Parser<EllipticCurveR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly rxParser: Parser<number> | undefined;\n  private readonly ryParser: Parser<number> | undefined;\n  private readonly phiParser: Parser<number> | undefined;\n  private readonly large: boolean | undefined;\n  private readonly sweep: boolean | undefined;\n  private readonly x1Parser: Parser<number> | undefined;\n  private readonly y1Parser: Parser<number> | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              rxParser?: Parser<number>, ryParser?: Parser<number>,\n              phiParser?: Parser<number>, large?: boolean, sweep?: boolean,\n              x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.rxParser = rxParser;\n    this.ryParser = ryParser;\n    this.phiParser = phiParser;\n    this.large = large;\n    this.sweep = sweep;\n    this.x1Parser = x1Parser;\n    this.y1Parser = y1Parser;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<EllipticCurveR2> {\n    return EllipticCurveR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                                       this.rxParser, this.ryParser,\n                                       this.phiParser, this.large, this.sweep,\n                                       this.x1Parser, this.y1Parser,\n                                       this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               rxParser?: Parser<number>, ryParser?: Parser<number>,\n               phiParser?: Parser<number>, large?: boolean, sweep?: boolean,\n               x1Parser?: Parser<number>, y1Parser?: Parser<number>,\n               command?: number, step: number = 1): Parser<EllipticCurveR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        switch (c) {\n          case 65/*'A'*/:\n          case 97/*'a'*/:\n            input = input.step();\n            command  = c;\n            step = 2;\n            break;\n          default:\n            return Parser.error(Diagnostic.expected(\"arcto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (rxParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          rxParser = Base10.parseDecimal(input);\n        }\n      } else {\n        rxParser = rxParser.feed(input);\n      }\n      if (rxParser !== void 0) {\n        if (rxParser.isDone()) {\n          step = 3;\n        } else if (rxParser.isError()) {\n          return rxParser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (ryParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          ryParser = Base10.parseDecimal(input);\n        }\n      } else {\n        ryParser = ryParser.feed(input);\n      }\n      if (ryParser !== void 0) {\n        if (ryParser.isDone()) {\n          step = 5;\n        } else if (ryParser.isError()) {\n          return ryParser.asError();\n        }\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 6;\n      } else if (!input.isEmpty()) {\n        step = 6;\n      }\n    }\n    if (step === 6) {\n      if (phiParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          phiParser = Base10.parseDecimal(input);\n        }\n      } else {\n        phiParser = phiParser.feed(input);\n      }\n      if (phiParser !== void 0) {\n        if (phiParser.isDone()) {\n          step = 7;\n        } else if (phiParser.isError()) {\n          return phiParser.asError();\n        }\n      }\n    }\n    if (step === 7) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 8;\n      } else if (!input.isEmpty()) {\n        step = 8;\n      }\n    }\n    if (step === 8) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 48/*'0'*/) {\n          input = input.step();\n          large = false;\n          step = 9;\n        } else if (c === 49/*'1'*/) {\n          input = input.step();\n          large = true;\n          step = 9;\n        } else {\n          return Parser.error(Diagnostic.expected(\"flag\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 9) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 10;\n      } else if (!input.isEmpty()) {\n        step = 10;\n      }\n    }\n    if (step === 10) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 48/*'0'*/) {\n          input = input.step();\n          sweep = false;\n          step = 11;\n        } else if (c === 49/*'1'*/) {\n          input = input.step();\n          sweep = true;\n          step = 11;\n        } else {\n          return Parser.error(Diagnostic.expected(\"flag\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 11) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 12;\n      } else if (!input.isEmpty()) {\n        step = 12;\n      }\n    }\n    if (step === 12) {\n      if (x1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x1Parser = x1Parser.feed(input);\n      }\n      if (x1Parser !== void 0) {\n        if (x1Parser.isDone()) {\n          step = 13;\n        } else if (x1Parser.isError()) {\n          return x1Parser.asError();\n        }\n      }\n    }\n    if (step === 13) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 14;\n      } else if (!input.isEmpty()) {\n        step = 14;\n      }\n    }\n    if (step === 14) {\n      if (y1Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y1Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y1Parser = y1Parser.feed(input);\n      }\n      if (y1Parser !== void 0) {\n        if (y1Parser.isDone()) {\n          const x0 = x0Parser!.bind();\n          const y0 = y0Parser!.bind();\n          const rx = rxParser!.bind();\n          const ry = ryParser!.bind();\n          const phi = phiParser!.bind() * Math.PI / 180;\n          let x1 = x1Parser!.bind();\n          let y1 = y1Parser.bind();\n          if (command === 97/*'a'*/) {\n            x1 += x0;\n            y1 += y0;\n          }\n          return Parser.done(EllipticCurveR2.fromEndpoints(x0, y0, rx, ry, phi, large!, sweep!, x1, y1));\n        } else if (y1Parser.isError()) {\n          return y1Parser.asError();\n        }\n      }\n    }\n    return new EllipticCurveR2Parser(x0Parser, y0Parser, rxParser, ryParser,\n                                     phiParser, large, sweep, x1Parser, y1Parser,\n                                     command, step);\n  }\n\n  static parseRest(input: Input, command?: number, x0Parser?: Parser<number>,\n                   y0Parser?: Parser<number>): Parser<EllipticCurveR2> {\n    return EllipticCurveR2Parser.parse(input, x0Parser, y0Parser, void 0, void 0, void 0,\n                                       void 0, void 0, void 0, void 0, command, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays} from \"@swim/util\";\nimport {\n  Debug,\n  Format,\n  AnyOutputSettings,\n  Output,\n  Parser,\n  Diagnostic,\n  Unicode,\n} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport type {AnyShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport {CurveR2} from \"./CurveR2\";\nimport type {SplineR2Context} from \"./SplineR2Context\";\nimport {SplineR2Builder} from \"../\"; // forward import\nimport {SplineR2Parser} from \"../\"; // forward import\nimport {BoxR2} from \"../\"; // forward import\n\nexport class SplineR2 extends CurveR2 implements Debug {\n  constructor(curves: ReadonlyArray<CurveR2>, closed: boolean) {\n    super();\n    Object.defineProperty(this, \"curves\", {\n      value: curves,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"closed\", {\n      value: closed,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"pathString\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly curves: ReadonlyArray<CurveR2>;\n\n  /** @hidden */\n  declare readonly closed: boolean;\n\n  isDefined(): boolean {\n    return this.curves.length !== 0;\n  }\n\n  isClosed(): boolean {\n    return this.closed;\n  }\n\n  get xMin(): number {\n    return this.bounds.xMin;\n  }\n\n  get yMin(): number {\n    return this.bounds.yMin;\n  }\n\n  get xMax(): number {\n    return this.bounds.xMax;\n  }\n\n  get yMax(): number {\n    return this.bounds.yMax;\n  }\n\n  interpolateX(u: number): number {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolateX(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolateY(u: number): number {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolateY(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolate(u: number): PointR2 {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolate(v);\n    } else {\n      return new PointR2(NaN, NaN);\n    }\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [SplineR2, SplineR2] {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [c0, c1] = curves[k]!.split(v);\n      const curves0 = new Array<CurveR2>(k + 1);\n      const curves1 = new Array<CurveR2>(n - k);\n      for (let i = 0; i < k; i += 1) {\n        curves0[i] = curves[i]!;\n      }\n      curves0[k] = c0;\n      curves1[0] = c1;\n      for (let i = k + 1; i < n; i += 1) {\n        curves1[i - k] = curves[i]!;\n      }\n      return [new SplineR2(curves0, false), new SplineR2(curves1, false)];\n    } else {\n      return [SplineR2.empty(), SplineR2.empty()];\n    }\n  }\n\n  subdivide(u: number): SplineR2 {\n    const oldCurves = this.curves;\n    const n = oldCurves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [c0, c1] = oldCurves[k]!.split(v);\n      const newCurves = new Array<CurveR2>(n + 1);\n      for (let i = 0; i < k; i += 1) {\n        newCurves[i] = oldCurves[i]!;\n      }\n      newCurves[k] = c0;\n      newCurves[k + 1] = c1;\n      for (let i = k + 1; i < n; i += 1) {\n        newCurves[i + 1] = oldCurves[i]!;\n      }\n      return new SplineR2(newCurves, this.closed);\n    } else {\n      return SplineR2.empty();\n    }\n  }\n\n  transform(f: R2Function): SplineR2 {\n    const oldCurves = this.curves;\n    const n = oldCurves.length;\n    if (n > 0) {\n      const newCurves = new Array<CurveR2>(n);\n      for (let i = 0; i < n; i += 1) {\n        newCurves[i] = oldCurves[i]!.transform(f);\n      }\n      return new SplineR2(newCurves, this.closed);\n    } else {\n      return SplineR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: BoxR2 | null;\n\n  get bounds(): BoxR2 {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let xMin = Infinity;\n      let yMin = Infinity;\n      let xMax = -Infinity;\n      let yMax = -Infinity;\n      const curves = this.curves;\n      for (let i = 0, n = curves.length; i < n; i += 1) {\n        const curve = curves[i]!;\n        xMin = Math.min(xMin, curve.xMin);\n        yMin = Math.min(yMin, curve.yMin);\n        xMax = Math.max(curve.xMax, xMax);\n        yMax = Math.max(curve.yMax, yMax);\n      }\n      boundingBox = new BoxR2(xMin, yMin, xMax, yMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  drawMove(context: SplineR2Context): void {\n    const curves = this.curves;\n    if (curves.length !== 0) {\n      curves[0]!.drawMove(context);\n    }\n  }\n\n  drawRest(context: SplineR2Context): void {\n    const curves = this.curves;\n    const closed = this.closed;\n    const n = curves.length - (closed && context.closePath !== void 0 ? 1 : 0);\n    for (let i = 0; i < n; i += 1) {\n      curves[i]!.drawRest(context);\n    }\n    if (closed && context.closePath !== void 0) {\n      context.closePath();\n    }\n  }\n\n  transformDrawMove(context: SplineR2Context, f: R2Function): void {\n    const curves = this.curves;\n    if (curves.length !== 0) {\n      curves[0]!.transformDrawMove(context, f);\n    }\n  }\n\n  transformDrawRest(context: SplineR2Context, f: R2Function): void {\n    const curves = this.curves;\n    const closed = this.closed;\n    const n = curves.length - (closed && context.closePath !== void 0 ? 1 : 0);\n    for (let i = 0; i < n; i += 1) {\n      curves[i]!.transformDrawRest(context, f);\n    }\n    if (closed && context.closePath !== void 0) {\n      context.closePath();\n    }\n  }\n\n  writeMove(output: Output): void {\n    const curves = this.curves;\n    if (curves.length !== 0) {\n      curves[0]!.writeMove(output);\n    }\n  }\n\n  writeRest(output: Output): void {\n    const curves = this.curves;\n    const closed = this.closed;\n    const n = curves.length - (closed ? 1 : 0);\n    for (let i = 0; i < n; i += 1) {\n      curves[i]!.writeRest(output);\n    }\n    if (closed) {\n      output.write(90/*'Z'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly pathString: string | undefined;\n\n  toPathString(outputSettings?: AnyOutputSettings): string {\n    let pathString: string | undefined;\n    if (outputSettings !== void 0 || (pathString = this.pathString, pathString === void 0)) {\n      const output = Unicode.stringOutput(outputSettings);\n      this.writePath(output);\n      pathString = output.bind();\n      if (outputSettings === void 0) {\n        Object.defineProperty(this, \"pathString\", {\n          value: pathString,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    }\n    return pathString;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SplineR2) {\n      return Arrays.equivalent(this.curves, that.curves, epsilon)\n          && this.closed === that.closed;\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SplineR2) {\n      return Arrays.equal(this.curves, that.curves)\n          && this.closed === that.closed;\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const curves = this.curves;\n    const n = curves.length;\n    output = output.write(\"SplineR2\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else if (n !== 0) {\n      output = output.write(this.closed ? \"closed\" : \"open\").write(40/*'('*/);\n      output = output.debug(curves[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(curves[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static empty(): SplineR2 {\n    return new SplineR2([], false);\n  }\n\n  static open(...curves: CurveR2[]): SplineR2 {\n    return new SplineR2(curves, false);\n  }\n\n  static closed(...curves: CurveR2[]): SplineR2 {\n    return new SplineR2(curves, true);\n  }\n\n  static builder(): SplineR2Builder {\n    return new SplineR2Builder();\n  }\n\n  static parse(string: string): SplineR2 {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = SplineR2Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {CurveR2} from \"./CurveR2\";\nimport {SegmentR2} from \"./SegmentR2\";\nimport {QuadraticCurveR2} from \"./QuadraticCurveR2\";\nimport {CubicCurveR2} from \"./CubicCurveR2\";\nimport {EllipticCurveR2} from \"./EllipticCurveR2\";\nimport type {SplineR2Context} from \"./SplineR2Context\";\nimport {SplineR2} from \"./SplineR2\";\n\nexport class SplineR2Builder implements SplineR2Context {\n  /** @hidden */\n  curves: CurveR2[];\n  /** @hidden */\n  closed: boolean;\n  /** @hidden */\n  aliased: boolean;\n  /** @hidden */\n  x0: number;\n  /** @hidden */\n  y0: number;\n  /** @hidden */\n  x: number;\n  /** @hidden */\n  y: number;\n\n  constructor() {\n    this.curves = [];\n    this.closed = false;\n    this.aliased = false;\n    this.x0 = 0;\n    this.y0 = 0;\n    this.x = 0;\n    this.y = 0;\n  }\n\n  private dealias(): void {\n    if (this.aliased) {\n      this.curves = this.curves.slice(0);\n      this.aliased = false;\n    }\n  }\n\n  moveTo(x: number, y: number): void {\n    if (this.aliased) {\n      this.curves = [];\n      this.aliased = false;\n    } else {\n      this.curves.length = 0;\n    }\n    this.closed = false;\n    this.x0 = x;\n    this.y0 = y;\n    this.x = x;\n    this.y = y;\n  }\n\n  closePath(): void {\n    this.dealias();\n    this.curves.push(new SegmentR2(this.x, this.y, this.x0, this.y0));\n    this.closed = true;\n    this.x = this.x0;\n    this.y = this.y0;\n  }\n\n  lineTo(x: number, y: number): void {\n    this.dealias();\n    this.curves.push(new SegmentR2(this.x, this.y, x, y));\n    this.x = x;\n    this.y = y;\n  }\n\n  quadraticCurveTo(x1: number, y1: number, x: number, y: number): void {\n    this.dealias();\n    this.curves.push(new QuadraticCurveR2(this.x, this.y, x1, y1, x, y));\n    this.x = x;\n    this.y = y;\n  }\n\n  bezierCurveTo(x1: number, y1: number, x2: number, y2: number, x: number, y: number): void {\n    this.dealias();\n    this.curves.push(new CubicCurveR2(this.x, this.y, x1, y1, x2, y2, x, y));\n    this.x = x;\n    this.y = y;\n  }\n\n  arcTo(x1: number, y1: number, x2: number, y2: number, r: number): void {\n    this.dealias();\n    const x0 = this.x;\n    const y0 = this.y;\n    const dx01 = x1 - x0;\n    const dy01 = y1 - y0;\n    const dx12 = x2 - x1;\n    const dy12 = y2 - y1;\n    const a0 = Math.atan2(dy01, dx01) - Math.PI / 2;\n    const a1 = Math.atan2(dy12, dx12) - Math.PI / 2;\n    const da = a1 - a0;\n    const r0x = Math.cos(a0);\n    const r0y = Math.sin(a0);\n    const r1x = Math.cos(a1);\n    const r1y = Math.sin(a1);\n    const r0x0 = x0 - r0x;\n    const r0y0 = y0 - r0y;\n    const r0x1 = x1 - r0x;\n    const r0y1 = y1 - r0y;\n    const r1x1 = x1 - r1x;\n    const r1y1 = y1 - r1y;\n    const r1x2 = x2 - r1x;\n    const r1y2 = y2 - r1y;\n    const u = SplineR2Builder.intersection(r0x0, r0y0, r0x1 - r0x0, r0y1 - r0y0,\n                                           r1x1, r1y1, r1x2 - r1x1, r1y2 - r1y1);\n    const cx = r0x0 + u * (r0x1 - r0x0);\n    const cy = r0y0 + u * (r0y1 - r0y0);\n    this.curves.push(new EllipticCurveR2(cx, cy, r, r, 0, a0, da));\n    this.x = x2;\n    this.y = y2;\n  }\n\n  private static intersection(px: number, py: number, rx: number, ry: number,\n                              qx: number, qy: number, sx: number, sy: number): number {\n    const pqx = qx - px;\n    const pqy = qy - py;\n    const pqr = pqx * ry - pqy * rx;\n    const rs = rx * sy - ry * sx;\n    if (pqr === 0 && rs === 0) { // collinear\n      const rr = rx * rx + ry * ry;\n      const sr = sx * rx + sy * ry;\n      const t0 = (pqx * rx + pqy * ry) / rr;\n      const t1 = t0 + sr / rr;\n      if (sr >= 0 ? 0 < t1 && t0 < 1 : 0 < t0 && t1 < 1) {\n        return t0;\n      } else {\n        return NaN;\n      }\n    } else if (rs === 0) { // parallel\n      return NaN;\n    } else {\n      const pqs = pqx * sy - pqy * sx;\n      const t = pqs / rs; // (q  p)  s / (r  s)\n      const u = pqr / rs; // (q  p)  r / (r  s)\n      if (0 <= t && t <= 1 && 0 <= u && u <= 1) {\n        return t;\n      } else {\n        return NaN;\n      }\n    }\n  }\n\n  arc(cx: number, cy: number, r: number, a0: number, a1: number, ccw: boolean = false): void {\n    this.dealias();\n    let da = a1 - a0;\n    if (ccw === true && da > 0) {\n      da -= 2 * Math.PI;\n    } else if (ccw === false && da < 0) {\n      da += 2 * Math.PI;\n    }\n    const curve = new EllipticCurveR2(cx, cy, r, r, 0, a0, da);\n    this.curves.push(curve);\n    const {x, y} = curve.interpolate(1);\n    this.x = x;\n    this.y = y;\n  }\n\n  ellipse(cx: number, cy: number, rx: number, ry: number, phi: number, a0: number, a1: number, ccw?: boolean): void {\n    this.dealias();\n    let da = a1 - a0;\n    if (ccw === true && da > 0) {\n      da -= 2 * Math.PI;\n    } else if (ccw === false && da < 0) {\n      da += 2 * Math.PI;\n    }\n    const curve = new EllipticCurveR2(cx, cy, rx, ry, phi, a0, da);\n    this.curves.push(curve);\n    const {x, y} = curve.interpolate(1);\n    this.x = x;\n    this.y = y;\n  }\n\n  rect(x: number, y: number, w: number, h: number): void {\n    this.dealias();\n    this.curves.push(new SegmentR2(x, y, x + w, y),\n                     new SegmentR2(x + w, y, x + w, y + h),\n                     new SegmentR2(x + w, y + h, x, y + h),\n                     new SegmentR2(x, y + h, x, y));\n    this.x = x;\n    this.y = y;\n  }\n\n  bind(): SplineR2 {\n    this.aliased = true;\n    return new SplineR2(this.curves, this.closed);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport type {CurveR2} from \"./CurveR2\";\nimport {SegmentR2} from \"./SegmentR2\";\nimport {SegmentR2Parser} from \"./SegmentR2Parser\";\nimport {QuadraticCurveR2} from \"./QuadraticCurveR2\";\nimport {QuadraticCurveR2Parser} from \"./QuadraticCurveR2Parser\";\nimport {CubicCurveR2} from \"./CubicCurveR2\";\nimport {CubicCurveR2Parser} from \"./CubicCurveR2Parser\";\nimport {EllipticCurveR2Parser} from \"./EllipticCurveR2Parser\";\nimport {SplineR2} from \"./SplineR2\";\n\n/** @hidden */\nexport class SplineR2Parser extends Parser<SplineR2> {\n  private readonly x0Parser: Parser<number> | undefined;\n  private readonly y0Parser: Parser<number> | undefined;\n  private readonly xParser: Parser<number> | undefined;\n  private readonly yParser: Parser<number> | undefined;\n  private readonly curveParser: Parser<CurveR2> | undefined;\n  private readonly curves: CurveR2[] | undefined;\n  private readonly command: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n              xParser?: Parser<number>, yParser?: Parser<number>,\n              curveParser?: Parser<CurveR2>, curves?: CurveR2[],\n              command?: number, step?: number) {\n    super();\n    this.x0Parser = x0Parser;\n    this.y0Parser = y0Parser;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.curveParser = curveParser;\n    this.curves = curves;\n    this.command = command;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<SplineR2> {\n    return SplineR2Parser.parse(input, this.x0Parser, this.y0Parser,\n                                this.xParser, this.yParser,\n                                this.curveParser, this.curves,\n                                this.command, this.step);\n  }\n\n  static parse(input: Input, x0Parser?: Parser<number>, y0Parser?: Parser<number>,\n               xParser?: Parser<number>, yParser?: Parser<number>,\n               curveParser?: Parser<CurveR2>, curves?: CurveR2[],\n               command?: number, step: number = 1): Parser<SplineR2> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 77/*'M'*/ || c === 109/*'m'*/) {\n          input = input.step();\n          command = c;\n          step = 2;\n        } else {\n          return Parser.error(Diagnostic.expected(\"moveto\", input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      if (x0Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          x0Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        x0Parser = x0Parser.feed(input);\n      }\n      if (x0Parser !== void 0) {\n        if (x0Parser.isDone()) {\n          xParser = x0Parser;\n          step = 3;\n        } else if (x0Parser.isError()) {\n          return x0Parser.asError();\n        }\n      }\n    }\n    if (step === 3) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 4;\n      } else if (!input.isEmpty()) {\n        step = 4;\n      }\n    }\n    if (step === 4) {\n      if (y0Parser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          y0Parser = Base10.parseDecimal(input);\n        }\n      } else {\n        y0Parser = y0Parser.feed(input);\n      }\n      if (y0Parser !== void 0) {\n        if (y0Parser.isDone()) {\n          yParser = y0Parser;\n          step = 5;\n        } else if (y0Parser.isError()) {\n          return y0Parser.asError();\n        }\n      }\n    }\n    do {\n      if (step === 5) {\n        if (curveParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input = input.step();\n          }\n          if (input.isCont()) {\n            const prevCurve = curves !== void 0 && curves.length !== 0 ? curves[curves.length - 1] : null;\n            switch (c) {\n              case 76/*'L'*/:\n              case 108/*'l'*/:\n              case 72/*'H'*/:\n              case 104/*'h'*/:\n              case 86/*'V'*/:\n              case 118/*'v'*/:\n                curveParser = SegmentR2Parser.parse(input, xParser, yParser);\n                command = c;\n                break;\n              case 81/*'Q'*/:\n              case 113/*'q'*/:\n                curveParser = QuadraticCurveR2Parser.parse(input, xParser, yParser);\n                command = c;\n                break;\n              case 84/*'T'*/:\n                if (prevCurve instanceof QuadraticCurveR2) {\n                  const dx = prevCurve.x2 - prevCurve.x1;\n                  const dy = prevCurve.y2 - prevCurve.y1;\n                  const x1 = xParser!.bind() + dx;\n                  const y1 = yParser!.bind() + dy;\n                  curveParser = QuadraticCurveR2Parser.parse(input, xParser, yParser,\n                                                             Parser.done(x1), Parser.done(y1));\n                } else {\n                  curveParser = QuadraticCurveR2Parser.parse(input, xParser, yParser,\n                                                             xParser, yParser);\n                }\n                command = c;\n                break;\n              case 116/*'t'*/:\n                if (prevCurve instanceof QuadraticCurveR2) {\n                  const dx = prevCurve.x2 - prevCurve.x1;\n                  const dy = prevCurve.y2 - prevCurve.y1;\n                  curveParser = QuadraticCurveR2Parser.parse(input, xParser, yParser,\n                                                             Parser.done(dx), Parser.done(dy));\n                } else {\n                  curveParser = QuadraticCurveR2Parser.parse(input, xParser, yParser,\n                                                             Parser.done(0), Parser.done(0));\n                }\n                command = c;\n                break;\n              case 67/*'C'*/:\n              case 99/*'c'*/:\n                curveParser = CubicCurveR2Parser.parse(input, xParser, yParser);\n                command = c;\n                break;\n              case 83/*'S'*/:\n                if (prevCurve instanceof CubicCurveR2) {\n                  const dx = prevCurve.x3 - prevCurve.x2;\n                  const dy = prevCurve.y3 - prevCurve.y2;\n                  const x1 = xParser!.bind() + dx;\n                  const y1 = yParser!.bind() + dy;\n                  curveParser = CubicCurveR2Parser.parse(input, xParser, yParser,\n                                                         Parser.done(x1), Parser.done(y1));\n                } else {\n                  curveParser = CubicCurveR2Parser.parse(input, xParser, yParser,\n                                                         xParser, yParser);\n                }\n                command = c;\n                break;\n              case 115/*'s'*/:\n                if (prevCurve instanceof CubicCurveR2) {\n                  const dx = prevCurve.x3 - prevCurve.x2;\n                  const dy = prevCurve.y3 - prevCurve.y2;\n                  curveParser = CubicCurveR2Parser.parse(input, xParser, yParser,\n                                                         Parser.done(dx), Parser.done(dy));\n                } else {\n                  curveParser = CubicCurveR2Parser.parse(input, xParser, yParser,\n                                                         Parser.done(0), Parser.done(0));\n                }\n                command = c;\n                break;\n              case 65/*'A'*/:\n              case 97/*'a'*/:\n                curveParser = EllipticCurveR2Parser.parse(input, xParser, yParser);\n                command = c;\n                break;\n              case 90/*'Z'*/:\n              case 122/*'z'*/:\n                input = input.step();\n                if (curves === void 0) {\n                  curves = [];\n                }\n                curves.push(new SegmentR2(xParser!.bind(), yParser!.bind(),\n                                          x0Parser!.bind(), y0Parser!.bind()));\n                return Parser.done(new SplineR2(curves, true));\n              case 44/*','*/:\n                input = input.step();\n              case 43/*'+'*/:\n              case 45/*'-'*/:\n              case 46/*'.'*/:\n              case 48/*'0'*/:\n              case 49/*'1'*/:\n              case 50/*'2'*/:\n              case 51/*'3'*/:\n              case 52/*'4'*/:\n              case 53/*'5'*/:\n              case 54/*'6'*/:\n              case 55/*'7'*/:\n              case 56/*'8'*/:\n              case 57/*'9'*/:\n                switch (command) {\n                  case 77/*'M'*/:\n                  case 109/*'m'*/:\n                  case 76/*'L'*/:\n                  case 108/*'l'*/:\n                  case 72/*'H'*/:\n                  case 104/*'h'*/:\n                  case 86/*'V'*/:\n                  case 118/*'v'*/:\n                    curveParser = SegmentR2Parser.parseRest(input, command, xParser, yParser);\n                    break;\n                  case 81/*'Q'*/:\n                  case 113/*'q'*/:\n                    curveParser = QuadraticCurveR2Parser.parseRest(input, command, xParser, yParser);\n                    break;\n                  case 84/*'T'*/:\n                    if (prevCurve instanceof QuadraticCurveR2) {\n                      const dx = prevCurve.x2 - prevCurve.x1;\n                      const dy = prevCurve.y2 - prevCurve.y1;\n                      const x1 = xParser!.bind() + dx;\n                      const y1 = yParser!.bind() + dy;\n                      curveParser = QuadraticCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                     Parser.done(x1), Parser.done(y1));\n                    } else {\n                      curveParser = QuadraticCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                     xParser, yParser);\n                    }\n                    break;\n                  case 116/*'t'*/:\n                    if (prevCurve instanceof QuadraticCurveR2) {\n                      const dx = prevCurve.x2 - prevCurve.x1;\n                      const dy = prevCurve.y2 - prevCurve.y1;\n                      curveParser = QuadraticCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                     Parser.done(dx), Parser.done(dy));\n                    } else {\n                      curveParser = QuadraticCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                     Parser.done(0), Parser.done(0));\n                    }\n                    break;\n                  case 67/*'C'*/:\n                  case 99/*'c'*/:\n                    curveParser = CubicCurveR2Parser.parseRest(input, command, xParser, yParser);\n                    break;\n                  case 83/*'S'*/:\n                    if (prevCurve instanceof CubicCurveR2) {\n                      const dx = prevCurve.x3 - prevCurve.x2;\n                      const dy = prevCurve.y3 - prevCurve.y2;\n                      const x1 = xParser!.bind() + dx;\n                      const y1 = yParser!.bind() + dy;\n                      curveParser = CubicCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                 Parser.done(x1), Parser.done(y1));\n                    } else {\n                      curveParser = CubicCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                 xParser, yParser);\n                    }\n                    break;\n                  case 115/*'s'*/:\n                    if (prevCurve instanceof CubicCurveR2) {\n                      const dx = prevCurve.x3 - prevCurve.x2;\n                      const dy = prevCurve.y3 - prevCurve.y2;\n                      curveParser = CubicCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                 Parser.done(dx), Parser.done(dy));\n                    } else {\n                      curveParser = CubicCurveR2Parser.parseRest(input, command, xParser, yParser,\n                                                                 Parser.done(0), Parser.done(0));\n                    }\n                    break;\n                  case 65/*'A'*/:\n                  case 97/*'a'*/:\n                    curveParser = EllipticCurveR2Parser.parseRest(input, command, xParser, yParser);\n                    break;\n                  default:\n                    if (curves !== void 0) {\n                      return Parser.done(new SplineR2(curves, false));\n                    } else {\n                      return Parser.done(SplineR2.empty());\n                    }\n                }\n                break;\n              default:\n                if (curves !== void 0) {\n                  return Parser.done(new SplineR2(curves, false));\n                } else {\n                  return Parser.done(SplineR2.empty());\n                }\n            }\n          } else if (!input.isEmpty()) {\n            if (curves !== void 0) {\n              return Parser.done(new SplineR2(curves, false));\n            } else {\n              return Parser.done(SplineR2.empty());\n            }\n          }\n        } else {\n          curveParser = curveParser.feed(input);\n        }\n        if (curveParser !== void 0) {\n          if (curveParser.isDone()) {\n            const curve = curveParser.bind();\n            curveParser = void 0;\n            if (curves === void 0) {\n              curves = [];\n            }\n            curves.push(curve);\n            xParser = Parser.done(curve.interpolateX(1));\n            yParser = Parser.done(curve.interpolateY(1));\n            continue;\n          } else if (curveParser.isError()) {\n            return curveParser.asError();\n          }\n        }\n      }\n      break;\n    } while (true);\n    return new SplineR2Parser(x0Parser, y0Parser, xParser, yParser,\n                              curveParser, curves, command, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, Equals, Arrays} from \"@swim/util\";\nimport {\n  Debug,\n  Format,\n  AnyOutputSettings,\n  OutputSettings,\n  Output,\n  Parser,\n  Diagnostic,\n  Unicode,\n} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport type {CurveR2} from \"./CurveR2\";\nimport {SplineR2} from \"./SplineR2\";\nimport type {PathR2Context} from \"./PathR2Context\";\nimport {PathR2Builder} from \"../\"; // forward import\nimport {PathR2Parser} from \"../\"; // forward import\nimport {BoxR2} from \"../\"; // forward import\n\nexport type AnyPathR2 = PathR2 | string;\n\nexport class PathR2 extends ShapeR2 implements Equals, Equivalent, Debug {\n  constructor(splines: ReadonlyArray<SplineR2>) {\n    super();\n    Object.defineProperty(this, \"splines\", {\n      value: splines,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"pathString\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly splines: ReadonlyArray<SplineR2>;\n\n  isDefined(): boolean {\n    return this.splines.length !== 0;\n  }\n\n  get xMin(): number {\n    return this.bounds.xMin;\n  }\n\n  get yMin(): number {\n    return this.bounds.yMin;\n  }\n\n  get xMax(): number {\n    return this.bounds.xMax;\n  }\n\n  get yMax(): number {\n    return this.bounds.yMax;\n  }\n\n  interpolateX(u: number): number {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolateX(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolateY(u: number): number {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolateY(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolate(u: number): PointR2 {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolate(v);\n    } else {\n      return new PointR2(NaN, NaN);\n    }\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [PathR2, PathR2] {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [s0, s1] = splines[k]!.split(v);\n      const splines0 = new Array<SplineR2>(k + 1);\n      const splines1 = new Array<SplineR2>(n - k);\n      for (let i = 0; i < k; i += 1) {\n        splines0[i] = splines[i]!;\n      }\n      splines0[k] = s0;\n      splines1[0] = s1;\n      for (let i = k + 1; i < n; i += 1) {\n        splines1[i - k] = splines[i]!;\n      }\n      return [new PathR2(splines0), new PathR2(splines1)];\n    } else {\n      return [PathR2.empty(), PathR2.empty()];\n    }\n  }\n\n  subdivide(u: number): PathR2 {\n    const oldSplines = this.splines;\n    const n = oldSplines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const newSplines = new Array<SplineR2>(n);\n      for (let i = 0; i < k; i += 1) {\n        newSplines[i] = oldSplines[i]!;\n      }\n      newSplines[k] = oldSplines[k]!.subdivide(v);\n      for (let i = k + 1; i < n; i += 1) {\n        newSplines[i] = oldSplines[i]!;\n      }\n      return new PathR2(newSplines);\n    } else {\n      return PathR2.empty();\n    }\n  }\n\n  transform(f: R2Function): PathR2 {\n    const oldSplines = this.splines;\n    const n = oldSplines.length;\n    if (n > 0) {\n      const newSplines = new Array<SplineR2>(n);\n      for (let i = 0; i < n; i += 1) {\n        newSplines[i] = oldSplines[i]!.transform(f);\n      }\n      return new PathR2(newSplines);\n    } else {\n      return PathR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: BoxR2 | null;\n\n  get bounds(): BoxR2 {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let xMin = Infinity;\n      let yMin = Infinity;\n      let xMax = -Infinity;\n      let yMax = -Infinity;\n      const splines = this.splines;\n      for (let i = 0, n = splines.length; i < n; i += 1) {\n        const spline = splines[i]!;\n        xMin = Math.min(xMin, spline.xMin);\n        yMin = Math.min(yMin, spline.yMin);\n        xMax = Math.max(spline.xMax, xMax);\n        yMax = Math.max(spline.yMax, yMax);\n      }\n      boundingBox = new BoxR2(xMin, yMin, xMax, yMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  draw(context: PathR2Context): void {\n    const splines = this.splines;\n    for (let i = 0, n = splines.length; i < n; i += 1) {\n      splines[i]!.draw(context);\n    }\n  }\n\n  transformDraw(context: PathR2Context, f: R2Function): void {\n    const splines = this.splines;\n    for (let i = 0, n = splines.length; i < n; i += 1) {\n      splines[i]!.transformDraw(context, f);\n    }\n  }\n\n  writePath(output: Output): void {\n    const splines = this.splines;\n    const n = splines.length;\n    if (output.settings === OutputSettings.standard()) {\n      for (let i = 0; i < n; i += 1) {\n        output.write(splines[i]!.toPathString()); // write memoized subpath strings\n      }\n    } else {\n      for (let i = 0; i < n; i += 1) {\n        splines[i]!.writePath(output);\n      }\n    }\n  }\n\n  /** @hidden */\n  declare readonly pathString: string | undefined;\n\n  toPathString(outputSettings?: AnyOutputSettings): string {\n    let pathString: string | undefined;\n    if (outputSettings !== void 0 || (pathString = this.pathString, pathString === void 0)) {\n      const output = Unicode.stringOutput(outputSettings);\n      this.writePath(output);\n      pathString = output.bind();\n      if (outputSettings === void 0) {\n        Object.defineProperty(this, \"pathString\", {\n          value: pathString,\n          enumerable: true,\n          configurable: true,\n        });\n      }\n    }\n    return pathString;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PathR2) {\n      return Arrays.equivalent(this.splines, that.splines, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof PathR2) {\n      return Arrays.equal(this.splines, that.splines);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const splines = this.splines;\n    const n = splines.length;\n    output = output.write(\"PathR2\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else if (n === 1) {\n      const spline = splines[0]!;\n      output = output.write(spline.closed ? \"closed\" : \"open\").write(40/*'('*/);\n      const curves = spline.curves;\n      const m = curves.length;\n      if (m !== 0) {\n        output = output.debug(curves[0]!);\n        for (let i = 1; i < m; i += 1) {\n          output = output.write(\", \").debug(curves[i]!);\n        }\n      }\n    } else {\n      output = output.write(\"of\").write(40/*'('*/);\n      output = output.debug(splines[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(splines[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toAttributeString(): string {\n    return this.toPathString();\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static empty(): PathR2 {\n    return new PathR2([]);\n  }\n\n  static of(...splines: SplineR2[]): PathR2 {\n    return new PathR2(splines);\n  }\n\n  static open(...curves: CurveR2[]): PathR2 {\n    return new PathR2([new SplineR2(curves, false)]);\n  }\n\n  static closed(...curves: CurveR2[]): PathR2 {\n    return new PathR2([new SplineR2(curves, true)]);\n  }\n\n  static fromAny(value: AnyPathR2 | AnyShapeR2): PathR2 {\n    if (value === void 0 || value === null || value instanceof PathR2) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return PathR2.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static builder(): PathR2Builder {\n    return new PathR2Builder();\n  }\n\n  static parse(string: string): PathR2 {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = PathR2Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {SplineR2} from \"./SplineR2\";\nimport {SplineR2Builder} from \"./SplineR2Builder\";\nimport type {PathR2Context} from \"./PathR2Context\";\nimport {PathR2} from \"./PathR2\";\n\nexport class PathR2Builder implements PathR2Context {\n  /** @hidden */\n  splines: SplineR2[];\n  /** @hidden */\n  builder: SplineR2Builder | null;\n\n  constructor() {\n    this.splines = [];\n    this.builder = null;\n  }\n\n  moveTo(x: number, y: number): void {\n    let builder = this.builder;\n    if (builder !== null) {\n      const spline = builder.bind();\n      if (spline.isDefined()) {\n        this.splines.push(spline);\n      }\n    }\n    builder = new SplineR2Builder();\n    this.builder = builder;\n    builder.moveTo(x, y);\n  }\n\n  closePath(): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.closePath();\n    } else {\n      throw new Error();\n    }\n  }\n\n  lineTo(x: number, y: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.lineTo(x, y);\n    } else {\n      throw new Error();\n    }\n  }\n\n  quadraticCurveTo(x1: number, y1: number, x: number, y: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.quadraticCurveTo(x1, y1, x, y);\n    } else {\n      throw new Error();\n    }\n  }\n\n  bezierCurveTo(x1: number, y1: number, x2: number, y2: number, x: number, y: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.bezierCurveTo(x1, y1, x2, y2, x, y);\n    } else {\n      throw new Error();\n    }\n  }\n\n  arcTo(x1: number, y1: number, x2: number, y2: number, r: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.arcTo(x1, y1, x2, y2, r);\n    } else {\n      throw new Error();\n    }\n  }\n\n  arc(cx: number, cy: number, r: number, a0: number, a1: number, ccw?: boolean): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.arc(cx, cy, r, a0, a1, ccw);\n    } else {\n      throw new Error();\n    }\n  }\n\n  ellipse(cx: number, cy: number, rx: number, ry: number, phi: number, a0: number, a1: number, ccw?: boolean): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.ellipse(cx, cy, rx, ry, phi, a0, a1, ccw);\n    } else {\n      throw new Error();\n    }\n  }\n\n  rect(x: number, y: number, w: number, h: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.rect(x, y, w, h);\n    } else {\n      throw new Error();\n    }\n  }\n\n  bind(): PathR2 {\n    const splines = this.splines.slice(0);\n    const builder = this.builder;\n    if (builder !== null) {\n      const spline = builder.bind();\n      if (spline.isDefined()) {\n        splines.push(spline);\n      }\n    }\n    return new PathR2(splines);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {SplineR2} from \"./SplineR2\";\nimport {SplineR2Parser} from \"./SplineR2Parser\";\nimport {PathR2} from \"./PathR2\";\n\n/** @hidden */\nexport class PathR2Parser extends Parser<PathR2> {\n  private readonly splineParser: Parser<SplineR2> | undefined;\n  private readonly splines: SplineR2[] | undefined;\n  private readonly step: number | undefined;\n\n  constructor(splineParser?: Parser<SplineR2>, splines?: SplineR2[], step?: number) {\n    super();\n    this.splineParser = splineParser;\n    this.splines = splines;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<PathR2> {\n    return PathR2Parser.parse(input, this.splineParser, this.splines, this.step);\n  }\n\n  static parse(input: Input, splineParser?: Parser<SplineR2>,\n               splines?: SplineR2[], step: number = 1): Parser<PathR2> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        if (splineParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input = input.step();\n          }\n          if (input.isCont()) {\n            switch (c) {\n              case 77/*'M'*/:\n              case 109/*'m'*/:\n                splineParser = SplineR2Parser.parse(input);\n                break;\n              case 110/*'n'*/:\n                step = 2;\n                break;\n              default:\n                if (splines !== void 0) {\n                  return Parser.done(new PathR2(splines));\n                } else {\n                  return Parser.done(PathR2.empty());\n                }\n            }\n          } else if (!input.isEmpty()) {\n            if (splines !== void 0) {\n              return Parser.done(new PathR2(splines));\n            } else {\n              return Parser.done(PathR2.empty());\n            }\n          }\n        } else {\n          splineParser = splineParser.feed(input);\n        }\n        if (splineParser !== void 0) {\n          if (splineParser.isDone()) {\n            const spline = splineParser.bind();\n            splineParser = void 0;\n            if (spline.isDefined()) {\n              if (splines === void 0) {\n                splines = [];\n              }\n              splines.push(spline);\n            }\n            continue;\n          } else if (splineParser.isError()) {\n            return splineParser.asError();\n          }\n        }\n      }\n      break;\n    } while (true);\n    if (step >= 2 && step <= 5) {\n      do {\n        if (input.isCont()) {\n          if (input.head() === \"none\".charCodeAt(step - 2)) {\n            input = input.step();\n            if (step < 5) {\n              step += 1;\n              continue;\n            } else {\n              return Parser.done(PathR2.empty());\n            }\n          } else {\n            return Parser.error(Diagnostic.expected(\"none\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n        break;\n      } while (true);\n    }\n    return new PathR2Parser(splineParser, splines, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport {SegmentR2} from \"./SegmentR2\";\nimport {BoxR2} from \"./BoxR2\";\nimport {CircleR2Interpolator} from \"../\"; // forward import\n\nexport type AnyCircleR2 = CircleR2 | CircleR2Init;\n\nexport interface CircleR2Init {\n  cx: number;\n  cy: number;\n  r: number;\n}\n\nexport class CircleR2 extends ShapeR2 implements Interpolate<CircleR2>, HashCode, Equivalent, Debug {\n  constructor(cx: number, cy: number, r: number) {\n    super();\n    Object.defineProperty(this, \"cx\", {\n      value: cx,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"cy\", {\n      value: cy,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"r\", {\n      value: r,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.cx) && isFinite(this.cy) && isFinite(this.r);\n  }\n\n  declare readonly cx: number;\n\n  declare readonly cy: number;\n\n  declare readonly r: number;\n\n  get xMin(): number {\n    return this.cx - this.r;\n  }\n\n  get yMin(): number {\n    return this.cy - this.r;\n  }\n\n  get xMax(): number {\n    return this.cx + this.r;\n  }\n\n  get yMax(): number {\n    return this.cy + this.r;\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    if (typeof that === \"number\") {\n      const dx = that - this.cx;\n      const dy = y! - this.cy;\n      return dx * dx + dy * dy <= this.r * this.r;\n    } else {\n      that = ShapeR2.fromAny(that);\n      if (that instanceof PointR2) {\n        return this.containsPoint(that);\n      } else if (that instanceof SegmentR2) {\n        return this.containsSegment(that);\n      } else if (that instanceof BoxR2) {\n        return this.containsBox(that);\n      } else if (that instanceof CircleR2) {\n        return this.containsCircle(that);\n      }\n      return false;\n    }\n  }\n\n  /** @hidden */\n  containsPoint(that: PointR2): boolean {\n    const dx = that.x - this.cx;\n    const dy = that.y - this.cy;\n    return dx * dx + dy * dy <= this.r * this.r;\n  }\n\n  /** @hidden */\n  containsSegment(that: SegmentR2): boolean {\n    const dx0 = that.x0 - this.cx;\n    const dy0 = that.y0 - this.cy;\n    const dx1 = that.x1 - this.cx;\n    const dy1 = that.y1 - this.cy;\n    const r2 = this.r * this.r;\n    return dx0 * dx0 + dy0 * dy0 <= r2\n        && dx1 * dx1 + dy1 * dy1 <= r2;\n  }\n\n  /** @hidden */\n  containsBox(that: BoxR2): boolean {\n    const dxMin = that.xMin - this.cx;\n    const dyMin = that.yMin - this.cy;\n    const dxMax = that.xMax - this.cx;\n    const dyMax = that.yMax - this.cy;\n    const r2 = this.r * this.r;\n    return dxMin * dxMin + dyMin * dyMin <= r2\n        && dxMin * dxMin + dyMax * dyMax <= r2\n        && dxMax * dxMax + dyMin * dyMin <= r2\n        && dxMax * dxMax + dyMax * dyMax <= r2;\n  }\n\n  /** @hidden */\n  containsCircle(that: CircleR2): boolean {\n    const dx = that.cx - this.cx;\n    const dy = that.cy - this.cy;\n    return dx * dx + dy * dy + that.r * that.r <= this.r * this.r;\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    that = ShapeR2.fromAny(that);\n    if (that instanceof PointR2) {\n      return this.intersectsPoint(that);\n    } else if (that instanceof SegmentR2) {\n      return this.intersectsSegment(that);\n    } else if (that instanceof BoxR2) {\n      return this.intersectsBox(that);\n    } else if (that instanceof CircleR2) {\n      return this.intersectsCircle(that);\n    } else {\n      return (that as ShapeR2).intersects(this);\n    }\n    return false;\n  }\n\n  /** @hidden */\n  intersectsPoint(that: PointR2): boolean {\n    const dx = that.x - this.cx;\n    const dy = that.y - this.cy;\n    return dx * dx + dy * dy <= this.r * this.r;\n  }\n\n  /** @hidden */\n  intersectsSegment(that: SegmentR2): boolean {\n    const cx = this.cx;\n    const cy = this.cy;\n    const r = this.r;\n    const x0 = that.x0;\n    const y0 = that.y0;\n    const x1 = that.x1;\n    const y1 = that.y1;\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n    const l = Math.sqrt(dx * dx + dy * dy);\n    const unitX = dx / l;\n    const unitY = dy / l;\n    const d = (cx - x0) * unitY - (cy - y0) * unitX;\n    if (d < -r || r < d) {\n      return false;\n    } else {\n      const dcx0 = x0 - cx;\n      const dcy0 = y0 - cy;\n      const dcx1 = x1 - cx;\n      const dcy1 = y1 - cy;\n      const r2 = r * r;\n      if (dcx0 * dcx0 + dcy0 * dcy0 <= r2 || dcx1 * dcx1 + dcy1 * dcy1 <= r2) {\n        return true;\n      } else {\n        const uc = unitX * cx + unitY * cy;\n        const u0 = unitX * x0 + unitY * y0;\n        const u1 = unitX * x1 + unitY * y1;\n        return u0 < uc && uc <= u1 || u1 < uc && uc <= u0;\n      }\n    }\n  }\n\n  /** @hidden */\n  intersectsBox(that: BoxR2): boolean {\n    const dx = (this.cx < that.xMin ? that.xMin : that.xMax < this.cx ? that.xMax : this.cx) - this.cx;\n    const dy = (this.cy < that.yMin ? that.yMin : that.yMax < this.cy ? that.yMax : this.cy) - this.cy;\n    return dx * dx + dy * dy <= this.r * this.r;\n  }\n\n  /** @hidden */\n  intersectsCircle(that: CircleR2): boolean {\n    const dx = that.cx - this.cx;\n    const dy = that.cy - this.cy;\n    const rr = this.r + that.r;\n    return dx * dx + dy * dy <= rr * rr;\n  }\n\n  transform(f: R2Function): CircleR2 {\n    const cx = f.transformX(this.cx, this.cy);\n    const cy = f.transformY(this.cx, this.cy);\n    const rx = f.transformX(this.cx + this.r, this.cy);\n    const ry = f.transformY(this.cx + this.r, this.cy);\n    const dx = rx - cx;\n    const dy = ry - cy;\n    const r = Math.sqrt(dx * dx + dy * dy);\n    return new CircleR2(cx, cy, r);\n  }\n\n  toAny(): CircleR2Init {\n    return {\n      cx: this.cx,\n      cy: this.cy,\n      r: this.r,\n    };\n  }\n\n  interpolateTo(that: CircleR2): Interpolator<CircleR2>;\n  interpolateTo(that: unknown): Interpolator<CircleR2> | null;\n  interpolateTo(that: unknown): Interpolator<CircleR2> | null {\n    if (that instanceof CircleR2) {\n      return CircleR2Interpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof CircleR2) {\n      return Numbers.equivalent(this.cx, that.cx, epsilon)\n          && Numbers.equivalent(this.cy, that.cy, epsilon)\n          && Numbers.equivalent(this.r, that.r, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof CircleR2) {\n      return this.cx === that.cx && this.cy === that.cy && this.r === that.r;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Constructors.hash(CircleR2),\n        Numbers.hash(this.cx)), Numbers.hash(this.cy)), Numbers.hash(this.r)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"CircleR2\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.cx).write(\", \").debug(this.cy).write(\", \").debug(this.r).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static of(cx: number, cy: number, r: number): CircleR2 {\n    return new CircleR2(cx, cy, r);\n  }\n\n  static fromInit(value: CircleR2Init): CircleR2 {\n    return new CircleR2(value.cx, value.cy, value.r);\n  }\n\n  static fromAny(value: AnyCircleR2): CircleR2 {\n    if (value === void 0 || value === null || value instanceof CircleR2) {\n      return value;\n    } else if (CircleR2.isInit(value)) {\n      return CircleR2.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is CircleR2Init {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as CircleR2Init;\n      return typeof init.cx === \"number\"\n          && typeof init.cy === \"number\"\n          && typeof init.r === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyCircleR2 {\n    return value instanceof CircleR2\n        || CircleR2.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {PointR2} from \"./PointR2\";\nimport {SegmentR2} from \"./SegmentR2\";\nimport {BoxR2Interpolator} from \"../\"; // forward import\nimport {CircleR2} from \"./CircleR2\";\n\nexport type AnyBoxR2 = BoxR2 | BoxR2Init;\n\nexport interface BoxR2Init {\n  xMin: number;\n  yMin: number;\n  xMax: number;\n  yMax: number;\n}\n\nexport class BoxR2 extends ShapeR2 implements Interpolate<BoxR2>, HashCode, Equivalent, Debug {\n  constructor(xMin: number, yMin: number, xMax: number, yMax: number) {\n    super();\n    Object.defineProperty(this, \"xMin\", {\n      value: xMin,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"yMin\", {\n      value: yMin,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"xMax\", {\n      value: xMax,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"yMax\", {\n      value: yMax,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.xMin) && isFinite(this.yMin)\n        && isFinite(this.xMax) && isFinite(this.yMax);\n  }\n\n  declare readonly xMin: number;\n\n  declare readonly yMin: number;\n\n  declare readonly xMax: number;\n\n  declare readonly yMax: number;\n\n  get x(): number {\n    return this.xMin;\n  }\n\n  get y(): number {\n    return this.yMin;\n  }\n\n  get width(): number {\n    return this.xMax - this.xMin;\n  }\n\n  get height(): number {\n    return this.yMax - this.yMin;\n  }\n\n  get top(): number {\n    return this.yMin;\n  }\n\n  get right(): number {\n    return this.xMax;\n  }\n\n  get bottom(): number {\n    return this.yMax;\n  }\n\n  get left(): number {\n    return this.xMin;\n  }\n\n  get center(): PointR2 {\n    return new PointR2((this.xMin + this.xMax) / 2, (this.yMin + this.yMax) / 2);\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    if (typeof that === \"number\") {\n      return this.xMin <= that && that <= this.xMax\n          && this.yMin <= y! && y! <= this.yMax;\n    } else {\n      that = ShapeR2.fromAny(that);\n      if (that instanceof ShapeR2) {\n        if (that instanceof PointR2) {\n          return this.containsPoint(that);\n        } else if (that instanceof SegmentR2) {\n          return this.containsSegment(that);\n        } else if (that instanceof BoxR2) {\n          return this.containsBox(that);\n        } else if (that instanceof CircleR2) {\n          return this.containsCircle(that);\n        } else {\n          return this.xMin <= that.xMin && that.xMax <= this.xMax\n              && this.yMin <= that.yMin && that.yMax <= this.yMax;\n        }\n      }\n      return false;\n    }\n  }\n\n  /** @hidden */\n  containsPoint(that: PointR2): boolean {\n    return this.xMin <= that.x && that.x <= this.xMax\n        && this.yMin <= that.y && that.y <= this.yMax;\n  }\n\n  /** @hidden */\n  containsSegment(that: SegmentR2): boolean {\n    return this.xMin <= that.x0 && that.x0 <= this.xMax\n        && this.yMin <= that.y0 && that.y0 <= this.yMax\n        && this.xMin <= that.x1 && that.x1 <= this.xMax\n        && this.yMin <= that.y1 && that.y1 <= this.yMax;\n  }\n\n  /** @hidden */\n  containsBox(that: BoxR2): boolean {\n    return this.xMin <= that.xMin && that.xMax <= this.xMax\n        && this.yMin <= that.yMin && that.yMax <= this.yMax;\n  }\n\n  /** @hidden */\n  containsCircle(that: CircleR2): boolean {\n    return this.xMin <= that.cx - that.r && that.cx + that.r <= this.xMax\n        && this.yMin <= that.cy - that.r && that.cy + that.r <= this.yMax;\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    that = ShapeR2.fromAny(that);\n    if (that instanceof PointR2) {\n      return this.intersectsPoint(that);\n    } else if (that instanceof SegmentR2) {\n      return this.intersectsSegment(that);\n    } else if (that instanceof BoxR2) {\n      return this.intersectsBox(that);\n    } else if (that instanceof CircleR2) {\n      return this.intersectsCircle(that);\n    } else {\n      return (that as ShapeR2).intersects(this);\n    }\n    return false;\n  }\n\n  /** @hidden */\n  intersectsPoint(that: PointR2): boolean {\n    return this.xMin <= that.x && that.x <= this.xMax\n        && this.yMin <= that.y && that.y <= this.yMax;\n  }\n\n  /** @hidden */\n  intersectsSegment(that: SegmentR2): boolean {\n    const xMin = this.xMin;\n    const yMin = this.yMin;\n    const xMax = this.xMax;\n    const yMax = this.yMax;\n    const x0 = that.x0;\n    const y0 = that.y0;\n    const x1 = that.x1;\n    const y1 = that.y1;\n    if (x0 < xMin && x1 < xMin || x0 > xMax && x1 > xMax ||\n        y0 < yMin && y1 < yMin || y0 > yMax && y1 > yMax) {\n      return false;\n    } else if (x0 > xMin && x0 < xMax && y0 > yMin && y0 < yMax) {\n      return true;\n    } else if ((BoxR2.intersectsSegment(x0 - xMin, x1 - xMin, x0, y0, x1, y1) && BoxR2.hitY > yMin && BoxR2.hitY < yMax)\n            || (BoxR2.intersectsSegment(y0 - yMin, y1 - yMin, x0, y0, x1, y1) && BoxR2.hitX > xMin && BoxR2.hitX < xMax)\n            || (BoxR2.intersectsSegment(x0 - xMax, x1 - xMax, x0, y0, x1, y1) && BoxR2.hitY > yMin && BoxR2.hitY < yMax)\n            || (BoxR2.intersectsSegment(y0 - yMax, y1 - yMax, x0, y0, x1, y1) && BoxR2.hitX > xMin && BoxR2.hitX < xMax)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @hidden */\n  static hitX: number = 0; // stack local hit register\n  /** @hidden */\n  static hitY: number = 0; // stack local hit register\n  static intersectsSegment(d0: number, d1: number, x0: number, y0: number, x1: number, y1: number): boolean {\n    if (d0 !== d1 || d0 * d1 < 0) {\n      const scale = -d0 / (d1 - d0);\n      BoxR2.hitX = x0 + (x1 - x0) * scale;\n      BoxR2.hitY = y0 + (y1 - y0) * scale;\n      return true;\n    }\n    return false;\n  }\n\n  /** @hidden */\n  intersectsBox(that: BoxR2): boolean {\n    return this.xMin <= that.xMax && that.xMin <= this.xMax\n        && this.yMin <= that.yMax && that.yMin <= this.yMax;\n  }\n\n  /** @hidden */\n  intersectsCircle(that: CircleR2): boolean {\n    const dx = (that.cx < this.xMin ? this.xMin : this.xMax < that.cx ? this.xMax : that.cx) - that.cx;\n    const dy = (that.cy < this.yMin ? this.yMin : this.yMax < that.cy ? this.yMax : that.cy) - that.cy;\n    return dx * dx + dy * dy <= that.r * that.r;\n  }\n\n  union(that: AnyShapeR2): BoxR2 {\n    return super.union(that) as BoxR2;\n  }\n\n  transform(f: R2Function): BoxR2 {\n    return new BoxR2(f.transformX(this.xMin, this.yMin), f.transformY(this.xMin, this.yMin),\n                     f.transformX(this.xMax, this.yMax), f.transformY(this.xMax, this.yMax));\n  }\n\n  get bounds(): BoxR2 {\n    return this;\n  }\n\n  toAny(): BoxR2Init {\n    return {\n      xMin: this.xMin,\n      yMin: this.yMin,\n      xMax: this.xMax,\n      yMax: this.yMax,\n    };\n  }\n\n  interpolateTo(that: BoxR2): Interpolator<BoxR2>;\n  interpolateTo(that: unknown): Interpolator<BoxR2> | null;\n  interpolateTo(that: unknown): Interpolator<BoxR2> | null {\n    if (that instanceof BoxR2) {\n      return BoxR2Interpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BoxR2) {\n      return Numbers.equivalent(this.xMin, that.xMin, epsilon)\n          && Numbers.equivalent(this.yMin, that.yMin, epsilon)\n          && Numbers.equivalent(this.xMax, that.xMax, epsilon)\n          && Numbers.equivalent(this.yMax, that.yMax, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BoxR2) {\n      return this.xMin === that.xMin && this.yMin === that.yMin\n          && this.xMax === that.xMax && this.yMax === that.yMax;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(BoxR2), Numbers.hash(this.xMin)), Numbers.hash(this.yMin)),\n        Numbers.hash(this.xMax)), Numbers.hash(this.yMax)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"BoxR2\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.xMin).write(\", \").debug(this.yMin).write(\", \")\n        .debug(this.xMax).write(\", \").debug(this.yMax).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static undefined(): BoxR2 {\n    return new BoxR2(Infinity, Infinity, -Infinity, -Infinity);\n  }\n\n  static of(xMin: number, yMin: number, xMax?: number, yMax?: number): BoxR2 {\n    if (xMax === void 0) {\n      xMax = xMin;\n    }\n    if (yMax === void 0) {\n      yMax = yMin;\n    }\n    return new BoxR2(xMin, yMin, xMax, yMax);\n  }\n\n  static fromInit(value: BoxR2Init): BoxR2 {\n    return new BoxR2(value.xMin, value.yMin, value.xMax, value.yMax);\n  }\n\n  static fromAny(value: AnyBoxR2): BoxR2 {\n    if (value === void 0 || value === null || value instanceof BoxR2) {\n      return value;\n    } else if (BoxR2.isInit(value)) {\n      return BoxR2.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is BoxR2Init {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as BoxR2Init;\n      return typeof init.xMin === \"number\"\n          && typeof init.yMin === \"number\"\n          && typeof init.xMax === \"number\"\n          && typeof init.yMax === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyBoxR2 {\n    return value instanceof BoxR2\n        || BoxR2.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {BoxR2} from \"./BoxR2\";\n\n/** @hidden */\nexport const BoxR2Interpolator = function (s0: BoxR2, s1: BoxR2): Interpolator<BoxR2> {\n  const interpolator = function (u: number): BoxR2 {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const xMin = s0.xMin + u * (s1.xMin - s0.xMin);\n    const yMin = s0.yMin + u * (s1.yMin - s0.yMin);\n    const xMax = s0.xMax + u * (s1.xMax - s0.xMax);\n    const yMax = s0.yMax + u * (s1.yMax - s0.yMax);\n    return new BoxR2(xMin, yMin, xMax, yMax);\n  } as Interpolator<BoxR2>;\n  Object.setPrototypeOf(interpolator, BoxR2Interpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: BoxR2, s1: BoxR2): Interpolator<BoxR2>;\n\n  /** @hidden */\n  prototype: Interpolator<BoxR2>;\n};\n\nBoxR2Interpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {CircleR2} from \"./CircleR2\";\n\n/** @hidden */\nexport const CircleR2Interpolator = function (s0: CircleR2, s1: CircleR2): Interpolator<CircleR2> {\n  const interpolator = function (u: number): CircleR2 {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const cx = s0.cx + u * (s1.cx - s0.cx);\n    const cy = s0.cy + u * (s1.cy - s0.cy);\n    const r = s0.r + u * (s1.r - s0.r);\n    return new CircleR2(cx, cy, r);\n  } as Interpolator<CircleR2>;\n  Object.setPrototypeOf(interpolator, CircleR2Interpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: CircleR2, s1: CircleR2): Interpolator<CircleR2>;\n\n  /** @hidden */\n  prototype: Interpolator<CircleR2>;\n};\n\nCircleR2Interpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, Equals, Lazy, Arrays} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {R2Function} from \"./R2Function\";\nimport {AnyShapeR2, ShapeR2} from \"./ShapeR2\";\nimport {BoxR2} from \"./BoxR2\";\n\nexport class SetR2<S extends ShapeR2 = ShapeR2> extends ShapeR2 implements Equals, Equivalent, Debug {\n  constructor(shapes: ReadonlyArray<S>) {\n    super();\n    Object.defineProperty(this, \"shapes\", {\n      value: shapes,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly shapes: ReadonlyArray<S>;\n\n  isDefined(): boolean {\n    return this.shapes.length !== 0;\n  }\n\n  get xMin(): number {\n    return this.bounds.xMin;\n  }\n\n  get yMin(): number {\n    return this.bounds.yMin;\n  }\n\n  get xMax(): number {\n    return this.bounds.xMax;\n  }\n\n  get yMax(): number {\n    return this.bounds.yMax;\n  }\n\n  contains(that: AnyShapeR2): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyShapeR2 | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyShapeR2): boolean {\n    return false; // TODO\n  }\n\n  transform(f: R2Function): SetR2 {\n    const oldShapes = this.shapes;\n    const n = oldShapes.length;\n    if (n > 0) {\n      const newShapes = new Array<ShapeR2>(n);\n      for (let i = 0; i < n; i += 1) {\n        newShapes[i] = oldShapes[i]!.transform(f);\n      }\n      return new SetR2(newShapes);\n    } else {\n      return SetR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: BoxR2 | null;\n\n  get bounds(): BoxR2 {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let xMin = Infinity;\n      let yMin = Infinity;\n      let xMax = -Infinity;\n      let yMax = -Infinity;\n      const shapes = this.shapes;\n      for (let i = 0, n = shapes.length; i < n; i += 1) {\n        const shape = shapes[i]!;\n        xMin = Math.min(xMin, shape.xMin);\n        yMin = Math.min(yMin, shape.yMin);\n        xMax = Math.max(shape.xMax, xMax);\n        yMax = Math.max(shape.yMax, yMax);\n      }\n      boundingBox = new BoxR2(xMin, yMin, xMax, yMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SetR2) {\n      return Arrays.equivalent(this.shapes, that.shapes, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SetR2) {\n      return Arrays.equal(this.shapes, that.shapes);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const shapes = this.shapes;\n    const n = shapes.length;\n    output = output.write(\"SetR2\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else {\n      output = output.write(\"of\").write(40/*'('*/);\n      output = output.debug(shapes[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(shapes[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static empty<S extends ShapeR2>(): SetR2<S> {\n    return new SetR2(Arrays.empty);\n  }\n\n  static of<S extends ShapeR2>(...shapes: S[]): SetR2<S> {\n    return new SetR2(shapes);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Equivalent, Lazy} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {Value, Form} from \"@swim/structure\";\nimport {AnyLength, Length} from \"../length/Length\";\nimport {PxLength} from \"../length/PxLength\";\nimport {AnyAngle, Angle} from \"../angle/Angle\";\nimport {DegAngle} from \"../angle/DegAngle\";\nimport type {R2Operator} from \"../r2/R2Operator\";\nimport type {PointR2} from \"../r2/PointR2\";\nimport {TransformForm} from \"../\"; // forward import\nimport {IdentityTransform} from \"../\"; // forward import\nimport {TranslateTransform} from \"../\"; // forward import\nimport {ScaleTransform} from \"../\"; // forward import\nimport {RotateTransform} from \"../\"; // forward import\nimport {SkewTransform} from \"../\"; // forward import\nimport {AffineTransform} from \"../\"; // forward import\nimport {AffineTransformInterpolator} from \"../\"; // forward import\nimport {TransformList} from \"../\"; // forward import\nimport {TransformListParser} from \"../\"; // forward import\n\nexport type AnyTransform = Transform | string;\n\nexport abstract class Transform implements R2Operator, Interpolate<Transform>, HashCode, Equivalent, Debug {\n  abstract transform(that: Transform): Transform;\n  abstract transform(x: number, y: number): PointR2;\n\n  abstract transformX(x: number, y: number): number;\n\n  abstract transformY(x: number, y: number): number;\n\n  abstract inverse(): Transform;\n\n  translate(x: AnyLength, y: AnyLength): Transform {\n    return this.transform(Transform.translate(x, y));\n  }\n\n  translateX(x: AnyLength): Transform {\n    return this.transform(Transform.translateX(x));\n  }\n\n  translateY(y: AnyLength): Transform {\n    return this.transform(Transform.translateY(y));\n  }\n\n  scale(x: number, y: number): Transform {\n    return this.transform(Transform.scale(x, y));\n  }\n\n  scaleX(x: number): Transform {\n    return this.transform(Transform.scaleX(x));\n  }\n\n  scaleY(y: number): Transform {\n    return this.transform(Transform.scaleY(y));\n  }\n\n  rotate(a: AnyAngle): Transform {\n    return this.transform(Transform.rotate(a));\n  }\n\n  skew(x: AnyAngle, y: AnyAngle): Transform {\n    return this.transform(Transform.skew(x, y));\n  }\n\n  skewX(x: AnyAngle): Transform {\n    return this.transform(Transform.skewX(x));\n  }\n\n  skewY(y: AnyAngle): Transform {\n    return this.transform(Transform.skewY(y));\n  }\n\n  abstract toAffine(): AffineTransform;\n\n  toMatrix(): DOMMatrix {\n    return this.toAffine().toMatrix();\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    return null\n  }\n\n  toCssValue(): CSSStyleValue | null {\n    if (typeof CSSTransformValue !== \"undefined\") {\n      const component = this.toCssTransformComponent();\n      if (component !== null) {\n        return new CSSTransformValue([component]);\n      }\n    }\n    return null;\n  }\n\n  abstract toValue(): Value;\n\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof Transform) {\n      return AffineTransformInterpolator(this.toAffine(), that.toAffine());\n    } else {\n      return null;\n    }\n  }\n\n  abstract conformsTo(that: Transform): boolean;\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  toAttributeString(): string {\n    return this.toString();\n  }\n\n  @Lazy\n  static identity(): Transform {\n    return new IdentityTransform();\n  }\n\n  static translate(x: AnyLength, y: AnyLength): TranslateTransform {\n    x = Length.fromAny(x);\n    y = Length.fromAny(y);\n    return new TranslateTransform(x, y);\n  }\n\n  static translateX(x: AnyLength): TranslateTransform {\n    x = Length.fromAny(x);\n    return new TranslateTransform(x, PxLength.zero());\n  }\n\n  static translateY(y: AnyLength): TranslateTransform {\n    y = Length.fromAny(y);\n    return new TranslateTransform(PxLength.zero(), y);\n  }\n\n  static scale(x: number, y: number): ScaleTransform {\n    return new ScaleTransform(x, y);\n  }\n\n  static scaleX(x: number): ScaleTransform {\n    return new ScaleTransform(x, 1);\n  }\n\n  static scaleY(y: number): ScaleTransform {\n    return new ScaleTransform(1, y);\n  }\n\n  static rotate(a: AnyAngle): RotateTransform {\n    a = Angle.fromAny(a, \"deg\");\n    return new RotateTransform(a);\n  }\n\n  static skew(x: AnyAngle, y: AnyAngle): SkewTransform {\n    x = Angle.fromAny(x, \"deg\");\n    y = Angle.fromAny(y, \"deg\");\n    return new SkewTransform(x, y);\n  }\n\n  static skewX(x: AnyAngle): SkewTransform {\n    x = Angle.fromAny(x, \"deg\");\n    return new SkewTransform(x, DegAngle.zero());\n  }\n\n  static skewY(y: AnyAngle): SkewTransform {\n    y = Angle.fromAny(y, \"deg\");\n    return new SkewTransform(DegAngle.zero(), y);\n  }\n\n  static affine(x0: number = 1, y0: number = 0,\n                x1: number = 0, y1: number = 1,\n                tx: number = 0, ty: number = 0): AffineTransform {\n    return new AffineTransform(x0, y0, x1, y1, tx, ty);\n  }\n\n  static list(...transforms: AnyTransform[]): TransformList {\n    const list: Transform[] = [];\n    for (let i = 0; i < transforms.length; i += 1) {\n      const transform = Transform.fromAny(transforms[i]!);\n      if (transform instanceof TransformList) {\n        list.push(...transform.transforms);\n      } else if (!(transform instanceof IdentityTransform)) {\n        list.push(transform);\n      }\n    }\n    return new TransformList(list);\n  }\n\n  static fromCssValue(value: CSSStyleValue): Transform {\n    if (value instanceof CSSTransformValue) {\n      return Transform.fromCssTransform(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  /** @hidden */\n  static fromCssTransform(value: CSSTransformValue): Transform {\n    const n = value.length;\n    if (n === 1) {\n      return Transform.fromCssTransformComponent(value[0]!);\n    } else {\n      const transforms = new Array<Transform>(n);\n      for (let i = 0; i < n; i += 1) {\n        transforms[i] = Transform.fromCssTransformComponent(value[i]!);\n      }\n      return new TransformList(transforms);\n    }\n  }\n\n  static fromCssTransformComponent(component: CSSTransformComponent): Transform {\n    if (component instanceof CSSTranslate) {\n      return TranslateTransform.fromCssTransformComponent(component);\n    } else if (component instanceof CSSRotate) {\n      return RotateTransform.fromCssTransformComponent(component);\n    } else if (component instanceof CSSScale) {\n      return ScaleTransform.fromCssTransformComponent(component);\n    } else if (component instanceof CSSSkew) {\n      return SkewTransform.fromCssTransformComponent(component);\n    } else if (component instanceof CSSMatrixComponent) {\n      return AffineTransform.fromCssTransformComponent(component);\n    } else {\n      throw new TypeError(\"\" + component);\n    }\n  }\n\n  static fromAny(value: AnyTransform): Transform {\n    if (value === void 0 || value === null || value instanceof Transform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return Transform.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static fromValue(value: Value): Transform | null {\n    const tag = value.tag;\n    switch (tag) {\n      case \"identity\": return IdentityTransform.fromValue(value);\n      case \"translate\": return TranslateTransform.fromValue(value);\n      case \"scale\": return ScaleTransform.fromValue(value);\n      case \"rotate\": return RotateTransform.fromValue(value);\n      case \"skew\": return SkewTransform.fromValue(value);\n      case \"matrix\": return AffineTransform.fromValue(value);\n      default: return TransformList.fromValue(value);\n    }\n  }\n\n  static parse(string: string): Transform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = TransformListParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  @Lazy\n  static form(): Form<Transform, AnyTransform> {\n    return new TransformForm(Transform.identity());\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyTransform {\n    return value instanceof Transform\n        || typeof value === \"string\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Record, Form} from \"@swim/structure\";\nimport {AnyTransform, Transform} from \"./Transform\";\n\n/** @hidden */\nexport class TransformForm extends Form<Transform, AnyTransform> {\n  constructor(unit: Transform | undefined) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: Transform | undefined;\n\n  withUnit(unit: Transform | undefined): Form<Transform, AnyTransform> {\n    if (unit !== this.unit) {\n      return new TransformForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(transform: AnyTransform): Item {\n    transform = Transform.fromAny(transform);\n    return transform.toValue();\n  }\n\n  cast(item: Item): Transform | undefined {\n    const value = item.toValue();\n    try {\n      if (value instanceof Record) {\n        const transform = Transform.fromValue(value);\n        return transform !== null ? transform : void 0;\n      } else {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          return Transform.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\nimport {TranslateTransformParser} from \"../\"; // forward import\nimport {ScaleTransformParser} from \"../\"; // forward import\nimport {RotateTransformParser} from \"../\"; // forward import\nimport {SkewTransformParser} from \"../\"; // forward import\nimport {AffineTransformParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class TransformParser extends Parser<Transform> {\n  private readonly identOutput: Output<string> | undefined;\n\n  constructor(identOutput?: Output<string>) {\n    super();\n    this.identOutput = identOutput;\n  }\n\n  feed(input: Input): Parser<Transform> {\n    return TransformParser.parse(input, this.identOutput);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>): Parser<Transform> {\n    let c = 0;\n    identOutput = identOutput || Unicode.stringOutput();\n    while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n      input = input.step();\n      identOutput.write(c);\n    }\n    if (!input.isEmpty()) {\n      const ident = identOutput.bind();\n      switch (ident) {\n        case \"translateX\":\n        case \"translateY\":\n        case \"translate\": return TranslateTransformParser.parseRest(input, identOutput);\n        case \"scaleX\":\n        case \"scaleY\":\n        case \"scale\": return ScaleTransformParser.parseRest(input, identOutput);\n        case \"rotate\": return RotateTransformParser.parseRest(input, identOutput);\n        case \"skewX\":\n        case \"skewY\":\n        case \"skew\": return SkewTransformParser.parseRest(input, identOutput);\n        case \"matrix\": return AffineTransformParser.parseRest(input, identOutput);\n        case \"none\": return Parser.done(Transform.identity());\n        default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n      }\n    }\n    return new TransformParser(identOutput);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Interpolator, IdentityInterpolator} from \"@swim/mapping\";\nimport {Value, Record} from \"@swim/structure\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"../\"; // forward import\n\nexport class IdentityTransform extends Transform {\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      return x as Transform;\n    } else {\n      return new PointR2(x as number, y!);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x;\n  }\n\n  transformY(x: number, y: number): number {\n    return y;\n  }\n\n  inverse(): Transform {\n    return this;\n  }\n\n  toAffine(): AffineTransform {\n    return new AffineTransform(1, 0, 0, 1, 0, 0);\n  }\n\n  toCssValue(): CSSStyleValue | null {\n    return new CSSKeywordValue(\"identity\");\n  }\n\n  toValue(): Value {\n    return Record.create(1).attr(\"identity\");\n  }\n\n  interpolateTo(that: IdentityTransform): Interpolator<IdentityTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof IdentityTransform) {\n      return IdentityInterpolator(this);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof IdentityTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    return that instanceof IdentityTransform;\n  }\n\n  equals(that: unknown): boolean {\n    return that instanceof IdentityTransform;\n  }\n\n  hashCode(): number {\n    return Constructors.hash(IdentityTransform);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"identity\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return \"none\";\n  }\n\n  static fromValue(value: Value): IdentityTransform | null {\n    if (value.tag === \"identity\") {\n      return Transform.identity();\n    }\n    return null;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {Length} from \"../length/Length\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {TranslateTransformInterpolator} from \"../\"; // forward import\nimport {TranslateTransformParser} from \"../\"; // forward import\nimport {AffineTransform} from \"../\"; // forward import\n\nexport class TranslateTransform extends Transform {\n  constructor(x: Length, y: Length) {\n    super();\n    Object.defineProperty(this, \"x\", {\n      value: x,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y\", {\n      value: y,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly x: Length;\n\n  declare readonly y: Length;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else if (x instanceof TranslateTransform) {\n        return new TranslateTransform(this.x.plus(x.x), this.y.plus(x.y));\n      } else {\n        return Transform.list(this, x as Transform);\n      }\n    } else {\n      return new PointR2(this.x.pxValue() + (x as number), this.y.pxValue() + y!);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return this.x.pxValue() + x;\n  }\n\n  transformY(x: number, y: number): number {\n    return this.y.pxValue() + y;\n  }\n\n  inverse(): Transform {\n    return new TranslateTransform(this.x.negative(), this.y.negative());\n  }\n\n  toAffine(): AffineTransform {\n    return new AffineTransform(1, 0, 0, 1, this.x.pxValue(), this.y.pxValue());\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      const x = this.x.toCssValue();\n      const y = this.y.toCssValue();\n      return new CSSTranslate(x!, y!);\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    return Record.create(1)\n                 .attr(\"translate\", Record.create(2).slot(\"x\", this.x.toValue())\n                                                    .slot(\"y\", this.y.toValue()));\n  }\n\n  interpolateTo(that: TranslateTransform): Interpolator<TranslateTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof TranslateTransform) {\n      return TranslateTransformInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof TranslateTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof TranslateTransform) {\n      return this.x.equivalentTo(that.x, epsilon)\n          && this.y.equivalentTo(that.y, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof TranslateTransform) {\n      return this.x.equals(that.x) && this.y.equals(that.y);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(TranslateTransform),\n        this.x.hashCode()), this.y.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"translate\");\n    if (this.x.isDefined() && !this.y.isDefined()) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this.x).write(41/*')'*/);\n    } else if (!this.x.isDefined() && this.y.isDefined()) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this.y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this.x).write(\", \").debug(this.y).write(41/*')'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      if (this.x.isDefined() && !this.y.isDefined()) {\n        stringValue = \"translate(\" + this.x + \",0)\";\n      } else if (!this.x.isDefined() && this.y.isDefined()) {\n        stringValue = \"translate(0,\" + this.y + \")\";\n      } else {\n        stringValue = \"translate(\" + this.x + \",\" + this.y + \")\";\n      }\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  toAttributeString(): string {\n    if (this.x.isDefined() && !this.y.isDefined()) {\n      return \"translate(\" + this.x.pxValue() + \",0)\";\n    } else if (!this.x.isDefined() && this.y.isDefined()) {\n      return \"translate(0,\" + this.y.pxValue() + \")\";\n    } else {\n      return \"translate(\" + this.x.pxValue() + \",\" + this.y.pxValue() + \")\";\n    }\n  }\n\n  static fromCssTransformComponent(component: CSSTranslate): TranslateTransform {\n    const x = typeof component.x === \"number\"\n            ? Length.px(component.x)\n            : Length.fromCssValue(component.x);\n    const y = typeof component.y === \"number\"\n            ? Length.px(component.y)\n            : Length.fromCssValue(component.y);\n    return new TranslateTransform(x, y);\n  }\n\n  static fromAny(value: TranslateTransform | string): TranslateTransform {\n    if (value === void 0 || value === null || value instanceof TranslateTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return TranslateTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): TranslateTransform | null {\n    const header = value.header(\"translate\");\n    if (header.isDefined()) {\n      let x = Length.zero();\n      let y = Length.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().cast(Length.form(), x);\n          } else if (key === \"y\") {\n            y = item.toValue().cast(Length.form(), y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.cast(Length.form(), x);\n          } else if (index === 1) {\n            y = item.cast(Length.form(), y);\n          }\n        }\n      }, this);\n      return new TranslateTransform(x, y);\n    }\n    return null;\n  }\n\n  static parse(string: string): TranslateTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = TranslateTransformParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Length} from \"../length/Length\";\nimport {TranslateTransform} from \"./TranslateTransform\";\n\n/** @hidden */\nexport const TranslateTransformInterpolator = function (f0: TranslateTransform, f1: TranslateTransform): Interpolator<TranslateTransform> {\n  const interpolator = function (u: number): TranslateTransform {\n    const f0 = interpolator[0];\n    const f1 = interpolator[1];\n    const x = Length.create(f0.x.value + u * (f1.x.value - f0.x.value), f1.x.units);\n    const y = Length.create(f0.y.value + u * (f1.y.value - f0.y.value), f1.y.units);\n    return new TranslateTransform(x, y);\n  } as Interpolator<TranslateTransform>;\n  Object.setPrototypeOf(interpolator, TranslateTransformInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: f0.x.units === f1.x.units && f0.y.units === f1.y.units\n         ? f0 : new TranslateTransform(f0.x.to(f1.x.units), f0.y.to(f1.y.units)),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: f1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: TranslateTransform, f1: TranslateTransform): Interpolator<TranslateTransform>;\n\n  /** @hidden */\n  prototype: Interpolator<TranslateTransform>;\n};\n\nTranslateTransformInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Length} from \"../length/Length\";\nimport {PxLength} from \"../length/PxLength\";\nimport {LengthParser} from \"../length/LengthParser\";\nimport {TranslateTransform} from \"./TranslateTransform\";\n\n/** @hidden */\nexport class TranslateTransformParser extends Parser<TranslateTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<Length> | undefined;\n  private readonly yParser: Parser<Length> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<Length>,\n              yParser?: Parser<Length>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<TranslateTransform> {\n    return TranslateTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<Length>,\n               yParser?: Parser<Length>, step: number = 1): Parser<TranslateTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"translateX\":\n          case \"translateY\":\n          case \"translate\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = LengthParser.parse(input, \"px\");\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"translateX\": return Parser.done(new TranslateTransform(xParser!.bind(), PxLength.zero()));\n            case \"translateY\": return Parser.done(new TranslateTransform(PxLength.zero(), xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = LengthParser.parse(input, \"px\");\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"translate\": return Parser.done(new TranslateTransform(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new TranslateTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<TranslateTransform> {\n    return TranslateTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {ScaleTransformInterpolator} from \"../\"; // forward import\nimport {ScaleTransformParser} from \"../\"; // forward import\nimport {AffineTransform} from \"../\"; // forward import\n\nexport class ScaleTransform extends Transform {\n  constructor(x: number, y: number) {\n    super();\n    Object.defineProperty(this, \"x\", {\n      value: x,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y\", {\n      value: y,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly x: number;\n\n  declare readonly y: number;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else {\n        return Transform.list(this, x as Transform);\n      }\n    } else {\n      return new PointR2(this.x * (x as number), this.y * y!);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return this.x * x;\n  }\n\n  transformY(x: number, y: number): number {\n    return this.y * y;\n  }\n\n  inverse(): Transform {\n    return new ScaleTransform(1 / (this.x || 1), 1 / (this.y || 1));\n  }\n\n  toAffine(): AffineTransform {\n    return new AffineTransform(this.x, 0, 0, this.y, 0, 0);\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      return new CSSScale(this.x, this.y);\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    return Record.create(1)\n                 .attr(\"scale\", Record.create(2).slot(\"x\", this.x)\n                                                .slot(\"y\", this.y));\n  }\n\n  interpolateTo(that: ScaleTransform): Interpolator<ScaleTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof ScaleTransform) {\n      return ScaleTransformInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof ScaleTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof ScaleTransform) {\n      return Numbers.equivalent(this.x, that.x, epsilon)\n          && Numbers.equivalent(this.y, that.y, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof ScaleTransform) {\n      return this.x === that.x && this.y === that.y;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(ScaleTransform),\n        Numbers.hash(this.x)), Numbers.hash(this.y)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"scale\");\n    if (this.x !== 0 && this.y === 0) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this.x).write(41/*')'*/);\n    } else if (this.x === 0 && this.y !== 0) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this.y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this.x).write(\", \").debug(this.y).write(41/*')'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      if (this.x !== 0 && this.y === 0) {\n        stringValue = \"scaleX(\" + this.x + \")\";\n      } else if (this.x === 0 && this.y !== 0) {\n        stringValue = \"scaleY(\" + this.y + \")\";\n      } else {\n        stringValue = \"scale(\" + this.x + \",\" + this.y + \")\";\n      }\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  static fromCssTransformComponent(component: CSSScale): ScaleTransform {\n    const x = typeof component.x === \"number\"\n            ? component.x\n            : component.x.to(\"number\").value;\n    const y = typeof component.y === \"number\"\n            ? component.y\n            : component.y.to(\"number\").value;\n    return new ScaleTransform(x, y);\n  }\n\n  static fromAny(value: ScaleTransform | string): ScaleTransform {\n    if (value === void 0 || value === null || value instanceof ScaleTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return ScaleTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): ScaleTransform | null {\n    const header = value.header(\"scale\");\n    if (header.isDefined()) {\n      let x = 0;\n      let y = 0;\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().numberValue(x);\n          } else if (key === \"y\") {\n            y = item.toValue().numberValue(y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.numberValue(x);\n          } else if (index === 1) {\n            y = item.numberValue(y);\n          }\n        }\n      }, this);\n      return new ScaleTransform(x, y);\n    }\n    return null;\n  }\n\n  static parse(string: string): ScaleTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = ScaleTransformParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {ScaleTransform} from \"./ScaleTransform\";\n\n/** @hidden */\nexport const ScaleTransformInterpolator = function (f0: ScaleTransform, f1: ScaleTransform): Interpolator<ScaleTransform> {\n  const interpolator = function (u: number): ScaleTransform {\n    const f0 = interpolator[0];\n    const f1 = interpolator[1];\n    const x = f0.x + u * (f1.x - f0.x);\n    const y = f0.y + u * (f1.y - f0.y);\n    return new ScaleTransform(x, y);\n  } as Interpolator<ScaleTransform>;\n  Object.setPrototypeOf(interpolator, ScaleTransformInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: f0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: f1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: ScaleTransform, f1: ScaleTransform): Interpolator<ScaleTransform>;\n\n  /** @hidden */\n  prototype: Interpolator<ScaleTransform>;\n};\n\nScaleTransformInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {ScaleTransform} from \"./ScaleTransform\";\n\n/** @hidden */\nexport class ScaleTransformParser extends Parser<ScaleTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<number> | undefined;\n  private readonly yParser: Parser<number> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<number>,\n              yParser?: Parser<number>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<ScaleTransform> {\n    return ScaleTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<number>,\n               yParser?: Parser<number>, step: number = 1): Parser<ScaleTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"scaleX\":\n          case \"scaleY\":\n          case \"scale\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = Base10.parseNumber(input);\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser!.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"scaleX\": return Parser.done(new ScaleTransform(xParser!.bind(), 1));\n            case \"scaleY\": return Parser.done(new ScaleTransform(1, xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = Base10.parseNumber(input);\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"scale\": return Parser.done(new ScaleTransform(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new ScaleTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<ScaleTransform> {\n    return ScaleTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {Angle} from \"../angle/Angle\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {RotateTransformInterpolator} from \"../\"; // forward import\nimport {RotateTransformParser} from \"../\"; // forward import\nimport {AffineTransform} from \"../\"; // forward import\n\nexport class RotateTransform extends Transform {\n  constructor(angle: Angle) {\n    super();\n    Object.defineProperty(this, \"angle\", {\n      value: angle,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly angle: Angle;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else {\n        return Transform.list(this, x as Transform);\n      }\n    } else {\n      const angle = this.angle.radValue();\n      const cosA = Math.cos(angle);\n      const sinA = Math.sin(angle);\n      return new PointR2((x as number) * cosA - y! * sinA,\n                         (x as number) * sinA + y! * cosA);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    const angle = this.angle.radValue();\n    return x * Math.cos(angle) - y * Math.sin(angle);\n  }\n\n  transformY(x: number, y: number): number {\n    const angle = this.angle.radValue();\n    return x * Math.sin(angle) + y * Math.cos(angle);\n  }\n\n  inverse(): Transform {\n    return new RotateTransform(this.angle.negative());\n  }\n\n  toAffine(): AffineTransform {\n    const angle = this.angle.radValue();\n    return new AffineTransform(Math.cos(angle), Math.sin(angle),\n                              -Math.sin(angle), Math.cos(angle),\n                               0, 0);\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      const angle = this.angle.toCssValue();\n      return new CSSRotate(angle!);\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    return Record.create(1).attr(\"rotate\", this.angle.toString());\n  }\n\n  interpolateTo(that: RotateTransform): Interpolator<RotateTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof RotateTransform) {\n      return RotateTransformInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof RotateTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof RotateTransform) {\n      return this.angle.equivalentTo(that.angle, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof RotateTransform) {\n      return this.angle.equals(that.angle);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(RotateTransform), this.angle.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"rotate\")\n        .write(40/*'('*/).debug(this.angle).write(41/*')'*/);\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = \"rotate(\" + this.angle + \")\";\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  toAttributeString(): string {\n    return \"rotate(\" + this.angle.degValue() + \")\";\n  }\n\n  static fromCssTransformComponent(component: CSSRotate): RotateTransform {\n    const angle = Angle.fromCssValue(component.angle);\n    return new RotateTransform(angle);\n  }\n\n  static fromAny(value: RotateTransform | string): RotateTransform {\n    if (value === void 0 || value === null || value instanceof RotateTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return RotateTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): RotateTransform | null {\n    const header = value.header(\"rotate\");\n    if (header.isDefined()) {\n      let angle = Angle.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key === \"angle\") {\n          angle = item.toValue().cast(Angle.form(), angle);\n        } else if (item instanceof Value && index === 0) {\n          angle = item.cast(Angle.form(), angle);\n        }\n      }, this);\n      return new RotateTransform(angle);\n    }\n    return null;\n  }\n\n  static parse(string: string): RotateTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = RotateTransformParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Angle} from \"../angle/Angle\";\nimport {RotateTransform} from \"./RotateTransform\";\n\n/** @hidden */\nexport const RotateTransformInterpolator = function (f0: RotateTransform, f1: RotateTransform): Interpolator<RotateTransform> {\n  const interpolator = function (u: number): RotateTransform {\n    const f0 = interpolator[0];\n    const f1 = interpolator[1];\n    const a = Angle.create(f0.angle.value + u * (f1.angle.value - f0.angle.value), f1.angle.units);\n    return new RotateTransform(a);\n  } as Interpolator<RotateTransform>;\n  Object.setPrototypeOf(interpolator, RotateTransformInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: f0.angle.units === f1.angle.units ? f0 : new RotateTransform(f0.angle.to(f1.angle.units)),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: f1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: RotateTransform, f1: RotateTransform): Interpolator<RotateTransform>;\n\n  /** @hidden */\n  prototype: Interpolator<RotateTransform>;\n};\n\nRotateTransformInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Angle} from \"../angle/Angle\";\nimport {AngleParser} from \"../angle/AngleParser\";\nimport {RotateTransform} from \"./RotateTransform\";\n\n/** @hidden */\nexport class RotateTransformParser extends Parser<RotateTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly angleParser: Parser<Angle> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, angleParser?: Parser<Angle>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.angleParser = angleParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<RotateTransform> {\n    return RotateTransformParser.parse(input, this.identOutput, this.angleParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, angleParser?: Parser<Angle>,\n               step: number = 1): Parser<RotateTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"rotate\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (angleParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          angleParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        angleParser = angleParser.feed(input);\n      }\n      if (angleParser !== void 0) {\n        if (angleParser.isDone()) {\n          step = 4;\n        } else if (angleParser.isError()) {\n          return angleParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"rotate\": return Parser.done(new RotateTransform(angleParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new RotateTransformParser(identOutput, angleParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<RotateTransform> {\n    return RotateTransformParser.parse(input, identOutput, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {Angle} from \"../angle/Angle\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {SkewTransformInterpolator} from \"../\"; // forward import\nimport {SkewTransformParser} from \"../\"; // forward import\nimport {AffineTransform} from \"../\"; // forward import\n\nexport class SkewTransform extends Transform {\n  constructor(x: Angle, y: Angle) {\n    super();\n    Object.defineProperty(this, \"x\", {\n      value: x,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y\", {\n      value: y,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly x: Angle;\n\n  declare readonly y: Angle;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else {\n        return Transform.list(this, x as Transform);\n      }\n    } else {\n      return new PointR2(Math.tan(this.x.radValue()) * y! + (x as number),\n                         Math.tan(this.y.radValue()) * (x as number) + y!);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return Math.tan(this.x.radValue()) * y + x;\n  }\n\n  transformY(x: number, y: number): number {\n    return Math.tan(this.y.radValue()) * x + y;\n  }\n\n  inverse(): Transform {\n    return new SkewTransform(this.x.negative(), this.y.negative());\n  }\n\n  toAffine(): AffineTransform {\n    const x = this.x.radValue();\n    const y = this.y.radValue();\n    return new AffineTransform(1, Math.tan(y), Math.tan(x), 1, 0, 0);\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      const x = this.x.toCssValue();\n      const y = this.y.toCssValue();\n      return new CSSSkew(x!, y!);\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    return Record.create(1)\n                 .attr(\"skew\", Record.create(2).slot(\"x\", this.x.toValue())\n                                               .slot(\"y\", this.y.toValue()));\n  }\n\n  interpolateTo(that: SkewTransform): Interpolator<SkewTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof SkewTransform) {\n      return SkewTransformInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof SkewTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof SkewTransform) {\n      return this.x.equivalentTo(that.x, epsilon)\n          && this.y.equivalentTo(that.y, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof SkewTransform) {\n      return this.x.equals(that.x) && this.y.equals(that.y);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(SkewTransform),\n        this.x.hashCode()), this.y.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"skew\");\n    if (this.x.isDefined() && !this.y.isDefined()) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this.x).write(41/*')'*/);\n    } else if (!this.x.isDefined() && this.y.isDefined()) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this.y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this.x).write(\", \").debug(this.y).write(41/*')'*/);\n    }\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      if (this.x.isDefined() && !this.y.isDefined()) {\n        stringValue = \"skewX(\" + this.x + \")\";\n      } else if (!this.x.isDefined() && this.y.isDefined()) {\n        stringValue = \"skewY(\" + this.y + \")\";\n      } else {\n        stringValue = \"skew(\" + this.x + \",\" + this.y + \")\";\n      }\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  toAttributeString(): string {\n    if (this.x.isDefined() && !this.y.isDefined()) {\n      return \"skewX(\" + this.x.degValue() + \")\";\n    } else if (!this.x.isDefined() && this.y.isDefined()) {\n      return \"skewY(\" + this.y.degValue() + \")\";\n    } else {\n      return \"skew(\" + this.x.degValue() + \",\" + this.y.degValue() + \")\";\n    }\n  }\n\n  static fromCssTransformComponent(component: CSSSkew): SkewTransform {\n    const x = typeof component.ax === \"number\"\n            ? Angle.rad(component.ax)\n            : Angle.fromCssValue(component.ax);\n    const y = typeof component.ay === \"number\"\n            ? Angle.rad(component.ay)\n            : Angle.fromCssValue(component.ay);\n    return new SkewTransform(x, y);\n  }\n\n  static fromAny(value: SkewTransform | string): SkewTransform {\n    if (value === void 0 || value === null || value instanceof SkewTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return SkewTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): SkewTransform | null {\n    const header = value.header(\"skew\");\n    if (header.isDefined()) {\n      let x = Angle.zero();\n      let y = Angle.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().cast(Angle.form(), x);\n          } else if (key === \"y\") {\n            y = item.toValue().cast(Angle.form(), y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.cast(Angle.form(), x);\n          } else if (index === 1) {\n            y = item.cast(Angle.form(), y);\n          }\n        }\n      }, this);\n      return new SkewTransform(x, y);\n    }\n    return null;\n  }\n\n  static parse(string: string): SkewTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = SkewTransformParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {Angle} from \"../angle/Angle\";\nimport {SkewTransform} from \"./SkewTransform\";\n\n/** @hidden */\nexport const SkewTransformInterpolator = function (f0: SkewTransform, f1: SkewTransform): Interpolator<SkewTransform> {\n  const interpolator = function (u: number): SkewTransform {\n    const f0 = interpolator[0];\n    const f1 = interpolator[1];\n    const x = Angle.create(f0.x.value + u * (f1.x.value - f0.x.value), f1.x.units);\n    const y = Angle.create(f0.y.value + u * (f1.y.value - f0.y.value), f1.y.units);\n    return new SkewTransform(x, y);\n  } as Interpolator<SkewTransform>;\n  Object.setPrototypeOf(interpolator, SkewTransformInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: f0.x.units === f1.x.units && f0.y.units === f1.y.units\n         ? f0 : new SkewTransform(f0.x.to(f1.x.units), f0.y.to(f1.y.units)),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: f1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: SkewTransform, f1: SkewTransform): Interpolator<SkewTransform>;\n\n  /** @hidden */\n  prototype: Interpolator<SkewTransform>;\n};\n\nSkewTransformInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Angle} from \"../angle/Angle\";\nimport {DegAngle} from \"../angle/DegAngle\";\nimport {AngleParser} from \"../angle/AngleParser\";\nimport {SkewTransform} from \"./SkewTransform\";\n\n/** @hidden */\nexport class SkewTransformParser extends Parser<SkewTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<Angle> | undefined;\n  private readonly yParser: Parser<Angle> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<Angle>,\n              yParser?: Parser<Angle>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<SkewTransform> {\n    return SkewTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<Angle>,\n               yParser?: Parser<Angle>, step: number = 1): Parser<SkewTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"skewX\":\n          case \"skewY\":\n          case \"skew\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"skewX\": return Parser.done(new SkewTransform(xParser!.bind(), DegAngle.zero()));\n            case \"skewY\": return Parser.done(new SkewTransform(DegAngle.zero(), xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"skew\": return Parser.done(new SkewTransform(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new SkewTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<SkewTransform> {\n    return SkewTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {AffineTransformInterpolator} from \"../\"; // forward import\nimport {AffineTransformParser} from \"../\"; // forward import\n\nexport class AffineTransform extends Transform {\n  constructor(x0: number, y0: number, x1: number, y1: number, tx: number, ty: number) {\n    super();\n    Object.defineProperty(this, \"x0\", {\n      value: x0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y0\", {\n      value: y0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"x1\", {\n      value: x1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"y1\", {\n      value: y1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"tx\", {\n      value: tx,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ty\", {\n      value: ty,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly x0: number;\n\n  declare readonly y0: number;\n\n  declare readonly x1: number;\n\n  declare readonly y1: number;\n\n  declare readonly tx: number;\n\n  declare readonly ty: number;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else {\n        return this.multiply((x as Transform).toAffine());\n      }\n    } else {\n      return new PointR2(this.x0 * (x as number) + this.x1 * y! + this.tx,\n                         this.y0 * (x as number) + this.y1 * y! + this.ty);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return this.x0 * x + this.x1 * y + this.tx;\n  }\n\n  transformY(x: number, y: number): number {\n    return this.y0 * x + this.y1 * y + this.ty;\n  }\n\n  inverse(): Transform {\n    const m00 = this.x0;\n    const m10 = this.y0;\n    const m01 = this.x1;\n    const m11 = this.y1;\n    const m02 = this.tx;\n    const m12 = this.ty;\n    const det = m00 * m11 - m01 * m10;\n    if (Math.abs(det) >= Number.MIN_VALUE) {\n      return new AffineTransform( m11 / det, -m10 / det,\n                                 -m01 / det,  m00 / det,\n                                 (m01 * m12 - m11 * m02) / det,\n                                 (m10 * m02 - m00 * m12) / det);\n    } else {\n      throw new Error(\"non-invertible affine transform with determinant \" + det);\n    }\n  }\n\n  multiply(that: AffineTransform): AffineTransform {\n    const x0 = this.x0 * that.x0 + this.x1 * that.y0;\n    const y0 = this.y0 * that.x0 + this.y1 * that.y0;\n    const x1 = this.x0 * that.x1 + this.x1 * that.y1;\n    const y1 = this.y0 * that.x1 + this.y1 * that.y1;\n    const tx = this.x0 * that.tx + this.x1 * that.ty;\n    const ty = this.y0 * that.tx + this.y1 * that.ty;\n    return new AffineTransform(x0, y0, x1, y1, tx, ty);\n  }\n\n  toAffine(): AffineTransform {\n    return this;\n  }\n\n  toMatrix(): DOMMatrix {\n    return new DOMMatrix([this.x0, this.y0, this.x1, this.y1, this.tx, this.ty]);\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      return new CSSMatrixComponent(this.toMatrix());\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    return Record.create(1)\n                 .attr(\"matrix\", Record.create(6).item(this.x0).item(this.y0)\n                                                 .item(this.x1).item(this.y1)\n                                                 .item(this.tx).item(this.ty));\n  }\n\n  interpolateTo(that: AffineTransform): Interpolator<AffineTransform>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof AffineTransform) {\n      return AffineTransformInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof AffineTransform;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof AffineTransform) {\n      return Numbers.equivalent(this.x0, that.x0, epsilon)\n          && Numbers.equivalent(this.y0, that.y0, epsilon)\n          && Numbers.equivalent(this.x1, that.x1, epsilon)\n          && Numbers.equivalent(this.y1, that.y1, epsilon)\n          && Numbers.equivalent(this.tx, that.tx, epsilon)\n          && Numbers.equivalent(this.ty, that.ty, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof AffineTransform) {\n      return this.x0 === that.x0 && this.y0 === that.y0\n          && this.x1 === that.x1 && this.y1 === that.y1\n          && this.tx === that.tx && this.ty === that.ty;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Murmur3.mix(Murmur3.mix(Constructors.hash(AffineTransform),\n        Numbers.hash(this.x0)), Numbers.hash(this.y0)),\n        Numbers.hash(this.x1)), Numbers.hash(this.y1)),\n        Numbers.hash(this.tx)), Numbers.hash(this.ty)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"affine\").write(40/*'('*/)\n        .debug(this.x0).write(\", \").debug(this.y0).write(\", \")\n        .debug(this.x1).write(\", \").debug(this.y1).write(\", \")\n        .debug(this.tx).write(\", \").debug(this.ty).write(41/*')'*/);\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      stringValue = \"matrix(\" + this.x0 + \",\" + this.y0 + \",\"\n                              + this.x1 + \",\" + this.y1 + \",\"\n                              + this.tx + \",\" + this.ty + \")\";\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  @Lazy\n  static identity(): AffineTransform {\n    return new AffineTransform(1, 0, 0, 1, 0, 0);\n  }\n\n  static fromAny(value: AffineTransform | string): AffineTransform {\n    if (value === void 0 || value === null || value instanceof AffineTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return AffineTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromMatrix(matrix: DOMMatrixReadOnly): AffineTransform {\n    return new AffineTransform(matrix.a, matrix.b, matrix.c, matrix.d, matrix.e, matrix.f);\n  }\n\n  static fromCssTransformComponent(component: CSSMatrixComponent): AffineTransform {\n    return AffineTransform.fromMatrix(component.matrix);\n  }\n\n  static fromValue(value: Value): AffineTransform | null {\n    const header = value.header(\"matrix\");\n    if (header.isDefined()) {\n      let x0 = 0;\n      let y0 = 0;\n      let x1 = 0;\n      let y1 = 0;\n      let tx = 0;\n      let ty = 0;\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x0\") {\n            x0 = item.toValue().numberValue(x0);\n          } else if (key === \"y0\") {\n            y0 = item.toValue().numberValue(y0);\n          } else if (key === \"x1\") {\n            x1 = item.toValue().numberValue(x1);\n          } else if (key === \"y1\") {\n            y1 = item.toValue().numberValue(y1);\n          } else if (key === \"tx\") {\n            tx = item.toValue().numberValue(tx);\n          } else if (key === \"ty\") {\n            ty = item.toValue().numberValue(ty);\n          }\n        } else if (item instanceof Value) {\n          switch (index) {\n            case 0: x0 = item.numberValue(x0); break;\n            case 1: y0 = item.numberValue(y0); break;\n            case 2: x1 = item.numberValue(x1); break;\n            case 3: y1 = item.numberValue(y1); break;\n            case 4: tx = item.numberValue(tx); break;\n            case 5: ty = item.numberValue(ty); break;\n            default:\n          }\n        }\n      }, this);\n      return new AffineTransform(x0, y0, x1, y1, tx, ty);\n    }\n    return null;\n  }\n\n  static parse(string: string): AffineTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = AffineTransformParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {AffineTransform} from \"./AffineTransform\";\n\n/** @hidden */\nexport const AffineTransformInterpolator = function (f0: AffineTransform, f1: AffineTransform): Interpolator<AffineTransform> {\n  const interpolator = function (u: number): AffineTransform {\n    // TODO: interpolate and recompose matrices\n    const f0 = interpolator[0];\n    const f1 = interpolator[1];\n    const x0 = f0.x0 + u * (f1.x0 - f0.x0);\n    const y0 = f0.y0 + u * (f1.y0 - f0.y0);\n    const x1 = f0.x1 + u * (f1.x1 - f0.x1);\n    const y1 = f0.y1 + u * (f1.y1 - f0.y1);\n    const tx = f0.tx + u * (f1.tx - f0.tx);\n    const ty = f0.ty + u * (f1.ty - f0.ty);\n    return new AffineTransform(x0, y0, x1, y1, tx, ty);\n  } as Interpolator<AffineTransform>;\n  Object.setPrototypeOf(interpolator, AffineTransformInterpolator.prototype);\n  // TODO: decompose matrices\n  Object.defineProperty(interpolator, 0, {\n    value: f0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: f1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: AffineTransform, f1: AffineTransform): Interpolator<AffineTransform>;\n\n  /** @hidden */\n  prototype: Interpolator<AffineTransform>;\n};\n\nAffineTransformInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\nimport type {AffineTransform} from \"./AffineTransform\";\n\n/** @hidden */\nexport class AffineTransformParser extends Parser<AffineTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly entries: number[] | undefined;\n  private readonly entryParser: Parser<number> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, entries?: number[],\n              entryParser?: Parser<number>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.entries = entries;\n    this.entryParser = entryParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<AffineTransform> {\n    return AffineTransformParser.parse(input, this.identOutput, this.entries, this.entryParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, entries: number[] = [],\n               entryParser?: Parser<number>, step: number = 1): Parser<AffineTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"matrix\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    do {\n      if (step === 3) {\n        if (entryParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            entryParser = Base10.parseNumber(input);\n          }\n        } else {\n          entryParser = entryParser.feed(input);\n        }\n        if (entryParser !== void 0) {\n          if (entryParser.isDone()) {\n            entries.push(entryParser.bind());\n            entryParser = void 0;\n            step = 4;\n          } else if (entryParser.isError()) {\n            return entryParser.asError();\n          }\n        }\n      }\n      if (step === 4) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 41/*')'*/) {\n            input.step();\n            const ident = identOutput!.bind();\n            switch (ident) {\n              case \"matrix\": return Parser.done(Transform.affine(...entries));\n              default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n            }\n          } else if (entries.length >= 6) {\n            return Parser.error(Diagnostic.expected(\")\", input));\n          } else if (c === 44/*','*/) {\n            input.step();\n            step = 3;\n            continue;\n          } else {\n            return Parser.error(Diagnostic.expected(\",\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      break;\n    } while (true);\n    return new AffineTransformParser(identOutput, entries, entryParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<AffineTransform> {\n    return AffineTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport type {Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {PointR2} from \"../r2/PointR2\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {TransformListInterpolator} from \"../\"; // forward import\n\nexport class TransformList extends Transform {\n  constructor(transforms: ReadonlyArray<Transform>) {\n    super();\n    Object.defineProperty(this, \"transforms\", {\n      value: transforms,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"stringValue\", {\n      value: void 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly transforms: ReadonlyArray<Transform>;\n\n  transform(that: Transform): Transform;\n  transform(x: number, y: number): PointR2;\n  transform(x: Transform | number, y?: number): Transform | PointR2 {\n    if (arguments.length === 1) {\n      if (x instanceof IdentityTransform) {\n        return this;\n      } else {\n        return Transform.list(this, x as Transform);\n      }\n    } else {\n      const transforms = this.transforms;\n      for (let i = 0, n = transforms.length; i < n; i += 1) {\n        const transform = transforms[i]!;\n        const xi = transform.transformX(x as number, y!);\n        const yi = transform.transformY(x as number, y!);\n        x = xi;\n        y = yi;\n      }\n      return new PointR2(x as number, y!);\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    const transforms = this.transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      const transform = transforms[i]!;\n      const xi = transform.transformX(x, y);\n      const yi = transform.transformY(x, y);\n      x = xi;\n      y = yi;\n    }\n    return x;\n  }\n\n  transformY(x: number, y: number): number {\n    const transforms = this.transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      const transform = transforms[i]!;\n      const xi = transform.transformX(x, y);\n      const yi = transform.transformY(x, y);\n      x = xi;\n      y = yi;\n    }\n    return y;\n  }\n\n  inverse(): Transform {\n    const transforms = this.transforms;\n    const n = transforms.length;\n    const inverseTransforms = new Array<Transform>(n);\n    for (let i = 0; i < n; i += 1) {\n      inverseTransforms[i] = transforms[n - i - 1]!.inverse();\n    }\n    return new TransformList(inverseTransforms);\n  }\n\n  toAffine(): AffineTransform {\n    let matrix = AffineTransform.identity();\n    const transforms = this.transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      matrix = matrix.multiply(transforms[i]!.toAffine());\n    }\n    return matrix;\n  }\n\n  toCssTransformComponent(): CSSTransformComponent | null {\n    if (typeof CSSTranslate !== \"undefined\") {\n      return new CSSMatrixComponent(this.toMatrix());\n    }\n    return null;\n  }\n\n  toCssValue(): CSSStyleValue | null {\n    if (typeof CSSTransformValue !== \"undefined\") {\n      const transforms = this.transforms;\n      const n = transforms.length;\n      const components = new Array<CSSTransformComponent>(n);\n      for (let i = 0, n = transforms.length; i < n; i += 1) {\n        const transform = transforms[i]!;\n        const component = transform.toCssTransformComponent();\n        if (component !== null) {\n          components[i] = component;\n        } else {\n          return null;\n        }\n      }\n      return new CSSTransformValue(components);\n    }\n    return null;\n  }\n\n  toValue(): Value {\n    const transforms = this.transforms;\n    const n = transforms.length;\n    const record = Record.create(n);\n    for (let i = 0; i < n; i += 1) {\n      record.push(transforms[i]!.toValue());\n    }\n    return record;\n  }\n\n  interpolateTo(that: TransformList): Interpolator<TransformList>;\n  interpolateTo(that: Transform): Interpolator<Transform>;\n  interpolateTo(that: unknown): Interpolator<Transform> | null;\n  interpolateTo(that: unknown): Interpolator<Transform> | null {\n    if (that instanceof TransformList) {\n      return TransformListInterpolator(this, that);\n    } else {\n      return super.interpolateTo(that);\n    }\n  }\n\n  conformsTo(that: Transform): boolean {\n    if (that instanceof TransformList) {\n      const n = this.transforms.length;\n      if (n === that.transforms.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this.transforms[i]!.conformsTo(that.transforms[i]!)) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (that instanceof TransformList) {\n      const n = this.transforms.length;\n      if (n === that.transforms.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this.transforms[i]!.equivalentTo(that.transforms[i]!, epsilon)) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof TransformList) {\n      const n = this.transforms.length;\n      if (n === that.transforms.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this.transforms[i]!.equals(that.transforms[i]!)) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    let hashValue = Constructors.hash(TransformList);\n    const transforms = this.transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      hashValue = Murmur3.mix(hashValue, transforms[i]!.hashCode());\n    }\n    return Murmur3.mash(hashValue);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"list\").write(40/*'('*/);\n    const transforms = this.transforms;\n    const n = transforms.length;\n    if (n > 0) {\n      output = output.debug(transforms[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(transforms[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  /** @hidden */\n  declare readonly stringValue: string | undefined;\n\n  toString(): string {\n    let stringValue = this.stringValue;\n    if (stringValue === void 0) {\n      const transforms = this.transforms;\n      const n = transforms.length;\n      if (n > 0) {\n        stringValue = transforms[0]!.toString();\n        for (let i = 1; i < n; i += 1) {\n          stringValue += \" \";\n          stringValue += transforms[i]!.toString();\n        }\n      } else {\n        stringValue = \"none\";\n      }\n      Object.defineProperty(this, \"stringValue\", {\n        value: stringValue,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return stringValue;\n  }\n\n  toAttributeString(): string {\n    const transforms = this.transforms;\n    const n = transforms.length;\n    if (n > 0) {\n      let s = transforms[0]!.toAttributeString();\n      for (let i = 1; i < n; i += 1) {\n        s += \" \";\n        s += transforms[i]!.toAttributeString();\n      }\n      return s;\n    } else {\n      return \"\";\n    }\n  }\n\n  static fromAny(value: TransformList | string): TransformList {\n    if (value === void 0 || value === null || value instanceof TransformList) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return TransformList.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): TransformList | null {\n    const transforms: Transform[] = [];\n    value.forEach(function (item: Item) {\n      const transform = Transform.fromValue(item.toValue());\n      if (transform !== null) {\n        transforms.push(transform);\n      }\n    }, this);\n    if (transforms.length !== 0) {\n      return new TransformList(transforms);\n    }\n    return null;\n  }\n\n  static parse(string: string): TransformList {\n    const transform = Transform.parse(string);\n    if (transform instanceof TransformList) {\n      return transform;\n    } else {\n      return new TransformList([transform]);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport type {Transform} from \"./Transform\";\nimport {TransformList} from \"./TransformList\";\n\n/** @hidden */\nexport interface TransformListInterpolator extends Interpolator<TransformList> {\n  /** @hidden */\n  readonly interpolators: ReadonlyArray<Interpolator<Transform>>;\n\n  readonly 0: TransformList;\n\n  readonly 1: TransformList;\n\n  equals(that: unknown): boolean;\n}\n\n/** @hidden */\nexport const TransformListInterpolator = function (f0: TransformList, f1: TransformList): TransformListInterpolator {\n  const interpolator = function (u: number): TransformList {\n    const interpolators = interpolator.interpolators;\n    const interpolatorCount = interpolators.length;\n    const transforms = new Array<Transform>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      transforms[i] = interpolators[i]!(u);\n    }\n    return new TransformList(transforms);\n  } as TransformListInterpolator;\n  Object.setPrototypeOf(interpolator, TransformListInterpolator.prototype);\n  const transforms0 = f0.transforms;\n  const transforms1 = f1.transforms;\n  const interpolatorCount = Math.min(transforms0.length, transforms1.length);\n  const interpolators = new Array<Interpolator<Transform>>(interpolatorCount);\n  for (let i = 0; i < interpolatorCount; i += 1) {\n    interpolators[i] = transforms0[i]!.interpolateTo(transforms1[i]!);\n  }\n  Object.defineProperty(interpolator, \"interpolators\", {\n    value: interpolators,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (f0: TransformList, f1: TransformList): TransformListInterpolator;\n\n  /** @hidden */\n  prototype: TransformListInterpolator;\n};\n\nTransformListInterpolator.prototype = Object.create(Interpolator.prototype);\n\nObject.defineProperty(TransformListInterpolator.prototype, 0, {\n  get(this: TransformListInterpolator): TransformList {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const transforms = new Array<Transform>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      transforms[i] = interpolators[i]![0];\n    }\n    return new TransformList(transforms);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(TransformListInterpolator.prototype, 1, {\n  get(this: TransformListInterpolator): TransformList {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const transforms = new Array<Transform>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      transforms[i] = interpolators[i]![1];\n    }\n    return new TransformList(transforms);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nTransformListInterpolator.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof TransformListInterpolator) {\n    const n = this.interpolators.length;\n    if (n === that.interpolators.length) {\n      for (let i = 0; i < n; i += 1) {\n        if (!this.interpolators[i]!.equals(that.interpolators[i]!)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Unicode} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\nimport {TransformParser} from \"./TransformParser\";\n\n/** @hidden */\nexport class TransformListParser extends Parser<Transform> {\n  private readonly transform: Transform | undefined;\n  private readonly transformParser: Parser<Transform> | undefined;\n\n  constructor(transform?: Transform, transformParser?: Parser<Transform>) {\n    super();\n    this.transform = transform;\n    this.transformParser = transformParser;\n  }\n\n  feed(input: Input): Parser<Transform> {\n    return TransformListParser.parse(input, this.transform, this.transformParser);\n  }\n\n  static parse(input: Input, transform: Transform = Transform.identity(),\n               transformParser?: Parser<Transform>): Parser<Transform> {\n    do {\n      if (transformParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (input.isCont()) {\n          transformParser = TransformParser.parse(input);\n        } else if (input.isDone()) {\n          return Parser.done(transform);\n        }\n      }\n      if (transformParser !== void 0) {\n        transformParser = transformParser.feed(input);\n        if (transformParser.isDone()) {\n          transform = transform.transform(transformParser.bind());\n          transformParser = void 0;\n          continue;\n        } else if (transformParser.isError()) {\n          return transformParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new TransformListParser(transform, transformParser);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {AnyPointR2, PointR2} from \"@swim/math\";\nimport type {GeoBox} from \"./GeoBox\";\nimport type {AnyGeoPoint, GeoPoint} from \"./GeoPoint\";\n\nexport interface GeoProjection {\n  readonly bounds: GeoBox;\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n}\n\nexport const GeoProjection = {} as {\n  is(object: unknown): object is GeoProjection;\n};\n\nGeoProjection.is = function (object: unknown): object is GeoProjection {\n  if (typeof object === \"object\" && object !== null) {\n    const projection = object as GeoProjection;\n    return typeof projection.project === \"function\"\n        && typeof projection.unproject === \"function\";\n  }\n  return false;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Equals} from \"@swim/util\";\nimport type {ShapeR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {GeoPointInit, GeoPointTuple, GeoPoint} from \"./\"; // forward import\nimport {GeoSegmentInit, GeoSegment} from \"./\"; // forward import\nimport {GeoBoxInit, GeoBox} from \"./\"; // forward import\n\nexport type AnyGeoShape = GeoShape | GeoPointInit | GeoPointTuple | GeoSegmentInit | GeoBoxInit;\n\nexport abstract class GeoShape implements Equals {\n  abstract readonly lngMin: number;\n\n  abstract readonly latMin: number;\n\n  abstract readonly lngMax: number;\n\n  abstract readonly latMax: number;\n\n  abstract contains(that: AnyGeoShape): boolean;\n\n  abstract contains(lng: number, lat: number): boolean;\n\n  abstract intersects(that: AnyGeoShape): boolean;\n\n  union(that: AnyGeoShape): GeoShape {\n    that = GeoShape.fromAny(that);\n    return new GeoBox(Math.min(this.lngMin, that.lngMin),\n                      Math.min(this.latMin, that.latMin),\n                      Math.max(this.lngMax, that.lngMax),\n                      Math.max(this.latMax, that.latMax));\n  }\n\n  abstract project(f: GeoProjection): ShapeR2;\n\n  get bounds(): GeoBox {\n    return new GeoBox(this.lngMin, this.latMin, this.lngMax, this.latMax);\n  }\n\n  abstract equals(that: unknown): boolean;\n\n  static fromAny(value: AnyGeoShape): GeoShape {\n    if (value === void 0 || value === null || value instanceof GeoShape) {\n      return value;\n    } else if (GeoPoint.isInit(value)) {\n      return GeoPoint.fromInit(value);\n    } else if (GeoPoint.isTuple(value)) {\n      return GeoPoint.fromTuple(value);\n    } else if (GeoSegment.isInit(value)) {\n      return GeoSegment.fromInit(value);\n    } else if (GeoBox.isInit(value)) {\n      return GeoBox.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyGeoShape {\n    return value instanceof GeoShape\n        || GeoPoint.isInit(value)\n        || GeoPoint.isTuple(value)\n        || GeoSegment.isInit(value)\n        || GeoBox.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport type {PointR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {GeoPointInterpolator} from \"./\"; // forward import\n\nexport type AnyGeoPoint = GeoPoint | GeoPointInit | GeoPointTuple;\n\nexport interface GeoPointInit {\n  lng: number;\n  lat: number;\n}\n\nexport type GeoPointTuple = [number, number];\n\n/**\n * A geographic point represented by a WGS84 longitude and latitude.\n */\nexport class GeoPoint extends GeoShape implements Interpolate<GeoPoint>, HashCode, Equivalent, Debug {\n  constructor(lng: number, lat: number) {\n    super();\n    Object.defineProperty(this, \"lng\", {\n      value: lng,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lat\", {\n      value: lat,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.lng) && isFinite(this.lat);\n  }\n\n  declare readonly lng: number;\n\n  declare readonly lat: number;\n\n  get lngMin(): number {\n    return this.lng;\n  }\n\n  get latMin(): number {\n    return this.lat;\n  }\n\n  get lngMax(): number {\n    return this.lng;\n  }\n\n  get latMax(): number {\n    return this.lat;\n  }\n\n  contains(that: AnyGeoShape): boolean;\n  contains(lng: number, lat: number): boolean;\n  contains(that: AnyGeoShape | number, lat?: number): boolean {\n    if (typeof that === \"number\") {\n      return this.lng === that && this.lat === lat!;\n    } else {\n      that = GeoShape.fromAny(that);\n      if (that instanceof GeoPoint) {\n        return this.lng === that.lng && this.lat === that.lat;\n      } else if (that instanceof GeoShape) {\n        return this.lng <= that.lngMin && that.lngMax <= this.lng\n            && this.lat <= that.latMin && that.latMax <= this.lat;\n      }\n      return false;\n    }\n  }\n\n  intersects(that: AnyGeoShape): boolean {\n    that = GeoShape.fromAny(that);\n    return (that as GeoShape).intersects(this);\n  }\n\n  project(f: GeoProjection): PointR2 {\n    return f.project(this);\n  }\n\n  normalized(): GeoPoint {\n    const oldLng = this.lng;\n    const oldLat = this.lat;\n    const newLng = GeoPoint.normalizeLng(oldLng);\n    const newLat = GeoPoint.normalizeLat(oldLat);\n    if (oldLng === newLng && oldLat === newLat) {\n      return this;\n    } else {\n      return new GeoPoint(newLng, newLat);\n    }\n  }\n\n  toAny(): GeoPointInit {\n    return {\n      lng: this.lng,\n      lat: this.lat,\n    };\n  }\n\n  interpolateTo(that: GeoPoint): Interpolator<GeoPoint>;\n  interpolateTo(that: unknown): Interpolator<GeoPoint> | null;\n  interpolateTo(that: unknown): Interpolator<GeoPoint> | null {\n    if (that instanceof GeoPoint) {\n      return GeoPointInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoPoint) {\n      return Numbers.equivalent(this.lng, that.lng, epsilon)\n          && Numbers.equivalent(this.lat, that.lat, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoPoint) {\n      return this.lng === that.lng && this.lat === that.lat;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(GeoPoint),\n        Numbers.hash(this.lng)), Numbers.hash(this.lat)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"GeoPoint\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.lng).write(\", \").debug(this.lat).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static origin(): GeoPoint {\n    return new GeoPoint(0, 0);\n  }\n\n  @Lazy\n  static undefined(): GeoPoint {\n    return new GeoPoint(NaN, NaN);\n  }\n\n  static of(lng: number, lat: number): GeoPoint {\n    return new GeoPoint(lng, lat);\n  }\n\n  static fromInit(value: GeoPointInit): GeoPoint {\n    return new GeoPoint(value.lng, value.lat);\n  }\n\n  static fromTuple(value: GeoPointTuple): GeoPoint {\n    return new GeoPoint(value[0], value[1]);\n  }\n\n  static fromAny(value: AnyGeoPoint): GeoPoint {\n    if (value === void 0 || value === null || value instanceof GeoPoint) {\n      return value;\n    } else if (GeoPoint.isInit(value)) {\n      return GeoPoint.fromInit(value);\n    } else if (GeoPoint.isTuple(value)) {\n      return GeoPoint.fromTuple(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static normalized(lng: number, lat: number): GeoPoint {\n    lng = GeoPoint.normalizeLng(lng);\n    lat = GeoPoint.normalizeLat(lat);\n    return new GeoPoint(lng, lat);\n  }\n\n  /** @hidden */\n  static normalizeLng(lng: number): number {\n    if (lng < -180) {\n      lng = 180 - (-lng + 180) % 360;\n    } else if (lng > 180) {\n      lng = -180 + (lng - 180) % 360;\n    }\n    return lng;\n  }\n\n  /** @hidden */\n  static normalizeLat(lat: number): number {\n    lat = Math.min(Math.max(-90, lat), 90);\n    return lat;\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is GeoPointInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as GeoPointInit;\n      return typeof init.lng === \"number\"\n          && typeof init.lat === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isTuple(value: unknown): value is GeoPointTuple {\n    return Array.isArray(value)\n        && value.length === 2\n        && typeof value[0] === \"number\"\n        && typeof value[1] === \"number\";\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyGeoPoint {\n    return value instanceof GeoPoint\n        || GeoPoint.isInit(value)\n        || GeoPoint.isTuple(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {GeoPoint} from \"./GeoPoint\";\n\n/** @hidden */\nexport const GeoPointInterpolator = function (p0: GeoPoint, p1: GeoPoint): Interpolator<GeoPoint> {\n  const interpolator = function (u: number): GeoPoint {\n    const p0 = interpolator[0];\n    const lng0 = p0.lng;\n    const lat0 = p0.lat;\n    const p1 = interpolator[1];\n    const lng1 = p1.lng;\n    const lat1 = p1.lat;\n    let lng: number;\n    if (lng0 > 0 && lng1 < 0 && lng0 - lng1 > 180) {\n      // east across anti-meridian\n      const w = 180 - lng0;\n      const e = 180 + lng1;\n      const uw = w / (w + e);\n      if (u < uw) {\n        lng = lng0 + (u / uw) * w;\n      } else {\n        const ue = 1 - uw;\n        lng = -180 + ((u - uw) / ue) * e;\n      }\n    } else if (lng0 < 0 && lng1 > 0 && lng1 - lng0 > 180) {\n      // west across anti-meridian\n      const e = 180 + lng0;\n      const w = 180 - lng1;\n      const ue = e / (e + w);\n      if (u < ue) {\n        lng = lng0 - (u / ue) * e;\n      } else {\n        const uw = 1 - ue;\n        lng = 180 - ((u - ue) / uw) * w;\n      }\n    } else {\n      lng = lng0 + u * (lng1 - lng0);\n    }\n    const lat = lat0 + u * (lat1 - lat0);\n    return new GeoPoint(lng, lat);\n  } as Interpolator<GeoPoint>;\n  Object.setPrototypeOf(interpolator, GeoPointInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: p0.normalized(),\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: p1.normalized(),\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (p0: GeoPoint, p1: GeoPoint): Interpolator<GeoPoint>;\n\n  /** @hidden */\n  prototype: Interpolator<GeoPoint>;\n};\n\nGeoPointInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Equivalent, Equals} from \"@swim/util\";\nimport type {CurveR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {GeoShape} from \"./GeoShape\";\nimport type {GeoPoint} from \"./GeoPoint\";\n\nexport abstract class GeoCurve extends GeoShape implements Equals, Equivalent {\n  abstract interpolateLng(u: number): number;\n\n  abstract interpolateLat(u: number): number;\n\n  abstract interpolate(u: number): GeoPoint;\n\n  abstract split(u: number): [GeoCurve, GeoCurve];\n\n  abstract project(f: GeoProjection): CurveR2;\n\n  abstract forEachCoord<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  abstract forEachCoord<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                              thisArg: S): R | undefined;\n\n  abstract forEachCoordRest<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  abstract forEachCoordRest<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                                  thisArg: S): R | undefined;\n\n  abstract equivalentTo(that: unknown, epsilon?: number): boolean;\n\n  abstract equals(that: unknown): boolean;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {SegmentR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {GeoPoint} from \"./GeoPoint\";\nimport {GeoCurve} from \"./GeoCurve\";\nimport {GeoSegmentInterpolator} from \"./\"; // forward import\n\nexport type AnyGeoSegment = GeoSegment | GeoSegmentInit;\n\nexport interface GeoSegmentInit {\n  lng0: number;\n  lat0: number;\n  lng1: number;\n  lat1: number;\n}\n\nexport class GeoSegment extends GeoCurve implements Interpolate<GeoSegment>, HashCode, Debug {\n  constructor(lng0: number, lat0: number, lng1: number, lat1: number) {\n    super();\n    Object.defineProperty(this, \"lng0\", {\n      value: lng0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lat0\", {\n      value: lat0,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lng1\", {\n      value: lng1,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lat1\", {\n      value: lat1,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.lng0) && isFinite(this.lat0)\n        && isFinite(this.lng1) && isFinite(this.lat1);\n  }\n\n  declare readonly lng0: number;\n\n  declare readonly lat0: number;\n\n  declare readonly lng1: number;\n\n  declare readonly lat1: number;\n\n  get lngMin(): number {\n    return Math.min(this.lng0, this.lng1);\n  }\n\n  get latMin(): number {\n    return Math.min(this.lat0, this.lat1);\n  }\n\n  get lngMax(): number {\n    return Math.max(this.lng0, this.lng1);\n  }\n\n  get latMax(): number {\n    return Math.max(this.lat0, this.lat1);\n  }\n\n  interpolateLng(u: number): number {\n    return (1.0 - u) * this.lng0 + u * this.lng1;\n  }\n\n  interpolateLat(u: number): number {\n   return (1.0 - u) * this.lat0 + u * this.lat1;\n  }\n\n  interpolate(u: number): GeoPoint {\n    const v = 1.0 - u;\n    const lng01 = v * this.lng0 + u * this.lng1;\n    const lat01 = v * this.lat0 + u * this.lat1;\n    return new GeoPoint(lng01, lat01);\n  }\n\n  contains(that: AnyGeoShape): boolean;\n  contains(lng: number, lat: number): boolean;\n  contains(that: AnyGeoShape | number, lat?: number): boolean {\n    if (typeof that === \"number\") {\n      return SegmentR2.contains(this.lng0, this.lat0, this.lng1, this.lat1, that, lat!);\n    } else {\n      that = GeoShape.fromAny(that);\n      if (that instanceof GeoPoint) {\n        return this.containsPoint(that);\n      } else if (that instanceof GeoSegment) {\n        return this.containsSegment(that);\n      }\n      return false;\n    }\n  }\n\n  /** @hidden */\n  containsPoint(that: GeoPoint): boolean {\n    return SegmentR2.contains(this.lng0, this.lat0, this.lng1, this.lat1, that.lng, that.lat);\n  }\n\n  /** @hidden */\n  containsSegment(that: GeoSegment): boolean {\n    return SegmentR2.contains(this.lng0, this.lat0, this.lng1, this.lat1, that.lng0, that.lat0)\n        && SegmentR2.contains(this.lng0, this.lat0, this.lng1, this.lat1, that.lng1, that.lat1);\n  }\n\n  intersects(that: AnyGeoShape): boolean {\n    that = GeoShape.fromAny(that);\n    if (that instanceof GeoPoint) {\n      return this.intersectsPoint(that);\n    } else if (that instanceof GeoSegment) {\n      return this.intersectsSegment(that);\n    } else {\n      return (that as GeoShape).intersects(this);\n    }\n    return false;\n  }\n\n  /** @hidden */\n  intersectsPoint(that: GeoPoint): boolean {\n    return SegmentR2.contains(this.lng0, this.lat0, this.lng1, this.lat1, that.lng, that.lat);\n  }\n\n  /** @hidden */\n  intersectsSegment(that: GeoSegment): boolean {\n    return SegmentR2.intersects(this.lng0, this.lat0, this.lng1 - this.lat0, this.lng1 - this.lat0,\n                                that.lng0, that.lat0, that.lng1 - that.lat0, that.lng1 - that.lat0);\n  }\n\n  split(u: number): [GeoSegment, GeoSegment] {\n    const v = 1.0 - u;\n    const lng01 = v * this.lng0 + u * this.lng1;\n    const lat01 = v * this.lat0 + u * this.lat1;\n    const c0 = new GeoSegment(this.lng0, this.lat0, lng01, lat01);\n    const c1 = new GeoSegment(lng01, lat01, this.lng1, this.lat1);\n    return [c0, c1];\n  }\n\n  project(f: GeoProjection): SegmentR2 {\n    const p0 = f.project(this.lng0, this.lat0);\n    const p1 = f.project(this.lng1, this.lat1);\n    return new SegmentR2(p0.x, p0.y, p1.x, p1.y);\n  }\n\n  forEachCoord<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  forEachCoord<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                     thisArg: S): R | undefined;\n  forEachCoord<R, S>(callback: (this: S | undefined, lng: number, lat: number) => R | undefined,\n                     thisArg?: S): R | undefined {\n    let result: R | void;\n    result = callback.call(thisArg, this.lng0, this.lat0);\n    if (result !== void 0) {\n      return result;\n    }\n    result = callback.call(thisArg, this.lng1, this.lat1);\n    if (result !== void 0) {\n      return result;\n    }\n    return void 0;\n  }\n\n  forEachCoordRest<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  forEachCoordRest<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                         thisArg: S): R | undefined;\n  forEachCoordRest<R, S>(callback: (this: S | undefined, lng: number, lat: number) => R | void,\n                         thisArg?: S): R | undefined {\n    const result = callback.call(thisArg, this.lng1, this.lat1);\n    if (result !== void 0) {\n      return result;\n    }\n    return void 0;\n  }\n\n  toAny(): GeoSegmentInit {\n    return {\n      lng0: this.lng0,\n      lat0: this.lat0,\n      lng1: this.lng1,\n      lat1: this.lat1,\n    };\n  }\n\n  interpolateTo(that: GeoSegment): Interpolator<GeoSegment>;\n  interpolateTo(that: unknown): Interpolator<GeoSegment> | null;\n  interpolateTo(that: unknown): Interpolator<GeoSegment> | null {\n    if (that instanceof GeoSegment) {\n      return GeoSegmentInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSegment) {\n      return Numbers.equivalent(this.lng0, that.lng0, epsilon)\n          && Numbers.equivalent(this.lat0, that.lat0, epsilon)\n          && Numbers.equivalent(this.lng1, that.lng1, epsilon)\n          && Numbers.equivalent(this.lat1, that.lat1, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSegment) {\n      return this.lng0 === that.lng0 && this.lat0 === that.lat0\n          && this.lng1 === that.lng1 && this.lat1 === that.lat1;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(GeoSegment), Numbers.hash(this.lng0)), Numbers.hash(this.lat0)),\n        Numbers.hash(this.lng1)), Numbers.hash(this.lat1)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"GeoSegment\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.lng0).write(\", \").debug(this.lat0).write(\", \")\n        .debug(this.lng1).write(\", \").debug(this.lat1).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static of(lng0: number, lat0: number, lng1: number, lat1: number): GeoSegment {\n    return new GeoSegment(lng0, lat0, lng1, lat1);\n  }\n\n  static fromInit(value: GeoSegmentInit): GeoSegment {\n    return new GeoSegment(value.lng0, value.lat0, value.lng1, value.lat1);\n  }\n\n  static fromAny(value: AnyGeoSegment): GeoSegment {\n    if (value === void 0 || value === null || value instanceof GeoSegment) {\n      return value;\n    } else if (GeoSegment.isInit(value)) {\n      return GeoSegment.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is GeoSegmentInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as GeoSegmentInit;\n      return typeof init.lng0 === \"number\"\n          && typeof init.lat0 === \"number\"\n          && typeof init.lng1 === \"number\"\n          && typeof init.lat1 === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyGeoSegment {\n    return value instanceof GeoSegment\n        || GeoSegment.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {GeoSegment} from \"./GeoSegment\";\n\n/** @hidden */\nexport const GeoSegmentInterpolator = function (s0: GeoSegment, s1: GeoSegment): Interpolator<GeoSegment> {\n  const interpolator = function (u: number): GeoSegment {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const lng0 = s0.lng0 + u * (s1.lng0 - s0.lng0);\n    const lat0 = s0.lat0 + u * (s1.lat0 - s0.lat0);\n    const lng1 = s0.lng1 + u * (s1.lng1 - s0.lng1);\n    const lat1 = s0.lat1 + u * (s1.lat1 - s0.lat1);\n    return new GeoSegment(lng0, lat0, lng1, lat1);\n  } as Interpolator<GeoSegment>;\n  Object.setPrototypeOf(interpolator, GeoSegmentInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: GeoSegment, s1: GeoSegment): Interpolator<GeoSegment>;\n\n  /** @hidden */\n  prototype: Interpolator<GeoSegment>;\n};\n\nGeoSegmentInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport {CurveR2, SegmentR2, SplineR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {AnyGeoPoint, GeoPoint} from \"./GeoPoint\";\nimport {GeoCurve} from \"./GeoCurve\";\nimport {GeoSegment} from \"./GeoSegment\";\nimport {GeoSplineBuilder} from \"./\"; // forward import\nimport {GeoBox} from \"./\"; // forward import\n\nexport type AnyGeoSpline = GeoSpline | GeoSplinePoints;\n\nexport type GeoSplinePoints = ReadonlyArray<AnyGeoPoint>;\n\nexport class GeoSpline extends GeoCurve implements Debug {\n  constructor(curves: ReadonlyArray<GeoCurve>, closed: boolean) {\n    super();\n    Object.defineProperty(this, \"curves\", {\n      value: curves,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"closed\", {\n      value: closed,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly curves: ReadonlyArray<GeoCurve>;\n\n  /** @hidden */\n  declare readonly closed: boolean;\n\n  isDefined(): boolean {\n    return this.curves.length !== 0;\n  }\n\n  isClosed(): boolean {\n    return this.closed;\n  }\n\n  get lngMin(): number {\n    return this.bounds.lngMin;\n  }\n\n  get latMin(): number {\n    return this.bounds.latMin;\n  }\n\n  get lngMax(): number {\n    return this.bounds.lngMax;\n  }\n\n  get latMax(): number {\n    return this.bounds.latMax;\n  }\n\n  interpolateLng(u: number): number {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolateLng(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolateLat(u: number): number {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolateLat(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolate(u: number): GeoPoint {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return curves[k]!.interpolate(v);\n    } else {\n      return new GeoPoint(NaN, NaN);\n    }\n  }\n\n  contains(that: AnyGeoShape): boolean;\n  contains(lng: number, lat: number): boolean;\n  contains(that: AnyGeoShape | number, lat?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyGeoShape): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [GeoSpline, GeoSpline] {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [c0, c1] = curves[k]!.split(v);\n      const curves0 = new Array<GeoCurve>(k + 1);\n      const curves1 = new Array<GeoCurve>(n - k);\n      for (let i = 0; i < k; i += 1) {\n        curves0[i] = curves[i]!;\n      }\n      curves0[k] = c0;\n      curves1[0] = c1;\n      for (let i = k + 1; i < n; i += 1) {\n        curves1[i - k] = curves[i]!;\n      }\n      return [new GeoSpline(curves0, false), new GeoSpline(curves1, false)];\n    } else {\n      return [GeoSpline.empty(), GeoSpline.empty()];\n    }\n  }\n\n  subdivide(u: number): GeoSpline {\n    const oldCurves = this.curves;\n    const n = oldCurves.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [c0, c1] = oldCurves[k]!.split(v);\n      const newCurves = new Array<GeoCurve>(n + 1);\n      for (let i = 0; i < k; i += 1) {\n        newCurves[i] = oldCurves[i]!;\n      }\n      newCurves[k] = c0;\n      newCurves[k + 1] = c1;\n      for (let i = k + 1; i < n; i += 1) {\n        newCurves[i + 1] = oldCurves[i]!;\n      }\n      return new GeoSpline(newCurves, this.closed);\n    } else {\n      return GeoSpline.empty();\n    }\n  }\n\n  project(f: GeoProjection): SplineR2 {\n    const oldCurves = this.curves;\n    const n = oldCurves.length;\n    if (n > 0) {\n      let i = 0;\n      const newCurves = new Array<CurveR2>(n);\n\n      // project leading adjacent segments\n      let curve = oldCurves[0]!;\n      if (curve instanceof GeoSegment) {\n        // project first point\n        let p0 = f.project(curve.lng0, curve.lat0);\n        while (i < n) {\n          curve = oldCurves[i]!;\n          if (curve instanceof GeoSegment) {\n            // project next point\n            const p1 = f.project(curve.lng1, curve.lat1);\n            newCurves[i] = new SegmentR2(p0.x, p0.y, p1.x, p1.y);\n            p0 = p1;\n            i += 1;\n          } else {\n            break;\n          }\n        }\n      }\n\n      // project any remaining curves\n      while (i < n) {\n        curve = oldCurves[i]!;\n        newCurves[i] = curve.project(f);\n        i += 1;\n      }\n\n      return new SplineR2(newCurves, this.closed);\n    } else {\n      return SplineR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: GeoBox | null;\n\n  get bounds(): GeoBox {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let lngMin = Infinity;\n      let latMin = Infinity;\n      let lngMax = -Infinity;\n      let latMax = -Infinity;\n      const curves = this.curves;\n      for (let i = 0, n = curves.length; i < n; i += 1) {\n        const curve = curves[i]!;\n        lngMin = Math.min(lngMin, curve.lngMin);\n        latMin = Math.min(latMin, curve.latMin);\n        lngMax = Math.max(curve.lngMax, lngMax);\n        latMax = Math.max(curve.latMax, latMax);\n      }\n      boundingBox = new GeoBox(lngMin, latMin, lngMax, latMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  forEachCoord<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  forEachCoord<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                     thisArg: S): R | undefined;\n  forEachCoord<R, S>(callback: (this: S | undefined, lng: number, lat: number) => R | void,\n                     thisArg?: S): R | undefined {\n    const curves = this.curves;\n    const n = curves.length;\n    if (n > 0) {\n      let curve = curves[0]!;\n      let result = curve.forEachCoord(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n      for (let i = 1; i < n; i += 1) {\n        curve = curves[i]!;\n        result = curve.forEachCoordRest(callback, thisArg);\n        if (result !== void 0) {\n          return result;\n        }\n      }\n    }\n    return void 0;\n  }\n\n  forEachCoordRest<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  forEachCoordRest<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                         thisArg: S): R | undefined;\n  forEachCoordRest<R, S>(callback: (this: S | undefined, lng: number, lat: number) => R | void,\n                         thisArg?: S): R | undefined {\n    const curves = this.curves;\n    for (let i = 0, n = curves.length; i < n; i += 1) {\n      const curve = curves[i]!;\n      const result = curve.forEachCoordRest(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSpline) {\n      return Arrays.equivalent(this.curves, that.curves, epsilon)\n          && this.closed === that.closed;\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSpline) {\n      return Arrays.equal(this.curves, that.curves)\n          && this.closed === that.closed;\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const curves = this.curves;\n    const n = curves.length;\n    output = output.write(\"GeoSpline\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else if (n !== 0) {\n      output = output.write(this.closed ? \"closed\" : \"open\").write(40/*'('*/);\n      output = output.debug(curves[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(curves[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static empty(): GeoSpline {\n    return new GeoSpline([], false);\n  }\n\n  static open(...curves: GeoCurve[]): GeoSpline {\n    return new GeoSpline(curves, false);\n  }\n\n  static closed(...curves: GeoCurve[]): GeoSpline {\n    return new GeoSpline(curves, true);\n  }\n\n  static fromPoints(points: GeoSplinePoints): GeoSpline {\n    const n = points.length;\n    if (n > 1) {\n      const curves = new Array<GeoCurve>(n - 1);\n      const p0 = GeoPoint.fromAny(points[0]!);\n      let p1 = p0;\n      for (let i = 1; i < n; i += 1) {\n        const p2 = GeoPoint.fromAny(points[i]!);\n        curves[i - 1] = new GeoSegment(p1.lng, p1.lat, p2.lng, p2.lat);\n        p1 = p2;\n      }\n      const closed = p0.equals(p1);\n      return new GeoSpline(curves, closed);\n    } else {\n      return GeoSpline.empty();\n    }\n  }\n\n  static fromAny(value: AnyGeoSpline): GeoSpline;\n  static fromAny(value: AnyGeoShape): GeoShape;\n  static fromAny(value: AnyGeoSpline | AnyGeoShape): GeoShape {\n    if (value === void 0 || value === null || value instanceof GeoSpline) {\n      return value;\n    } else if (GeoSpline.isPoints(value)) {\n      return GeoSpline.fromPoints(value);\n    } else {\n      return GeoShape.fromAny(value);\n    }\n  }\n\n  static builder(): GeoSplineBuilder {\n    return new GeoSplineBuilder();\n  }\n\n  /** @hidden */\n  static isPoints(value: unknown): value is GeoSplinePoints {\n    return Array.isArray(value)\n        && value.length >= 2\n        && GeoPoint.isAny(value[0]!);\n  }\n\n  /** @hidden */\n  static isAnySpline(value: unknown): value is AnyGeoSpline {\n    return value instanceof GeoSpline\n        || GeoSpline.isPoints(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {GeoCurve} from \"./GeoCurve\";\nimport {GeoSegment} from \"./GeoSegment\";\nimport type {GeoSplineContext} from \"./GeoSplineContext\";\nimport {GeoSpline} from \"./GeoSpline\";\n\nexport class GeoSplineBuilder implements GeoSplineContext {\n  /** @hidden */\n  curves: GeoCurve[];\n  /** @hidden */\n  closed: boolean;\n  /** @hidden */\n  aliased: boolean;\n  /** @hidden */\n  lng0: number;\n  /** @hidden */\n  lat0: number;\n  /** @hidden */\n  lng: number;\n  /** @hidden */\n  lat: number;\n\n  constructor() {\n    this.curves = [];\n    this.closed = false;\n    this.aliased = false;\n    this.lng0 = 0;\n    this.lat0 = 0;\n    this.lng = 0;\n    this.lat = 0;\n  }\n\n  private dealias(): void {\n    if (this.aliased) {\n      this.curves = this.curves.slice(0);\n      this.aliased = false;\n    }\n  }\n\n  moveTo(lng: number, lat: number): void {\n    if (this.aliased) {\n      this.curves = [];\n      this.aliased = false;\n    } else {\n      this.curves.length = 0;\n    }\n    this.closed = false;\n    this.lng0 = lng;\n    this.lat0 = lat;\n    this.lng = lng;\n    this.lat = lat;\n  }\n\n  closePath(): void {\n    this.dealias();\n    this.curves.push(new GeoSegment(this.lng, this.lat, this.lng0, this.lat0));\n    this.closed = true;\n    this.lng = this.lng0;\n    this.lat = this.lat0;\n  }\n\n  lineTo(lng: number, lat: number): void {\n    this.dealias();\n    this.curves.push(new GeoSegment(this.lng, this.lat, lng, lat));\n    this.lng = lng;\n    this.lat = lat;\n  }\n\n  bind(): GeoSpline {\n    this.aliased = true;\n    return new GeoSpline(this.curves, this.closed);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, Equals, Arrays} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport {SplineR2, PathR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {GeoPoint} from \"./GeoPoint\";\nimport type {GeoCurve} from \"./GeoCurve\";\nimport {AnyGeoSpline, GeoSplinePoints, GeoSpline} from \"./GeoSpline\";\nimport {GeoPathBuilder} from \"./\"; // forward import\nimport {GeoBox} from \"./\"; // forward import\n\nexport type AnyGeoPath = GeoPath | GeoPathSplines | AnyGeoSpline;\n\nexport type GeoPathSplines = ReadonlyArray<AnyGeoSpline>;\n\nexport class GeoPath extends GeoShape implements Equals, Equivalent, Debug {\n  constructor(splines: ReadonlyArray<GeoSpline>) {\n    super();\n    Object.defineProperty(this, \"splines\", {\n      value: splines,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.splines.length !== 0;\n  }\n\n  declare readonly splines: ReadonlyArray<GeoSpline>;\n\n  get lngMin(): number {\n    return this.bounds.lngMin;\n  }\n\n  get latMin(): number {\n    return this.bounds.latMin;\n  }\n\n  get lngMax(): number {\n    return this.bounds.lngMax;\n  }\n\n  get latMax(): number {\n    return this.bounds.latMax;\n  }\n\n  interpolateLng(u: number): number {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolateLng(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolateLat(u: number): number {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolateLat(v);\n    } else {\n      return NaN;\n    }\n  }\n\n  interpolate(u: number): GeoPoint {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      return splines[k]!.interpolate(v);\n    } else {\n      return new GeoPoint(NaN, NaN);\n    }\n  }\n\n  contains(that: AnyGeoShape): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyGeoShape | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyGeoShape): boolean {\n    return false; // TODO\n  }\n\n  split(u: number): [GeoPath, GeoPath] {\n    const splines = this.splines;\n    const n = splines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const [s0, s1] = splines[k]!.split(v);\n      const splines0 = new Array<GeoSpline>(k + 1);\n      const splines1 = new Array<GeoSpline>(n - k);\n      for (let i = 0; i < k; i += 1) {\n        splines0[i] = splines[i]!;\n      }\n      splines0[k] = s0;\n      splines1[0] = s1;\n      for (let i = k + 1; i < n; i += 1) {\n        splines1[i - k] = splines[i]!;\n      }\n      return [new GeoPath(splines0), new GeoPath(splines1)];\n    } else {\n      return [GeoPath.empty(), GeoPath.empty()];\n    }\n  }\n\n  subdivide(u: number): GeoPath {\n    const oldSplines = this.splines;\n    const n = oldSplines.length;\n    if (n > 0) {\n      const l = 1 / n;\n      const k = Math.min(Math.max(0, Math.floor(u / l)), n);\n      const v = u * n - k * l;\n      const newSplines = new Array<GeoSpline>(n);\n      for (let i = 0; i < k; i += 1) {\n        newSplines[i] = oldSplines[i]!;\n      }\n      newSplines[k] = oldSplines[k]!.subdivide(v);\n      for (let i = k + 1; i < n; i += 1) {\n        newSplines[i] = oldSplines[i]!;\n      }\n      return new GeoPath(newSplines);\n    } else {\n      return GeoPath.empty();\n    }\n  }\n\n  project(f: GeoProjection): PathR2 {\n    const oldSplines = this.splines;\n    const n = oldSplines.length;\n    if (n > 0) {\n      const newSplines = new Array<SplineR2>(n);\n      for (let i = 0; i < n; i += 1) {\n        newSplines[i] = oldSplines[i]!.project(f);\n      }\n      return new PathR2(newSplines);\n    } else {\n      return PathR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: GeoBox | null;\n\n  get bounds(): GeoBox {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let lngMin = Infinity;\n      let latMin = Infinity;\n      let lngMax = -Infinity;\n      let latMax = -Infinity;\n      const splines = this.splines;\n      for (let i = 0, n = splines.length; i < n; i += 1) {\n        const spline = splines[i]!;\n        lngMin = Math.min(lngMin, spline.lngMin);\n        latMin = Math.min(latMin, spline.latMin);\n        lngMax = Math.max(spline.lngMax, lngMax);\n        latMax = Math.max(spline.latMax, latMax);\n      }\n      boundingBox = new GeoBox(lngMin, latMin, lngMax, latMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  centroid(): GeoPoint {\n    let lngSum = 0;\n    let latSum = 0;\n    let n = 0;\n    this.forEachCoord(function (lng: number, lat: number): void {\n      lngSum += lng;\n      latSum += lat;\n      n += 1;\n    }, this);\n    if (n !== 0) {\n      return new GeoPoint(lngSum / n, latSum / n);\n    } else {\n      return GeoPoint.undefined();\n    }\n  }\n\n  forEachCoord<R>(callback: (lng: number, lat: number) => R | void): R | undefined;\n  forEachCoord<R, S>(callback: (this: S, lng: number, lat: number) => R | void,\n                     thisArg: S): R | undefined;\n  forEachCoord<R, S>(callback: (this: S | undefined, lng: number, lat: number) => R | void,\n                     thisArg?: S): R | undefined {\n    const splines = this.splines;\n    for (let i = 0, n = splines.length; i < n; i += 1) {\n      const spline = splines[i]!;\n      const result = spline.forEachCoord(callback, thisArg);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoPath) {\n      return Arrays.equivalent(this.splines, that.splines, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoPath) {\n      return Arrays.equal(this.splines, that.splines);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const splines = this.splines;\n    const n = splines.length;\n    output = output.write(\"GeoPath\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else if (n === 1) {\n      const spline = splines[0]!;\n      output = output.write(spline.closed ? \"closed\" : \"open\").write(40/*'('*/);\n      const curves = spline.curves;\n      const m = curves.length;\n      if (m !== 0) {\n        output = output.debug(curves[0]!);\n        for (let i = 1; i < m; i += 1) {\n          output = output.write(\", \").debug(curves[i]!);\n        }\n      }\n    } else {\n      output = output.write(\"of\").write(40/*'('*/);\n      output = output.debug(splines[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(splines[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static empty(): GeoPath {\n    return new GeoPath([]);\n  }\n\n  static of(...splines: GeoSpline[]): GeoPath {\n    return new GeoPath(splines);\n  }\n\n  static open(...curves: GeoCurve[]): GeoPath {\n    return new GeoPath([new GeoSpline(curves, false)]);\n  }\n\n  static closed(...curves: GeoCurve[]): GeoPath {\n    return new GeoPath([new GeoSpline(curves, true)]);\n  }\n\n  static fromPoints(points: GeoSplinePoints): GeoPath {\n    return new GeoPath([GeoSpline.fromPoints(points)]);\n  }\n\n  static fromSplines(values: GeoPathSplines): GeoPath {\n    const n = values.length;\n    const splines = new Array<GeoSpline>(n);\n    for (let i = 0; i < n; i += 1) {\n      splines[i] = GeoSpline.fromAny(values[i]!);\n    }\n    return new GeoPath(splines);\n  }\n\n  static fromAny(value: AnyGeoPath): GeoPath;\n  static fromAny(value: AnyGeoShape): GeoShape;\n  static fromAny(value: AnyGeoPath | AnyGeoShape): GeoShape {\n    if (value === void 0 || value === null || value instanceof GeoPath) {\n      return value;\n    } else if (GeoPath.isSplines(value)) {\n      return GeoPath.fromSplines(value);\n    } else if (GeoSpline.isAnySpline(value)) {\n      return GeoPath.of(GeoSpline.fromAny(value));\n    } else {\n      return GeoShape.fromAny(value);\n    }\n  }\n\n  static builder(): GeoPathBuilder {\n    return new GeoPathBuilder();\n  }\n\n  /** @hidden */\n  static isSplines(value: unknown): value is GeoPathSplines {\n    return Array.isArray(value)\n        && value.length > 0\n        && GeoSpline.isAnySpline(value[0]!);\n  }\n\n  /** @hidden */\n  static isAnyPath(value: unknown): value is AnyGeoPath {\n    return value instanceof GeoPath\n        || GeoPath.isSplines(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {GeoSpline} from \"./GeoSpline\";\nimport {GeoSplineBuilder} from \"./GeoSplineBuilder\";\nimport type {GeoPathContext} from \"./GeoPathContext\";\nimport {GeoPath} from \"./GeoPath\";\n\nexport class GeoPathBuilder implements GeoPathContext {\n  /** @hidden */\n  splines: GeoSpline[];\n  /** @hidden */\n  builder: GeoSplineBuilder | null;\n\n  constructor() {\n    this.splines = [];\n    this.builder = null;\n  }\n\n  moveTo(lng: number, lat: number): void {\n    let builder = this.builder;\n    if (builder !== null) {\n      const spline = builder.bind();\n      if (spline.isDefined()) {\n        this.splines.push(spline);\n      }\n    }\n    builder = new GeoSplineBuilder();\n    this.builder = builder;\n    builder.moveTo(lng, lat);\n  }\n\n  closePath(): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.closePath();\n    } else {\n      throw new Error();\n    }\n  }\n\n  lineTo(lng: number, lat: number): void {\n    const builder = this.builder;\n    if (builder !== null) {\n      builder.lineTo(lng, lat);\n    } else {\n      throw new Error();\n    }\n  }\n\n  bind(): GeoPath {\n    const splines = this.splines.slice(0);\n    const builder = this.builder;\n    if (builder !== null) {\n      const spline = builder.bind();\n      if (spline.isDefined()) {\n        splines.push(spline);\n      }\n    }\n    return new GeoPath(splines);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {BoxR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {AnyGeoPoint, GeoPoint} from \"./GeoPoint\";\nimport {GeoSegment} from \"./GeoSegment\";\nimport {GeoBoxInterpolator} from \"./\"; // forward import\n\nexport type AnyGeoBox = GeoBox | GeoBoxInit;\n\nexport interface GeoBoxInit {\n  lngMin: number;\n  latMin: number;\n  lngMax: number;\n  latMax: number;\n}\n\nexport class GeoBox extends GeoShape implements Interpolate<GeoBox>, HashCode, Equivalent, Debug {\n  constructor(lngMin: number, latMin: number, lngMax: number, latMax: number) {\n    super();\n    Object.defineProperty(this, \"lngMin\", {\n      value: lngMin,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"latMin\", {\n      value: latMin,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lngMax\", {\n      value: lngMax,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"latMax\", {\n      value: latMax,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(this.lngMin) && isFinite(this.latMin)\n        && isFinite(this.lngMax) && isFinite(this.latMax);\n  }\n\n  declare readonly lngMin: number;\n\n  declare readonly latMin: number;\n\n  declare readonly lngMax: number;\n\n  declare readonly latMax: number;\n\n  get west(): number {\n    return this.lngMin;\n  }\n\n  get north(): number {\n    return this.latMin;\n  }\n\n  get east(): number {\n    return this.lngMax;\n  }\n\n  get south(): number {\n    return this.latMax;\n  }\n\n  get northWest(): GeoPoint {\n    return new GeoPoint(this.lngMin, this.latMin);\n  }\n\n  get northEast(): GeoPoint {\n    return new GeoPoint(this.lngMax, this.latMin);\n  }\n\n  get southEast(): GeoPoint {\n    return new GeoPoint(this.lngMax, this.latMax);\n  }\n\n  get southWest(): GeoPoint {\n    return new GeoPoint(this.lngMin, this.latMax);\n  }\n\n  get center(): GeoPoint {\n    return new GeoPoint((this.lngMin + this.lngMax) / 2,\n                        (this.latMin + this.latMax) / 2);\n  }\n\n  contains(that: AnyGeoPoint | AnyGeoBox): boolean;\n  contains(lng: number, lat: number): boolean;\n  contains(that: AnyGeoPoint | AnyGeoBox | number, y?: number): boolean {\n    if (typeof that === \"number\") {\n      return this.lngMin <= that && that <= this.lngMax\n          && this.latMin <= y! && y! <= this.latMax;\n    } else if (GeoPoint.isAny(that)) {\n      return this.containsPoint(GeoPoint.fromAny(that));\n    } else if (GeoSegment.isAny(that)) {\n      return this.containsSegment(GeoSegment.fromAny(that));\n    } else if (GeoBox.isAny(that)) {\n      return this.containsBox(GeoBox.fromAny(that));\n    } else {\n      throw new TypeError(\"\" + that);\n    }\n  }\n\n  /** @hidden */\n  containsPoint(that: GeoPoint): boolean {\n    return this.lngMin <= that.lng && that.lng <= this.lngMax\n        && this.latMin <= that.lat && that.lat <= this.latMax;\n  }\n\n  /** @hidden */\n  containsSegment(that: GeoSegment): boolean {\n    return this.lngMin <= that.lng0 && that.lng0 <= this.lngMax\n        && this.latMin <= that.lat0 && that.lat0 <= this.latMax\n        && this.lngMin <= that.lng1 && that.lng1 <= this.lngMax\n        && this.latMin <= that.lat1 && that.lat1 <= this.latMax;\n  }\n\n  /** @hidden */\n  containsBox(that: GeoBox): boolean {\n    return this.lngMin <= that.lngMin && that.lngMax <= this.lngMax\n        && this.latMin <= that.latMin && that.latMax <= this.latMax;\n  }\n\n  intersects(that: AnyGeoPoint | AnyGeoBox): boolean {\n    if (GeoPoint.isAny(that)) {\n      return this.intersectsPoint(GeoPoint.fromAny(that));\n    } else if (GeoSegment.isAny(that)) {\n      return this.intersectsSegment(GeoSegment.fromAny(that));\n    } else if (GeoBox.isAny(that)) {\n      return this.intersectsBox(GeoBox.fromAny(that));\n    } else {\n      throw new TypeError(\"\" + that);\n    }\n  }\n\n  /** @hidden */\n  intersectsPoint(that: GeoPoint): boolean {\n    return this.lngMin <= that.lng && that.lng <= this.lngMax\n        && this.latMin <= that.lat && that.lat <= this.latMax;\n  }\n\n  /** @hidden */\n  intersectsSegment(that: GeoSegment): boolean {\n    const lngMin = this.lngMin;\n    const latMin = this.latMin;\n    const lngMax = this.lngMax;\n    const latMax = this.latMax;\n    const lng0 = that.lng0;\n    const lat0 = that.lat0;\n    const lng1 = that.lng1;\n    const lat1 = that.lat1;\n    if (lng0 < lngMin && lng1 < lngMin || lng0 > lngMax && lng1 > lngMax ||\n        lat0 < latMin && lat1 < latMin || lat0 > latMax && lat1 > latMax) {\n      return false;\n    } else if (lng0 > lngMin && lng0 < lngMax && lat0 > latMin && lat0 < latMax) {\n      return true;\n    } else if ((BoxR2.intersectsSegment(lng0 - lngMin, lng1 - lngMin, lng0, lat0, lng1, lat1) && BoxR2.hitY > latMin && BoxR2.hitY < latMax)\n            || (BoxR2.intersectsSegment(lat0 - latMin, lat1 - latMin, lng0, lat0, lng1, lat1) && BoxR2.hitX > lngMin && BoxR2.hitX < lngMax)\n            || (BoxR2.intersectsSegment(lng0 - lngMax, lng1 - lngMax, lng0, lat0, lng1, lat1) && BoxR2.hitY > latMin && BoxR2.hitY < latMax)\n            || (BoxR2.intersectsSegment(lat0 - latMax, lat1 - latMax, lng0, lat0, lng1, lat1) && BoxR2.hitX > lngMin && BoxR2.hitX < lngMax)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @hidden */\n  intersectsBox(that: GeoBox): boolean {\n    return this.lngMin <= that.lngMax && that.lngMin <= this.lngMax\n        && this.latMin <= that.latMax && that.latMin <= this.latMax;\n  }\n\n  union(that: AnyGeoShape): GeoBox {\n    return super.union(that) as GeoBox;\n  }\n\n  project(f: GeoProjection): BoxR2 {\n    const bottomLeft = f.project(this.lngMin, this.latMin);\n    const topRight = f.project(this.lngMax, this.latMax);\n    let xMin = bottomLeft.x;\n    let yMin = bottomLeft.y;\n    let xMax = topRight.x;\n    let yMax = topRight.y;\n    if (xMin > xMax) {\n      const x = xMin;\n      xMin = xMax;\n      xMax = x;\n    }\n    if (yMin > yMax) {\n      const y = yMin;\n      yMin = yMax;\n      yMax = y;\n    }\n    if (!isFinite(xMin)) {\n      xMin = -Infinity;\n    }\n    if (!isFinite(yMin)) {\n      yMin = -Infinity;\n    }\n    if (!isFinite(xMax)) {\n      xMax = Infinity;\n    }\n    if (!isFinite(yMax)) {\n      yMax = Infinity;\n    }\n    return new BoxR2(xMin, yMin, xMax, yMax);\n  }\n\n  get bounds(): GeoBox {\n    return this;\n  }\n\n  toAny(): GeoBoxInit {\n    return {\n      lngMin: this.lngMin,\n      latMin: this.latMin,\n      lngMax: this.lngMax,\n      latMax: this.latMax,\n    };\n  }\n\n  interpolateTo(that: GeoBox): Interpolator<GeoBox>;\n  interpolateTo(that: unknown): Interpolator<GeoBox> | null;\n  interpolateTo(that: unknown): Interpolator<GeoBox> | null {\n    if (that instanceof GeoBox) {\n      return GeoBoxInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoBox) {\n      return Numbers.equivalent(this.lngMin, that.lngMin, epsilon)\n          && Numbers.equivalent(this.latMin, that.latMin, epsilon)\n          && Numbers.equivalent(this.lngMax, that.lngMax, epsilon)\n          && Numbers.equivalent(this.latMax, that.latMax, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoBox) {\n      return this.lngMin === that.lngMin && this.latMin === that.latMin\n          && this.lngMax === that.lngMax && this.latMax === that.latMax;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(GeoBox), Numbers.hash(this.lngMin)), Numbers.hash(this.latMin)),\n        Numbers.hash(this.lngMax)), Numbers.hash(this.latMax)));\n  }\n\n  debug(output: Output): void {\n    output.write(\"GeoBox\").write(46/*'.'*/).write(\"of\").write(40/*'('*/)\n        .debug(this.lngMin).write(\", \").debug(this.latMin).write(\", \")\n        .debug(this.lngMax).write(\", \").debug(this.latMax).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static undefined(): GeoBox {\n    return new GeoBox(Infinity, Infinity, -Infinity, -Infinity);\n  }\n\n  @Lazy\n  static globe(): GeoBox {\n    return new GeoBox(-180, -90, 180, 90);\n  }\n\n  static of(lngMin: number, latMin: number, lngMax?: number, latMax?: number): GeoBox {\n    if (lngMax === void 0) {\n      lngMax = lngMin;\n    }\n    if (latMax === void 0) {\n      latMax = latMin;\n    }\n    return new GeoBox(lngMin, latMin, lngMax, latMax);\n  }\n\n  static fromInit(value: GeoBoxInit): GeoBox {\n    return new GeoBox(value.lngMin, value.latMin, value.lngMax, value.latMax);\n  }\n\n  static fromAny(value: AnyGeoBox): GeoBox {\n    if (value === void 0 || value === null || value instanceof GeoBox) {\n      return value;\n    } else if (GeoBox.isInit(value)) {\n      return GeoBox.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is GeoBoxInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as GeoBoxInit;\n      return typeof init.lngMin === \"number\"\n          && typeof init.latMin === \"number\"\n          && typeof init.lngMax === \"number\"\n          && typeof init.latMax === \"number\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyGeoBox {\n    return value instanceof GeoBox\n        || GeoBox.isInit(value);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {GeoBox} from \"./GeoBox\";\n\n/** @hidden */\nexport const GeoBoxInterpolator = function (s0: GeoBox, s1: GeoBox): Interpolator<GeoBox> {\n  const interpolator = function (u: number): GeoBox {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const lngMin = s0.lngMin + u * (s1.lngMin - s0.lngMin);\n    const latMin = s0.latMin + u * (s1.latMin - s0.latMin);\n    const lngMax = s0.lngMax + u * (s1.lngMax - s0.lngMax);\n    const latMax = s0.latMax + u * (s1.latMax - s0.latMax);\n    return new GeoBox(lngMin, latMin, lngMax, latMax);\n  } as Interpolator<GeoBox>;\n  Object.setPrototypeOf(interpolator, GeoBoxInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: GeoBox, s1: GeoBox): Interpolator<GeoBox>;\n\n  /** @hidden */\n  prototype: Interpolator<GeoBox>;\n};\n\nGeoBoxInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent, Equals, Lazy, Arrays} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport {ShapeR2, SetR2} from \"@swim/math\";\nimport type {GeoProjection} from \"./GeoProjection\";\nimport {AnyGeoShape, GeoShape} from \"./GeoShape\";\nimport {GeoBox} from \"./GeoBox\";\n\nexport class GeoSet<S extends GeoShape = GeoShape> extends GeoShape implements Equals, Equivalent, Debug {\n  constructor(shapes: ReadonlyArray<S>) {\n    super();\n    Object.defineProperty(this, \"shapes\", {\n      value: shapes,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"boundingBox\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return this.shapes.length !== 0;\n  }\n\n  declare readonly shapes: ReadonlyArray<S>;\n\n  get lngMin(): number {\n    return this.bounds.lngMin;\n  }\n\n  get latMin(): number {\n    return this.bounds.latMin;\n  }\n\n  get lngMax(): number {\n    return this.bounds.lngMax;\n  }\n\n  get latMax(): number {\n    return this.bounds.latMax;\n  }\n\n  contains(that: AnyGeoShape): boolean;\n  contains(x: number, y: number): boolean;\n  contains(that: AnyGeoShape | number, y?: number): boolean {\n    return false; // TODO\n  }\n\n  intersects(that: AnyGeoShape): boolean {\n    return false; // TODO\n  }\n\n  project(f: GeoProjection): SetR2 {\n    const oldShapes = this.shapes;\n    const n = oldShapes.length;\n    if (n > 0) {\n      const newShapes = new Array<ShapeR2>(n);\n      for (let i = 0; i < n; i += 1) {\n        newShapes[i] = oldShapes[i]!.project(f);\n      }\n      return new SetR2(newShapes);\n    } else {\n      return SetR2.empty();\n    }\n  }\n\n  /** @hidden */\n  declare readonly boundingBox: GeoBox | null;\n\n  get bounds(): GeoBox {\n    let boundingBox = this.boundingBox;\n    if (boundingBox === null) {\n      let lngMin = Infinity;\n      let latMin = Infinity;\n      let lngMax = -Infinity;\n      let latMax = -Infinity;\n      const shapes = this.shapes;\n      for (let i = 0, n = shapes.length; i < n; i += 1) {\n        const shape = shapes[i]!;\n        lngMin = Math.min(lngMin, shape.lngMin);\n        latMin = Math.min(latMin, shape.latMin);\n        lngMax = Math.max(shape.lngMax, lngMax);\n        latMax = Math.max(shape.latMax, latMax);\n      }\n      boundingBox = new GeoBox(lngMin, latMin, lngMax, latMax);\n      Object.defineProperty(this, \"boundingBox\", {\n        value: boundingBox,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return boundingBox;\n  }\n\n  equivalentTo(that: unknown, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSet) {\n      return Arrays.equivalent(this.shapes, that.shapes, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof GeoSet) {\n      return Arrays.equal(this.shapes, that.shapes);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    const shapes = this.shapes;\n    const n = shapes.length;\n    output = output.write(\"GeoSet\").write(46/*'.'*/);\n    if (n === 0) {\n      output = output.write(\"empty\").write(40/*'('*/);\n    } else {\n      output = output.write(\"of\").write(40/*'('*/);\n      output = output.debug(shapes[0]!);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(shapes[i]!);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static empty<S extends GeoShape>(): GeoSet<S> {\n    return new GeoSet(Arrays.empty);\n  }\n\n  static of<S extends GeoShape>(...shapes: S[]): GeoSet<S> {\n    return new GeoSet(shapes);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {GeoShape} from \"./GeoShape\";\nimport {GeoPoint} from \"./GeoPoint\";\nimport type {GeoCurve} from \"./GeoCurve\";\nimport {GeoSegment} from \"./GeoSegment\";\nimport {GeoSpline} from \"./GeoSpline\";\nimport {GeoPath} from \"./GeoPath\";\nimport {GeoSet} from \"./GeoSet\";\n\nexport type GeoJson = GeoJsonGeometry\n                    | GeoJsonFeature\n                    | GeoJsonFeatureCollection;\n\nexport type GeoJsonGeometry = GeoJsonPoint\n                            | GeoJsonMultiPoint\n                            | GeoJsonLineString\n                            | GeoJsonMultiLineString\n                            | GeoJsonPolygon\n                            | GeoJsonMultiPolygon\n                            | GeoJsonGeometryCollection;\n\nexport type GeoJsonObjectType = GeoJsonGeometryType\n                              | \"Feature\"\n                              | \"FeatureCollection\";\n\nexport type GeoJsonGeometryType = \"Point\"\n                                | \"MultiPoint\"\n                                | \"LineString\"\n                                | \"MultiLineString\"\n                                | \"Polygon\"\n                                | \"MultiPolygon\"\n                                | \"GeometryCollection\";\n\nexport interface GeoJsonObject {\n  type: GeoJsonObjectType;\n  bbox?: GeoJsonBbox;\n}\n\nexport interface GeoJsonGeometryObject extends GeoJsonObject {\n  type: GeoJsonGeometryType;\n}\n\nexport type GeoJsonPosition = [number, number] | [number, number, number];\n\nexport interface GeoJsonPoint extends GeoJsonGeometryObject {\n  readonly type: \"Point\";\n  coordinates: GeoJsonPosition;\n}\n\nexport interface GeoJsonMultiPoint extends GeoJsonGeometryObject {\n  readonly type: \"MultiPoint\";\n  coordinates: GeoJsonPosition[];\n}\n\nexport interface GeoJsonLineString extends GeoJsonGeometryObject {\n  readonly type: \"LineString\";\n  coordinates: GeoJsonPosition[];\n}\n\nexport interface GeoJsonMultiLineString extends GeoJsonGeometryObject {\n  readonly type: \"MultiLineString\";\n  coordinates: GeoJsonPosition[][];\n}\n\nexport interface GeoJsonPolygon extends GeoJsonGeometryObject {\n  readonly type: \"Polygon\";\n  coordinates: GeoJsonPosition[][];\n}\n\nexport interface GeoJsonMultiPolygon extends GeoJsonGeometryObject {\n  readonly type: \"MultiPolygon\";\n  coordinates: GeoJsonPosition[][][];\n}\n\nexport interface GeoJsonGeometryCollection extends GeoJsonGeometryObject {\n  readonly type: \"GeometryCollection\";\n  geometries: GeoJsonGeometry[];\n}\n\nexport interface GeoJsonFeature<G extends GeoJsonGeometry = GeoJsonGeometry, P = GeoJsonProperties> extends GeoJsonObject {\n  type: \"Feature\";\n  geometry: G | null;\n  properties: P | null;\n  id?: string | number;\n}\n\nexport interface GeoJsonFeatureCollection<G extends GeoJsonGeometry = GeoJsonGeometry, P = GeoJsonProperties> extends GeoJsonObject {\n  type: \"FeatureCollection\";\n  features: GeoJsonFeature<G, P>[];\n}\n\nexport type GeoJsonProperties = {[name: string]: unknown};\n\nexport type GeoJsonBbox = [number, number, number, number]\n                        | [number, number, number, number, number, number];\n\nexport const GeoJson = {} as {\n  is(value: unknown): value is GeoJson;\n  toShape(geometry: GeoJsonGeometry): GeoShape;\n  toShape(feature: GeoJsonFeature): GeoShape | null;\n  toShape(collection: GeoJsonFeatureCollection): Array<GeoShape | null>;\n  toShape(object: GeoJson): GeoShape | null | Array<GeoShape | null>;\n};\n\nGeoJson.is = function (value: unknown): value is GeoJson {\n  return GeoJsonGeometry.is(value)\n      || GeoJsonFeature.is(value)\n      || GeoJsonFeatureCollection.is(value);\n};\n\nGeoJson.toShape = function (object: GeoJson): GeoShape | null | Array<GeoShape | null> {\n  if (object.type === \"Feature\") {\n    return GeoJsonFeature.toShape(object);\n  } else if (object.type === \"FeatureCollection\") {\n    return GeoJsonFeatureCollection.toShapes(object);\n  } else {\n    return GeoJsonGeometry.toShape(object);\n  }\n} as typeof GeoJson.toShape;\n\nexport const GeoJsonGeometry = {} as {\n  is(value: unknown): value is GeoJsonGeometry;\n  toShape(object: GeoJsonGeometry): GeoShape;\n};\n\nGeoJsonGeometry.is = function (value: unknown): value is GeoJsonGeometry {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonGeometry;\n    return (object.type === \"Point\"\n         || object.type === \"MultiPoint\"\n         || object.type === \"LineString\"\n         || object.type === \"MultiLineString\"\n         || object.type === \"Polygon\"\n         || object.type === \"MultiPolygon\")\n        && Array.isArray(object.coordinates)\n        || object.type === \"GeometryCollection\"\n        && Array.isArray(object.geometries);\n  }\n  return false;\n};\n\nGeoJsonGeometry.toShape = function (object: GeoJsonGeometry): GeoShape {\n  if (object.type === \"Point\") {\n    return GeoJsonPoint.toShape(object);\n  } else if (object.type === \"MultiPoint\") {\n    return GeoJsonMultiPoint.toShape(object);\n  } else if (object.type === \"LineString\") {\n    return GeoJsonLineString.toShape(object);\n  } else if (object.type === \"MultiLineString\") {\n    return GeoJsonMultiLineString.toShape(object);\n  } else if (object.type === \"Polygon\") {\n    return GeoJsonPolygon.toShape(object);\n  } else if (object.type === \"MultiPolygon\") {\n    return GeoJsonMultiPolygon.toShape(object);\n  } else if (object.type === \"GeometryCollection\") {\n    return GeoJsonGeometryCollection.toShape(object);\n  } else {\n    throw new TypeError(\"\" + object);\n  }\n};\n\nexport const GeoJsonPoint = {} as {\n  is(value: unknown): value is GeoJsonPoint;\n  toShape(object: GeoJsonPoint): GeoPoint;\n};\n\nGeoJsonPoint.is = function (value: unknown): value is GeoJsonPoint {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonPoint;\n    return object.type === \"Point\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonPoint.toShape = function (object: GeoJsonPoint): GeoPoint {\n  const position = object.coordinates;\n  return new GeoPoint(position[0], position[1]);\n};\n\nexport const GeoJsonMultiPoint = {} as {\n  is(value: unknown): value is GeoJsonMultiPoint;\n  toShape(object: GeoJsonMultiPoint): GeoSet<GeoPoint>;\n};\n\nGeoJsonMultiPoint.is = function (value: unknown): value is GeoJsonMultiPoint {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonMultiPoint;\n    return object.type === \"MultiPoint\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonMultiPoint.toShape = function (object: GeoJsonMultiPoint): GeoSet<GeoPoint> {\n  const positions = object.coordinates;\n  const n = positions.length;\n  const shapes = new Array<GeoPoint>(n);\n  for (let i = 0; i < n; i += 1) {\n    const position = positions[i]!;\n    shapes[i] = new GeoPoint(position[0], position[1]);\n  }\n  return new GeoSet(shapes);\n};\n\nexport const GeoJsonLineString = {} as {\n  is(value: unknown): value is GeoJsonLineString;\n  toShape(object: GeoJsonLineString): GeoSpline;\n};\n\nGeoJsonLineString.is = function (value: unknown): value is GeoJsonLineString {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonLineString;\n    return object.type === \"LineString\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonLineString.toShape = function (object: GeoJsonLineString): GeoSpline {\n  const lineString = object.coordinates;\n  const n = lineString.length;\n  if (n > 0) {\n    const curves = new Array<GeoCurve>(n - 1);\n    let position = lineString[0]!;\n    let lng = position[0];\n    let lat = position[1];\n    for (let i = 1; i < n; i += 1) {\n      position = lineString[i]!;\n      curves[i - 1] = new GeoSegment(lng, lat, (lng = position[0], lng), (lat = position[1], lat));\n    }\n    return new GeoSpline(curves, false);\n  } else {\n    return GeoSpline.empty();\n  }\n};\n\nexport const GeoJsonMultiLineString = {} as {\n  is(value: unknown): value is GeoJsonMultiLineString;\n  toShape(object: GeoJsonMultiLineString): GeoSet<GeoSpline>;\n};\n\nGeoJsonMultiLineString.is = function (value: unknown): value is GeoJsonMultiLineString {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonMultiLineString;\n    return object.type === \"MultiLineString\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonMultiLineString.toShape = function (object: GeoJsonMultiLineString): GeoSet<GeoSpline> {\n  const multiLineString = object.coordinates;\n  const n = multiLineString.length;\n  const shapes = new Array<GeoSpline>(n);\n  for (let i = 0; i < n; i += 1) {\n    const lineString = multiLineString[i]!;\n    const m = lineString.length;\n    if (m > 0) {\n      const curves = new Array<GeoCurve>(m - 1);\n      let position = lineString[0]!;\n      let lng = position[0];\n      let lat = position[1];\n      for (let j = 1; j < m; j += 1) {\n        position = lineString[j]!;\n        curves[j - 1] = new GeoSegment(lng, lat, (lng = position[0], lng), (lat = position[1], lat));\n      }\n      shapes[i] = new GeoSpline(curves, false);\n    } else {\n      shapes[i] = GeoSpline.empty();\n    }\n  }\n  return new GeoSet(shapes);\n};\n\nexport const GeoJsonPolygon = {} as {\n  is(value: unknown): value is GeoJsonPolygon;\n  toShape(object: GeoJsonPolygon): GeoPath;\n};\n\nGeoJsonPolygon.is = function (value: unknown): value is GeoJsonPolygon {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonPolygon;\n    return object.type === \"Polygon\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonPolygon.toShape = function (object: GeoJsonPolygon): GeoPath {\n  const polygons = object.coordinates;\n  const n = polygons.length;\n  const splines = new Array<GeoSpline>(n);\n  for (let i = 0; i < n; i += 1) {\n    const polygon = polygons[i]!;\n    const m = polygon.length;\n    if (m > 0) {\n      const curves = new Array<GeoCurve>(m - 1);\n      let position = polygon[0]!;\n      let lng = position[0];\n      let lat = position[1];\n      for (let j = 1; j < m; j += 1) {\n        position = polygon[j]!;\n        curves[j - 1] = new GeoSegment(lng, lat, (lng = position[0], lng), (lat = position[1], lat));\n      }\n      splines[i] = new GeoSpline(curves, true);\n    } else {\n      splines[i] = GeoSpline.empty();\n    }\n  }\n  return new GeoPath(splines);\n};\n\nexport const GeoJsonMultiPolygon = {} as {\n  is(value: unknown): value is GeoJsonMultiPolygon;\n  toShape(object: GeoJsonMultiPolygon): GeoSet<GeoPath>;\n};\n\nGeoJsonMultiPolygon.is = function (value: unknown): value is GeoJsonMultiPolygon {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonMultiPolygon;\n    return object.type === \"MultiPolygon\"\n        && Array.isArray(object.coordinates);\n  }\n  return false;\n};\n\nGeoJsonMultiPolygon.toShape = function (object: GeoJsonMultiPolygon): GeoSet<GeoPath> {\n  const multiPolygon = object.coordinates;\n  const n = multiPolygon.length;\n  const shapes = new Array<GeoPath>(n);\n  for (let i = 0; i < n; i += 1) {\n    const polygons = multiPolygon[i]!;\n    const m = polygons.length;\n    const splines = new Array<GeoSpline>(m);\n    for (let j = 0; j < m; j += 1) {\n      const polygon = polygons[j]!;\n      const o = polygon.length;\n      if (o > 0) {\n        const curves = new Array<GeoCurve>(o - 1);\n        let position = polygon[0]!;\n        let lng = position[0];\n        let lat = position[1];\n        for (let k = 1; k < o; k += 1) {\n          position = polygon[k]!;\n          curves[k - 1] = new GeoSegment(lng, lat, (lng = position[0], lng), (lat = position[1], lat));\n        }\n        splines[j] = new GeoSpline(curves, true);\n      } else {\n        splines[j] = GeoSpline.empty();\n      }\n    }\n    shapes[i] = new GeoPath(splines);\n  }\n  return new GeoSet(shapes);\n};\n\nexport const GeoJsonGeometryCollection = {} as {\n  is(value: unknown): value is GeoJsonGeometryCollection;\n  toShape(object: GeoJsonGeometryCollection): GeoSet;\n};\n\nGeoJsonGeometryCollection.is = function (value: unknown): value is GeoJsonGeometryCollection {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonGeometryCollection;\n    return object.type === \"GeometryCollection\"\n        && Array.isArray(object.geometries);\n  }\n  return false;\n};\n\nGeoJsonGeometryCollection.toShape = function (object: GeoJsonGeometryCollection): GeoSet {\n  const geometries = object.geometries;\n  const n = geometries.length;\n  const shapes = new Array<GeoShape>(n);\n  for (let i = 0; i < n; i += 1) {\n    shapes[i] = GeoJsonGeometry.toShape(geometries[i]!);\n  }\n  return new GeoSet(shapes);\n};\n\nexport const GeoJsonFeature = {} as {\n  is(value: unknown): value is GeoJsonFeature;\n  toShape(feature: GeoJsonFeature): GeoShape | null;\n};\n\nGeoJsonFeature.is = function (value: unknown): value is GeoJsonFeature {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonFeature;\n    return object.type === \"Feature\"\n        && GeoJsonGeometry.is(object.geometry)\n        && typeof object.properties === \"object\";\n  }\n  return false;\n};\n\nGeoJsonFeature.toShape = function (feature: GeoJsonFeature): GeoShape | null {\n  const geometry = feature.geometry;\n  return geometry !== null ? GeoJsonGeometry.toShape(geometry) : null;\n};\n\nexport const GeoJsonFeatureCollection = {} as {\n  is(value: unknown): value is GeoJsonFeatureCollection;\n  toShapes(object: GeoJsonFeatureCollection): Array<GeoShape | null>;\n};\n\nGeoJsonFeatureCollection.is = function (value: unknown): value is GeoJsonFeatureCollection {\n  if (typeof value === \"object\" && value !== null) {\n    const object = value as GeoJsonFeatureCollection;\n    return object.type === \"FeatureCollection\"\n        && Array.isArray(object.features);\n  }\n  return false;\n};\n\nGeoJsonFeatureCollection.toShapes = function (object: GeoJsonFeatureCollection): Array<GeoShape | null> {\n  const features = object.features;\n  const n = features.length;\n  const shapes = new Array<GeoShape | null>(n);\n  for (let i = 0; i < n; i += 1) {\n    shapes[i] = GeoJsonFeature.toShape(features[i]!);\n  }\n  return shapes;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport {Debug, Format, Output} from \"@swim/codec\";\nimport type {Value, Form} from \"@swim/structure\";\nimport {TimeZoneForm} from \"./\"; // forward import\n\nexport type AnyTimeZone = TimeZone | string | number;\n\nexport class TimeZone implements HashCode, Debug {\n  /** @hidden */\n  private constructor(name: string | undefined, offset: number) {\n    Object.defineProperty(this, \"name\", {\n      value: name,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"offset\", {\n      value: offset,\n      enumerable: true,\n    });\n  }\n\n  declare readonly name: string | undefined;\n\n  declare readonly offset: number;\n\n  isUTC(): boolean {\n    return this.offset === 0;\n  }\n\n  isLocal(): boolean {\n    return this.offset === -new Date().getTimezoneOffset();\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TimeZone) {\n      return this.offset === that.offset;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(TimeZone), Numbers.hash(this.offset)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"TimeZone\").write(46/*'.'*/);\n    if (this.name === \"UTC\" && this.offset === 0) {\n      output = output.write(\"utc\").write(40/*'('*/).write(41/*')'*/);\n    } else if (this.name === void 0) {\n      output = output.write(\"forOffset\").write(40/*'('*/)\n          .debug(this.offset).write(41/*')'*/);\n    } else {\n      output = output.write(\"from\").write(40/*'('*/)\n          .debug(this.name).write(\", \").debug(this.offset).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  @Lazy\n  static get utc(): TimeZone {\n    return new TimeZone(\"UTC\", 0);\n  }\n\n  @Lazy\n  static get local(): TimeZone {\n    return TimeZone.forOffset(-new Date().getTimezoneOffset());\n  }\n\n  static forName(name: string): TimeZone | null {\n    switch (name) {\n      case \"UTC\": return TimeZone.utc;\n      default: return null;\n    }\n  }\n\n  static forOffset(offset: number): TimeZone {\n    switch (offset) {\n      case 0: return TimeZone.utc;\n      default: return new TimeZone(void 0, offset);\n    }\n  }\n\n  static fromAny(value: AnyTimeZone): TimeZone {\n    if (value === void 0 || value === null || value instanceof TimeZone) {\n      return value;\n    } else if (typeof value === \"string\") {\n      const zone = TimeZone.forName(value);\n      if (zone !== null) {\n        return zone;\n      }\n    } else if (typeof value === \"number\") {\n      return TimeZone.forOffset(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): TimeZone | null {\n    const name = value.stringValue(void 0);\n    if (name !== void 0) {\n      return TimeZone.forName(name);\n    }\n    const offset = value.numberValue(void 0);\n    if (offset !== void 0) {\n      return TimeZone.forOffset(offset);\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyTimeZone {\n    return value instanceof TimeZone\n        || typeof value === \"string\"\n        || typeof value === \"number\";\n  }\n\n  @Lazy\n  static form(): Form<TimeZone, AnyTimeZone> {\n    return new TimeZoneForm(TimeZone.utc);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Num, Form} from \"@swim/structure\";\nimport {AnyTimeZone, TimeZone} from \"./TimeZone\";\n\n/** @hidden */\nexport class TimeZoneForm extends Form<TimeZone, AnyTimeZone> {\n  constructor(unit: TimeZone | undefined) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: TimeZone | undefined;\n\n  withUnit(unit: TimeZone | undefined): Form<TimeZone, AnyTimeZone> {\n    if (unit !== this.unit) {\n      return new TimeZoneForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(zone: AnyTimeZone): Item {\n    zone = TimeZone.fromAny(zone);\n    const name = zone.name;\n    if (name !== void 0) {\n      return Text.from(name);\n    } else {\n      return Num.from(zone.offset);\n    }\n  }\n\n  cast(item: Item): TimeZone | undefined {\n    const value = item.toValue();\n    const zone = TimeZone.fromValue(value);\n    return zone !== null ? zone : void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode, Equivalent, Compare, Lazy, Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Display, Output} from \"@swim/codec\";\nimport type {Interpolate, Interpolator} from \"@swim/mapping\";\nimport {Item, Value, Form} from \"@swim/structure\";\nimport {AnyTimeZone, TimeZone} from \"./TimeZone\";\nimport {DateTimeInterpolator} from \"./\"; // forward import\nimport {DateTimeForm} from \"./\"; // forward import\nimport {DateTimeFormat} from \"./\"; // forward import\n\nexport type AnyDateTime = DateTime | DateTimeInit | Date | string | number;\n\nexport interface DateTimeInit {\n  year?: number;\n  month?: number;\n  day?: number;\n  hour?: number;\n  minute?: number;\n  second?: number;\n  millisecond?: number;\n  zone?: AnyTimeZone;\n}\n\nexport class DateTime implements Interpolate<DateTime>, HashCode, Equivalent, Compare, Display {\n  constructor(time: number, zone: TimeZone = TimeZone.utc) {\n    Object.defineProperty(this, \"time\", {\n      value: time,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"zone\", {\n      value: zone,\n      enumerable: true,\n    });\n  }\n\n  isDefined(): boolean {\n    return isFinite(new Date(this.time).getTime());\n  }\n\n  declare readonly time: number;\n\n  declare readonly zone: TimeZone;\n\n  get year(): number {\n    return this.toUTCLocalDate().getUTCFullYear();\n  }\n\n  withYear(year: number, month?: number, day?: number, hour?: number, minute?: number,\n           second?: number, millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCFullYear(year);\n    if (month !== void 0) {\n      date.setUTCMonth(month);\n    }\n    if (day !== void 0) {\n      date.setUTCDate(day);\n    }\n    if (hour !== void 0) {\n      date.setUTCHours(hour);\n    }\n    if (minute !== void 0) {\n      date.setUTCMinutes(minute);\n    }\n    if (second !== void 0) {\n      date.setUTCSeconds(second);\n    }\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get month(): number {\n    return this.toUTCLocalDate().getUTCMonth();\n  }\n\n  withMonth(month: number, day?: number, hour?: number, minute?: number,\n            second?: number, millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCMonth(month);\n    if (day !== void 0) {\n      date.setUTCDate(day);\n    }\n    if (hour !== void 0) {\n      date.setUTCHours(hour);\n    }\n    if (minute !== void 0) {\n      date.setUTCMinutes(minute);\n    }\n    if (second !== void 0) {\n      date.setUTCSeconds(second);\n    }\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get day(): number {\n    return this.toUTCLocalDate().getUTCDate();\n  }\n\n  withDay(day: number, hour?: number, minute?: number, second?: number,\n          millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCDate(day);\n    if (hour !== void 0) {\n      date.setUTCHours(hour);\n    }\n    if (minute !== void 0) {\n      date.setUTCMinutes(minute);\n    }\n    if (second !== void 0) {\n      date.setUTCSeconds(second);\n    }\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get hour(): number {\n    return this.toUTCLocalDate().getUTCHours();\n  }\n\n  withHour(hour: number, minute?: number, second?: number, millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCHours(hour);\n    if (minute !== void 0) {\n      date.setUTCMinutes(minute);\n    }\n    if (second !== void 0) {\n      date.setUTCSeconds(second);\n    }\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get minute(): number {\n    return this.toUTCLocalDate().getUTCMinutes();\n  }\n\n  withMinute(minute: number, second?: number, millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCMinutes(minute);\n    if (second !== void 0) {\n      date.setUTCSeconds(second);\n    }\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get second(): number {\n    return this.toUTCLocalDate().getUTCSeconds();\n  }\n\n  withSecond(second: number, millisecond?: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCSeconds(second);\n    if (millisecond !== void 0) {\n      date.setUTCMilliseconds(millisecond);\n    }\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get millisecond(): number {\n    return this.toUTCLocalDate().getUTCMilliseconds();\n  }\n\n  withMillisecond(millisecond: number): DateTime {\n    const date = this.toUTCLocalDate();\n    date.setUTCMilliseconds(millisecond);\n    return DateTime.fromUTCLocalDate(date, this.zone);\n  }\n\n  get weekday(): number {\n    return this.toUTCLocalDate().getUTCDay();\n  }\n\n  /**\n   * Returns this date time shifted by the time zone offset.\n   * @hidden\n   */\n  toUTCLocalDate(): Date {\n    return new Date(this.time + 60000 * this.zone.offset);\n  }\n\n  toDate(): Date {\n    return new Date(this.time);\n  }\n\n  valueOf(): number {\n    return this.time;\n  }\n\n  interpolateTo(that: DateTime): Interpolator<DateTime>;\n  interpolateTo(that: unknown): Interpolator<DateTime> | null;\n  interpolateTo(that: unknown): Interpolator<DateTime> | null {\n    if (that instanceof DateTime) {\n      return DateTimeInterpolator(this, that);\n    } else {\n      return null;\n    }\n  }\n\n  compareTo(that: unknown): number {\n    if (that instanceof DateTime) {\n      const x = this.time;\n      const y = that.time;\n      return x < y ? -1 : x > y ? 1 : x === y ? 0 : NaN;\n    }\n    return NaN;\n  }\n\n  equivalentTo(that: AnyDateTime, epsilon?: number): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DateTime) {\n      return Numbers.equivalent(this.time, that.time, epsilon);\n    }\n    return false;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof DateTime) {\n      return this.time === that.time && this.zone.equals(that.zone);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Constructors.hash(DateTime),\n        Numbers.hash(this.time)), this.zone.hashCode()));\n  }\n\n  display(output: Output, format: DateTimeFormat = DateTimeFormat.iso8601): void {\n    format.writeDate(this, output);\n  }\n\n  toString(format: DateTimeFormat = DateTimeFormat.iso8601): string {\n    return format.format(this);\n  }\n\n  static current(zone?: AnyTimeZone): DateTime {\n    zone = zone !== void 0 ? TimeZone.fromAny(zone) : TimeZone.local;\n    return new DateTime(Date.now(), zone);\n  }\n\n  /**\n   * Returns this date time shifted back by the time zone offset.\n   * @hidden\n   */\n  static fromUTCLocalDate(date: Date, zone: TimeZone): DateTime {\n    return new DateTime(date.getTime() - 60000 * zone.offset, zone);\n  }\n\n  static fromInit(init: DateTimeInit, zone?: AnyTimeZone): DateTime {\n    let time = Date.UTC(init.year !== void 0 ? init.year : 1970,\n                        init.month !== void 0 ? init.month : 0,\n                        init.day !== void 0 ? init.day : 1,\n                        init.hour !== void 0 ? init.hour : 0,\n                        init.minute !== void 0 ? init.minute : 0,\n                        init.second !== void 0 ? init.second : 0,\n                        init.millisecond !== void 0 ? init.millisecond : 0);\n    if (init.zone !== void 0) {\n      zone = TimeZone.fromAny(init.zone);\n    }\n    if (zone !== void 0) {\n      zone = TimeZone.fromAny(zone);\n      time += 60000 * zone.offset;\n    } else {\n      zone = TimeZone.utc;\n    }\n    return new DateTime(time, zone);\n  }\n\n  static fromAny(value: AnyDateTime, zone?: AnyTimeZone): DateTime {\n    if (value === void 0 || value === null || value instanceof DateTime) {\n      return value;\n    } else if (value instanceof Date) {\n      zone = zone !== void 0 ? TimeZone.fromAny(zone) : TimeZone.utc;\n      return new DateTime(value.getTime(), zone);\n    } else if (typeof value === \"number\") {\n      zone = zone !== void 0 ? TimeZone.fromAny(zone) : TimeZone.utc;\n      return new DateTime(value, zone);\n    } else if (typeof value === \"string\") {\n      return DateTime.parse(value, zone);\n    } else if (DateTime.isInit(value)) {\n      return DateTime.fromInit(value, zone);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): DateTime | null {\n    let positional: boolean;\n    const header = value.header(\"date\");\n    if (header.isDefined()) {\n      value = header;\n      positional = true;\n    } else {\n      positional = false;\n    }\n    const init: DateTimeInit = {};\n    value.forEach(function (item: Item, index: number) {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0) {\n        if (key === \"year\") {\n          init.year = item.toValue().numberValue(init.year);\n        } else if (key === \"month\") {\n          init.month = item.toValue().numberValue(init.month);\n        } else if (key === \"day\") {\n          init.day = item.toValue().numberValue(init.day);\n        } else if (key === \"hour\") {\n          init.hour = item.toValue().numberValue(init.hour);\n        } else if (key === \"minute\") {\n          init.minute = item.toValue().numberValue(init.minute);\n        } else if (key === \"second\") {\n          init.second = item.toValue().numberValue(init.second);\n        } else if (key === \"millisecond\") {\n          init.millisecond = item.toValue().numberValue(init.millisecond);\n        } else if (key === \"zone\") {\n          init.zone = item.toValue().cast(TimeZone.form(), init.zone);\n        }\n      } else if (item instanceof Value && positional) {\n        if (index === 0) {\n          init.year = item.numberValue(init.year);\n        } else if (index === 1) {\n          init.month = item.numberValue(init.month);\n        } else if (index === 2) {\n          init.day = item.numberValue(init.day);\n        } else if (index === 3) {\n          init.hour = item.numberValue(init.hour);\n        } else if (index === 4) {\n          init.minute = item.numberValue(init.minute);\n        } else if (index === 5) {\n          init.second = item.numberValue(init.second);\n        } else if (index === 6) {\n          init.millisecond = item.numberValue(init.millisecond);\n        } else if (index === 7) {\n          init.zone = item.cast(TimeZone.form(), init.zone);\n        }\n      }\n    });\n    if (DateTime.isInit(init)) {\n      return DateTime.fromInit(init);\n    }\n    return null;\n  }\n\n  static parse(date: string, zone?: AnyTimeZone): DateTime {\n    return DateTimeFormat.iso8601.parse(date);\n  }\n\n  static time(date: AnyDateTime): number {\n    if (date instanceof DateTime) {\n      return date.time;\n    } else if (date instanceof Date) {\n      return date.getTime();\n    } else if (typeof date === \"number\") {\n      return date;\n    } else if (typeof date === \"string\") {\n      return DateTime.parse(date).time;\n    } else if (DateTime.isInit(date)) {\n      return DateTime.fromInit(date).time;\n    }\n    throw new TypeError(\"\" + date);\n  }\n\n  static zone(date: AnyDateTime): TimeZone {\n    if (date instanceof DateTime) {\n      return date.zone;\n    } else {\n      return TimeZone.utc;\n    }\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is DateTimeInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as DateTimeInit;\n      return (typeof init.year === \"undefined\" || typeof init.year === \"number\")\n          && (typeof init.month === \"undefined\" || typeof init.month === \"number\")\n          && (typeof init.day === \"undefined\" || typeof init.day === \"number\")\n          && (typeof init.hour === \"undefined\" || typeof init.hour === \"number\")\n          && (typeof init.minute === \"undefined\" || typeof init.minute === \"number\")\n          && (typeof init.second === \"undefined\" || typeof init.second === \"number\")\n          && (typeof init.millisecond === \"undefined\" || typeof init.millisecond === \"number\")\n          && (typeof init.zone === \"undefined\" || TimeZone.isAny(init.zone))\n          && (typeof init.year === \"number\"\n           || typeof init.month === \"number\"\n           || typeof init.day === \"number\"\n           || typeof init.hour === \"number\"\n           || typeof init.minute === \"number\"\n           || typeof init.second === \"number\"\n           || typeof init.millisecond === \"number\");\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyDateTime {\n    return value instanceof DateTime\n        || value instanceof Date\n        || typeof value === \"number\"\n        || typeof value === \"string\"\n        || DateTime.isInit(value);\n  }\n\n  @Lazy\n  static form(): Form<DateTime, AnyDateTime> {\n    return new DateTimeForm(new DateTime(0));\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {DateTime} from \"./DateTime\";\n\n/** @hidden */\nexport const DateTimeInterpolator = function (d0: DateTime, d1: DateTime): Interpolator<DateTime> {\n  const interpolator = function (u: number): DateTime {\n    const d0 = interpolator[0];\n    const d1 = interpolator[1];\n    return new DateTime(d0.time + u * (d1.time - d0.time), d1.zone);\n  } as Interpolator<DateTime>;\n  Object.setPrototypeOf(interpolator, DateTimeInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: d0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: d1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (d0: DateTime, d1: DateTime): Interpolator<DateTime>;\n\n  /** @hidden */\n  prototype: Interpolator<DateTime>;\n};\n\nDateTimeInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"./DateTime\";\nimport {Item, Value, Text, Form} from \"@swim/structure\";\n\n/** @hidden */\nexport class DateTimeForm extends Form<DateTime, AnyDateTime> {\n  constructor(unit: DateTime | undefined) {\n    super();\n    Object.defineProperty(this, \"unit\", {\n      value: unit,\n      enumerable: true,\n    });\n  }\n\n  // @ts-ignore\n  declare readonly unit: DateTime | undefined;\n\n  withUnit(unit: DateTime | undefined): Form<DateTime, AnyDateTime> {\n    if (unit !== this.unit) {\n      return new DateTimeForm(unit);\n    } else {\n      return this;\n    }\n  }\n\n  mold(date: AnyDateTime): Item {\n    date = DateTime.fromAny(date);\n    return Text.from(date.toString());\n  }\n\n  cast(value: Value): DateTime | undefined {\n    let date: DateTime | null = null;\n    try {\n      date = DateTime.fromValue(value);\n      if (date === void 0) {\n        const millis = value.numberValue(void 0);\n        if (millis !== void 0) {\n          date = new DateTime(millis);\n        } else {\n          const string = value.stringValue(void 0);\n          if (string !== void 0) {\n            date = DateTime.parse(string);\n          }\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return date !== null ? date : void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport {DateTimeInit, DateTime} from \"./DateTime\";\n\n/** @hidden */\nexport class DateTimeParser extends Parser<DateTime> {\n  private readonly dateParser: Parser<DateTimeInit>;\n\n  constructor(dateParser: Parser<DateTimeInit>) {\n    super();\n    this.dateParser = dateParser;\n  }\n\n  feed(input: Input): Parser<DateTime> {\n    return DateTimeParser.parse(input, this.dateParser);\n  }\n\n  static parse(input: Input, dateParser: Parser<DateTimeInit>): Parser<DateTime> {\n    dateParser = dateParser.feed(input);\n    if (dateParser.isDone()) {\n      return Parser.done(DateTime.fromAny(dateParser.bind()));\n    } else if (dateParser.isError()) {\n      return dateParser.asError();\n    }\n    return new DateTimeParser(dateParser);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\n\nexport class DateTimeLocale {\n  readonly periods: ReadonlyArray<string>;\n  readonly weekdays: ReadonlyArray<string>;\n  readonly shortWeekdays: ReadonlyArray<string>;\n  readonly months: ReadonlyArray<string>;\n  readonly shortMonths: ReadonlyArray<string>;\n\n  constructor(periods: ReadonlyArray<string> = DateTimeLocale.Periods,\n              weekdays: ReadonlyArray<string> = DateTimeLocale.Weekdays,\n              shortWeekdays: ReadonlyArray<string> = DateTimeLocale.ShortWeekdays,\n              months: ReadonlyArray<string> = DateTimeLocale.Months,\n              shortMonths: ReadonlyArray<string> = DateTimeLocale.ShortMonths) {\n    this.periods = periods;\n    this.weekdays = weekdays;\n    this.shortWeekdays = shortWeekdays;\n    this.months = months;\n    this.shortMonths = shortMonths;\n  }\n\n  @Lazy\n  static standard(): DateTimeLocale {\n    return new DateTimeLocale();\n  }\n\n  private static readonly Periods: ReadonlyArray<string> = [\n    \"AM\",\n    \"PM\",\n  ];\n  private static readonly Weekdays: ReadonlyArray<string> = [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ];\n  private static readonly ShortWeekdays: ReadonlyArray<string> = [\n    \"Sun\",\n    \"Mon\",\n    \"Tue\",\n    \"Wed\",\n    \"Thu\",\n    \"Fri\",\n    \"Sat\",\n  ];\n  private static readonly Months: ReadonlyArray<string> = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  private static readonly ShortMonths: ReadonlyArray<string> = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"../\"; // forward import\n\nexport interface DateTimeSpecifiers {\n  [symbol: string]: DateTimeFormat | undefined;\n  Y: DateTimeFormat;\n  m: DateTimeFormat;\n  B: DateTimeFormat;\n  b: DateTimeFormat;\n  d: DateTimeFormat;\n  A: DateTimeFormat;\n  a: DateTimeFormat;\n  H: DateTimeFormat;\n  I: DateTimeFormat;\n  p: DateTimeFormat;\n  M: DateTimeFormat;\n  S: DateTimeFormat;\n  L: DateTimeFormat;\n}\n\nexport const DateTimeSpecifiers = {} as {\n  /** @hidden */\n  _standard?: DateTimeSpecifiers,\n  standard(locale?: DateTimeLocale): DateTimeSpecifiers;\n};\n\nDateTimeSpecifiers.standard = function (locale?: DateTimeLocale): DateTimeSpecifiers {\n  let specifiers: DateTimeSpecifiers | undefined;\n  if (locale === void 0) {\n    locale = DateTimeLocale.standard();\n  }\n  if (locale === DateTimeLocale.standard()) {\n    specifiers = DateTimeSpecifiers._standard;\n  }\n  if (specifiers === void 0) {\n    specifiers = {\n      Y: DateTimeFormat.year,\n      m: DateTimeFormat.monthOfYear,\n      B: DateTimeFormat.month.withLocale(locale),\n      b: DateTimeFormat.shortMonth.withLocale(locale),\n      d: DateTimeFormat.dayOfMonth,\n      A: DateTimeFormat.weekday.withLocale(locale),\n      a: DateTimeFormat.shortWeekday.withLocale(locale),\n      H: DateTimeFormat.hour24,\n      I: DateTimeFormat.hour12,\n      p: DateTimeFormat.period.withLocale(locale),\n      M: DateTimeFormat.minute,\n      S: DateTimeFormat.second,\n      L: DateTimeFormat.millisecond,\n    };\n    if (locale === DateTimeLocale.standard()) {\n      DateTimeSpecifiers._standard = specifiers;\n    }\n  }\n  return specifiers;\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {AnyDateTime, DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeParser} from \"../DateTimeParser\";\nimport {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeSpecifiers} from \"./DateTimeSpecifiers\";\nimport {YearFormat} from \"../\"; // forward import\nimport {MonthOfYearFormat} from \"../\"; // forward import\nimport {MonthFormat} from \"../\"; // forward import\nimport {ShortMonthFormat} from \"../\"; // forward import\nimport {DayOfMonthFormat} from \"../\"; // forward import\nimport {WeekdayFormat} from \"../\"; // forward import\nimport {ShortWeekdayFormat} from \"../\"; // forward import\nimport {Hour24Format} from \"../\"; // forward import\nimport {Hour12Format} from \"../\"; // forward import\nimport {PeriodFormat} from \"../\"; // forward import\nimport {MinuteFormat} from \"../\"; // forward import\nimport {SecondFormat} from \"../\"; // forward import\nimport {MillisecondFormat} from \"../\"; // forward import\nimport {PatternFormat} from \"../\"; // forward import\n\n/** @hidden */\nexport interface DateNumberFactory {\n  bind(value: number, date: DateTimeInit, input: Input): Parser<DateTimeInit>;\n  cont(date: DateTimeInit, value: number, step: number, input: Input): Parser<DateTimeInit>;\n}\n\n/** @hidden */\nexport interface DateStringFactory {\n  bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit>;\n  cont(locale: DateTimeLocale, date: DateTimeInit, output: Output, input: Input): Parser<DateTimeInit>;\n}\n\nexport abstract class DateTimeFormat {\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    return this;\n  }\n\n  format(date: AnyDateTime): string {\n    date = DateTime.fromAny(date);\n    const output = Unicode.stringOutput();\n    this.writeDate(date as DateTime, output);\n    return output.bind();\n  }\n\n  abstract writeDate(date: DateTime, output: Output): void;\n\n  parse(input: Input | string): DateTime {\n    if (typeof input === \"string\") {\n      input = Unicode.stringInput(input);\n    }\n    while (input.isCont() && Unicode.isSpace(input.head())) {\n      input = input.step();\n    }\n    let parser = this.parseDate(input, {});\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  parseDate(input: Input, date: DateTimeInit): Parser<DateTime> {\n    const dateParser = this.parseDateTime(input, date);\n    if (dateParser.isDone()) {\n      return Parser.done(DateTime.fromAny(dateParser.bind()));\n    } else if (dateParser.isError()) {\n      return dateParser.asError();\n    }\n    return new DateTimeParser(dateParser);\n  }\n\n  /** @hidden */\n  abstract parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit>;\n\n  @Lazy\n  static get year(): YearFormat {\n    return new YearFormat();\n  }\n\n  @Lazy\n  static get monthOfYear(): MonthOfYearFormat {\n    return new MonthOfYearFormat();\n  }\n\n  @Lazy\n  static get month(): MonthFormat {\n    return new MonthFormat(DateTimeLocale.standard());\n  }\n\n  @Lazy\n  static get shortMonth(): ShortMonthFormat {\n    return new ShortMonthFormat(DateTimeLocale.standard());\n  }\n\n  @Lazy\n  static get dayOfMonth(): DayOfMonthFormat {\n    return new DayOfMonthFormat();\n  }\n\n  @Lazy\n  static get weekday(): WeekdayFormat {\n    return new WeekdayFormat(DateTimeLocale.standard());\n  }\n\n  @Lazy\n  static get shortWeekday(): ShortWeekdayFormat {\n    return new ShortWeekdayFormat(DateTimeLocale.standard());\n  }\n\n  @Lazy\n  static get hour24(): Hour24Format {\n    return new Hour24Format();\n  }\n\n  @Lazy\n  static get hour12(): Hour12Format {\n    return new Hour12Format();\n  }\n\n  @Lazy\n  static get period(): PeriodFormat {\n    return new PeriodFormat(DateTimeLocale.standard());\n  }\n\n  @Lazy\n  static get minute(): MinuteFormat {\n    return new MinuteFormat();\n  }\n\n  @Lazy\n  static get second(): SecondFormat {\n    return new SecondFormat();\n  }\n\n  @Lazy\n  static get millisecond(): YearFormat {\n    return new MillisecondFormat();\n  }\n\n  static pattern(pattern: string, specifiers?: DateTimeSpecifiers | DateTimeLocale): PatternFormat {\n    if (specifiers === void 0 || specifiers instanceof DateTimeLocale) {\n      specifiers = DateTimeSpecifiers.standard(specifiers);\n    }\n    return new PatternFormat(pattern, specifiers);\n  }\n\n  @Lazy\n  static get iso8601(): DateTimeFormat {\n    return new PatternFormat(\"%Y-%m-%dT%H:%M:%S.%LZ\", DateTimeSpecifiers.standard());\n  }\n\n  /** @hidden */\n  static parseDateNumber(input: Input, factory: DateNumberFactory, desc: string,\n                         minDigits: number, maxDigits: number, date: DateTimeInit | undefined,\n                         value: number = 0, step: number = 0): Parser<DateTimeInit> {\n    let c = 0;\n    while (step < maxDigits) {\n      if (input.isCont() && (c = input.head(), Base10.isDigit(c))) {\n        input.step();\n        value = 10 * value + Base10.decodeDigit(c);\n        step += 1;\n        continue;\n      }\n      break;\n    }\n    if (!input.isEmpty()) {\n      if (step >= minDigits) {\n        return factory.bind(value, date || {}, input);\n      } else {\n        return Parser.error(Diagnostic.expected(desc, input));\n      }\n    }\n    return factory.cont(date !== void 0 ? date : {}, value, step, input);\n  }\n\n  /** @hidden */\n  static parseDateString(input: Input, factory: DateStringFactory, locale: DateTimeLocale,\n                         date?: DateTimeInit, output?: Output<string>): Parser<DateTimeInit> {\n    let c = 0;\n    output = output || Unicode.stringOutput();\n    do {\n      if (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input.step();\n        output.write(c);\n        continue;\n      } else if (!input.isEmpty()) {\n        return factory.bind(locale, output.bind(), date || {}, input);\n      }\n      break;\n    } while (true);\n    return factory.cont(locale, date || {}, output, input);\n  }\n\n  /** @hidden */\n  static writeDateNumber2(value: number, output: Output): void {\n    const c1 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c0 = 48/*'0'*/ + value % 10;\n    output = output.write(c0).write(c1);\n  }\n\n  /** @hidden */\n  static writeDateNumber3(value: number, output: Output): void {\n    const c2 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c1 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c0 = 48/*'0'*/ + value % 10;\n    output = output.write(c0).write(c1).write(c2);\n  }\n\n  /** @hidden */\n  static writeDateNumber4(value: number, output: Output): void {\n    const c3 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c2 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c1 = 48/*'0'*/ + value % 10;\n    value /= 10;\n    const c0 = 48/*'0'*/ + value % 10;\n    output = output.write(c0).write(c1).write(c2).write(c3);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {YearParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class YearFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber4(date.year, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return YearParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {MonthOfYearParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class MonthOfYearFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.month + 1, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return MonthOfYearParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {MonthParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class MonthFormat extends DateTimeFormat {\n  private readonly locale: DateTimeLocale;\n\n  constructor(locale: DateTimeLocale) {\n    super();\n    this.locale = locale;\n  }\n\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    if (locale !== this.locale) {\n      return new MonthFormat(locale);\n    } else {\n      return this;\n    }\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    output.write(this.locale.months[date.month]!);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return MonthParser.parse(input, this.locale, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {ShortMonthParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class ShortMonthFormat extends DateTimeFormat {\n  private readonly locale: DateTimeLocale;\n\n  constructor(locale: DateTimeLocale) {\n    super();\n    this.locale = locale;\n  }\n\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    if (locale !== this.locale) {\n      return new ShortMonthFormat(locale);\n    } else {\n      return this;\n    }\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    output.write(this.locale.shortMonths[date.month]!);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return ShortMonthParser.parse(input, this.locale, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {DayOfMonthParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class DayOfMonthFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.day, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return DayOfMonthParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {WeekdayParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class WeekdayFormat extends DateTimeFormat {\n  private readonly locale: DateTimeLocale;\n\n  constructor(locale: DateTimeLocale) {\n    super();\n    this.locale = locale;\n  }\n\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    if (locale !== this.locale) {\n      return new WeekdayFormat(locale);\n    } else {\n      return this;\n    }\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    output.write(this.locale.weekdays[date.weekday]!);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return WeekdayParser.parse(input, this.locale, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {ShortWeekdayParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class ShortWeekdayFormat extends DateTimeFormat {\n  private readonly locale: DateTimeLocale;\n\n  constructor(locale: DateTimeLocale) {\n    super();\n    this.locale = locale;\n  }\n\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    if (locale !== this.locale) {\n      return new ShortWeekdayFormat(locale);\n    } else {\n      return this;\n    }\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    output.write(this.locale.shortWeekdays[date.weekday]!);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return ShortWeekdayParser.parse(input, this.locale, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {Hour24Parser} from \"../\"; // forward import\n\n/** @hidden */\nexport class Hour24Format extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.hour, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return Hour24Parser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {Hour12Parser} from \"../\"; // forward import\n\n/** @hidden */\nexport class Hour12Format extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.hour % 12 || 12, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return Hour12Parser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {PeriodParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class PeriodFormat extends DateTimeFormat {\n  private readonly locale: DateTimeLocale;\n\n  constructor(locale: DateTimeLocale) {\n    super();\n    this.locale = locale;\n  }\n\n  withLocale(locale: DateTimeLocale): DateTimeFormat {\n    if (locale !== this.locale) {\n      return new PeriodFormat(locale);\n    } else {\n      return this;\n    }\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    output.write(this.locale.periods[+(date.hour >= 12)]!);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return PeriodParser.parse(input, this.locale, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {MinuteParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class MinuteFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.minute, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return MinuteParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {SecondParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class SecondFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber2(date.second, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return SecondParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {MillisecondParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class MillisecondFormat extends DateTimeFormat {\n  writeDate(date: DateTime, output: Output): void {\n    DateTimeFormat.writeDateNumber3(date.millisecond, output);\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return MillisecondParser.parse(input, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Input, Output, Parser} from \"@swim/codec\";\nimport type {DateTimeInit, DateTime} from \"../DateTime\";\nimport type {DateTimeSpecifiers} from \"./DateTimeSpecifiers\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\nimport {PatternParser} from \"../\"; // forward import\n\n/** @hidden */\nexport class PatternFormat extends DateTimeFormat {\n  private readonly pattern: string;\n  private readonly specifiers: DateTimeSpecifiers;\n\n  constructor(pattern: string, specifiers: DateTimeSpecifiers) {\n    super();\n    this.pattern = pattern;\n    this.specifiers = specifiers;\n  }\n\n  writeDate(date: DateTime, output: Output): void {\n    const pattern = this.pattern;\n    const specifiers = this.specifiers;\n    let i = 0;\n    let j = 0;\n    const n = pattern.length;\n    while (j < n) {\n      if (pattern.charCodeAt(j) === 37/*'%'*/) {\n        if (i !== j) {\n          output.write(pattern.slice(i, j));\n        }\n        const s = pattern.charAt(j + 1);\n        const f = specifiers[s];\n        if (f !== void 0) {\n          f.writeDate(date, output);\n        }\n        j += 2;\n        i = j;\n      } else {\n        j += 1;\n      }\n    }\n    if (i !== j) {\n      output.write(pattern.slice(i, j));\n    }\n  }\n\n  parseDateTime(input: Input, date: DateTimeInit): Parser<DateTimeInit> {\n    return PatternParser.parse(input, this.pattern, this.specifiers, date);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class YearParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly year: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, year?: number, step?: number) {\n    super();\n    this.date = date;\n    this.year = year;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return YearParser.parse(input, this.date, this.year, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, year?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, YearParser, \"full year\", 4, 4, date, year, step);\n  }\n\n  static bind(year: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.year = year;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, year: number, step: number): Parser<DateTimeInit> {\n    return new YearParser(date, year, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class MonthOfYearParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly month: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, month?: number, step?: number) {\n    super();\n    this.date = date;\n    this.month = month;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return MonthOfYearParser.parse(input, this.date, this.month, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, month?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, MonthOfYearParser, \"month number\", 2, 2, date, month, step);\n  }\n\n  static bind(month: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.month = month - 1;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, month: number, step: number): Parser<DateTimeInit> {\n    return new MonthOfYearParser(date, month, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class MonthParser extends Parser<DateTimeInit> {\n  private readonly locale: DateTimeLocale;\n  private readonly date: DateTimeInit | undefined;\n  private readonly output: Output<string> | undefined;\n\n  constructor(locale: DateTimeLocale, date?: DateTimeInit, output?: Output<string>) {\n    super();\n    this.locale = locale;\n    this.date = date;\n    this.output = output;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return MonthParser.parse(input, this.locale, this.date, this.output);\n  }\n\n  static parse(input: Input, locale: DateTimeLocale, date?: DateTimeInit,\n               output?: Output<string>): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateString(input, MonthParser, locale, date, output);\n  }\n\n  static bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit> {\n    const month = locale.months.indexOf(value);\n    if (month >= 0) {\n      date.month = month;\n      return Parser.done(date);\n    } else {\n      return Parser.error(Diagnostic.message(\"expected month, but found \" + value, input));\n    }\n  }\n\n  static cont(locale: DateTimeLocale, date: DateTimeInit, output: Output<string>): Parser<DateTimeInit> {\n    return new MonthParser(locale, date, output);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class ShortMonthParser extends Parser<DateTimeInit> {\n  private readonly locale: DateTimeLocale;\n  private readonly date: DateTimeInit | undefined;\n  private readonly output: Output<string> | undefined;\n\n  constructor(locale: DateTimeLocale, date?: DateTimeInit, output?: Output<string>) {\n    super();\n    this.locale = locale;\n    this.date = date;\n    this.output = output;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return ShortMonthParser.parse(input, this.locale, this.date, this.output);\n  }\n\n  static parse(input: Input, locale: DateTimeLocale, date?: DateTimeInit,\n               output?: Output<string>): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateString(input, ShortMonthParser, locale, date, output);\n  }\n\n  static bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit> {\n    const month = locale.shortMonths.indexOf(value);\n    if (month >= 0) {\n      date.month = month;\n      return Parser.done(date);\n    } else {\n      return Parser.error(Diagnostic.message(\"expected short month, but found \" + value, input));\n    }\n  }\n\n  static cont(locale: DateTimeLocale, date: DateTimeInit, output: Output<string>): Parser<DateTimeInit> {\n    return new ShortMonthParser(locale, date, output);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class DayOfMonthParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly day: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, day?: number, step?: number) {\n    super();\n    this.date = date;\n    this.day = day;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return DayOfMonthParser.parse(input, this.date, this.day, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, day?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, DayOfMonthParser, \"day of month\", 2, 2, date, day, step);\n  }\n\n  static bind(day: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.day = day;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, month: number, step: number): Parser<DateTimeInit> {\n    return new DayOfMonthParser(date, month, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class WeekdayParser extends Parser<DateTimeInit> {\n  private readonly locale: DateTimeLocale;\n  private readonly date: DateTimeInit | undefined;\n  private readonly output: Output<string> | undefined;\n\n  constructor(locale: DateTimeLocale, date?: DateTimeInit, output?: Output<string>) {\n    super();\n    this.locale = locale;\n    this.date = date;\n    this.output = output;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return WeekdayParser.parse(input, this.locale, this.date, this.output);\n  }\n\n  static parse(input: Input, locale: DateTimeLocale, date?: DateTimeInit,\n               output?: Output<string>): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateString(input, WeekdayParser, locale, date, output);\n  }\n\n  static bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit> {\n    const day = locale.weekdays.indexOf(value);\n    if (day >= 0) {\n      // nop\n      return Parser.done(date);\n    } else {\n      return Parser.error(Diagnostic.message(\"expected weekday, but found \" + value, input));\n    }\n  }\n\n  static cont(locale: DateTimeLocale, date: DateTimeInit, output: Output<string>): Parser<DateTimeInit> {\n    return new WeekdayParser(locale, date, output);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class ShortWeekdayParser extends Parser<DateTimeInit> {\n  private readonly locale: DateTimeLocale;\n  private readonly date: DateTimeInit | undefined;\n  private readonly output: Output<string> | undefined;\n\n  constructor(locale: DateTimeLocale, date?: DateTimeInit, output?: Output<string>) {\n    super();\n    this.locale = locale;\n    this.date = date;\n    this.output = output;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return ShortWeekdayParser.parse(input, this.locale, this.date, this.output);\n  }\n\n  static parse(input: Input, locale: DateTimeLocale, date?: DateTimeInit,\n               output?: Output<string>): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateString(input, ShortWeekdayParser, locale, date, output);\n  }\n\n  static bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit> {\n    const day = locale.shortWeekdays.indexOf(value);\n    if (day >= 0) {\n      // nop\n      return Parser.done(date);\n    } else {\n      return Parser.error(Diagnostic.message(\"expected short weekday, but found \" + value, input));\n    }\n  }\n\n  static cont(locale: DateTimeLocale, date: DateTimeInit, output: Output<string>): Parser<DateTimeInit> {\n    return new ShortWeekdayParser(locale, date, output);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class Hour24Parser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly hour: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, hour?: number, step?: number) {\n    super();\n    this.date = date;\n    this.hour = hour;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return Hour24Parser.parse(input, this.date, this.hour, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, hour?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, Hour24Parser, \"hour (24)\", 2, 2, date, hour, step);\n  }\n\n  static bind(hour: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.hour = hour;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, hour: number, step: number): Parser<DateTimeInit> {\n    return new Hour24Parser(date, hour, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class Hour12Parser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly hour: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, hour?: number, step?: number) {\n    super();\n    this.date = date;\n    this.hour = hour;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return Hour12Parser.parse(input, this.date, this.hour, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, hour?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, Hour12Parser, \"hour (12)\", 2, 2, date, hour, step);\n  }\n\n  static bind(hour: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.hour = (date.hour !== void 0 ? date.hour : 0) + hour;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, hour: number, step: number): Parser<DateTimeInit> {\n    return new Hour12Parser(date, hour, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport type {DateTimeLocale} from \"./DateTimeLocale\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class PeriodParser extends Parser<DateTimeInit> {\n  private readonly locale: DateTimeLocale;\n  private readonly date: DateTimeInit | undefined;\n  private readonly output: Output<string> | undefined;\n\n  constructor(locale: DateTimeLocale, date?: DateTimeInit, output?: Output<string>) {\n    super();\n    this.locale = locale;\n    this.date = date;\n    this.output = output;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return PeriodParser.parse(input, this.locale, this.date, this.output);\n  }\n\n  static parse(input: Input, locale: DateTimeLocale, date?: DateTimeInit,\n               output?: Output<string>): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateString(input, PeriodParser, locale, date, output);\n  }\n\n  static bind(locale: DateTimeLocale, value: string, date: DateTimeInit, input: Input): Parser<DateTimeInit> {\n    const period = locale.months.indexOf(value);\n    if (period >= 0) {\n      date.hour = (date.hour || 0) + 12 * period;\n      return Parser.done(date);\n    } else {\n      return Parser.error(Diagnostic.message(\"expected period of day, but found \" + value, input));\n    }\n  }\n\n  static cont(locale: DateTimeLocale, date: DateTimeInit, output: Output<string>): Parser<DateTimeInit> {\n    return new PeriodParser(locale, date, output);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class MinuteParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly minute: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, minute?: number, step?: number) {\n    super();\n    this.date = date;\n    this.minute = minute;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return MinuteParser.parse(input, this.date, this.minute, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, minute?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, MinuteParser, \"minute\", 2, 2, date, minute, step);\n  }\n\n  static bind(minute: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.minute = minute;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, minute: number, step: number): Parser<DateTimeInit> {\n    return new MinuteParser(date, minute, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class SecondParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly second: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, second?: number, step?: number) {\n    super();\n    this.date = date;\n    this.second = second;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return SecondParser.parse(input, this.date, this.second, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, second?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, SecondParser, \"second\", 2, 2, date, second, step);\n  }\n\n  static bind(second: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.second = second;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, second: number, step: number): Parser<DateTimeInit> {\n    return new SecondParser(date, second, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport {DateTimeFormat} from \"./DateTimeFormat\";\n\n/** @hidden */\nexport class MillisecondParser extends Parser<DateTimeInit> {\n  private readonly date: DateTimeInit | undefined;\n  private readonly millisecond: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(date?: DateTimeInit, millisecond?: number, step?: number) {\n    super();\n    this.date = date;\n    this.millisecond = millisecond;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return MillisecondParser.parse(input, this.date, this.millisecond, this.step);\n  }\n\n  static parse(input: Input, date?: DateTimeInit, millisecond?: number, step?: number): Parser<DateTimeInit> {\n    return DateTimeFormat.parseDateNumber(input, MillisecondParser, \"millisecond\", 1, 3, date, millisecond, step);\n  }\n\n  static bind(millisecond: number, date: DateTimeInit): Parser<DateTimeInit> {\n    date.millisecond = millisecond;\n    return Parser.done(date);\n  }\n\n  static cont(date: DateTimeInit, millisecond: number, step: number): Parser<DateTimeInit> {\n    return new MillisecondParser(date, millisecond, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic} from \"@swim/codec\";\nimport type {DateTimeInit} from \"../DateTime\";\nimport type {DateTimeSpecifiers} from \"./DateTimeSpecifiers\";\n\n/** @hidden */\nexport class PatternParser extends Parser<DateTimeInit> {\n  private readonly pattern: string;\n  private readonly specifiers: DateTimeSpecifiers;\n  private readonly date: DateTimeInit | undefined;\n  private readonly dateParser: Parser<DateTimeInit> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(pattern: string, specifiers: DateTimeSpecifiers, date?: DateTimeInit,\n              dateParser?: Parser<DateTimeInit>, step?: number) {\n    super();\n    this.pattern = pattern;\n    this.specifiers = specifiers;\n    this.date = date;\n    this.dateParser = dateParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<DateTimeInit> {\n    return PatternParser.parse(input, this.pattern, this.specifiers, this.date,\n                                     this.dateParser, this.step);\n  }\n\n  static parse(input: Input, pattern: string, specifiers: DateTimeSpecifiers,\n               date: DateTimeInit = {}, dateParser?: Parser<DateTimeInit>,\n               step: number = 0): Parser<DateTimeInit> {\n    let c = 0;\n    const n = pattern.length;\n    while (step < n) {\n      const p = pattern.charCodeAt(step);\n      if (p === 37/*'%'*/) {\n        if (dateParser === void 0) {\n          const s = pattern.charAt(step + 1);\n          const format = specifiers[s];\n          if (format !== void 0) {\n            dateParser = format.parseDateTime(input, date);\n          } else {\n            return Parser.error(Diagnostic.message(\"unknown format specifier: \" + s, input));\n          }\n        } else {\n          dateParser = dateParser.feed(input);\n        }\n        if (dateParser.isDone()) {\n          date = dateParser.bind();\n          dateParser = void 0;\n          step += 2;\n          continue;\n        } else if (dateParser.isError()) {\n          return dateParser.asError();\n        }\n      } else if (input.isCont()) {\n        c = input.head();\n        if (c === p) {\n          input.step();\n          step += 1;\n          continue;\n        } else {\n          return Parser.error(Diagnostic.expected(p, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n      break;\n    }\n    if (step === n) {\n      return Parser.done(date);\n    }\n    return new PatternParser(pattern, specifiers, date, dateParser, step);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy} from \"@swim/util\";\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {FilterTimeInterval} from \"../\"; // forward import\nimport {YearInterval} from \"../\"; // forward import\nimport {MonthInterval} from \"../\"; // forward import\nimport {WeekInterval} from \"../\"; // forward import\nimport {DayInterval} from \"../\"; // forward import\nimport {HourInterval} from \"../\"; // forward import\nimport {MinuteInterval} from \"../\"; // forward import\nimport {SecondInterval} from \"../\"; // forward import\nimport {MillisecondInterval} from \"../\"; // forward import\n\nexport abstract class TimeInterval {\n  abstract offset(d: AnyDateTime, k?: number): DateTime;\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    return this.floor(this.offset(d, k));\n  }\n\n  abstract floor(d: AnyDateTime): DateTime;\n\n  ceil(d: AnyDateTime): DateTime {\n    if (d instanceof DateTime) {\n      d = new DateTime(d.time - 1, d.zone);\n    } else {\n      d = DateTime.time(d) - 1;\n    }\n    return this.next(this.floor(d), 1);\n  }\n\n  round(t: AnyDateTime): DateTime {\n    const d = DateTime.fromAny(t);\n    const d0 = this.floor(d);\n    const d1 = this.ceil(d);\n    return d.time - d0.time < d1.time - d.time ? d0 : d1;\n  }\n\n  range(t0: AnyDateTime, t1: AnyDateTime, step?: number): DateTime[] {\n    let d0 = this.ceil(t0);\n    const d1 = DateTime.time(t1);\n    const ds: DateTime[] = [];\n    step = typeof step === \"number\" ? Math.floor(step) : 1;\n    if (step > 0) {\n      while (d0.isDefined() && d0.time < d1) {\n        ds.push(d0);\n        d0 = this.next(d0, step);\n      }\n    }\n    return ds;\n  }\n\n  filter(predicate: (d: DateTime) => boolean): TimeInterval {\n    return new FilterTimeInterval(this, predicate);\n  }\n\n  @Lazy\n  static get year(): UnitTimeInterval {\n    return new YearInterval();\n  }\n\n  @Lazy\n  static get month(): UnitTimeInterval {\n    return new MonthInterval();\n  }\n\n  @Lazy\n  static get week(): TimeInterval {\n    return new WeekInterval();\n  }\n\n  @Lazy\n  static get day(): UnitTimeInterval {\n    return new DayInterval();\n  }\n\n  @Lazy\n  static get hour(): UnitTimeInterval {\n    return new HourInterval();\n  }\n\n  @Lazy\n  static get minute(): UnitTimeInterval {\n    return new MinuteInterval();\n  }\n\n  @Lazy\n  static get second(): UnitTimeInterval {\n    return new SecondInterval();\n  }\n\n  @Lazy\n  static get millisecond(): UnitTimeInterval {\n    return new MillisecondInterval();\n  }\n\n  static years(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.year.range(d0, d1, step);\n  }\n\n  static months(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.month.range(d0, d1, step);\n  }\n\n  static weeks(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.week.range(d0, d1, step);\n  }\n\n  static days(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.day.range(d0, d1, step);\n  }\n\n  static hours(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.hour.range(d0, d1, step);\n  }\n\n  static minutes(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.minute.range(d0, d1, step);\n  }\n\n  static seconds(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.second.range(d0, d1, step);\n  }\n\n  static milliseconds(d0: AnyDateTime, d1: AnyDateTime, step?: number): DateTime[] {\n    return TimeInterval.millisecond.range(d0, d1, step);\n  }\n\n  /** @hidden */\n  static readonly MillisPerSecond: number = 1000;\n  /** @hidden */\n  static readonly MillisPerMinute: number = 60 * TimeInterval.MillisPerSecond;\n  /** @hidden */\n  static readonly MillisPerHour: number = 60 * TimeInterval.MillisPerMinute;\n}\n\nexport abstract class UnitTimeInterval extends TimeInterval {\n  abstract every(k: number): TimeInterval;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeInterval} from \"./TimeInterval\";\n\n/** @hidden */\nexport class FilterTimeInterval extends TimeInterval {\n  private readonly unit: TimeInterval;\n  private readonly predicate: (d: DateTime) => boolean;\n\n  constructor(unit: TimeInterval, predicate: (d: DateTime) => boolean) {\n    super();\n    this.unit = unit;\n    this.predicate = predicate;\n  }\n\n  offset(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    while (k < 0) {\n      do {\n        d = this.unit.offset(d, -1);\n      } while (d.isDefined() && !this.predicate(d));\n      k += 1;\n    }\n    while (k > 0) {\n      do {\n        d = this.unit.offset(d, 1);\n      } while (d.isDefined() && !this.predicate(d));\n      k -= 1;\n    }\n    return d;\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    while (d = this.unit.floor(d), d.isDefined() && !this.predicate(d)) {\n      d = new DateTime(d.time - 1, d.zone);\n    }\n    return d;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {YearsInterval} from \"../\"; // forward import\n\n/** @hidden */\nexport class YearInterval extends UnitTimeInterval {\n  offset(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = d.withYear(d.year + k);\n    return d;\n  }\n\n  next(t: AnyDateTime, k?: number): DateTime {\n    const d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    return d.withYear(d.year + k).withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    const d = DateTime.fromAny(t);\n    return d.withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n\n  ceil(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = new DateTime(d.time - 1, d.zone);\n    d = d.withMonth(0, 1).withHour(0, 0, 0, 0);\n    d = d.withYear(d.year + 1);\n    return d.withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new YearsInterval(k);\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeInterval} from \"./TimeInterval\";\n\n/** @hidden */\nexport class YearsInterval extends TimeInterval {\n  private readonly stride: number;\n\n  constructor(stride: number) {\n    super();\n    this.stride = stride;\n  }\n\n  offset(t: AnyDateTime, k?: number): DateTime {\n    const d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    return d.withYear(d.year + k * this.stride);\n  }\n\n  next(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = d.withYear(Math.floor((d.year + k * this.stride) / this.stride) * this.stride);\n    return d.withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = d.withYear(Math.floor(d.year / this.stride) * this.stride);\n    return d.withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n\n  ceil(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = new DateTime(d.time - 1, d.zone);\n    d = d.withYear(Math.floor(d.year / this.stride) * this.stride);\n    d = d.withMonth(0, 1).withHour(0, 0, 0, 0);\n    d = d.withYear(Math.floor((d.year + this.stride) / this.stride) * this.stride);\n    return d.withMonth(0, 1).withHour(0, 0, 0, 0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {FilterTimeInterval} from \"./FilterTimeInterval\";\n\n/** @hidden */\nexport class MonthInterval extends UnitTimeInterval {\n  offset(t: AnyDateTime, k?: number): DateTime {\n    const d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    return d.withMonth(d.month + k);\n  }\n\n  next(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = d.withMonth(d.month + k);\n    return d.withDay(1).withHour(0, 0, 0, 0);\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    const d = DateTime.fromAny(t);\n    return d.withDay(1).withHour(0, 0, 0, 0);\n  }\n\n  ceil(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = new DateTime(d.time - 1, d.zone);\n    d = d.withDay(1).withHour(0, 0, 0, 0);\n    d = d.withMonth(d.month + 1);\n    return d.withDay(1).withHour(0, 0, 0, 0);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new FilterTimeInterval(this, MonthInterval.modulo.bind(void 0, k));\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n\n  private static modulo(k: number, d: DateTime): boolean {\n    const month = d.month;\n    return isFinite(month) && month % k === 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeInterval} from \"./TimeInterval\";\n\n/** @hidden */\nexport class WeekInterval extends TimeInterval {\n  readonly day: number;\n\n  constructor(day: number = 0) {\n    super();\n    this.day = day;\n  }\n\n  offset(t: AnyDateTime, k?: number): DateTime {\n    const d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    return d.withDay(d.day + 7 * k);\n  }\n\n  next(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = d.withDay(d.day + 7 * k);\n    d = d.withDay(d.day - (d.weekday + 7 - this.day) % 7);\n    return d.withHour(0, 0, 0, 0);\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = d.withDay(d.day - (d.weekday + 7 - this.day) % 7);\n    return d.withHour(0, 0, 0, 0);\n  }\n\n  ceil(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = new DateTime(d.time - 1, d.zone);\n    d = d.withDay(d.day - (d.weekday + 7 - this.day) % 7);\n    d = d.withHour(0, 0, 0, 0);\n    d = d.withDay(d.day + 7);\n    return d.withHour(0, 0, 0, 0);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {FilterTimeInterval} from \"./FilterTimeInterval\";\n\n/** @hidden */\nexport class DayInterval extends UnitTimeInterval {\n  offset(t: AnyDateTime, k?: number): DateTime {\n    const d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    return d.withDay(d.day + k);\n  }\n\n  next(t: AnyDateTime, k?: number): DateTime {\n    let d = DateTime.fromAny(t);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = d.withDay(d.day + k);\n    return d.withHour(0, 0, 0, 0);\n  }\n\n  floor(t: AnyDateTime): DateTime {\n    const d = DateTime.fromAny(t);\n    return d.withHour(0, 0, 0, 0);\n  }\n\n  ceil(t: AnyDateTime): DateTime {\n    let d = DateTime.fromAny(t);\n    d = new DateTime(d.time - 1, d.zone);\n    d = d.withHour(0, 0, 0, 0);\n    d = d.withDay(d.day + 1);\n    return d.withHour(0, 0, 0, 0);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new FilterTimeInterval(this, DayInterval.modulo.bind(void 0, k));\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n\n  private static modulo(k: number, d: DateTime): boolean {\n    const day = d.day;\n    return isFinite(day) && day % k === 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {FilterTimeInterval} from \"./FilterTimeInterval\";\n\n/** @hidden */\nexport class HourInterval extends UnitTimeInterval {\n  offset(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * TimeInterval.MillisPerHour;\n    return new DateTime(d, z);\n  }\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * TimeInterval.MillisPerHour;\n    let dtz = z.offset * TimeInterval.MillisPerMinute % TimeInterval.MillisPerHour;\n    if (dtz < 0) {\n      dtz += TimeInterval.MillisPerHour;\n    }\n    d = Math.floor((d - dtz) / TimeInterval.MillisPerHour) * TimeInterval.MillisPerHour + dtz;\n    return new DateTime(d, z);\n  }\n\n  floor(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    let dtz = z.offset * TimeInterval.MillisPerMinute % TimeInterval.MillisPerHour;\n    if (dtz < 0) {\n      dtz += TimeInterval.MillisPerHour;\n    }\n    d = Math.floor((d - dtz) / TimeInterval.MillisPerHour) * TimeInterval.MillisPerHour + dtz;\n    return new DateTime(d, z);\n  }\n\n  ceil(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    d -= 1;\n    let dtz = z.offset * TimeInterval.MillisPerMinute % TimeInterval.MillisPerHour;\n    if (dtz < 0) {\n      dtz += TimeInterval.MillisPerHour;\n    }\n    d = (Math.floor((d - dtz) / TimeInterval.MillisPerHour) * TimeInterval.MillisPerHour + dtz) + TimeInterval.MillisPerHour;\n    d = Math.floor((d - dtz) / TimeInterval.MillisPerHour) * TimeInterval.MillisPerHour + dtz;\n    return new DateTime(d, z);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new FilterTimeInterval(this, HourInterval.modulo.bind(void 0, k));\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n\n  private static modulo(k: number, d: DateTime): boolean {\n    const hour = d.hour;\n    return isFinite(hour) && hour % k === 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {FilterTimeInterval} from \"./FilterTimeInterval\";\n\n/** @hidden */\nexport class MinuteInterval extends UnitTimeInterval {\n  offset(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * TimeInterval.MillisPerMinute;\n    return new DateTime(d, z);\n  }\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d = Math.floor((d + k * TimeInterval.MillisPerMinute) / TimeInterval.MillisPerMinute) * TimeInterval.MillisPerMinute;\n    return new DateTime(d, z);\n  }\n\n  floor(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    d = Math.floor(d / TimeInterval.MillisPerMinute) * TimeInterval.MillisPerMinute;\n    return new DateTime(d, z);\n  }\n\n  ceil(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    d = Math.floor(((Math.floor((d - 1) / TimeInterval.MillisPerMinute) * TimeInterval.MillisPerMinute) + TimeInterval.MillisPerMinute) / TimeInterval.MillisPerMinute) * TimeInterval.MillisPerMinute;\n    return new DateTime(d, z);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new FilterTimeInterval(this, MinuteInterval.modulo.bind(void 0, k));\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n\n  private static modulo(k: number, d: DateTime): boolean {\n    const minute = d.minute;\n    return isFinite(minute) && minute % k === 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {FilterTimeInterval} from \"./FilterTimeInterval\";\n\n/** @hidden */\nexport class SecondInterval extends UnitTimeInterval {\n  offset(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * TimeInterval.MillisPerSecond;\n    return new DateTime(d, z);\n  }\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * TimeInterval.MillisPerSecond;\n    d = Math.floor(d / TimeInterval.MillisPerSecond) * TimeInterval.MillisPerSecond;\n    return new DateTime(d, z);\n  }\n\n  floor(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    d = Math.floor(d / TimeInterval.MillisPerSecond) * TimeInterval.MillisPerSecond;\n    return new DateTime(d, z);\n  }\n\n  ceil(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    d = Math.floor(((Math.floor((d - 1) / TimeInterval.MillisPerSecond) * TimeInterval.MillisPerSecond) + TimeInterval.MillisPerSecond) / TimeInterval.MillisPerSecond) * TimeInterval.MillisPerSecond;\n    return new DateTime(d, z);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new FilterTimeInterval(this, SecondInterval.modulo.bind(void 0, k));\n    } else {\n      throw new Error('' + k);\n    }\n  }\n\n  private static modulo(k: number, d: DateTime): boolean {\n    const second = d.second;\n    return isFinite(second) && second % k === 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {UnitTimeInterval, TimeInterval} from \"./TimeInterval\";\nimport {MillisecondsInterval} from \"../\"; // forward import\n\n/** @hidden */\nexport class MillisecondInterval extends UnitTimeInterval {\n  offset(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k;\n    return new DateTime(d, z);\n  }\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k;\n    return new DateTime(d, z);\n  }\n\n  floor(d: AnyDateTime): DateTime {\n    return DateTime.fromAny(d);\n  }\n\n  ceil(d: AnyDateTime): DateTime {\n    return DateTime.fromAny(d);\n  }\n\n  every(k: number): TimeInterval {\n    if (k === 1) {\n      return this;\n    } else if (isFinite(k) && k >= 1) {\n      return new MillisecondsInterval(k);\n    } else {\n      throw new Error(\"\" + k);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeInterval} from \"./TimeInterval\";\n\n/** @hidden */\nexport class MillisecondsInterval extends TimeInterval {\n  private readonly stride: number;\n\n  constructor(stride: number) {\n    super();\n    if (!isFinite(stride)) {\n      stride = 1;\n    }\n    this.stride = stride;\n  }\n\n  offset(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    d += k * this.stride;\n    return new DateTime(d, z);\n  }\n\n  next(d: AnyDateTime, k?: number): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    k = Math.max(1, typeof k === \"number\" ? Math.floor(k) : 1);\n    const stride = this.stride;\n    d = Math.floor((d + k * stride) / stride) * stride;\n    return new DateTime(d, z);\n  }\n\n  floor(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    const stride = this.stride;\n    d = Math.floor(d / stride) * stride;\n    return new DateTime(d, z);\n  }\n\n  ceil(d: AnyDateTime): DateTime {\n    const z = DateTime.zone(d);\n    d = DateTime.time(d);\n    const stride = this.stride;\n    d = Math.floor(((Math.floor((d - 1) / stride) * stride) + stride) / stride) * stride;\n    return new DateTime(d, z);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Domain, Interpolate, Interpolator} from \"@swim/mapping\";\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeDomainInterpolator} from \"./\"; // forward import\nimport {TimeRange} from \"./\"; // forward import\n\nexport interface TimeDomain extends Domain<DateTime>, Interpolate<TimeDomain> {\n  readonly 0: DateTime;\n\n  readonly 1: DateTime;\n\n  readonly inverse: TimeRange;\n\n  contains(t: AnyDateTime): boolean;\n\n  interpolateTo(that: TimeDomain): Interpolator<TimeDomain>;\n  interpolateTo(that: unknown): Interpolator<TimeDomain> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const TimeDomain = function (x0: DateTime, x1: DateTime): TimeDomain {\n  const domain = function (t: DateTime): number {\n    const t0 = domain[0].time;\n    const t1 = domain[1].time;\n    const dt = t1 - t0;\n    return dt !== 0 ? (t.time - t0) / dt : 0;\n  } as TimeDomain;\n  Object.setPrototypeOf(domain, TimeDomain.prototype);\n  Object.defineProperty(domain, 0, {\n    value: x0,\n    enumerable: true,\n  });\n  Object.defineProperty(domain, 1, {\n    value: x1,\n    enumerable: true,\n  });\n  return domain;\n} as {\n  (x0: DateTime, x1: DateTime): TimeDomain;\n\n  /** @hidden */\n  prototype: TimeDomain;\n}\n\nTimeDomain.prototype = Object.create(Domain.prototype);\n\nObject.defineProperty(TimeDomain.prototype, \"inverse\", {\n  get(this: TimeDomain): TimeRange {\n    return TimeRange(this[0], this[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nTimeDomain.prototype.contains = function (t: AnyDateTime): boolean {\n  t = DateTime.time(t);\n  return this[0].time <= t && t <= this[1].time;\n};\n\nTimeDomain.prototype.interpolateTo = function (this: TimeDomain, that: unknown): Interpolator<TimeDomain> | null {\n  if (that instanceof TimeDomain) {\n    return TimeDomainInterpolator(this, that);\n  }\n  return null;\n} as typeof TimeDomain.prototype.interpolateTo;\n\nTimeDomain.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof TimeDomain;\n};\n\nTimeDomain.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof TimeDomain) {\n    return that.canEqual(this) && this[0].equals(that[0]) && this[1].equals(that[1]);\n  }\n  return false;\n};\n\nTimeDomain.prototype.toString = function (): string {\n  return \"TimeDomain(\" + this[0] + \", \" + this[1] + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {DateTime} from \"../DateTime\";\nimport {TimeDomain} from \"./TimeDomain\";\n\n/** @hidden */\nexport const TimeDomainInterpolator = function (x0: TimeDomain, x1: TimeDomain): Interpolator<TimeDomain> {\n  const interpolator = function (u: number): TimeDomain {\n    const x0 = interpolator[0];\n    const x00 = x0[0];\n    const x01 = x0[1];\n    const x1 = interpolator[1];\n    const x10 = x1[0];\n    const x11 = x1[1];\n    return TimeDomain(new DateTime(x00.time + u * (x10.time - x00.time), u === 0 ? x00.zone : x10.zone),\n                      new DateTime(x01.time + u * (x11.time - x01.time), u === 0 ? x01.zone : x11.zone));\n  } as Interpolator<TimeDomain>;\n  Object.setPrototypeOf(interpolator, TimeDomainInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: x0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: x1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (x0: TimeDomain, x1: TimeDomain): Interpolator<TimeDomain>;\n\n  /** @hidden */\n  prototype: Interpolator<TimeDomain>;\n};\n\nTimeDomainInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Range, Interpolate, Interpolator} from \"@swim/mapping\";\nimport {DateTime} from \"../DateTime\";\nimport {TimeDomain} from \"./\"; // forward import\nimport {TimeRangeInterpolator} from \"./\"; // forward import\n\nexport interface TimeRange extends Range<DateTime>, Interpolate<TimeRange> {\n  readonly 0: DateTime;\n\n  readonly 1: DateTime;\n\n  readonly inverse: TimeDomain;\n\n  interpolateTo(that: TimeRange): Interpolator<TimeRange>;\n  interpolateTo(that: unknown): Interpolator<TimeRange> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const TimeRange = function (y0: DateTime, y1: DateTime): TimeRange {\n  const range = function (u: number): DateTime {\n    const t0 = range[0].time;\n    const t1 = range[1].time;\n    return new DateTime(t0 + u * (t1 - t0), u === 0 ? range[0].zone : range[1].zone);\n  } as TimeRange;\n  Object.setPrototypeOf(range, TimeRange.prototype);\n  Object.defineProperty(range, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(range, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return range;\n} as {\n  (y0: DateTime, y1: DateTime): TimeRange;\n\n  /** @hidden */\n  prototype: TimeRange;\n};\n\nTimeRange.prototype = Object.create(Range.prototype);\n\nObject.defineProperty(TimeRange.prototype, \"inverse\", {\n  get(this: TimeRange): TimeDomain {\n    return TimeDomain(this[0], this[1]);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nTimeRange.prototype.interpolateTo = function (this: TimeRange, that: unknown): Interpolator<TimeRange> | null {\n  if (that instanceof TimeRange) {\n    return TimeRangeInterpolator(this, that);\n  }\n  return null;\n} as typeof TimeRange.prototype.interpolateTo;\n\nTimeRange.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof TimeRange;\n};\n\nTimeRange.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof TimeRange) {\n    return that.canEqual(this) && this[0].equals(that[0]) && this[1].equals(that[1]);\n  }\n  return false;\n};\n\nTimeRange.prototype.toString = function (): string {\n  return \"TimeRange(\" + this[0] + \", \" + this[1] + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/mapping\";\nimport {DateTime} from \"../DateTime\";\nimport {TimeRange} from \"./TimeRange\";\n\n/** @hidden */\nexport const TimeRangeInterpolator = function (y0: TimeRange, y1: TimeRange): Interpolator<TimeRange> {\n  const interpolator = function (u: number): TimeRange {\n    const y0 = interpolator[0];\n    const y00 = y0[0];\n    const y01 = y0[1];\n    const y1 = interpolator[1];\n    const y10 = y1[0];\n    const y11 = y1[1];\n    return TimeRange(new DateTime(y00.time + u * (y10.time - y00.time), u === 0 ? y00.zone : y10.zone),\n                     new DateTime(y01.time + u * (y11.time - y01.time), u === 0 ? y01.zone : y11.zone));\n  } as Interpolator<TimeRange>;\n  Object.setPrototypeOf(interpolator, TimeRangeInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: y0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: y1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (y0: TimeRange, y1: TimeRange): Interpolator<TimeRange>;\n\n  /** @hidden */\n  prototype: Interpolator<TimeRange>;\n};\n\nTimeRangeInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equivalent} from \"@swim/util\";\nimport {Mapping, Interpolate, Interpolator, LinearRange, ContinuousScale} from \"@swim/mapping\";\nimport {AnyDateTime, DateTime} from \"../DateTime\";\nimport {TimeDomain} from \"./TimeDomain\";\nimport {TimeScaleInterpolator} from \"./\"; // forward import\n\nexport interface TimeScale extends ContinuousScale<DateTime, number>, Interpolate<TimeScale> {\n  readonly domain: TimeDomain;\n\n  readonly range: LinearRange;\n\n  readonly inverse: Mapping<number, DateTime>;\n\n  withDomain(domain: TimeDomain): TimeScale;\n  withDomain(x0: AnyDateTime, x1: AnyDateTime): TimeScale;\n\n  overRange(range: LinearRange): TimeScale;\n  overRange(y0: number, y1: number): TimeScale;\n\n  clampDomain(xMin: DateTime | undefined, xMax: DateTime | undefined,\n              zMin: number | undefined, zMax: number | undefined,\n              epsilon?: number): TimeScale;\n\n  solveDomain(x1: DateTime, y1: number, x2?: DateTime, y2?: number,\n              reflect?: boolean, epsilon?: number): TimeScale;\n\n  interpolateTo(that: TimeScale): Interpolator<TimeScale>;\n  interpolateTo(that: unknown): Interpolator<TimeScale> | null;\n\n  canEqual(that: unknown): boolean;\n\n  equals(that: unknown): boolean;\n\n  toString(): string;\n}\n\nexport const TimeScale = function (domain: TimeDomain, range: LinearRange): TimeScale {\n  const scale = function (x: DateTime): number {\n    return scale.range(scale.domain(x));\n  } as TimeScale;\n  Object.setPrototypeOf(scale, TimeScale.prototype);\n  Object.defineProperty(scale, \"domain\", {\n    value: domain,\n    enumerable: true,\n  });\n  Object.defineProperty(scale, \"range\", {\n    value: range,\n    enumerable: true,\n  });\n  return scale;\n} as {\n  (domain: TimeDomain, range: LinearRange): TimeScale;\n\n  /** @hidden */\n  prototype: TimeScale;\n};\n\nTimeScale.prototype = Object.create(ContinuousScale.prototype);\n\nObject.defineProperty(TimeScale.prototype, \"inverse\", {\n  get(this: TimeScale): Mapping<number, DateTime> {\n    return Mapping(this.range.inverse, this.domain.inverse);\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nTimeScale.prototype.withDomain = function (x0: TimeDomain | AnyDateTime, x1?: AnyDateTime): TimeScale {\n  let domain: TimeDomain;\n  if (arguments.length === 1) {\n    domain = x0 as TimeDomain;\n  } else {\n    x0 = DateTime.fromAny(x0 as AnyDateTime);\n    x1 = DateTime.fromAny(x1!);\n    domain = TimeDomain(x0 as DateTime, x1 as DateTime);\n  }\n  return TimeScale(domain, this.range);\n};\n\nTimeScale.prototype.overRange = function (y0: LinearRange | number, y1?: number): TimeScale {\n  let range: LinearRange;\n  if (arguments.length === 1) {\n    range = y0 as LinearRange;\n  } else {\n    range = LinearRange(y0 as number, y1!);\n  }\n  return TimeScale(this.domain, range);\n};\n\nTimeScale.prototype.clampDomain = function (xMin: DateTime | undefined, xMax: DateTime | undefined,\n                                            zMin: number | undefined, zMax: number | undefined,\n                                            epsilon?: number): TimeScale {\n  if (epsilon === void 0) {\n    epsilon = Equivalent.Epsilon;\n  }\n  const x0 = this.domain[0];\n  const x1 = this.domain[1];\n  let t0 = x0.time;\n  let t1 = x1.time;\n  const tMin = xMin !== void 0 ? xMin.time : void 0;\n  const tMax = xMax !== void 0 ? xMax.time : void 0;\n  if (tMin !== void 0 && tMax !== void 0 && Math.abs(t1 - t0) > tMax - tMin) {\n    if (t0 < t1) {\n      t0 = tMin;\n      t1 = tMax;\n    } else {\n      t1 = tMin;\n      t0 = tMax;\n    }\n  } else {\n    if (tMin !== void 0) {\n      if (t0 < t1 && t0 < tMin) {\n        t1 += tMin - t0;\n        t0 = tMin;\n      } else if (t1 < t0 && t1 < tMin) {\n        t0 += tMin - t1;\n        t1 = tMin;\n      }\n    }\n    if (tMax !== void 0) {\n      if (t0 < t1 && t1 > tMax) {\n        t0 -= t1 - tMax;\n        t1 = tMax;\n      } else if (t1 < t0 && t0 > tMax) {\n        t1 -= t0 - tMax;\n        t0 = tMax;\n      }\n    }\n  }\n\n  const y0 = this(x0);\n  const y1 = this(x1);\n  const dy = y0 < y1 ? y1 - y0 : y0 - y1;\n  const z = Math.abs(dy / (t1 - t0));\n  if (zMin !== void 0 && z < 1 / zMin) {\n    const dz = dy * zMin;\n    const tSum = t0 + t1;\n    t0 = (tSum - dz) / 2;\n    t1 = (tSum + dz) / 2;\n  } else if (zMax !== void 0 && z > 1 / zMax) {\n    const dz = dy * zMax;\n    const tSum = t0 + t1;\n    t0 = (tSum - dz) / 2;\n    t1 = (tSum + dz) / 2;\n  }\n\n  if (Math.abs(t0 - x0.time) < epsilon && Math.abs(t1 - x1.time) < epsilon) {\n    return this;\n  } else {\n    return TimeScale(TimeDomain(new DateTime(t0, x0.zone), new DateTime(t1, x1.zone)), this.range);\n  }\n};\n\nTimeScale.prototype.solveDomain = function (x1: DateTime, y1: number, x2?: DateTime, y2?: number,\n                                            reflect?: boolean, epsilon?: number): TimeScale {\n  if (epsilon === void 0) {\n    epsilon = Equivalent.Epsilon;\n  }\n  const dt = this.domain[1].time - this.domain[0].time;\n  const y0 = this.range[0];\n  const y3 = this.range[1];\n  const t1 = x1.time;\n  const t2 = x2 !== void 0 ? x2.time : void 0;\n  let m: number;\n  if (t2 === void 0 || y2 === void 0 || Math.abs(t2 - t1) < epsilon || Math.abs(y2 - y1) < epsilon) {\n    m = (y3 - y0) / (dt !== 0 ? dt : epsilon);\n  } else {\n    m = (y2 - y1) / (t2 - t1);\n    if ((reflect === void 0 || !reflect) && (m < 0 !== (y3 - y0) / dt < 0)) {\n      m = -m;\n    }\n  }\n  const b = y1 - m * t1;\n  const t0 = (y0 - b) / m;\n  const t3 = (y3 - b) / m;\n\n  if (Math.abs(t0 - this.domain[0].time) < epsilon && Math.abs(t3 - this.domain[1].time) < epsilon) {\n    return this;\n  } else {\n    return TimeScale(TimeDomain(new DateTime(t0, this.domain[0].zone), new DateTime(t3, this.domain[1].zone)), this.range);\n  }\n};\n\nTimeScale.prototype.interpolateTo = function (this: TimeScale, that: unknown): Interpolator<TimeScale> | null {\n  if (that instanceof TimeScale) {\n    return TimeScaleInterpolator(this, that);\n  }\n  return null;\n} as typeof TimeScale.prototype.interpolateTo;\n\nTimeScale.prototype.canEqual = function (that: unknown): boolean {\n  return that instanceof TimeScale;\n};\n\nTimeScale.prototype.equals = function (that: unknown): boolean {\n  if (this === that) {\n    return true;\n  } else if (that instanceof TimeScale) {\n    return this.domain.equals(that.domain) && this.range.equals(that.range);\n  }\n  return false;\n};\n\nTimeScale.prototype.toString = function (): string {\n  return \"TimeScale(\" + this.domain + \", \" + this.range + \")\";\n};\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator, LinearRange} from \"@swim/mapping\";\nimport {DateTime} from \"../DateTime\";\nimport {TimeDomain} from \"./TimeDomain\";\nimport {TimeScale} from \"./TimeScale\";\n\n/** @hidden */\nexport const TimeScaleInterpolator = function (s0: TimeScale, s1: TimeScale): Interpolator<TimeScale> {\n  const interpolator = function (u: number): TimeScale {\n    const s0 = interpolator[0];\n    const s1 = interpolator[1];\n    const x0 = s0.domain;\n    const x00 = x0[0].time;\n    const x01 = x0[1].time;\n    const x1 = s1.domain;\n    const x10 = x1[0].time;\n    const x11 = x1[1].time;\n    const domain = TimeDomain(new DateTime(x00 + u * (x10 - x00), u === 0 ? x0[0].zone : x1[0].zone),\n                              new DateTime(x01 + u * (x11 - x01), u === 0 ? x0[1].zone : x1[1].zone));\n    const y0 = s0.range;\n    const y00 = y0[0];\n    const y01 = y0[1];\n    const y1 = s1.range;\n    const y10 = y1[0];\n    const y11 = y1[1];\n    const range = LinearRange(y00 + u * (y10 - y00), y01 + u * (y11 - y01));\n    return TimeScale(domain, range);\n  } as Interpolator<TimeScale>;\n  Object.setPrototypeOf(interpolator, TimeScaleInterpolator.prototype);\n  Object.defineProperty(interpolator, 0, {\n    value: s0,\n    enumerable: true,\n  });\n  Object.defineProperty(interpolator, 1, {\n    value: s1,\n    enumerable: true,\n  });\n  return interpolator;\n} as {\n  (s0: TimeScale, s1: TimeScale): Interpolator<TimeScale>;\n\n  /** @hidden */\n  prototype: Interpolator<TimeScale>;\n};\n\nTimeScaleInterpolator.prototype = Object.create(Interpolator.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Lazy, Arrays} from \"@swim/util\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {Item, Attr, AnyValue, Value, Record, Form} from \"@swim/structure\";\nimport type {\n  EventMessage,\n  LinkRequest,\n  LinkedResponse,\n  SyncRequest,\n  SyncedResponse,\n  UnlinkRequest,\n  UnlinkedResponse,\n} from \"@swim/warp\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkOwner} from \"./DownlinkOwner\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkModel} from \"./DownlinkModel\";\n\nexport type DownlinkType = \"event\" | \"list\" | \"map\" | \"value\";\n\nexport type DownlinkOnEvent = (body: Value, downlink: Downlink) => void;\nexport type DownlinkOnCommand = (body: Value, downlink: Downlink) => void;\nexport type DownlinkWillLink = (downlink: Downlink) => void;\nexport type DownlinkDidLink = (downlink: Downlink) => void;\nexport type DownlinkWillSync = (downlink: Downlink) => void;\nexport type DownlinkDidSync = (downlink: Downlink) => void;\nexport type DownlinkWillUnlink = (downlink: Downlink) => void;\nexport type DownlinkDidUnlink = (downlink: Downlink) => void;\nexport type DownlinkDidConnect = (downlink: Downlink) => void;\nexport type DownlinkDidDisconnect = (downlink: Downlink) => void;\nexport type DownlinkDidClose = (downlink: Downlink) => void;\nexport type DownlinkDidFail = (error: unknown, downlink: Downlink) => void;\n\nexport interface DownlinkObserver {\n  onEvent?: DownlinkOnEvent;\n  onCommand?: DownlinkOnCommand;\n  willLink?: DownlinkWillLink;\n  didLink?: DownlinkDidLink;\n  willSync?: DownlinkWillSync;\n  didSync?: DownlinkDidSync;\n  willUnlink?: DownlinkWillUnlink;\n  didUnlink?: DownlinkDidUnlink;\n  didConnect?: DownlinkDidConnect;\n  didDisconnect?: DownlinkDidDisconnect;\n  didClose?: DownlinkDidClose;\n  didFail?: DownlinkDidFail;\n}\n\nexport interface DownlinkInit extends DownlinkObserver {\n  hostUri?: AnyUri;\n  nodeUri?: AnyUri;\n  laneUri?: AnyUri;\n  prio?: number;\n  rate?: number;\n  body?: AnyValue;\n  type?: DownlinkType;\n}\n\n/** @hidden */\nexport const enum DownlinkFlags {\n  KeepLinked = 1,\n  KeepSynced = 2,\n  KeepLinkedSynced = KeepLinked | KeepSynced,\n}\n\nexport abstract class Downlink {\n  constructor(context: DownlinkContext, owner: DownlinkOwner | null, init?: DownlinkInit,\n              hostUri: Uri = Uri.empty(), nodeUri: Uri = Uri.empty(), laneUri: Uri = Uri.empty(),\n              prio: number = 0, rate: number = 0, body: Value = Value.absent(),\n              flags: number = 0, observers?: ReadonlyArray<DownlinkObserver> | DownlinkObserver) {\n    let observer: DownlinkObserver | undefined;\n    if (observers === void 0) {\n      observers = Arrays.empty\n    } else if (!Array.isArray(observers)) {\n      observer = observers as DownlinkObserver;\n      observers = [observer] as ReadonlyArray<DownlinkObserver>;\n    }\n    if (init !== void 0) {\n      hostUri = init.hostUri !== void 0 ? Uri.fromAny(init.hostUri) : hostUri;\n      nodeUri = init.nodeUri !== void 0 ? Uri.fromAny(init.nodeUri) : nodeUri;\n      laneUri = init.laneUri !== void 0 ? Uri.fromAny(init.laneUri) : laneUri;\n      prio = init.prio !== void 0 ? init.prio : prio;\n      rate = init.rate !== void 0 ? init.rate : rate;\n      body = init.body !== void 0 ? Value.fromAny(init.body) : body;\n      observer = observer ?? {};\n      observers = Arrays.inserted(observer, observers);\n      observer.onEvent = init.onEvent ?? observer.onEvent;\n      observer.onCommand = init.onCommand ?? observer.onCommand;\n      observer.willLink = init.willLink ?? observer.willLink;\n      observer.didLink = init.didLink ?? observer.didLink;\n      observer.willSync = init.willSync ?? observer.willSync;\n      observer.didSync = init.didSync ?? observer.didSync;\n      observer.willUnlink = init.willUnlink ?? observer.willUnlink;\n      observer.didUnlink = init.didUnlink ?? observer.didUnlink;\n      observer.didConnect = init.didConnect ?? observer.didConnect;\n      observer.didDisconnect = init.didDisconnect ?? observer.didDisconnect;\n      observer.didClose = init.didClose ?? observer.didClose;\n      observer.didFail = init.didFail ?? observer.didFail;\n    }\n    Object.defineProperty(this, \"context\", {\n      value: context,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"owner\", {\n      value: owner,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownHostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownNodeUri\", {\n      value: nodeUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownLaneUri\", {\n      value: laneUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownPrio\", {\n      value: prio,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownRate\", {\n      value: rate,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownBody\", {\n      value: body,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"flags\", {\n      value: flags,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"model\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"observers\", {\n      value: observers,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly context: DownlinkContext;\n\n  /** @hidden */\n  declare readonly owner: DownlinkOwner | null;\n  \n  /** @hidden */\n  declare readonly ownHostUri: Uri;\n  \n  /** @hidden */\n  declare readonly ownNodeUri: Uri;\n  \n  /** @hidden */\n  declare readonly ownLaneUri: Uri;\n  \n  /** @hidden */\n  declare readonly ownPrio: number;\n  \n  /** @hidden */\n  declare readonly ownRate: number;\n  \n  /** @hidden */\n  declare readonly ownBody: Value;\n\n  /** @hidden */\n  declare readonly flags: number;\n\n  /** @hidden */\n  declare readonly model: DownlinkModel | null;\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<DownlinkObserver>;\n\n  abstract readonly type: DownlinkType;\n\n  protected abstract copy(context: DownlinkContext, owner: DownlinkOwner | null,\n                          hostUri: Uri, nodeUri: Uri, laneUri: Uri, prio: number, rate: number,\n                          body: Value, flags: number, observers: ReadonlyArray<DownlinkObserver>): Downlink;\n\n  hostUri(): Uri;\n  hostUri(hostUri: AnyUri): Downlink;\n  hostUri(hostUri?: AnyUri): Uri | Downlink {\n    if (hostUri === void 0) {\n      return this.ownHostUri;\n    } else {\n      hostUri = Uri.fromAny(hostUri);\n      return this.copy(this.context, this.owner, hostUri as Uri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers);\n    }\n  }\n\n  nodeUri(): Uri;\n  nodeUri(nodeUri: AnyUri): Downlink;\n  nodeUri(nodeUri?: AnyUri): Uri | Downlink {\n    if (nodeUri === void 0) {\n      return this.ownNodeUri;\n    } else {\n      nodeUri = Uri.fromAny(nodeUri);\n      return this.copy(this.context, this.owner, this.ownHostUri, nodeUri as Uri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers);\n    }\n  }\n\n  laneUri(): Uri;\n  laneUri(laneUri: AnyUri): Downlink;\n  laneUri(laneUri?: AnyUri): Uri | Downlink {\n    if (laneUri === void 0) {\n      return this.ownLaneUri;\n    } else {\n      laneUri = Uri.fromAny(laneUri);\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, laneUri as Uri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers);\n    }\n  }\n\n  prio(): number;\n  prio(prio: number): Downlink;\n  prio(prio?: number): number | Downlink {\n    if (prio === void 0) {\n      return this.ownPrio;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       prio, this.ownRate, this.ownBody, this.flags, this.observers);\n    }\n  }\n\n  rate(): number;\n  rate(rate: number): Downlink;\n  rate(rate?: number): number | Downlink {\n    if (rate === void 0) {\n      return this.ownRate;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, rate, this.ownBody, this.flags, this.observers);\n    }\n  }\n\n  body(): Value;\n  body(body: AnyValue): Downlink;\n  body(body?: AnyValue): Value | Downlink {\n    if (body === void 0) {\n      return this.ownBody;\n    } else {\n      body = Value.fromAny(body);\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, body, this.flags, this.observers);\n    }\n  }\n\n  keepLinked(): boolean;\n  keepLinked(keepLinked: boolean): Downlink;\n  keepLinked(keepLinked?: boolean): boolean | Downlink {\n    if (keepLinked === void 0) {\n      return (this.flags & DownlinkFlags.KeepLinked) !== 0;\n    } else {\n      const flags = keepLinked ? this.flags | DownlinkFlags.KeepLinked : this.flags & ~DownlinkFlags.KeepLinked;\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, flags, this.observers);\n    }\n  }\n\n  keepSynced(): boolean;\n  keepSynced(keepSynced: boolean): Downlink;\n  keepSynced(keepSynced?: boolean): boolean | Downlink {\n    if (keepSynced === void 0) {\n      return (this.flags & DownlinkFlags.KeepSynced) !== 0;\n    } else {\n      const flags = keepSynced ? this.flags | DownlinkFlags.KeepSynced : this.flags & ~DownlinkFlags.KeepSynced;\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, flags, this.observers);\n    }\n  }\n\n  observe(observer: DownlinkObserver): this {\n    Object.defineProperty(this, \"observers\", {\n      value: Arrays.inserted(observer, this.observers),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  unobserve(observer: unknown): this {\n    const oldObservers = this.observers;\n    const n = oldObservers.length;\n    for (let i = 0; i < n; i += 1) {\n      const oldObserver = oldObservers[i]! as {[key: string]: unknown};\n      let found = oldObserver === observer; // check object identity\n      if (!found) {\n        for (const key in oldObserver) { // check property identity\n          if (oldObserver[key] === observer) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (found) {\n        if (n > 1) {\n          const newObservers = new Array<DownlinkObserver>(n - 1);\n          for (let j = 0; j < i; j += 1) {\n            newObservers[j] = oldObservers[j]!;\n          }\n          for (let j = i + 1; j < n; j += 1) {\n            newObservers[j - 1] = oldObservers[j]!;\n          }\n          Object.defineProperty(this, \"observers\", {\n            value: newObservers,\n            enumerable: true,\n            configurable: true,\n          });\n        } else {\n          Object.defineProperty(this, \"observers\", {\n            value: Arrays.empty,\n            enumerable: true,\n            configurable: true,\n          });\n        }\n        break;\n      }\n    }\n    return this;\n  }\n\n  onEvent(onEvent: DownlinkOnEvent): this {\n    return this.observe({onEvent});\n  }\n\n  onCommand(onCommand: DownlinkOnCommand): this {\n    return this.observe({onCommand});\n  }\n\n  willLink(willLink: DownlinkWillLink): this {\n    return this.observe({willLink});\n  }\n\n  didLink(didLink: DownlinkDidLink): this {\n    return this.observe({didLink});\n  }\n\n  willSync(willSync: DownlinkWillSync): this {\n    return this.observe({willSync});\n  }\n\n  didSync(didSync: DownlinkDidSync): this {\n    return this.observe({didSync});\n  }\n\n  willUnlink(willUnlink: DownlinkWillUnlink): this {\n    return this.observe({willUnlink});\n  }\n\n  didUnlink(didUnlink: DownlinkDidUnlink): this {\n    return this.observe({didUnlink});\n  }\n\n  didConnect(didConnect: DownlinkDidConnect): this {\n    return this.observe({didConnect});\n  }\n\n  didDisconnect(didDisconnect: DownlinkDidDisconnect): this {\n    return this.observe({didDisconnect});\n  }\n\n  didClose(didClose: DownlinkDidClose): this {\n    return this.observe({didClose});\n  }\n\n  didFail(didFail: DownlinkDidFail): this {\n    return this.observe({didFail});\n  }\n\n  isConnected(): boolean {\n    const model = this.model;\n    return model !== null && model.isConnected();\n  }\n\n  isAuthenticated(): boolean {\n    const model = this.model;\n    return model !== null && model.isAuthenticated();\n  }\n\n  isLinked(): boolean {\n    const model = this.model;\n    return model !== null && model.isLinked();\n  }\n\n  isSynced(): boolean {\n    const model = this.model;\n    return model !== null && model.isSynced();\n  }\n\n  get session(): Value {\n    const model = this.model;\n    return model !== null ? model.session : Value.absent();\n  }\n\n  /** @hidden */\n  onEventMessage(message: EventMessage): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.onEvent !== void 0) {\n        observer.onEvent(message.body, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onCommandMessage(body: Value): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.onCommand !== void 0) {\n        observer.onCommand(body, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onLinkRequest(request?: LinkRequest): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willLink !== void 0) {\n        observer.willLink(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onLinkedResponse(response?: LinkedResponse): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didLink !== void 0) {\n        observer.didLink(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onSyncRequest(request?: SyncRequest): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willSync !== void 0) {\n        observer.willSync(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onSyncedResponse(response?: SyncedResponse): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didSync !== void 0) {\n        observer.didSync(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onUnlinkRequest(request?: UnlinkRequest): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willUnlink !== void 0) {\n        observer.willUnlink(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  onUnlinkedResponse(response?: UnlinkedResponse): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didUnlink !== void 0) {\n        observer.didUnlink(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidConnect(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didConnect !== void 0) {\n        observer.didConnect(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidDisconnect(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDisconnect !== void 0) {\n        observer.didDisconnect(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidFail(error: unknown): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didFail !== void 0) {\n        observer.didFail(error, this);\n      }\n    }\n  }\n\n  command(body: AnyValue): void {\n    this.model!.command(body);\n  }\n\n  abstract open(): this;\n\n  close(): void {\n    const owner = this.owner;\n    if (owner !== null) {\n      owner.removeDownlink(this);\n    }\n    const model = this.model;\n    if (model !== null) {\n      model.removeDownlink(this);\n    }\n  }\n\n  /** @hidden */\n  openUp(host: Host): void {\n    // nop\n  }\n\n  /** @hidden */\n  closeUp(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didClose !== void 0) {\n        observer.didClose(this);\n      }\n    }\n  }\n\n  @Lazy\n  static initForm(): Form<DownlinkInit | undefined> {\n    return new DownlinkInitForm();\n  }\n}\n\n/** @hidden */\nclass DownlinkInitForm extends Form<DownlinkInit | undefined> {\n  get tag(): string | undefined {\n    return \"link\";\n  }\n\n  mold(init: DownlinkInit | undefined): Item {\n    if (init !== void 0) {\n      const header = Record.create();\n      if (init.hostUri !== void 0) {\n        header.slot(\"host\", Uri.fromAny(init.hostUri).toString());\n      }\n      if (init.nodeUri !== void 0) {\n        header.slot(\"node\", Uri.fromAny(init.nodeUri).toString());\n      }\n      if (init.laneUri !== void 0) {\n        header.slot(\"lane\", Uri.fromAny(init.laneUri).toString());\n      }\n      if (init.prio !== void 0) {\n        header.slot(\"prio\", init.prio);\n      }\n      if (init.rate !== void 0) {\n        header.slot(\"rate\", init.rate);\n      }\n      if (init.body !== void 0) {\n        header.slot(\"body\", init.body);\n      }\n      if (init.type !== void 0) {\n        header.slot(\"type\", init.type);\n      }\n      return Record.of(Attr.of(\"link\", header));\n    } else {\n      return Item.extant();\n    }\n  }\n\n  cast(item: Item): DownlinkInit | undefined {\n    const value = item.toValue();\n    const header = value.get(\"link\");\n    if (header.isDefined()) {\n      const init = {} as DownlinkInit;\n      const host = header.get(\"host\");\n      if (host.isDefined()) {\n        init.hostUri = host.cast(Uri.form());\n      }\n      const node = header.get(\"node\");\n      if (node.isDefined()) {\n        init.nodeUri = node.cast(Uri.form());\n      }\n      const lane = header.get(\"lane\");\n      if (lane.isDefined()) {\n        init.laneUri = lane.cast(Uri.form());\n      }\n      const prio = header.get(\"prio\");\n      if (prio.isDefined()) {\n        init.prio = prio.numberValue();\n      }\n      const rate = header.get(\"rate\");\n      if (rate.isDefined()) {\n        init.rate = rate.numberValue();\n      }\n      const body = header.get(\"body\");\n      if (body.isDefined()) {\n        init.body = body;\n      }\n      const type = header.get(\"type\");\n      if (type.isDefined()) {\n        init.type = type.stringValue() as DownlinkType;\n      }\n      return init;\n    }\n    return void 0;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {HashCode} from \"@swim/util\";\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport type {AnyValue, Value} from \"@swim/structure\";\nimport {Recon} from \"@swim/recon\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport {EventMessage} from \"./\"; // forward import\nimport {CommandMessage} from \"./\"; // forward import\nimport {LinkRequest} from \"./\"; // forward import\nimport {LinkedResponse} from \"./\"; // forward import\nimport {SyncRequest} from \"./\"; // forward import\nimport {SyncedResponse} from \"./\"; // forward import\nimport {UnlinkRequest} from \"./\"; // forward import\nimport {UnlinkedResponse} from \"./\"; // forward import\nimport {AuthRequest} from \"./\"; // forward import\nimport {AuthedResponse} from \"./\"; // forward import\nimport {DeauthRequest} from \"./\"; // forward import\nimport {DeauthedResponse} from \"./\"; // forward import\n\nexport abstract class Envelope implements HashCode, Debug {\n  get tag(): string {\n    return (this.constructor as unknown as {readonly tag: string}).tag;\n  }\n\n  abstract readonly node: Uri;\n\n  abstract withNode(node: AnyUri): Envelope;\n\n  abstract readonly lane: Uri;\n\n  abstract withLane(lane: AnyUri): Envelope;\n\n  get prio(): number {\n    return 0;\n  }\n\n  withPrio(prio: number): Envelope {\n    return this;\n  }\n\n  get rate(): number {\n    return 0;\n  }\n\n  withRate(rate: number): Envelope {\n    return this;\n  }\n\n  abstract readonly body: Value;\n\n  abstract withBody(body: AnyValue): Envelope;\n\n  abstract toValue(): Value;\n\n  toRecon(): string {\n    return Recon.toString(this.toValue());\n  }\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static fromValue(value: Value): Envelope | null {\n    switch (value.tag) {\n      case \"event\": return EventMessage.fromValue(value);\n      case \"command\": return CommandMessage.fromValue(value);\n      case \"link\": return LinkRequest.fromValue(value);\n      case \"linked\": return LinkedResponse.fromValue(value);\n      case \"sync\": return SyncRequest.fromValue(value);\n      case \"synced\": return SyncedResponse.fromValue(value);\n      case \"unlink\": return UnlinkRequest.fromValue(value);\n      case \"unlinked\": return UnlinkedResponse.fromValue(value);\n      case \"auth\": return AuthRequest.fromValue(value);\n      case \"authed\": return AuthedResponse.fromValue(value);\n      case \"deauth\": return DeauthRequest.fromValue(value);\n      case \"deauthed\": return DeauthedResponse.fromValue(value);\n      default: return null;\n    }\n  }\n\n  static parseRecon(input: string): Envelope | null {\n    return Envelope.fromValue(Recon.parse(input));\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {AnyValue, Value, Attr} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {Envelope} from \"./Envelope\";\n\nexport interface HostAddressedConstructor<E extends HostAddressed<E>> {\n  new(body: Value): E;\n\n  readonly tag: string;\n}\n\nexport abstract class HostAddressed<E extends HostAddressed<E>> extends Envelope {\n  constructor(body: Value) {\n    super();\n    Object.defineProperty(this, \"body\", {\n      value: body,\n      enumerable: true,\n    });\n  }\n\n  get node(): Uri {\n    return Uri.empty();\n  }\n\n  withNode(node: AnyUri): E {\n    return this as unknown as E;\n  }\n\n  get lane(): Uri {\n    return Uri.empty();\n  }\n\n  withLane(lane: AnyUri): E {\n    return this as unknown as E;\n  }\n\n  declare readonly body: Value;\n\n  withBody(body: AnyValue): E {\n    body = Value.fromAny(body);\n    return this.copy(body);\n  }\n\n  protected abstract copy(body: Value): E;\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof HostAddressed) {\n      return this.constructor === that.constructor\n          && this.body.equals(that.body);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Constructors.hash(this.constructor),\n          this.body.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(this.constructor.name).write(46/*'.'*/)\n        .write(\"create\").write(40/*'('*/);\n    if (this.body.isDefined()) {\n      output = output.debug(this.body);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toValue(): Value {\n    return Attr.of(this.tag).concat(this.body);\n  }\n\n  static fromValue<E extends HostAddressed<E>>(this: HostAddressedConstructor<E>,\n                                               value: Value): E | null {\n    const header = value.header(this.tag);\n    if (header.isDefined()) {\n      const body = value.body();\n      return new this(body);\n    }\n    return null;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item, Attr, AnyValue, Value, Record} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {Envelope} from \"./Envelope\";\n\nexport interface LaneAddressedConstructor<E extends LaneAddressed<E>> {\n  new(node: Uri, lane: Uri, body: Value): E;\n\n  readonly tag: string;\n}\n\nexport abstract class LaneAddressed<E extends LaneAddressed<E>> extends Envelope {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super();\n    Object.defineProperty(this, \"node\", {\n      value: node,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lane\", {\n      value: lane,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"body\", {\n      value: body,\n      enumerable: true,\n    });\n  }\n\n  declare readonly node: Uri;\n\n  withNode(node: AnyUri): E {\n    node = Uri.fromAny(node);\n    return this.copy(node as Uri, this.lane, this.body);\n  }\n\n  declare readonly lane: Uri;\n\n  withLane(lane: AnyUri): E {\n    lane = Uri.fromAny(lane);\n    return this.copy(this.node, lane as Uri, this.body);\n  }\n\n  declare readonly body: Value;\n\n  withBody(body: AnyValue): E {\n    body = Value.fromAny(body);\n    return this.copy(this.node, this.lane, body);\n  }\n\n  protected abstract copy(node: Uri, lane: Uri, body: Value): E;\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LaneAddressed) {\n      return this.constructor === that.constructor\n          && this.node.equals(that.node) && this.lane.equals(that.lane)\n          && this.body.equals(that.body);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(this.constructor), this.node.hashCode()),\n        this.lane.hashCode()), this.body.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(this.constructor.name).write(46/*'.'*/)\n        .write(\"create\").write(40/*'('*/)\n        .debug(this.node.toString()).write(\", \").debug(this.lane.toString());\n    if (this.body.isDefined()) {\n      output = output.write(\", \").debug(this.body);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toValue(): Value {\n    const header = Record.create(2)\n        .slot(\"node\", this.node.toString())\n        .slot(\"lane\", this.lane.toString());\n    return Attr.of(this.tag, header).concat(this.body);\n  }\n\n  static fromValue<E extends LaneAddressed<E>>(this: LaneAddressedConstructor<E>,\n                                               value: Value): E | null {\n    let node: Uri | undefined;\n    let lane: Uri | undefined;\n    const header = value.header(this.tag);\n    header.forEach(function (header: Item, index: number) {\n      const key = header.key.stringValue(void 0);\n      if (key !== void 0) {\n        if (key === \"node\") {\n          node = Uri.parse(header.toValue().stringValue(\"\"));\n        } else if (key === \"lane\") {\n          lane = Uri.parse(header.toValue().stringValue(\"\"));\n        }\n      } else if (header instanceof Value) {\n        if (index === 0) {\n          node = Uri.parse(header.stringValue(\"\"));\n        } else if (index === 1) {\n          lane = Uri.parse(header.stringValue(\"\"));\n        }\n      }\n    });\n    if (node !== void 0 && lane !== void 0) {\n      const body = value.body();\n      return new this(node, lane, body);\n    }\n    return null;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3, Numbers, Constructors} from \"@swim/util\";\nimport type {Output} from \"@swim/codec\";\nimport {Item, Attr, AnyValue, Value, Record} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {Envelope} from \"./Envelope\";\n\nexport interface LinkAddressedConstructor<E extends LinkAddressed<E>> {\n  new(node: Uri, lane: Uri, prio: number, rate: number, body: Value): E;\n\n  readonly tag: string;\n}\n\nexport abstract class LinkAddressed<E extends LinkAddressed<E>> extends Envelope {\n  constructor(node: Uri, lane: Uri, prio: number, rate: number, body: Value) {\n    super();\n    Object.defineProperty(this, \"node\", {\n      value: node,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"lane\", {\n      value: lane,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"prio\", {\n      value: prio,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rate\", {\n      value: rate,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"body\", {\n      value: body,\n      enumerable: true,\n    });\n  }\n\n  declare readonly node: Uri;\n\n  withNode(node: AnyUri): E {\n    node = Uri.fromAny(node);\n    return this.copy(node as Uri, this.lane, this.prio, this.rate, this.body);\n  }\n\n  declare readonly lane: Uri;\n\n  withLane(lane: AnyUri): E {\n    lane = Uri.fromAny(lane);\n    return this.copy(this.node, lane as Uri, this.prio, this.rate, this.body);\n  }\n\n  // @ts-ignore\n  declare readonly prio: number;\n\n  withPrio(prio: number): E {\n    return this.copy(this.node, this.lane, prio, this.rate, this.body);\n  }\n\n  // @ts-ignore\n  declare readonly rate: number;\n\n  withRate(rate: number): E {\n    return this.copy(this.node, this.lane, this.prio, rate, this.body);\n  }\n\n  declare readonly body: Value;\n\n  withBody(body: AnyValue): E {\n    body = Value.fromAny(body);\n    return this.copy(this.node, this.lane, this.prio, this.rate, body);\n  }\n\n  protected abstract copy(node: Uri, lane: Uri, prio: number, rate: number, body: Value): E;\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LinkAddressed) {\n      return this.constructor === that.constructor\n          && this.node.equals(that.node) && this.lane.equals(that.lane)\n          && this.prio === that.prio && this.rate === that.rate\n          && this.body.equals(that.body);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Constructors.hash(this.constructor), this.node.hashCode()), this.lane.hashCode()),\n        Numbers.hash(this.prio)), Numbers.hash(this.rate)), this.body.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(this.constructor.name).write(46/*'.'*/)\n        .write(\"create\").write(40/*'('*/)\n        .debug(this.node.toString()).write(\", \").debug(this.lane.toString());\n    if (this.prio !== 0 || this.rate !== 0) {\n      output = output.write(\", \").debug(this.prio).write(\", \").debug(this.rate);\n    }\n    if (this.body.isDefined()) {\n      output = output.write(\", \").debug(this.body);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toValue(): Value {\n    const header = Record.create(4)\n        .slot(\"node\", this.node.toString())\n        .slot(\"lane\", this.lane.toString());\n    if (this.prio !== 0) {\n      header.slot(\"prio\", this.prio);\n    }\n    if (this.rate !== 0) {\n      header.slot(\"rate\", this.rate);\n    }\n    return Attr.of(this.tag, header).concat(this.body);\n  }\n\n  static fromValue<E extends LinkAddressed<E>>(this: LinkAddressedConstructor<E>,\n                                               value: Value): E | null {\n    let node: Uri | undefined;\n    let lane: Uri | undefined;\n    let prio = 0;\n    let rate = 0;\n    const header = value.header(this.tag);\n    header.forEach(function (header: Item, index: number) {\n      const key = header.key.stringValue(void 0);\n      if (key !== void 0) {\n        if (key === \"node\") {\n          node = Uri.parse(header.toValue().stringValue(\"\"));\n        } else if (key === \"lane\") {\n          lane = Uri.parse(header.toValue().stringValue(\"\"));\n        } else if (key === \"prio\") {\n          prio = header.numberValue(prio);\n        } else if (key === \"rate\") {\n          rate = header.numberValue(rate);\n        }\n      } else if (header instanceof Value) {\n        if (index === 0) {\n          node = Uri.parse(header.stringValue(\"\"));\n        } else if (index === 1) {\n          lane = Uri.parse(header.stringValue(\"\"));\n        }\n      }\n    });\n    if (node !== void 0 && lane !== void 0) {\n      const body = value.body();\n      return new this(node, lane, prio, rate, body);\n    }\n    return null;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LaneAddressed} from \"./LaneAddressed\";\n\nexport class EventMessage extends LaneAddressed<EventMessage> {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super(node, lane, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, body: Value): EventMessage {\n    return new EventMessage(node, lane, body);\n  }\n\n  static get tag(): string {\n    return \"event\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, body: AnyValue = Value.absent()): EventMessage {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new EventMessage(node as Uri, lane as Uri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LaneAddressed} from \"./LaneAddressed\";\n\nexport class CommandMessage extends LaneAddressed<CommandMessage> {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super(node, lane, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, body: Value): CommandMessage {\n    return new CommandMessage(node, lane, body);\n  }\n\n  static get tag(): string {\n    return \"command\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, body: AnyValue = Value.absent()): CommandMessage {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new CommandMessage(node as Uri, lane as Uri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LinkAddressed} from \"./LinkAddressed\";\n\nexport class LinkRequest extends LinkAddressed<LinkRequest> {\n  constructor(node: Uri, lane: Uri, prio: number, rate: number, body: Value) {\n    super(node, lane, prio, rate, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, prio: number, rate: number, body: Value): LinkRequest {\n    return new LinkRequest(node, lane, prio, rate, body);\n  }\n\n  static get tag(): string {\n    return \"link\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, prio: number = 0, rate: number = 0,\n                body: AnyValue = Value.absent()): LinkRequest {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new LinkRequest(node as Uri, lane as Uri, prio, rate, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LinkAddressed} from \"./LinkAddressed\";\n\nexport class LinkedResponse extends LinkAddressed<LinkedResponse> {\n  constructor(node: Uri, lane: Uri, prio: number, rate: number, body: Value) {\n    super(node, lane, prio, rate, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, prio: number, rate: number, body: Value): LinkedResponse {\n    return new LinkedResponse(node, lane, prio, rate, body);\n  }\n\n  static get tag(): string {\n    return \"linked\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, prio: number = 0, rate: number = 0,\n                body: AnyValue = Value.absent()): LinkedResponse {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new LinkedResponse(node as Uri, lane as Uri, prio, rate, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LinkAddressed} from \"./LinkAddressed\";\n\nexport class SyncRequest extends LinkAddressed<SyncRequest> {\n  constructor(node: Uri, lane: Uri, prio: number, rate: number, body: Value) {\n    super(node, lane, prio, rate, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, prio: number, rate: number, body: Value): SyncRequest {\n    return new SyncRequest(node, lane, prio, rate, body);\n  }\n\n  static get tag(): string {\n    return \"sync\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, prio: number = 0, rate: number = 0,\n                body: AnyValue = Value.absent()): SyncRequest {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new SyncRequest(node as Uri, lane as Uri, prio, rate, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LaneAddressed} from \"./LaneAddressed\";\n\nexport class SyncedResponse extends LaneAddressed<SyncedResponse> {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super(node, lane, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, body: Value): SyncedResponse {\n    return new SyncedResponse(node, lane, body);\n  }\n\n  static get tag(): string {\n    return \"synced\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, body: AnyValue = Value.absent()): SyncedResponse {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new SyncedResponse(node as Uri, lane as Uri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LaneAddressed} from \"./LaneAddressed\";\n\nexport class UnlinkRequest extends LaneAddressed<UnlinkRequest> {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super(node, lane, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, body: Value): UnlinkRequest {\n    return new UnlinkRequest(node, lane, body);\n  }\n\n  static get tag(): string {\n    return \"unlink\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, body: AnyValue = Value.absent()): UnlinkRequest {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new UnlinkRequest(node as Uri, lane as Uri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {LaneAddressed} from \"./LaneAddressed\";\n\nexport class UnlinkedResponse extends LaneAddressed<UnlinkedResponse> {\n  constructor(node: Uri, lane: Uri, body: Value) {\n    super(node, lane, body);\n  }\n\n  protected copy(node: Uri, lane: Uri, body: Value): UnlinkedResponse {\n    return new UnlinkedResponse(node, lane, body);\n  }\n\n  static get tag(): string {\n    return \"unlinked\";\n  }\n\n  static create(node: AnyUri, lane: AnyUri, body: AnyValue = Value.absent()): UnlinkedResponse {\n    node = Uri.fromAny(node);\n    lane = Uri.fromAny(lane);\n    body = Value.fromAny(body);\n    return new UnlinkedResponse(node as Uri, lane as Uri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {HostAddressed} from \"./HostAddressed\";\n\nexport class AuthRequest extends HostAddressed<AuthRequest> {\n  constructor(body: Value) {\n    super(body);\n  }\n\n  protected copy(body: Value): AuthRequest {\n    return new AuthRequest(body);\n  }\n\n  static get tag(): string {\n    return \"auth\";\n  }\n\n  static create(body: AnyValue = Value.absent()): AuthRequest {\n    body = Value.fromAny(body);\n    return new AuthRequest(body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {HostAddressed} from \"./HostAddressed\";\n\nexport class AuthedResponse extends HostAddressed<AuthedResponse> {\n  constructor(body: Value) {\n    super(body);\n  }\n\n  protected copy(body: Value): AuthedResponse {\n    return new AuthedResponse(body);\n  }\n\n  static get tag(): string {\n    return \"authed\";\n  }\n\n  static create(body: AnyValue = Value.absent()): AuthedResponse {\n    body = Value.fromAny(body);\n    return new AuthedResponse(body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {HostAddressed} from \"./HostAddressed\";\n\nexport class DeauthRequest extends HostAddressed<DeauthRequest> {\n  constructor(body: Value) {\n    super(body);\n  }\n\n  protected copy(body: Value): DeauthRequest {\n    return new DeauthRequest(body);\n  }\n\n  static get tag(): string {\n    return \"deauth\";\n  }\n\n  static create(body: AnyValue = Value.absent()): DeauthRequest {\n    body = Value.fromAny(body);\n    return new DeauthRequest(body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {HostAddressed} from \"./HostAddressed\";\n\nexport class DeauthedResponse extends HostAddressed<DeauthedResponse> {\n  constructor(body: Value) {\n    super(body);\n  }\n\n  protected copy(body: Value): DeauthedResponse {\n    return new DeauthedResponse(body);\n  }\n\n  static get tag(): string {\n    return \"deauthed\";\n  }\n\n  static create(body: AnyValue = Value.absent()): DeauthedResponse {\n    body = Value.fromAny(body);\n    return new DeauthedResponse(body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {AnyValue, Value} from \"@swim/structure\";\nimport type {Envelope} from \"@swim/warp\";\nimport type {HostDownlink} from \"./HostDownlink\";\n\nexport interface HostOptions {\n  credentials?: Value;\n  unlinkDelay?: number;\n  maxReconnectTimeout?: number;\n  idleTimeout?: number;\n  sendBufferSize?: number;\n}\n\n/** @hidden */\nexport abstract class Host {\n  abstract readonly hostUri: Uri;\n\n  abstract readonly unlinkDelay: number;\n\n  abstract isConnected(): boolean;\n\n  abstract isAuthenticated(): boolean;\n\n  abstract readonly session: Value;\n\n  abstract resolve(relative: AnyUri): Uri;\n\n  abstract unresolve(absolute: AnyUri): Uri;\n\n  abstract authenticate(credentials: AnyValue): void;\n\n  abstract openDownlink(downlink: HostDownlink): void;\n\n  abstract unlinkDownlink(downlink: HostDownlink): void;\n\n  abstract closeDownlink(downlink: HostDownlink): void;\n\n  abstract command(nodeUri: AnyUri, laneUri: AnyUri, body: AnyValue): void;\n\n  abstract open(): void;\n\n  abstract close(): void;\n\n  abstract closeUp(): void;\n\n  abstract push(envelope: Envelope): void;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BTree} from \"@swim/collections\";\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri, UriCache} from \"@swim/uri\";\nimport {\n  Envelope,\n  EventMessage,\n  CommandMessage,\n  LinkRequest,\n  LinkedResponse,\n  SyncRequest,\n  SyncedResponse,\n  UnlinkRequest,\n  UnlinkedResponse,\n  AuthRequest,\n  AuthedResponse,\n  DeauthRequest,\n  DeauthedResponse,\n} from \"@swim/warp\";\nimport type {HostDownlink} from \"./HostDownlink\";\nimport type {HostContext} from \"./HostContext\";\nimport {HostOptions, Host} from \"./Host\";\n\n/** @hidden */\nexport abstract class RemoteHost extends Host {\n  constructor(context: HostContext, hostUri: Uri, options: HostOptions = {}) {\n    super();\n    Object.defineProperty(this, \"context\", {\n      value: context,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"options\", {\n      value: options,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"authenticated\", {\n      value: false,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"session\", {\n      value: Value.absent(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"sendBuffer\", {\n      value: [],\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"downlinks\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"downlinkCount\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"uriCache\", {\n      value: new UriCache(hostUri),\n      enumerable: true,\n      configurable: true,\n    });\n    this.reconnectTimer = 0;\n    this.reconnectTimeout = 0;\n    this.idleTimer = 0;\n  }\n\n  /** @hidden */\n  declare readonly context: HostContext;\n\n  declare readonly hostUri: Uri;\n\n  declare readonly options: HostOptions;\n\n  get credentials(): Value {\n    return this.options.credentials ?? Value.absent();\n  }\n\n  get unlinkDelay(): number {\n    return this.options.unlinkDelay ?? RemoteHost.UnlinkDelay;\n  }\n\n  get maxReconnectTimeout(): number {\n    return this.options.maxReconnectTimeout ?? RemoteHost.MaxReconnectTimeout;\n  }\n\n  get idleTimeout(): number {\n    return this.options.idleTimeout ?? RemoteHost.IdleTimeout;\n  }\n\n  get sendBufferSize(): number {\n    return this.options.sendBufferSize ?? RemoteHost.SendBufferSize;\n  }\n\n  abstract isConnected(): boolean;\n\n  /** @hidden */\n  declare readonly authenticated: boolean;\n\n  isAuthenticated(): boolean {\n    return this.authenticated;\n  }\n\n  declare readonly session: Value;\n\n  /** @hidden */\n  declare readonly sendBuffer: Envelope[];\n\n  /** @hidden */\n  declare readonly downlinks: BTree<Uri, BTree<Uri, HostDownlink>>;\n\n  /** @hidden */\n  declare readonly downlinkCount: number;\n\n  isIdle(): boolean {\n    return this.sendBuffer.length === 0 && this.downlinkCount === 0;\n  }\n\n  /** @hidden */\n  declare readonly uriCache: UriCache;\n\n  resolve(relative: AnyUri): Uri {\n    return this.uriCache.resolve(relative);\n  }\n\n  unresolve(absolute: AnyUri): Uri {\n    return this.uriCache.unresolve(absolute);\n  }\n\n  authenticate(credentials: AnyValue): void {\n    credentials = Value.fromAny(credentials);\n    if (!credentials.equals(this.options.credentials)) {\n      this.options.credentials = credentials;\n      if (this.isConnected()) {\n        const request = new AuthRequest(credentials);\n        this.push(request);\n      } else {\n        this.open();\n      }\n    }\n  }\n\n  openDownlink(downlink: HostDownlink): void {\n    this.clearIdle();\n    const nodeUri = this.resolve(downlink.nodeUri);\n    const laneUri = downlink.laneUri;\n    if (this.downlinkCount === 0) {\n      this.open();\n    }\n    let nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks === void 0) {\n      nodeDownlinks = new BTree();\n      this.downlinks.set(nodeUri, nodeDownlinks);\n    }\n    if (nodeDownlinks.get(laneUri) !== void 0) {\n      throw new Error(\"duplicate downlink\");\n    }\n    nodeDownlinks.set(laneUri, downlink);\n    Object.defineProperty(this, \"downlinkCount\", {\n      value: this.downlinkCount + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    downlink.openUp(this);\n    if (this.isConnected()) {\n      downlink.hostDidConnect(this);\n    }\n  }\n\n  unlinkDownlink(downlink: HostDownlink): void {\n    const nodeUri = this.resolve(downlink.nodeUri);\n    const laneUri = downlink.laneUri;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0 && nodeDownlinks.get(laneUri) && this.isConnected()) {\n      const request = new UnlinkRequest(this.unresolve(nodeUri), laneUri, Value.absent());\n      downlink.onUnlinkRequest(request, this);\n      this.push(request);\n    }\n  }\n\n  closeDownlink(downlink: HostDownlink): void {\n    const nodeUri = this.resolve(downlink.nodeUri);\n    const laneUri = downlink.laneUri;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0) {\n      if (nodeDownlinks.get(laneUri)) {\n        Object.defineProperty(this, \"downlinkCount\", {\n          value: this.downlinkCount - 1,\n          enumerable: true,\n          configurable: true,\n        });\n        nodeDownlinks.delete(laneUri);\n        if (nodeDownlinks.isEmpty()) {\n          this.downlinks.delete(nodeUri);\n        }\n        if (this.downlinkCount === 0) {\n          this.watchIdle();\n        }\n        downlink.closeUp(this);\n      }\n    }\n  }\n\n  command(nodeUri: AnyUri, laneUri: AnyUri, body: AnyValue): void {\n    nodeUri = Uri.fromAny(nodeUri);\n    nodeUri = this.resolve(nodeUri);\n    laneUri = Uri.fromAny(laneUri);\n    body = Value.fromAny(body);\n    const message = new CommandMessage(this.unresolve(nodeUri), laneUri as Uri, body);\n    this.push(message);\n  }\n\n  protected onEnvelope(envelope: Envelope): void {\n    if (envelope instanceof EventMessage) {\n      this.onEventMessage(envelope);\n    } else if (envelope instanceof CommandMessage) {\n      this.onCommandMessage(envelope);\n    } else if (envelope instanceof LinkRequest) {\n      this.onLinkRequest(envelope);\n    } else if (envelope instanceof LinkedResponse) {\n      this.onLinkedResponse(envelope);\n    } else if (envelope instanceof SyncRequest) {\n      this.onSyncRequest(envelope);\n    } else if (envelope instanceof SyncedResponse) {\n      this.onSyncedResponse(envelope);\n    } else if (envelope instanceof UnlinkRequest) {\n      this.onUnlinkRequest(envelope);\n    } else if (envelope instanceof UnlinkedResponse) {\n      this.onUnlinkedResponse(envelope);\n    } else if (envelope instanceof AuthRequest) {\n      this.onAuthRequest(envelope);\n    } else if (envelope instanceof AuthedResponse) {\n      this.onAuthedResponse(envelope);\n    } else if (envelope instanceof DeauthRequest) {\n      this.onDeauthRequest(envelope);\n    } else if (envelope instanceof DeauthedResponse) {\n      this.onDeauthedResponse(envelope);\n    } else {\n      this.onUnknownEnvelope(envelope);\n    }\n  }\n\n  protected onEventMessage(message: EventMessage): void {\n    const nodeUri = this.resolve(message.node);\n    const laneUri = message.lane;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0) {\n      const downlink = nodeDownlinks.get(laneUri);\n      if (downlink !== void 0) {\n        const resolvedMessage = message.withNode(nodeUri);\n        downlink.onEventMessage(resolvedMessage, this);\n      }\n    }\n  }\n\n  protected onCommandMessage(message: CommandMessage): void {\n    // TODO: client agents\n  }\n\n  protected onLinkRequest(request: LinkRequest): void {\n    // TODO: client agents\n  }\n\n  protected onLinkedResponse(response: LinkedResponse): void {\n    const nodeUri = this.resolve(response.node);\n    const laneUri = response.lane;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0) {\n      const downlink = nodeDownlinks.get(laneUri);\n      if (downlink !== void 0) {\n        const resolvedResponse = response.withNode(nodeUri);\n        downlink.onLinkedResponse(resolvedResponse, this);\n      }\n    }\n  }\n\n  protected onSyncRequest(request: SyncRequest): void {\n    // TODO: client agents\n  }\n\n  protected onSyncedResponse(response: SyncedResponse): void {\n    const nodeUri = this.resolve(response.node);\n    const laneUri = response.lane;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0) {\n      const downlink = nodeDownlinks.get(laneUri);\n      if (downlink !== void 0) {\n        const resolvedResponse = response.withNode(nodeUri);\n        downlink.onSyncedResponse(resolvedResponse, this);\n      }\n    }\n  }\n\n  protected onUnlinkRequest(request: UnlinkRequest): void {\n    // TODO: client agents\n  }\n\n  protected onUnlinkedResponse(response: UnlinkedResponse): void {\n    const nodeUri = this.resolve(response.node);\n    const laneUri = response.lane;\n    const nodeDownlinks = this.downlinks.get(nodeUri);\n    if (nodeDownlinks !== void 0) {\n      const downlink = nodeDownlinks.get(laneUri);\n      if (downlink !== void 0) {\n        const resolvedResponse = response.withNode(nodeUri);\n        downlink.onUnlinkedResponse(resolvedResponse, this);\n      }\n    }\n  }\n\n  protected onAuthRequest(request: AuthRequest): void {\n    // TODO: client agents\n  }\n\n  protected onAuthedResponse(response: AuthedResponse): void {\n    Object.defineProperty(this, \"authenticated\", {\n      value: true,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"session\", {\n      value: response.body,\n      enumerable: true,\n      configurable: true,\n    });\n    this.context.hostDidAuthenticate(response.body, this);\n  }\n\n  protected onDeauthRequest(request: DeauthRequest): void {\n    // TODO: client agents\n  }\n\n  protected onDeauthedResponse(response: DeauthedResponse): void {\n    Object.defineProperty(this, \"authenticated\", {\n      value: false,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"session\", {\n      value: Value.absent(),\n      enumerable: true,\n      configurable: true,\n    });\n    this.context.hostDidDeauthenticate(response.body, this);\n  }\n\n  protected onUnknownEnvelope(envelope: Envelope | string): void {\n    // nop\n  }\n\n  /** @hidden */\n  reconnectTimer: number;\n\n  /** @hidden */\n  reconnectTimeout: number;\n\n  /** @hidden */\n  idleTimer: number;\n\n  protected onConnect(): void {\n    this.reconnectTimeout = 0;\n    this.context.hostDidConnect(this);\n    this.downlinks.forEach(function (nodeUri: Uri, nodeDownlinks: BTree<Uri, HostDownlink>): void {\n      nodeDownlinks.forEach(function (laneUri: Uri, downlink: HostDownlink): void {\n        downlink.hostDidConnect(this);\n      }, this);\n    }, this);\n  }\n\n  protected onDisconnect(): void {\n    Object.defineProperty(this, \"authenticated\", {\n      value: false,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"session\", {\n      value: Value.absent(),\n      enumerable: true,\n      configurable: true,\n    });\n    this.context.hostDidDisconnect(this);\n    this.downlinks.forEach(function (nodeUri: Uri, nodeDownlinks: BTree<Uri, HostDownlink>): void {\n      nodeDownlinks.forEach(function (laneUri: Uri, downlink: HostDownlink): void {\n        downlink.hostDidDisconnect(this);\n      }, this);\n    }, this);\n  }\n\n  protected onError(error?: unknown): void {\n    this.context.hostDidFail(error, this);\n    this.downlinks.forEach(function (nodeUri: Uri, nodeDownlinks: BTree<Uri, HostDownlink>): void {\n      nodeDownlinks.forEach(function (laneUri: Uri, downlink: HostDownlink): void {\n        downlink.hostDidFail(error, this);\n      }, this);\n    }, this);\n  }\n\n  protected reconnect(): void {\n    if (this.reconnectTimer === 0) {\n      if (this.reconnectTimeout === 0) {\n        this.reconnectTimeout = Math.floor(500 + 1000 * Math.random());\n      } else {\n        this.reconnectTimeout = Math.min(Math.floor(1.8 * this.reconnectTimeout), this.maxReconnectTimeout);\n      }\n      this.reconnectTimer = setTimeout(this.open.bind(this), this.reconnectTimeout) as any;\n    }\n  }\n\n  protected clearReconnect(): void {\n    if (this.reconnectTimer !== 0) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = 0;\n    }\n  }\n\n  protected watchIdle(): void {\n    if (this.idleTimer === 0 && this.isConnected() && this.isIdle()) {\n      this.idleTimer = setTimeout(this.checkIdle.bind(this), this.idleTimeout) as any;\n    }\n  }\n\n  protected clearIdle(): void {\n    if (this.idleTimer !== 0) {\n      clearTimeout(this.idleTimer);\n      this.idleTimer = 0;\n    }\n  }\n\n  protected checkIdle(): void {\n    if (this.isConnected() && this.isIdle()) {\n      this.close();\n    }\n  }\n\n  abstract open(): void;\n\n  close(): void {\n    this.context.closeHost(this);\n  }\n\n  closeUp(): void {\n    this.downlinks.forEach(function (nodeUri: Uri, nodeDownlinks: BTree<Uri, HostDownlink>): void {\n      nodeDownlinks.forEach(function (laneUri: Uri, downlink: HostDownlink): void {\n        downlink.closeUp(this);\n      }, this);\n    }, this);\n  }\n\n  abstract push(envelope: Envelope): void;\n\n  static readonly UnlinkDelay: number = 0;\n  static readonly MaxReconnectTimeout: number = 30000;\n  static readonly IdleTimeout: number = 1000;\n  static readonly SendBufferSize: number = 1024;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Uri} from \"@swim/uri\";\nimport {Envelope, CommandMessage, AuthRequest} from \"@swim/warp\";\nimport type {HostContext} from \"./HostContext\";\nimport type {HostOptions} from \"./Host\";\nimport {RemoteHost} from \"./RemoteHost\";\n\n/** @hidden */\nexport type WebSocketConstructor = {new(url: string, protocols?: string | string[]): WebSocket};\n\nexport interface WebSocketHostOptions extends HostOptions {\n  protocols?: string | string[];\n  WebSocket?: WebSocketConstructor;\n}\n\n/** @hidden */\nexport class WebSocketHost extends RemoteHost {\n  constructor(context: HostContext, hostUri: Uri, options: WebSocketHostOptions = {}) {\n    super(context, hostUri, options);\n    Object.defineProperty(this, \"socket\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly options: WebSocketHostOptions;\n\n  /** @hidden */\n  declare readonly socket: WebSocket | null;\n\n  get WebSocket(): WebSocketConstructor | null {\n    if (this.options.WebSocket !== void 0) {\n      return this.options.WebSocket;\n    } else if (typeof WebSocket !== \"undefined\") {\n      return WebSocket;\n    } else if (typeof require === \"function\") {\n      return require(\"ws\") as WebSocketConstructor;\n    } else {\n      return null;\n    }\n  }\n\n  isConnected(): boolean {\n    return this.socket !== null && this.socket.readyState === this.socket.OPEN;\n  }\n\n  open(): void {\n    this.clearReconnect();\n    let socket = this.socket;\n    if (socket === null) {\n      const WebSocket = this.WebSocket;\n      if (WebSocket === null) {\n        throw new Error(\"WebSocket undefined\");\n      }\n      let hostUri = this.hostUri;\n      const schemeName = hostUri.schemeName;\n      if (schemeName === \"warp\" || schemeName === \"swim\") {\n        hostUri = hostUri.withSchemeName(\"ws\");\n      } else if (schemeName === \"warps\" || schemeName === \"swims\") {\n        hostUri = hostUri.withSchemeName(\"wss\");\n      }\n      if (this.options.protocols !== void 0) {\n        socket = new WebSocket(hostUri.toString(), this.options.protocols);\n      } else {\n        socket = new WebSocket(hostUri.toString());\n      }\n      Object.defineProperty(this, \"socket\", {\n        value: socket,\n        enumerable: true,\n        configurable: true,\n      });\n      socket.onopen = this.onWebSocketOpen.bind(this);\n      socket.onmessage = this.onWebSocketMessage.bind(this);\n      socket.onclose = this.onWebSocketClose.bind(this);\n      socket.onerror = this.onWebSocketError.bind(this);\n    }\n  }\n\n  close(): void {\n    this.clearReconnect();\n    this.clearIdle();\n    if (this.socket !== null) {\n      this.socket.close();\n      if (!this.context.isOnline()) {\n        this.onWebSocketClose(); // force close event\n      }\n    } else {\n      super.close();\n    }\n  }\n\n  push(envelope: Envelope): void {\n    if (this.isConnected()) {\n      this.clearIdle();\n      const text = envelope.toRecon();\n      this.socket!.send(text);\n      this.watchIdle();\n    } else if (envelope instanceof CommandMessage) {\n      if (this.sendBuffer.length < this.sendBufferSize) {\n        this.sendBuffer.push(envelope);\n      } else {\n        throw new Error(\"send buffer overflow\");\n      }\n      this.open();\n    }\n  }\n\n  protected onWebSocketOpen(): void {\n    if (this.isConnected()) {\n      const credentials = this.credentials;\n      if (credentials.isDefined()) {\n        const request = new AuthRequest(credentials);\n        this.push(request);\n      }\n      this.onConnect();\n      let envelope;\n      while ((envelope = this.sendBuffer.shift()) && this.isConnected()) {\n        this.push(envelope);\n      }\n      this.watchIdle();\n    } else {\n      this.close();\n    }\n  }\n\n  protected onWebSocketMessage(message: MessageEvent): void {\n    const data = message.data;\n    if (typeof data === \"string\") {\n      const envelope = Envelope.parseRecon(data);\n      if (envelope !== null) {\n        this.onEnvelope(envelope);\n      } else {\n        this.onUnknownEnvelope(data);\n      }\n    }\n  }\n\n  protected onWebSocketClose(): void {\n    const socket = this.socket;\n    if (socket !== null) {\n      socket.onopen = null;\n      socket.onmessage = null;\n      socket.onclose = null;\n      socket.onerror = null;\n      Object.defineProperty(this, \"socket\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    this.onDisconnect();\n    this.clearIdle();\n    if (!this.isIdle()) {\n      if (this.context.isOnline()) {\n        this.reconnect();\n      }\n    } else {\n      this.close();\n    }\n  }\n\n  protected onWebSocketError(): void {\n    if (this.socket !== null) {\n      this.socket.close();\n      if (!this.context.isOnline()) {\n        this.onWebSocketClose(); // force close event\n      } else {\n        this.onError();\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays} from \"@swim/util\";\nimport type {Uri} from \"@swim/uri\";\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {\n  EventMessage,\n  LinkRequest,\n  LinkedResponse,\n  SyncRequest,\n  SyncedResponse,\n  UnlinkRequest,\n  UnlinkedResponse,\n} from \"@swim/warp\";\nimport type {HostDownlink} from \"../host/HostDownlink\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkType, Downlink} from \"./Downlink\";\n\n/** @hidden */\nexport abstract class DownlinkModel implements HostDownlink {\n  constructor(context: DownlinkContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri,\n              prio: number = 0, rate: number = 0, body: Value = Value.absent()) {\n    Object.defineProperty(this, \"context\", {\n      value: context,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"hostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"nodeUri\", {\n      value: nodeUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"laneUri\", {\n      value: laneUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"prio\", {\n      value: prio,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"rate\", {\n      value: rate,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"body\", {\n      value: body,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"views\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"host\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"status\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly context: DownlinkContext;\n\n  declare readonly hostUri: Uri;\n\n  declare readonly nodeUri: Uri;\n\n  declare readonly laneUri: Uri;\n\n  declare readonly prio: number;\n\n  declare readonly rate: number;\n\n  declare readonly body: Value;\n\n  declare readonly views: ReadonlyArray<Downlink>;\n\n  declare readonly host: Host | null;\n\n  /** @hidden */\n  declare readonly status: number;\n\n  abstract readonly type: DownlinkType;\n\n  keepLinked(): boolean {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      if (views[i]!.keepLinked()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  keepSynced(): boolean {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      if (this.views[i]!.keepSynced()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  get unlinkDelay(): number {\n    const host = this.host;\n    return host !== null ? host.unlinkDelay : 0;\n  }\n\n  isConnected(): boolean {\n    const host = this.host;\n    return host !== null ? host.isConnected() : false;\n  }\n\n  isAuthenticated(): boolean {\n    const host = this.host;\n    return host !== null ? host.isAuthenticated() : false;\n  }\n\n  isLinked(): boolean {\n    return (this.status & DownlinkModel.Linked) !== 0;\n  }\n\n  isSynced(): boolean {\n    return (this.status & DownlinkModel.Synced) !== 0;\n  }\n\n  get session(): Value {\n    const host = this.host;\n    return host !== null ? host.session : Value.absent();\n  }\n\n  addDownlink(view: Downlink): void {\n    Object.defineProperty(this, \"views\", {\n      value: Arrays.inserted(view, this.views),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  removeDownlink(view: Downlink): void {\n    const oldViews = this.views;\n    const newViews = Arrays.removed(view, oldViews);\n    if (oldViews !== newViews) {\n      Object.defineProperty(this, \"views\", {\n        value: newViews,\n        enumerable: true,\n        configurable: true,\n      });\n      view.closeUp();\n      if (newViews.length === 0) {\n        const unlinkDelay = this.unlinkDelay;\n        if (unlinkDelay < 0) {\n          this.unlink();\n        } else {\n          setTimeout(this.doUnlink.bind(this), unlinkDelay);\n        }\n      }\n    }\n  }\n\n  onEventMessage(message: EventMessage, host: Host): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onEventMessage(message);\n    }\n  }\n\n  onCommandMessage(body: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onCommandMessage(body);\n    }\n  }\n\n  onLinkRequest(request: LinkRequest): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status | DownlinkModel.Linking,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onLinkRequest(request);\n    }\n  }\n\n  onLinkedResponse(response: LinkedResponse, host: Host): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status & ~DownlinkModel.Linking | DownlinkModel.Linked,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onLinkedResponse(response);\n    }\n  }\n\n  onSyncRequest(request: SyncRequest): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status | DownlinkModel.Syncing,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onSyncRequest(request);\n    }\n  }\n\n  onSyncedResponse(response: SyncedResponse, host: Host): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status & ~DownlinkModel.Syncing | DownlinkModel.Synced,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onSyncedResponse(response);\n    }\n  }\n\n  onUnlinkRequest(request: UnlinkRequest, host: Host): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status & ~(DownlinkModel.Linking | DownlinkModel.Syncing) | DownlinkModel.Unlinking,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.onUnlinkRequest(request);\n    }\n  }\n\n  onUnlinkedResponse(response: UnlinkedResponse, host: Host): void {\n    Object.defineProperty(this, \"status\", {\n      value: this.status & ~DownlinkModel.Unlinking,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    if (views.length === 0 || this.status !== 0) {\n      for (let i = 0, n = views.length; i < n; i += 1) {\n        views[i]!.onUnlinkedResponse(response);\n      }\n      this.close();\n    } else { // concurrently relinked\n      if (this.keepSynced()) {\n        this.sync();\n      } else {\n        this.link();\n      }\n    }\n  }\n\n  hostDidConnect(host: Host): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.hostDidConnect();\n    }\n    if (this.keepSynced()) {\n      this.sync();\n    } else {\n      this.link();\n    }\n  }\n\n  hostDidDisconnect(host: Host): void {\n    Object.defineProperty(this, \"status\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    let keepLinked = false;\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      const view = views[i]!;\n      view.hostDidDisconnect();\n      keepLinked = keepLinked || view.keepLinked();\n    }\n    if (!keepLinked) {\n      this.close();\n    }\n  }\n\n  hostDidFail(error: unknown, host: Host): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.hostDidFail(error);\n    }\n  }\n\n  command(body: AnyValue): void {\n    body = Value.fromAny(body);\n    this.onCommandMessage(body);\n    this.host!.command(this.nodeUri, this.laneUri, body);\n  }\n\n  sync(): void {\n    const nodeUri = this.host!.unresolve(this.nodeUri);\n    const request = new SyncRequest(nodeUri, this.laneUri, this.prio, this.rate, this.body);\n    this.onSyncRequest(request);\n    this.host!.push(request);\n  }\n\n  link(): void {\n    const nodeUri = this.host!.unresolve(this.nodeUri);\n    const request = new LinkRequest(nodeUri, this.laneUri, this.prio, this.rate, this.body);\n    this.onLinkRequest(request);\n    this.host!.push(request);\n  }\n\n  unlink(): void {\n    Object.defineProperty(this, \"status\", {\n      value: DownlinkModel.Unlinking,\n      enumerable: true,\n      configurable: true,\n    });\n    this.context.unlinkDownlink(this);\n  }\n\n  protected doUnlink(): void {\n    if (this.views.length === 0) {\n      this.unlink();\n    }\n  }\n\n  close(): void {\n    this.context.closeDownlink(this);\n  }\n\n  openUp(host: Host): void {\n    Object.defineProperty(this, \"host\", {\n      value: host,\n      enumerable: true,\n      configurable: true,\n    });\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      this.views[i]!.openUp(host);\n    }\n  }\n\n  closeUp(): void {\n    const views = this.views;\n    Object.defineProperty(this, \"views\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.closeUp();\n    }\n  }\n\n  static readonly Linking: number = 1 << 0;\n  static readonly Linked: number = 1 << 1;\n  static readonly Syncing: number = 1 << 2;\n  static readonly Synced: number = 1 << 3;\n  static readonly Unlinking: number = 1 << 4;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Value} from \"@swim/structure\";\nimport type {Uri} from \"@swim/uri\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport {DownlinkModel} from \"./DownlinkModel\";\nimport type {DownlinkType} from \"./Downlink\";\nimport type {EventDownlink} from \"./EventDownlink\";\n\n/** @hidden */\nexport class EventDownlinkModel extends DownlinkModel {\n  constructor(context: DownlinkContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri,\n              prio?: number, rate?: number, body?: Value) {\n    super(context, hostUri, nodeUri, laneUri, prio, rate, body);\n  }\n\n  declare views: ReadonlyArray<EventDownlink>;\n\n  get type(): DownlinkType {\n    return \"event\";\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {AnyValue, Value} from \"@swim/structure\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkOwner} from \"./DownlinkOwner\";\nimport {DownlinkType, DownlinkObserver, DownlinkInit, DownlinkFlags, Downlink} from \"./Downlink\";\nimport {EventDownlinkModel} from \"./EventDownlinkModel\";\n\nexport interface EventDownlinkObserver extends DownlinkObserver {\n}\n\nexport interface EventDownlinkInit extends EventDownlinkObserver, DownlinkInit {\n}\n\nexport class EventDownlink extends Downlink {\n  /** @hidden */\n  constructor(context: DownlinkContext, owner: DownlinkOwner | null, init?: EventDownlinkInit,\n              hostUri?: Uri, nodeUri?: Uri, laneUri?: Uri, prio?: number,\n              rate?: number, body?: Value, flags: number = DownlinkFlags.KeepLinked,\n              observers?: ReadonlyArray<EventDownlinkObserver> | EventDownlinkObserver) {\n    super(context, owner, init, hostUri, nodeUri, laneUri, prio, rate, body, flags, observers);\n  }\n\n  /** @hidden */\n  declare readonly model: EventDownlinkModel | null;\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<EventDownlinkObserver>;\n\n  get type(): DownlinkType {\n    return \"event\";\n  }\n\n  protected copy(context: DownlinkContext, owner: DownlinkOwner | null,\n                 hostUri: Uri, nodeUri: Uri, laneUri: Uri, prio: number, rate: number,\n                 body: Value, flags: number, observers: ReadonlyArray<EventDownlinkObserver>): EventDownlink {\n    return new EventDownlink(context, owner, void 0, hostUri, nodeUri, laneUri,\n                             prio, rate, body, flags, observers);\n  }\n\n  observe(observer: EventDownlinkObserver): this {\n    return super.observe(observer);\n  }\n\n  open(): this {\n    const laneUri = this.ownLaneUri;\n    if (laneUri.isEmpty()) {\n      throw new Error(\"no lane\");\n    }\n    let nodeUri = this.ownNodeUri;\n    if (nodeUri.isEmpty()) {\n      throw new Error(\"no node\");\n    }\n    let hostUri = this.ownHostUri;\n    if (hostUri.isEmpty()) {\n      hostUri = nodeUri.endpoint();\n      nodeUri = hostUri.unresolve(nodeUri);\n    }\n    let model = this.context.getDownlink(hostUri, nodeUri, laneUri);\n    if (model !== void 0) {\n      if (!(model instanceof EventDownlinkModel)) {\n        throw new Error(\"downlink type mismatch\");\n      }\n      model.addDownlink(this);\n    } else {\n      model = new EventDownlinkModel(this.context, hostUri, nodeUri, laneUri,\n                                     this.ownPrio, this.ownRate, this.ownBody);\n      model.addDownlink(this);\n      this.context.openDownlink(model);\n    }\n    Object.defineProperty(this, \"model\", {\n      value: model as EventDownlinkModel,\n      enumerable: true,\n      configurable: true,\n    });\n    if (this.owner !== null) {\n      this.owner.addDownlink(this);\n    }\n    return this;\n  }\n}\nexport interface EventDownlink {\n  hostUri(): Uri;\n  hostUri(hostUri: AnyUri): EventDownlink;\n\n  nodeUri(): Uri;\n  nodeUri(nodeUri: AnyUri): EventDownlink;\n\n  laneUri(): Uri;\n  laneUri(laneUri: AnyUri): EventDownlink;\n\n  prio(): number;\n  prio(prio: number): EventDownlink;\n\n  rate(): number;\n  rate(rate: number): EventDownlink;\n\n  body(): Value;\n  body(body: AnyValue): EventDownlink;\n\n  keepLinked(): boolean;\n  keepLinked(keepLinked: boolean): EventDownlink;\n\n  keepSynced(): boolean;\n  keepSynced(keepSynced: boolean): EventDownlink;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {STree} from \"@swim/collections\";\nimport {Attr, Value, Record} from \"@swim/structure\";\nimport type {Uri} from \"@swim/uri\";\nimport type {EventMessage} from \"@swim/warp\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport {DownlinkModel} from \"./DownlinkModel\";\nimport type {DownlinkType} from \"./Downlink\";\nimport type {ListDownlink} from \"./ListDownlink\";\n\n/** @hidden */\nexport class ListDownlinkModel extends DownlinkModel {\n  constructor(context: DownlinkContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri,\n              prio?: number, rate?: number, body?: Value, state: STree<Value, Value> = new STree()) {\n    super(context, hostUri, nodeUri, laneUri, prio, rate, body);\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly views: ReadonlyArray<ListDownlink<unknown>>;\n\n  /** @hidden */\n  declare readonly state: STree<Value, Value>;\n\n  get type(): DownlinkType {\n    return \"list\";\n  }\n\n  get length(): number {\n    return this.state.length;\n  }\n\n  isEmpty(): boolean {\n    return this.state.isEmpty();\n  }\n\n  get(index: number, key?: Value): Value {\n    return this.state.get(index, key) || Value.absent();\n  }\n\n  getEntry(index: number, key?: Value): [Value, Value] | undefined {\n    return this.state.getEntry(index, key);\n  }\n\n  set(index: number, newValue: Value, key?: Value): this {\n    if (key !== void 0) {\n      index = this.state.lookup(key, index);\n      if (index < 0) {\n        throw new RangeError(\"\" + key);\n      }\n    }\n    if (index < 0 || index >= this.state.length) {\n      throw new RangeError(\"\" + index);\n    }\n    newValue = this.listWillUpdate(index, newValue);\n    const oldEntry = this.state.getEntry(index)!;\n    this.state.set(index, newValue);\n    this.listDidUpdate(index, newValue, oldEntry[1]);\n    const header = Record.create(2).slot(\"key\", oldEntry[0]).slot(\"index\", index);\n    this.command(Attr.of(\"update\", header).concat(newValue));\n    return this;\n  }\n\n  insert(index: number, newValue: Value, key?: Value): this {\n    if (index < 0 || index > this.state.length) {\n      throw new RangeError(\"\" + index);\n    }\n    newValue = this.listWillUpdate(index, newValue);\n    this.state.insert(index, newValue, key);\n    const newEntry = this.state.getEntry(index)!;\n    this.listDidUpdate(index, newValue, Value.absent());\n    const header = Record.create(2).slot(\"key\", newEntry[0]).slot(\"index\", index);\n    this.command(Attr.of(\"update\", header).concat(newValue));\n    return this;\n  }\n\n  remove(index: number, key?: Value): this {\n    if (key !== void 0) {\n      index = this.state.lookup(key, index);\n      if (index < 0) {\n        throw new RangeError(\"\" + key);\n      }\n    }\n    if (index < 0 || index > this.state.length) {\n      throw new RangeError(\"\" + index);\n    }\n    this.listWillRemove(index);\n    const oldEntry = this.state.getEntry(index)!;\n    this.state.remove(index);\n    this.listDidRemove(index, oldEntry[1]);\n    const header = Record.create(2).slot(\"key\", oldEntry[0]).slot(\"index\", index);\n    this.command(Record.create(1).attr(\"remove\", header));\n    return this;\n  }\n\n  push(...newValues: Value[]): number {\n    for (let i = 0; i < newValues.length; i += 1) {\n      const index = this.state.length + i;\n      const newValue = this.listWillUpdate(index, newValues[i]!);\n      this.state.insert(index, newValue);\n      const newEntry = this.state.getEntry(index)!;\n      this.listDidUpdate(index, newValue, Value.absent());\n      const header = Record.create(2).slot(\"key\", newEntry[0]).slot(\"index\", index);\n      this.command(Attr.of(\"update\", header).concat(newValue));\n    }\n    return this.state.length;\n  }\n\n  pop(): Value {\n    const index = this.state.length - 1;\n    if (index >= 0) {\n      this.listWillRemove(index);\n      const oldEntry = this.state.getEntry(index)!;\n      this.state.remove(index);\n      this.listDidRemove(index, oldEntry[1]);\n      const header = Record.create(2).slot(\"key\", oldEntry[0]).slot(\"index\", index);\n      this.command(Record.create(1).attr(\"remove\", header));\n      return oldEntry[1];\n    } else {\n      return Value.absent();\n    }\n  }\n\n  unshift(...newValues: Value[]): number {\n    for (let i = newValues.length - 1; i >= 0; i -= 1) {\n      const newValue = this.listWillUpdate(0, newValues[i]!);\n      this.state.insert(0, newValue);\n      const newEntry = this.state.getEntry(0)!;\n      this.listDidUpdate(0, newValue, Value.absent());\n      const header = Record.create(2).slot(\"key\", newEntry[0]).slot(\"index\", 0);\n      this.command(Attr.of(\"update\", header).concat(newValue));\n    }\n    return this.state.length;\n  }\n\n  shift(): Value {\n    if (this.state.length > 0) {\n      this.listWillRemove(0);\n      const oldEntry = this.state.getEntry(0)!;\n      this.state.remove(0);\n      this.listDidRemove(0, oldEntry[1]);\n      const header = Record.create(2).slot(\"key\", oldEntry[0]).slot(\"index\", 0);\n      this.command(Record.create(1).attr(\"remove\", header));\n      return oldEntry[1];\n    } else {\n      return Value.absent();\n    }\n  }\n\n  move(fromIndex: number, toIndex: number, key?: Value): this {\n    if (key !== void 0) {\n      fromIndex = this.state.lookup(key, fromIndex);\n      if (fromIndex < 0) {\n        throw new RangeError(\"\" + key);\n      }\n    }\n    if (fromIndex < 0 || fromIndex >= this.state.length) {\n      throw new RangeError(\"\" + fromIndex);\n    }\n    if (toIndex < 0 || toIndex >= this.state.length) {\n      throw new RangeError(\"\" + toIndex);\n    }\n    if (fromIndex !== toIndex) {\n      const entry = this.state.getEntry(fromIndex)!;\n      this.listWillMove(fromIndex, toIndex, entry[1]);\n      this.state.remove(fromIndex).insert(toIndex, entry[1], entry[0]);\n      this.listDidMove(fromIndex, toIndex, entry[1]);\n      const header = Record.create(2).slot(\"key\", entry[0]).slot(\"from\", fromIndex).slot(\"to\", toIndex);\n      this.command(Record.create(1).attr(\"move\", header));\n    }\n    return this;\n  }\n\n  splice(start: number, deleteCount?: number, ...newValues: Value[]): Value[] {\n    if (start < 0) {\n      start = this.state.length + start;\n    }\n    start = Math.min(Math.max(0, start), this.state.length);\n    if (deleteCount === void 0) {\n      deleteCount = this.state.length - start;\n    }\n    const deleted = [] as Value[];\n    for (let i = start, n = start + deleteCount; i < n; i += 1) {\n      this.listWillRemove(start);\n      const oldEntry = this.state.getEntry(start)!;\n      deleted.push(oldEntry[1]);\n      this.state.remove(start);\n      this.listDidRemove(start, oldEntry[1]);\n      const header = Record.create(2).slot(\"key\", oldEntry[0]).slot(\"index\", start);\n      this.command(Record.create(1).attr(\"remove\", header));\n    }\n    for (let i = 0; i < newValues.length; i += 1) {\n      const index = start + i;\n      const newValue = this.listWillUpdate(index, newValues[i]!);\n      this.state.insert(index, newValue);\n      const newEntry = this.state.getEntry(index)!;\n      this.listDidUpdate(index, newValue, Value.absent());\n      const header = Record.create(2).slot(\"key\", newEntry[0]).slot(\"index\", index);\n      this.command(Attr.of(\"update\", header).concat(newValue));\n    }\n    return deleted;\n  }\n\n  clear(): void {\n    this.listWillClear();\n    this.state.clear();\n    this.listDidClear();\n    this.command(Record.create(1).attr(\"clear\"));\n  }\n\n  forEach<T>(callback: (value: Value, index: number, key: Value) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, value: Value, index: number, key: Value) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, value: Value, index: number, key: Value) => T | void,\n                thisArg?: S): T | undefined {\n    return this.state.forEach(callback, thisArg);\n  }\n\n  values(): Cursor<Value> {\n    return this.state.values();\n  }\n\n  keys(): Cursor<Value> {\n    return this.state.keys();\n  }\n\n  entries(): Cursor<[Value, Value]> {\n    return this.state.entries();\n  }\n\n  snapshot(): STree<Value, Value> {\n    return this.state.clone();\n  }\n\n  setState(state: STree<Value, Value>): void {\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  onEventMessage(message: EventMessage, host: Host): void {\n    super.onEventMessage(message, host);\n    const event = message.body;\n    const tag = event.tag;\n    if (tag === \"update\") {\n      const header = event.head().toValue();\n      const index = this.state.lookup(header.get(\"key\"), header.get(\"index\").numberValue());\n      if (index >= 0) {\n        this.onUpdateEvent(index, event.body(), header.get(\"key\"));\n      } else {\n        this.onInsertEvent(header.get(\"index\").numberValue(0), event.body(), header.get(\"key\"));\n      }\n    } else if (tag === \"move\") {\n      const header = event.head().toValue();\n      const index = this.state.lookup(header.get(\"key\"), header.get(\"from\").numberValue());\n      if (index >= 0) {\n        this.onMoveEvent(index, header.get(\"to\").numberValue(0), header.get(\"key\"));\n      }\n    } else if (tag === \"remove\") {\n      const header = event.head().toValue();\n      const index = this.state.lookup(header.get(\"key\"), header.get(\"index\").numberValue());\n      if (index >= 0) {\n        this.onRemoveEvent(index, header.get(\"key\"));\n      }\n    } else if (tag === \"drop\") {\n      const header = event.head();\n      this.onDropEvent(header.numberValue(0));\n    } else if (tag === \"take\") {\n      const header = event.head();\n      this.onTakeEvent(header.numberValue(0));\n    } else if (tag === \"clear\") {\n      this.onClearEvent();\n    }\n  }\n\n  protected onInsertEvent(index: number, newValue: Value, key: Value): void {\n    newValue = this.listWillUpdate(index, newValue);\n    this.state.insert(index, newValue, key);\n    this.listDidUpdate(index, newValue, Value.absent());\n  }\n\n  protected onUpdateEvent(index: number, newValue: Value, key: Value): void {\n    newValue = this.listWillUpdate(index, newValue);\n    const oldValue = this.state.get(index) || Value.absent();\n    this.state.set(index, newValue);\n    this.listDidUpdate(index, newValue, oldValue);\n  }\n\n  protected onMoveEvent(fromIndex: number, toIndex: number, key: Value): void {\n    toIndex = Math.min(Math.max(0, toIndex), this.state.length);\n    if (fromIndex !== toIndex) {\n      const value = this.state.get(fromIndex) || Value.absent();\n      this.listWillMove(fromIndex, toIndex, value);\n      this.state.remove(fromIndex).insert(toIndex, value, key);\n      this.listDidMove(fromIndex, toIndex, value);\n    }\n  }\n\n  protected onRemoveEvent(index: number, key: Value): void {\n    this.listWillRemove(index);\n    const oldValue = this.state.get(index) || Value.absent();\n    this.state.remove(index);\n    this.listDidRemove(index, oldValue);\n  }\n\n  protected onDropEvent(lower: number): void {\n    this.listWillDrop(lower);\n    this.state.drop(lower);\n    this.listDidDrop(lower);\n  }\n\n  protected onTakeEvent(upper: number): void {\n    this.listWillTake(upper);\n    this.state.take(upper);\n    this.listDidTake(upper);\n  }\n\n  protected onClearEvent(): void {\n    this.listWillClear();\n    this.state.clear();\n    this.listDidClear();\n  }\n\n  protected listWillUpdate(index: number, newValue: Value): Value {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      newValue = views[i]!.listWillUpdate(index, newValue);\n    }\n    return newValue;\n  }\n\n  protected listDidUpdate(index: number, newValue: Value, oldValue: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidUpdate(index, newValue, oldValue);\n    }\n  }\n\n  protected listWillMove(fromIndex: number, toIndex: number, value: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listWillMove(fromIndex, toIndex, value);\n    }\n  }\n\n  protected listDidMove(fromIndex: number, toIndex: number, value: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidMove(fromIndex, toIndex, value);\n    }\n  }\n\n  protected listWillRemove(index: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listWillRemove(index);\n    }\n  }\n\n  protected listDidRemove(index: number, oldValue: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidRemove(index, oldValue);\n    }\n  }\n\n  protected listWillDrop(lower: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listWillDrop(lower);\n    }\n  }\n\n  protected listDidDrop(lower: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidDrop(lower);\n    }\n  }\n\n  protected listWillTake(upper: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listWillTake(upper);\n    }\n  }\n\n  protected listDidTake(upper: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidTake(upper);\n    }\n  }\n\n  protected listWillClear(): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listWillClear();\n    }\n  }\n\n  protected listDidClear(): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.listDidClear();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport type {STree} from \"@swim/collections\";\nimport {AnyValue, Value, Form, ValueCursor, ValueEntryCursor} from \"@swim/structure\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkOwner} from \"./DownlinkOwner\";\nimport {DownlinkType, DownlinkObserver, DownlinkInit, DownlinkFlags, Downlink} from \"./Downlink\";\nimport {ListDownlinkModel} from \"./ListDownlinkModel\";\n\nexport type ListDownlinkWillUpdate<V, VU = never> = (index: number, newValue: V, downlink: ListDownlink<V, VU>) => V | void;\nexport type ListDownlinkDidUpdate<V, VU = never> = (index: number, newValue: V, oldValue: V, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkWillMove<V, VU = never> = (fromIndex: number, toIndex: number, value: V, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkDidMove<V, VU = never> = (fromIndex: number, toIndex: number, value: V, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkWillRemove<V, VU = never> = (index: number, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkDidRemove<V, VU = never> = (index: number, oldValue: V, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkWillDrop<V, VU = never> = (lower: number, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkDidDrop<V, VU = never> = (lower: number, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkWillTake<V, VU = never> = (upper: number, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkDidTake<V, VU = never> = (upper: number, downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkWillClear<V, VU = never> = (downlink: ListDownlink<V, VU>) => void;\nexport type ListDownlinkDidClear<V, VU = never> = (downlink: ListDownlink<V, VU>) => void;\n\nexport interface ListDownlinkObserver<V, VU = never> extends DownlinkObserver {\n  willUpdate?: ListDownlinkWillUpdate<V, VU>;\n  didUpdate?: ListDownlinkDidUpdate<V, VU>;\n  willMove?: ListDownlinkWillMove<V, VU>;\n  didMove?: ListDownlinkDidMove<V, VU>;\n  willRemove?: ListDownlinkWillRemove<V, VU>;\n  didRemove?: ListDownlinkDidRemove<V, VU>;\n  willDrop?: ListDownlinkWillDrop<V, VU>;\n  didDrop?: ListDownlinkDidDrop<V, VU>;\n  willTake?: ListDownlinkWillTake<V, VU>;\n  didTake?: ListDownlinkDidTake<V, VU>;\n  willClear?: ListDownlinkWillClear<V, VU>;\n  didClear?: ListDownlinkDidClear<V, VU>;\n}\n\nexport interface ListDownlinkInit<V, VU = never> extends ListDownlinkObserver<V, VU>, DownlinkInit {\n  valueForm?: Form<V, VU>;\n}\n\nexport class ListDownlink<V, VU = never> extends Downlink {\n  /** @hidden */\n  constructor(context: DownlinkContext, owner: DownlinkOwner | null, init?: ListDownlinkInit<V, VU>,\n              hostUri?: Uri, nodeUri?: Uri, laneUri?: Uri, prio?: number, rate?: number,\n              body?: Value, flags: number = DownlinkFlags.KeepLinkedSynced,\n              observers?: ReadonlyArray<ListDownlinkObserver<V, VU>> | ListDownlinkObserver<V, VU>,\n              valueForm?: Form<V, VU>, state0: STree<Value, Value> | null = null) {\n    super(context, owner, init, hostUri, nodeUri, laneUri, prio, rate, body, flags, observers);\n    if (init !== void 0) {\n      const observer = this.observers[this.observers.length - 1]!;\n      observer.willUpdate = init.willUpdate ?? observer.willUpdate;\n      observer.didUpdate = init.didUpdate ?? observer.didUpdate;\n      observer.willMove = init.willMove ?? observer.willMove;\n      observer.didMove = init.didMove ?? observer.didMove;\n      observer.willRemove = init.willRemove ?? observer.willRemove;\n      observer.didRemove = init.didRemove ?? observer.didRemove;\n      observer.willDrop = init.willDrop ?? observer.willDrop;\n      observer.didDrop = init.didDrop ?? observer.didDrop;\n      observer.willTake = init.willTake ?? observer.willTake;\n      observer.didTake = init.didTake ?? observer.didTake;\n      observer.willClear = init.willClear ?? observer.willClear;\n      observer.didClear = init.didClear ?? observer.didClear;\n      valueForm = init.valueForm !== void 0 ? init.valueForm : valueForm;\n    }\n    Object.defineProperty(this, \"ownValueForm\", {\n      value: valueForm !== void 0 ? valueForm : Form.forValue() as unknown as Form<V, VU>,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"state0\", {\n      value: state0,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly model: ListDownlinkModel | null;\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<ListDownlinkObserver<V, VU>>;\n\n  /** @hidden */\n  declare readonly ownValueForm: Form<V, VU>;\n\n  /** @hidden */\n  declare readonly state0: STree<Value, Value> | null;\n\n  get type(): DownlinkType {\n    return \"list\";\n  }\n\n  protected copy<V, VU>(context: DownlinkContext, owner: DownlinkOwner | null,\n                        hostUri: Uri, nodeUri: Uri, laneUri: Uri, prio: number, rate: number,\n                        body: Value, flags: number, observers: ReadonlyArray<ListDownlinkObserver<V, VU>>,\n                        valueForm?: Form<V, VU>, state0?: STree<Value, Value> | null): ListDownlink<V, VU> {\n    if (arguments.length === 10) {\n      valueForm = this.ownValueForm as unknown as Form<V, VU>;\n      state0 = this.state0;\n    }\n    return new ListDownlink(context, owner, void 0, hostUri, nodeUri, laneUri,\n                            prio, rate, body, flags, observers, valueForm, state0);\n  }\n\n  valueForm(): Form<V, VU>;\n  valueForm<V2, V2U = never>(valueForm: Form<V2, V2U>): ListDownlink<V2, V2U>;\n  valueForm<V2, V2U = never>(valueForm?: Form<V2, V2U>): Form<V, VU> | ListDownlink<V2, V2U> {\n    if (valueForm === void 0) {\n      return this.ownValueForm;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers as any,\n                       valueForm, this.state0);\n    }\n  }\n\n  get length(): number {\n    return this.model!.length;\n  }\n\n  isEmpty(): boolean {\n    return this.model!.isEmpty();\n  }\n\n  get(index: number, id?: Value): V {\n    const value = this.model!.get(index, id);\n    return value.coerce(this.ownValueForm);\n  }\n\n  getEntry(index: number, id?: Value): [V, Value] | undefined {\n    const entry = this.model!.getEntry(index, id);\n    if (entry !== void 0) {\n      return [entry[0].coerce(this.ownValueForm), entry[1]];\n    }\n    return void 0;\n  }\n\n  set(index: number, newObject: V | VU, id?: Value): this {\n    const newValue = this.ownValueForm.mold(newObject);\n    this.model!.set(index, newValue, id);\n    return this;\n  }\n\n  insert(index: number, newObject: V | VU, id?: Value): this {\n    const newValue = this.ownValueForm.mold(newObject);\n    this.model!.insert(index, newValue, id);\n    return this;\n  }\n\n  remove(index: number, id?: Value): this {\n    this.model!.remove(index, id);\n    return this;\n  }\n\n  push(...newObjects: (V | VU)[]): number {\n    const newValues = new Array(newObjects.length);\n    for (let i = 0; i < newObjects.length; i += 1) {\n      newValues[i] = this.ownValueForm.mold(newObjects[i]!);\n    }\n    return this.model!.push.apply(this.model, newValues);\n  }\n\n  pop(): V {\n    const value = this.model!.pop();\n    return value.coerce(this.ownValueForm);\n  }\n\n  unshift(...newObjects: (V | VU)[]): number {\n    const newValues = new Array(newObjects.length);\n    for (let i = 0; i < newObjects.length; i += 1) {\n      newValues[i] = this.ownValueForm.mold(newObjects[i]!);\n    }\n    return this.model!.unshift.apply(this.model, newValues);\n  }\n\n  shift(): V {\n    const value = this.model!.shift();\n    return value.coerce(this.ownValueForm);\n  }\n\n  move(fromIndex: number, toIndex: number, id?: Value): this {\n    this.model!.move(fromIndex, toIndex, id);\n    return this;\n  }\n\n  splice(start: number, deleteCount?: number, ...newObjects: (V | VU)[]): V[] {\n    const newValues = new Array(newObjects.length);\n    for (let i = 0; i < newObjects.length; i += 1) {\n      newValues[i] = this.ownValueForm.mold(newObjects[i]!);\n    }\n    const oldValues = this.model!.splice(start, deleteCount, ...newValues);\n    const oldObjects = new Array(oldValues.length);\n    for (let i = 0; i < oldValues.length; i += 1) {\n      oldObjects[i] = oldValues[i]!.coerce(this.ownValueForm);\n    }\n    return oldObjects;\n  }\n\n  clear(): void {\n    this.model!.clear();\n  }\n\n  forEach<T, S>(callback: (value: V, index: number, id: Value) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, value: V, index: number, id: Value) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, value: V, index: number, id: Value) => T | void,\n                thisArg?: S): T | undefined {\n    if (this.ownValueForm as unknown === Form.forValue()) {\n      return this.model!.state.forEach(callback as any, thisArg);\n    } else {\n      return this.model!.state.forEach(function (value: Value, index: number, id: Value): T | void {\n        const object = value.coerce(this.ownValueForm);\n        return callback.call(thisArg, object, index, id);\n      }, this);\n    }\n  }\n\n  values(): Cursor<V> {\n    const cursor = this.model!.values();\n    if (this.ownValueForm as unknown === Form.forValue()) {\n      return cursor as unknown as Cursor<V>;\n    } else {\n      return new ValueCursor(cursor, this.ownValueForm);\n    }\n  }\n\n  keys(): Cursor<Value> {\n    return this.model!.keys();\n  }\n\n  entries(): Cursor<[Value, V]> {\n    const cursor = this.model!.entries();\n    if (this.ownValueForm as unknown === Form.forValue()) {\n      return cursor as unknown as Cursor<[Value, V]>;\n    } else {\n      return new ValueEntryCursor(cursor, Form.forValue(), this.ownValueForm);\n    }\n  }\n\n  snapshot(): STree<Value, Value> {\n    return this.model!.snapshot();\n  }\n\n  setState(state: STree<Value, Value>): void {\n    this.model!.setState(state);\n  }\n\n  observe(observer: ListDownlinkObserver<V, VU>): this {\n    return super.observe(observer);\n  }\n\n  willUpdate(willUpdate: ListDownlinkWillUpdate<V, VU>): this {\n    return this.observe({willUpdate});\n  }\n\n  didUpdate(didUpdate: ListDownlinkDidUpdate<V, VU>): this {\n    return this.observe({didUpdate});\n  }\n\n  willMove(willMove: ListDownlinkWillMove<V, VU>): this {\n    return this.observe({willMove});\n  }\n\n  didMove(didMove: ListDownlinkDidMove<V, VU>): this {\n    return this.observe({didMove});\n  }\n\n  willRemove(willRemove: ListDownlinkWillRemove<V, VU>): this {\n    return this.observe({willRemove});\n  }\n\n  didRemove(didRemove: ListDownlinkDidRemove<V, VU>): this {\n    return this.observe({didRemove});\n  }\n\n  willDrop(willDrop: ListDownlinkWillDrop<V, VU>): this {\n    return this.observe({willDrop});\n  }\n\n  didDrop(didDrop: ListDownlinkDidDrop<V, VU>): this {\n    return this.observe({didDrop});\n  }\n\n  willTake(willTake: ListDownlinkWillTake<V, VU>): this {\n    return this.observe({willTake});\n  }\n\n  didTake(didTake: ListDownlinkDidTake<V, VU>): this {\n    return this.observe({didTake});\n  }\n\n  willClear(willClear: ListDownlinkWillClear<V, VU>): this {\n    return this.observe({willClear});\n  }\n\n  didClear(didClear: ListDownlinkDidClear<V, VU>): this {\n    return this.observe({didClear});\n  }\n\n  /** @hidden */\n  listWillUpdate(index: number, newValue: Value): Value {\n    let newObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willUpdate !== void 0) {\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        const newResult = observer.willUpdate(index, newObject, this);\n        if (newResult !== void 0) {\n          newObject = newResult;\n          newValue = this.ownValueForm.mold(newObject);\n        }\n      }\n    }\n    return newValue;\n  }\n\n  /** @hidden */\n  listDidUpdate(index: number, newValue: Value, oldValue: Value): void {\n    let newObject: V | undefined;\n    let oldObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didUpdate !== void 0) {\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        if (oldObject === void 0) {\n          oldObject = oldValue.coerce(this.ownValueForm);\n        }\n        observer.didUpdate(index, newObject, oldObject, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listWillMove(fromIndex: number, toIndex: number, value: Value): void {\n    let object: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willMove !== void 0) {\n        if (object === void 0) {\n          object = value.coerce(this.ownValueForm);\n        }\n        observer.willMove(fromIndex, toIndex, object, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listDidMove(fromIndex: number, toIndex: number, value: Value): void {\n    let object: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didMove !== void 0) {\n        if (object === void 0) {\n          object = value.coerce(this.ownValueForm);\n        }\n        observer.didMove(fromIndex, toIndex, object, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listWillRemove(index: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willRemove !== void 0) {\n        observer.willRemove(index, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listDidRemove(index: number, oldValue: Value): void {\n    let oldObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didRemove !== void 0) {\n        if (oldObject === void 0) {\n          oldObject = oldValue.coerce(this.ownValueForm);\n        }\n        observer.didRemove(index, oldObject, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listWillDrop(lower: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willDrop !== void 0) {\n        observer.willDrop(lower, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listDidDrop(lower: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDrop !== void 0) {\n        observer.didDrop(lower, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listWillTake(upper: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willTake !== void 0) {\n        observer.willTake(upper, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listDidTake(upper: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didTake !== void 0) {\n        observer.didTake(upper, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listWillClear(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willClear !== void 0) {\n        observer.willClear(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  listDidClear(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didClear !== void 0) {\n        observer.didClear(this);\n      }\n    }\n  }\n\n  initialState(): STree<Value, Value> | null;\n  initialState(state0: STree<Value, Value> | null): ListDownlink<V, VU>;\n  initialState(state0?: STree<Value, Value> | null): STree<Value, Value> | null | ListDownlink<V, VU> {\n    if (state0 === void 0) {\n      return this.state0;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers,\n                       this.ownValueForm, state0);\n    }\n  }\n\n  /** @hidden */\n  protected didAliasModel(): void {\n    this.onLinkedResponse();\n    this.model!.state.forEach(function (value: Value, index: number) {\n      this.listDidUpdate(index, value, Value.absent());\n    }, this);\n    this.onSyncedResponse();\n  }\n\n  open(): this {\n    const laneUri = this.ownLaneUri;\n    if (laneUri.isEmpty()) {\n      throw new Error(\"no lane\");\n    }\n    let nodeUri = this.ownNodeUri;\n    if (nodeUri.isEmpty()) {\n      throw new Error(\"no node\");\n    }\n    let hostUri = this.ownHostUri;\n    if (hostUri.isEmpty()) {\n      hostUri = nodeUri.endpoint();\n      nodeUri = hostUri.unresolve(nodeUri);\n    }\n    let model = this.context.getDownlink(hostUri, nodeUri, laneUri);\n    if (model !== void 0) {\n      if (!(model instanceof ListDownlinkModel)) {\n        throw new Error(\"downlink type mismatch\");\n      }\n      model.addDownlink(this);\n      Object.defineProperty(this, \"model\", {\n        value: model as ListDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n      setTimeout(this.didAliasModel.bind(this));\n    } else {\n      model = new ListDownlinkModel(this.context, hostUri, nodeUri, laneUri, this.ownPrio,\n                                    this.ownRate, this.ownBody, this.state0 ?? void 0);\n      model.addDownlink(this);\n      this.context.openDownlink(model);\n      Object.defineProperty(this, \"model\", {\n        value: model as ListDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    if (this.owner !== null) {\n      this.owner.addDownlink(this);\n    }\n    return this;\n  }\n}\nexport interface ListDownlink<V, VU> {\n  hostUri(): Uri;\n  hostUri(hostUri: AnyUri): ListDownlink<V, VU>;\n\n  nodeUri(): Uri;\n  nodeUri(nodeUri: AnyUri): ListDownlink<V, VU>;\n\n  laneUri(): Uri;\n  laneUri(laneUri: AnyUri): ListDownlink<V, VU>;\n\n  prio(): number;\n  prio(prio: number): ListDownlink<V, VU>;\n\n  rate(): number;\n  rate(rate: number): ListDownlink<V, VU>;\n\n  body(): Value;\n  body(body: AnyValue): ListDownlink<V, VU>;\n\n  keepLinked(): boolean;\n  keepLinked(keepLinked: boolean): ListDownlink<V, VU>;\n\n  keepSynced(): boolean;\n  keepSynced(keepSynced: boolean): ListDownlink<V, VU>;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {Attr, Value, Record} from \"@swim/structure\";\nimport type {Uri} from \"@swim/uri\";\nimport type {EventMessage} from \"@swim/warp\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport {DownlinkModel} from \"./DownlinkModel\";\nimport type {DownlinkType} from \"./Downlink\";\nimport type {MapDownlink} from \"./MapDownlink\";\n\n/** @hidden */\nexport class MapDownlinkModel extends DownlinkModel {\n  constructor(context: DownlinkContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri,\n              prio?: number, rate?: number, body?: Value, state: BTree<Value, Value> = new BTree()) {\n    super(context, hostUri, nodeUri, laneUri, prio, rate, body);\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly views: ReadonlyArray<MapDownlink<unknown, unknown>>;\n\n  /** @hidden */\n  declare readonly state: BTree<Value, Value>;\n\n  get type(): DownlinkType {\n    return \"map\";\n  }\n\n  get size(): number {\n    return this.state.size;\n  }\n\n  isEmpty(): boolean {\n    return this.state.isEmpty();\n  }\n\n  has(key: Value): boolean {\n    return this.state.has(key);\n  }\n\n  get(key: Value): Value {\n    return this.state.get(key) ?? Value.absent();\n  }\n\n  getEntry(index: number): [Value, Value] | undefined {\n    return this.state.getEntry(index);\n  }\n\n  set(key: Value, newValue: Value): this {\n    newValue = this.mapWillUpdate(key, newValue);\n    const oldValue = this.state.get(key) ?? Value.absent();\n    this.state.set(key, newValue);\n    this.mapDidUpdate(key, newValue, oldValue);\n    const header = Record.create(1).slot(\"key\", key);\n    this.command(Attr.of(\"update\", header).concat(newValue));\n    return this;\n  }\n\n  delete(key: Value): boolean {\n    if (this.state.has(key)) {\n      this.mapWillRemove(key);\n      const oldValue = this.state.get(key) ?? Value.absent();\n      this.state.delete(key);\n      this.mapDidRemove(key, oldValue);\n      const header = Record.create(1).slot(\"key\", key);\n      this.command(Record.create(1).attr(\"remove\", header));\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  drop(lower: number): this {\n    this.mapWillDrop(lower);\n    this.state.drop(lower);\n    this.mapDidDrop(lower);\n    this.command(Record.create(1).attr(\"drop\", lower));\n    return this;\n  }\n\n  take(upper: number): this {\n    this.mapWillTake(upper);\n    this.state.take(upper);\n    this.mapDidTake(upper);\n    this.command(Record.create(1).attr(\"take\", upper));\n    return this;\n  }\n\n  clear(): void {\n    this.mapWillClear();\n    this.state.clear();\n    this.mapDidClear();\n    this.command(Record.create(1).attr(\"clear\"));\n  }\n\n  forEach<T>(callback: (key: Value, value: Value) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, key: Value, value: Value) => T | void,\n                          thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, key: Value, value: Value) => T | void,\n                          thisArg?: S): T | undefined {\n    return this.state.forEach(callback, thisArg);\n  }\n\n  keys(): Cursor<Value> {\n    return this.state.keys();\n  }\n\n  values(): Cursor<Value> {\n    return this.state.values();\n  }\n\n  entries(): Cursor<[Value, Value]> {\n    return this.state.entries();\n  }\n\n  snapshot(): BTree<Value, Value> {\n    return this.state.clone();\n  }\n\n  setState(state: BTree<Value, Value>): void {\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  onEventMessage(message: EventMessage, host: Host): void {\n    super.onEventMessage(message, host);\n    const event = message.body;\n    const tag = event.tag;\n    if (tag === \"update\") {\n      const header = event.head().toValue();\n      this.onUpdateEvent(header.get(\"key\"), event.body());\n    } else if (tag === \"remove\") {\n      const header = event.head().toValue();\n      this.onRemoveEvent(header.get(\"key\"));\n    } else if (tag === \"drop\") {\n      const header = event.head().toValue();\n      this.onDropEvent(header.numberValue(0));\n    } else if (tag === \"take\") {\n      const header = event.head().toValue();\n      this.onTakeEvent(header.numberValue(0));\n    } else if (tag === \"clear\") {\n      this.onClearEvent();\n    }\n  }\n\n  protected onUpdateEvent(key: Value, newValue: Value): void {\n    newValue = this.mapWillUpdate(key, newValue);\n    const oldValue = this.state.get(key) ?? Value.absent();\n    this.state.set(key, newValue);\n    this.mapDidUpdate(key, newValue, oldValue);\n  }\n\n  protected onRemoveEvent(key: Value): void {\n    this.mapWillRemove(key);\n    const oldValue = this.state.get(key) ?? Value.absent();\n    this.state.delete(key);\n    this.mapDidRemove(key, oldValue);\n  }\n\n  protected onDropEvent(lower: number): void {\n    this.mapWillDrop(lower);\n    this.state.drop(lower);\n    this.mapDidDrop(lower);\n  }\n\n  protected onTakeEvent(upper: number): void {\n    this.mapWillTake(upper);\n    this.state.take(upper);\n    this.mapDidTake(upper);\n  }\n\n  protected onClearEvent(): void {\n    this.mapWillClear();\n    this.state.clear();\n    this.mapDidClear();\n  }\n\n  protected mapWillUpdate(key: Value, newValue: Value): Value {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      newValue = views[i]!.mapWillUpdate(key, newValue);\n    }\n    return newValue;\n  }\n\n  protected mapDidUpdate(key: Value, newValue: Value, oldValue: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapDidUpdate(key, newValue, oldValue);\n    }\n  }\n\n  protected mapWillRemove(key: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapWillRemove(key);\n    }\n  }\n\n  protected mapDidRemove(key: Value, oldValue: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapDidRemove(key, oldValue);\n    }\n  }\n\n  protected mapWillDrop(lower: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapWillDrop(lower);\n    }\n  }\n\n  protected mapDidDrop(lower: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapDidDrop(lower);\n    }\n  }\n\n  protected mapWillTake(upper: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapWillTake(upper);\n    }\n  }\n\n  protected mapDidTake(upper: number): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapDidTake(upper);\n    }\n  }\n\n  protected mapWillClear(): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapWillClear();\n    }\n  }\n\n  protected mapDidClear(): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.mapDidClear();\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Cursor, Map, OrderedMap} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {AnyValue, Value, Form, ValueCursor, ValueEntryCursor} from \"@swim/structure\";\nimport {Inlet, Outlet, KeyEffect, MapInlet, MapOutlet, MapOutletCombinators, KeyOutlet} from \"@swim/streamlet\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkOwner} from \"./DownlinkOwner\";\nimport {DownlinkType, DownlinkObserver, DownlinkInit, DownlinkFlags, Downlink} from \"./Downlink\";\nimport {MapDownlinkModel} from \"./MapDownlinkModel\";\n\nexport type MapDownlinkWillUpdate<K, V, KU = never, VU = never> = (key: K, newValue: V, downlink: MapDownlink<K, V, KU, VU>) => V | void;\nexport type MapDownlinkDidUpdate<K, V, KU = never, VU = never> = (key: K, newValue: V, oldValue: V, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkWillRemove<K, V, KU = never, VU = never> = (key: K, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkDidRemove<K, V, KU = never, VU = never> = (key: K, oldValue: V, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkWillDrop<K, V, KU = never, VU = never> = (lower: number, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkDidDrop<K, V, KU = never, VU = never> = (lower: number, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkWillTake<K, V, KU = never, VU = never> = (upper: number, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkDidTake<K, V, KU = never, VU = never> = (upper: number, downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkWillClear<K, V, KU = never, VU = never> = (downlink: MapDownlink<K, V, KU, VU>) => void;\nexport type MapDownlinkDidClear<K, V, KU = never, VU = never> = (downlink: MapDownlink<K, V, KU, VU>) => void;\n\nexport interface MapDownlinkObserver<K, V, KU = never, VU = never> extends DownlinkObserver {\n  willUpdate?: MapDownlinkWillUpdate<K, V, KU, VU>;\n  didUpdate?: MapDownlinkDidUpdate<K, V, KU, VU>;\n  willRemove?: MapDownlinkWillRemove<K, V, KU, VU>;\n  didRemove?: MapDownlinkDidRemove<K, V, KU, VU>;\n  willDrop?: MapDownlinkWillDrop<K, V, KU, VU>;\n  didDrop?: MapDownlinkDidDrop<K, V, KU, VU>;\n  willTake?: MapDownlinkWillTake<K, V, KU, VU>;\n  didTake?: MapDownlinkDidTake<K, V, KU, VU>;\n  willClear?: MapDownlinkWillClear<K, V, KU, VU>;\n  didClear?: MapDownlinkDidClear<K, V, KU, VU>;\n}\n\nexport interface MapDownlinkInit<K, V, KU = never, VU = never> extends MapDownlinkObserver<K, V, KU, VU>, DownlinkInit {\n  keyForm?: Form<K, KU>;\n  valueForm?: Form<V, VU>;\n}\n\nexport class MapDownlink<K, V, KU = never, VU = never> extends Downlink implements OrderedMap<K, V>, MapInlet<K, V, Map<K, V>>, MapOutlet<K, V, MapDownlink<K, V, KU, VU>> {\n  /** @hidden */\n  constructor(context: DownlinkContext, owner: DownlinkOwner | null, init?: MapDownlinkInit<K, V, KU, VU>,\n              hostUri?: Uri, nodeUri?: Uri, laneUri?: Uri, prio?: number, rate?: number,\n              body?: Value, flags: number = DownlinkFlags.KeepLinkedSynced,\n              observers?: ReadonlyArray<MapDownlinkObserver<K, V, KU, VU>> | MapDownlinkObserver<K, V, KU, VU>,\n              keyForm?: Form<K, KU>, valueForm?: Form<V, VU>, state0: BTree<Value, Value> | null = null) {\n    super(context, owner, init, hostUri, nodeUri, laneUri, prio, rate, body, flags, observers);\n    if (init !== void 0) {\n      const observer = this.observers[this.observers.length - 1]!;\n      observer.willUpdate = init.willUpdate ?? observer.willUpdate;\n      observer.didUpdate = init.didUpdate ?? observer.didUpdate;\n      observer.willRemove = init.willRemove ?? observer.willRemove;\n      observer.didRemove = init.didRemove ?? observer.didRemove;\n      observer.willDrop = init.willDrop ?? observer.willDrop;\n      observer.didDrop = init.didDrop ?? observer.didDrop;\n      observer.willTake = init.willTake ?? observer.willTake;\n      observer.didTake = init.didTake ?? observer.didTake;\n      observer.willClear = init.willClear ?? observer.willClear;\n      observer.didClear = init.didClear ?? observer.didClear;\n      keyForm = init.keyForm !== void 0 ? init.keyForm : keyForm;\n      valueForm = init.valueForm !== void 0 ? init.valueForm : valueForm;\n    }\n    Object.defineProperty(this, \"ownKeyForm\", {\n      value: keyForm !== void 0 ? keyForm : Form.forValue() as unknown as Form<K, KU>,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"ownValueForm\", {\n      value: valueForm !== void 0 ? valueForm : Form.forValue() as unknown as Form<V, VU>,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"state0\", {\n      value: state0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"effects\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outlets\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly model: MapDownlinkModel | null;\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<MapDownlinkObserver<K, V, KU, VU>>;\n\n  /** @hidden */\n  declare readonly ownKeyForm: Form<K, KU>;\n\n  /** @hidden */\n  declare readonly ownValueForm: Form<V, VU>;\n\n  /** @hidden */\n  declare readonly state0: BTree<Value, Value> | null;\n\n  get type(): DownlinkType {\n    return \"map\";\n  }\n\n  protected copy<K, V, KU, VU>(context: DownlinkContext, owner: DownlinkOwner | null,\n                               hostUri: Uri, nodeUri: Uri, laneUri: Uri, prio: number, rate: number,\n                               body: Value, flags: number, observers: ReadonlyArray<MapDownlinkObserver<K, V, KU, VU>>,\n                               keyForm?: Form<K, KU>, valueForm?: Form<V, VU>, state0?: BTree<Value, Value> | null): MapDownlink<K, V, KU, VU> {\n    if (arguments.length === 10) {\n      state0 = this.state0;\n      keyForm = this.ownKeyForm as unknown as Form<K, KU>;\n      valueForm = this.ownValueForm as unknown as Form<V, VU>;\n    }\n    return new MapDownlink(context, owner, void 0, hostUri, nodeUri, laneUri,\n                           prio, rate, body, flags, observers, keyForm, valueForm, state0);\n  }\n\n  keyForm(): Form<K, KU>;\n  keyForm<K2, K2U = never>(keyForm: Form<K2, K2U>): MapDownlink<K2, V, K2U, VU>;\n  keyForm<K2, K2U = never>(keyForm?: Form<K2, K2U>): Form<K, KU> | MapDownlink<K2, V, K2U, VU> {\n    if (keyForm === void 0) {\n      return this.ownKeyForm;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers as any,\n                       keyForm, this.ownValueForm, this.state0);\n    }\n  }\n\n  valueForm(): Form<V, VU>;\n  valueForm<V2, V2U = never>(valueForm: Form<V2, V2U>): MapDownlink<K, V2, KU, V2U>;\n  valueForm<V2, V2U = never>(valueForm?: Form<V2, V2U>): Form<V, VU> | MapDownlink<K, V2, KU, V2U> {\n    if (valueForm === void 0) {\n      return this.ownValueForm;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers as any,\n                       this.ownKeyForm, valueForm, this.state0);\n    }\n  }\n\n  get size(): number {\n    return this.model!.size;\n  }\n\n  isEmpty(): boolean {\n    return this.model!.isEmpty();\n  }\n\n  has(key: K | KU): boolean {\n    const keyObject = this.ownKeyForm.mold(key);\n    return this.model!.has(keyObject);\n  }\n\n  get(): MapDownlink<K, V, KU, VU>;\n  get(key: K | KU): V;\n  get(key?: K | KU): MapDownlink<K, V, KU, VU> | V {\n    if (key === void 0) {\n      return this;\n    } else {\n      const keyObject = this.ownKeyForm.mold(key);\n      const value = this.model!.get(keyObject);\n      return value.coerce(this.ownValueForm);\n    }\n  }\n\n  getEntry(index: number): [K, V] | undefined {\n    const entry = this.model!.getEntry(index);\n    if (entry !== void 0) {\n      return [entry[0].coerce(this.ownKeyForm), entry[1].coerce(this.ownValueForm)];\n    }\n    return void 0;\n  }\n\n  firstKey(): K | undefined {\n    const key = this.model!.state.firstKey();\n    if (key !== void 0) {\n      const keyObject = this.ownKeyForm.cast(key);\n      if (keyObject !== void 0) {\n        return keyObject;\n      }\n    }\n    return this.ownKeyForm.unit;\n  }\n\n  firstValue(): V | undefined {\n    const value = this.model!.state.firstValue();\n    if (value !== void 0) {\n      const object = this.ownValueForm.cast(value);\n      if (object !== void 0) {\n        return object;\n      }\n    }\n    return this.ownValueForm.unit;\n  }\n\n  firstEntry(): [K, V] | undefined {\n    const entry = this.model!.state.firstEntry();\n    if (entry !== void 0) {\n      const keyObject: K = this.ownKeyForm.cast(entry[0])!;\n      const object: V = this.ownValueForm.cast(entry[1])!;\n      return [keyObject, object];\n    }\n    return void 0;\n  }\n\n  lastKey(): K | undefined {\n    const key = this.model!.state.lastKey();\n    if (key !== void 0) {\n      const keyObject = this.ownKeyForm.cast(key);\n      if (keyObject !== void 0) {\n        return keyObject;\n      }\n    }\n    return this.ownKeyForm.unit;\n  }\n\n  lastValue(): V | undefined {\n    const value = this.model!.state.lastValue();\n    if (value !== void 0) {\n      const object = this.ownValueForm.cast(value);\n      if (object !== void 0) {\n        return object;\n      }\n    }\n    return this.ownValueForm.unit;\n  }\n\n  lastEntry(): [K, V] | undefined {\n    const entry = this.model!.state.lastEntry();\n    if (entry !== void 0) {\n      const keyObject: K = this.ownKeyForm.cast(entry[0])!;\n      const object: V = this.ownValueForm.cast(entry[1])!;\n      return [keyObject, object];\n    }\n    return void 0;\n  }\n\n  nextKey(keyObject: K): K | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const nextKey = this.model!.state.nextKey(key);\n    if (nextKey !== void 0) {\n      const nextKeyObject = this.ownKeyForm.cast(nextKey);\n      if (nextKeyObject !== void 0) {\n        return nextKeyObject;\n      }\n    }\n    return this.ownKeyForm.unit;\n  }\n\n  nextValue(keyObject: K): V | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const nextValue = this.model!.state.nextValue(key);\n    if (nextValue !== void 0) {\n      const nextObject = this.ownValueForm.cast(nextValue);\n      if (nextObject !== void 0) {\n        return nextObject;\n      }\n    }\n    return this.ownValueForm.unit;\n  }\n\n  nextEntry(keyObject: K): [K, V] | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const entry = this.model!.state.nextEntry(key);\n    if (entry !== void 0) {\n      const keyObject: K = this.ownKeyForm.cast(entry[0])!;\n      const object: V = this.ownValueForm.cast(entry[1])!;\n      return [keyObject, object];\n    }\n    return void 0;\n  }\n\n  previousKey(keyObject: K): K | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const previousKey = this.model!.state.previousKey(key);\n    if (previousKey !== void 0) {\n      const previousKeyObject = this.ownKeyForm.cast(previousKey);\n      if (previousKeyObject !== void 0) {\n        return previousKeyObject;\n      }\n    }\n    return this.ownKeyForm.unit;\n  }\n\n  previousValue(keyObject: K): V | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const previousValue = this.model!.state.previousValue(key);\n    if (previousValue !== void 0) {\n      const previousObject = this.ownValueForm.cast(previousValue);\n      if (previousObject !== void 0) {\n        return previousObject;\n      }\n    }\n    return this.ownValueForm.unit;\n  }\n\n  previousEntry(keyObject: K): [K, V] | undefined {\n    const key = this.ownKeyForm.mold(keyObject);\n    const entry = this.model!.state.previousEntry(key);\n    if (entry !== void 0) {\n      const keyObject: K = this.ownKeyForm.cast(entry[0])!;\n      const object: V = this.ownValueForm.cast(entry[1])!;\n      return [keyObject, object];\n    }\n    return void 0;\n  }\n\n  set(key: K | KU, newValue: V | VU): this {\n    const keyObject = this.ownKeyForm.mold(key);\n    const newObject = this.ownValueForm.mold(newValue);\n    this.model!.set(keyObject, newObject);\n    return this;\n  }\n\n  delete(key: K | KU): boolean {\n    const keyObject = this.ownKeyForm.mold(key);\n    return this.model!.delete(keyObject);\n  }\n\n  drop(lower: number): this {\n    this.model!.drop(lower);\n    return this;\n  }\n\n  take(upper: number): this {\n    this.model!.take(upper);\n    return this;\n  }\n\n  clear(): void {\n    this.model!.clear();\n  }\n\n  forEach<T>(callback: (key: K, value: V) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, key: K, value: V) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, key: K, value: V) => T | void,\n                thisArg?: S): T | undefined {\n    if (this.ownKeyForm as unknown === Form.forValue() && this.ownValueForm as unknown === Form.forValue()) {\n      return this.model!.state.forEach(callback as any, thisArg);\n    } else {\n      return this.model!.state.forEach(function (key: Value, value: Value): T | void {\n        const keyObject = key.coerce(this.ownKeyForm);\n        const object = value.coerce(this.ownValueForm);\n        return callback.call(thisArg, keyObject, object);\n      }, this);\n    }\n  }\n\n  keys(): Cursor<K> {\n    const cursor = this.model!.keys();\n    if (this.ownKeyForm as unknown === Form.forValue()) {\n      return cursor as unknown as Cursor<K>;\n    } else {\n      return new ValueCursor(cursor, this.ownKeyForm);\n    }\n  }\n\n  values(): Cursor<V> {\n    const cursor = this.model!.values();\n    if (this.ownValueForm as unknown === Form.forValue()) {\n      return cursor as unknown as Cursor<V>;\n    } else {\n      return new ValueCursor(cursor, this.ownValueForm);\n    }\n  }\n\n  entries(): Cursor<[K, V]> {\n    const cursor = this.model!.entries();\n    if (this.ownKeyForm as unknown === Form.forValue() && this.ownValueForm as unknown === Form.forValue()) {\n      return cursor as unknown as Cursor<[K, V]>;\n    } else {\n      return new ValueEntryCursor(cursor, this.ownKeyForm, this.ownValueForm);\n    }\n  }\n\n  snapshot(): BTree<Value, Value> {\n    return this.model!.snapshot();\n  }\n\n  setState(state: BTree<Value, Value>): void {\n    this.model!.setState(state);\n  }\n\n  observe(observer: MapDownlinkObserver<K, V, KU, VU>): this {\n    return super.observe(observer);\n  }\n\n  willUpdate(willUpdate: MapDownlinkWillUpdate<K, V, KU, VU>): this {\n    return this.observe({willUpdate});\n  }\n\n  didUpdate(didUpdate: MapDownlinkDidUpdate<K, V, KU, VU>): this {\n    return this.observe({didUpdate});\n  }\n\n  willRemove(willRemove: MapDownlinkWillRemove<K, V, KU, VU>): this {\n    return this.observe({willRemove});\n  }\n\n  didRemove(didRemove: MapDownlinkDidRemove<K, V, KU, VU>): this {\n    return this.observe({didRemove});\n  }\n\n  willDrop(willDrop: MapDownlinkWillDrop<K, V, KU, VU>): this {\n    return this.observe({willDrop});\n  }\n\n  didDrop(didDrop: MapDownlinkDidDrop<K, V, KU, VU>): this {\n    return this.observe({didDrop});\n  }\n\n  willTake(willTake: MapDownlinkWillTake<K, V, KU, VU>): this {\n    return this.observe({willTake});\n  }\n\n  didTake(didTake: MapDownlinkDidTake<K, V, KU, VU>): this {\n    return this.observe({didTake});\n  }\n\n  willClear(willClear: MapDownlinkWillClear<K, V, KU, VU>): this {\n    return this.observe({willClear});\n  }\n\n  didClear(didClear: MapDownlinkDidClear<K, V, KU, VU>): this {\n    return this.observe({didClear});\n  }\n\n  /** @hidden */\n  mapWillUpdate(key: Value, newValue: Value): Value {\n    let keyObject: K | undefined;\n    let newObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willUpdate !== void 0) {\n        if (keyObject === void 0) {\n          keyObject = key.coerce(this.ownKeyForm);\n        }\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        const newResult = observer.willUpdate(keyObject, newObject, this);\n        if (newResult !== void 0) {\n          newObject = newResult;\n          newValue = this.ownValueForm.mold(newObject);\n        }\n      }\n    }\n    return newValue;\n  }\n\n  /** @hidden */\n  mapDidUpdate(key: Value, newValue: Value, oldValue: Value): void {\n    const keyObject = key.coerce(this.ownKeyForm);\n    let newObject: V | undefined;\n    let oldObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didUpdate !== void 0) {\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        if (oldObject === void 0) {\n          oldObject = oldValue.coerce(this.ownValueForm);\n        }\n        observer.didUpdate(keyObject, newObject, oldObject, this);\n      }\n    }\n    this.decohereInputKey(keyObject, KeyEffect.Update);\n    this.recohereInput(0); // TODO: debounce and track version\n  }\n\n  /** @hidden */\n  mapWillRemove(key: Value): void {\n    let keyObject: K | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willRemove !== void 0) {\n        if (keyObject === void 0) {\n          keyObject = key.coerce(this.ownKeyForm);\n        }\n        observer.willRemove(keyObject, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapDidRemove(key: Value, oldValue: Value): void {\n    const keyObject = key.coerce(this.ownKeyForm);\n    let oldObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didRemove !== void 0) {\n        if (oldObject === void 0) {\n          oldObject = oldValue.coerce(this.ownValueForm);\n        }\n        observer.didRemove(keyObject, oldObject, this);\n      }\n    }\n    this.decohereInputKey(keyObject, KeyEffect.Remove);\n    this.recohereInput(0); // TODO: debounce and track version\n  }\n\n  /** @hidden */\n  mapWillDrop(lower: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willDrop !== void 0) {\n        observer.willDrop(lower, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapDidDrop(lower: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDrop !== void 0) {\n        observer.didDrop(lower, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapWillTake(upper: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willTake !== void 0) {\n        observer.willTake(upper, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapDidTake(upper: number): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didTake !== void 0) {\n        observer.didTake(upper, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapWillClear(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willClear !== void 0) {\n        observer.willClear(this);\n      }\n    }\n  }\n\n  /** @hidden */\n  mapDidClear(): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didClear !== void 0) {\n        observer.didClear(this);\n      }\n    }\n  }\n\n  initialState(): BTree<Value, Value> | null;\n  initialState(state0: BTree<Value, Value> | null): MapDownlink<K, V, KU, VU>;\n  initialState(state0?: BTree<Value, Value> | null): BTree | null | MapDownlink<K, V, KU, VU> {\n    if (state0 === void 0) {\n      return this.state0;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers,\n                       this.ownKeyForm, this.ownValueForm, state0);\n    }\n  }\n\n  /** @hidden */\n  protected didAliasModel(): void {\n    this.onLinkedResponse();\n    this.model!.state.forEach(function (key: Value, value: Value): void {\n      this.mapDidUpdate(key, value, Value.absent());\n    }, this);\n    this.onSyncedResponse();\n  }\n\n  open(): this {\n    const laneUri = this.ownLaneUri;\n    if (laneUri.isEmpty()) {\n      throw new Error(\"no lane\");\n    }\n    let nodeUri = this.ownNodeUri;\n    if (nodeUri.isEmpty()) {\n      throw new Error(\"no node\");\n    }\n    let hostUri = this.ownHostUri;\n    if (hostUri.isEmpty()) {\n      hostUri = nodeUri.endpoint();\n      nodeUri = hostUri.unresolve(nodeUri);\n    }\n    let model = this.context.getDownlink(hostUri, nodeUri, laneUri);\n    if (model !== void 0) {\n      if (!(model instanceof MapDownlinkModel)) {\n        throw new Error(\"downlink type mismatch\");\n      }\n      model.addDownlink(this);\n      Object.defineProperty(this, \"model\", {\n        value: model as MapDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n      setTimeout(this.didAliasModel.bind(this));\n    } else {\n      model = new MapDownlinkModel(this.context, hostUri, nodeUri, laneUri, this.ownPrio,\n                                   this.ownRate, this.ownBody, this.state0 ?? void 0);\n      model.addDownlink(this);\n      this.context.openDownlink(model);\n      Object.defineProperty(this, \"model\", {\n        value: model as MapDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    if (this.owner !== null) {\n      this.owner.addDownlink(this);\n    }\n    return this;\n  }\n\n  keyIterator(): Cursor<K> {\n    return this.keys();\n  }\n\n  declare readonly input: MapOutlet<K, V, Map<K, V>> | null;\n\n  /** @hidden */\n  declare readonly effects: BTree<K, KeyEffect>;\n\n  /** @hidden */\n  declare readonly outlets: BTree<K, KeyOutlet<K, V>>;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<MapDownlink<K, V, KU, VU>>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: MapOutlet<K, V, Map<K, V>>): void {\n    if (!MapOutlet.is(newInput)) {\n      throw new TypeError(\"\" + newInput);\n    }\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  outlet(key: K): Outlet<V> {\n    const oldOutlets = this.outlets;\n    let outlet = oldOutlets.get(key);\n    if (outlet === void 0) {\n      outlet = new KeyOutlet<K, V>(this, key);\n      Object.defineProperty(this, \"outlets\", {\n        value: oldOutlets.updated(key, outlet),\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    return outlet;\n  }\n\n  outputIterator(): Cursor<Inlet<MapDownlink<K, V, KU, VU>>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<MapDownlink<K, V, KU, VU>>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<MapDownlink<K, V, KU, VU>>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, V>) {\n        keyOutlet.unbindOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutlets = this.outlets;\n    if (oldOutlets.isEmpty()) {\n      Object.defineProperty(this, \"outlets\", {\n        value: new BTree(),\n        enumerable: true,\n        configurable: true,\n      });\n      oldOutlets.forEach(function (key: K, keyOutlet: KeyOutlet<K, V>) {\n        keyOutlet.disconnectOutputs();\n      }, this);\n    }\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutputKey(key: K, effect: KeyEffect): void {\n    this.decohereKey(key, effect);\n  }\n\n  decohereInputKey(key: K, effect: KeyEffect): void {\n    this.decohereKey(key, effect);\n  }\n\n  decohereKey(key: K, effect: KeyEffect): void {\n    const oldEffects = this.effects;\n    if (oldEffects.get(key) !== effect) {\n      this.willDecohereKey(key, effect);\n      Object.defineProperty(this, \"effects\", {\n        value: oldEffects.updated(key, effect),\n        enumerable: true,\n        configurable: true,\n      });\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohereKey(key, effect);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        if (MapInlet.is(output)) {\n          output.decohereOutputKey(key, effect);\n        } else {\n          output.decohereOutput();\n        }\n      }\n      const outlet = this.outlets.get(key);\n      if (outlet !== void 0) {\n        outlet.decohereInput();\n      }\n      this.didDecohereKey(key, effect);\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.decohereOutput();\n      }\n      this.outlets.forEach(function (key: K, outlet: KeyOutlet<K, V>): void {\n        outlet.decohereInput();\n      }, this);\n      this.didDecohere();\n    }\n  }\n\n  recohereOutputKey(key: K, version: number): void {\n    this.recohereKey(key, version);\n  }\n\n  recohereInputKey(key: K, version: number): void {\n    this.recohereKey(key, version);\n  }\n\n  recohereKey(key: K, version: number): void {\n    if (this.version < 0) {\n      const oldEffects = this.effects;\n      const effect = oldEffects.get(key);\n      if (effect !== void 0) {\n        this.willRecohereKey(key, effect, version);\n        Object.defineProperty(this, \"effects\", {\n          value: oldEffects.removed(key),\n          enumerable: true,\n          configurable: true,\n        });\n        if (this.input !== null) {\n          this.input.recohereInputKey(key, version);\n        }\n        this.onRecohereKey(key, effect, version);\n        const outputs = this.outputs;\n        for (let i = 0, n = outputs.length; i < n; i += 1) {\n          const output = outputs[i];\n          if (MapInlet.is(output)) {\n            output.recohereOutputKey(key, version);\n          }\n        }\n        const outlet = this.outlets.get(key);\n        if (outlet !== void 0) {\n          outlet.recohereInput(version);\n        }\n        this.didRecohereKey(key, effect, version);\n      }\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      this.effects.forEach(function (key: K): void {\n        this.recohereKey(key, version);\n      }, this);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        const output = outputs[i]!;\n        output.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected onDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected didDecohereKey(key: K, effect: KeyEffect): void {\n    // hook\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected onRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    if (effect === KeyEffect.Update) {\n      const input = this.input;\n      if (input !== null) {\n        const value = input.get(key);\n        if (value !== void 0) {\n          this.set(key, value);\n        } else {\n          this.delete(key);\n        }\n      }\n    } else if (effect === KeyEffect.Remove) {\n      this.delete(key);\n    }\n  }\n\n  protected didRecohereKey(key: K, effect: KeyEffect, version: number): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohere(version: number): void {\n    // hook\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\nexport interface MapDownlink<K, V, KU, VU> {\n  hostUri(): Uri;\n  hostUri(hostUri: AnyUri): MapDownlink<K, V, KU, VU>;\n\n  nodeUri(): Uri;\n  nodeUri(nodeUri: AnyUri): MapDownlink<K, V, KU, VU>;\n\n  laneUri(): Uri;\n  laneUri(laneUri: AnyUri): MapDownlink<K, V, KU, VU>;\n\n  prio(): number;\n  prio(prio: number): MapDownlink<K, V, KU, VU>;\n\n  rate(): number;\n  rate(rate: number): MapDownlink<K, V, KU, VU>;\n\n  body(): Value;\n  body(body: AnyValue): MapDownlink<K, V, KU, VU>;\n\n  keepLinked(): boolean;\n  keepLinked(keepLinked: boolean): MapDownlink<K, V, KU, VU>;\n\n  keepSynced(): boolean;\n  keepSynced(keepSynced: boolean): MapDownlink<K, V, KU, VU>;\n}\nexport interface MapDownlink<K, V, KU, VU> extends MapOutletCombinators<K, V, MapDownlink<K, V, KU, VU>> {\n}\nMapOutletCombinators.define(MapDownlink.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport type {Uri} from \"@swim/uri\";\nimport type {EventMessage} from \"@swim/warp\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport {DownlinkModel} from \"./DownlinkModel\";\nimport type {DownlinkType} from \"./Downlink\";\nimport type {ValueDownlink} from \"./ValueDownlink\";\n\n/** @hidden */\nexport class ValueDownlinkModel extends DownlinkModel {\n  constructor(context: DownlinkContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri,\n              prio?: number, rate?: number, body?: Value, state: Value = Value.absent()) {\n    super(context, hostUri, nodeUri, laneUri, prio, rate, body);\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  declare readonly views: ReadonlyArray<ValueDownlink<unknown>>;\n\n  /** @hidden */\n  declare readonly state: Value;\n\n  get type(): DownlinkType {\n    return \"value\";\n  }\n\n  get(): Value {\n    return this.state;\n  }\n\n  set(newValue: Value): void {\n    newValue = this.valueWillSet(newValue);\n    const oldValue = this.state;\n    this.setState(newValue);\n    this.valueDidSet(newValue, oldValue);\n    this.command(newValue);\n  }\n\n  setState(state: Value): void {\n    Object.defineProperty(this, \"state\", {\n      value: state,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  onEventMessage(message: EventMessage, host: Host): void {\n    super.onEventMessage(message, host);\n    this.onSetEvent(message.body);\n  }\n\n  protected onSetEvent(newValue: Value): void {\n    newValue = this.valueWillSet(newValue);\n    const oldValue = this.state;\n    this.setState(newValue);\n    this.valueDidSet(newValue, oldValue);\n  }\n\n  protected valueWillSet(newValue: Value): Value {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      newValue = views[i]!.valueWillSet(newValue);\n    }\n    return newValue;\n  }\n\n  protected valueDidSet(newValue: Value, oldValue: Value): void {\n    const views = this.views;\n    for (let i = 0, n = views.length; i < n; i += 1) {\n      views[i]!.valueDidSet(newValue, oldValue);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays, Cursor} from \"@swim/util\";\nimport {AnyValue, Value, Form} from \"@swim/structure\";\nimport {Inlet, Outlet, OutletCombinators} from \"@swim/streamlet\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {DownlinkContext} from \"./DownlinkContext\";\nimport type {DownlinkOwner} from \"./DownlinkOwner\";\nimport {DownlinkType, DownlinkObserver, DownlinkInit, DownlinkFlags, Downlink} from \"./Downlink\";\nimport {ValueDownlinkModel} from \"./ValueDownlinkModel\";\n\nexport type ValueDownlinkWillSet<V, VU = never> = (newValue: V, downlink: ValueDownlink<V, VU>) => V | void;\nexport type VaueDownlinkDidSet<V, VU = never> = (newValue: V, oldValue: V, downlink: ValueDownlink<V, VU>) => void;\n\nexport interface ValueDownlinkObserver<V, VU = never> extends DownlinkObserver {\n  willSet?: ValueDownlinkWillSet<V, VU>;\n  didSet?: VaueDownlinkDidSet<V, VU>;\n}\n\nexport interface ValueDownlinkInit<V, VU = never> extends ValueDownlinkObserver<V, VU>, DownlinkInit {\n  valueForm?: Form<V, VU>;\n}\n\nexport class ValueDownlink<V, VU = never> extends Downlink implements Inlet<V>, Outlet<V> {\n  /** @hidden */\n  constructor(context: DownlinkContext, owner: DownlinkOwner | null, init?: ValueDownlinkInit<V, VU>,\n              hostUri?: Uri, nodeUri?: Uri, laneUri?: Uri, prio?: number, rate?: number,\n              body?: Value, flags: number = DownlinkFlags.KeepLinkedSynced,\n              observers?: ReadonlyArray<ValueDownlinkObserver<V, VU>> | ValueDownlinkObserver<V, VU>,\n              valueForm?: Form<V, VU>, state0: Value = Value.absent()) {\n    super(context, owner, init, hostUri, nodeUri, laneUri, prio, rate, body, flags, observers);\n    if (init !== void 0) {\n      const observer = this.observers[this.observers.length - 1]!;\n      observer.willSet = init.willSet ?? observer.willSet;\n      observer.didSet = init.didSet ?? observer.didSet;\n      valueForm = init.valueForm !== void 0 ? init.valueForm : valueForm;\n    }\n    Object.defineProperty(this, \"ownValueForm\", {\n      value: valueForm !== void 0 ? valueForm : Form.forValue() as unknown as Form<V, VU>,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"state0\", {\n      value: state0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"input\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"version\", {\n      value: -1,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly model: ValueDownlinkModel | null;\n\n  /** @hidden */\n  declare observers: ReadonlyArray<ValueDownlinkObserver<V, VU>>;\n\n  /** @hidden */\n  declare readonly ownValueForm: Form<V, VU>;\n\n  /** @hidden */\n  declare readonly state0: Value;\n\n  get type(): DownlinkType {\n    return \"value\";\n  }\n\n  protected copy<V, VU>(context: DownlinkContext, owner: DownlinkOwner | null,\n                        hostUri: Uri, nodeUri: Uri, laneUri: Uri, prio: number, rate: number,\n                        body: Value, flags: number, observers: ReadonlyArray<ValueDownlinkObserver<V, VU>>,\n                        valueForm?: Form<V, VU>, state0?: Value): ValueDownlink<V, VU> {\n    if (arguments.length === 10) {\n      state0 = this.state0;\n      valueForm = this.ownValueForm as unknown as Form<V, VU>;\n    }\n    return new ValueDownlink(context, owner, void 0, hostUri, nodeUri, laneUri,\n                             prio, rate, body, flags, observers, valueForm, state0);\n  }\n\n  valueForm(): Form<V, VU>;\n  valueForm<V2, V2U = never>(valueForm: Form<V2, V2U>): ValueDownlink<V2, V2U>;\n  valueForm<V2, V2U = never>(valueForm?: Form<V2, V2U>): Form<V, VU> | ValueDownlink<V2, V2U> {\n    if (valueForm === void 0) {\n      return this.ownValueForm;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers as any,\n                       valueForm, this.state0);\n    }\n  }\n\n  get(): V {\n    const value = this.model!.get();\n    const object = value.coerce(this.ownValueForm);\n    return object;\n  }\n\n  set(newObject: V | VU): void {\n    const newValue = this.ownValueForm.mold(newObject);\n    this.model!.set(newValue);\n  }\n\n  setState(state: Value): void {\n    this.model!.setState(state);\n  }\n\n  observe(observer: ValueDownlinkObserver<V, VU>): this {\n    return super.observe(observer);\n  }\n\n  willSet(willSet: ValueDownlinkWillSet<V, VU>): this {\n    return this.observe({willSet});\n  }\n\n  didSet(didSet: VaueDownlinkDidSet<V, VU>): this {\n    return this.observe({didSet});\n  }\n\n  /** @hidden */\n  valueWillSet(newValue: Value): Value {\n    let newObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.willSet !== void 0) {\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        const newResult = observer.willSet(newObject, this);\n        if (newResult !== void 0) {\n          newObject = newResult;\n          newValue = this.ownValueForm.mold(newObject);\n        }\n      }\n    }\n    return newValue;\n  }\n\n  /** @hidden */\n  valueDidSet(newValue: Value, oldValue: Value): void {\n    let newObject: V | undefined;\n    let oldObject: V | undefined;\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didSet !== void 0) {\n        if (newObject === void 0) {\n          newObject = newValue.coerce(this.ownValueForm);\n        }\n        if (oldObject === void 0) {\n          oldObject = oldValue.coerce(this.ownValueForm);\n        }\n        observer.didSet(newObject, oldObject, this);\n      }\n    }\n    this.decohere();\n    this.recohere(0); // TODO: debounce update; track version\n  }\n\n  initialState(): Value;\n  initialState(state0: Value): ValueDownlink<V, VU>;\n  initialState(state0?: Value): Value | ValueDownlink<V, VU> {\n    if (state0 === void 0) {\n      return this.state0;\n    } else {\n      return this.copy(this.context, this.owner, this.ownHostUri, this.ownNodeUri, this.ownLaneUri,\n                       this.ownPrio, this.ownRate, this.ownBody, this.flags, this.observers,\n                       this.ownValueForm, state0);\n    }\n  }\n\n  /** @hidden */\n  protected didAliasModel(): void {\n    this.onLinkedResponse();\n    this.valueDidSet(this.model!.get(), Value.absent());\n    this.onSyncedResponse();\n  }\n\n  open(): this {\n    const laneUri = this.ownLaneUri;\n    if (laneUri.isEmpty()) {\n      throw new Error(\"no lane\");\n    }\n    let nodeUri = this.ownNodeUri;\n    if (nodeUri.isEmpty()) {\n      throw new Error(\"no node\");\n    }\n    let hostUri = this.ownHostUri;\n    if (hostUri.isEmpty()) {\n      hostUri = nodeUri.endpoint();\n      nodeUri = hostUri.unresolve(nodeUri);\n    }\n    let model = this.context.getDownlink(hostUri, nodeUri, laneUri);\n    if (model !== void 0) {\n      if (!(model instanceof ValueDownlinkModel)) {\n        throw new Error(\"downlink type mismatch\");\n      }\n      model.addDownlink(this);\n      Object.defineProperty(this, \"model\", {\n        value: model as ValueDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n      setTimeout(this.didAliasModel.bind(this));\n    } else {\n      model = new ValueDownlinkModel(this.context, hostUri, nodeUri, laneUri, this.ownPrio,\n                                     this.ownRate, this.ownBody, this.state0);\n      model.addDownlink(this);\n      this.context.openDownlink(model);\n      Object.defineProperty(this, \"model\", {\n        value: model as ValueDownlinkModel,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    if (this.owner !== null) {\n      this.owner.addDownlink(this);\n    }\n    return this;\n  }\n\n  declare readonly input: Outlet<V> | null;\n\n  /** @hidden */\n  declare readonly outputs: ReadonlyArray<Inlet<V>>;\n\n  /** @hidden */\n  declare readonly version: number;\n\n  bindInput(newInput: Outlet<V> | null): void {\n    const oldInput = this.input;\n    if (oldInput !== newInput) {\n      if (oldInput !== null) {\n        oldInput.unbindOutput(this);\n      }\n      Object.defineProperty(this, \"input\", {\n        value: newInput,\n        enumerable: true,\n        configurable: true,\n      });\n      if (newInput !== null) {\n        newInput.bindOutput(this);\n      }\n    }\n  }\n\n  unbindInput(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  }\n\n  disconnectInputs(): void {\n    const oldInput = this.input;\n    if (oldInput !== null) {\n      oldInput.unbindOutput(this);\n      Object.defineProperty(this, \"input\", {\n        value: null,\n        enumerable: true,\n        configurable: true,\n      });\n      oldInput.disconnectInputs();\n    }\n  }\n\n  outputIterator(): Cursor<Inlet<V>> {\n    return Cursor.array(this.outputs);\n  }\n\n  bindOutput(output: Inlet<V>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.inserted(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutput(output: Inlet<V>): void {\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.removed(output, this.outputs),\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  unbindOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n    }\n  }\n\n  disconnectOutputs(): void {\n    const oldOutputs = this.outputs;\n    Object.defineProperty(this, \"outputs\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = oldOutputs.length; i < n; i += 1) {\n      const output = oldOutputs[i]!;\n      output.unbindInput();\n      output.disconnectOutputs();\n    }\n  }\n\n  decohereOutput(): void {\n    this.decohere();\n  }\n\n  decohereInput(): void {\n    this.decohere();\n  }\n\n  decohere(): void {\n    if (this.version >= 0) {\n      this.willDecohere();\n      Object.defineProperty(this, \"version\", {\n        value: -1,\n        enumerable: true,\n        configurable: true,\n      });\n      this.onDecohere();\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.decohereOutput();\n      }\n      this.didDecohere();\n    }\n  }\n\n  recohereOutput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohereInput(version: number): void {\n    this.recohere(version);\n  }\n\n  recohere(version: number): void {\n    if (this.version < 0) {\n      this.willRecohere(version);\n      Object.defineProperty(this, \"version\", {\n        value: version,\n        enumerable: true,\n        configurable: true,\n      });\n      if (this.input !== null) {\n        this.input.recohereInput(version);\n      }\n      this.onRecohere(version);\n      const outputs = this.outputs;\n      for (let i = 0, n = outputs.length; i < n; i += 1) {\n        outputs[i]!.recohereOutput(version);\n      }\n      this.didRecohere(version);\n    }\n  }\n\n  protected willDecohere(): void {\n    // hook\n  }\n\n  protected onDecohere(): void {\n    // hook\n  }\n\n  protected didDecohere(): void {\n    // hook\n  }\n\n  protected willRecohere(version: number): void {\n    // hook\n  }\n\n  protected onRecohere(version: number): void {\n    const input = this.input;\n    if (input !== null) {\n      const value = input.get();\n      if (value !== void 0) {\n        this.set(value);\n      }\n    }\n  }\n\n  protected didRecohere(version: number): void {\n    // hook\n  }\n}\nexport interface ValueDownlink<V, VU> {\n  hostUri(): Uri;\n  hostUri(hostUri: AnyUri): ValueDownlink<V, VU>;\n\n  nodeUri(): Uri;\n  nodeUri(nodeUri: AnyUri): ValueDownlink<V, VU>;\n\n  laneUri(): Uri;\n  laneUri(laneUri: AnyUri): ValueDownlink<V, VU>;\n\n  prio(): number;\n  prio(prio: number): ValueDownlink<V, VU>;\n\n  rate(): number;\n  rate(rate: number): ValueDownlink<V, VU>;\n\n  body(): Value;\n  body(body: AnyValue): ValueDownlink<V, VU>;\n\n  keepLinked(): boolean;\n  keepLinked(keepLinked: boolean): ValueDownlink<V, VU>;\n\n  keepSynced(): boolean;\n  keepSynced(keepSynced: boolean): ValueDownlink<V, VU>;\n}\nexport interface ValueDownlink<V, VU> extends OutletCombinators<V> {\n}\nOutletCombinators.define(ValueDownlink.prototype);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AbstractRecordOutlet} from \"@swim/dataflow\";\nimport type {Downlink} from \"./Downlink\";\n\nexport abstract class DownlinkRecord extends AbstractRecordOutlet {\n  abstract readonly downlink: Downlink;\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport {AnyItem, Item, AnyValue, Value, Record, AnyText, AnyNum, Num} from \"@swim/structure\";\nimport {DownlinkRecord} from \"./DownlinkRecord\";\nimport type {ListDownlink} from \"./ListDownlink\";\n\nexport class ListDownlinkRecord extends DownlinkRecord {\n  constructor(downlink: ListDownlink<Value, AnyValue>) {\n    super();\n    Object.defineProperty(this, \"downlink\", {\n      value: downlink,\n      enumerable: true,\n    });\n  }\n\n  declare readonly downlink: ListDownlink<Value, AnyValue>;\n\n  isEmpty(): boolean {\n    return this.downlink.isEmpty();\n  }\n\n  isArray(): boolean {\n    return true;\n  }\n\n  isObject(): boolean {\n    return this.downlink.isEmpty();\n  }\n\n  get length(): number {\n    return this.downlink.length;\n  }\n\n  get size(): number {\n    return this.downlink.length;\n  }\n\n  has(key: AnyValue): boolean {\n    return false;\n  }\n\n  get(): Record;\n  get(key: AnyValue): Value;\n  get(key?: AnyValue): Value {\n    if (key === void 0) {\n      return this;\n    } else {\n      return Value.absent();\n    }\n  }\n\n  getAttr(key: AnyText): Value {\n    return Value.absent();\n  }\n\n  getSlot(key: AnyValue): Value {\n    return Value.absent();\n  }\n\n  getItem(index: AnyNum): Item {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const n = this.downlink.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    index = Math.min(Math.max(0, index), n - 1);\n    if (index >= 0) {\n      return this.downlink.get(index);\n    }\n    return Item.absent();\n  }\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setItem(index: AnyNum, newItem: AnyItem): this {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const n = this.downlink.length;\n    if (index < 0) {\n      index = n + index;\n    }\n    index = Math.min(Math.max(0, index), n - 1);\n    if (index >= 0) {\n      this.downlink.set(index, Value.fromAny(newItem));\n    }\n    return this;\n  }\n\n  push(...newItems: AnyItem[]): number {\n    return this.downlink.push(...newItems);\n  }\n\n  splice(start: number, deleteCount?: number, ...newItems: AnyItem[]): Item[] {\n    return this.downlink.splice(start, deleteCount, ...newItems);\n  }\n\n  delete(key: AnyValue): Item {\n    return Item.absent();\n  }\n\n  clear(): void {\n    this.downlink.clear();\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    return this.downlink.forEach(callback, thisArg);\n  }\n\n  keyIterator(): Cursor<Value> {\n    return Cursor.empty();\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Cursor} from \"@swim/util\";\nimport {AnyItem, Item, Slot, AnyValue, Value, Record, AnyText, AnyNum, Num} from \"@swim/structure\";\nimport {KeyEffect} from \"@swim/streamlet\";\nimport {DownlinkRecord} from \"./DownlinkRecord\";\nimport type {MapDownlink} from \"./MapDownlink\";\n\nexport class MapDownlinkRecord extends DownlinkRecord {\n  constructor(downlink: MapDownlink<Value, Value, AnyValue, AnyValue>) {\n    super();\n    Object.defineProperty(this, \"downlink\", {\n      value: downlink,\n      enumerable: true,\n    });\n    downlink.observe(this);\n  }\n\n  declare readonly downlink: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  isEmpty(): boolean {\n    return this.downlink.isEmpty();\n  }\n\n  isArray(): boolean {\n    return this.downlink.isEmpty();\n  }\n\n  isObject(): boolean {\n    return true;\n  }\n\n  get length(): number {\n    return this.downlink.size;\n  }\n\n  has(key: AnyValue): boolean {\n    return this.downlink.has(key);\n  }\n\n  get(): Record;\n  get(key: AnyValue): Value;\n  get(key?: AnyValue): Value {\n    if (key === void 0) {\n      return this;\n    } else {\n      return this.downlink.get(key);\n    }\n  }\n\n  getAttr(key: AnyText): Value {\n    return Value.absent();\n  }\n\n  getSlot(key: AnyValue): Value {\n    return this.get(key);\n  }\n\n  getItem(index: AnyNum): Item {\n    if (index instanceof Num) {\n      index = index.value;\n    }\n    const n = this.downlink.size;\n    if (index < 0) {\n      index = n + index;\n    }\n    index = Math.min(Math.max(0, index), n - 1);\n    if (index >= 0) {\n      const entry = this.downlink.getEntry(index)!;\n      return Slot.of(entry[0], entry[1]);\n    }\n    return Item.absent();\n  }\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    this.downlink.set(key, newValue);\n    return this;\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    throw new Error(\"unsupported\");\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    return this.set(key, newValue);\n  }\n\n  setItem(index: number, newItem: AnyItem): this {\n    throw new Error(\"unsupported\");\n  }\n\n  push(...newItems: AnyItem[]): number {\n    throw new Error(\"unsupported\");\n  }\n\n  splice(start: number, deleteCount?: number, ...newItems: AnyItem[]): Item[] {\n    throw new Error(\"unsupported\");\n  }\n\n  delete(key: AnyValue): Item {\n    key = Value.fromAny(key);\n    const oldValue = this.downlink.get(key);\n    if (this.downlink.delete(key)) {\n      return Slot.of(key, oldValue);\n    }\n    return Item.absent();\n  }\n\n  clear(): void {\n    this.downlink.clear();\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    let index = 0;\n    return this.downlink.forEach(function (key: Value, value: Value): T | void {\n      const result = callback.call(thisArg, Slot.of(key, value), index);\n      index += 1;\n      return result;\n    });\n  }\n\n  keyIterator(): Cursor<Value> {\n    return this.downlink.keys();\n  }\n\n  didUpdate(key: Value, newValue: Value, oldValue: Value): void {\n    this.decohereInputKey(key, KeyEffect.Update);\n    this.recohereInput(0); // TODO: debounce\n  }\n\n  didRemove(key: Value, oldValue: Value): void {\n    this.decohereInputKey(key, KeyEffect.Remove);\n    this.recohereInput(0); // TODO: debounce\n  }\n\n  didDrop(lower: number): void {\n    // TODO\n  }\n\n  didTake(upper: number): void {\n    // TODO\n  }\n\n  didClear(): void {\n    // TODO\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Cursor} from \"@swim/util\";\nimport {AnyItem, Item, Field, AnyValue, Value, Record, AnyText, AnyNum} from \"@swim/structure\";\nimport {DownlinkRecord} from \"./DownlinkRecord\";\nimport type {ValueDownlink} from \"./ValueDownlink\";\n\nexport class ValueDownlinkRecord extends DownlinkRecord {\n  constructor(downlink: ValueDownlink<Value, AnyValue>) {\n    super();\n    Object.defineProperty(this, \"downlink\", {\n      value: downlink,\n      enumerable: true,\n    });\n    downlink.observe(this);\n  }\n\n  declare readonly downlink: ValueDownlink<Value, AnyValue>;\n\n  isEmpty(): boolean {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.isEmpty();\n    } else {\n      return !value.isDefined();\n    }\n  }\n\n  isArray(): boolean {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.isArray();\n    } else {\n      return true;\n    }\n  }\n\n  isObject(): boolean {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.isObject();\n    } else {\n      return !value.isDefined();\n    }\n  }\n\n  get length(): number {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.length;\n    } else if (value.isDefined()) {\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n\n  has(key: AnyValue): boolean {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.has(key);\n    } else {\n      return false;\n    }\n  }\n\n  get(): Record;\n  get(key: AnyValue): Value;\n  get(key?: AnyValue): Value {\n    if (key === void 0) {\n      return this;\n    } else {\n      const value = this.downlink.get();\n      if (value instanceof Record) {\n        return value.get(key);\n      } else {\n        return Value.absent();\n      }\n    }\n  }\n\n  getAttr(key: AnyText): Value {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.getAttr(key);\n    } else {\n      return Value.absent();\n    }\n  }\n\n  getSlot(key: AnyValue): Value {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.getSlot(key);\n    } else {\n      return Value.absent();\n    }\n  }\n\n  getField(key: AnyValue): Field | undefined {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.getField(key);\n    } else {\n      return void 0;\n    }\n  }\n\n  getItem(index: AnyNum): Item {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.getItem(index);\n    } else {\n      return value;\n    }\n  }\n\n  set(key: AnyValue, newValue: AnyValue): this {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      value.set(key, newValue);\n    } else {\n      throw new Error(\"unsupported\");\n    }\n    return this;\n  }\n\n  setAttr(key: AnyText, newValue: AnyValue): this {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      value.setAttr(key, newValue);\n    } else {\n      throw new Error(\"unsupported\");\n    }\n    return this;\n  }\n\n  setSlot(key: AnyValue, newValue: AnyValue): this {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      value.setSlot(key, newValue);\n    } else {\n      throw new Error(\"unsupported\");\n    }\n    return this;\n  }\n\n  setItem(index: number, newItem: AnyItem): this {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      value.setItem(index, newItem);\n    } else {\n      this.downlink.set(Item.fromAny(newItem).toValue());\n    }\n    return this;\n  }\n\n  push(...newItems: AnyItem[]): number {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.push(...newItems);\n    } else {\n      throw new Error(\"unsupported\");\n    }\n  }\n\n  splice(start: number, deleteCount?: number, ...newItems: AnyItem[]): Item[] {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.splice(start, deleteCount, ...newItems);\n    } else {\n      throw new Error(\"unsupported\");\n    }\n  }\n\n  delete(key: AnyValue): Item {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      return value.delete(key);\n    } else {\n      return Value.absent();\n    }\n  }\n\n  clear(): void {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      value.clear();\n    } else {\n      throw new Error(\"unsupported\");\n    }\n  }\n\n  forEach<T>(callback: (item: Item, index: number) => T | void): T | undefined;\n  forEach<T, S>(callback: (this: S, item: Item, index: number) => T | void,\n                thisArg: S): T | undefined;\n  forEach<T, S>(callback: (this: S | undefined, item: Item, index: number) => T | void,\n                thisArg?: S): T | undefined {\n    const value = this.downlink.get();\n    return value.forEach(callback, thisArg);\n  }\n\n  keyIterator(): Cursor<Value> {\n    const value = this.downlink.get();\n    if (value instanceof Record) {\n      throw new Error(); // TODO\n    } else {\n      return Cursor.empty();\n    }\n  }\n\n  didSet(newValue: Value, oldValue: Value): void {\n    this.decohereInput();\n    this.recohereInput(0); // TODO: debounce\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Field, Value, Record} from \"@swim/structure\";\nimport {RecordModel, Reifier} from \"@swim/dataflow\";\nimport {DownlinkStreamlet} from \"./DownlinkStreamlet\";\nimport type {WarpRef} from \"../WarpRef\";\n\n/** @hidden */\nexport class DownlinkReifier extends Reifier {\n  constructor(warp: WarpRef | null = null) {\n    super();\n    this.warp = warp;\n  }\n\n  warp: WarpRef | null;\n\n  reify(item: Item): Item {\n    if (item instanceof Field) {\n      return this.reifyField(item);\n    } else {\n      return this.reifyValue(item);\n    }\n  }\n\n  /** @hidden */\n  reifyField(field: Field): Field {\n    const oldValue = field.value;\n    const newValue = this.reifyValue(oldValue);\n    if (oldValue !== newValue) {\n      return field.updatedValue(newValue);\n    } else {\n      return field;\n    }\n  }\n\n  /** @hidden */\n  reifyValue(value: Value): Value {\n    if (value instanceof RecordModel) {\n      return this.reifyModel(value);\n    } else {\n      return value;\n    }\n  }\n\n  /** @hidden */\n  reifyModel(model: RecordModel): Record {\n    if (model.tag === \"link\") {\n      const streamlet = new DownlinkStreamlet(this.warp, model);\n      streamlet.compile();\n      return streamlet;\n    }\n    return model;\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Map} from \"@swim/util\";\nimport {Value, Form} from \"@swim/structure\";\nimport {Outlet, Inoutlet, StreamletScope, Out, Inout} from \"@swim/streamlet\";\nimport {AbstractRecordStreamlet, Reifier} from \"@swim/dataflow\";\nimport type {DownlinkType, Downlink} from \"./Downlink\";\nimport {ValueDownlink} from \"./ValueDownlink\";\nimport type {DownlinkRecord} from \"./DownlinkRecord\";\nimport {MapDownlinkRecord} from \"./MapDownlinkRecord\";\nimport {DownlinkReifier} from \"./DownlinkReifier\";\nimport type {WarpRef} from \"../WarpRef\";\nimport {client} from \"..\";\n\nexport class DownlinkStreamlet extends AbstractRecordStreamlet {\n  constructor(warp: WarpRef | null = null, scope?: StreamletScope<Value> | null) {\n    super(scope);\n    this.warp = warp;\n    this.downlink = null;\n    this.downlinkRecord = null;\n\n    this.inputHostUri = void 0;\n    this.inputNodeUri = void 0;\n    this.inputLaneUri = void 0;\n    this.inputPrio = void 0;\n    this.inputRate = void 0;\n    this.inputBody = void 0;\n    this.inputType = void 0;\n  }\n\n  warp: WarpRef | null;\n\n  downlink: Downlink | null;\n\n  /** @hidden */\n  downlinkRecord: DownlinkRecord | null;\n\n  /** @hidden */\n  inputHostUri: string | undefined;\n  /** @hidden */\n  inputNodeUri: string | undefined;\n  /** @hidden */\n  inputLaneUri: string | undefined;\n  /** @hidden */\n  inputPrio: number | undefined;\n  /** @hidden */\n  inputRate: number | undefined;\n  /** @hidden */\n  inputBody: Value | undefined;\n  /** @hidden */\n  inputType: DownlinkType | undefined;\n\n  @Inout\n  hostUri: Inoutlet<Value> = this.inoutlet();\n\n  @Inout\n  nodeUri: Inoutlet<Value> = this.inoutlet();\n\n  @Inout\n  laneUri: Inoutlet<Value> = this.inoutlet();\n\n  @Inout\n  prio: Inoutlet<Value> = this.inoutlet();\n\n  @Inout\n  rate: Inoutlet<Value> = this.inoutlet();\n\n  @Inout(\"body\")\n  bodyValue: Inoutlet<Value> = this.inoutlet();\n\n  @Inout\n  type: Inoutlet<Value> = this.inoutlet();\n\n  @Out\n  state: Outlet<Value | Map<Value, Value>> = this.outlet();\n\n  getOutput(outlet: Outlet<Value> | string): Value | undefined {\n    outlet = this.outlet(outlet)!;\n    if (outlet === this.state) {\n      if (this.downlink instanceof ValueDownlink) {\n        return this.downlink.get();\n      } else if (this.downlinkRecord !== null) {\n        return this.downlinkRecord;\n      }\n    }\n    return void 0;\n  }\n\n  protected onRecohere(version: number): void {\n    const hostUri = this.castInput(this.hostUri, Form.forString());\n    const nodeUri = this.castInput(this.nodeUri, Form.forString());\n    const laneUri = this.castInput(this.laneUri, Form.forString());\n    const prio = this.castInput(this.prio, Form.forNumber(), 0);\n    const rate = this.castInput(this.rate, Form.forNumber(), 0);\n    const body = this.getInput(this.bodyValue);\n    const type = this.castInput(this.type, Form.forString(), void 0) as DownlinkType | undefined;\n    if (hostUri !== this.inputHostUri || nodeUri !== this.inputNodeUri || laneUri !== this.inputLaneUri\n        || prio !== this.inputPrio || rate !== this.inputRate\n        || (body === void 0 ? this.inputBody !== void 0 : !body.equals(this.inputBody))\n        || type !== this.inputType) {\n      if (this.downlink !== null) {\n        this.downlink.close();\n        this.downlink = null;\n        this.downlinkRecord = null;\n      }\n      this.inputHostUri = hostUri;\n      this.inputNodeUri = nodeUri;\n      this.inputLaneUri = laneUri;\n      this.inputPrio = prio;\n      this.inputRate = rate;\n      this.inputBody = body;\n      this.inputType = type;\n      const warp = this.warp ?? client;\n      if (type === \"map\") {\n        let downlink = warp.downlinkMap();\n        if (hostUri !== void 0) {\n          downlink = downlink.hostUri(hostUri);\n        }\n        if (nodeUri !== void 0) {\n          downlink = downlink.nodeUri(nodeUri);\n        }\n        if (laneUri !== void 0) {\n          downlink = downlink.laneUri(laneUri);\n        }\n        if (prio !== 0) {\n          downlink = downlink.prio(prio);\n        }\n        if (rate !== 0) {\n          downlink = downlink.rate(rate);\n        }\n        if (body !== void 0) {\n          downlink = downlink.body(body);\n        }\n        downlink = downlink.open();\n        this.state = downlink;\n        this.downlink = downlink;\n        this.downlinkRecord = new MapDownlinkRecord(downlink);\n      } else if (type === \"value\") {\n        let downlink = warp.downlinkValue();\n        if (hostUri !== void 0) {\n          downlink = downlink.hostUri(hostUri);\n        }\n        if (nodeUri !== void 0) {\n          downlink = downlink.nodeUri(nodeUri);\n        }\n        if (laneUri !== void 0) {\n          downlink = downlink.laneUri(laneUri);\n        }\n        if (prio !== void 0) {\n          downlink = downlink.prio(prio);\n        }\n        if (rate !== void 0) {\n          downlink = downlink.rate(rate);\n        }\n        if (body !== void 0) {\n          downlink = downlink.body(body);\n        }\n        downlink = downlink.open();\n        this.state = downlink;\n        this.downlink = downlink;\n      }\n    }\n  }\n\n  private static _reifier?: DownlinkReifier;\n  static reifier(warp?: WarpRef): Reifier {\n    if (warp === void 0) {\n      if (DownlinkStreamlet._reifier === void 0) {\n        DownlinkStreamlet._reifier = new DownlinkReifier();\n      }\n      return DownlinkStreamlet._reifier;\n    } else {\n      return new DownlinkReifier(warp);\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays} from \"@swim/util\";\nimport {AnyValue, Value} from \"@swim/structure\";\nimport type {AnyUri, Uri} from \"@swim/uri\";\nimport type {Host} from \"../host/Host\";\nimport type {DownlinkOwner} from \"../downlink/DownlinkOwner\";\nimport type {Downlink} from \"../downlink/Downlink\";\nimport type {EventDownlinkInit, EventDownlink} from \"../downlink/EventDownlink\";\nimport type {ListDownlinkInit, ListDownlink} from \"../downlink/ListDownlink\";\nimport type {MapDownlinkInit, MapDownlink} from \"../downlink/MapDownlink\";\nimport type {ValueDownlinkInit, ValueDownlink} from \"../downlink/ValueDownlink\";\nimport type {RefContext} from \"./RefContext\";\nimport type {HostRef} from \"./HostRef\";\nimport type {NodeRef} from \"./NodeRef\";\nimport type {LaneRef} from \"./LaneRef\";\nimport type {WarpRef} from \"../WarpRef\";\nimport type {\n  WarpDidConnect,\n  WarpDidAuthenticate,\n  WarpDidDeauthenticate,\n  WarpDidDisconnect,\n  WarpDidFail,\n  WarpObserver,\n} from \"../WarpObserver\";\n\nexport abstract class BaseRef implements DownlinkOwner, WarpRef {\n  constructor(context: RefContext) {\n    Object.defineProperty(this, \"context\", {\n      value: context,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"host\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"downlinks\", {\n      value: [],\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"observers\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n  }\n\n  /** @hidden */\n  declare readonly context: RefContext;\n\n  /** @hidden */\n  declare readonly host: Host | null;\n\n  /** @hidden */\n  declare readonly downlinks: Downlink[];\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<WarpObserver>;\n\n  abstract readonly hostUri: Uri;\n\n  isConnected(): boolean {\n    const host = this.host;\n    return host !== null && host.isConnected();\n  }\n\n  isAuthenticated(): boolean {\n    const host = this.host;\n    return host !== null && host.isAuthenticated();\n  }\n\n  get session(): Value {\n    const host = this.host;\n    return host !== null ? host.session : Value.absent();\n  }\n\n  authenticate(credentials: AnyValue): void {\n    this.context.authenticate(this.hostUri, credentials);\n  }\n\n  abstract downlink(init?: EventDownlinkInit): EventDownlink;\n\n  abstract downlinkList(init?: ListDownlinkInit<Value, AnyValue>): ListDownlink<Value, AnyValue>;\n  abstract downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU>;\n\n  abstract downlinkMap(init?: MapDownlinkInit<Value, Value, AnyValue, AnyValue>): MapDownlink<Value, Value, AnyValue, AnyValue>;\n  abstract downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU>;\n\n  abstract downlinkValue(init?: ValueDownlinkInit<Value, AnyValue>): ValueDownlink<Value, AnyValue>;\n  abstract downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU>;\n\n  abstract hostRef(hostUri: AnyUri): HostRef;\n\n  abstract nodeRef(hostUri: AnyUri, nodeUri: AnyUri): NodeRef;\n  abstract nodeRef(nodeUri: AnyUri): NodeRef;\n\n  abstract laneRef(hostUri: AnyUri, nodeUri: AnyUri, laneUri: AnyUri): LaneRef;\n  abstract laneRef(nodeUri: AnyUri, laneUri: AnyUri): LaneRef;\n\n  /** @hidden */\n  addDownlink(downlink: Downlink): void {\n    const downlinks = this.downlinks;\n    if (downlinks.length === 0) {\n      this.open();\n    }\n    downlinks.push(downlink);\n  }\n\n  /** @hidden */\n  removeDownlink(downlink: Downlink): void {\n    const downlinks = this.downlinks;\n    const i = downlinks.indexOf(downlink);\n    if (i >= 0) {\n      downlinks.splice(i, 1);\n      if (downlinks.length === 0) {\n        this.close();\n      }\n    }\n  }\n\n  open(): void {\n    this.context.openRef(this);\n  }\n\n  close(): void {\n    this.context.closeRef(this);\n  }\n\n  /** @hidden */\n  closeUp(): void {\n    const downlinks = this.downlinks;\n    Object.defineProperty(this, \"downlinks\", {\n      value: [],\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0, n = downlinks.length; i < n; i += 1) {\n      downlinks[i]!.close();\n    }\n  }\n\n  observe(observer: WarpObserver): this {\n    Object.defineProperty(this, \"observers\", {\n      value: Arrays.inserted(observer, this.observers),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  unobserve(observer: unknown): this {\n    const oldObservers = this.observers;\n    const n = oldObservers.length;\n    for (let i = 0; i < n; i += 1) {\n      const oldObserver = oldObservers[i]! as {[key: string]: unknown};\n      let found = oldObserver === observer; // check object identity\n      if (!found) {\n        for (const key in oldObserver) { // check property identity\n          if (oldObserver[key] === observer) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (found) {\n        if (n > 1) {\n          const newObservers = new Array<WarpObserver>(n - 1);\n          for (let j = 0; j < i; j += 1) {\n            newObservers[j] = oldObservers[j]!;\n          }\n          for (let j = i + 1; j < n; j += 1) {\n            newObservers[j - 1] = oldObservers[j]!;\n          }\n          Object.defineProperty(this, \"observers\", {\n            value: newObservers,\n            enumerable: true,\n            configurable: true,\n          });\n        } else {\n          Object.defineProperty(this, \"observers\", {\n            value: Arrays.empty,\n            enumerable: true,\n            configurable: true,\n          });\n        }\n        break;\n      }\n    }\n    return this;\n  }\n\n  didConnect(didConnect: WarpDidConnect): this {\n    return this.observe({didConnect});\n  }\n\n  didAuthenticate(didAuthenticate: WarpDidAuthenticate): this {\n    return this.observe({didAuthenticate});\n  }\n\n  didDeauthenticate(didDeauthenticate: WarpDidDeauthenticate): this {\n    return this.observe({didDeauthenticate});\n  }\n\n  didDisconnect(didDisconnect: WarpDidDisconnect): this {\n    return this.observe({didDisconnect});\n  }\n\n  didFail(didFail: WarpDidFail): this {\n    return this.observe({didFail});\n  }\n\n  /** @hidden */\n  hostDidConnect(host: Host): void {\n    Object.defineProperty(this, \"host\", {\n      value: host,\n      enumerable: true,\n      configurable: true,\n    });\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didConnect !== void 0) {\n        observer.didConnect(host, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidAuthenticate(body: Value, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didAuthenticate !== void 0) {\n        observer.didAuthenticate(body, host, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidDeauthenticate(body: Value, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDeauthenticate !== void 0) {\n        observer.didDeauthenticate(body, host, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidDisconnect(host: Host): void {\n    Object.defineProperty(this, \"host\", {\n      value: null,\n      enumerable: true,\n      configurable: true,\n    });\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDisconnect !== void 0) {\n        observer.didDisconnect(host, this);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidFail(error: unknown, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didFail !== void 0) {\n        observer.didFail(error, host, this);\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Value, AnyValue} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {EventDownlinkInit, EventDownlink} from \"../downlink/EventDownlink\";\nimport {ListDownlinkInit, ListDownlink} from \"../downlink/ListDownlink\";\nimport {MapDownlinkInit, MapDownlink} from \"../downlink/MapDownlink\";\nimport {ValueDownlinkInit, ValueDownlink} from \"../downlink/ValueDownlink\";\nimport type {RefContext} from \"./RefContext\";\nimport {BaseRef} from \"./BaseRef\";\nimport {HostRef} from \"./HostRef\";\nimport {NodeRef} from \"./NodeRef\";\n\nexport class LaneRef extends BaseRef {\n  constructor(context: RefContext, hostUri: Uri, nodeUri: Uri, laneUri: Uri) {\n    super(context);\n    Object.defineProperty(this, \"hostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"nodeUri\", {\n      value: nodeUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"laneUri\", {\n      value: laneUri,\n      enumerable: true,\n    });\n  }\n\n  declare readonly hostUri: Uri;\n\n  declare readonly nodeUri: Uri;\n\n  declare readonly laneUri: Uri;\n\n  hostRef(hostUri: AnyUri): HostRef {\n    hostUri = Uri.fromAny(hostUri);\n    return new HostRef(this.context, hostUri as Uri);\n  }\n\n  nodeRef(nodeUri: AnyUri): NodeRef {\n    nodeUri = Uri.fromAny(nodeUri);\n    return new NodeRef(this.context, this.hostUri, nodeUri as Uri);\n  }\n\n  laneRef(laneUri: AnyUri): LaneRef {\n    laneUri = Uri.fromAny(laneUri);\n    return new LaneRef(this.context, this.hostUri, this.nodeUri, laneUri as Uri);\n  }\n\n  downlink(init?: EventDownlinkInit): EventDownlink {\n    return new EventDownlink(this.context, this, init, this.hostUri, this.nodeUri, this.laneUri);\n  }\n\n  downlinkList(init?: ListDownlinkInit<Value, AnyValue>): ListDownlink<Value, AnyValue>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU> {\n    return new ListDownlink(this.context, this, init, this.hostUri, this.nodeUri, this.laneUri);\n  }\n\n  downlinkMap(init?: MapDownlinkInit<Value, Value, AnyValue, AnyValue>): MapDownlink<Value, Value, AnyValue, AnyValue>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU> {\n    return new MapDownlink(this.context, this, init, this.hostUri, this.nodeUri, this.laneUri);\n  }\n\n  downlinkValue(init?: ValueDownlinkInit<Value, AnyValue>): ValueDownlink<Value, AnyValue>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU> {\n    return new ValueDownlink(this.context, this, init, this.hostUri, this.nodeUri, this.laneUri);\n  }\n\n  command(body: AnyValue): void {\n    this.context.command(this.hostUri, this.nodeUri, this.laneUri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Value, AnyValue} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {EventDownlinkInit, EventDownlink} from \"../downlink/EventDownlink\";\nimport {ListDownlinkInit, ListDownlink} from \"../downlink/ListDownlink\";\nimport {MapDownlinkInit, MapDownlink} from \"../downlink/MapDownlink\";\nimport {ValueDownlinkInit, ValueDownlink} from \"../downlink/ValueDownlink\";\nimport type {RefContext} from \"./RefContext\";\nimport {BaseRef} from \"./BaseRef\";\nimport {HostRef} from \"./HostRef\";\nimport {LaneRef} from \"./LaneRef\";\n\nexport class NodeRef extends BaseRef {\n  constructor(context: RefContext, hostUri: Uri, nodeUri: Uri) {\n    super(context);\n    Object.defineProperty(this, \"hostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n    Object.defineProperty(this, \"nodeUri\", {\n      value: nodeUri,\n      enumerable: true,\n    });\n  }\n\n  declare readonly hostUri: Uri;\n\n  declare readonly nodeUri: Uri;\n\n  hostRef(hostUri: AnyUri): HostRef {\n    hostUri = Uri.fromAny(hostUri);\n    return new HostRef(this.context, hostUri as Uri);\n  }\n\n  nodeRef(nodeUri: AnyUri): NodeRef {\n    nodeUri = Uri.fromAny(nodeUri);\n    return new NodeRef(this.context, this.hostUri, nodeUri as Uri);\n  }\n\n  laneRef(laneUri: AnyUri): LaneRef {\n    laneUri = Uri.fromAny(laneUri);\n    return new LaneRef(this.context, this.hostUri, this.nodeUri, laneUri as Uri);\n  }\n\n  downlink(init?: EventDownlinkInit): EventDownlink {\n    return new EventDownlink(this.context, this, init, this.hostUri, this.nodeUri);\n  }\n\n  downlinkList(init?: ListDownlinkInit<Value, AnyValue>): ListDownlink<Value, AnyValue>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU> {\n    return new ListDownlink(this.context, this, init, this.hostUri, this.nodeUri);\n  }\n\n  downlinkMap(init?: MapDownlinkInit<Value, Value, AnyValue, AnyValue>): MapDownlink<Value, Value, AnyValue, AnyValue>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU> {\n    return new MapDownlink(this.context, this, init, this.hostUri, this.nodeUri);\n  }\n\n  downlinkValue(init?: ValueDownlinkInit<Value, AnyValue>): ValueDownlink<Value, AnyValue>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU> {\n    return new ValueDownlink(this.context, this, init, this.hostUri, this.nodeUri);\n  }\n\n  command(laneUri: AnyUri, body: AnyValue): void {\n    this.context.command(this.hostUri, this.nodeUri, laneUri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {Value, AnyValue} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport {EventDownlinkInit, EventDownlink} from \"../downlink/EventDownlink\";\nimport {ListDownlinkInit, ListDownlink} from \"../downlink/ListDownlink\";\nimport {MapDownlinkInit, MapDownlink} from \"../downlink/MapDownlink\";\nimport {ValueDownlinkInit, ValueDownlink} from \"../downlink/ValueDownlink\";\nimport type {RefContext} from \"./RefContext\";\nimport {BaseRef} from \"./BaseRef\";\nimport {NodeRef} from \"./NodeRef\";\nimport {LaneRef} from \"./LaneRef\";\n\nexport class HostRef extends BaseRef {\n  constructor(context: RefContext, hostUri: Uri) {\n    super(context);\n    Object.defineProperty(this, \"hostUri\", {\n      value: hostUri,\n      enumerable: true,\n    });\n  }\n\n  declare readonly hostUri: Uri;\n\n  hostRef(hostUri: AnyUri): HostRef {\n    hostUri = Uri.fromAny(hostUri);\n    return new HostRef(this.context, hostUri as Uri);\n  }\n\n  nodeRef(nodeUri: AnyUri): NodeRef {\n    nodeUri = Uri.fromAny(nodeUri);\n    return new NodeRef(this.context, this.hostUri, nodeUri as Uri);\n  }\n\n  laneRef(nodeUri: AnyUri, laneUri: AnyUri): LaneRef {\n    nodeUri = Uri.fromAny(nodeUri);\n    laneUri = Uri.fromAny(laneUri);\n    return new LaneRef(this.context, this.hostUri, nodeUri as Uri, laneUri as Uri);\n  }\n\n  downlink(init?: EventDownlinkInit): EventDownlink {\n    return new EventDownlink(this.context, this, init, this.hostUri);\n  }\n\n  downlinkList(init?: ListDownlinkInit<Value, AnyValue>): ListDownlink<Value, AnyValue>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU> {\n    return new ListDownlink(this.context, this, init, this.hostUri);\n  }\n\n  downlinkMap(init?: MapDownlinkInit<Value, Value, AnyValue, AnyValue>): MapDownlink<Value, Value, AnyValue, AnyValue>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU> {\n    return new MapDownlink(this.context, this, init, this.hostUri);\n  }\n\n  downlinkValue(init?: ValueDownlinkInit<Value, AnyValue>): ValueDownlink<Value, AnyValue>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU> {\n    return new ValueDownlink(this.context, this, init, this.hostUri);\n  }\n\n  command(nodeUri: AnyUri, laneUri: AnyUri, body: AnyValue): void {\n    this.context.command(this.hostUri, nodeUri, laneUri, body);\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Arrays} from \"@swim/util\";\nimport {BTree} from \"@swim/collections\";\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {AnyUri, Uri} from \"@swim/uri\";\nimport type {HostContext} from \"./host/HostContext\";\nimport type {HostOptions, Host} from \"./host/Host\";\nimport {WebSocketHost} from \"./host/WebSocketHost\";\nimport type {DownlinkModel} from \"./downlink/DownlinkModel\";\nimport {EventDownlinkInit, EventDownlink} from \"./downlink/EventDownlink\";\nimport {ListDownlinkInit, ListDownlink} from \"./downlink/ListDownlink\";\nimport {MapDownlinkInit, MapDownlink} from \"./downlink/MapDownlink\";\nimport {ValueDownlinkInit, ValueDownlink} from \"./downlink/ValueDownlink\";\nimport type {WarpRef} from \"./WarpRef\";\nimport type {\n  WarpDidConnect,\n  WarpDidAuthenticate,\n  WarpDidDeauthenticate,\n  WarpDidDisconnect,\n  WarpDidFail,\n  WarpObserver,\n} from \"./WarpObserver\";\nimport type {RefContext} from \"./ref/RefContext\";\nimport type {BaseRef} from \"./ref/BaseRef\";\nimport {HostRef} from \"./ref/HostRef\";\nimport {NodeRef} from \"./ref/NodeRef\";\nimport {LaneRef} from \"./ref/LaneRef\";\n\nexport interface WarpClientOptions extends HostOptions {\n  keepOnline?: boolean;\n}\n\nexport class WarpClient implements HostContext, RefContext, WarpRef {\n  constructor(options: WarpClientOptions = {}) {\n    if (options.keepOnline === void 0) {\n      options.keepOnline = true;\n    }\n    Object.defineProperty(this, \"options\", {\n      value: options,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"hosts\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"downlinks\", {\n      value: new BTree(),\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"downlinkCount\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"refs\", {\n      value: [],\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"online\", {\n      value: true,\n      enumerable: true,\n      configurable: true,\n    });\n    Object.defineProperty(this, \"observers\", {\n      value: Arrays.empty,\n      enumerable: true,\n      configurable: true,\n    });\n\n    this.onOnline = this.onOnline.bind(this);\n    this.onOffline = this.onOffline.bind(this);\n    this.watchOnline(!!options.keepOnline);\n  }\n\n  /** @hidden */\n  declare readonly options: WarpClientOptions;\n\n  /** @hidden */\n  declare readonly hosts: BTree<Uri, Host>;\n\n  /** @hidden */\n  declare readonly downlinks: BTree<Uri, BTree<Uri, BTree<Uri, DownlinkModel>>>;\n\n  /** @hidden */\n  declare readonly downlinkCount: number;\n\n  /** @hidden */\n  declare readonly refs: BaseRef[];\n\n  /** @hidden */\n  declare readonly online: boolean;\n\n  /** @hidden */\n  declare readonly observers: ReadonlyArray<WarpObserver>;\n\n  isOnline(): boolean;\n  isOnline(online: boolean): this;\n  isOnline(online?: boolean): boolean | this {\n    if (online === void 0) {\n      return this.online;\n    } else {\n      if (this.online !== online) {\n        Object.defineProperty(this, \"online\", {\n          value: online,\n          enumerable: true,\n          configurable: true,\n        });\n        if (online) {\n          this.hosts.forEach(function (hostUri: Uri, host: Host): void {\n            host.open();\n          }, this);\n        }\n      }\n      return this;\n    }\n  }\n\n  keepOnline(): boolean;\n  keepOnline(keepOnline: boolean): this;\n  keepOnline(keepOnline?: boolean): boolean | this {\n    if (keepOnline === void 0) {\n      return !!this.options.keepOnline;\n    } else {\n      if (this.options.keepOnline !== keepOnline) {\n        this.options.keepOnline = keepOnline;\n        this.watchOnline(keepOnline);\n      }\n      return this;\n    }\n  }\n\n  protected watchOnline(keepOnline: boolean): void {\n    if (typeof window === \"object\") {\n      if (keepOnline) {\n        window.addEventListener(\"online\", this.onOnline);\n        window.addEventListener(\"offline\", this.onOffline);\n      } else {\n        window.removeEventListener(\"online\", this.onOnline);\n        window.removeEventListener(\"offline\", this.onOffline);\n      }\n    }\n  }\n\n  protected onOnline(event: Event): void {\n    this.isOnline(true);\n  }\n\n  protected onOffline(event: Event): void {\n    this.isOnline(false);\n  }\n\n  /** @hidden */\n  getHost(hostUri: AnyUri): Host | undefined {\n    hostUri = Uri.fromAny(hostUri);\n    return this.hosts.get(hostUri as Uri);\n  }\n\n  /** @hidden */\n  openHost(hostUri: AnyUri): Host {\n    hostUri = Uri.fromAny(hostUri);\n    let host = this.hosts.get(hostUri as Uri);\n    if (host === void 0) {\n      host = new WebSocketHost(this, hostUri as Uri, this.options);\n      this.hosts.set(hostUri as Uri, host);\n    }\n    return host;\n  }\n\n  /** @hidden */\n  closeHost(host: Host): void {\n    if (this.hosts.get(host.hostUri) !== void 0) {\n      this.hosts.delete(host.hostUri);\n      host.closeUp();\n    }\n  }\n\n  /** @hidden */\n  getDownlink(hostUri: Uri, nodeUri: Uri, laneUri: Uri): DownlinkModel | undefined {\n    const hostDownlinks = this.downlinks.get(hostUri);\n    if (hostDownlinks !== void 0) {\n      const nodeDownlinks = hostDownlinks.get(nodeUri);\n      if (nodeDownlinks !== void 0) {\n        return nodeDownlinks.get(laneUri);\n      }\n    }\n    return void 0;\n  }\n\n  /** @hidden */\n  openDownlink(downlink: DownlinkModel): void {\n    const hostUri = downlink.hostUri;\n    const nodeUri = downlink.nodeUri;\n    const laneUri = downlink.laneUri;\n    let hostDownlinks = this.downlinks.get(hostUri);\n    if (hostDownlinks === void 0) {\n      hostDownlinks = new BTree();\n      this.downlinks.set(hostUri, hostDownlinks);\n    }\n    let nodeDownlinks = hostDownlinks.get(nodeUri);\n    if (nodeDownlinks === void 0) {\n      nodeDownlinks = new BTree();\n      hostDownlinks.set(nodeUri, nodeDownlinks);\n    }\n    if (nodeDownlinks.has(laneUri)) {\n      throw new Error(\"duplicate downlink\");\n    }\n    nodeDownlinks.set(laneUri, downlink);\n    Object.defineProperty(this, \"downlinkCount\", {\n      value: this.downlinkCount + 1,\n      enumerable: true,\n      configurable: true,\n    });\n    const host = this.openHost(hostUri);\n    host.openDownlink(downlink);\n  }\n\n  /** @hidden */\n  unlinkDownlink(downlink: DownlinkModel): void {\n    const hostUri = downlink.hostUri;\n    const host = this.getHost(hostUri);\n    if (host !== void 0) {\n      host.unlinkDownlink(downlink);\n    }\n  }\n\n  /** @hidden */\n  closeDownlink(downlink: DownlinkModel): void {\n    const hostUri = downlink.hostUri;\n    const nodeUri = downlink.nodeUri;\n    const laneUri = downlink.laneUri;\n    const hostDownlinks = this.downlinks.get(hostUri);\n    if (hostDownlinks !== void 0) {\n      const nodeDownlinks = hostDownlinks.get(nodeUri);\n      if (nodeDownlinks !== void 0) {\n        if (nodeDownlinks.get(laneUri)) {\n          Object.defineProperty(this, \"downlinkCount\", {\n            value: this.downlinkCount - 1,\n            enumerable: true,\n            configurable: true,\n          });\n          nodeDownlinks.delete(laneUri);\n          if (nodeDownlinks.isEmpty()) {\n            hostDownlinks.delete(nodeUri);\n            if (hostDownlinks.isEmpty()) {\n              this.downlinks.delete(hostUri);\n            }\n          }\n          const host = this.getHost(hostUri);\n          if (host !== void 0) {\n            host.closeDownlink(downlink);\n          }\n        }\n      }\n    }\n  }\n\n  downlink(init?: EventDownlinkInit): EventDownlink {\n    return new EventDownlink(this, null, init);\n  }\n\n  downlinkList(init?: ListDownlinkInit<Value, AnyValue>): ListDownlink<Value, AnyValue>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU>;\n  downlinkList<V extends VU, VU = never>(init?: ListDownlinkInit<V, VU>): ListDownlink<V, VU> {\n    return new ListDownlink(this, null, init);\n  }\n\n  downlinkMap(init?: MapDownlinkInit<Value, Value, AnyValue, AnyValue>): MapDownlink<Value, Value, AnyValue, AnyValue>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU>;\n  downlinkMap<K extends KU, V extends VU, KU = never, VU = never>(init?: MapDownlinkInit<K, V, KU, VU>): MapDownlink<K, V, KU, VU> {\n    return new MapDownlink(this, null, init);\n  }\n\n  downlinkValue(init?: ValueDownlinkInit<Value, AnyValue>): ValueDownlink<Value, AnyValue>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU>;\n  downlinkValue<V extends VU, VU = never>(init?: ValueDownlinkInit<V, VU>): ValueDownlink<V, VU> {\n    return new ValueDownlink(this, null, init);\n  }\n\n  /** @hidden */\n  openRef(ref: BaseRef): void {\n    this.refs.push(ref);\n  }\n\n  /** @hidden */\n  closeRef(ref: BaseRef): void {\n    const refs = this.refs;\n    const index = refs.indexOf(ref);\n    if (index >= 0) {\n      refs.splice(index, 1);\n      ref.closeUp();\n    }\n  }\n\n  hostRef(hostUri: AnyUri): HostRef {\n    hostUri = Uri.fromAny(hostUri);\n    return new HostRef(this, hostUri as Uri);\n  }\n\n  nodeRef(hostUri: AnyUri, nodeUri: AnyUri): NodeRef;\n  nodeRef(nodeUri: AnyUri): NodeRef;\n  nodeRef(hostUri: AnyUri, nodeUri?: AnyUri): NodeRef {\n    hostUri = Uri.fromAny(hostUri);\n    if (nodeUri === void 0) {\n      nodeUri = hostUri;\n      hostUri = (nodeUri as Uri).endpoint();\n      nodeUri = (hostUri as Uri).unresolve(nodeUri);\n    } else {\n      nodeUri = Uri.fromAny(nodeUri);\n    }\n    return new NodeRef(this, hostUri as Uri, nodeUri as Uri);\n  }\n\n  laneRef(hostUri: AnyUri, nodeUri: AnyUri, laneUri: AnyUri): LaneRef;\n  laneRef(nodeUri: AnyUri, laneUri: AnyUri): LaneRef;\n  laneRef(hostUri: AnyUri, nodeUri: AnyUri, laneUri?: AnyUri): LaneRef {\n    hostUri = Uri.fromAny(hostUri);\n    nodeUri = Uri.fromAny(nodeUri);\n    if (laneUri === void 0) {\n      laneUri = nodeUri;\n      nodeUri = hostUri;\n      hostUri = (nodeUri as Uri).endpoint();\n      nodeUri = (hostUri as Uri).unresolve(nodeUri);\n    } else {\n      laneUri = Uri.fromAny(laneUri);\n    }\n    return new LaneRef(this, hostUri as Uri, nodeUri as Uri, laneUri as Uri);\n  }\n\n  authenticate(hostUri: AnyUri, credentials: AnyValue): void {\n    hostUri = Uri.fromAny(hostUri);\n    credentials = Value.fromAny(credentials);\n    const host = this.openHost(hostUri);\n    host.authenticate(credentials);\n  }\n\n  command(hostUri: AnyUri, nodeUri: AnyUri, laneUri: AnyUri, body: AnyValue): void;\n  command(nodeUri: AnyUri, laneUri: AnyUri, body: AnyValue): void;\n  command(hostUri: AnyUri, nodeUri: AnyUri, laneUri: AnyUri | AnyValue, body?: AnyValue): void {\n    hostUri = Uri.fromAny(hostUri);\n    nodeUri = Uri.fromAny(nodeUri);\n    if (arguments.length === 3) {\n      body = laneUri as Value;\n      laneUri = nodeUri;\n      nodeUri = hostUri;\n      hostUri = (nodeUri as Uri).endpoint();\n      nodeUri = (hostUri as Uri).unresolve(nodeUri);\n    } else {\n      laneUri = Uri.fromAny(laneUri as AnyUri);\n    }\n    body = Value.fromAny(body);\n    const host = this.openHost(hostUri);\n    host.command(nodeUri, laneUri, body);\n  }\n\n  close(): void {\n    const refs = this.refs;\n    Object.defineProperty(this, \"refs\", {\n      value: [],\n      enumerable: true,\n      configurable: true,\n    });\n    for (let i = 0; i < refs.length; i += 1) {\n      refs[i]!.closeUp();\n    }\n    const downlinks = this.downlinks.clone();\n    this.downlinks.clear();\n    Object.defineProperty(this, \"downlinkCount\", {\n      value: 0,\n      enumerable: true,\n      configurable: true,\n    });\n    downlinks.forEach(function (hostUri: Uri, hostDownlinks: BTree<Uri, BTree<Uri, DownlinkModel>>): void {\n      hostDownlinks.forEach(function (nodeUri: Uri, nodeDownlinks: BTree<Uri, DownlinkModel>): void {\n        nodeDownlinks.forEach(function (laneUri: Uri, downlink: DownlinkModel): void {\n          downlink.closeUp();\n          const host = this.getHost(hostUri);\n          if (host !== void 0) {\n            host.closeDownlink(downlink);\n          }\n        }, this);\n      }, this);\n    }, this);\n    const hosts = this.hosts.clone();\n    this.hosts.clear();\n    hosts.forEach(function (hostUri: Uri, host: Host): void {\n      host.closeUp();\n    }, this);\n  }\n\n  observe(observer: WarpObserver): this {\n    Object.defineProperty(this, \"observers\", {\n      value: Arrays.inserted(observer, this.observers),\n      enumerable: true,\n      configurable: true,\n    });\n    return this;\n  }\n\n  unobserve(observer: unknown): this {\n    const oldObservers = this.observers;\n    const n = oldObservers.length;\n    for (let i = 0; i < n; i += 1) {\n      const oldObserver = oldObservers[i]! as {[key: string]: unknown};\n      let found = oldObserver === observer; // check object identity\n      if (!found) {\n        for (const key in oldObserver) { // check property identity\n          if (oldObserver[key] === observer) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (found) {\n        if (n > 1) {\n          const newObservers = new Array<WarpObserver>(n - 1);\n          for (let j = 0; j < i; j += 1) {\n            newObservers[j] = oldObservers[j]!;\n          }\n          for (let j = i + 1; j < n; j += 1) {\n            newObservers[j - 1] = oldObservers[j]!;\n          }\n          Object.defineProperty(this, \"observers\", {\n            value: newObservers,\n            enumerable: true,\n            configurable: true,\n          });\n        } else {\n          Object.defineProperty(this, \"observers\", {\n            value: Arrays.empty,\n            enumerable: true,\n            configurable: true,\n          });\n        }\n        break;\n      }\n    }\n    return this;\n  }\n\n  didConnect(didConnect: WarpDidConnect): this {\n    return this.observe({didConnect});\n  }\n\n  didAuthenticate(didAuthenticate: WarpDidAuthenticate): this {\n    return this.observe({didAuthenticate});\n  }\n\n  didDeauthenticate(didDeauthenticate: WarpDidDeauthenticate): this {\n    return this.observe({didDeauthenticate});\n  }\n\n  didDisconnect(didDisconnect: WarpDidDisconnect): this {\n    return this.observe({didDisconnect});\n  }\n\n  didFail(didFail: WarpDidFail): this {\n    return this.observe({didFail});\n  }\n\n  /** @hidden */\n  hostDidConnect(host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didConnect !== void 0) {\n        observer.didConnect(host, this);\n      }\n    }\n    const refs = this.refs;\n    for (let i = 0, n = refs.length; i < n; i += 1) {\n      const ref = refs[i]!;\n      if (ref.hostUri.equals(host.hostUri)) {\n        ref.hostDidConnect(host);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidAuthenticate(body: Value, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didAuthenticate !== void 0) {\n        observer.didAuthenticate(body, host, this);\n      }\n    }\n    const refs = this.refs;\n    for (let i = 0, n = refs.length; i < n; i += 1) {\n      const ref = refs[i]!;\n      if (ref.hostUri.equals(host.hostUri)) {\n        ref.hostDidAuthenticate(body, host);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidDeauthenticate(body: Value, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDeauthenticate !== void 0) {\n        observer.didDeauthenticate(body, host, this);\n      }\n    }\n    const refs = this.refs;\n    for (let i = 0, n = refs.length; i < n; i += 1) {\n      const ref = refs[i]!;\n      if (ref.hostUri.equals(host.hostUri)) {\n        ref.hostDidDeauthenticate(body, host);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidDisconnect(host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didDisconnect !== void 0) {\n        observer.didDisconnect(host, this);\n      }\n    }\n    const refs = this.refs;\n    for (let i = 0, n = refs.length; i < n; i += 1) {\n      const ref = refs[i]!;\n      if (ref.hostUri.equals(host.hostUri)) {\n        ref.hostDidDisconnect(host);\n      }\n    }\n  }\n\n  /** @hidden */\n  hostDidFail(error: unknown, host: Host): void {\n    const observers = this.observers;\n    for (let i = 0, n = observers.length; i < n; i += 1) {\n      const observer = observers[i]!;\n      if (observer.didFail !== void 0) {\n        observer.didFail(error, host, this);\n      }\n    }\n    const refs = this.refs;\n    for (let i = 0, n = refs.length; i < n; i += 1) {\n      const ref = refs[i]!;\n      if (ref.hostUri.equals(host.hostUri)) {\n        ref.hostDidFail(error, host);\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport * from \"./host\";\n\nexport * from \"./downlink\";\n\nexport * from \"./ref\";\n\nexport {WarpRef} from \"./WarpRef\";\nexport {WarpObserver} from \"./WarpObserver\";\n\nexport {\n  WarpClientOptions,\n  WarpClient,\n} from \"./WarpClient\";\n\nimport {WarpClient} from \"./WarpClient\";\nexport const client = new WarpClient();\nexport const isOnline = client.isOnline.bind(client);\nexport const keepOnline = client.keepOnline.bind(client);\nexport const downlink = client.downlink.bind(client);\nexport const downlinkList = client.downlinkList.bind(client);\nexport const downlinkMap = client.downlinkMap.bind(client);\nexport const downlinkValue = client.downlinkValue.bind(client);\nexport const hostRef = client.hostRef.bind(client);\nexport const nodeRef = client.nodeRef.bind(client);\nexport const laneRef = client.laneRef.bind(client);\nexport const authenticate = client.authenticate.bind(client);\nexport const command = client.command.bind(client);\n","// Copyright 2015-2020 Swim inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport type {InletOptions} from \"./Inlet\";\nimport {StreamletPrototype, AbstractStreamlet} from \"./AbstractStreamlet\";\n\nexport function In(name: string): PropertyDecorator;\nexport function In(options: InletOptions): PropertyDecorator;\nexport function In(target: unknown, key: string): void;\nexport function In(target: unknown, key?: string): PropertyDecorator | void {\n  if (arguments.length === 1) {\n    if (typeof target === \"string\") {\n      target = {name: target} as InletOptions;\n    }\n    return AbstractStreamlet.decorateInlet.bind(void 0, target as InletOptions);\n  } else {\n    AbstractStreamlet.decorateInlet({}, target as StreamletPrototype, key!);\n  }\n}\n"]}