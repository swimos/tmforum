// swim-toolkit-3.11.0-dev.20201021; copyright 2015-2020 Swim inc.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@swim/util"),require("@swim/client"),require("@swim/structure"),require("@swim/uri"),require("@swim/math"),require("@swim/codec"),require("@swim/mapping"),require("@swim/time"),require("@swim/constraint"),require("@swim/collections"),require("@swim/geo")):"function"==typeof define&&define.amd?define(["exports","@swim/util","@swim/client","@swim/structure","@swim/uri","@swim/math","@swim/codec","@swim/mapping","@swim/time","@swim/constraint","@swim/collections","@swim/geo"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).swim=t.swim||{},t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim)}(this,(function(t,e,i,o,n,r,a,s,l,u,h,p){"use strict";var d={default:function(){return{updateTime:performance.now()}}},c=function(){function t(){Object.defineProperty(this,"modelFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"modelController",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"modelObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traits",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitMap",{value:{},enumerable:!0,configurable:!0})}return t.prototype.initModel=function(t){void 0!==t.modelController&&this.setModelController(t.modelController)},t.prototype.setModelFlags=function(t){Object.defineProperty(this,"modelFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.setModelController=function(t){var e=this.modelController;e!==t&&(this.willSetModelController(t),null!==e&&e.setModel(null),Object.defineProperty(this,"modelController",{value:t,enumerable:!0,configurable:!0}),null!==t&&t.setModel(this),this.onSetModelController(t),this.didSetModelController(t))},t.prototype.willSetModelController=function(t){},t.prototype.onSetModelController=function(t){},t.prototype.didSetModelController=function(t){},t.prototype.addModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelObserver(t),Object.defineProperty(this,"modelObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelObserver(t),this.didAddModelObserver(t))},t.prototype.willAddModelObserver=function(t){},t.prototype.onAddModelObserver=function(t){},t.prototype.didAddModelObserver=function(t){},t.prototype.removeModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelObserver(t),Object.defineProperty(this,"modelObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelObserver(t),this.didRemoveModelObserver(t))},t.prototype.willRemoveModelObserver=function(t){},t.prototype.onRemoveModelObserver=function(t){},t.prototype.didRemoveModelObserver=function(t){},t.prototype.attachParentModel=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower());for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].attachParentModel(t)},t.prototype.detachParentModel=function(t){try{for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].detachParentModel(t)}finally{if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}}},t.prototype.willSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willSetParentModel(t,e);var r=this.modelController;null!==r&&void 0!==r.modelWillSetParentModel&&r.modelWillSetParentModel(t,e,this);var a=this.modelObservers;for(o=0,n=a.length;o<n;o+=1){var s=a[o];void 0!==s.modelWillSetParentModel&&s.modelWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onSetParentModel(t,e)},t.prototype.didSetParentModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidSetParentModel&&r.modelDidSetParentModel(t,e,this)}var a=this.modelController;null!==a&&void 0!==a.modelDidSetParentModel&&a.modelDidSetParentModel(t,e,this);var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didSetParentModel(t,e)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertChildModel(t,e);var r=this.modelController;null!==r&&void 0!==r.modelWillInsertChildModel&&r.modelWillInsertChildModel(t,e,this);var a=this.modelObservers;for(o=0,n=a.length;o<n;o+=1){var s=a[o];void 0!==s.modelWillInsertChildModel&&s.modelWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertChildModel(t,e)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertChildModel&&r.modelDidInsertChildModel(t,e,this)}var a=this.modelController;null!==a&&void 0!==a.modelDidInsertChildModel&&a.modelDidInsertChildModel(t,e,this);var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertChildModel(t,e)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveChildModel(t);var n=this.modelController;null!==n&&void 0!==n.modelWillRemoveChildModel&&n.modelWillRemoveChildModel(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillRemoveChildModel&&a.modelWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveChildModel(t)},t.prototype.didRemoveChildModel=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveChildModel&&n.modelDidRemoveChildModel(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidRemoveChildModel&&r.modelDidRemoveChildModel(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didRemoveChildModel(t)},t.prototype.getSuperModel=function(t){var e=this.parentModel;return null===e?null:e instanceof t?e:e.getSuperModel(t)},t.prototype.getBaseModel=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseModel(t);return null!==i?i:e instanceof t?e:null},Object.defineProperty(t.prototype,"traitCount",{get:function(){return this.traits.length},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.traits;return 0!==t.length?t[0]:null},t.prototype.lastTrait=function(){var t=this.traits;return 0!==t.length?t[t.length-1]:null},t.prototype.nextTrait=function(t){var e=this.traits,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},t.prototype.previousTrait=function(t){var e=this.traits,i=e.indexOf(t);return i-1>=0?e[i-1]:null},t.prototype.forEachTrait=function(t,e){for(var i,o=this.traits,n=0,r=o.length;n<r;n+=1){var a=o[n];if(void 0!==(i=t.call(e,a)))break}return i},t.prototype.getTrait=function(t){if("string"==typeof t){if(void 0!==(n=this.traitMap[t]))return n}else for(var e=this.traits,i=0,o=e.length;i<o;i+=1){var n;if((n=e[i])instanceof t)return n}return null},t.prototype.setTrait=function(t,e){null!==e&&e.remove();var i=-1,o=null,n=this.traits,r=this.getTrait(t);return null!==r&&(i=n.indexOf(r),o=n[i+1]||null,this.willRemoveTrait(r),r.setModel(null,this),this.removeTraitMap(r),n.splice(i,1),this.onRemoveTrait(r),this.didRemoveTrait(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertTrait(e,o),i>=0?n.splice(i,0,e):n.push(e),this.insertTraitMap(e),e.setModel(this,null),this.onInsertTrait(e,o),this.didInsertTrait(e,o)),r},t.prototype.insertTraitMap=function(t){var e=t.key;void 0!==e&&(this.traitMap[e]=t)},t.prototype.removeTraitMap=function(t){var e=t.key;void 0!==e&&delete this.traitMap[e]},t.prototype.appendTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e)),this.willInsertTrait(t,null),this.traits.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,null),this.didInsertTrait(t,null)},t.prototype.prependTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e));var i=this.traits,o=0!==i.length?i[0]:null;this.willInsertTrait(t,o),i.unshift(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,o),this.didInsertTrait(t,o)},t.prototype.insertTrait=function(t,e,i){if(null!==e&&e.model!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeTrait(i),t.setKey(i)),this.willInsertTrait(t,e);var o=this.traits,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,e),this.didInsertTrait(t,e)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertTrait(t,e);var r=this.modelController;null!==r&&void 0!==r.modelWillInsertTrait&&r.modelWillInsertTrait(t,e,this);var a=this.modelObservers;for(o=0,n=a.length;o<n;o+=1){var s=a[o];void 0!==s.modelWillInsertTrait&&s.modelWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertTrait(t,e)},t.prototype.didInsertTrait=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertTrait&&r.modelDidInsertTrait(t,e,this)}var a=this.modelController;null!==a&&void 0!==a.modelDidInsertTrait&&a.modelDidInsertTrait(t,e,this);var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertTrait(t,e)},t.prototype.removeTrait=function(t){var e;if("string"==typeof t){if(null===(e=this.getTrait(t)))return null}else e=t;if(e.model!==this)throw new Error("not a member trait");this.willRemoveTrait(e),e.setModel(null,this),this.removeTraitMap(e);var i=this.traits,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveTrait(e),this.didRemoveTrait(e),e.setKey(void 0),"string"==typeof t)return e},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveTrait(t);var n=this.modelController;null!==n&&void 0!==n.modelWillRemoveTrait&&n.modelWillRemoveTrait(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillRemoveTrait&&a.modelWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags);for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveTrait(t)},t.prototype.didRemoveTrait=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveTrait&&n.modelDidRemoveTrait(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidRemoveTrait&&r.modelDidRemoveTrait(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didRemoveTrait(t)},t.prototype.getSuperTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getTrait(t);return null!==i?i:e.getSuperTrait(t)},t.prototype.getBaseTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseTrait(t);return null!==i?i:e.getTrait(t)},t.prototype.isMounted=function(){return 0!=(this.modelFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentModel||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillMount&&t.modelWillMount(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillMount&&n.modelWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.modelFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidMount&&o.modelDidMount(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidMount&&n.modelDidMount(this)},t.prototype.willUnmount=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillUnmount&&t.modelWillUnmount(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillUnmount&&n.modelWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnmount&&o.modelDidUnmount(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidUnmount&&n.modelDidUnmount(this)},t.prototype.isPowered=function(){return 0!=(this.modelFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillPower&&t.modelWillPower(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillPower&&n.modelWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.modelFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidPower&&o.modelDidPower(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidPower&&n.modelDidPower(this)},t.prototype.willUnpower=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillUnpower&&t.modelWillUnpower(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillUnpower&&n.modelWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnpower&&o.modelDidUnpower(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidUnpower&&n.modelDidUnpower(this)},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.modelFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setModelFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRequireUpdate(t,e)},t.prototype.onRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRequireUpdate(t,e)},t.prototype.didRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRequireUpdate(t,e)},t.prototype.requestUpdate=function(e,i,o){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsAnalyze|t.NeedsRefresh);if(0!=(i&t.AnalyzeMask)&&0==(this.modelFlags&t.NeedsAnalyze)&&(this.setModelFlags(this.modelFlags|t.NeedsAnalyze),n|=t.NeedsAnalyze),0!=(i&t.RefreshMask)&&0==(this.modelFlags&t.NeedsRefresh)&&(this.setModelFlags(this.modelFlags|t.NeedsRefresh),n|=t.NeedsRefresh),0!=(n&(t.NeedsAnalyze|t.NeedsRefresh))||o){this.onRequestUpdate(e,i,o);var r=this.parentModel;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var a=this.refreshService.manager;void 0!==a&&a.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)},t.prototype.willRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)e|=o[n].willRequestUpdate(t,e,i)},t.prototype.onRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onRequestUpdate(t,e,i)},t.prototype.didRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didRequestUpdate(t,e,i)},t.prototype.isTraversing=function(){return 0!=(this.modelFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.modelFlags&t.UpdatingMask)},t.prototype.isAnalyzing=function(){return 0!=(this.modelFlags&t.AnalyzingFlag)},t.prototype.needsAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsAnalyze(t,e);return t},t.prototype.willAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willAnalyze(t,e)},t.prototype.onAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onAnalyze(t,e)},t.prototype.didAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didAnalyze(t,e)},t.prototype.willMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willMutate(t);var n=this.modelController;null!==n&&void 0!==n.modelWillMutate&&n.modelWillMutate(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillMutate&&a.modelWillMutate(t,this)}},t.prototype.onMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onMutate(t)},t.prototype.didMutate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidMutate&&n.modelDidMutate(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidMutate&&r.modelDidMutate(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didMutate(t)},t.prototype.willAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willAggregate(t);var n=this.modelController;null!==n&&void 0!==n.modelWillAggregate&&n.modelWillAggregate(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillAggregate&&a.modelWillAggregate(t,this)}},t.prototype.onAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onAggregate(t)},t.prototype.didAggregate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidAggregate&&n.modelDidAggregate(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidAggregate&&r.modelDidAggregate(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didAggregate(t)},t.prototype.willCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willCorrelate(t);var n=this.modelController;null!==n&&void 0!==n.modelWillCorrelate&&n.modelWillCorrelate(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillCorrelate&&a.modelWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onCorrelate(t)},t.prototype.didCorrelate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidCorrelate&&n.modelDidCorrelate(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidCorrelate&&r.modelDidCorrelate(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didCorrelate(t)},t.prototype.doAnalyzeChildModels=function(e,i){0!=(e&t.AnalyzeMask)&&(this.willAnalyzeChildModels(e,i),this.onAnalyzeChildModels(e,i),this.didAnalyzeChildModels(e,i))},t.prototype.willAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willAnalyzeChildModels(t,e)},t.prototype.onAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onAnalyzeChildModels(t,e);this.analyzeChildModels(t,e,this.analyzeChildModel)},t.prototype.didAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didAnalyzeChildModels(t,e)},t.prototype.analyzeChildModel=function(t,e,i){this.willAnalyzeChildModel(t,e,i),this.onAnalyzeChildModel(t,e,i),this.didAnalyzeChildModel(t,e,i)},t.prototype.willAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].willAnalyzeChildModel(t,e,i)},t.prototype.onAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onAnalyzeChildModel(t,e,i);t.cascadeAnalyze(e,i)},t.prototype.didAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didAnalyzeChildModel(t,e,i)},t.prototype.isRefreshing=function(){return 0!=(this.modelFlags&t.RefreshingFlag)},t.prototype.needsRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsRefresh(t,e);return t},t.prototype.willRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRefresh(t,e)},t.prototype.onRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRefresh(t,e)},t.prototype.didRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRefresh(t,e)},t.prototype.willValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willValidate(t);var n=this.modelController;null!==n&&void 0!==n.modelWillValidate&&n.modelWillValidate(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillValidate&&a.modelWillValidate(t,this)}},t.prototype.onValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onValidate(t)},t.prototype.didValidate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidValidate&&n.modelDidValidate(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidValidate&&r.modelDidValidate(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didValidate(t)},t.prototype.willReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willReconcile(t);var n=this.modelController;null!==n&&void 0!==n.modelWillReconcile&&n.modelWillReconcile(t,this);var r=this.modelObservers;for(i=0,o=r.length;i<o;i+=1){var a=r[i];void 0!==a.modelWillReconcile&&a.modelWillReconcile(t,this)}},t.prototype.onReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onReconcile(t)},t.prototype.didReconcile=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidReconcile&&n.modelDidReconcile(t,this)}var r=this.modelController;null!==r&&void 0!==r.modelDidReconcile&&r.modelDidReconcile(t,this);var a=this.traits;for(i=0,o=a.length;i<o;i+=1)a[i].didReconcile(t)},t.prototype.doRefreshChildModels=function(e,i){e&t.RefreshMask&&(this.willRefreshChildModels(e,i),this.onRefreshChildModels(e,i),this.didRefreshChildModels(e,i))},t.prototype.willRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRefreshChildModels(t,e)},t.prototype.onRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRefreshChildModels(t,e);this.refreshChildModels(t,e,this.refreshChildModel)},t.prototype.didRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRefreshChildModels(t,e)},t.prototype.refreshChildModel=function(t,e,i){this.willRefreshChildModel(t,e,i),this.onRefreshChildModel(t,e,i),this.didRefreshChildModel(t,e,i)},t.prototype.willRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].willRefreshChildModel(t,e,i)},t.prototype.onRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onRefreshChildModel(t,e,i);t.cascadeRefresh(e,i)},t.prototype.didRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didRefreshChildModel(t,e,i)},t.prototype.isConsuming=function(){return 0!=(this.modelFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.willStartConsuming=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillStartConsuming&&t.modelWillStartConsuming(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillStartConsuming&&n.modelWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStartConsuming&&o.modelDidStartConsuming(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidStartConsuming&&n.modelDidStartConsuming(this)},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.willStopConsuming=function(){var t=this.modelController;null!==t&&void 0!==t.modelWillStopConsuming&&t.modelWillStopConsuming(this);for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelWillStopConsuming&&n.modelWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStopConsuming&&o.modelDidStopConsuming(this)}var n=this.modelController;null!==n&&void 0!==n.modelDidStopConsuming&&n.modelDidStopConsuming(this)},t.prototype.willAddModelConsumer=function(t){},t.prototype.onAddModelConsumer=function(t){},t.prototype.didAddModelConsumer=function(t){},t.prototype.willRemoveModelConsumer=function(t){},t.prototype.onRemoveModelConsumer=function(t){},t.prototype.didRemoveModelConsumer=function(t){},t.prototype.getLazyModelService=function(e){var i=this.getModelService(e);if(null===i){var o=t.getModelServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelService(e,i))}return i},t.prototype.getLazyModelProperty=function(e){var i=this.getModelProperty(e);if(null===i){var o=t.getModelPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelProperty(e,i))}return i},t.prototype.getLazyModelFastener=function(e){var i=this.getModelFastener(e);if(null===i){var o=t.getModelFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelFastener(e,i)}return i},t.prototype.getLazyModelTrait=function(e){var i=this.getModelTrait(e);if(null===i){var o=t.getModelTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelTrait(e,i)}return i},t.prototype.extendModelContext=function(t){return t},Object.defineProperty(t.prototype,"superModelContext",{get:function(){var t=this.parentModel;return null!==t?t.modelContext:this.refreshService.updatedModelContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelContext",{get:function(){return this.extendModelContext(this.superModelContext)},enumerable:!1,configurable:!0}),t.getModelServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelServiceConstructors")){var i=e.modelServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelServiceConstructors")||(o.modelServiceConstructors={}),o.modelServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelPropertyConstructors")){var i=e.modelPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelPropertyConstructors")||(o.modelPropertyConstructors={}),o.modelPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelFastenerConstructors")){var i=e.modelFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelFastenerConstructors")||(r.modelFastenerConstructors={}),r.modelFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelFastener(o);return null===e&&(e=new t(this,n,o),this.setModelFastener(o,e)),e},configurable:!0,enumerable:!0})},t.getModelTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelTraitConstructors")){var i=e.modelTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelTraitConstructors")||(r.modelTraitConstructors={}),r.modelTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelTrait(o);return null===e&&(e=new t(this,n,o),this.setModelTrait(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.TraversingFlag=8,t.AnalyzingFlag=16,t.RefreshingFlag=32,t.RemovingFlag=64,t.ImmediateFlag=128,t.UpdatingMask=t.AnalyzingFlag|t.RefreshingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.ConsumingFlag|t.TraversingFlag|t.AnalyzingFlag|t.RefreshingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsAnalyze=256,t.NeedsMutate=512,t.NeedsAggregate=1024,t.NeedsCorrelate=2048,t.AnalyzeMask=t.NeedsAnalyze|t.NeedsMutate|t.NeedsAggregate|t.NeedsCorrelate,t.NeedsRefresh=4096,t.NeedsValidate=8192,t.NeedsReconcile=16384,t.RefreshMask=t.NeedsRefresh|t.NeedsValidate|t.NeedsReconcile,t.UpdateMask=t.AnalyzeMask|t.RefreshMask,t.ModelFlagShift=24,t.ModelFlagMask=(1<<t.ModelFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t}(),f=function(){function t(){Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0})}return t.prototype.setModel=function(t){this.willSetModel(t),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),this.onSetModel(t),this.didSetModel(t)},t.prototype.willSetModel=function(t){},t.prototype.onSetModel=function(t){},t.prototype.didSetModel=function(t){},Object.defineProperty(t.prototype,"key",{get:function(){var t=this.model;return null!==t?t.key:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentModel",{get:function(){var t=this.model;return null!==t?t.parentModel:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentModelController",{get:function(){var t=this.parentModel;return null!==t?t.modelController:null},enumerable:!1,configurable:!0}),t.prototype.modelWillSetParentModel=function(t,e,i){},t.prototype.modelDidSetParentModel=function(t,e,i){},t.prototype.remove=function(){var t=this.model;if(null===t)throw new Error("no model");t.remove()},Object.defineProperty(t.prototype,"childModelCount",{get:function(){var t=this.model;return null!==t?t.childModelCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childModels",{get:function(){var t=this.model;return null!==t?t.childModels:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childModelControllers",{get:function(){return this.childModels.map((function(t){return t.modelController}))},enumerable:!1,configurable:!0}),t.prototype.getChildModel=function(t){var e=this.model;return null!==e?e.getChildModel(t):null},t.prototype.getChildModelController=function(t){var e=this.getChildModel(t);return null!==e?e.modelController:null},t.prototype.setChildModel=function(t,e){var i=this.model;if(null!==i)return i.setChildModel(t,e);throw new Error("no model")},t.prototype.setChildModelController=function(t,e){var i=null!==e?e.model:null;if(null!==i){var o=this.setChildModel(t,i);return null!==o?o.modelController:null}throw new Error("no model")},t.prototype.appendChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendChildModel(t,e)},t.prototype.appendChildModelController=function(t,e){var i=this.model,o=t.model;if(null===i||null===o)throw new Error("no model");i.appendChildModel(o,e)},t.prototype.prependChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependChildModel(t,e)},t.prototype.prependChildModelController=function(t,e){var i=this.model,o=t.model;if(null===i||null===o)throw new Error("no model");i.prependChildModel(o,e)},t.prototype.insertChildModel=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertChildModel(t,e,i)},t.prototype.insertChildModelController=function(t,e,i){var o=this.model,n=t.model;if(null===o||null===n)throw new Error("no model");var r=void 0;r=null===e||e instanceof c?e:e.model,o.insertChildModel(n,r,i)},t.prototype.modelWillInsertChildModel=function(t,e,i){},t.prototype.modelDidInsertChildModel=function(t,e,i){},t.prototype.removeChildModel=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeChildModel(t):null;null!==e&&e.removeChildModel(t)},t.prototype.removeChildModelController=function(t){var e,i=this.model;if(null===i)throw new Error("no model");if("string"==typeof t)return null!==(e=i.removeChildModel(t))?e.modelController:null;if(null===(e=t.model))throw new Error("no model");i.removeChildModel(e)},t.prototype.removeAll=function(){var t=this.model;if(null===t)throw new Error("no model");t.removeAll()},t.prototype.modelWillRemoveChildModel=function(t,e){},t.prototype.modelDidRemoveChildModel=function(t,e){},t.prototype.getSuperModel=function(t){var e=this.model;return null!==e?e.getSuperModel(t):null},t.prototype.getBaseModel=function(t){var e=this.model;return null!==e?e.getBaseModel(t):null},Object.defineProperty(t.prototype,"traitCount",{get:function(){var t=this.model;return null!==t?t.traitCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"traits",{get:function(){var t=this.model;return null!==t?t.traits:[]},enumerable:!1,configurable:!0}),t.prototype.getTrait=function(t){var e=this.model;return null!==e?e.getTrait(t):null},t.prototype.setTrait=function(t,e){var i=this.model;if(null!==i)return i.setTrait(t,e);throw new Error("no model")},t.prototype.appendTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendTrait(t,e)},t.prototype.prependTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependTrait(t,e)},t.prototype.insertTrait=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertTrait(t,e,i)},t.prototype.modelWillInsertTrait=function(t,e,i){},t.prototype.modelDidInsertTrait=function(t,e,i){},t.prototype.removeTrait=function(t){var e=this.model;if(null===e)throw new Error("no model");if("string"==typeof t)return e.removeTrait(t);e.removeTrait(t)},t.prototype.modelWillRemoveTrait=function(t,e){},t.prototype.modelDidRemoveTrait=function(t,e){},t.prototype.getSuperTrait=function(t){var e=this.model;return null!==e?e.getSuperTrait(t):null},t.prototype.getBaseTrait=function(t){var e=this.model;return null!==e?e.getBaseTrait(t):null},t.prototype.isMounted=function(){var t=this.model;return null!==t&&t.isMounted()},t.prototype.modelWillMount=function(t){},t.prototype.modelDidMount=function(t){},t.prototype.modelWillUnmount=function(t){},t.prototype.modelDidUnmount=function(t){},t.prototype.isPowered=function(){var t=this.model;return null!==t&&t.isPowered()},t.prototype.modelWillPower=function(t){},t.prototype.modelDidPower=function(t){},t.prototype.modelWillUnpower=function(t){},t.prototype.modelDidUnpower=function(t){},t.prototype.isTraversing=function(){var t=this.model;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.model;return null!==t&&t.isUpdating()},t.prototype.isAnalyzing=function(){var t=this.model;return null!==t&&t.isAnalyzing()},t.prototype.modelWillMutate=function(t,e){},t.prototype.modelDidMutate=function(t,e){},t.prototype.modelWillAggregate=function(t,e){},t.prototype.modelDidAggregate=function(t,e){},t.prototype.modelWillCorrelate=function(t,e){},t.prototype.modelDidCorrelate=function(t,e){},t.prototype.isRefreshing=function(){var t=this.model;return null!==t&&t.isRefreshing()},t.prototype.modelWillValidate=function(t,e){},t.prototype.modelDidValidate=function(t,e){},t.prototype.modelWillReconcile=function(t,e){},t.prototype.modelDidReconcile=function(t,e){},t.prototype.modelWillStartConsuming=function(t){},t.prototype.modelDidStartConsuming=function(t){},t.prototype.modelWillStopConsuming=function(t){},t.prototype.modelDidStopConsuming=function(t){},Object.defineProperty(t.prototype,"modelContext",{get:function(){var t=this.model;return null!==t?t.modelContext:d.default()},enumerable:!1,configurable:!0}),t}(),v=function(){function t(){Object.defineProperty(this,"traitFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.setTraitFlags=function(t){Object.defineProperty(this,"traitFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.addTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitObserver(t),Object.defineProperty(this,"traitObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddTraitObserver(t),this.didAddTraitObserver(t))},t.prototype.willAddTraitObserver=function(t){},t.prototype.onAddTraitObserver=function(t){},t.prototype.didAddTraitObserver=function(t){},t.prototype.removeTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitObserver(t),Object.defineProperty(this,"traitObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveTraitObserver(t),this.didRemoveTraitObserver(t))},t.prototype.willRemoveTraitObserver=function(t){},t.prototype.onRemoveTraitObserver=function(t){},t.prototype.didRemoveTraitObserver=function(t){},Object.defineProperty(t.prototype,"modelFlags",{get:function(){var t=this.model;return null!==t?t.modelFlags:0},enumerable:!1,configurable:!0}),t.prototype.setModelFlags=function(t){var e=this.model;if(null===e)throw new Error("no model");e.setModelFlags(t)},t.prototype.willSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetModel&&r.traitWillSetModel(t,e,this)}},t.prototype.onSetModel=function(t,e){if(null!==t)t.isMounted()&&(this.doMount(),t.isPowered()&&this.doPower());else if(this.isMounted())try{this.isPowered()&&this.doUnpower()}finally{this.doUnmount()}},t.prototype.didSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetModel&&r.traitDidSetModel(t,e,this)}},Object.defineProperty(t.prototype,"parentModel",{get:function(){var t=this.model;return null!==t?t.parentModel:null},enumerable:!1,configurable:!0}),t.prototype.attachParentModel=function(t){},t.prototype.detachParentModel=function(t){},t.prototype.willSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetParentModel&&r.traitWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){},t.prototype.didSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetParentModel&&r.traitDidSetParentModel(t,e,this)}},Object.defineProperty(t.prototype,"childModelCount",{get:function(){var t=this.model;return null!==t?t.childModelCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childModels",{get:function(){var t=this.model;return null!==t?t.childModels:[]},enumerable:!1,configurable:!0}),t.prototype.firstChildModel=function(){var t=this.model;return null!==t?t.firstChildModel():null},t.prototype.lastChildModel=function(){var t=this.model;return null!==t?t.lastChildModel():null},t.prototype.nextChildModel=function(t){var e=this.model;return null!==e?e.nextChildModel(t):null},t.prototype.previousChildModel=function(t){var e=this.model;return null!==e?e.previousChildModel(t):null},t.prototype.forEachChildModel=function(t,e){var i=this.model;return null!==i?i.forEachChildModel(t,e):void 0},t.prototype.getChildModel=function(t){var e=this.model;return null!==e?e.getChildModel(t):null},t.prototype.setChildModel=function(t,e){var i=this.model;if(null!==i)return i.setChildModel(t,e);throw new Error("no model")},t.prototype.appendChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendChildModel(t,e)},t.prototype.prependChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependChildModel(t,e)},t.prototype.insertChildModel=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertChildModel(t,e,i)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertChildModel&&r.traitWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertChildModel&&r.traitDidInsertChildModel(t,e,this)}},t.prototype.removeChildModel=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeChildModel(t):null;null!==e&&e.removeChildModel(t)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveChildModel&&n.traitWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){},t.prototype.didRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveChildModel&&n.traitDidRemoveChildModel(t,this)}},t.prototype.getSuperModel=function(t){var e=this.model;return null!==e?e.getSuperModel(t):null},t.prototype.getBaseModel=function(t){var e=this.model;return null!==e?e.getBaseModel(t):null},Object.defineProperty(t.prototype,"traitCount",{get:function(){var t=this.model;return null!==t?t.traitCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"traits",{get:function(){var t=this.model;return null!==t?t.traits:[]},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.model;return null!==t?t.firstTrait():null},t.prototype.lastTrait=function(){var t=this.model;return null!==t?t.lastTrait():null},t.prototype.nextTrait=function(t){var e=this.model;return null!==e?e.nextTrait(t):null},t.prototype.previousTrait=function(t){var e=this.model;return null!==e?e.previousTrait(t):null},t.prototype.forEachTrait=function(t,e){var i=this.model;return null!==i?i.forEachTrait(t,e):void 0},t.prototype.getTrait=function(t){var e=this.model;return null!==e?e.getTrait(t):null},t.prototype.setTrait=function(t,e){var i=this.model;if(null!==i)return i.setTrait(t,e);throw new Error("no model")},t.prototype.appendTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendTrait(t,e)},t.prototype.prependTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependTrait(t,e)},t.prototype.insertTrait=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertTrait(t,e,i)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertTrait&&r.traitWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags)},t.prototype.didInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertTrait&&r.traitDidInsertTrait(t,e,this)}},t.prototype.removeTrait=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeTrait(t):null;null!==e&&e.removeTrait(t)},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveTrait&&n.traitWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags)},t.prototype.didRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveTrait&&n.traitDidRemoveTrait(t,this)}},t.prototype.getSuperTrait=function(t){var e=this.model;return null!==e?e.getSuperTrait(t):null},t.prototype.getBaseTrait=function(t){var e=this.model;return null!==e?e.getBaseTrait(t):null},t.prototype.isMounted=function(){return 0!=(this.traitFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillMount&&o.traitWillMount(this)}},t.prototype.onMount=function(){this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidMount&&o.traitDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnmount&&o.traitWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnmount&&o.traitDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.traitFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillPower&&o.traitWillPower(this)}},t.prototype.onPower=function(){this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidPower&&o.traitDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnpower&&o.traitWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnpower&&o.traitDidUnpower(this)}},t.prototype.requireUpdate=function(t,e){void 0===e&&(e=!1);var i=this.model;null!==i&&i.requireUpdate(t,e)},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(t,e,i){var o=this.model;if(null===o)throw new TypeError("no model");o.requestUpdate(t,e,i)},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){var t=this.model;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.model;return null!==t&&t.isUpdating()},t.prototype.isAnalyzing=function(){var t=this.model;return null!==t&&t.isAnalyzing()},t.prototype.needsAnalyze=function(t,e){return t},t.prototype.willAnalyze=function(t,e){},t.prototype.onAnalyze=function(t,e){},t.prototype.didAnalyze=function(t,e){},t.prototype.willMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillMutate&&n.traitWillMutate(t,this)}},t.prototype.onMutate=function(t){},t.prototype.didMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidMutate&&n.traitDidMutate(t,this)}},t.prototype.willAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillAggregate&&n.traitWillAggregate(t,this)}},t.prototype.onAggregate=function(t){},t.prototype.didAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidAggregate&&n.traitDidAggregate(t,this)}},t.prototype.willCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillCorrelate&&n.traitWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){},t.prototype.didCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidCorrelate&&n.traitDidCorrelate(t,this)}},t.prototype.willAnalyzeChildModels=function(t,e){},t.prototype.onAnalyzeChildModels=function(t,e){},t.prototype.didAnalyzeChildModels=function(t,e){},t.prototype.analyzeChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.willAnalyzeChildModel=function(t,e,i){},t.prototype.onAnalyzeChildModel=function(t,e,i){},t.prototype.didAnalyzeChildModel=function(t,e,i){},t.prototype.isRefreshing=function(){var t=this.model;return null!==t&&t.isRefreshing()},t.prototype.needsRefresh=function(t,e){return t},t.prototype.willRefresh=function(t,e){},t.prototype.onRefresh=function(t,e){},t.prototype.didRefresh=function(t,e){},t.prototype.willValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillValidate&&n.traitWillValidate(t,this)}},t.prototype.onValidate=function(t){},t.prototype.didValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidValidate&&n.traitDidValidate(t,this)}},t.prototype.willReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillReconcile&&n.traitWillReconcile(t,this)}},t.prototype.onReconcile=function(t){},t.prototype.didReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidReconcile&&n.traitDidReconcile(t,this)}},t.prototype.willRefreshChildModels=function(t,e){},t.prototype.onRefreshChildModels=function(t,e){},t.prototype.didRefreshChildModels=function(t,e){},t.prototype.refreshChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.willRefreshChildModel=function(t,e,i){},t.prototype.onRefreshChildModel=function(t,e,i){},t.prototype.didRefreshChildModel=function(t,e,i){},t.prototype.isConsuming=function(){return 0!=(this.traitFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.willStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStartConsuming&&o.traitWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStartConsuming&&o.traitDidStartConsuming(this)}},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.willStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStopConsuming&&o.traitWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStopConsuming&&o.traitDidStopConsuming(this)}},t.prototype.willAddTraitConsumer=function(t){},t.prototype.onAddTraitConsumer=function(t){},t.prototype.didAddTraitConsumer=function(t){},t.prototype.willRemoveTraitConsumer=function(t){},t.prototype.onRemoveTraitConsumer=function(t){},t.prototype.didRemoveTraitConsumer=function(t){},t.prototype.getLazyTraitService=function(e){var i=this.getTraitService(e);if(null===i){var o=t.getTraitServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitService(e,i))}return i},t.prototype.getLazyTraitProperty=function(e){var i=this.getTraitProperty(e);if(null===i){var o=t.getTraitPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitProperty(e,i))}return i},t.prototype.getLazyTraitModel=function(e){var i=this.getTraitModel(e);if(null===i){var o=t.getTraitModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitModel(e,i)}return i},t.prototype.getLazyTraitFastener=function(e){var i=this.getTraitFastener(e);if(null===i){var o=t.getTraitFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitFastener(e,i)}return i},Object.defineProperty(t.prototype,"modelContext",{get:function(){var t=this.model;return null!==t?t.modelContext:null},enumerable:!1,configurable:!0}),t.getTraitServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitServiceConstructors")){var i=e.traitServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitServiceConstructors")||(o.traitServiceConstructors={}),o.traitServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getTraitPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitPropertyConstructors")){var i=e.traitPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitPropertyConstructors")||(o.traitPropertyConstructors={}),o.traitPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getTraitModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitModelConstructors")){var i=e.traitModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitModelConstructors")||(r.traitModelConstructors={}),r.traitModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitModel(o);return null===e&&(e=new t(this,n,o),this.setTraitModel(o,e)),e},configurable:!0,enumerable:!0})},t.getTraitFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitFastenerConstructors")){var i=e.traitFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitFastenerConstructors")||(r.traitFastenerConstructors={}),r.traitFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitFastener(o);return null===e&&(e=new t(this,n,o),this.setTraitFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t}(),y=function(){function t(){Object.defineProperty(this,"rootModels",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"modelManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelManagerObserver(t),Object.defineProperty(this,"modelManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelManagerObserver(t),this.didAddModelManagerObserver(t))},t.prototype.willAddModelManagerObserver=function(t){},t.prototype.onAddModelManagerObserver=function(t){},t.prototype.didAddModelManagerObserver=function(t){},t.prototype.removeModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelManagerObserver(t),Object.defineProperty(this,"modelManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelManagerObserver(t),this.didRemoveModelManagerObserver(t))},t.prototype.willRemoveModelManagerObserver=function(t){},t.prototype.onRemoveModelManagerObserver=function(t){},t.prototype.didRemoveModelManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootModels.length},t.prototype.willAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillAttach&&o.modelManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidAttach&&o.modelManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillDetach&&o.modelManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidDetach&&o.modelManagerDidDetach(this)}},t.prototype.insertRootModel=function(t){var i=this.rootModels,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootModel(t),Object.defineProperty(this,"rootModels",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootModel(t),this.didInsertRootModel(t),n&&this.didAttach()}},t.prototype.willInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillInsertRootModel&&n.modelManagerWillInsertRootModel(t,this)}},t.prototype.onInsertRootModel=function(t){},t.prototype.didInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidInsertRootModel&&n.modelManagerDidInsertRootModel(t,this)}},t.prototype.removeRootModel=function(t){var i=this.rootModels,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootModel(t),Object.defineProperty(this,"rootModels",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootModel(t),this.didRemoveRootModel(t),n&&this.didDetach()}},t.prototype.willRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillRemoveRootModel&&n.modelManagerWillRemoveRootModel(t,this)}},t.prototype.onRemoveRootModel=function(t){},t.prototype.didRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidRemoveRootModel&&n.modelManagerDidRemoveRootModel(t,this)}},t}(),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function m(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}function b(t,e){for(var i=0,o=e.length,n=t.length;i<o;i++,n++)t[n]=e[i];return t}var S=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"modelContext",{value:e.initModelContext(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.analyzeTimer=0,e.refreshTimer=0,e.updateDelay=i.MinUpdateDelay,e.runAnalyzePass=e.runAnalyzePass.bind(e),e.runRefreshPass=e.runRefreshPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initModelContext=function(){return{updateTime:0}},i.prototype.updatedModelContext=function(){var t=this.modelContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootModels()},i.prototype.powerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootModel(o)}},i.prototype.powerRootModel=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootModels()},i.prototype.unpowerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootModel(o)}},i.prototype.unpowerRootModel=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&c.AnalyzeMask)&&this.setRootFlags(this.rootFlags|c.NeedsAnalyze),0!=(e&c.RefreshMask)&&this.setRootFlags(this.rootFlags|c.NeedsRefresh),0!=(this.rootFlags&c.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxAnalyzeInterval&&0==(this.rootFlags&(c.TraversingFlag|c.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.analyzeTimer&&0===this.refreshTimer&&0==(t&c.UpdatingMask)&&0!=(t&c.UpdateMask)&&(this.analyzeTimer=setTimeout(this.runAnalyzePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.analyzeTimer&&(clearTimeout(this.analyzeTimer),this.analyzeTimer=0),0!==this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|c.ImmediateFlag);try{0!=(this.rootFlags&c.AnalyzeMask)&&(this.cancelUpdate(),this.runAnalyzePass(!0)),0!=(this.rootFlags&c.RefreshMask)&&this.updateDelay<=i.MaxAnalyzeInterval&&(this.cancelUpdate(),this.runRefreshPass(!0))}finally{this.setRootFlags(this.rootFlags&~c.ImmediateFlag)}},i.prototype.runAnalyzePass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~c.AnalyzeMask|c.TraversingFlag|c.AnalyzingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var a=e[r];0!=(a.modelFlags&c.AnalyzeMask)&&a.cascadeAnalyze(0,n)}var s=performance.now(),l=Math.max(i.MinAnalyzeInterval,this.updateDelay);this.updateDelay=s-o>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&c.RefreshMask)?this.refreshTimer=setTimeout(this.runRefreshPass,i.MinRefreshInterval):0!=(this.rootFlags&c.AnalyzeMask)&&(t&&(l=Math.max(i.MaxAnalyzeInterval,l)),this.analyzeTimer=setTimeout(this.runAnalyzePass,l))}finally{this.setRootFlags(this.rootFlags&~(c.TraversingFlag|c.AnalyzingFlag))}},i.prototype.runRefreshPass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~c.RefreshMask|c.TraversingFlag|c.RefreshingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var a=e[r];0!=(a.modelFlags&c.RefreshMask)&&a.cascadeRefresh(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&c.AnalyzeMask)){var s=this.updateDelay;t&&(s=Math.max(i.MaxAnalyzeInterval,s)),this.analyzeTimer=setTimeout(this.runAnalyzePass,s)}else 0!=(this.rootFlags&c.RefreshMask)&&(this.refreshTimer=setTimeout(this.runRefreshPass,i.MaxRefreshInterval))}finally{this.setRootFlags(this.rootFlags&~(c.TraversingFlag|c.RefreshingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootModel=function(e){t.prototype.onInsertRootModel.call(this,e),this.requestUpdate(e,e.modelFlags&c.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinAnalyzeInterval=12,i.MaxAnalyzeInterval=33,i.MinRefreshInterval=4,i.MaxRefreshInterval=16,m([e.Lazy],i,"global",null),i}(y),C=function(t){function o(e){var i=t.call(this)||this;return Object.defineProperty(i,"client",{value:e,enumerable:!0,configurable:!0}),i}return w(o,t),o.global=function(){return new o(i.client)},m([e.Lazy],o,"global",null),o}(y),P=function(t,e){return this instanceof P?V.call(this,t,e):(i=t,c.decorateModelService.bind(c,P.define(i)));var i};function V(t,i){var o;return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(o=this.inherit)&&void 0!==o&&o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitServices",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(P,Object),P.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},P.prototype.isInherited=function(){return 0!=(this.serviceFlags&P.InheritedFlag)},P.prototype.setInherited=function(t){if(t&&0==(this.serviceFlags&P.InheritedFlag)){var e=this.superService;null!==e&&(this.setServiceFlags(this.serviceFlags|P.InheritedFlag),Object.defineProperty(this,"manager",{value:e.manager,enumerable:!0,configurable:!0}))}else t||0==(this.serviceFlags&P.InheritedFlag)||this.setServiceFlags(this.serviceFlags&~P.InheritedFlag)},P.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(P.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),P.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentModel;if(null!==o){if(null===(n=(e=o).getModelService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyModelService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|P.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~P.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})));for(var r=this.traitServices,a=0,s=r.length;a<s;a+=1){var l=r[a];l.setServiceFlags(l.serviceFlags&~P.InheritedFlag|this.serviceFlags&P.InheritedFlag),Object.defineProperty(l,"manager",{value:this.manager,enumerable:!0,configurable:!0})}},P.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~P.InheritedFlag);for(var t=this.traitServices,e=0,i=t.length;e<i;e+=1){var o=t[e];o.setServiceFlags(o.serviceFlags&~P.InheritedFlag)}},P.prototype.addTraitService=function(t){Object.defineProperty(this,"traitServices",{value:e.Arrays.inserted(t,this.traitServices),enumerable:!0,configurable:!0})},P.prototype.removeTraitService=function(t){Object.defineProperty(this,"traitServices",{value:e.Arrays.removed(t,this.traitServices),enumerable:!0,configurable:!0})},Object.defineProperty(P.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),P.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},P.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},P.prototype.initManager=function(){},P.prototype.mount=function(){this.bindSuperService()},P.prototype.unmount=function(){this.unbindSuperService()},P.getClass=function(t){return t===S?A:t===C?O:t===y?T:null},P.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=P.getClass(t.type)),null===e&&(e=P);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},a=t;return Object.setPrototypeOf(r,e),(r.prototype=a).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(a.initManager=function(){return i}),Object.defineProperty(a,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},P.InheritedFlag=1;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootModel(this.owner),!1!==this.observe&&e.addModelManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeModelManagerObserver(this),this.isInherited()||e.removeRootModel(this.owner)),t.prototype.unmount.call(this)},e}(P),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"modelContext",{get:function(){var t=this.manager;return void 0===t&&(t=S.global()),t.modelContext},enumerable:!1,configurable:!0}),e.prototype.updatedModelContext=function(){var t=this.manager;return void 0===t&&(t=S.global()),t.updatedModelContext()},e.prototype.initManager=function(){return S.global()},e}(T);P({type:S,observe:!1})(c.prototype,"refreshService");var F=function(t,e){return this instanceof F?M.call(this,t,e):(i=t,v.decorateTraitService.bind(v,F.define(i)));var i};function M(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"modelService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(F,Object),F.prototype.createModelService=function(){var t=this.modelServiceConstructor;if(void 0!==t){var e=this.owner.model;if(null!==e){var i=new t(e,this.name);return Object.defineProperty(i,"inherit",{value:this.inherit,enumerable:!0,configurable:!0}),i.setServiceFlags(this.serviceFlags),i}throw new Error("no model")}throw new Error("no model service constructor")},F.prototype.bindModelService=function(){var t=this.owner.model;if(null!==t){var e=t.getLazyModelService(this.name);null===e&&(e=this.createModelService(),t.setModelService(this.name,e)),Object.defineProperty(this,"modelService",{value:e,enumerable:!0,configurable:!0}),e.addTraitService(this),Object.defineProperty(this,"inherit",{value:e.inherit,enumerable:!0,configurable:!0}),this.setServiceFlags(e.serviceFlags),Object.defineProperty(this,"manager",{value:e.manager,enumerable:!0,configurable:!0})}},F.prototype.unbindModelService=function(){var t=this.modelService;null!==t&&(t.removeTraitService(this),Object.defineProperty(this,"modelService",{value:null,enumerable:!0,configurable:!0}))},F.prototype.setInherit=function(t){var e=this.modelService;null!==e?e.setInherit(t):Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0})},F.prototype.isInherited=function(){return 0!=(this.serviceFlags&P.InheritedFlag)},F.prototype.setInherited=function(t){var e=this.modelService;if(null!==e)e.setInherited(t);else if(t&&0==(this.serviceFlags&P.InheritedFlag)){var i=this.superService;null!==i&&(this.setServiceFlags(this.serviceFlags|P.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0}))}else t||0==(this.serviceFlags&P.InheritedFlag)||this.setServiceFlags(this.serviceFlags&~P.InheritedFlag)},F.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(F.prototype,"superName",{get:function(){var t=this.modelService;return null!==t?t.superName:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"superService",{get:function(){var t=this.modelService;return null!==t?t.superService:null},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"superManager",{get:function(){var t=this.modelService;return null!==t?t.superManager:void 0},enumerable:!0,configurable:!0}),F.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},F.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},F.prototype.attach=function(){this.bindModelService(),this.manager instanceof y&&!0===this.observe&&this.manager.addModelManagerObserver(this)},F.prototype.detach=function(){this.manager instanceof y&&!0===this.observe&&this.manager.removeModelManagerObserver(this),this.unbindModelService()},F.define=function(t){var e=t.extends,i=t.type,o=t.manager,n=t.inherit,r=t.initManager,a=t.modelService;delete t.extends,delete t.manager,delete t.modelService,void 0===e&&(e=F);var s=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},l=t;return Object.setPrototypeOf(s,e),(s.prototype=l).constructor=s,Object.setPrototypeOf(s.prototype,e.prototype),void 0!==o&&void 0===r&&(r=function(){return o},l.initManager=r),Object.defineProperty(l,"inherit",{value:null==n||n,enumerable:!0,configurable:!0}),void 0===l.modelServiceConstructor&&(void 0===a&&(a={extends:void 0,type:i,manager:o,inherit:n},void 0!==r&&(a.initManager=r)),l.modelServiceConstructor=P.define(a)),s};var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"client",{get:function(){return this.manager.client},enumerable:!1,configurable:!0}),e.prototype.initManager=function(){return C.global()},e}(T);P({type:C,observe:!1})(c.prototype,"warpService"),F({type:C,observe:!1,modelService:{type:C,observe:!1}})(v.prototype,"warpService");var x=function(t,e){return this instanceof x?D.call(this,t,e):(i=t,c.decorateModelProperty.bind(c,x.define(i)));var i};function D(t,i){var o,n;return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(o=this.inherit)&&void 0!==o&&o,enumerable:!0,configurable:!0}),void 0!==this.initState&&(n=this.fromAny(this.initState())),Object.defineProperty(this,"propertyFlags",{value:x.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitProperties",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"state",{value:n,enumerable:!0,configurable:!0}),this}w(x,Object),x.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},x.prototype.isInherited=function(){return 0!=(this.propertyFlags&x.InheritedFlag)},x.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&(x.InheritedFlag|x.OverrideFlag))){var e=this.superProperty;if(null!==e){this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag|x.InheritedFlag),Object.defineProperty(this,"state",{value:e.state,enumerable:!0,configurable:!0}),this.owner.requireUpdate(c.NeedsMutate);for(var i=0,o=(n=this.traitProperties).length;i<o;i+=1){(r=n[i]).setPropertyFlags(r.propertyFlags|x.UpdatedFlag|x.InheritedFlag),r.mutate()}}}else if(!t&&0!=(this.propertyFlags&x.InheritedFlag)){this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag);var n;for(i=0,o=(n=this.traitProperties).length;i<o;i+=1){var r;(r=n[i]).setPropertyFlags(r.propertyFlags&~x.InheritedFlag)}}},x.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(x.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),x.prototype.bindSuperProperty=function(){var t=this.superName,e=this.owner;if(void 0!==t&&e.isMounted())for(;;){var i=e.parentModel;if(null!==i){var o=(e=i).getLazyModelProperty(t);if(null===o)continue;if(Object.defineProperty(this,"superProperty",{value:o,enumerable:!0,configurable:!0}),o.addSubProperty(this),0==(this.propertyFlags&x.OverrideFlag)){this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag|x.InheritedFlag),Object.defineProperty(this,"state",{value:o.state,enumerable:!0,configurable:!0}),this.owner.requireUpdate(c.NeedsMutate);for(var n=this.traitProperties,r=0,a=n.length;r<a;r+=1){var s=n[r];s.setPropertyFlags(s.propertyFlags|x.UpdatedFlag|x.InheritedFlag),s.mutate()}}}break}},x.prototype.unbindSuperProperty=function(){var t=this.superProperty;if(null!==t){t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag);for(var e=this.traitProperties,i=0,o=e.length;i<o;i+=1){var n=e[i];n.setPropertyFlags(n.propertyFlags&~x.InheritedFlag)}}},x.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},x.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},x.prototype.addTraitProperty=function(t){Object.defineProperty(this,"traitProperties",{value:e.Arrays.inserted(t,this.traitProperties),enumerable:!0,configurable:!0})},x.prototype.removeTraitProperty=function(t){Object.defineProperty(this,"traitProperties",{value:e.Arrays.removed(t,this.traitProperties),enumerable:!0,configurable:!0})},x.prototype.isAuto=function(){return 0==(this.propertyFlags&x.OverrideFlag)},x.prototype.setAuto=function(t){if(t&&0!=(this.propertyFlags&x.OverrideFlag)){this.setPropertyFlags(this.propertyFlags&~x.OverrideFlag);for(var e=0,i=(o=this.traitProperties).length;e<i;e+=1){(n=o[e]).setPropertyFlags(n.propertyFlags&~x.OverrideFlag)}}else if(!t&&0==(this.propertyFlags&x.OverrideFlag)){this.setPropertyFlags(this.propertyFlags|x.OverrideFlag);var o;for(e=0,i=(o=this.traitProperties).length;e<i;e+=1){var n;(n=o[e]).setPropertyFlags(n.propertyFlags|x.OverrideFlag)}}},x.prototype.isUpdated=function(){return 0!=(this.propertyFlags&x.UpdatedFlag)},Object.defineProperty(x.prototype,"ownState",{get:function(){return this.isInherited()?void 0:this.state},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),x.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},x.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},x.prototype.setState=function(t){if(0==(this.propertyFlags&x.OverrideFlag)){this.setPropertyFlags(this.propertyFlags|x.OverrideFlag);for(var e=this.traitProperties,i=0,o=e.length;i<o;i+=1){var n=e[i];n.setPropertyFlags(n.propertyFlags|x.OverrideFlag)}}this.setOwnState(t)},x.prototype.willSetOwnState=function(t,e){},x.prototype.onSetOwnState=function(t,e){},x.prototype.didSetOwnState=function(t,e){},x.prototype.setAutoState=function(t){0==(this.propertyFlags&x.OverrideFlag)&&this.setOwnState(t)},x.prototype.setOwnState=function(t){var i=this.state;if(t=this.fromAny(t),0!=(this.propertyFlags&x.InheritedFlag)){this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag);for(var o=this.traitProperties,n=0,r=o.length;n<r;n+=1){var a=o[n];a.setPropertyFlags(a.propertyFlags&~x.InheritedFlag)}}e.Equals(i,t)||(this.willSetOwnState(t,i),this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag),this.onSetOwnState(t,i),this.onSetState(t,i),this.updateSubProperties(t,i),this.updateTraitPropertys(t,i),this.didSetState(t,i),this.didSetOwnState(t,i))},x.prototype.setBaseState=function(t){var e;this.isInherited()&&null!==(e=this.superProperty)?(t=this.fromAny(t),e.setBaseState(t)):this.setState(t)},Object.defineProperty(x.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&x.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),x.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&x.UpdatedFlag)?(this.setPropertyFlags(t&~x.UpdatedFlag),this.state):void 0},x.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~x.UpdatedFlag),this.state},x.prototype.onMutate=function(){this.isInherited()&&this.updateInherited()},x.prototype.updateInherited=function(){var t=this.superProperty;null!==t&&this.update(t.state,this.state)},x.prototype.update=function(t,i){e.Equals(i,t)||(this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.updateTraitPropertys(t,i),this.didSetState(t,i))},x.prototype.willSetState=function(t,e){},x.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},x.prototype.didSetState=function(t,e){},x.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.mutate()}},x.prototype.updateTraitPropertys=function(t,e){for(var i=this.traitProperties,o=0,n=i.length;o<n;o+=1){i[o].mutate()}},x.prototype.mutate=function(){this.owner.requireUpdate(c.NeedsMutate)},x.prototype.fromAny=function(t){return t},x.prototype.mount=function(){this.bindSuperProperty()},x.prototype.unmount=function(){this.unbindSuperProperty()},x.getClass=function(t){return t===String?R:t===Boolean?L:t===Number?k:null},x.define=function(t){var i=t.extends,o=t.state,n=t.inherit,r=t.initState;delete t.extends,delete t.state,void 0===i&&(i=x.getClass(t.type)),null===i&&(i=x,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},s=t;return Object.setPrototypeOf(a,i),(a.prototype=s).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),void 0!==o&&void 0===r&&(s.initState=function(){return o}),Object.defineProperty(s,"inherit",{value:null!=n&&n,enumerable:!0,configurable:!0}),a},x.UpdatedFlag=1,x.OverrideFlag=2,x.InheritedFlag=4;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(x),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(x),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(x),j=function(t,e){return this instanceof j?I.call(this,t,e):(i=t,v.decorateTraitProperty.bind(v,j.define(i)));var i};function I(t,e){var i,o;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"modelProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),void 0!==this.initState&&(o=this.fromAny(this.initState())),Object.defineProperty(this,"propertyFlags",{value:x.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"state",{value:o,enumerable:!0,configurable:!0}),this}w(j,Object),j.prototype.createModelProperty=function(){var t=this.modelPropertyConstructor;if(void 0!==t){var e=this.owner.model;if(null!==e){var i=new t(e,this.name);return Object.defineProperty(i,"inherit",{value:this.inherit,enumerable:!0,configurable:!0}),i.setPropertyFlags(this.propertyFlags),Object.defineProperty(i,"state",{value:this.state,enumerable:!0,configurable:!0}),i}throw new Error("no model")}throw new Error("no model property constructor")},j.prototype.bindModelProperty=function(){var t=this.owner.model;if(null!==t){var e=t.getLazyModelProperty(this.name);null===e&&(e=this.createModelProperty(),t.setModelProperty(this.name,e)),Object.defineProperty(this,"modelProperty",{value:e,enumerable:!0,configurable:!0}),e.addTraitProperty(this),Object.defineProperty(this,"inherit",{value:e.inherit,enumerable:!0,configurable:!0}),this.setPropertyFlags(e.propertyFlags),Object.defineProperty(this,"state",{value:e.state,enumerable:!0,configurable:!0})}},j.prototype.unbindModelProperty=function(){var t=this.modelProperty;null!==t&&(t.removeTraitProperty(this),Object.defineProperty(this,"modelProperty",{value:null,enumerable:!0,configurable:!0}))},j.prototype.setInherit=function(t){var e=this.modelProperty;null!==e?e.setInherit(t):this.inherit!==t&&Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0})},j.prototype.isInherited=function(){return 0!=(this.propertyFlags&x.InheritedFlag)},j.prototype.setInherited=function(t){var e=this.modelProperty;if(null!==e)e.setInherited(t);else if(t&&0==(this.propertyFlags&(x.InheritedFlag|x.OverrideFlag))){null!==this.superProperty&&(this.setPropertyFlags(this.propertyFlags|x.InheritedFlag),this.mutate())}else t||0==(this.propertyFlags&x.InheritedFlag)||this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag)},j.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(j.prototype,"superName",{get:function(){var t=this.modelProperty;return null!==t?t.superName:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"superProperty",{get:function(){var t=this.modelProperty;return null!==t?t.superProperty:null},enumerable:!0,configurable:!0}),j.prototype.isAuto=function(){return 0==(this.propertyFlags&x.OverrideFlag)},j.prototype.setAuto=function(t){var e=this.modelProperty;null!==e?e.setAuto(t):t&&0!=(this.propertyFlags&x.OverrideFlag)?this.setPropertyFlags(this.propertyFlags&~x.OverrideFlag):t||0!=(this.propertyFlags&x.OverrideFlag)||this.setPropertyFlags(this.propertyFlags|x.OverrideFlag)},j.prototype.isUpdated=function(){return 0!=(this.propertyFlags&x.UpdatedFlag)},Object.defineProperty(j.prototype,"ownState",{get:function(){return this.isInherited()?void 0:this.state},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"superState",{get:function(){var t=this.modelProperty;return null!==t?t.superState:void 0},enumerable:!0,configurable:!0}),j.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},j.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},j.prototype.setState=function(t){var e=this.modelProperty;null!==e?(t=this.fromAny(t),e.setState(t)):(this.setPropertyFlags(this.propertyFlags|x.OverrideFlag),this.setOwnState(t))},j.prototype.willSetOwnState=function(t,e){},j.prototype.onSetOwnState=function(t,e){},j.prototype.didSetOwnState=function(t,e){},j.prototype.setAutoState=function(t){var e=this.modelProperty;null!==e?(t=this.fromAny(t),e.setAutoState(t)):0==(this.propertyFlags&x.OverrideFlag)&&this.setOwnState(t)},j.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.modelProperty;if(null!==i)i.setOwnState(t);else{var o=this.state;this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag),e.Equals(o,t)||(this.willSetOwnState(t,o),this.willSetState(t,o),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag),this.onSetOwnState(t,o),this.onSetState(t,o),this.didSetState(t,o),this.didSetOwnState(t,o))}},j.prototype.setBaseState=function(t){var e=this.modelProperty;null!==e?(t=this.fromAny(t),e.setBaseState(t)):this.setState(t)},j.prototype.onMutate=function(){this.isInherited()&&this.updateInherited()},j.prototype.updateInherited=function(){var t=this.modelProperty;null!==t&&this.update(t.state,this.state)},j.prototype.update=function(t,i){e.Equals(i,t)||(this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag),this.onSetState(t,i),this.didSetState(t,i))},j.prototype.willSetState=function(t,e){},j.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},j.prototype.didSetState=function(t,e){},j.prototype.mutate=function(){this.owner.requireUpdate(c.NeedsMutate)},j.prototype.attach=function(){this.bindModelProperty()},j.prototype.detach=function(){this.unbindModelProperty()},j.prototype.fromAny=function(t){return t},j.getClass=function(t){return t===String?E:t===Boolean?W:t===Number?N:null},j.define=function(t){var i=t.extends,o=t.type,n=t.state,r=t.inherit,a=t.initState,s=t.modelProperty;delete t.extends,delete t.state,delete t.modelProperty,void 0===i&&(i=j.getClass(o)),null===i&&(i=j,void 0===t.fromAny&&e.FromAny.is(o)&&(t.fromAny=o.fromAny));var l=function(t,e){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},u=t;return Object.setPrototypeOf(l,i),(l.prototype=u).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),void 0!==n&&void 0===a&&(u.initState=function(){return n}),Object.defineProperty(u,"inherit",{value:null!=r&&r,enumerable:!0,configurable:!0}),void 0===u.modelPropertyConstructor&&(void 0===s&&(s={extends:void 0,type:o,state:n,inherit:r}),u.modelPropertyConstructor=x.define(s)),l};var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(j),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(j),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(j),U=function(t,e,i){return this instanceof U?B.call(this,t,e,i):(o=t,c.decorateModelFastener.bind(c,U.define(o)));var o};function B(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}w(U,Object),U.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},U.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},U.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentModel===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertModel(this.owner,t,e,this.key)),this.doSetModel(t,e),i},U.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},U.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},U.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},U.prototype.willSetModel=function(t,e,i){},U.prototype.onSetModel=function(t,e,i){},U.prototype.didSetModel=function(t,e,i){},Object.defineProperty(U.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),U.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},U.prototype.createModel=function(){return null},U.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},U.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},U.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof c?t:null},U.prototype.isMounted=function(){return 0!=(this.fastenerFlags&U.MountedFlag)},U.prototype.mount=function(){0==(this.fastenerFlags&U.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|U.MountedFlag),this.onMount(),this.didMount())},U.prototype.willMount=function(){},U.prototype.onMount=function(){},U.prototype.didMount=function(){},U.prototype.unmount=function(){0!=(this.fastenerFlags&U.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~U.MountedFlag),this.onUnmount(),this.didUnmount())},U.prototype.willUnmount=function(){},U.prototype.onUnmount=function(){},U.prototype.didUnmount=function(){},U.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=U);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},U.MountedFlag=1;var H=function(t,e,i){return this instanceof H?q.call(this,t,e,i):(o=t,c.decorateModelTrait.bind(c,H.define(o)));var o};function q(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(H,Object),H.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},H.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},H.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&(null===t||t.model===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertTrait(this.owner,t,e,this.key)),this.doSetTrait(t,e),i},H.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},H.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},H.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},H.prototype.willSetTrait=function(t,e,i){},H.prototype.onSetTrait=function(t,e,i){},H.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(H.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),H.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},H.prototype.createTrait=function(){return null},H.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},H.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},H.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},H.prototype.isMounted=function(){return 0!=(this.fastenerFlags&H.MountedFlag)},H.prototype.mount=function(){0==(this.fastenerFlags&H.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|H.MountedFlag),this.onMount(),this.didMount())},H.prototype.willMount=function(){},H.prototype.onMount=function(){},H.prototype.didMount=function(){},H.prototype.unmount=function(){0!=(this.fastenerFlags&H.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~H.MountedFlag),this.onUnmount(),this.didUnmount())},H.prototype.willUnmount=function(){},H.prototype.onUnmount=function(){},H.prototype.didUnmount=function(){},H.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=H);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},H.MountedFlag=1;var z=function t(e,i,o){return this instanceof t?Y.call(this,e,i,o):X(e)};function Y(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}function X(t){return v.decorateTraitModel.bind(v,z.define(t))}w(z,Object),z.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},z.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},z.prototype.setModel=function(t,e){var i,o=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&null!==(i=this.owner.model)&&(null===t||t.parentModel===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertModel(i,t,e,this.key)),this.doSetModel(t,e),o},z.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},z.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},z.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},z.prototype.willSetModel=function(t,e,i){},z.prototype.onSetModel=function(t,e,i){},z.prototype.didSetModel=function(t,e,i){},Object.defineProperty(z.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),z.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},z.prototype.createModel=function(){return null},z.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},z.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},z.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof c?t:null},z.prototype.isMounted=function(){return 0!=(this.fastenerFlags&z.MountedFlag)},z.prototype.mount=function(){0==(this.fastenerFlags&z.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|z.MountedFlag),this.onMount(),this.didMount())},z.prototype.willMount=function(){},z.prototype.onMount=function(){},z.prototype.didMount=function(){},z.prototype.unmount=function(){0!=(this.fastenerFlags&z.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~z.MountedFlag),this.onUnmount(),this.didUnmount())},z.prototype.willUnmount=function(){},z.prototype.onUnmount=function(){},z.prototype.didUnmount=function(){},z.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=z);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},z.MountedFlag=1;var G=function(t,e,i){return this instanceof G?K.call(this,t,e,i):(o=t,v.decorateTraitFastener.bind(v,G.define(o)));var o};function K(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(G,Object),G.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},G.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},G.prototype.setTrait=function(t,e){var i,o=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&null!==(i=this.owner.model)&&(null===t||t.model===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertTrait(i,t,e,this.key)),this.doSetTrait(t,e),o},G.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},G.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},G.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},G.prototype.willSetTrait=function(t,e,i){},G.prototype.onSetTrait=function(t,e,i){},G.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(G.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),G.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},G.prototype.createTrait=function(){return null},G.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},G.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},G.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},G.prototype.isMounted=function(){return 0!=(this.fastenerFlags&G.MountedFlag)},G.prototype.mount=function(){0==(this.fastenerFlags&G.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|G.MountedFlag),this.onMount(),this.didMount())},G.prototype.willMount=function(){},G.prototype.onMount=function(){},G.prototype.didMount=function(){},G.prototype.unmount=function(){0!=(this.fastenerFlags&G.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~G.MountedFlag),this.onUnmount(),this.didUnmount())},G.prototype.willUnmount=function(){},G.prototype.onUnmount=function(){},G.prototype.didUnmount=function(){},G.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=G);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},G.MountedFlag=1;var Z={decorateModelDownlink:function(t,e,i){Object.defineProperty(e,i,{get:function(){var e=this.getModelDownlink(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelDownlink(i.toString(),e)),e},configurable:!0,enumerable:!0})}},_=function(t,e){return this instanceof _?Q.call(this,t,e):(i=t,Z.decorateModelDownlink.bind(Z,_.define(i)));var i};function Q(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"downlink",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"downlinkFlags",{value:_.PendingFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownWarp",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownHostUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownNodeUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownLaneUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownPrio",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownRate",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownBody",{value:null,enumerable:!0,configurable:!0}),this}w(_,Object),_.prototype.setDownlinkFlags=function(t){Object.defineProperty(this,"downlinkFlags",{value:t,enumerable:!0,configurable:!0})},_.prototype.enabled=function(t){return void 0===t?0!=(this.downlinkFlags&_.EnabledFlag):(t&&0==(this.downlinkFlags&_.EnabledFlag)?(this.setDownlinkFlags(this.downlinkFlags|_.EnabledFlag),this.owner.requireUpdate(c.NeedsReconcile)):t||0==(this.downlinkFlags&_.EnabledFlag)||(this.setDownlinkFlags(this.downlinkFlags&~_.EnabledFlag),this.owner.requireUpdate(c.NeedsReconcile)),this)},_.prototype.warp=function(t){return void 0===t?this.ownWarp:(null===t&&(t=void 0),this.ownWarp!==t&&(Object.defineProperty(this,"ownWarp",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.hostUri=function(t){return void 0===t?null!==this.ownHostUri?this.ownHostUri:(null!==(t=void 0!==this.initHostUri?this.initHostUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownHostUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownHostUri,t)||(Object.defineProperty(this,"ownHostUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.nodeUri=function(t){return void 0===t?null!==this.ownNodeUri?this.ownNodeUri:(null!==(t=void 0!==this.initNodeUri?this.initNodeUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownNodeUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownNodeUri,t)||(Object.defineProperty(this,"ownNodeUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.laneUri=function(t){return void 0===t?null!==this.ownLaneUri?this.ownLaneUri:(null!==(t=void 0!==this.initLaneUri?this.initLaneUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownLaneUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownLaneUri,t)||(Object.defineProperty(this,"ownLaneUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.prio=function(t){return 0===arguments.length?void 0!==this.ownPrio?this.ownPrio:(void 0!==(t=void 0!==this.initPrio?this.initPrio():void 0)&&Object.defineProperty(this,"ownPrio",{value:t,enumerable:!0,configurable:!0}),t):(this.ownPrio!==t&&(Object.defineProperty(this,"ownPrio",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.rate=function(t){return 0===arguments.length?void 0!==this.ownRate?this.ownRate:(void 0!==(t=void 0!==this.initRate?this.initRate():void 0)&&Object.defineProperty(this,"ownRate",{value:t,enumerable:!0,configurable:!0}),t):(this.ownRate!==t&&(Object.defineProperty(this,"ownRate",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.body=function(t){return void 0===t?null!==this.ownBody?this.ownBody:(null!==(t=void 0!==this.initBody?this.initBody():null)&&(t=o.Value.fromAny(t),Object.defineProperty(this,"ownBody",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=o.Value.fromAny(t)),e.Equals(this.ownBody,t)||(Object.defineProperty(this,"ownBody",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.link=function(){if(null===this.downlink){var t=this.ownWarp;null===t&&(t=this.owner.warpRef.state||null),null===t&&(t=this.owner.warpService.manager.client);var e=this.createDownlink(t);e=this.bindDownlink(e),void 0!==this.initDownlink&&(e=this.initDownlink(e)),e=e.observe(this),Object.defineProperty(this,"downlink",{value:e.open(),enumerable:!0,configurable:!0}),this.setDownlinkFlags(this.downlinkFlags&~_.PendingFlag)}},_.prototype.unlink=function(){var t=this.downlink;null!==t&&(t.close(),Object.defineProperty(this,"downlink",{value:null,enumerable:!0,configurable:!0}),this.setDownlinkFlags(this.downlinkFlags|_.PendingFlag))},_.prototype.relink=function(){this.setDownlinkFlags(this.downlinkFlags|_.PendingFlag),this.owner.requireUpdate(c.NeedsReconcile)},_.prototype.reconcile=function(){null!==this.downlink&&(this.downlinkFlags&_.RelinkMask)===_.RelinkMask?(this.unlink(),this.link()):null===this.downlink&&0!=(this.downlinkFlags&_.EnabledFlag)?this.link():null!==this.downlink&&0==(this.downlinkFlags&_.EnabledFlag)&&this.unlink()},_.prototype.bindDownlink=function(t){var e=this.hostUri();null!==e&&(t=t.hostUri(e));var i=this.nodeUri();null!==i&&(t=t.nodeUri(i));var o=this.laneUri();null!==o&&(t=t.laneUri(o));var n=this.prio();void 0!==n&&(t=t.prio(n));var r=this.rate();void 0!==r&&(t=t.rate(r));var a=this.body();return null!==a&&(t=t.body(a)),t},_.prototype.mount=function(){0!=(this.downlinkFlags&_.EnabledFlag)&&this.owner.requireUpdate(c.NeedsReconcile)},_.prototype.unmount=function(){this.unlink()},_.define=function(t){var e=t.type;if(delete t.type,"event"===e)return J.define(t);if("list"===e)return tt.define(t);if("map"===e)return it.define(t);if("value"===e)return rt.define(t);var i=t.extends,r=t.enabled,a=t.hostUri,s=t.nodeUri,l=t.laneUri,u=t.prio,h=t.rate,p=t.body;delete t.extends,delete t.enabled,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===i&&(i=_);var d=function(t,e){var o=i.call(this,t,e)||this;return!0===r&&Object.defineProperty(o,"downlinkFlags",{value:o.downlinkFlags|_.EnabledFlag,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(o,"ownHostUri",{value:a,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(o,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(o,"ownLaneUri",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(o,"ownPrio",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(o,"ownRate",{value:h,enumerable:!0,configurable:!0}),void 0!==p&&Object.defineProperty(o,"ownBody",{value:p,enumerable:!0,configurable:!0}),o},c=t;return Object.setPrototypeOf(d,i),(d.prototype=c).constructor=d,Object.setPrototypeOf(d.prototype,i.prototype),"function"==typeof a?(c.initHostUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof s?(c.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(c.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof u&&(c.initPrio=u,u=void 0),"function"==typeof h&&(c.initRate=h,h=void 0),"function"==typeof p?(c.initBody=p,p=void 0):void 0!==p&&(p=o.Value.fromAny(p)),d},_.PendingFlag=1,_.EnabledFlag=2,_.RelinkMask=_.PendingFlag|_.EnabledFlag;var J=function(t,e){return this instanceof J?$.call(this,t,e):(i=t,Z.decorateModelDownlink.bind(Z,J.define(i)));var i};function $(t,e){return _.call(this,t,e)||this}w(J,_),J.prototype.createDownlink=function(t){return t.downlink()},J.define=function(t){var e=t.extends,i=t.enabled,r=t.hostUri,a=t.nodeUri,s=t.laneUri,l=t.prio,u=t.rate,h=t.body;delete t.extends,delete t.enabled,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=J);var p=function(t,o){var n=e.call(this,t,o)||this;return!0===i&&Object.defineProperty(n,"downlinkFlags",{value:n.downlinkFlags|_.EnabledFlag,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownHostUri",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownNodeUri",{value:a,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownLaneUri",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownPrio",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownRate",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownBody",{value:h,enumerable:!0,configurable:!0}),n},d=t;return Object.setPrototypeOf(p,e),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,e.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof a?(d.initNodeUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof s?(d.initLaneUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l&&(d.initPrio=l,l=void 0),"function"==typeof u&&(d.initRate=u,u=void 0),"function"==typeof h?(d.initBody=h,h=void 0):void 0!==h&&(h=o.Value.fromAny(h)),p};var tt=function(t,e){return this instanceof tt?et.call(this,t,e):(i=t,Z.decorateModelDownlink.bind(Z,tt.define(i)));var i};function et(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}w(tt,_),tt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},Object.defineProperty(tt.prototype,"length",{get:function(){var t=this.downlink;return null!==t?t.length:0},enumerable:!0,configurable:!0}),tt.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},tt.prototype.get=function(t,e){var i=this.downlink;return null!==i?i.get(t,e):void 0},tt.prototype.getEntry=function(t,e){var i=this.downlink;return null!==i?i.getEntry(t,e):void 0},tt.prototype.set=function(t,e,i){var o=this.downlink;return null!=o&&o.set(t,e,i),this},tt.prototype.insert=function(t,e,i){var o=this.downlink;return null!=o&&o.insert(t,e,i),this},tt.prototype.remove=function(t,e){var i=this.downlink;return null!=i&&i.remove(t,e),this},tt.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.push.apply(i,t):0},tt.prototype.pop=function(){var t=this.downlink;return null!==t?t.pop():void 0},tt.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.unshift.apply(i,t):0},tt.prototype.shift=function(){var t=this.downlink;return null!==t?t.shift():void 0},tt.prototype.move=function(t,e,i){var o=this.downlink;return null!=o&&o.move(t,e,i),this},tt.prototype.splice=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.downlink;return null!==n?n.splice.apply(n,b([t,e],i)):[]},tt.prototype.clear=function(){var t=this.downlink;null!=t&&t.clear()},tt.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},tt.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},tt.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},tt.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},tt.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},tt.define=function(t){var e=t.extends,i=t.enabled,r=t.valueForm,a=t.hostUri,s=t.nodeUri,l=t.laneUri,u=t.prio,h=t.rate,p=t.body;delete t.extends,delete t.enabled,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=tt);var d=function(t,o){var n=function(t,e){return 0===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,!0===i&&Object.defineProperty(n,"downlinkFlags",{value:n.downlinkFlags|_.EnabledFlag,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownValueForm",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownHostUri",{value:a,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownLaneUri",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownPrio",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownRate",{value:h,enumerable:!0,configurable:!0}),void 0!==p&&Object.defineProperty(n,"ownBody",{value:p,enumerable:!0,configurable:!0}),n},c=t;return Object.setPrototypeOf(d,e),(d.prototype=c).constructor=d,Object.setPrototypeOf(d.prototype,e.prototype),"function"==typeof a?(c.initHostUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof s?(c.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(c.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof u&&(c.initPrio=u,u=void 0),"function"==typeof h&&(c.initRate=h,h=void 0),"function"==typeof p?(c.initBody=p,p=void 0):void 0!==p&&(p=o.Value.fromAny(p)),d};var it=function t(e,i){return this instanceof t?ot.call(this,e,i):nt(e)};function ot(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownKeyForm",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}function nt(t){return Z.decorateModelDownlink.bind(Z,it.define(t))}w(it,_),it.prototype.keyForm=function(t){return void 0===t?this.ownKeyForm:(this.ownKeyForm!==t&&(Object.defineProperty(this,"ownKeyForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},it.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},Object.defineProperty(it.prototype,"size",{get:function(){var t=this.downlink;return null!==t?t.size:0},enumerable:!0,configurable:!0}),it.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},it.prototype.has=function(t){var e=this.downlink;return null!==e&&e.has(t)},it.prototype.get=function(t){var e,i=this.downlink;return null!==i&&(e=i.get(t)),void 0===e&&null!==this.ownValueForm&&(e=this.ownValueForm.unit),e},it.prototype.getEntry=function(t){var e=this.downlink;return null!==e?e.getEntry(t):void 0},it.prototype.firstKey=function(){var t=this.downlink;return null!==t?t.firstKey():void 0},it.prototype.firstValue=function(){var t=this.downlink;return null!==t?t.firstValue():void 0},it.prototype.firstEntry=function(){var t=this.downlink;return null!==t?t.firstEntry():void 0},it.prototype.lastKey=function(){var t=this.downlink;return null!==t?t.lastKey():void 0},it.prototype.lastValue=function(){var t=this.downlink;return null!==t?t.lastValue():void 0},it.prototype.lastEntry=function(){var t=this.downlink;return null!==t?t.lastEntry():void 0},it.prototype.nextKey=function(t){var e=this.downlink;return null!==e?e.nextKey(t):void 0},it.prototype.nextValue=function(t){var e=this.downlink;return null!==e?e.nextValue(t):void 0},it.prototype.nextEntry=function(t){var e=this.downlink;return null!==e?e.nextEntry(t):void 0},it.prototype.previousKey=function(t){var e=this.downlink;return null!==e?e.previousKey(t):void 0},it.prototype.previousValue=function(t){var e=this.downlink;return null!==e?e.previousValue(t):void 0},it.prototype.previousEntry=function(t){var e=this.downlink;return null!==e?e.previousEntry(t):void 0},it.prototype.set=function(t,e){var i=this.downlink;return null!==i&&i.set(t,e),this},it.prototype.delete=function(t){var e=this.downlink;return null!==e&&e.delete(t)},it.prototype.drop=function(t){var e=this.downlink;return null!==e&&e.drop(t),this},it.prototype.take=function(t){var e=this.downlink;return null!==e&&e.take(t),this},it.prototype.clear=function(){var t=this.downlink;null!==t&&t.clear()},it.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},it.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},it.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},it.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},it.prototype.createDownlink=function(t){var e=t.downlinkMap();return null!==this.ownKeyForm&&(e=e.keyForm(this.ownKeyForm)),null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},it.define=function(t){var e=t.extends,i=t.enabled,r=t.keyForm,a=t.valueForm,s=t.hostUri,l=t.nodeUri,u=t.laneUri,h=t.prio,p=t.rate,d=t.body;delete t.extends,delete t.enabled,delete t.keyForm,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=it);var c=function(t,o){var n=function(t,e){return 1===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,!0===i&&Object.defineProperty(n,"downlinkFlags",{value:n.downlinkFlags|_.EnabledFlag,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownKeyForm",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownValueForm",{value:a,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownHostUri",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownNodeUri",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownLaneUri",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownPrio",{value:h,enumerable:!0,configurable:!0}),void 0!==p&&Object.defineProperty(n,"ownRate",{value:p,enumerable:!0,configurable:!0}),void 0!==d&&Object.defineProperty(n,"ownBody",{value:d,enumerable:!0,configurable:!0}),n},f=t;return Object.setPrototypeOf(c,e),(c.prototype=f).constructor=c,Object.setPrototypeOf(c.prototype,e.prototype),"function"==typeof s?(f.initHostUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(f.initNodeUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof u?(f.initLaneUri=u,u=void 0):void 0!==u&&(u=n.Uri.fromAny(u)),"function"==typeof h&&(f.initPrio=h,h=void 0),"function"==typeof p&&(f.initRate=p,p=void 0),"function"==typeof d?(f.initBody=d,d=void 0):void 0!==d&&(d=o.Value.fromAny(d)),c};var rt=function(t,e){return this instanceof rt?at.call(this,t,e):(i=t,Z.decorateModelDownlink.bind(Z,rt.define(i)));var i};function at(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}w(rt,_),rt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},rt.prototype.get=function(){var t=this.downlink;return null!==t?t.get():void 0},rt.prototype.set=function(t){var e=this.downlink;null!==e&&e.set(t)},rt.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},rt.define=function(t){var e=t.extends,i=t.enabled,r=t.valueForm,a=t.hostUri,s=t.nodeUri,l=t.laneUri,u=t.prio,h=t.rate,p=t.body;delete t.extends,delete t.enabled,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=rt);var d=function(t,o){var n=function(t){return 0===arguments.length?n.get():(n.set(t),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,!0===i&&Object.defineProperty(n,"downlinkFlags",{value:n.downlinkFlags|_.EnabledFlag,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownValueForm",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownHostUri",{value:a,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownLaneUri",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownPrio",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownRate",{value:h,enumerable:!0,configurable:!0}),void 0!==p&&Object.defineProperty(n,"ownBody",{value:p,enumerable:!0,configurable:!0}),n},c=t;return Object.setPrototypeOf(d,e),(d.prototype=c).constructor=d,Object.setPrototypeOf(d.prototype,e.prototype),"function"==typeof a?(c.initHostUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof s?(c.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(c.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof u&&(c.initPrio=u,u=void 0),"function"==typeof h&&(c.initRate=h,h=void 0),"function"==typeof p?(c.initBody=p,p=void 0):void 0!==p&&(p=o.Value.fromAny(p)),d};var st=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"model",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitConsumers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitModels",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitDownlinks",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.willObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setModel=function(t,e){this.willSetModel(t,e),null!==e&&this.detachModel(e),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),this.onSetModel(t,e),null!==t&&this.attachModel(t),this.didSetModel(t,e)},i.prototype.attachModel=function(t){this.attachTraitServices(),this.attachTraitProperties(),this.isMounted()&&(this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks())},i.prototype.detachModel=function(t){this.isMounted()&&(this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels()),this.detachTraitProperties(),this.detachTraitServices()},i.prototype.remove=function(){var t=this.model;null!==t&&t.removeTrait(this)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertTraitModel(e,i)},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeTraitModel(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertTraitFastener(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeTraitFastener(e)},i.prototype.doMount=function(){if(0!=(this.traitFlags&v.MountedFlag))throw new Error("already mounted");this.setTraitFlags(this.traitFlags|v.MountedFlag),this.willMount(),this.onMount(),this.didMount()},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks()},i.prototype.doUnmount=function(){if(0==(this.traitFlags&v.MountedFlag))throw new Error("already unmounted");this.setTraitFlags(this.traitFlags&~v.MountedFlag),this.willUnmount(),this.onUnmount(),this.didUnmount()},i.prototype.onUnmount=function(){this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels()},i.prototype.doPower=function(){if(0!=(this.traitFlags&v.PoweredFlag))throw new Error("already powered");this.setTraitFlags(this.traitFlags|v.PoweredFlag),this.willPower(),this.onPower(),this.didPower()},i.prototype.doUnpower=function(){if(0==(this.traitFlags&v.PoweredFlag))throw new Error("already unpowered");this.setTraitFlags(this.traitFlags&~v.PoweredFlag),this.willUnpower(),this.onUnpower(),this.didUnpower()},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateTraitProperties()},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileTraitDownlinks()},i.prototype.startConsuming=function(){0==(this.traitFlags&v.ConsumingFlag)&&(this.willStartConsuming(),this.setTraitFlags(this.traitFlags|v.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},i.prototype.stopConsuming=function(){0!=(this.traitFlags&v.ConsumingFlag)&&(this.willStopConsuming(),this.setTraitFlags(this.traitFlags&~v.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},i.prototype.addTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitConsumer(t),Object.defineProperty(this,"traitConsumers",{value:o,enumerable:!0,configurable:!0}),this.onAddTraitConsumer(t),this.didAddTraitConsumer(t),0===i.length&&this.startConsuming())},i.prototype.removeTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitConsumer(t),Object.defineProperty(this,"traitConsumers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveTraitConsumer(t),this.didRemoveTraitConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.hasTraitService=function(t){var e=this.traitServices;return null!==e&&void 0!==e[t]},i.prototype.getTraitService=function(t){var e=this.traitServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitService=function(t,e){var i=this.traitServices;null===i&&(i={},Object.defineProperty(this,"traitServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.detach(),null!==e?(i[t]=e,this.isMounted()&&e.attach()):delete i[t]},i.prototype.attachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].attach()}},i.prototype.detachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].detach()}},i.prototype.hasTraitProperty=function(t){var e=this.traitProperties;return null!==e&&void 0!==e[t]},i.prototype.getTraitProperty=function(t){var e=this.traitProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitProperty=function(t,e){var i=this.traitProperties;null===i&&(i={},Object.defineProperty(this,"traitProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.detach(),null!==e?(i[t]=e,this.isMounted()&&e.attach()):delete i[t]},i.prototype.mutateTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].onMutate()}},i.prototype.attachTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].attach()}},i.prototype.detachTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].detach()}},i.prototype.hasTraitModel=function(t){var e=this.traitModels;return null!==e&&void 0!==e[t]},i.prototype.getTraitModel=function(t){var e=this.traitModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitModel=function(t,e){var i=this.traitModels;null===i&&(i={},Object.defineProperty(this,"traitModels",{value:i,enumerable:!0,configurable:!0}));var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.child)){var n=this.getChildModel(e.name);null!==n&&e.doSetModel(n,null)}}else delete i[t]},i.prototype.mountTraitModels=function(){var t=this.traitModels;for(var e in t){var i=t[e];if(i.mount(),!0===i.child){var o=this.getChildModel(i.name);null!==o&&i.doSetModel(o,null)}}},i.prototype.unmountTraitModels=function(){var t=this.traitModels;for(var e in t){t[e].unmount()}},i.prototype.insertTraitModel=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitModel(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeTraitModel=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitModel(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasTraitFastener=function(t){var e=this.traitFasteners;return null!==e&&void 0!==e[t]},i.prototype.getTraitFastener=function(t){var e=this.traitFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitFastener=function(t,e){var i=this.traitFasteners;null===i&&(i={},Object.defineProperty(this,"traitFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.sibling)){var n=this.getTrait(e.name);null!==n&&e.doSetTrait(n,null)}}else delete i[t]},i.prototype.mountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){var i=t[e];if(i.mount(),!0===i.sibling){var o=this.getTrait(i.name);null!==o&&i.doSetTrait(o,null)}}},i.prototype.unmountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertTraitFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitFastener(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeTraitFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitFastener(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.traitDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.traitDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.traitDownlinks;null===i&&(i={},Object.defineProperty(this,"traitDownlinks",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].mount()}},i.prototype.unmountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].reconcile()}},i}(v);j({type:Object,inherit:!0,modelProperty:{type:Object,inherit:!0,updateFlags:c.NeedsReconcile}})(v.prototype,"warpRef");var lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.attachDriver=function(t){t.isConsuming()&&this.addTraitConsumer(t)},e.prototype.detachDriver=function(t){t.isConsuming()&&this.removeTraitConsumer(t)},e.prototype.driverDidStartConsuming=function(t){this.addTraitConsumer(t)},e.prototype.driverWillStopConsuming=function(t){this.removeTraitConsumer(t)},m([G({type:v,observe:!0,onSetTrait:function(t,e){null!==e&&this.owner.detachDriver(e),null!==t&&this.owner.attachDriver(t)},traitDidStartConsuming:function(t){this.owner.driverDidStartConsuming(t)},traitWillStopConsuming:function(t){this.owner.driverWillStopConsuming(t)}})],e.prototype,"driver",void 0),e}(st),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidSet=function(t,e){},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.downlink.enabled(!0)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.downlink.enabled(!1)},m([rt({didSet:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidSet(t,e)}})],e.prototype,"downlink",void 0),e}(lt),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidUpdate=function(t,e,i){},e.prototype.downlinkDidRemove=function(t,e){},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.downlink.enabled(!0)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.downlink.enabled(!1)},m([it({didUpdate:function(t,e,i){this.owner.isConsuming()&&this.owner.downlinkDidUpdate(t,e,i)},didRemove:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidRemove(t,e)}})],e.prototype,"downlink",void 0),e}(lt),pt=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"parentModel",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelConsumers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelDownlinks",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.willObserve=function(t){var e,i=this.modelController;if(null!==i&&void 0!==(e=t.call(this,i)))return e;for(var o=this.modelObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];if(void 0!==(e=t.call(this,a)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}var a=this.modelController;return null!==a&&(e=t.call(this,a)),e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setParentModel=function(t,e){this.willSetParentModel(t,e),null!==e&&this.detachParentModel(e),Object.defineProperty(this,"parentModel",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentModel(t),this.onSetParentModel(t,e),this.didSetParentModel(t,e)},i.prototype.remove=function(){var t=this.parentModel;null!==t&&(0==(this.modelFlags&c.TraversingFlag)?t.removeChildModel(this):this.setModelFlags(this.modelFlags|c.RemovingFlag))},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertModelFastener(e,i)},i.prototype.cascadeInsert=function(t,e){},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeModelFastener(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertModelTrait(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeModelTrait(e)},i.prototype.cascadeMount=function(){if(0!=(this.modelFlags&c.MountedFlag))throw new Error("already mounted");this.setModelFlags(this.modelFlags|c.MountedFlag|c.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountTraits(),this.doMountChildModels(),this.didMount()}finally{this.setModelFlags(this.modelFlags&~c.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountModelServices(),this.mountModelProperties(),this.mountModelFasteners(),this.mountModelTraits(),this.mountModelDownlinks()},i.prototype.doMountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doMount()},i.prototype.doMountChildModels=function(){this.forEachChildModel((function(t){t.cascadeMount(),0!=(t.modelFlags&c.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~c.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.modelFlags&c.MountedFlag))throw new Error("already unmounted");this.setModelFlags(this.modelFlags&~c.MountedFlag|c.TraversingFlag);try{this.willUnmount(),this.doUnmountChildModels(),this.doUnmountTraits(),this.onUnmount(),this.didUnmount()}finally{this.setModelFlags(this.modelFlags&~c.TraversingFlag)}},i.prototype.onUnmount=function(){this.unmountModelDownlinks(),this.unmountModelTraits(),this.unmountModelFasteners(),this.unmountModelProperties(),this.unmountModelServices(),this.setModelFlags(this.modelFlags&(~c.ModelFlagMask|c.RemovingFlag))},i.prototype.doUnmountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doUnmount()},i.prototype.doUnmountChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnmount(),0!=(t.modelFlags&c.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~c.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.modelFlags&c.PoweredFlag))throw new Error("already powered");this.setModelFlags(this.modelFlags|c.PoweredFlag|c.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerTraits(),this.doPowerChildModels(),this.didPower()}finally{this.setModelFlags(this.modelFlags&~c.TraversingFlag)}},i.prototype.doPowerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doPower()},i.prototype.doPowerChildModels=function(){this.forEachChildModel((function(t){t.cascadePower(),0!=(t.modelFlags&c.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~c.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.modelFlags&c.PoweredFlag))throw new Error("already unpowered");this.setModelFlags(this.modelFlags&~c.PoweredFlag|c.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildModels(),this.doUnpowerTraits(),this.onUnpower(),this.didUnpower()}finally{this.setModelFlags(this.modelFlags&~c.TraversingFlag)}},i.prototype.doUnpowerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doUnpower()},i.prototype.doUnpowerChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnpower(),0!=(t.modelFlags&c.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~c.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeAnalyze=function(t,e){var i=this.extendModelContext(e);t&=~c.NeedsAnalyze,t|=this.modelFlags&c.UpdateMask,0!=((t=this.needsAnalyze(t,i))&c.AnalyzeMask)&&this.doAnalyze(t,i)},i.prototype.doAnalyze=function(t,e){var i=t;this.setModelFlags(this.modelFlags&~c.NeedsAnalyze|c.TraversingFlag|c.AnalyzingFlag);try{this.willAnalyze(i,e),0!=((this.modelFlags|t)&c.NeedsMutate)&&(i|=c.NeedsMutate,this.setModelFlags(this.modelFlags&~c.NeedsMutate),this.willMutate(e)),0!=((this.modelFlags|t)&c.NeedsAggregate)&&(i|=c.NeedsAggregate,this.setModelFlags(this.modelFlags&~c.NeedsAggregate),this.willAggregate(e)),0!=((this.modelFlags|t)&c.NeedsCorrelate)&&(i|=c.NeedsCorrelate,this.setModelFlags(this.modelFlags&~c.NeedsCorrelate),this.willCorrelate(e)),this.onAnalyze(i,e),0!=(i&c.NeedsMutate)&&this.onMutate(e),0!=(i&c.NeedsAggregate)&&this.onAggregate(e),0!=(i&c.NeedsCorrelate)&&this.onCorrelate(e),this.doAnalyzeChildModels(i,e),0!=(i&c.NeedsCorrelate)&&this.didCorrelate(e),0!=(i&c.NeedsAggregate)&&this.didAggregate(e),0!=(i&c.NeedsMutate)&&this.didMutate(e),this.didAnalyze(i,e)}finally{this.setModelFlags(this.modelFlags&~(c.TraversingFlag|c.AnalyzingFlag))}},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateModelProperties()},i.prototype.analyzeTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].analyzeChildModels(i,o,n,this.analyzeTraitChildModels.bind(this,t,e+1)):this.analyzeOwnChildModels(i,o,n)},i.prototype.analyzeChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.analyzeTraitChildModels(o,0,t,e,i):this.analyzeOwnChildModels(t,e,i)},i.prototype.cascadeRefresh=function(t,e){var i=this.extendModelContext(e);t&=~c.NeedsRefresh,t|=this.modelFlags&c.UpdateMask,0!=((t=this.needsRefresh(t,i))&c.RefreshMask)&&this.doRefresh(t,i)},i.prototype.doRefresh=function(t,e){var i=t;this.setModelFlags(this.modelFlags&~c.NeedsRefresh|c.TraversingFlag|c.RefreshingFlag);try{this.willRefresh(i,e),0!=((this.modelFlags|t)&c.NeedsValidate)&&(i|=c.NeedsValidate,this.setModelFlags(this.modelFlags&~c.NeedsValidate),this.willValidate(e)),0!=((this.modelFlags|t)&c.NeedsReconcile)&&(i|=c.NeedsReconcile,this.setModelFlags(this.modelFlags&~c.NeedsReconcile),this.willReconcile(e)),this.onRefresh(i,e),0!=(i&c.NeedsValidate)&&this.onValidate(e),0!=(i&c.NeedsReconcile)&&this.onReconcile(e),this.doRefreshChildModels(i,e),0!=(i&c.NeedsReconcile)&&this.didReconcile(e),0!=(i&c.NeedsValidate)&&this.didValidate(e),this.didRefresh(i,e)}finally{this.setModelFlags(this.modelFlags&~(c.TraversingFlag|c.RefreshingFlag))}},i.prototype.refreshTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].refreshChildModels(i,o,n,this.refreshTraitChildModels.bind(this,t,e+1)):this.refreshOwnChildModels(i,o,n)},i.prototype.refreshChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.refreshTraitChildModels(o,0,t,e,i):this.refreshOwnChildModels(t,e,i)},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileModelDownlinks()},i.prototype.startConsuming=function(){0==(this.modelFlags&c.ConsumingFlag)&&(this.willStartConsuming(),this.setModelFlags(this.modelFlags|c.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},i.prototype.stopConsuming=function(){0!=(this.modelFlags&c.ConsumingFlag)&&(this.willStopConsuming(),this.setModelFlags(this.modelFlags&~c.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},i.prototype.addModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelConsumer(t),Object.defineProperty(this,"modelConsumers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelConsumer(t),this.didAddModelConsumer(t),0===i.length&&this.startConsuming())},i.prototype.removeModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelConsumer(t),Object.defineProperty(this,"modelConsumers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelConsumer(t),this.didRemoveModelConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.hasModelService=function(t){var e=this.modelServices;return null!==e&&void 0!==e[t]},i.prototype.getModelService=function(t){var e=this.modelServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelService=function(t,e){var i=this.modelServices;null===i&&(i={},Object.defineProperty(this,"modelServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].mount()}},i.prototype.unmountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].unmount()}},i.prototype.hasModelProperty=function(t){var e=this.modelProperties;return null!==e&&void 0!==e[t]},i.prototype.getModelProperty=function(t){var e=this.modelProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelProperty=function(t,e){var i=this.modelProperties;null===i&&(i={},Object.defineProperty(this,"modelProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mutateModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].onMutate()}},i.prototype.mountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].mount()}},i.prototype.unmountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].unmount()}},i.prototype.hasModelFastener=function(t){var e=this.modelFasteners;return null!==e&&void 0!==e[t]},i.prototype.getModelFastener=function(t){var e=this.modelFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelFastener=function(t,e){var i=this.modelFasteners;null===i&&(i={},Object.defineProperty(this,"modelFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertModelFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelFastener(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeModelFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getModelFastener(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasModelTrait=function(t){var e=this.modelTraits;return null!==e&&void 0!==e[t]},i.prototype.getModelTrait=function(t){var e=this.modelTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelTrait=function(t,e){var i=this.modelTraits;null===i&&(i={},Object.defineProperty(this,"modelTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].mount()}},i.prototype.unmountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].unmount()}},i.prototype.insertModelTrait=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelTrait(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeModelTrait=function(t){var e=t.key;if(void 0!==e){var i=this.getModelTrait(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.modelDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.modelDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.modelDownlinks;null===i&&(i={},Object.defineProperty(this,"modelDownlinks",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].mount()}},i.prototype.unmountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].reconcile()}},i}(c);x({type:Object,inherit:!0,updateFlags:c.NeedsReconcile})(c.prototype,"warpRef");var dt=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childModels",{value:[],enumerable:!0}),Object.defineProperty(e,"childModelMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childModelCount",{get:function(){return this.childModels.length},enumerable:!1,configurable:!0}),e.prototype.firstChildModel=function(){var t=this.childModels;return 0!==t.length?t[0]:null},e.prototype.lastChildModel=function(){var t=this.childModels;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildModel=function(t,e){for(var i,o=this.childModels,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildModel=function(t){var e=this.childModelMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildModel=function(t,e){var i=null,o=this.childModels;null!==e&&(e.parentModel===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildModel(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildModel(r),r.setParentModel(null,this),this.removeChildModelMap(r),o.splice(n,1),this.onRemoveChildModel(r),this.didRemoveChildModel(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildModel(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildModelMap(e),e.setParentModel(this,null),this.onInsertChildModel(e,i),this.didInsertChildModel(e,i),e.cascadeInsert()),r},e.prototype.insertChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null===i&&(i={},Object.defineProperty(this,"childModelMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null!==i&&delete i[e]}},e.prototype.appendChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e)),this.willInsertChildModel(t,null),this.childModels.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,null),this.didInsertChildModel(t,null),t.cascadeInsert()},e.prototype.prependChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e));var i=this.childModels,o=0!==i.length?i[0]:null;this.willInsertChildModel(t,o),i.unshift(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,o),this.didInsertChildModel(t,o),t.cascadeInsert()},e.prototype.insertChildModel=function(t,e,i){if(null!==e&&e.parentModel!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildModel(i),t.setKey(i)),this.willInsertChildModel(t,e);var o=this.childModels,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,e),this.didInsertChildModel(t,e),t.cascadeInsert()},e.prototype.removeChildModel=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildModel(t)))return null}else e=t;if(e.parentModel!==this)throw new Error("not a child model");this.willRemoveChildModel(e),e.setParentModel(null,this),this.removeChildModelMap(e);var i=this.childModels,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildModel(e),this.didRemoveChildModel(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childModels;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildModel(i),i.setParentModel(null,this),this.removeChildModelMap(i),t.pop(),this.onRemoveChildModel(i),this.didRemoveChildModel(i),i.setKey(void 0)}},e.prototype.doMountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.modelFlags&c.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~c.RemovingFlag),this.removeChildModel(i))}},e.prototype.doUnmountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.modelFlags&c.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~c.RemovingFlag),this.removeChildModel(i))}},e.prototype.doPowerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.modelFlags&c.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~c.RemovingFlag),this.removeChildModel(i))}},e.prototype.doUnpowerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.modelFlags&c.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~c.RemovingFlag),this.removeChildModel(i))}},e.prototype.analyzeOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&c.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~c.RemovingFlag),this.removeChildModel(r))}},e.prototype.refreshOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&c.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~c.RemovingFlag),this.removeChildModel(r))}},e}(pt),ct={fromAny:function(t){return"string"!=typeof t||"large"!==t&&"larger"!==t&&"medium"!==t&&"small"!==t&&"smaller"!==t&&"x-large"!==t&&"x-small"!==t&&"xx-large"!==t&&"xx-small"!==t?r.Length.fromAny(t):t},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return ct.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},ft={fromAny:function(t){return"string"==typeof t&&"normal"===t?t:r.Length.fromAny(t)},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return ft.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},vt={fromValue:function(t){var e=null;return t.forEach((function(t){if(t instanceof o.Value){var i=t.stringValue(void 0);void 0!==i&&(null===e?e=i:"string"==typeof e?e=[e,i]:e.push(i))}})),e},format:function(t){var e,i=t.length;if(i>0){e=a.Unicode.isAlpha(t.charCodeAt(0));for(var o=t.offsetByCodePoints(0,1);e&&o<i;o=t.offsetByCodePoints(o,1)){var n=t.charCodeAt(o);e=a.Unicode.isAlpha(n)||45===n}}else e=!1;if(e)return t;var r=a.Unicode.stringOutput();r.write(34);for(o=0;o<i;o=t.offsetByCodePoints(o,1)){if(10===(n=t.charCodeAt(o))||34===n||39===n)r.write(92).write(n);else if(n>=32)r.write(n);else{var s=a.Base16.uppercase;r.write(92).write(s.encodeDigit(n>>>20&15)).write(s.encodeDigit(n>>>16&15)).write(s.encodeDigit(n>>>12&15)).write(s.encodeDigit(n>>>8&15)).write(s.encodeDigit(n>>>4&15)).write(s.encodeDigit(15&n))}}return r.write(34),r.toString()}},yt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.output=e,r.quote=i,r.code=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.output,this.quote,this.code,this.step)},e.parse=function(t,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1);var s=0;if(1===r){for(;t.isCont()&&(s=t.head(),a.Unicode.isSpace(s));)t=t.step();if(t.isCont())if(a.Unicode.isAlpha(s)||45===s)i=i||a.Unicode.stringOutput(),r=2;else{if(34!==s&&(39!==s||o!==s&&0!==o))return a.Parser.error(a.Diagnostic.expected("font family",t));t=t.step(),i=i||a.Unicode.stringOutput(),o=s,r=3}else if(t.isDone())return a.Parser.error(a.Diagnostic.expected("font family",t))}if(2===r){for(;t.isCont()&&(s=t.head(),a.Unicode.isAlpha(s)||45===s);)t=t.step(),i.write(s);if(!t.isEmpty())return a.Parser.done(i.bind())}t:for(;;){if(3===r){for(;t.isCont()&&(s=t.head())>=32&&s!==o&&92!==s;)t=t.step(),i.write(s);if(t.isCont()){if(s===o)return t=t.step(),a.Parser.done(i.bind());if(92!==s)return a.Parser.error(a.Diagnostic.expected(o,t));t=t.step(),r=4}else if(t.isDone())return a.Parser.error(a.Diagnostic.expected(o,t))}if(4===r)if(t.isCont()){if(s=t.head(),!a.Base16.isDigit(s)){if(10===s){t.step(),r=3;continue}t.step(),i.write(s),r=3;continue}r=5}else if(t.isDone())return a.Parser.error(a.Diagnostic.expected("escape character",t));if(r>=5)for(;;){if(t.isCont()&&(s=t.head(),a.Base16.isDigit(s))){if(t=t.step(),n=16*n+a.Base16.decodeDigit(s),r<=11){r+=1;continue}if(0===n)return a.Parser.error(a.Diagnostic.message("zero escape",t));i.write(n),n=0,r=3;continue t}if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));break}break}return new e(i,o,n,r)},e}(a.Parser),gt=function(){function t(t,e,i,o,n,r,a){Object.defineProperty(this,"style",{value:t,enumerable:!0}),Object.defineProperty(this,"variant",{value:e,enumerable:!0}),Object.defineProperty(this,"weight",{value:i,enumerable:!0}),Object.defineProperty(this,"stretch",{value:o,enumerable:!0}),Object.defineProperty(this,"size",{value:n,enumerable:!0}),Object.defineProperty(this,"height",{value:r,enumerable:!0}),Object.defineProperty(this,"family",{value:a,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withStyle=function(e){return e===this.style?this:new t(e,this.variant,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withVariant=function(e){return e===this.variant?this:new t(this.style,e,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withWeight=function(e){return e===this.weight?this:new t(this.style,this.variant,e,this.stretch,this.size,this.height,this.family)},t.prototype.withStretch=function(e){return e===this.stretch?this:new t(this.style,this.variant,this.weight,e,this.size,this.height,this.family)},t.prototype.withSize=function(i){return null!==i&&(i=ct.fromAny(i)),e.Values.equal(i,this.size)?this:new t(this.style,this.variant,this.weight,this.stretch,i,this.height,this.family)},t.prototype.withHeight=function(i){return null!==i&&(i=ft.fromAny(i)),e.Values.equal(i,this.height)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,i,this.family)},t.prototype.withFamily=function(i){return Array.isArray(i)&&1===i.length&&(i=i[0]),e.Values.equal(i,this.family)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,this.height,i)},t.prototype.toAny=function(){return{style:this.style,variant:this.variant,weight:this.weight,stretch:this.stretch,size:this.size,height:this.height,family:Array.isArray(this.family)?this.family.slice(0):this.family}},t.prototype.interpolateTo=function(e){return e instanceof t?wt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equivalent(this.size,i.size,o)&&e.Values.equivalent(this.height,i.height,o)&&e.Values.equivalent(this.family,i.family,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equal(this.size,i.size)&&e.Values.equal(this.height,i.height)&&e.Values.equal(this.family,i.family))},t.prototype.debug=function(t){if(t=t.write("Font").write(46).write("family").write(40),"string"==typeof this.family)t=t.debug(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){t=t.debug(this.family[0]);for(var e=1;e<this.family.length;e+=1)t=t.write(", ").debug(this.family[e])}t=t.write(41),void 0!==this.style&&(t=t.write(46).write("style").write(40).debug(this.style).write(41)),void 0!==this.variant&&(t=t.write(46).write("variant").write(40).debug(this.variant).write(41)),void 0!==this.weight&&(t=t.write(46).write("weight").write(40).debug(this.weight).write(41)),void 0!==this.stretch&&(t=t.write(46).write("stretch").write(40).debug(this.stretch).write(41)),void 0!==this.size&&(t=t.write(46).write("size").write(40).debug(this.size).write(41)),void 0!==this.height&&(t=t.write(46).write("height").write(40).debug(this.height).write(41))},t.prototype.toString=function(){var t,e,i,o=this.stringValue;if(void 0===o){if(o="",void 0===this.style&&"normal"!==this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(o+=null!==(t=this.style)&&void 0!==t?t:"normal"),void 0===this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(e=this.variant)&&void 0!==e?e:"normal"),void 0===this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(i=this.weight)&&void 0!==i?i:"normal"),void 0!==this.stretch&&(0!==o.length&&(o+=" "),o+=this.stretch),null!==this.size&&(0!==o.length&&(o+=" "),o+=this.size.toString(),null!==this.height&&(o+="/",o+=this.height.toString())),"string"==typeof this.family)0!==o.length&&(o+=" "),o+=vt.format(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){0!==o.length&&(o+=" "),o+=vt.format(this.family[0]);for(var n=1;n<this.family.length;n+=1)o+=", ",o+=vt.format(this.family[n])}Object.defineProperty(this,"stringValue",{value:o,enumerable:!0,configurable:!0})}return o},t.style=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(e,void 0,void 0,void 0,null,null,i)},t.variant=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,e,void 0,void 0,null,null,i)},t.weight=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,e,void 0,null,null,i)},t.stretch=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,e,null,null,i)},t.size=function(e,i){return e=null!==e?ct.fromAny(e):null,Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,void 0,e,null,i)},t.family=function(e){return Array.isArray(e)&&1===e.length&&(e=e[0]),new t(void 0,void 0,void 0,void 0,null,null,e)},t.create=function(e,i,o,n,r,a,s){return r=null!=r?ct.fromAny(r):null,a=null!=a?ft.fromAny(a):null,Array.isArray(s)&&1===s.length&&(s=s[0]),new t(e,i,o,n,r,a,s)},t.fromInit=function(e){return t.create(e.style,e.variant,e.weight,e.stretch,e.size,e.height,e.family)},t.fromValue=function(e){var i=e.header("font");if(i.isDefined()){var o=i.get("style").stringValue(void 0),n=i.get("variant").stringValue(void 0),r=i.get("weight").stringValue(void 0),a=i.get("stretch").stringValue(void 0),s=ct.fromValue(i.get("size")),l=ft.fromValue(i.get("height")),u=vt.fromValue(i.get("family"));if(null!==u)return t.create(o,n,r,a,s,l,u)}return null},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=bt.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.family},t.isAny=function(e){return e instanceof t||t.isInit(e)},t.form=function(t){return new mt(void 0)},m([e.Lazy],t,"form",null),t}();function wt(t,e){var i=function(t){var e=i.styleInterpolator(t),o=i.variantInterpolator(t),n=i.weightInterpolator(t),r=i.stretchInterpolator(t),a=i.sizeInterpolator(t),s=i.heightInterpolator(t),l=i.familyInterpolator(t);return new gt(e,o,n,r,a,s,l)};return Object.setPrototypeOf(i,wt.prototype),Object.defineProperty(i,"styleInterpolator",{value:s.Interpolator(t.style,e.style),enumerable:!0}),Object.defineProperty(i,"variantInterpolator",{value:s.Interpolator(t.variant,e.variant),enumerable:!0}),Object.defineProperty(i,"weightInterpolator",{value:s.Interpolator(t.weight,e.weight),enumerable:!0}),Object.defineProperty(i,"stretchInterpolator",{value:s.Interpolator(t.stretch,e.stretch),enumerable:!0}),Object.defineProperty(i,"sizeInterpolator",{value:s.Interpolator(t.size,e.size),enumerable:!0}),Object.defineProperty(i,"heightInterpolator",{value:s.Interpolator(t.height,e.height),enumerable:!0}),Object.defineProperty(i,"familyInterpolator",{value:s.Interpolator(t.family,e.family),enumerable:!0}),i}w(wt,s.Interpolator),Object.defineProperty(wt.prototype,0,{get:function(){var t=this.styleInterpolator[0],e=this.variantInterpolator[0],i=this.weightInterpolator[0],o=this.stretchInterpolator[0],n=this.sizeInterpolator[0],r=this.heightInterpolator[0],a=this.familyInterpolator[0];return new gt(t,e,i,o,n,r,a)},enumerable:!0,configurable:!0}),Object.defineProperty(wt.prototype,1,{get:function(){var t=this.styleInterpolator[1],e=this.variantInterpolator[1],i=this.weightInterpolator[1],o=this.stretchInterpolator[1],n=this.sizeInterpolator[1],r=this.heightInterpolator[1],a=this.familyInterpolator[1];return new gt(t,e,i,o,n,r,a)},enumerable:!0,configurable:!0}),wt.prototype.equals=function(t){return this===t||t instanceof wt&&(this.styleInterpolator.equals(t.styleInterpolator)&&this.variantInterpolator.equals(t.variantInterpolator)&&this.weightInterpolator.equals(t.weightInterpolator)&&this.stretchInterpolator.equals(t.stretchInterpolator)&&this.sizeInterpolator.equals(t.sizeInterpolator)&&this.heightInterpolator.equals(t.heightInterpolator)&&this.familyInterpolator.equals(t.familyInterpolator))};var mt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){t=gt.fromAny(t);var e=o.Record.create(7);if(void 0!==t.style&&e.slot("style",t.style),void 0!==t.variant&&e.slot("variant",t.variant),void 0!==t.weight&&e.slot("weight",t.weight),void 0!==t.stretch&&e.slot("stretch",t.stretch),t.size instanceof r.Length?e.slot("size",r.Length.form().mold(t.size)):void 0!==t.size&&e.slot("size",t.size),t.height instanceof r.Length?e.slot("height",r.Length.form().mold(t.height)):void 0!==t.height&&e.slot("height",t.height),Array.isArray(t.family)){for(var i=o.Record.create(t.family.length),n=0;n<t.family.length;n+=1)i.push(t.family[n]);e.slot("family",i)}else e.slot("family",t.family);return o.Record.of(o.Attr.of("font",e))},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(null===(i=gt.fromValue(e))){var o=e.stringValue();void 0!==o&&(i=gt.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),bt=function(t){function e(e,i,o,n,r,a,s,l,u,h,p){var d=t.call(this)||this;return d.style=e,d.variant=i,d.weight=o,d.stretch=n,d.size=r,d.height=a,d.family=s,d.identOutput=l,d.lengthParser=u,d.familyParser=h,d.step=p,d}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.style,this.variant,this.weight,this.stretch,this.size,this.height,this.family,this.identOutput,this.lengthParser,this.familyParser,this.step)},e.parse=function(t,i,o,n,s,l,u,h,p,d,c,f){void 0===f&&(f=1);for(var v=0;;){if(1===f){for(;t.isCont()&&(v=t.head(),a.Unicode.isSpace(v));)t.step();if(t.isCont())f=a.Unicode.isAlpha(v)?2:34===v||39===v?11:4;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(2===f){for(p=p||a.Unicode.stringOutput();t.isCont()&&(v=t.head(),a.Unicode.isAlpha(v)||45===v);)t=t.step(),p.write(v);if(!t.isEmpty()){var y=p.bind();switch(p=void 0,y){case"italic":case"oblique":if(void 0!==i)return a.Parser.error(a.Diagnostic.message("reapeated font style: "+y,t));i=y,f=3;break;case"small-caps":if(void 0!==o)return a.Parser.error(a.Diagnostic.message("reapeated font variant: "+y,t));o=y,f=3;break;case"bold":case"bolder":case"lighter":if(void 0!==n)return a.Parser.error(a.Diagnostic.message("reapeated font weight: "+y,t));n=y,f=3;break;case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":if(void 0!==s)return a.Parser.error(a.Diagnostic.message("reapeated font stretch: "+y,t));s=y,f=3;break;case"normal":if(void 0===i)i=y;else if(void 0===o)o=y;else if(void 0===n)n=y;else{if(void 0!==s)return a.Parser.error(a.Diagnostic.message("reapeated font property: "+y,t));s=y}f=3;break;case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":l=y,f=5;break;default:h=y,f=12}}}if(3===f){if(t.isCont()){if(v=t.head(),a.Unicode.isSpace(v)){t.step(),f=1;continue}return a.Parser.error(a.Diagnostic.expected("font property, size, or family",t))}if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(4===f)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone()){var g=d.bind();if(""===g.units){var w=g.value;switch(w){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:if(void 0!==n)return a.Parser.error(a.Diagnostic.message("reapeated font weight: "+w,t));n=String(w);break;default:return a.Parser.error(a.Diagnostic.message("unknown font property: "+w,t))}f=3;continue}l=g,d=void 0,f=5}else if(d.isError())return d.asError();if(5===f)if(t.isCont())if(v=t.head(),a.Unicode.isSpace(v))t.step(),f=6;else{if(47!==v)return a.Parser.error(a.Diagnostic.expected("font family",t));t.step(),f=7}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(6===f){for(;t.isCont()&&(v=t.head(),a.Unicode.isSpace(v));)t.step();if(t.isCont())47===v?(t.step(),f=7):f=11;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(7===f){for(;t.isCont()&&(v=t.head(),a.Unicode.isSpace(v));)t.step();if(t.isCont())f=a.Unicode.isAlpha(v)?8:9;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(8===f){for(p=p||a.Unicode.stringOutput();t.isCont()&&(v=t.head(),a.Unicode.isAlpha(v));)t=t.step(),p.write(v);if(!t.isEmpty()){y=p.bind();switch(p=void 0,y){case"normal":u=y,f=10;break;default:return a.Parser.error(a.Diagnostic.message("unknown line height: "+y,t))}}}if(9===f)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone())u=d.bind(),d=void 0,f=10;else if(d.isError())return d.asError();if(10===f)if(t.isCont()){if(v=t.head(),!a.Unicode.isSpace(v))return a.Parser.error(a.Diagnostic.expected("font family",t));t.step(),f=11}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(11===f)if((c=void 0===c?yt.parse(t):c.feed(t)).isDone())Array.isArray(h)?h.push(c.bind()):h=void 0!==h?[h,c.bind()]:c.bind(),c=void 0,f=12;else if(c.isError())return c.asError();if(12===f){for(;t.isCont()&&(v=t.head(),a.Unicode.isSpace(v));)t.step();if(t.isCont()&&44===v){t.step(),f=11;continue}if(!t.isEmpty())return a.Parser.done(gt.create(i,o,n,s,l,u,h))}break}return new e(i,o,n,s,l,u,h,p,d,c,f)},e.parseRest=function(t,i,o,n,r,a,s,l){var u=void 0!==l?12:void 0!==a?5:3;return e.parse(t,i,o,n,r,a,s,l,void 0,void 0,void 0,u)},e}(a.Parser),St=function(){function t(){}return t.prototype.contrast=function(t){return this.lightness<.67?this.lighter(t):this.darker(t)},t.prototype.interpolateTo=function(e){return e instanceof t?Ft(this.rgb(),e.rgb()):null},t.transparent=function(){return At.transparent()},t.black=function(t){return At.black(t)},t.white=function(t){return At.white(t)},t.rgb=function(t,e,i,o){return new At(t,e,i,o)},t.hsl=function(t,e,i,o){return"number"!=typeof t&&(t=r.Angle.fromAny(t).degValue()),new xt(t,e,i,o)},t.forName=function(e){switch(e){case"transparent":return t.transparent();case"black":return t.black();case"white":return t.white();default:return null}},t.fromInit=function(t){if(At.isInit(t))return At.fromInit(t);if(xt.isInit(t))return xt.fromInit(t);throw new TypeError(""+t)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(At.isInit(e))return At.fromInit(e);if(xt.isInit(e))return xt.fromInit(e);throw new TypeError(""+e)},t.fromValue=function(t){var e;return void 0===(e=At.fromValue(t))&&(e=xt.fromValue(t)),e},t.parse=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=Pt.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return At.isInit(t)||xt.isInit(t)},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t.form=function(){return new Ct(t.transparent())},t.Darker=.7,t.Brighter=1/t.Darker,m([e.Lazy],t,"form",null),t}(),Ct=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){return t=St.fromAny(t),o.Text.from(t.toString())},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(void 0===(i=St.fromValue(e))){var o=e.stringValue(void 0);void 0!==o&&(i=St.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),Pt=function(t){function e(e,i){var o=t.call(this)||this;return o.identOutput=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.step)},e.parse=function(t,i,o){void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()){if(35===t.head())return Mt.parse(t);o=2}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t));if(2===o){for(i=i||a.Unicode.stringOutput();t.isCont()&&(n=t.head(),a.Unicode.isAlpha(n));)t=t.step(),i.write(n);if(!t.isEmpty()){var r=i.bind();switch(r){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return Rt.parseRest(t);default:var s=St.forName(r);return null!==s?a.Parser.done(s):a.Parser.error(a.Diagnostic.message("unknown color: "+r,t))}}}return new e(i,o)},e}(a.Parser),Vt=function(){function t(t,e){Object.defineProperty(this,"value",{value:t,enumerable:!0}),Object.defineProperty(this,"units",{value:void 0!==e?e:"",enumerable:!0})}return t.prototype.scale=function(t){return"%"===this.units?this.value*t/100:this.value},t}(),Tt=function(t){function e(e,i){var o=t.call(this)||this;return o.valueParser=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.valueParser,this.step)},e.parse=function(t,i,o){if(void 0===o&&(o=1),1===o)if((i=void 0===i?a.Base10.parseNumber(t):i.feed(t)).isDone())o=2;else if(i.isError())return i.asError();if(2===o){if(t.isCont()&&37===t.head())return t=t.step(),a.Parser.done(new Vt(i.bind(),"%"));if(!t.isEmpty())return a.Parser.done(new Vt(i.bind()))}return new e(i,o)},e}(a.Parser),At=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return Object.defineProperty(r,"r",{value:e,enumerable:!0}),Object.defineProperty(r,"g",{value:i,enumerable:!0}),Object.defineProperty(r,"b",{value:o,enumerable:!0}),Object.defineProperty(r,"a",{value:n,enumerable:!0}),Object.defineProperty(r,"stringValue",{value:void 0,enumerable:!0,configurable:!0}),r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.r)&&isFinite(this.g)&&isFinite(this.b)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.r,this.g,this.b,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i);return(Math.max(t,e,i)+o)/2},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=St.fromAny(t).rgb(),new i(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},i.prototype.times=function(t){return new i(this.r*t,this.g*t,this.b*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=St.fromAny(t).rgb(),new i(this.r+t.r*e,this.g+t.g*e,this.b+t.b*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?St.Brighter:Math.pow(St.Brighter,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?St.Darker:Math.pow(St.Darker,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.rgb=function(){return this},i.prototype.hsl=function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i),n=Math.max(t,e,i),r=NaN,a=n-o,s=(n+o)/2;return 0!==a?(r=t===n?(e-i)/a+6*+(e<i):e===n?(i-t)/a+2:(t-e)/a+4,a/=s<.5?n+o:2-(n+o),r*=60):a=s>0&&s<1?0:r,new xt(r,a,s,this.a)},i.prototype.interpolateTo=function(e){return e instanceof i?Ft(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof St&&(t=t.rgb(),e.Numbers.equivalent(this.r,t.r,i)&&e.Numbers.equivalent(this.g,t.g,i)&&e.Numbers.equivalent(this.b,t.b,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.r)),e.Numbers.hash(this.g)),e.Numbers.hash(this.b)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){t=t.write("Color").write(46).write("rgb").write(40).debug(this.r).write(", ").debug(this.g).write(", ").debug(this.b),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){var t=Math.min(Math.max(0,Math.round(this.r||0)),255),e=Math.min(Math.max(0,Math.round(this.g||0)),255),i=Math.min(Math.max(0,Math.round(this.b||0)),255),o="#",n=a.Base16.lowercase.alphabet;return o+=n.charAt(t>>>4&15),o+=n.charAt(15&t),o+=n.charAt(e>>>4&15),o+=n.charAt(15&e),o+=n.charAt(i>>>4&15),o+=n.charAt(15&i)},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?t=this.toHexString():(t=1===e?"rgb":"rgba",t+="(",t+=Math.max(0,Math.min(Math.round(this.r)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.g)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.b)||0,255)),1!==e&&(t+=",",t+=e),t+=")"),Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(255,255,255,t)},i.fromInit=function(t){return new i(t.r,t.g,t.b,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,r,a,s,l=t.tag;return"rgb"===l||"rgba"===l?(t=t.header(l),e=!0):e=!1,t.forEach((function(t,i){var l=t.key.stringValue();void 0!==l?"r"===l?n=t.toValue().numberValue(n):"g"===l?r=t.toValue().numberValue(r):"b"===l?a=t.toValue().numberValue(a):"a"===l&&(s=t.toValue().numberValue(s)):t instanceof o.Value&&e&&(0===i?n=t.numberValue(n):1===i?r=t.numberValue(r):2===i?a=t.numberValue(a):3===i&&(s=t.numberValue(s)))})),void 0!==n&&void 0!==r&&void 0!==a?new i(n,r,a,s):null},i.parse=function(t){return St.parse(t).rgb()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(St),Ft=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.r+t*(o.r-e.r),r=e.g+t*(o.g-e.g),a=e.b+t*(o.b-e.b),s=e.a+t*(o.a-e.a);return new At(n,r,a,s)};return Object.setPrototypeOf(i,Ft.prototype),Object.defineProperty(i,0,{value:t,enumerable:!0}),Object.defineProperty(i,1,{value:e,enumerable:!0}),i};Ft.prototype=Object.create(s.Interpolator.prototype);var Mt=function(t){function e(e,i){var o=t.call(this)||this;return o.value=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.value,this.step)},e.parse=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()&&35===t.head())t=t.step(),o=2;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("#",t));if(o>=2){for(;o<=9&&t.isCont()&&(n=t.head(),a.Base16.isDigit(n));)t=t.step(),i=i<<4|a.Base16.decodeDigit(n),o+=1;if(!t.isEmpty())return 5===o?a.Parser.done(new At(i>>8&15|i>>4&240,i>>4&15|240&i,i<<4&240|15&i)):6===o?a.Parser.done(new At(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,(i<<4&240|15&i)/255)):8===o?a.Parser.done(new At(i>>16&255,i>>8&255,255&i)):10===o?a.Parser.done(new At(i>>24&255,i>>16&255,i>>8&255,(255&i)/255)):a.Parser.error(a.Diagnostic.unexpected(t))}return new e(i,o)},e}(a.Parser),Ot=function(t){function e(e,i,o,n,r){var a=t.call(this)||this;return a.rParser=e,a.gParser=i,a.bParser=o,a.aParser=n,a.step=r,a}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.rParser,this.gParser,this.bParser,this.aParser,this.step)},e.parse=function(t,i,o,n,r,s){var l=0;if(1===s)if(t.isCont()&&114===t.head())t=t.step(),s=2;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("r",t));if(2===s)if(t.isCont()&&103===t.head())t=t.step(),s=3;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("g",t));if(3===s)if(t.isCont()&&98===t.head())t=t.step(),s=4;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("b",t));if(4===s&&(t.isCont()&&97===t.head()?(t=t.step(),s=5):t.isEmpty()||(s=5)),5===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&40===l)t=t.step(),s=6;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("(",t))}if(6===s){if(void 0===i){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=Tt.parse(t))}else i=i.feed(t);if(void 0!==i)if(i.isDone())s=7;else if(i.isError())return i.asError()}if(7===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont())44===l&&(t=t.step()),s=8;else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(8===s){if(void 0===o){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Tt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())s=9;else if(o.isError())return o.asError()}if(9===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont())44===l&&(t=t.step()),s=10;else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(10===s){if(void 0===n){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(n=Tt.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())s=11;else if(n.isError())return n.asError()}if(11===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont()){if(41===l)return t=t.step(),a.Parser.done(new At(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255)));44!==l&&47!==l||(t=t.step()),s=12}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(12===s){if(void 0===r){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(r=Tt.parse(t))}else r=r.feed(t);if(void 0!==r)if(r.isDone())s=13;else if(r.isError())return r.asError()}if(13===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&41===l)return t=t.step(),a.Parser.done(new At(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255),r.bind().scale(1)));if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected(")",t))}return new e(i,o,n,r,s)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(a.Parser),xt=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return Object.defineProperty(r,"h",{value:e,enumerable:!0}),Object.defineProperty(r,"s",{value:i,enumerable:!0}),Object.defineProperty(r,"l",{value:o,enumerable:!0}),Object.defineProperty(r,"a",{value:n,enumerable:!0}),Object.defineProperty(r,"stringValue",{value:void 0,enumerable:!0,configurable:!0}),r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.h)&&isFinite(this.s)&&isFinite(this.l)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.h,this.s,this.l,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){return this.l},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=St.fromAny(t).hsl(),new i(this.h+t.h,this.s+t.s,this.l+t.l,this.a+t.a)},i.prototype.times=function(t){return new i(this.h*t,this.s*t,this.l*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=St.fromAny(t).hsl(),new i(this.h+t.h*e,this.s+t.s*e,this.l+t.l*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?St.Brighter:Math.pow(St.Brighter,t))?new i(this.h,this.s,this.l*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?St.Darker:Math.pow(St.Darker,t))?new i(this.h,this.s,this.l*t,this.a):this},i.toRgb=function(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)},i.prototype.rgb=function(){var t=this.h%360+360*+(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,n=o+(o<.5?o:1-o)*e,r=2*o-n;return new At(i.toRgb(t>=240?t-240:t+120,r,n),i.toRgb(t,r,n),i.toRgb(t<120?t+240:t-120,r,n),this.a)},i.prototype.hsl=function(){return this},i.prototype.interpolateTo=function(e){return e instanceof i?Dt(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof St&&(t=t.hsl(),e.Numbers.equivalent(this.h,t.h,i)&&e.Numbers.equivalent(this.s,t.s,i)&&e.Numbers.equivalent(this.l,t.l,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.h===t.h&&this.s===t.s&&this.l===t.l&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.h)),e.Numbers.hash(this.s)),e.Numbers.hash(this.l)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){t=t.write("Color").write(46).write("hsl").write(40).debug(this.h).write(", ").debug(this.s).write(", ").debug(this.l),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){return this.rgb().toHexString()},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;t=1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?"hsl":"hsla",t+="(",t+=Math.max(0,Math.min(Math.round(this.h)||0,360)),t+=",",t+=Math.max(0,Math.min(100*Math.round(this.s)||0,100))+"%",t+=",",t+=Math.max(0,Math.min(100*Math.round(this.l)||0,100))+"%",1!==e&&(t+=",",t+=e),t+=")",Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(0,1,1,t)},i.fromInit=function(t){return new i("number"==typeof t.h?t.h:r.Angle.fromAny(t.h).degValue(),t.s,t.l,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,a,s,l,u=t.tag;return"hsl"===u||"hsla"===u?(t=t.header(u),e=!0):e=!1,t.forEach((function(t,i){var u=t.key.stringValue();void 0!==u?"h"===u?n=t.toValue().cast(r.Angle.form(),n):"s"===u?a=t.toValue().numberValue(a):"l"===u?s=t.toValue().numberValue(s):"a"===u&&(l=t.toValue().numberValue(l)):t instanceof o.Value&&e&&(0===i?n=t.cast(r.Angle.form(),n):1===i?a=t.numberValue(a):2===i?s=t.numberValue(s):3===i&&(l=t.numberValue(l)))})),void 0!==n&&void 0!==a&&void 0!==s?new i(n.degValue(),a,s,l):null},i.parse=function(t){return St.parse(t).hsl()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return r.Angle.isAny(e.h)&&"number"==typeof e.s&&"number"==typeof e.l&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(St),Dt=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.h+t*(o.h-e.h),r=e.s+t*(o.s-e.s),a=e.l+t*(o.l-e.l),s=e.a+t*(o.a-e.a);return new xt(n,r,a,s)};return Object.setPrototypeOf(i,Dt.prototype),Object.defineProperty(i,0,{value:t,enumerable:!0}),Object.defineProperty(i,1,{value:e,enumerable:!0}),i};Dt.prototype=Object.create(s.Interpolator.prototype);var Rt=function(t){function e(e,i,o,n,r){var a=t.call(this)||this;return a.hParser=e,a.sParser=i,a.lParser=o,a.aParser=n,a.step=r,a}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.hParser,this.sParser,this.lParser,this.aParser,this.step)},e.parse=function(t,i,o,n,s,l){var u=0;if(1===l)if(t.isCont()&&104===t.head())t=t.step(),l=2;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("h",t));if(2===l)if(t.isCont()&&115===t.head())t=t.step(),l=3;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("s",t));if(3===l)if(t.isCont()&&108===t.head())t=t.step(),l=4;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("l",t));if(4===l&&(t.isCont()&&97===t.head()?(t=t.step(),l=5):t.isEmpty()||(l=5)),5===l){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&40===u)t=t.step(),l=6;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("(",t))}if(6===l){if(void 0===i){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=r.AngleParser.parse(t,"deg"))}else i=i.feed(t);if(void 0!==i)if(i.isDone())l=7;else if(i.isError())return i.asError()}if(7===l){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),l=8;else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(8===l){if(void 0===o){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Tt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone()){if("%"!==o.bind().units)return a.Parser.error(a.Diagnostic.expected("%",t));l=9}else if(o.isError())return o.asError()}if(9===l){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),l=10;else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(10===l){if(void 0===n){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isCont()&&(n=Tt.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone()){if("%"!==n.bind().units)return a.Parser.error(a.Diagnostic.expected("%",t));l=11}else if(n.isError())return n.asError()}if(11===l){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t=t.step();if(t.isCont()){if(41===u)return t=t.step(),a.Parser.done(new xt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1)));44!==u&&47!==u||(t=t.step()),l=12}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(12===l){if(void 0===s){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(s=Tt.parse(t))}else s=s.feed(t);if(void 0!==s)if(s.isDone())l=13;else if(s.isError())return s.asError()}if(13===l){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&41===u)return t=t.step(),a.Parser.done(new xt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1),s.bind().scale(1)));if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected(")",t))}return new e(i,o,n,s,l)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(a.Parser),Lt=function(){function t(t,e,i){Object.defineProperty(this,"color",{value:t,enumerable:!0}),Object.defineProperty(this,"stop",{value:e,enumerable:!0}),Object.defineProperty(this,"hint",{value:i,enumerable:!0})}return t.prototype.withColor=function(e){return new t(e=St.fromAny(e),this.stop,this.hint)},t.prototype.withStop=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,e,this.hint)},t.prototype.withHint=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,this.stop,e)},t.prototype.interpolateTo=function(e){return e instanceof t?kt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Equivalent(this.color,i.color,o)&&e.Equivalent(this.stop,i.stop,o)&&e.Equivalent(this.hint,i.hint,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.color.equals(i.color)&&e.Equals(this.stop,i.stop)&&e.Equals(this.hint,i.hint))},t.prototype.toString=function(){var t="";return null!==this.hint&&(t+=this.hint.toString(),t+=", "),t+=this.color.toString(),null!==this.stop&&(t+=" ",t+=this.stop.toString()),t},t.create=function(e,i,o){return void 0===i&&(i=null),void 0===o&&(o=null),e=St.fromAny(e),null!==i&&(i=r.Length.fromAny(i,"%")),null!==o&&(o=r.Length.fromAny(o,"%")),new t(e,i,o)},t.fromInit=function(e){return new t(St.fromAny(e.color),void 0!==e.stop?r.Length.fromAny(e.stop,"%"):null,void 0!==e.hint?r.Length.fromAny(e.hint,"%"):null)},t.fromTuple=function(e){return new t(St.fromAny(e[0]),null!==e[1]?r.Length.fromAny(e[1],"%"):null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(t.isInit(e))return t.fromInit(e);if(t.isTuple(e))return t.fromTuple(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=jt.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.parseHint=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=jt.parseHint(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.parseList=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=It.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.color},t.isTuple=function(t){return Array.isArray(t)&&2===t.length&&St.isAny(t[0])&&(null===t[1]||r.Length.isAny(t[1]))},t.isAny=function(e){return e instanceof t||t.isInit(e)||t.isTuple(e)||"string"==typeof e},t}(),kt=function(t,e){var i=function(t){var e=i.colorInterpolator(t),o=i.stopInterpolator(t),n=i.hintInterpolator(t);return new Lt(e,o,n)};return Object.setPrototypeOf(i,kt.prototype),Object.defineProperty(i,"colorInterpolator",{value:t.color.interpolateTo(e.color),enumerable:!0}),Object.defineProperty(i,"stopInterpolator",{value:s.Interpolator(t.stop,e.stop),enumerable:!0}),Object.defineProperty(i,"hintInterpolator",{value:s.Interpolator(t.hint,e.hint),enumerable:!0}),i};kt.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(kt.prototype,0,{get:function(){var t=this.colorInterpolator[0],e=this.stopInterpolator[0],i=this.hintInterpolator[0];return new Lt(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(kt.prototype,1,{get:function(){var t=this.colorInterpolator[1],e=this.stopInterpolator[1],i=this.hintInterpolator[1];return new Lt(t,e,i)},enumerable:!0,configurable:!0}),kt.prototype.equals=function(t){return this===t||t instanceof kt&&(this.colorInterpolator.equals(t.colorInterpolator)&&this.stopInterpolator.equals(t.stopInterpolator)&&this.hintInterpolator.equals(t.hintInterpolator))};var jt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.colorParser=e,r.stopParser=i,r.hintParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.colorParser,this.stopParser,this.hintParser,this.step)},e.parse=function(t,i,o,n,s){void 0===s&&(s=4);var l=0;if(1===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t.step();if(t.isCont())s=45===l||46===l||l>=48&&l<=57?2:7;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(2===s&&void 0!==(n=void 0===n?r.LengthParser.parse(t):n.feed(t)))if(n.isDone())s=3;else if(n.isError())return n.asError();if(3===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t.step();if(t.isCont())44===l?(t.step(),s=4):(o=n,n=void 0,s=7);else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t))}if(4===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t.step();if(t.isCont())s=45===l||46===l||l>=48&&l<=57?5:7;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(5===s&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t)))if(o.isDone())s=6;else if(o.isError())return o.asError();if(6===s)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("color",t));t.step(),s=7}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t));if(7===s&&void 0!==(i=void 0===i?Pt.parse(t):i.feed(t)))if(i.isDone()){if(void 0!==o){var u=void 0!==n?n.bind():null;return a.Parser.done(new Lt(i.bind(),o.bind(),u))}s=8}else if(i.isError())return i.asError();if(8===s)if(t.isCont()&&a.Unicode.isSpace(t.head()))t.step(),s=9;else if(!t.isEmpty()){u=void 0!==n?n.bind():null;return a.Parser.done(new Lt(i.bind(),null,u))}if(9===s&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t))){if(o.isDone()){u=void 0!==n?n.bind():null;return a.Parser.done(new Lt(i.bind(),o.bind(),u))}if(o.isError())return o.asError()}return new e(i,o,n,s)},e.parseHint=function(t){return e.parse(t,void 0,void 0,void 0,1)},e}(a.Parser),It=function(t){function e(e,i,o){var n=t.call(this)||this;return n.stops=e,n.stopParser=i,n.step=o,n}return w(e,t),e.prototype.feed=function(t){return e.parse(t,void 0!==this.stops?this.stops.slice(0):void 0,this.stopParser,this.step)},e.parse=function(t,i,o,n){void 0===n&&(n=1);var r=0;if(1===n){if(void 0===o){for(;t.isCont()&&(r=t.head(),a.Unicode.isSpace(r));)t.step();t.isEmpty()||(o=jt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())void 0===i&&(i=[]),i.push(o.bind()),o=void 0,n=2;else if(o.isError())return o.asError()}for(;;){if(2===n){for(;t.isCont()&&(r=t.head(),a.Unicode.isSpace(r));)t=t.step();if(!t.isCont()||44!==r)return a.Parser.done(i);t=t.step(),n=3}if(3===n){if(void 0===o){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=jt.parseHint(t))}else o=o.feed(t);if(void 0!==o){if(o.isDone()){i.push(o.bind()),o=void 0,n=2;continue}if(o.isError())return o.asError()}}break}return new e(i,o,n)},e}(a.Parser),Et=function(){function t(t,e){Object.defineProperty(this,"angle",{value:t,enumerable:!0}),Object.defineProperty(this,"stops",{value:e,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withAngle=function(e){return(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg")),new t(e,this.stops)},t.prototype.withStops=function(e){for(var i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=Lt.fromAny(e[n]);return new t(this.angle,o)},t.prototype.interpolateTo=function(e){return e instanceof t?Wt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Values.equivalent(this.angle,i.angle,o)&&e.Arrays.equivalent(this.stops,i.stops,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Values.equal(this.angle,i.angle)&&e.Arrays.equal(this.stops,i.stops))},t.prototype.toString=function(){var t=this.stringValue;if(void 0===t){if(t="linear-gradient(",this.angle instanceof r.Angle)t+=this.angle.toString();else if(t+="to","string"==typeof this.angle)t+=" ",t+=this.angle;else for(var e=0,i=this.angle.length;e<i;e+=1)t+=" ",t+=this.angle[e];for(e=0,i=this.stops.length;e<i;e+=1)t+=", ",t+=this.stops[e].toString();t+=")",Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},t.create=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg"));for(var n=i.length,a=new Array(n),s=0;s<n;s+=1){var l=i[s];a[s]="string"==typeof l?0===s?Lt.parse(l):Lt.parseHint(l):Lt.fromAny(i[s])}return new t(e,a)},t.fromInit=function(e){var i=e.angle;(i instanceof r.Angle||"number"==typeof i)&&(i=r.Angle.fromAny(i,"deg"));for(var o=e.stops.length,n=new Array(o),a=0;a<o;a+=1)n[a]=Lt.fromAny(e.stops[a]);return new t(i,n)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=Ut.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.parseAngle=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=Nt.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.angle&&void 0!==e.stops}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t}(),Wt=function(t,e){var i=function(t){for(var e=i.angleInterpolator(t),o=i.stopInterpolators,n=o.length,r=new Array(n),a=0;a<n;a+=1)r[a]=o[a](t);return new Et(e,r)};Object.setPrototypeOf(i,Wt.prototype),Object.defineProperty(i,"angleInterpolator",{value:s.Interpolator(t.angle,e.angle),enumerable:!0});for(var o=t.stops,n=e.stops,r=Math.min(o.length,n.length),a=new Array(r),l=0;l<r;l+=1)a[l]=o[l].interpolateTo(n[l]);return Object.defineProperty(i,"stopInterpolators",{value:a,enumerable:!0}),i};Wt.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(Wt.prototype,0,{get:function(){for(var t=this.angleInterpolator[0],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][0];return new Et(t,o)},enumerable:!0,configurable:!0}),Object.defineProperty(Wt.prototype,1,{get:function(){for(var t=this.angleInterpolator[1],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][1];return new Et(t,o)},enumerable:!0,configurable:!0}),Wt.prototype.equals=function(t){if(this===t)return!0;if(t instanceof Wt&&this.angleInterpolator.equals(t.angleInterpolator)){var e=this.stopInterpolators.length;if(e===t.stopInterpolators.length){for(var i=0;i<e;i+=1)if(!this.stopInterpolators[i].equals(t.stopInterpolators[i]))return!1;return!0}}return!1};var Nt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.side=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.side,this.step)},e.parse=function(t,i,o,n,s){void 0===s&&(s=1);var l=0;if(1===s){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t.step();if(t.isCont())s=45===l||46===l||l>=48&&l<=57?2:3;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(2===s&&void 0!==(o=void 0===o?r.AngleParser.parse(t,"deg"):o.feed(t))){if(o.isDone())return o;if(o.isError())return o.asError()}if(3===s){for(void 0===i&&(i=a.Unicode.stringOutput());t.isCont()&&(l=t.head(),a.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){if("to"!==(u=i.bind()))return a.Parser.error(a.Diagnostic.message("unexpected "+u,t));i=void 0,s=4}}if(4===s)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("side or corner",t));t.step(),s=5}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t));if(5===s){for(void 0===i&&(i=a.Unicode.stringOutput());t.isCont()&&(l=t.head(),a.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){var u=i.bind();switch(i=void 0,u){case"left":case"right":n=u,s=6;break;case"top":case"bottom":n=u,s=7;break;default:return a.Parser.error(a.Diagnostic.message("unknown side: "+u,t))}}}if(6===s){if(void 0===i){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&a.Unicode.isAlpha(l))i=a.Unicode.stringOutput();else if(!t.isEmpty())return a.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(l=t.head(),a.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){u=i.bind();switch(i=void 0,u){case"top":case"bottom":return a.Parser.done([n,u]);default:return a.Parser.error(a.Diagnostic.message("unknown side: "+u,t))}}}}if(7===s){if(void 0===i){for(;t.isCont()&&(l=t.head(),a.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&a.Unicode.isAlpha(l))i=a.Unicode.stringOutput();else if(!t.isEmpty())return a.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(l=t.head(),a.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){u=i.bind();switch(i=void 0,u){case"left":case"right":return a.Parser.done([n,u]);default:return a.Parser.error(a.Diagnostic.message("unknown side: "+u,t))}}}}return new e(i,o,n,s)},e}(a.Parser),Ut=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.stopsParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.stopsParser,this.step)},e.parse=function(t,i,o,n,r){void 0===r&&(r=1);var s=0;if(1===r){for(void 0===i&&(i=a.Unicode.stringOutput());t.isCont()&&(s=t.head(),a.Unicode.isAlpha(s)||45===s);)t=t.step(),i.write(s);if(!t.isEmpty()){var l=i.bind();if("linear-gradient"!==l)return a.Parser.error(a.Diagnostic.message("unexpected "+l,t));i=void 0,r=2}}if(2===r){for(;t.isCont()&&(s=t.head(),a.Unicode.isSpace(s));)t=t.step();if(t.isCont()&&40===s)t.step(),r=3;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected("(",t))}if(3===r&&void 0!==(o=void 0===o?Nt.parse(t):o.feed(t)))if(o.isDone())r=4;else if(o.isError())return o.asError();if(4===r){for(;t.isCont()&&(s=t.head(),a.Unicode.isSpace(s));)t=t.step();if(!t.isCont()||44!==s)return a.Parser.error(a.Diagnostic.expected("color stops",t));t=t.step(),r=5}if(5===r&&void 0!==(n=void 0===n?It.parse(t):n.feed(t)))if(n.isDone())r=6;else if(n.isError())return n.asError();if(6===r){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t.step();if(t.isCont()&&41===t.head())return t.step(),a.Parser.done(new Et(o.bind(),n.bind()));if(!t.isEmpty())return a.Parser.error(a.Diagnostic.expected(")",t))}return new e(i,o,n,r)},e.parseRest=function(t,i){return e.parse(t,i,void 0,void 0,2)},e}(a.Parser),Bt=function(){function t(t,e,i,o,n,r,a){Object.defineProperty(this,"inset",{value:t,enumerable:!0}),Object.defineProperty(this,"offsetX",{value:e,enumerable:!0}),Object.defineProperty(this,"offsetY",{value:i,enumerable:!0}),Object.defineProperty(this,"blurRadius",{value:o,enumerable:!0}),Object.defineProperty(this,"spreadRadius",{value:n,enumerable:!0}),Object.defineProperty(this,"color",{value:r,enumerable:!0}),Object.defineProperty(this,"next",{value:a,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withInset=function(e){return e===this.inset?this:new t(e,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetX=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetX)?this:new t(this.inset,e,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetY=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetY)?this:new t(this.inset,this.offsetX,e,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withBlurRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.blurRadius)?this:new t(this.inset,this.offsetX,this.offsetY,e,this.spreadRadius,this.color,this.next)},t.prototype.withSpreadRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.spreadRadius)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,e,this.color,this.next)},t.prototype.withColor=function(e){return(e=St.fromAny(e)).equals(this.color)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,e,this.next)},t.prototype.and=function(e,i,o,n,r,a){var s;return s=null!==this.next?this.next.and.apply(this.next,arguments):t.create.apply(t,arguments),new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,s)},t.prototype.interpolateTo=function(e){return e instanceof t?Ht(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equivalentTo(i.offsetX,o)&&this.offsetY.equivalentTo(i.offsetY,o)&&this.blurRadius.equivalentTo(i.blurRadius,o)&&this.spreadRadius.equivalentTo(i.spreadRadius,o)&&this.color.equivalentTo(i.color,o)&&e.Equivalent(this.next,i.next,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equals(i.offsetX)&&this.offsetY.equals(i.offsetY)&&this.blurRadius.equals(i.blurRadius)&&this.spreadRadius.equals(i.spreadRadius)&&this.color.equals(i.color)&&e.Equals(this.next,i.next))},t.prototype.toString=function(){var t=this.stringValue;return void 0===t&&(t="",this.inset&&(t+="inset",t+=" "),t+=this.offsetX.toString(),t+=" ",t+=this.offsetY.toString(),t+=" ",t+=this.blurRadius.toString(),t+=" ",t+=this.spreadRadius.toString(),t+=" ",t+=this.color.toString(),null!==this.next&&(t+=", ",t+=this.next.toString()),Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})),t},t.create=function(e,i,o,n,a,s){if(1===arguments.length)return t.fromAny(e);if("boolean"!=typeof e){if(3===arguments.length)s=St.fromAny(o),a=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else if(4===arguments.length)s=St.fromAny(n),a=r.Length.zero(),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else{if(5!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+a+", "+s);s=St.fromAny(a),a=r.Length.fromAny(n),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e)}e=!1}else if(4===arguments.length)s=St.fromAny(n),a=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else if(5===arguments.length)s=St.fromAny(a),a=r.Length.zero(),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else{if(6!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+a+", "+s);s=St.fromAny(s),a=r.Length.fromAny(a),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i)}return new t(e,i,o,n,a,s,null)},t.fromInit=function(e){return new t(e.inset||!1,void 0!==e.offsetX?r.Length.fromAny(e.offsetX):r.Length.zero(),void 0!==e.offsetY?r.Length.fromAny(e.offsetY):r.Length.zero(),void 0!==e.blurRadius?r.Length.fromAny(e.blurRadius):r.Length.zero(),void 0!==e.spreadRadius?r.Length.fromAny(e.spreadRadius):r.Length.zero(),void 0!==e.color?St.fromAny(e.color):St.black(),null)},t.fromArray=function(e){for(var i=t.fromAny(e[0]),o=1;o<e.length;o+=1)i=i.and(e[o]);return i},t.fromAny=function(){for(var e,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(0===arguments.length)return null;if(null==(e=1===arguments.length?i[0]:i)||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e&&void 0===e.length)return t.fromInit(e);if("object"==typeof e&&null!==e&&e.length>0)return t.fromArray(e);throw new TypeError(""+e)},t.fromValue=function(e){var i=null;return e.forEach((function(e,n){var a=e.header("boxShadow");if(a.isDefined()){var s,l,u,h,p,d;a.forEach((function(t,e){var i=t.key.stringValue();void 0!==i?"inset"===i?s=t.toValue().booleanValue(s):"offsetX"===i?l=t.toValue().cast(r.Length.form(),l):"offsetY"===i?u=t.toValue().cast(r.Length.form(),u):"blurRadius"===i?h=t.toValue().cast(r.Length.form(),h):"spreadRadius"===i?p=t.toValue().cast(r.Length.form(),p):"color"===i&&(d=t.toValue().cast(St.form(),d)):t instanceof o.Value&&(0===e&&t instanceof o.Text&&"inset"===t.value?s=!0:0===e||1===e&&void 0!==s?l=t.cast(r.Length.form(),l):1===e||2===e&&void 0!==s?u=t.cast(r.Length.form(),u):2===e||3===e&&void 0!==s?void 0===(h=t.cast(r.Length.form(),h))&&(d=t.cast(St.form(),d)):(3===e||4===e&&void 0===s)&&void 0===d?void 0===(p=t.cast(r.Length.form(),p))&&(d=t.cast(St.form(),d)):(4===e||5===e&&void 0===s)&&void 0===d&&(d=t.cast(St.form(),d)))})),s=void 0!==s&&s,l=void 0!==l?l:r.Length.zero(),u=void 0!==u?u:r.Length.zero(),h=void 0!==h?h:r.Length.zero(),p=void 0!==p?p:r.Length.zero(),d=void 0!==d?d:St.black();var c=new t(s||!1,l,u,h,p,d,null);i=null!==i?i.and(c):c}})),i},t.parse=function(t){for(var e=a.Unicode.stringInput(t);e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();var i=zt.parse(e);if(i.isDone())for(;e.isCont()&&a.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=a.Parser.error(a.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==e.color}return!1},t.isArray=function(e){if(Array.isArray(e)){var i=e.length;if(0!==i){for(var o=0;o<i;o+=1)if(!t.isAny(e))return!1;return!0}}return!1},t.isAny=function(e){return e instanceof t||t.isArray(e)||t.isInit(e)||"string"==typeof e},t.form=function(){return new qt(null)},m([e.Lazy],t,"form",null),t}();function Ht(t,e){var i=function(t){var e=i.insetInterpolator(t),o=i.offsetXInterpolator(t),n=i.offsetYInterpolator(t),r=i.blurRadiusInterpolator(t),a=i.spreadRadiusInterpolator(t),s=i.colorInterpolator(t),l=i.nextInterpolator(t);return new Bt(e,o,n,r,a,s,l)};return Object.setPrototypeOf(i,Ht.prototype),Object.defineProperty(i,"insetInterpolator",{value:s.Interpolator(t.inset,e.inset),enumerable:!0}),Object.defineProperty(i,"offsetXInterpolator",{value:s.Interpolator(t.offsetX,e.offsetX),enumerable:!0}),Object.defineProperty(i,"offsetYInterpolator",{value:s.Interpolator(t.offsetY,e.offsetY),enumerable:!0}),Object.defineProperty(i,"blurRadiusInterpolator",{value:s.Interpolator(t.blurRadius,e.blurRadius),enumerable:!0}),Object.defineProperty(i,"spreadRadiusInterpolator",{value:s.Interpolator(t.spreadRadius,e.spreadRadius),enumerable:!0}),Object.defineProperty(i,"colorInterpolator",{value:s.Interpolator(t.color,e.color),enumerable:!0}),Object.defineProperty(i,"nextInterpolator",{value:s.Interpolator(t.next,e.next),enumerable:!0}),i}w(Ht,s.Interpolator),Object.defineProperty(Ht.prototype,0,{get:function(){var t=this.insetInterpolator[0],e=this.offsetXInterpolator[0],i=this.offsetYInterpolator[0],o=this.blurRadiusInterpolator[0],n=this.spreadRadiusInterpolator[0],r=this.colorInterpolator[0],a=this.nextInterpolator[0];return new Bt(t,e,i,o,n,r,a)},enumerable:!0,configurable:!0}),Object.defineProperty(Ht.prototype,1,{get:function(){var t=this.insetInterpolator[1],e=this.offsetXInterpolator[1],i=this.offsetYInterpolator[1],o=this.blurRadiusInterpolator[1],n=this.spreadRadiusInterpolator[1],r=this.colorInterpolator[1],a=this.nextInterpolator[1];return new Bt(t,e,i,o,n,r,a)},enumerable:!0,configurable:!0}),Ht.prototype.equals=function(t){return this===t||t instanceof Ht&&(this.insetInterpolator.equals(t.insetInterpolator)&&this.offsetXInterpolator.equals(t.offsetXInterpolator)&&this.offsetYInterpolator.equals(t.offsetYInterpolator)&&this.blurRadiusInterpolator.equals(t.blurRadiusInterpolator)&&this.spreadRadiusInterpolator.equals(t.spreadRadiusInterpolator)&&this.colorInterpolator.equals(t.colorInterpolator)&&this.nextInterpolator.equals(t.nextInterpolator))};var qt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){for(var e=Bt.fromAny(t),i=o.Record.create();;){var n=o.Record.create(5);if(e.inset&&n.push("inset"),n.push(r.Length.form().mold(e.offsetX)),n.push(r.Length.form().mold(e.offsetY)),n.push(r.Length.form().mold(e.blurRadius)),n.push(r.Length.form().mold(e.spreadRadius)),n.push(St.form().mold(e.color)),i.attr("boxShadow",n),null===e.next)break;e=e.next}return i},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=Bt.fromValue(i))){var o=i.stringValue();void 0!==o&&(e=Bt.parse(o))}}catch(t){}return e},e}(o.Form),zt=function(t){function e(e,i,o,n,r,a,s,l){var u=t.call(this)||this;return u.boxShadow=e,u.identOutput=i,u.offsetXParser=o,u.offsetYParser=n,u.blurRadiusParser=r,u.spreadRadiusParser=a,u.colorParser=s,u.step=l,u}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.boxShadow,this.identOutput,this.offsetXParser,this.offsetYParser,this.blurRadiusParser,this.spreadRadiusParser,this.colorParser,this.step)},e.parse=function(t,i,o,n,s,l,u,h,p){void 0===p&&(p=1);for(var d=0;;){if(1===p){for(;t.isCont()&&(d=t.head(),a.Unicode.isSpace(d));)t.step();if(t.isCont())p=a.Unicode.isAlpha(d)?2:4;else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(2===p){for(o=o||a.Unicode.stringOutput();t.isCont()&&(d=t.head(),a.Unicode.isAlpha(d));)t=t.step(),o.write(d);if(!t.isEmpty()){var c=o.bind();switch(c){case"inset":p=3;break;case"none":return a.Parser.done(null);default:return a.Parser.error(a.Diagnostic.message("unknown box-shadow: "+c,t))}}}if(3===p)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("space",t));t.step(),p=4}else if(t.isDone())return a.Parser.error(a.Diagnostic.unexpected(t));if(4===p){if(void 0===n){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=r.LengthParser.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())p=5;else if(n.isError())return n.asError()}if(5===p)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("space",t));t.step(),p=6}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(6===p){if(void 0===s){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(s=r.LengthParser.parse(t))}else s=s.feed(t);if(void 0!==s)if(s.isDone())p=7;else if(s.isError())return s.asError()}if(7===p)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("space",t));t.step(),p=8}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(8===p){if(void 0===l){for(;t.isCont()&&(d=t.head(),a.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?l=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else l=l.feed(t);if(void 0!==l)if(l.isDone())p=9;else if(l.isError())return l.asError()}if(9===p)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("space",t));t.step(),p=10}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(10===p){if(void 0===u){for(;t.isCont()&&(d=t.head(),a.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?u=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else u=u.feed(t);if(void 0!==u)if(u.isDone())p=11;else if(u.isError())return u.asError()}if(11===p)if(t.isCont()){if(!a.Unicode.isSpace(t.head()))return a.Parser.error(a.Diagnostic.expected("space",t));t.step(),p=12}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t));if(12===p){if(void 0===h){for(;t.isCont()&&a.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(h=Pt.parse(t))}else h=h.feed(t);if(void 0!==h)if(h.isDone()){var f=void 0!==o&&"inset"===o.bind(),v=n.bind(),y=s.bind(),g=void 0!==l?l.bind():r.Length.zero(),w=void 0!==u?u.bind():r.Length.zero(),m=h.bind(),b=new Bt(f,v,y,g,w,m,null);i=void 0===i?b:i.and(b),o=void 0,n=void 0,s=void 0,l=void 0,u=void 0,h=void 0,p=13}else if(h.isError())return h.asError()}if(13===p){for(;t.isCont()&&(d=t.head(),a.Unicode.isSpace(d));)t.step();if(t.isCont()&&44===d){t.step(),p=1;continue}if(!t.isEmpty())return a.Parser.done(i)}break}return new e(i,o,n,s,l,u,h,p)},e}(a.Parser),Yt={fromAny:function(t){if(t instanceof l.DateTime||t instanceof r.Angle||t instanceof r.Length||t instanceof St||t instanceof gt||t instanceof Bt||t instanceof Et||t instanceof r.Transform||t instanceof s.Interpolator||"number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Date||l.DateTime.isInit(t))return l.DateTime.fromAny(t);if(gt.isInit(t))return gt.fromAny(t);if(St.isInit(t))return St.fromAny(t);if(Bt.isInit(t))return Bt.fromAny(t);if("string"==typeof t)return Yt.parse(t);throw new TypeError(""+t)},parse:function(t){for("string"==typeof t&&(t=a.Unicode.stringInput(t));t.isCont()&&a.Unicode.isWhitespace(t.head());)t=t.step();var e=Gt.parse(t);if(e.isDone())for(;t.isCont()&&a.Unicode.isWhitespace(t.head());)t=t.step();return t.isCont()&&!e.isError()&&(e=a.Parser.error(a.Diagnostic.unexpected(t))),e.bind()}};Object.defineProperty(Yt,"form",{value:function(){var t=new Xt(void 0);return Object.defineProperty(Yt,"form",{value:function(){return t},enumerable:!0,configurable:!0}),t},enumerable:!0,configurable:!0});var Xt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){if(void 0!==t){if((t=Yt.fromAny(t))instanceof l.DateTime)return l.DateTime.form().mold(t);if(t instanceof r.Angle)return r.Angle.form().mold(t);if(t instanceof r.Length)return r.Length.form().mold(t);if(t instanceof gt)return gt.form().mold(t);if(t instanceof St)return St.form().mold(t);if(t instanceof Bt)return Bt.form().mold(t);if(t instanceof r.Transform)return r.Transform.form().mold(t);if("number"==typeof t)return o.Num.from(t);throw new TypeError(""+t)}return o.Item.extant()},e.prototype.cast=function(t){var e=t.toValue();if(e instanceof o.Num)return e.numberValue();if(e instanceof o.Bool)return e.booleanValue();var i=e.stringValue(void 0);if(void 0!==i)try{return Yt.parse(i)}catch(t){}if(e instanceof o.Record){var n=l.DateTime.fromValue(e);if(null!==n)return n;var a=r.Angle.fromValue(e);if(null!==a)return a;var s=r.Length.fromValue(e);if(null!==s)return s;var u=gt.fromValue(e);if(null!==u)return u;var h=St.fromValue(e);if(null!==h)return h;var p=Bt.fromValue(e);if(null!==p)return p;var d=r.Transform.fromValue(e);if(null!==d)return d}},e}(o.Form),Gt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.valueParser=i,r.unitsOutput=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.valueParser,this.unitsOutput,this.step)},e.parse=function(t,i,o,n,s){void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),a.Unicode.isSpace(u));)t.step();if(t.isCont()){if(35===u)return Mt.parse(t);s=a.Unicode.isAlpha(u)?2:3}else if(!t.isEmpty())return a.Parser.error(a.Diagnostic.unexpected(t))}if(2===s){for(i=i||a.Unicode.stringOutput();t.isCont()&&(u=t.head(),a.Unicode.isAlpha(u)||45===u);)t=t.step(),i.write(u);if(!t.isEmpty()){var h=i.bind();switch(h){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return Rt.parseRest(t);case"linear-gradient":return Ut.parseRest(t,i);case"normal":case"italic":case"oblique":return bt.parseRest(t,h);case"small-caps":return bt.parseRest(t,void 0,h);case"bold":case"bolder":case"lighter":return bt.parseRest(t,void 0,void 0,h);case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":return bt.parseRest(t,void 0,void 0,void 0,h);case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":return bt.parseRest(t,void 0,void 0,void 0,void 0,h);case"translateX":case"translateY":case"translate":return r.TranslateTransformParser.parseRest(t,i);case"scaleX":case"scaleY":case"scale":return r.ScaleTransformParser.parseRest(t,i);case"rotate":return r.RotateTransformParser.parseRest(t,i);case"skewX":case"skewY":case"skew":return r.SkewTransformParser.parseRest(t,i);case"matrix":return r.AffineTransformParser.parseRest(t,i);case"none":return a.Parser.done(r.Transform.identity());case"true":return a.Parser.done(!0);case"false":return a.Parser.done(!1);default:var p=St.forName(h);return null!==p?a.Parser.done(p):a.Parser.error(a.Diagnostic.message("unknown style value: "+h,t))}}}if(3===s)if((o=void 0===o?a.Base10.parseDecimal(t):o.feed(t)).isDone())s=4;else if(o.isError())return o.asError();if(4===s){if(t.isCont()&&45===(u=t.head())){t.step();var d={};return d.year=o.bind(),l.DateTimeFormat.pattern("%m-%dT%H:%M:%S.%LZ").parseDate(t,d)}t.isEmpty()||(s=5)}if(5===s){for(n=n||a.Unicode.stringOutput();t.isCont()&&(u=t.head(),a.Unicode.isAlpha(u)||37===u);)t.step(),n.push(u);t.isEmpty()||(s=6)}if(6===s&&!t.isEmpty()){var c=o.bind(),f=n.bind(),v=void 0;switch(f){case"deg":v=r.Angle.deg(c);break;case"rad":v=r.Angle.rad(c);break;case"grad":v=r.Angle.grad(c);break;case"turn":v=r.Angle.turn(c);break;case"px":v=r.Length.px(c);break;case"em":v=r.Length.em(c);break;case"rem":v=r.Length.rem(c);break;case"%":v=r.Length.pct(c);break;case"":v=c;break;default:return a.Parser.error(a.Diagnostic.message("unknown style units: "+f,t))}if(t.isCont()&&(u=t.head(),a.Unicode.isSpace(u)||47===u)){if(v instanceof r.Length)return bt.parseRest(t,void 0,void 0,void 0,void 0,v);if("number"==typeof v)switch(c){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:return bt.parseRest(t,void 0,void 0,String(c))}}return a.Parser.done(v)}return new e(i,o,n,s)},e}(a.Parser);function Kt(t){return"object"==typeof t&&null!==t?"function"==typeof t.toAttributeString?t.toAttributeString():t.toString():""+t}function Zt(t){return"object"==typeof t&&null!==t?"function"==typeof t.toStyleString?t.toStyleString():t.toString():""+t}t.ToCssValue=void 0,"undefined"!=typeof CSSStyleValue?t.ToCssValue=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toCssValue?t.toCssValue():"number"==typeof t?new CSSUnitValue(t,"number"):null}:t.ToCssValue=Zt;var _t=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){var i=this.array,o=this.index,n=o[t.name];if(void 0!==e&&void 0!==n)return(r=i.slice(0))[n]=[t,e],this.copy(r,o);if(void 0!==e){var r=i.slice(0),a={};for(var s in o)a[s]=o[s];return a[t.name]=r.length,r.push([t,e]),this.copy(r,a)}if(void 0!==n){r=new Array,a={};for(var l=0,u=0,h=i.length;u<h;u+=1){var p=i[u];p[0]!==t&&(r[l]=p,a[p[0].name]=l,l+=1)}return this.copy(r,a)}return this},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],a=t.call(e,r[1],r[0]);if(void 0!==a)return a}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("LookVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],a=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(a).write(93)}t=t.write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.empty=function(){return new t(e.Arrays.empty,{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),Qt=function(){function t(t){Object.defineProperty(this,"name",{value:t,configurable:!0,enumerable:!0})}return t.prototype.add=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=(h=i[a])[0],u=e.get(l);r[l.name]=n.length,n.push(void 0===u?h:[l,l.combine(this,h[1],u)])}for(a=0,s=o.length;a<s;a+=1){var h;void 0===r[(l=(h=o[a])[0]).name]&&(r[l.name]=n.length,n.push(h))}return this.fromArray(n,r)},t.prototype.negate=function(t){for(var e=t.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],a=r[0],s=r[1];o[n]=[a,a.combine(this,void 0,s,-1)]}return this.fromArray(o,t.index)},t.prototype.subtract=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=e.get(u);r[u.name]=n.length,n.push(void 0===h?l:[u,u.combine(this,l[1],h,-1)])}for(a=0,s=o.length;a<s;a+=1){var p=o[a];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,u.combine(this,void 0,h,-1)]))}return this.fromArray(n,r)},t.prototype.multiply=function(t,e){for(var i=t.array,o=i.length,n=new Array(o),r=0;r<o;r+=1){var a=i[r],s=a[0],l=a[1];n[r]=[s,s.combine(this,void 0,l,e)]}return this.fromArray(n,t.index)},t.prototype.dot=function(t,e){for(var i,o=t.array,n=0,r=o.length;n<r;n+=1){var a=o[n],s=a[0],l=a[1],u=e.get(s);void 0!==u&&0!==u&&(i=s.combine(this,i,l,u))}return i},t.prototype.dotOr=function(t,e,i){var o=t.array;if(0!==o.length){for(var n=void 0,r=0,a=o.length;r<a;r+=1){var s=o[r],l=s[0],u=s[1],h=e.get(l);void 0!==h&&0!==h&&(n=l.combine(this,n,u,h))}return n}return i},t.prototype.empty=function(){return _t.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n={},r=0;r<i;r+=1){var a=t[r],s=a[0],l=a[1];o[r]=[s,this.coerce(l)],n[s.name]=r}return this.fromArray(o,n)},t.prototype.fromArray=function(t,e){return _t.fromArray(t,e)},t.prototype.toString=function(){return"Look."+this.name},t}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:(1-i)*t+i*e:void 0!==i&&1!==i?e*i:e},e.prototype.between=function(t,e){return s.NumberInterpolator(t,e)},e.prototype.coerce=function(t){return t},e}(Qt),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:r.LengthInterpolator(t,e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return r.LengthInterpolator(t,e)},e.prototype.coerce=function(t){return r.Length.fromAny(t)},e}(Qt),te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:t.interpolateTo(e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return t.interpolateTo(e)},e.prototype.coerce=function(t){return St.fromAny(t)},e}(Qt),ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:gt.family(e.family)},e.prototype.between=function(t,e){return wt(t,e)},e.prototype.coerce=function(t){return gt.fromAny(t)},e}(Qt),ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return Ht(t,e)},e.prototype.coerce=function(t){return Bt.fromAny(t)},e}(Qt),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return s.Interpolator(t,e)},e.prototype.coerce=function(t){return s.Timing.fromAny(t)},e}(Qt),ne=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){var i=this.array,o=this.index,n=o[t.name];if(void 0!==e&&void 0!==n)return(r=i.slice(0))[n]=[t,e],this.copy(r,o);if(void 0!==e){var r=i.slice(0),a={};for(var s in o)a[s]=o[s];return a[t.name]=r.length,r.push([t,e]),this.copy(r,a)}if(void 0!==n){r=new Array,a={};for(var l=0,u=0,h=i.length;u<h;u+=1){var p=i[u];p[0]!==t&&(r[l]=p,a[p[0].name]=l,l+=1)}return this.copy(r,a)}return this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,a=e.length;r<a;r+=1){var s=(u=e[r])[0],l=t.get(s);n[s.name]=o.length,o.push(void 0===l?u:[s,s.combine(u[1],l)])}for(r=0,a=i.length;r<a;r+=1){var u;void 0===n[(s=(u=i[r])[0]).name]&&(n[s.name]=o.length,o.push(u))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],a=n[1];i[o]=[r,r.combine(void 0,a,-1)]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,a=e.length;r<a;r+=1){var s=e[r],l=s[0],u=t.get(l);n[l.name]=o.length,o.push(void 0===u?s:[l,l.combine(s[1],u,-1)])}for(r=0,a=i.length;r<a;r+=1){var h=i[r];l=h[0],u=h[1];void 0===n[l.name]&&(n[l.name]=o.length,o.push([l,l.combine(void 0,u,-1)]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],a=r[0],s=r[1];o[n]=[a,a.combine(void 0,s,t)]}return this.copy(o,this.index)},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],a=t.call(e,r[1],r[0]);if(void 0!==a)return a}},t.prototype.interpolateTo=function(e){return e instanceof t?ae(this,e):null},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("FeelVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],a=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(a).write(93)}t=t.write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r={},a=0;a<o;a+=1){var s=e[a],l=s[0],u=s[1];n[a]=[l,l.coerce(u)],r[l.name]=a}return new t(n,r)},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.of.apply(t,e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),re=function(){function t(t){Object.defineProperty(this,"name",{value:t,configurable:!0,enumerable:!0})}return t.prototype.empty=function(){return ne.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ne.of.apply(ne,t)},t.prototype.from=function(t,e){return ne.fromArray(t,e)},t.prototype.toString=function(){return"Feel."+this.name},t}();function ae(t,e){var i=function(t){for(var e=i.interpolators,o=e.length,n=new Array(o),r=i.index,a=0;a<o;a+=1){var s=e[a],l=s[0],u=(0,s[1])(t);n[a]=[l,u]}return ne.fromArray(n,r)};Object.setPrototypeOf(i,ae.prototype);var o=new Array,n={};return t.forEach((function(t,i){var r=e.get(i);if(void 0!==r){var a=i.between(t,r);n[i.name]=o.length,o.push([i,a])}})),Object.defineProperty(i,"interpolators",{value:o,enumerable:!0}),Object.defineProperty(i,"index",{value:n,enumerable:!0}),i}w(ae,s.Interpolator),Object.defineProperty(ae.prototype,0,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],a=r[0],s=r[1][0];i[n]=[a,s]}return ne.fromArray(i,o)},enumerable:!0,configurable:!0}),Object.defineProperty(ae.prototype,1,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],a=r[0],s=r[1][1];i[n]=[a,s]}return ne.fromArray(i,o)},enumerable:!0,configurable:!0}),ae.prototype.equals=function(t){if(this===t)return!0;if(t instanceof ae){var i=this.interpolators.length;if(i===t.interpolators.length){for(var o=0;o<i;o+=1)if(!e.Arrays.equal(this.interpolators[o],t.interpolators[o]))return!1;return!0}}return!1};var se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){return t.combine(e,i,o)},e}(re),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof St&&i instanceof St){var n=void 0===o?i.alpha():i.alpha()*o;return n>=0?e.darker(n):e.lighter(-n)}return t.combine(e,i,o)},e}(re),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof St&&i instanceof St){if(void 0===o||1===o)return e.alpha(i.alpha());if(0===o)return e;var n=(1-o)*e.alpha()+o*i.alpha();return e.alpha(n)}return t.combine(e,i,o)},e}(re),he={},pe=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){var i=this.array,o=this.index,n=o[t.name];if(void 0!==e&&void 0!==n)return(r=i.slice(0))[n]=[t,e],this.copy(r,o);if(void 0!==e){var r=i.slice(0),a={};for(var s in o)a[s]=o[s];return a[t.name]=r.length,r.push([t,e]),this.copy(r,a)}if(void 0!==n){r=new Array,a={};for(var l=0,u=0,h=i.length;u<h;u+=1){var p=i[u];p[0]!==t&&(r[l]=p,a[p[0].name]=l,l+=1)}return this.copy(r,a)}return this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,a=e.length;r<a;r+=1){var s=(u=e[r])[0],l=t.get(s);n[s.name]=o.length,o.push(void 0===l?u:[s,u[1]+l])}for(r=0,a=i.length;r<a;r+=1){var u;void 0===n[(s=(u=i[r])[0]).name]&&(n[s.name]=o.length,o.push(u))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],a=n[1];i[o]=[r,-a]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,a=e.length;r<a;r+=1){var s=e[r],l=s[0],u=t.get(l);n[l.name]=o.length,o.push(void 0===u?s:[l,s[1]-u])}for(r=0,a=i.length;r<a;r+=1){var h=i[r];l=h[0],u=h[1];void 0===n[l.name]&&(n[l.name]=o.length,o.push([l,-u]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],a=r[0],s=r[1];o[n]=[a,s*t]}return this.copy(o,this.index)},t.prototype.dot=function(t){for(var e,i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],a=r[0],s=r[1],l=t.get(a);void 0!==l&&(void 0===e?e=s*l:e+=s*l)}return e},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],a=t.call(e,r[1],r[0]);if(void 0!==a)return a}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("MoodVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],a=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(a).write(93)}t=t.write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),de=function(){function t(t,e,i,o){Object.defineProperty(this,"rowArray",{value:t,enumerable:!0}),Object.defineProperty(this,"rowIndex",{value:e,enumerable:!0}),Object.defineProperty(this,"colArray",{value:i,enumerable:!0}),Object.defineProperty(this,"colIndex",{value:o,enumerable:!0})}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=(h=i[a])[0],u=e.getCol(l);r[l.name]=n.length,n.push(void 0===u?h:[l,h[1].plus(u)])}for(a=0,s=o.length;a<s;a+=1){var h;void 0===r[(l=(h=o[a])[0]).name]&&(r[l.name]=n.length,n.push(h))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],a=r[0],s=r[1];o[n]=[a,s.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=e.getCol(u);r[u.name]=n.length,n.push(void 0===h?l:[u,l[1].minus(h)])}for(a=0,s=o.length;a<s;a+=1){var p=o[a];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,h.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var a=i[r],s=a[0],l=a[1];n[r]=[s,l.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i)return t=i[0],i[1].dot(e)},t.prototype.timesCol=function(t,e){void 0===e&&(e=!1);for(var i=this.rowArray,o=new Array,n={},r=0,a=i.length;r<a;r+=1){var s=i[r],l=s[0],u=s[1].dot(t);void 0!==u&&(n[l.name]=o.length,o.push([l,u]))}if(e){var h=t.array;for(r=0,a=h.length;r<a;r+=1){l=h[r][0];this.hasRow(l)||(n[l.name]=o.length,o.push(h[r]))}}return pe.fromArray(o,n)},t.prototype.timesRow=function(t,e){void 0===e&&(e=!1);for(var i=this.colArray,o=new Array,n={},r=0,a=i.length;r<a;r+=1){var s=i[r],l=s[0],u=s[1],h=t.dot(u);void 0!==h&&(n[l.name]=o.length,o.push([l,h]))}if(e){var p=t.array;for(r=0,a=p.length;r<a;r+=1){l=p[r][0];this.hasCol(l)||(n[l.name]=o.length,o.push(p[r]))}}return pe.fromArray(o,n)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,a={},s=new Array,l={},u=0,h=n.length;u<h;u+=1){var p=n[u][0],d=e.getCol(p);if(void 0===d&&i&&(d=pe.of([p,1])),void 0!==d)for(var c=0,f=o.length;c<f;c+=1){var v=o[c],y=v[0],g=v[1].dot(d);if(void 0!==g){var w=a[y.name];if(void 0!==w){var m=r[w][1];m.index[y.name]=m.array.length,m.array.push([p,g])}else a[y.name]=r.length,r.push([y,pe.of([p,g])]);var b=l[p.name];if(void 0!==b){var S=s[b][1];S.index[p.name]=S.array.length,S.array.push([y,g])}else l[p.name]=s.length,s.push([p,pe.of([y,g])])}}}return new t(r,a,s,l)},t.prototype.identityFor=function(e){for(var i,o,n=this.rowArray,r=e.colArray,a=0,s=r.length;a<s;a+=1){var l=r[a][0];if(!this.hasRow(l)){if(void 0===i&&(i=n.slice(0)),void 0===o)for(var u in o={},this.rowIndex)o[u]=this.rowIndex[u];o[l.name]=i.length,i.push([l,pe.of([l,1])])}}return void 0!==i&&void 0!==o?t.fromRowArray(i,o):this},t.prototype.row=function(e,i){void 0!==i&&(i=pe.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(a=o.slice(0))[r]=[e,i],t.fromRowArray(a,n);if(void 0!==i){var a=o.slice(0),s={};for(var l in n)s[l]=n[l];return s[e.name]=a.length,a.push([e,i]),t.fromRowArray(a,s)}if(void 0!==r){a=new Array,s={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(a[u]=d,s[d[0].name]=u,u+=1)}return t.fromRowArray(a,s)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=pe.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(a=o.slice(0))[r]=[e,i],t.fromColArray(a,n);if(void 0!==i){var a=o.slice(0),s={};for(var l in n)s[l]=n[l];return s[e.name]=a.length,a.push([e,i]),t.fromColArray(a,s)}if(void 0!==r){a=new Array,s={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(a[u]=d,s[d[0].name]=u,u+=1)}return t.fromColArray(a,s)}return this},t.prototype.updatedRow=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.getRow(t),r=n;void 0===r&&(!0===e?e=pe.of([t,1]):!1===e&&(e=void 0),r=e=void 0!==e?pe.fromAny(e):pe.empty());for(var a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=l[1];r=r.updated(u,h)}return r.equals(n)?this:this.row(t,r)},t.prototype.updatedCol=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.getCol(t),r=n;void 0===r&&(!0===e?e=pe.of([t,1]):!1===e&&(e=void 0),r=e=void 0!==e?pe.fromAny(e):pe.empty());for(var a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=l[1];r=r.updated(u,h)}return r.equals(n)?this:this.col(t,r)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("MoodMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],a=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(a).write(93)}t=t.write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],a=r[0],s=r[1];o[n]=[a,pe.fromAny(s)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],a=r[0],s=r[1];o[n]=[a,pe.fromAny(s)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=pe.index(e));for(var o=new Array,n={},r=0,a=e.length;r<a;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var s=0,l=o.length;s<l;s+=1){var u=o[s],h=u[0],p=new Array,d={};for(r=0,a=e.length;r<a;r+=1){var c=e[r],f=c[0],v=c[1].get(h);void 0!==v&&(d[f.name]=p.length,p.push([f,v]))}var y=pe.fromArray(p,d);u[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=pe.index(e));for(var o=new Array,n={},r=0,a=e.length;r<a;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var s=o.length;r<s;r+=1){var l=o[r],u=l[0],h=new Array,p={},d=0;for(a=e.length;d<a;d+=1){var c=e[d],f=c[0],v=c[1].get(u);void 0!==v&&(p[f.name]=h.length,h.push([f,v]))}var y=pe.fromArray(h,p);l[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}(),ce={},fe=function(){function t(t,e,i,o){Object.defineProperty(this,"rowArray",{value:t,enumerable:!0}),Object.defineProperty(this,"rowIndex",{value:e,enumerable:!0}),Object.defineProperty(this,"colArray",{value:i,enumerable:!0}),Object.defineProperty(this,"colIndex",{value:o,enumerable:!0})}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.get=function(t,e){return this.dot(t,e)},t.prototype.getOr=function(t,e,i){return this.dotOr(t,e,i)},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=(h=i[a])[0],u=e.getCol(l);r[l.name]=n.length,n.push(void 0===u?h:[l,h[1].plus(u)])}for(a=0,s=o.length;a<s;a+=1){var h;void 0===r[(l=(h=o[a])[0]).name]&&(r[l.name]=n.length,n.push(h))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],a=r[0],s=r[1];o[n]=[a,s.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=e.getCol(u);r[u.name]=n.length,n.push(void 0===h?l:[u,l[1].minus(h)])}for(a=0,s=o.length;a<s;a+=1){var p=o[a];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,h.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var a=i[r],s=a[0],l=a[1];n[r]=[s,l.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i){t=i[0];var o=i[1];return t.dot(o,e)}},t.prototype.dotOr=function(t,e,i){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var o="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==o){t=o[0];var n=o[1];return t.dotOr(n,e,i)}return i},t.prototype.timesCol=function(t){for(var e=this.rowArray,i=new Array,o={},n=0,r=e.length;n<r;n+=1){var a=e[n],s=a[0],l=a[1],u=s.dot(l,t);void 0!==u&&(o[s.name]=i.length,i.push([s,u]))}return ne.fromArray(i,o)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,a={},s=new Array,l={},u=0,h=n.length;u<h;u+=1){var p=n[u][0],d=e.getCol(p);if(void 0===d&&i&&(d=pe.of([p,1])),void 0!==d)for(var c=0,f=o.length;c<f;c+=1){var v=o[c],y=v[0],g=v[1],w=y.dot(g,d);if(void 0!==w){var m=a[y.name];if(void 0!==m){var b=r[m][1];b.index[y.name]=b.array.length,b.array.push([p,w])}else a[y.name]=r.length,r.push([y,_t.of([p,w])]);var S=l[p.name];if(void 0!==S){var C=s[S][1];C.index[p.name]=C.array.length,C.array.push([y,w])}else l[p.name]=s.length,s.push([p,ne.of([y,w])])}}}return new t(r,a,s,l)},t.prototype.row=function(e,i){void 0!==i&&(i=_t.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(a=o.slice(0))[r]=[e,i],t.fromRowArray(a,n);if(void 0!==i){var a=o.slice(0),s={};for(var l in n)s[l]=n[l];return s[e.name]=a.length,a.push([e,i]),t.fromRowArray(a,s)}if(void 0!==r){a=new Array,s={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(a[u]=d,s[d[0].name]=u,u+=1)}return t.fromRowArray(a,s)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=ne.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(a=o.slice(0))[r]=[e,i],t.fromColArray(a,n);if(void 0!==i){var a=o.slice(0),s={};for(var l in n)s[l]=n[l];return s[e.name]=a.length,a.push([e,i]),t.fromColArray(a,s)}if(void 0!==r){a=new Array,s={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(a[u]=d,s[d[0].name]=u,u+=1)}return t.fromColArray(a,s)}return this},t.prototype.updatedRow=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.getRow(t),r=n;void 0===r&&(r=e=void 0!==e?_t.fromAny(e):_t.empty());for(var a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=l[1];r=r.updated(u,void 0!==h?t.coerce(h):void 0)}return r.equals(n)?this:this.row(t,r)},t.prototype.updatedCol=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.getCol(t),r=n;void 0===r&&(r=e=void 0!==e?ne.fromAny(e):ne.empty());for(var a=0,s=i.length;a<s;a+=1){var l=i[a],u=l[0],h=l[1];r=r.updated(u,h)}return r.equals(n)?this:this.col(t,r)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("ThemeMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],a=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(a).write(93)}t=t.write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],a=r[0],s=r[1];o[n]=[a,_t.fromAny(s)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],a=r[0],s=r[1];o[n]=[a,ne.fromAny(s)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=ne.index(e));for(var o=new Array,n={},r=0,a=e.length;r<a;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var s=0,l=o.length;s<l;s+=1){var u=o[s],h=u[0],p=new Array,d={};for(r=0,a=e.length;r<a;r+=1){var c=e[r],f=c[0],v=c[1].get(h);void 0!==v&&(d[f.name]=p.length,p.push([f,v]))}var y=ne.fromArray(p,d);u[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=_t.index(e));for(var o=new Array,n={},r=0,a=e.length;r<a;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var s=o.length;r<s;r+=1){var l=o[r],u=l[0],h=new Array,p={},d=0;for(a=e.length;d<a;d+=1){var c=e[d],f=c[0],v=c[1].get(u);void 0!==v&&(p[f.name]=h.length,h.push([f,v]))}var y=_t.fromArray(h,p);l[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}();Qt.font=new ee("font"),Qt.color=new te("color"),Qt.iconColor=new te("iconColor"),Qt.statusColor=new te("statusColor"),Qt.accentColor=new te("accentColor"),Qt.mutedColor=new te("mutedColor"),Qt.neutralColor=new te("neutralColor"),Qt.subduedColor=new te("subduedColor"),Qt.faintColor=new te("faintColor"),Qt.highlightColor=new te("highlightColor"),Qt.backgroundColor=new te("backgroundColor"),Qt.borderColor=new te("borderColor"),Qt.opacity=new Jt("opacity"),Qt.shadow=new ie("shadow"),Qt.spacing=new $t("spacing"),Qt.timing=new oe("timing"),re.ambient=new se("ambient"),re.default=new se("default"),re.primary=new se("primary"),re.secondary=new se("secondary"),re.selected=new le("selected"),re.disabled=new se("disabled"),re.inactive=new se("inactive"),re.warning=new se("warning"),re.alert=new se("alert"),re.darker=new le("darker"),re.lighter=new le("lighter"),re.contrasted=new le("contrasted"),re.raised=new se("raised"),re.covered=new se("covered"),re.floating=new se("floating"),re.transparent=new se("transparent"),re.translucent=new ue("translucent"),re.embossed=new le("embossed"),re.nested=new le("nested"),re.hovering=new le("hovering"),re.navigating=new se("navigating"),he.ambient=pe.of([re.ambient,1]),he.default=pe.of([re.default,1]),he.primary=pe.of([re.primary,1]),he.secondary=pe.of([re.secondary,1]),he.selected=pe.of([re.selected,1]),he.disabled=pe.of([re.disabled,1]),he.inactive=pe.of([re.inactive,1]),he.warning=pe.of([re.warning,1]),he.alert=pe.of([re.alert,1]),he.darker=pe.of([re.darker,1]),he.lighter=pe.of([re.lighter,1]),he.contrasted=pe.of([re.contrasted,1]),he.raised=pe.of([re.raised,1]),he.covered=pe.of([re.covered,1]),he.floating=pe.of([re.floating,1]),he.transparent=pe.of([re.transparent,1]),he.translucent=pe.of([re.translucent,1]),he.embossed=pe.of([re.embossed,1]),he.nested=pe.of([re.nested,1]),he.hovering=pe.of([re.hovering,1]),he.navigating=pe.of([re.navigating,1]);var ve=gt.parse("14px -apple-system, system-ui, sans-serif"),ye=St.parse("#d8d8d8"),ge=St.parse("#d8d8d8"),we=St.parse("#6c6d6e"),me=St.parse("#989898"),be=St.parse("#808080"),Se=St.parse("#28292a"),Ce=St.parse("#1f2123"),Pe=St.white(.1),Ve=St.parse("#161719"),Te=Ve.lighter(2/3),Ae=St.parse("#18191b"),Fe=St.parse("#1e2022"),Me=St.parse("#66ffdd"),Oe=St.parse("#32c5ff"),xe=St.parse("#7b7c7d"),De=St.parse("#7b7c7d"),Re=St.parse("#f9f070"),Le=St.parse("#f6511d"),ke=r.Length.px(10),je=ne.of([Qt.font,ve],[Qt.color,ye],[Qt.iconColor,ge],[Qt.statusColor,ye],[Qt.accentColor,we],[Qt.mutedColor,me],[Qt.neutralColor,be],[Qt.subduedColor,Se],[Qt.faintColor,Ce],[Qt.highlightColor,Pe],[Qt.backgroundColor,Ve],[Qt.borderColor,Te],[Qt.spacing,ke],[Qt.timing,s.Easing.linear.withDuration(1e3)]),Ie=ne.of([Qt.font,ve],[Qt.color,ye],[Qt.iconColor,ge],[Qt.statusColor,ye],[Qt.accentColor,we],[Qt.mutedColor,me],[Qt.neutralColor,be],[Qt.subduedColor,Se],[Qt.faintColor,Ce],[Qt.highlightColor,Pe],[Qt.backgroundColor,Ve],[Qt.borderColor,Te],[Qt.spacing,ke],[Qt.timing,s.Easing.cubicOut.withDuration(250)]),Ee=ne.of([Qt.accentColor,Me]),We=ne.of([Qt.accentColor,Oe]),Ne=ne.of([Qt.backgroundColor,St.black(1)]),Ue=ne.of([Qt.color,xe],[Qt.iconColor,xe],[Qt.statusColor,xe],[Qt.accentColor,xe]),Be=ne.of([Qt.statusColor,De],[Qt.accentColor,De]),He=ne.of([Qt.statusColor,Re],[Qt.accentColor,Re]),qe=ne.of([Qt.statusColor,Le],[Qt.accentColor,Le]),ze=ne.of([Qt.mutedColor,me.darker(1/3)],[Qt.neutralColor,be.darker(1/3)],[Qt.backgroundColor,Ae]),Ye=ne.of([Qt.mutedColor,me.darker(1/3)],[Qt.neutralColor,be.darker(1/3)],[Qt.backgroundColor,Fe]),Xe=ne.of([Qt.shadow,Bt.create(0,2,4,0,St.black(.5))]),Ge=ne.of([Qt.backgroundColor,Ve.alpha(0)],[Qt.borderColor,Te.alpha(0)]),Ke=ne.of([Qt.iconColor,St.black(.8)],[Qt.statusColor,St.black(.8)],[Qt.accentColor,St.black(.8)],[Qt.backgroundColor,St.black(.8)],[Qt.borderColor,St.black(.8)]),Ze=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),_e=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Qe=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Je=ne.of([Qt.iconColor,St.black(2)],[Qt.statusColor,St.black(2)],[Qt.accentColor,St.black(2)]),$e=ne.of([Qt.backgroundColor,St.black(1/3)],[Qt.borderColor,St.black(1/3)]),ti=ne.of([Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)],[Qt.backgroundColor,St.black(-1)]),ei=ne.of([Qt.timing,s.Easing.cubicOut.withDuration(350)]),ii=fe.forCols([re.ambient,je],[re.default,Ie],[re.primary,Ee],[re.secondary,We],[re.selected,Ne],[re.disabled,Ue],[re.inactive,Be],[re.warning,He],[re.alert,qe],[re.darker,Ze],[re.lighter,_e],[re.contrasted,Qe],[re.raised,ze],[re.covered,Ye],[re.floating,Xe],[re.transparent,Ge],[re.translucent,Ke],[re.embossed,Je],[re.nested,$e],[re.hovering,ti],[re.navigating,ei]);ce.dark=ii;var oi=gt.parse("14px -apple-system, system-ui, sans-serif"),ni=St.parse("#4a4a4a"),ri=St.parse("#4a4a4a"),ai=St.parse("#5c5d5e"),si=St.parse("#989898"),li=St.parse("#808080"),ui=St.parse("#d7d6d5"),hi=St.parse("#e0dedc"),pi=St.black(.05),di=St.parse("#f9f8f6"),ci=di.darker(.5),fi=St.parse("#f7f6f4"),vi=St.parse("#f1efed"),yi=St.parse("#4fcfb3"),gi=St.parse("#008cc7"),wi=St.parse("#7b7c7d"),mi=St.parse("#7b7c7d"),bi=St.parse("#e6de65"),Si=St.parse("#df4616"),Ci=r.Length.px(10),Pi=ne.of([Qt.font,oi],[Qt.color,ni],[Qt.iconColor,ri],[Qt.statusColor,ni],[Qt.accentColor,ai],[Qt.mutedColor,si],[Qt.neutralColor,li],[Qt.subduedColor,ui],[Qt.faintColor,hi],[Qt.highlightColor,pi],[Qt.backgroundColor,di],[Qt.borderColor,ci],[Qt.spacing,Ci],[Qt.timing,s.Easing.linear.withDuration(1e3)]),Vi=ne.of([Qt.font,oi],[Qt.color,ni],[Qt.iconColor,ri],[Qt.statusColor,ni],[Qt.accentColor,ai],[Qt.mutedColor,si],[Qt.neutralColor,li],[Qt.subduedColor,ui],[Qt.faintColor,hi],[Qt.highlightColor,pi],[Qt.backgroundColor,di],[Qt.borderColor,ci],[Qt.spacing,Ci],[Qt.timing,s.Easing.cubicOut.withDuration(250)]),Ti=ne.of([Qt.accentColor,yi]),Ai=ne.of([Qt.accentColor,gi]),Fi=ne.of([Qt.backgroundColor,St.black(.5)]),Mi=ne.of([Qt.color,wi],[Qt.iconColor,wi],[Qt.statusColor,wi],[Qt.accentColor,wi]),Oi=ne.of([Qt.statusColor,mi],[Qt.accentColor,mi]),xi=ne.of([Qt.statusColor,bi],[Qt.accentColor,bi]),Di=ne.of([Qt.statusColor,Si],[Qt.accentColor,Si]),Ri=ne.of([Qt.mutedColor,si.darker(1/3)],[Qt.neutralColor,li.darker(1/3)],[Qt.backgroundColor,fi]),Li=ne.of([Qt.mutedColor,si.darker(1/3)],[Qt.neutralColor,li.darker(1/3)],[Qt.backgroundColor,vi]),ki=ne.of([Qt.shadow,Bt.create(0,2,4,0,St.black(.5))]),ji=ne.of([Qt.backgroundColor,di.alpha(0)],[Qt.borderColor,ci.alpha(0)]),Ii=ne.of([Qt.iconColor,St.black(.8)],[Qt.statusColor,St.black(.8)],[Qt.accentColor,St.black(.8)],[Qt.backgroundColor,St.black(.8)],[Qt.borderColor,St.black(.8)]),Ei=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Wi=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Ni=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Ui=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Bi=ne.of([Qt.backgroundColor,St.black(1/24)],[Qt.accentColor,St.black(-1/8)],[Qt.borderColor,St.black(1/24)]),Hi=ne.of([Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)],[Qt.backgroundColor,St.black(1)]),qi=ne.of([Qt.timing,s.Easing.cubicOut.withDuration(350)]),zi=fe.forCols([re.ambient,Pi],[re.default,Vi],[re.primary,Ti],[re.secondary,Ai],[re.selected,Fi],[re.disabled,Mi],[re.inactive,Oi],[re.warning,xi],[re.alert,Di],[re.darker,Ei],[re.lighter,Wi],[re.contrasted,Ni],[re.raised,Ri],[re.covered,Li],[re.floating,ki],[re.transparent,ji],[re.translucent,Ii],[re.embossed,Ui],[re.nested,Bi],[re.hovering,Hi],[re.navigating,qi]);ce.light=zi;var Yi={detect:function(){var t=0,e=0,i=0,o=0,n=document.documentElement.style.width,r=document.documentElement.style.height;document.documentElement.style.width="100%",document.documentElement.style.height="100%";var a=document.createElement("div");a.style.setProperty("position","fixed"),a.style.setProperty("top","0"),a.style.setProperty("right","0"),a.style.setProperty("width",window.innerWidth===document.documentElement.offsetWidth?"100%":"100vw"),a.style.setProperty("height",window.innerHeight===document.documentElement.offsetHeight?"100%":"100vh"),a.style.setProperty("box-sizing","border-box"),a.style.setProperty("padding-top","env(safe-area-inset-top)"),a.style.setProperty("padding-right","env(safe-area-inset-right)"),a.style.setProperty("padding-bottom","env(safe-area-inset-bottom)"),a.style.setProperty("padding-left","env(safe-area-inset-left)"),a.style.setProperty("overflow","hidden"),a.style.setProperty("visibility","hidden"),document.body.appendChild(a);var s=window.getComputedStyle(a),l=parseFloat(s.getPropertyValue("width")),u=parseFloat(s.getPropertyValue("height")),h=l,p=u,d=0,c=0,f=0,v=0,y=1;void 0!==window.visualViewport&&(h=window.visualViewport.width,p=window.visualViewport.height,d=window.visualViewport.offsetLeft,c=window.visualViewport.offsetTop,f=window.visualViewport.pageLeft,v=window.visualViewport.pageTop,y=window.visualViewport.scale);var g={width:h,height:p,offsetLeft:d,offsetTop:c,pageLeft:f,pageTop:v,scale:y};"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("padding-top: env(safe-area-inset-top)")&&(t=parseFloat(s.getPropertyValue("padding-top")),e=parseFloat(s.getPropertyValue("padding-right")),i=parseFloat(s.getPropertyValue("padding-bottom")),o=parseFloat(s.getPropertyValue("padding-left"))),document.body.removeChild(a),document.documentElement.style.width=n,document.documentElement.style.height=r;var w={insetTop:t,insetRight:e,insetBottom:i,insetLeft:o},m=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;if(void 0===m)switch(window.orientation){case 0:m="portrait-primary";break;case 180:m="portrait-secondary";break;case-90:m="landscape-primary";break;case 90:m="landscape-secondary";break;default:m="landscape-primary"}return{width:l,height:u,visual:g,safeArea:w,orientation:m,colorScheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"no-preference"}}},Xi={default:function(){return{updateTime:performance.now(),viewIdiom:"unspecified",viewport:Yi.detect()}}},Gi=function(){function t(){Object.defineProperty(this,"viewFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewController",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewObserverCache",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.initView=function(t){void 0!==t.viewController&&this.setViewController(t.viewController)},t.prototype.setViewFlags=function(t){Object.defineProperty(this,"viewFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.setViewController=function(t){var e=this.viewController;e!==t&&(this.willSetViewController(t),null!==e&&e.setView(null),Object.defineProperty(this,"viewController",{value:t,enumerable:!0,configurable:!0}),null!==t&&t.setView(this),this.onSetViewController(t),this.didSetViewController(t))},t.prototype.willSetViewController=function(t){},t.prototype.onSetViewController=function(t){},t.prototype.didSetViewController=function(t){},t.prototype.addViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewObserver(t),Object.defineProperty(this,"viewObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddViewObserver(t),this.didAddViewObserver(t))},t.prototype.willAddViewObserver=function(t){},t.prototype.onAddViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didAddViewObserver=function(t){},t.prototype.removeViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewObserver(t),Object.defineProperty(this,"viewObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveViewObserver(t),this.didRemoveViewObserver(t))},t.prototype.willRemoveViewObserver=function(t){},t.prototype.onRemoveViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didRemoveViewObserver=function(t){},t.prototype.attachParentView=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower(),t.isCulled()&&this.cascadeCull())},t.prototype.detachParentView=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentView=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetParentView&&i.viewWillSetParentView(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.viewWillSetParentView&&a.viewWillSetParentView(t,e,this)}},t.prototype.onSetParentView=function(t,e){},t.prototype.didSetParentView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetParentView&&r.viewDidSetParentView(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.viewDidSetParentView&&a.viewDidSetParentView(t,e,this)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildView=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillInsertChildView&&i.viewWillInsertChildView(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.viewWillInsertChildView&&a.viewWillInsertChildView(t,e,this)}},t.prototype.onInsertChildView=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildView&&r.viewDidInsertChildView(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.viewDidInsertChildView&&a.viewDidInsertChildView(t,e,this)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildView=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRemoveChildView&&e.viewWillRemoveChildView(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillRemoveChildView&&r.viewWillRemoveChildView(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildView=function(t){},t.prototype.didRemoveChildView=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildView&&n.viewDidRemoveChildView(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidRemoveChildView&&r.viewDidRemoveChildView(t,this)},t.prototype.getSuperView=function(t){var e=this.parentView;return null===e?null:e instanceof t?e:e.getSuperView(t)},t.prototype.getBaseView=function(t){var e=this.parentView;if(null===e)return null;var i=e.getBaseView(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.viewFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillMount&&t.viewWillMount(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillMount&&n.viewWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags),0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didMount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMount&&o.viewDidMount(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidMount&&n.viewDidMount(this)},t.prototype.willUnmount=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUnmount&&t.viewWillUnmount(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUnmount&&n.viewWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnmount&&o.viewDidUnmount(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUnmount&&n.viewDidUnmount(this)},t.prototype.isPowered=function(){return 0!=(this.viewFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillPower&&t.viewWillPower(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillPower&&n.viewWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidPower&&o.viewDidPower(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidPower&&n.viewDidPower(this)},t.prototype.willUnpower=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUnpower&&t.viewWillUnpower(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUnpower&&n.viewWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnpower&&o.viewDidUnpower(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUnpower&&n.viewDidUnpower(this)},t.prototype.isCulled=function(){return 0!=(this.viewFlags&t.CulledMask)},t.prototype.willCull=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillCull&&t.viewWillCull(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillCull&&n.viewWillCull(this)}},t.prototype.onCull=function(){},t.prototype.didCull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidCull&&o.viewDidCull(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidCull&&n.viewDidCull(this)},Object.defineProperty(t.prototype,"uncullFlags",{get:function(){return this.constructor.uncullFlags},enumerable:!1,configurable:!0}),t.prototype.willUncull=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUncull&&t.viewWillUncull(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUncull&&n.viewWillUncull(this)}},t.prototype.onUncull=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.uncullFlags)},t.prototype.didUncull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUncull&&o.viewDidUncull(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUncull&&n.viewDidUncull(this)},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.viewFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setViewFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(e,i,o){if((this.viewFlags&t.CulledMask)!==t.CulledFlag){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsProcess|t.NeedsDisplay);if(0!=(i&t.ProcessMask)&&0==(this.viewFlags&t.NeedsProcess)&&(this.setViewFlags(this.viewFlags|t.NeedsProcess),n|=t.NeedsProcess),0!=(i&t.DisplayMask)&&0==(this.viewFlags&t.NeedsDisplay)&&(this.setViewFlags(this.viewFlags|t.NeedsDisplay),n|=t.NeedsDisplay),0!=(n&(t.NeedsProcess|t.NeedsDisplay))||o){this.onRequestUpdate(e,i,o);var r=this.parentView;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var a=this.displayService.manager;void 0!==a&&a.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)}},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){return 0!=(this.viewFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.viewFlags&t.UpdatingMask)},t.prototype.isProcessing=function(){return 0!=(this.viewFlags&t.ProcessingFlag)},t.prototype.needsProcess=function(t,e){return t},t.prototype.willProcess=function(t,e){},t.prototype.onProcess=function(t,e){},t.prototype.didProcess=function(t,e){},t.prototype.willResize=function(t){var e=this.viewController;null!==e&&e.viewWillResize(t,this);var i=this.viewObserverCache.viewWillResizeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillResize(t,this)}},t.prototype.onResize=function(t){},t.prototype.didResize=function(t){var e=this.viewObserverCache.viewDidResizeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidResize(t,this)}var n=this.viewController;null!==n&&n.viewDidResize(t,this)},t.prototype.willScroll=function(t){var e=this.viewController;null!==e&&e.viewWillScroll(t,this);var i=this.viewObserverCache.viewWillScrollObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillScroll(t,this)}},t.prototype.onScroll=function(t){},t.prototype.didScroll=function(t){var e=this.viewObserverCache.viewDidScrollObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidScroll(t,this)}var n=this.viewController;null!==n&&n.viewDidScroll(t,this)},t.prototype.willChange=function(t){var e=this.viewController;null!==e&&e.viewWillChange(t,this);var i=this.viewObserverCache.viewWillChangeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillChange(t,this)}},t.prototype.onChange=function(t){},t.prototype.didChange=function(t){var e=this.viewObserverCache.viewDidChangeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidChange(t,this)}var n=this.viewController;null!==n&&n.viewDidChange(t,this)},t.prototype.willAnimate=function(t){var e=this.viewController;null!==e&&e.viewWillAnimate(t,this);var i=this.viewObserverCache.viewWillAnimateObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillAnimate(t,this)}},t.prototype.onAnimate=function(t){this.updateAnimations(t.updateTime)},t.prototype.updateAnimations=function(e){for(var i=this.animationTracks,o=0,n=i.length;o<n;o+=1){i[o].onAnimate(e)}0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didAnimate=function(t){var e=this.viewObserverCache.viewDidAnimateObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidAnimate(t,this)}var n=this.viewController;null!==n&&n.viewDidAnimate(t,this)},t.prototype.willProcessChildViews=function(t,e){},t.prototype.onProcessChildViews=function(t,e){this.processChildViews(t,e,this.processChildView)},t.prototype.didProcessChildViews=function(t,e){},t.prototype.processChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.processChildView=function(t,e,i){this.willProcessChildView(t,e,i),this.onProcessChildView(t,e,i),this.didProcessChildView(t,e,i)},t.prototype.willProcessChildView=function(t,e,i){},t.prototype.onProcessChildView=function(t,e,i){t.cascadeProcess(e,i)},t.prototype.didProcessChildView=function(t,e,i){},t.prototype.isDisplaying=function(){return 0!=(this.viewFlags&t.DisplayingFlag)},t.prototype.needsDisplay=function(t,e){return t},t.prototype.willDisplay=function(t,e){},t.prototype.onDisplay=function(t,e){},t.prototype.didDisplay=function(t,e){},t.prototype.willLayout=function(t){var e=this.viewController;null!==e&&e.viewWillLayout(t,this);var i=this.viewObserverCache.viewWillLayoutObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillLayout(t,this)}},t.prototype.onLayout=function(t){},t.prototype.didLayout=function(t){var e=this.viewObserverCache.viewDidLayoutObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidLayout(t,this)}var n=this.viewController;null!==n&&n.viewDidLayout(t,this)},t.prototype.willDisplayChildViews=function(t,e){},t.prototype.onDisplayChildViews=function(t,e){this.displayChildViews(t,e,this.displayChildView)},t.prototype.didDisplayChildViews=function(t,e){},t.prototype.displayChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.displayChildView=function(t,e,i){this.willDisplayChildView(t,e,i),this.onDisplayChildView(t,e,i),this.didDisplayChildView(t,e,i)},t.prototype.willDisplayChildView=function(t,e,i){},t.prototype.onDisplayChildView=function(t,e,i){t.cascadeDisplay(e,i)},t.prototype.didDisplayChildView=function(t,e,i){},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},t.prototype.willApplyTheme=function(t,e,i){var o=this.viewController;null!==o&&void 0!==o.viewWillApplyTheme&&o.viewWillApplyTheme(t,e,i,this);for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.viewWillApplyTheme&&s.viewWillApplyTheme(t,e,i,this)}},t.prototype.onApplyTheme=function(t,e,i){},t.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.viewDidApplyTheme&&a.viewDidApplyTheme(t,e,i,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidApplyTheme&&s.viewDidApplyTheme(t,e,i,this)},t.prototype.getLazyViewService=function(e){var i=this.getViewService(e);if(null===i){var o=t.getViewServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewService(e,i))}return i},t.prototype.getLazyViewProperty=function(e){var i=this.getViewProperty(e);if(null===i){var o=t.getViewPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewProperty(e,i))}return i},t.prototype.getLazyViewAnimator=function(e){var i=this.getViewAnimator(e);if(null===i){var o=t.getViewAnimatorConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewAnimator(e,i))}return i},t.prototype.trackWillStartAnimating=function(i){Object.defineProperty(this,"animationTracks",{value:e.Arrays.inserted(i,this.animationTracks),enumerable:!0,configurable:!0}),this.requireUpdate(t.NeedsAnimate)},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){Object.defineProperty(this,"animationTracks",{value:e.Arrays.removed(t,this.animationTracks),enumerable:!0,configurable:!0})},t.prototype.getLazyViewFastener=function(e){var i=this.getViewFastener(e);if(null===i){var o=t.getViewFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setViewFastener(e,i)}return i},t.prototype.constraint=function(t,e,i,o){t=u.ConstraintExpression.fromAny(t),void 0!==i&&(i=u.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?u.ConstraintStrength.Required:u.ConstraintStrength.fromAny(o);var r=new u.Constraint(this,n,e,o);return this.addConstraint(r),r},t.prototype.activateConstraint=function(e){var i=this.layoutService.manager;void 0!==i&&(i.activateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraint=function(e){var i=this.layoutService.manager;void 0!==i&&(i.deactivateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?u.ConstraintStrength.Strong:u.ConstraintStrength.fromAny(i),new u.ConstraintBinding(this,t,e,i)},t.prototype.activateConstraintVariable=function(e){var i=this.layoutService.manager;void 0!==i&&(i.activateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraintVariable=function(e){var i=this.layoutService.manager;void 0!==i&&(i.deactivateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.setConstraintVariable=function(t,e){var i=this.layoutService.manager;void 0!==i&&i.setConstraintVariable(t,e)},t.prototype.extendViewContext=function(t){return t},Object.defineProperty(t.prototype,"superViewContext",{get:function(){var t=this.parentView;if(null!==t)return t.viewContext;var e=this.viewportService.viewContext;return this.displayService.updatedViewContext(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewContext",{get:function(){return this.extendViewContext(this.superViewContext)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageTransform",{get:function(){var t=this.parentView;return null!==t?t.pageTransform.transform(this.parentTransform):r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBounds",{get:function(){var t=this.clientBounds,e=this.clientTransform;return t.transform(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popoverFrame",{get:function(){return this.pageBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientTransform",{get:function(){var t,e=window.pageXOffset,i=window.pageYOffset;t=0!==e||0!==i?r.Transform.translate(e,i):r.Transform.identity();var o=this.pageTransform;return t.transform(o)},enumerable:!1,configurable:!0}),t.prototype.intersectsViewport=function(){var t=this.clientBounds,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return(t.top<=0&&0<t.bottom||0<=t.top&&t.top<i)&&(t.left<=0&&0<t.right||0<=t.left&&t.left<e)},t.getViewServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewServiceConstructors")){var i=e.viewServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewServiceConstructors")||(o.viewServiceConstructors={}),o.viewServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewService(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewPropertyConstructors")){var i=e.viewPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewPropertyConstructors")||(o.viewPropertyConstructors={}),o.viewPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewProperty(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewAnimatorConstructor=function(t,e){for(null===e&&(e=this.prototype);null!==e;){if(Object.prototype.hasOwnProperty.call(e,"viewAnimatorConstructors")){var i=e.viewAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},t.decorateViewAnimator=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewAnimatorConstructors")||(o.viewAnimatorConstructors={}),o.viewAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewAnimator(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewFastenerConstructors")){var i=e.viewFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"viewFastenerConstructors")||(r.viewFastenerConstructors={}),r.viewFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewFastener(o);return null===e&&(e=new t(this,n,o),this.setViewFastener(o,e)),e},enumerable:!0,configurable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.CullFlag=4,t.CulledFlag=8,t.HideFlag=16,t.HiddenFlag=32,t.TraversingFlag=64,t.ProcessingFlag=128,t.DisplayingFlag=256,t.RemovingFlag=512,t.ImmediateFlag=1024,t.CulledMask=t.CullFlag|t.CulledFlag,t.HiddenMask=t.HideFlag|t.HiddenFlag,t.UpdatingMask=t.ProcessingFlag|t.DisplayingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.CullFlag|t.CulledFlag|t.HiddenFlag|t.TraversingFlag|t.ProcessingFlag|t.DisplayingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsProcess=2048,t.NeedsResize=4096,t.NeedsScroll=8192,t.NeedsChange=16384,t.NeedsAnimate=32768,t.NeedsProject=65536,t.ProcessMask=t.NeedsProcess|t.NeedsResize|t.NeedsScroll|t.NeedsChange|t.NeedsAnimate|t.NeedsProject,t.NeedsDisplay=1<<17,t.NeedsLayout=1<<18,t.NeedsRender=1<<19,t.NeedsComposite=1<<20,t.DisplayMask=t.NeedsDisplay|t.NeedsLayout|t.NeedsRender|t.NeedsComposite,t.UpdateMask=t.ProcessMask|t.DisplayMask,t.ViewFlagShift=24,t.ViewFlagMask=(1<<t.ViewFlagShift)-1,t.mountFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.powerFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.uncullFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.insertChildFlags=t.NeedsLayout,t.removeChildFlags=t.NeedsLayout,t}(),Ki=function(){function t(){Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0})}return t.prototype.setView=function(t){this.willSetView(t),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),this.onSetView(t),this.didSetView(t)},t.prototype.willSetView=function(t){},t.prototype.onSetView=function(t){},t.prototype.didSetView=function(t){},Object.defineProperty(t.prototype,"key",{get:function(){var t=this.view;return null!==t?t.key:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentView",{get:function(){var t=this.view;return null!==t?t.parentView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentViewController",{get:function(){var t=this.parentView;return null!==t?t.viewController:null},enumerable:!1,configurable:!0}),t.prototype.viewWillSetParentView=function(t,e,i){},t.prototype.viewDidSetParentView=function(t,e,i){},Object.defineProperty(t.prototype,"childViewCount",{get:function(){var t=this.view;return null!==t?t.childViewCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childViews",{get:function(){var t=this.view;return null!==t?t.childViews:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childViewControllers",{get:function(){return this.childViews.map((function(t){return t.viewController}))},enumerable:!1,configurable:!0}),t.prototype.getChildView=function(t){var e=this.view;return null!==e?e.getChildView(t):null},t.prototype.getChildViewController=function(t){var e=this.getChildView(t);return null!==e?e.viewController:null},t.prototype.setChildView=function(t,e){var i=this.view;if(null!==i)return i.setChildView(t,e);throw new Error("no view")},t.prototype.setChildViewController=function(t,e){var i=null!==e?e.view:null;if(null!==i){var o=this.setChildView(t,i);return null!==o?o.viewController:null}throw new Error("no view")},t.prototype.appendChildView=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.appendChildView(t,e)},t.prototype.appendChildViewController=function(t,e){var i=this.view,o=t.view;if(null===i||null===o)throw new Error("no view");i.appendChildView(o,e)},t.prototype.prependChildView=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.prependChildView(t,e)},t.prototype.prependChildViewController=function(t,e){var i=this.view,o=t.view;if(null===i||null===o)throw new Error("no view");i.prependChildView(o,e)},t.prototype.insertChildView=function(t,e,i){var o=this.view;if(null===o)throw new Error("no view");o.insertChildView(t,e,i)},t.prototype.insertChildViewController=function(t,e,i){var o=this.view,n=t.view;if(null===o||null===n)throw new Error("no view");var r=void 0;r=null===e||e instanceof Gi?e:e.view,o.insertChildView(n,r,i)},t.prototype.viewWillInsertChildView=function(t,e,i){},t.prototype.viewDidInsertChildView=function(t,e,i){},t.prototype.removeChildView=function(t){var e=this.view;if("string"==typeof t)return null!==e?e.removeChildView(t):null;null!==e&&e.removeChildView(t)},t.prototype.removeChildViewController=function(t){var e,i=this.view;if(null===i)throw new Error("no view");if("string"==typeof t)return null!==(e=i.removeChildView(t))?e.viewController:null;if(null===(e=t.view))throw new Error("no view");i.removeChildView(e)},t.prototype.removeAll=function(){var t=this.view;if(null===t)throw new Error("no view");t.removeAll()},t.prototype.remove=function(){var t=this.view;if(null===t)throw new Error("no view");t.remove()},t.prototype.viewWillRemoveChildView=function(t,e){},t.prototype.viewDidRemoveChildView=function(t,e){},t.prototype.getSuperView=function(t){var e=this.view;return null!==e?e.getSuperView(t):null},t.prototype.getBaseView=function(t){var e=this.view;return null!==e?e.getBaseView(t):null},t.prototype.isMounted=function(){var t=this.view;return null!==t&&t.isMounted()},t.prototype.viewWillMount=function(t){},t.prototype.viewDidMount=function(t){},t.prototype.viewWillUnmount=function(t){},t.prototype.viewDidUnmount=function(t){},t.prototype.isPowered=function(){var t=this.view;return null!==t&&t.isPowered()},t.prototype.viewWillPower=function(t){},t.prototype.viewDidPower=function(t){},t.prototype.viewWillUnpower=function(t){},t.prototype.viewDidUnpower=function(t){},t.prototype.isCulled=function(){var t=this.view;return null!==t&&t.isCulled()},t.prototype.viewWillCull=function(t){},t.prototype.viewDidCull=function(t){},t.prototype.viewWillUncull=function(t){},t.prototype.viewDidUncull=function(t){},t.prototype.isTraversing=function(){var t=this.view;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.view;return null!==t&&t.isUpdating()},t.prototype.isProcessing=function(){var t=this.view;return null!==t&&t.isProcessing()},t.prototype.viewWillResize=function(t,e){},t.prototype.viewDidResize=function(t,e){},t.prototype.viewWillScroll=function(t,e){},t.prototype.viewDidScroll=function(t,e){},t.prototype.viewWillChange=function(t,e){},t.prototype.viewDidChange=function(t,e){},t.prototype.viewWillAnimate=function(t,e){},t.prototype.viewDidAnimate=function(t,e){},t.prototype.viewWillProject=function(t,e){},t.prototype.viewDidProject=function(t,e){},t.prototype.isDisplaying=function(){var t=this.view;return null!==t&&t.isDisplaying()},t.prototype.viewWillLayout=function(t,e){},t.prototype.viewDidLayout=function(t,e){},t.prototype.viewWillRender=function(t,e){},t.prototype.viewDidRender=function(t,e){},t.prototype.viewWillComposite=function(t,e){},t.prototype.viewDidComposite=function(t,e){},t.prototype.viewWillApplyTheme=function(t,e,i,o){},t.prototype.viewDidApplyTheme=function(t,e,i,o){},Object.defineProperty(t.prototype,"viewContext",{get:function(){var t=this.view;return null!==t?t.viewContext:_i.global().viewContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),t}(),Zi=function(){function t(){Object.defineProperty(this,"rootViews",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewManagerObserver(t),Object.defineProperty(this,"viewManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddViewManagerObserver(t),this.didAddViewManagerObserver(t))},t.prototype.willAddViewManagerObserver=function(t){},t.prototype.onAddViewManagerObserver=function(t){},t.prototype.didAddViewManagerObserver=function(t){},t.prototype.removeViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewManagerObserver(t),Object.defineProperty(this,"viewManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveViewManagerObserver(t),this.didRemoveViewManagerObserver(t))},t.prototype.willRemoveViewManagerObserver=function(t){},t.prototype.onRemoveViewManagerObserver=function(t){},t.prototype.didRemoveViewManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootViews.length},t.prototype.willAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillAttach&&o.viewManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidAttach&&o.viewManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillDetach&&o.viewManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidDetach&&o.viewManagerDidDetach(this)}},t.prototype.insertRootView=function(t){var i=this.rootViews,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootView(t),Object.defineProperty(this,"rootViews",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootView(t),this.didInsertRootView(t),n&&this.didAttach()}},t.prototype.willInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillInsertRootView&&n.viewManagerWillInsertRootView(t,this)}},t.prototype.onInsertRootView=function(t){},t.prototype.didInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidInsertRootView&&n.viewManagerDidInsertRootView(t,this)}},t.prototype.removeRootView=function(t){var i=this.rootViews,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootView(t),Object.defineProperty(this,"rootViews",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootView(t),this.didRemoveRootView(t),n&&this.didDetach()}},t.prototype.willRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillRemoveRootView&&n.viewManagerWillRemoveRootView(t,this)}},t.prototype.onRemoveRootView=function(t){},t.prototype.didRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidRemoveRootView&&n.viewManagerDidRemoveRootView(t,this)}},t}(),_i=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"viewContext",{value:e.initViewContext(),enumerable:!0,configurable:!0}),e.viewportResizeTimer=0,e.reorientationTimer=0,e.throttleScroll=e.throttleScroll.bind(e),e.throttleResize=e.throttleResize.bind(e),e.debounceViewportResize=e.debounceViewportResize.bind(e),e.throttleViewportResize=e.throttleViewportResize.bind(e),e.debounceReorientation=e.debounceReorientation.bind(e),e.throttleReorientation=e.throttleReorientation.bind(e),e}return w(i,t),i.prototype.initViewContext=function(){return{updateTime:0,viewIdiom:"unspecified",viewport:this.detectViewport()}},Object.defineProperty(i.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),i.prototype.detectViewport=function(){return Yi.detect()},i.prototype.detectViewIdiom=function(t){return t.width<960||t.height<480?"mobile":"desktop"},i.prototype.updateViewIdiom=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==r.detectViewIdiom&&void 0!==(e=r.detectViewIdiom(t,this)))break}void 0===e&&(e=this.detectViewIdiom(t)),void 0!==e&&this.setViewIdiom(e)},i.prototype.setViewIdiom=function(t){var e=this.viewContext,i=e.viewIdiom;i!==t&&(this.willSetViewIdiom(t,i),e.viewIdiom=t,this.onSetViewIdiom(t,i),this.didSetViewIdiom(t,i))},i.prototype.willSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerWillSetViewIdiom&&r.viewportManagerWillSetViewIdiom(t,e,this)}},i.prototype.onSetViewIdiom=function(t,e){for(var i=this.rootViews,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(Gi.NeedsLayout)},i.prototype.didSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerDidSetViewIdiom&&r.viewportManagerDidSetViewIdiom(t,e,this)}},i.prototype.willReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerWillReorient&&n.viewportManagerWillReorient(t,this)}},i.prototype.onReorient=function(t){},i.prototype.didReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerDidReorient&&n.viewportManagerDidReorient(t,this)}},i.prototype.onAddViewManagerObserver=function(e){t.prototype.onAddViewManagerObserver.call(this,e),this.isAttached()&&this.updateViewIdiom(this.viewport)},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents(),this.updateViewIdiom(this.viewport)},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&(window.addEventListener("scroll",this.throttleScroll,{passive:!0}),window.addEventListener("resize",this.throttleResize),window.addEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.addEventListener("resize",this.debounceViewportResize))},i.prototype.detachEvents=function(){"undefined"!=typeof window&&(window.removeEventListener("scroll",this.throttleScroll),window.removeEventListener("resize",this.throttleResize),window.removeEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.removeEventListener("resize",this.debounceViewportResize))},i.prototype.throttleScroll=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(Gi.NeedsScroll)},i.prototype.throttleResize=function(){var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Gi.NeedsResize|Gi.NeedsLayout)},i.prototype.debounceViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0),this.viewportResizeTimer=setTimeout(this.throttleViewportResize,i.ViewportResizeDelay)},i.prototype.throttleViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Gi.NeedsResize|Gi.NeedsScroll|Gi.NeedsLayout)},i.prototype.debounceReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0),this.reorientationTimer=setTimeout(this.throttleReorientation,i.ReorientationDelay)},i.prototype.throttleReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.willReorient(t.orientation),this.updateViewIdiom(t),this.onReorient(t.orientation),this.didReorient(t.orientation);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Gi.NeedsResize|Gi.NeedsScroll|Gi.NeedsLayout)},i.global=function(){return new i},i.ViewportResizeDelay=200,i.ReorientationDelay=100,m([e.Lazy],i,"global",null),i}(Zi),Qi=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.processTimer=0,e.displayFrame=0,e.updateDelay=i.MinUpdateDelay,e.runProcessPass=e.runProcessPass.bind(e),e.runDisplayPass=e.runDisplayPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.updatedViewContext=function(t){return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return Gi.NeedsResize|Gi.NeedsScroll},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootViews()},i.prototype.powerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootView(o)}},i.prototype.powerRootView=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootViews()},i.prototype.unpowerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootView(o)}},i.prototype.unpowerRootView=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&Gi.ProcessMask)&&this.setRootFlags(this.rootFlags|Gi.NeedsProcess),0!=(e&Gi.DisplayMask)&&this.setRootFlags(this.rootFlags|Gi.NeedsDisplay),0!=(this.rootFlags&Gi.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxProcessInterval&&0==(this.rootFlags&(Gi.TraversingFlag|Gi.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.processTimer&&0===this.displayFrame&&0==(t&Gi.UpdatingMask)&&0!=(t&Gi.UpdateMask)&&(this.processTimer=setTimeout(this.runProcessPass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.processTimer&&(clearTimeout(this.processTimer),this.processTimer=0),0!==this.displayFrame&&(cancelAnimationFrame(this.displayFrame),this.displayFrame=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|Gi.ImmediateFlag);try{0!=(this.rootFlags&Gi.ProcessMask)&&(this.cancelUpdate(),this.runProcessPass(!0)),0!=(this.rootFlags&Gi.DisplayMask)&&this.updateDelay<=i.MaxProcessInterval&&(this.cancelUpdate(),this.runDisplayPass(void 0,!0))}finally{this.setRootFlags(this.rootFlags&~Gi.ImmediateFlag)}},i.prototype.runProcessPass=function(t){void 0===t&&(t=!1),this.setRootFlags(this.rootFlags&~Gi.ProcessMask|Gi.TraversingFlag|Gi.ProcessingFlag);try{for(var e=performance.now(),o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&Gi.ProcessMask)){var a=r.viewportService.viewContext;a.updateTime=e,r.cascadeProcess(0,a)}}var s=performance.now(),l=Math.max(i.MinProcessInterval,this.updateDelay);this.updateDelay=s-e>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&Gi.DisplayMask)?this.displayFrame=requestAnimationFrame(this.runDisplayPass):0!=(this.rootFlags&Gi.ProcessMask)&&(t&&(l=Math.max(i.MaxProcessInterval,l)),this.processTimer=setTimeout(this.runProcessPass,l))}finally{this.setRootFlags(this.rootFlags&~(Gi.TraversingFlag|Gi.ProcessingFlag))}},i.prototype.runDisplayPass=function(t,e){void 0===e&&(e=!1),this.setRootFlags(this.rootFlags&~Gi.DisplayMask|Gi.TraversingFlag|Gi.DisplayingFlag);try{void 0===t&&(t=performance.now());for(var o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&Gi.DisplayMask)){var a=r.viewportService.viewContext;a.updateTime=t,r.cascadeDisplay(0,a)}}if(this.cancelUpdate(),0!=(this.rootFlags&Gi.ProcessMask)){var s=this.updateDelay;e&&(s=Math.max(i.MaxProcessInterval,s)),this.processTimer=setTimeout(this.runProcessPass,s)}else 0!=(this.rootFlags&Gi.DisplayMask)&&(this.displayFrame=requestAnimationFrame(this.runDisplayPass))}finally{this.setRootFlags(this.rootFlags&~(Gi.TraversingFlag|Gi.DisplayingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.requestUpdate(e,e.viewFlags&Gi.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinProcessInterval=12,i.MaxProcessInterval=33,m([e.Lazy],i,"global",null),i}(Zi),Ji=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"solver",{value:e.createSolver(),enumerable:!0}),e}return w(i,t),i.prototype.createSolver=function(){return new u.ConstraintSolver},i.prototype.activateConstraint=function(t){this.solver.addConstraint(t)},i.prototype.deactivateConstraint=function(t){this.solver.removeConstraint(t)},i.prototype.activateConstraintVariable=function(t){this.solver.addConstraintVariable(t)},i.prototype.deactivateConstraintVariable=function(t){this.solver.removeConstraintVariable(t)},i.prototype.setConstraintVariable=function(t,e){this.solver.setConstraintVariable(t,e)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),$i=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"mood",{value:e.initMood(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"theme",{value:e.initTheme(),enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initMood=function(){return he.default},i.prototype.setMood=function(t){Object.defineProperty(this,"mood",{value:t,enumerable:!0,configurable:!0}),this.applyTheme(this.theme,t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.mood.isAuto()&&(n.mood.setAutoState(t),n.requireUpdate(Gi.NeedsChange))}},i.prototype.initTheme=function(){return"dark"===Yi.detect().colorScheme?ce.dark:ce.light},i.prototype.setTheme=function(t){Object.defineProperty(this,"theme",{value:t,enumerable:!0,configurable:!0}),this.applyTheme(t,this.mood);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.theme.isAuto()&&(n.theme.setAutoState(t),n.requireUpdate(Gi.NeedsChange))}},i.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},i.prototype.willApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.themeManagerWillApplyTheme&&a.themeManagerWillApplyTheme(t,e,i,this)}},i.prototype.onApplyTheme=function(t,e,i){},i.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.themeManagerDidApplyTheme&&a.themeManagerDidApplyTheme(t,e,i,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.applyTheme(this.theme,this.mood)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),to={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"modalView"in e&&"modalState"in e&&"modality"in e&&"function"==typeof e.showModal&&"function"==typeof e.hideModal}return!1}},eo=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"modals",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modality",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"matteView",{value:null,enumerable:!0,configurable:!0}),i.onClick=i.onClick.bind(i),i}return w(i,t),i.prototype.isModal=function(){return 0!==this.modality},i.prototype.setMatteView=function(t){Object.defineProperty(this,"matteView",{value:t,enumerable:!0,configurable:!0})},i.prototype.insertModalView=function(t){var e=this.matteView;null!==e?e.appendChildView(t):this.constructor.insertModalView(t)},i.prototype.presentModal=function(t,i){void 0===i&&(i={});var o=this.modals,n=e.Arrays.inserted(t,o);if(o!==n){i.multi||this.dismissModals(),this.willPresentModal(t,i),Object.defineProperty(this,"modals",{value:n,enumerable:!0,configurable:!0});var r=t.modalView;null===r||r.isMounted()||this.insertModalView(r),t.showModal(i,!0),this.onPresentModal(t,i),this.updateModality(),this.didPresentModal(t,i)}},i.prototype.willPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillPresentModal&&r.modalManagerWillPresentModal(t,e,this)}},i.prototype.onPresentModal=function(t,e){},i.prototype.didPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidPresentModal&&r.modalManagerDidPresentModal(t,e,this)}},i.prototype.dismissModal=function(t){var i=this.modals,o=e.Arrays.removed(t,i);i!==o&&(this.willDismissModal(t),Object.defineProperty(this,"modals",{value:o,enumerable:!0,configurable:!0}),t.hideModal(!0),this.onDismissModal(t),this.updateModality(),this.didDismissModal(t))},i.prototype.willDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerWillDismissModal&&n.modalManagerWillDismissModal(t,this)}},i.prototype.onDismissModal=function(t){},i.prototype.didDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDismissModal&&n.modalManagerDidDismissModal(t,this)}},i.prototype.dismissModals=function(){for(var t=0,e=this.modals.length;t<e;t+=1)this.dismissModal(this.modals[t])},i.prototype.toggleModal=function(t,e){var i=t.modalState;"hidden"===i||"hiding"===i?this.presentModal(t,e):"shown"!==i&&"showing"!==i||this.dismissModal(t)},i.prototype.updateModality=function(){for(var t=this.modality,e=0,i=this.modals,o=0,n=i.length;o<n;o+=1){var r=+i[o].modality;e=Math.min(Math.max(e,r),1)}t!==e&&(this.willUpdateModality(e,t),Object.defineProperty(this,"modality",{value:e,enumerable:!0,configurable:!0}),this.onUpdateModality(e,t),this.didUpdateModality(e,t))},i.prototype.willUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillUpdateModality&&r.modalManagerWillUpdateModality(t,e,this)}},i.prototype.onUpdateModality=function(t,e){},i.prototype.didUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidUpdateModality&&r.modalManagerDidUpdateModality(t,e,this)}},i.prototype.displaceModals=function(t){this.willDisplaceModals(t)||(this.onDisplaceModals(t),this.didDisplaceModals(t))},i.prototype.willDisplaceModals=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillDisplaceModals&&(e=r.modalManagerWillDisplaceModals(t,this))}return void 0!==e&&e},i.prototype.onDisplaceModals=function(t){for(var e=this.modals,i=0;i<e.length;){var o=e[i];"shown"===o.modalState?this.dismissModal(o):i+=1}},i.prototype.didDisplaceModals=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDisplaceModals&&n.modalManagerDidDisplaceModals(t,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.attachEvents(e)},i.prototype.onRemoveRootView=function(e){t.prototype.onRemoveRootView.call(this,e),this.detachEvents(e)},i.prototype.attachEvents=function(t){t.on("click",this.onClick)},i.prototype.detachEvents=function(t){t.off("click",this.onClick)},i.prototype.onClick=function(t){this.displaceModals(t)},i.insertModalView=function(t){throw new TypeError(""+t)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),io=function(t,e){return this instanceof io?oo.call(this,t,e):(i=t,Gi.decorateViewService.bind(Gi,io.define(i)));var i};function oo(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(io,Object),io.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},io.prototype.isInherited=function(){return 0!=(this.serviceFlags&io.InheritedFlag)},io.prototype.setInherited=function(t){if(t&&0==(this.serviceFlags&io.InheritedFlag)){var e=this.superService;null!==e&&(this.setServiceFlags(this.serviceFlags|io.InheritedFlag),Object.defineProperty(this,"manager",{value:e.manager,enumerable:!0,configurable:!0}))}else t||0==(this.serviceFlags&io.InheritedFlag)||this.setServiceFlags(this.serviceFlags&~io.InheritedFlag)},io.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(io.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),io.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentView;if(null!==o){if(null===(n=(e=o).getViewService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyViewService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|io.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~io.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})))},io.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~io.InheritedFlag)},Object.defineProperty(io.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),io.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},io.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},io.prototype.initManager=function(){},io.prototype.mount=function(){this.bindSuperService()},io.prototype.unmount=function(){this.unbindSuperService()},io.getClass=function(t){return t===_i?ro:t===Qi?ao:t===Ji?so:t===$i?lo:t===eo?uo:t===Zi?no:null},io.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=io.getClass(t.type)),null===e&&(e=io);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},a=t;return Object.setPrototypeOf(r,e),(r.prototype=a).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(a.initManager=function(){return i}),Object.defineProperty(a,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},io.InheritedFlag=1;var no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootView(this.owner),!1!==this.observe&&e.addViewManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeViewManagerObserver(this),this.isInherited()||e.removeRootView(this.owner)),t.prototype.unmount.call(this)},e}(io),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"viewContext",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewIdiom",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewIdiom},enumerable:!1,configurable:!0}),e.prototype.setViewIdiom=function(t){var e=this.manager;void 0===e&&(e=_i.global()),e.setViewIdiom(t)},e.prototype.initManager=function(){return _i.global()},e}(no);io({type:_i,observe:!1})(Gi.prototype,"viewportService");var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.updatedViewContext=function(t){var e=this.manager;return void 0===e&&(e=Qi.global()),e.updatedViewContext(t)},e.prototype.initManager=function(){return Qi.global()},e}(no);io({type:Qi,observe:!1})(Gi.prototype,"displayService");var so=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return Ji.global()},e}(no);io({type:Ji,observe:!1})(Gi.prototype,"layoutService");var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"mood",{get:function(){return this.manager.mood},enumerable:!1,configurable:!0}),e.prototype.setMood=function(t){this.manager.setMood(t)},Object.defineProperty(e.prototype,"theme",{get:function(){return this.manager.theme},enumerable:!1,configurable:!0}),e.prototype.setTheme=function(t){this.manager.setTheme(t)},e.prototype.initManager=function(){return $i.global()},e}(no);io({type:$i,observe:!1})(Gi.prototype,"themeService");var uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.presentModal=function(t,e){this.manager.presentModal(t,e)},e.prototype.dismissModal=function(t){this.manager.dismissModal(t)},e.prototype.dismissModals=function(){this.manager.dismissModals()},e.prototype.toggleModal=function(t,e){this.manager.toggleModal(t,e)},e.prototype.updateModality=function(){this.manager.updateModality()},e.prototype.displaceModals=function(t){this.manager.displaceModals(t)},e.prototype.initManager=function(){return eo.global()},e}(no);io({type:eo,observe:!1})(Gi.prototype,"modalService");var ho=function(t,e){return this instanceof ho?po.call(this,t,e):(i=t,Gi.decorateViewProperty.bind(Gi,ho.define(i)));var i};function po(t,e){var i,o;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),void 0!==this.initState&&(o=this.fromAny(this.initState())),Object.defineProperty(this,"propertyFlags",{value:ho.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"state",{value:o,enumerable:!0,configurable:!0}),this}w(ho,Object),ho.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},ho.prototype.isInherited=function(){return 0!=(this.propertyFlags&ho.InheritedFlag)},ho.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&(ho.InheritedFlag|ho.OverrideFlag))){var e=this.superProperty;null!==e&&(this.setPropertyFlags(this.propertyFlags|ho.UpdatedFlag|ho.InheritedFlag),Object.defineProperty(this,"state",{value:e.state,enumerable:!0,configurable:!0}),this.change())}else t||0==(this.propertyFlags&ho.InheritedFlag)||this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag)},ho.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(ho.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),ho.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner;;){var i=e.parentView;if(null!==i){var o=(e=i).getLazyViewProperty(t);if(null===o)continue;Object.defineProperty(this,"superProperty",{value:o,enumerable:!0,configurable:!0}),o.addSubProperty(this),0==(this.propertyFlags&ho.OverrideFlag)&&(this.setPropertyFlags(this.propertyFlags|ho.UpdatedFlag|ho.InheritedFlag),Object.defineProperty(this,"state",{value:o.state,enumerable:!0,configurable:!0}),this.change())}break}},ho.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag))},ho.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},ho.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},ho.prototype.isAuto=function(){return 0==(this.propertyFlags&ho.OverrideFlag)},ho.prototype.setAuto=function(t){t&&0!=(this.propertyFlags&ho.OverrideFlag)?this.setPropertyFlags(this.propertyFlags&~ho.OverrideFlag):t||0!=(this.propertyFlags&ho.OverrideFlag)||this.setPropertyFlags(this.propertyFlags|ho.OverrideFlag)},ho.prototype.isUpdated=function(){return 0!=(this.propertyFlags&ho.UpdatedFlag)},Object.defineProperty(ho.prototype,"ownState",{get:function(){return this.isInherited()?void 0:this.state},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),ho.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},ho.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},ho.prototype.setState=function(t){this.setPropertyFlags(this.propertyFlags|ho.OverrideFlag),this.setOwnState(t)},ho.prototype.willSetOwnState=function(t,e){},ho.prototype.onSetOwnState=function(t,e){},ho.prototype.didSetOwnState=function(t,e){},ho.prototype.setAutoState=function(t){0==(this.propertyFlags&ho.OverrideFlag)&&this.setOwnState(t)},ho.prototype.setOwnState=function(t){var i=this.state;t=this.fromAny(t),this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag),e.Equals(i,t)||(this.willSetOwnState(t,i),this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|ho.UpdatedFlag),this.onSetOwnState(t,i),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i),this.didSetOwnState(t,i))},ho.prototype.setBaseState=function(t){var e;this.isInherited()&&null!==(e=this.superProperty)?(t=this.fromAny(t),e.setBaseState(t)):this.setState(t)},Object.defineProperty(ho.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&ho.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),ho.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&ho.UpdatedFlag)?(this.setPropertyFlags(t&~ho.UpdatedFlag),this.state):void 0},ho.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~ho.UpdatedFlag),this.state},ho.prototype.onChange=function(){this.isInherited()&&this.updateInherited()},ho.prototype.updateInherited=function(){var t=this.superProperty;null!==t&&this.update(t.state,this.state)},ho.prototype.update=function(t,i){e.Equals(i,t)||(this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|ho.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},ho.prototype.willSetState=function(t,e){},ho.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},ho.prototype.didSetState=function(t,e){},ho.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.change()}},ho.prototype.change=function(){this.owner.requireUpdate(Gi.NeedsChange)},ho.prototype.fromAny=function(t){return t},ho.prototype.isMounted=function(){return 0!=(this.propertyFlags&ho.MountedFlag)},ho.prototype.mount=function(){0==(this.propertyFlags&ho.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|ho.MountedFlag),this.onMount(),this.didMount())},ho.prototype.willMount=function(){},ho.prototype.onMount=function(){this.bindSuperProperty()},ho.prototype.didMount=function(){},ho.prototype.unmount=function(){0!=(this.propertyFlags&ho.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~ho.MountedFlag),this.onUnmount(),this.didUnmount())},ho.prototype.willUnmount=function(){},ho.prototype.onUnmount=function(){this.unbindSuperProperty()},ho.prototype.didUnmount=function(){},ho.prototype.toString=function(){return this.name},ho.getClass=function(t){return t===String?vo:t===Boolean?yo:t===Number?go:null},ho.define=function(t){var i=t.extends,o=t.state,n=t.inherit,r=t.initState;delete t.extends,delete t.state,void 0===i&&(i=ho.getClass(t.type)),null===i&&(i=ho,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},s=t;return Object.setPrototypeOf(a,i),(a.prototype=s).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),void 0!==o&&void 0===r&&(s.initState=function(){return o}),Object.defineProperty(s,"inherit",{value:null!=n&&n,enumerable:!0,configurable:!0}),a},ho.MountedFlag=1,ho.UpdatedFlag=2,ho.OverrideFlag=4,ho.InheritedFlag=8,ho.ConstrainedFlag=16,ho.ConstrainingFlag=32,ho({extends:void 0,type:pe,state:null,inherit:!0})(Gi.prototype,"mood"),ho({extends:void 0,type:fe,state:null,inherit:!0})(Gi.prototype,"theme");var co=function(t,e){return this instanceof co?fo.call(this,t,e):(i=t,Gi.decorateViewProperty.bind(Gi,co.define(i)));var i};function fo(t,e){var i,o=ho.call(this,t,e)||this;return Object.defineProperty(o,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(o,"strength",{value:null!==(i=o.strength)&&void 0!==i?i:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(o,"conditionCount",{value:0,enumerable:!0,configurable:!0}),o}w(co,ho),co.prototype.isExternal=function(){return!0},co.prototype.isDummy=function(){return!1},co.prototype.isInvalid=function(){return!1},co.prototype.isConstant=function(){return!1},co.prototype.onSetState=function(t,e){ho.prototype.onSetState.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,void 0!==t?this.toNumber(t):0)},co.prototype.evaluateConstraintVariable=function(){},co.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&this.setOwnState(t)},Object.defineProperty(co.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),co.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},co.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},co.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},co.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},co.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},co.prototype.isConstrained=function(){return 0!=(this.propertyFlags&ho.ConstrainedFlag)},co.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.propertyFlags;return t&&0==(e&ho.ConstrainedFlag)?(this.setPropertyFlags(e|ho.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&ho.ConstrainedFlag)||(this.setPropertyFlags(e&~ho.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},co.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},co.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},co.prototype.isConstraining=function(){return 0!=(this.propertyFlags&ho.ConstrainingFlag)},co.prototype.startConstraining=function(){0==(this.propertyFlags&ho.ConstrainingFlag)&&(this.willStartConstraining(),this.setPropertyFlags(this.propertyFlags|ho.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},co.prototype.willStartConstraining=function(){},co.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},co.prototype.didStartConstraining=function(){},co.prototype.stopConstraining=function(){0!=(this.propertyFlags&ho.ConstrainingFlag)&&(this.willStopConstraining(),this.setPropertyFlags(this.propertyFlags&~ho.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},co.prototype.willStopConstraining=function(){},co.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},co.prototype.didStopConstraining=function(){},co.prototype.updateConstraintVariable=function(){var t=this.state;void 0!==t&&this.owner.setConstraintVariable(this,this.toNumber(t))},co.prototype.onMount=function(){ho.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},co.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),ho.prototype.onUnmount.call(this)},co.getClass=function(t){return t===Number?wo:t===r.Length?mo:null},co.define=function(t){var i=t.extends,o=t.state,n=t.inherit,r=t.initState,a=t.constrain,s=t.strength;delete t.extends,delete t.state,delete t.inherit,delete t.constrain,delete t.strength,void 0===i&&(i=co.getClass(t.type)),null===i&&(i=co,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o,!0===a&&o.constrain(),o},h=t;return Object.setPrototypeOf(l,i),(l.prototype=h).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),void 0!==o&&void 0===r&&(h.initState=function(){return o}),Object.defineProperty(h,"inherit",{value:null!=n&&n,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(h,"strength",{value:u.ConstraintStrength.fromAny(s),enumerable:!0,configurable:!0}),l};var vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(ho),yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(ho),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(ho),wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(co),mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(co),bo=function(){function t(e,i){Object.defineProperty(this,"ownValue",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"animatorFlags",{value:t.UpdatedFlag,enumerable:!0,configurable:!0})}return t.prototype.isDefined=function(t){return null!=t},Object.defineProperty(t.prototype,"value",{get:function(){return this.ownValue},enumerable:!1,configurable:!0}),t.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" value");return t},t.prototype.getValueOr=function(t){var e=this.value;return null==e&&(e=t),e},t.prototype.setValue=function(i,o){1===arguments.length&&(o=this.value),e.Equals(o,i)||(this.willSetValue(i,o),Object.defineProperty(this,"ownValue",{value:i,enumerable:!0,configurable:!0}),this.setAnimatorFlags(this.animatorFlags|t.UpdatedFlag),this.onSetValue(i,o),this.didSetValue(i,o))},t.prototype.willSetValue=function(t,e){},t.prototype.onSetValue=function(t,e){},t.prototype.didSetValue=function(t,e){},t.prototype.setIntermediateValue=function(i,o){var n=arguments.length>1?this.state:void 0,r=arguments.length>1&&!e.Equals(n,o);r&&(this.willSetState(o,n),Object.defineProperty(this,"ownState",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),this.onSetState(o,n)),this.setValue(i),r&&(this.didSetState(o,n),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating()))},Object.defineProperty(t.prototype,"state",{get:function(){return this.ownState},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" state");return t},t.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},t.prototype.setState=function(t,i){void 0===i&&(i=null),!0===i?i=this.timing:!1===i?i=null:null!==i&&(i=s.Timing.fromAny(i));var o=this.state;this.isDefined(o)?e.Equals(o,t)||(null===i?this.setImmediateState(t,o):this.setAnimatedState(t,o,i)):this.setImmediateState(t,o)},t.prototype.setImmediateState=function(e,i){this.willSetState(e,i),Object.defineProperty(this,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),this.onSetState(e,i),this.setValue(e),this.didSetState(e,i),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating())},t.prototype.setAnimatedState=function(e,i,o){this.willSetState(e,i),Object.defineProperty(this,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:s.Interpolator(this.value,e),enumerable:!0,configurable:!0}),0!=(this.animatorFlags&t.AnimatingFlag)?this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag|t.InterruptFlag):this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag),this.onSetState(e,i),this.didSetState(e,i),this.startAnimating()},t.prototype.willSetState=function(t,e){},t.prototype.onSetState=function(t,e){},t.prototype.didSetState=function(t,e){},t.prototype.setAnimatorFlags=function(t){Object.defineProperty(this,"animatorFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.isUpdated=function(){return 0!=(this.animatorFlags&t.UpdatedFlag)},Object.defineProperty(t.prototype,"updatedValue",{get:function(){return 0!=(this.animatorFlags&t.UpdatedFlag)?this.value:void 0},enumerable:!1,configurable:!0}),t.prototype.takeUpdatedValue=function(){var e=this.animatorFlags;return 0!=(e&t.UpdatedFlag)?(this.setAnimatorFlags(e&~t.UpdatedFlag),this.value):void 0},t.prototype.takeValue=function(){return this.setAnimatorFlags(this.animatorFlags&~t.UpdatedFlag),this.value},t.prototype.isAnimating=function(){return 0!=(this.animatorFlags&t.AnimatingFlag)},t.prototype.startAnimating=function(){0==(this.animatorFlags&t.AnimatingFlag)&&(this.willStartAnimating(),this.setAnimatorFlags(this.animatorFlags|t.AnimatingFlag),this.onStartAnimating(),this.didStartAnimating())},t.prototype.willStartAnimating=function(){},t.prototype.onStartAnimating=function(){},t.prototype.didStartAnimating=function(){},t.prototype.stopAnimating=function(){0!=(this.animatorFlags&t.AnimatingFlag)&&(this.willStopAnimating(),this.setAnimatorFlags(this.animatorFlags&~t.AnimatingFlag),this.onStopAnimating(),this.didStopAnimating())},t.prototype.willStopAnimating=function(){},t.prototype.onStopAnimating=function(){},t.prototype.didStopAnimating=function(){},t.prototype.onAnimate=function(i){if(0!=(this.animatorFlags&t.AnimatingFlag)){var o=this.value,n=this.timing;null===n&&(n=s.Easing.linear.withDomain(i,i),Object.defineProperty(this,"timing",{value:n,enumerable:!0,configurable:!0}));var r=this.interpolator;null===r&&(r=s.Interpolator(o,this.state),Object.defineProperty(this,"interpolator",{value:r,enumerable:!0,configurable:!0})),0!=(this.animatorFlags&t.InterruptFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.InterruptFlag),this.onInterrupt(o)),0!=(this.animatorFlags&t.DivergedFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.DivergedFlag),n=e.Equals(o,this.state)?n.withDomain(i-n.duration,i):n.withDomain(i,i+n.duration),Object.defineProperty(this,"timing",{value:n,enumerable:!0,configurable:!0}),this.onBegin(o));var a=n(i),l=r(a);this.setValue(l),a>=1&&(this.onEnd(l),this.stopAnimating(),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}))}},t.prototype.onBegin=function(t){},t.prototype.onEnd=function(t){},t.prototype.onInterrupt=function(t){},t.MountedFlag=1,t.UpdatedFlag=2,t.OverrideFlag=4,t.InheritedFlag=8,t.ConstrainedFlag=16,t.ConstrainingFlag=32,t.AnimatingFlag=64,t.DivergedFlag=128,t.InterruptFlag=256,t.AnimatorFlagsShift=12,t}(),So=function(t,e){return this instanceof So?Co.call(this,t,e):(i=t,Gi.decorateViewAnimator.bind(So,So.define(i)));var i};function Co(t,e){var i,o,n=bo.call(this,void 0,null)||this;return void 0!==e&&Object.defineProperty(n,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(n,"owner",{value:t,enumerable:!0}),Object.defineProperty(n,"ownLook",{value:null!==(i=n.ownLook)&&void 0!==i?i:null,enumerable:!0,configurable:!0}),Object.defineProperty(n,"inherit",{value:null!==(o=n.inherit)&&void 0!==o&&o,enumerable:!0,configurable:!0}),Object.defineProperty(n,"superAnimator",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(n,"subAnimators",{value:null,enumerable:!0,configurable:!0}),void 0!==n.initState&&(Object.defineProperty(n,"ownState",{value:n.fromAny(n.initState()),enumerable:!0,configurable:!0}),Object.defineProperty(n,"ownValue",{value:n.ownState,enumerable:!0,configurable:!0})),n}w(So,bo),So.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperAnimator(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperAnimator())},So.prototype.isInherited=function(){return 0!=(this.animatorFlags&bo.InheritedFlag)},So.prototype.setInherited=function(t){if(t&&0==(this.animatorFlags&(bo.InheritedFlag|bo.OverrideFlag))){var e=this.superAnimator;if(null!==e){this.setAnimatorFlags(this.animatorFlags|bo.InheritedFlag),Object.defineProperty(this,"ownLook",{value:e.look,enumerable:!0,configurable:!0});var i=this.look;null!==i?this.applyLook(i,!1):(Object.defineProperty(this,"ownState",{value:e.state,enumerable:!0,configurable:!0}),this.setValue(e.value,this.value),e.isAnimating()?this.startAnimating():this.stopAnimating())}}else t||0==(this.animatorFlags&bo.InheritedFlag)||this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag)},Object.defineProperty(So.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),So.prototype.bindSuperAnimator=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner;;){var i=e.parentView;if(null!==i){var o=(e=i).getLazyViewAnimator(t);if(null===o)continue;if(Object.defineProperty(this,"superAnimator",{value:o,enumerable:!0,configurable:!0}),o.addSubAnimator(this),0==(this.animatorFlags&bo.OverrideFlag)){this.setAnimatorFlags(this.animatorFlags|bo.InheritedFlag),Object.defineProperty(this,"ownLook",{value:o.look,enumerable:!0,configurable:!0});var n=this.look;null!==n?this.applyLook(n,!1):(Object.defineProperty(this,"ownState",{value:o.state,enumerable:!0,configurable:!0}),this.setValue(o.value,this.value),o.isAnimating()?this.startAnimating():this.stopAnimating())}}break}},So.prototype.unbindSuperAnimator=function(){var t=this.superAnimator;null!==t&&(t.removeSubAnimator(this),Object.defineProperty(this,"superAnimator",{value:null,enumerable:!0,configurable:!0}),this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag))},So.prototype.addSubAnimator=function(t){var e=this.subAnimators;null===e&&(e=[],Object.defineProperty(this,"subAnimators",{value:e,enumerable:!0,configurable:!0})),e.push(t)},So.prototype.removeSubAnimator=function(t){var e=this.subAnimators;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},So.prototype.isAuto=function(){return 0==(this.animatorFlags&bo.OverrideFlag)},So.prototype.setAuto=function(t){t&&0!=(this.animatorFlags&bo.OverrideFlag)?this.setAnimatorFlags(this.animatorFlags&~bo.OverrideFlag):t||0!=(this.animatorFlags&bo.OverrideFlag)||this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag)},Object.defineProperty(So.prototype,"superValue",{get:function(){var t=this.superAnimator;return null!==t?t.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"superState",{get:function(){var t=this.superAnimator;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),So.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},So.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},So.prototype.setState=function(t,e){this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag),this.setLook(null),this.setOwnState(t,e)},So.prototype.setAutoState=function(t,e){0==(this.animatorFlags&bo.OverrideFlag)&&this.setOwnState(t,e)},So.prototype.setOwnState=function(t,e){t=this.fromAny(t),this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag),bo.prototype.setState.call(this,t,e)},So.prototype.setBaseState=function(t,e){var i;this.isInherited()&&null!==(i=this.superAnimator)?(t=this.fromAny(t),i.setBaseState(t,e)):this.setState(t,e)},So.prototype.setImmediateState=function(t,e){bo.prototype.setImmediateState.call(this,t,e);var i=this.subAnimators;if(null!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];r.isInherited()&&r.startAnimating()}},So.prototype.onAnimate=function(t){0==(this.animatorFlags&bo.InheritedFlag)?bo.prototype.onAnimate.call(this,t):this.onAnimateInherited(t)},So.prototype.onAnimateInherited=function(t){var e=this.superAnimator;if(null!==e){Object.defineProperty(this,"ownLook",{value:e.look,enumerable:!0,configurable:!0});var i=this.look;null!==i?(this.applyLook(i,!0),bo.prototype.onAnimate.call(this,t)):(Object.defineProperty(this,"ownState",{value:e.state,enumerable:!0,configurable:!0}),this.setValue(e.value,this.value))}else this.stopAnimating()},So.prototype.onSetValue=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},Object.defineProperty(So.prototype,"superLook",{get:function(){var t=this.superAnimator;return null!==t?t.look:null},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"look",{get:function(){return this.ownLook},enumerable:!0,configurable:!0}),So.prototype.setLook=function(t,e){this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag);var i=this.look;t!==i&&(e=void 0!==e&&s.Timing.fromAny(e),this.willSetLook(t,i,e),Object.defineProperty(this,"ownLook",{value:t,enumerable:!0,configurable:!0}),this.onSetLook(t,i,e),this.didSetLook(t,i,e))},So.prototype.willSetLook=function(t,e,i){},So.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},So.prototype.didSetLook=function(t,e,i){},So.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,i,e))}else this.owner.requireUpdate(Gi.NeedsChange)},So.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,n,i))}},So.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this);var t=this.subAnimators;if(null!==t)for(var e=0,i=t.length;e<i;e+=1){var o=t[e];o.isInherited()&&o.startAnimating()}},So.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},So.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},So.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},So.prototype.fromAny=function(t){return t},So.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},So.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},So.prototype.willMount=function(){},So.prototype.onMount=function(){this.bindSuperAnimator();var t=this.look;null!==t&&this.applyLook(t,!1)},So.prototype.didMount=function(){},So.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},So.prototype.willUnmount=function(){},So.prototype.onUnmount=function(){this.stopAnimating(),this.unbindSuperAnimator()},So.prototype.didUnmount=function(){},So.prototype.toString=function(){return this.name},So.getClass=function(t){return t===String?To:t===Boolean?Ao:t===Number?Fo:t===r.Angle?Oo:t===r.Length?xo:t===St?Ro:t===gt?Lo:t===r.Transform?ko:null},So.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.inherit,a=t.initState;delete t.extends,delete t.state,delete t.look,void 0===i&&(i=So.getClass(t.type)),null===i&&(i=So,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var s=function(t,e){var o=function(t,e){return 0===arguments.length?o.value:(o.setState(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},l=t;return Object.setPrototypeOf(s,i),(s.prototype=l).constructor=s,Object.setPrototypeOf(s.prototype,i.prototype),void 0!==o&&void 0===a&&(l.initState=function(){return o}),Object.defineProperty(l,"ownLook",{value:null!=n?n:null,enumerable:!0,configurable:!0}),Object.defineProperty(l,"inherit",{value:null!=r&&r,enumerable:!0,configurable:!0}),s};var Po=function(t,e){return this instanceof Po?Vo.call(this,t,e):(i=t,Gi.decorateViewAnimator.bind(Po,Po.define(i)));var i};function Vo(t,e){var i,o=So.call(this,t,e)||this;return Object.defineProperty(o,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(o,"strength",{value:null!==(i=o.strength)&&void 0!==i?i:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(o,"conditionCount",{value:0,enumerable:!0,configurable:!0}),o}w(Po,So),Po.prototype.isExternal=function(){return!0},Po.prototype.isDummy=function(){return!1},Po.prototype.isInvalid=function(){return!1},Po.prototype.isConstant=function(){return!1},Po.prototype.onSetValue=function(t,e){So.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},Po.prototype.evaluateConstraintVariable=function(){},Po.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&bo.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(Po.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),Po.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},Po.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},Po.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},Po.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},Po.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},Po.prototype.isConstrained=function(){return 0!=(this.animatorFlags&bo.ConstrainedFlag)},Po.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&bo.ConstrainedFlag)?(this.setAnimatorFlags(e|bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&bo.ConstrainedFlag)||(this.setAnimatorFlags(e&~bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},Po.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},Po.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},Po.prototype.isConstraining=function(){return 0!=(this.animatorFlags&bo.ConstrainingFlag)},Po.prototype.startConstraining=function(){0==(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|bo.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},Po.prototype.willStartConstraining=function(){},Po.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},Po.prototype.didStartConstraining=function(){},Po.prototype.stopConstraining=function(){0!=(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~bo.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},Po.prototype.willStopConstraining=function(){},Po.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},Po.prototype.didStopConstraining=function(){},Po.prototype.updateConstraintVariable=function(){this.owner.setConstraintVariable(this,this.toNumber(this.value))},Po.prototype.onMount=function(){So.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},Po.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),So.prototype.onUnmount.call(this)},Po.getClass=function(t){return t===Number?Mo:t===r.Length?Do:null},Po.define=function(t){var i=t.extends,o=t.state,n=t.inherit,r=t.initState,a=t.constrain,s=t.strength;delete t.extends,delete t.state,delete t.inherit,delete t.constrain,delete t.strength,void 0===i&&(i=Po.getClass(t.type)),null===i&&(i=Po,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var o=function(t,e){return 0===arguments.length?o.value:(o.setState(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o,!0===a&&o.constrain(),o},h=t;return Object.setPrototypeOf(l,i),(l.prototype=h).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),void 0!==o&&void 0===r&&(h.initState=function(){return o}),Object.defineProperty(h,"inherit",{value:null!=n&&n,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(h,"strength",{value:u.ConstraintStrength.fromAny(s),enumerable:!0,configurable:!0}),l};var To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(So),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(So),Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(So),Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(Po),Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Angle.fromAny(t):t},e}(So),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(So),Do=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(Po),Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?St.fromAny(t):t},e}(So),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?gt.fromAny(t):t},e}(So),ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Transform.fromAny(t):null},e}(So),jo=function(t,e,i){return this instanceof jo?Io.call(this,t,e,i):(o=t,Gi.decorateViewFastener.bind(Gi,jo.define(o)));var o};function Io(t,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),this}w(jo,Object),jo.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},jo.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},jo.prototype.setView=function(t,e){var i=this.view;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentView===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertView(this.owner,t,e,this.key)),this.doSetView(t,e),i},jo.prototype.doSetView=function(t,e){var i=this.view;i!==t&&(this.deactivateLayout(),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e))},jo.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},jo.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},jo.prototype.willSetView=function(t,e,i){},jo.prototype.onSetView=function(t,e,i){},jo.prototype.didSetView=function(t,e,i){},jo.prototype.constraint=function(t,e,i,o){t=u.ConstraintExpression.fromAny(t),void 0!==i&&(i=u.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?u.ConstraintStrength.Required:u.ConstraintStrength.fromAny(o);var r=new u.Constraint(this.owner,n,e,o);return this.addConstraint(r),r},jo.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},jo.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},jo.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},jo.prototype.activateConstraint=function(t){this.owner.activateConstraint(t)},jo.prototype.deactivateConstraint=function(t){this.owner.deactivateConstraint(t)},jo.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?u.ConstraintStrength.Strong:u.ConstraintStrength.fromAny(i),new u.ConstraintBinding(this,t,e,i)},jo.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},jo.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},jo.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},jo.prototype.activateConstraintVariable=function(t){this.owner.activateConstraintVariable(t)},jo.prototype.deactivateConstraintVariable=function(t){this.owner.deactivateConstraintVariable(t)},jo.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},jo.prototype.activateLayout=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1)this.owner.activateConstraintVariable(t[e]);var o=this.constraints;for(e=0,i=o.length;e<i;e+=1)this.owner.activateConstraint(o[e])},jo.prototype.deactivateLayout=function(){for(var t=this.constraints,e=0,i=t.length;e<i;e+=1)this.owner.deactivateConstraint(t[e]);var o=this.constraintVariables;for(e=0,i=o.length;e<i;e+=1)this.owner.deactivateConstraintVariable(o[e])},Object.defineProperty(jo.prototype,"parentView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),jo.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.doSetView(e,i),null!==e&&(null==t&&(t=this.parentView),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.doSetView(e,i)),e},jo.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},jo.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},jo.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},jo.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof Gi?t:null},jo.prototype.isMounted=function(){return 0!=(this.fastenerFlags&jo.MountedFlag)},jo.prototype.mount=function(){0==(this.fastenerFlags&jo.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|jo.MountedFlag),this.onMount(),this.didMount())},jo.prototype.willMount=function(){},jo.prototype.onMount=function(){this.activateLayout()},jo.prototype.didMount=function(){},jo.prototype.unmount=function(){0!=(this.fastenerFlags&jo.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~jo.MountedFlag),this.onUnmount(),this.didUnmount())},jo.prototype.willUnmount=function(){},jo.prototype.onUnmount=function(){this.deactivateLayout()},jo.prototype.didUnmount=function(){},jo.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=jo);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},jo.MountedFlag=1;var Eo=function(){function t(t,e,i,o,n,r){this.inputId=t,this.inputType=e,this.isPrimary=i,this.target=null,this.button=0,this.buttons=0,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.twist=0,this.pressure=0,this.tangentialPressure=0,this.x0=o,this.y0=n,this.t0=r,this.dx=0,this.dy=0,this.dt=0,this.x=o,this.y=n,this.t=r,this.detail=void 0,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}(),Wo=function(t){function e(e,i,o,n,r,a){var s=t.call(this,e,i,o,n,r,a)||this;return s.hovering=!1,s.pressing=!1,s.holdTimer=0,s.holdDelay=400,s}return w(e,t),e.prototype.isRunaway=function(){var t=this.x-this.x0,e=this.y-this.y0,i=this.t-this.t0;return"mouse"!==this.inputType&&i<100&&t*t+e*e>100},e.prototype.setHoldTimer=function(t){0!==this.holdDelay&&(this.clearHoldTimer(),this.holdTimer=setTimeout(t,this.holdDelay))},e.prototype.clearHoldTimer=function(){0!==this.holdTimer&&(clearTimeout(this.holdTimer),this.holdTimer=0)},e}(Eo),No=function(){function t(t,e){void 0===e&&(e=null),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),Object.defineProperty(this,"delegate",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputs",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"hoverCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pressCount",{value:0,enumerable:!0,configurable:!0})}return t.prototype.initView=function(t){null!==t&&(t.addViewObserver(this),t.isMounted()&&this.attachEvents(t))},t.prototype.setView=function(t){var e=this.view;e!==t&&(null!==e&&(this.detachEvents(e),e.removeViewObserver(this)),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&(t.addViewObserver(this),t.isMounted()&&this.attachEvents(t)))},t.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},t.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},t.prototype.createInput=function(t,e,i,o,n,r){return new Wo(t,e,i,o,n,r)},t.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var a=this.inputs,s=a[t];return void 0===s&&(s=this.createInput(t,e,i,o,n,r),a[t]=s,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),s},t.prototype.clearInput=function(t){t.hovering||t.pressing||(delete this.inputs[t.inputId],Object.defineProperty(this,"inputCount",{value:this.inputCount-1,enumerable:!0,configurable:!0}))},t.prototype.viewDidMount=function(t){this.attachEvents(t)},t.prototype.viewWillUnmount=function(t){this.detachEvents(t),Object.defineProperty(this,"inputs",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"hoverCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pressCount",{value:0,enumerable:!0,configurable:!0})},t.prototype.attachEvents=function(t){this.attachHoverEvents(t)},t.prototype.detachEvents=function(t){this.detachHoverEvents(t),this.detachPressEvents(t)},t.prototype.attachHoverEvents=function(t){},t.prototype.detachHoverEvents=function(t){},t.prototype.attachPressEvents=function(t){},t.prototype.detachPressEvents=function(t){},t.prototype.isHovering=function(){return 0!==this.hoverCount},t.prototype.startHovering=function(){this.willStartHovering(),this.onStartHovering(),this.didStartHovering()},t.prototype.willStartHovering=function(){var t=this.delegate;null!==t&&void 0!==t.willStartHovering&&t.willStartHovering()},t.prototype.onStartHovering=function(){},t.prototype.didStartHovering=function(){var t=this.delegate;null!==t&&void 0!==t.didStartHovering&&t.didStartHovering()},t.prototype.stopHovering=function(){this.willStopHovering(),this.onStopHovering(),this.didStopHovering()},t.prototype.willStopHovering=function(){var t=this.delegate;null!==t&&void 0!==t.willStopHovering&&t.willStopHovering()},t.prototype.onStopHovering=function(){},t.prototype.didStopHovering=function(){var t=this.delegate;null!==t&&void 0!==t.didStopHovering&&t.didStopHovering()},t.prototype.beginHover=function(t,e){t.hovering||(this.willBeginHover(t,e),t.hovering=!0,Object.defineProperty(this,"hoverCount",{value:this.hoverCount+1,enumerable:!0,configurable:!0}),this.onBeginHover(t,e),this.didBeginHover(t,e),1===this.hoverCount&&this.startHovering())},t.prototype.willBeginHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willBeginHover&&i.willBeginHover(t,e)},t.prototype.onBeginHover=function(t,e){},t.prototype.didBeginHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginHover&&i.didBeginHover(t,e)},t.prototype.endHover=function(t,e){t.hovering&&(this.willEndHover(t,e),t.hovering=!1,Object.defineProperty(this,"hoverCount",{value:this.hoverCount-1,enumerable:!0,configurable:!0}),this.onEndHover(t,e),this.didEndHover(t,e),0===this.hoverCount&&this.stopHovering(),this.clearInput(t))},t.prototype.willEndHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndHover&&i.willEndHover(t,e)},t.prototype.onEndHover=function(t,e){},t.prototype.didEndHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndHover&&i.didEndHover(t,e)},t.prototype.isPressing=function(){return 0!==this.pressCount},t.prototype.startPressing=function(){this.willStartPressing(),this.onStartPressing(),this.didStartPressing()},t.prototype.willStartPressing=function(){var t=this.delegate;null!==t&&void 0!==t.willStartPressing&&t.willStartPressing()},t.prototype.onStartPressing=function(){this.attachPressEvents(this.view)},t.prototype.didStartPressing=function(){var t=this.delegate;null!==t&&void 0!==t.didStartPressing&&t.didStartPressing()},t.prototype.stopPressing=function(){this.willStopPressing(),this.onStopPressing(),this.didStopPressing()},t.prototype.willStopPressing=function(){var t=this.delegate;null!==t&&void 0!==t.willStopPressing&&t.willStopPressing()},t.prototype.onStopPressing=function(){this.detachPressEvents(this.view)},t.prototype.didStopPressing=function(){var t=this.delegate;null!==t&&void 0!==t.didStopPressing&&t.didStopPressing()},t.prototype.beginPress=function(t,e){t.pressing||this.willBeginPress(t,e)&&(t.pressing=!0,t.defaultPrevented=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount+1,enumerable:!0,configurable:!0}),this.onBeginPress(t,e),t.setHoldTimer(this.longPress.bind(this,t)),this.didBeginPress(t,e),1===this.pressCount&&this.startPressing())},t.prototype.willBeginPress=function(t,e){var i=this.delegate;if(null!==i&&void 0!==i.willBeginPress&&!1===i.willBeginPress(t,e))return!1;return!0},t.prototype.onBeginPress=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},t.prototype.didBeginPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginPress&&i.didBeginPress(t,e)},t.prototype.movePress=function(t,e){t.pressing&&(this.willMovePress(t,e),this.onMovePress(t,e),this.didMovePress(t,e))},t.prototype.willMovePress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willMovePress&&i.willMovePress(t,e)},t.prototype.onMovePress=function(t,e){},t.prototype.didMovePress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didMovePress&&i.didMovePress(t,e)},t.prototype.endPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willEndPress(t,e),t.pressing=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount-1,enumerable:!0,configurable:!0}),this.onEndPress(t,e),this.didEndPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},t.prototype.willEndPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndPress&&i.willEndPress(t,e)},t.prototype.onEndPress=function(t,e){},t.prototype.didEndPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndPress&&i.didEndPress(t,e)},t.prototype.cancelPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willCancelPress(t,e),t.pressing=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount-1,enumerable:!0,configurable:!0}),this.onCancelPress(t,e),this.didCancelPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},t.prototype.willCancelPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willCancelPress&&i.willCancelPress(t,e)},t.prototype.onCancelPress=function(t,e){},t.prototype.didCancelPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didCancelPress&&i.didCancelPress(t,e)},t.prototype.press=function(t,e){this.willPress(t,e),this.onPress(t,e),this.didPress(t,e)},t.prototype.willPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willPress&&i.willPress(t,e)},t.prototype.onPress=function(t,e){},t.prototype.didPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didPress&&i.didPress(t,e)},t.prototype.longPress=function(t){t.clearHoldTimer(),performance.now()-t.t0<1.5*t.holdDelay&&t.pressing&&(this.willLongPress(t),this.onLongPress(t),this.didLongPress(t))},t.prototype.willLongPress=function(t){var e=this.delegate;null!==e&&void 0!==e.willLongPress&&e.willLongPress(t)},t.prototype.onLongPress=function(t){var e=performance.now();t.dt=e-t.t,t.t=e},t.prototype.didLongPress=function(t){var e=this.delegate;null!==e&&void 0!==e.didLongPress&&e.didLongPress(t)},t}(),Uo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(No),Bo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(No),Ho=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.y,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(No),qo="undefined"!=typeof PointerEvent?Uo:"undefined"!=typeof TouchEvent?Bo:Ho,zo=function(t){function e(e,i,o,n,r,a){var s=t.call(this,e,i,o,n,r,a)||this;return s.vx=0,s.vy=0,s.ax=0,s.ay=0,s.path=[],s.coasting=!1,s}return w(e,t),e.prototype.updatePosition=function(t){var e=this.path,i=this.x,o=this.y,n=this.t;for(e.push({x:i,y:o,t:n});e.length>1&&n-e[0].t>t;)e.shift()},e.prototype.deriveVelocity=function(t){var e=this.path[0],i=this.path[this.path.length-1];if(void 0!==i&&i!==e){var o=i.t-e.t,n=void 0,r=void 0;if(0!==o){var a=(n=(i.x-e.x)/o)*n+(r=(i.y-e.y)/o)*r;if(t*t<a){var s=Math.sqrt(a);n=n*t/s,r=r*t/s}}else n=0,r=0;this.vx=n,this.vy=r}else void 0!==e&&(this.vx=0,this.vy=0)},e.prototype.integrateVelocity=function(t){var e=t-this.t;if(0!==e){var i=this.vx+this.ax*e,o=void 0;i<0==this.vx<0?o=this.x+this.vx*e+this.ax*e*e*.5:(o=this.x-this.vx*this.vx/(2*this.ax),i=0,this.ax=0);var n=this.vy+this.ay*e,r=void 0;n<0==this.vy<0?r=this.y+this.vy*e+this.ay*e*e*.5:(r=this.y-this.vy*this.vy/(2*this.ay),n=0,this.ay=0),this.dx=o-this.x,this.dy=r-this.y,this.dt=e,this.x=o,this.y=r,this.t=t,this.vx=i,this.vy=n}},e}(Wo),Yo=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return Object.defineProperty(o,"coastCount",{value:0,enumerable:!0,configurable:!0}),o}return w(e,t),e.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},e.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},e.prototype.createInput=function(t,e,i,o,n,r){return new zo(t,e,i,o,n,r)},e.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var a=this.inputs,s=a[t];return void 0===s&&(s=this.createInput(t,e,i,o,n,r),a[t]=s,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),s},e.prototype.clearInput=function(t){t.hovering||t.pressing||t.coasting||(delete this.inputs[t.inputId],Object.defineProperty(this,"inputCount",{value:this.inputCount-1,enumerable:!0,configurable:!0}))},Object.defineProperty(e.prototype,"hysteresis",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.hysteresis?t.hysteresis():Zo.Hysteresis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"acceleration",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.acceleration?t.acceleration():Zo.Acceleration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityMax",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.velocityMax?t.velocityMax():Zo.VelocityMax},enumerable:!1,configurable:!0}),e.prototype.viewWillUnmount=function(e){t.prototype.viewWillUnmount.call(this,e),Object.defineProperty(this,"coastCount",{value:0,enumerable:!0,configurable:!0})},e.prototype.viewWillAnimate=function(t){this.doCoast(t.updateTime)},e.prototype.interrupt=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endCoast(o,t)}},e.prototype.cancel=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endPress(o,t),this.endCoast(o,t)}},e.prototype.startInteracting=function(){this.willStartInteracting(),this.onStartInteracting(),this.didStartInteracting()},e.prototype.willStartInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.willStartInteracting&&t.willStartInteracting()},e.prototype.onStartInteracting=function(){},e.prototype.didStartInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.didStartInteracting&&t.didStartInteracting()},e.prototype.stopInteracting=function(){this.willStopInteracting(),this.onStopInteracting(),this.didStopInteracting()},e.prototype.willStopInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.willStopInteracting&&t.willStopInteracting()},e.prototype.onStopInteracting=function(){},e.prototype.didStopInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.didStopInteracting&&t.didStopInteracting()},e.prototype.onStartPressing=function(){t.prototype.onStartPressing.call(this),0===this.coastCount&&this.startInteracting()},e.prototype.onStopPressing=function(){t.prototype.onStopPressing.call(this),0===this.coastCount&&this.stopInteracting()},e.prototype.beginPress=function(e,i){t.prototype.beginPress.call(this,e,i),this.interrupt(i)},e.prototype.onBeginPress=function(e,i){t.prototype.onBeginPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.onMovePress=function(e,i){t.prototype.onMovePress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.willEndPress=function(e,i){t.prototype.willEndPress.call(this,e,i),this.beginCoast(e,i)},e.prototype.onEndPress=function(e,i){t.prototype.onEndPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.onCancelPress=function(e,i){t.prototype.onCancelPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.isCoasting=function(){return 0!==this.coastCount},e.prototype.startCoasting=function(){this.willStartCoasting(),this.onStartCoasting(),this.didStartCoasting()},e.prototype.willStartCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.willStartCoasting&&t.willStartCoasting()},e.prototype.onStartCoasting=function(){0===this.pressCount&&this.startInteracting(),null!==this.view&&this.view.requireUpdate(Gi.NeedsAnimate)},e.prototype.didStartCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.didStartCoasting&&t.didStartCoasting()},e.prototype.stopCoasting=function(){this.willStopCoasting(),this.onStopCoasting(),this.didStopCoasting()},e.prototype.willStopCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.willStopCoasting&&t.willStopCoasting()},e.prototype.onStopCoasting=function(){0===this.pressCount&&this.stopInteracting()},e.prototype.didStopCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.didStopCoasting&&t.didStopCoasting()},e.prototype.beginCoast=function(t,e){if(!t.coasting&&(0!==t.vx||0!==t.vy)){var i=Math.atan2(Math.abs(t.vy),Math.abs(t.vx)),o=this.acceleration,n=(t.vx<0?o:t.vx>0?-o:0)*Math.cos(i),r=(t.vy<0?o:t.vy>0?-o:0)*Math.sin(i);if(0!==n||0!==r)t.ax=n,t.ay=r,this.willBeginCoast(t,e)&&(t.coasting=!0,Object.defineProperty(this,"coastCount",{value:this.coastCount+1,enumerable:!0,configurable:!0}),this.onBeginCoast(t,e),this.didBeginCoast(t,e),1===this.coastCount&&this.startCoasting())}},e.prototype.willBeginCoast=function(t,e){var i=this.delegate;if(null!==i&&void 0!==i.willBeginCoast&&!1===i.willBeginCoast(t,e))return!1;return!0},e.prototype.onBeginCoast=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},e.prototype.didBeginCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginCoast&&i.didBeginCoast(t,e)},e.prototype.endCoast=function(t,e){t.coasting&&(this.willEndCoast(t,e),t.coasting=!1,Object.defineProperty(this,"coastCount",{value:this.coastCount-1,enumerable:!0,configurable:!0}),this.onEndCoast(t,e),this.didEndCoast(t,e),0===this.coastCount&&this.stopCoasting(),this.clearInput(t))},e.prototype.willEndCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndCoast&&i.willEndCoast(t,e)},e.prototype.onEndCoast=function(t,e){},e.prototype.didEndCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndCoast&&i.didEndCoast(t,e)},e.prototype.doCoast=function(t){if(0!==this.coastCount){this.willCoast(),this.integrate(t),this.onCoast();var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&0===o.ax&&0===o.ay&&this.endCoast(o,null)}this.didCoast(),0!==this.coastCount&&null!==this.view&&this.view.requireUpdate(Gi.NeedsAnimate)}},e.prototype.willCoast=function(){var t=this.delegate;null!==t&&void 0!==t.willCoast&&t.willCoast()},e.prototype.onCoast=function(){},e.prototype.didCoast=function(){var t=this.delegate;null!==t&&void 0!==t.didCoast&&t.didCoast()},e.prototype.integrate=function(t){var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&o.integrateVelocity(t)}},e.Hysteresis=67,e.Acceleration=.00175,e.VelocityMax=1.75,e}(No),Xo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(Yo),Go=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(Yo),Ko=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(Yo),Zo="undefined"!=typeof PointerEvent?Xo:"undefined"!=typeof TouchEvent?Go:Ko,_o=function(t){function e(e,i,o,n,r,a){var s=t.call(this,e,i,o,n,r,a)||this;return s.xCoord=void 0,s.yCoord=void 0,s.disableX=!1,s.disableY=!1,s}return w(e,t),e}(zo),Qo=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return Object.defineProperty(o,"needsRescale",{value:!1,enumerable:!0,configurable:!0}),o}return w(e,t),e.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},e.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},e.prototype.createInput=function(t,e,i,o,n,r){return new _o(t,e,i,o,n,r)},e.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var a=this.inputs,s=a[t];return void 0===s&&(s=this.createInput(t,e,i,o,n,r),a[t]=s,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),s},e.prototype.wheel=function(t){return void 0!==t&&this},Object.defineProperty(e.prototype,"distanceMin",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.distanceMin?t.distanceMin():en.DistanceMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveAspectRatio",{get:function(){var t=this.delegate;return null===t||void 0===t.preserveAspectRatio||t.preserveAspectRatio()},enumerable:!1,configurable:!0}),e.prototype.xGestures=function(){var t=this.delegate;return null===t||void 0===t.xGestures||t.xGestures()},e.prototype.yGestures=function(){var t=this.delegate;return null===t||void 0===t.yGestures||t.yGestures()},e.prototype.xScale=function(t,e){var i=this.delegate;return void 0===t?null===i||void 0===i.xScale||void 0!==i.xGestures&&!i.xGestures()?null:i.xScale():(null!==i&&void 0!==i.xScale&&(void 0===i.xGestures||i.xGestures())&&i.xScale(t),this)},e.prototype.yScale=function(t,e){var i=this.delegate;return void 0===t?null===i||void 0===i.yScale||void 0!==i.yGestures&&!i.yGestures()?null:i.yScale():(null!==i&&void 0!==i.yScale&&(void 0===i.yGestures||i.yGestures())&&i.yScale(t),this)},e.prototype.clientToRangeX=function(t,e,i){var o=t-i.xMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.xMax+o-n[0]},e.prototype.clientToRangeY=function(t,e,i){var o=t-i.yMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.yMax+o-n[0]},e.prototype.unscaleX=function(t,e,i){return e.inverse(this.clientToRangeX(t,e,i))},e.prototype.unscaleY=function(t,e,i){return e.inverse(this.clientToRangeY(t,e,i))},e.prototype.viewWillAnimate=function(e){t.prototype.viewWillAnimate.call(this,e),this.needsRescale&&this.rescale()},e.prototype.onBeginPress=function(e,i){t.prototype.onBeginPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onMovePress=function(e,i){t.prototype.onMovePress.call(this,e,i),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onEndPress=function(e,i){t.prototype.onEndPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onCancelPress=function(e,i){t.prototype.onCancelPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.beginCoast=function(e,i){this.coastCount<2&&t.prototype.beginCoast.call(this,e,i)},e.prototype.onBeginCoast=function(e,i){t.prototype.onBeginCoast.call(this,e,i),this.updateInputDomain(e),this.conserveMomentum(e),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onEndCoast=function(e,i){t.prototype.onEndCoast.call(this,e,i),e.disableX=!1,e.disableY=!1,this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onCoast=function(){t.prototype.onCoast.call(this),this.view.requireUpdate(Gi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.updateInputDomain=function(t,e,i,o){void 0===e&&(e=this.xScale()),null!==e&&(void 0===o&&(o=this.view.clientBounds),t.xCoord=this.unscaleX(t.x0,e,o)),void 0===i&&(i=this.yScale()),null!==i&&(void 0===o&&(o=this.view.clientBounds),t.yCoord=this.unscaleY(t.y0,i,o))},e.prototype.neutralizeX=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableX=!0,i.vx=0,i.ax=0)}},e.prototype.neutralizeY=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableY=!0,i.vy=0,i.ay=0)}},e.prototype.rescale=function(){var t,e,i=this.inputs;for(var o in i){var n=i[o];(n.pressing||n.coasting)&&(void 0===t?t=n:void 0===e?e=n:n.t0<t.t0?t=n:n.t0<e.t0&&(e=n))}if(void 0!==t){var r=this.view.clientBounds,a=this.xScale(),s=this.yScale();null!==a&&null!==s?void 0!==e&&this.preserveAspectRatio?this.rescaleRadial(a,s,t,e,r):this.rescaleXY(a,s,t,e,r):null!==a?this.rescaleX(a,t,e,r):null!==s&&this.rescaleY(s,t,e,r)}Object.defineProperty(this,"needsRescale",{value:!1,enumerable:!0,configurable:!0})},e.prototype.rescaleRadial=function(t,e,i,o,n){var r=i.xCoord,a=i.yCoord,s=this.clientToRangeX(i.x0,t,n),l=this.clientToRangeY(i.y0,e,n),u=this.clientToRangeX(i.x,t,n),h=this.clientToRangeY(i.y,e,n),p=i.vx,d=i.vy,c=i.ax,f=i.ay,v=o.xCoord,y=o.yCoord,g=this.clientToRangeX(o.x0,t,n),w=this.clientToRangeY(o.y0,e,n),m=this.clientToRangeX(o.x,t,n),b=this.clientToRangeY(o.y,e,n),S=o.vx,C=o.vy,P=o.ax,V=o.ay,T=g-s,A=w-l,F=Math.max(this.distanceMin,Math.sqrt(T*T+A*A)),M=T/F,O=A/F,x=u-s,D=h-l,R=m-g,L=b-w,k=x*M+D*O,j=R*M+L*O,I=x*O+D*-M,E=R*O+L*-M,W=(I*O+E*O)/2,N=(I*-M+E*-M)/2,U=s+k*M+W,B=l+k*O+N,H=g+j*M+W,q=w+j*O+N,z=p*M+d*O,Y=S*M+C*O,X=p*O+d*-M,G=S*O+C*-M,K=(X*O+G*O)/2,Z=(X*-M+G*-M)/2,_=z*M+K,Q=z*O+Z,J=Y*M+K,$=Y*O+Z,tt=Math.sqrt(_*_+Q*Q),et=Math.sqrt(J*J+$*$),it=0!==tt?_/tt:0,ot=0!==tt?Q/tt:0,nt=0!==et?J/et:0,rt=0!==et?$/et:0;_=it*tt,Q=ot*tt,J=nt*et,$=rt*et;var at=Math.sqrt(c*c+f*f),st=Math.sqrt(P*P+V*V),lt=at*-it,ut=at*-ot,ht=st*-nt,pt=st*-rt,dt=null,ct=t.solveDomain(r,U,v,H);ct.equals(t)||(dt=ct,this.xScale(dt));var ft=null,vt=e.solveDomain(a,B,y,q);if(vt.equals(e)||(ft=vt,this.yScale(ft)),(null!==dt||null!==ft)&&(null!==dt&&(i.x0=i.x,i.dx=0,i.vx=_,i.ax=lt,i.xCoord=this.unscaleX(i.x0,dt,n),o.x0=o.x,o.dx=0,o.vx=J,o.ax=ht,o.xCoord=this.unscaleX(o.x0,dt,n)),null!==ft&&(i.y0=i.y,i.dy=0,i.vy=Q,i.ay=ut,i.yCoord=this.unscaleY(i.y0,ft,n),o.y0=o.y,o.dy=0,o.vy=$,o.ay=pt,o.yCoord=this.unscaleY(o.y0,ft,n)),this.inputCount>2)){var yt=this.inputs;for(var gt in yt){var wt=yt[gt];wt!==i&&wt!==o&&(null!==dt&&(wt.x0=wt.x,wt.dx=0,wt.xCoord=this.unscaleX(wt.x0,dt,n)),null!==ft&&(wt.y0=wt.y,wt.dy=0,wt.yCoord=this.unscaleY(wt.y0,ft,n)))}}},e.prototype.rescaleXY=function(t,e,i,o,n){var r,a,s,l,u=i.xCoord,h=i.yCoord,p=this.clientToRangeX(i.x,t,n),d=this.clientToRangeY(i.y,e,n),c=i.disableX,f=i.disableY;if(void 0!==o){r=o.xCoord,a=o.yCoord,s=this.clientToRangeX(o.x,t,n),l=this.clientToRangeY(o.y,e,n),c=c||o.disableX,f=f||o.disableY;var v=Math.abs(s-p),y=Math.abs(l-d),g=this.distanceMin;if(v<g){var w=(g-v)/2;p<=s?(p-=w,s+=w):(p+=w,s-=w)}if(y<g){var m=(g-y)/2;d<=l?(d-=m,l+=m):(d+=m,l-=m)}}var b=null;c||(b=t.solveDomain(u,p,r,s)).equals(t)||this.xScale(b);var S=null;if(f||(S=e.solveDomain(h,d,a,l)).equals(e)||this.yScale(S),(null!==b||null!==S)&&this.preserveAspectRatio){var C=this.inputs;for(var P in C){var V=C[P];null!==b&&(V.x0=V.x,V.dx=0,V.xCoord=this.unscaleX(V.x0,b,n)),null!==S&&(V.y0=V.y,V.dy=0,V.yCoord=this.unscaleY(V.y0,S,n))}}},e.prototype.rescaleX=function(t,e,i,o){var n,r,a=e.xCoord,s=this.clientToRangeX(e.x,t,o),l=e.disableX;if(void 0!==i){r=i.xCoord,n=this.clientToRangeX(i.x,t,o),l=l||i.disableX;var u=Math.abs(n-s),h=this.distanceMin;if(u<h){var p=(h-u)/2;s<=n?(s-=p,n+=p):(s+=p,n-=p)}}if(!l){var d=t.solveDomain(a,s,r,n);d.equals(t)||this.xScale(d)}},e.prototype.rescaleY=function(t,e,i,o){var n,r,a=e.yCoord,s=this.clientToRangeY(e.y,t,o),l=e.disableY;if(void 0!==i){r=i.yCoord,n=this.clientToRangeY(i.y,t,o),l=l||i.disableY;var u=Math.abs(n-s),h=this.distanceMin;if(u<h){var p=(h-u)/2;s<=n?(s-=p,n+=p):(s+=p,n-=p)}}if(!l){var d=t.solveDomain(a,s,r,n);d.equals(t)||this.yScale(d)}},e.prototype.conserveMomentum=function(t){var e,i=this.inputs;for(var o in i){var n=i[o];n.coasting&&(void 0===e||n.t0<e.t0)&&(e=n)}if(void 0!==e){var r=this.xScale(),a=this.yScale();null!==r&&null!==a?this.distributeXYMomentum(t,e):null!==r?this.distributeXMomentum(t,e):null!==a&&this.distributeYMomentum(t,e)}},e.prototype.distributeXYMomentum=function(t,e){var i=t.vx,o=t.vy,n=e.vx,r=e.vy,a=Math.sqrt(i*i+o*o),s=Math.sqrt(n*n+r*r),l=0!==a?i/a:0,u=0!==a?o/a:0,h=0!==s?n/s:0,p=0!==s?r/s:0,d=(a+s)/2;t.vx=l*d,t.vy=u*d,e.vx=h*d,e.vy=p*d;var c=t.ax,f=t.ay,v=e.ax,y=e.ay,g=Math.sqrt(c*c+f*f),w=Math.sqrt(v*v+y*y),m=0!==g?c/g:0,b=0!==g?f/g:0,S=0!==w?v/w:0,C=0!==w?y/w:0,P=(g+w)/2;t.ax=m*P,t.ay=b*P,e.ax=S*P,e.ay=C*P},e.prototype.distributeXMomentum=function(t,e){var i=t.vx,o=e.vx,n=Math.abs(i),r=Math.abs(o),a=0!==n?i/n:0,s=0!==r?o/r:0,l=(n+r)/2;t.vx=a*l,e.vx=s*l;var u=t.ax,h=e.ax,p=Math.abs(u),d=Math.abs(h),c=0!==p?u/p:0,f=0!==d?h/d:0,v=(p+d)/2;t.ax=c*v,e.ax=f*v},e.prototype.distributeYMomentum=function(t,e){var i=t.vy,o=e.vy,n=Math.sqrt(i),r=Math.sqrt(o),a=0!==n?i/n:0,s=0!==r?o/r:0,l=(n+r)/2;t.vy=a*l,e.vy=s*l;var u=t.ay,h=e.ay,p=Math.sqrt(u),d=Math.sqrt(h),c=0!==p?u/p:0,f=0!==d?h/d:0,v=(p+d)/2;t.ay=c*v,e.ay=f*v},e.prototype.integrate=function(t){var e,i,o=this.inputs;for(var n in o){var r=o[n];if(r.coasting)if(void 0===e)e=r;else if(void 0===i){var a=(i=r).x-e.x,s=i.y-e.y,l=Math.sqrt(a*a+s*s);e.integrateVelocity(t),i.integrateVelocity(t);var u=i.x-e.x,h=i.y-e.y,p=Math.sqrt(u*u+h*h)/l;e.vx*=p,e.vy*=p,e.ax*=p,e.ay*=p,i.vx*=p,i.vy*=p,i.ax*=p,i.ay*=p}else r.integrateVelocity(t)}void 0!==e&&void 0===i&&e.integrateVelocity(t)},e.prototype.zoom=function(t,e,i,o){if(0!==i){var n=null!==o?o.timeStamp:performance.now(),r=this.acceleration,a=r*Math.cos(Math.PI/4),s=r*Math.sin(Math.PI/4),l=this.velocityMax,u=.5*l*Math.cos(Math.PI/4),h=.5*l*Math.sin(Math.PI/4),p=4*u*u/a,d=4*h*h/s,c=this.inputs,f=c.zoom0,v=c.zoom1;if(void 0!==f&&void 0!==v){var y=n-f.t;if(y>0){var g=Math.abs(v.x-f.x)/2,w=Math.abs(v.y-f.y)/2,m=(i=Math.min(Math.max(-l*y,i),l*y))*g*Math.cos(Math.PI/4)/p,b=i*w*Math.sin(Math.PI/4)/d;a=a*g/p,s=s*w/d,f.x+=m,f.y+=b,f.t=n,f.dx=m,f.dy=b,f.dt=y,f.vx=m/y,f.vy=b/y,f.ax=f.vx<0?a:f.vx>0?-a:0,f.ay=f.vy<0?s:f.vy>0?-s:0,v.x-=m,v.y-=b,v.t=n,f.dx=-m,f.dy=-b,f.dt=y,v.vx=-m/y,v.vy=-b/y,v.ax=v.vx<0?a:v.vx>0?-a:0,v.ay=v.vy<0?s:v.vy>0?-s:0}}else this.interrupt(o),i<0?((f=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=-u,f.vy=-h,f.ax=a,f.ay=s,(v=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=u,v.vy=h,v.ax=-a,v.ay=-s):((f=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=u,f.vy=h,f.ax=-a,f.ay=-s,(v=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=-u,v.vy=-h,v.ax=a,v.ay=s),c.zoom0=f,c.zoom1=v,Object.defineProperty(this,"inputCount",{value:this.inputCount+2,enumerable:!0,configurable:!0}),this.beginCoast(f,o),this.beginCoast(v,o)}},e.DistanceMin=10,e}(Yo),Jo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o.wheelZoom=!0,o.initView(e),o}return w(e,t),e.prototype.wheel=function(t){return void 0===t?this.wheelZoom:(this.wheelZoom!==t&&(this.wheelZoom=t,null!==this.view&&(t?this.attachWheelEvents(this.view):this.detachWheelEvents(this.view))),this)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.wheelZoom&&this.attachWheelEvents(e)},e.prototype.detachEvents=function(e){t.prototype.detachEvents.call(this,e),this.detachWheelEvents(e)},e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.attachWheelEvents=function(t){t.on("wheel",this.onWheel)},e.prototype.detachWheelEvents=function(t){t.off("wheel",this.onWheel)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);i.coasting||this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(Qo),$o=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(Qo),tn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o.wheelZoom=!0,o.initView(e),o}return w(e,t),e.prototype.wheel=function(t){return void 0===t?this.wheelZoom:(this.wheelZoom!==t&&(this.wheelZoom=t,null!==this.view&&(t?this.attachWheelEvents(this.view):this.detachWheelEvents(this.view))),this)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.wheelZoom&&this.attachWheelEvents(e)},e.prototype.detachEvents=function(e){t.prototype.detachEvents.call(this,e),this.detachWheelEvents(e)},e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.attachWheelEvents=function(t){t.on("wheel",this.onWheel)},e.prototype.detachWheelEvents=function(t){t.off("wheel",this.onWheel)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);e.coasting||this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e}(Qo),en="undefined"!=typeof PointerEvent?Jo:"undefined"!=typeof TouchEvent?$o:tn,on={decorateStyleAnimator:function(t,e,i){Object.defineProperty(e,i,{get:function(){var e=this.getStyleAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setStyleAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})}},nn=function(t,e){return this instanceof nn?rn.call(this,t,e):(i=t,on.decorateStyleAnimator.bind(on,nn.define(i)));var i};function rn(t,e){var i,o=bo.call(this,void 0,null)||this;return void 0!==e&&Object.defineProperty(o,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"owner",{value:t,enumerable:!0}),Object.defineProperty(o,"ownLook",{value:null!==(i=o.ownLook)&&void 0!==i?i:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"priority",{value:void 0,enumerable:!0,configurable:!0}),void 0!==o.initState&&(Object.defineProperty(o,"ownState",{value:o.fromAny(o.initState()),enumerable:!0,configurable:!0}),Object.defineProperty(o,"ownValue",{value:o.ownState,enumerable:!0,configurable:!0})),o}w(nn,bo),Object.defineProperty(nn.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"propertyValue",{get:function(){var t,e=this.owner.getStyle(this.propertyNames);if("undefined"!=typeof CSSStyleValue&&e instanceof CSSStyleValue){try{t=this.fromCssValue(e)}catch(t){}void 0===t&&(e=e.toString())}if("string"==typeof e&&""!==e)try{t=this.parse(e)}catch(t){}return t},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.propertyValue;void 0!==e&&(t=e,this.setAuto(!1))}return t},enumerable:!0,configurable:!0}),nn.prototype.setPriority=function(t){Object.defineProperty(this,"priority",{value:t,enumerable:!0,configurable:!0});var e=this.value;if(this.isDefined(e)){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,e,t);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],e,t)}},nn.prototype.isAuto=function(){return 0==(this.animatorFlags&bo.OverrideFlag)},nn.prototype.setAuto=function(t){t&&0!=(this.animatorFlags&bo.OverrideFlag)?this.setAnimatorFlags(this.animatorFlags&~bo.OverrideFlag):t||0!=(this.animatorFlags&bo.OverrideFlag)||this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag)},nn.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},nn.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},nn.prototype.setState=function(t,e){void 0!==t&&(t=this.fromAny(t)),this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag),this.setLook(null),bo.prototype.setState.call(this,t,e)},nn.prototype.setAutoState=function(t,e){0==(this.animatorFlags&bo.OverrideFlag)&&(void 0!==t&&(t=this.fromAny(t)),bo.prototype.setState.call(this,t,e))},nn.prototype.onSetValue=function(t,e){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,t,this.priority);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],t,this.priority);var r=this.updateFlags;void 0!==r&&this.owner.requireUpdate(r)},Object.defineProperty(nn.prototype,"look",{get:function(){return this.ownLook},enumerable:!0,configurable:!0}),nn.prototype.setLook=function(t,e){this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag);var i=this.look;t!==i&&(e=void 0!==e&&s.Timing.fromAny(e),this.willSetLook(t,i,e),Object.defineProperty(this,"ownLook",{value:t,enumerable:!0,configurable:!0}),this.onSetLook(t,i,e),this.didSetLook(t,i,e))},nn.prototype.willSetLook=function(t,e,i){},nn.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},nn.prototype.didSetLook=function(t,e,i){},nn.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,i,e))}else this.owner.requireUpdate(Gi.NeedsChange)},nn.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,n,i))}},nn.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},nn.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},nn.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},nn.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},nn.prototype.parse=function(t){throw new Error},nn.prototype.fromCssValue=function(t){throw new Error},nn.prototype.fromAny=function(t){return t},nn.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},nn.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},nn.prototype.willMount=function(){},nn.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},nn.prototype.didMount=function(){},nn.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},nn.prototype.willUnmount=function(){},nn.prototype.onUnmount=function(){this.stopAnimating()},nn.prototype.didUnmount=function(){},nn.prototype.toString=function(){return this.name},nn.getClass=function(t){return t===String?ln:t===Number?un:t===r.Length?pn:t===St?cn:t===vt?fn:t===Bt?vn:t===r.Transform?yn:null},nn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.initState;delete t.extends,delete t.state,delete t.look,void 0===i&&(i=nn.getClass(t.type)),null===i&&(i=nn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var o=function(t,e){return 0===arguments.length?o.value:(o.setState(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},s=t;return Object.setPrototypeOf(a,i),(a.prototype=s).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),void 0!==o&&void 0===r&&(s.initState=function(){return o}),Object.defineProperty(s,"ownLook",{value:null!=n?n:null,enumerable:!0,configurable:!0}),a};var an=function(t,e){return this instanceof an?sn.call(this,t,e):(i=t,on.decorateStyleAnimator.bind(on,an.define(i)));var i};function sn(t,e){var i,o=nn.call(this,t,e)||this;return Object.defineProperty(o,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(o,"strength",{value:null!==(i=o.strength)&&void 0!==i?i:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(o,"conditionCount",{value:0,enumerable:!0,configurable:!0}),o}w(an,nn),an.prototype.isExternal=function(){return!0},an.prototype.isDummy=function(){return!1},an.prototype.isInvalid=function(){return!1},an.prototype.isConstant=function(){return!1},Object.defineProperty(an.prototype,"computedValue",{get:function(){},enumerable:!0,configurable:!0}),an.prototype.onSetValue=function(t,e){nn.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},an.prototype.evaluateConstraintVariable=function(){if(!this.isConstrained()&&this.isConstraining()&&!this.isDefined(this.ownValue)){var t=this.computedValue;this.isDefined(t)&&this.owner.setConstraintVariable(this,this.toNumber(t))}},an.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&bo.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(an.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(an.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(an.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(an.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),an.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},an.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},an.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},an.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},an.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},an.prototype.isConstrained=function(){return 0!=(this.animatorFlags&bo.ConstrainedFlag)},an.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&bo.ConstrainedFlag)?(this.setAnimatorFlags(e|bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&bo.ConstrainedFlag)||(this.setAnimatorFlags(e&~bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},an.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},an.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},an.prototype.isConstraining=function(){return 0!=(this.animatorFlags&bo.ConstrainingFlag)},an.prototype.startConstraining=function(){0==(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|bo.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},an.prototype.willStartConstraining=function(){},an.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},an.prototype.didStartConstraining=function(){},an.prototype.stopConstraining=function(){0!=(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~bo.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},an.prototype.willStopConstraining=function(){},an.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},an.prototype.didStopConstraining=function(){},an.prototype.updateConstraintVariable=function(){var t=this.ownValue;this.isDefined(t)||(t=this.computedValue),this.owner.setConstraintVariable(this,this.toNumber(t))},an.prototype.onMount=function(){nn.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},an.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),nn.prototype.onUnmount.call(this)},an.getClass=function(t){return t===Number?hn:t===r.Length?dn:null},an.define=function(t){var i=t.extends,o=t.state,n=t.initState,r=t.constrain,a=t.strength;delete t.extends,delete t.state,delete t.constrain,delete t.strength,void 0===i&&(i=an.getClass(t.type)),null===i&&(i=an,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var s=function(t,e){var o=function(t,e){return 0===arguments.length?o.value:(o.setState(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o,!0===r&&o.constrain(),o},l=t;return Object.setPrototypeOf(s,i),(s.prototype=l).constructor=s,Object.setPrototypeOf(s.prototype,i.prototype),void 0!==o&&void 0===n&&(l.initState=function(){return o}),void 0!==a&&Object.defineProperty(l,"strength",{value:u.ConstraintStrength.fromAny(a),enumerable:!0,configurable:!0}),s};var ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromCssValue=function(t){return t.toString()},e.prototype.fromAny=function(t){return t},e}(nn),un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(nn),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(an),pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(nn),dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.toNumber=function(t){try{return t.pxValue()}catch(t){return 0}},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(an),cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return St.parse(t)},e.prototype.fromAny=function(t){try{return St.fromAny(t)}catch(t){return null}},e}(nn),fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return gt.parse(t).family},e.prototype.fromAny=function(t){return gt.family(t).family},e}(nn),vn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return Bt.parse(t)},e.prototype.fromAny=function(t){return Bt.fromAny(t)},e}(nn),yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromCssValue=function(t){return r.Transform.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e}(nn),gn={};function wn(t,i){if(void 0===t){var o=this.borderTopColor.value,n=this.borderRightColor.value,r=this.borderBottomColor.value,a=this.borderLeftColor.value;return e.Values.equal(o,n)&&e.Values.equal(n,r)&&e.Values.equal(r,a)?o:[o,n,r,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopColor.setState(t[0],i),t.length>=2&&this.borderRightColor.setState(t[1],i),t.length>=3&&this.borderBottomColor.setState(t[2],i),t.length>=4&&this.borderLeftColor.setState(t[3],i)):(this.borderTopColor.setState(t,i),this.borderRightColor.setState(t,i),this.borderBottomColor.setState(t,i),this.borderLeftColor.setState(t,i)),this}function mn(t,i){if(void 0===t){var o=this.borderTopLeftRadius.value,n=this.borderTopRightRadius.value,r=this.borderBottomRightRadius.value,a=this.borderBottomLeftRadius.value;return e.Equals(o,n)&&e.Equals(n,r)&&e.Equals(r,a)?o:[o,n,r,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopLeftRadius.setState(t[0],i),t.length>=2&&this.borderTopRightRadius.setState(t[1],i),t.length>=3&&this.borderBottomRightRadius.setState(t[2],i),t.length>=4&&this.borderBottomLeftRadius.setState(t[3],i)):(this.borderTopLeftRadius.setState(t,i),this.borderTopRightRadius.setState(t,i),this.borderBottomRightRadius.setState(t,i),this.borderBottomLeftRadius.setState(t,i)),this}function bn(t,e){if(void 0===t){var i=this.borderTopStyle.value,o=this.borderRightStyle.value,n=this.borderBottomStyle.value,r=this.borderLeftStyle.value;return i===o&&o===n&&n===r?i:[i,o,n,r]}return Array.isArray(t)?(t.length>=1&&this.borderTopStyle.setState(t[0],e),t.length>=2&&this.borderRightStyle.setState(t[1],e),t.length>=3&&this.borderBottomStyle.setState(t[2],e),t.length>=4&&this.borderLeftStyle.setState(t[3],e)):(this.borderTopStyle.setState(t,e),this.borderRightStyle.setState(t,e),this.borderBottomStyle.setState(t,e),this.borderLeftStyle.setState(t,e)),this}function Sn(t,i){if(void 0===t){var o=this.borderTopWidth.value,n=this.borderRightWidth.value,r=this.borderBottomWidth.value,a=this.borderLeftWidth.value;return e.Values.equal(o,n)&&e.Values.equal(n,r)&&e.Values.equal(r,a)?o:[o,n,r,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopWidth.setState(t[0],i),t.length>=2&&this.borderRightWidth.setState(t[1],i),t.length>=3&&this.borderBottomWidth.setState(t[2],i),t.length>=4&&this.borderLeftWidth.setState(t[3],i)):(this.borderTopWidth.setState(t,i),this.borderRightWidth.setState(t,i),this.borderBottomWidth.setState(t,i),this.borderLeftWidth.setState(t,i)),this}function Cn(t,e){if(void 0===t){var i=this.fontStyle.value,o=this.fontVariant.value,n=this.fontWeight.value,r=this.fontStretch.value,a=this.fontSize.value,s=this.lineHeight.value,l=this.fontFamily.value;return void 0!==l?gt.create(i,o,n,r,a,s,l):null}return null!==t?(void 0!==(t=gt.fromAny(t)).style&&this.fontStyle.setState(t.style,e),void 0!==t.variant&&this.fontVariant.setState(t.variant,e),void 0!==t.weight&&this.fontWeight.setState(t.weight,e),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e),void 0!==t.size&&this.fontSize.setState(t.size,e),void 0!==t.height&&this.lineHeight.setState(t.height,e),this.fontFamily.setState(t.family,e)):(this.fontStyle.setState(void 0,e),this.fontVariant.setState(void 0,e),this.fontWeight.setState(void 0,e),this.fontStretch.setState(void 0,e),this.fontSize.setState(null,e),this.lineHeight.setState(null,e),this.fontFamily.setState(void 0,e)),this}function Pn(t,i){if(void 0===t){var o=this.marginTop.value,n=this.marginRight.value,r=this.marginBottom.value,a=this.marginLeft.value;return e.Values.equal(o,n)&&e.Values.equal(n,r)&&e.Values.equal(r,a)?o:[o,n,r,a]}return Array.isArray(t)?(t.length>=1&&this.marginTop.setState(t[0],i),t.length>=2&&this.marginRight.setState(t[1],i),t.length>=3&&this.marginBottom.setState(t[2],i),t.length>=4&&this.marginLeft.setState(t[3],i)):(this.marginTop.setState(t,i),this.marginRight.setState(t,i),this.marginBottom.setState(t,i),this.marginLeft.setState(t,i)),this}function Vn(t,e){if(void 0===t){var i=this.overflowX.value,o=this.overflowY.value;return i===o?i:[i,o]}return Array.isArray(t)?(t.length>=1&&this.overflowX.setState(t[0],e),t.length>=2&&this.overflowY.setState(t[1],e)):(this.overflowX.setState(t,e),this.overflowY.setState(t,e)),this}function Tn(t,e){if(void 0===t){var i=this.overscrollBehaviorX.value,o=this.overscrollBehaviorY.value;return i===o?i:[i,o]}return Array.isArray(t)?(t.length>=1&&this.overscrollBehaviorX.setState(t[0],e),t.length>=2&&this.overscrollBehaviorY.setState(t[1],e)):(this.overscrollBehaviorX.setState(t,e),this.overscrollBehaviorY.setState(t,e)),this}function An(t,i){if(void 0===t){var o=this.paddingTop.value,n=this.paddingRight.value,r=this.paddingBottom.value,a=this.paddingLeft.value;return e.Equals(o,n)&&e.Equals(n,r)&&e.Equals(r,a)?o:[o,n,r,a]}return Array.isArray(t)?(t.length>=1&&this.paddingTop.setState(t[0],i),t.length>=2&&this.paddingRight.setState(t[1],i),t.length>=3&&this.paddingBottom.setState(t[2],i),t.length>=4&&this.paddingLeft.setState(t[3],i)):(this.paddingTop.setState(t,i),this.paddingRight.setState(t,i),this.paddingBottom.setState(t,i),this.paddingLeft.setState(t,i)),this}gn.init=function(t,e){void 0!==e.alignContent&&t.alignContent(e.alignContent),void 0!==e.alignItems&&t.alignItems(e.alignItems),void 0!==e.alignSelf&&t.alignSelf(e.alignSelf),void 0!==e.appearance&&t.appearance(e.appearance),void 0!==e.backdropFilter&&t.backdropFilter(e.backdropFilter),void 0!==e.backgroundClip&&t.backgroundClip(e.backgroundClip),void 0!==e.backgroundColor&&t.backgroundColor(e.backgroundColor),void 0!==e.backgroundImage&&t.backgroundImage(e.backgroundImage),void 0!==e.borderCollapse&&t.borderCollapse(e.borderCollapse),void 0!==e.borderColor&&t.borderColor(e.borderColor),void 0!==e.borderTopColor&&t.borderTopColor(e.borderTopColor),void 0!==e.borderRightColor&&t.borderRightColor(e.borderRightColor),void 0!==e.borderBottomColor&&t.borderBottomColor(e.borderBottomColor),void 0!==e.borderLeftColor&&t.borderLeftColor(e.borderLeftColor),void 0!==e.borderRadius&&t.borderRadius(e.borderRadius),void 0!==e.borderTopLeftRadius&&t.borderTopLeftRadius(e.borderTopLeftRadius),void 0!==e.borderTopRightRadius&&t.borderTopRightRadius(e.borderTopRightRadius),void 0!==e.borderBottomRightRadius&&t.borderBottomRightRadius(e.borderBottomRightRadius),void 0!==e.borderBottomLeftRadius&&t.borderBottomLeftRadius(e.borderBottomLeftRadius),void 0!==e.borderSpacing&&t.borderSpacing(e.borderSpacing),void 0!==e.borderStyle&&t.borderStyle(e.borderStyle),void 0!==e.borderTopStyle&&t.borderTopStyle(e.borderTopStyle),void 0!==e.borderRightStyle&&t.borderRightStyle(e.borderRightStyle),void 0!==e.borderBottomStyle&&t.borderBottomStyle(e.borderBottomStyle),void 0!==e.borderLeftStyle&&t.borderLeftStyle(e.borderLeftStyle),void 0!==e.borderWidth&&t.borderWidth(e.borderWidth),void 0!==e.borderTopWidth&&t.borderTopWidth(e.borderTopWidth),void 0!==e.borderRightWidth&&t.borderRightWidth(e.borderRightWidth),void 0!==e.borderBottomWidth&&t.borderBottomWidth(e.borderBottomWidth),void 0!==e.borderLeftWidth&&t.borderLeftWidth(e.borderLeftWidth),void 0!==e.bottom&&t.bottom(e.bottom),void 0!==e.boxShadow&&t.boxShadow(e.boxShadow),void 0!==e.boxSizing&&t.boxSizing(e.boxSizing),void 0!==e.color&&t.color(e.color),void 0!==e.cursor&&t.cursor(e.cursor),void 0!==e.display&&t.display(e.display),void 0!==e.filter&&t.filter(e.filter),void 0!==e.flexBasis&&t.flexBasis(e.flexBasis),void 0!==e.flexDirection&&t.flexDirection(e.flexDirection),void 0!==e.flexGrow&&t.flexGrow(e.flexGrow),void 0!==e.flexShrink&&t.flexShrink(e.flexShrink),void 0!==e.flexWrap&&t.flexWrap(e.flexWrap),void 0!==e.font&&t.font(e.font),void 0!==e.fontFamily&&t.fontFamily(e.fontFamily),void 0!==e.fontSize&&t.fontSize(e.fontSize),void 0!==e.fontStretch&&t.fontStretch(e.fontStretch),void 0!==e.fontStyle&&t.fontStyle(e.fontStyle),void 0!==e.fontVariant&&t.fontVariant(e.fontVariant),void 0!==e.fontWeight&&t.fontWeight(e.fontWeight),void 0!==e.height&&t.height(e.height),void 0!==e.justifyContent&&t.justifyContent(e.justifyContent),void 0!==e.left&&t.left(e.left),void 0!==e.lineHeight&&t.lineHeight(e.lineHeight),void 0!==e.margin&&t.margin(e.margin),void 0!==e.marginTop&&t.marginTop(e.marginTop),void 0!==e.marginRight&&t.marginRight(e.marginRight),void 0!==e.marginBottom&&t.marginBottom(e.marginBottom),void 0!==e.marginLeft&&t.marginLeft(e.marginLeft),void 0!==e.maxHeight&&t.maxHeight(e.maxHeight),void 0!==e.maxWidth&&t.maxWidth(e.maxWidth),void 0!==e.minHeight&&t.minHeight(e.minHeight),void 0!==e.minWidth&&t.minWidth(e.minWidth),void 0!==e.opacity&&t.opacity(e.opacity),void 0!==e.order&&t.order(e.order),void 0!==e.outlineColor&&t.outlineColor(e.outlineColor),void 0!==e.outlineStyle&&t.outlineStyle(e.outlineStyle),void 0!==e.outlineWidth&&t.outlineWidth(e.outlineWidth),void 0!==e.overflow&&t.overflow(e.overflow),void 0!==e.overflowX&&t.overflowX(e.overflowX),void 0!==e.overflowY&&t.overflowY(e.overflowY),void 0!==e.overflowScrolling&&t.overflowScrolling(e.overflowScrolling),void 0!==e.overscrollBehavior&&t.overscrollBehavior(e.overscrollBehavior),void 0!==e.overscrollBehaviorX&&t.overscrollBehaviorX(e.overscrollBehaviorX),void 0!==e.overscrollBehaviorY&&t.overscrollBehaviorY(e.overscrollBehaviorY),void 0!==e.padding&&t.padding(e.padding),void 0!==e.paddingTop&&t.paddingTop(e.paddingTop),void 0!==e.paddingRight&&t.paddingRight(e.paddingRight),void 0!==e.paddingBottom&&t.paddingBottom(e.paddingBottom),void 0!==e.paddingLeft&&t.paddingLeft(e.paddingLeft),void 0!==e.pointerEvents&&t.pointerEvents(e.pointerEvents),void 0!==e.position&&t.position(e.position),void 0!==e.right&&t.right(e.right),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textDecorationColor&&t.textDecorationColor(e.textDecorationColor),void 0!==e.textDecorationLine&&t.textDecorationLine(e.textDecorationLine),void 0!==e.textDecorationStyle&&t.textDecorationStyle(e.textDecorationStyle),void 0!==e.textOverflow&&t.textOverflow(e.textOverflow),void 0!==e.textTransform&&t.textTransform(e.textTransform),void 0!==e.top&&t.top(e.top),void 0!==e.touchAction&&t.touchAction(e.touchAction),void 0!==e.transform&&t.transform(e.transform),void 0!==e.userSelect&&t.userSelect(e.userSelect),void 0!==e.verticalAlign&&t.verticalAlign(e.verticalAlign),void 0!==e.visibility&&t.visibility(e.visibility),void 0!==e.whiteSpace&&t.whiteSpace(e.whiteSpace),void 0!==e.width&&t.width(e.width),void 0!==e.zIndex&&t.zIndex(e.zIndex)},gn.define=function(t){nn({propertyNames:"align-content",type:String})(t,"alignContent"),nn({propertyNames:"align-items",type:String})(t,"alignItems"),nn({propertyNames:"align-self",type:String})(t,"alignSelf"),nn({propertyNames:["appearance","-webkit-appearance"],type:String})(t,"appearance"),nn({propertyNames:["backdrop-filter","-webkit-backdrop-filter"],type:String})(t,"backdropFilter"),nn({propertyNames:["background-clip","-webkit-background-clip"],type:String})(t,"backgroundClip"),nn({propertyNames:"background-color",type:St,state:null})(t,"backgroundColor"),nn({propertyNames:"background-image",type:St,state:null,parse:function(t){try{return Et.parse(t)}catch(e){return t}},fromAny:function(t){if("string"!=typeof t)return Et.fromAny(t);try{return Et.parse(t)}catch(e){return t}}})(t,"backgroundImage"),nn({propertyNames:"border-collapse",type:String})(t,"borderCollapse"),t.borderColor=wn,nn({propertyNames:"border-top-color",type:St,state:null})(t,"borderTopColor"),nn({propertyNames:"border-right-color",type:St,state:null})(t,"borderRightColor"),nn({propertyNames:"border-bottom-color",type:St,state:null})(t,"borderBottomColor"),nn({propertyNames:"border-left-color",type:St,state:null})(t,"borderLeftColor"),t.borderRadius=mn,nn({propertyNames:"border-top-left-radius",type:r.Length,state:null})(t,"borderTopLeftRadius"),nn({propertyNames:"border-top-right-radius",type:r.Length,state:null})(t,"borderTopRightRadius"),nn({propertyNames:"border-bottom-right-radius",type:r.Length,state:null})(t,"borderBottomRightRadius"),nn({propertyNames:"border-bottom-left-radius",type:r.Length,state:null})(t,"borderBottomLeftRadius"),nn({propertyNames:"border-spacing",type:String})(t,"borderSpacing"),t.borderStyle=bn,nn({propertyNames:"border-top-style",type:String})(t,"borderTopStyle"),nn({propertyNames:"border-right-style",type:String})(t,"borderRightStyle"),nn({propertyNames:"border-bottom-style",type:String})(t,"borderBottomStyle"),nn({propertyNames:"border-left-style",type:String})(t,"borderLeftStyle"),t.borderWidth=Sn,nn({propertyNames:"border-top-width",type:r.Length,state:null})(t,"borderTopWidth"),nn({propertyNames:"border-right-width",type:r.Length,state:null})(t,"borderRightWidth"),nn({propertyNames:"border-bottom-width",type:r.Length,state:null})(t,"borderBottomWidth"),nn({propertyNames:"border-left-width",type:r.Length,state:null})(t,"borderLeftWidth"),an({propertyNames:"bottom",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.bottom-i.bottom)}}return null}})(t,"bottom"),nn({propertyNames:"box-shadow",type:Bt,state:null})(t,"boxShadow"),nn({propertyNames:"box-sizing",type:String})(t,"boxSizing"),nn({propertyNames:"color",type:St,state:null})(t,"color"),nn({propertyNames:"cursor",type:String})(t,"cursor"),nn({propertyNames:"display",type:String})(t,"display"),nn({propertyNames:"filter",type:String})(t,"filter"),nn({propertyNames:"flex-basis",type:r.Length,state:null})(t,"flexBasis"),nn({propertyNames:"flex-direction",type:String})(t,"flexDirection"),nn({propertyNames:"flex-grow",type:Number})(t,"flexGrow"),nn({propertyNames:"flex-shrink",type:Number})(t,"flexShrink"),nn({propertyNames:"flex-wrap",type:String})(t,"flexWrap"),t.font=Cn,nn({propertyNames:"font-family",type:vt})(t,"fontFamily"),nn({propertyNames:"font-size",type:r.Length,state:null})(t,"fontSize"),nn({propertyNames:"font-stretch",type:String})(t,"fontStretch"),nn({propertyNames:"font-style",type:String})(t,"fontStyle"),nn({propertyNames:"font-variant",type:String})(t,"fontVariant"),nn({propertyNames:"font-weight",type:String})(t,"fontWeight"),an({propertyNames:"height",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetHeight):null}})(t,"height"),nn({propertyNames:"justify-content",type:String})(t,"justifyContent"),an({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null}})(t,"left"),nn({propertyNames:"line-height",type:r.Length,state:null})(t,"lineHeight"),t.margin=Pn,an({propertyNames:"margin-top",type:r.Length,state:null})(t,"marginTop"),an({propertyNames:"margin-right",type:r.Length,state:null})(t,"marginRight"),an({propertyNames:"margin-bottom",type:r.Length,state:null})(t,"marginBottom"),an({propertyNames:"margin-left",type:r.Length,state:null})(t,"marginLeft"),nn({propertyNames:"max-height",type:r.Length,state:null})(t,"maxHeight"),nn({propertyNames:"max-width",type:r.Length,state:null})(t,"maxWidth"),nn({propertyNames:"min-height",type:r.Length,state:null})(t,"minHeight"),nn({propertyNames:"min-width",type:r.Length,state:null})(t,"minWidth"),nn({propertyNames:"opacity",type:Number})(t,"opacity"),nn({propertyNames:"order",type:Number})(t,"order"),nn({propertyNames:"outline-color",type:St,state:null})(t,"outlineColor"),nn({propertyNames:"outline-style",type:String})(t,"outlineStyle"),nn({propertyNames:"outline-width",type:r.Length,state:null})(t,"outlineWidth"),t.overflow=Vn,nn({propertyNames:"overflow-x",type:String})(t,"overflowX"),nn({propertyNames:"overflow-y",type:String})(t,"overflowY"),nn({propertyNames:"-webkit-overflow-scrolling",type:String})(t,"overflowScrolling"),t.overscrollBehavior=Tn,nn({propertyNames:"overscroll-behavior-x",type:String})(t,"overscrollBehaviorX"),nn({propertyNames:"overscroll-behavior-y",type:String})(t,"overscrollBehaviorY"),t.padding=An,an({propertyNames:"padding-top",type:r.Length,state:null})(t,"paddingTop"),an({propertyNames:"padding-right",type:r.Length,state:null})(t,"paddingRight"),an({propertyNames:"padding-bottom",type:r.Length,state:null})(t,"paddingBottom"),an({propertyNames:"padding-left",type:r.Length,state:null})(t,"paddingLeft"),nn({propertyNames:"pointer-events",type:String})(t,"pointerEvents"),nn({propertyNames:"position",type:String})(t,"position"),an({propertyNames:"right",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.right-i.right)}}return null}})(t,"right"),nn({propertyNames:"text-align",type:String})(t,"textAlign"),nn({propertyNames:"text-decoration-color",type:St,state:null})(t,"textDecorationColor"),nn({propertyNames:"text-decoration-line",type:String})(t,"textDecorationLine"),nn({propertyNames:"text-decoration-style",type:String})(t,"textDecorationStyle"),nn({propertyNames:"text-overflow",type:String})(t,"textOverflow"),nn({propertyNames:"text-transform",type:String})(t,"textTransform"),an({propertyNames:"top",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetTop):null}})(t,"top"),nn({propertyNames:"touch-action",type:String})(t,"touchAction"),nn({propertyNames:"transform",type:r.Transform,state:null})(t,"transform"),nn({propertyNames:["user-select","-webkit-user-select","-moz-user-select","-ms-user-select"],type:String})(t,"userSelect"),nn({propertyNames:"vertical-align",type:String})(t,"verticalAlign"),nn({propertyNames:"visibility",type:String})(t,"visibility"),nn({propertyNames:"white-space",type:String})(t,"whiteSpace"),an({propertyNames:"width",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetWidth):null}})(t,"width"),nn({propertyNames:"z-index",type:Number})(t,"zIndex")};var Fn={getCssRuleConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"cssRuleConstructors")){var i=e.cssRuleConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateCssRule:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"cssRuleConstructors")||(o.cssRuleConstructors={}),o.cssRuleConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getCssRule(i.toString());return null===e&&(e=new t(this,i.toString()),this.setCssRule(i.toString(),e)),e},configurable:!0,enumerable:!0})}},Mn=function(t,e){return this instanceof Mn?On.call(this,t,e):(i=t,Fn.decorateCssRule.bind(Fn,Mn.define(i)));var i};function On(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),this}w(Mn,Object),Mn.prototype.onAnimate=function(t){this.updateAnimations(t)},Mn.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},Mn.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},Mn.prototype.trackDidStartAnimating=function(t){},Mn.prototype.trackWillStopAnimating=function(t){},Mn.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},Mn.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},Mn.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},Mn.prototype.addConstraint=function(t){this.owner.addConstraint(t)},Mn.prototype.removeConstraint=function(t){this.owner.removeConstraint(t)},Mn.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},Mn.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},Mn.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},Mn.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},Mn.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},Mn.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},Mn.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},Mn.prototype.applyTheme=function(t,e,i){},Mn.prototype.mount=function(){},Mn.prototype.unmount=function(){},Mn.prototype.createRule=function(t){if(void 0!==t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSRule)return i;throw new TypeError(""+i)}throw new Error("undefined css rule")},Mn.define=function(t){var e=t.type;if(delete t.type,void 0===e||"style"===e)return xn.define(t);if("media"===e)return Rn.define(t);var i=t.extends,o=t.css;delete t.extends,delete t.css,void 0===i&&(i=Mn);var n=function(t,e){var n,r=i.call(this,t,e)||this;void 0!==o?n=o:void 0!==r.initCss&&(n=r.initCss());var a=r.createRule(n);return void 0!==r.initRule&&(a=r.initRule(a)),Object.defineProperty(r,"rule",{value:a,enumerable:!0,configurable:!0}),r},r=t;return Object.setPrototypeOf(n,i),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,i.prototype),"function"==typeof o&&(r.initCss=o,o=void 0),n};var xn=function(t,e){return this instanceof xn?Dn.call(this,t,e):(i=t,Fn.decorateCssRule.bind(Fn,xn.define(i)));var i};function Dn(t,e){var i=Mn.call(this,t,e)||this;return Object.defineProperty(i,"styleAnimators",{value:{},enumerable:!0,configurable:!0}),i}w(xn,Mn),gn.define(xn.prototype),Object.defineProperty(xn.prototype,"node",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"selector",{get:function(){return this.rule.selectorText},enumerable:!0,configurable:!0}),xn.prototype.setSelector=function(t){this.rule.selectorText=t},xn.prototype.getStyle=function(t){if("undefined"!=typeof CSSStyleValue){var e=this.rule.styleMap;if("string"==typeof t)return e.get(t);for(var i=0,o=t.length;i<o;i+=1){if(""!==(n=e.get(t[i])))return n}return""}e=this.rule.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.getPropertyValue(t[i])))return n}return""},xn.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.rule.styleMap.set(e,n)}catch(t){}else this.rule.style.setProperty(e,Zt(i),o)}else this.rule.styleMap.delete(e);else null!=i?this.rule.style.setProperty(e,Zt(i),o):this.rule.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},xn.prototype.willSetStyle=function(t,e,i){},xn.prototype.onSetStyle=function(t,e,i){},xn.prototype.didSetStyle=function(t,e,i){},xn.prototype.hasStyleAnimator=function(t){return void 0!==this.styleAnimators[t]},xn.prototype.getStyleAnimator=function(t){var e=this.styleAnimators[t];return void 0!==e?e:null},xn.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null!==e?i[t]=e:delete i[t]},xn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(i);var o=this.styleAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},xn.prototype.mount=function(){Mn.prototype.mount.call(this);var t=this.styleAnimators;for(var e in t){t[e].mount()}},xn.prototype.unmount=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}Mn.prototype.unmount.call(this)},xn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSStyleRule)return i;throw new TypeError(""+i)},xn.define=function(t){var e=t.extends,i=t.css,o=t.style;delete t.extends,delete t.css,delete t.style,void 0===e&&(e=xn);var n=function(t,n){var r,a=function(t,e){return void 0===e?a.getStyle(t):(a.setStyle(t,e),a.owner)};if(Object.setPrototypeOf(a,this),a=e.call(a,t,n)||a,void 0!==i)r=i;else{if(void 0===a.initCss)throw new Error("undefined css");r=a.initCss()}var s=a.createRule(r);return void 0!==a.initRule&&(s=a.initRule(s)),Object.defineProperty(a,"rule",{value:s,enumerable:!0,configurable:!0}),void 0!==o&&gn.init(a,o),a},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),"function"==typeof i&&(r.initCss=i,i=void 0),n};var Rn=function(t,e){return this instanceof Rn?Ln.call(this,t,e):(i=t,Fn.decorateCssRule.bind(Fn,Rn.define(i)));var i};function Ln(t,e){var i=Mn.call(this,t,e)||this;return Object.defineProperty(i,"cssRules",{value:{},enumerable:!0,configurable:!0}),i}w(Rn,Mn),Rn.prototype.getRule=function(t){return this.rule.cssRules.item(t)},Rn.prototype.insertRule=function(t,e){return this.rule.insertRule(t,e)},Rn.prototype.removeRule=function(t){this.rule.deleteRule(t)},Rn.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},Rn.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},Rn.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},Rn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},Rn.prototype.mount=function(){Mn.prototype.mount.call(this);var t=this.cssRules;for(var e in t){t[e].mount()}},Rn.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}Mn.prototype.unmount.call(this)},Rn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSMediaRule)return i;throw new TypeError(""+i)},Rn.define=function(t){var e=t.extends,i=t.css;delete t.extends,delete t.css,void 0===e&&(e=Rn);var o=function(t,o){var n,r=e.call(this,t,o)||this;if(void 0!==i)n=i;else{if(void 0===r.initCss)throw new Error("undefined css");n=r.initCss()}var a=r.createRule(n);return void 0!==r.initRule&&(a=r.initRule(a)),Object.defineProperty(r,"rule",{value:a,enumerable:!0,configurable:!0}),r},n=t;return Object.setPrototypeOf(o,e),(o.prototype=n).constructor=o,Object.setPrototypeOf(o.prototype,e.prototype),"function"==typeof i&&(n.initCss=i,i=void 0),o};var kn=function(){function t(t,i){Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"stylesheet",{value:void 0!==i?i:this.createStylesheet(),enumerable:!0}),Object.defineProperty(this,"cssRules",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.createStylesheet=function(){return new CSSStyleSheet},t.prototype.getRule=function(t){return this.stylesheet.cssRules.item(t)},t.prototype.insertRule=function(t,e){return this.stylesheet.insertRule(t,e)},t.prototype.removeRule=function(t){this.stylesheet.deleteRule(t)},t.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},t.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},t.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},t.prototype.getLazyCssRule=function(t){var e=this.getCssRule(t);if(null===e){var i=Fn.getCssRuleConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setCssRule(t,e))}return e},t.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},t.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},t.prototype.onAnimate=function(t){this.updateAnimations(t)},t.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},t.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},t.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},t.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},t.prototype.addConstraint=function(t){return this.owner.addConstraint(t)},t.prototype.removeConstraint=function(t){return this.owner.removeConstraint(t)},t.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},t.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},t.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},t.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},t.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},t.prototype.requireUpdate=function(t){"function"==typeof this.owner.requireUpdate&&this.owner.requireUpdate(t)},t.prototype.mount=function(){var t=this.cssRules;for(var e in t){t[e].mount()}},t.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}},t}(),jn=function(t){function i(i){var o=t.call(this)||this;return Object.defineProperty(o,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(o,"node",{value:i,enumerable:!0}),Object.defineProperty(o,"childViewMap",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(o,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),i.view=o,o}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.text&&this.text(e.text)},i.prototype.willObserve=function(t){var e,i=this.viewController;if(null!==i&&void 0!==(e=t.call(this,i)))return e;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];if(void 0!==(e=t.call(this,a)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}var a=this.viewController;return null!==a&&(e=t.call(this,a)),e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(i.prototype,"parentView",{get:function(){var t=this.node.parentNode;if(null!==t){var e=t.view;if(e instanceof Gi)return e}return null},enumerable:!1,configurable:!0}),i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.node,e=t.parentNode;if(null!==e){var i=e.view;void 0!==i?0==(this.viewFlags&Gi.TraversingFlag)?i.removeChildView(this):this.setViewFlags(this.viewFlags|Gi.RemovingFlag):(e.removeChild(t),this.setParentView(null,this),this.setKey(void 0))}},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}return null},i.prototype.lastChildView=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;if(void 0!==i)return i}return null},i.prototype.nextChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.nextSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n],a=r.view;if(void 0!==a&&void 0!==(i=t.call(e,a)))break;o[n]===r&&(n+=1)}return i},i.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setChildView=function(t,e){var o=null;if(null!==e){if(!(e instanceof i))throw new TypeError(""+e);e.parentView===this&&(o=e.node.nextSibling),e.remove()}var n=this.getChildView(t);if(null!==n){if(!(n instanceof i))throw new TypeError(""+n);var r=n.node;o=r.nextSibling,this.willRemoveChildView(n),this.willRemoveChildNode(r),n.setParentView(null,this),this.removeChildViewMap(n),this.node.removeChild(r),this.onRemoveChildNode(r),this.onRemoveChildView(n),this.didRemoveChildNode(r),this.didRemoveChildView(n),n.setKey(void 0)}if(null!==e){var a=e.node,s=null;null!==o&&void 0===(s=o.view)&&(s=null),e.setKey(t),this.willInsertChildView(e,s),this.willInsertChildNode(a,o),this.node.insertBefore(a,o),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildNode(a,o),this.onInsertChildView(e,s),this.didInsertChildNode(a,o),this.didInsertChildView(e,s),e.cascadeInsert()}return n},i.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},i.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},i.prototype.appendChild=function(t,e){if(t instanceof Gi)this.appendChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.appendChildNode(t,e)}},i.prototype.appendChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node;this.willInsertChildView(t,null),this.willInsertChildNode(o,null),this.node.appendChild(o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,null),this.onInsertChildView(t,null),this.didInsertChildNode(o,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.appendChildNode=function(t,e){var i=t.view;void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,null)),this.willInsertChildNode(t,null),this.node.appendChild(t),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,null),void 0!==i&&this.onInsertChildView(i,null),this.didInsertChildNode(t,null),void 0!==i&&(this.didInsertChildView(i,null),i.cascadeInsert())},i.prototype.prependChild=function(t,e){if(t instanceof Gi)this.prependChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.prependChildNode(t,e)}},i.prototype.prependChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node,n=this.node.firstChild,r=null;null!==n&&void 0===(r=n.view)&&(r=null),this.willInsertChildView(t,r),this.willInsertChildNode(o,n),this.node.insertBefore(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,r),this.didInsertChildNode(o,n),this.didInsertChildView(t,r),t.cascadeInsert()},i.prototype.prependChildNode=function(t,e){var i=t.view,o=this.node.firstChild,n=null;null!==o&&void 0===(n=o.view)&&(n=null),void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,n)),this.willInsertChildNode(t,o),this.node.insertBefore(t,o),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,o),void 0!==i&&this.onInsertChildView(i,n),this.didInsertChildNode(t,o),void 0!==i&&(this.didInsertChildView(i,n),i.cascadeInsert())},i.prototype.insertChild=function(t,e,o){if(t instanceof i)if(e instanceof Gi)this.insertChildView(t,e,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t.node,e,o)}else{if(!(t instanceof Node))throw new TypeError(""+t);if(e instanceof i)this.insertChildNode(t,e.node,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t,e,o)}}},i.prototype.insertChildView=function(t,e,o){if(!(t instanceof i))throw new TypeError(""+t);if(null!==e&&!(e instanceof i))throw new TypeError(""+e);t.remove(),void 0!==o&&(this.removeChildView(o),t.setKey(o));var n=t.node,r=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(n,r),this.node.insertBefore(n,r),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(n,r),this.onInsertChildView(t,e),this.didInsertChildNode(n,r),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i)},i.prototype.insertChildNode=function(t,e,i){var o=t.view,n=null;null!==e&&void 0===(n=e.view)&&(n=null),void 0!==o&&(o.remove(),void 0!==i&&(this.removeChildView(i),o.setKey(i)),this.willInsertChildView(o,n)),this.willInsertChildNode(t,e),this.node.insertBefore(t,e),void 0!==o&&(this.insertChildViewMap(o),o.setParentView(this,null)),this.onInsertChildNode(t,e),void 0!==o&&this.onInsertChildView(o,n),this.didInsertChildNode(t,e),void 0!==o&&(this.didInsertChildView(o,n),o.cascadeInsert())},i.prototype.injectChildView=function(t,e,i){void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.node,n=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,e),this.didInsertChildNode(o,n),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.willInsertChildNode=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillInsertChildNode&&i.viewWillInsertChildNode(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.viewWillInsertChildNode&&a.viewWillInsertChildNode(t,e,this)}},i.prototype.onInsertChildNode=function(t,e){this.requireUpdate(this.insertChildFlags)},i.prototype.didInsertChildNode=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildNode&&r.viewDidInsertChildNode(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.viewDidInsertChildNode&&a.viewDidInsertChildNode(t,e,this)},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Gi.MountedFlag|Gi.PoweredFlag))==(Gi.MountedFlag|Gi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Gi.UpdateMask)&Gi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.removeChild=function(t){if(t instanceof Gi)this.removeChildView(t);else{if(!(t instanceof Node))throw new TypeError(""+t);this.removeChildNode(t)}},i.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof i))throw new TypeError(""+e);var o=e.node;if(o.parentNode!==this.node)throw new Error("not a child view");if(this.willRemoveChildView(e),this.willRemoveChildNode(o),e.setParentView(null,this),this.removeChildViewMap(e),this.node.removeChild(o),this.onRemoveChildNode(o),this.onRemoveChildView(e),this.didRemoveChildNode(o),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeViewFastener(e)},i.prototype.removeChildNode=function(t){if(t.parentNode!==this.node)throw new Error("not a child node");var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))},i.prototype.removeAll=function(){for(;;){var t=this.node.lastChild;if(null===t)break;var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))}},i.prototype.willRemoveChildNode=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRemoveChildNode&&e.viewWillRemoveChildNode(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillRemoveChildNode&&r.viewWillRemoveChildNode(t,this)}},i.prototype.onRemoveChildNode=function(t){this.requireUpdate(this.removeChildFlags)},i.prototype.didRemoveChildNode=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildNode&&n.viewDidRemoveChildNode(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidRemoveChildNode&&r.viewDidRemoveChildNode(t,this)},i.prototype.text=function(t){return 0===arguments.length?(null===(t=this.node.textContent)&&(t=void 0),t):(void 0===t&&(t=null),this.node.textContent=t,this)},i.isRootView=function(t){for(;;){var e=t.parentNode;if(null===e)break;if(e.view instanceof Gi)return!1;t=e}return!0},i.isNodeMounted=function(t){var e=t.isConnected;if("boolean"!=typeof e){var i=t.ownerDocument;if(null!==i)e=0==(i.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED);else e=!1}return e},i.prototype.mount=function(){!this.isMounted()&&i.isNodeMounted(this.node)&&i.isRootView(this.node)&&(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&Gi.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|Gi.MountedFlag|Gi.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners()},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.doMountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeMount(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&Gi.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~Gi.MountedFlag|Gi.TraversingFlag);try{this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~Gi.ViewFlagMask|Gi.RemovingFlag))},i.prototype.doUnmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnmount(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&Gi.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|Gi.PoweredFlag|Gi.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doPowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadePower(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&Gi.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~Gi.PoweredFlag|Gi.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doUnpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnpower(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&Gi.CulledFlag)?(this.setViewFlags(e|Gi.CulledFlag),0==(e&Gi.CullFlag)&&this.doCull()):t||0==(e&Gi.CulledFlag)||(this.setViewFlags(e&~Gi.CulledFlag),0==(e&Gi.CullFlag)&&this.doUncull())},i.prototype.cascadeCull=function(){0==(this.viewFlags&Gi.CullFlag)&&(this.setViewFlags(this.viewFlags|Gi.CullFlag),0==(this.viewFlags&Gi.CulledFlag)&&this.doCull())},i.prototype.doCull=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willCull(),this.onCull(),this.doCullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doCullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeCull(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&Gi.CullFlag)&&(this.setViewFlags(this.viewFlags&~Gi.CullFlag),0==(this.viewFlags&Gi.CulledFlag)&&this.doUncull())},i.prototype.doUncull=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willUncull(),this.doUncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doUncullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUncull(),0==(i.viewFlags&Gi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);t&=~Gi.NeedsProcess,t|=this.viewFlags&Gi.UpdateMask,0!=((t=this.needsProcess(t,i))&Gi.ProcessMask)&&this.doProcess(t,i)},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Gi.NeedsProcess|Gi.NeedsProject)|Gi.TraversingFlag|Gi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Gi.NeedsResize)&&(i|=Gi.NeedsResize,this.setViewFlags(this.viewFlags&~Gi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Gi.NeedsScroll)&&(i|=Gi.NeedsScroll,this.setViewFlags(this.viewFlags&~Gi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Gi.NeedsChange)&&(i|=Gi.NeedsChange,this.setViewFlags(this.viewFlags&~Gi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Gi.NeedsAnimate)&&(i|=Gi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Gi.NeedsAnimate),this.willAnimate(e)),this.onProcess(i,e),0!=(i&Gi.NeedsResize)&&this.onResize(e),0!=(i&Gi.NeedsScroll)&&this.onScroll(e),0!=(i&Gi.NeedsChange)&&this.onChange(e),0!=(i&Gi.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&Gi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Gi.NeedsChange)&&this.didChange(e),0!=(i&Gi.NeedsScroll)&&this.didScroll(e),0!=(i&Gi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.ProcessingFlag))}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties()},i.prototype.doProcessChildViews=function(t,e){0!=(t&Gi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);t&=~Gi.NeedsDisplay,t|=this.viewFlags&Gi.UpdateMask,0!=((t=this.needsDisplay(t,i))&Gi.DisplayMask)&&this.doDisplay(t,i)},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Gi.NeedsDisplay|Gi.NeedsRender|Gi.NeedsComposite)|Gi.TraversingFlag|Gi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Gi.NeedsLayout)&&(i|=Gi.NeedsLayout,this.setViewFlags(this.viewFlags&~Gi.NeedsLayout),this.willLayout(e)),this.onDisplay(i,e),0!=(i&Gi.NeedsLayout)&&this.onLayout(e),this.doDisplayChildViews(i,e),0!=(i&Gi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.DisplayingFlag))}},i.prototype.doDisplayChildViews=function(t,e){0==(t&Gi.DisplayMask)||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},i.prototype.getLook=function(t,e){},i.prototype.getLookOr=function(t,e,i){return 2===arguments.length&&(i=e,e=null),i},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},i.prototype.modifyTheme=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},Object.defineProperty(this,"viewServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},Object.defineProperty(this,"viewProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},Object.defineProperty(this,"viewAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},Object.defineProperty(this,"viewFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();return t.detach(),new r.BoxR2(e.left,e.top,e.right,e.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();t.detach();var i=window.pageXOffset,o=window.pageYOffset;return new r.BoxR2(e.left+i,e.top+o,e.right+i,e.bottom+o)},enumerable:!1,configurable:!0}),i.prototype.dispatchEvent=function(t){return this.node.dispatchEvent(t)},i.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},i.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},i.mount=function(t){var e=t.parentView;null!==e?(t.setParentView(e,null),t.cascadeInsert()):t.mount()},i.fromNode=function(t){if(t.view instanceof this)return t.view;if(t instanceof Element)return Gn.fromNode(t);if(t instanceof Text)return En.fromNode(t);var e=new i(t);return this.mount(e),e},i.fromConstructor=function(t){if(t.prototype instanceof Gn)return Gn.fromConstructor(t);if(t.prototype instanceof En)return En.fromConstructor(t);if(t.prototype instanceof Gi)return new t;throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if(t instanceof Node)return this.fromNode(t);throw new TypeError(""+t)},i}(Gi);eo.insertModalView=function(t){var e=document.body,i=e.view;if(void 0!==i)i.appendChildView(t);else{if(!(t instanceof jn))throw new TypeError(""+t);e.appendChild(t.node),t.mount()}};var In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"node",{get:function(){var t=this.view;return null!==t?t.node:null},enumerable:!1,configurable:!0}),e.prototype.appendChildNode=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.appendChildNode(t,e)},e.prototype.prependChildNode=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.prependChildNode(t,e)},e.prototype.insertChildNode=function(t,e,i){var o=this.view;if(null===o)throw new Error("no view");o.insertChildNode(t,e,i)},e.prototype.viewWillInsertChildNode=function(t,e,i){},e.prototype.viewDidInsertChildNode=function(t,e,i){},e.prototype.removeChildNode=function(t){var e=this.view;if(null===e)throw new Error("no view");e.removeChildNode(t)},e.prototype.viewWillRemoveChildNode=function(t,e){},e.prototype.viewDidRemoveChildNode=function(t,e){},e}(Ki),En=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.create=function(t){return void 0===t&&(t=""),new e(document.createTextNode(t))},e.fromConstructor=function(i){return i.prototype instanceof e?new i(document.createTextNode("")):t.fromConstructor.call(this,i)},e}(jn),Wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(In),Nn=function(t,e){return this instanceof Nn?Un.call(this,t,e):(i=t,Gn.decorateAttributeAnimator.bind(Gn,Nn.define(i)));var i};function Un(t,e){var i,o=bo.call(this,void 0,null)||this;return void 0!==e&&Object.defineProperty(o,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"owner",{value:t,enumerable:!0}),Object.defineProperty(o,"ownLook",{value:null!==(i=o.ownLook)&&void 0!==i?i:null,enumerable:!0,configurable:!0}),void 0!==o.initState&&(Object.defineProperty(o,"ownState",{value:o.fromAny(o.initState()),enumerable:!0,configurable:!0}),Object.defineProperty(o,"ownValue",{value:o.ownState,enumerable:!0,configurable:!0})),o}w(Nn,bo),Object.defineProperty(Nn.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty(Nn.prototype,"attributeValue",{get:function(){var t=this.owner.getAttribute(this.attributeName);if(null!==t)try{return this.parse(t)}catch(t){}},enumerable:!0,configurable:!0}),Object.defineProperty(Nn.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.attributeValue;void 0!==e&&(t=e,this.setAuto(!1))}return t},enumerable:!0,configurable:!0}),Nn.prototype.isAuto=function(){return 0==(this.animatorFlags&bo.OverrideFlag)},Nn.prototype.setAuto=function(t){t&&0!=(this.animatorFlags&bo.OverrideFlag)?this.setAnimatorFlags(this.animatorFlags&~bo.OverrideFlag):t||0!=(this.animatorFlags&bo.OverrideFlag)||this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag)},Nn.prototype.getValue=function(){var t=this.value;if(void 0===t)throw new TypeError(t+" "+this.name+" value");return t},Nn.prototype.getState=function(){var t=this.state;if(void 0===t)throw new TypeError(t+" "+this.name+" state");return t},Nn.prototype.setState=function(t,e){void 0!==t&&(t=this.fromAny(t)),this.setAnimatorFlags(this.animatorFlags|bo.OverrideFlag),this.setLook(null),bo.prototype.setState.call(this,t,e)},Nn.prototype.setAutoState=function(t,e){0==(this.animatorFlags&bo.OverrideFlag)&&(void 0!==t&&(t=this.fromAny(t)),bo.prototype.setState.call(this,t,e))},Nn.prototype.onSetValue=function(t,e){this.owner.setAttribute(this.attributeName,t);var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},Object.defineProperty(Nn.prototype,"look",{get:function(){return this.ownLook},enumerable:!0,configurable:!0}),Nn.prototype.setLook=function(t,e){this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag);var i=this.look;t!==i&&(e=void 0!==e&&s.Timing.fromAny(e),this.willSetLook(t,i,e),Object.defineProperty(this,"ownLook",{value:t,enumerable:!0,configurable:!0}),this.onSetLook(t,i,e),this.didSetLook(t,i,e))},Nn.prototype.willSetLook=function(t,e,i){},Nn.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},Nn.prototype.didSetLook=function(t,e,i){},Nn.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,i,e))}else this.owner.requireUpdate(Gi.NeedsChange)},Nn.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),bo.prototype.setState.call(this,n,i))}},Nn.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},Nn.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},Nn.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},Nn.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},Nn.prototype.parse=function(){throw new Error},Nn.prototype.fromAny=function(t){return t},Nn.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},Nn.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},Nn.prototype.willMount=function(){},Nn.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},Nn.prototype.didMount=function(){},Nn.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},Nn.prototype.willUnmount=function(){},Nn.prototype.onUnmount=function(){this.stopAnimating()},Nn.prototype.didUnmount=function(){},Nn.prototype.toString=function(){return this.name},Nn.getClass=function(t){return t===String?Bn:t===Boolean?Hn:t===Number?qn:t===r.Length?zn:t===St?Yn:t===r.Transform?Xn:null},Nn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.initState;delete t.extends,delete t.state,delete t.look,void 0===i&&(i=Nn.getClass(t.type)),null===i&&(i=Nn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var o=function(t,e){return 0===arguments.length?o.value:(o.setState(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},s=t;return Object.setPrototypeOf(a,i),(a.prototype=s).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),void 0!==o&&void 0===r&&(s.initState=function(){return o}),Object.defineProperty(s,"ownLook",{value:null!=n?n:null,enumerable:!0,configurable:!0}),a};var Bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromAny=function(t){return t},e}(Nn),Hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return!!t},e.prototype.fromAny=function(t){return!!t},e}(Nn),qn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(Nn),zn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(Nn),Yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return St.parse(t)},e.prototype.fromAny=function(t){try{return St.fromAny(t)}catch(t){return null}},e}(Nn),Xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e}(Nn),Gn=function(i){function o(t){var e=i.call(this,t)||this;return Object.defineProperty(e,"attributeAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"styleAnimators",{value:null,enumerable:!0,configurable:!0}),e}return w(o,i),o.prototype.initView=function(t){i.prototype.initView.call(this,t),void 0!==t.id&&this.id(t.id),void 0!==t.classList&&this.addClass.apply(this,t.classList),void 0!==t.mood&&this.mood(t.mood),void 0!==t.moodModifier&&this.moodModifier(t.moodModifier),void 0!==t.theme&&this.theme(t.theme),void 0!==t.themeModifier&&this.themeModifier(t.themeModifier)},o.prototype.onAddViewObserver=function(t){i.prototype.onAddViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onRemoveViewObserver=function(t){i.prototype.onRemoveViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onMount=function(){i.prototype.onMount.call(this),this.mountTheme()},o.prototype.onChange=function(t){i.prototype.onChange.call(this,t),this.updateTheme()},o.prototype.onUncull=function(){i.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},o.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},o.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},o.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=0===e.length||Array.isArray(e[e.length-1])?void 0:e.pop(),n=e,r=this.moodModifier.getStateOr(de.empty()),a=r.updatedCol.apply(r,b([t,!0],n));if(!a.equals(r))if(this.moodModifier.setState(a),this.changeMood(),void 0!==o){var l=this.theme.state,u=this.mood.state;null!==l&&null!==u&&(o=!0===o?l.getOr(Qt.timing,u,!1):s.Timing.fromAny(o),this.applyTheme(l,u,o))}else this.requireUpdate(Gi.NeedsChange)},o.prototype.modifyTheme=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=0===e.length||Array.isArray(e[e.length-1])?void 0:e.pop(),n=e,r=this.themeModifier.getStateOr(de.empty()),a=r.updatedCol.apply(r,b([t,!0],n));if(!a.equals(r))if(this.themeModifier.setState(a),this.changeTheme(),void 0!==o){var l=this.theme.state,u=this.mood.state;null!==l&&null!==u&&(o=!0===o?l.getOr(Qt.timing,u,!1):s.Timing.fromAny(o),this.applyTheme(l,u,o))}else this.requireUpdate(Gi.NeedsChange)},o.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.isAuto()){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setAutoState(n)}}else this.mood.setInherited(!0)}},o.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.isAuto()){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setAutoState(n)}}else this.theme.setInherited(!0)}},o.prototype.updateTheme=function(){this.changeMood(),this.changeTheme();var t=this.theme.state,e=this.mood.state;null!==t&&null!==e&&this.applyTheme(t,e)},o.prototype.onApplyTheme=function(t,e,o){i.prototype.onApplyTheme.call(this,t,e,o),this.themeViewAnimators(t,e,o)},o.prototype.mountTheme=function(){if(jn.isRootView(this.node)){var t=this.themeService.manager;void 0!==t&&(this.mood.isAuto()&&null===this.mood.state&&this.mood.setAutoState(t.mood),this.theme.isAuto()&&null===this.theme.state&&this.theme.setAutoState(t.theme))}},o.prototype.getAttribute=function(t){return this.node.getAttribute(t)},o.prototype.setAttribute=function(t,e){return this.willSetAttribute(t,e),null!=e?this.node.setAttribute(t,Kt(e)):this.node.removeAttribute(t),this.onSetAttribute(t,e),this.didSetAttribute(t,e),this},o.prototype.willSetAttribute=function(t,e){var i=this.viewController;null!==i&&i.viewWillSetAttribute(t,e,this);var o=this.viewObserverCache.viewWillSetAttributeObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewWillSetAttribute(t,e,this)}},o.prototype.onSetAttribute=function(t,e){},o.prototype.didSetAttribute=function(t,e){var i=this.viewObserverCache.viewDidSetAttributeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewDidSetAttribute(t,e,this)}var r=this.viewController;null!==r&&r.viewDidSetAttribute(t,e,this)},o.prototype.hasAttributeAnimator=function(t){var e=this.attributeAnimators;return null!==e&&void 0!==e[t]},o.prototype.getAttributeAnimator=function(t){var e=this.attributeAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setAttributeAnimator=function(t,e){var i=this.attributeAnimators;null===i&&(i={},Object.defineProperty(this,"attributeAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.getStyle=function(t){if("undefined"==typeof CSSStyleValue){e=this.node.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){if(""!==(n=e.getPropertyValue(t[i])))return n}return""}var e=this.node.attributeStyleMap;if("string"!=typeof t){for(var i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.get(t[i])))return n}return""}try{return e.get(t)}catch(t){return}},o.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.node.attributeStyleMap.set(e,n)}catch(t){}else this.node.style.setProperty(e,Zt(i),o)}else this.node.attributeStyleMap.delete(e);else null!=i?this.node.style.setProperty(e,Zt(i),o):this.node.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},o.prototype.willSetStyle=function(t,e,i){var o=this.viewController;null!==o&&o.viewWillSetStyle(t,e,i,this);var n=this.viewObserverCache.viewWillSetStyleObservers;if(void 0!==n)for(var r=0,a=n.length;r<a;r+=1){n[r].viewWillSetStyle(t,e,i,this)}},o.prototype.onSetStyle=function(t,e,i){},o.prototype.didSetStyle=function(t,e,i){var o=this.viewObserverCache.viewDidSetStyleObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewDidSetStyle(t,e,i,this)}var a=this.viewController;null!==a&&a.viewDidSetStyle(t,e,i,this)},o.prototype.hasStyleAnimator=function(t){var e=this.styleAnimators;return null!==e&&void 0!==e[t]},o.prototype.getStyleAnimator=function(t){var e=this.styleAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null===i&&(i={},Object.defineProperty(this,"styleAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}var r=this.attributeAnimators;for(var n in r){r[n].applyTheme(t,e,i)}var a=this.styleAnimators;for(var n in a){a[n].applyTheme(t,e,i)}},o.prototype.mountViewAnimators=function(){i.prototype.mountViewAnimators.call(this);var t=this.attributeAnimators;for(var e in t){t[e].mount()}var o=this.styleAnimators;for(var e in o){o[e].mount()}},o.prototype.unmountViewAnimators=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}var o=this.attributeAnimators;for(var e in o){o[e].unmount()}i.prototype.unmountViewAnimators.call(this)},o.prototype.id=function(t){if(0==arguments.length){var e=this.getAttribute("id");return null!==e?e:void 0}return this.setAttribute("id",t),this},o.prototype.className=function(t){if(0===arguments.length){var e=this.getAttribute("class");return null!==e?e:void 0}return this.setAttribute("class",t),this},Object.defineProperty(o.prototype,"classList",{get:function(){return this.node.classList},enumerable:!1,configurable:!0}),o.prototype.hasClass=function(t){return this.node.classList.contains(t)},o.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.add(t[o]);return this},o.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.remove(t[o]);return this},o.prototype.toggleClass=function(t,e){var i=this.node.classList;return void 0===e?i.toggle(t):!0===e?i.add(t):!1===e&&i.remove(t),this},Object.defineProperty(o.prototype,"clientBounds",{get:function(){var t=this.node.getBoundingClientRect();return new r.BoxR2(t.left,t.top,t.right,t.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageBounds",{get:function(){var t=this.node.getBoundingClientRect(),e=window.pageXOffset,i=window.pageYOffset;return new r.BoxR2(t.left+e,t.top+i,t.right+e,t.bottom+i)},enumerable:!1,configurable:!0}),o.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},o.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},o.fromTag=function(t){var e;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this);var i=e.namespace;return new e(void 0!==i?document.createElementNS(i,t):document.createElement(t))},o.fromNode=function(t){if(t.view instanceof this)return t.view;var e=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t.tagName]),void 0===e&&(e=this);var i=new e(t);return this.mount(i),i},o.fromConstructor=function(t){if(t.prototype instanceof o){var e=t.tag;if("string"==typeof e){var n=t.namespace;return new t(void 0!==n?document.createElementNS(n,e):document.createElement(e))}throw new TypeError(""+t)}return i.fromConstructor.call(this,t)},o.fromAny=function(t){if(t instanceof o)return t;if(t instanceof Element)return this.fromNode(t);throw new TypeError(""+t)},o.decorateAttributeAnimator=function(t,e,i){Object.defineProperty(e,i,{get:function(){var e=this.getAttributeAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setAttributeAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})},o.tags={},m([ho({type:de,state:null})],o.prototype,"moodModifier",void 0),m([ho({type:de,state:null})],o.prototype,"themeModifier",void 0),o}(jn),Kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetAttribute=function(t,e,i){},e.prototype.viewDidSetAttribute=function(t,e,i){},e.prototype.viewWillSetStyle=function(t,e,i,o){},e.prototype.viewDidSetStyle=function(t,e,i,o){},e}(In),Zn=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.autocomplete&&this.autocomplete(t.autocomplete),void 0!==t.checked&&this.checked(t.checked),void 0!==t.colspan&&this.colspan(t.colspan),void 0!==t.disabled&&this.disabled(t.disabled),void 0!==t.placeholder&&this.placeholder(t.placeholder),void 0!==t.rowspan&&this.rowspan(t.rowspan),void 0!==t.selected&&this.selected(t.selected),void 0!==t.title&&this.title(t.title),void 0!==t.type&&this.type(t.type),void 0!==t.value&&this.value(t.value)},e.prototype.initStyle=function(t){gn.init(this,t)},e.prototype.append=function(t,i){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.node===document.body&&this.applyRootTheme(e,i,o)},e.prototype.applyRootTheme=function(t,e,i){var o=t.getOr(Qt.font,he.ambient,null);null!==o&&(void 0!==o.style&&this.fontStyle.setAutoState(o.style),void 0!==o.variant&&this.fontVariant.setAutoState(o.variant),void 0!==o.weight&&this.fontWeight.setAutoState(o.weight),void 0!==o.stretch&&this.fontStretch.setAutoState(o.stretch),null!==o.size&&this.fontSize.setAutoState(o.size),null!==o.height&&this.lineHeight.setAutoState(o.height),this.fontFamily.setAutoState(o.family)),this.backgroundColor.setAutoState(t.getOr(Qt.backgroundColor,he.ambient,null),i),this.color.setAutoState(t.getOr(Qt.color,he.ambient,null),i)},e.prototype.isPositioned=function(){var t=window.getComputedStyle(this.node);return"relative"===t.position||"absolute"===t.position},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;if(null!==t)return t;if(this.isPositioned()){var e=this.node.offsetLeft,i=this.node.offsetTop;if(0!==e||0!==i)return r.Transform.translate(-e,-i)}return r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElement(t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in Gn.tags||(Gn.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="div",m([Nn({attributeName:"autocomplete",type:String})],e.prototype,"autocomplete",void 0),m([Nn({attributeName:"checked",type:Boolean})],e.prototype,"checked",void 0),m([Nn({attributeName:"colspan",type:Number})],e.prototype,"colspan",void 0),m([Nn({attributeName:"disabled",type:Boolean})],e.prototype,"disabled",void 0),m([Nn({attributeName:"placeholder",type:String})],e.prototype,"placeholder",void 0),m([Nn({attributeName:"rowspan",type:Number})],e.prototype,"rowspan",void 0),m([Nn({attributeName:"selected",type:Boolean})],e.prototype,"selected",void 0),m([Nn({attributeName:"title",type:String})],e.prototype,"title",void 0),m([Nn({attributeName:"type",type:String})],e.prototype,"type",void 0),m([Nn({attributeName:"value",type:String})],e.prototype,"value",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("abbr")],e,"abbr",void 0),m([e.Tag("address")],e,"address",void 0),m([e.Tag("area")],e,"area",void 0),m([e.Tag("article")],e,"article",void 0),m([e.Tag("aside")],e,"aside",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("b")],e,"b",void 0),m([e.Tag("base")],e,"base",void 0),m([e.Tag("bdi")],e,"bdi",void 0),m([e.Tag("bdo")],e,"bdo",void 0),m([e.Tag("blockquote")],e,"blockquote",void 0),m([e.Tag("body")],e,"body",void 0),m([e.Tag("br")],e,"br",void 0),m([e.Tag("button")],e,"button",void 0),m([e.Tag("caption")],e,"caption",void 0),m([e.Tag("cite")],e,"cite",void 0),m([e.Tag("code")],e,"code",void 0),m([e.Tag("col")],e,"col",void 0),m([e.Tag("colgroup")],e,"colgroup",void 0),m([e.Tag("data")],e,"data",void 0),m([e.Tag("datalist")],e,"datalist",void 0),m([e.Tag("dd")],e,"dd",void 0),m([e.Tag("del")],e,"del",void 0),m([e.Tag("details")],e,"details",void 0),m([e.Tag("dfn")],e,"dfn",void 0),m([e.Tag("dialog")],e,"dialog",void 0),m([e.Tag("div")],e,"div",void 0),m([e.Tag("dl")],e,"dl",void 0),m([e.Tag("dt")],e,"dt",void 0),m([e.Tag("em")],e,"em",void 0),m([e.Tag("embed")],e,"embed",void 0),m([e.Tag("fieldset")],e,"fieldset",void 0),m([e.Tag("figcaption")],e,"figcaption",void 0),m([e.Tag("figure")],e,"figure",void 0),m([e.Tag("footer")],e,"footer",void 0),m([e.Tag("form")],e,"form",void 0),m([e.Tag("h1")],e,"h1",void 0),m([e.Tag("h2")],e,"h2",void 0),m([e.Tag("h3")],e,"h3",void 0),m([e.Tag("h4")],e,"h4",void 0),m([e.Tag("h5")],e,"h5",void 0),m([e.Tag("h6")],e,"h6",void 0),m([e.Tag("head")],e,"head",void 0),m([e.Tag("header")],e,"header",void 0),m([e.Tag("hr")],e,"hr",void 0),m([e.Tag("html")],e,"html",void 0),m([e.Tag("i")],e,"i",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("img")],e,"img",void 0),m([e.Tag("input")],e,"input",void 0),m([e.Tag("ins")],e,"ins",void 0),m([e.Tag("kbd")],e,"kbd",void 0),m([e.Tag("label")],e,"label",void 0),m([e.Tag("legend")],e,"legend",void 0),m([e.Tag("li")],e,"li",void 0),m([e.Tag("link")],e,"link",void 0),m([e.Tag("main")],e,"main",void 0),m([e.Tag("map")],e,"map",void 0),m([e.Tag("mark")],e,"mark",void 0),m([e.Tag("meta")],e,"meta",void 0),m([e.Tag("meter")],e,"meter",void 0),m([e.Tag("nav")],e,"nav",void 0),m([e.Tag("noscript")],e,"noscript",void 0),m([e.Tag("object")],e,"object",void 0),m([e.Tag("ol")],e,"ol",void 0),m([e.Tag("optgroup")],e,"optgroup",void 0),m([e.Tag("option")],e,"option",void 0),m([e.Tag("output")],e,"output",void 0),m([e.Tag("p")],e,"p",void 0),m([e.Tag("param")],e,"param",void 0),m([e.Tag("picture")],e,"picture",void 0),m([e.Tag("pre")],e,"pre",void 0),m([e.Tag("progress")],e,"progress",void 0),m([e.Tag("q")],e,"q",void 0),m([e.Tag("rb")],e,"rb",void 0),m([e.Tag("rp")],e,"rp",void 0),m([e.Tag("rt")],e,"rt",void 0),m([e.Tag("rtc")],e,"rtc",void 0),m([e.Tag("ruby")],e,"ruby",void 0),m([e.Tag("s")],e,"s",void 0),m([e.Tag("samp")],e,"samp",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("section")],e,"section",void 0),m([e.Tag("select")],e,"select",void 0),m([e.Tag("small")],e,"small",void 0),m([e.Tag("slot")],e,"slot",void 0),m([e.Tag("source")],e,"source",void 0),m([e.Tag("span")],e,"span",void 0),m([e.Tag("strong")],e,"strong",void 0),m([e.Tag("sub")],e,"sub",void 0),m([e.Tag("summary")],e,"summary",void 0),m([e.Tag("sup")],e,"sup",void 0),m([e.Tag("table")],e,"table",void 0),m([e.Tag("tbody")],e,"tbody",void 0),m([e.Tag("td")],e,"td",void 0),m([e.Tag("template")],e,"template",void 0),m([e.Tag("textarea")],e,"textarea",void 0),m([e.Tag("tfoot")],e,"tfoot",void 0),m([e.Tag("th")],e,"th",void 0),m([e.Tag("thead")],e,"thead",void 0),m([e.Tag("time")],e,"time",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tr")],e,"tr",void 0),m([e.Tag("track")],e,"track",void 0),m([e.Tag("u")],e,"u",void 0),m([e.Tag("ul")],e,"ul",void 0),m([e.Tag("var")],e,"var",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("wbr")],e,"wbr",void 0),e}(Gn);gn.define(Zn.prototype);var _n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Kn),Qn=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"sheet",{value:null,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.createSheet=function(){var t=this.node.sheet;return null!==t?new kn(this,t):null},e.prototype.hasCssRule=function(t){var e=this.sheet;return null!==e&&e.hasCssRule(t)},e.prototype.getCssRule=function(t){var e=this.sheet;return null!==e?e.getCssRule(t):null},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.sheet;null!==n&&n.applyTheme(e,i,o)},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.createSheet();Object.defineProperty(this,"sheet",{value:e,enumerable:!0,configurable:!0}),null!==e&&e.mount()},e.prototype.onUnmount=function(){var e=this.sheet;null!==e&&e.unmount(),Object.defineProperty(this,"sheet",{value:null,enumerable:!0,configurable:!0}),t.prototype.onUnmount.call(this)},e.tag="style",e}(Zn);Zn.Tag("style")(Qn,"style");var Jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),$n=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.alignmentBaseline&&this.alignmentBaseline(t.alignmentBaseline),void 0!==t.clipPath&&this.clipPath(t.clipPath),void 0!==t.cursor&&this.cursor(t.cursor),void 0!==t.cx&&this.cx(t.cx),void 0!==t.cy&&this.cy(t.cy),void 0!==t.cy&&this.cy(t.cy),void 0!==t.d&&this.d(t.d),void 0!==t.dx&&this.dx(t.dx),void 0!==t.dy&&this.dy(t.dy),void 0!==t.edgeMode&&this.edgeMode(t.edgeMode),void 0!==t.fill&&this.fill(t.fill),void 0!==t.fillRule&&this.fillRule(t.fillRule),void 0!==t.floodColor&&this.floodColor(t.floodColor),void 0!==t.floodOpacity&&this.floodOpacity(t.floodOpacity),void 0!==t.height&&this.height(t.height),void 0!==t.in&&this.in(t.in),void 0!==t.in2&&this.in2(t.in2),void 0!==t.lengthAdjust&&this.lengthAdjust(t.lengthAdjust),void 0!==t.mode&&this.mode(t.mode),void 0!==t.opacity&&this.opacity(t.opacity),void 0!==t.pointerEvents&&this.pointerEvents(t.pointerEvents),void 0!==t.points&&this.points(t.points),void 0!==t.preserveAspectRatio&&this.preserveAspectRatio(t.preserveAspectRatio),void 0!==t.r&&this.r(t.r),void 0!==t.result&&this.result(t.result),void 0!==t.stdDeviation&&this.stdDeviation(t.stdDeviation),void 0!==t.stroke&&this.stroke(t.stroke),void 0!==t.strokeDasharray&&this.strokeDasharray(t.strokeDasharray),void 0!==t.strokeLinecap&&this.strokeLinecap(t.strokeLinecap),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth),void 0!==t.textAnchor&&this.textAnchor(t.textAnchor),void 0!==t.textLength&&this.textLength(t.textLength),void 0!==t.transform&&this.transform(t.transform),void 0!==t.type&&this.type(t.type),void 0!==t.values&&this.values(t.values),void 0!==t.viewBox&&this.viewBox(t.viewBox),void 0!==t.width&&this.width(t.width),void 0!==t.x&&this.x(t.x),void 0!==t.x1&&this.x1(t.x1),void 0!==t.x2&&this.x2(t.x2),void 0!==t.y&&this.y(t.y),void 0!==t.y1&&this.y1(t.y1),void 0!==t.y2&&this.y2(t.y2)},e.prototype.initStyle=function(t){void 0!==t.cssTransform&&this.cssTransform(t.cssTransform),void 0!==t.filter&&this.filter(t.filter),void 0!==t.fontFamily&&this.fontFamily(t.fontFamily),void 0!==t.fontSize&&this.fontSize(t.fontSize),void 0!==t.fontStretch&&this.fontStretch(t.fontStretch),void 0!==t.fontStyle&&this.fontStyle(t.fontStyle),void 0!==t.fontVariant&&this.fontVariant(t.fontVariant),void 0!==t.fontWeight&&this.fontWeight(t.fontWeight),void 0!==t.lineHeight&&this.lineHeight(t.lineHeight),void 0!==t.touchAction&&this.touchAction(t.touchAction)},e.prototype.append=function(t,i){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;return null!==t?t:r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.prototype.font=function(t,e){if(void 0===t){var i=this.fontStyle.value,o=this.fontVariant.value,n=this.fontWeight.value,r=this.fontStretch.value,a=this.fontSize.value,s=this.lineHeight.value,l=this.fontFamily.value;return void 0!==l?gt.create(i,o,n,r,a,s,l):null}return null!==t?(void 0!==(t=gt.fromAny(t)).style&&this.fontStyle.setState(t.style,e),void 0!==t.variant&&this.fontVariant.setState(t.variant,e),void 0!==t.weight&&this.fontWeight.setState(t.weight,e),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e),void 0!==t.size&&this.fontSize.setState(t.size,e),void 0!==t.height&&this.lineHeight.setState(t.height,e),this.fontFamily.setState(t.family,e)):(this.fontStyle.setState(void 0,e),this.fontVariant.setState(void 0,e),this.fontWeight.setState(void 0,e),this.fontStretch.setState(void 0,e),this.fontSize.setState(null,e),this.lineHeight.setState(null,e),this.fontFamily.setState(void 0,e)),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElementNS(e.namespace,t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof SVGElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in Gn.tags||(Gn.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="svg",e.namespace="http://www.w3.org/2000/svg",m([Nn({attributeName:"alignment-baseline",type:String})],e.prototype,"alignmentBaseline",void 0),m([Nn({attributeName:"clip-path",type:String})],e.prototype,"clipPath",void 0),m([Nn({attributeName:"cursor",type:String})],e.prototype,"cursor",void 0),m([Nn({attributeName:"cx",type:Number})],e.prototype,"cx",void 0),m([Nn({attributeName:"cy",type:Number})],e.prototype,"cy",void 0),m([Nn({attributeName:"d",type:String})],e.prototype,"d",void 0),m([Nn({attributeName:"dx",type:r.Length,state:null})],e.prototype,"dx",void 0),m([Nn({attributeName:"dy",type:r.Length,state:null})],e.prototype,"dy",void 0),m([Nn({attributeName:"edgeMode",type:String})],e.prototype,"edgeMode",void 0),m([Nn({attributeName:"fill",type:St,state:null})],e.prototype,"fill",void 0),m([Nn({attributeName:"fill-rule",type:String})],e.prototype,"fillRule",void 0),m([Nn({attributeName:"flood-color",type:St,state:null})],e.prototype,"floodColor",void 0),m([Nn({attributeName:"flood-opacity",type:Number})],e.prototype,"floodOpacity",void 0),m([Nn({attributeName:"height",type:r.Length,state:null})],e.prototype,"height",void 0),m([Nn({attributeName:"in",type:String})],e.prototype,"in",void 0),m([Nn({attributeName:"in2",type:String})],e.prototype,"in2",void 0),m([Nn({attributeName:"lengthAdjust",type:String})],e.prototype,"lengthAdjust",void 0),m([Nn({attributeName:"mode",type:String})],e.prototype,"mode",void 0),m([Nn({attributeName:"opacity",type:Number})],e.prototype,"opacity",void 0),m([Nn({attributeName:"pointer-events",type:String})],e.prototype,"pointerEvents",void 0),m([Nn({attributeName:"points",type:String})],e.prototype,"points",void 0),m([Nn({attributeName:"preserveAspectRatio",type:Boolean})],e.prototype,"preserveAspectRatio",void 0),m([Nn({attributeName:"r",type:Number})],e.prototype,"r",void 0),m([Nn({attributeName:"result",type:String})],e.prototype,"result",void 0),m([Nn({attributeName:"stdDeviation",type:Number})],e.prototype,"stdDeviation",void 0),m([Nn({attributeName:"stroke",type:St,state:null})],e.prototype,"stroke",void 0),m([Nn({attributeName:"stroke-dasharray",type:String})],e.prototype,"strokeDasharray",void 0),m([Nn({attributeName:"stroke-linecap",type:String})],e.prototype,"strokeLinecap",void 0),m([Nn({attributeName:"stroke-width",type:Number})],e.prototype,"strokeWidth",void 0),m([Nn({attributeName:"text-anchor",type:String})],e.prototype,"textAnchor",void 0),m([Nn({attributeName:"textLength",type:r.Length,state:null})],e.prototype,"textLength",void 0),m([Nn({attributeName:"transform",type:r.Transform,state:null})],e.prototype,"transform",void 0),m([Nn({attributeName:"type",type:String})],e.prototype,"type",void 0),m([Nn({attributeName:"values",type:String})],e.prototype,"values",void 0),m([Nn({attributeName:"viewBox",type:String})],e.prototype,"viewBox",void 0),m([Nn({attributeName:"width",type:r.Length,state:null})],e.prototype,"width",void 0),m([Nn({attributeName:"x",type:Number})],e.prototype,"x",void 0),m([Nn({attributeName:"x1",type:Number})],e.prototype,"x1",void 0),m([Nn({attributeName:"x2",type:Number})],e.prototype,"x2",void 0),m([Nn({attributeName:"y",type:Number})],e.prototype,"y",void 0),m([Nn({attributeName:"y1",type:Number})],e.prototype,"y1",void 0),m([Nn({attributeName:"y2",type:Number})],e.prototype,"y2",void 0),m([nn({propertyNames:"transform",type:r.Transform,state:null})],e.prototype,"cssTransform",void 0),m([nn({propertyNames:"filter",type:String})],e.prototype,"filter",void 0),m([nn({propertyNames:"font-family",type:vt})],e.prototype,"fontFamily",void 0),m([nn({propertyNames:"font-size",type:r.Length,state:null})],e.prototype,"fontSize",void 0),m([nn({propertyNames:"font-stretch",type:String})],e.prototype,"fontStretch",void 0),m([nn({propertyNames:"font-style",type:String})],e.prototype,"fontStyle",void 0),m([nn({propertyNames:"font-variant",type:String})],e.prototype,"fontVariant",void 0),m([nn({propertyNames:"font-weight",type:String})],e.prototype,"fontWeight",void 0),m([nn({propertyNames:"line-height",type:r.Length,state:null})],e.prototype,"lineHeight",void 0),m([nn({propertyNames:"touch-action",type:String})],e.prototype,"touchAction",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("animate")],e,"animate",void 0),m([e.Tag("animateMotion")],e,"animateMotion",void 0),m([e.Tag("animateTransform")],e,"animateTransform",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("canvas")],e,"canvas",void 0),m([e.Tag("circle")],e,"circle",void 0),m([e.Tag("clipPath")],e,"clipPath",void 0),m([e.Tag("defs")],e,"defs",void 0),m([e.Tag("desc")],e,"desc",void 0),m([e.Tag("discard")],e,"discard",void 0),m([e.Tag("ellipse")],e,"ellipse",void 0),m([e.Tag("feBlend")],e,"feBlend",void 0),m([e.Tag("feColorMatrix")],e,"feColorMatrix",void 0),m([e.Tag("feComponentTransfer")],e,"feComponentTransfer",void 0),m([e.Tag("feComposite")],e,"feComposite",void 0),m([e.Tag("feConvolveMatrix")],e,"feConvolveMatrix",void 0),m([e.Tag("feDiffuseLighting")],e,"feDiffuseLighting",void 0),m([e.Tag("feDisplacementMap")],e,"feDisplacementMap",void 0),m([e.Tag("feDistantLight")],e,"feDistantLight",void 0),m([e.Tag("feDropShadow")],e,"feDropShadow",void 0),m([e.Tag("feFlood")],e,"feFlood",void 0),m([e.Tag("feFuncA")],e,"feFuncA",void 0),m([e.Tag("feFuncB")],e,"feFuncB",void 0),m([e.Tag("feFuncG")],e,"feFuncG",void 0),m([e.Tag("feFuncR")],e,"feFuncR",void 0),m([e.Tag("feGaussianBlur")],e,"feGaussianBlur",void 0),m([e.Tag("feImage")],e,"feImage",void 0),m([e.Tag("feMerge")],e,"feMerge",void 0),m([e.Tag("feMergeNode")],e,"feMergeNode",void 0),m([e.Tag("feMorphology")],e,"feMorphology",void 0),m([e.Tag("feOffset")],e,"feOffset",void 0),m([e.Tag("fePointLight")],e,"fePointLight",void 0),m([e.Tag("feSpecularLighting")],e,"feSpecularLighting",void 0),m([e.Tag("feSpotLight")],e,"feSpotLight",void 0),m([e.Tag("feTile")],e,"feTile",void 0),m([e.Tag("feTurbulence")],e,"feTurbulence",void 0),m([e.Tag("filter")],e,"filter",void 0),m([e.Tag("foreignObject")],e,"foreignObject",void 0),m([e.Tag("g")],e,"g",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("image")],e,"image",void 0),m([e.Tag("line")],e,"line",void 0),m([e.Tag("linearGradient")],e,"linearGradient",void 0),m([e.Tag("marker")],e,"marker",void 0),m([e.Tag("mask")],e,"mask",void 0),m([e.Tag("metadata")],e,"metadata",void 0),m([e.Tag("mpath")],e,"mpath",void 0),m([e.Tag("path")],e,"path",void 0),m([e.Tag("pattern")],e,"pattern",void 0),m([e.Tag("polygon")],e,"polygon",void 0),m([e.Tag("polyline")],e,"polyline",void 0),m([e.Tag("radialGradient")],e,"radialGradient",void 0),m([e.Tag("rect")],e,"rect",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("set")],e,"set",void 0),m([e.Tag("stop")],e,"stop",void 0),m([e.Tag("style")],e,"style",void 0),m([e.Tag("svg")],e,"svg",void 0),m([e.Tag("switch")],e,"switch",void 0),m([e.Tag("symbol")],e,"symbol",void 0),m([e.Tag("text")],e,"text",void 0),m([e.Tag("textPath")],e,"textPath",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tspan")],e,"tspan",void 0),m([e.Tag("unknown")],e,"unknown",void 0),m([e.Tag("use")],e,"use",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("view")],e,"view",void 0),e}(Gn),tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Kn),er=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),e instanceof Gn&&e.node.hasAttribute("swim-app")&&(this.materializeViewController(e),this.materializeView(e))},i.prototype.materializeView=function(t){for(var e=t.node.childNodes,i=0;i<e.length;i+=1){var o=e[i],n=this.materializeNode(t,o);null!==n&&this.materializeView(n)}},i.prototype.materializeNode=function(t,e){return void 0!==e.view?e.view:e instanceof Element?this.materializeElement(t,e):e instanceof Text?this.materializeText(t,e):null},i.prototype.materializeElement=function(t,e){var o,n=e.getAttribute("swim-view");if(null!==n&&"function"!=typeof(o=i.eval(n)))throw new TypeError(n);void 0===o&&(o=e instanceof HTMLElement?Zn:e instanceof SVGElement?$n:Gn);var r=new o(e);this.materializeViewController(r);var a=e.getAttribute("key");return t.injectChildView(r,null,null!==a?a:void 0),r},i.prototype.materializeText=function(t,e){return null},i.prototype.materializeViewController=function(t){var e=t.node.getAttribute("swim-controller");if(null!==e){var o=i.eval(e);if("function"!=typeof o)throw new TypeError(e);var n=new o;t.setViewController(n)}},i.global=function(){return new i},i.boot=function(){for(var t=[],e=document.querySelectorAll("[swim-app]"),o=0;o<e.length;o+=1){var n=e[o];if(n instanceof HTMLElement){var r=i.bootElement(n);t.push(r)}}return t},i.bootElement=function(t){var e,o=t.getAttribute("swim-app");if(null!==o&&""!==o&&"function"!=typeof(e=i.eval(o)))throw new TypeError(o);void 0===e&&(e=t instanceof HTMLElement?Zn:t instanceof SVGElement?$n:Gn);var n=new e(t);if(e.mount(n),void 0===n.domService)throw new Error("DomService not available");return n},i.eval=function(t){for(var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,i=t.split("."),o=0,n=i.length;"object"==typeof e&&null!==e&&o<n;o+=1){e=e[i[o]]}return e},m([e.Lazy],i,"global",null),i}(Zi),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return er.global()},e}(no);io({extends:ir,type:er,observe:!1})(jn.prototype,"domService");var or=function(){},nr=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"parentView",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"ownViewFrame",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"eventHandlers",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"hoverSet",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.mood&&this.mood(e.mood),void 0!==e.moodModifier&&this.moodModifier(e.moodModifier),void 0!==e.theme&&this.theme(e.theme),void 0!==e.themeModifier&&this.themeModifier(e.themeModifier),void 0!==e.hidden&&this.setHidden(e.hidden)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.willObserve=function(t){var e,i=this.viewController;if(null!==i&&void 0!==(e=t.call(this,i)))return e;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];if(void 0!==(e=t.call(this,a)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}var a=this.viewController;return null!==a&&(e=t.call(this,a)),e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),Object.defineProperty(this,"parentView",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.parentView;null!==t&&(0==(this.viewFlags&Gi.TraversingFlag)?t.removeChildView(this):this.setViewFlags(this.viewFlags|Gi.RemovingFlag))},i.prototype.append=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.appendChildView(t,e),t},i.prototype.prepend=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.prependChildView(t,e),t},i.prototype.insert=function(t,e,o){return"function"==typeof t&&(t=i.fromConstructor(t)),this.insertChildView(t,e,o),t},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i)},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Gi.MountedFlag|Gi.PoweredFlag))==(Gi.MountedFlag|Gi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Gi.UpdateMask)&Gi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeViewFastener(e)},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&Gi.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|Gi.MountedFlag|Gi.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners(),this.mountTheme()},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.doMountChildViews=function(){this.forEachChildView((function(t){t.cascadeMount(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&Gi.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~Gi.MountedFlag|Gi.TraversingFlag);try{this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~Gi.ViewFlagMask|Gi.RemovingFlag))},i.prototype.doUnmountChildViews=function(){this.forEachChildView((function(t){t.cascadeUnmount(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&Gi.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|Gi.PoweredFlag|Gi.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doPowerChildViews=function(){this.forEachChildView((function(t){t.cascadePower(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&Gi.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~Gi.PoweredFlag|Gi.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doUnpowerChildViews=function(){this.forEachChildView((function(t){t.cascadeUnpower(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&Gi.CulledFlag)?(this.setViewFlags(e|Gi.CulledFlag),0==(e&Gi.CullFlag)&&this.doCull()):t||0==(e&Gi.CulledFlag)||(this.setViewFlags(e&~Gi.CulledFlag),0==(e&Gi.CullFlag)&&this.doUncull())},i.prototype.cascadeCull=function(){0==(this.viewFlags&Gi.CullFlag)&&(this.setViewFlags(this.viewFlags|Gi.CullFlag),0==(this.viewFlags&Gi.CulledFlag)&&this.doCull())},i.prototype.doCull=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willCull(),this.onCull(),this.doCullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doCullChildViews=function(){this.forEachChildView((function(t){t.cascadeCull(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&Gi.CullFlag)&&(this.setViewFlags(this.viewFlags&~Gi.CullFlag),0==(this.viewFlags&Gi.CulledFlag)&&this.doUncull())},i.prototype.doUncull=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willUncull(),this.doUncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doUncullChildViews=function(){this.forEachChildView((function(t){t.cascadeUncull(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},i.prototype.cullViewFrame=function(t){void 0===t&&(t=this.viewFrame),this.setCulled(!t.intersects(this.viewBounds))},Object.defineProperty(i.prototype,"renderer",{get:function(){var t=this.parentView;return t instanceof i||t instanceof cr?t.renderer:null},enumerable:!1,configurable:!0}),i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&Gi.NeedsAnimate)&&(t&=~Gi.NeedsAnimate),t},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);t&=~Gi.NeedsProcess,t|=this.viewFlags&Gi.UpdateMask,0!=((t=this.needsProcess(t,i))&Gi.ProcessMask)&&this.doProcess(t,i)},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Gi.NeedsProcess|Gi.NeedsProject)|Gi.TraversingFlag|Gi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Gi.NeedsResize)&&(i|=Gi.NeedsResize,this.setViewFlags(this.viewFlags&~Gi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Gi.NeedsScroll)&&(i|=Gi.NeedsScroll,this.setViewFlags(this.viewFlags&~Gi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Gi.NeedsChange)&&(i|=Gi.NeedsChange,this.setViewFlags(this.viewFlags&~Gi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Gi.NeedsAnimate)&&(i|=Gi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Gi.NeedsAnimate),this.willAnimate(e)),this.onProcess(i,e),0!=(i&Gi.NeedsResize)&&this.onResize(e),0!=(i&Gi.NeedsScroll)&&this.onScroll(e),0!=(i&Gi.NeedsChange)&&this.onChange(e),0!=(i&Gi.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&Gi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Gi.NeedsChange)&&this.didChange(e),0!=(i&Gi.NeedsScroll)&&this.didScroll(e),0!=(i&Gi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.ProcessingFlag))}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties(),this.updateTheme()},i.prototype.doProcessChildViews=function(t,e){0!=(t&Gi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);t&=~Gi.NeedsDisplay,t|=this.viewFlags&Gi.UpdateMask,0!=((t=this.needsDisplay(t,i))&Gi.DisplayMask)&&this.doDisplay(t,i)},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Gi.NeedsDisplay|Gi.TraversingFlag|Gi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Gi.NeedsLayout)&&(i|=Gi.NeedsLayout,this.setViewFlags(this.viewFlags&~Gi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Gi.NeedsRender)&&(i|=Gi.NeedsRender,this.setViewFlags(this.viewFlags&~Gi.NeedsRender),this.willRender(e)),0!=((this.viewFlags|t)&Gi.NeedsComposite)&&(i|=Gi.NeedsComposite,this.setViewFlags(this.viewFlags&~Gi.NeedsComposite),this.willComposite(e)),this.onDisplay(i,e),0!=(i&Gi.NeedsLayout)&&this.onLayout(e),0!=(i&Gi.NeedsRender)&&this.onRender(e),0!=(i&Gi.NeedsComposite)&&this.onComposite(e),this.doDisplayChildViews(i,e),0!=(i&Gi.NeedsComposite)&&this.didComposite(e),0!=(i&Gi.NeedsRender)&&this.didRender(e),0!=(i&Gi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.DisplayingFlag))}},i.prototype.willRender=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRender&&e.viewWillRender(t,this);var i=this.viewObserverCache.viewWillRenderObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRender(t,this)}},i.prototype.onRender=function(t){},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}var o=this.viewController;null!==o&&void 0!==o.viewDidRender&&o.viewDidRender(t,this)},i.prototype.willComposite=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillComposite&&e.viewWillComposite(t,this);var i=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}var o=this.viewController;null!==o&&void 0!==o.viewDidComposite&&o.viewDidComposite(t,this)},i.prototype.doDisplayChildViews=function(t,e){0==(t&Gi.DisplayMask)||this.isHidden()||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},i.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=0===e.length||Array.isArray(e[e.length-1])?void 0:e.pop(),n=e,r=this.moodModifier.getStateOr(de.empty()),a=r.updatedCol.apply(r,b([t,!0],n));if(!a.equals(r))if(this.moodModifier.setState(a),this.changeMood(),void 0!==o){var l=this.theme.state,u=this.mood.state;null!==l&&null!==u&&(o=!0===o?l.getOr(Qt.timing,u,!1):s.Timing.fromAny(o),this.applyTheme(l,u,o))}else this.requireUpdate(Gi.NeedsChange)},i.prototype.modifyTheme=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=0===e.length||Array.isArray(e[e.length-1])?void 0:e.pop(),n=e,r=this.themeModifier.getStateOr(de.empty()),a=r.updatedCol.apply(r,b([t,!0],n));if(!a.equals(r))if(this.themeModifier.setState(a),this.changeTheme(),void 0!==o){var l=this.theme.state,u=this.mood.state;null!==l&&null!==u&&(o=!0===o?l.getOr(Qt.timing,u,!1):s.Timing.fromAny(o),this.applyTheme(l,u,o))}else this.requireUpdate(Gi.NeedsChange)},i.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.isAuto()){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setAutoState(n)}}else this.mood.setInherited(!0)}},i.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.isAuto()){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setAutoState(n)}}else this.theme.setInherited(!0)}},i.prototype.updateTheme=function(){this.changeMood(),this.changeTheme();var t=this.theme.state,e=this.mood.state;null!==t&&null!==e&&this.applyTheme(t,e)},i.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.themeViewAnimators(e,i,o)},i.prototype.mountTheme=function(){},i.prototype.isHidden=function(){return 0!=(this.viewFlags&Gi.HiddenMask)},i.prototype.setHidden=function(t){var e=this.viewFlags;t&&0==(e&Gi.HiddenFlag)?(this.setViewFlags(e|Gi.HiddenFlag),0==(e&Gi.HideFlag)&&this.doHide()):t||0==(e&Gi.HiddenFlag)||(this.setViewFlags(e&~Gi.HiddenFlag),0==(e&Gi.HideFlag)&&this.doUnhide())},i.prototype.cascadeHide=function(){0==(this.viewFlags&Gi.HideFlag)&&(this.setViewFlags(this.viewFlags|Gi.HideFlag),0==(this.viewFlags&Gi.HiddenFlag)&&this.doHide())},i.prototype.doHide=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willSetHidden(!0),this.onSetHidden(!0),this.doHideChildViews(),this.didSetHidden(!0)}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doHideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeHide(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.cascadeUnhide=function(){0!=(this.viewFlags&Gi.HideFlag)&&(this.setViewFlags(this.viewFlags&~Gi.HideFlag),0==(this.viewFlags&Gi.HiddenFlag)&&this.doUnhide())},i.prototype.doUnhide=function(){this.setViewFlags(this.viewFlags|Gi.TraversingFlag);try{this.willSetHidden(!1),this.doUnhideChildViews(),this.onSetHidden(!1),this.didSetHidden(!1)}finally{this.setViewFlags(this.viewFlags&~Gi.TraversingFlag)}},i.prototype.doUnhideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeUnhide(),0!=(t.viewFlags&Gi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Gi.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.willSetHidden=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetHidden&&r.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(Gi.NeedsRender)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidSetHidden&&r.viewDidSetHidden(t,this)},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},Object.defineProperty(this,"viewServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},Object.defineProperty(this,"viewProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},Object.defineProperty(this,"viewAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},Object.defineProperty(this,"viewFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"viewFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof i||e instanceof cr?e.viewFrame:r.BoxR2.undefined()}return t},enumerable:!1,configurable:!0}),i.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(i.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ownViewBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.deriveViewBounds=function(){var t=this.ownViewBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.viewBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.viewFrame),t},Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),i.prototype.deriveHitBounds=function(){var t;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.hitBounds;t=void 0===t?o:t.union(o)}}),this),void 0===t&&(t=this.viewBounds),t},i.prototype.hitTest=function(t,e,i){if(this.isHidden()||this.isCulled())return null;var o=this.extendViewContext(i);return this.doHitTest(t,e,o)},i.prototype.doHitTest=function(t,e,o){return this.forEachChildView((function(n){if(n instanceof i&&!n.isHidden()&&!n.isCulled()&&n.hitBounds.contains(t,e)){var r=n.hitTest(t,e,o);if(null!==r)return r}}),this)||null},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=this.clientTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),i.prototype.on=function(t,e,i){var o=this.eventHandlers;null===o&&(o={},Object.defineProperty(this,"eventHandlers",{value:o,enumerable:!0,configurable:!0}));var n,r=o[t],a="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,s=i&&"object"==typeof i&&i.passive||!1,l=i&&"object"==typeof i&&i.once||!1;if(void 0===r)r=[n={listener:e,capture:a,passive:s,once:l}],o[t]=r;else{for(var u=r.length,h=0;h<u&&((n=r[h]).listener!==e||n.capture!==a);)h+=1;h<u?(n.passive=s,n.once=l):(n={listener:e,capture:a,passive:s,once:l},r.push(n))}return this},i.prototype.off=function(t,e,i){var o=this.eventHandlers;if(null!==o){var n=o[t];if(void 0!==n)for(var r="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,a=n.length,s=0;s<a;){var l=n[s];if(l.listener===e&&l.capture===r){n.splice(s,1),0===n.length&&delete o[t];break}s+=1}}return this},i.prototype.handleEvent=function(t){var e=t.type,i=this.eventHandlers;if(null!==i){var o=i[e];if(void 0!==o){for(var n=0;n<o.length;){var r=o[n];if(!r.capture){var a=r.listener;if("function"==typeof a?a(t):"object"==typeof a&&null!==a&&a.handleEvent(t),r.once){o.splice(n,1);continue}}n+=1}0===o.length&&delete i[e]}}"mouseover"===e?this.onMouseOver(t):"mouseout"===e?this.onMouseOut(t):"pointerover"===e?this.onPointerOver(t):"pointerout"===e&&this.onPointerOut(t)},i.prototype.bubbleEvent=function(t){var e;if(this.handleEvent(t),t.bubbles&&!t.cancelBubble){var o=this.parentView;e=o instanceof i||o instanceof cr?o.bubbleEvent(t):o}else e=null;return e},i.prototype.dispatchEvent=function(t){t.targetView=this;var e=this.bubbleEvent(t);return null!==e?e.dispatchEvent(t):!t.cancelBubble},i.prototype.isHovering=function(){var t=this.hoverSet;return null!==t&&0!==Object.keys(t).length},i.prototype.onMouseOver=function(t){var e=this.hoverSet;if(null===e&&(e={},Object.defineProperty(this,"hoverSet",{value:e,enumerable:!0,configurable:!0})),void 0===e.mouse){e.mouse=null;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseenter){var o=new MouseEvent("mouseenter",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onMouseOut=function(t){var e=this.hoverSet;if(null!==e&&void 0!==e.mouse){delete e.mouse;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseleave){var o=new MouseEvent("mouseleave",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onPointerOver=function(t){var e=this.hoverSet;null===e&&(e={},Object.defineProperty(this,"hoverSet",{value:e,enumerable:!0,configurable:!0}));var i=""+t.pointerId;if(void 0===e[i]){e[i]=null;var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerenter){var n=new PointerEvent("pointerenter",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}},i.prototype.onPointerOut=function(t){var e=this.hoverSet;if(null!==e){var i=""+t.pointerId;if(void 0!==e[i]){delete e[i];var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerleave){var n=new PointerEvent("pointerleave",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}}},i.fromConstructor=function(t){if(t.prototype instanceof Gi)return new t;throw new TypeError(""+t)},i.uncullFlags=Gi.uncullFlags|Gi.NeedsRender,i.insertChildFlags=Gi.insertChildFlags|Gi.NeedsRender,i.removeChildFlags=Gi.removeChildFlags|Gi.NeedsRender,m([ho({type:de,state:null})],i.prototype,"moodModifier",void 0),m([ho({type:de,state:null})],i.prototype,"themeModifier",void 0),i}(Gi),rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.isHidden=function(){var t=this.view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this.view;return null!==t?t.viewFrame:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.view;return null!==t?t.viewBounds:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.view;return null!==t?t.hitBounds:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),e}(Ki),ar=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childViews",{value:[],enumerable:!0}),Object.defineProperty(e,"childViewMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof nr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof nr))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof nr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.doMountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doPowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.deriveViewBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.viewBounds;r.isDefined()&&(t=void 0!==t?t.union(r):r)}}return void 0===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.childViews,r=n.length-1;r>=0;r-=1){var a=n[r];if(a instanceof nr&&!a.isHidden()&&!a.isCulled())if(a.hitBounds.contains(t,e)&&null!==(o=a.hitTest(t,e,i)))break}return o},e.create=function(){return new e},e}(nr),sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(or),lr=function(){function t(){Object.defineProperty(this,"precision",{value:-1,enumerable:!0,configurable:!0}),this.x0=NaN,this.y0=NaN,this.x1=NaN,this.y1=NaN,this.d=""}return t.prototype.setPrecision=function(t){Object.defineProperty(this,"precision",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(t.prototype,"anglePrecision",{get:function(){var t=this.precision;return t>0?Math.max(5,t):t},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(t,e){this.d+="M"+a.Format.decimal(t,this.precision)+","+a.Format.decimal(e,this.precision),this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.lineTo=function(t,e){this.d+="L"+a.Format.decimal(t,this.precision)+","+a.Format.decimal(e,this.precision),this.x1=t,this.y1=e},t.prototype.quadraticCurveTo=function(t,e,i,o){this.d+="Q"+a.Format.decimal(t,this.precision)+","+a.Format.decimal(e,this.precision)+","+a.Format.decimal(i,this.precision)+","+a.Format.decimal(o,this.precision),this.x1=i,this.y1=o},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.d+="C"+a.Format.decimal(t,this.precision)+","+a.Format.decimal(e,this.precision)+","+a.Format.decimal(i,this.precision)+","+a.Format.decimal(o,this.precision)+","+a.Format.decimal(n,this.precision)+","+a.Format.decimal(r,this.precision),this.x1=n,this.y1=r},t.prototype.arcTo=function(e,i,o,n,r){var s=this.x1,l=this.y1,u=o-e,h=n-i,p=s-e,d=l-i,c=p*p+d*d;if(r<0)throw new Error("negative radius: "+r);if(isNaN(this.x1))this.d+="M"+a.Format.decimal(e,this.precision)+","+a.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else if(c>t.Epsilon)if(Math.abs(d*u-h*p)>t.Epsilon&&0!==r){var f=o-s,v=n-l,y=u*u+h*h,g=f*f+v*v,w=Math.sqrt(y),m=Math.sqrt(c),b=r*Math.tan((Math.PI-Math.acos((y+c-g)/(2*w*m)))/2),S=b/m,C=b/w;Math.abs(S-1)>t.Epsilon&&(this.d+="L"+a.Format.decimal(e+S*p,this.precision)+","+a.Format.decimal(i+S*d,this.precision)),e+=C*u,i+=C*h;var P=a.Format.decimal(r,this.precision);this.d+="A"+P+","+P+",0,0,"+(d*f>p*v?"1":"0")+","+a.Format.decimal(e,this.precision)+","+a.Format.decimal(i,this.precision),this.x1=e,this.y1=i}else this.d+="L"+a.Format.decimal(e,this.precision)+","+a.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else;},t.prototype.arc=function(e,i,o,n,r,s){void 0===s&&(s=!1);var l=o*Math.cos(n),u=o*Math.sin(n),h=e+l,p=i+u,d=1^+s,c=s?n-r:r-n;if(o<0)throw new Error("negative radius: "+o);if(isNaN(this.x1)?this.d+="M"+a.Format.decimal(h,this.precision)+","+a.Format.decimal(p,this.precision):(Math.abs(this.x1-h)>t.Epsilon||Math.abs(this.y1-p)>t.Epsilon)&&(this.d+="L"+a.Format.decimal(h,this.precision)+","+a.Format.decimal(p,this.precision)),0!==o){c<0&&(c=c%(2*Math.PI)+2*Math.PI);var f=a.Format.decimal(o,this.precision);if(c>2*Math.PI-t.Epsilon)this.d+="A"+f+","+f+",0,1,"+(d?"1":"0")+","+a.Format.decimal(e-l,this.precision)+","+a.Format.decimal(i-u,this.precision),this.d+="A"+a.Format.decimal(o,this.precision)+","+a.Format.decimal(o,this.precision)+",0,1,"+(d?"1":"0")+","+a.Format.decimal(h,this.precision)+","+a.Format.decimal(p,this.precision),this.x1=h,this.y1=p;else if(c>t.Epsilon){var v=e+o*Math.cos(r),y=i+o*Math.sin(r);this.d+="A"+f+","+f+",0,"+(c>=Math.PI?"1":"0")+","+(d?"1":"0")+","+a.Format.decimal(v,this.precision)+","+a.Format.decimal(y,this.precision),this.x1=v,this.y1=y}}},t.prototype.rect=function(t,e,i,o){this.d+="M"+a.Format.decimal(t,this.precision)+","+a.Format.decimal(e,this.precision)+"h"+a.Format.decimal(i,this.precision)+"v"+a.Format.decimal(o,this.precision)+"h"+a.Format.decimal(-i,this.precision)+"Z",this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.ellipse=function(t,e,i,o,n,r,s,l){var u=s-r;!0===l&&u>0?u-=2*Math.PI:!1===l&&u<0&&(u+=2*Math.PI);var h=Math.cos(n),p=Math.sin(n),d=Math.cos(s),c=Math.sin(s),f=h*i*d-p*o*c+t,v=p*i*d+h*o*c+e;Math.abs(u),Math.PI;this.d+="A"+a.Format.decimal(i,this.precision)+","+a.Format.decimal(o,this.precision)+","+a.Format.decimal(n,this.anglePrecision),a.Format.decimal(f,this.precision),a.Format.decimal(v,this.precision),this.x1=f,this.y1=v},t.prototype.closePath=function(){isNaN(this.x1)||(this.d+="Z",this.x1=this.x0,this.y1=this.y0)},t.prototype.toString=function(){return this.d},t.Epsilon=1e-6,t}(),ur=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"context",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(sr),hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.getLook=function(t,e){var i,o=this.theme;return null!==o&&(null==e&&(e=this.mood),null!==e&&(i=o.get(t,e))),i},e.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme;return null!==n?(null==e&&(e=this.mood),o=null!==e?n.getOr(t,e,i):i):o=i,o},e}(sr),pr=function(t){function e(e,i,o,n){var r=t.call(this)||this;return Object.defineProperty(r,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(r,"pixelRatio",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(r,"theme",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(r,"mood",{value:n,enumerable:!0,configurable:!0}),r}return w(e,t),e}(hr),dr=function(t){function e(e,i){var o=t.call(this)||this;return Object.defineProperty(o,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"pixelRatio",{value:void 0!==i?i:window.devicePixelRatio||1,enumerable:!0,configurable:!0}),o}return w(e,t),e}(or),cr=function(t){function i(e){var o=t.call(this,e)||this;return Object.defineProperty(o,"graphicsViews",{value:[],enumerable:!0}),Object.defineProperty(o,"renderer",{value:o.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewFrame",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),Object.defineProperty(o,"canvasFlags",{value:i.ClickEventsFlag,enumerable:!0,configurable:!0}),Object.defineProperty(o,"eventNode",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"mouse",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"pointers",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"touches",{value:null,enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),o.onDblClick=o.onDblClick.bind(o),o.onContextMenu=o.onContextMenu.bind(o),o.onWheel=o.onWheel.bind(o),o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initCanvas(),o}return w(i,t),i.prototype.initCanvas=function(){this.position.setAutoState("absolute")},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.renderer&&this.setRenderer(e.renderer),void 0!==e.clickEventsEnabled&&this.clickEventsEnabled(e.clickEventsEnabled),void 0!==e.wheelEventsEnabled&&this.wheelEventsEnabled(e.wheelEventsEnabled),void 0!==e.mouseEventsEnabled&&this.mouseEventsEnabled(e.mouseEventsEnabled),void 0!==e.pointerEventsEnabled&&this.pointerEventsEnabled(e.pointerEventsEnabled),void 0!==e.touchEventsEnabled&&this.touchEventsEnabled(e.touchEventsEnabled)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t+=this.graphicsViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e.push.apply(e,this.graphicsViews),e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}var n=this.graphicsViews;return 0!==n.length?n[0]:null},i.prototype.lastChildView=function(){var t=this.graphicsViews;if(0!==t.length)return t[t.length-1];for(var e=this.node.childNodes,i=e.length-1;i>=0;i-=1){var o=e[i].view;if(void 0!==o)return o}return null},i.prototype.nextChildView=function(t){var e=this.graphicsViews;if(t instanceof jn&&t.parentView===this){for(var i=t.node;;){if(null===(i=i.nextSibling))break;if(void 0!==i.view)return i.view}if(0!==e.length)return e[0]}else if(t instanceof nr){var o=e.indexOf(t);if(o>=0&&o+1<e.length)return e[o+1]}return null},i.prototype.previousChildView=function(t){var e=null;if(t instanceof nr){var i=this.graphicsViews,o=i.indexOf(t);if(o-1>=0)return i[o-1];if(0===o&&null!==(e=this.node.lastChild)&&void 0!==e.view)return e.view}else t instanceof jn&&t.parentView===this&&(e=t.node);if(null!==e)for(;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n];if(void 0!==(s=r.view)&&void 0!==(i=t.call(e,s)))break;o[n]===r&&(n+=1)}var a=this.graphicsViews;for(n=0;n<a.length;){var s=a[n];if(void 0!==(i=t.call(e,s)))break;a[n]===s&&(n+=1)}return i},i.prototype.setChildView=function(e,i){return i instanceof nr?this.setGraphicsView(e,i):t.prototype.setChildView.call(this,e,i)},i.prototype.setGraphicsView=function(t,e){var i=null,o=this.graphicsViews;null!==e&&(e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildView(t);if(r instanceof nr)n=o.indexOf(r),i=o[n+1],this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0);else if(r instanceof jn){var a=r.node,s=a.nextSibling;i=null!==s&&s.view||null,this.willRemoveChildView(r),this.willRemoveChildNode(a),r.setParentView(null,this),this.removeChildViewMap(r),this.node.removeChild(a),this.onRemoveChildNode(a),this.onRemoveChildView(r),this.didRemoveChildNode(a),this.didRemoveChildView(r),r.setKey(void 0)}else if(null!==r)throw new TypeError(""+r);return null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},i.prototype.append=function(t,e){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.appendChildView(t,e),t},i.prototype.appendChildView=function(e,i){e instanceof nr?this.appendGraphicsView(e,i):t.prototype.appendChildView.call(this,e,i)},i.prototype.appendGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.graphicsViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.prepend=function(t,e){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.prependChildView(t,e),t},i.prototype.prependChildView=function(e,i){e instanceof nr?this.prependGraphicsView(e):t.prototype.prependChildView.call(this,e)},i.prototype.prependGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.graphicsViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},i.prototype.insert=function(t,e,i){return t instanceof Node?t=jn.fromNode(t):"function"==typeof t?t=jn.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.insertChild(t,e,i),t},i.prototype.insertChildView=function(e,i,o){e instanceof nr?this.insertGraphicsView(e,i,o):t.prototype.insertChildView.call(this,e,i,o)},i.prototype.insertGraphicsView=function(t,e,i){if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.graphicsViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.removeChildView=function(e){var i;if("string"==typeof e){if(null===(i=this.getChildView(e)))return null}else i=e;if(i instanceof nr?this.removeGraphicsView(i):t.prototype.removeChildView.call(this,i),"string"==typeof e)return i},i.prototype.removeGraphicsView=function(t){if(t.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(t),t.setParentView(null,this),this.removeChildViewMap(t);var e=this.graphicsViews,i=e.indexOf(t);i>=0&&e.splice(i,1),this.onRemoveChildView(t),this.didRemoveChildView(t),t.setKey(void 0)},i.prototype.removeAll=function(){t.prototype.removeAll.call(this);for(var e=this.graphicsViews;;){var i=e.length;if(!(i>0))break;var o=e[i-1];this.willRemoveChildView(o),o.setParentView(null,this),this.removeChildViewMap(o),e.pop(),this.onRemoveChildView(o),this.didRemoveChildView(o),o.setKey(void 0)}},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),i.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},i.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.node.getContext("2d")))return new pr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.node.getContext("webgl")))return new dr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},i.prototype.setCanvasFlags=function(t){Object.defineProperty(this,"canvasFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents(this.eventNode)},i.prototype.doMountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeMount(),0==(o.viewFlags&Gi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeMount(),0==(o.viewFlags&Gi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}},i.prototype.onUnmount=function(){this.detachEvents(this.eventNode),t.prototype.onUnmount.call(this)},i.prototype.doUnmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnmount(),0==(o.viewFlags&Gi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnmount(),0==(o.viewFlags&Gi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}},i.prototype.doPowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadePower(),0==(o.viewFlags&Gi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadePower(),0==(o.viewFlags&Gi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}},i.prototype.doUnpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnpower(),0==(o.viewFlags&Gi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnpower(),0==(o.viewFlags&Gi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Gi.RemovingFlag),this.removeChildView(o))}},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Gi.MountedFlag|Gi.PoweredFlag))==(Gi.MountedFlag|Gi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Gi.UpdateMask)&Gi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},i.prototype.needsProcess=function(t,e){return 0!=(t&Gi.ProcessMask)&&this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite),t},i.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite)},i.prototype.onScroll=function(e){t.prototype.onScroll.call(this,e),this.setCulled(!this.intersectsViewport())},i.prototype.doProcessChildViews=function(t,e){0!=(t&Gi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(a=o[n].view)||(i.call(this,a,t,e),0==(a.viewFlags&Gi.RemovingFlag))?n+=1:(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}var r=this.graphicsViews;for(n=0;n<r.length;){var a=r[n];i.call(this,a,t,e),0==(a.viewFlags&Gi.RemovingFlag)?n+=1:(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}},i.prototype.needsDisplay=function(t,e){return t|=Gi.NeedsRender|Gi.NeedsComposite},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Gi.NeedsDisplay|Gi.TraversingFlag|Gi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Gi.NeedsLayout)&&(i|=Gi.NeedsLayout,this.setViewFlags(this.viewFlags&~Gi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Gi.NeedsRender)&&(i|=Gi.NeedsRender,this.setViewFlags(this.viewFlags&~Gi.NeedsRender),this.willRender(e)),0!=((this.viewFlags|t)&Gi.NeedsComposite)&&(i|=Gi.NeedsComposite,this.setViewFlags(this.viewFlags&~Gi.NeedsComposite),this.willComposite(e)),this.onDisplay(i,e),0!=(i&Gi.NeedsLayout)&&this.onLayout(e),0!=(i&Gi.NeedsRender)&&this.onRender(e),0!=(i&Gi.NeedsComposite)&&this.onComposite(e),this.doDisplayChildViews(i,e),0!=(i&Gi.NeedsComposite)&&this.didComposite(e),0!=(i&Gi.NeedsRender)&&this.didRender(e),0!=(i&Gi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.DisplayingFlag))}},i.prototype.didDisplay=function(e,i){this.detectHitTargets(),t.prototype.didDisplay.call(this,e,i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this.node),this.resetRenderer()},i.prototype.willRender=function(t){var e=this.viewController;null!==e&&e.viewWillRender(t,this);var i=this.viewObserverCache.viewWillRenderObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRender(t,this)}},i.prototype.onRender=function(t){this.clearCanvas()},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}var o=this.viewController;null!==o&&o.viewDidRender(t,this)},i.prototype.willComposite=function(t){var e=this.viewController;null!==e&&e.viewWillComposite(t,this);var i=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}var o=this.viewController;null!==o&&o.viewDidComposite(t,this)},i.prototype.doDisplayChildViews=function(t,e){0==(t&Gi.DisplayMask)||this.isHidden()||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(a=o[n].view)||(i.call(this,a,t,e),0==(a.viewFlags&Gi.RemovingFlag))?n+=1:(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}var r=this.graphicsViews;for(n=0;n<r.length;){var a=r[n];i.call(this,a,t,e),0==(a.viewFlags&Gi.RemovingFlag)?n+=1:(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}},i.prototype.isHidden=function(){return 0!=(this.viewFlags&Gi.HiddenFlag)},i.prototype.setHidden=function(t){0!=(this.viewFlags&Gi.HiddenFlag)!==t&&(this.willSetHidden(t),t?this.setViewFlags(this.viewFlags|Gi.HiddenFlag):this.setViewFlags(this.viewFlags&~Gi.HiddenFlag),this.onSetHidden(t),this.didSetHidden(t))},i.prototype.willSetHidden=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetHidden&&r.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidSetHidden&&r.viewDidSetHidden(t,this)},i.prototype.extendViewContext=function(t){var e=Object.create(t);return e.renderer=this.renderer,e},i.prototype.setViewFrame=function(t){},Object.defineProperty(i.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(t,e,i){if(this.isHidden()||this.isCulled())return null;void 0===i&&(i=this.superViewContext);var o=this.extendViewContext(i);return this.doHitTest(t,e,o)},i.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.graphicsViews,r=n.length-1;r>=0;r-=1){var a=n[r];if(!a.isHidden()&&!a.isCulled())if(a.hitBounds.contains(t,e)&&null!==(o=a.hitTest(t,e,i)))break}return o},i.prototype.detectHitTargets=function(t){if(0!=(this.canvasFlags&i.MouseEventsFlag)){var e=this.mouse;null!==e&&(void 0===t&&(t=this.clientBounds),this.detectMouseTarget(e,this.clientBounds))}if(0!=(this.canvasFlags&i.PointerEventsFlag)){var o=this.pointers;for(var n in o){var r=o[n];void 0===t&&(t=this.clientBounds),this.detectPointerTarget(r,t)}}},i.prototype.setEventNode=function(t){null===t&&(t=this.node);var e=this.eventNode;e!==t&&(this.detachEvents(e),Object.defineProperty(this,"eventNode",{value:t,enumerable:!0,configurable:!0}),this.attachEvents(t))},i.prototype.clickEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.ClickEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.ClickEventsFlag),this.attachClickEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.ClickEventsFlag),this.detachClickEvents(this.eventNode)),this)},i.prototype.wheelEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.WheelEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.WheelEventsFlag),this.attachWheelEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.WheelEventsFlag),this.detachWheelEvents(this.eventNode)),this)},i.prototype.mouseEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.MouseEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.MouseEventsFlag),this.attachPassiveMouseEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.MouseEventsFlag),this.detachPassiveMouseEvents(this.eventNode)),this)},i.prototype.pointerEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.PointerEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.PointerEventsFlag),this.attachPassivePointerEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.PointerEventsFlag),this.detachPassivePointerEvents(this.eventNode)),this)},i.prototype.touchEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.TouchEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.TouchEventsFlag),this.attachPassiveTouchEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.TouchEventsFlag),this.detachPassiveTouchEvents(this.eventNode)),this)},i.prototype.handleEvent=function(t){},i.prototype.bubbleEvent=function(t){return this.handleEvent(t),this},i.prototype.attachEvents=function(t){0!=(this.canvasFlags&i.ClickEventsFlag)&&this.attachClickEvents(t),0!=(this.canvasFlags&i.WheelEventsFlag)&&this.attachWheelEvents(t),0!=(this.canvasFlags&i.MouseEventsFlag)&&this.attachPassiveMouseEvents(t),0!=(this.canvasFlags&i.PointerEventsFlag)&&this.attachPassivePointerEvents(t),0!=(this.canvasFlags&i.TouchEventsFlag)&&this.attachPassiveTouchEvents(t)},i.prototype.detachEvents=function(t){this.detachClickEvents(t),this.detachWheelEvents(t),this.detachPassiveMouseEvents(t),this.detachActiveMouseEvents(t),this.detachPassivePointerEvents(t),this.detachActivePointerEvents(t),this.detachPassiveTouchEvents(t),this.detachActiveTouchEvents(t)},i.prototype.fireEvent=function(t,e,i){var o=this.clientBounds;if(o.contains(e,i)){var n=e-o.x,r=i-o.y,a=this.hitTest(n,r);if(null!==a)return t.targetView=a,a.bubbleEvent(t),a}return null},i.prototype.attachClickEvents=function(t){t.addEventListener("click",this.onClick),t.addEventListener("dblclick",this.onDblClick),t.addEventListener("contextmenu",this.onContextMenu)},i.prototype.detachClickEvents=function(t){t.removeEventListener("click",this.onClick),t.removeEventListener("dblclick",this.onDblClick),t.removeEventListener("contextmenu",this.onContextMenu)},i.prototype.attachWheelEvents=function(t){t.addEventListener("wheel",this.onWheel)},i.prototype.detachWheelEvents=function(t){t.removeEventListener("wheel",this.onWheel)},i.prototype.attachPassiveMouseEvents=function(t){t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave),t.addEventListener("mousedown",this.onMouseDown)},i.prototype.detachPassiveMouseEvents=function(t){t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),t.removeEventListener("mousedown",this.onMouseDown)},i.prototype.attachActiveMouseEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},i.prototype.detachActiveMouseEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp)},i.prototype.updateMouse=function(t,e){t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.fireMouseEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onDblClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onContextMenu=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onWheel=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseEnter=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t)},i.prototype.onMouseLeave=function(t){null!==this.mouse&&(Object.defineProperty(this,"mouse",{value:null,enumerable:!0,configurable:!0}),this.detachActiveMouseEvents(this.eventNode))},i.prototype.onMouseDown=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseMove=function(t){var e=this.mouse;null===e&&(e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t);var i=e.targetView,o=this.fireMouseEvent(t);null===o&&(o=void 0),o!==i&&this.onMouseTargetChange(e,o,i)},i.prototype.onMouseUp=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new MouseEvent("mouseout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new MouseEvent("mouseover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectMouseTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,a=t.targetView,s=this.hitTest(n,r);null===s&&(s=void 0),s!==a&&this.onMouseTargetChange(t,s,a)}},i.prototype.attachPassivePointerEvents=function(t){t.addEventListener("pointerenter",this.onPointerEnter),t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerdown",this.onPointerDown)},i.prototype.detachPassivePointerEvents=function(t){t.removeEventListener("pointerenter",this.onPointerEnter),t.removeEventListener("pointerleave",this.onPointerLeave),t.removeEventListener("pointerdown",this.onPointerDown)},i.prototype.attachActivePointerEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel)},i.prototype.detachActivePointerEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel)},i.prototype.updatePointer=function(t,e){t.pointerId=e.pointerId,t.pointerType=e.pointerType,t.isPrimary=e.isPrimary,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.firePointerEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onPointerEnter=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t)},i.prototype.onPointerLeave=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerDown=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t),this.firePointerEvent(t)},i.prototype.onPointerMove=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t);var n=o.targetView,r=this.firePointerEvent(t);null===r&&(r=void 0),r!==n&&this.onPointerTargetChange(o,r,n)},i.prototype.onPointerUp=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerCancel=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new PointerEvent("pointerout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new PointerEvent("pointerover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectPointerTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,a=t.targetView,s=this.hitTest(n,r);null===s&&(s=void 0),s!==a&&this.onPointerTargetChange(t,s,a)}},i.prototype.attachPassiveTouchEvents=function(t){t.addEventListener("touchstart",this.onTouchStart)},i.prototype.detachPassiveTouchEvents=function(t){t.removeEventListener("touchstart",this.onTouchStart)},i.prototype.attachActiveTouchEvents=function(t){t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchCancel)},i.prototype.detachActiveTouchEvents=function(t){t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel)},i.prototype.updateTouch=function(t,e){t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.pageX=e.pageX,t.pageY=e.pageY,t.radiusX=e.radiusX,t.radiusY=e.radiusY,t.altitudeAngle=e.altitudeAngle,t.azimuthAngle=e.azimuthAngle,t.rotationAngle=e.rotationAngle,t.force=e.force},i.prototype.fireTouchEvent=function(t,e){for(var i=e.changedTouches,o=[],n=function(n,r){var a=i[n],s=a.targetView;if(void 0!==s&&o.indexOf(s)<0){var l=new TouchEvent(t,{changedTouches:i,targetTouches:e.targetTouches,touches:e.touches,bubbles:!0});l.targetView=s;for(var u=[a],h=n+1;h<r;h+=1){var p=i[h];p.targetView===s&&u.push(p)}void 0!==document.createTouchList?l.targetViewTouches=document.createTouchList.apply(document,u):(u.item=function(t){return u[t]},l.targetViewTouches=u),s.bubbleEvent(l),o.push(s)}},r=0,a=i.length;r<a;r+=1)n(r,a)},i.prototype.onTouchStart=function(t){var e,i=this.touches;null===i&&(i={},Object.defineProperty(this,"touches",{value:i,enumerable:!0,configurable:!0}));for(var o=t.changedTouches,n=0,r=o.length;n<r;n+=1){var a=o[n],s=""+a.identifier,l=i[s];void 0===l&&(0===Object.keys(i).length&&this.attachActiveTouchEvents(this.eventNode),l={identifier:a.identifier,touchType:a.touchType,target:a.target},i[s]=l),this.updateTouch(l,a);var u=l.clientX,h=l.clientY;if(void 0===e&&(e=this.clientBounds),e.contains(u,h)){var p=u-e.x,d=h-e.y,c=this.hitTest(p,d);null!==c&&(l.targetView=c,a.targetView=c)}}this.fireTouchEvent("touchstart",t)},i.prototype.onTouchMove=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=0,n=i.length;o<n;o+=1){var r=i[o],a=""+r.identifier,s=e[a];void 0===s&&(s={identifier:r.identifier,touchType:r.touchType,target:r.target},e[a]=s),this.updateTouch(s,r),r.targetView=s.targetView}this.fireTouchEvent("touchmove",t)},i.prototype.onTouchEnd=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[s=""+(a=i[n]).identifier];void 0===r&&(r={identifier:a.identifier,touchType:a.touchType,target:a.target},e[s]=r),this.updateTouch(r,a),a.targetView=r.targetView}this.fireTouchEvent("touchend",t);for(n=0;n<o;n+=1){var a,s;delete e[s=""+(a=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.onTouchCancel=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[s=""+(a=i[n]).identifier];void 0===r&&(r={identifier:a.identifier,touchType:a.touchType,target:a.target},e[s]=r),this.updateTouch(r,a),a.targetView=r.targetView}this.fireTouchEvent("touchcancel",t);for(n=0;n<o;n+=1){var a,s;delete e[s=""+(a=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.resizeCanvas=function(t){var e,i,o,n=t.parentNode;if(n instanceof HTMLElement){do{if(e=Math.floor(n.offsetWidth),i=Math.floor(n.offsetHeight),0!==e&&0!==i)break;n=n.parentNode}while(n instanceof HTMLElement);o=this.pixelRatio,t.width=e*o,t.height=i*o,t.style.width=e+"px",t.style.height=i+"px"}else e=Math.floor(t.width),i=Math.floor(t.height),o=1;Object.defineProperty(this,"viewFrame",{value:new r.BoxR2(0,0,e,i),enumerable:!0,configurable:!0})},i.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof pr){var e=this.viewFrame;t.context.clearRect(0,0,e.width,e.height)}else if(t instanceof dr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},i.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof pr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof dr){var i=this.viewFrame;t.context.viewport(0,0,i.width,i.height)}},i.tag="canvas",i.ClickEventsFlag=1,i.WheelEventsFlag=2,i.MouseEventsFlag=4,i.PointerEventsFlag=8,i.TouchEventsFlag=16,i.EventsMask=i.ClickEventsFlag|i.WheelEventsFlag|i.MouseEventsFlag|i.PointerEventsFlag|i.TouchEventsFlag,i.powerFlags=Zn.powerFlags|Gi.NeedsRender|Gi.NeedsComposite,i.uncullFlags=Zn.uncullFlags|Gi.NeedsRender|Gi.NeedsComposite,i}(Zn);Zn.Tag("canvas")(cr,"canvas");var fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.isHidden=function(){var t=this.view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this.view;return null!==t?t.viewFrame:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.view;return null!==t?t.viewBounds:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.view;return null!==t?t.hitBounds:r.BoxR2.undefined()},enumerable:!1,configurable:!0}),e}(_n),vr=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:e.createCanvas(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"renderer",{value:e.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rasterFrame",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof nr||t instanceof cr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new pr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new dr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.needsProcess=function(t,e){return 0!=(this.viewFlags&Gi.ProcessMask)||0!=(t&Gi.NeedsResize)?this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite):t=0,t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&Gi.DisplayMask)?t|=Gi.NeedsRender|Gi.NeedsComposite:t=0!=(t&Gi.NeedsComposite)?Gi.NeedsDisplay|Gi.NeedsComposite:0,t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this.canvas),this.resetRenderer()},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e),this.clearCanvas()},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"compositeFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof nr||e instanceof cr?e.viewFrame:r.BoxR2.undefined()}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this.rasterFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},e.prototype.doHitTest=function(t,e,i){var o=this.compositeFrame;t-=Math.floor(o.xMin),e-=Math.floor(o.yMin);for(var n=null,r=this.childViews,a=r.length-1;a>=0;a-=1){var s=r[a];if(s instanceof nr&&!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(n=s.hitTest(t,e,i)))break}return n},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.compositeFrame,e=Math.floor(t.xMin),i=Math.floor(t.yMin);return 0!==e||0!==i?r.Transform.translate(-e,-i):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t){var e=this.compositeFrame,i=e.xMin-Math.floor(e.xMin),o=e.yMin-Math.floor(e.yMin),n=Math.ceil(i+e.width),a=Math.ceil(o+e.height),s=new r.BoxR2(i,o,n,a);if(!this.rasterFrame.equals(s)){var l=this.pixelRatio;t.width=n*l,t.height=a*l,t.style.width=n+"px",t.style.height=a+"px",Object.defineProperty(this,"rasterFrame",{value:s,enumerable:!0,configurable:!0})}},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof pr){var e=this.rasterFrame;t.context.clearRect(0,0,e.xMax,e.yMax)}else if(t instanceof dr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof pr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof dr){var i=this.rasterFrame;t.context.viewport(0,0,i.xMax,i.yMax)}},e.prototype.compositeImage=function(t){var e=t.compositor,i=t.renderer;if(e instanceof pr&&i instanceof pr){var o=this.compositeFrame,n=e.context;n.save(),n.globalAlpha=this.opacity.getValue(),n.globalCompositeOperation=this.compositeOperation.getValue();var r=Math.floor(o.x),a=Math.floor(o.y);n.drawImage(this.canvas,r,a,o.width,o.height),n.restore()}},e.create=function(){return new e},e.mountFlags=ar.mountFlags|Gi.NeedsRender|Gi.NeedsComposite,e.powerFlags=ar.powerFlags|Gi.NeedsRender|Gi.NeedsComposite,e.uncullFlags=ar.uncullFlags|Gi.NeedsRender|Gi.NeedsComposite,m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:String,state:"source-over"})],e.prototype,"compositeOperation",void 0),e}(ar),yr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"fill"in t}return!1},initView:function(t,e){void 0!==e.fill&&t.fill(e.fill)}},gr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"stroke"in t&&"strokeWidth"in t}return!1},initView:function(t,e){void 0!==e.stroke&&t.stroke(e.stroke),void 0!==e.strokeWidth&&t.strokeWidth(e.strokeWidth)}},wr=function(){function t(t,e,i,o){Object.defineProperty(this,"x",{value:t,enumerable:!0}),Object.defineProperty(this,"y",{value:e,enumerable:!0}),Object.defineProperty(this,"width",{value:i,enumerable:!0}),Object.defineProperty(this,"height",{value:o,enumerable:!0})}return t.prototype.withX=function(t){return t=r.Length.fromAny(t),this.x.equals(t)?this:this.copy(t,this.y,this.width,this.height)},t.prototype.withY=function(t){return t=r.Length.fromAny(t),this.y.equals(t)?this:this.copy(this.x,t,this.width,this.height)},t.prototype.withWidth=function(t){return t=r.Length.fromAny(t),this.width.equals(t)?this:this.copy(this.x,this.y,t,this.height)},t.prototype.withHeight=function(t){return t=r.Length.fromAny(t),this.height.equals(t)?this:this.copy(this.x,this.y,this.width,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new lr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof ur&&this.draw(t.context,e)},t.prototype.draw=function(t,e){void 0===e&&(e=null),this.renderRect(t,e)},t.prototype.renderRect=function(t,e){t.rect(this.x.pxValue(),this.y.pxValue(),this.width.pxValue(),this.height.pxValue())},t.prototype.copy=function(e,i,o,n){return new t(e,i,o,n)},t.prototype.toAny=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.x.equals(e.x)&&this.y.equals(e.y)&&this.width.equals(e.width)&&this.height.equals(e.height))},t.prototype.debug=function(t){t=t.write("Rect").write(46).write("create").write(40).debug(this.x).write(", ").debug(this.y).write(", ").debug(this.width).write(", ").debug(this.height).write(41)},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n){return new t(e=r.Length.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Length.fromAny(n))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.x,e.y,e.width,e.height);throw new TypeError(""+e)},t}(),mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new wr(this.x.getValue(),this.y.getValue(),this.width.getValue(),this.height.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new wr(this.x.getState(),this.y.getState(),this.width.getState(),this.height.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof wr&&(t=t.toAny()),void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.width&&this.width(t.width,e),void 0!==t.height&&this.height(t.height,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderRect(o,this.viewFrame),o.restore()}},e.prototype.renderRect=function(t,e){var i=this.x.getValue().pxValue(e.width),o=this.y.getValue().pxValue(e.height),n=this.width.getValue().pxValue(e.width),r=this.height.getValue().pxValue(e.height);t.beginPath(),t.rect(i,o,n,r);var a=this.fill.value;null!==a&&(t.fillStyle=a.toString(),t.fill());var s=this.stroke.value;if(null!==s){var l=this.strokeWidth.value;if(null!==l){var u=Math.min(e.width,e.height);t.lineWidth=l.pxValue(u)}t.strokeStyle=s.toString(),t.stroke()}},Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=this.x.getValue().pxValue(t.width),i=this.y.getValue().pxValue(t.height),o=this.width.getValue().pxValue(t.width),n=this.height.getValue().pxValue(t.height);return new r.BoxR2(e,i,e+o,i+n)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestRect(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestRect=function(t,e,i,o){var n=this.x.getValue().pxValue(o.width),r=this.y.getValue().pxValue(o.height),a=this.width.getValue().pxValue(o.width),s=this.height.getValue().pxValue(o.height);if(i.beginPath(),i.rect(n,r,a,s),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var l=this.strokeWidth.value;if(null!==l){var u=Math.min(o.width,o.height);if(i.lineWidth=l.pxValue(u),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromRect=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof wr)return this.fromRect(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"x",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"y",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"width",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"height",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(ar),br=function(){function t(t,e,i,o,n,r,a,s){Object.defineProperty(this,"center",{value:t,enumerable:!0}),Object.defineProperty(this,"innerRadius",{value:e,enumerable:!0}),Object.defineProperty(this,"outerRadius",{value:i,enumerable:!0}),Object.defineProperty(this,"startAngle",{value:o,enumerable:!0}),Object.defineProperty(this,"sweepAngle",{value:n,enumerable:!0}),Object.defineProperty(this,"padAngle",{value:r,enumerable:!0}),Object.defineProperty(this,"padRadius",{value:a,enumerable:!0}),Object.defineProperty(this,"cornerRadius",{value:s,enumerable:!0})}return t.prototype.withCenter=function(t){return t=r.PointR2.fromAny(t),this.center.equals(t)?this:this.copy(t,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withInnerRadius=function(t){return t=r.Length.fromAny(t),this.innerRadius.equals(t)?this:this.copy(this.center,t,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withOuterRadius=function(t){return t=r.Length.fromAny(t),this.outerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,t,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withStartAngle=function(t){return t=r.Angle.fromAny(t),this.startAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,t,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withSweepAngle=function(t){return t=r.Angle.fromAny(t),this.sweepAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,t,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withPadAngle=function(t){return t=r.Angle.fromAny(t),this.padAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,t,this.padRadius,this.cornerRadius)},t.prototype.withPadRadius=function(t){return null!==t&&(t=r.Length.fromAny(t)),e.Equals(this.padRadius,t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,t,this.cornerRadius)},t.prototype.withCornerRadius=function(t){return t=r.Length.fromAny(t),this.cornerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new lr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof ur&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderArc(t,e)},t.prototype.renderArc=function(e,i){var o;void 0!==i&&(o=Math.min(i.width,i.height));var n=this.center,r=n.x,a=n.y,s=this.innerRadius.pxValue(o),l=this.outerRadius.pxValue(o),u=this.startAngle.radValue(),h=this.sweepAngle.radValue(),p=u+h,d=h>=0;if(l<s){var c=l;l=s,s=c}if(l>t.Epsilon)if(h>2*Math.PI-t.Epsilon)e.moveTo(r+l*Math.cos(u),a+l*Math.sin(u)),e.arc(r,a,l,u,p,!d),s>t.Epsilon&&(e.moveTo(r+s*Math.cos(p),a+s*Math.sin(p)),e.arc(r,a,s,p,u,d));else{var f=u,v=p,y=u,g=p,w=h,m=h,b=this.padAngle.radValue()/2,S=+(b>t.Epsilon)&&(null!==this.padRadius?this.padRadius.pxValue(o):Math.sqrt(s*s+l*l)),C=Math.min(Math.abs(l-s)/2,this.cornerRadius.pxValue(o)),P=C,V=C;if(S>t.Epsilon){var T=Math.asin(S/s*Math.sin(b)),A=Math.asin(S/l*Math.sin(b));(w-=2*T)>t.Epsilon?(y+=T*=d?1:-1,g-=T):(w=0,y=g=(u+p)/2),(m-=2*A)>t.Epsilon?(f+=A*=d?1:-1,v-=A):(m=0,f=v=(u+p)/2)}var F=void 0,M=void 0,O=l*Math.cos(f),x=l*Math.sin(f),D=s*Math.cos(g),R=s*Math.sin(g),L=void 0,k=void 0;if(C>t.Epsilon&&(L=l*Math.cos(v),k=l*Math.sin(v),F=s*Math.cos(y),M=s*Math.sin(y),h<Math.PI)){var j=w>t.Epsilon?t.intersect(O,x,F,M,L,k,D,R):[D,R],I=O-j[0],E=x-j[1],W=L-j[0],N=k-j[1],U=1/Math.sin(.5*Math.acos((I*W+E*N)/(Math.sqrt(I*I+E*E)*Math.sqrt(W*W+N*N)))),B=Math.sqrt(j[0]*j[0]+j[1]*j[1]);P=Math.min(C,(s-B)/(U-1)),V=Math.min(C,(l-B)/(U+1))}if(m>t.Epsilon)if(V>t.Epsilon){var H=t.cornerTangents(F,M,O,x,l,V,d),q=t.cornerTangents(L,k,D,R,l,V,d);e.moveTo(r+H.cx+H.x01,a+H.cy+H.y01),V<C?e.arc(r+H.cx,a+H.cy,V,Math.atan2(H.y01,H.x01),Math.atan2(q.y01,q.x01),!d):(e.arc(r+H.cx,a+H.cy,V,Math.atan2(H.y01,H.x01),Math.atan2(H.y11,H.x11),!d),e.arc(r,a,l,Math.atan2(H.cy+H.y11,H.cx+H.x11),Math.atan2(q.cy+q.y11,q.cx+q.x11),!d),e.arc(r+q.cx,a+q.cy,V,Math.atan2(q.y11,q.x11),Math.atan2(q.y01,q.x01),!d))}else e.moveTo(r+O,a+x),e.arc(r,a,l,f,v,!d);else e.moveTo(r+O,a+x);if(s>t.Epsilon&&w>t.Epsilon)if(P>t.Epsilon){H=t.cornerTangents(D,R,L,k,s,-P,d),q=t.cornerTangents(O,x,F,M,s,-P,d);e.lineTo(r+H.cx+H.x01,a+H.cy+H.y01),P<C?e.arc(r+H.cx,a+H.cy,P,Math.atan2(H.y01,H.x01),Math.atan2(q.y01,q.x01),!d):(e.arc(r+H.cx,a+H.cy,P,Math.atan2(H.y01,H.x01),Math.atan2(H.y11,H.x11),!d),e.arc(r,a,s,Math.atan2(H.cy+H.y11,H.cx+H.x11),Math.atan2(q.cy+q.y11,q.cx+q.x11),d),e.arc(r+q.cx,a+q.cy,P,Math.atan2(q.y11,q.x11),Math.atan2(q.y01,q.x01),!d))}else e.arc(r,a,s,g,y,d);else e.lineTo(r+D,a+R)}else e.moveTo(r,a);e.closePath()},t.prototype.copy=function(e,i,o,n,r,a,s,l){return new t(e,i,o,n,r,a,s,l)},t.prototype.toAny=function(){return{center:this.center,innerRadius:this.innerRadius,outerRadius:this.outerRadius,startAngle:this.startAngle,sweepAngle:this.sweepAngle,padAngle:this.padAngle,padRadius:this.padRadius,cornerRadius:this.cornerRadius}},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.center.equals(i.center)&&this.innerRadius.equals(i.innerRadius)&&this.outerRadius.equals(i.outerRadius)&&this.startAngle.equals(i.startAngle)&&this.sweepAngle.equals(i.sweepAngle)&&this.padAngle.equals(i.padAngle)&&e.Equals(this.padRadius,i.padRadius)&&this.cornerRadius.equals(i.cornerRadius))},t.prototype.debug=function(t){t=t.write("Arc").write(46).write("create").write(40).write(41),this.center.isDefined()&&(t=t.write(46).write("center").write(40).debug(this.center).write(41)),this.innerRadius.isDefined()&&(t=t.write(46).write("innerRadius").write(40).debug(this.innerRadius).write(41)),this.outerRadius.isDefined()&&(t=t.write(46).write("outerRadius").write(40).debug(this.outerRadius).write(41)),this.startAngle.isDefined()&&(t=t.write(46).write("startAngle").write(40).debug(this.startAngle).write(41)),this.sweepAngle.isDefined()&&(t=t.write(46).write("sweepAngle").write(40).debug(this.sweepAngle).write(41)),this.padAngle.isDefined()&&(t=t.write(46).write("padAngle").write(40).debug(this.padAngle).write(41)),null!==this.padRadius&&(t=t.write(46).write("padRadius").write(40).debug(this.padRadius).write(41)),this.cornerRadius.isDefined()&&(t=t.write(46).write("cornerRadius").write(40).debug(this.cornerRadius).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n,a,s,l,u){return void 0===e&&(e=r.PointR2.origin()),void 0===i&&(i=r.Length.zero()),void 0===o&&(o=r.Length.zero()),void 0===n&&(n=r.Angle.zero()),void 0===a&&(a=r.Angle.zero()),void 0===s&&(s=r.Angle.zero()),void 0===l&&(l=null),void 0===u&&(u=r.Length.zero()),new t(e=r.PointR2.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Angle.fromAny(n),a=r.Angle.fromAny(a),s=r.Angle.fromAny(s),l=null!==l?r.Length.fromAny(l):null,u=r.Length.fromAny(u))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.center,e.innerRadius,e.outerRadius,e.startAngle,e.sweepAngle,e.padAngle,e.padRadius,e.cornerRadius);throw new TypeError(""+e)},t.intersect=function(t,e,i,o,n,r,a,s){var l=i-t,u=o-e,h=a-n,p=s-r,d=(h*(e-r)-p*(t-n))/(p*l-h*u);return[t+d*l,e+d*u]},t.cornerTangents=function(t,e,i,o,n,r,a){var s=t-i,l=e-o,u=(a?r:-r)/Math.sqrt(s*s+l*l),h=u*l,p=-u*s,d=t+h,c=e+p,f=i+h,v=o+p,y=(d+f)/2,g=(c+v)/2,w=f-d,m=v-c,b=w*w+m*m,S=n-r,C=d*v-f*c,P=(m<0?-1:1)*Math.sqrt(Math.max(0,S*S*b-C*C)),V=(C*m-w*P)/b,T=(-C*w-m*P)/b,A=(C*m+w*P)/b,F=(-C*w+m*P)/b,M=V-y,O=T-g,x=A-y,D=F-g;return M*M+O*O>x*x+D*D&&(V=A,T=F),{cx:V,cy:T,x01:-h,y01:-p,x11:V*(n/S-1),y11:T*(n/S-1)}},t.Epsilon=1e-12,t}(),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new br(this.center.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new br(this.center.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof br&&(t=t.toAny()),void 0!==t.center&&this.center(t.center,e),void 0!==t.innerRadius&&this.innerRadius(t.innerRadius,e),void 0!==t.outerRadius&&this.outerRadius(t.outerRadius,e),void 0!==t.startAngle&&this.startAngle(t.startAngle,e),void 0!==t.sweepAngle&&this.sweepAngle(t.sweepAngle,e),void 0!==t.padAngle&&this.padAngle(t.padAngle,e),void 0!==t.padRadius&&this.padRadius(t.padRadius,e),void 0!==t.cornerRadius&&this.cornerRadius(t.cornerRadius,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){this.value.draw(t,e);var i=this.fill.value;null!==i&&(t.fillStyle=i.toString(),t.fill());var o=this.stroke.value;if(null!==o){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r)}t.strokeStyle=o.toString(),t.stroke()}},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.center.getValue(),n=i.transformX(o.x,o.y),a=i.transformY(o.x,o.y),s=(this.innerRadius.getValue().pxValue(e)+this.outerRadius.getValue().pxValue(e))/2,l=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,u=n+s*Math.cos(l),h=a+s*Math.sin(l);return new r.BoxR2(u,h,u,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.center.getValue(),o=this.outerRadius.getValue().pxValue(e);return new r.BoxR2(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArc(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestArc=function(t,e,i,o){if(i.beginPath(),this.value.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(o.width,o.height);if(i.lineWidth=n.pxValue(r),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromArc=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof br)return this.fromArc(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"center",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"sweepAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(ar),Cr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"font"in t&&"textAlign"in t&&"textBaseline"in t&&"textOrigin"in t&&"textColor"in t}return!1},initView:function(t,e){void 0!==e.font&&t.font(e.font),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textBaseline&&t.textBaseline(e.textBaseline),void 0!==e.textOrigin&&t.textOrigin(e.textOrigin),void 0!==e.textColor&&t.textColor(e.textColor)}},Pr=function(){function t(t,e,i,o,n,r){Object.defineProperty(this,"text",{value:t,enumerable:!0}),Object.defineProperty(this,"font",{value:e,enumerable:!0}),Object.defineProperty(this,"textAlign",{value:i,enumerable:!0}),Object.defineProperty(this,"textBaseline",{value:o,enumerable:!0}),Object.defineProperty(this,"textOrigin",{value:n,enumerable:!0}),Object.defineProperty(this,"textColor",{value:r,enumerable:!0})}return t.prototype.withText=function(t){return this.text===t?this:this.copy(t,this.font,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withFont=function(t){return null!==t&&(t=gt.fromAny(t)),this.font===t?this:this.copy(this.text,t,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextAlign=function(t){return this.textAlign===t?this:this.copy(this.text,this.font,t,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextBaseline=function(t){return this.textBaseline===t?this:this.copy(this.text,this.font,this.textAlign,t,this.textOrigin,this.textColor)},t.prototype.withTextOrigin=function(t){return null!==t&&(t=r.PointR2.fromAny(t)),e.Equals(this.textOrigin,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,t,this.textColor)},t.prototype.withTextColor=function(t){return null!==t&&(t=St.fromAny(t)),e.Equals(this.textColor,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,this.textOrigin,t)},t.prototype.render=function(t,e){t instanceof pr&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderText(t,e)},t.prototype.renderText=function(t,e){t.save(),null!==this.font&&(t.font=this.font.toString()),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline);var i=this.textOrigin;null===i&&(i=r.PointR2.origin()),null!==this.textColor&&(t.fillStyle=this.textColor.toString()),t.fillText(this.text,i.x,i.y),t.restore()},t.prototype.copy=function(e,i,o,n,r,a){return new t(e,i,o,n,r,a)},t.prototype.toAny=function(){var t={text:this.text};return t.text=this.text,null!==this.font&&(t.font=this.font),null!==this.font&&(t.font=this.font),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline),null!==this.textOrigin&&(t.textOrigin=this.textOrigin),null!==this.textColor&&(t.textColor=this.textColor),t},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.text===i.text&&e.Equals(this.font,i.font)&&this.textAlign===i.textAlign&&this.textBaseline===i.textBaseline&&e.Equals(this.textOrigin,i.textOrigin)&&e.Equals(this.textColor,i.textColor))},t.prototype.debug=function(t){t=t.write("TextRun").write(46).write("create").write(40).debug(this.text).write(41),null!==this.font&&(t=t.write(46).write("font").write(40).debug(this.font).write(41)),null!==this.textAlign&&(t=t.write(46).write("textAlign").write(40).debug(this.textAlign).write(41)),null!==this.textBaseline&&(t=t.write(46).write("textBaseline").write(40).debug(this.textBaseline).write(41)),null!==this.textOrigin&&(t=t.write(46).write("textOrigin").write(40).debug(this.textOrigin).write(41)),null!==this.textColor&&(t=t.write(46).write("textColor").write(40).debug(this.textColor).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n,a,s){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null),null!==i&&(i=gt.fromAny(i)),null!==a&&(a=r.PointR2.fromAny(a)),null!==s&&(s=St.fromAny(s)),new t(e,i,o,n,a,s)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.create(e);if("object"==typeof e&&null!==e)return t.create(e.text,e.font,e.textAlign,e.textBaseline,e.textOrigin,e.textColor);throw new TypeError(""+e)},t}(),Vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Pr(this.text.getValue(),this.font.getValue(),this.textAlign.getValue(),this.textBaseline.getValue(),this.textOrigin.getValue(),this.textColor.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Pr(this.text.getState(),this.font.getState(),this.textAlign.getState(),this.textBaseline.getState(),this.textOrigin.getState(),this.textColor.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){"string"==typeof t?this.text(t,e):(t instanceof Pr&&(t=t.toAny()),void 0!==t.text&&this.text(t.text,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textAlign&&this.textAlign(t.textAlign,e),void 0!==t.textBaseline&&this.textBaseline(t.textBaseline,e),void 0!==t.textOrigin&&this.textOrigin(t.textOrigin,e),void 0!==t.textColor&&this.textColor(t.textColor,e))},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderText(o),o.restore()}},e.prototype.renderText=function(t){var e=this.font.value;null!==e&&(t.font=e.toString());var i=this.textAlign.value;void 0!==i&&(t.textAlign=i);var o=this.textBaseline.value;void 0!==o&&(t.textBaseline=o);var n=this.textOrigin.value;null===n&&(n=r.PointR2.origin());var a=this.textColor.value;null!==a&&(t.fillStyle=a.toString()),t.fillText(this.text.getValue(),n.x,n.y)},e.create=function(){return new e},e.fromText=function(t){var i=new e;return i.text(t),i},e.fromTextRun=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Pr)return this.fromTextRun(t);if("object"==typeof t&&null!==t)return this.fromInit(t);if("string"==typeof t)return this.fromText(t);throw new TypeError(""+t)},m([So({type:String,state:""})],e.prototype,"text",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:String,inherit:!0})],e.prototype,"textAlign",void 0),m([So({type:String,inherit:!0})],e.prototype,"textBaseline",void 0),m([So({type:r.PointR2,state:null,inherit:!0})],e.prototype,"textOrigin",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),e}(ar),Tr=function(){},Ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Tr),Fr=function(t){function i(e,i,o,n,r){var a=t.call(this)||this;return Object.defineProperty(a,"path",{value:e,enumerable:!0}),Object.defineProperty(a,"fillRule",{value:i,enumerable:!0}),Object.defineProperty(a,"fillColor",{value:o,enumerable:!0}),Object.defineProperty(a,"fillLook",{value:n,enumerable:!0}),Object.defineProperty(a,"moodModifier",{value:r,enumerable:!0}),a}return w(i,t),i.prototype.withFillRule=function(t){return e.Equals(this.fillRule,t)?this:this.copy(this.path,t,this.fillColor,this.fillLook,this.moodModifier)},i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.path,this.fillRule,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.path,this.fillRule,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.path,this.fillRule,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.moodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withMoodModifier(n)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof sr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill(this.fillRule)},i.prototype.draw=function(t,e){this.path.transformDraw(t,r.Transform.scale(e.width,e.height).translate(e.x,e.y))},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Mr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.path.equivalentTo(t.path,o)&&this.fillRule===t.fillRule&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("VectorIcon").write(40).debug(this.path).write(", ").debug(this.fillRule).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return a.Format.debug(this)},i.create=function(t,e,o,n){return o=r.PathR2.fromAny(o),1===t&&1===e||(o=o.transform(r.Transform.scale(1/t,1/e))),void 0===n&&(n="nonzero"),new i(o,n,null,Qt.iconColor,null)},i}(Ar),Mr=function(t,e){var i=function(t){var e=i.path,o=i.fillRule,n=i.fillColorInterpolator(t),r=i.fillLook,a=i.moodModifier;return new Fr(e,o,n,r,a)};return Object.setPrototypeOf(i,Mr.prototype),Object.defineProperty(i,"path",{value:e.path,enumerable:!0}),Object.defineProperty(i,"fillRule",{value:e.fillRule,enumerable:!0}),Object.defineProperty(i,"fillColorInterpolator",{value:s.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};Mr.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(Mr.prototype,0,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new Fr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,1,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new Fr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Mr.prototype.equals=function(t){return this===t||t instanceof Mr&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Or=function(t){function i(e,i,o){var n=t.call(this)||this;return Object.defineProperty(n,"fillColor",{value:e,enumerable:!0}),Object.defineProperty(n,"fillLook",{value:i,enumerable:!0}),Object.defineProperty(n,"moodModifier",{value:o,enumerable:!0}),n}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.moodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withMoodModifier(n)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof sr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=(e.xMin+e.xMax)/2,o=(e.yMin+e.yMax)/2,n=e.width,r=e.height,a=Math.min(n,r)/2;t.arc(i,o,a,0,2*Math.PI),t.closePath()},i.prototype.copy=function(t,e,o){return new i(t,e,o)},i.prototype.interpolateTo=function(t){return t instanceof i?xr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("CircleIcon").write(40).debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return a.Format.debug(this)},i.create=function(){return new i(null,Qt.accentColor,null)},m([e.Lazy],i,"create",null),i}(Ar),xr=function(t,e){var i=function(t){var e=i.fillColorInterpolator(t),o=i.fillLook,n=i.moodModifier;return new Or(e,o,n)};return Object.setPrototypeOf(i,xr.prototype),Object.defineProperty(i,"fillColorInterpolator",{value:s.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};xr.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(xr.prototype,0,{get:function(){var t=this.fillColorInterpolator[0],e=this.fillLook,i=this.moodModifier;return new Or(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(xr.prototype,1,{get:function(){var t=this.fillColorInterpolator[1],e=this.fillLook,i=this.moodModifier;return new Or(t,e,i)},enumerable:!0,configurable:!0}),xr.prototype.equals=function(t){return this===t||t instanceof xr&&(this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Dr=function(t){function i(e,i,o,n,r){var a=t.call(this)||this;return Object.defineProperty(a,"sides",{value:e,enumerable:!0}),Object.defineProperty(a,"rotation",{value:i,enumerable:!0}),Object.defineProperty(a,"fillColor",{value:o,enumerable:!0}),Object.defineProperty(a,"fillLook",{value:n,enumerable:!0}),Object.defineProperty(a,"moodModifier",{value:r,enumerable:!0}),a}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.sides,this.rotation,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.sides,this.rotation,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.sides,this.rotation,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.moodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withMoodModifier(n)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof sr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=this.sides;if(i>=3){var o=(e.xMin+e.xMax)/2,n=(e.yMin+e.yMax)/2,r=e.width,a=e.height,s=Math.min(r,a)/2,l=2*Math.PI/i,u=this.rotation.radValue();t.moveTo(o+s*Math.cos(u),n+s*Math.sin(u)),u+=l;for(var h=1;h<i;h+=1)t.lineTo(o+s*Math.cos(u),n+s*Math.sin(u)),u+=l;t.closePath()}},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Rr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equivalentTo(t.rotation,o)&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equals(t.rotation)&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("PolygonIcon").write(40).debug(this.sides).write(", ").debug(this.rotation).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return a.Format.debug(this)},i.create=function(t,e){return new i(t,e=void 0!==e?r.Angle.fromAny(e):r.Angle.zero(),null,Qt.accentColor,null)},i}(Ar),Rr=function(t,e){var i=function(t){var e=i.sides,o=i.rotationInterpolator(t),n=i.fillColorInterpolator(t),r=i.fillLook,a=i.moodModifier;return new Dr(e,o,n,r,a)};return Object.setPrototypeOf(i,Rr.prototype),Object.defineProperty(i,"sides",{value:e.sides,enumerable:!0}),Object.defineProperty(i,"rotationInterpolator",{value:t.rotation.interpolateTo(e.rotation),enumerable:!0}),Object.defineProperty(i,"fillColorInterpolator",{value:s.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};Rr.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(Rr.prototype,0,{get:function(){var t=this.sides,e=this.rotationInterpolator[0],i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new Dr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Rr.prototype,1,{get:function(){var t=this.sides,e=this.rotationInterpolator[1],i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new Dr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Rr.prototype.equals=function(t){return this===t||t instanceof Rr&&(this.sides===t.sides&&this.rotationInterpolator.equals(t.rotationInterpolator)&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Lr=function(t){function i(e,i,o,n,r,a){var s=t.call(this)||this;return Object.defineProperty(s,"outer",{value:e,enumerable:!0}),Object.defineProperty(s,"inner",{value:i,enumerable:!0}),Object.defineProperty(s,"innerScale",{value:o,enumerable:!0}),Object.defineProperty(s,"moodModifier",{value:n,enumerable:!0}),Object.defineProperty(s,"outerMoodModifier",{value:r,enumerable:!0}),Object.defineProperty(s,"innerMoodModifier",{value:a,enumerable:!0}),s}return w(i,t),i.prototype.withOuter=function(t){return this.outer===t?this:this.copy(t,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInner=function(t){return this.inner===t?this:this.copy(this.outer,t,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInnerScale=function(t){return this.innerScale===t?this:this.copy(this.outer,this.inner,t,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,t,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.modifyMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.moodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withMoodModifier(n)},i.prototype.withOuterMoodModifier=function(t){return e.Equals(this.outerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,t,this.innerMoodModifier)},i.prototype.modifyOuterMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.outerMoodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withOuterMoodModifier(n)},i.prototype.withInnerMoodModifier=function(t){return e.Equals(this.innerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,t)},i.prototype.modifyInnerMood=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.innerMoodModifier;null===o&&(o=de.empty());var n=o.updatedCol.apply(o,b([t,!0],e));return n.equals(o)?this:this.withInnerMoodModifier(n)},i.prototype.isThemed=function(){var t=this.outer,e=this.inner;return(null===t||t.isThemed())&&(null===e||e.isThemed())},i.prototype.withTheme=function(t,e){var i=this.moodModifier,o=this.outerMoodModifier,n=this.innerMoodModifier,r=e;null!==i&&(r=i.timesCol(r,!0));var a,s=this.outer;if(null!==s){var l=r;null!==o&&(l=o.timesCol(l,!0)),a=s.withTheme(t,l)}else a=null;var u,h=this.inner;if(null!==h){var p=r;null!==n&&(p=n.timesCol(p,!0)),u=h.withTheme(t,p)}else u=null;return s!==a||h!==u?this.copy(a,u,this.innerScale,i,o,n):this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof sr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){var i=this.outer;null!==i&&i.paint(t,this.outerFrame(e));var o=this.inner;null!==o&&o.paint(t,this.innerFrame(e))},i.prototype.draw=function(t,e){var i=this.outer;null!==i&&i.draw(t,this.outerFrame(e));var o=this.inner;null!==o&&o.draw(t,this.innerFrame(e))},i.prototype.outerFrame=function(t){return t},i.prototype.innerFrame=function(t){var e=t.xMin,i=t.xMax,o=t.yMin,n=t.yMax,a=i-e,s=n-o,l=this.innerScale;if(1!==l){var u=(e+i)/2,h=(o+n)/2;e=u-(a*=l)/2,o=h-(s*=l)/2,i=u+a/2,n=h+s/2}if(a>s){var p=(a-s)/2;e+=p,i-=p}else if(a<s){var d=(s-a)/2;o+=d,n-=d}return a!==s||1!==l?new r.BoxR2(e,o,i,n):t},i.prototype.copy=function(t,e,o,n,r,a){return new i(t,e,o,n,r,a)},i.prototype.interpolateTo=function(t){return t instanceof i?kr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.outer,t.outer,o)&&e.Equivalent(this.inner,t.inner,o)&&e.Equivalent(this.innerScale,t.innerScale,o)&&e.Equivalent(this.moodModifier,t.moodModifier,o)&&e.Equivalent(this.outerMoodModifier,t.outerMoodModifier,o)&&e.Equivalent(this.innerMoodModifier,t.innerMoodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.outer,t.outer)&&e.Equals(this.inner,t.inner)&&e.Equals(this.innerScale,t.innerScale)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("EnclosedIcon").write(40).debug(this.outer).write(", ").debug(this.inner).write(", ").debug(this.innerScale).write(", ").debug(this.moodModifier).write(", ").debug(this.outerMoodModifier).write(", ").debug(this.innerMoodModifier).write(41)},i.prototype.toString=function(){return a.Format.debug(this)},i.create=function(t,e){return new i(t,e,1,null,null,null)},i.embossed=function(t,e){return new i(t,e,1,null,null,i.embossedMoodModifier)},Object.defineProperty(i,"embossedMoodModifier",{get:function(){return de.empty().updatedCol(re.default,!0,[re.embossed,1])},enumerable:!1,configurable:!0}),m([e.Lazy],i,"embossedMoodModifier",null),i}(Tr),kr=function(t,e){var i=function(t){var e=i.outerInterpolator(t),o=i.innerInterpolator(t),n=i.innerScaleInterpolator(t),r=i.moodModifier,a=i.outerMoodModifier,s=i.innerMoodModifier;return new Lr(e,o,n,r,a,s)};return Object.setPrototypeOf(i,kr.prototype),Object.defineProperty(i,"outerInterpolator",{value:s.Interpolator(t.outer,e.outer),enumerable:!0}),Object.defineProperty(i,"innerInterpolator",{value:s.Interpolator(t.inner,e.inner),enumerable:!0}),Object.defineProperty(i,"innerScaleInterpolator",{value:s.Interpolator(t.innerScale,e.innerScale),enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),Object.defineProperty(i,"outerMoodModifier",{value:e.outerMoodModifier,enumerable:!0}),Object.defineProperty(i,"innerMoodModifier",{value:e.innerMoodModifier,enumerable:!0}),i};kr.prototype=Object.create(s.Interpolator.prototype),Object.defineProperty(kr.prototype,0,{get:function(){var t=this.outerInterpolator[0],e=this.innerInterpolator[0],i=this.innerScaleInterpolator[0],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new Lr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),Object.defineProperty(kr.prototype,1,{get:function(){var t=this.outerInterpolator[1],e=this.innerInterpolator[1],i=this.innerScaleInterpolator[1],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new Lr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),kr.prototype.equals=function(t){return this===t||t instanceof kr&&(this.outerInterpolator.equals(t.outerInterpolator)&&this.innerInterpolator.equals(t.innerInterpolator)&&this.innerScaleInterpolator.equals(t.innerScaleInterpolator)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))};var jr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof Er||t instanceof Ur||t instanceof Br||t instanceof Gi&&"xAlign"in t&&"yAlign"in t&&"iconWidth"in t&&"iconHeight"in t&&"iconColor"in t&&"graphics"in t}return!1},initView:function(t,e){void 0!==e.xAlign&&t.xAlign(e.xAlign),void 0!==e.yAlign&&t.yAlign(e.yAlign),void 0!==e.iconWidth&&t.iconWidth(e.iconWidth),void 0!==e.iconHeight&&t.iconHeight(e.iconHeight),void 0!==e.iconColor&&t.iconColor(e.iconColor),void 0!==e.graphics&&t.graphics(e.graphics)}},Ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if(t instanceof Tr){var e=this.owner.iconColor.state;if(null!==e&&t instanceof Ar)t=t.withFillColor(e);else{var i=this.owner.theme.state,o=this.owner.mood.state;null!==i&&null!==o&&(t=t.withTheme(i,o))}}return t},e}(So),Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Tr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderIcon(i,this.viewBounds),o.restore()}},e.prototype.renderIcon=function(t,e){var i=this.graphics.value;null!==i&&(t.context.beginPath(),i.render(t,e))},Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=t.width,i=t.height,o=Math.min(e,i),n=this.iconWidth.value;n=n instanceof r.Length?n.pxValue(o):o;var a=this.iconHeight.value;a=a instanceof r.Length?a.pxValue(o):o;var s=t.x+(e-n)*this.xAlign.getValue(),l=t.y+(i-a)*this.yAlign.getValue();return new r.BoxR2(s,l,s+n,l+a)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),n=this.hitTestIcon(e,i,r,this.viewBounds),a.restore()}}return n},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.create=function(){return new e},m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Ir,type:Object,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"graphics",void 0),e}(ar),Wr=function(){function t(t){Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precision",{value:-1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathContext",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathView",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathFlags",{value:0,enumerable:!0,configurable:!0}),this.fillStyle="",this.strokeStyle=""}return t.prototype.setPrecision=function(t){Object.defineProperty(this,"precision",{value:t,enumerable:!0,configurable:!0})},t.prototype.getPathContext=function(){var t=this.pathContext;if(null==t)throw new Error("no path");return t},t.prototype.getOrCreatePathContext=function(){var t=this.pathContext;if(null===t){if(t=this.createPathContext(),Object.defineProperty(this,"pathContext",{value:t,enumerable:!0,configurable:!0}),null===this.pathView||0!==this.pathFlags){this.finalizePath();var e=this.nextPathView();this.setPathView(e)}this.setPathFlags(0)}return t},t.prototype.createPathContext=function(){var t=new lr;return t.setPrecision(this.precision),t},t.prototype.setPathView=function(t){Object.defineProperty(this,"pathView",{value:t,enumerable:!0,configurable:!0})},t.prototype.nextPathView=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(t=null;null!==e;){if(e instanceof SVGPathElement){t=$n.fromNode(e);break}e=e.nextSibling}}return t},t.prototype.finalizePath=function(){var e=this.pathView;if(null!==e){var i=this.pathFlags;if(0==(i&t.FillFlag)){var o=e.getAttributeAnimator("fill");null!==o&&o.setAutoState(void 0)}if(0==(i&t.FillRuleFlag)){var n=e.getAttributeAnimator("fillRule");null!==n&&n.setAutoState(void 0)}if(0==(i&t.StrokeFlag)){var r=e.getAttributeAnimator("stroke");null!==r&&r.setAutoState(void 0)}if(0==(i&t.PathFlag)){var a=e.getAttributeAnimator("d");null!==a&&a.setAutoState(void 0)}}},t.prototype.setPathFlags=function(t){Object.defineProperty(this,"pathFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.beginPath=function(){Object.defineProperty(this,"pathContext",{value:null,enumerable:!0,configurable:!0})},t.prototype.moveTo=function(t,e){this.getOrCreatePathContext().moveTo(t,e)},t.prototype.lineTo=function(t,e){this.getPathContext().lineTo(t,e)},t.prototype.quadraticCurveTo=function(t,e,i,o){this.getPathContext().quadraticCurveTo(t,e,i,o)},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.getPathContext().bezierCurveTo(t,e,i,o,n,r)},t.prototype.arcTo=function(t,e,i,o,n){this.getPathContext().arcTo(t,e,i,o,n)},t.prototype.arc=function(t,e,i,o,n,r){this.getOrCreatePathContext().arc(t,e,i,o,n,r)},t.prototype.ellipse=function(t,e,i,o,n,r,a,s){this.getOrCreatePathContext().ellipse(t,e,i,o,n,r,a,s)},t.prototype.rect=function(t,e,i,o){this.getOrCreatePathContext().rect(t,e,i,o)},t.prototype.closePath=function(){var t=this.pathContext;null!==t&&t.closePath()},t.prototype.fill=function(e){var i=this.fillStyle;if("string"!=typeof i)throw new Error("unsupported fill style: "+i);var o=this.pathView;null!==o&&0!=(this.pathFlags&t.FillFlag)&&(this.finalizePath(),o=this.nextPathView(),this.setPathView(o));var n=!1;null===o&&(o=$n.path.create(),this.setPathView(o),n=!0),o.fill.setAutoState(i),this.setPathFlags(this.pathFlags|t.FillFlag),void 0!==e&&(o.fillRule.setAutoState(e),this.setPathFlags(this.pathFlags|t.FillRuleFlag)),0==(this.pathFlags&t.PathFlag)&&(o.d.setAutoState(this.getPathContext().toString()),this.setPathFlags(this.pathFlags|t.PathFlag)),n&&this.view.appendChildView(o)},t.prototype.stroke=function(){var e=this.strokeStyle;if("string"!=typeof e)throw new Error("unsupported stroke style: "+e);var i=this.pathView;null!==i&&0!=(this.pathFlags&t.StrokeFlag)&&(this.finalizePath(),i=this.nextPathView(),this.setPathView(i));var o=!1;null===i&&(i=$n.path.create(),this.setPathView(i),o=!0),i.stroke.setAutoState(e),this.setPathFlags(this.pathFlags|t.StrokeFlag),0==(this.pathFlags&t.PathFlag)&&(i.d.setAutoState(this.getPathContext().toString()),this.setPathFlags(this.pathFlags|t.PathFlag)),o&&this.view.appendChildView(i)},t.prototype.beginSvg=function(){for(var t=null,e=this.view.node.firstChild;null!==e;){if(e instanceof SVGPathElement){t=$n.fromNode(e);break}e=e.nextSibling}this.setPathView(t),this.setPathFlags(0)},t.prototype.finalizeSvg=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(void 0===t.fill.state&&void 0===t.stroke.state&&(Object.defineProperty(this,"pathView",{value:null,enumerable:!0,configurable:!0}),t.remove()),t=null;null!==e;){var i=e.view;e=e.nextSibling,void 0!==i&&i.remove()}}},t.FillFlag=1,t.FillRuleFlag=2,t.StrokeFlag=4,t.PathFlag=8,t}(),Nr=function(t){function e(e,i,o){var n=t.call(this)||this;return Object.defineProperty(n,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(n,"theme",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(n,"mood",{value:o,enumerable:!0,configurable:!0}),n}return w(e,t),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(hr),Ur=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Tr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.renderIcon()},e.prototype.renderIcon=function(){var t=new Wr(this);t.setPrecision(3),t.beginSvg();var e=this.graphics.takeValue();if(null!==e){var i=this.iconBounds;if(i.isDefined()&&i.width>0&&i.height>0){t.beginPath();var o=new Nr(t,this.theme.state,this.mood.state);e.render(o,i)}}t.finalizeSvg(),this.setViewFlags(this.viewFlags&~Gi.NeedsLayout)},Object.defineProperty(e.prototype,"iconBounds",{get:function(){var t=this.node.viewportElement;if(null===t&&(t=this.node),t instanceof SVGSVGElement){var e=t.viewBox.animVal,i=e.width,o=e.height,n=Math.min(i,o),a=this.iconWidth.value;a=a instanceof r.Length?a.pxValue(n):n;var s=this.iconHeight.value;s=s instanceof r.Length?s.pxValue(n):n;var l=e.x+(i-a)*this.xAlign.getValue(),u=e.y+(o-s)*this.yAlign.getValue();return new r.BoxR2(l,u,l+a,u+s)}return r.BoxR2.undefined()},enumerable:!1,configurable:!0}),e.mountFlags=$n.mountFlags|Gi.NeedsAnimate,m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Ir,type:Object,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"graphics",void 0),e}($n),Br=function(t){function e(e){var i=t.call(this,e)||this;return i.initIcon(),i}return w(e,t),e.prototype.initIcon=function(){this.position.setAutoState("relative");var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e)},e.prototype.createSvgView=function(){return Ur.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Ur?t:null},enumerable:!1,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Ur&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Tr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.isAuto()||t.height.isAuto()||t.viewBox.isAuto())){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setAutoState(e),t.height.setAutoState(i),t.viewBox.setAutoState("0 0 "+e+" "+i)}},m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Ir,type:Object,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Zn),Hr={default:function(){return{updateTime:performance.now()}}},qr=function(){function t(){Object.defineProperty(this,"componentFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"componentObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.initComponent=function(t){},t.prototype.setComponentFlags=function(t){Object.defineProperty(this,"componentFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.addComponentObserver=function(t){var i=this.componentObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddComponentObserver(t),Object.defineProperty(this,"componentObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddComponentObserver(t),this.didAddComponentObserver(t))},t.prototype.willAddComponentObserver=function(t){},t.prototype.onAddComponentObserver=function(t){},t.prototype.didAddComponentObserver=function(t){},t.prototype.removeComponentObserver=function(t){var i=this.componentObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveComponentObserver(t),Object.defineProperty(this,"componentObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveComponentObserver(t),this.didRemoveComponentObserver(t))},t.prototype.willRemoveComponentObserver=function(t){},t.prototype.onRemoveComponentObserver=function(t){},t.prototype.didRemoveComponentObserver=function(t){},t.prototype.attachParentComponent=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower())},t.prototype.detachParentComponent=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetParentComponent&&r.componentWillSetParentComponent(t,e,this)}},t.prototype.onSetParentComponent=function(t,e){},t.prototype.didSetParentComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetParentComponent&&r.componentDidSetParentComponent(t,e,this)}},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillInsertChildComponent&&r.componentWillInsertChildComponent(t,e,this)}},t.prototype.onInsertChildComponent=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidInsertChildComponent&&r.componentDidInsertChildComponent(t,e,this)}},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildComponent=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillRemoveChildComponent&&n.componentWillRemoveChildComponent(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildComponent=function(t){},t.prototype.didRemoveChildComponent=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidRemoveChildComponent&&n.componentDidRemoveChildComponent(t,this)}},t.prototype.getSuperComponent=function(t){var e=this.parentComponent;return null===e?null:e instanceof t?e:e.getSuperComponent(t)},t.prototype.getBaseComponent=function(t){var e=this.parentComponent;if(null===e)return null;var i=e.getBaseComponent(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.componentFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentComponent||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillMount&&o.componentWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.componentFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidMount&&o.componentDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillUnmount&&o.componentWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidUnmount&&o.componentDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.componentFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillPower&&o.componentWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.componentFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidPower&&o.componentDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillUnpower&&o.componentWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidUnpower&&o.componentDidUnpower(this)}},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.componentFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setComponentFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(e,i,o){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsCompile|t.NeedsExecute);if(0!=(i&t.CompileMask)&&0==(this.componentFlags&t.NeedsCompile)&&(this.setComponentFlags(this.componentFlags|t.NeedsCompile),n|=t.NeedsCompile),0!=(i&t.ExecuteMask)&&0==(this.componentFlags&t.NeedsExecute)&&(this.setComponentFlags(this.componentFlags|t.NeedsExecute),n|=t.NeedsExecute),0!=(n&(t.NeedsCompile|t.NeedsExecute))||o){this.onRequestUpdate(e,i,o);var r=this.parentComponent;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var a=this.executeService.manager;void 0!==a&&a.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){return 0!=(this.componentFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.componentFlags&t.UpdatingMask)},t.prototype.isCompiling=function(){return 0!=(this.componentFlags&t.CompilingFlag)},t.prototype.needsCompile=function(t,e){return t},t.prototype.willCompile=function(t,e){},t.prototype.onCompile=function(t,e){},t.prototype.didCompile=function(t,e){},t.prototype.willResolve=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillResolve&&n.componentWillResolve(t,this)}},t.prototype.onResolve=function(t){},t.prototype.didResolve=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidResolve&&n.componentDidResolve(t,this)}},t.prototype.willGenerate=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillGenerate&&n.componentWillGenerate(t,this)}},t.prototype.onGenerate=function(t){},t.prototype.didGenerate=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidGenerate&&n.componentDidGenerate(t,this)}},t.prototype.willAssemble=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillAssemble&&n.componentWillAssemble(t,this)}},t.prototype.onAssemble=function(t){},t.prototype.didAssemble=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidAssemble&&n.componentDidAssemble(t,this)}},t.prototype.doCompileChildComponents=function(e,i){0!=(e&t.CompileMask)&&(this.willCompileChildComponents(e,i),this.onCompileChildComponents(e,i),this.didCompileChildComponents(e,i))},t.prototype.willCompileChildComponents=function(t,e){},t.prototype.onCompileChildComponents=function(t,e){this.compileChildComponents(t,e,this.compileChildComponent)},t.prototype.didCompileChildComponents=function(t,e){},t.prototype.compileChildComponents=function(e,i,o){this.forEachChildComponent((function(n){o.call(this,n,e,i),0!=(n.componentFlags&t.RemovingFlag)&&(n.setComponentFlags(n.componentFlags&~t.RemovingFlag),this.removeChildComponent(n))}),this)},t.prototype.compileChildComponent=function(t,e,i){this.willCompileChildComponent(t,e,i),this.onCompileChildComponent(t,e,i),this.didCompileChildComponent(t,e,i)},t.prototype.willCompileChildComponent=function(t,e,i){},t.prototype.onCompileChildComponent=function(t,e,i){t.cascadeCompile(e,i)},t.prototype.didCompileChildComponent=function(t,e,i){},t.prototype.isExecuting=function(){return 0!=(this.componentFlags&t.ExecutingFlag)},t.prototype.needsExecute=function(t,e){return t},t.prototype.willExecute=function(t,e){},t.prototype.onExecute=function(t,e){},t.prototype.didExecute=function(t,e){},t.prototype.willRevise=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillRevise&&n.componentWillRevise(t,this)}},t.prototype.onRevise=function(t){},t.prototype.didRevise=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidRevise&&n.componentDidRevise(t,this)}},t.prototype.willCompute=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillCompute&&n.componentWillCompute(t,this)}},t.prototype.onCompute=function(t){},t.prototype.didCompute=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidCompute&&n.componentDidCompute(t,this)}},t.prototype.doExecuteChildComponents=function(e,i){0!=(e&t.ExecuteMask)&&(this.willExecuteChildComponents(e,i),this.onExecuteChildComponents(e,i),this.didExecuteChildComponents(e,i))},t.prototype.willExecuteChildComponents=function(t,e){},t.prototype.onExecuteChildComponents=function(t,e){this.executeChildComponents(t,e,this.executeChildComponent)},t.prototype.didExecuteChildComponents=function(t,e){},t.prototype.executeChildComponents=function(e,i,o){this.forEachChildComponent((function(n){o.call(this,n,e,i),0!=(n.componentFlags&t.RemovingFlag)&&(n.setComponentFlags(n.componentFlags&~t.RemovingFlag),this.removeChildComponent(n))}),this)},t.prototype.executeChildComponent=function(t,e,i){this.willExecuteChildComponent(t,e,i),this.onExecuteChildComponent(t,e,i),this.didExecuteChildComponent(t,e,i)},t.prototype.willExecuteChildComponent=function(t,e,i){},t.prototype.onExecuteChildComponent=function(t,e,i){t.cascadeExecute(e,i)},t.prototype.didExecuteChildComponent=function(t,e,i){},t.prototype.getLazyComponentService=function(e){var i=this.getComponentService(e);if(null===i){var o=t.getComponentServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setComponentService(e,i))}return i},t.prototype.getLazyComponentProperty=function(e){var i=this.getComponentProperty(e);if(null===i){var o=t.getComponentPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setComponentProperty(e,i))}return i},t.prototype.getLazyComponentModel=function(e){var i=this.getComponentModel(e);if(null===i){var o=t.getComponentModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentModel(e,i)}return i},t.prototype.getLazyComponentTrait=function(e){var i=this.getComponentTrait(e);if(null===i){var o=t.getComponentTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentTrait(e,i)}return i},t.prototype.getLazyComponentView=function(e){var i=this.getComponentView(e);if(null===i){var o=t.getComponentViewConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentView(e,i)}return i},t.prototype.getLazyComponentViewTrait=function(e){var i=this.getComponentViewTrait(e);if(null===i){var o=t.getComponentViewTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.viewKey?e:!1===o.prototype.viewKey?void 0:o.prototype.viewKey,!0===o.prototype.traitKey?e:!1===o.prototype.traitKey?void 0:o.prototype.traitKey,e),this.setComponentViewTrait(e,i)}return i},t.prototype.getLazyComponentFastener=function(e){var i=this.getComponentFastener(e);if(null===i){var o=t.getComponentFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentFastener(e,i)}return i},t.prototype.extendComponentContext=function(t){return t},Object.defineProperty(t.prototype,"superComponentContext",{get:function(){var t=this.parentComponent;return null!==t?t.componentContext:this.executeService.updatedComponentContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentContext",{get:function(){return this.extendComponentContext(this.superComponentContext)},enumerable:!1,configurable:!0}),t.getComponentServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentServiceConstructors")){var i=e.componentServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"componentServiceConstructors")||(o.componentServiceConstructors={}),o.componentServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setComponentService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getComponentPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentPropertyConstructors")){var i=e.componentPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"componentPropertyConstructors")||(o.componentPropertyConstructors={}),o.componentPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setComponentProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getComponentModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentModelConstructors")){var i=e.componentModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentModelConstructors")||(r.componentModelConstructors={}),r.componentModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentModel(o);return null===e&&(e=new t(this,n,o),this.setComponentModel(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentTraitConstructors")){var i=e.componentTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentTraitConstructors")||(r.componentTraitConstructors={}),r.componentTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentTrait(o);return null===e&&(e=new t(this,n,o),this.setComponentTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentViewConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentViewConstructors")){var i=e.componentViewConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentView=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentViewConstructors")||(r.componentViewConstructors={}),r.componentViewConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentView(o);return null===e&&(e=new t(this,n,o),this.setComponentView(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentViewTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentViewTraitConstructors")){var i=e.componentViewTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentViewTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.viewKey?o:!1===t.prototype.viewKey?void 0:t.prototype.viewKey,r=!0===t.prototype.traitKey?o:!1===t.prototype.traitKey?void 0:t.prototype.traitKey,a=e;Object.prototype.hasOwnProperty.call(a,"componentViewTraitConstructors")||(a.componentViewTraitConstructors={}),a.componentViewTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentViewTrait(o);return null===e&&(e=new t(this,n,r,o),this.setComponentViewTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentFastenerConstructors")){var i=e.componentFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentFastenerConstructors")||(r.componentFastenerConstructors={}),r.componentFastenerConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentFastener(o);return null===e&&(e=new t(this,n,o),this.setComponentFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.TraversingFlag=4,t.CompilingFlag=8,t.ExecutingFlag=16,t.RemovingFlag=32,t.ImmediateFlag=64,t.UpdatingMask=t.CompilingFlag|t.ExecutingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.TraversingFlag|t.CompilingFlag|t.ExecutingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsCompile=128,t.NeedsResolve=256,t.NeedsGenerate=512,t.NeedsAssemble=1024,t.CompileMask=t.NeedsCompile|t.NeedsResolve|t.NeedsGenerate|t.NeedsAssemble,t.NeedsExecute=2048,t.NeedsRevise=4096,t.NeedsCompute=8192,t.ExecuteMask=t.NeedsExecute|t.NeedsRevise|t.NeedsCompute,t.UpdateMask=t.CompileMask|t.ExecuteMask,t.ComponentFlagShift=24,t.ComponentFlagMask=(1<<t.ComponentFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t}(),zr=function(){function t(){Object.defineProperty(this,"rootComponents",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"componentManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addComponentManagerObserver=function(t){var i=this.componentManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddComponentManagerObserver(t),Object.defineProperty(this,"componentManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddComponentManagerObserver(t),this.didAddComponentManagerObserver(t))},t.prototype.willAddComponentManagerObserver=function(t){},t.prototype.onAddComponentManagerObserver=function(t){},t.prototype.didAddComponentManagerObserver=function(t){},t.prototype.removeComponentManagerObserver=function(t){var i=this.componentManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveComponentManagerObserver(t),Object.defineProperty(this,"componentManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveComponentManagerObserver(t),this.didRemoveComponentManagerObserver(t))},t.prototype.willRemoveComponentManagerObserver=function(t){},t.prototype.onRemoveComponentManagerObserver=function(t){},t.prototype.didRemoveComponentManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootComponents.length},t.prototype.willAttach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerWillAttach&&o.componentManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerDidAttach&&o.componentManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerWillDetach&&o.componentManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerDidDetach&&o.componentManagerDidDetach(this)}},t.prototype.insertRootComponent=function(t){var i=this.rootComponents,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootComponent(t),Object.defineProperty(this,"rootComponents",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootComponent(t),this.didInsertRootComponent(t),n&&this.didAttach()}},t.prototype.willInsertRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerWillInsertRootComponent&&n.componentManagerWillInsertRootComponent(t,this)}},t.prototype.onInsertRootComponent=function(t){},t.prototype.didInsertRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerDidInsertRootComponent&&n.componentManagerDidInsertRootComponent(t,this)}},t.prototype.removeRootComponent=function(t){var i=this.rootComponents,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootComponent(t),Object.defineProperty(this,"rootComponents",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootComponent(t),this.didRemoveRootComponent(t),n&&this.didDetach()}},t.prototype.willRemoveRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerWillRemoveRootComponent&&n.componentManagerWillRemoveRootComponent(t,this)}},t.prototype.onRemoveRootComponent=function(t){},t.prototype.didRemoveRootComponent=function(t){this.didObserve((function(e){void 0!==e.componentManagerDidRemoveRootComponent&&e.componentManagerDidRemoveRootComponent(t,this)}));for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerDidRemoveRootComponent&&n.componentManagerDidRemoveRootComponent(t,this)}},t}(),Yr=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"componentContext",{value:e.initComponentContext(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.compileTimer=0,e.executeTimer=0,e.updateDelay=i.MinUpdateDelay,e.runCompilePass=e.runCompilePass.bind(e),e.runExecutePass=e.runExecutePass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initComponentContext=function(){return{updateTime:0}},i.prototype.updatedComponentContext=function(){var t=this.componentContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootComponents()},i.prototype.powerRootComponents=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootComponent(o)}},i.prototype.powerRootComponent=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootComponents()},i.prototype.unpowerRootComponents=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootComponent(o)}},i.prototype.unpowerRootComponent=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&qr.CompileMask)&&this.setRootFlags(this.rootFlags|qr.NeedsCompile),0!=(e&qr.ExecuteMask)&&this.setRootFlags(this.rootFlags|qr.NeedsExecute),0!=(this.rootFlags&qr.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxCompileInterval&&0==(this.rootFlags&(qr.TraversingFlag|qr.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.compileTimer&&0===this.executeTimer&&0==(t&qr.UpdatingMask)&&0!=(t&qr.UpdateMask)&&(this.compileTimer=setTimeout(this.runCompilePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.compileTimer&&(clearTimeout(this.compileTimer),this.compileTimer=0),0!==this.executeTimer&&(clearTimeout(this.executeTimer),this.executeTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|qr.ImmediateFlag);try{0!=(this.rootFlags&qr.CompileMask)&&(this.cancelUpdate(),this.runCompilePass(!0)),0!=(this.rootFlags&qr.ExecuteMask)&&this.updateDelay<=i.MaxCompileInterval&&(this.cancelUpdate(),this.runExecutePass(!0))}finally{this.setRootFlags(this.rootFlags&~qr.ImmediateFlag)}},i.prototype.runCompilePass=function(t){void 0===t&&(t=!1);var e=this.rootComponents;this.setRootFlags(this.rootFlags&~qr.CompileMask|qr.TraversingFlag|qr.CompilingFlag);try{var o=performance.now(),n=this.componentContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var a=e[r];0!=(a.componentFlags&qr.CompileMask)&&a.cascadeCompile(0,n)}var s=performance.now(),l=Math.max(i.MinCompileInterval,this.updateDelay);this.updateDelay=s-o>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&qr.ExecuteMask)?this.executeTimer=setTimeout(this.runExecutePass,i.MinExecuteInterval):0!=(this.rootFlags&qr.CompileMask)&&(t&&(l=Math.max(i.MaxCompileInterval,l)),this.compileTimer=setTimeout(this.runCompilePass,l))}finally{this.setRootFlags(this.rootFlags&~(qr.TraversingFlag|qr.CompilingFlag))}},i.prototype.runExecutePass=function(t){void 0===t&&(t=!1);var e=this.rootComponents;this.setRootFlags(this.rootFlags&~qr.ExecuteMask|qr.TraversingFlag|qr.ExecutingFlag);try{var o=performance.now(),n=this.componentContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var a=e[r];0!=(a.componentFlags&qr.ExecuteMask)&&a.cascadeExecute(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&qr.CompileMask)){var s=this.updateDelay;t&&(s=Math.max(i.MaxCompileInterval,s)),this.compileTimer=setTimeout(this.runCompilePass,s)}else 0!=(this.rootFlags&qr.ExecuteMask)&&(this.executeTimer=setTimeout(this.runExecutePass,i.MaxExecuteInterval))}finally{this.setRootFlags(this.rootFlags&~(qr.TraversingFlag|qr.ExecutingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootComponent=function(e){t.prototype.onInsertRootComponent.call(this,e),this.requestUpdate(e,e.componentFlags&qr.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinCompileInterval=12,i.MaxCompileInterval=33,i.MinExecuteInterval=4,i.MaxExecuteInterval=16,m([e.Lazy],i,"global",null),i}(zr),Xr={empty:function(){return{fragment:void 0,permanent:{},ephemeral:{}}},current:function(){try{return Xr.fromUri(window.location.href)}catch(t){return console.error(t),{fragment:void 0,permanent:{},ephemeral:{}}}},updated:function(t,e){for(var i in void 0===e&&(e=Xr.current()),"fragment"in t&&(e.fragment=t.fragment),t.permanent){void 0!==(o=t.permanent[i])?e.permanent[i]=o:delete e.permanent[i]}for(var i in t.ephemeral){var o;void 0!==(o=t.ephemeral[i])?e.ephemeral[i]=o:delete e.ephemeral[i]}return e},cloned:function(t){var e={fragment:t.fragment,permanent:{},ephemeral:{}};for(var i in t.permanent)e.permanent[i]=t.permanent[i];for(var i in t.ephemeral)e.ephemeral[i]=t.ephemeral[i];return e},fromUri:function(t){var e=(t=n.Uri.fromAny(t)).fragment;return e.isDefined()?Xr.fromUriFragment(e):Xr.empty()},fromUriFragment:function(t){for(var e=void 0!==(t=n.UriFragment.fromAny(t)).identifier?n.UriQuery.parse(t.identifier):n.UriQuery.undefined(),i={fragment:void 0,permanent:{},ephemeral:{}};!e.isEmpty();){var o=e.key,r=e.value;void 0!==o?i.permanent[o]=r:i.fragment=r,e=e.tail()}return i},toUri:function(t){var e=n.UriQuery.builder();for(var i in void 0!==t.fragment&&e.add(void 0,t.fragment),t.permanent){var o=t.permanent[i];e.add(i,o)}return n.Uri.fragment(n.UriFragment.create(e.bind().toString()))}},Gr=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"historyState",{value:Xr.current(),enumerable:!0,configurable:!0}),e.popHistory=e.popHistory.bind(e),e}return w(i,t),Object.defineProperty(i.prototype,"historyUri",{get:function(){return Xr.toUri(this.historyState)},enumerable:!1,configurable:!0}),i.prototype.pushHistory=function(t){var e=this.historyState,i=Xr.updated(t,Xr.cloned(e)),o=Xr.toUri(i);this.willPushHistory(i,e),Object.defineProperty(this,"historyState",{value:i,enumerable:!0,configurable:!0}),window.history.pushState(i.ephemeral,"",o.toString()),this.onPushHistory(i,e),this.didPushHistory(i,e)},i.prototype.willPushHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPushHistory&&r.historyManagerWillPushHistory(t,e,this)}},i.prototype.onPushHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(qr.NeedsRevise)},i.prototype.didPushHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPushHistory&&r.historyManagerDidPushHistory(t,e,this)}},i.prototype.replaceHistory=function(t){var i=this.historyState,o=Xr.updated(t,Xr.cloned(i));if(!e.Objects.equal(i,o)){var n=Xr.toUri(o);this.willReplaceHistory(o,i),Object.defineProperty(this,"historyState",{value:o,enumerable:!0,configurable:!0}),window.history.replaceState(o.ephemeral,"",n.toString()),this.onReplaceHistory(o,i),this.didReplaceHistory(o,i)}},i.prototype.willReplaceHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillReplaceHistory&&r.historyManagerWillReplaceHistory(t,e,this)}},i.prototype.onReplaceHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(qr.NeedsRevise)},i.prototype.didReplaceHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidReplaceHistory&&r.historyManagerDidReplaceHistory(t,e,this)}},i.prototype.popHistory=function(t){var e={};"object"==typeof t.state&&null!==t.state&&(e.ephemeral=t.state);var i=Xr.current(),o=Xr.updated(e,i);this.willPopHistory(o,i),Object.defineProperty(this,"historyState",{value:o,enumerable:!0,configurable:!0}),this.onPopHistory(o,i),this.didPopHistory(o,i)},i.prototype.willPopHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPopHistory&&r.historyManagerWillPopHistory(t,e,this)}},i.prototype.onPopHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(qr.NeedsRevise)},i.prototype.didPopHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPopHistory&&r.historyManagerDidPopHistory(t,e,this)}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("popstate",this.popHistory)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("popstate",this.popHistory)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(zr),Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSet=function(t,e,i){for(var o=this.componentManagerObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.storageManagerWillSet&&a.storageManagerWillSet(t,e,i,this)}},e.prototype.onSet=function(t,e,i){for(var o=this.rootComponents,n=0,r=o.length;n<r;n+=1)o[n].requireUpdate(qr.NeedsRevise)},e.prototype.didSet=function(t,e,i){for(var o=this.componentManagerObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.storageManagerDidSet&&a.storageManagerDidSet(t,e,i,this)}},e.prototype.willClear=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerWillClear&&o.storageManagerWillClear(this)}},e.prototype.onClear=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(qr.NeedsRevise)},e.prototype.didClear=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerDidClear&&o.storageManagerDidClear(this)}},e}(zr),Zr=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"storage",{value:e,enumerable:!0}),i.onStorage=i.onStorage.bind(i),i}return w(i,t),i.prototype.get=function(t){var e=this.storage.getItem(t);return null!==e?e:void 0},i.prototype.set=function(t,e){var i=this.storage.getItem(t);return null===i&&(i=void 0),e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage.setItem(t,e):this.storage.removeItem(t),this.onSet(t,e,i),this.didSet(t,e,i)),i},i.prototype.clear=function(){this.willClear(),this.storage.clear(),this.onClear(),this.didClear()},i.prototype.onStorage=function(t){if(t.storageArea===this.storage){var e=t.key;if(null!==e){var i=t.newValue;null===i&&(i=void 0);var o=t.oldValue;null===o&&(o=void 0),i!==o&&(this.willSet(e,i,o),this.onSet(e,i,o),this.didSet(e,i,o))}else this.willClear(),this.onClear(),this.didClear()}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("storage",this.onStorage)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("storage",this.onStorage)},i.local=function(){try{return new i(window.localStorage)}catch(t){return null}},i.session=function(){try{return new i(window.sessionStorage)}catch(t){return null}},m([e.Lazy],i,"local",null),m([e.Lazy],i,"session",null),i}(Kr),_r=function(t){function e(e){var i=t.call(this)||this;return void 0===e&&(e={}),Object.defineProperty(i,"storage",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.get=function(t){return this.storage[t]},e.prototype.set=function(t,e){var i=this.storage[t];return e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage[t]=e:delete this.storage[t],this.onSet(t,e,i),this.didSet(t,e,i)),i},e.prototype.clear=function(){this.willClear(),Object.defineProperty(this,"storage",{value:{},enumerable:!0,configurable:!0}),this.onClear(),this.didClear()},e}(Kr),Qr=function(t,e){return this instanceof Qr?Jr.call(this,t,e):(i=t,qr.decorateComponentService.bind(qr,Qr.define(i)));var i};function Jr(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(Qr,Object),Qr.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},Qr.prototype.isInherited=function(){return 0!=(this.serviceFlags&Qr.InheritedFlag)},Qr.prototype.setInherited=function(t){if(t&&0==(this.serviceFlags&Qr.InheritedFlag)){var e=this.superService;null!==e&&(this.setServiceFlags(this.serviceFlags|Qr.InheritedFlag),Object.defineProperty(this,"manager",{value:e.manager,enumerable:!0,configurable:!0}))}else t||0==(this.serviceFlags&Qr.InheritedFlag)||this.setServiceFlags(this.serviceFlags&~Qr.InheritedFlag)},Qr.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(Qr.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),Qr.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentComponent;if(null!==o){if(null===(n=(e=o).getComponentService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyComponentService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|Qr.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~Qr.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})))},Qr.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~Qr.InheritedFlag)},Object.defineProperty(Qr.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),Qr.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},Qr.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},Qr.prototype.initManager=function(){},Qr.prototype.mount=function(){this.bindSuperService()},Qr.prototype.unmount=function(){this.unbindSuperService()},Qr.getClass=function(t){return t===Yr?ta:t===Gr?ea:t===Kr?ia:t===zr?$r:null},Qr.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=Qr.getClass(t.type)),null===e&&(e=Qr);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},a=t;return Object.setPrototypeOf(r,e),(r.prototype=a).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(a.initManager=function(){return i}),Object.defineProperty(a,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},Qr.InheritedFlag=1;var $r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootComponent(this.owner),!1!==this.observe&&e.addComponentManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeComponentManagerObserver(this),this.isInherited()||e.removeRootComponent(this.owner)),t.prototype.unmount.call(this)},e}(Qr),ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"componentContext",{get:function(){var t=this.manager;return void 0===t&&(t=Yr.global()),t.componentContext},enumerable:!1,configurable:!0}),e.prototype.updatedComponentContext=function(){var t=this.manager;return void 0===t&&(t=Yr.global()),t.updatedComponentContext()},e.prototype.initManager=function(){return Yr.global()},e}($r);Qr({type:Yr,observe:!1})(qr.prototype,"executeService");var ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"historyState",{get:function(){return this.manager.historyState},enumerable:!1,configurable:!0}),e.prototype.pushHistory=function(t){this.manager.pushHistory(t)},e.prototype.replaceHistory=function(t){this.manager.replaceHistory(t)},e.prototype.initManager=function(){return Gr.global()},e}($r);Qr({type:Gr,observe:!1})(qr.prototype,"historyService");var ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.get=function(t){return this.manager.get(t)},e.prototype.set=function(t,e){return this.manager.set(t,e)},e.prototype.clear=function(){this.manager.clear()},e.prototype.initManager=function(){var t=Zr.local();return null===t&&(t=new _r),t},e}($r);Qr({type:Kr,observe:!1})(qr.prototype,"storageService");var oa=function(t,e){return this instanceof oa?na.call(this,t,e):(i=t,qr.decorateComponentProperty.bind(qr,oa.define(i)));var i};function na(t,e){var i,o;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),void 0!==this.initState&&(o=this.fromAny(this.initState())),Object.defineProperty(this,"propertyFlags",{value:oa.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"state",{value:o,enumerable:!0,configurable:!0}),this}w(oa,Object),oa.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},oa.prototype.isInherited=function(){return 0!=(this.propertyFlags&oa.InheritedFlag)},oa.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&(oa.InheritedFlag|oa.OverrideFlag))){var e=this.superProperty;null!==e&&(this.setPropertyFlags(this.propertyFlags|oa.UpdatedFlag|oa.InheritedFlag),Object.defineProperty(this,"state",{value:e.state,enumerable:!0,configurable:!0}),this.revise())}else t||0==(this.propertyFlags&oa.InheritedFlag)||this.setPropertyFlags(this.propertyFlags&~oa.InheritedFlag)},oa.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(oa.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),oa.prototype.bindSuperProperty=function(){var t=this.superName,e=this.owner;if(void 0!==t&&e.isMounted())for(;;){var i=e.parentComponent;if(null!==i){var o=(e=i).getLazyComponentProperty(t);if(null===o)continue;Object.defineProperty(this,"superProperty",{value:o,enumerable:!0,configurable:!0}),o.addSubProperty(this),0==(this.propertyFlags&oa.OverrideFlag)&&(this.setPropertyFlags(this.propertyFlags|oa.UpdatedFlag|oa.InheritedFlag),Object.defineProperty(this,"state",{value:o.state,enumerable:!0,configurable:!0}),this.revise())}break}},oa.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~oa.InheritedFlag))},oa.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},oa.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},oa.prototype.isAuto=function(){return 0==(this.propertyFlags&oa.OverrideFlag)},oa.prototype.setAuto=function(t){t&&0!=(this.propertyFlags&oa.OverrideFlag)?this.setPropertyFlags(this.propertyFlags&~oa.OverrideFlag):t||0!=(this.propertyFlags&oa.OverrideFlag)||this.setPropertyFlags(this.propertyFlags|oa.OverrideFlag)},oa.prototype.isUpdated=function(){return 0!=(this.propertyFlags&oa.UpdatedFlag)},Object.defineProperty(oa.prototype,"ownState",{get:function(){return this.isInherited()?void 0:this.state},enumerable:!0,configurable:!0}),Object.defineProperty(oa.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),oa.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},oa.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},oa.prototype.setState=function(t){this.setPropertyFlags(this.propertyFlags|oa.OverrideFlag),this.setOwnState(t)},oa.prototype.willSetOwnState=function(t,e){},oa.prototype.onSetOwnState=function(t,e){},oa.prototype.didSetOwnState=function(t,e){},oa.prototype.setAutoState=function(t){0==(this.propertyFlags&oa.OverrideFlag)&&this.setOwnState(t)},oa.prototype.setOwnState=function(t){var i=this.state;t=this.fromAny(t),this.setPropertyFlags(this.propertyFlags&~oa.InheritedFlag),e.Equals(i,t)||(this.willSetOwnState(t,i),this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|oa.UpdatedFlag),this.onSetOwnState(t,i),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i),this.didSetOwnState(t,i))},oa.prototype.setBaseState=function(t){var e;this.isInherited()&&null!==(e=this.superProperty)?(t=this.fromAny(t),e.setBaseState(t)):this.setState(t)},Object.defineProperty(oa.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&oa.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),oa.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&oa.UpdatedFlag)?(this.setPropertyFlags(t&~oa.UpdatedFlag),this.state):void 0},oa.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~oa.UpdatedFlag),this.state},oa.prototype.onRevise=function(){this.isInherited()&&this.updateInherited()},oa.prototype.updateInherited=function(){var t=this.superProperty;null!==t&&this.update(t.state,this.state)},oa.prototype.update=function(t,i){e.Equals(i,t)||(this.willSetState(t,i),Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|oa.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},oa.prototype.willSetState=function(t,e){},oa.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},oa.prototype.didSetState=function(t,e){},oa.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.revise()}},oa.prototype.revise=function(){this.owner.requireUpdate(qr.NeedsRevise)},oa.prototype.fromAny=function(t){return t},oa.prototype.mount=function(){this.bindSuperProperty()},oa.prototype.unmount=function(){this.unbindSuperProperty()},oa.getConstructor=function(t){return t===String?ra:t===Boolean?aa:t===Number?sa:null},oa.define=function(t){var i=t.extends,o=t.state,n=t.inherit,r=t.initState;delete t.extends,delete t.state,void 0===i&&(i=oa.getConstructor(t.type)),null===i&&(i=oa,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o.owner)};return Object.setPrototypeOf(o,this),o=i.call(o,t,e)||o},s=t;return Object.setPrototypeOf(a,i),(a.prototype=s).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),void 0!==o&&void 0===r&&(s.initState=function(){return o}),Object.defineProperty(s,"inherit",{value:null!=n&&n,enumerable:!0,configurable:!0}),a},oa.UpdatedFlag=1,oa.OverrideFlag=2,oa.InheritedFlag=4;var ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(oa),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(oa),sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(oa),la=function(t,e,i){return this instanceof la?ua.call(this,t,e,i):(o=t,qr.decorateComponentModel.bind(qr,la.define(o)));var o};function ua(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}w(la,Object),la.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},la.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},la.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e)),i},la.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},la.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},la.prototype.willSetModel=function(t,e,i){},la.prototype.onSetModel=function(t,e,i){},la.prototype.didSetModel=function(t,e,i){},la.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.setModel(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.setModel(e,i)),e},la.prototype.createModel=function(){return null},la.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},la.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},la.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof c?t:null},la.prototype.isMounted=function(){return 0!=(this.fastenerFlags&la.MountedFlag)},la.prototype.mount=function(){0==(this.fastenerFlags&la.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|la.MountedFlag),this.onMount(),this.didMount())},la.prototype.willMount=function(){},la.prototype.onMount=function(){},la.prototype.didMount=function(){},la.prototype.unmount=function(){0!=(this.fastenerFlags&la.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~la.MountedFlag),this.onUnmount(),this.didUnmount())},la.prototype.willUnmount=function(){},la.prototype.onUnmount=function(){},la.prototype.didUnmount=function(){},la.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=la);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},la.MountedFlag=1;var ha=function(t,e,i){return this instanceof ha?pa.call(this,t,e,i):(o=t,qr.decorateComponentTrait.bind(qr,ha.define(o)));var o};function pa(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(ha,Object),ha.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},ha.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},ha.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},ha.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},ha.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},ha.prototype.willSetTrait=function(t,e,i){},ha.prototype.onSetTrait=function(t,e,i){},ha.prototype.didSetTrait=function(t,e,i){},ha.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},ha.prototype.createTrait=function(){return null},ha.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},ha.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},ha.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},ha.prototype.isMounted=function(){return 0!=(this.fastenerFlags&ha.MountedFlag)},ha.prototype.mount=function(){0==(this.fastenerFlags&ha.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|ha.MountedFlag),this.onMount(),this.didMount())},ha.prototype.willMount=function(){},ha.prototype.onMount=function(){},ha.prototype.didMount=function(){},ha.prototype.unmount=function(){0!=(this.fastenerFlags&ha.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~ha.MountedFlag),this.onUnmount(),this.didUnmount())},ha.prototype.willUnmount=function(){},ha.prototype.onUnmount=function(){},ha.prototype.didUnmount=function(){},ha.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=ha);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},ha.MountedFlag=1;var da=function(t,e,i){return this instanceof da?ca.call(this,t,e,i):(o=t,qr.decorateComponentView.bind(qr,da.define(o)));var o};function ca(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),this}w(da,Object),da.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},da.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},da.prototype.setView=function(t,e){(t instanceof jn&&t.isMounted()||t instanceof Node&&jn.isNodeMounted(t)&&jn.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},da.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},da.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},da.prototype.willSetView=function(t,e,i){},da.prototype.onSetView=function(t,e,i){},da.prototype.didSetView=function(t,e,i){},da.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},da.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},da.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},da.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},da.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof Gi?t:null},da.prototype.isMounted=function(){return 0!=(this.fastenerFlags&da.MountedFlag)},da.prototype.mount=function(){0==(this.fastenerFlags&da.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|da.MountedFlag),this.onMount(),this.didMount())},da.prototype.willMount=function(){},da.prototype.onMount=function(){},da.prototype.didMount=function(){},da.prototype.unmount=function(){0!=(this.fastenerFlags&da.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~da.MountedFlag),this.onUnmount(),this.didUnmount())},da.prototype.willUnmount=function(){},da.prototype.onUnmount=function(){},da.prototype.didUnmount=function(){},da.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=da);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},da.MountedFlag=1;var fa=function(t,e,i,o){return this instanceof fa?va.call(this,t,e,i,o):(n=t,qr.decorateComponentViewTrait.bind(qr,fa.define(n)));var n};function va(t,e,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewKey",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitKey",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(fa,Object),fa.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},fa.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},fa.prototype.setView=function(t,e){(t instanceof jn&&t.isMounted()||t instanceof Node&&jn.isNodeMounted(t)&&jn.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAnyView(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},fa.prototype.attachView=function(t){!0===this.observeView&&t.addViewObserver(this)},fa.prototype.detachView=function(t){!0===this.observeView&&t.removeViewObserver(this)},fa.prototype.willSetView=function(t,e,i){},fa.prototype.onSetView=function(t,e,i){},fa.prototype.didSetView=function(t,e,i){},fa.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAnyView(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.viewKey:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},fa.prototype.createView=function(){var t=this.viewType;return void 0!==t?t.create():null},fa.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},fa.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},fa.prototype.fromAnyView=function(t){var i=this.viewType;return e.FromAny.is(i)?i.fromAny(t):t instanceof Gi?t:null},fa.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},fa.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAnyTrait(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},fa.prototype.attachTrait=function(t){!0===this.observeTrait&&t.addTraitObserver(this)},fa.prototype.detachTrait=function(t){!0===this.observeTrait&&t.removeTraitObserver(this)},fa.prototype.willSetTrait=function(t,e,i){},fa.prototype.onSetTrait=function(t,e,i){},fa.prototype.didSetTrait=function(t,e,i){},fa.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAnyTrait(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.traitKey:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},fa.prototype.createTrait=function(){return null},fa.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},fa.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},fa.prototype.fromAnyTrait=function(t){var i=this.traitType;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},fa.prototype.isMounted=function(){return 0!=(this.fastenerFlags&fa.MountedFlag)},fa.prototype.mount=function(){0==(this.fastenerFlags&fa.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|fa.MountedFlag),this.onMount(),this.didMount())},fa.prototype.willMount=function(){},fa.prototype.onMount=function(){},fa.prototype.didMount=function(){},fa.prototype.unmount=function(){0!=(this.fastenerFlags&fa.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~fa.MountedFlag),this.onUnmount(),this.didUnmount())},fa.prototype.willUnmount=function(){},fa.prototype.onUnmount=function(){},fa.prototype.didUnmount=function(){},fa.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=fa);var i=function(t,i,o,n){return e.call(this,t,i,o,n)||this},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},fa.MountedFlag=1;var ya=function(t,e,i){return this instanceof ya?ga.call(this,t,e,i):(o=t,qr.decorateComponentFastener.bind(qr,ya.define(o)));var o};function ga(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"component",{value:null,enumerable:!0,configurable:!0}),this}w(ya,Object),ya.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},ya.prototype.getComponent=function(){var t=this.component;if(null===t)throw new TypeError("null "+this.name+" component");return t},ya.prototype.setComponent=function(t,e){var i=this.component;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentComponent===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertComponent(this.owner,t,e,this.key)),this.doSetComponent(t,e),i},ya.prototype.doSetComponent=function(t,e){var i=this.component;i!==t&&(this.willSetComponent(t,i,e),null!==i&&this.detachComponent(i),Object.defineProperty(this,"component",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachComponent(t),this.onSetComponent(t,i,e),this.didSetComponent(t,i,e))},ya.prototype.attachComponent=function(t){!0===this.observe&&t.addComponentObserver(this)},ya.prototype.detachComponent=function(t){!0===this.observe&&t.removeComponentObserver(this)},ya.prototype.willSetComponent=function(t,e,i){},ya.prototype.onSetComponent=function(t,e,i){},ya.prototype.didSetComponent=function(t,e,i){},Object.defineProperty(ya.prototype,"parentComponent",{get:function(){return this.owner},enumerable:!0,configurable:!0}),ya.prototype.injectComponent=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.component)&&(e=this.createComponent()):null!==(e=this.fromAny(e))&&this.doSetComponent(e,i),null!==e&&(null==t&&(t=this.parentComponent),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentComponent===t&&e.key===o||this.insertComponent(t,e,i,o),null===this.component&&this.doSetComponent(e,i)),e},ya.prototype.createComponent=function(){return null},ya.prototype.insertComponent=function(t,e,i,o){t.insertChildComponent(e,i,o)},ya.prototype.removeComponent=function(){var t=this.component;return null!==t&&t.remove(),t},ya.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof qr?t:null},ya.prototype.isMounted=function(){return 0!=(this.fastenerFlags&ya.MountedFlag)},ya.prototype.mount=function(){0==(this.fastenerFlags&ya.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|ya.MountedFlag),this.onMount(),this.didMount())},ya.prototype.willMount=function(){},ya.prototype.onMount=function(){},ya.prototype.didMount=function(){},ya.prototype.unmount=function(){0!=(this.fastenerFlags&ya.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~ya.MountedFlag),this.onUnmount(),this.didUnmount())},ya.prototype.willUnmount=function(){},ya.prototype.onUnmount=function(){},ya.prototype.didUnmount=function(){},ya.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=ya);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.component:(n.setComponent(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},ya.MountedFlag=1;var wa=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"parentComponent",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentModels",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentViews",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentViewTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentFasteners",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.willObserve=function(t){for(var e,i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.didObserve=function(t){for(var e,i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},e.prototype.setParentComponent=function(t,e){this.willSetParentComponent(t,e),null!==e&&this.detachParentComponent(e),Object.defineProperty(this,"parentComponent",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentComponent(t),this.onSetParentComponent(t,e),this.didSetParentComponent(t,e)},e.prototype.remove=function(){var t=this.parentComponent;null!==t&&(0==(this.componentFlags&qr.TraversingFlag)?t.removeChildComponent(this):this.setComponentFlags(this.componentFlags|qr.RemovingFlag))},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i),this.insertComponentFastener(e,i)},e.prototype.cascadeInsert=function(t,e){},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e),this.removeComponentFastener(e)},e.prototype.cascadeMount=function(){if(0!=(this.componentFlags&qr.MountedFlag))throw new Error("already mounted");this.setComponentFlags(this.componentFlags|qr.MountedFlag|qr.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildComponents(),this.didMount()}finally{this.setComponentFlags(this.componentFlags&~qr.TraversingFlag)}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountComponentServices(),this.mountComponentProperties(),this.mountComponentModels(),this.mountComponentTraits(),this.mountComponentViews(),this.mountComponentViewTraits(),this.mountComponentFasteners()},e.prototype.doMountChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeMount(),0!=(t.componentFlags&qr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~qr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeUnmount=function(){if(0==(this.componentFlags&qr.MountedFlag))throw new Error("already unmounted");this.setComponentFlags(this.componentFlags&~qr.MountedFlag|qr.TraversingFlag);try{this.willUnmount(),this.doUnmountChildComponents(),this.onUnmount(),this.didUnmount()}finally{this.setComponentFlags(this.componentFlags&~qr.TraversingFlag)}},e.prototype.onUnmount=function(){this.unmountComponentFasteners(),this.unmountComponentViewTraits(),this.unmountComponentViews(),this.unmountComponentTraits(),this.unmountComponentModels(),this.unmountComponentProperties(),this.unmountComponentServices(),this.setComponentFlags(this.componentFlags&(~qr.ComponentFlagMask|qr.RemovingFlag))},e.prototype.doUnmountChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeUnmount(),0!=(t.componentFlags&qr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~qr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadePower=function(){if(0!=(this.componentFlags&qr.PoweredFlag))throw new Error("already powered");this.setComponentFlags(this.componentFlags|qr.PoweredFlag|qr.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildComponents(),this.didPower()}finally{this.setComponentFlags(this.componentFlags&~qr.TraversingFlag)}},e.prototype.doPowerChildComponents=function(){this.forEachChildComponent((function(t){t.cascadePower(),0!=(t.componentFlags&qr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~qr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeUnpower=function(){if(0==(this.componentFlags&qr.PoweredFlag))throw new Error("already unpowered");this.setComponentFlags(this.componentFlags&~qr.PoweredFlag|qr.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildComponents(),this.onUnpower(),this.didUnpower()}finally{this.setComponentFlags(this.componentFlags&~qr.TraversingFlag)}},e.prototype.doUnpowerChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeUnpower(),0!=(t.componentFlags&qr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~qr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeCompile=function(t,e){var i=this.extendComponentContext(e);t&=~qr.NeedsCompile,t|=this.componentFlags&qr.UpdateMask,0!=((t=this.needsCompile(t,i))&qr.CompileMask)&&this.doCompile(t,i)},e.prototype.doCompile=function(t,e){var i=t;this.setComponentFlags(this.componentFlags&~qr.NeedsCompile|qr.TraversingFlag|qr.CompilingFlag);try{this.willCompile(i,e),0!=((this.componentFlags|t)&qr.NeedsResolve)&&(i|=qr.NeedsResolve,this.setComponentFlags(this.componentFlags&~qr.NeedsResolve),this.willResolve(e)),0!=((this.componentFlags|t)&qr.NeedsGenerate)&&(i|=qr.NeedsGenerate,this.setComponentFlags(this.componentFlags&~qr.NeedsGenerate),this.willGenerate(e)),0!=((this.componentFlags|t)&qr.NeedsAssemble)&&(i|=qr.NeedsAssemble,this.setComponentFlags(this.componentFlags&~qr.NeedsAssemble),this.willAssemble(e)),this.onCompile(i,e),0!=(i&qr.NeedsResolve)&&this.onResolve(e),0!=(i&qr.NeedsGenerate)&&this.onGenerate(e),0!=(i&qr.NeedsAssemble)&&this.onAssemble(e),this.doCompileChildComponents(i,e),0!=(i&qr.NeedsAssemble)&&this.didAssemble(e),0!=(i&qr.NeedsGenerate)&&this.didGenerate(e),0!=(i&qr.NeedsResolve)&&this.didResolve(e),this.didCompile(i,e)}finally{this.setComponentFlags(this.componentFlags&~(qr.TraversingFlag|qr.CompilingFlag))}},e.prototype.cascadeExecute=function(t,e){var i=this.extendComponentContext(e);t&=~qr.NeedsExecute,t|=this.componentFlags&qr.UpdateMask,0!=((t=this.needsExecute(t,i))&qr.ExecuteMask)&&this.doExecute(t,i)},e.prototype.doExecute=function(t,e){var i=t;this.setComponentFlags(this.componentFlags&~qr.NeedsExecute|qr.TraversingFlag|qr.ExecutingFlag);try{this.willExecute(i,e),0!=((this.componentFlags|t)&qr.NeedsRevise)&&(i|=qr.NeedsRevise,this.setComponentFlags(this.componentFlags&~qr.NeedsRevise),this.willRevise(e)),0!=((this.componentFlags|t)&qr.NeedsCompute)&&(i|=qr.NeedsCompute,this.setComponentFlags(this.componentFlags&~qr.NeedsCompute),this.willCompute(e)),this.onExecute(i,e),0!=(i&qr.NeedsRevise)&&this.onRevise(e),0!=(i&qr.NeedsCompute)&&this.onCompute(e),this.doExecuteChildComponents(i,e),0!=(i&qr.NeedsCompute)&&this.didCompute(e),0!=(i&qr.NeedsRevise)&&this.didRevise(e),this.didExecute(i,e)}finally{this.setComponentFlags(this.componentFlags&~(qr.TraversingFlag|qr.ExecutingFlag))}},e.prototype.onRevise=function(e){t.prototype.onRevise.call(this,e),this.reviseComponentProperties()},e.prototype.hasComponentService=function(t){var e=this.componentServices;return null!==e&&void 0!==e[t]},e.prototype.getComponentService=function(t){var e=this.componentServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentService=function(t,e){var i=this.componentServices;null===i&&(i={},Object.defineProperty(this,"componentServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentServices=function(){var t=this.componentServices;for(var e in t){t[e].mount()}},e.prototype.unmountComponentServices=function(){var t=this.componentServices;for(var e in t){t[e].unmount()}},e.prototype.hasComponentProperty=function(t){var e=this.componentProperties;return null!==e&&void 0!==e[t]},e.prototype.getComponentProperty=function(t){var e=this.componentProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentProperty=function(t,e){var i=this.componentProperties;null===i&&(i={},Object.defineProperty(this,"componentProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.reviseComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].onRevise()}},e.prototype.mountComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].mount()}},e.prototype.unmountComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].unmount()}},e.prototype.hasComponentModel=function(t){var e=this.componentModels;return null!==e&&void 0!==e[t]},e.prototype.getComponentModel=function(t){var e=this.componentModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentModel=function(t,e){var i=this.componentModels;null===i&&(i={},Object.defineProperty(this,"componentModels",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentModels=function(){var t=this.componentModels;for(var e in t){t[e].mount()}},e.prototype.unmountComponentModels=function(){var t=this.componentModels;for(var e in t){t[e].unmount()}},e.prototype.hasComponentTrait=function(t){var e=this.componentTraits;return null!==e&&void 0!==e[t]},e.prototype.getComponentTrait=function(t){var e=this.componentTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentTrait=function(t,e){var i=this.componentTraits;null===i&&(i={},Object.defineProperty(this,"componentTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentTraits=function(){var t=this.componentTraits;for(var e in t){t[e].mount()}},e.prototype.unmountComponentTraits=function(){var t=this.componentTraits;for(var e in t){t[e].unmount()}},e.prototype.hasComponentView=function(t){var e=this.componentViews;return null!==e&&void 0!==e[t]},e.prototype.getComponentView=function(t){var e=this.componentViews;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentView=function(t,e){var i=this.componentViews;null===i&&(i={},Object.defineProperty(this,"componentViews",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentViews=function(){var t=this.componentViews;for(var e in t){t[e].mount()}},e.prototype.unmountComponentViews=function(){var t=this.componentViews;for(var e in t){t[e].unmount()}},e.prototype.hasComponentViewTrait=function(t){var e=this.componentViewTraits;return null!==e&&void 0!==e[t]},e.prototype.getComponentViewTrait=function(t){var e=this.componentViewTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentViewTrait=function(t,e){var i=this.componentViewTraits;null===i&&(i={},Object.defineProperty(this,"componentViewTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentViewTraits=function(){var t=this.componentViewTraits;for(var e in t){t[e].mount()}},e.prototype.unmountComponentViewTraits=function(){var t=this.componentViewTraits;for(var e in t){t[e].unmount()}},e.prototype.hasComponentFastener=function(t){var e=this.componentFasteners;return null!==e&&void 0!==e[t]},e.prototype.getComponentFastener=function(t){var e=this.componentFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentFastener=function(t,e){var i=this.componentFasteners;null===i&&(i={},Object.defineProperty(this,"componentFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentFasteners=function(){var t=this.componentFasteners;for(var e in t){t[e].mount()}},e.prototype.unmountComponentFasteners=function(){var t=this.componentFasteners;for(var e in t){t[e].unmount()}},e.prototype.insertComponentFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyComponentFastener(i);null!==o&&!0===o.child&&o.doSetComponent(t,e)}},e.prototype.removeComponentFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getComponentFastener(e);null!==i&&!0===i.child&&i.doSetComponent(null,null)}},e}(qr),ma=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childComponents",{value:[],enumerable:!0}),Object.defineProperty(e,"childComponentMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childComponentCount",{get:function(){return this.childComponents.length},enumerable:!1,configurable:!0}),e.prototype.forEachChildComponent=function(t,e){for(var i,o=this.childComponents,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.firstChildComponent=function(){var t=this.childComponents;return 0!==t.length?t[0]:null},e.prototype.lastChildComponent=function(){var t=this.childComponents;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildComponent=function(t){var e=this.childComponents,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildComponent=function(t){var e=this.childComponents,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.getChildComponent=function(t){var e=this.childComponentMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildComponent=function(t,e){var i=null,o=this.childComponents;null!==e&&(e.parentComponent===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildComponent(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildComponent(r),r.setParentComponent(null,this),this.removeChildComponentMap(r),o.splice(n,1),this.onRemoveChildComponent(r),this.didRemoveChildComponent(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildComponent(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildComponentMap(e),e.setParentComponent(this,null),this.onInsertChildComponent(e,i),this.didInsertChildComponent(e,i),e.cascadeInsert()),r},e.prototype.insertChildComponentMap=function(t){var e=t.key;if(void 0!==e){var i=this.childComponentMap;null===i&&(i={},Object.defineProperty(this,"childComponentMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildComponentMap=function(t){var e=t.key;if(void 0!==e){var i=this.childComponentMap;null!==i&&delete i[e]}},e.prototype.appendChildComponent=function(t,e){t.remove(),void 0!==e&&(this.removeChildComponent(e),t.setKey(e)),this.willInsertChildComponent(t,null),this.childComponents.push(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,null),this.didInsertChildComponent(t,null),t.cascadeInsert()},e.prototype.prependChildComponent=function(t,e){t.remove(),void 0!==e&&(this.removeChildComponent(e),t.setKey(e));var i=this.childComponents,o=0!==i.length?i[0]:null;this.willInsertChildComponent(t,o),i.unshift(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,o),this.didInsertChildComponent(t,o),t.cascadeInsert()},e.prototype.insertChildComponent=function(t,e,i){if(null!==e&&e.parentComponent!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildComponent(i),t.setKey(i)),this.willInsertChildComponent(t,e);var o=this.childComponents,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,e),this.didInsertChildComponent(t,e),t.cascadeInsert()},e.prototype.removeChildComponent=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildComponent(t)))return null}else e=t;if(e.parentComponent!==this)throw new Error("not a child component");this.willRemoveChildComponent(e),e.setParentComponent(null,this),this.removeChildComponentMap(e);var i=this.childComponents,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildComponent(e),this.didRemoveChildComponent(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childComponents;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildComponent(i),i.setParentComponent(null,this),this.removeChildComponentMap(i),t.pop(),this.onRemoveChildComponent(i),this.didRemoveChildComponent(i),i.setKey(void 0)}},e.prototype.doMountChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.componentFlags&qr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~qr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doUnmountChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.componentFlags&qr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~qr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doPowerChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.componentFlags&qr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~qr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doUnpowerChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.componentFlags&qr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~qr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.compileChildComponents=function(t,e,i){for(var o=this.childComponents,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.componentFlags&qr.RemovingFlag)?n+=1:(r.setComponentFlags(r.componentFlags&~qr.RemovingFlag),this.removeChildComponent(r))}},e.prototype.executeChildComponents=function(t,e,i){for(var o=this.childComponents,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.componentFlags&qr.RemovingFlag)?n+=1:(r.setComponentFlags(r.componentFlags&~qr.RemovingFlag),this.removeChildComponent(r))}},e}(wa),ba=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"glowState",{value:"ready",enumerable:!0,configurable:!0}),i.glowTimer=0,i.initGlow(),i}return w(e,t),e.prototype.initGlow=function(){this.addClass("button-glow"),this.position.setAutoState("absolute"),this.width.setAutoState(r.Length.zero()),this.height.setAutoState(r.Length.zero()),this.borderTopLeftRadius.setAutoState(r.Length.pct(50)),this.borderTopRightRadius.setAutoState(r.Length.pct(50)),this.borderBottomLeftRadius.setAutoState(r.Length.pct(50)),this.borderBottomRightRadius.setAutoState(r.Length.pct(50)),this.pointerEvents.setAutoState("none")},e.prototype.didMount=function(){if(this.backgroundColor.isAuto()){var e=this.getLookOr(Qt.highlightColor,null);null!==e&&(e=e.alpha(1)),this.backgroundColor.setAutoState(e)}t.prototype.didMount.call(this)},e.prototype.onUnmount=function(){Object.defineProperty(this,"glowState",{value:"ready",enumerable:!0,configurable:!0}),this.cancelGlow(),this.remove(),t.prototype.onUnmount.call(this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()){var n=e.getOr(Qt.highlightColor,i,null);null!==n&&(n=n.alpha(1)),this.backgroundColor.setAutoState(n)}},e.prototype.glow=function(t,e,i,o){if(void 0===o&&(o=0),"ready"===this.glowState)if(this.cancelGlow(),0!==o){var n=this.glow.bind(this,t,e,i,0);this.glowTimer=setTimeout(n,o)}else{i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i),this.willGlow();var r=this.node.offsetParent;if(null!==r){var a=r.getBoundingClientRect(),l=t-a.left,u=e-a.top,h=Math.max(l,a.width-l),p=Math.max(u,a.height-u),d=Math.sqrt(h*h+p*p),c=this.getLook(Qt.highlightColor),f=void 0!==c?c.alpha():.1;this.opacity.setAutoState(f),!1!==i?(this.left.setAutoState(l),this.top.setAutoState(u),this.left.setAutoState(l-d,i),this.top.setAutoState(u-d,i),this.width.setAutoState(2*d,i),this.height.setAutoState(2*d,i)):(this.left.setAutoState(l-d),this.top.setAutoState(u-d),this.width.setAutoState(2*d),this.height.setAutoState(2*d),this.didGlow()),Object.defineProperty(this,"glowState",{value:"glowing",enumerable:!0,configurable:!0})}}},e.prototype.willGlow=function(){},e.prototype.didGlow=function(){},e.prototype.cancelGlow=function(){0!==this.glowTimer&&(clearTimeout(this.glowTimer),this.glowTimer=0)},e.prototype.pulse=function(t,e,i){i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i),"ready"===this.glowState&&this.glow(t,e,i),"glowing"===this.glowState&&(this.willPulse(),!1!==i?this.opacity.setAutoState(0,i):(this.opacity.setAutoState(0),this.didPulse()),Object.defineProperty(this,"glowState",{value:"pulsing",enumerable:!0,configurable:!0}))},e.prototype.willPulse=function(){},e.prototype.didPulse=function(){this.remove()},e.prototype.fade=function(t,e,i){"ready"===this.glowState?(this.cancelGlow(),this.didFade()):"glowing"===this.glowState&&(i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i),this.willFade(),!1!==i?this.opacity.setAutoState(0,i):(this.opacity.setAutoState(0),this.didFade())),Object.defineProperty(this,"glowState",{value:"fading",enumerable:!0,configurable:!0})},e.prototype.willFade=function(){},e.prototype.didFade=function(){this.remove()},m([an({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null},onEnd:function(t){this.owner.didGlow()}})],e.prototype,"left",void 0),m([nn({propertyNames:"opacity",type:Number,onEnd:function(t){"pulsing"===this.owner.glowState&&0===t?this.owner.didPulse():"fading"===this.owner.glowState&&0===t&&this.owner.didFade()}})],e.prototype,"opacity",void 0),e}(Zn),Sa=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"gesture",{value:i.createGesture(),enumerable:!0,configurable:!0}),i.initMembrane(e),i}return w(e,t),e.prototype.initMembrane=function(t){this.addClass("membrane")},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.createGesture=function(){return new qo(this,this)},Object.defineProperty(e.prototype,"glows",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setGlows=function(t){this.glows!==t&&Object.defineProperty(this,"glows",{value:t,configurable:!0,enumerable:!0})},e.prototype.didBeginPress=function(t,e){this.glows&&this.glow(t)},e.prototype.glow=function(t){if(t.detail instanceof ba&&(t.detail.fade(t.x,t.y),t.detail=void 0),void 0===t.detail){var e="mouse"===t.inputType?0:100;t.detail=this.prepend(ba),t.detail.glow(t.x,t.y,void 0,e)}},e.prototype.didMovePress=function(t,e){t.isRunaway()?this.gesture.cancelPress(t,e):this.clientBounds.contains(t.x,t.y)||(this.gesture.beginHover(t,e),t.detail instanceof ba&&(t.detail.fade(t.x,t.y),t.detail=void 0))},e.prototype.didEndPress=function(t,e){this.clientBounds.contains(t.x,t.y)?t.detail instanceof ba&&t.detail.pulse(t.x,t.y):(this.gesture.endHover(t,e),t.detail instanceof ba&&(t.detail.fade(t.x,t.y),t.detail=void 0))},e.prototype.didCancelPress=function(t,e){this.clientBounds.contains(t.x,t.y)||this.gesture.endHover(t,e),t.detail instanceof ba&&(t.detail.fade(t.x,t.y),t.detail=void 0)},e}(Zn),Ca=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"buttonType",{value:"regular",enumerable:!0,configurable:!0}),i.iconCount=0,i.icon=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("floating-button"),this.position.setAutoState("relative"),"regular"===this.buttonType?(this.width.setAutoState(56),this.height.setAutoState(56)):"mini"===this.buttonType&&(this.width.setAutoState(40),this.height.setAutoState(40)),this.borderTopLeftRadius.setAutoState(r.Length.pct(50)),this.borderTopRightRadius.setAutoState(r.Length.pct(50)),this.borderBottomLeftRadius.setAutoState(r.Length.pct(50)),this.borderBottomRightRadius.setAutoState(r.Length.pct(50)),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden"),this.userSelect.setAutoState("none"),this.cursor.setAutoState("pointer")},e.prototype.setButtonType=function(t){this.buttonType!==t&&(Object.defineProperty(this,"buttonType",{value:t,enumerable:!0,configurable:!0}),"regular"===t?(this.width.setAutoState(56),this.height.setAutoState(56)):"mini"===t&&(this.width.setAutoState(40),this.height.setAutoState(40)))},e.prototype.pushIcon=function(t,i){i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i);var o=this.iconCount,n="icon"+o,a=this.getViewFastener(n),l=null!==a?a.view:null;null!==l&&(!1!==i?(l.opacity.setAutoState(0,i),l.transform.setAutoState(r.Transform.rotate(r.Angle.deg(90)),i)):l.remove());var u=o+1,h="icon"+u,p=new e.IconFastener(this,h,h);p.iconIndex=u;var d=Br.create();d.position.setAutoState("absolute"),d.left.setAutoState(0),d.top.setAutoState(0),d.width.setAutoState(this.width.state),d.height.setAutoState(this.height.state),d.opacity.setAutoState(0),d.opacity.setAutoState(1,i),d.transform.setAutoState(r.Transform.rotate(r.Angle.deg(-90))),d.transform.setAutoState(r.Transform.rotate(r.Angle.deg(0)),i),d.pointerEvents.setAutoState("none"),d.iconWidth.setAutoState(24),d.iconHeight.setAutoState(24),d.iconColor.setAuto(!1),d.graphics.setAutoState(t),p.setView(d),this.setViewFastener(h,p),this.appendChildView(d,h),this.iconCount=u,this.icon=p},e.prototype.popIcon=function(t){t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t);var e=this.iconCount,i="icon"+e,o=this.getViewFastener(i),n=null!==o?o.view:null;null!==n&&(!1!==t?(n.opacity.setAutoState(0,t),n.transform.setAutoState(r.Transform.rotate(r.Angle.deg(-90)),t)):n.remove());var a=e-1,l="icon"+a,u=this.getViewFastener(l),h=null!==u?u.view:null;null!==h&&(h.opacity.setAutoState(1,t),h.transform.setAutoState(r.Transform.rotate(r.Angle.deg(0)),t),this.appendChildView(h,l)),this.iconCount=a,this.icon=u},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.setAutoState(e.getOr(Qt.accentColor,i,null),o);var n=e.getOr(Qt.shadow,he.floating,null);if(null!==n){var r=n.color,a=this.stackPhase.getValueOr(1);n=n.withColor(r.alpha(r.alpha()*a))}this.boxShadow.setAutoState(n,o)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.getLookOr(Qt.shadow,he.floating,null);if(null!==i){var o=i.color,n=this.stackPhase.getValueOr(1);i=i.withColor(o.alpha(o.alpha()*n))}this.boxShadow.setAutoState(i)},e.prototype.didStartHovering=function(){if(this.modifyMood(re.default,[re.hovering,1]),this.backgroundColor.isAuto()){var t=this.getLook(Qt.timing);this.backgroundColor.setAutoState(this.getLookOr(Qt.accentColor,null),t)}},e.prototype.didStopHovering=function(){if(this.modifyMood(re.default,[re.hovering,void 0]),this.backgroundColor.isAuto()){var t=this.getLook(Qt.timing);this.backgroundColor.setAutoState(this.getLookOr(Qt.accentColor,null),t)}},e.prototype.didMovePress=function(t,e){},e.IconFastener=jo.define({extends:void 0,type:Br,child:!1,observe:!0,iconIndex:0,viewDidApplyTheme:function(t,e,i,o){var n=t.getOr(Qt.backgroundColor,e,null);o.iconColor.setState(n,i)},viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.key,null))}}),m([So({type:Number,inherit:!0})],e.prototype,"stackPhase",void 0),e}(Sa),Pa=function(t){function e(e){var i=t.call(this,e)||this;return i.initButtonItem(),i}return w(e,t),e.prototype.initButtonItem=function(){this.addClass("button-item"),this.position.setAutoState("relative");var t=this.createButton();null!==t&&this.setChildView("button",t)},e.prototype.createButton=function(){var t=Ca.create();return t.setButtonType("mini"),t},Object.defineProperty(e.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof Ca?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){var t=this.button,e=null!==t?t.icon:null;return null!==e?e.view:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this.getChildView("label");return t instanceof Zn?t:null},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.label;null!==n&&n.color.isAuto()&&n.color.setAutoState(e.getOr(Qt.mutedColor,i,null),o)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.stackPhase.getValueOr(1),o=this.button;null!==o&&(this.width.setAutoState(o.width.state),this.height.setAutoState(o.height.state));var n=this.label;null!==n&&n.opacity.setAutoState(i)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=e.key;"button"===o&&e instanceof Ca?this.onInsertButton(e):"label"===o&&e instanceof Zn&&this.onInsertLabel(e)},e.prototype.onRemoveChildView=function(e){var i=e.key;"button"===i&&e instanceof Ca?this.onRemoveButton(e):"label"===i&&e instanceof Zn&&this.onRemoveLabel(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertButton=function(t){},e.prototype.onRemoveButton=function(t){},e.prototype.onInsertLabel=function(t){t.display.setAutoState("block"),t.position.setAutoState("absolute"),t.top.setAutoState(0),t.right.setAutoState(56),t.bottom.setAutoState(0),t.fontSize.setAutoState(17),t.fontWeight.setAutoState("500"),t.lineHeight.setAutoState(40),t.whiteSpace.setAutoState("nowrap"),t.opacity.setAutoState(this.stackPhase.getValueOr(0))},e.prototype.onRemoveLabel=function(t){},m([So({type:Number,inherit:!0})],e.prototype,"stackPhase",void 0),e}(Zn),Va=function(t){function i(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"stackState",{value:"collapsed",enumerable:!0,configurable:!0}),Object.defineProperty(i,"stackHeight",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"gesture",{value:null,enumerable:!0,configurable:!0}),i.onClick=i.onClick.bind(i),i.onContextMenu=i.onContextMenu.bind(i),i.initButtonStack(),i.initButton(),i}return w(i,t),i.prototype.initButtonStack=function(){this.addClass("button-stack"),this.display.setAutoState("block"),this.position.setAutoState("relative"),this.width.setAutoState(56),this.height.setAutoState(56),this.opacity.setAutoState(1),this.userSelect.setAutoState("none"),this.cursor.setAutoState("pointer")},i.prototype.initButton=function(){var t=this.createButton();null!==t&&this.append(t,"button")},i.prototype.createButton=function(){return Ca.create()},i.prototype.isExpanded=function(){return"expanded"===this.stackState||"expanding"===this.stackState},i.prototype.isCollapsed=function(){return"collapsed"===this.stackState||"collapsing"===this.stackState},Object.defineProperty(i.prototype,"modalView",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){var t=this.stackState;return"collapsed"===t?"hidden":"expanding"===t?"showing":"expanded"===t?"shown":"collapsing"===t?"hiding":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modality",{get:function(){return this.stackPhase.getValue()},enumerable:!1,configurable:!0}),i.prototype.showModal=function(t,e){this.expand(e)},i.prototype.hideModal=function(t){this.collapse(t)},Object.defineProperty(i.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof Zn?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;n instanceof Pa&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.insertItem=function(t,e,i){void 0===e&&(e=this.node.childNodes.length-1),this.insertChildNode(t.node,this.node.childNodes[1+e]||null,i)},i.prototype.removeItems=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;i instanceof Pa&&this.removeChild(i)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu)},i.prototype.onUnmount=function(){this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),t.prototype.onUnmount.call(this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutStack();var i=this.modalService.manager;void 0!==i&&i.updateModality()},i.prototype.layoutStack=function(){var t,e=this.stackPhase.getValue(),i=this.node.childNodes,o=i.length,n=this.button,a=o-1,s=0,l=0;if(null!==n){n.zIndex.setAutoState(o);var u=null!==n?n.height.value:void 0;t=u instanceof r.Length?u.pxValue():n.node.offsetHeight}else t=0;for(var h=this.buttonSpacing.value,p=this.itemSpacing.value,d=0;d<o;d+=1){var c=i[d].view;if(c instanceof Pa){0===s?(l+=h,t+=h):(l+=p,t+=p);var f=c.height.value,v=f instanceof r.Length?f.pxValue():c.node.offsetHeight;c.display.setAutoState(0===e?"none":"flex"),c.bottom.setAutoState(e*t),c.zIndex.setAutoState(a),t+=v,l+=v,s+=1,a-=1}}Object.defineProperty(this,"stackHeight",{value:l,enumerable:!0,configurable:!0})},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"button"===e.key&&e instanceof Zn?this.onInsertButton(e):e instanceof Pa&&this.onInsertItem(e)},i.prototype.onRemoveChildView=function(e){"button"===e.key&&e instanceof Zn?this.onRemoveButton(e):e instanceof Pa&&this.onRemoveItem(e),t.prototype.onRemoveChildView.call(this,e)},i.prototype.onInsertButton=function(t){var e=new qo(t,this);Object.defineProperty(this,"gesture",{value:e,enumerable:!0,configurable:!0}),t.addViewObserver(e),t instanceof Ca&&(t.stackPhase.setAutoState(1),this.isExpanded()&&t.pushIcon(this.closeIcon)),t.zIndex.setAutoState(0)},i.prototype.onRemoveButton=function(t){t.removeViewObserver(this.gesture),Object.defineProperty(this,"gesture",{value:null,enumerable:!0,configurable:!0})},i.prototype.onInsertItem=function(t){t.position.setAutoState("absolute"),t.right.setAutoState(8),t.bottom.setAutoState(8),t.left.setAutoState(8),t.zIndex.setAutoState(0)},i.prototype.onRemoveItem=function(t){},i.prototype.expand=function(t){if("expanded"!==this.stackState||1!==this.stackPhase.value){if(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),"expanding"!==this.stackState){this.willExpand();var e=this.button;e instanceof Ca&&e.pushIcon(this.closeIcon,t)}!1!==t?1!==this.stackPhase.value?this.stackPhase.setAutoState(1,t):setTimeout(this.didExpand.bind(this)):(this.stackPhase.setAutoState(1),this.didExpand())}},i.prototype.willExpand=function(){Object.defineProperty(this,"stackState",{value:"expanding",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.buttonStackWillExpand&&t.buttonStackWillExpand(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillExpand&&n.buttonStackWillExpand(this)}},i.prototype.didExpand=function(){Object.defineProperty(this,"stackState",{value:"expanded",enumerable:!0,configurable:!0}),this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidExpand&&o.buttonStackDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidExpand&&n.buttonStackDidExpand(this)},i.prototype.collapse=function(t){if("collapsed"!==this.stackState||0!==this.stackPhase.value){if(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),"collapsing"!==this.stackState){this.willCollapse();var e=this.button;e instanceof Ca&&e.iconCount>1&&e.popIcon(t)}!1!==t?0!==this.stackPhase.value?this.stackPhase.setAutoState(0,t):setTimeout(this.didCollapse.bind(this)):(this.stackPhase.setAutoState(0),this.didCollapse())}},i.prototype.willCollapse=function(){Object.defineProperty(this,"stackState",{value:"collapsing",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.buttonStackWillCollapse&&t.buttonStackWillCollapse(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillCollapse&&n.buttonStackWillCollapse(this)}},i.prototype.didCollapse=function(){Object.defineProperty(this,"stackState",{value:"collapsed",enumerable:!0,configurable:!0}),this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidCollapse&&o.buttonStackDidCollapse(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidCollapse&&n.buttonStackDidCollapse(this)},i.prototype.toggle=function(t){var e=this.stackState;"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},i.prototype.show=function(t){1!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willShow(),!1!==t?this.opacity.setAutoState(1,t):(this.opacity.setAutoState(1),this.didShow()))},i.prototype.willShow=function(){var t=this.viewController;null!==t&&void 0!==t.buttonStackWillShow&&t.buttonStackWillShow(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillShow&&n.buttonStackWillShow(this)}this.display("block")},i.prototype.didShow=function(){this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidShow&&o.buttonStackDidShow(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidShow&&n.buttonStackDidShow(this)},i.prototype.hide=function(t){0!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willHide(),!1!==t?this.opacity.setAutoState(0,t):(this.opacity.setAutoState(0),this.didHide()))},i.prototype.willHide=function(){var t=this.viewController;null!==t&&void 0!==t.buttonStackWillHide&&t.buttonStackWillHide(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillHide&&n.buttonStackWillHide(this)}},i.prototype.didHide=function(){this.display("none"),this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidHide&&o.buttonStackDidHide(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidHide&&n.buttonStackDidHide(this)},i.prototype.didBeginPress=function(t,e){},i.prototype.didMovePress=function(t,e){if(!t.defaultPrevented&&"expanded"!==this.stackState){var i=this.stackHeight,o=Math.min(Math.max(0,-(t.y-t.y0)/(.5*i)),1);if(this.stackPhase.setAutoState(o),this.requireUpdate(Gi.NeedsLayout),o>.1&&(t.clearHoldTimer(),"collapsed"===this.stackState)){this.willExpand();var n=this.button;n instanceof Ca&&n.pushIcon(this.closeIcon)}}},i.prototype.didEndPress=function(t,e){if(!t.defaultPrevented){var i=this.stackPhase.getValue();t.t-t.t0<t.holdDelay?i<.1||"expanded"===this.stackState?this.collapse():this.expand():i<.5?this.collapse():i>=.5&&this.expand()}},i.prototype.didCancelPress=function(t,e){2===t.buttons?this.toggle():this.stackPhase.getValue()<.1||"expanded"===this.stackState?this.collapse():this.expand()},i.prototype.didLongPress=function(t){t.preventDefault(),this.toggle()},i.prototype.onClick=function(t){var e;t.target===(null===(e=this.button)||void 0===e?void 0:e.node)&&t.stopPropagation()},i.prototype.onContextMenu=function(t){t.preventDefault()},Object.defineProperty(i,"closeIcon",{get:function(){return Fr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),m([So({type:Number,state:0,updateFlags:Gi.NeedsLayout,onEnd:function(t){var e=this.owner.stackState;"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],i.prototype,"stackPhase",void 0),m([So({type:Number,state:28,updateFlags:Gi.NeedsLayout})],i.prototype,"buttonSpacing",void 0),m([So({type:Number,state:20,updateFlags:Gi.NeedsLayout})],i.prototype,"itemSpacing",void 0),m([nn({propertyNames:"opacity",type:Number,onEnd:function(t){1===t?this.owner.didShow():0===t&&this.owner.didHide()}})],i.prototype,"opacity",void 0),m([e.Lazy],i,"closeIcon",null),i}(Zn),Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"stackState",{get:function(){var t=this.view;return null!==t?t.stackState:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){var t=this.view;return null!==t?t.button:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this.view;return null!==t?t.items:[]},enumerable:!1,configurable:!0}),e.prototype.removeItems=function(){var t=this.view;null!==t&&t.removeItems()},e.prototype.buttonStackWillExpand=function(t){t.modalService.presentModal(t)},e.prototype.buttonStackDidExpand=function(t){},e.prototype.buttonStackWillCollapse=function(t){},e.prototype.buttonStackDidCollapse=function(t){t.modalService.dismissModal(t)},e.prototype.buttonStackWillShow=function(t){},e.prototype.buttonStackDidShow=function(t){},e.prototype.buttonStackWillHide=function(t){},e.prototype.buttonStackDidHide=function(t){},e}(_n),Aa=function(t){function e(e){var i=t.call(this,e)||this;return i.iconCount=0,i.icon=null,i.onClick=i.onClick.bind(i),i.initButton(),i.initTheme(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("icon-button"),this.position.setAutoState("relative"),this.width.setAutoState(44),this.height.setAutoState(44),this.display.setAutoState("flex"),this.justifyContent.setAutoState("center"),this.alignItems.setAutoState("center"),this.borderTopLeftRadius.setAutoState(4),this.borderTopRightRadius.setAutoState(4),this.borderBottomLeftRadius.setAutoState(4),this.borderBottomRightRadius.setAutoState(4),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden"),this.userSelect.setAutoState("none"),this.cursor.setAutoState("pointer")},e.prototype.initTheme=function(){this.modifyTheme(re.default,[re.translucent,1])},e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e)},e.prototype.pushIcon=function(t,i){var o=this.iconCount,n=o+1;this.iconCount=n,i=(void 0!==i||0!==o)&&(void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i));var a="icon"+o,l=this.getViewFastener(a),u=null!==l?l.view:null;null!==u&&(!1!==i?(u.opacity.setAutoState(0,i),u.cssTransform.setAutoState(r.Transform.rotate(r.Angle.deg(90)),i)):u.remove());var h="icon"+n,p=new e.IconFastener(this,h,h);p.iconIndex=n,this.icon=p;var d=Ur.create();d.setStyle("position","absolute"),d.setStyle("left","0"),d.setStyle("top","0"),d.opacity.setAutoState(0),d.opacity.setAutoState(1,i),d.cssTransform.setAutoState(r.Transform.rotate(r.Angle.deg(-90))),d.cssTransform.setAutoState(r.Transform.rotate(r.Angle.deg(0)),i),d.pointerEvents.setAutoState("none"),d.xAlign.setInherit(!0),d.yAlign.setInherit(!0),d.iconWidth.setInherit(!0),d.iconHeight.setInherit(!0),d.iconColor.setInherit(!0),d.graphics.setAutoState(t),p.setView(d),this.setViewFastener(h,p),this.appendChildView(d,h)},e.prototype.popIcon=function(t){var e=this.iconCount,i=e-1;this.iconCount=i,t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t);var o="icon"+e,n=this.getViewFastener(o),a=null!==n?n.view:null;null!==a&&(!1!==t?(a.opacity.setAutoState(0,t),a.cssTransform.setAutoState(r.Transform.rotate(r.Angle.deg(-90)),t)):(a.remove(),this.setViewFastener(o,null)));var l="icon"+i,u=this.getViewFastener(l);this.icon=u;var h=null!==u?u.view:null;return null!==h&&(h.opacity.setAutoState(1,t),h.cssTransform.setAutoState(r.Transform.rotate(r.Angle.deg(0)),t),this.appendChildView(h,l)),a},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()){var n=this.getLookOr(Qt.backgroundColor,null);!this.gesture.isHovering()&&n instanceof St&&(n=n.alpha(0)),this.backgroundColor.setAutoState(n,o)}if(!this.graphics.isInherited()){var r=this.graphics.value;if(r instanceof Tr){var a=r.withTheme(e,i);this.graphics.setOwnState(a,!!r.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.viewFasteners;if(null!==t){var i=this.width.value;i=i instanceof r.Length?i.pxValue():this.node.offsetWidth;var o=this.height.value;for(var n in o=o instanceof r.Length?o.pxValue():this.node.offsetHeight,t){var a=t[n];if(a instanceof e.IconFastener){var s=a.view;null!==s&&(s.width.setAutoState(i),s.height.setAutoState(o),s.viewBox.setAutoState("0 0 "+i+" "+o))}}}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick)},e.prototype.onUnmount=function(){this.off("click",this.onClick),t.prototype.onUnmount.call(this)},Object.defineProperty(e.prototype,"hovers",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setHovers=function(t){this.hovers!==t&&Object.defineProperty(this,"hovers",{value:t,configurable:!0,enumerable:!0})},e.prototype.didStartHovering=function(){if(this.hovers){this.modifyMood(re.default,[re.hovering,1]);var t=this.getLook(Qt.timing);this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(this.getLookOr(Qt.backgroundColor,null),t)}},e.prototype.didStopHovering=function(){this.modifyMood(re.default,[re.hovering,void 0]);var t=this.getLook(Qt.timing);if(this.backgroundColor.isAuto()){var e=this.getLookOr(Qt.backgroundColor,null);null!==e&&(e=e.alpha(0)),this.backgroundColor.setAutoState(e,t)}},e.prototype.onClick=function(t){t.stopPropagation();for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonDidPress&&n.buttonDidPress(this)}var r=this.viewController;null!==r&&void 0!==r.buttonDidPress&&r.buttonDidPress(this)},e.IconFastener=jo.define({extends:void 0,type:Ur,child:!1,observe:!0,iconIndex:0,viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.name,null))}}),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:r.Length.px(24),updateFlags:Gi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:r.Length.px(24),updateFlags:Gi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Ir,state:null,type:Object,updateFlags:Gi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Sa),Fa=function(t){function e(e){var i=t.call(this,e)||this;return i.initDisclosureButton(),i}return w(e,t),e.prototype.initDisclosureButton=function(){this.addClass("disclosure-button"),this.display.setAutoState("flex"),this.justifyContent.setAutoState("center"),this.alignItems.setAutoState("center"),this.flexGrow.setAutoState(1),this.flexShrink.setAutoState(0),this.cursor.setAutoState("pointer");var t=this.append($n,"icon");t.width.setAutoState(24),t.height.setAutoState(24),t.viewBox.setAutoState("0 0 24 24");var e=t.append("polygon","arrow");e.points.setAutoState("0 4 -6 -2 -4.59 -3.41 0 1.17 4.59 -3.41 6 -2"),e.transform.setAutoState(r.Transform.translate(12,12).rotate(r.Angle.deg(0)))},Object.defineProperty(e.prototype,"icon",{get:function(){return this.getChildView("icon")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arrow",{get:function(){return this.icon.getChildView("arrow")},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.collapsedColor.setAutoState(e.getOr(Qt.color,i,null),o),this.expandedColor.setAutoState(e.getOr(Qt.accentColor,i,null),o)},e.prototype.onAnimate=function(e){if(t.prototype.onAnimate.call(this,e),this.disclosurePhase.isUpdated()||this.collapsedColor.isUpdated()||this.expandedColor.isUpdated()){var i=this.disclosurePhase.takeValue(),o=this.collapsedColor.takeValue(),n=this.expandedColor.takeValue();if(null!==o&&null!==n&&this.arrow.fill.isAuto()){var a=o.interpolateTo(n);this.arrow.fill.setAutoState(a(i))}var s=r.Transform.translate(12,12).rotate(r.Angle.deg(-180*i));this.arrow.transform.setAutoState(s)}},e.uncullFlags=Zn.uncullFlags|Gi.NeedsAnimate,m([So({type:Number,inherit:!0,updateFlags:Gi.NeedsAnimate})],e.prototype,"disclosurePhase",void 0),m([So({type:St,inherit:!0,state:null,updateFlags:Gi.NeedsAnimate})],e.prototype,"collapsedColor",void 0),m([So({type:St,inherit:!0,state:null,updateFlags:Gi.NeedsAnimate})],e.prototype,"expandedColor",void 0),e}(Zn),Ma=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"tokenState",{value:"expanded",enumerable:!0,configurable:!0}),Object.defineProperty(i,"headGesture",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"bodyGesture",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"footGesture",{value:null,enumerable:!0,configurable:!0}),i.onClickHead=i.onClickHead.bind(i),i.onClickBody=i.onClickBody.bind(i),i.onClickFoot=i.onClickFoot.bind(i),i.initToken(),i}return w(e,t),e.prototype.initToken=function(){this.addClass("token"),this.position.setAutoState("relative"),this.height.setAutoState(32),this.boxSizing.setAutoState("content-box"),this.userSelect.setAutoState("none"),this.shape.injectView()},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initShape=function(t){t.addClass("shape"),t.setStyle("position","absolute"),t.setStyle("top","0"),t.setStyle("left","0"),this.head.injectView(t),this.headIcon.setView(this.headIcon.createView()),this.body.injectView(t),this.foot.injectView(t),this.footIcon.setView(this.footIcon.createView())},e.prototype.initHead=function(t){t.addClass("head"),t.fillRule.setAutoState("evenodd"),t.pointerEvents.setAutoState("bounding-box"),t.cursor.setAutoState("pointer");var e=this.createHeadGesture(t);null!==e&&Object.defineProperty(this,"headGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createHeadGesture=function(t){return new qo(t,this.head)},e.prototype.initHeadIcon=function(t){t.addClass("head-icon"),t.pointerEvents.setAutoState("none")},e.prototype.initBody=function(t){t.addClass("body"),t.pointerEvents.setAutoState("fill"),t.cursor.setAutoState("pointer");var e=this.createBodyGesture(t);null!==e&&Object.defineProperty(this,"bodyGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createBodyGesture=function(t){return new qo(t,this.body)},e.prototype.initFoot=function(t){t.addClass("foot"),t.fillRule.setAutoState("evenodd"),t.pointerEvents.setAutoState("bounding-box"),t.cursor.setAutoState("pointer");var e=this.createFootGesture(t);null!==e&&Object.defineProperty(this,"footGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createFootGesture=function(t){return new qo(t,this.foot)},e.prototype.initFootIcon=function(t){t.addClass("foot-icon"),t.pointerEvents.setAutoState("none")},e.prototype.initLabelContainer=function(t){t.addClass("label"),t.display.setAutoState("block"),t.position.setAutoState("absolute"),t.top.setAutoState(0),t.left.setAutoState(0),t.overflowX.setAutoState("hidden"),t.overflowY.setAutoState("hidden"),t.pointerEvents.setAutoState("none")},e.prototype.initLabel=function(t){t.position.setAutoState("absolute"),t.top.setAutoState(0),t.bottom.setAutoState(0),t.left.setAutoState(0)},e.prototype.isExpanded=function(){return"expanded"===this.tokenState||"expanding"===this.tokenState},e.prototype.isCollapsed=function(){return"collapsed"===this.tokenState||"collapsing"===this.tokenState},Object.defineProperty(e.prototype,"fillLook",{get:function(){return Qt.accentColor},enumerable:!1,configurable:!0}),e.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsLayout)&&(t|=Gi.NeedsAnimate),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutToken()},e.prototype.layoutToken=function(){var t=this.paddingTop.getStateOr(r.Length.zero()).pxValue(),e=this.paddingRight.getStateOr(r.Length.zero()).pxValue(),i=this.paddingBottom.getStateOr(r.Length.zero()).pxValue(),o=this.paddingLeft.getStateOr(r.Length.zero()).pxValue(),n=this.node.clientHeight,a=n-t-i,s=a/2,l=Math.sqrt(4+2*s*2),u=Math.asin(l/(s+2)),h=s/2,p=s,d=s/2,c=this.expandedPhase.value,f=this.icon.state,v=this.accessory.state,y=0,g=0,w=this.label.view;null!==w&&(g+=h+(y=w.node.clientWidth)+p);var m=0;null!==v&&(m+=2*s+d);var b=a;0!==c&&0!==g&&(b+=2+c*g);var S=b;0!==c&&0!==m&&(b+=2+c*m);var C=b+o+e,P=n;this.width.setAutoState(b);var V=this.labelContainer.view;null!==V&&(V.display.setAutoState(0!==c?"block":"none"),V.left.setAutoState(o+a+2+h),V.top.setAutoState(t),V.width.setAutoState(c*y),V.height.setAutoState(a));var T=this.shape.view;null!==T&&(T.width.setAutoState(C),T.height.setAutoState(P),T.viewBox.setAutoState("0 0 "+C+" "+P));var A=this.head.view;if(null!==A){if((k=new lr).setPrecision(3),k.arc(o+s,t+s,s,-Math.PI/2,Math.PI/2*3),k.closePath(),null!==f&&!this.icon.embossed){var F=new ur(k),M=new r.BoxR2(o,t,o+a,t+a);f.render(F,M),this.headIcon.removeView()}A.d.setAutoState(k.toString())}var O=this.headIcon.view;if(null!==O)if(null!==f&&this.icon.embossed){(k=new lr).setPrecision(3);F=new ur(k),M=new r.BoxR2(o,t,o+a,t+a);f.render(F,M),O.d.setAutoState(k.toString()),this.headIcon.injectView()}else this.headIcon.removeView();var x=this.body.view;if(null!==x){if((k=new lr).setPrecision(3),0!==c){var D=1-c;k.arc(o+s,t+s,s+2,-Math.PI/2+u,Math.PI/2-u),k.arc(o+S-s-2*D,t+s,s+2*D,Math.PI/2-D*u,-Math.PI/2+D*u,!0),k.closePath()}x.d.setAutoState(k.toString())}var R=this.foot.view;if(null!==R&&null!==v){if((k=new lr).setPrecision(3),0!==c){D=1-c;if(k.arc(o+S-s,t+s,s+2,-Math.PI/2+u,Math.PI/2-u),k.arc(o+b-s-2*D,t+s,s+2*D,Math.PI/2-D*u,-Math.PI/2+D*u,!0),k.closePath(),null!==v&&!this.accessory.embossed){F=new ur(k),M=new r.BoxR2(o+S+2,t,o+S+2+2*s,t+2*s);v.render(F,M),this.headIcon.removeView()}}R.d.setAutoState(k.toString())}var L=this.footIcon.view;if(null!==L)if(null!==v&&this.accessory.embossed){var k;if((k=new lr).setPrecision(3),0!==c){F=new ur(k),M=new r.BoxR2(o+S+2,t,o+S+2+a,t+a);v.render(F,M)}L.d.setAutoState(k.toString()),this.footIcon.injectView()}else this.footIcon.removeView()},e.prototype.expand=function(t){"expanded"===this.tokenState&&1===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),"expanding"!==this.tokenState&&this.willExpand(),!1!==t?1!==this.expandedPhase.value?this.expandedPhase.setAutoState(1,t):setTimeout(this.didExpand.bind(this)):(this.expandedPhase.setAutoState(1),this.didExpand()))},e.prototype.willExpand=function(){Object.defineProperty(this,"tokenState",{value:"expanding",enumerable:!0,configurable:!0});var t=this.labelContainer.view;null!==t&&t.display.setAutoState("block");var e=this.viewController;null!==e&&void 0!==e.tokenWillExpand&&e.tokenWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tokenWillExpand&&r.tokenWillExpand(this)}},e.prototype.didExpand=function(){Object.defineProperty(this,"tokenState",{value:"expanded",enumerable:!0,configurable:!0}),this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidExpand&&o.tokenDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidExpand&&n.tokenDidExpand(this)},e.prototype.collapse=function(t){"collapsed"===this.tokenState&&0===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),"collapsing"!==this.tokenState&&this.willCollapse(),!1!==t?0!==this.expandedPhase.value?this.expandedPhase.setAutoState(0,t):setTimeout(this.didCollapse.bind(this)):(this.expandedPhase.setAutoState(0),this.didCollapse()))},e.prototype.willCollapse=function(){Object.defineProperty(this,"tokenState",{value:"collapsing",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.tokenWillCollapse&&t.tokenWillCollapse(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenWillCollapse&&n.tokenWillCollapse(this)}},e.prototype.didCollapse=function(){Object.defineProperty(this,"tokenState",{value:"collapsed",enumerable:!0,configurable:!0}),this.requireUpdate(Gi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidCollapse&&o.tokenDidCollapse(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidCollapse&&n.tokenDidCollapse(this)},e.prototype.toggle=function(t){var e=this.tokenState;"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},e.prototype.onClickHead=function(t){this.didPressHead()},e.prototype.didPressHead=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressHead&&o.tokenDidPressHead(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressHead&&n.tokenDidPressHead(this)},e.prototype.onClickBody=function(t){this.didPressBody()},e.prototype.didPressBody=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressBody&&o.tokenDidPressBody(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressBody&&n.tokenDidPressBody(this)},e.prototype.onClickFoot=function(t){this.didPressFoot()},e.prototype.didPressFoot=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressFoot&&o.tokenDidPressFoot(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressFoot&&n.tokenDidPressFoot(this)},m([So({type:Number,state:1,updateFlags:Gi.NeedsLayout,onEnd:function(t){var e=this.owner.tokenState;"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],e.prototype,"expandedPhase",void 0),m([jo({key:!0,type:$n,onSetView:function(t){null!==t&&this.owner.initShape(t)}})],e.prototype,"shape",void 0),m([jo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initHead(t)},viewDidMount:function(t){t.on("click",this.owner.onClickHead)},viewWillUnmount:function(t){t.off("click",this.owner.onClickHead)},viewDidApplyTheme:function(t,e,i,o){o.fill.setAutoState(t.getOr(this.owner.fillLook,e,null),i);var n=this.owner.headIcon.view;if(null!==n&&n.fill.isAuto()){var r=t.getOr(this.owner.fillLook,e.updated(re.embossed,1),null);n.fill.setAutoState(r,i)}},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,1]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.headIcon.view;if(null!==i&&i.fill.isAuto()){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setAutoState(o,e)}},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,void 0]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.headIcon.view;if(null!==i&&i.fill.isAuto()){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setAutoState(o,e)}},didBeginPress:function(t,e){var i=this.owner.headGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.headGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.headGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.headGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"head",void 0),m([jo({extends:void 0,key:!0,type:$n.path,child:!1,onSetView:function(t){null!==t&&this.owner.initHeadIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.insertChildView(e,this.owner.body.view,o)}})],e.prototype,"headIcon",void 0),m([ho({extends:void 0,type:Object,state:null,updateFlags:Gi.NeedsLayout,embossed:!0})],e.prototype,"icon",void 0),m([jo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initBody(t)},viewDidMount:function(t){t.on("click",this.owner.onClickBody)},viewWillUnmount:function(t){t.off("click",this.owner.onClickBody)},viewDidApplyTheme:function(t,e,i,o){o.fill.setAutoState(t.getOr(this.owner.fillLook,e,null),i);var n=this.owner.label.view;null!==n&&n.color.isAuto()&&n.color.setAutoState(t.getOr(Qt.backgroundColor,e,null),i)},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,1]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.label.view;null!==i&&i.color.isAuto()&&i.color.setAutoState(t.getLookOr(Qt.backgroundColor,null),e)},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,void 0]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.label.view;null!==i&&i.color.isAuto()&&i.color.setAutoState(t.getLookOr(Qt.backgroundColor,null),e)},didBeginPress:function(t,e){var i=this.owner.bodyGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.bodyGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.bodyGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.bodyGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"body",void 0),m([jo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initFoot(t)},viewDidMount:function(t){t.on("click",this.owner.onClickFoot)},viewWillUnmount:function(t){t.off("click",this.owner.onClickFoot)},viewDidApplyTheme:function(t,e,i,o){o.fill.setAutoState(t.getOr(this.owner.fillLook,e,null),i);var n=this.owner.footIcon.view;if(null!==n&&n.fill.isAuto()){var r=t.getOr(this.owner.fillLook,e.updated(re.embossed,1),null);n.fill.setAutoState(r,i)}},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,1]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.footIcon.view;if(null!==i&&i.fill.isAuto()){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setAutoState(o,e)}},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[re.hovering,void 0]);var e=t.getLook(Qt.timing);t.fill.setAutoState(t.getLookOr(this.owner.fillLook,null),e);var i=this.owner.footIcon.view;if(null!==i&&i.fill.isAuto()){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setAutoState(o,e)}},didBeginPress:function(t,e){var i=this.owner.footGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.footGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.footGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.footGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"foot",void 0),m([jo({extends:void 0,key:!0,type:$n.path,child:!1,onSetView:function(t){null!==t&&this.owner.initFootIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.appendChildView(e,o)}})],e.prototype,"footIcon",void 0),m([ho({extends:void 0,type:Object,state:null,updateFlags:Gi.NeedsLayout,embossed:!0})],e.prototype,"accessory",void 0),m([jo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initLabelContainer(t)}})],e.prototype,"labelContainer",void 0),m([jo({key:!0,child:!1,type:Zn,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}}})],e.prototype,"label",void 0),e}(Zn),Oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"tokenState",{get:function(){var t=this.view;return null!==t?t.tokenState:null},enumerable:!1,configurable:!0}),e.prototype.tokenWillExpand=function(t){},e.prototype.tokenDidExpand=function(t){},e.prototype.tokenWillCollapse=function(t){var e=t.label.view;null!==e&&e.node.blur()},e.prototype.tokenDidCollapse=function(t){},e.prototype.tokenDidPressHead=function(t){t.toggle();var e=t.label.view;null!==e&&t.isExpanded()&&e.node.focus()},e.prototype.tokenDidPressBody=function(t){},e.prototype.tokenDidPressFoot=function(t){},e}(_n),xa=function(t){function e(e){var i=t.call(this,e)||this;return i.onInputUpdate=i.onInputUpdate.bind(i),i.onInputChange=i.onInputChange.bind(i),i.onInputKey=i.onInputKey.bind(i),i}return w(e,t),e.prototype.initToken=function(){this.stylesheet.injectView(),t.prototype.initToken.call(this),this.addClass("input-token"),this.label.setView(this.label.createView())},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initStylesheet=function(t){var i=t.sheet;if(null!==i){var o=new e.PlaceholderRule(i,"placeholder");i.setCssRule("placeholder",o)}},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.paddingTop.setAutoState(0),e.paddingRight.setAutoState(0),e.paddingBottom.setAutoState(0),e.paddingLeft.setAutoState(0),e.borderTopStyle.setAutoState("none"),e.borderRightStyle.setAutoState("none"),e.borderBottomStyle.setAutoState("none"),e.borderLeftStyle.setAutoState("none"),e.boxSizing.setAutoState("border-box"),e.backgroundColor.setAutoState(St.transparent()),e.appearance.setAutoState("none"),e.outlineStyle.setAutoState("none"),e.pointerEvents.setAutoState("auto")},e.prototype.createBodyGesture=function(t){return null},Object.defineProperty(e.prototype,"placeholderLook",{get:function(){return Qt.neutralColor},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.stylesheet.view;if(null!==n){var r=n.getCssRule("placeholder");null!==r&&r.color.setAutoState(e.getOr(this.placeholderLook,i,null),o)}var a=this.label.view;if(null!==a){var s=e.getOr(Qt.font,i,null);null!==s&&(void 0!==s.style&&a.fontStyle.setAutoState(s.style),void 0!==s.variant&&a.fontVariant.setAutoState(s.variant),void 0!==s.weight&&a.fontWeight.setAutoState(s.weight),void 0!==s.stretch&&a.fontStretch.setAutoState(s.stretch),void 0!==s.size&&a.fontSize.setAutoState(s.size),void 0!==s.height&&a.lineHeight.setAutoState(s.height),a.fontFamily.setAutoState(s.family))}},e.prototype.onInputUpdate=function(t){var e=this.label.view;null!==e&&this.didUpdateInput(e)},e.prototype.didUpdateInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidUpdateInput&&n.tokenDidUpdateInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidUpdateInput&&r.tokenDidUpdateInput(t,this)},e.prototype.onInputChange=function(t){var e=this.label.view;null!==e&&this.didChangeInput(e)},e.prototype.didChangeInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidChangeInput&&n.tokenDidChangeInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidChangeInput&&r.tokenDidChangeInput(t,this)},e.prototype.onInputKey=function(t){var e=this.label.view;null!==e&&"Enter"===t.key&&this.didAcceptInput(e)},e.prototype.didAcceptInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidAcceptInput&&n.tokenDidAcceptInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidAcceptInput&&r.tokenDidAcceptInput(t,this)},e.PlaceholderRule=xn.define({css:"::placeholder {}"}),m([jo({key:!0,type:Zn.style,child:!0,observe:!0,viewDidMount:function(t){this.owner.initStylesheet(t)}})],e.prototype,"stylesheet",void 0),m([jo({child:!1,type:Zn.input,observe:!0,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}},viewDidMount:function(t){t.on("input",this.owner.onInputUpdate),t.on("change",this.owner.onInputChange),t.on("keydown",this.owner.onInputKey)},viewWillUnmount:function(t){t.off("input",this.owner.onInputUpdate),t.off("change",this.owner.onInputChange),t.off("keydown",this.owner.onInputKey)}})],e.prototype,"label",void 0),e}(Ma),Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.tokenDidUpdateInput=function(t,e){},e.prototype.tokenDidChangeInput=function(t,e){},e.prototype.tokenDidAcceptInput=function(t,e){},e}(Oa),Ra=function(){function t(t,e,i,o,n,r,a,s,l,u){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"optional",{value:n,enumerable:!0}),Object.defineProperty(this,"textColor",{value:r,enumerable:!0}),Object.defineProperty(this,"width",{value:a,enumerable:!0}),Object.defineProperty(this,"left",{value:s,enumerable:!0}),Object.defineProperty(this,"right",{value:l,enumerable:!0}),Object.defineProperty(this,"hidden",{value:u,enumerable:!0})}return t.prototype.withFlex=function(t,e,i){return i=void 0!==i?r.Length.fromAny(i):this.basis,this.copy(this.key,t,e,i,this.optional,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.asOptional=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,t,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.withTextColor=function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,t,this.width,this.left,this.right,this.hidden)},t.prototype.asHidden=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.textColor,this.width,this.left,this.right,t)},t.prototype.resized=function(t,e,i,o){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),void 0===o&&(o=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.textColor,t,e,i,o)},t.prototype.copy=function(e,i,o,n,r,a,s,l,u,h){return new t(e,i,o,n,r,a,s,l,u,h)},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equivalentTo(i.basis,o)&&this.optional===i.optional&&e.Equivalent(this.textColor,i.textColor,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&this.optional===i.optional&&e.Equals(this.textColor,i.textColor)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&this.hidden===i.hidden)},t.prototype.debug=function(t){t=t.write("ColLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis),this.optional&&(t=t.write(", ").debug(this.optional)),null!==this.textColor&&(t=t.write(", ").debug(this.textColor)),t=t.write(41),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n,a,s){return void 0===i&&(i=0),void 0===o&&(o=1),n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),void 0===a&&(a=!1),void 0===s&&(s=null),null===s||s instanceof Qt||(s=St.fromAny(s)),new t(e,i,o,n,a,s,null,null,null,!1)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var a=e.basis;a=void 0!==a?r.Length.fromAny(a):r.Length.zero();var s=e.optional;void 0===s&&(s=!1);var l=e.textColor;void 0===l&&(l=null),null===l||l instanceof Qt||(l=St.fromAny(l));var u=e.width;u=null!=u?r.Length.fromAny(u):null;var h=e.left;h=null!=h?r.Length.fromAny(h):null;var p=e.right;p=null!=p?r.Length.fromAny(p):null;var d=e.hidden;return void 0===d&&(d=!1),new t(i,o,n,a,s,l,u,h,p,d)},t}(),La=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"colSpacing",{value:o,enumerable:!0}),Object.defineProperty(this,"cols",{value:n,enumerable:!0})}return t.prototype.getCol=function(t){for(var e=this.cols,i=0,o=e.length;i<o;i+=1){var n=e[i];if(t===n.key)return n}return null},t.prototype.resized=function(i,o,n,a){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===a?a=this.colSpacing:null!==a&&(a=r.Length.fromAny(a)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.colSpacing,a))return this;for(var s=this.cols,l=s.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==a?a.pxValue(h):0,f=0,v=0,y=0,g=p+d,w=p,m=0;m<l;m+=1){0!==m&&(g+=c,w+=c);var b=(T=s[m]).basis.pxValue(h);u[m]=T.resized(b,w,h-b-w,!1),f+=T.grow,v+=T.shrink,T.optional&&(y+=1),g+=b,w+=b}if(g>h&&y>0){for(m=l-1;m>=0&&y>0;){b=(T=u[m]).width.pxValue();if(T.optional&&(u[m]=T.resized(0,w,h-w,!0),f-=T.grow,v-=T.shrink,y-=1,g-=b),w-=b,0!==m&&(g-=c,w-=c),g<=h)break;m-=1}for(m+=1;m<l;){if(!(T=u[m]).optional){g+=c,w+=c;b=T.basis.pxValue(h);u[m]=T.resized(b,w,h-b-w),w+=b}m+=1}}if(g<h&&f>0){var S=h-g,C=p,P=0;for(m=0;m<l;m+=1){if((T=u[m]).hidden)u[m]=T.resized(0,C+c,h-C-c);else{0!==P&&(C+=c);b=T.basis.pxValue(h)+S*(T.grow/f);u[m]=T.resized(b,C,h-b-C),C+=b,P+=1}}}else if(g>h&&v>0){S=g-h;var V=p;for(P=0,m=0;m<l;m+=1){var T;if((T=u[m]).hidden)u[m]=T.resized(0,V+c,h-V-c);else{0!==P&&(V+=c);b=T.basis.pxValue(h)-S*(T.shrink/v);u[m]=T.resized(b,V,h-b-V),V+=b,P+=1}}}return new t(i,o,n,a,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.cols,n=e.cols,r=o.length;if(r===n.length){for(var a=0;a<r;a+=1)if(!o[a].equivalentTo(n[a],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.colSpacing,i.colSpacing)&&e.Arrays.equal(this.cols,i.cols))},t.prototype.debug=function(t){t=t.write("TableLayout").write(46).write("of").write(40);for(var e=0,i=this.cols.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.cols[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.colSpacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.colSpacing).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=Ra.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var a=e.colSpacing;a=null!=a?r.Length.fromAny(a):null;for(var s=e.cols.length,l=new Array(s),u=0;u<s;u+=1)l[u]=Ra.fromAny(e.cols[u]);return new t(i,o,n,a,l)},t}(),ka=function(t){function e(e){var i=t.call(this,e)||this;return i.initCell(),i}return w(e,t),e.prototype.initCell=function(){this.addClass("table-cell"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.setTextColor=function(t){this.color.isAuto()&&(t instanceof Qt&&(t=this.getLookOr(t,null)),this.color.setAutoState(t))},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.color.isAuto()){var n=this.textColor.state;n instanceof Qt&&(n=this.getLookOr(n,null)),this.color.setAutoState(n,o)}},e.prototype.createContent=function(t){var e=Zn.span.create();return e.alignSelf.setAutoState("center"),e.whiteSpace.setAutoState("nowrap"),e.textOverflow.setAutoState("ellipsis"),e.overflowX.setAutoState("hidden"),e.overflowY.setAutoState("hidden"),void 0!==t&&e.text(t),e},e.prototype.initContent=function(t){},e.prototype.attachContent=function(t){},e.prototype.detachContent=function(t){},e.prototype.willSetContent=function(t,e){var i=this.viewController;null!==i&&void 0!==i.cellViewWillSetContent&&i.cellViewWillSetContent(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.cellViewWillSetContent&&a.cellViewWillSetContent(t,e,this)}},e.prototype.onSetContent=function(t,e){null!==e&&this.detachContent(e),null!==t&&(this.attachContent(t),this.initContent(t))},e.prototype.didSetContent=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellViewDidSetContent&&r.cellViewDidSetContent(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.cellViewDidSetContent&&a.cellViewDidSetContent(t,e,this)},m([ho({state:null,didSetState:function(t,e){this.owner.setTextColor(t)}})],e.prototype,"textColor",void 0),m([jo({key:!0,type:Zn,fromAny:function(t){return t instanceof Zn?t:this.owner.createContent(t)},willSetView:function(t,e){this.owner.willSetContent(t,e)},onSetView:function(t,e){this.owner.onSetContent(t,e)},didSetView:function(t,e){this.owner.didSetContent(t,e)}})],e.prototype,"content",void 0),e}(Zn),ja=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"content",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setContent=function(t){var i=this.content;e.Equals(t,i)||(this.willSetContent(t,i),Object.defineProperty(this,"content",{value:t,enumerable:!0,configurable:!0}),this.onSetContent(t,i),this.didSetContent(t,i))},i.prototype.willSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellTraitWillSetContent&&r.cellTraitWillSetContent(t,e,this)}},i.prototype.onSetContent=function(t,e){},i.prototype.didSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellTraitDidSetContent&&r.cellTraitDidSetContent(t,e,this)}},i}(st),Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.setContent=function(t){var e=this.cell.trait;null!==e&&e.setContent(t)},e.prototype.initCellTrait=function(t){},e.prototype.attachCellTrait=function(t){null!==this.cell.view&&this.setCellContentView(t.content,t)},e.prototype.detachCellTrait=function(t){null!==this.cell.view&&this.setCellContentView(null,t)},e.prototype.willSetCellTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellWillSetTrait&&r.cellWillSetTrait(t,e,this)}},e.prototype.onSetCellTrait=function(t,e){null!==e&&this.detachCellTrait(e),null!==t&&(this.attachCellTrait(t),this.initCellTrait(t))},e.prototype.didSetCellTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellDidSetTrait&&r.cellDidSetTrait(t,e,this)}},e.prototype.onSetCellTraitContent=function(t,e,i){this.setCellContentView(t,i)},e.prototype.createCellView=function(){return ka.create()},e.prototype.initCellView=function(t){},e.prototype.themeCellView=function(t,e,i,o){},e.prototype.attachCellView=function(t){this.content.setView(t.content.view);var e=this.cell.trait;null!==e&&this.setCellContentView(e.content,e)},e.prototype.detachCellView=function(t){this.content.setView(null)},e.prototype.willSetCellView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellWillSetView&&r.cellWillSetView(t,e,this)}},e.prototype.onSetCellView=function(t,e){null!==e&&this.detachCellView(e),null!==t&&(this.attachCellView(t),this.initCellView(t))},e.prototype.didSetCellView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellDidSetView&&r.cellDidSetView(t,e,this)}},e.prototype.createCellContentView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setCellContentView=function(t,e){var i=this.cell.view;if(null!==i){var o=null!==t?this.createCellContentView(t,e):null;i.content.setView(o)}},e.prototype.initCellContentView=function(t){},e.prototype.attachCellContentView=function(t){},e.prototype.detachCellContentView=function(t){},e.prototype.willSetCellContentView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellWillSetContentView&&r.cellWillSetContentView(t,e,this)}},e.prototype.onSetCellContentView=function(t,e){null!==e&&this.detachCellContentView(e),null!==t&&(this.attachCellContentView(t),this.initCellContentView(t))},e.prototype.didSetCellContentView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellDidSetContentView&&r.cellDidSetContentView(t,e,this)}},e.CellFastener=fa.define({viewType:ka,observeView:!0,willSetView:function(t,e){this.owner.willSetCellView(t,e)},onSetView:function(t,e){this.owner.onSetCellView(t,e)},didSetView:function(t,e){this.owner.didSetCellView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeCellView(o,t,e,i)},cellViewDidSetContent:function(t,e){this.owner.content.setView(t)},createView:function(){return this.owner.createCellView()},traitType:ja,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetCellTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetCellTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetCellTrait(t,e)},cellTraitDidSetContent:function(t,e,i){this.owner.onSetCellTraitContent(t,e,i)}}),m([fa({extends:e.CellFastener})],e.prototype,"cell",void 0),m([da({willSetView:function(t,e){this.owner.willSetCellContentView(t,e)},onSetView:function(t,e){this.owner.onSetCellContentView(t,e)},didSetView:function(t,e){this.owner.didSetCellContentView(t,e)}})],e.prototype,"content",void 0),e}(ma),Ea=function(t){function e(e){var i=t.call(this,e)||this;return i.initCol(),i}return w(e,t),e.prototype.initCol=function(){this.addClass("table-col"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.createHeader=function(t){var e=Zn.span.create();return e.alignSelf.setAutoState("center"),void 0!==t&&e.text(t),e},e.prototype.initHeader=function(t){},e.prototype.attachHeader=function(t){},e.prototype.detachHeader=function(t){},e.prototype.willSetHeader=function(t,e){var i=this.viewController;null!==i&&void 0!==i.colViewWillSetHeader&&i.colViewWillSetHeader(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.colViewWillSetHeader&&a.colViewWillSetHeader(t,e,this)}},e.prototype.onSetHeader=function(t,e){null!==e&&this.detachHeader(e),null!==t&&(this.attachHeader(t),this.initHeader(t))},e.prototype.didSetHeader=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colViewDidSetHeader&&r.colViewDidSetHeader(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.colViewDidSetHeader&&a.colViewDidSetHeader(t,e,this)},m([jo({key:!0,type:Zn,fromAny:function(t){return t instanceof Zn?t:this.owner.createHeader(t)},willSetView:function(t,e){this.owner.willSetHeader(t,e)},onSetView:function(t,e){this.owner.onSetHeader(t,e)},didSetView:function(t,e){this.owner.didSetHeader(t,e)}})],e.prototype,"header",void 0),e}(Zn),Wa=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"layout",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"header",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setLayout=function(t){null!==t&&(t=Ra.fromAny(t));var i=this.layout;e.Equals(t,i)||(this.willSetLayout(t,i),Object.defineProperty(this,"layout",{value:t,enumerable:!0,configurable:!0}),this.onSetLayout(t,i),this.didSetLayout(t,i))},i.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colTraitWillSetLayout&&r.colTraitWillSetLayout(t,e,this)}},i.prototype.onSetLayout=function(t,e){},i.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colTraitDidSetLayout&&r.colTraitDidSetLayout(t,e,this)}},i.prototype.setHeader=function(t){var i=this.header;e.Equals(t,i)||(this.willSetHeader(t,i),Object.defineProperty(this,"header",{value:t,enumerable:!0,configurable:!0}),this.onSetHeader(t,i),this.didSetHeader(t,i))},i.prototype.willSetHeader=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colTraitWillSetHeader&&r.colTraitWillSetHeader(t,e,this)}},i.prototype.onSetHeader=function(t,e){},i.prototype.didSetHeader=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colTraitDidSetHeader&&r.colTraitDidSetHeader(t,e,this)}},i}(st),Na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.setHeader=function(t){var e=this.col.trait;null!==e&&e.setHeader(t)},e.prototype.initColTrait=function(t){},e.prototype.attachColTrait=function(t){null!==this.col.view&&this.setColHeaderView(t.header,t)},e.prototype.detachColTrait=function(t){null!==this.col.view&&this.setColHeaderView(null,t)},e.prototype.willSetColTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colWillSetTrait&&r.colWillSetTrait(t,e,this)}},e.prototype.onSetColTrait=function(t,e){null!==e&&this.detachColTrait(e),null!==t&&(this.attachColTrait(t),this.initColTrait(t))},e.prototype.didSetColTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colDidSetTrait&&r.colDidSetTrait(t,e,this)}},e.prototype.willSetColLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colWillSetLayout&&r.colWillSetLayout(t,e,this)}},e.prototype.onSetColLayout=function(t,e){},e.prototype.didSetColLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colDidSetLayout&&r.colDidSetLayout(t,e,this)}},e.prototype.onSetColTraitHeader=function(t,e,i){this.setColHeaderView(t,i)},e.prototype.createColView=function(){return Ea.create()},e.prototype.initColView=function(t){},e.prototype.themeColView=function(t,e,i,o){},e.prototype.attachColView=function(t){this.header.setView(t.header.view);var e=this.col.trait;null!==e&&this.setColHeaderView(e.header,e)},e.prototype.detachColView=function(t){this.header.setView(null)},e.prototype.willSetColView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colWillSetView&&r.colWillSetView(t,e,this)}},e.prototype.onSetColView=function(t,e){null!==e&&this.detachColView(e),null!==t&&(this.attachColView(t),this.initColView(t))},e.prototype.didSetColView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colDidSetView&&r.colDidSetView(t,e,this)}},e.prototype.createColHeaderView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setColHeaderView=function(t,e){var i=this.col.view;if(null!==i){var o=null!==t?this.createColHeaderView(t,e):null;i.header.setView(o)}},e.prototype.initColHeaderView=function(t){},e.prototype.attachColHeaderView=function(t){},e.prototype.detachColHeaderView=function(t){},e.prototype.willSetColHeaderView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colWillSetHeaderView&&r.colWillSetHeaderView(t,e,this)}},e.prototype.onSetColHeaderView=function(t,e){null!==e&&this.detachColHeaderView(e),null!==t&&(this.attachColHeaderView(t),this.initColHeaderView(t))},e.prototype.didSetColHeaderView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.colDidSetHeaderView&&r.colDidSetHeaderView(t,e,this)}},e.ColFastener=fa.define({viewType:Ea,observeView:!0,willSetView:function(t,e){this.owner.willSetColView(t,e)},onSetView:function(t,e){this.owner.onSetColView(t,e)},didSetView:function(t,e){this.owner.didSetColView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeColView(o,t,e,i)},colViewDidSetHeader:function(t,e){this.owner.header.setView(t)},createView:function(){return this.owner.createColView()},traitType:Wa,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetColTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetColTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetColTrait(t,e)},colTraitWillSetLayout:function(t,e){this.owner.willSetColLayout(t,e)},colTraitDidSetLayout:function(t,e){this.owner.onSetColLayout(t,e),this.owner.didSetColLayout(t,e)},colTraitDidSetHeader:function(t,e,i){this.owner.onSetColTraitHeader(t,e,i)}}),m([fa({extends:e.ColFastener})],e.prototype,"col",void 0),m([da({willSetView:function(t,e){this.owner.willSetColHeaderView(t,e)},onSetView:function(t,e){this.owner.onSetColHeaderView(t,e)},didSetView:function(t,e){this.owner.didSetColHeaderView(t,e)}})],e.prototype,"header",void 0),e}(ma),Ua=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"cellFasteners",{value:[],enumerable:!0}),i.initRow(),i}return w(e,t),e.prototype.initRow=function(){this.addClass("table-row"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createCellFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){t.display.setAutoState("none"),t.position.setAutoState("absolute"),t.left.setAutoState(0),t.top.setAutoState(0),t.width.setAutoState(0),t.height.setAutoState(this.height.state)},e.prototype.attachCell=function(t,e){},e.prototype.detachCell=function(t,e){},e.prototype.willSetCell=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.rowViewWillSetCell&&n.rowViewWillSetCell(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.rowViewWillSetCell&&l.rowViewWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.rowViewDidSetCell&&s.rowViewDidSetCell(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.rowViewDidSetCell&&l.rowViewDidSetCell(t,e,i,this)},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCell=function(t){return t instanceof ka?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectCell(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectCell(e);null!==i&&this.removeCell(i)},e.prototype.displayChildViews=function(e,i,o){0!=(e&Gi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.layout.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof ka){var a=t.key,s=null!==n&&void 0!==a?n.getCol(a):null;null!==s?(t.display.setAutoState(s.hidden?"none":"flex"),t.left.setAutoState(s.left),t.width.setAutoState(s.width),t.height.setAutoState(r),t.textColor.setAutoState(s.textColor)):(t.display.setAutoState("none"),t.left.setAutoState(null),t.width.setAutoState(null),t.height.setAutoState(null))}o.call(this,t,e,i)}))},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountViewFasteners.call(this)},e.CellFastener=jo.define({type:ka,child:!1,willSetView:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),m([ho({type:La,state:null,inherit:!0})],e.prototype,"layout",void 0),m([ho({type:Number,inherit:!0})],e.prototype,"colSpacing",void 0),e}(Zn),Ba=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"cellFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createCellFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){},e.prototype.attachCell=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCell=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.rowTraitWillSetCell&&s.rowTraitWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.rowTraitDidSetCell&&s.rowTraitDidSetCell(t,e,i,this)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectCellModel=function(t){return t.getTrait(ja)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellModel(n);null!==r&&this.insertCell(r)}},e.prototype.detectCellTrait=function(t){return t instanceof ja?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellTrait(n);null!==r&&this.insertCell(r)}},e.prototype.didSetModel=function(e,i){null!==e&&(this.detectModels(e),this.detectTraits(e)),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectCellModel(e);if(null!==o){var n=null!==i?this.detectCellModel(i):null;this.insertCell(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectCellModel(e);null!==i&&this.removeCell(i)},e.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectCellTrait(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectCellTrait(e);null!==i&&this.removeCell(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCells()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingCells()},e.CellFastener=G.define({type:ja,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),e}(st),Ha=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"cellFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initRowTrait=function(t){},e.prototype.attachRowTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertCellTrait(n)}},e.prototype.detachRowTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeCellTrait(n)}},e.prototype.willSetRowTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.rowWillSetTrait&&r.rowWillSetTrait(t,e,this)}},e.prototype.onSetRowTrait=function(t,e){null!==e&&this.detachRowTrait(e),null!==t&&(this.attachRowTrait(t),this.initRowTrait(t))},e.prototype.didSetRowTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.rowDidSetTrait&&r.rowDidSetTrait(t,e,this)}},e.prototype.createRowView=function(){return Ua.create()},e.prototype.initRowView=function(t){},e.prototype.themeRowView=function(t,e,i,o){},e.prototype.attachRowView=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.cell.view;if(null!==r&&null===r.parentView){var a=n.cell.trait;null!==a&&n.cell.injectView(t,void 0,void 0,a.key)}}}},e.prototype.detachRowView=function(t){},e.prototype.willSetRowView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.rowWillSetView&&r.rowWillSetView(t,e,this)}},e.prototype.onSetRowView=function(t,e){null!==e&&this.detachRowView(e),null!==t&&(this.attachRowView(t),this.initRowView(t))},e.prototype.didSetRowView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.rowDidSetView&&r.rowDidSetView(t,e,this)}},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createCellFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCell=function(t){return new Ia},e.prototype.initCell=function(t,e){var i=t.cell.trait;null!==i&&this.initCellTrait(i,e);var o=t.cell.view;null!==o&&this.initCellView(o,e)},e.prototype.attachCell=function(t,e){var i=t.cell.trait;null!==i&&this.attachCellTrait(i,e);var o=t.cell.view;null!==o&&this.attachCellView(o,e)},e.prototype.detachCell=function(t,e){var i=t.cell.view;null!==i&&this.detachCellView(i,e);var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e)},e.prototype.willSetCell=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowWillSetCell&&a.rowWillSetCell(t,e,i)}},e.prototype.onSetCell=function(t,e,i){null!==e&&this.detachCell(e,i),null!==t&&(this.attachCell(t,i),this.initCell(t,i))},e.prototype.didSetCell=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowDidSetCell&&a.rowDidSetCell(t,e,i)}},e.prototype.insertCellTrait=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.cell.trait===t)return;a.cell.trait===e&&(o=a)}}var s=this.createCell(t);if(null!==s&&(s.cell.setTrait(t),this.insertChildComponent(s,o,t.key),null===s.cell.view)){var l=this.createCellView(s),u=null;null!==o&&(u=o.cell.view);var h=this.row.view;null!==h?s.cell.injectView(h,l,u,t.key):s.cell.setView(l,u)}},e.prototype.removeCellTrait=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.cell.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initCellTrait=function(t,e){},e.prototype.attachCellTrait=function(t,e){},e.prototype.detachCellTrait=function(t,e){},e.prototype.willSetCellTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowWillSetCellTrait&&a.rowWillSetCellTrait(t,e,i)}},e.prototype.onSetCellTrait=function(t,e,i){null!==e&&this.detachCellTrait(e,i),null!==t&&(this.attachCellTrait(e,i),this.initCellTrait(t,i))},e.prototype.didSetCellTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowDidSetCellTrait&&a.rowDidSetCellTrait(t,e,i)}},e.prototype.createCellView=function(t){return t.cell.createView()},e.prototype.initCellView=function(t,e){var i=t.content.view;null!==i&&this.initCellContentView(i,e)},e.prototype.attachCellView=function(t,e){var i=t.content.view;null!==i&&this.attachCellContentView(i,e)},e.prototype.detachCellView=function(t,e){var i=t.content.view;null!==i&&this.detachCellContentView(i,e),t.remove()},e.prototype.willSetCellView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowWillSetCellView&&a.rowWillSetCellView(t,e,i)}},e.prototype.onSetCellView=function(t,e,i){null!==e&&this.detachCellView(e,i),null!==t&&(this.attachCellView(t,i),this.initCellView(t,i))},e.prototype.didSetCellView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowDidSetCellView&&a.rowDidSetCellView(t,e,i)}},e.prototype.initCellContentView=function(t,e){},e.prototype.attachCellContentView=function(t,e){},e.prototype.detachCellContentView=function(t,e){},e.prototype.willSetCellContentView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowWillSetCellContentView&&a.rowWillSetCellContentView(t,e,i)}},e.prototype.onSetCellContentView=function(t,e,i){null!==e&&this.detachCellContentView(e,i),null!==t&&(this.attachCellContentView(t,i),this.initCellContentView(t,i))},e.prototype.didSetCellContentView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.rowDidSetCellContentView&&a.rowDidSetCellContentView(t,e,i)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.getCellFastener=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.cell.trait===t)return n}return null},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCellComponent=function(t){return t instanceof Ia?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectCellComponent(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectCellComponent(e);null!==i&&this.removeCell(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.RowFastener=fa.define({viewType:Ua,observeView:!0,willSetView:function(t,e){this.owner.willSetRowView(t,e)},onSetView:function(t,e){this.owner.onSetRowView(t,e)},didSetView:function(t,e){this.owner.didSetRowView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeRowView(o,t,e,i)},createView:function(){return this.owner.createRowView()},traitType:Ba,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetRowTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetRowTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetRowTrait(t,e)},rowTraitWillSetCell:function(t,e,i){null!==e&&this.owner.removeCellTrait(e)},rowTraitDidSetCell:function(t,e,i){null!==t&&this.owner.insertCellTrait(t,i)}}),e.CellFastener=ya.define({type:Ia,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetCell(t,e,this)},onSetComponent:function(t,e){this.owner.onSetCell(t,e,this)},didSetComponent:function(t,e){this.owner.didSetCell(t,e,this)},cellWillSetTrait:function(t,e){this.owner.willSetCellTrait(t,e,this)},cellDidSetTrait:function(t,e){this.owner.onSetCellTrait(t,e,this),this.owner.didSetCellTrait(t,e,this)},cellWillSetView:function(t,e){this.owner.willSetCellView(t,e,this)},cellDidSetView:function(t,e){this.owner.onSetCellView(t,e,this),this.owner.didSetCellView(t,e,this)},cellWillSetContentView:function(t,e){this.owner.willSetCellContentView(t,e,this)},cellDidSetContentView:function(t,e){this.owner.onSetCellContentView(t,e,this),this.owner.didSetCellContentView(t,e,this)}}),m([fa({extends:e.RowFastener})],e.prototype,"row",void 0),e}(ma),qa=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"rowFasteners",{value:[],enumerable:!0}),Object.defineProperty(i,"visibleViews",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(i,"visibleFrame",{value:new r.BoxR2(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initTable(),i}return w(e,t),e.prototype.initTable=function(){this.addClass("table")},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createRowFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initRow=function(t,e){t.display.setAutoState("none"),t.position.setAutoState("absolute"),t.left.setAutoState(0),t.top.setAutoState(null);var i=this.layout.state;t.width.setAutoState(null!==i?i.width:null),t.height.setAutoState(this.rowHeight.getState()),t.opacity.setAutoState(0),t.setCulled(!0)},e.prototype.attachRow=function(t,e){},e.prototype.detachRow=function(t,e){},e.prototype.willSetRow=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.tableViewWillSetRow&&n.tableViewWillSetRow(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.tableViewWillSetRow&&l.tableViewWillSetRow(t,e,i,this)}},e.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},e.prototype.didSetRow=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableViewDidSetRow&&s.tableViewDidSetRow(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.tableViewDidSetRow&&l.tableViewDidSetRow(t,e,i,this)},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectRow=function(t){return t instanceof Ua?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectRow(e);null!==o&&this.insertRow(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectRow(e);null!==i&&this.removeRow(i)},e.prototype.detectVisibleFrame=function(){var t=this.node.getBoundingClientRect(),e=-t.x-0,i=-t.y-64,o=window.innerWidth-t.x+0,n=window.innerHeight-t.y+64;return new r.BoxR2(e,i,o,n)},e.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsResize)&&(t|=Gi.NeedsScroll),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeTable()},e.prototype.resizeTable=function(){var t=this.layout.state;if(null!==t){var e=this.width.state;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.edgeInsets.state,o=this.paddingLeft.state;o=o instanceof r.Length?o.pxValue(e):0;var n=this.paddingRight.state;n=n instanceof r.Length?n.pxValue(e):0;var a=null!==i?i.insetLeft:0;a+=o;var s=null!==i?i.insetRight:0;s+=n;var l=t.resized(e,a,s);this.layout.setState(l)}},e.prototype.processVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.processChildViews=function(t,e,i){this.isCulled()||(0!=(t&Gi.NeedsScroll)?this.scrollChildViews(t,e,i):this.processVisibleViews(t,e,i))},e.prototype.scrollChildViews=function(e,i,o){var n=this.visibleViews;n.length=0;var a=this.detectVisibleFrame();Object.defineProperty(this,"visibleFrame",{value:a,enumerable:!0,configurable:!0}),t.prototype.processChildViews.call(this,e,i,(function(t,e,i){var s;if(t instanceof Zn){var l=t.top.state,u=t.height.state;if(l instanceof r.Length&&u instanceof r.Length){var h=a.yMin,p=a.yMax,d=l.pxValue();s=h<=d+u.pxValue()&&d<=p,t.display.setAutoState(s?"flex":"none"),t.setCulled(!s)}else s=!0}else s=!0;s&&(n.push(t),o.call(this,t,e,i))}))},e.prototype.displayVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){0!=(t&Gi.NeedsLayout)?this.layoutChildViews(t,e,i):this.displayVisibleViews(t,e,i)},e.prototype.layoutChildViews=function(e,i,o){this.resizeTable();var n=this.layout.state,a=null!==n?n.width:null,s=this.rowHeight.getState(),l=this.rowSpacing.getState().pxValue(s.pxValue()),u=l,h=this.visibleViews;h.length=0;var p=this.detectVisibleFrame();Object.defineProperty(this,"visibleFrame",{value:p,enumerable:!0,configurable:!0});var d=this.getLook(Qt.timing);t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){var n;if(t instanceof Ua&&(t.top.setAutoState(u,d),t.width.setAutoState(a),t.height.setAutoState(s,d),t.opacity.setAutoState(1,d)),t instanceof Zn){var c=t.top.state,f=t.height.state;if(c instanceof r.Length&&f instanceof r.Length){var v=p.yMin,y=p.yMax,g=c.pxValue();n=v<=g+f.pxValue()&&g<=y}else n=!0;t.display.setAutoState(n?"flex":"none"),t.setCulled(!n)}else n=!0;n&&h.push(t),o.call(this,t,e,i),t instanceof Ua&&(f=(f=t.height.state)instanceof r.Length?f.pxValue():t.node.offsetHeight,u+=f+l)})),this.height.setAutoState(u)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountRowFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountRowFasteners(),t.prototype.unmountViewFasteners.call(this)},e.RowFastener=jo.define({type:Ua,child:!1,willSetView:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetRow(t,e,i,this)}}),m([ho({type:La,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"layout",void 0),m([ho({type:r.Length,state:r.Length.zero()})],e.prototype,"rowSpacing",void 0),m([ho({type:r.Length,state:r.Length.px(24)})],e.prototype,"rowHeight",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),e}(Zn),za=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"layout",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"colSpacing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"colFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"rowFasteners",{value:[],enumerable:!0}),e}return w(i,t),i.prototype.createLayout=function(){for(var t=[],e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;if(null!==n){var r=n.layout;null!==r&&t.push(r)}}var a=this.colSpacing;return new La(null,null,null,a,t)},i.prototype.updateLayout=function(){var t=this.createLayout();this.setLayout(t)},i.prototype.setLayout=function(t){null!==t&&(t=La.fromAny(t));var i=this.layout;e.Equals(t,i)||(this.willSetLayout(t,i),Object.defineProperty(this,"layout",{value:t,enumerable:!0,configurable:!0}),this.onSetLayout(t,i),this.didSetLayout(t,i))},i.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableTraitWillSetLayout&&r.tableTraitWillSetLayout(t,e,this)}},i.prototype.onSetLayout=function(t,e){},i.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableTraitDidSetLayout&&r.tableTraitDidSetLayout(t,e,this)}},i.prototype.setColSpacing=function(t){null!==t&&(t=r.Length.fromAny(t));var i=this.colSpacing;e.Equals(t,i)||(Object.defineProperty(this,"colSpacing",{value:t,enumerable:!0,configurable:!0}),this.onSetColSpacing(t,i))},i.prototype.onSetColSpacing=function(t,e){this.updateLayout()},i.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createColFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},i.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initCol=function(t,e){},i.prototype.attachCol=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},i.prototype.detachCol=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},i.prototype.willSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableTraitWillSetCol&&s.tableTraitWillSetCol(t,e,i,this)}},i.prototype.onSetCol=function(t,e,i,o){null!==e&&this.detachCol(e,o),null!==t&&(this.attachCol(t,o),this.initCol(t,o)),this.updateLayout()},i.prototype.didSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableTraitDidSetCol&&s.tableTraitDidSetCol(t,e,i,this)}},i.prototype.onSetColLayout=function(t,e,i){this.updateLayout()},i.prototype.createColFastener=function(t){return new i.ColFastener(this,t.key,"col")},i.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.startConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},i.prototype.stopConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},i.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createRowFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},i.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initRow=function(t,e){},i.prototype.attachRow=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},i.prototype.detachRow=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},i.prototype.willSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableTraitWillSetRow&&s.tableTraitWillSetRow(t,e,i,this)}},i.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},i.prototype.didSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableTraitDidSetRow&&s.tableTraitDidSetRow(t,e,i,this)}},i.prototype.createRowFastener=function(t){return new i.RowFastener(this,t.key,"row")},i.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.startConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},i.prototype.stopConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},i.prototype.detectColModel=function(t){return t.getTrait(Wa)},i.prototype.detectRowModel=function(t){return t.getTrait(Ba)},i.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectColModel(n);null!==r&&this.insertCol(r);var a=this.detectRowModel(n);null!==a&&this.insertRow(a)}},i.prototype.detectColTrait=function(t){return t instanceof Wa?t:null},i.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectColModel(e);if(null!==o){var n=null!==i?this.detectColModel(i):null;this.insertCol(o,n)}var r=this.detectRowModel(e);if(null!==r){n=null!==i?this.detectRowModel(i):null;this.insertRow(r,n)}},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectColModel(e);null!==i&&this.removeCol(i);var o=this.detectRowModel(e);null!==o&&this.removeRow(o)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectColTrait(e);null!==o&&this.insertCol(o,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectColTrait(e);null!==i&&this.removeCol(i)},i.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},i.prototype.unmountTraitFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountTraitFasteners.call(this)},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCols(),this.startConsumingRows()},i.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingRows(),this.stopConsumingCols()},i.ColFastener=G.define({type:Wa,sibling:!1,observe:!0,willSetTrait:function(t,e,i){this.owner.willSetCol(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCol(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCol(t,e,i,this)},colTraitDidSetLayout:function(t,e){this.owner.onSetColLayout(t,e,this)}}),i.RowFastener=G.define({type:Ba,sibling:!1,observe:!0,willSetTrait:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetRow(t,e,i,this)},traitDidSetParentModel:function(t,e,i){null===t&&this.owner.removeRow(i)}}),i}(st),Ya=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"colFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"rowFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.layoutTable=function(t,e){e.layout.setAutoState(t)},e.prototype.initTableTrait=function(t){var e=t.layout;if(null!==e){var i=this.table.view;null!==i&&this.layoutTable(e,i)}},e.prototype.attachTableTrait=function(t){for(var e=t.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertColTrait(n)}var r=t.rowFasteners;for(i=0,o=r.length;i<o;i+=1){var a=r[i].trait;null!==a&&this.insertRowTrait(a)}},e.prototype.detachTableTrait=function(t){for(var e=t.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeRowTrait(n)}var r=t.colFasteners;for(i=0,o=r.length;i<o;i+=1){var a=r[i].trait;null!==a&&this.removeColTrait(a)}},e.prototype.willSetTableTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableWillSetTrait&&r.tableWillSetTrait(t,e,this)}},e.prototype.onSetTableTrait=function(t,e){null!==e&&this.detachTableTrait(e),null!==t&&(this.attachTableTrait(t),this.initTableTrait(t))},e.prototype.didSetTableTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableDidSetTrait&&r.tableDidSetTrait(t,e,this)}},e.prototype.willSetTableLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableWillSetLayout&&r.tableWillSetLayout(t,e,this)}},e.prototype.onSetTableLayout=function(t,e){},e.prototype.didSetTableLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableDidSetLayout&&r.tableDidSetLayout(t,e,this)}},e.prototype.createTableView=function(){return qa.create()},e.prototype.initTableView=function(t){var e=this.table.trait;if(null!==e){var i=e.layout;null!==i&&this.layoutTable(i,t)}},e.prototype.themeTableView=function(t,e,i,o){},e.prototype.attachTableView=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.row.view;null!==r&&null===r.parentView&&n.row.injectView(t)}}},e.prototype.detachTableView=function(t){},e.prototype.willSetTableView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableWillSetView&&r.tableWillSetView(t,e,this)}},e.prototype.onSetTableView=function(t,e){null!==e&&this.detachTableView(e),null!==t&&(this.attachTableView(t),this.initTableView(t))},e.prototype.didSetTableView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tableDidSetView&&r.tableDidSetView(t,e,this)}},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createColFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCol=function(t){return new Na},e.prototype.initCol=function(t,e){var i=t.col.trait;null!==i&&this.initColTrait(i,e);var o=t.col.view;null!==o&&this.initColView(o,e)},e.prototype.attachCol=function(t,e){var i=t.col.trait;null!==i&&this.attachColTrait(i,e);var o=t.col.view;null!==o&&this.attachColView(o,e)},e.prototype.detachCol=function(t,e){var i=t.col.trait;null!==i&&this.detachColTrait(i,e);var o=t.col.view;null!==o&&this.detachColView(o,e)},e.prototype.willSetCol=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetCol&&a.tableWillSetCol(t,e,i)}},e.prototype.onSetCol=function(t,e,i){null!==e&&this.detachCol(e,i),null!==t&&(this.attachCol(t,i),this.initCol(t,i))},e.prototype.didSetCol=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetCol&&a.tableDidSetCol(t,e,i)}},e.prototype.insertColTrait=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.col.trait===t)return;a.col.trait===e&&(o=a)}}var s=this.createCol(t);null!==s&&(this.insertChildComponent(s,o),s.col.setTrait(t))},e.prototype.removeColTrait=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.col.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initColTrait=function(t,e){},e.prototype.attachColTrait=function(t,e){},e.prototype.detachColTrait=function(t,e){},e.prototype.willSetColTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetColTrait&&a.tableWillSetColTrait(t,e,i)}},e.prototype.onSetColTrait=function(t,e,i){null!==e&&this.detachColTrait(e,i),null!==t&&(this.attachColTrait(e,i),this.initColTrait(t,i))},e.prototype.didSetColTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetColTrait&&a.tableDidSetColTrait(t,e,i)}},e.prototype.createColView=function(t){return t.col.createView()},e.prototype.initColView=function(t,e){var i=t.header.view;null!==i&&this.initColHeaderView(i,e)},e.prototype.attachColView=function(t,e){var i=t.header.view;null!==i&&this.attachColHeaderView(i,e)},e.prototype.detachColView=function(t,e){var i=t.header.view;null!==i&&this.detachColHeaderView(i,e),t.remove()},e.prototype.willSetColView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetColView&&a.tableWillSetColView(t,e,i)}},e.prototype.onSetColView=function(t,e,i){null!==e&&this.detachColView(e,i),null!==t&&(this.attachColView(t,i),this.initColView(t,i))},e.prototype.didSetColView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetColView&&a.tableDidSetColView(t,e,i)}},e.prototype.willSetColLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetColLayout&&a.tableWillSetColLayout(t,e,i)}},e.prototype.onSetColLayout=function(t,e,i){},e.prototype.didSetColLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetColLayout&&a.tableDidSetColLayout(t,e,i)}},e.prototype.initColHeaderView=function(t,e){},e.prototype.attachColHeaderView=function(t,e){},e.prototype.detachColHeaderView=function(t,e){},e.prototype.willSetColHeaderView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetColHeaderView&&a.tableWillSetColHeaderView(t,e,i)}},e.prototype.onSetColHeaderView=function(t,e,i){null!==e&&this.detachColHeaderView(e,i),null!==t&&(this.attachColHeaderView(t,i),this.initColHeaderView(t,i))},e.prototype.didSetColHeaderView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetColHeaderView&&a.tableDidSetColHeaderView(t,e,i)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.getColFastener=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.col.trait===t)return n}return null},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createRowFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createRow=function(t){return new Ha},e.prototype.initRow=function(t,e){var i=t.row.trait;null!==i&&this.initRowTrait(i,e);var o=t.row.view;null!==o&&this.initRowView(o,e)},e.prototype.attachRow=function(t,e){var i=t.row.trait;null!==i&&this.attachRowTrait(i,e);var o=t.row.view;null!==o&&this.attachRowView(o,e)},e.prototype.detachRow=function(t,e){var i=t.row.view;null!==i&&this.detachRowView(i,e);var o=t.row.trait;null!==o&&this.detachRowTrait(o,e)},e.prototype.willSetRow=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetRow&&a.tableWillSetRow(t,e,i)}},e.prototype.onSetRow=function(t,e,i){null!==e&&this.detachRow(e,i),null!==t&&(this.attachRow(t,i),this.initRow(t,i))},e.prototype.didSetRow=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetRow&&a.tableDidSetRow(t,e,i)}},e.prototype.insertRowTrait=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.row.trait===t)return;a.row.trait===e&&(o=a)}}var s=this.createRow(t);if(null!==s&&(s.row.setTrait(t),this.insertChildComponent(s,o),null===s.row.view)){var l=this.createRowView(s),u=null;null!==o&&(u=o.row.view);var h=this.table.view;null!==h?s.row.injectView(h,l,u,null):s.row.setView(l,u)}},e.prototype.removeRowTrait=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.row.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initRowTrait=function(t,e){},e.prototype.attachRowTrait=function(t,e){},e.prototype.detachRowTrait=function(t,e){},e.prototype.willSetRowTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetRowTrait&&a.tableWillSetRowTrait(t,e,i)}},e.prototype.onSetRowTrait=function(t,e,i){null!==e&&this.detachRowTrait(e,i),null!==t&&(this.attachRowTrait(t,i),this.initRowTrait(t,i))},e.prototype.didSetRowTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetRowTrait&&a.tableDidSetRowTrait(t,e,i)}},e.prototype.createRowView=function(t){return t.row.createView()},e.prototype.initRowView=function(t,e){},e.prototype.attachRowView=function(t,e){},e.prototype.detachRowView=function(t,e){t.remove()},e.prototype.willSetRowView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableWillSetRowView&&a.tableWillSetRowView(t,e,i)}},e.prototype.onSetRowView=function(t,e,i){null!==e&&this.detachRowView(e,i),null!==t&&(this.attachRowView(t,i),this.initRowView(t,i))},e.prototype.didSetRowView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tableDidSetRowView&&a.tableDidSetRowView(t,e,i)}},e.prototype.initCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.initCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.initCellView(n,e,i)},e.prototype.attachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.attachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.attachCellView(n,e,i)},e.prototype.detachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.detachCellView(n,e,i)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableWillSetCell&&s.tableWillSetCell(t,e,i,o)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,i,o),null!==t&&(this.attachCell(t,i,o),this.initCell(t,i,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableDidSetCell&&s.tableDidSetCell(t,e,i,o)}},e.prototype.initCellTrait=function(t,e,i){},e.prototype.attachCellTrait=function(t,e,i){},e.prototype.detachCellTrait=function(t,e,i){},e.prototype.willSetCellTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableWillSetCellTrait&&s.tableWillSetCellTrait(t,e,i,o)}},e.prototype.onSetCellTrait=function(t,e,i,o){null!==e&&this.detachCellTrait(e,i,o),null!==t&&(this.attachCellTrait(e,i,o),this.initCellTrait(t,i,o))},e.prototype.didSetCellTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableDidSetCellTrait&&s.tableDidSetCellTrait(t,e,i,o)}},e.prototype.initCellView=function(t,e,i){var o=t.content.view;null!==o&&this.initCellContentView(o,e,i)},e.prototype.attachCellView=function(t,e,i){var o=t.content.view;null!==o&&this.attachCellContentView(o,e,i)},e.prototype.detachCellView=function(t,e,i){var o=t.content.view;null!==o&&this.detachCellContentView(o,e,i)},e.prototype.willSetCellView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableWillSetCellView&&s.tableWillSetCellView(t,e,i,o)}},e.prototype.onSetCellView=function(t,e,i,o){null!==e&&this.detachCellView(e,i,o),null!==t&&(this.attachCellView(t,i,o),this.initCellView(t,i,o))},e.prototype.didSetCellView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableDidSetCellView&&s.tableDidSetCellView(t,e,i,o)}},e.prototype.initCellContentView=function(t,e,i){},e.prototype.attachCellContentView=function(t,e,i){},e.prototype.detachCellContentView=function(t,e,i){},e.prototype.willSetCellContentView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableWillSetCellContentView&&s.tableWillSetCellContentView(t,e,i,o)}},e.prototype.onSetCellContentView=function(t,e,i,o){null!==e&&this.detachCellContentView(e,i,o),null!==t&&(this.attachCellContentView(t,i,o),this.initCellContentView(t,i,o))},e.prototype.didSetCellContentView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.tableDidSetCellContentView&&s.tableDidSetCellContentView(t,e,i,o)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.getRowFastener=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.row.trait===t)return n}return null},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectRowComponent=function(t){return t instanceof Ha?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectRowComponent(e);null!==o&&this.insertRow(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectRowComponent(e);null!==i&&this.removeRow(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.TableFastener=fa.define({viewType:qa,observeView:!0,willSetView:function(t,e){this.owner.willSetTableView(t,e)},onSetView:function(t,e){this.owner.onSetTableView(t,e)},didSetView:function(t,e){this.owner.didSetTableView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeTableView(o,t,e,i)},createView:function(){return this.owner.createTableView()},traitType:za,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetTableTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetTableTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetTableTrait(t,e)},tableTraitWillSetLayout:function(t,e){this.owner.willSetTableLayout(t,e)},tableTraitDidSetLayout:function(t,e){this.owner.onSetTableLayout(t,e),this.owner.didSetTableLayout(t,e)},tableTraitWillSetCol:function(t,e,i){null!==e&&this.owner.removeColTrait(e)},tableTraitDidSetCol:function(t,e,i){null!==t&&this.owner.insertColTrait(t,i)},tableTraitWillSetRow:function(t,e,i){null!==e&&this.owner.removeRowTrait(e)},tableTraitDidSetRow:function(t,e,i){null!==t&&this.owner.insertRowTrait(t,i)}}),e.ColFastener=ya.define({type:Na,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetCol(t,e,this)},onSetComponent:function(t,e){this.owner.onSetCol(t,e,this)},didSetComponent:function(t,e){this.owner.didSetCol(t,e,this)},colWillSetTrait:function(t,e){this.owner.willSetColTrait(t,e,this)},colDidSetTrait:function(t,e){this.owner.onSetColTrait(t,e,this),this.owner.didSetColTrait(t,e,this)},colWillSetView:function(t,e){this.owner.willSetColView(t,e,this)},colDidSetView:function(t,e){this.owner.onSetColView(t,e,this),this.owner.didSetColView(t,e,this)},colWillSetLayout:function(t,e){this.owner.willSetColLayout(t,e,this)},colDidSetLayout:function(t,e){this.owner.onSetColLayout(t,e,this),this.owner.didSetColLayout(t,e,this)},colWillSetHeaderView:function(t,e){this.owner.willSetColHeaderView(t,e,this)},colDidSetHeaderView:function(t,e){this.owner.onSetColHeaderView(t,e,this),this.owner.didSetColHeaderView(t,e,this)}}),e.RowFastener=ya.define({type:Ha,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetRow(t,e,this)},onSetComponent:function(t,e){this.owner.onSetRow(t,e,this)},didSetComponent:function(t,e){this.owner.didSetRow(t,e,this)},rowWillSetTrait:function(t,e){this.owner.willSetRowTrait(t,e,this)},rowDidSetTrait:function(t,e){this.owner.onSetRowTrait(t,e,this),this.owner.didSetRowTrait(t,e,this)},rowWillSetView:function(t,e){this.owner.willSetRowView(t,e,this)},rowDidSetView:function(t,e){this.owner.onSetRowView(t,e,this),this.owner.didSetRowView(t,e,this)},rowWillSetCell:function(t,e,i){this.owner.willSetCell(t,e,i,this)},rowDidSetCell:function(t,e,i){this.owner.onSetCell(t,e,i,this),this.owner.didSetCell(t,e,i,this)},rowWillSetCellTrait:function(t,e,i){this.owner.willSetCellTrait(t,e,i,this)},rowDidSetCellTrait:function(t,e,i){this.owner.onSetCellTrait(t,e,i,this),this.owner.didSetCellTrait(t,e,i,this)},rowWillSetCellView:function(t,e,i){this.owner.willSetCellView(t,e,i,this)},rowDidSetCellView:function(t,e,i){this.owner.onSetCellView(t,e,i,this),this.owner.didSetCellView(t,e,i,this)},rowWillSetCellContentView:function(t,e,i){this.owner.willSetCellContentView(t,e,i,this)},rowDidSetCellContentView:function(t,e,i){this.owner.onSetCellContentView(t,e,i,this),this.owner.didSetCellContentView(t,e,i,this)}}),m([fa({extends:e.TableFastener})],e.prototype,"table",void 0),e}(ma),Xa=function(){function t(t,e,i,o,n,r,a,s,l){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"optional",{value:n,enumerable:!0}),Object.defineProperty(this,"width",{value:r,enumerable:!0}),Object.defineProperty(this,"left",{value:a,enumerable:!0}),Object.defineProperty(this,"right",{value:s,enumerable:!0}),Object.defineProperty(this,"hidden",{value:l,enumerable:!0})}return t.prototype.withFlex=function(t,e,i){return i=void 0!==i?r.Length.fromAny(i):this.basis,this.copy(this.key,t,e,i,this.optional,this.width,this.left,this.right,this.hidden)},t.prototype.asOptional=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,t,this.width,this.left,this.right,this.hidden)},t.prototype.asHidden=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.width,this.left,this.right,t)},t.prototype.resized=function(t,e,i,o){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),void 0===o&&(o=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,t,e,i,o)},t.prototype.copy=function(e,i,o,n,r,a,s,l,u){return new t(e,i,o,n,r,a,s,l,u)},t.prototype.equivalentTo=function(e,i){return this===e||e instanceof t&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i)&&this.optional===e.optional)},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&this.optional===i.optional&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&this.hidden===i.hidden)},t.prototype.debug=function(t){t=t.write("TreeRoot").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis),this.optional&&(t=t.write(", ").debug(this.optional)),t=t.write(41),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n,a){return void 0===i&&(i=0),void 0===o&&(o=1),void 0===a&&(a=!1),new t(e,i,o,n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),a,null,null,null,!1)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var a=e.basis;a=void 0!==a?r.Length.fromAny(a):r.Length.zero();var s=e.optional;void 0===s&&(s=!1);var l=e.width;l=null!=l?r.Length.fromAny(l):null;var u=e.left;u=null!=u?r.Length.fromAny(u):null;var h=e.right;h=null!=h?r.Length.fromAny(h):null;var p=e.hidden;return void 0===p&&(p=!1),new t(i,o,n,a,s,l,u,h,p)},t}(),Ga=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"spacing",{value:o,enumerable:!0}),Object.defineProperty(this,"roots",{value:n,enumerable:!0})}return t.prototype.getRoot=function(t){for(var e=this.roots,i=0,o=e.length;i<o;i+=1){var n=e[i];if(t===n.key)return n}return null},t.prototype.resized=function(i,o,n,a){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===a?a=this.spacing:null!==a&&(a=r.Length.fromAny(a)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.spacing,a))return this;for(var s=this.roots,l=s.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==a?a.pxValue(h):0,f=0,v=0,y=0,g=p+d,w=p,m=0;m<l;m+=1){0!==m&&(g+=c,w+=c);var b=(T=s[m]).basis.pxValue(h);u[m]=T.resized(b,w,h-b-w,!1),f+=T.grow,v+=T.shrink,T.optional&&(y+=1),g+=b,w+=b}if(g>h&&y>0){for(m=l-1;m>=0&&y>0;){b=(T=u[m]).width.pxValue();if(T.optional&&(u[m]=T.resized(0,w,h-w,!0),f-=T.grow,v-=T.shrink,y-=1,g-=b),w-=b,0!==m&&(g-=c,w-=c),g<=h)break;m-=1}for(m+=1;m<l;){if(!(T=u[m]).optional){g+=c,w+=c;b=T.basis.pxValue(h);u[m]=T.resized(b,w,h-b-w),w+=b}m+=1}}if(g<h&&f>0){var S=h-g,C=p,P=0;for(m=0;m<l;m+=1){if((T=u[m]).hidden)u[m]=T.resized(0,C+c,h-C-c);else{0!==P&&(C+=c);b=T.basis.pxValue(h)+S*(T.grow/f);u[m]=T.resized(b,C,h-b-C),C+=b,P+=1}}}else if(g>h&&v>0){S=g-h;var V=p;for(P=0,m=0;m<l;m+=1){var T;if((T=u[m]).hidden)u[m]=T.resized(0,V+c,h-V-c);else{0!==P&&(V+=c);b=T.basis.pxValue(h)-S*(T.shrink/v);u[m]=T.resized(b,V,h-b-V),V+=b,P+=1}}}return new t(i,o,n,a,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.roots,n=e.roots,r=o.length;if(r===n.length){for(var a=0;a<r;a+=1)if(!o[a].equivalentTo(n[a],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.spacing,i.spacing)&&e.Arrays.equal(this.roots,i.roots))},t.prototype.debug=function(t){t=t.write("TreeSeed").write(46).write("of").write(40);for(var e=0,i=this.roots.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.roots[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=Xa.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var a=e.spacing;a=null!=a?r.Length.fromAny(a):null;for(var s=e.roots.length,l=new Array(s),u=0;u<s;u+=1)l[u]=Xa.fromAny(e.roots[u]);return new t(i,o,n,a,l)},t}(),Ka=function(t){function e(e){var i=t.call(this,e)||this;return i.initCell(),i}return w(e,t),e.prototype.initCell=function(){this.addClass("tree-cell"),this.display.setAutoState("none"),this.alignItems.setAutoState("center"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.didPress=function(t,e){if(!t.defaultPrevented){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellDidPress&&r.cellDidPress(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.cellDidPress&&a.cellDidPress(t,e,this)}},e.prototype.didLongPress=function(t){if(!t.defaultPrevented){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.cellDidLongPress&&n.cellDidLongPress(t,this)}var r=this.viewController;null!==r&&void 0!==r.cellDidLongPress&&r.cellDidLongPress(t,this)}},e.fromInit=function(t){var i;return(i="title"===t.cellType?_a.create():"disclosure"===t.cellType?is.create():"icon"===t.cellType?os.create():e.create()).initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e}(Zn),Za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.cellDidPress=function(t,e,i){},e.prototype.cellDidLongPress=function(t,e){},e}(_n),_a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("title-tree-cell")},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.color.setAutoState(e.getOr(Qt.accentColor,i,null),o)},e}(Ka),Qa=function(t){function e(e){var i=t.call(this,e)||this;return i.initLeaf(),i}return w(e,t),e.prototype.initLeaf=function(){this.addClass("tree-leaf"),this.position.setAutoState("relative"),this.height.setAutoState(58),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.initView=function(e){t.prototype.initView.call(this,e),!0===e.highlighted?this.highlight():!1===e.highlighted&&this.unhighlight(),void 0!==e.cells&&this.addCells(e.cells)},e.prototype.addCell=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=Ka.fromAny(t),this.appendChildView(t,e),t},e.prototype.addCells=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addCell(t[e])},e.prototype.highlight=function(t){this.highlighted.state||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willHighlight(t),this.highlighted.setState(!0),this.onHighlight(t),this.didHighlight(t))},e.prototype.willHighlight=function(t){var e=this.viewController;null!==e&&void 0!==e.leafWillHighlight&&e.leafWillHighlight(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafWillHighlight&&r.leafWillHighlight(t,this)}},e.prototype.onHighlight=function(t){this.modifyMood(re.default,[re.selected,1]),this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(this.getLookOr(Qt.backgroundColor,null),t);var e=this.getLookOr(Qt.accentColor,null),i=this.getChildView("selected");null===i&&((i=this.prepend("div","selected")).addClass("selected"),i.position.setAutoState("absolute"),i.top.setAutoState(2),i.bottom.setAutoState(2),i.left.setAutoState(0),i.width.setAutoState(4),null!==e&&i.backgroundColor.setAutoState(e.alpha(0))),null!==i&&i.backgroundColor.setAutoState(e,t)},e.prototype.didHighlight=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.leafDidHighlight&&n.leafDidHighlight(t,this)}var r=this.viewController;null!==r&&void 0!==r.leafDidHighlight&&r.leafDidHighlight(t,this)},e.prototype.unhighlight=function(t){this.highlighted.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willUnhighlight(t),this.highlighted.setState(!1),this.onUnhighlight(t),this.didUnhighlight(t))},e.prototype.willUnhighlight=function(t){var e=this.viewController;null!==e&&void 0!==e.leafWillUnhighlight&&e.leafWillUnhighlight(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafWillUnhighlight&&r.leafWillUnhighlight(t,this)}},e.prototype.onUnhighlight=function(t){if(this.modifyMood(re.default,[re.selected,void 0]),this.backgroundColor.isAuto()){var e=this.getLookOr(Qt.backgroundColor,null);null!==e&&(e=e.alpha(0)),this.backgroundColor.setAutoState(e,t)}var i=this.getChildView("selected");if(null!==i){var o=this.getLookOr(Qt.accentColor,null);null!==o&&(o=o.alpha(0)),i.backgroundColor.setAutoState(o,t)}},e.prototype.didUnhighlight=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.leafDidUnhighlight&&n.leafDidUnhighlight(t,this)}var r=this.viewController;null!==r&&void 0!==r.leafDidUnhighlight&&r.leafDidUnhighlight(t,this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()){var n=this.getLookOr(Qt.backgroundColor,null);null===n||this.highlighted.state||(n=n.alpha(0)),this.backgroundColor.setAutoState(n,o)}var r=this.getChildView("selected");if(null!==r){var a=this.getLookOr(Qt.accentColor,null);null===a||this.highlighted.state||(a=a.alpha(0)),r.backgroundColor.setAutoState(a,o)}},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Ka&&this.onInsertCell(e)},e.prototype.onRemoveChildView=function(e){e instanceof Ka&&this.onRemoveCell(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertCell=function(t){t.position.setAutoState("absolute"),t.top.setAutoState(0),t.bottom.setAutoState(0)},e.prototype.onRemoveCell=function(t){},e.prototype.displayChildViews=function(e,i,o){0!=(e&Gi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.seed.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Ka){var a=t.key,s=null!==n&&void 0!==a?n.getRoot(a):null;null!==s?(t.display.setAutoState(s.hidden?"none":"flex"),t.left.setAutoState(s.left),t.width.setAutoState(s.width),t.height.setAutoState(r)):(t.display.setAutoState("none"),t.left.setAutoState(null),t.width.setAutoState(null),t.height.setAutoState(null))}o.call(this,t,e,i)}))},e.prototype.didEndPress=function(e,i){t.prototype.didEndPress.call(this,e,i);for(var o=e.target;null!==o&&o!==this.node;){var n=o.view;if(n instanceof Ka){n.didPress(e,i);break}o=o instanceof Node?o.parentNode:null}},e.prototype.didPress=function(t,e){if(!t.defaultPrevented){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafDidPress&&r.leafDidPress(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.leafDidPress&&a.leafDidPress(t,e,this)}},e.prototype.didLongPress=function(t){for(var e=t.target;null!==e&&e!==this.node;){var i=e.view;if(i instanceof Ka){i.didLongPress(t);break}e=e instanceof Node?e.parentNode:null}if(!t.defaultPrevented){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.leafDidLongPress&&a.leafDidLongPress(t,this)}var s=this.viewController;null!==s&&void 0!==s.leafDidLongPress&&s.leafDidLongPress(t,this)}},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ga,state:null,inherit:!0})],e.prototype,"seed",void 0),m([ho({type:Number,inherit:!0})],e.prototype,"limbSpacing",void 0),m([ho({type:Boolean,state:!1})],e.prototype,"highlighted",void 0),e}(Sa),Ja=function(t){function e(e){var i=t.call(this,e)||this;return i.initVein(),i}return w(e,t),e.prototype.initVein=function(){this.addClass("tree-vein"),this.display.setAutoState("none"),this.alignItems.setAutoState("center"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.color.setAutoState(e.getOr(Qt.neutralColor,i,null),o)},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e}(Zn),$a=function(t){function e(e){var i=t.call(this,e)||this;return i.initStem(),i}return w(e,t),e.prototype.initStem=function(){this.addClass("tree-stem"),this.position.setAutoState("relative"),this.height.setAutoState(60),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.veins&&this.addVeins(e.veins)},e.prototype.addVein=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=Ja.fromAny(t),this.appendChildView(t,e),t},e.prototype.addVeins=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addVein(t[e])},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Ja&&this.onInsertVein(e)},e.prototype.onRemoveChildView=function(e){e instanceof Ja&&this.onRemoveVein(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertVein=function(t){t.position.setAutoState("absolute"),t.top.setAutoState(0),t.bottom.setAutoState(0)},e.prototype.onRemoveVein=function(t){},e.prototype.displayChildViews=function(e,i,o){0!=(e&Gi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.seed.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Ja){var a=t.key,s=null!==n&&void 0!==a?n.getRoot(a):null;null!==s?(t.display.setAutoState(s.hidden?"none":"flex"),t.left.setAutoState(s.left),t.width.setAutoState(s.width),t.height.setAutoState(r)):(t.display.setAutoState("none"),t.left.setAutoState(null),t.width.setAutoState(null),t.height.setAutoState(null))}o.call(this,t,e,i)}))},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ga,state:null,inherit:!0})],e.prototype,"seed",void 0),e}(Zn),ts=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"visibleViews",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(i,"visibleFrame",{value:new r.BoxR2(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initTree(),i}return w(e,t),e.prototype.initTree=function(){this.addClass("tree"),this.display.setAutoState("block"),this.position.setAutoState("relative"),this.opacity.setAutoState(0)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limbSpacing&&this.limbSpacing(e.limbSpacing),void 0!==e.seed&&this.seed(e.seed),void 0!==e.stem&&this.setStem(e.stem),void 0!==e.limbs&&this.addLimbs(e.limbs),void 0!==e.depth&&this.depth(e.depth)},Object.defineProperty(e.prototype,"stem",{get:function(){var t=this.getChildView("stem");return t instanceof $a?t:null},enumerable:!1,configurable:!0}),e.prototype.setStem=function(t){null!==t&&(t=$a.fromAny(t)),this.setChildView("stem",t)},e.prototype.addLimb=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=es.fromAny(t),this.appendChildView(t,e),t},e.prototype.addLimbs=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addLimb(t[e])},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=e.key;"stem"===o&&e instanceof $a?this.onInsertStem(e):e instanceof es?this.onInsertLimb(e):"topBranch"===o&&e instanceof Zn?this.onInsertTopBranch(e):"bottomBranch"===o&&e instanceof Zn&&this.onInsertBottomBranch(e)},e.prototype.onRemoveChildView=function(e){var i=e.key;"stem"===i&&e instanceof $a?this.onRemoveStem(e):e instanceof es?this.onRemoveLimb(e):"topBranch"===i&&e instanceof Zn?this.onRemoveTopBranch(e):"bottomBranch"===i&&e instanceof Zn&&this.onRemoveBottomBranch(e);var o=this.visibleViews,n=o.indexOf(e);n>=0&&o.splice(n,1),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertStem=function(t){t.position.setAutoState("absolute"),t.left.setAutoState(0);var e=this.seed.state,i=null!==e?e.width:null;t.width.setAutoState(i),t.visibility.setAutoState("hidden")},e.prototype.onRemoveStem=function(t){},e.prototype.onInsertLimb=function(t){t.position.setAutoState("absolute"),t.left.setAutoState(0);var e=this.seed.state,i=null!==e?e.width:null;t.width.setAutoState(i),t.depth.setAutoState(this.depth.state+1),t.visibility.setAutoState("hidden"),t.setCulled(!0)},e.prototype.onRemoveLimb=function(t){},e.prototype.onInsertTopBranch=function(t){t.addClass("branch-top"),t.position.setAutoState("absolute"),t.top.setAutoState(0),t.left.setAutoState(0);var e=this.seed.state,i=null!==e?e.width:null;t.width.setAutoState(i),t.visibility.setAutoState("hidden")},e.prototype.onRemoveTopBranch=function(t){},e.prototype.onInsertBottomBranch=function(t){t.addClass("branch-bottom"),t.position.setAutoState("absolute"),t.bottom.setAutoState(0),t.left.setAutoState(0);var e=this.seed.state,i=null!==e?e.width:null;t.width.setAutoState(i),t.visibility.setAutoState("hidden")},e.prototype.onRemoveBottomBranch=function(t){},e.prototype.onUpdateDepth=function(t){this.modifyTheme(re.default,[re.nested,0!==t?1:void 0])},e.prototype.descendantDidSetDisclosurePhase=function(t,e){this.requireUpdate(Gi.NeedsLayout);var i=this.parentView;i instanceof es&&i.descendantDidSetDisclosurePhase(t,e)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.depth.state;if(void 0!==n&&0!==n){var r=this.theme.superState;null==r&&(r=e);var a=this.parentView,s=a instanceof es?a.leaf:null,l=null!==s?s.moodModifier.state:null,u=null!==l?l.timesCol(i):i,h=e.getOr(Qt.backgroundColor,i,null);this.backgroundColor.setAutoState(h,o);var p=r.getOr(Qt.accentColor,u,null),d=r.getOr(Qt.borderColor,u,null),c=this.limbSpacing.getState(),f=this.getChildView("bottomBranch");null===f&&(f=this.prepend("div","bottomBranch")),f.height.setAutoState(c/2,o),f.backgroundColor.setAutoState(d,o),f.zIndex.setAutoState(1e3-n);var v=this.getChildView("topBranch");null===v&&(v=this.prepend("div","topBranch")),v.height.setAutoState(c,o),v.backgroundColor.setAutoState(p,o),v.zIndex.setAutoState(1e3-n)}else this.removeChildView("topBranch"),this.removeChildView("bottomBranch")},e.prototype.detectVisibleFrame=function(t){var e=t.visibleFrame;if(void 0!==e){var i=this.left.state,o=i instanceof r.Length?i.pxValue():0,n=this.top.state,a=n instanceof r.Length?n.pxValue():0;return new r.BoxR2(e.xMin-o-0,e.yMin-a-64,e.xMax-o+0,e.yMax-a+64)}var s=this.node.getBoundingClientRect();o=s.x,a=s.y;return new r.BoxR2(-o-0,-a-64,window.innerWidth-o+0,window.innerHeight-a+64)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsResize)&&(t|=Gi.NeedsScroll),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeTree()},e.prototype.resizeTree=function(){var t=this.seed.isInherited()?null:this.seed.state;if(null!==t){var e=this.seed.superState,i=null;null!=e&&null!==e.width&&(i=e.width.pxValue()),null===i&&(i=(i=this.width.state)instanceof r.Length?i.pxValue():this.node.offsetWidth);var o=this.edgeInsets.state,n=null!==o?o.insetLeft:0,a=null!==o?o.insetRight:0,s=this.limbSpacing.getState(),l=t.resized(i,n,a,s);this.seed.setState(l)}},e.prototype.processVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.processChildViews=function(t,e,i){this.isCulled()||(0!=(t&(Gi.NeedsScroll|Gi.NeedsChange))?this.scrollChildViews(t,e,i):this.processVisibleViews(t,e,i))},e.prototype.scrollChildViews=function(e,i,o){var n=this.depth.getState(),a=this.visibleViews;a.length=0;var s=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=s,Object.defineProperty(this,"visibleFrame",{value:s,enumerable:!0,configurable:!0}),t.prototype.processChildViews.call(this,e,i,(function(t,e,i){if(0!=(e&Gi.NeedsChange)&&t instanceof es){var l=t.subtree;null!==l&&l.depth.setAutoState(n+1)}var u;if(t instanceof Zn){var h=t.top.state,p=t.height.state;if(h instanceof r.Length&&p instanceof r.Length){var d=s.yMin,c=s.yMax,f=h.pxValue();u=d<=f+p.pxValue()&&f<=c,t.visibility.setAutoState(u?"visible":"hidden"),t.setCulled(!u)}else u=!0}else u=!0;u&&(a.push(t),o.call(this,t,e,i))}))},e.prototype.displayVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){0!=(t&Gi.NeedsLayout)?this.layoutChildViews(t,e,i):this.displayVisibleViews(t,e,i)},e.prototype.layoutChildViews=function(e,i,o){this.resizeTree();var n=this.seed.state,a=null!==n?n.width:null,s=this.limbSpacing.getState(),l=s,u=this.disclosingPhase.getValueOr(1),h=this.visibleViews;h.length=0;var p=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=p,Object.defineProperty(this,"visibleFrame",{value:p,enumerable:!0,configurable:!0}),t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){var n;if(t instanceof Zn){t.width.setAutoState(a),(t instanceof es||t instanceof $a)&&t.top.isAuto()&&t.top.setIntermediateValue(r.Length.px(s*u),r.Length.px(l));var d=t.top.state,c=t.height.state;if(d instanceof r.Length&&c instanceof r.Length){var f=p.yMin,v=p.yMax,y=d.pxValue();n=f<=y+c.pxValue()&&y<=v}else n=!0;t.visibility.setAutoState(n?"visible":"hidden"),t.setCulled(!n)}else n=!0;if(n&&h.push(t),o.call(this,t,e,i),t instanceof es||t instanceof $a){var g=t.height.value;g=g instanceof r.Length?g.pxValue():t.node.offsetHeight;var w=t.height.state;w=w instanceof r.Length?w.pxValue():g,s+=g*u,l+=w}})),this.height.isAuto()&&this.height.setIntermediateValue(r.Length.px(s),r.Length.px(l));var d=this.disclosurePhase.getValueOr(1);this.opacity.setAutoState(d)},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ga,state:null,inherit:!0,updateFlags:Gi.NeedsResize|Gi.NeedsLayout})],e.prototype,"seed",void 0),m([ho({type:Number,state:0,onSetState:function(t){this.owner.onUpdateDepth(t)}})],e.prototype,"depth",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([ho({type:Number,state:2})],e.prototype,"limbSpacing",void 0),m([ho({type:String,inherit:!0})],e.prototype,"disclosureState",void 0),m([So({type:Number,inherit:!0})],e.prototype,"disclosurePhase",void 0),m([So({type:Number,inherit:!0})],e.prototype,"disclosingPhase",void 0),e}(Zn),es=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"visibleFrame",{value:new r.BoxR2(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initLimb(),i}return w(e,t),e.prototype.initLimb=function(){this.addClass("tree-limb"),this.position.setAutoState("relative")},e.prototype.initView=function(e){t.prototype.initView.call(this,e),!0===e.expanded?this.expand():!1===e.expanded&&this.collapse(),void 0!==e.leaf&&this.setLeaf(e.leaf),void 0!==e.subtree&&this.setSubtree(e.subtree)},Object.defineProperty(e.prototype,"leaf",{get:function(){var t=this.getChildView("leaf");return t instanceof Qa?t:null},enumerable:!1,configurable:!0}),e.prototype.setLeaf=function(t){null!==t&&(t=Qa.fromAny(t)),this.setChildView("leaf",t)},Object.defineProperty(e.prototype,"subtree",{get:function(){var t=this.getChildView("subtree");return t instanceof ts?t:null},enumerable:!1,configurable:!0}),e.prototype.setSubtree=function(t){null!==t&&(t=ts.fromAny(t)),this.setChildView("subtree",t)},e.prototype.isExpanded=function(){var t=this.disclosureState.getStateOr("expanded");return"expanded"===t||"expanding"===t},e.prototype.isCollapsed=function(){var t=this.disclosureState.getStateOr("expanded");return"collapsed"===t||"collapsing"===t},e.prototype.expand=function(t){var e=this.disclosurePhase.value;(this.isCollapsed()||1!==e)&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willExpand(t),!1!==t?1!==e?(this.disclosurePhase.setState(1,t),this.disclosingPhase.setState(this.disclosurePhase.value),this.disclosingPhase.setState(1,t)):this.didExpand():(this.disclosurePhase.setState(1),this.disclosingPhase.setState(1),this.didExpand()))},e.prototype.willExpand=function(t){this.disclosureState.setAutoState("expanding"),this.requireUpdate(Gi.NeedsResize|Gi.NeedsChange|Gi.NeedsLayout);var e=this.viewController;null!==e&&void 0!==e.limbWillExpand&&e.limbWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.limbWillExpand&&r.limbWillExpand(this)}var a=this.subtree;null!==a&&a.display.setAutoState("block")},e.prototype.didExpand=function(){this.disclosureState.setAutoState("expanded"),this.disclosingPhase.setInherited(!0);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.limbDidExpand&&o.limbDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.limbDidExpand&&n.limbDidExpand(this)},e.prototype.collapse=function(t){var e=this.disclosurePhase.value;(this.isExpanded()||0!==e)&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.willCollapse(t),!1!==t?0!==e?(this.disclosurePhase.setState(0,t),this.disclosingPhase.setState(this.disclosurePhase.value),this.disclosingPhase.setState(0,t)):this.didCollapse():(this.disclosurePhase.setState(0),this.disclosingPhase.setState(0),this.didCollapse()))},e.prototype.willCollapse=function(t){this.disclosureState.setAutoState("collapsing");var e=this.viewController;null!==e&&void 0!==e.limbWillCollapse&&e.limbWillCollapse(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.limbWillCollapse&&r.limbWillCollapse(this)}var a=this.subtree;null!==a&&a.height.setAutoState(0,t)},e.prototype.didCollapse=function(){this.disclosureState.setAutoState("collapsed"),this.disclosingPhase.setInherited(!0),this.requireUpdate(Gi.NeedsResize|Gi.NeedsLayout);var t=this.subtree;null!==t&&t.display.setAutoState("none");for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.limbDidCollapse&&n.limbDidCollapse(this)}var r=this.viewController;null!==r&&void 0!==r.limbDidCollapse&&r.limbDidCollapse(this)},e.prototype.toggle=function(t){var e=this.disclosureState.getStateOr("collapsed");"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},e.prototype.onCull=function(){t.prototype.onCull.call(this),this.display.setAutoState("none")},e.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.display.setAutoState("block")},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"leaf"===e.key&&e instanceof Qa?this.onInsertLeaf(e):"subtree"===e.key&&e instanceof ts&&this.onInsertSubtree(e)},e.prototype.onRemoveChildView=function(e){"leaf"===e.key&&e instanceof Qa?this.onRemoveLeaf(e):"subtree"===e.key&&e instanceof ts&&this.onRemoveSubtree(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertLeaf=function(t){t.position.setAutoState("absolute")},e.prototype.onRemoveLeaf=function(t){},e.prototype.onInsertSubtree=function(t){t.display.setAutoState(this.isExpanded()?"block":"none"),t.position.setAutoState("absolute"),t.left.setAutoState(0);var e=this.seed.state,i=null!==e?e.width:null;t.width.setAutoState(i),t.depth.setAutoState(this.depth.state)},e.prototype.onRemoveSubtree=function(t){},e.prototype.onUpdateDepth=function(t){var e=this.subtree;null!==e&&e.depth.setAutoState(t)},e.prototype.descendantDidSetDisclosurePhase=function(t,e){this.requireUpdate(Gi.NeedsLayout);var i=this.parentView;i instanceof ts&&i.descendantDidSetDisclosurePhase(t,e)},e.prototype.detectVisibleFrame=function(t){var e=t.visibleFrame;if(void 0!==e){var i=this.left.state,o=i instanceof r.Length?i.pxValue():0,n=this.top.state,a=n instanceof r.Length?n.pxValue():0;return new r.BoxR2(e.xMin-o-0,e.yMin-a-64,e.xMax-o+0,e.yMax-a+64)}var s=this.node.getBoundingClientRect();o=s.x,a=s.y;return new r.BoxR2(-o-0,-a-64,window.innerWidth-o+0,window.innerHeight-a+64)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.onProcess=function(e,i){t.prototype.onProcess.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));Object.defineProperty(this,"visibleFrame",{value:o,enumerable:!0,configurable:!0}),i.visibleFrame=this.visibleFrame},e.prototype.onDisplay=function(e,i){t.prototype.onDisplay.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));Object.defineProperty(this,"visibleFrame",{value:o,enumerable:!0,configurable:!0}),i.visibleFrame=this.visibleFrame,this.setViewFlags(this.viewFlags&~Gi.NeedsScroll)},e.prototype.didLayout=function(e){this.layoutLimb(),t.prototype.didLayout.call(this,e)},e.prototype.layoutLimb=function(){var t=this.disclosureState.getStateOr("expanded"),e="expanded"===t?this.disclosingPhase.getValueOr(1):1,i=this.seed.state,o=null!==i?i.width:null,n=this.limbSpacing.getStateOr(0),a=0,s=a,l=this.leaf;null!==l&&(l.top.isAuto()&&l.top.setIntermediateValue(r.Length.px(a*e),r.Length.px(s)),l.width.setAutoState(o),a+=(u=(u=l.height.value)instanceof r.Length?u.pxValue():l.node.offsetHeight)*e,s+=h=(h=l.height.state)instanceof r.Length?h.pxValue():u);var u,h,p=this.subtree;null!==p&&"collapsed"!==t?(p.top.isAuto()&&p.top.setIntermediateValue(r.Length.px(a*e),r.Length.px(s)),p.width.setAutoState(o),u=(u=p.height.value)instanceof r.Length?u.pxValue():p.node.offsetHeight,h=(h=p.height.state)instanceof r.Length?h.pxValue():u,a+=u*e,s+="collapsing"!==t?h:n):(a+=n*e,s+=n);this.height.isAuto()&&this.height.setIntermediateValue(r.Length.px(a),r.Length.px(s))},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ga,state:null,inherit:!0})],e.prototype,"seed",void 0),m([ho({type:Number,state:0,onSetState:function(t){this.owner.onUpdateDepth(t)}})],e.prototype,"depth",void 0),m([ho({type:String,state:"collapsed"})],e.prototype,"disclosureState",void 0),m([So({type:Number,state:0,didSetValue:function(t,e){this.owner.descendantDidSetDisclosurePhase(this.owner,t)},onEnd:function(t){var e=this.owner.disclosureState.getStateOr("expanded");"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],e.prototype,"disclosurePhase",void 0),m([So({type:Number,inherit:!0,updateFlags:Gi.NeedsLayout})],e.prototype,"disclosingPhase",void 0),m([ho({type:Number,inherit:!0})],e.prototype,"limbSpacing",void 0),e}(Zn),is=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("disclosure-tree-cell"),this.append(Fa,"button")},Object.defineProperty(e.prototype,"button",{get:function(){return this.getChildView("button")},enumerable:!1,configurable:!0}),e.prototype.didPress=function(e,i){e.preventDefault();var o=this.parentView;if(o instanceof Qa){var n=o.parentView;n instanceof es&&n.toggle()}t.prototype.didPress.call(this,e,i)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"button"===e.key&&e instanceof Fa&&this.onInsertButton(e)},e.prototype.onRemoveChildView=function(e){"button"===e.key&&e instanceof Fa&&this.onRemoveButton(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertButton=function(t){},e.prototype.onRemoveButton=function(t){},e}(Ka),os=function(t){function e(e){var i=t.call(this,e)||this;return i.initIcon(),i}return w(e,t),e.prototype.initIcon=function(){this.addClass("icon-tree-cell");var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e)},e.prototype.createSvgView=function(){return Ur.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Ur?t:null},enumerable:!1,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Ur&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Tr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.isAuto()||t.height.isAuto()||t.viewBox.isAuto())){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setAutoState(e),t.height.setAutoState(i),t.viewBox.setAutoState("0 0 "+e+" "+i)}},m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Ir,type:Object,state:null,updateFlags:Gi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Ka),ns=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.leafDidPress=function(t,e,i){},e.prototype.leafDidLongPress=function(t,e){},e.prototype.leafWillHighlight=function(t,e){},e.prototype.leafDidHighlight=function(t,e){},e.prototype.leafWillUnhighlight=function(t,e){},e.prototype.leafDidUnhighlight=function(t,e){},e}(_n),rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.limbWillExpand=function(t){},e.prototype.limbDidExpand=function(t){},e.prototype.limbWillCollapse=function(t){},e.prototype.limbDidCollapse=function(t){},e}(_n),as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),us=function(t){function e(e){var i=t.call(this,e)||this;return i.initList(),i}return w(e,t),e.prototype.initList=function(){this.addClass("list"),this.flexGrow.setAutoState(1),this.flexShrink.setAutoState(0),this.marginTop.setAutoState(12),this.marginBottom.setAutoState(12),this.userSelect.setAutoState("none")},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof hs&&this.onInsertItem(e)},e.prototype.onRemoveChildView=function(e){e instanceof hs&&this.onRemoveItem(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertItem=function(t){},e.prototype.onRemoveItem=function(t){},e.prototype.onPressItem=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.listDidPressItem&&n.listDidPressItem(t,this)}var r=this.viewController;null!==r&&void 0!==r.listDidPressItem&&r.listDidPressItem(t,this)},e}(Zn),hs=function(t){function e(e){var i=t.call(this,e)||this;return i.onClick=i.onClick.bind(i),i.initListItem(),i}return w(e,t),e.prototype.initListItem=function(){this.addClass("list-item"),this.position.setAutoState("relative"),this.display.setAutoState("flex"),this.flexShrink.setAutoState(0),this.height.setAutoState(44),this.boxSizing.setAutoState("border-box"),this.lineHeight.setAutoState(this.height.state),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden"),this.cursor.setAutoState("pointer"),this.userSelect.setAutoState("none")},e.prototype.createIconView=function(){return Br.create()},e.prototype.initIconView=function(t){t.flexShrink.setAutoState(0),t.width.setAutoState(this.collapsedWidth.getStateOr(e.DefaultCollapsedWidth)),t.height.setAutoState(this.height.state),t instanceof Br&&(t.iconWidth.setAutoState(24),t.iconHeight.setAutoState(24),t.iconColor.setState(this.getLookOr(Qt.mutedColor,null)))},e.prototype.createLabelView=function(){var t=Zn.span.create();return t.display.setAutoState("block"),t.fontFamily.setAutoState("system-ui, 'Open Sans', sans-serif"),t.fontSize.setAutoState(17),t.whiteSpace.setAutoState("nowrap"),t.textOverflow.setAutoState("ellipsis"),t.overflowX.setAutoState("hidden"),t.overflowY.setAutoState("hidden"),t},e.prototype.initLabelView=function(t){if(t.flexGrow.setAutoState(1),t.flexShrink.setAutoState(0),t.color.isAuto()){var e=this.getLookOr(this.highlighted.state?Qt.color:Qt.mutedColor,null);t.color.setAutoState(e)}},e.prototype.createAccessoryIconView=function(){return Br.create()},e.prototype.createAccessoryView=function(){var t=Zn.span.create();return t.display.setAutoState("block"),t.fontFamily.setAutoState("system-ui, 'Open Sans', sans-serif"),t.fontSize.setAutoState(17),t.whiteSpace.setAutoState("nowrap"),t.textOverflow.setAutoState("ellipsis"),t.overflowX.setAutoState("hidden"),t.overflowY.setAutoState("hidden"),t},e.prototype.initAccessoryView=function(t){if(t.flexShrink.setAutoState(0),t.width.setAutoState(this.collapsedWidth.getStateOr(e.DefaultCollapsedWidth)),t instanceof Br)t.iconWidth.setAutoState(24),t.iconHeight.setAutoState(24),t.iconColor.setState(this.getLookOr(Qt.mutedColor,null));else if(t.color.isAuto()){var i=this.getLookOr(this.highlighted.state?Qt.color:Qt.mutedColor,null);t.color.setAutoState(i)}},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=e.getOr(this.highlighted.state?Qt.color:Qt.mutedColor,i,null);if(this.backgroundColor.isAuto()){var r=e.getOr(Qt.backgroundColor,i,null);null===r||this.highlighted.state||this.gesture.isHovering()||(r=r.alpha(0)),this.backgroundColor.setAutoState(r,o)}var a=this.icon.view;a instanceof Br&&a.iconColor.setState(n,o);var s=this.label.view;null!==s&&s.color.setAutoState(n,o);var l=this.accessory.view;l instanceof Br?l.iconColor.setState(n,o):null!==l&&l.color.setAutoState(n,o)},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick)},e.prototype.onUnmount=function(){this.off("click",this.onClick),t.prototype.onUnmount.call(this)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e),this.lineHeight.setAutoState(this.height.state);var i=this.drawerStretch.value;if(void 0!==i){var o=this.label.view;null!==o&&(o.display.setAutoState(0===i?"none":"block"),o.opacity.setAutoState(i));var n=this.accessory.view;null!==n&&(n.display.setAutoState(0===i?"none":"block"),n.opacity.setAutoState(i))}},e.prototype.onLayout=function(i){t.prototype.onLayout.call(this,i);var o=this.edgeInsets.state;if(null!==o){var n=this.collapsedWidth.state;n=null!==n?n.pxValue():e.DefaultCollapsedWidth;var a=this.height.state;a=a instanceof r.Length?a.pxValue():this.clientBounds.height;var s=Math.max(0,(n-a)/2);this.paddingLeft.setAutoState(Math.max(0,o.insetLeft-s));var l=this.icon.view;null!==l&&(l.width.setAutoState(n),l.height.setAutoState(this.height.state));var u=this.label.view,h=this.accessory.view;null!==h?(h.paddingRight.setAutoState(o.insetRight),null!==u&&u.paddingRight.setAutoState(null)):null!==u&&u.paddingRight.setAutoState(o.insetRight)}},e.prototype.highlight=function(t){if(!this.highlighted.state){this.highlighted.setState(!0),this.modifyMood(re.default,[re.selected,1],[re.hovering,void 0]),t=!0===t?this.getLook(Qt.timing):s.Timing.fromAny(t),this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(this.getLookOr(Qt.backgroundColor,null));var e=this.getLookOr(Qt.color,null),i=this.icon.view;i instanceof Br&&i.iconColor.setState(e,t);var o=this.label.view;null!==o&&o.color.isAuto()&&o.color.setAutoState(e,t);var n=this.accessory.view;n instanceof Br?n.iconColor.setState(e,t):null!==n&&n.color.isAuto()&&n.color.setAutoState(e,t)}return this},e.prototype.unhighlight=function(t){if(this.highlighted.state){if(this.highlighted.setState(!1),this.modifyMood(re.default,[re.selected,void 0]),t=!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.backgroundColor.isAuto()){var e=this.getLookOr(Qt.backgroundColor,null);null===e||this.gesture.isHovering()||(e=e.alpha(0)),this.backgroundColor.setAutoState(e,t)}var i=this.getLookOr(Qt.mutedColor,null),o=this.icon.view;o instanceof Br&&o.iconColor.setState(i,t);var n=this.label.view;null!==n&&n.color.isAuto()&&n.color.setAutoState(i,t);var r=this.accessory.view;r instanceof Br?r.iconColor.setState(i,t):null!==r&&r.color.isAuto()&&r.color.setAutoState(i,t)}return this},e.prototype.glow=function(e){this.highlighted.state||t.prototype.glow.call(this,e)},Object.defineProperty(e.prototype,"hovers",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setHovers=function(t){this.hovers!==t&&Object.defineProperty(this,"hovers",{value:t,configurable:!0,enumerable:!0})},e.prototype.didStartHovering=function(){if(!this.highlighted.state&&this.hovers&&(this.modifyMood(re.default,[re.hovering,1]),this.backgroundColor.isAuto())){var t=!!this.gesture.isPressing()&&this.getLook(Qt.timing);this.backgroundColor.setAutoState(this.getLookOr(Qt.backgroundColor,null),t)}},e.prototype.didStopHovering=function(){if(this.modifyMood(re.default,[re.hovering,void 0]),this.backgroundColor.isAuto()){var t=this.getLookOr(Qt.backgroundColor,null);null===t||this.highlighted.state||(t=t.alpha(0));var e=this.getLook(Qt.timing);this.backgroundColor.setAutoState(t,e)}},e.prototype.onClick=function(t){t.stopPropagation();for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.listItemDidPress&&n.listItemDidPress(this)}var r=this.viewController;null!==r&&void 0!==r.listItemDidPress&&r.listItemDidPress(this);var a=this.parentView;a instanceof us&&a.onPressItem(this)},e.DefaultCollapsedWidth=60,m([ho({type:Boolean,state:!1})],e.prototype,"highlighted",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([So({type:r.Length,inherit:!0,state:null})],e.prototype,"collapsedWidth",void 0),m([So({type:Number,inherit:!0,updateFlags:Gi.NeedsAnimate})],e.prototype,"drawerStretch",void 0),m([jo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initIconView(t)},createView:function(){return this.owner.createIconView()},insertView:function(t,e,i,o){t.prependChildView(e,o)},fromAny:function(t){if(t instanceof Zn)return t;var e=this.owner.createIconView();return e.graphics.setAutoState(t),e}})],e.prototype,"icon",void 0),m([jo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initLabelView(t)},createView:function(){return this.owner.createLabelView()},insertView:function(t,e,i,o){i=this.owner.accessory.view,t.insertChildView(e,i,o)},fromAny:function(t){if(t instanceof Zn)return t;if("string"==typeof t){var e=this.owner.createLabelView();return e.text(t),e}return null}})],e.prototype,"label",void 0),m([jo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initAccessoryView(t)},createView:function(){return this.owner.createAccessoryView()},insertView:function(t,e,i,o){t.appendChildView(e,o)},fromAny:function(t){return t instanceof Zn?t:"string"==typeof t?((e=this.owner.createAccessoryView()).text(t),e):((e=this.owner.createAccessoryIconView()).graphics.setAutoState(t),e);var e}})],e.prototype,"accessory",void 0),e}(Sa),ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.listItemDidPress=function(t){},e}(_n),ds=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"selectedItem",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.selectItem=function(t){var e=this.selectedItem;e!==t&&(this.willSelectItem(t,e),Object.defineProperty(this,"selectedItem",{value:t,enumerable:!0,configurable:!0}),this.onSelectItem(t,e),this.didSelectItem(t,e))},e.prototype.willSelectItem=function(t,e){},e.prototype.onSelectItem=function(t,e){null!==e&&e.unhighlight(!0),null!==t&&t.highlight(!1)},e.prototype.didSelectItem=function(t,e){},e.prototype.listDidPressItem=function(t,e){this.selectItem(t)},e}(_n),cs=function(t){function e(i){var o=t.call(this,i)||this;return Object.defineProperty(o,"displayState",{value:e.HiddenState,enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),"undefined"!=typeof PointerEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("pointerup",o.onClick),o.on("click",o.onSyntheticClick)):"undefined"!=typeof TouchEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("touchend",o.onClick),o.on("click",o.onSyntheticClick)):o.on("click",o.onClick),o.initScrim(),o}return w(e,t),e.prototype.initScrim=function(){this.addClass("scrim"),this.display.setAutoState("none"),this.position.setAutoState("absolute"),this.top.setAutoState(0),this.right.setAutoState(0),this.bottom.setAutoState(0),this.left.setAutoState(0),this.pointerEvents.setAutoState("auto"),this.cursor.setAutoState("pointer"),this.backgroundColor.setAutoState(St.black(0))},e.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},e.prototype.isShown=function(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:return!0;default:return!1}},e.prototype.isHidden=function(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}},e.prototype.show=function(t,i){this.isHidden()&&(i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(i),this.setDisplayState(e.ShowState),!1!==i?(this.backgroundColor.setAutoState(St.black(0)),this.backgroundColor.setAutoState(St.black(t),i)):(this.willShow(),this.backgroundColor.setAutoState(St.black(t)),this.didShow()))},e.prototype.willShow=function(){this.setDisplayState(e.ShowingState),this.display.setAutoState("block")},e.prototype.didShow=function(){this.setDisplayState(e.ShownState)},e.prototype.hide=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(e.HideState),!1!==t?this.backgroundColor.setAutoState(St.black(0),t):(this.willHide(),this.backgroundColor.setAutoState(St.black(0)),this.didHide()))},e.prototype.willHide=function(){this.setDisplayState(e.HidingState)},e.prototype.didHide=function(){this.setDisplayState(e.HiddenState),this.display.setAutoState("none")},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.modalService.manager;void 0!==e&&(e.addViewManagerObserver(this),this.modalManagerDidUpdateModality(e.modality,0,e))},e.prototype.onUnmount=function(){var e=this.modalService.manager;void 0!==e&&e.removeViewManagerObserver(this),this.hide(!1),t.prototype.onUnmount.call(this)},e.prototype.modalManagerDidUpdateModality=function(t,i,o){if(0!==t){var n=.5*t;0===i?this.show(n):(this.backgroundColor.setAutoState(St.black(n)),this.displayState===e.ShowingState&&this.didShow())}else this.hide()},e.prototype.onClick=function(t){var e=this.modalService.manager;void 0!==e&&e.displaceModals(t)},e.prototype.onSyntheticClick=function(t){t.preventDefault(),t.stopPropagation()},e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,m([nn({propertyNames:"background-color",type:St,state:null,onBegin:function(t){var i=this.owner.displayState;i===e.ShowState?this.owner.willShow():i===e.HideState&&this.owner.willHide()},onEnd:function(t){var i=this.owner.displayState;i===e.ShowingState?this.owner.didShow():i===e.HidingState&&this.owner.didHide()}})],e.prototype,"backgroundColor",void 0),e}(Zn),fs=function(t){function i(e){var o=t.call(this,e)||this;return Object.defineProperty(o,"source",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"sourceFrame",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"displayState",{value:i.HiddenState,enumerable:!0,configurable:!0}),Object.defineProperty(o,"modality",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(o,"allowedPlacement",{value:["top","bottom","right","left"],enumerable:!0,configurable:!0}),Object.defineProperty(o,"currentPlacement",{value:"none",enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),o.initArrow(),o}return w(i,t),i.prototype.initArrow=function(){var t=this.createArrow();null!==t&&this.prependChildView(t,"arrow")},i.prototype.createArrow=function(){var t=Zn.create("div");return t.addClass("popover-arrow"),t.display.setAutoState("none"),t.position.setAutoState("absolute"),t.width.setAutoState(0),t.height.setAutoState(0),t},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.source&&this.setSource(e.source),void 0!==e.placement&&this.placement(e.placement),void 0!==e.placementFrame&&this.placementFrame(e.placementFrame),void 0!==e.arrowWidth&&this.arrowWidth(e.arrowWidth),void 0!==e.arrowHeight&&this.arrowHeight(e.arrowHeight)},i.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},i.prototype.setSource=function(t){var e=this.source;e!==t&&(this.willSetSource(t),null!==e&&this.isMounted()&&e.removeViewObserver(this),Object.defineProperty(this,"source",{value:t,enumerable:!0,configurable:!0}),this.onSetSource(t),null!==t&&this.isMounted()&&t.addViewObserver(this),this.didSetSource(t))},i.prototype.willSetSource=function(t){var e=this.viewController;null!==e&&void 0!==e.popoverWillSetSource&&e.popoverWillSetSource(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverWillSetSource&&r.popoverWillSetSource(t,this)}},i.prototype.onSetSource=function(t){this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetSource=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.popoverDidSetSource&&n.popoverDidSetSource(t,this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidSetSource&&r.popoverDidSetSource(t,this)},Object.defineProperty(i.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){switch(this.displayState){case i.HiddenState:return"hidden";case i.HidingState:case i.HideState:return"hiding";case i.ShownState:return"shown";case i.ShowingState:case i.ShowState:return"showing";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),i.prototype.isShown=function(){switch(this.displayState){case i.ShownState:case i.ShowingState:case i.ShowState:return!0;default:return!1}},i.prototype.isHidden=function(){switch(this.displayState){case i.HiddenState:case i.HidingState:case i.HideState:return!0;default:return!1}},i.prototype.showModal=function(t,e){this.isHidden()&&(e=void 0===e||!0===e?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(e),void 0!==t.modal&&Object.defineProperty(this,"modality",{value:t.modal,enumerable:!0,configurable:!0}),this.setDisplayState(i.ShowState),!1!==e?this.displayPhase.setState(1,e):(this.willShow(),this.didShow()))},i.prototype.willShow=function(){this.setDisplayState(i.ShowingState);var t=this.viewController;null!==t&&void 0!==t.popoverWillShow&&t.popoverWillShow(this);for(var e=this.viewObservers,o=0,n=e.length;o<n;o+=1){var r=e[o];void 0!==r.popoverWillShow&&r.popoverWillShow(this)}this.place(),this.visibility.setAutoState("visible")},i.prototype.didShow=function(){this.setDisplayState(i.ShownState),this.pointerEvents.setAutoState("auto"),this.marginTop.setAutoState(null),this.opacity.setAutoState(void 0);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidShow&&n.popoverDidShow(this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidShow&&r.popoverDidShow(this)},i.prototype.hideModal=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(i.HideState),!1!==t?this.displayPhase.setState(0,t):(this.willHide(),this.didHide()))},i.prototype.willHide=function(){this.setDisplayState(i.HidingState);var t=this.viewController;null!==t&&void 0!==t.popoverWillHide&&t.popoverWillHide(this);for(var e=this.viewObservers,o=0,n=e.length;o<n;o+=1){var r=e[o];void 0!==r.popoverWillHide&&r.popoverWillHide(this)}this.pointerEvents.setAutoState("none")},i.prototype.didHide=function(){this.setDisplayState(i.HiddenState),this.visibility.setAutoState("hidden"),this.marginTop.setAutoState(null),this.opacity.setAutoState(void 0);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidHide&&n.popoverDidHide(this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidHide&&r.popoverDidHide(this)},i.prototype.placement=function(t){var i;return void 0===t?this.allowedPlacement:(e.Arrays.equal(this.allowedPlacement,t)||(this.allowedPlacement.length=0,(i=this.allowedPlacement).push.apply(i,t),this.place()),this)},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents(),null!==this.source&&this.source.addViewObserver(this)},i.prototype.onUnmount=function(){t.prototype.onUnmount.call(this),this.detachEvents(),null!==this.source&&this.source.removeViewObserver(this)},i.prototype.attachEvents=function(){this.on("click",this.onClick)},i.prototype.detachEvents=function(){this.off("click",this.onClick)},i.prototype.needsProcess=function(t,e){return 0!=(t&(Gi.NeedsScroll|Gi.NeedsAnimate))&&this.requireUpdate(Gi.NeedsLayout),t},i.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e),void 0!==this.backgroundColor.takeUpdatedValue()&&this.place(!0);var o=this.displayState;o===i.ShowState?this.willShow():o===i.HideState?this.willHide():o!==i.ShowingState||this.displayPhase.isAnimating()?o!==i.HidingState||this.displayPhase.isAnimating()||this.didHide():this.didShow(),(this.displayPhase.isAnimating()||this.displayPhase.isUpdated())&&this.applyDisplayPhase(this.displayPhase.takeValue())},i.prototype.applyDisplayPhase=function(t){var e=this.currentPlacement;"above"===e?(this.opacity.setAutoState(void 0),this.marginTop.setAutoState((1-t)*-this.node.clientHeight)):"below"===e?(this.opacity.setAutoState(void 0),this.marginTop.setAutoState((1-t)*this.node.clientHeight)):(this.marginTop.setAutoState(null),this.opacity.setAutoState(t))},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.place()},i.prototype.place=function(t){void 0===t&&(t=!1);var e=this.source,i=this.sourceFrame,o=null!==e?e.popoverFrame:null;if(null===o||0===this.allowedPlacement.length||!t&&o.equals(i))return"none";Object.defineProperty(this,"newSourceFrame",{value:null,enumerable:!0,configurable:!0});var n=this.placePopover(e,o),r=this.getChildView("arrow");return r instanceof Zn&&this.placeArrow(e,o,r,n),n},i.prototype.placePopover=function(t,e){var i=this.node,o=i.offsetParent;if(null===o)return"none";for(var n,a=i.clientWidth,s=i.clientHeight,l=o.getBoundingClientRect(),u=l.left,h=l.top,p=e.left-window.pageXOffset-u,d=e.right-window.pageXOffset-u,c=e.top-window.pageYOffset-h,f=e.bottom-window.pageYOffset-h,v=e.width,y=e.height,g=p+v/2,w=c+y/2,m=this.placementFrame.state,b=null!==m?m.left:0,S=(null!==m?m.right:window.innerWidth)-u,C=null!==m?m.top:0,P=(null!==m?m.bottom:window.innerHeight)-h,V=p-b-window.pageXOffset,T=S-p-v,A=c-C-window.pageYOffset,F=P-c-y,M=this.dropdown.state,O=this.arrowHeight.getValue().pxValue(),x=this.placementGap.getValue().pxValue(),D=this.allowedPlacement,R=0,L=D.length;R<L;R+=1){if("above"===(k=D[R])||"below"===k||"over"===k){n=k;break}if("top"===k&&s+O+x<=A){n=k;break}if("bottom"===k&&s+O+x<=F){n=k;break}if("left"===k&&a+O+x<=V){n=k;break}if("right"===k&&a+O+x<=T){n=k;break}}if(void 0===n){n="none";for(R=0,L=D.length;R<L;R+=1){var k;if("top"===(k=D[R])&&A>=F){n=k;break}if("bottom"===k&&F>=A){n=k;break}if("left"===k&&V>=T){n=k;break}if("right"===k&&T>=V){n=k;break}}}var j=i.offsetLeft,I=i.offsetTop,E=null,W=null,N=this.width.state;N=N instanceof r.Length?N.pxValue():null;var U=this.height.state,B=N,H=U=U instanceof r.Length?U.pxValue():null,q=this.maxWidth.state;q=q instanceof r.Length?q.pxValue():null;var z=this.maxHeight.state,Y=q,X=z=z instanceof r.Length?z.pxValue():null;return"above"===n?(j=Math.round(b),I=Math.round(C),E=Math.round((null!==m?m.width:window.innerWidth)-S),B=Math.round(Math.max(0,S-b)),H=null,Y=null,X=Math.round(Math.max(0,P-C))):"below"===n?(j=Math.round(b),I=Math.round(P-s),E=Math.round(S-(null!==m?m.width:window.innerWidth)),B=Math.round(Math.max(0,S-b)),H=null,Y=null,X=Math.round(Math.max(0,P-C))):"over"===n?(j=Math.round(b),I=Math.round(C),E=Math.round(S-(null!==m?m.width:window.innerWidth)),W=Math.round(P-(null!==m?m.height:window.innerHeight)),B=Math.round(Math.max(0,S-b)),H=Math.round(Math.max(0,P-C)),Y=null,X=null):"top"!==n||M?"bottom"!==n||M?"left"!==n||M?"right"!==n||M?"top"===n&&M?(j=Math.max(b,p),I=Math.round(Math.max(C,c-(s+x))),B=Math.round(Math.max(0,Math.min(v,S-p))),H=null,Y=Math.round(Math.max(0,S-b)),X=Math.round(Math.max(0,f-C))):"bottom"===n&&M?(j=Math.max(b,p),I=Math.round(Math.max(C,f+x)),B=Math.round(Math.max(0,Math.min(v,S-p))),H=null,Y=Math.round(Math.max(0,S-b)),X=Math.round(Math.max(0,P-c))):"left"===n&&M?(j=Math.round(Math.max(b,p-(a+x))),I=Math.max(C,c),B=null,H=Math.round(Math.max(0,Math.min(y,P-c))),Y=Math.round(Math.max(0,d-b)),X=Math.round(Math.max(0,P-C))):"right"===n&&M&&(j=Math.round(Math.max(b,d+x)),I=Math.max(C,c),B=null,H=Math.round(Math.max(0,Math.min(y,P-c))),Y=Math.round(Math.max(0,S-p)),X=Math.round(Math.max(0,P-C))):(j=Math.round(Math.max(b,d+O+x)),I=w-s/2<=C?Math.round(C):w+s/2>=P?Math.round(P-s):Math.round(w-s/2),Y=Math.round(Math.max(0,S-p)),X=Math.round(Math.max(0,P-C))):(j=Math.round(Math.max(b,p-(a+O+x))),I=w-s/2<=C?Math.round(C):w+s/2>=P?Math.round(P-s):Math.round(w-s/2),Y=Math.round(Math.max(0,d-b)),X=Math.round(Math.max(0,P-C))):(j=g-a/2<=b?Math.round(b):g+a/2>=S?Math.round(S-a):Math.round(g-a/2),I=Math.round(Math.max(C,f+O+x)),Y=Math.round(Math.max(0,S-b)),X=Math.round(Math.max(0,P-c))):(j=g-a/2<=b?Math.round(b):g+a/2>=S?Math.round(S-a):Math.round(g-a/2),I=Math.round(Math.max(C,c-(s+O+x))),Y=Math.round(Math.max(0,S-b)),X=Math.round(Math.max(0,f-C))),"none"!==n&&(j!==i.offsetLeft&&this.left.isAuto()||I!==i.offsetTop&&this.top.isAuto()||B!==N&&this.width.isAuto()||H!==U&&this.height.isAuto()||Y!==q&&this.maxWidth.isAuto()||X!==z&&this.maxHeight.isAuto())&&(this.willPlacePopover(n),this.position.setAutoState("absolute"),this.left.setAutoState(j),this.right.setAutoState(E),this.top.setAutoState(I),this.bottom.setAutoState(W),this.width.setAutoState(B),this.height.setAutoState(H),this.maxWidth.setAutoState(Y),this.maxHeight.setAutoState(X),this.onPlacePopover(n),this.didPlacePopover(n)),Object.defineProperty(this,"currentPlacement",{value:n,enumerable:!0,configurable:!0}),n},i.prototype.willPlacePopover=function(t){var e=this.viewController;null!==e&&void 0!==e.popoverWillPlace&&e.popoverWillPlace(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverWillPlace&&r.popoverWillPlace(t,this)}},i.prototype.onPlacePopover=function(t){},i.prototype.didPlacePopover=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.popoverDidPlace&&n.popoverDidPlace(t,this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidPlace&&r.popoverDidPlace(t,this)},i.prototype.placeArrow=function(t,e,i,o){var n=this.node,a=n.offsetParent;if(null!==a){var s=a.getBoundingClientRect(),l=s.left,u=s.top,h=e.left-window.pageXOffset-l,p=e.top-window.pageYOffset-u,d=h+e.width/2,c=p+e.height/2,f=n.offsetLeft,v=f+n.clientWidth,y=n.offsetTop,g=y+n.clientHeight,w=this.backgroundColor.value;null===w&&(w=St.transparent());var m=this.borderRadius(),b=m instanceof r.Length?m.pxValue():0,S=this.arrowWidth.getValue().pxValue(),C=this.arrowHeight.getValue().pxValue(),P=f+b+S/2,V=v-b-S/2,T=y+b+S/2,A=g-b-S/2;i.top.setAutoState(null),i.right.setAutoState(null),i.bottom.setAutoState(null),i.left.setAutoState(null),i.borderLeftWidth.setAutoState(null),i.borderLeftStyle.setAutoState(void 0),i.borderLeftColor.setAutoState(null),i.borderRightWidth.setAutoState(null),i.borderRightStyle.setAutoState(void 0),i.borderRightColor.setAutoState(null),i.borderTopWidth.setAutoState(null),i.borderTopStyle.setAutoState(void 0),i.borderTopColor.setAutoState(null),i.borderBottomWidth.setAutoState(null),i.borderBottomStyle.setAutoState(void 0),i.borderBottomColor.setAutoState(null),i.zIndex.setAutoState(100),"none"===o||"above"===o||"below"===o||"over"===o?i.display.setAutoState("none"):Math.round(c)<=Math.round(y-C)&&P<=d&&d<=V?(i.display.setAutoState("block"),i.top.setAutoState(Math.round(-C)),i.left.setAutoState(Math.round(d-f-S/2)),i.borderLeftWidth.setAutoState(Math.round(S/2)),i.borderLeftStyle.setAutoState("solid"),i.borderLeftColor.setAutoState(St.transparent()),i.borderRightWidth.setAutoState(Math.round(S/2)),i.borderRightStyle.setAutoState("solid"),i.borderRightColor.setAutoState(St.transparent()),i.borderBottomWidth.setAutoState(Math.round(C)),i.borderBottomStyle.setAutoState("solid"),i.borderBottomColor.setAutoState(w.toString())):Math.round(g+C)<=Math.round(c)&&P<=d&&d<=V?(i.display.setAutoState("block"),i.bottom.setAutoState(Math.round(-C)),i.left.setAutoState(Math.round(d-f-S/2)),i.borderLeftWidth.setAutoState(Math.round(S/2)),i.borderLeftStyle.setAutoState("solid"),i.borderLeftColor.setAutoState(St.transparent()),i.borderRightWidth.setAutoState(Math.round(S/2)),i.borderRightStyle.setAutoState("solid"),i.borderRightColor.setAutoState(St.transparent()),i.borderTopWidth.setAutoState(Math.round(C)),i.borderTopStyle.setAutoState("solid"),i.borderTopColor.setAutoState(w.toString())):Math.round(d)<=Math.round(f-C)&&T<=c&&c<=A?(i.display.setAutoState("block"),i.left.setAutoState(Math.round(-C)),i.top.setAutoState(Math.round(c-y-S/2)),i.borderTopWidth.setAutoState(Math.round(S/2)),i.borderTopStyle.setAutoState("solid"),i.borderTopColor.setAutoState(St.transparent()),i.borderBottomWidth.setAutoState(Math.round(S/2)),i.borderBottomStyle.setAutoState("solid"),i.borderBottomColor.setAutoState(St.transparent()),i.borderRightWidth.setAutoState(Math.round(C)),i.borderRightStyle.setAutoState("solid"),i.borderRightColor.setAutoState(w.toString())):Math.round(v+C)<=Math.round(d)&&T<=c&&c<=A?(i.display.setAutoState("block"),i.right.setAutoState(Math.round(-C)),i.top.setAutoState(Math.round(c-y-S/2)),i.borderTopWidth.setAutoState(Math.round(S/2)),i.borderTopStyle.setAutoState("solid"),i.borderTopColor.setAutoState(St.transparent()),i.borderBottomWidth.setAutoState(Math.round(S/2)),i.borderBottomStyle.setAutoState("solid"),i.borderBottomColor.setAutoState(St.transparent()),i.borderLeftWidth.setAutoState(Math.round(C)),i.borderLeftStyle.setAutoState("solid"),i.borderLeftColor.setAutoState(w.toString())):i.display.setAutoState("none")}},i.prototype.viewDidMount=function(t){this.place()},i.prototype.viewDidPower=function(t){this.place()},i.prototype.viewDidResize=function(t,e){this.place()},i.prototype.viewDidScroll=function(t,e){this.place()},i.prototype.viewDidAnimate=function(t,e){this.place()},i.prototype.viewDidLayout=function(t,e){this.place()},i.prototype.viewDidProject=function(t,e){this.place()},i.prototype.viewDidSetAttribute=function(t,e,i){this.place()},i.prototype.viewDidSetStyle=function(t,e,i,o){this.place()},i.prototype.onClick=function(t){t.stopPropagation()},i.HiddenState=0,i.HidingState=1,i.HideState=2,i.ShownState=3,i.ShowingState=4,i.ShowState=5,m([So({type:Number,state:0})],i.prototype,"displayPhase",void 0),m([So({type:r.Length,state:r.Length.zero()})],i.prototype,"placementGap",void 0),m([So({type:r.Length,state:r.Length.px(10)})],i.prototype,"arrowWidth",void 0),m([So({type:r.Length,state:r.Length.px(8)})],i.prototype,"arrowHeight",void 0),m([ho({type:r.BoxR2,state:null,onSetState:function(t){this.owner.place()},fromAny:function(t){return null!==t?r.BoxR2.fromAny(t):null}})],i.prototype,"placementFrame",void 0),m([ho({type:Boolean,state:!1,onSetState:function(t){this.owner.place()}})],i.prototype,"dropdown",void 0),i}(Zn),vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"source",{get:function(){var t=this.view;return null!==t?t.source:null},enumerable:!1,configurable:!0}),e.prototype.popoverWillSetSource=function(t,e){},e.prototype.popoverDidSetSource=function(t,e){},e.prototype.popoverWillPlace=function(t,e){},e.prototype.popoverDidPlace=function(t,e){},e.prototype.popoverWillShow=function(t){},e.prototype.popoverDidShow=function(t){},e.prototype.popoverWillHide=function(t){},e.prototype.popoverDidHide=function(t){},e}(_n),ys=function(t){function e(i){var o=t.call(this,i)||this;return Object.defineProperty(o,"displayState",{value:e.HiddenState,enumerable:!0,configurable:!0}),Object.defineProperty(o,"placement",{value:"left",enumerable:!0,configurable:!0}),Object.defineProperty(o,"modality",{value:!0,enumerable:!0,configurable:!0}),o.initDrawer(),o.initTheme(),o}return w(e,t),e.prototype.initDrawer=function(){this.addClass("drawer"),this.display.setAutoState("none"),this.flexDirection.setAutoState("column"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("auto"),this.overscrollBehaviorY.setAutoState("contain"),this.overflowScrolling.setAutoState("touch")},e.prototype.initTheme=function(){this.modifyTheme(re.default,[re.raised,1])},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.drawerPlacement&&this.drawerPlacement(e.drawerPlacement),void 0!==e.collapsedWidth&&this.collapsedWidth(e.collapsedWidth),void 0!==e.expandedWidth&&this.expandedWidth(e.expandedWidth)},e.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(e.prototype,"drawerState",{get:function(){switch(this.displayState){case e.HiddenState:return"hidden";case e.HidingState:case e.HideState:return"hiding";case e.ShownState:return"shown";case e.ShowingState:case e.ShowState:return"showing";case e.CollapsedState:return"collapsed";case e.CollapsingState:case e.CollapseState:return"collapsing";case e.ExpandingState:case e.ExpandState:return"shown";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),e.prototype.isShown=function(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:case e.ExpandingState:case e.ExpandState:return!0;default:return!1}},e.prototype.isHidden=function(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}},e.prototype.isCollapsed=function(){switch(this.displayState){case e.CollapsedState:case e.CollapsingState:case e.CollapseState:return!0;default:return!1}},e.prototype.drawerPlacement=function(t){var e=this.placement;return void 0===t?e:(e!==t&&(this.willSetDrawerPlacement(t,e),Object.defineProperty(this,"placement",{value:t,enumerable:!0,configurable:!0}),this.onSetDrawerPlacement(t,e),this.didSetDrawerPlacement(t,e)),this)},e.prototype.isHorizontal=function(){return"top"===this.placement||"bottom"===this.placement},e.prototype.isVertical=function(){return"left"===this.placement||"right"===this.placement},e.prototype.willSetDrawerPlacement=function(t,e){var i=this.viewController;null!==i&&void 0!==i.drawerWillSetPlacement&&i.drawerWillSetPlacement(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.drawerWillSetPlacement&&a.drawerWillSetPlacement(t,e,this)}},e.prototype.onSetDrawerPlacement=function(t,e){this.requireUpdate(Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout)},e.prototype.didSetDrawerPlacement=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerDidSetPlacement&&r.drawerDidSetPlacement(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.drawerDidSetPlacement&&a.drawerDidSetPlacement(t,e,this)},e.prototype.updateDrawerSlide=function(t){var e=this.placement;"top"===e?this.updateDrawerSlideTop(t):"right"===e?this.updateDrawerSlideRight(t):"bottom"===e?this.updateDrawerSlideBottom(t):"left"===e&&this.updateDrawerSlideLeft(t)},e.prototype.updateDrawerSlideTop=function(t){var e=this.height.value;e=e instanceof r.Length?e.pxValue():this.node.offsetHeight,this.top.setAutoState(r.Length.px((t-1)*e)),this.effectiveWidth.setAutoState(this.width.value),this.effectiveHeight.setAutoState(r.Length.px(t*e))},e.prototype.updateDrawerSlideRight=function(t){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth,this.right.setAutoState(r.Length.px((t-1)*e)),this.effectiveWidth.setAutoState(r.Length.px(t*e)),this.effectiveHeight.setAutoState(this.height.value)},e.prototype.updateDrawerSlideBottom=function(t){var e=this.height.value;e=e instanceof r.Length?e.pxValue():this.node.offsetHeight,this.bottom.setAutoState(r.Length.px((t-1)*e)),this.effectiveWidth.setAutoState(this.width.value),this.effectiveHeight.setAutoState(r.Length.px(t*e))},e.prototype.updateDrawerSlideLeft=function(t){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth,this.left.setAutoState(r.Length.px((t-1)*e)),this.effectiveWidth.setAutoState(r.Length.px(t*e)),this.effectiveHeight.setAutoState(this.height.value)},e.prototype.updateDrawerStretch=function(t){if(this.isVertical()){var e=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue(),o=e.times(1-t).plus(i.times(t));this.width.setAutoState(o),this.effectiveWidth.setAutoState(o)}},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(e.getOr(Qt.backgroundColor,i,null),o)},e.prototype.onAnimate=function(i){var o=this.displayState;o===e.ShowState?this.willShow():o===e.HideState?this.willHide():o===e.ExpandState?this.willExpand():o===e.CollapseState&&this.willCollapse(),t.prototype.onAnimate.call(this,i);var n=this.drawerStretch.takeUpdatedValue();void 0!==n&&this.updateDrawerStretch(n);var r=this.drawerSlide.takeUpdatedValue();void 0!==r&&this.updateDrawerSlide(r)},e.prototype.didAnimate=function(i){var o=this.displayState,n=this.drawerStretch.value,r=this.drawerSlide.value;o===e.ShowingState&&1===r?this.didShow():o===e.HidingState&&0===r?this.didHide():o===e.ExpandingState&&1===n?this.didExpand():o===e.CollapsingState&&0===n&&this.didCollapse(),t.prototype.didAnimate.call(this,i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.place(e),"mobile"===e.viewIdiom?this.boxShadow.setAutoState(this.getLookOr(Qt.shadow,he.floating,null)):this.boxShadow.setAutoState(this.getLookOr(Qt.shadow,null))},e.prototype.place=function(t){var e=this.placement;"top"===e?this.placeTop(t):"right"===e?this.placeRight(t):"bottom"===e?this.placeBottom(t):"left"===e&&this.placeLeft(t)},e.prototype.placeTop=function(t){this.addClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setAutoState("fixed"),this.width.setAutoState(null),this.height.setAutoState(null),this.top.setAutoState(null),this.right.setAutoState(r.Length.zero()),this.bottom.setAutoState(null),this.left.setAutoState(r.Length.zero()),this.updateDrawerSlideTop(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.edgeInsets.setAutoState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:e.insetLeft}),this.isCollapsed()&&this.expand()},e.prototype.placeRight=function(t){this.removeClass("drawer-top").addClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setAutoState("fixed"),this.width.setAutoState(null),this.height.setAutoState(null),this.top.setAutoState(r.Length.zero()),this.right.setAutoState(null),this.bottom.setAutoState(r.Length.zero()),this.left.setAutoState(null),this.updateDrawerStretch(this.drawerStretch.getValue()),this.updateDrawerSlideRight(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.paddingTop.setAutoState(r.Length.px(e.insetTop)),this.paddingBottom.setAutoState(r.Length.px(e.insetBottom)),this.edgeInsets.setAutoState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:0})},e.prototype.placeBottom=function(t){this.removeClass("drawer-top").removeClass("drawer-right").addClass("drawer-bottom").removeClass("drawer-left"),this.position.setAutoState("fixed"),this.width.setAutoState(null),this.height.setAutoState(null),this.top.setAutoState(null),this.right.setAutoState(r.Length.zero()),this.bottom.setAutoState(null),this.left.setAutoState(r.Length.zero()),this.updateDrawerSlideBottom(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.edgeInsets.setAutoState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:e.insetLeft}),this.isCollapsed()&&this.expand()},e.prototype.placeLeft=function(t){this.removeClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").addClass("drawer-left"),this.position.setAutoState("fixed"),this.width.setAutoState(null),this.height.setAutoState(null),this.top.setAutoState(r.Length.zero()),this.right.setAutoState(null),this.bottom.setAutoState(r.Length.zero()),this.left.setAutoState(null),this.updateDrawerStretch(this.drawerStretch.getValue()),this.updateDrawerSlideLeft(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.paddingTop.setAutoState(r.Length.px(e.insetTop)),this.paddingBottom.setAutoState(r.Length.px(e.insetBottom)),this.edgeInsets.setAutoState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:e.insetLeft})},Object.defineProperty(e.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalState",{get:function(){switch(this.displayState){case e.HiddenState:return"hidden";case e.HidingState:case e.HideState:return"hiding";case e.ShownState:return"shown";case e.ShowingState:case e.ShowState:return"showing";case e.CollapsedState:case e.CollapsingState:case e.CollapseState:case e.ExpandingState:case e.ExpandState:return"shown";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),e.prototype.showModal=function(t,e){void 0!==t.modal&&Object.defineProperty(this,"modality",{value:t.modal,enumerable:!0,configurable:!0}),this.show(e)},e.prototype.hideModal=function(t){this.hide(t)},e.prototype.show=function(t){this.isShown()&&1===this.drawerSlide.value&&1===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(e.ShowState),!1!==t?(this.drawerStretch.setAutoState(1,t),this.drawerSlide.setAutoState(1,t)):(this.willShow(),this.drawerStretch.setAutoState(1),this.drawerSlide.setAutoState(1),this.didShow()))},e.prototype.willShow=function(){this.setDisplayState(e.ShowingState);var t=this.viewController;null!==t&&void 0!==t.drawerWillShow&&t.drawerWillShow(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillShow&&r.drawerWillShow(this)}this.display.setAutoState("flex"),this.place(this.viewContext)},e.prototype.didShow=function(){this.setDisplayState(e.ShownState),this.requireUpdate(Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidShow&&n.drawerDidShow(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidShow&&r.drawerDidShow(this)},e.prototype.hide=function(t){this.isHidden()&&0===this.drawerSlide.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(e.HideState),!1!==t?this.drawerSlide.setAutoState(0,t):(this.willHide(),this.drawerSlide.setAutoState(0),this.didHide()))},e.prototype.willHide=function(){this.setDisplayState(e.HidingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillHide&&t.drawerWillHide(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillHide&&r.drawerWillHide(this)}},e.prototype.didHide=function(){this.setDisplayState(e.HiddenState),this.requireUpdate(Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout),this.display.setAutoState("none");for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidHide&&n.drawerDidHide(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidHide&&r.drawerDidHide(this)},e.prototype.expand=function(t){this.isShown()&&1===this.drawerSlide.value&&1===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(e.ExpandState),!1!==t?1!==this.drawerStretch.value?(this.drawerSlide.setAutoState(1,t),this.drawerStretch.setAutoState(1,t)):this.drawerSlide.setAutoState(1,t):(this.willExpand(),this.drawerSlide.setAutoState(1),this.drawerStretch.setAutoState(1),this.didExpand()))},e.prototype.willExpand=function(){this.setDisplayState(e.ExpandingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillExpand&&t.drawerWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillExpand&&r.drawerWillExpand(this)}},e.prototype.didExpand=function(){this.setDisplayState(e.ShownState),this.requireUpdate(Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidExpand&&n.drawerDidExpand(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidExpand&&r.drawerDidExpand(this)},e.prototype.collapse=function(t){!this.isVertical()||this.isCollapsed()&&1===this.drawerSlide.value&&0===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):s.Timing.fromAny(t),this.setDisplayState(e.CollapseState),0===this.drawerSlide.value&&this.drawerStretch.setAutoState(0),!1!==t?0!==this.drawerStretch.value?(this.drawerSlide.setAutoState(1,t),this.drawerStretch.setAutoState(0,t)):this.drawerSlide.setAutoState(1,t):(this.willCollapse(),this.drawerSlide.setAutoState(1),this.drawerStretch.setAutoState(0),this.didCollapse()))},e.prototype.willCollapse=function(){this.setDisplayState(e.CollapsingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillCollapse&&t.drawerWillCollapse(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillCollapse&&r.drawerWillCollapse(this)}this.display.setAutoState("flex")},e.prototype.didCollapse=function(){this.setDisplayState(e.CollapsedState),this.requireUpdate(Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidCollapse&&n.drawerDidCollapse(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidCollapse&&r.drawerDidCollapse(this)},e.prototype.toggle=function(t){var e=this.drawerState;"mobile"!==this.viewIdiom||"hidden"!==e&&"hiding"!==e?"hidden"===e||"hiding"===e?this.show(t):"collapsed"===e||"collapsing"===e?this.expand(t):"mobile"===this.viewIdiom?this.hide(t):this.collapse(t):this.modalService.presentModal(this,{modal:!0})},e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e.CollapsedState=6,e.CollapsingState=7,e.CollapseState=8,e.ExpandingState=9,e.ExpandState=10,m([Po({type:r.Length,state:r.Length.px(60)})],e.prototype,"collapsedWidth",void 0),m([Po({type:r.Length,state:r.Length.px(200)})],e.prototype,"expandedWidth",void 0),m([So({type:Number,state:0,updateFlags:Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout})],e.prototype,"drawerSlide",void 0),m([So({type:Number,state:1,updateFlags:Gi.NeedsResize|Gi.NeedsAnimate|Gi.NeedsLayout})],e.prototype,"drawerStretch",void 0),m([co({type:r.Length,state:null})],e.prototype,"effectiveWidth",void 0),m([co({type:r.Length,state:null})],e.prototype,"effectiveHeight",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),e}(Zn),gs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.drawerWillSetPlacement=function(t,e,i){},e.prototype.drawerDidSetPlacement=function(t,e,i){},e.prototype.drawerWillShow=function(t){},e.prototype.drawerDidShow=function(t){},e.prototype.drawerWillHide=function(t){},e.prototype.drawerDidHide=function(t){},e.prototype.drawerWillExpand=function(t){},e.prototype.drawerDidExpand=function(t){},e.prototype.drawerWillCollapse=function(t){},e.prototype.drawerDidCollapse=function(t){},e}(_n),ws=function(t){function i(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"drawerView",{value:null,enumerable:!0,configurable:!0}),i.initIcon(),i}return w(i,t),i.prototype.initButton=function(){t.prototype.initButton.call(this),this.addClass("drawer-button")},i.prototype.initIcon=function(){this.pushIcon(i.hamburgerIcon)},i.prototype.setDrawerView=function(t){Object.defineProperty(this,"drawerView",{value:t,enumerable:!0,configurable:!0})},i.prototype.onClick=function(e){t.prototype.onClick.call(this,e);var i=this.drawerView;null!==i&&i.toggle()},Object.defineProperty(i,"hamburgerIcon",{get:function(){return Fr.create(24,24,"M21,17L21,19L3,19L3,17L21,17ZM21,11L21,13L3,13L3,11L21,11ZM3,5L3,7L21,7L21,5L3,5Z")},enumerable:!1,configurable:!0}),m([e.Lazy],i,"hamburgerIcon",null),i}(Aa),ms=function(){function t(t,e,i,o,n,r,a){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"width",{value:n,enumerable:!0}),Object.defineProperty(this,"left",{value:r,enumerable:!0}),Object.defineProperty(this,"right",{value:a,enumerable:!0})}return t.prototype.withGrow=function(t){return this.copy(this.key,t,this.shrink,this.basis,this.width,this.left,this.right)},t.prototype.withShrink=function(t){return this.copy(this.key,this.grow,t,this.basis,this.width,this.left,this.right)},t.prototype.withBasis=function(t){return t=r.Length.fromAny(t),this.copy(this.key,this.grow,this.shrink,t,this.width,this.left,this.right)},t.prototype.resized=function(t,e,i){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),this.copy(this.key,this.grow,this.shrink,this.basis,t,e,i)},t.prototype.copy=function(e,i,o,n,r,a,s){return new t(e,i,o,n,r,a,s)},t.prototype.equivalentTo=function(e,i){return this===e||e instanceof t&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right))},t.prototype.debug=function(t){t=t.write("DeckPost").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),null===this.width&&null===this.left&&null===this.right||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.create=function(e,i,o,n){return void 0===i&&(i=0),void 0===o&&(o=1),new t(e,i,o,n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),null,null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var a=e.basis;a=void 0!==a?r.Length.fromAny(a):r.Length.zero();var s=e.width;s=null!=s?r.Length.fromAny(s):null;var l=e.left;l=null!=l?r.Length.fromAny(l):null;var u=e.right;return new t(i,o,n,a,s,l,u=null!=u?r.Length.fromAny(u):null)},t}(),bs=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"spacing",{value:o,enumerable:!0}),Object.defineProperty(this,"posts",{value:n,enumerable:!0})}return t.prototype.lookupPost=function(t){for(var e=this.posts,i=0,o=e.length;i<o;i+=1){if(t===e[i].key)return i}},t.prototype.getPost=function(t){var e=this.posts;if("number"==typeof t){if(void 0!==(n=e[t]))return n}else if("string"==typeof t)for(var i=0,o=e.length;i<o;i+=1){var n;if(t===(n=e[i]).key)return n}return null},t.prototype.resized=function(i,o,n,a){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===a?a=this.spacing:null!==a&&(a=r.Length.fromAny(a)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.spacing,a))return this;for(var s=this.posts,l=s.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==a?a.pxValue(h):0,f=0,v=0,y=p+d,g=p,w=0;w<l;w+=1){0!==w&&(y+=c,g+=c);var m=(V=s[w]).basis.pxValue(h);u[w]=V.resized(m,g,h-m-g),f+=V.grow,v+=V.shrink,y+=m,g+=m}if(y<h&&f>0){var b=h-y,S=p,C=0;for(w=0;w<l;w+=1){0!==C&&(y+=c,S+=c);m=(V=u[w]).basis.pxValue(h)+b*(V.grow/f);u[w]=V.resized(m,S,h-m-S),S+=m,C+=1}}else if(y>h&&v>0){b=y-h;var P=p;for(C=0,w=0;w<l;w+=1){var V;0!==C&&(y+=c,P+=c);m=(V=u[w]).basis.pxValue(h)-b*(V.shrink/v);u[w]=V.resized(m,P,h-m-P),P+=m,C+=1}}return new t(i,o,n,a,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.posts,n=e.posts,r=o.length;if(r===n.length){for(var a=0;a<r;a+=1)if(!o[a].equivalentTo(n[a],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.spacing,i.spacing)&&e.Arrays.equal(this.posts,i.posts))},t.prototype.debug=function(t){t=t.write("DeckRail").write(46).write("of").write(40);for(var e=0,i=this.posts.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.posts[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41))},t.prototype.toString=function(){return a.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=ms.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var a,s=e.spacing;if(s=null!=s?r.Length.fromAny(s):null,void 0!==e.posts){var l=e.posts.length;a=new Array(l);for(var u=0;u<l;u+=1)a[u]=ms.fromAny(e.posts[u])}else a=[];return new t(i,o,n,s,a)},t}(),Ss=function(t){function e(e){var i=t.call(this,e)||this;return i.initSlot(),i}return w(e,t),e.prototype.initSlot=function(){this.addClass("deck-slot")},m([ho({type:ms,state:null,inherit:!0})],e.prototype,"post",void 0),m([ho({type:ms,state:null})],e.prototype,"nextPost",void 0),m([ho({type:ms,state:null})],e.prototype,"prevPost",void 0),e}(Zn),Cs=function(t){function e(e){var i=t.call(this,e)||this;return i.itemCount=0,i.item=null,i.initSlider(),i}return w(e,t),e.prototype.initSlider=function(){this.addClass("deck-slider"),this.position.setAutoState("relative")},Object.defineProperty(e.prototype,"colorLook",{get:function(){return Qt.color},enumerable:!1,configurable:!0}),e.prototype.createItem=function(t){var e=Zn.span.create();return e.display.setAutoState("flex"),e.alignItems.setAutoState("center"),e.whiteSpace.setAutoState("nowrap"),e.text(t),e},e.prototype.pushItem=function(t,e){"string"==typeof t&&(t=this.createItem(t));var i=this.itemCount,o=i+1;this.itemCount=o;var n="item"+i,r=this.getViewFastener(n),a=null!==r?r.view:null,l="item"+o,u=new Vs(this,l,l);u.itemIndex=o,this.willPushItem(t,a),this.item=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(e)),this.deckPhase.isInherited()||this.deckPhase.setState(o,e),!1===e&&this.didPushItem(t,a)},e.prototype.willPushItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPushItem&&i.deckSliderWillPushItem(t,e,this)}))},e.prototype.didPushItem=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckSliderDidPushItem&&i.deckSliderDidPushItem(t,e,this)}))},e.prototype.popItem=function(t){var e=this.itemCount,i=e-1;this.itemCount=i;var o="item"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var a="item"+i,l=this.getViewFastener(a),u=null!==l?l.view:null;this.willPopItem(u,r),this.item=l,null!==l&&l.injectView(),t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(t),this.deckPhase.isInherited()||this.deckPhase.setState(i,t),!1===t&&this.didPopItem(u,r)}return r},e.prototype.willPopItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPopItem&&i.deckSliderWillPopItem(t,e,this)}))},e.prototype.didPopItem=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.itemIndex>this.itemCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckSliderDidPopItem&&i.deckSliderDidPopItem(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="item"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopItem(null!==this.item?this.item.view:null,r);else if(null!==this.item&&null!==this.item.view&&Math.round(i)>0){var a="item"+Math.round(i-1),s=this.getViewFastener(a),l=null!==s?s.view:null;this.didPushItem(this.item.view,l)}}}t.prototype.didLayout.call(this,e)},m([So({type:Number,inherit:!0,updateFlags:Gi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([So({type:Number,state:.5})],e.prototype,"slotAlign",void 0),e}(Ss),Ps=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.itemIndex=0,n.itemWidth=null,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initItem(t)},e.prototype.insertView=function(t,e,i,o){var n="item"+(this.itemIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.isAuto()&&o.color.setAutoState(t.getOr(this.owner.colorLook,e,null),i)},e.prototype.viewDidLayout=function(t,e){this.layoutItem(e)},e.prototype.initItem=function(t){t.position.setAutoState("absolute")},e.prototype.layoutItem=function(t){var e=this.itemIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var a=this.owner.deckPhase.getValueOr(0),s=Math.max(this.owner.itemCount,Math.ceil(a)),l=s-1,u=a-l,h=t.width.state;this.itemWidth=h,h instanceof r.Length?h=h.pxValue(o):(h=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setAutoState(h):t.width.setAutoState(this.itemWidth));var p=o-h;e<l||e===l&&1===u?(t.left.setAutoState(0),t.top.setAutoState(0),t.height.setAutoState(n),t.opacity.setAutoState(0),t.setCulled(!0)):e===l?(t.left.setAutoState(p*i*(1-u)),t.top.setAutoState(0),t.height.setAutoState(n),t.opacity.setAutoState(1-u),t.setCulled(!1)):e===s?(t.left.setAutoState(p*(1-u)+p*i*u),t.top.setAutoState(0),t.height.setAutoState(n),t.opacity.setAutoState(u),t.setCulled(!1)):(t.left.setAutoState(p),t.top.setAutoState(0),t.height.setAutoState(n),t.opacity.setAutoState(0),t.setCulled(!0))},e}(jo),Vs=jo.define({extends:Ps,type:Zn,child:!1,observe:!0}),Ts=function(t){function e(e){var i=t.call(this,e)||this;return i.labelCount=0,i.label=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("deck-button"),this.position.setAutoState("relative"),this.userSelect.setAutoState("none"),this.cursor.setAutoState("pointer")},Object.defineProperty(e.prototype,"colorLook",{get:function(){return Qt.accentColor},enumerable:!1,configurable:!0}),e.prototype.createLabel=function(t){var e=Zn.span.create();return e.display.setAutoState("flex"),e.alignItems.setAutoState("center"),e.whiteSpace.setAutoState("nowrap"),e.text(t),e},e.prototype.pushLabel=function(t,e){"string"==typeof t&&(t=this.createLabel(t));var i=this.labelCount,o=i+1;this.labelCount=o;var n="label"+i,r=this.getViewFastener(n),a=null!==r?r.view:null,l="label"+o,u=new Os(this,l,l);u.labelIndex=o,this.willPushLabel(t,a),this.label=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(e)),this.deckPhase.isInherited()||this.deckPhase.setState(o,e),!1===e&&this.didPushLabel(t,a)},e.prototype.willPushLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPushLabel&&i.deckButtonWillPushLabel(t,e,this)}))},e.prototype.didPushLabel=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckButtonDidPushLabel&&i.deckButtonDidPushLabel(t,e,this)}))},e.prototype.popLabel=function(t){var e=this.labelCount,i=e-1;this.labelCount=i;var o="label"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var a="label"+i,l=this.getViewFastener(a),u=null!==l?l.view:null;this.willPopLabel(u,r),this.label=l,null!==l&&l.injectView(),t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(t),this.deckPhase.isInherited()||this.deckPhase.setState(i,t),!1===t&&this.didPopLabel(u,r)}return r},e.prototype.willPopLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPopLabel&&i.deckButtonWillPopLabel(t,e,this)}))},e.prototype.didPopLabel=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.labelIndex>this.labelCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckButtonDidPopLabel&&i.deckButtonDidPopLabel(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="label"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopLabel(null!==this.label?this.label.view:null,r);else if(null!==this.label&&null!==this.label.view&&Math.round(i)>0){var a="label"+Math.round(i-1),s=this.getViewFastener(a),l=null!==s?s.view:null;this.didPushLabel(this.label.view,l)}}}t.prototype.didLayout.call(this,e)},m([ho({type:r.Length,state:r.Length.px(12)})],e.prototype,"iconPadding",void 0),m([So({type:Number,inherit:!0,updateFlags:Gi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([So({type:Number,state:0})],e.prototype,"slotAlign",void 0),e}(Ss),As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("close-icon"),t.setStyle("position","absolute"),t.pointerEvents.setAutoState("none")},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),a=t.width.state;a=a instanceof r.Length?a.pxValue():0;var s=t.height.state;s=s instanceof r.Length?s.pxValue():0;var l=this.owner.deckPhase.getValueOr(0),u=Math.min(Math.max(0,l-1),1),h=n+(i-a-n)*e,p=(o-s)/2;t.setStyle("left",h+"px"),t.setStyle("top",p+"px"),t.viewBox.setAutoState("0 0 "+a+" "+s),t.opacity.setAutoState(1-u)},e}(jo);jo({extends:As,key:!0,type:Ur,observe:!0})(Ts.prototype,"closeIcon");var Fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("back-icon"),t.setStyle("position","absolute"),t.pointerEvents.setAutoState("none")},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),a=t.width.state;a=a instanceof r.Length?a.pxValue():0;var s=t.height.state;s=s instanceof r.Length?s.pxValue():0;var l,u=this.owner.deckPhase.getValueOr(0),h=Math.max(this.owner.labelCount,Math.ceil(u)),p="label"+h,d=this.owner.getChildView(p),c=n+(i-a-n)*e,f=(o-s)/2;if(u<=1)l=0,t.iconColor.setAutoState(null);else if(null!==d&&u<2){var v=this.owner.parentView,y=this.owner.nextPost.state,g=null!==v&&null!==y?v.getChildView(y.key):null,w=void 0,m=void 0;if(g instanceof Ss){w=g.slotAlign.value,m=(m=g.width.state)instanceof r.Length?m.pxValue():g.node.offsetWidth;var b=g.left.state;b=b instanceof r.Length?b.pxValue():g.node.offsetLeft;var S=this.owner.left.state;m+=b-((S=S instanceof r.Length?S.pxValue():this.owner.node.offsetLeft)+i)}else w=0,m=0;var C=u-(h-1),P=d.width.state,V=i-c-a+(m-(P=P instanceof r.Length?P.pxValue(i):d.node.offsetWidth))*w;c+=V*(1-C)+V*e*C,l=C;var T=g instanceof Ss?g.getLookOr(g.colorLook,null):null,A=this.owner.getLookOr(this.owner.colorLook,null);null!==T&&null!==A?t.iconColor.setAutoState(T.interpolateTo(A)(C)):t.iconColor.setAutoState(A)}t.setStyle("left",c+"px"),t.setStyle("top",f+"px"),t.viewBox.setAutoState("0 0 "+a+" "+s),t.opacity.setAutoState(l)},e}(jo);jo({extends:Fs,key:!0,type:Ur,observe:!0})(Ts.prototype,"backIcon");var Ms=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.labelIndex=0,n.labelWidth=null,n.layoutWidth=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initLabel(t)},e.prototype.insertView=function(t,e,i,o){var n="label"+(this.labelIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.isAuto()&&o.color.setAutoState(t.getOr(this.owner.colorLook,e,null),i)},e.prototype.viewDidLayout=function(t,e){this.layoutLabel(e)},e.prototype.initLabel=function(t){t.position.setAutoState("absolute"),t.pointerEvents.setAutoState("none")},e.prototype.layoutLabel=function(t){var e=this.labelIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var a,s,l=this.owner.parentView,u=this.owner.nextPost.state,h=null!==l&&null!==u?l.getChildView(u.key):null;if(h instanceof Ss){a=h.slotAlign.value,s=(s=h.width.state)instanceof r.Length?s.pxValue():h.node.offsetWidth;var p=h.left.state;p=p instanceof r.Length?p.pxValue():h.node.offsetLeft;var d=this.owner.left.state;s+=p-((d=d instanceof r.Length?d.pxValue():this.owner.node.offsetLeft)+o)}else a=0,s=0;var c,f,v=this.owner.iconPadding.getState().pxValue(o),y=this.owner.backIcon.view;null!==y?(c=(c=y.width.state)instanceof r.Length?c.pxValue():0,f=(f=y.height.state)instanceof r.Length?f.pxValue():0):(c=0,f=0);var g=this.owner.deckPhase.getValueOr(0),w=Math.max(this.owner.labelCount,Math.ceil(g)),m=w-1,b=g-m,S=t.width.state;this.labelWidth=S,S instanceof r.Length?S=S.pxValue(o):(S=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setAutoState(S):t.width.setAutoState(this.labelWidth));var C=v+(o-c-v)*i,P=(n-f)/2,V=o-C-c+(s-S)*a;if(e<m||e===m&&1===b)t.left.setAutoState(C+c),t.top.setAutoState(P),t.height.setAutoState(f),t.opacity.setAutoState(0),t.setCulled(!0);else if(e===m)t.left.setAutoState(C+c+V*i*(1-b)),t.top.setAutoState(P),t.height.setAutoState(f),t.opacity.setAutoState(1-b),t.setCulled(!1);else if(e===w){t.left.setAutoState(C+c+(V*(1-b)+V*i*b)),t.top.setAutoState(P),t.height.setAutoState(f);var T=h instanceof Ss?h.getLookOr(h.colorLook,null):null,A=this.owner.getLookOr(this.owner.colorLook,null);null!==T&&null!==A?t.color.setAutoState(T.interpolateTo(A)(b)):t.color.setAutoState(A),t.opacity.setAutoState(1),t.setCulled(!1)}else t.left.setAutoState(C+c+V),t.top.setAutoState(P),t.height.setAutoState(f),t.opacity.setAutoState(0),t.setCulled(!0);this.layoutWidth=C+c+S+v},e}(jo),Os=jo.define({extends:Ms,type:Zn,child:!1,observe:!0}),xs=function(t){function e(e){var i=t.call(this,e)||this;return i.initBar(),i.initTheme(),i}return w(e,t),e.prototype.initBar=function(){this.addClass("deck-bar"),this.position.setAutoState("relative"),this.height.setAutoState(this.barHeight.state),this.userSelect.setAutoState("none"),this.edgeInsets.setAutoState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:0})},e.prototype.initTheme=function(){this.modifyTheme(re.default,[re.translucent,1],[re.primary,1])},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(e.getOr(Qt.backgroundColor,i,null),o)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Ss&&this.onInsertSlot(e)},e.prototype.onInsertSlot=function(t){t.position.setAutoState("absolute")},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeBar(e)},e.prototype.resizeBar=function(t){var e=this.rail.ownState;if(null!=e){var i=this.rail.superState,o=null;if(null!=i&&null!==i.width&&(o=i.width.pxValue()),null===o){var n=this.parentView;n instanceof Zn&&(o=(o=n.width.state)instanceof r.Length?o.pxValue():n.node.offsetWidth)}null===o&&(o=(o=this.width.state)instanceof r.Length?o.pxValue():this.node.offsetWidth);var a=this.edgeInsets.superState;null==a&&this.edgeInsets.isAuto()&&(a=t.viewport.safeArea);var s=null!=a?a.insetTop:0,l=null!=a?a.insetLeft:0,u=null!=a?a.insetRight:0,h=this.itemSpacing.getStateOr(r.Length.zero()).pxValue(o),p=e.resized(o,l,u,h);this.rail.setState(p),this.height.setAutoState(this.barHeight.state.plus(s))}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutBar(e)},e.prototype.layoutBar=function(t){var e=this.edgeInsets.superState;null==e&&this.edgeInsets.isAuto()&&(e=t.viewport.safeArea);var i=null!=e?e.insetTop:0;this.height.setAutoState(this.barHeight.state.plus(i))},e.prototype.displayChildViews=function(e,i,o){0!=(e&Gi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.rail.state,a=this.edgeInsets.superState;null==a&&this.edgeInsets.isAuto()&&(a=i.viewport.safeArea);var s=this.height.state;s=s instanceof r.Length?s.pxValue():this.node.offsetHeight;var l=null!=a?a.insetTop:0,u=this.barHeight.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Ss){var r=t.key,a=null!==n&&void 0!==r?n.lookupPost(r):void 0;if(void 0!==a){var s=n.getPost(a),h=n.getPost(a+1),p=n.getPost(a-1);t.display.setAutoState("flex"),t.left.setAutoState(s.left),t.top.setAutoState(l),t.width.setAutoState(s.width),t.height.setAutoState(u),t.post.setAutoState(s),t.nextPost.setAutoState(h),t.prevPost.setAutoState(p)}else t.display.setAutoState("none"),t.left.setAutoState(null),t.top.setAutoState(null),t.width.setAutoState(null),t.height.setAutoState(null),t.post.setAutoState(null),t.nextPost.setAutoState(null),t.prevPost.setAutoState(null)}o.call(this,t,e,i)}))},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressBackButton&&e.deckBarDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressCloseButton&&e.deckBarDidPressCloseButton(t,this)}))},m([ho({type:bs,state:null})],e.prototype,"rail",void 0),m([So({type:Number,inherit:!0})],e.prototype,"deckPhase",void 0),m([ho({type:r.Length,state:r.Length.px(48),updateFlags:Gi.NeedsLayout})],e.prototype,"barHeight",void 0),m([ho({type:r.Length,state:r.Length.zero(),updateFlags:Gi.NeedsResize})],e.prototype,"itemSpacing",void 0),m([ho({type:Object,inherit:!0,state:null,updateFlags:Gi.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(Zn),Ds=function(t){function e(e){var i=t.call(this,e)||this;return i.initCard(),i}return w(e,t),e.prototype.initCard=function(){this.addClass("deck-card"),this.position.setAutoState("relative"),this.overflowX.setAutoState("auto"),this.overflowY.setAutoState("auto"),this.overflowScrolling.setAutoState("touch")},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.isAuto()&&this.backgroundColor.setAutoState(e.getOr(Qt.backgroundColor,i,null),o)},m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([ho({type:String})],e.prototype,"cardTitle",void 0),m([jo({type:Zn,child:!1})],e.prototype,"backItem",void 0),m([jo({type:Zn,child:!1})],e.prototype,"titleView",void 0),m([jo({type:Zn,child:!1})],e.prototype,"leftItem",void 0),m([jo({type:Zn,child:!1})],e.prototype,"rightItem",void 0),e}(Zn),Rs=function(t){function e(e){var i=t.call(this,e)||this;return i.cardCount=0,i.card=null,i.initDeck(),i}return w(e,t),e.prototype.initDeck=function(){this.addClass("deck"),this.position.setAutoState("relative"),this.overflowX.setAutoState("hidden"),this.overflowY.setAutoState("hidden")},e.prototype.pushCard=function(t,e){if(!this.deckPhase.isAnimating()){var i=this.cardCount,o=i+1;this.cardCount=o;var n="card"+i,r=this.getViewFastener(n),a=null!==r?r.view:null,l="card"+o,u=new Is(this,l,l);u.cardIndex=o,this.willPushCard(t,a),this.card=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(e)),this.deckPhase.setState(o,e),!1===e&&this.didPushCard(t,a)}},e.prototype.willPushCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPushCard&&i.deckWillPushCard(t,e,this)}))},e.prototype.didPushCard=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckDidPushCard&&i.deckDidPushCard(t,e,this)}))},e.prototype.popCard=function(t){if(this.deckPhase.isAnimating())return null;var e=this.cardCount,i=e-1;this.cardCount=i;var o="card"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var a="card"+i,l=this.getViewFastener(a),u=null!==l?l.view:null;this.willPopCard(u,r),this.card=l,null!==l&&l.injectView(),t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):s.Timing.fromAny(t),this.deckPhase.setState(i,t),!1===t&&this.didPopCard(u,r)}return r},e.prototype.willPopCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPopCard&&i.deckWillPopCard(t,e,this)}))},e.prototype.didPopCard=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.cardIndex>this.cardCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckDidPopCard&&i.deckDidPopCard(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="card"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopCard(null!==this.card?this.card.view:null,r);else if(null!==this.card&&null!==this.card.view&&Math.round(i)>0){var a="card"+Math.round(i-1),s=this.getViewFastener(a),l=null!==s?s.view:null;this.didPushCard(this.card.view,l)}}}t.prototype.didLayout.call(this,e)},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressBackButton&&e.deckDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressCloseButton&&e.deckDidPressCloseButton(t,this)}))},m([So({type:Number,state:0,updateFlags:Gi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([ho({type:Number,state:1})],e.prototype,"inAlign",void 0),m([ho({type:Number,state:1/3})],e.prototype,"outAlign",void 0),m([ho({type:Object,inherit:!0,state:null,updateFlags:Gi.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(Zn),Ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initBar(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidResize=function(t,e){this.resizeBar(e)},e.prototype.initBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.position.setAutoState("absolute"),t.left.setAutoState(0),t.top.setAutoState(0),t.width.setAutoState(e),t.zIndex.setAutoState(1)},e.prototype.resizeBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.width.setAutoState(e)},e.prototype.deckBarDidPressBackButton=function(t,e){this.owner.didPressBackButton(t)},e.prototype.deckBarDidPressCloseButton=function(t,e){this.owner.didPressCloseButton(t)},e}(jo);jo({extends:Ls,key:!0,type:xs,observe:!0})(Rs.prototype,"bar");var ks,js=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.cardIndex=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initCard(t)},e.prototype.insertView=function(t,e,i,o){var n="card"+(this.cardIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidResize=function(t,e){this.resizeCard(e,t)},e.prototype.viewDidLayout=function(t,e){this.layoutCard(e,t)},e.prototype.initCard=function(t){var e=this.owner.edgeInsets.state;void 0===e&&this.owner.edgeInsets.isAuto()&&(e=this.owner.viewport.safeArea);var i=this.owner.width.state;i=i instanceof r.Length?i:r.Length.px(this.owner.node.offsetWidth);var o=this.owner.height.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetHeight);var n=null,a=this.owner.bar.view;null!==a&&(n=(n=a.height.state)instanceof r.Length?n:r.Length.px(a.node.offsetHeight),null!==e&&(e={insetTop:0,insetRight:e.insetRight,insetBottom:e.insetBottom,insetLeft:e.insetLeft})),t.edgeInsets.setAutoState(e),t.position.setAutoState("absolute"),t.left.setAutoState(i),t.top.setAutoState(0),t.width.setAutoState(i),t.height.setAutoState(o),t.paddingTop.setAutoState(n),t.boxSizing.setAutoState("border-box"),t.zIndex.setAutoState(0),t.visibility.setAutoState("hidden")},e.prototype.resizeCard=function(t,e){var i=this.owner.edgeInsets.state;void 0===i&&this.owner.edgeInsets.isAuto()&&(i=e.viewport.safeArea);var o=this.owner.width.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetWidth);var n=this.owner.height.state;n=n instanceof r.Length?n:r.Length.px(this.owner.node.offsetHeight);var a=null,s=this.owner.bar.view;null!==s&&(a=(a=s.height.state)instanceof r.Length?a:r.Length.px(s.node.offsetHeight),null!==i&&(i={insetTop:0,insetRight:i.insetRight,insetBottom:i.insetBottom,insetLeft:i.insetLeft})),t.edgeInsets.setAutoState(i),t.width.setAutoState(o),t.height.setAutoState(n),t.paddingTop.setAutoState(a)},e.prototype.layoutCard=function(t,e){var i=t.width.state;i=i instanceof r.Length?i:r.Length.px(t.node.offsetWidth);var o=this.owner.inAlign.state,n=this.owner.outAlign.state,a=this.owner.deckPhase.getValue(),s=Math.max(this.owner.cardCount,Math.ceil(a)),l=s-1,u=a-l,h=this.cardIndex;h<l||h===l&&1===u?(t.left.setAutoState(-i.pxValue()*n),t.visibility.setAutoState("hidden"),t.setCulled(!0)):h===l?(t.left.setAutoState(-i.pxValue()*n*u),t.visibility.setAutoState(void 0),t.setCulled(!1)):h===s?(t.left.setAutoState(i.pxValue()*o*(1-u)),t.visibility.setAutoState(void 0),t.setCulled(!1)):(t.left.setAutoState(i.pxValue()*o),t.visibility.setAutoState("hidden"),t.setCulled(!0))},e}(jo),Is=jo.define({extends:js,type:Ds,child:!1,observe:!0}),Es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.deckWillPushCard=function(t,e,i){},e.prototype.deckDidPushCard=function(t,e,i){},e.prototype.deckWillPopCard=function(t,e,i){},e.prototype.deckDidPopCard=function(t,e,i){},e.prototype.deckDidPressBackButton=function(t,e){},e.prototype.deckDidPressCloseButton=function(t,e){},e}(_n),Ws=function(t){function i(e){var i=t.call(this,e)||this;return i.onBackButtonClick=i.onBackButtonClick.bind(i),i.initRail(),i}return w(i,t),i.prototype.initRail=function(){var t=ms.create("backButton",0,0,48),e=ms.create("titleSlider",1,1),i=ms.create("moreSlider",0,0,48),o=bs.create([t,e,i]);this.rail.setAutoState(o),this.backMembrane.injectView(),this.backButton.injectView(),this.titleSlider.injectView(),this.moreSlider.injectView()},Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),i.prototype.createCloseIcon=function(){var t=Ur.create();return t.width.setAutoState(24),t.height.setAutoState(24),t.iconWidth.setAutoState(24),t.iconHeight.setAutoState(24),t.graphics.setAutoState(this.closeIcon),t},i.prototype.initBackMembrane=function(t){t.display.setAutoState("none"),t.position.setAutoState("absolute"),t.left.setAutoState(0),t.top.setAutoState(0),t.borderTopLeftRadius.setAutoState(4),t.borderTopRightRadius.setAutoState(4),t.borderBottomLeftRadius.setAutoState(4),t.borderBottomRightRadius.setAutoState(4),t.overflowX.setAutoState("hidden"),t.overflowY.setAutoState("hidden"),t.cursor.setAutoState("pointer")},Object.defineProperty(i.prototype,"backIcon",{get:function(){return i.backIcon},enumerable:!1,configurable:!0}),i.prototype.createBackIcon=function(){var t=Ur.create();return t.width.setAutoState(24),t.height.setAutoState(24),t.iconWidth.setAutoState(24),t.iconHeight.setAutoState(24),t.graphics.setAutoState(this.backIcon),t},i.prototype.createBackButton=function(){var t=Ts.create();return t.backIcon.setView(this.createBackIcon()),t.backIcon.injectView(),t},i.prototype.initBackButton=function(t){t.pointerEvents.setAutoState("none")},i.prototype.initTitleSlider=function(t){t.pointerEvents.setAutoState("none")},i.prototype.initMoreSlider=function(t){},i.prototype.pushTitle=function(t,e){var i=this.titleSlider.view,o=this.backButton.view;if(null!==i&&null!==o){var n=i.item,r=null;null!==n&&(r=n.view,n.setView(null),i.item=null),i.pushItem(t,e),null!==r?o.pushLabel(r,e):o.labelCount=i.itemCount,this.deckPhase.isInherited()||this.deckPhase.setState(i.itemCount,e)}},i.prototype.popTitle=function(t){var e=this.titleSlider.view,i=this.backButton.view;null!==e&&null!==i&&(e.popItem(t),i.popLabel(t),this.deckPhase.isInherited()||this.deckPhase.setState(e.itemCount,t))},i.prototype.didPopBackButton=function(t,e,i){var o=i.getViewFastener(e.key);null!==o&&(o.setView(null),i.setViewFastener(o.key,null));var n=this.titleSlider.view;if(null!==n){var r="item"+n.itemCount,a=n.getViewFastener(r);null!==a&&a.setView(e),n.item=a,n.appendChildView(e,r)}},i.prototype.didLayout=function(e){var i=this.backMembrane.view,o=this.backButton.view;if(null!==i&&null!==o){if(i.width.isAuto()){var n=o.left.state;if(n=n instanceof r.Length?n.pxValue():o.node.offsetLeft,null!==o.label)i.width.setAutoState(n+o.label.layoutWidth);else{var a=o.height.state;a=a instanceof r.Length?a.pxValue():o.node.offsetWidth,i.width.setAutoState(n+a)}}if(i.height.isAuto()){var s=o.top.state;s=s instanceof r.Length?s.pxValue():o.node.offsetTop;var l=o.height.state;l=l instanceof r.Length?l.pxValue():o.node.offsetHeight,i.height.setAutoState(s+l)}if(null!==o.backIcon.view){var u=o.closeIcon.view,h=o.deckPhase.getValueOr(0),p=Math.min(Math.max(0,h-1),1);i.display.setAutoState(null===u&&0===p?"none":"block")}}t.prototype.didLayout.call(this,e)},i.prototype.onBackButtonClick=function(t){t.stopPropagation(),this.deckPhase.getStateOr(0)>1?this.didPressBackButton(t):this.didPressCloseButton(t)},Object.defineProperty(i,"closeIcon",{get:function(){return Fr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),Object.defineProperty(i,"backIcon",{get:function(){return Fr.create(24,24,"M11.7,3.9L9.9,2.1L0,12L9.9,21.9L11.7,20.1L3.5,12Z").withFillLook(Qt.accentColor)},enumerable:!1,configurable:!0}),m([jo({key:!0,type:Sa,onSetView:function(t,e){null!==e&&e.off("click",this.owner.onBackButtonClick),null!==t&&(this.owner.initBackMembrane(t),t.on("click",this.owner.onBackButtonClick))}})],i.prototype,"backMembrane",void 0),m([jo({key:!0,type:Ts,observe:!0,onSetView:function(t){null!==t&&this.owner.initBackButton(t)},createView:function(){return this.owner.createBackButton()},deckButtonDidPopLabel:function(t,e,i){this.owner.didPopBackButton(t,e,i)}})],i.prototype,"backButton",void 0),m([jo({key:!0,type:Cs,onSetView:function(t){null!==t&&this.owner.initTitleSlider(t)}})],i.prototype,"titleSlider",void 0),m([jo({key:!0,type:Cs,onSetView:function(t){null!==t&&this.owner.initMoreSlider(t)}})],i.prototype,"moreSlider",void 0),m([e.Lazy],i,"closeIcon",null),m([e.Lazy],i,"backIcon",null),i}(xs),Ns=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(e){t.prototype.onSetView.call(this,e),null!==e&&this.initBar(e)},e.prototype.initBar=function(t){var e=t.bar.view;e instanceof Ws||(e=Ws.create(),t.bar.setView(e))},e.prototype.deckWillPushCard=function(t,e,i){var o=i.bar.view;if(o instanceof Ws){o.pushTitle(t.cardTitle.getStateOr(""));var n=o.backMembrane.view;null!==n&&n.pointerEvents.setAutoState("none")}},e.prototype.deckDidPushCard=function(t,e,i){var o=i.bar.view;if(o instanceof Ws){var n=o.backMembrane.view;null!==n&&n.pointerEvents.setAutoState("auto")}},e.prototype.deckWillPopCard=function(t,e,i){var o=i.bar.view;o instanceof Ws&&o.popTitle()},e.prototype.deckDidPressBackButton=function(t,e){e.deckPhase.isAnimating()||e.popCard()},e}(Es),Us=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.arrangement&&this.arrangement(e.arrangement),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dialViewWillSetValue&&i.dialViewWillSetValue(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialViewWillSetValue&&a.dialViewWillSetValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialViewDidSetValue&&r.dialViewDidSetValue(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dialViewDidSetValue&&a.dialViewDidSetValue(t,e,this)},i.prototype.willSetLimit=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dialViewWillSetLimit&&i.dialViewWillSetLimit(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialViewWillSetLimit&&a.dialViewWillSetLimit(t,e,this)}},i.prototype.onSetLimit=function(t,e){},i.prototype.didSetLimit=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialViewDidSetLimit&&r.dialViewDidSetLimit(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dialViewDidSetLimit&&a.dialViewDidSetLimit(t,e,this)},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dialViewWillSetLabel&&i.dialViewWillSetLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialViewWillSetLabel&&a.dialViewWillSetLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialViewDidSetLabel&&r.dialViewDidSetLabel(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dialViewDidSetLabel&&a.dialViewDidSetLabel(t,e,this)},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dialViewWillSetLegend&&i.dialViewWillSetLegend(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialViewWillSetLegend&&a.dialViewWillSetLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialViewDidSetLegend&&r.dialViewDidSetLegend(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dialViewDidSetLegend&&a.dialViewDidSetLegend(t,e,this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderDial(o,this.viewFrame),o.restore()}},i.prototype.renderDial=function(t,i){var o=i.width,n=i.height,a=Math.min(o,n),s=this.value.getValue(),l=this.limit.getValue(),u=0!==l?s/l:0,h=this.center.getValue(),p=this.innerRadius.getValue().px(a),d=this.outerRadius.getValue().px(a),c=d.value-p.value,f=this.startAngle.getValue().rad(),v=this.sweepAngle.getValue().rad(),y=this.cornerRadius.getValue().px(c),g=new br(h,p,d,f,v,r.Angle.zero(),null,y),w=g.withSweepAngle(v.times(u));t.save(),t.beginPath();var m=this.dialColor.value;null!==m&&(t.fillStyle=m.toString()),g.draw(t,i),null!==m&&t.fill(),t.clip();var b=this.meterColor.value;null!==b&&(t.beginPath(),t.fillStyle=b.toString(),w.draw(t,i),t.fill()),t.restore();var S=this.label.view;if(null!==S&&!S.isHidden()){var C=(p.value+d.value)/2,P=C*Math.cos(f.value+e.Equivalent.Epsilon),V=C*Math.sin(f.value+e.Equivalent.Epsilon),T=void 0;T=P>=0?V>=0?"start":"end":V<0?"end":"start";var A=f.value-Math.PI/2,F=this.labelPadding.getValue().pxValue(c),M=F*Math.cos(A),O=F*Math.sin(A);Cr.is(S)&&(S.textAlign.setAutoState(T),S.textBaseline.setAutoState("middle"),S.textOrigin.setAutoState(new r.PointR2(h.x+P+M,h.y+V+O)))}var x=this.legend.view;if(null!==x&&!x.isHidden()){var D=this.tickAlign.getValue(),R=f.value+v.value*u*D,L=this.tickRadius.getValue().pxValue(a),k=this.tickLength.getValue().pxValue(o),j=this.tickWidth.getValue().pxValue(a),I=this.tickColor.value,E=h.x,W=h.y,N=d.value*Math.cos(R+e.Equivalent.Epsilon),U=d.value*Math.sin(R+e.Equivalent.Epsilon),B=L*Math.cos(R+e.Equivalent.Epsilon),H=L*Math.sin(R+e.Equivalent.Epsilon);M=0;null!==I&&(t.beginPath(),t.strokeStyle=I.toString(),t.lineWidth=j,t.moveTo(E+N,W+U),t.lineTo(E+B,W+H),0!==k&&(B>=0?(t.lineTo(E+k,W+H),M=k-B):B<0&&(t.lineTo(E-k,W+H),M=k+B)),t.stroke());T=void 0;if(B>=0?T="end":(M=-M,T="start"),Cr.is(x)){var q=this.tickPadding.getValue().pxValue(a);yr.is(x)&&x.fill.setAutoState(I),x.textAlign.setAutoState(T),x.textBaseline.setAutoState("alphabetic"),x.textOrigin.setAutoState(new r.PointR2(E+B+M,W+H-q))}}},i.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestDial(e,i,a,this.viewFrame),a.restore()}}return n},i.prototype.hitTestDial=function(t,e,i,o){var n=Math.min(o.width,o.height),a=this.center.getValue(),s=this.innerRadius.getValue().px(n),l=this.outerRadius.getValue().px(n),u=l.value-s.value,h=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.cornerRadius.getValue().px(u),c=new br(a,s,l,h,p,r.Angle.zero(),null,d);return i.beginPath(),c.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return i.fromInit(t);throw new TypeError(""+t)},m([So({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},onSetValue:function(t,e){this.owner.onSetValue(t,e)},didSetValue:function(t,e){this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([So({type:Number,state:1,willSetValue:function(t,e){this.owner.willSetLimit(t,e)},onSetValue:function(t,e){this.owner.onSetLimit(t,e)},didSetValue:function(t,e){this.owner.didSetLimit(t,e)}})],i.prototype,"limit",void 0),m([So({type:r.PointR2,inherit:!0,state:r.PointR2.origin()})],i.prototype,"center",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"innerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(40)})],i.prototype,"outerRadius",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.rad(-Math.PI/2)})],i.prototype,"startAngle",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.rad(2*Math.PI)})],i.prototype,"sweepAngle",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"cornerRadius",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.subduedColor})],i.prototype,"dialColor",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.accentColor})],i.prototype,"meterColor",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"labelPadding",void 0),m([So({type:Number,inherit:!0,state:1})],i.prototype,"tickAlign",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(45)})],i.prototype,"tickRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.neutralColor})],i.prototype,"tickColor",void 0),m([So({type:gt,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,inherit:!0,look:Qt.mutedColor})],i.prototype,"textColor",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),m([ho({type:String,state:"auto"})],i.prototype,"arrangement",void 0),i}(ar),Bs=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"value",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"limit",{value:1,enumerable:!0,configurable:!0}),Object.defineProperty(e,"label",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"legend",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setValue=function(t){var e=this.value;t!==e&&(this.willSetValue(t,e),Object.defineProperty(this,"value",{value:t,enumerable:!0,configurable:!0}),this.onSetValue(t,e),this.didSetValue(t,e))},i.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitWillSetValue&&r.dialTraitWillSetValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitDidSetValue&&r.dialTraitDidSetValue(t,e,this)}},i.prototype.setLimit=function(t){var e=this.limit;t!==e&&(this.willSetLimit(t,e),Object.defineProperty(this,"limit",{value:t,enumerable:!0,configurable:!0}),this.onSetLimit(t,e),this.didSetLimit(t,e))},i.prototype.willSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitWillSetLimit&&r.dialTraitWillSetLimit(t,e,this)}},i.prototype.onSetLimit=function(t,e){},i.prototype.didSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitDidSetLimit&&r.dialTraitDidSetLimit(t,e,this)}},i.prototype.setLabel=function(t){var i=this.label;e.Equals(t,i)||(this.willSetLabel(t,i),Object.defineProperty(this,"label",{value:t,enumerable:!0,configurable:!0}),this.onSetLabel(t,i),this.didSetLabel(t,i))},i.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitWillSetLabel&&r.dialTraitWillSetLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){},i.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitDidSetLabel&&r.dialTraitDidSetLabel(t,e,this)}},i.prototype.formatLabel=function(t,e){},i.prototype.setLegend=function(t){var i=this.legend;e.Equals(t,i)||(this.willSetLegend(t,i),Object.defineProperty(this,"legend",{value:t,enumerable:!0,configurable:!0}),this.onSetLegend(t,i),this.didSetLegend(t,i))},i.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitWillSetLegend&&r.dialTraitWillSetLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){},i.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialTraitDidSetLegend&&r.dialTraitDidSetLegend(t,e,this)}},i.prototype.formatLegend=function(t,e){},i}(st),Hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.dial.trait;return null!==t?t.value:void 0},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t){var e=this.dial.trait;null!==e&&e.setValue(t)},e.prototype.setLimit=function(t){var e=this.dial.trait;null!==e&&e.setLimit(t)},e.prototype.setLabel=function(t){var e=this.dial.trait;null!==e&&e.setLabel(t)},e.prototype.setLegend=function(t){var e=this.dial.trait;null!==e&&e.setLegend(t)},e.prototype.initDialTrait=function(t){},e.prototype.attachDialTrait=function(t){null!==this.dial.view&&(this.setDialViewValue(t.value,t),this.setDialViewLimit(t.limit,t),this.setDialLabelView(t.label,t),this.setDialLegendView(t.legend,t))},e.prototype.detachDialTrait=function(t){},e.prototype.willSetDialTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialWillSetTrait&&r.dialWillSetTrait(t,e,this)}},e.prototype.onSetDialTrait=function(t,e){null!==e&&this.detachDialTrait(e),null!==t&&(this.attachDialTrait(t),this.initDialTrait(t))},e.prototype.didSetDialTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialDidSetTrait&&r.dialDidSetTrait(t,e,this)}},e.prototype.onSetDialTraitValue=function(t,e,i){this.setDialViewValue(t,i)},e.prototype.onSetDialTraitLimit=function(t,e,i){this.setDialViewLimit(t,i)},e.prototype.updateDialTraitLabel=function(t,e,i){var o=i.formatLabel(t,e);void 0!==o&&i.setLabel(o)},e.prototype.onSetDialTraitLabel=function(t,e,i){this.setDialLabelView(t,i)},e.prototype.updateDialTraitLegend=function(t,e,i){var o=i.formatLegend(t,e);void 0!==o&&i.setLegend(o)},e.prototype.onSetDialTraitLegend=function(t,e,i){this.setDialLegendView(t,i)},e.prototype.createDialView=function(){return Us.create()},e.prototype.initDialView=function(t){var e=this.dial.trait;if(null!==e){var i=t.value.value,o=t.limit.value;this.updateDialTraitLabel(i,o,e),this.updateDialTraitLegend(i,o,e),this.setDialViewValue(e.value,e),this.setDialViewLimit(e.limit,e),this.setDialLabelView(e.label,e),this.setDialLegendView(e.legend,e)}},e.prototype.themeDialView=function(t,e,i,o){},e.prototype.attachDialView=function(t){this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachDialView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetDialView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialWillSetView&&r.dialWillSetView(t,e,this)}},e.prototype.onSetDialView=function(t,e){null!==e&&this.detachDialView(e),null!==t&&(this.attachDialView(t),this.initDialView(t))},e.prototype.didSetDialView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialDidSetView&&r.dialDidSetView(t,e,this)}},e.prototype.setDialViewValue=function(t,e,i){var o=this.dial.view;null!==o&&o.value.isAuto()&&(void 0===i||!0===i?!0===(i=this.dialTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.value.setAutoState(t,i))},e.prototype.willSetDialViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialWillSetViewValue&&a.dialWillSetViewValue(t,e,this)}},e.prototype.onSetDialViewValue=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.limit.value;this.updateDialTraitLabel(t,n,o),this.updateDialTraitLegend(t,n,o)}},e.prototype.didSetDialViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialDidSetViewValue&&a.dialDidSetViewValue(t,e,this)}},e.prototype.setDialViewLimit=function(t,e,i){var o=this.dial.view;null!==o&&o.limit.isAuto()&&(void 0===i||!0===i?!0===(i=this.dialTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.limit.setAutoState(t,i))},e.prototype.willSetDialViewLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialWillSetViewLimit&&a.dialWillSetViewLimit(t,e,this)}},e.prototype.onSetDialViewLimit=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.value.value;this.updateDialTraitLabel(n,t,o),this.updateDialTraitLegend(n,t,o)}},e.prototype.didSetDialViewLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dialDidSetViewLimit&&a.dialDidSetViewLimit(t,e,this)}},e.prototype.createDialLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setDialLabelView=function(t,e){var i=this.dial.view;if(null!==i){var o=null!==t?this.createDialLabelView(t,e):null;i.label.setView(o)}},e.prototype.initDialLabelView=function(t){},e.prototype.attachDialLabelView=function(t){},e.prototype.detachDialLabelView=function(t){},e.prototype.willSetDialLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialWillSetLabelView&&r.dialWillSetLabelView(t,e,this)}},e.prototype.onSetDialLabelView=function(t,e){null!==e&&this.detachDialLabelView(e),null!==t&&(this.attachDialLabelView(t),this.initDialLabelView(t))},e.prototype.didSetDialLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialDidSetLabelView&&r.dialDidSetLabelView(t,e,this)}},e.prototype.createDialLegendView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setDialLegendView=function(t,e){var i=this.dial.view;if(null!==i){var o=null!==t?this.createDialLegendView(t,e):null;i.legend.setView(o)}},e.prototype.initDialLegendView=function(t){},e.prototype.attachDialLegendView=function(t){},e.prototype.detachDialLegendView=function(t){},e.prototype.willSetDialLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialWillSetLegendView&&r.dialWillSetLegendView(t,e,this)}},e.prototype.onSetDialLegendView=function(t,e){null!==e&&this.detachDialLegendView(e),null!==t&&(this.attachDialLegendView(t),this.initDialLegendView(t))},e.prototype.didSetDialLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dialDidSetLegendView&&r.dialDidSetLegendView(t,e,this)}},e.DialFastener=fa.define({viewType:Us,observeView:!0,willSetView:function(t,e){this.owner.willSetDialView(t,e)},onSetView:function(t,e){this.owner.onSetDialView(t,e)},didSetView:function(t,e){this.owner.didSetDialView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeDialView(o,t,e,i)},dialViewWillSetValue:function(t,e,i){this.owner.willSetDialViewValue(t,e,i)},dialViewDidSetValue:function(t,e,i){this.owner.onSetDialViewValue(t,e,i),this.owner.didSetDialViewValue(t,e,i)},dialViewWillSetLimit:function(t,e,i){this.owner.willSetDialViewLimit(t,e,i)},dialViewDidSetLimit:function(t,e,i){this.owner.onSetDialViewLimit(t,e,i),this.owner.didSetDialViewLimit(t,e,i)},dialViewDidSetLabel:function(t,e){this.owner.label.setView(t)},dialViewDidSetLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createDialView()},traitType:Bs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDialTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDialTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDialTrait(t,e)},dialTraitDidSetValue:function(t,e,i){this.owner.onSetDialTraitValue(t,e,i)},dialTraitDidSetLimit:function(t,e,i){this.owner.onSetDialTraitLimit(t,e,i)},dialTraitDidSetLabel:function(t,e,i){this.owner.onSetDialTraitLabel(t,e,i)},dialTraitDidSetLegend:function(t,e,i){this.owner.onSetDialTraitLegend(t,e,i)}}),m([oa({type:s.Timing,inherit:!0})],e.prototype,"dialTiming",void 0),m([fa({extends:e.DialFastener})],e.prototype,"dial",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetDialLabelView(t,e)},onSetView:function(t,e){this.owner.onSetDialLabelView(t,e)},didSetView:function(t,e){this.owner.didSetDialLabelView(t,e)}})],e.prototype,"label",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetDialLegendView(t,e)},onSetView:function(t,e){this.owner.onSetDialLegendView(t,e)},didSetView:function(t,e){this.owner.didSetDialLegendView(t,e)}})],e.prototype,"legend",void 0),e}(ma),qs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialSpacing&&this.dialSpacing(e.dialSpacing),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.dials;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(Us.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Cr.is(t)&&(t.textAlign.setAutoState("center"),t.textBaseline.setAutoState("middle"),t.textOrigin.setAutoState(this.center.state))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){var i=this.viewController;null!==i&&void 0!==i.gaugeViewWillSetTitle&&i.gaugeViewWillSetTitle(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeViewWillSetTitle&&a.gaugeViewWillSetTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeViewDidSetTitle&&r.gaugeViewDidSetTitle(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.gaugeViewDidSetTitle&&a.gaugeViewDidSetTitle(t,e,this)},e.prototype.insertDial=function(t,e){void 0===e&&(e=null),t=Us.fromAny(t);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createDialFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDial=function(t,e){var i=t.label.view;null!==i&&this.initDialLabel(i,e);var o=t.legend.view;null!==o&&this.initDialLegend(o,e)},e.prototype.attachDial=function(t,e){},e.prototype.detachDial=function(t,e){},e.prototype.willSetDial=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.gaugeViewWillSetDial&&n.gaugeViewWillSetDial(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.gaugeViewWillSetDial&&l.gaugeViewWillSetDial(t,e,i,this)}},e.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},e.prototype.didSetDial=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.gaugeViewDidSetDial&&s.gaugeViewDidSetDial(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.gaugeViewDidSetDial&&l.gaugeViewDidSetDial(t,e,i,this)},e.prototype.onSetDialValue=function(t,e,i){this.requireUpdate(Gi.NeedsLayout)},e.prototype.initDialLabel=function(t,e){},e.prototype.onSetDialLabel=function(t,e,i){null!==t&&this.initDialLabel(t,i)},e.prototype.initDialLegend=function(t,e){},e.prototype.onSetDialLegend=function(t,e,i){null!==t&&this.initDialLegend(t,i)},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDial=function(t){return t instanceof Us?t:null},e.prototype.onInsertDial=function(t,e){this.insertDial(t,e)},e.prototype.onRemoveDial=function(t){this.removeDial(t)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDial(e);null!==o&&this.onInsertDial(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDial(e);null!==i&&this.onRemoveDial(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutGauge(this.viewFrame)},e.prototype.layoutGauge=function(t){if(this.center.isAuto()){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setAutoState(new r.PointR2(e,i))}for(var o=this.dialFasteners,n=o.length,a=0,s=0;s<n;s+=1){null!==(y=o[s].view)&&"auto"===y.arrangement.state&&(a+=1)}var l=Math.min(t.width,t.height),u=this.limit.getValue(),h=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.innerRadius.getValue().pxValue(l),c=this.outerRadius.getValue().pxValue(l),f=this.dialSpacing.getValue().pxValue(l),v=a>1?(c-d-f*(a-1))/a:c-d;for(s=0;s<n;s+=1){var y;if(null!==(y=o[s].view)&&"auto"===y.arrangement.state){if(isFinite(u)){var g=y.limit.getValue();y.limit.setAutoState(Math.max(g,u))}y.startAngle.setAutoState(h),y.sweepAngle.setAutoState(p),y.innerRadius.setAutoState(r.Length.px(d)),y.outerRadius.setAutoState(r.Length.px(d+v)),d=d+v+f}}var w=this.title.view;Cr.is(w)&&w.textOrigin.setAutoState(this.center.state)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.DialFastener=jo.define({type:Us,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDial(t,e,i,this)},dialViewDidSetValue:function(t,e){this.owner.onSetDialValue(t,e,this)},dialViewDidSetLabel:function(t,e){this.owner.onSetDialLabel(t,e,this)},dialViewDidSetLegend:function(t,e){this.owner.onSetDialLegend(t,e,this)}}),m([So({type:Number,state:0,updateFlags:Gi.NeedsLayout})],e.prototype,"limit",void 0),m([So({type:r.PointR2,state:r.PointR2.origin(),updateFlags:Gi.NeedsLayout})],e.prototype,"center",void 0),m([So({type:r.Length,state:r.Length.pct(30),updateFlags:Gi.NeedsLayout})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(40),updateFlags:Gi.NeedsLayout})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:Gi.NeedsLayout})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.rad(2*Math.PI),updateFlags:Gi.NeedsLayout})],e.prototype,"sweepAngle",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"cornerRadius",void 0),m([So({type:r.Length,state:r.Length.px(1),updateFlags:Gi.NeedsLayout})],e.prototype,"dialSpacing",void 0),m([So({type:St,state:null,look:Qt.subduedColor})],e.prototype,"dialColor",void 0),m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"meterColor",void 0),m([So({type:r.Length,state:r.Length.pct(25)})],e.prototype,"labelPadding",void 0),m([So({type:Number,state:1})],e.prototype,"tickAlign",void 0),m([So({type:r.Length,state:r.Length.pct(45)})],e.prototype,"tickRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([So({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([So({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickColor",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(ar),zs=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"title",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(i,t),i.prototype.setTitle=function(t){var i=this.title;e.Equals(t,i)||(this.willSetTitle(t,i),Object.defineProperty(this,"title",{value:t,enumerable:!0,configurable:!0}),this.onSetTitle(t,i),this.didSetTitle(t,i))},i.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeTraitWillSetTitle&&r.gaugeTraitWillSetTitle(t,e,this)}},i.prototype.onSetTitle=function(t,e){},i.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeTraitDidSetTitle&&r.gaugeTraitDidSetTitle(t,e,this)}},i.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createDialFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},i.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initDial=function(t,e){},i.prototype.attachDial=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},i.prototype.detachDial=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},i.prototype.willSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.gaugeTraitWillSetDial&&s.gaugeTraitWillSetDial(t,e,i,this)}},i.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},i.prototype.didSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.gaugeTraitDidSetDial&&s.gaugeTraitDidSetDial(t,e,i,this)}},i.prototype.createDialFastener=function(t){return new i.DialFastener(this,t.key,"dial")},i.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.startConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},i.prototype.stopConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},i.prototype.detectDialModel=function(t){return t.getTrait(Bs)},i.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDialModel(n);null!==r&&this.insertDial(r)}},i.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDialModel(e);if(null!==o){var n=null!==i?this.detectDialModel(i):null;this.insertDial(o,n)}},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDialModel(e);null!==i&&this.removeDial(i)},i.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDialFasteners()},i.prototype.unmountTraitFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountTraitFasteners.call(this)},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDials()},i.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDials()},i.DialFastener=G.define({type:Bs,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDial(t,e,i,this)}}),i}(st),Ys=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.setTitle=function(t){var e=this.gauge.trait;null!==e&&e.setTitle(t)},e.prototype.initGaugeTrait=function(t){},e.prototype.attachGaugeTrait=function(t){null!==this.gauge.view&&this.setGaugeTitleView(t.title,t);for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDialTrait(n)}},e.prototype.detachGaugeTrait=function(t){for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDialTrait(n)}null!==this.gauge.view&&this.setGaugeTitleView(null,t)},e.prototype.willSetGaugeTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeWillSetTrait&&r.gaugeWillSetTrait(t,e,this)}},e.prototype.onSetGaugeTrait=function(t,e){null!==e&&this.detachGaugeTrait(e),null!==t&&(this.attachGaugeTrait(t),this.initGaugeTrait(t))},e.prototype.didSetGaugeTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeDidSetTrait&&r.gaugeDidSetTrait(t,e,this)}},e.prototype.onSetGaugeTraitTitle=function(t,e,i){this.setGaugeTitleView(t,i)},e.prototype.createGaugeView=function(){return qs.create()},e.prototype.initGaugeView=function(t){},e.prototype.themeGaugeView=function(t,e,i,o){},e.prototype.attachGaugeView=function(t){this.title.setView(t.title.view);var e=this.gauge.trait;null!==e&&this.setGaugeTitleView(e.title,e);for(var i=this.dialFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var a=r.dial.view;null!==a&&null===a.parentView&&r.dial.injectView(t)}}},e.prototype.detachGaugeView=function(t){this.title.setView(null)},e.prototype.willSetGaugeView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeWillSetView&&r.gaugeWillSetView(t,e,this)}},e.prototype.onSetGaugeView=function(t,e){null!==e&&this.detachGaugeView(e),null!==t&&(this.attachGaugeView(t),this.initGaugeView(t))},e.prototype.didSetGaugeView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeDidSetView&&r.gaugeDidSetView(t,e,this)}},e.prototype.createGaugeTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setGaugeTitleView=function(t,e){var i=this.gauge.view;if(null!==i){var o=null!==t?this.createGaugeTitleView(t,e):null;i.title.setView(o)}},e.prototype.initGaugeTitleView=function(t){},e.prototype.attachGaugeTitleView=function(t){},e.prototype.detachGaugeTitleView=function(t){},e.prototype.willSetGaugeTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeWillSetTitleView&&r.gaugeWillSetTitleView(t,e,this)}},e.prototype.onSetGaugeTitleView=function(t,e){null!==e&&this.detachGaugeTitleView(e),null!==t&&(this.attachGaugeTitleView(t),this.initGaugeTitleView(t))},e.prototype.didSetGaugeTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.gaugeDidSetTitleView&&r.gaugeDidSetTitleView(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createDialFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDial=function(t){return new Hs},e.prototype.initDial=function(t,e){var i=t.dial.trait;null!==i&&this.initDialTrait(i,e);var o=t.dial.view;null!==o&&this.initDialView(o,e)},e.prototype.attachDial=function(t,e){var i=t.dial.trait;null!==i&&this.attachDialTrait(i,e);var o=t.dial.view;null!==o&&this.attachDialView(o,e)},e.prototype.detachDial=function(t,e){var i=t.dial.trait;null!==i&&this.detachDialTrait(i,e);var o=t.dial.view;null!==o&&this.detachDialView(o,e)},e.prototype.willSetDial=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDial&&a.gaugeWillSetDial(t,e,i)}},e.prototype.onSetDial=function(t,e,i){null!==e&&this.detachDial(e,i),null!==t&&(this.attachDial(t,i),this.initDial(t,i))},e.prototype.didSetDial=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDial&&a.gaugeDidSetDial(t,e,i)}},e.prototype.insertDialTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.dial.trait===t)return;a.dial.trait===e&&(o=a)}}var s=this.createDial(t);if(null!==s&&(s.dial.setTrait(t),this.insertChildComponent(s,o),null===s.dial.view)){var l=this.createDialView(s),u=null;null!==o&&(u=o.dial.view);var h=this.gauge.view;null!==h?s.dial.injectView(h,l,u,null):s.dial.setView(l,u)}},e.prototype.removeDialTrait=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dial.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDialTrait=function(t,e){},e.prototype.attachDialTrait=function(t,e){},e.prototype.detachDialTrait=function(t,e){},e.prototype.willSetDialTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialTrait&&a.gaugeWillSetDialTrait(t,e,i)}},e.prototype.onSetDialTrait=function(t,e,i){null!==e&&this.detachDialTrait(e,i),null!==t&&(this.attachDialTrait(t,i),this.initDialTrait(t,i))},e.prototype.didSetDialTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialTrait&&a.gaugeDidSetDialTrait(t,e,i)}},e.prototype.createDialView=function(t){return t.dial.createView()},e.prototype.initDialView=function(t,e){var i=t.label.view;null!==i&&this.initDialLabelView(i,e);var o=t.legend.view;null!==o&&this.initDialLegendView(o,e)},e.prototype.attachDialView=function(t,e){var i=t.label.view;null!==i&&this.attachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.attachDialLegendView(o,e)},e.prototype.detachDialView=function(t,e){var i=t.label.view;null!==i&&this.detachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.detachDialLegendView(o,e),t.remove()},e.prototype.willSetDialView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialView&&a.gaugeWillSetDialView(t,e,i)}},e.prototype.onSetDialView=function(t,e,i){null!==e&&this.detachDialView(e,i),null!==t&&(this.attachDialView(t,i),this.initDialView(t,i))},e.prototype.didSetDialView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialView&&a.gaugeDidSetDialView(t,e,i)}},e.prototype.willSetDialViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialViewValue&&a.gaugeWillSetDialViewValue(t,e,i)}},e.prototype.onSetDialViewValue=function(t,e,i){},e.prototype.didSetDialViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialViewValue&&a.gaugeDidSetDialViewValue(t,e,i)}},e.prototype.willSetDialViewLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialViewLimit&&a.gaugeWillSetDialViewLimit(t,e,i)}},e.prototype.onSetDialViewLimit=function(t,e,i){},e.prototype.didSetDialViewLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialViewLimit&&a.gaugeDidSetDialViewLimit(t,e,i)}},e.prototype.initDialLabelView=function(t,e){},e.prototype.attachDialLabelView=function(t,e){},e.prototype.detachDialLabelView=function(t,e){},e.prototype.willSetDialLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialLabelView&&a.gaugeWillSetDialLabelView(t,e,i)}},e.prototype.onSetDialLabelView=function(t,e,i){null!==e&&this.detachDialLabelView(e,i),null!==t&&(this.attachDialLabelView(t,i),this.initDialLabelView(t,i))},e.prototype.didSetDialLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialLabelView&&a.gaugeDidSetDialLabelView(t,e,i)}},e.prototype.initDialLegendView=function(t,e){},e.prototype.attachDialLegendView=function(t,e){},e.prototype.detachDialLegendView=function(t,e){},e.prototype.willSetDialLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeWillSetDialLegendView&&a.gaugeWillSetDialLegendView(t,e,i)}},e.prototype.onSetDialLegendView=function(t,e,i){null!==e&&this.detachDialLegendView(e,i),null!==t&&(this.attachDialLegendView(t,i),this.initDialLegendView(t,i))},e.prototype.didSetDialLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.gaugeDidSetDialLegendView&&a.gaugeDidSetDialLegendView(t,e,i)}},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.getDialastener=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dial.trait===t)return n}return null},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDialComponent=function(t){return t instanceof Hs?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectDialComponent(e);null!==o&&this.insertDial(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectDialComponent(e);null!==i&&this.removeDial(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GaugeFastener=fa.define({viewType:qs,observeView:!0,willSetView:function(t,e){this.owner.willSetGaugeView(t,e)},onSetView:function(t,e){this.owner.onSetGaugeView(t,e)},didSetView:function(t,e){this.owner.didSetGaugeView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGaugeView(o,t,e,i)},gaugeViewDidSetTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createGaugeView()},traitType:zs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGaugeTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGaugeTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGaugeTrait(t,e)},gaugeTraitDidSetTitle:function(t,e,i){this.owner.onSetGaugeTraitTitle(t,e,i)},gaugeTraitWillSetDial:function(t,e,i){null!==e&&this.owner.removeDialTrait(e)},gaugeTraitDidSetDial:function(t,e,i){null!==t&&this.owner.insertDialTrait(t,i)}}),e.DialFastener=ya.define({type:Hs,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetDial(t,e,this)},onSetComponent:function(t,e){this.owner.onSetDial(t,e,this)},didSetComponent:function(t,e){this.owner.didSetDial(t,e,this)},dialWillSetTrait:function(t,e){this.owner.willSetDialTrait(t,e,this)},dialDidSetTrait:function(t,e){this.owner.onSetDialTrait(t,e,this),this.owner.didSetDialTrait(t,e,this)},dialWillSetView:function(t,e){this.owner.willSetDialView(t,e,this)},dialDidSetView:function(t,e){this.owner.onSetDialView(t,e,this),this.owner.didSetDialView(t,e,this)},dialWillSetViewValue:function(t,e){this.owner.willSetDialViewValue(t,e,this)},dialDidSetViewValue:function(t,e){this.owner.onSetDialViewValue(t,e,this),this.owner.didSetDialViewValue(t,e,this)},dialWillSetViewLimit:function(t,e){this.owner.willSetDialViewLimit(t,e,this)},dialDidSetViewLimit:function(t,e){this.owner.onSetDialViewLimit(t,e,this),this.owner.didSetDialViewLimit(t,e,this)},dialWillSetLabelView:function(t,e){this.owner.willSetDialLabelView(t,e,this)},dialDidSetLabelView:function(t,e){this.owner.onSetDialLabelView(t,e,this),this.owner.didSetDialLabelView(t,e,this)},dialWillSetLegendView:function(t,e){this.owner.willSetDialLegendView(t,e,this)},dialDidSetLegendView:function(t,e){this.owner.onSetDialLegendView(t,e,this),this.owner.didSetDialLegendView(t,e,this)}}),m([fa({extends:e.GaugeFastener})],e.prototype,"gauge",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetGaugeTitleView(t,e)},onSetView:function(t,e){this.owner.onSetGaugeTitleView(t,e)},didSetView:function(t,e){this.owner.didSetGaugeTitleView(t,e)}})],e.prototype,"title",void 0),m([oa({type:s.Timing,state:!0})],e.prototype,"dialTiming",void 0),e}(ma),Xs=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.total&&this.total(e.total),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.phaseAngle&&this.phaseAngle(e.phaseAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){var i=this.viewController;null!==i&&void 0!==i.sliceViewWillSetValue&&i.sliceViewWillSetValue(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.sliceViewWillSetValue&&a.sliceViewWillSetValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceViewDidSetValue&&r.sliceViewDidSetValue(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.sliceViewDidSetValue&&a.sliceViewDidSetValue(t,e,this)},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.sliceViewWillSetLabel&&i.sliceViewWillSetLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.sliceViewWillSetLabel&&a.sliceViewWillSetLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceViewDidSetLabel&&r.sliceViewDidSetLabel(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.sliceViewDidSetLabel&&a.sliceViewDidSetLabel(t,e,this)},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){var i=this.viewController;null!==i&&void 0!==i.sliceViewWillSetLegend&&i.sliceViewWillSetLegend(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.sliceViewWillSetLegend&&a.sliceViewWillSetLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceViewDidSetLegend&&r.sliceViewDidSetLegend(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.sliceViewDidSetLegend&&a.sliceViewDidSetLegend(t,e,this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderSlice(o,this.viewFrame),o.restore()}},i.prototype.renderSlice=function(t,i){var o=i.width,n=i.height,a=Math.min(o,n),s=this.value.getValue(),l=this.total.getValue(),u=0!==l?s/l:0,h=this.center.getValue(),p=this.innerRadius.getValue().px(a),d=this.outerRadius.getValue().px(a),c=d.value-p.value,f=this.phaseAngle.getValue().rad(),v=r.Angle.rad(2*Math.PI*u),y=this.padAngle.getValue(),g=this.padRadius.getValueOr(null),w=this.cornerRadius.getValue().px(c),m=new br(h,p,d,f,v,y,g,w),b=this.sliceColor.value;null!==b&&(t.beginPath(),t.fillStyle=b.toString(),m.draw(t,i),t.fill());var S=this.label.view;if(null!==S&&!S.isHidden()){var C=this.labelRadius.getValue().pxValue(c),P=f.value+v.value/2,V=p.value+C,T=V*Math.cos(P),A=V*Math.sin(P);Cr.is(S)&&(S.textAlign.setAutoState("center"),S.textBaseline.setAutoState("middle"),S.textOrigin.setAutoState(new r.PointR2(h.x+T,h.y+A)))}var F=this.legend.view;if(null!==F&&!F.isHidden()){var M=this.tickAlign.getValue(),O=f.value+v.value*M,x=this.tickRadius.getValue().pxValue(a),D=this.tickLength.getValue().pxValue(o),R=this.tickWidth.getValue().pxValue(a),L=this.tickColor.value,k=h.x,j=h.y,I=d.value*Math.cos(O+e.Equivalent.Epsilon),E=d.value*Math.sin(O+e.Equivalent.Epsilon),W=x*Math.cos(O+e.Equivalent.Epsilon),N=x*Math.sin(O+e.Equivalent.Epsilon),U=0;null!==L&&0!==R&&(t.beginPath(),t.strokeStyle=L.toString(),t.lineWidth=R,t.moveTo(k+I,j+E),t.lineTo(k+W,j+N),0!==D&&(W>=0?(t.lineTo(k+D,j+N),U=D-W):W<0&&(t.lineTo(k-D,j+N),U=D+W)),t.stroke());var B=void 0;if(W>=0?B="end":(U=-U,B="start"),Cr.is(F)){var H=this.tickPadding.getValue().pxValue(a);yr.is(F)&&F.fill.setAutoState(L),F.textAlign.setAutoState(B),F.textBaseline.setAutoState("alphabetic"),F.textOrigin.setAutoState(new r.PointR2(k+W+U,j+N-H))}}},i.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestSlice(e,i,a,this.viewFrame),a.restore()}}return n},i.prototype.hitTestSlice=function(t,e,i,o){var n=Math.min(o.width,o.height),a=this.value.getValue(),s=this.total.getValue(),l=0!==s?a/s:0,u=this.center.getValue(),h=this.innerRadius.getValue().px(n),p=this.outerRadius.getValue().px(n),d=p.value-h.value,c=this.phaseAngle.getValue().rad(),f=r.Angle.rad(2*Math.PI*l),v=this.padAngle.getValue(),y=this.padRadius.getValueOr(null),g=this.cornerRadius.getValue().px(d),w=new br(u,h,p,c,f,v,y,g);return i.beginPath(),w.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},onSetValue:function(t,e){this.owner.onSetValue(t,e)},didSetValue:function(t,e){this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([So({type:Number,state:1})],i.prototype,"total",void 0),m([So({type:r.PointR2,inherit:!0,state:r.PointR2.origin()})],i.prototype,"center",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(3)})],i.prototype,"innerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],i.prototype,"phaseAngle",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.deg(2)})],i.prototype,"padAngle",void 0),m([So({type:r.Length,inherit:!0,state:null})],i.prototype,"padRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.zero()})],i.prototype,"cornerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"labelRadius",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.accentColor})],i.prototype,"sliceColor",void 0),m([So({type:Number,inherit:!0,state:.5})],i.prototype,"tickAlign",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"tickRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.neutralColor})],i.prototype,"tickColor",void 0),m([So({type:gt,inherit:!0,state:null})],i.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.mutedColor})],i.prototype,"textColor",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),i}(ar),Gs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.baseAngle&&this.baseAngle(e.baseAngle),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.slices;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(Xs.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Cr.is(t)&&(t.textAlign.setAutoState("center"),t.textBaseline.setAutoState("middle"),t.textOrigin.setAutoState(this.center.state))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){var i=this.viewController;null!==i&&void 0!==i.pieViewWillSetTitle&&i.pieViewWillSetTitle(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieViewWillSetTitle&&a.pieViewWillSetTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieViewDidSetTitle&&r.pieViewDidSetTitle(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.pieViewDidSetTitle&&a.pieViewDidSetTitle(t,e,this)},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null),t=Xs.fromAny(t);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createSliceFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initSlice=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabel(i,e);var o=t.legend.view;null!==o&&this.initSliceLegend(o,e)},e.prototype.attachSlice=function(t,e){},e.prototype.detachSlice=function(t,e){},e.prototype.willSetSlice=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.pieViewWillSetSlice&&n.pieViewWillSetSlice(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.pieViewWillSetSlice&&l.pieViewWillSetSlice(t,e,i,this)}},e.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},e.prototype.didSetSlice=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.pieViewDidSetSlice&&s.pieViewDidSetSlice(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.pieViewDidSetSlice&&l.pieViewDidSetSlice(t,e,i,this)},e.prototype.onSetSliceValue=function(t,e,i){this.requireUpdate(Gi.NeedsLayout)},e.prototype.initSliceLabel=function(t,e){},e.prototype.onSetSliceLabel=function(t,e,i){null!==t&&this.initSliceLabel(t,i)},e.prototype.initSliceLegend=function(t,e){},e.prototype.onSetSliceLegend=function(t,e,i){null!==t&&this.initSliceLegend(t,i)},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSlice=function(t){return t instanceof Xs?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectSlice(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectSlice(e);null!==i&&this.removeSlice(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutPie(this.viewFrame)},e.prototype.layoutPie=function(t){if(this.center.isAuto()){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setAutoState(new r.PointR2(e,i))}for(var o=this.sliceFasteners,n=o.length,a=0,s=0;s<n;s+=1){if(null!==(h=o[s].view)){var l=h.value.getValue();isFinite(l)&&(a+=l)}}a=Math.max(a,this.limit.getValue());var u=this.baseAngle.getValue().rad();for(s=0;s<n;s+=1){var h;if(null!==(h=o[s].view)){h.total.setAutoState(a),h.phaseAngle.setAutoState(u);l=h.value.getValue();if(isFinite(l)){var p=0!==a?l/a:0;u=r.Angle.rad(u.value+2*Math.PI*p)}}}var d=this.title.view;Cr.is(d)&&d.textOrigin.setAutoState(this.center.value)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.SliceFastener=jo.define({type:Xs,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetSlice(t,e,i,this)},sliceViewDidSetValue:function(t,e){this.owner.onSetSliceValue(t,e,this)},sliceViewDidSetLabel:function(t,e){this.owner.onSetSliceLabel(t,e,this)},sliceViewDidSetLegend:function(t,e){this.owner.onSetSliceLegend(t,e,this)}}),m([So({type:Number,state:0,updateFlags:Gi.NeedsLayout})],e.prototype,"limit",void 0),m([So({type:r.PointR2,state:r.PointR2.origin(),updateFlags:Gi.NeedsLayout})],e.prototype,"center",void 0),m([So({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:Gi.NeedsLayout})],e.prototype,"baseAngle",void 0),m([So({type:r.Length,state:r.Length.pct(3)})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(25)})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.deg(2)})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"labelRadius",void 0),m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"sliceColor",void 0),m([So({type:Number,state:.5})],e.prototype,"tickAlign",void 0),m([So({type:r.Length,state:r.Length.pct(30)})],e.prototype,"tickRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([So({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([So({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickColor",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(ar),Ks=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"value",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"label",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"legend",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setValue=function(t){var e=this.value;t!==e&&(this.willSetValue(t,e),Object.defineProperty(this,"value",{value:t,enumerable:!0,configurable:!0}),this.onSetValue(t,e),this.didSetValue(t,e))},i.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitWillSetValue&&r.sliceTraitWillSetValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitDidSetValue&&r.sliceTraitDidSetValue(t,e,this)}},i.prototype.setLabel=function(t){var i=this.label;e.Equals(t,i)||(this.willSetLabel(t,i),Object.defineProperty(this,"label",{value:t,enumerable:!0,configurable:!0}),this.onSetLabel(t,i),this.didSetLabel(t,i))},i.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitWillSetLabel&&r.sliceTraitWillSetLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){},i.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitDidSetLabel&&r.sliceTraitDidSetLabel(t,e,this)}},i.prototype.formatLabel=function(t){},i.prototype.setLegend=function(t){var i=this.legend;e.Equals(t,i)||(this.willSetLegend(t,i),Object.defineProperty(this,"legend",{value:t,enumerable:!0,configurable:!0}),this.onSetLegend(t,i),this.didSetLegend(t,i))},i.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitWillSetLegend&&r.sliceTraitWillSetLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){},i.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceTraitDidSetLegend&&r.sliceTraitDidSetLegend(t,e,this)}},i.prototype.formatLegend=function(t){},i}(st),Zs=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"title",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(i,t),i.prototype.setTitle=function(t){var i=this.title;e.Equals(t,i)||(this.willSetTitle(t,i),Object.defineProperty(this,"title",{value:t,enumerable:!0,configurable:!0}),this.onSetTitle(t,i),this.didSetTitle(t,i))},i.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieTraitWillSetTitle&&r.pieTraitWillSetTitle(t,e,this)}},i.prototype.onSetTitle=function(t,e){},i.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieTraitDidSetTitle&&r.pieTraitDidSetTitle(t,e,this)}},i.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createSliceFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},i.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initSlice=function(t,e){},i.prototype.attachSlice=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},i.prototype.detachSlice=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},i.prototype.willSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.pieTraitWillSetSlice&&s.pieTraitWillSetSlice(t,e,i,this)}},i.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},i.prototype.didSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.pieTraitDidSetSlice&&s.pieTraitDidSetSlice(t,e,i,this)}},i.prototype.createSliceFastener=function(t){return new i.SliceFastener(this,t.key,"slice")},i.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.startConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},i.prototype.stopConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},i.prototype.detectSliceModel=function(t){return t.getTrait(Ks)},i.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectSliceModel(n);null!==r&&this.insertSlice(r)}},i.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectSliceModel(e);if(null!==o){var n=null!==i?this.detectSliceModel(i):null;this.insertSlice(o,n)}},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectSliceModel(e);null!==i&&this.removeSlice(i)},i.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountSliceFasteners()},i.prototype.unmountTraitFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountTraitFasteners.call(this)},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingSlices()},i.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingSlices()},i.SliceFastener=G.define({type:Ks,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetSlice(t,e,i,this)}}),i}(st),_s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.slice.trait;return null!==t?t.value:void 0},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t){var e=this.slice.trait;null!==e&&e.setValue(t)},e.prototype.setLabel=function(t){var e=this.slice.trait;null!==e&&e.setLabel(t)},e.prototype.setLegend=function(t){var e=this.slice.trait;null!==e&&e.setLegend(t)},e.prototype.initSliceTrait=function(t){},e.prototype.attachSliceTrait=function(t){null!==this.slice.view&&(this.setSliceViewValue(t.value,t),this.setSliceLabelView(t.label,t),this.setSliceLegendView(t.legend,t))},e.prototype.detachSliceTrait=function(t){},e.prototype.willSetSliceTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceWillSetTrait&&r.sliceWillSetTrait(t,e,this)}},e.prototype.onSetSliceTrait=function(t,e){null!==e&&this.detachSliceTrait(e),null!==t&&(this.attachSliceTrait(t),this.initSliceTrait(t))},e.prototype.didSetSliceTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceDidSetTrait&&r.sliceDidSetTrait(t,e,this)}},e.prototype.onSetSliceTraitValue=function(t,e,i){this.setSliceViewValue(t,i)},e.prototype.updateSliceTraitLabel=function(t,e){var i=e.formatLabel(t);void 0!==i&&e.setLabel(i)},e.prototype.onSetSliceTraitLabel=function(t,e,i){this.setSliceLabelView(t,i)},e.prototype.updateSliceTraitLegend=function(t,e){var i=e.formatLegend(t);void 0!==i&&e.setLegend(i)},e.prototype.onSetSliceTraitLegend=function(t,e,i){this.setSliceLegendView(t,i)},e.prototype.createSliceView=function(){return Xs.create()},e.prototype.initSliceView=function(t){var e=t.value.value;t.setHidden(0===e);var i=this.slice.trait;null!==i&&(this.updateSliceTraitLabel(e,i),this.updateSliceTraitLegend(e,i),this.setSliceViewValue(i.value,i),this.setSliceLabelView(i.label,i),this.setSliceLegendView(i.legend,i))},e.prototype.themeSliceView=function(t,e,i,o){},e.prototype.attachSliceView=function(t){this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachSliceView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetSliceView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceWillSetView&&r.sliceWillSetView(t,e,this)}},e.prototype.onSetSliceView=function(t,e){null!==e&&this.detachSliceView(e),null!==t&&(this.attachSliceView(t),this.initSliceView(t))},e.prototype.didSetSliceView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceDidSetView&&r.sliceDidSetView(t,e,this)}},e.prototype.setSliceViewValue=function(t,e,i){var o=this.slice.view;null!==o&&o.value.isAuto()&&(void 0===i||!0===i?!0===(i=this.sliceTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.value.setAutoState(t,i))},e.prototype.willSetSliceViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.sliceWillSetViewValue&&a.sliceWillSetViewValue(t,e,this)}},e.prototype.onSetSliceViewValue=function(t,e,i){i.setHidden(0===t);var o=this.slice.trait;null!==o&&(this.updateSliceTraitLabel(t,o),this.updateSliceTraitLegend(t,o))},e.prototype.didSetSliceViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.sliceDidSetViewValue&&a.sliceDidSetViewValue(t,e,this)}},e.prototype.createSliceLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setSliceLabelView=function(t,e){var i=this.slice.view;if(null!==i){var o=null!==t?this.createSliceLabelView(t,e):null;i.label.setView(o)}},e.prototype.initSliceLabelView=function(t){},e.prototype.attachSliceLabelView=function(t){},e.prototype.detachSliceLabelView=function(t){},e.prototype.willSetSliceLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceWillSetLabelView&&r.sliceWillSetLabelView(t,e,this)}},e.prototype.onSetSliceLabelView=function(t,e){null!==e&&this.detachSliceLabelView(e),null!==t&&(this.attachSliceLabelView(t),this.initSliceLabelView(t))},e.prototype.didSetSliceLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceDidSetLabelView&&r.sliceDidSetLabelView(t,e,this)}},e.prototype.createSliceLegendView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setSliceLegendView=function(t,e){var i=this.slice.view;if(null!==i){var o=null!==t?this.createSliceLegendView(t,e):null;i.legend.setView(o)}},e.prototype.initSliceLegendView=function(t){},e.prototype.attachSliceLegendView=function(t){},e.prototype.detachSliceLegendView=function(t){},e.prototype.willSetSliceLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceWillSetLegendView&&r.sliceWillSetLegendView(t,e,this)}},e.prototype.onSetSliceLegendView=function(t,e){null!==e&&this.detachSliceLegendView(e),null!==t&&(this.attachSliceLegendView(t),this.initSliceLegendView(t))},e.prototype.didSetSliceLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.sliceDidSetLegendView&&r.sliceDidSetLegendView(t,e,this)}},e.SliceFastener=fa.define({viewType:Xs,observeView:!0,willSetView:function(t,e){this.owner.willSetSliceView(t,e)},onSetView:function(t,e){this.owner.onSetSliceView(t,e)},didSetView:function(t,e){this.owner.didSetSliceView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeSliceView(o,t,e,i)},sliceViewWillSetValue:function(t,e,i){this.owner.willSetSliceViewValue(t,e,i)},sliceViewDidSetValue:function(t,e,i){this.owner.onSetSliceViewValue(t,e,i),this.owner.didSetSliceViewValue(t,e,i)},sliceViewDidSetLabel:function(t,e){this.owner.label.setView(t)},sliceViewDidSetLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createSliceView()},traitType:Ks,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetSliceTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetSliceTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetSliceTrait(t,e)},sliceTraitDidSetValue:function(t,e,i){this.owner.onSetSliceTraitValue(t,e,i)},sliceTraitDidSetLabel:function(t,e,i){this.owner.onSetSliceTraitLabel(t,e,i)},sliceTraitDidSetLegend:function(t,e,i){this.owner.onSetSliceTraitLegend(t,e,i)}}),m([oa({type:s.Timing,inherit:!0})],e.prototype,"sliceTiming",void 0),m([fa({extends:e.SliceFastener})],e.prototype,"slice",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetSliceLabelView(t,e)},onSetView:function(t,e){this.owner.onSetSliceLabelView(t,e)},didSetView:function(t,e){this.owner.didSetSliceLabelView(t,e)}})],e.prototype,"label",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetSliceLegendView(t,e)},onSetView:function(t,e){this.owner.onSetSliceLegendView(t,e)},didSetView:function(t,e){this.owner.didSetSliceLegendView(t,e)}})],e.prototype,"legend",void 0),e}(ma),Qs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.setTitle=function(t){var e=this.pie.trait;null!==e&&e.setTitle(t)},e.prototype.initPieTrait=function(t){},e.prototype.attachPieTrait=function(t){null!==this.pie.view&&this.setPieTitleView(t.title,t);for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertSliceTrait(n)}},e.prototype.detachPieTrait=function(t){for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeSliceTrait(n)}null!==this.pie.view&&this.setPieTitleView(null,t)},e.prototype.willSetPieTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieWillSetTrait&&r.pieWillSetTrait(t,e,this)}},e.prototype.onSetPieTrait=function(t,e){null!==e&&this.detachPieTrait(e),null!==t&&(this.attachPieTrait(t),this.initPieTrait(t))},e.prototype.didSetPieTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieDidSetTrait&&r.pieDidSetTrait(t,e,this)}},e.prototype.onSetPieTraitTitle=function(t,e,i){this.setPieTitleView(t,i)},e.prototype.createPieView=function(){return Gs.create()},e.prototype.initPieView=function(t){},e.prototype.themePieView=function(t,e,i,o){},e.prototype.attachPieView=function(t){this.title.setView(t.title.view);var e=this.pie.trait;null!==e&&this.setPieTitleView(e.title,e);for(var i=this.sliceFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var a=r.slice.view;null!==a&&null===a.parentView&&r.slice.injectView(t)}}},e.prototype.detachPieView=function(t){this.title.setView(null)},e.prototype.willSetPieView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieWillSetView&&r.pieWillSetView(t,e,this)}},e.prototype.onSetPieView=function(t,e){null!==e&&this.detachPieView(e),null!==t&&(this.attachPieView(t),this.initPieView(t))},e.prototype.didSetPieView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieDidSetView&&r.pieDidSetView(t,e,this)}},e.prototype.createPieTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setPieTitleView=function(t,e){var i=this.pie.view;if(null!==i){var o=null!==t?this.createPieTitleView(t,e):null;i.title.setView(o)}},e.prototype.initPieTitleView=function(t){},e.prototype.attachPieTitleView=function(t){},e.prototype.detachPieTitleView=function(t){},e.prototype.willSetPieTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieWillSetTitleView&&r.pieWillSetTitleView(t,e,this)}},e.prototype.onSetPieTitleView=function(t,e){null!==e&&this.detachPieTitleView(e),null!==t&&(this.attachPieTitleView(t),this.initPieTitleView(t))},e.prototype.didSetPieTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.pieDidSetTitleView&&r.pieDidSetTitleView(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createSliceFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createSlice=function(t){return new _s},e.prototype.initSlice=function(t,e){var i=t.slice.trait;null!==i&&this.initSliceTrait(i,e);var o=t.slice.view;null!==o&&this.initSliceView(o,e)},e.prototype.attachSlice=function(t,e){var i=t.slice.trait;null!==i&&this.attachSliceTrait(i,e);var o=t.slice.view;null!==o&&this.attachSliceView(o,e)},e.prototype.detachSlice=function(t,e){var i=t.slice.view;null!==i&&this.detachSliceView(i,e);var o=t.slice.trait;null!==o&&this.detachSliceTrait(o,e)},e.prototype.willSetSlice=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSlice&&a.pieWillSetSlice(t,e,i)}},e.prototype.onSetSlice=function(t,e,i){null!==e&&this.detachSlice(e,i),null!==t&&(this.attachSlice(t,i),this.initSlice(t,i))},e.prototype.didSetSlice=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSlice&&a.pieDidSetSlice(t,e,i)}},e.prototype.insertSliceTrait=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.slice.trait===t)return;a.slice.trait===e&&(o=a)}}var s=this.createSlice(t);if(null!==s&&(s.slice.setTrait(t),this.insertChildComponent(s,o),null===s.slice.view)){var l=this.createSliceView(s),u=null;null!==o&&(u=o.slice.view);var h=this.pie.view;null!==h?s.slice.injectView(h,l,u,null):s.slice.setView(l,u)}},e.prototype.removeSliceTrait=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.slice.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initSliceTrait=function(t,e){},e.prototype.attachSliceTrait=function(t,e){},e.prototype.detachSliceTrait=function(t,e){},e.prototype.willSetSliceTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSliceTrait&&a.pieWillSetSliceTrait(t,e,i)}},e.prototype.onSetSliceTrait=function(t,e,i){null!==e&&this.detachSliceTrait(e,i),null!==t&&(this.attachSliceTrait(t,i),this.initSliceTrait(t,i))},e.prototype.didSetSliceTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSliceTrait&&a.pieDidSetSliceTrait(t,e,i)}},e.prototype.createSliceView=function(t){return t.slice.createView()},e.prototype.initSliceView=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.initSliceLegendView(o,e)},e.prototype.attachSliceView=function(t,e){var i=t.label.view;null!==i&&this.attachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.attachSliceLegendView(o,e)},e.prototype.detachSliceView=function(t,e){var i=t.label.view;null!==i&&this.detachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.detachSliceLegendView(o,e),t.remove()},e.prototype.willSetSliceView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSliceView&&a.pieWillSetSliceView(t,e,i)}},e.prototype.onSetSliceView=function(t,e,i){null!==e&&this.detachSliceView(e,i),null!==t&&(this.attachSliceView(t,i),this.initSliceView(t,i))},e.prototype.didSetSliceView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSliceView&&a.pieDidSetSliceView(t,e,i)}},e.prototype.willSetSliceViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSliceViewValue&&a.pieWillSetSliceViewValue(t,e,i)}},e.prototype.onSetSliceViewValue=function(t,e,i){if(0===t){var o=i.component;if(null!==o){var n=o.slice.trait;null!==n&&this.removeSliceTrait(n)}}},e.prototype.didSetSliceViewValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSliceViewValue&&a.pieDidSetSliceViewValue(t,e,i)}},e.prototype.initSliceLabelView=function(t,e){},e.prototype.attachSliceLabelView=function(t,e){},e.prototype.detachSliceLabelView=function(t,e){},e.prototype.willSetSliceLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSliceLabelView&&a.pieWillSetSliceLabelView(t,e,i)}},e.prototype.onSetSliceLabelView=function(t,e,i){null!==e&&this.detachSliceLabelView(e,i),null!==t&&(this.attachSliceLabelView(t,i),this.initSliceLabelView(t,i))},e.prototype.didSetSliceLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSliceLabelView&&a.pieDidSetSliceLabelView(t,e,i)}},e.prototype.initSliceLegendView=function(t,e){},e.prototype.attachSliceLegendView=function(t,e){},e.prototype.detachSliceLegendView=function(t,e){},e.prototype.willSetSliceLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieWillSetSliceLegendView&&a.pieWillSetSliceLegendView(t,e,i)}},e.prototype.onSetSliceLegendView=function(t,e,i){null!==e&&this.detachSliceLegendView(e,i),null!==t&&(this.attachSliceLegendView(t,i),this.initSliceLegendView(t,i))},e.prototype.didSetSliceLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.pieDidSetSliceLegendView&&a.pieDidSetSliceLegendView(t,e,i)}},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.getSliceFastener=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.slice.trait===t)return n}return null},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSliceComponent=function(t){return t instanceof _s?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectSliceComponent(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectSliceComponent(e);null!==i&&this.removeSlice(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.PieFastener=fa.define({viewType:Gs,observeView:!0,willSetView:function(t,e){this.owner.willSetPieView(t,e)},onSetView:function(t,e){this.owner.onSetPieView(t,e)},didSetView:function(t,e){this.owner.didSetPieView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePieView(o,t,e,i)},pieViewDidSetTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createPieView()},traitType:Zs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPieTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPieTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPieTrait(t,e)},pieTraitDidSetTitle:function(t,e,i){this.owner.onSetPieTraitTitle(t,e,i)},pieTraitWillSetSlice:function(t,e,i){null!==e&&this.owner.removeSliceTrait(e)},pieTraitDidSetSlice:function(t,e,i){null!==t&&this.owner.insertSliceTrait(t,i)}}),e.SliceFastener=ya.define({type:_s,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetSlice(t,e,this)},onSetComponent:function(t,e){this.owner.onSetSlice(t,e,this)},didSetComponent:function(t,e){this.owner.didSetSlice(t,e,this)},sliceWillSetTrait:function(t,e){this.owner.willSetSliceTrait(t,e,this)},sliceDidSetTrait:function(t,e){this.owner.onSetSliceTrait(t,e,this),this.owner.didSetSliceTrait(t,e,this)},sliceWillSetView:function(t,e){this.owner.willSetSliceView(t,e,this)},sliceDidSetView:function(t,e){this.owner.onSetSliceView(t,e,this),this.owner.didSetSliceView(t,e,this)},sliceWillSetViewValue:function(t,e){this.owner.willSetSliceViewValue(t,e,this)},sliceDidSetViewValue:function(t,e){this.owner.onSetSliceViewValue(t,e,this),this.owner.didSetSliceViewValue(t,e,this)},sliceWillSetLabelView:function(t,e){this.owner.willSetSliceLabelView(t,e,this)},sliceDidSetLabelView:function(t,e){this.owner.onSetSliceLabelView(t,e,this),this.owner.didSetSliceLabelView(t,e,this)},sliceWillSetLegendView:function(t,e){this.owner.willSetSliceLegendView(t,e,this)},sliceDidSetLegendView:function(t,e){this.owner.onSetSliceLegendView(t,e,this),this.owner.didSetSliceLegendView(t,e,this)}}),m([fa({extends:e.PieFastener})],e.prototype,"pie",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetPieTitleView(t,e)},onSetView:function(t,e){this.owner.onSetPieTitleView(t,e)},didSetView:function(t,e){this.owner.didSetPieTitleView(t,e)}})],e.prototype,"title",void 0),m([oa({type:s.Timing,state:!0})],e.prototype,"sliceTiming",void 0),e}(ma),Js=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"xCoord",{value:NaN,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yCoord",{value:NaN,enumerable:!0,configurable:!0}),Object.defineProperty(e,"y2Coord",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"gradientStop",{value:!1,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.setXCoord=function(t){Object.defineProperty(this,"xCoord",{value:t,enumerable:!0,configurable:!0})},e.prototype.setYCoord=function(t){Object.defineProperty(this,"yCoord",{value:t,enumerable:!0,configurable:!0})},e.prototype.setY2Coord=function(t){Object.defineProperty(this,"y2Coord",{value:t,enumerable:!0,configurable:!0})},e.prototype.willSetX=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dataPointViewWillSetX&&i.dataPointViewWillSetX(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointViewWillSetX&&a.dataPointViewWillSetX(t,e,this)}},e.prototype.onSetX=function(t,e){},e.prototype.didSetX=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointViewDidSetX&&r.dataPointViewDidSetX(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dataPointViewDidSetX&&a.dataPointViewDidSetX(t,e,this)},e.prototype.willSetY=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dataPointViewWillSetY&&i.dataPointViewWillSetY(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointViewWillSetY&&a.dataPointViewWillSetY(t,e,this)}},e.prototype.onSetY=function(t,e){},e.prototype.didSetY=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointViewDidSetY&&r.dataPointViewDidSetY(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dataPointViewDidSetY&&a.dataPointViewDidSetY(t,e,this)},e.prototype.willSetY2=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dataPointViewWillSetY2&&i.dataPointViewWillSetY2(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointViewWillSetY2&&a.dataPointViewWillSetY2(t,e,this)}},e.prototype.onSetY2=function(t,e){},e.prototype.didSetY2=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointViewDidSetY2&&r.dataPointViewDidSetY2(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dataPointViewDidSetY2&&a.dataPointViewDidSetY2(t,e,this)},e.prototype.willSetRadius=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dataPointViewWillSetRadius&&i.dataPointViewWillSetRadius(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointViewWillSetRadius&&a.dataPointViewWillSetRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointViewDidSetRadius&&r.dataPointViewDidSetRadius(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dataPointViewDidSetRadius&&a.dataPointViewDidSetRadius(t,e,this)},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.dataPointViewWillSetLabel&&i.dataPointViewWillSetLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointViewWillSetLabel&&a.dataPointViewWillSetLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointViewDidSetLabel&&r.dataPointViewDidSetLabel(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.dataPointViewDidSetLabel&&a.dataPointViewDidSetLabel(t,e,this)},e.prototype.setState=function(t,e){void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.y2&&this.y2(t.y2,e),void 0!==t.radius&&this.radius(t.radius,e),void 0!==t.hitRadius&&this.hitRadius(t.hitRadius),void 0!==t.color&&this.color(t.color,e),void 0!==t.opacity&&this.opacity(t.opacity,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textColor&&this.textColor(t.textColor,e),void 0!==t.category&&this.category(t.category),void 0!==t.labelPadding&&this.labelPadding(t.labelPadding,e),void 0!==t.labelPlacement&&this.labelPlacement(t.labelPlacement),void 0!==t.label&&this.label(t.label)},e.prototype.isGradientStop=function(){return this.gradientStop},e.prototype.updateGradientStop=function(){Object.defineProperty(this,"gradientStop",{value:void 0!==this.color.value||void 0!==this.opacity.value,enumerable:!0,configurable:!0})},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutDataPoint(this.viewFrame)},e.prototype.layoutDataPoint=function(t){var e=this.label.view;null!==e&&this.layoutLabel(e,t)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state;if("above"!==i&&"below"!==i&&"middle"!==i){var o=this.category.state;i="increasing"===o||"maxima"===o?"above":"decreasing"===o||"minima"===o?"below":"above"}var n=this.xCoord,a=this.yCoord;"above"===i?a-=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height)):"below"===i&&(a+=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height))),Cr.is(t)&&(t.textAlign.setAutoState("center"),"above"===i?t.textBaseline.setAutoState("bottom"):"below"===i?t.textBaseline.setAutoState("top"):"middle"===i&&t.textBaseline.setAutoState("middle"),t.textOrigin.setAutoState(new r.PointR2(n,a)))},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;n=this.hitTestPoint(e,i,a,this.viewFrame)}}return n},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.hitRadius.state,r=this.radius.value;if(null!==r){var a=Math.min(o.width,o.height);n=Math.max(n,r.pxValue(a))}var s=this.xCoord-t,l=this.yCoord-e;return s*s+l*l<n*n?this:null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:void 0,willSetValue:function(t,e){this.owner.willSetX(t,e)},onSetValue:function(t,e){this.owner.onSetX(t,e)},didSetValue:function(t,e){this.owner.didSetX(t,e)}})],e.prototype,"x",void 0),m([So({willSetValue:function(t,e){this.owner.willSetY(t,e)},onSetValue:function(t,e){this.owner.onSetY(t,e)},didSetValue:function(t,e){this.owner.didSetY(t,e)}})],e.prototype,"y",void 0),m([So({willSetValue:function(t,e){this.owner.willSetY2(t,e)},onSetValue:function(t,e){this.owner.onSetY2(t,e)},didSetValue:function(t,e){this.owner.didSetY2(t,e)}})],e.prototype,"y2",void 0),m([So({type:r.Length,state:null,willSetValue:function(t,e){this.owner.willSetRadius(t,e)},onSetValue:function(t,e){this.owner.onSetRadius(t,e)},didSetValue:function(t,e){this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([ho({type:Number,state:5})],e.prototype,"hitRadius",void 0),m([So({type:St,state:null,didSetValue:function(t,e){this.owner.updateGradientStop()}})],e.prototype,"color",void 0),m([So({type:Number,didSetValue:function(t,e){this.owner.updateGradientStop()}})],e.prototype,"opacity",void 0),m([So({type:gt,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:String})],e.prototype,"category",void 0),m([So({type:r.Length,state:r.Length.zero(),updateFlags:Gi.NeedsLayout})],e.prototype,"labelPadding",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([ho({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(ar),$s=function(t){function i(e,i){var o=t.call(this)||this;return Object.defineProperty(o,"x",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"y",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(o,"y2",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(o,"radius",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"color",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"label",{value:null,enumerable:!0,configurable:!0}),o}return w(i,t),i.prototype.setX=function(t){var i=this.x;e.Equals(t,i)||(this.willSetX(t,i),Object.defineProperty(this,"x",{value:t,enumerable:!0,configurable:!0}),this.onSetX(t,i),this.didSetX(t,i))},i.prototype.willSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetX&&r.dataPointTraitWillSetX(t,e,this)}},i.prototype.onSetX=function(t,e){},i.prototype.didSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetX&&r.dataPointTraitDidSetX(t,e,this)}},i.prototype.setY=function(t){var i=this.y;e.Equals(t,i)||(this.willSetY(t,i),Object.defineProperty(this,"y",{value:t,enumerable:!0,configurable:!0}),this.onSetY(t,i),this.didSetY(t,i))},i.prototype.willSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetY&&r.dataPointTraitWillSetY(t,e,this)}},i.prototype.onSetY=function(t,e){},i.prototype.didSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetY&&r.dataPointTraitDidSetY(t,e,this)}},i.prototype.setY2=function(t){var i=this.y2;e.Equals(t,i)||(this.willSetY2(t,i),Object.defineProperty(this,"y2",{value:t,enumerable:!0,configurable:!0}),this.onSetY2(t,i),this.didSetY2(t,i))},i.prototype.willSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetY2&&r.dataPointTraitWillSetY2(t,e,this)}},i.prototype.onSetY2=function(t,e){},i.prototype.didSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetY2&&r.dataPointTraitDidSetY2(t,e,this)}},i.prototype.setRadius=function(t){null!==t&&(t=r.Length.fromAny(t));var i=this.radius;e.Equals(t,i)||(this.willSetRadius(t,i),Object.defineProperty(this,"radius",{value:t,enumerable:!0,configurable:!0}),this.onSetRadius(t,i),this.didSetRadius(t,i))},i.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetRadius&&r.dataPointTraitWillSetRadius(t,e,this)}},i.prototype.onSetRadius=function(t,e){},i.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetRadius&&r.dataPointTraitDidSetRadius(t,e,this)}},i.prototype.setColor=function(t){null===t||t instanceof Qt||(t=St.fromAny(t));var i=this.color;e.Equals(t,i)||(this.willSetColor(t,i),Object.defineProperty(this,"color",{value:t,enumerable:!0,configurable:!0}),this.onSetColor(t,i),this.didSetColor(t,i))},i.prototype.willSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetColor&&r.dataPointTraitWillSetColor(t,e,this)}},i.prototype.onSetColor=function(t,e){},i.prototype.didSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetColor&&r.dataPointTraitDidSetColor(t,e,this)}},i.prototype.setLabel=function(t){var i=this.label;e.Equals(t,i)||(this.willSetLabel(t,i),Object.defineProperty(this,"label",{value:t,enumerable:!0,configurable:!0}),this.onSetLabel(t,i),this.didSetLabel(t,i))},i.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitWillSetLabel&&r.dataPointTraitWillSetLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){},i.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointTraitDidSetLabel&&r.dataPointTraitDidSetLabel(t,e,this)}},i.prototype.formatLabel=function(t,e){},i}(st),tl=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createDataPointFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDataPoint=function(t,e){},e.prototype.attachDataPoint=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataPoint=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.dataSetTraitWillSetDataPoint&&s.dataSetTraitWillSetDataPoint(t,e,i,this)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.dataSetTraitDidSetDataPoint&&s.dataSetTraitDidSetDataPoint(t,e,i,this)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.onInsertDataPoint=function(t,e){this.insertDataPoint(t,e)},e.prototype.onRemoveDataPoint=function(t){this.removeDataPoint(t)},e.prototype.detectDataPointModel=function(t){return t.getTrait($s)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataPointModel(n);null!==r&&this.insertDataPoint(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDataPointModel(e);if(null!==o){var n=null!==i?this.detectDataPointModel(i):null;this.onInsertDataPoint(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDataPointModel(e);null!==i&&this.onRemoveDataPoint(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDataPoints()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDataPoints()},e.DataPointFastener=G.define({type:$s,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)}}),e}(st),el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"x",{get:function(){var t=this.dataPoint.trait;return null!==t?t.x:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){var t=this.dataPoint.trait;return null!==t?t.y:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){var t=this.dataPoint.trait;return null!==t?t.y2:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){var t=this.dataPoint.trait;return null!==t?t.radius:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t=this.dataPoint.trait;return null!==t?t.color:null},enumerable:!1,configurable:!0}),e.prototype.setX=function(t){var e=this.dataPoint.trait;null!==e&&e.setX(t)},e.prototype.setY=function(t){var e=this.dataPoint.trait;null!==e&&e.setY(t)},e.prototype.setY2=function(t){var e=this.dataPoint.trait;null!==e&&e.setY2(t)},e.prototype.setRadius=function(t){var e=this.dataPoint.trait;null!==e&&e.setRadius(t)},e.prototype.setColor=function(t){var e=this.dataPoint.trait;null!==e&&e.setColor(t)},e.prototype.setLabel=function(t){var e=this.dataPoint.trait;null!==e&&e.setLabel(t)},e.prototype.initDataPointTrait=function(t){},e.prototype.attachDataPointTrait=function(t){null!==this.dataPoint.view&&(this.setDataPointViewX(t.x,t),this.setDataPointViewY(t.y,t),this.setDataPointViewY2(t.y2,t),this.setDataPointViewRadius(t.radius,t),this.setDataPointViewColor(t.color,t),this.setDataPointLabelView(t.label,t))},e.prototype.detachDataPointTrait=function(t){null!==this.dataPoint.view&&this.setDataPointLabelView(null,t)},e.prototype.willSetDataPointTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointWillSetTrait&&r.dataPointWillSetTrait(t,e,this)}},e.prototype.onSetDataPointTrait=function(t,e){null!==e&&this.detachDataPointTrait(e),null!==t&&(this.attachDataPointTrait(t),this.initDataPointTrait(t))},e.prototype.didSetDataPointTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointDidSetTrait&&r.dataPointDidSetTrait(t,e,this)}},e.prototype.onSetDataPointTraitX=function(t,e,i){this.setDataPointViewX(t,i)},e.prototype.onSetDataPointTraitY=function(t,e,i){this.setDataPointViewY(t,i)},e.prototype.updateDataPointTraitLabel=function(t,e,i){var o=i.formatLabel(t,e);void 0!==o&&i.setLabel(o)},e.prototype.onSetDataPointTraitY2=function(t,e,i){this.setDataPointViewY2(t,i)},e.prototype.onSetDataPointTraitRadius=function(t,e,i){this.setDataPointViewRadius(t,i)},e.prototype.onSetDataPointTraitColor=function(t,e,i){this.setDataPointViewColor(t,i)},e.prototype.onSetDataPointTraitLabel=function(t,e,i){this.setDataPointLabelView(t,i)},e.prototype.createDataPointView=function(t){var e=Js.create();return null!==t&&(e.x.setAutoState(t.x),e.y.setAutoState(t.y),e.y2.setAutoState(t.y2),e.radius.setAutoState(t.radius)),e},e.prototype.initDataPointView=function(t){var e=this.dataPoint.trait;if(null!==e){var i=t.x.value,o=t.y.value;this.updateDataPointTraitLabel(i,o,e)}},e.prototype.themeDataPointView=function(t,e,i,o){},e.prototype.attachDataPointView=function(t){this.label.setView(t.label.view);var e=this.dataPoint.trait;null!==e&&(this.setDataPointViewX(e.x,e),this.setDataPointViewY(e.y,e),this.setDataPointViewY2(e.y2,e),this.setDataPointViewRadius(e.radius,e),this.setDataPointViewColor(e.color,e),this.setDataPointLabelView(e.label,e))},e.prototype.detachDataPointView=function(t){this.label.setView(null)},e.prototype.willSetDataPointView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointWillSetView&&r.dataPointWillSetView(t,e,this)}},e.prototype.onSetDataPointView=function(t,e){null!==e&&this.detachDataPointView(e),null!==t&&(this.attachDataPointView(t),this.initDataPointView(t))},e.prototype.didSetDataPointView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointDidSetView&&r.dataPointDidSetView(t,e,this)}},e.prototype.setDataPointViewX=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.x.setAutoState(t,i))},e.prototype.willSetDataPointViewX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointWillSetViewX&&a.dataPointWillSetViewX(t,e,this)}},e.prototype.onSetDataPointViewX=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.y.value;this.updateDataPointTraitLabel(t,n,o)}},e.prototype.didSetDataPointViewX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointDidSetViewX&&a.dataPointDidSetViewX(t,e,this)}},e.prototype.setDataPointViewY=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.y.setAutoState(t,i))},e.prototype.willSetDataPointViewY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointWillSetViewY&&a.dataPointWillSetViewY(t,e,this)}},e.prototype.onSetDataPointViewY=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.x.value;this.updateDataPointTraitLabel(n,t,o)}},e.prototype.didSetDataPointViewY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointDidSetViewY&&a.dataPointDidSetViewY(t,e,this)}},e.prototype.setDataPointViewY2=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.y2.setAutoState(t,i))},e.prototype.willSetDataPointViewY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointWillSetViewY2&&a.dataPointWillSetViewY2(t,e,this)}},e.prototype.onSetDataPointViewY2=function(t,e,i){},e.prototype.didSetDataPointViewY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointDidSetViewY2&&a.dataPointDidSetViewY2(t,e,this)}},e.prototype.setDataPointViewRadius=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.radius.setAutoState(t,i))},e.prototype.willSetDataPointViewRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointWillSetViewRadius&&a.dataPointWillSetViewRadius(t,e,this)}},e.prototype.onSetDataPointViewRadius=function(t,e,i){},e.prototype.didSetDataPointViewRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataPointDidSetViewRadius&&a.dataPointDidSetViewRadius(t,e,this)}},e.prototype.setDataPointViewColor=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),t instanceof Qt?o.color.setLook(t,i):o.color.setAutoState(t,i))},e.prototype.createDataPointLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setDataPointLabelView=function(t,e){var i=this.dataPoint.view;if(null!==i){var o=null!==t?this.createDataPointLabelView(t,e):null;i.label.setView(o)}},e.prototype.initDataPointLabelView=function(t){},e.prototype.attachDataPointLabelView=function(t){},e.prototype.detachDataPointLabelView=function(t){},e.prototype.willSetDataPointLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointWillSetLabelView&&r.dataPointWillSetLabelView(t,e,this)}},e.prototype.onSetDataPointLabelView=function(t,e){null!==e&&this.detachDataPointLabelView(e),null!==t&&(this.attachDataPointLabelView(t),this.initDataPointLabelView(t))},e.prototype.didSetDataPointLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataPointDidSetLabelView&&r.dataPointDidSetLabelView(t,e,this)}},e.DataPointFastener=fa.define({viewType:Js,observeView:!0,willSetView:function(t,e){this.owner.willSetDataPointView(t,e)},onSetView:function(t,e){this.owner.onSetDataPointView(t,e)},didSetView:function(t,e){this.owner.didSetDataPointView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeDataPointView(o,t,e,i)},dataPointViewWillSetX:function(t,e,i){this.owner.willSetDataPointViewX(t,e,i)},dataPointViewDidSetX:function(t,e,i){this.owner.onSetDataPointViewX(t,e,i),this.owner.didSetDataPointViewX(t,e,i)},dataPointViewWillSetY:function(t,e,i){this.owner.willSetDataPointViewY(t,e,i)},dataPointViewDidSetY:function(t,e,i){this.owner.onSetDataPointViewY(t,e,i),this.owner.didSetDataPointViewY(t,e,i)},dataPointViewWillSetY2:function(t,e,i){this.owner.willSetDataPointViewY2(t,e,i)},dataPointViewDidSetY2:function(t,e,i){this.owner.onSetDataPointViewY2(t,e,i),this.owner.didSetDataPointViewY2(t,e,i)},dataPointViewWillSetRadius:function(t,e,i){this.owner.willSetDataPointViewRadius(t,e,i)},dataPointViewDidSetRadius:function(t,e,i){this.owner.onSetDataPointViewRadius(t,e,i),this.owner.didSetDataPointViewRadius(t,e,i)},dataPointViewDidSetLabel:function(t,e){this.owner.label.setView(t)},createView:function(){return this.owner.createDataPointView(this.trait)},traitType:$s,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDataPointTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataPointTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataPointTrait(t,e)},dataPointTraitDidSetX:function(t,e,i){this.owner.onSetDataPointTraitX(t,e,i)},dataPointTraitDidSetY:function(t,e,i){this.owner.onSetDataPointTraitY(t,e,i)},dataPointTraitDidSetY2:function(t,e,i){this.owner.onSetDataPointTraitY2(t,e,i)},dataPointTraitDidSetRadius:function(t,e,i){this.owner.onSetDataPointTraitRadius(t,e,i)},dataPointTraitDidSetColor:function(t,e,i){this.owner.onSetDataPointTraitColor(t,e,i)},dataPointTraitDidSetLabel:function(t,e,i){this.owner.onSetDataPointTraitLabel(t,e,i)}}),m([oa({type:s.Timing,inherit:!0})],e.prototype,"dataPointTiming",void 0),m([fa({extends:e.DataPointFastener})],e.prototype,"dataPoint",void 0),m([da({key:!0,willSetView:function(t,e){this.owner.willSetDataPointLabelView(t,e)},onSetView:function(t,e){this.owner.onSetDataPointLabelView(t,e)},didSetView:function(t,e){this.owner.didSetDataPointLabelView(t,e)}})],e.prototype,"label",void 0),e}(ma),il=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initDataSetTrait=function(t){},e.prototype.attachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDataPointTrait(n)}},e.prototype.detachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDataPointTrait(n)}},e.prototype.willSetDataSetTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataSetWillSetTrait&&r.dataSetWillSetTrait(t,e,this)}},e.prototype.onSetDataSetTrait=function(t,e){null!==e&&this.detachDataSetTrait(e),null!==t&&(this.attachDataSetTrait(t),this.initDataSetTrait(t))},e.prototype.didSetDataSetTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.dataSetDidSetTrait&&r.dataSetDidSetTrait(t,e,this)}},e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createDataPointFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDataPoint=function(t){return new el},e.prototype.initDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.initDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.initDataPointView(o,e)},e.prototype.attachDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.attachDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.attachDataPointView(o,e)},e.prototype.detachDataPoint=function(t,e){var i=t.dataPoint.view;null!==i&&this.detachDataPointView(i,e);var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e)},e.prototype.willSetDataPoint=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPoint&&a.dataSetWillSetDataPoint(t,e,i)}},e.prototype.onSetDataPoint=function(t,e,i){null!==e&&this.detachDataPoint(e,i),null!==t&&(this.attachDataPoint(t,i),this.initDataPoint(t,i))},e.prototype.didSetDataPoint=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetDidSetDataPoint&&a.dataSetDidSetDataPoint(t,e,i)}},e.prototype.insertDataPointTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.dataPoint.trait===t)return;a.dataPoint.trait===e&&(o=a)}}var s=this.createDataPoint(t);if(null!==s&&(s.dataPoint.setTrait(t),this.insertChildComponent(s,o),null===s.dataPoint.view)){var l=this.createDataPointView(s),u=null;null!==o&&(u=o.dataPoint.view),s.dataPoint.setView(l,u)}},e.prototype.removeDataPointTrait=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dataPoint.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDataPointTrait=function(t,e){},e.prototype.attachDataPointTrait=function(t,e){},e.prototype.detachDataPointTrait=function(t,e){},e.prototype.willSetDataPointTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointTrait&&a.dataSetWillSetDataPointTrait(t,e,i)}},e.prototype.onSetDataPointTrait=function(t,e,i){null!==e&&this.detachDataPointTrait(e,i),null!==t&&(this.attachDataPointTrait(t,i),this.initDataPointTrait(t,i))},e.prototype.didSetDataPointTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetDidSetDataPointTrait&&a.dataSetDidSetDataPointTrait(t,e,i)}},e.prototype.createDataPointView=function(t){return t.dataPoint.createView()},e.prototype.initDataPointView=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabelView(i,e)},e.prototype.attachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.attachDataPointLabelView(i,e)},e.prototype.detachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.detachDataPointLabelView(i,e),t.remove()},e.prototype.willSetDataPointView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointView&&a.dataSetWillSetDataPointView(t,e,i)}},e.prototype.onSetDataPointView=function(t,e,i){null!==e&&this.detachDataPointView(e,i),null!==t&&(this.attachDataPointView(t,i),this.initDataPointView(t,i))},e.prototype.didSetDataPointView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetDidSetDataPointView&&a.dataSetDidSetDataPointView(t,e,i)}},e.prototype.willSetDataPointViewX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewX&&a.dataSetWillSetDataPointViewX(t,e,i)}},e.prototype.onSetDataPointViewX=function(t,e,i){},e.prototype.didSetDataPointViewX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewX&&a.dataSetWillSetDataPointViewX(t,e,i)}},e.prototype.willSetDataPointViewY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewY&&a.dataSetWillSetDataPointViewY(t,e,i)}},e.prototype.onSetDataPointViewY=function(t,e,i){},e.prototype.didSetDataPointViewY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewY&&a.dataSetWillSetDataPointViewY(t,e,i)}},e.prototype.willSetDataPointViewY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewY2&&a.dataSetWillSetDataPointViewY2(t,e,i)}},e.prototype.onSetDataPointViewY2=function(t,e,i){},e.prototype.didSetDataPointViewY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewY2&&a.dataSetWillSetDataPointViewY2(t,e,i)}},e.prototype.willSetDataPointViewRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewRadius&&a.dataSetWillSetDataPointViewRadius(t,e,i)}},e.prototype.onSetDataPointViewRadius=function(t,e,i){},e.prototype.didSetDataPointViewRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointViewRadius&&a.dataSetWillSetDataPointViewRadius(t,e,i)}},e.prototype.initDataPointLabelView=function(t,e){},e.prototype.attachDataPointLabelView=function(t,e){},e.prototype.detachDataPointLabelView=function(t,e){},e.prototype.willSetDataPointLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetWillSetDataPointLabelView&&a.dataSetWillSetDataPointLabelView(t,e,i)}},e.prototype.onSetDataPointLabelView=function(t,e,i){null!==e&&this.detachDataPointLabelView(e,i),null!==t&&(this.attachDataPointLabelView(t,i),this.initDataPointLabelView(t,i))},e.prototype.didSetDataPointLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.dataSetDidSetDataPointLabelView&&a.dataSetDidSetDataPointLabelView(t,e,i)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.getDataPointFastener=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dataPoint.trait===t)return n}return null},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDataPointComponent=function(t){return t instanceof el?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectDataPointComponent(e);null!==o&&this.insertDataPoint(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectDataPointComponent(e);null!==i&&this.removeDataPoint(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.DataSetFastener=ha.define({type:tl,observe:!0,willSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataSetTrait(t,e)},dataSetTraitWillSetDataPoint:function(t,e,i){null!==e&&this.owner.removeDataPointTrait(e)},dataSetTraitDidSetDataPoint:function(t,e,i){null!==t&&this.owner.insertDataPointTrait(t,i)}}),e.DataPointFastener=ya.define({type:el,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetDataPoint(t,e,this)},onSetComponent:function(t,e){this.owner.onSetDataPoint(t,e,this)},didSetComponent:function(t,e){this.owner.didSetDataPoint(t,e,this)},dataPointWillSetTrait:function(t,e){this.owner.willSetDataPointTrait(t,e,this)},dataPointDidSetTrait:function(t,e){this.owner.onSetDataPointTrait(t,e,this),this.owner.didSetDataPointTrait(t,e,this)},dataPointWillSetView:function(t,e){this.owner.willSetDataPointView(t,e,this)},dataPointDidSetView:function(t,e){this.owner.onSetDataPointView(t,e,this),this.owner.didSetDataPointView(t,e,this)},dataPointWillSetViewX:function(t,e){this.owner.willSetDataPointViewX(t,e,this)},dataPointDidSetViewX:function(t,e){this.owner.onSetDataPointViewX(t,e,this),this.owner.didSetDataPointViewX(t,e,this)},dataPointWillSetViewY:function(t,e){this.owner.willSetDataPointViewY(t,e,this)},dataPointDidSetViewY:function(t,e){this.owner.onSetDataPointViewY(t,e,this),this.owner.didSetDataPointViewY(t,e,this)},dataPointWillSetViewY2:function(t,e){this.owner.willSetDataPointViewY2(t,e,this)},dataPointDidSetViewY2:function(t,e){this.owner.onSetDataPointViewY2(t,e,this),this.owner.didSetDataPointViewY2(t,e,this)},dataPointWillSetViewRadius:function(t,e){this.owner.willSetDataPointViewRadius(t,e,this)},dataPointDidSetViewRadius:function(t,e){this.owner.onSetDataPointViewRadius(t,e,this),this.owner.didSetDataPointViewRadius(t,e,this)},dataPointWillSetLabelView:function(t,e){this.owner.willSetDataPointLabelView(t,e,this)},dataPointDidSetLabelView:function(t,e){this.owner.onSetDataPointLabelView(t,e,this),this.owner.didSetDataPointLabelView(t,e,this)}}),m([ha({extends:e.DataSetFastener})],e.prototype,"dataSet",void 0),m([oa({type:s.Timing,state:!0})],e.prototype,"dataPointTiming",void 0),e}(ma),ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initState=function(){return null},e.prototype.setScale=function(e,i,o,n,r){"string"==typeof e&&(e=sl.parseScale(e).domain),e instanceof s.Domain&&(r=o,i instanceof s.Domain&&(n=i[1],o=i[0]),i=e[1],e=e[0]);var a,l=this.state;if(null!==l){if(a=l.withDomain(e,i),void 0!==o&&void 0!==n&&(a=a.overRange(o,n)),(void 0===r||!1===r)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var u=this.getValue().withDomain(e,i);this.setValue(u),r=!0}}else a=sl.createScale(e,i,o,n);this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag),t.prototype.setState.call(this,a,r)},e.prototype.setDomain=function(e,i,o){"string"==typeof e&&(e=sl.parseScale(e).domain),e instanceof s.Domain&&(o=i,i=e[1],e=e[0]);var n,r=this.state;if(null!==r){if(n=r.withDomain(e,i),(void 0===o||!1===o)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var a=this.getValue().withDomain(e,i);this.setValue(a),o=!0}}else n=sl.createScale(e,i,0,1);this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag),t.prototype.setState.call(this,n,o)},e.prototype.setRange=function(e,i,o){var n=this.state;if(null!==n){e instanceof s.Range&&(o=i,i=e[1],e=e[0]);var r=n.overRange(e,i);if((void 0===o||!1===o)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var a=this.getValue().overRange(e,i);this.setValue(a),o=!0}this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag|bo.OverrideFlag),t.prototype.setState.call(this,r,o)}},e.prototype.setBaseScale=function(t,i,o,n,r){var a;this.isInherited()&&(a=this.superAnimator)instanceof e?a.setBaseScale(t,i,o,n,r):this.setScale(t,i,o,n,r)},e.prototype.setBaseDomain=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseDomain(t,i,o):this.setDomain(t,i,o)},e.prototype.setBaseRange=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseRange(t,i,o):this.setRange(t,i,o)},e.prototype.fromAny=function(t){return"string"==typeof t&&(t=sl.parseScale(t)),t},e}(So),nl={is:function(t){if("object"==typeof t&&null!==t){return t instanceof sl||t instanceof nr&&"xScale"in t}return!1}},rl={is:function(t){if("object"==typeof t&&null!==t){return t instanceof sl||t instanceof nr&&"yScale"in t}return!1}},al={is:function(t){if("object"==typeof t&&null!==t){return t instanceof sl||t instanceof nr&&"xScale"in t&&"yScale"in t}return!1}},sl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"scaledFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"scaledFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataDomainPadded",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomainPadded",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale),void 0!==e.xDomainBounds&&this.xDomainBounds(e.xDomainBounds),void 0!==e.yDomainBounds&&this.yDomainBounds(e.yDomainBounds),void 0!==e.xZoomBounds&&this.xZoomBounds(e.xZoomBounds),void 0!==e.yZoomBounds&&this.yZoomBounds(e.yZoomBounds),void 0!==e.xDomainPadding&&this.xDomainPadding(e.xDomainPadding),void 0!==e.yDomainPadding&&this.yDomainPadding(e.yDomainPadding),void 0!==e.xRangePadding&&this.xRangePadding(e.xRangePadding),void 0!==e.yRangePadding&&this.yRangePadding(e.yRangePadding),void 0!==e.fitAlign&&this.fitAlign(e.fitAlign),void 0!==e.xFitAlign&&this.xFitAlign(e.xFitAlign),void 0!==e.yFitAlign&&this.yFitAlign(e.yFitAlign),void 0!==e.fitAspectRatio&&this.fitAspectRatio(e.fitAspectRatio),void 0!==e.preserveAspectRatio&&this.preserveAspectRatio(e.preserveAspectRatio),void 0!==e.domainTracking&&this.domainTracking(e.domainTracking),void 0!==e.xDomainTracking&&this.xDomainTracking(e.xDomainTracking),void 0!==e.yDomainTracking&&this.yDomainTracking(e.yDomainTracking),void 0!==e.gestures&&this.gestures(e.gestures),void 0!==e.xGestures&&this.xGestures(e.xGestures),void 0!==e.yGestures&&this.yGestures(e.yGestures),void 0!==e.scaleGesture&&(this.scaleGesture.setState(e.scaleGesture),e.scaleGesture.setView(this)),void 0!==e.rescaleTransition&&this.rescaleTransition.setState(e.rescaleTransition),void 0!==e.reboundTransition&&this.reboundTransition.setState(e.reboundTransition)},i.prototype.setScaledFlags=function(t){Object.defineProperty(this,"scaledFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXScale&&i.scaledViewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXScale&&a.scaledViewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXScale&&r.scaledViewDidSetXScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXScale&&a.scaledViewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYScale&&i.scaledViewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYScale&&a.scaledViewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYScale&&r.scaledViewDidSetYScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYScale&&a.scaledViewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(void 0===t){var o=this.xScale.value;return null!==o?o.domain:null}(t instanceof s.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.xRange();return t instanceof s.Domain||"string"==typeof t?null!==n?this.xScale.setBaseScale(t,n,i):this.xScale.setBaseDomain(t,i):null!==n?this.xScale.setBaseScale(t,e,n[0],n[1],i):this.xScale.setBaseDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(void 0===t){var o=this.yScale.value;return null!==o?o.domain:null}(t instanceof s.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.yRange();return t instanceof s.Domain||"string"==typeof t?null!==n?this.yScale.setBaseScale(t,s.LinearRange(n[1],n[0]),i):this.yScale.setBaseDomain(t,i):null!==n?this.yScale.setBaseScale(t,e,n[1],n[0],i):this.yScale.setBaseDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.viewFrame.width;if(isFinite(t)){var e=this.xRangePadding.state,i=e[0],o=t-e[1];return s.LinearRange(i,o)}return null},i.prototype.yRange=function(){var t=this.viewFrame.height;if(isFinite(t)){var e=this.yRangePadding.state,i=e[0],o=t-e[1];return s.LinearRange(o,i)}return null},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXDataDomain&&i.scaledViewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXDataDomain&&a.scaledViewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.updateXDataDomainPadded(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXDataDomain&&r.scaledViewDidSetXDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXDataDomain&&a.scaledViewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t,i){var o=this.xDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=s.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=s.Domain(o[0],t[1]))),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYDataDomain&&i.scaledViewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYDataDomain&&a.scaledViewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.updateYDataDomainPadded(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYDataDomain&&r.scaledViewDidSetYDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYDataDomain&&a.scaledViewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t,i){var o=this.yDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=s.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=s.Domain(o[0],t[1]))),this.setYDataDomain(o)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.setXDataDomainPadded=function(t){Object.defineProperty(this,"xDataDomainPadded",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataDomainPadded=function(){var t,e=this.xDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.xDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=s.Domain(i,o)}else t=null;this.setXDataDomainPadded(t)},i.prototype.setYDataDomainPadded=function(t){Object.defineProperty(this,"yDataDomainPadded",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataDomainPadded=function(){var t,e=this.yDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.xDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=s.Domain(i,o)}else t=null;this.setYDataDomainPadded(t)},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXRangePadding&&i.scaledViewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXRangePadding&&a.scaledViewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXRangePadding&&r.scaledViewDidSetXRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXRangePadding&&a.scaledViewDidSetXRangePadding(t,e,this)},i.prototype.updateXRangePadding=function(t,e){if(this.xRangePadding.isAuto()){var i=this.xRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.xRangePadding.setAutoState(i)}},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYRangePadding&&i.scaledViewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYRangePadding&&a.scaledViewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYRangePadding&&r.scaledViewDidSetYRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYRangePadding&&a.scaledViewDidSetYRangePadding(t,e,this)},i.prototype.updateYRangePadding=function(t,e){if(this.yRangePadding.isAuto()){var i=this.yRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.yRangePadding.setAutoState(i)}},i.prototype.xFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([t,e[1]]),this)},i.prototype.yFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([e[0],t]),this)},i.prototype.preserveAspectRatio=function(t){return void 0===t?0!=(this.scaledFlags&i.PreserveAspectRatioFlag):(t?this.setScaledFlags(this.scaledFlags|i.PreserveAspectRatioFlag):this.setScaledFlags(this.scaledFlags&~i.PreserveAspectRatioFlag),this)},i.prototype.domainTracking=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XDomainTrackingFlag),0!=(this.scaledFlags&i.YDomainTrackingFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),e?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.xDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.XDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),this)},i.prototype.yDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.YDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.gestures=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XGesturesFlag),0!=(this.scaledFlags&i.YGesturesFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?(this.setScaledFlags(this.scaledFlags|i.XGesturesFlag),this.didEnableXGestures()):(this.setScaledFlags(this.scaledFlags&~i.XGesturesFlag),this.didDisableXGestures()),e?(this.setScaledFlags(this.scaledFlags|i.YGesturesFlag),this.didEnableYGestures()):(this.setScaledFlags(this.scaledFlags&~i.YGesturesFlag),this.didDisableYGestures()),this)},i.prototype.xGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.XGesturesFlag):(t?(this.setScaledFlags(this.scaledFlags|i.XGesturesFlag),this.didEnableXGestures()):(this.setScaledFlags(this.scaledFlags&~i.XGesturesFlag),this.didDisableXGestures()),this)},i.prototype.yGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.YGesturesFlag):(t?(this.setScaledFlags(this.scaledFlags|i.YGesturesFlag),this.didEnableYGestures()):(this.setScaledFlags(this.scaledFlags&~i.YGesturesFlag),this.didDisableYGestures()),this)},i.prototype.didEnableXGestures=function(){null===this.scaleGesture.state&&this.scaleGesture.setState(!0)},i.prototype.didDisableXGestures=function(){},i.prototype.didEnableYGestures=function(){null===this.scaleGesture.state&&this.scaleGesture.setState(!0)},i.prototype.didDisableYGestures=function(){},i.prototype.createScaleGesture=function(){return new en(this,this)},i.prototype.fitX=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.XFitTweenFlag),this.requireUpdate(Gi.NeedsLayout)},i.prototype.fitY=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.YFitTweenFlag),this.requireUpdate(Gi.NeedsLayout)},i.prototype.fit=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.FitTweenMask),this.requireUpdate(Gi.NeedsLayout)},i.prototype.insertScaled=function(t,e){void 0===e&&(e=null);for(var i=this.scaledFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createScaledFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},i.prototype.removeScaled=function(t){for(var e=this.scaledFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initScaled=function(t,e){},i.prototype.willSetScaled=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.scaledViewWillSetScaled&&n.scaledViewWillSetScaled(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.scaledViewWillSetScaled&&l.scaledViewWillSetScaled(t,e,i,this)}},i.prototype.onSetScaled=function(t,e,i,o){null!==t&&(this.initScaled(t,o),nl.is(t)&&this.updateXDataDomain(t.xDataDomain,o),rl.is(t)&&this.updateYDataDomain(t.yDataDomain,o))},i.prototype.didSetScaled=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.scaledViewDidSetScaled&&s.scaledViewDidSetScaled(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.scaledViewDidSetScaled&&l.scaledViewDidSetScaled(t,e,i,this)},i.prototype.onSetScaledXScale=function(t,e,i){},i.prototype.onSetScaledYScale=function(t,e,i){},i.prototype.onSetScaledXRangePadding=function(t,e,i){this.updateXRangePadding(t,i)},i.prototype.onSetScaledYRangePadding=function(t,e,i){this.updateYRangePadding(t,i)},i.prototype.onSetScaledXDataDomain=function(t,e,i){this.updateXDataDomain(t,i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetScaledYDataDomain=function(t,e,i){this.updateYDataDomain(t,i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.createScaledFastener=function(t){return new i.ScaledFastener(this,t.key,"scaled")},i.prototype.mountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectScaled=function(t){return nl.is(t)||rl.is(t)?t:null},i.prototype.onInsertScaled=function(t,e){this.insertScaled(t,e)},i.prototype.onRemoveScaled=function(t){this.removeScaled(t)},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectScaled(e);null!==o&&this.onInsertScaled(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectScaled(e);null!==i&&this.onRemoveScaled(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(),this.updateScales()},i.prototype.resizeScales=function(){var t,e,o=this.xRange();if(null!==o)if(null!==(t=this.xScale.isInherited()?null:this.xScale.ownState))t.range.equals(o)||(this.xScale.setRange(o),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.xScale.superAnimator||null===this.xScale.superValue){var n=this.xDataDomainPadded;null!==n&&(t=i.createScale(n[0],n[1],o[0],o[1]),this.xScale.setState(t),this.setScaledFlags(this.scaledFlags|i.XFitFlag))}var r=this.yRange();if(null!==r)if(null!==(e=this.yScale.isInherited()?null:this.yScale.ownState))e.range.equals(r)||(this.yScale.setRange(r),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.yScale.superAnimator||null===this.yScale.superValue){var a=this.yDataDomainPadded;null!==a&&(e=i.createScale(a[0],a[1],r[0],r[1]),this.yScale.setState(e),this.setScaledFlags(this.scaledFlags|i.YFitFlag))}},i.prototype.updateScales=function(){var t=this.xScale.isInherited()?null:this.xScale.ownState,e=this.yScale.isInherited()?null:this.yScale.ownState;if(null!==t&&null!==e){var i=this.scaleGesture.state;if(!(null!==i&&i.isPressing())){var o=null!==i&&i.isCoasting();this.boundScales(t,e,o)}}},i.prototype.boundScales=function(t,o,n){var r=t.domain,a=o.domain,u=r,h=a,p=this.xDataDomainPadded;null!==p&&0!=(this.scaledFlags&i.XFitFlag)?(u=p,this.setScaledFlags(this.scaledFlags|i.XInRangeMask)):u=r;var d=this.yDataDomainPadded;null!==d&&0!=(this.scaledFlags&i.YFitFlag)?(h=d,this.setScaledFlags(this.scaledFlags|i.YInRangeMask)):h=a;var c=null!==p?p:r,f=this.xDomainBounds.state,v=!1===f[0]?void 0:!0===f[0]?c[0]:f[0],y=!1===f[1]?void 0:!0===f[1]?c[1]:f[1],g=this.xZoomBounds.state,w=g[0],m=g[1];!0===w?w=t instanceof s.LinearScale?i.LinearZoomMin:t instanceof l.TimeScale?i.TimeZoomMin:void 0:!1===w&&(w=void 0),!0===m?m=t instanceof s.LinearScale?i.LinearZoomMax:t instanceof l.TimeScale?i.TimeZoomMax:void 0:!1===m&&(m=void 0),u=t.clampDomain(v,y,w,m).domain;var b=null!==d?d:a,S=this.yDomainBounds.state,C=!1===S[0]?void 0:!0===S[0]?b[0]:S[0],P=!1===S[1]?void 0:!0===S[1]?b[1]:S[1],V=this.yZoomBounds.state,T=V[0],A=V[1];if(!0===T?T=o instanceof s.LinearScale?i.LinearZoomMin:o instanceof l.TimeScale?i.TimeZoomMin:void 0:!1===T&&(T=void 0),!0===A?A=o instanceof s.LinearScale?i.LinearZoomMax:o instanceof l.TimeScale?i.TimeZoomMax:void 0:!1===A&&(A=void 0),h=o.clampDomain(C,P,T,A).domain,null!==p&&!n&&0!=(this.scaledFlags&i.XDomainTrackingFlag)&&0!=(this.scaledFlags&i.XInRangeMask))if((this.scaledFlags&i.XInRangeMask)===i.XInRangeMask)u=p;else{var F=+u[1]-+u[0];u=0!=(this.scaledFlags&i.XMinInRangeFlag)?s.Domain(p[0],+p[0]+ +F):s.Domain(+p[1]-+F,p[1])}if(null!==d&&!n&&0!=(this.scaledFlags&i.YDomainTrackingFlag)&&0!=(this.scaledFlags&i.YInRangeMask))if((this.scaledFlags&i.YInRangeMask)===i.YInRangeMask)h=d;else{var M=+h[1]-+h[0];h=0!=(this.scaledFlags&i.YMinInRangeFlag)?s.Domain(d[0],+d[0]+ +M):s.Domain(+d[1]-+M,d[1])}var O=this.fitAspectRatio.state;if(void 0!==O&&0!=(this.scaledFlags&(i.PreserveAspectRatioFlag|i.FitMask))){var x=t.range,D=o.range,R=+u[1]-+u[0],L=+h[1]-+h[0],k=R/L,j=(x[1]-x[0])/(D[0]-D[1]),I=Math.abs(O*j);if(!e.Equivalent(k,I)){var E=this.fitAlign.state;if(O<0&&k<I||O>0&&k>I){var W=L*I-R;u=s.Domain(+u[0]-W*E[0],+u[1]+W*(1-E[0]))}else{var N=R/I-L;h=s.Domain(+h[0]-N*E[1],+h[1]+N*(1-E[1]))}}}if(0==(this.scaledFlags&i.XBoundingFlag)&&!e.Equivalent(u,r)){var U=void 0;0!=(this.scaledFlags&(i.XFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.XFitTweenFlag)||void 0!==(U=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==U&&this.setScaledFlags(this.scaledFlags|i.XBoundingFlag),this.willReboundX(t),this.xDomain(u,U),void 0===U&&!1!==U&&this.didReboundX(this.xScale.getState()),null!==p&&0!=(this.scaledFlags&i.XFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.XFitFlag)}if(0==(this.scaledFlags&i.YBoundingFlag)&&!e.Equivalent(h,a)){U=void 0;0!=(this.scaledFlags&(i.YFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.YFitTweenFlag)||void 0!==(U=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==U&&this.setScaledFlags(this.scaledFlags|i.YBoundingFlag),this.willReboundY(o),this.yDomain(h,U),void 0===U&&!1!==U&&this.didReboundY(this.yScale.getState()),null!==d&&0!=(this.scaledFlags&i.YFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.YFitFlag)}this.setScaledFlags(this.scaledFlags&~(i.InteractedFlag|i.RescaleFlag))},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Gi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,a){var l,u,h,p,d=0,c=0,f=0,v=0,y=0,g=0;t.prototype.displayChildViews.call(this,n,r,(function(t,i,o){if(a.call(this,t,i,o),nl.is(t)&&t.xScale.isInherited()){var n=t.xDataDomain;if(null!==n){0!==y?(e.Values.compare(n[0],l)<0&&(l=n[0]),e.Values.compare(u,n[1])<0&&(u=n[1])):(l=n[0],u=n[1]);var r=t.xRangePadding();d=Math.max(r[0],d),c=Math.max(r[1],c),y+=1}}if(rl.is(t)&&t.yScale.isInherited()){var s=t.yDataDomain;if(null!==s){0!==g?(e.Values.compare(s[0],h)<0&&(h=s[0]),e.Values.compare(p,s[1])<0&&(p=s[1])):(h=s[0],p=s[1]);var w=t.yRangePadding();f=Math.max(w[0],f),v=Math.max(w[1],v),g+=1}}})),this.setXDataDomain(0!==y?s.Domain(l,u):null),this.setYDataDomain(0!==g?s.Domain(h,p):null),this.xRangePadding.setAutoState([d,c]),this.yRangePadding.setAutoState([f,v])},i.prototype.onBeginBoundingXScale=function(t){},i.prototype.onEndBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onInterruptBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onBeginBoundingYScale=function(t){},i.prototype.onEndBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.onInterruptBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.willReboundX=function(t){var e=this.scaleGesture.state;null!==e&&e.neutralizeX()},i.prototype.didReboundX=function(t){},i.prototype.willReboundY=function(t){var e=this.scaleGesture.state;null!==e&&e.neutralizeY()},i.prototype.didReboundY=function(t){},i.prototype.willStartInteracting=function(){this.setScaledFlags(this.scaledFlags&~i.BoundingMask|i.InteractingFlag)},i.prototype.didStopInteracting=function(){var t=this.xScale.value,e=this.xDataDomain;if(null!==t&&null!==e){var o=t.domain;o.contains(e[0])?this.setScaledFlags(this.scaledFlags|i.XMinInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.XMinInRangeFlag),o.contains(e[1])?this.setScaledFlags(this.scaledFlags|i.XMaxInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.XMaxInRangeFlag)}var n=this.yScale.value,r=this.yDataDomain;if(null!==n&&null!==r){var a=n.domain;a.contains(r[0])?this.setScaledFlags(this.scaledFlags|i.YMinInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.YMinInRangeFlag),a.contains(r[1])?this.setScaledFlags(this.scaledFlags|i.YMaxInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.YMaxInRangeFlag)}this.setScaledFlags(this.scaledFlags&~i.InteractingFlag|i.InteractedFlag)},i.prototype.didStopPressing=function(){this.requireUpdate(Gi.NeedsLayout)},i.prototype.willBeginCoast=function(t,e){0==(this.scaledFlags&i.XGesturesFlag)&&(t.disableX=!0,t.vx=0,t.ax=0),0==(this.scaledFlags&i.YGesturesFlag)&&(t.disableY=!0,t.vy=0,t.ay=0)},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountScaledFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountScaledFasteners(),t.prototype.unmountViewFasteners.call(this)},i.createScale=function(t,e,i,o){var n;if(n="number"==typeof i&&"number"==typeof o?s.LinearRange(i,o):s.LinearRange(0,1),"number"==typeof t&&"number"==typeof e)return s.LinearScale(s.LinearDomain(t,e),n);if(t instanceof l.DateTime&&e instanceof l.DateTime)return l.TimeScale(l.TimeDomain(t,e),n);throw new TypeError(t+", "+e+", "+i+", "+o)},i.parseScale=function(t){if("linear"===t)return s.LinearScale(s.LinearDomain(0,1),s.LinearRange(0,1));if("time"===t){var e=(r=l.DateTime.current()).withDay(r.day-1);return l.TimeScale(l.TimeDomain(e,r),s.LinearRange(0,1))}var i=t.split("..."),o=+i[0],n=+i[1];if(isFinite(o)&&isFinite(n))return s.LinearScale(s.LinearDomain(o,n),s.LinearRange(0,1));e=l.DateTime.parse(i[0]);var r=l.DateTime.parse(i[1]);return l.TimeScale(l.TimeDomain(e,r),s.LinearRange(0,1))},i.ScaledFastener=jo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetScaled(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetScaled(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetScaled(t,e,i,this)},scaledViewDidSetXScale:function(t,e){this.owner.onSetScaledXScale(t,e,this)},scaledViewDidSetYScale:function(t,e){this.owner.onSetScaledYScale(t,e,this)},scaledViewDidSetXRangePadding:function(t,e){this.owner.onSetScaledXRangePadding(t,e,this)},scaledViewDidSetYRangePadding:function(t,e){this.owner.onSetScaledYRangePadding(t,e,this)},scaledViewDidSetXDataDomain:function(t,e){this.owner.onSetScaledXDataDomain(t,e,this)},scaledViewDidSetYDataDomain:function(t,e){this.owner.onSetScaledYDataDomain(t,e,this)}}),i.PreserveAspectRatioFlag=1,i.XDomainTrackingFlag=2,i.YDomainTrackingFlag=4,i.XGesturesFlag=8,i.YGesturesFlag=16,i.XMinInRangeFlag=32,i.XMaxInRangeFlag=64,i.YMinInRangeFlag=128,i.YMaxInRangeFlag=256,i.InteractingFlag=512,i.InteractedFlag=1024,i.XBoundingFlag=2048,i.YBoundingFlag=4096,i.XFitFlag=8192,i.YFitFlag=16384,i.XFitTweenFlag=32768,i.YFitTweenFlag=65536,i.RescaleFlag=1<<17,i.DomainTrackingMask=i.XDomainTrackingFlag|i.YDomainTrackingFlag,i.GesturesMask=i.XGesturesFlag|i.YGesturesFlag,i.XInRangeMask=i.XMinInRangeFlag|i.XMaxInRangeFlag,i.YInRangeMask=i.YMinInRangeFlag|i.YMaxInRangeFlag,i.InteractingMask=i.InteractingFlag|i.InteractedFlag,i.BoundingMask=i.XBoundingFlag|i.YBoundingFlag,i.FitMask=i.XFitFlag|i.YFitFlag,i.FitTweenMask=i.XFitTweenFlag|i.YFitTweenFlag,i.LinearZoomMin=1e6,i.LinearZoomMax=.001,i.TimeZoomMin=864e5,i.TimeZoomMax=1,i.insertChildFlags=ar.insertChildFlags|Gi.NeedsResize,m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},onSetValue:function(t,e){this.owner.onSetXScale(t,e)},didSetValue:function(t,e){this.owner.didSetXScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onBeginBoundingXScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onEndBoundingXScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onInterruptBoundingXScale(t)}})],i.prototype,"xScale",void 0),m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},onSetValue:function(t,e){this.owner.onSetYScale(t,e)},didSetValue:function(t,e){this.owner.didSetYScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onBeginBoundingYScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onEndBoundingYScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onInterruptBoundingYScale(t)}})],i.prototype,"yScale",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"xDomainBounds",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"yDomainBounds",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"xZoomBounds",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"yZoomBounds",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!1,!1]}})],i.prototype,"xDomainPadding",void 0),m([ho({updateFlags:Gi.NeedsLayout,initState:function(){return[!1,!1]}})],i.prototype,"yDomainPadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),m([ho({type:Object,initState:function(){return[1,.5]},fromAny:function(t){return"number"==typeof t?[t,t]:t}})],i.prototype,"fitAlign",void 0),m([ho({type:Number})],i.prototype,"fitAspectRatio",void 0),m([ho({type:en,inherit:!0,state:null,fromAny:function(t){return!0===t?this.owner.createScaleGesture():!1===t?null:t}})],i.prototype,"scaleGesture",void 0),m([ho({type:s.Timing,inherit:!0,initState:function(){return s.Easing.linear.withDuration(250)}})],i.prototype,"rescaleTransition",void 0),m([ho({type:s.Timing,inherit:!0,initState:function(){return s.Easing.cubicOut.withDuration(250)}})],i.prototype,"reboundTransition",void 0),i}(ar),ll={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ul||t instanceof hl||t instanceof nr&&"plotType"in t}return!1},fromType:function(t){if("bubble"===t)return new pl;if("line"===t)return new dl;if("area"===t)return new cl;throw new TypeError(""+t)},fromInit:function(t){var e=t.plotType;if("bubble"===e)return pl.fromInit(t);if("line"===e)return dl.fromInit(t);if("area"===e)return cl.fromInit(t);throw new TypeError(""+t)},fromAny:function(t){if(this.is(t))return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)}},ul=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXScale&&i.scaledViewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXScale&&a.scaledViewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXScale&&r.scaledViewDidSetXScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXScale&&a.scaledViewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYScale&&i.scaledViewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYScale&&a.scaledViewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYScale&&r.scaledViewDidSetYScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYScale&&a.scaledViewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXRangePadding&&i.scaledViewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXRangePadding&&a.scaledViewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXRangePadding&&r.scaledViewDidSetXRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXRangePadding&&a.scaledViewDidSetXRangePadding(t,e,this)},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYRangePadding&&i.scaledViewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYRangePadding&&a.scaledViewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYRangePadding&&r.scaledViewDidSetYRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYRangePadding&&a.scaledViewDidSetYRangePadding(t,e,this)},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXDataDomain&&i.scaledViewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXDataDomain&&a.scaledViewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXDataDomain&&r.scaledViewDidSetXDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXDataDomain&&a.scaledViewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t){var i=t.x.getValue(),o=this.xDataDomain;null===o?o=s.Domain(i,i):e.Values.compare(i,o[0])<0?o=s.Domain(i,o[1]):e.Values.compare(o[1],i)<0&&(o=s.Domain(o[0],i)),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYDataDomain&&i.scaledViewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYDataDomain&&a.scaledViewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYDataDomain&&r.scaledViewDidSetYDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYDataDomain&&a.scaledViewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=s.Domain(i,i):(e.Values.compare(i,n[0])<0?n=s.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=s.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=s.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=s.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),t=Js.fromAny(t);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.view===t)return;a.view===e&&(o=n)}var s=this.createDataPointFastener(t);i.splice(o,0,s),s.setView(t,e),this.isMounted()&&s.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){},i.prototype.willSetDataPoint=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.plotViewWillSetDataPoint&&n.plotViewWillSetDataPoint(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.plotViewWillSetDataPoint&&l.plotViewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.plotViewDidSetDataPoint&&s.plotViewDidSetDataPoint(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.plotViewDidSetDataPoint&&l.plotViewDidSetDataPoint(t,e,i,this)},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectDataPoint=function(t){return t instanceof Js?t:null},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDataPoint(e);null!==o&&this.insertDataPoint(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDataPoint(e);null!==i&&this.removeDataPoint(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Gi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,a){var l,u,h,p,d=this.viewFrame,c=Math.min(d.width,d.height),f=0,v=0,y=0,g=0,w=null;t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){if(t instanceof Js){var s=t.x.getValue(),m=t.y.getValue(),b=t.y2.value,S=t.radius.value,C=i(s),P=o(m);if(t.setXCoord(d.xMin+C),t.setYCoord(d.yMin+P),null!==w?(e.Values.compare(s,l)<0?l=s:e.Values.compare(u,s)<0&&(u=s),e.Values.compare(m,h)<0?h=m:e.Values.compare(p,m)<0&&(p=m),void 0!==b&&(e.Values.compare(b,h)<0?h=b:e.Values.compare(p,b)<0&&(p=b))):(l=s,u=s,h=m,p=m),null!==S){var V=S.pxValue(c);f=Math.max(V,f),v=Math.max(V,v),y=Math.max(V,y),g=Math.max(V,g)}w=t}a.call(this,t,n,r)})),this.setXDataDomain(null!==w?s.Domain(l,u):null),this.setYDataDomain(null!==w?s.Domain(h,p):null),this.xRangePadding.setAutoState([f,v]),this.yRangePadding.setAutoState([y,g])},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("bubble"===t)return new pl;throw new TypeError(""+t)},i.fromInit=function(t){if("bubble"===t.plotType)return pl.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=jo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},dataPointViewDidSetX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},dataPointViewDidSetY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},dataPointViewDidSetY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},dataPointViewDidSetLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([So({type:gt,state:null,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},onSetValue:function(t,e){this.owner.onSetXScale(t,e)},didSetValue:function(t,e){this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},onSetValue:function(t,e){this.owner.onSetYScale(t,e)},didSetValue:function(t,e){this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(ar),hl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:new h.BTree,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"gradientStops",{value:0,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.hitMode&&this.hitMode(e.hitMode)},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXScale&&i.scaledViewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXScale&&a.scaledViewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXScale&&r.scaledViewDidSetXScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXScale&&a.scaledViewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYScale&&i.scaledViewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYScale&&a.scaledViewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYScale&&r.scaledViewDidSetYScale(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYScale&&a.scaledViewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXRangePadding&&i.scaledViewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXRangePadding&&a.scaledViewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXRangePadding&&r.scaledViewDidSetXRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXRangePadding&&a.scaledViewDidSetXRangePadding(t,e,this)},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYRangePadding&&i.scaledViewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYRangePadding&&a.scaledViewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYRangePadding&&r.scaledViewDidSetYRangePadding(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYRangePadding&&a.scaledViewDidSetYRangePadding(t,e,this)},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetXDataDomain&&i.scaledViewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetXDataDomain&&a.scaledViewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetXDataDomain&&r.scaledViewDidSetXDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetXDataDomain&&a.scaledViewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t){var e,i=this.dataPointFasteners,o=i.firstKey(),n=i.lastKey();if(void 0!==o&&void 0!==n)e=s.Domain(o,n);else{var r=t.x.getValue();e=s.Domain(r,r)}this.setXDataDomain(e)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.scaledViewWillSetYDataDomain&&i.scaledViewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.scaledViewWillSetYDataDomain&&a.scaledViewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(Gi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.scaledViewDidSetYDataDomain&&r.scaledViewDidSetYDataDomain(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.scaledViewDidSetYDataDomain&&a.scaledViewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=s.Domain(i,i):(e.Values.compare(i,n[0])<0?n=s.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=s.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=s.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=s.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(s.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),(t=Js.fromAny(t)).remove();var i=t.x.getState();this.removeDataPoint(i);var o=this.createDataPointFastener(t);this.willInsertChildView(t,null),this.dataPointFasteners.set(i,o),o.setView(t,e),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),this.isMounted()&&o.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){t instanceof Js&&(t=t.x.getState());var e=this.dataPointFasteners.get(t);if(void 0!==e){var i=e.view;if(i.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){this.updateXDataDomain(t)},i.prototype.willSetDataPoint=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.plotViewWillSetDataPoint&&n.plotViewWillSetDataPoint(t,e,i,this);for(var r=this.viewObservers,a=0,s=r.length;a<s;a+=1){var l=r[a];void 0!==l.plotViewWillSetDataPoint&&l.plotViewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.plotViewDidSetDataPoint&&s.plotViewDidSetDataPoint(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.plotViewDidSetDataPoint&&l.plotViewDidSetDataPoint(t,e,i,this)},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Gi.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(Gi.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.getDataPointFastener=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e:null},i.prototype.getDataPointView=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e.view:null},i.prototype.mountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.mount()}),this)},i.prototype.unmountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.unmount()}),this)},Object.defineProperty(i.prototype,"childViewCount",{get:function(){return this.dataPointFasteners.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){var t=[];return this.dataPointFasteners.forEachValue((function(e){t.push(e.view)}),this),t},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){var t=this.dataPointFasteners.firstValue();return void 0!==t?t.view:null},i.prototype.lastChildView=function(){var t=this.dataPointFasteners.lastValue();return void 0!==t?t.view:null},i.prototype.nextChildView=function(t){if(t instanceof Js){var e=this.dataPointFasteners.nextValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof Js){var e=this.dataPointFasteners.previousValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.forEachChildView=function(t,e){return this.dataPointFasteners.forEachValue((function(i){var o=t.call(e,i.view);if(void 0!==o)return o}),e)},i.prototype.getChildView=function(t){return null},i.prototype.setChildView=function(t,e){throw new Error("unsupported")},i.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Js))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Js))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof Js))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof Js))throw new TypeError(""+t);this.removeDataPoint(t.x.getState())},i.prototype.removeAll=function(){this.dataPointFasteners.forEach((function(t,e){var i=e.view;this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}),this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Gi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,a){var l,u,h,p,d,c,f=this.viewFrame,v=0,y=null,g=null;if(t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){var s=t,w=s.x.getValue(),m=s.y.getValue(),b=s.y2.value,S=i(w),C=o(m);s.setXCoord(f.xMin+S),s.setYCoord(f.yMin+C);var P=void 0!==b?o(b):void 0;if(void 0!==P?s.setY2Coord(f.yMin+P):void 0!==s.y2Coord&&s.setY2Coord(void 0),s.isGradientStop()&&(v+=1),null!==g){var V=void 0;V=null!==y?e.Values.compare(d,c)<0&&e.Values.compare(m,c)<0?"maxima":e.Values.compare(c,d)<0&&e.Values.compare(c,m)<0?"minima":e.Values.compare(d,c)<0&&e.Values.compare(c,m)<0?"increasing":e.Values.compare(c,d)<0&&e.Values.compare(m,c)<0?"decreasing":"flat":e.Values.compare(c,m)<0?"increasing":e.Values.compare(m,c)<0?"decreasing":"flat",g.category.setAutoState(V),e.Values.compare(m,h)<0?h=m:e.Values.compare(p,m)<0&&(p=m),void 0!==b&&(e.Values.compare(b,h)<0?h=b:e.Values.compare(p,b)<0&&(p=b))}else l=w,u=w,h=m,p=m;y=g,g=s,d=c,c=m,u=w,a.call(this,t,n,r)})),null!==g){var w=void 0;w=null!==y?e.Values.compare(d,c)<0?"increasing":e.Values.compare(c,d)<0?"decreasing":"flat":"flat",g.category.setAutoState(w)}this.setXDataDomain(null!==y?s.Domain(l,u):null),this.setYDataDomain(null!==y?s.Domain(h,p):null),Object.defineProperty(this,"gradientStops",{value:v,enumerable:!0,configurable:!0})},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.doHitTest=function(t,e,i){var o=null,n=this.hitMode.state;if("none"!==n){var r=i.renderer;if(r instanceof pr){var a=r.context;a.save(),t*=r.pixelRatio,e*=r.pixelRatio,o="domain"===n?this.hitTestDomain(t,e,r):this.hitTestPlot(t,e,r),a.restore()}}return o},i.prototype.hitTestDomain=function(t,e,i){var o=this.xScale.value;if(null!==o){var n=o.inverse(t/i.pixelRatio-this.viewFrame.xMin),r=this.dataPointFasteners.previousValue(n),a=this.dataPointFasteners.nextValue(n),s=void 0!==r?r.view.x.value:void 0,l=void 0!==a?a.view.x.value:void 0,u=void 0!==s?+n-+s:NaN,h=void 0!==l?+l-+n:NaN;if(u<=h)return r.view;if(u>h)return a.view;if(void 0!==r)return r.view;if(void 0!==a)return a.view}return null},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("line"===t)return new dl;if("area"===t)return new cl;throw new TypeError(""+t)},i.fromInit=function(t){var e=t.plotType;if("line"===e)return dl.fromInit(t);if("area"===e)return cl.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=jo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},dataPointViewDidSetX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},dataPointViewDidSetY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},dataPointViewDidSetY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},dataPointViewDidSetLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([So({type:gt,state:null,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([ho({type:String,state:"domain"})],i.prototype,"hitMode",void 0),m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},onSetValue:function(t,e){this.owner.onSetXScale(t,e)},didSetValue:function(t,e){this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([So({extends:ol,type:s.ContinuousScale,inherit:!0,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},onSetValue:function(t,e){this.owner.onSetYScale(t,e)},didSetValue:function(t,e){this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},onSetState:function(t,e){this.owner.onSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(nr),pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.radius&&this.radius(e.radius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"bubble"},enumerable:!1,configurable:!0}),e.prototype.renderPlot=function(t,e){for(var i=Math.min(e.width,e.height),o=this.radius.getValueOr(r.Length.zero()),n=this.fill.value,a=this.stroke.value,s=this.strokeWidth.value,l=this.dataPointFasteners,u=0,h=l.length;u<h;u+=1){var p=l[u].view;t.beginPath();var d=p.radius.getValueOr(o).pxValue(i);t.arc(p.xCoord,p.yCoord,d,0,2*Math.PI);var c=p.color.getValueOr(n);if(null!==c){var f=p.opacity.value;void 0!==f&&(c=c.alpha(f)),t.fillStyle=c.toString(),t.fill()}null!==a&&(null!==s&&(t.lineWidth=s.pxValue(i)),t.strokeStyle=a.toString(),t.stroke())}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.px(5)})],e.prototype,"radius",void 0),m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"fill",void 0),m([So({type:St,state:null})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null})],e.prototype,"strokeWidth",void 0),e}(ul),dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"line"},enumerable:!1,configurable:!0}),e.prototype.onSetStrokeWidth=function(t,e){if(this.xRangePadding.isAuto()||this.yRangePadding.isAuto()){var i=this.viewFrame,o=Math.min(i.width,i.height),n=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(o)/2;this.xRangePadding.setAutoState([n,n]),this.yRangePadding.setAutoState([n,n])}},e.prototype.renderPlot=function(t,e){var i,o,n,a=Math.min(e.width,e.height),s=this.stroke.getValueOr(St.transparent()),l=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(a),u=this.gradientStops,h=null,p=this.dataPointFasteners;if(p.isEmpty())i=NaN,o=NaN,n=NaN;else{var d=p.firstValue().view,c=p.lastValue().view;i=d.xCoord,o=c.xCoord,n=o-i,0!==u&&(h=t.createLinearGradient(i,0,o,0))}t.beginPath();var f=0;p.forEach((function(e,o){var r=o.view,a=r.xCoord,l=r.yCoord;if(0===f?t.moveTo(a,l):t.lineTo(a,l),null!==h&&r.isGradientStop()){var u=r.color.getValueOr(s),p=r.opacity.value;void 0!==p&&(u=u.alpha(p));var d=(a-i)/(n||1);h.addColorStop(d,u.toString())}f+=1}),this),t.strokeStyle=null!==h?h:s.toString(),t.lineWidth=l,t.stroke()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.hitWidth.state,r=this.strokeWidth.value;if(null!==r){var a=this.viewFrame,s=Math.min(a.width,a.height);n=Math.max(n,r.pxValue(s))}o.beginPath();var l=0;if(this.dataPointFasteners.forEach((function(t,e){var i=e.view,n=i.xCoord,r=i.yCoord;0===l?o.moveTo(n,r):o.lineTo(n,r),l+=1}),this),o.lineWidth=n,o.isPointInStroke(t,e)){var u=this.hitMode.state;if("plot"===u)return this;if("data"===u)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:r.Length.px(1),onSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([ho({type:Number,state:5})],e.prototype,"hitWidth",void 0),e}(hl),cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"area"},enumerable:!1,configurable:!0}),e.prototype.renderPlot=function(t,e){var i,o,n,r=this.fill.getValueOr(St.transparent()),a=this.gradientStops,s=null;t.beginPath();var l=this.dataPointFasteners;if(l.isEmpty())i=NaN,o=NaN,n=NaN;else{var u=l.firstValue().view,h=l.lastValue().view;if(i=u.xCoord,n=(o=h.xCoord)-i,t.moveTo(u.xCoord,u.yCoord),0!==a&&(s=t.createLinearGradient(i,0,o,0),u.isGradientStop())){var p=u.color.getValueOr(r);void 0!==(f=u.opacity.value)&&(p=p.alpha(f)),s.addColorStop(0,p.toString())}}var d=l.values();for(d.next();d.hasNext();){var c=d.next().value.view;if(t.lineTo(c.xCoord,c.yCoord),null!==s&&c.isGradientStop()){var f;p=c.color.value||r;void 0!==(f=c.opacity.value)&&(p=p.alpha(f));var v=(c.xCoord-i)/(n||1);s.addColorStop(v,p.toString())}}for(;d.hasPrevious();){c=d.previous().value.view;t.lineTo(c.xCoord,c.y2Coord)}l.isEmpty()||t.closePath(),t.fillStyle=null!==s?s:r.toString(),t.fill()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.dataPointFasteners;o.beginPath();var r=n.values();if(r.hasNext()){var a=r.next().value.view;o.moveTo(a.xCoord,a.yCoord)}for(;r.hasNext();){a=r.next().value.view;o.lineTo(a.xCoord,a.yCoord)}for(;r.hasPrevious();){a=r.previous().value.view;o.lineTo(a.xCoord,a.y2Coord)}if(n.isEmpty()||o.closePath(),o.isPointInPath(t,e)){var s=this.hitMode.state;if("plot"===s)return this;if("data"===s)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"fill",void 0),e}(hl),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDataSet=function(t){},e.prototype.attachDataSet=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataSet=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.plotTraitWillSetDataSet&&a.plotTraitWillSetDataSet(t,e,i,this)}},e.prototype.onSetDataSet=function(t,e,i){null!==e&&this.detachDataSet(e),null!==t&&(this.attachDataSet(t),this.initDataSet(t))},e.prototype.didSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.plotTraitDidSetDataSet&&a.plotTraitDidSetDataSet(t,e,i,this)}},e.prototype.detectDataSetTrait=function(t){return t instanceof tl?t:null},e.prototype.detectTraits=function(t){if(null===this.dataSet.trait)for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataSetTrait(n);null!==r&&this.dataSet.setTrait(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.dataSet.trait){var o=this.detectDataSetTrait(e);null!==o&&this.dataSet.setTrait(o,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectDataSetTrait(e);null!==i&&this.dataSet.trait===i&&this.dataSet.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.removeTraitConsumer(this)},m([G({type:tl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataSet(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetDataSet(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetDataSet(t,e,i)}})],e.prototype,"dataSet",void 0),e}(st),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(fl),yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(fl),gl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"radius",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"fill",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setRadius=function(t){t=r.Length.fromAny(t);var i=this.radius;e.Equals(t,i)||(this.willSetRadius(t,i),Object.defineProperty(this,"radius",{value:t,enumerable:!0,configurable:!0}),this.onSetRadius(t,i),this.didSetRadius(t,i))},i.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.bubblePlotTraitWillSetRadius&&r.bubblePlotTraitWillSetRadius(t,e,this)}},i.prototype.onSetRadius=function(t,e){},i.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.bubblePlotTraitDidSetRadius&&r.bubblePlotTraitDidSetRadius(t,e,this)}},i.prototype.setFill=function(t){null===t||t instanceof Qt||(t=St.fromAny(t));var i=this.fill;e.Equals(t,i)||(this.willSetFill(t,i),Object.defineProperty(this,"fill",{value:t,enumerable:!0,configurable:!0}),this.onSetFill(t,i),this.didSetFill(t,i))},i.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.bubblePlotTraitWillSetFill&&r.bubblePlotTraitWillSetFill(t,e,this)}},i.prototype.onSetFill=function(t,e){},i.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.bubblePlotTraitDidSetFill&&r.bubblePlotTraitDidSetFill(t,e,this)}},i}(vl),wl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"stroke",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"strokeWidth",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setStroke=function(t){null===t||t instanceof Qt||(t=St.fromAny(t));var i=this.stroke;e.Equals(t,i)||(this.willSetStroke(t,i),Object.defineProperty(this,"stroke",{value:t,enumerable:!0,configurable:!0}),this.onSetStroke(t,i),this.didSetStroke(t,i))},i.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.linePlotTraitWillSetStroke&&r.linePlotTraitWillSetStroke(t,e,this)}},i.prototype.onSetStroke=function(t,e){},i.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.linePlotTraitDidSetStroke&&r.linePlotTraitDidSetStroke(t,e,this)}},i.prototype.setStrokeWidth=function(t){t=r.Length.fromAny(t);var i=this.strokeWidth;e.Equals(t,i)||(this.willSetStrokeWidth(t,i),Object.defineProperty(this,"strokeWidth",{value:t,enumerable:!0,configurable:!0}),this.onSetStrokeWidth(t,i),this.didSetStrokeWidth(t,i))},i.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.linePlotTraitWillSetStrokeWidth&&r.linePlotTraitWillSetStrokeWidth(t,e,this)}},i.prototype.onSetStrokeWidth=function(t,e){},i.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.linePlotTraitDidSetStrokeWidth&&r.linePlotTraitDidSetStrokeWidth(t,e,this)}},i}(yl),ml=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"fill",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setFill=function(t){null===t||t instanceof Qt||(t=St.fromAny(t));var i=this.fill;e.Equals(t,i)||(this.willSetFill(t,i),Object.defineProperty(this,"fill",{value:t,enumerable:!0,configurable:!0}),this.onSetFill(t,i),this.didSetFill(t,i))},i.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.areaPlotTraitWillSetFill&&r.areaPlotTraitWillSetFill(t,e,this)}},i.prototype.onSetFill=function(t,e){},i.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.areaPlotTraitDidSetFill&&r.areaPlotTraitDidSetFill(t,e,this)}},i}(yl),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.createPlot=function(t){return t instanceof gl?new Pl:t instanceof wl?new Vl:t instanceof ml?new Tl:null},m([oa({type:s.Timing,inherit:!0})],e.prototype,"plotTiming",void 0),e}(il),Sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(bl),Cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(bl),Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(tl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){null!==this.plot.view&&(this.setPlotViewRadius(t.radius,t),this.setPlotViewFill(t.fill,t))},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetTrait&&r.plotWillSetTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetTrait&&r.plotDidSetTrait(t,e,this)}},e.prototype.willSetPlotTraitRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.bubblePlotWillSetRadius&&a.bubblePlotWillSetRadius(t,e,this)}},e.prototype.onSetPlotTraitRadius=function(t,e,i){this.setPlotViewRadius(t,i)},e.prototype.didSetPlotTraitRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.bubblePlotDidSetRadius&&a.bubblePlotDidSetRadius(t,e,this)}},e.prototype.willSetPlotTraitFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.bubblePlotWillSetFill&&a.bubblePlotWillSetFill(t,e,this)}},e.prototype.onSetPlotTraitFill=function(t,e,i){this.setPlotViewFill(t,i)},e.prototype.didSetPlotTraitFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.bubblePlotDidSetFill&&a.bubblePlotDidSetFill(t,e,this)}},e.prototype.createPlotView=function(){return pl.create()},e.prototype.initPlotView=function(t){},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;null!==e&&(this.setPlotViewRadius(e.radius,e),this.setPlotViewFill(e.fill,e));for(var i=this.dataPointFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;null!==r&&r.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetView&&r.plotWillSetView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetView&&r.plotDidSetView(t,e,this)}},e.prototype.setPlotViewFill=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),t instanceof Qt?o.fill.setLook(t,i):o.fill.setAutoState(t,i))},e.prototype.setPlotViewRadius=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.radius.setAutoState(t,i))},e.PlotFastener=fa.define({viewType:pl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(o,t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:gl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},bubblePlotTraitWillSetRadius:function(t,e,i){this.owner.willSetPlotTraitRadius(t,e,i)},bubblePlotTraitDidSetRadius:function(t,e,i){this.owner.onSetPlotTraitRadius(t,e,i),this.owner.didSetPlotTraitRadius(t,e,i)},bubblePlotTraitWillSetFill:function(t,e,i){this.owner.willSetPlotTraitFill(t,e,i)},bubblePlotTraitDidSetFill:function(t,e,i){this.owner.onSetPlotTraitFill(t,e,i),this.owner.didSetPlotTraitFill(t,e,i)}}),m([fa({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Sl),Vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(tl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=this.plot.view;null!==o&&e.dataPoint.injectView(o)},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){null!==this.plot.view&&(this.setPlotViewStroke(t.stroke,t),this.setPlotViewStrokeWidth(t.strokeWidth,t))},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetTrait&&r.plotWillSetTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetTrait&&r.plotDidSetTrait(t,e,this)}},e.prototype.willSetPlotTraitStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.linePlotWillSetStroke&&a.linePlotWillSetStroke(t,e,this)}},e.prototype.onSetPlotTraitStroke=function(t,e,i){this.setPlotViewStroke(t,i)},e.prototype.didSetPlotTraitStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.linePlotDidSetStroke&&a.linePlotDidSetStroke(t,e,this)}},e.prototype.willSetPlotTraitStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.linePlotWillSetStrokeWidth&&a.linePlotWillSetStrokeWidth(t,e,this)}},e.prototype.onSetPlotTraitStrokeWidth=function(t,e,i){this.setPlotViewStrokeWidth(t,i)},e.prototype.didSetPlotTraitStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.linePlotDidSetStrokeWidth&&a.linePlotDidSetStrokeWidth(t,e,this)}},e.prototype.createPlotView=function(){return dl.create()},e.prototype.initPlotView=function(t){},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;null!==e&&(this.setPlotViewStroke(e.stroke,e),this.setPlotViewStrokeWidth(e.strokeWidth,e));for(var i=this.dataPointFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;null!==r&&r.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetView&&r.plotWillSetView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetView&&r.plotDidSetView(t,e,this)}},e.prototype.setPlotViewStroke=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),t instanceof Qt?o.stroke.setLook(t,i):o.stroke.setAutoState(t,i))},e.prototype.setPlotViewStrokeWidth=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),o.strokeWidth.setAutoState(t,i))},e.PlotFastener=fa.define({viewType:dl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(o,t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:wl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},linePlotTraitWillSetStroke:function(t,e,i){this.owner.willSetPlotTraitStroke(t,e,i)},linePlotTraitDidSetStroke:function(t,e,i){this.owner.onSetPlotTraitStroke(t,e,i),this.owner.didSetPlotTraitStroke(t,e,i)},linePlotTraitWillSetStrokeWidth:function(t,e,i){this.owner.willSetPlotTraitStrokeWidth(t,e,i)},linePlotTraitDidSetStrokeWidth:function(t,e,i){this.owner.onSetPlotTraitStrokeWidth(t,e,i),this.owner.didSetPlotTraitStrokeWidth(t,e,i)}}),m([fa({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Cl),Tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(tl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){null!==this.plot.view&&this.setPlotViewFill(t.fill,t)},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetTrait&&r.plotWillSetTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetTrait&&r.plotDidSetTrait(t,e,this)}},e.prototype.willSetPlotTraitFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.areaPlotWillSetFill&&a.areaPlotWillSetFill(t,e,this)}},e.prototype.onSetPlotTraitFill=function(t,e,i){this.setPlotViewFill(t,i)},e.prototype.didSetPlotTraitFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.areaPlotDidSetFill&&a.areaPlotDidSetFill(t,e,this)}},e.prototype.createPlotView=function(){return cl.create()},e.prototype.initPlotView=function(t){},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;null!==e&&this.setPlotViewFill(e.fill,e);for(var i=this.dataPointFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;null!==r&&r.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotWillSetView&&r.plotWillSetView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.plotDidSetView&&r.plotDidSetView(t,e,this)}},e.prototype.setPlotViewFill=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=s.Timing.fromAny(i),t instanceof Qt?o.fill.setLook(t,i):o.fill.setAutoState(t,i))},e.PlotFastener=fa.define({viewType:cl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(o,t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:ml,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},areaPlotTraitWillSetFill:function(t,e,i){this.owner.willSetPlotTraitFill(t,e,i)},areaPlotTraitDidSetFill:function(t,e,i){this.owner.onSetPlotTraitFill(t,e,i),this.owner.didSetPlotTraitFill(t,e,i)}}),m([fa({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Cl),Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e);var i=e.plots;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.addPlot(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.addPlot=function(t,e){void 0===e&&"object"==typeof t&&null!==t&&(e=t.key),t=ll.fromAny(t),this.appendChildView(t)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;if(i instanceof pr){var o=i.context;o.save(),this.clipGraph(o,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof pr&&i.context.restore();t.prototype.didRender.call(this,e)},e.prototype.clipGraph=function(t,e){t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);return null===n&&(n=this),n},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(sl),Fl=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"plotFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.trait===t)return;a.trait===e&&(o=n)}var s=this.createPlotFastener(t);i.splice(o,0,s),s.setTrait(t,e),this.isMounted()&&s.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initPlot=function(t,e){},e.prototype.attachPlot=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachPlot=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphTraitWillSetPlot&&s.graphTraitWillSetPlot(t,e,i,this)}},e.prototype.onSetPlot=function(t,e,i,o){null!==e&&this.detachPlot(e,o),null!==t&&(this.attachPlot(t,o),this.initPlot(t,o))},e.prototype.didSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphTraitDidSetPlot&&s.graphTraitDidSetPlot(t,e,i,this)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectPlotModel=function(t){return t.getTrait(fl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectPlotModel(n);null!==r&&this.insertPlot(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectPlotModel(e);if(null!==o){var n=null!==i?this.detectPlotModel(i):null;this.insertPlot(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectPlotModel(e);null!==i&&this.removePlot(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingPlots()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingPlots()},e.PlotFastener=G.define({type:fl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetPlot(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetPlot(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetPlot(t,e,i,this)}}),e}(st),Ml=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"plotFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initGraphTrait=function(t){},e.prototype.attachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertPlotTrait(n)}},e.prototype.detachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removePlotTrait(n)}},e.prototype.willSetGraphTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.graphWillSetTrait&&r.graphWillSetTrait(t,e,this)}},e.prototype.onSetGraphTrait=function(t,e){null!==e&&this.detachGraphTrait(e),null!==t&&(this.attachGraphTrait(t),this.initGraphTrait(t))},e.prototype.didSetGraphTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.graphDidSetTrait&&r.graphDidSetTrait(t,e,this)}},e.prototype.createGraphView=function(){return Al.create()},e.prototype.initGraphView=function(t){},e.prototype.themeGraphView=function(t,e,i,o){},e.prototype.attachGraphView=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.plot.view;null!==r&&null===r.parentView&&n.plot.injectView(t)}}},e.prototype.detachGraphView=function(t){},e.prototype.willSetGraphView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.graphWillSetView&&r.graphWillSetView(t,e,this)}},e.prototype.onSetGraphView=function(t,e){null!==e&&this.detachGraphView(e),null!==t&&(this.attachGraphView(t),this.initGraphView(t))},e.prototype.didSetGraphView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.graphDidSetView&&r.graphDidSetView(t,e,this)}},e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a.component===t)return;a.component===e&&(o=n)}var s=this.createPlotFastener(t);i.splice(o,0,s),s.setComponent(t,e),this.isMounted()&&s.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createPlot=function(t){return bl.createPlot(t)},e.prototype.initPlot=function(t,e){var i=t.plot.trait;null!==i&&this.initPlotTrait(i,e);var o=t.plot.view;null!==o&&this.initPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.initDataSetTrait(n,e)},e.prototype.attachPlot=function(t,e){var i=t.plot.trait;null!==i&&this.attachPlotTrait(i,e);var o=t.plot.view;null!==o&&this.attachPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.attachDataSetTrait(n,e)},e.prototype.detachPlot=function(t,e){var i=t.dataSet.trait;null!==i&&this.detachDataSetTrait(i,e);var o=t.plot.view;null!==o&&this.detachPlotView(o,e);var n=t.plot.trait;null!==n&&this.detachPlotTrait(n,e)},e.prototype.willSetPlot=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphWillSetPlot&&a.graphWillSetPlot(t,e,i)}},e.prototype.onSetPlot=function(t,e,i){null!==e&&this.detachPlot(e,i),null!==t&&(this.attachPlot(t,i),this.initPlot(t,i))},e.prototype.didSetPlot=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphDidSetPlot&&a.graphDidSetPlot(t,e,i)}},e.prototype.insertPlotTrait=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n].component;if(null!==a){if(a.plot.trait===t)return;a.plot.trait===e&&(o=a)}}var s=this.createPlot(t);if(null!==s&&(s.plot.setTrait(t),this.insertChildComponent(s,o),null===s.plot.view)){var l=this.createPlotView(s),u=null;null!==o&&(u=o.plot.view);var h=this.graph.view;null!==h?s.plot.injectView(h,l,u,null):s.plot.setView(l,u)}},e.prototype.removePlotTrait=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.plot.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initPlotTrait=function(t,e){},e.prototype.attachPlotTrait=function(t,e){},e.prototype.detachPlotTrait=function(t,e){},e.prototype.willSetPlotTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphWillSetPlotTrait&&a.graphWillSetPlotTrait(t,e,i)}},e.prototype.onSetPlotTrait=function(t,e,i){null!==e&&this.detachPlotTrait(e,i),null!==t&&(this.attachPlotTrait(t,i),this.initPlotTrait(t,i))},e.prototype.didSetPlotTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphDidSetPlotTrait&&a.graphDidSetPlotTrait(t,e,i)}},e.prototype.createPlotView=function(t){return t.plot.createView()},e.prototype.initPlotView=function(t,e){},e.prototype.attachPlotView=function(t,e){},e.prototype.detachPlotView=function(t,e){t.remove()},e.prototype.willSetPlotView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphWillSetPlotView&&a.graphWillSetPlotView(t,e,i)}},e.prototype.onSetPlotView=function(t,e,i){null!==e&&this.detachPlotView(e,i),null!==t&&(this.attachPlotView(t,i),this.initPlotView(t,i))},e.prototype.didSetPlotView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphDidSetPlotView&&a.graphDidSetPlotView(t,e,i)}},e.prototype.initDataSetTrait=function(t,e){},e.prototype.attachDataSetTrait=function(t,e){},e.prototype.detachDataSetTrait=function(t,e){},e.prototype.willSetDataSetTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphWillSetDataSetTrait&&a.graphWillSetDataSetTrait(t,e,i)}},e.prototype.onSetDataSetTrait=function(t,e,i){null!==e&&this.detachDataSetTrait(e,i),null!==t&&(this.attachDataSetTrait(t,i),this.initDataSetTrait(t,i))},e.prototype.didSetDataSetTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.graphDidSetDataSetTrait&&a.graphDidSetDataSetTrait(t,e,i)}},e.prototype.initDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.initDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.initDataPointView(n,e,i)},e.prototype.attachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.attachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.attachDataPointView(n,e,i)},e.prototype.detachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.detachDataPointView(n,e,i)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphWillSetDataPoint&&s.graphWillSetDataPoint(t,e,i,o)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,i,o),null!==t&&(this.attachDataPoint(t,i,o),this.initDataPoint(t,i,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphDidSetDataPoint&&s.graphDidSetDataPoint(t,e,i,o)}},e.prototype.initDataPointTrait=function(t,e,i){},e.prototype.attachDataPointTrait=function(t,e,i){},e.prototype.detachDataPointTrait=function(t,e,i){},e.prototype.willSetDataPointTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphWillSetDataPointTrait&&s.graphWillSetDataPointTrait(t,e,i,o)}},e.prototype.onSetDataPointTrait=function(t,e,i,o){null!==e&&this.detachDataPointTrait(e,i,o),null!==t&&(this.attachDataPointTrait(t,i,o),this.initDataPointTrait(t,i,o))},e.prototype.didSetDataPointTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphDidSetDataPointTrait&&s.graphDidSetDataPointTrait(t,e,i,o)}},e.prototype.initDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.initDataPointLabelView(o,e,i)},e.prototype.attachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.attachDataPointLabelView(o,e,i)},e.prototype.detachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.detachDataPointLabelView(o,e,i)},e.prototype.willSetDataPointView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphWillSetDataPointView&&s.graphWillSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointView=function(t,e,i,o){null!==e&&this.detachDataPointView(e,i,o),null!==t&&(this.attachDataPointView(t,i,o),this.initDataPointView(t,i,o))},e.prototype.didSetDataPointView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphDidSetDataPointView&&s.graphDidSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointViewX=function(t,e,i,o){},e.prototype.onSetDataPointViewY=function(t,e,i,o){},e.prototype.onSetDataPointViewY2=function(t,e,i,o){},e.prototype.onSetDataPointViewRadius=function(t,e,i,o){},e.prototype.initDataPointLabelView=function(t,e,i){},e.prototype.attachDataPointLabelView=function(t,e,i){},e.prototype.detachDataPointLabelView=function(t,e,i){},e.prototype.willSetDataPointLabelView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphWillSetDataPointLabelView&&s.graphWillSetDataPointLabelView(t,e,i,o)}},e.prototype.onSetDataPointLabelView=function(t,e,i,o){null!==e&&this.detachDataPointLabelView(e,i,o),null!==t&&(this.attachDataPointLabelView(t,i,o),this.initDataPointLabelView(t,i,o))},e.prototype.didSetDataPointLabelView=function(t,e,i,o){for(var n=this.componentObservers,r=0,a=n.length;r<a;r+=1){var s=n[r];void 0!==s.graphDidSetDataPointLabelView&&s.graphDidSetDataPointLabelView(t,e,i,o)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.getPlotFastener=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.plot.trait===t)return n}return null},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectPlotComponent=function(t){return t instanceof bl?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectPlotComponent(e);null!==o&&this.insertPlot(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectPlotComponent(e);null!==i&&this.removePlot(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GraphFastener=fa.define({viewType:Al,observeView:!0,willSetView:function(t,e){this.owner.willSetGraphView(t,e)},onSetView:function(t,e){this.owner.onSetGraphView(t,e)},didSetView:function(t,e){this.owner.didSetGraphView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGraphView(o,t,e,i)},createView:function(){return this.owner.createGraphView()},traitType:Fl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGraphTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGraphTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGraphTrait(t,e)},graphTraitWillSetPlot:function(t,e,i){null!==e&&this.owner.removePlotTrait(e)},graphTraitDidSetPlot:function(t,e,i){null!==t&&this.owner.insertPlotTrait(t,i)}}),e.PlotFastener=ya.define({type:bl,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetPlot(t,e,this)},onSetComponent:function(t,e){this.owner.onSetPlot(t,e,this)},didSetComponent:function(t,e){this.owner.didSetPlot(t,e,this)},plotWillSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e,this)},plotDidSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e,this),this.owner.didSetPlotTrait(t,e,this)},plotWillSetView:function(t,e){this.owner.willSetPlotView(t,e,this)},plotDidSetView:function(t,e){this.owner.onSetPlotView(t,e,this),this.owner.didSetPlotView(t,e,this)},dataSetWillSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e,this)},dataSetDidSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e,this),this.owner.didSetDataSetTrait(t,e,this)},dataSetWillSetDataPoint:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},dataSetDidSetDataPoint:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this),this.owner.didSetDataPoint(t,e,i,this)},dataSetWillSetDataPointTrait:function(t,e,i){this.owner.willSetDataPointTrait(t,e,i,this)},dataSetDidSetDataPointTrait:function(t,e,i){this.owner.onSetDataPointTrait(t,e,i,this),this.owner.didSetDataPointTrait(t,e,i,this)},dataSetWillSetDataPointView:function(t,e,i){this.owner.willSetDataPointView(t,e,i,this)},dataSetDidSetDataPointView:function(t,e,i){this.owner.onSetDataPointView(t,e,i,this),this.owner.didSetDataPointView(t,e,i,this)},dataSetDidSetDataPointViewX:function(t,e,i){this.owner.onSetDataPointViewX(t,e,i,this)},dataSetDidSetDataPointViewY:function(t,e,i){this.owner.onSetDataPointViewY(t,e,i,this)},dataSetDidSetDataPointViewY2:function(t,e,i){this.owner.onSetDataPointViewY2(t,e,i,this)},dataSetDidSetDataPointViewRadius:function(t,e,i){this.owner.onSetDataPointViewRadius(t,e,i,this)},dataSetWillSetDataPointLabelView:function(t,e,i){this.owner.willSetDataPointLabelView(t,e,i,this)},dataSetDidSetDataPointLabelView:function(t,e,i){this.owner.onSetDataPointLabelView(t,e,i,this),this.owner.didSetDataPointLabelView(t,e,i,this)}}),m([fa({extends:e.GraphFastener})],e.prototype,"graph",void 0),e}(ma),Ol=Math.sqrt(50),xl=Math.sqrt(10),Dl=Math.sqrt(2),Rl=1e3,Ll=6e4,kl=36e5,jl=24*kl,Il=30*jl,El=365*jl,Wl=(new h.BTree).set(Rl,l.TimeInterval.second).set(5e3,l.TimeInterval.second.every(5)).set(15e3,l.TimeInterval.second.every(15)).set(3e4,l.TimeInterval.second.every(30)).set(Ll,l.TimeInterval.minute).set(3e5,l.TimeInterval.minute.every(5)).set(9e5,l.TimeInterval.minute.every(15)).set(18e5,l.TimeInterval.minute.every(30)).set(kl,l.TimeInterval.hour).set(3*kl,l.TimeInterval.hour.every(3)).set(6*kl,l.TimeInterval.hour.every(6)).set(12*kl,l.TimeInterval.hour.every(12)).set(jl,l.TimeInterval.day).set(2*jl,l.TimeInterval.day.every(2)).set(6048e5,l.TimeInterval.week).set(Il,l.TimeInterval.month).set(3*Il,l.TimeInterval.month.every(3)).set(El,l.TimeInterval.year),Nl=l.DateTimeFormat.pattern(".%L"),Ul=l.DateTimeFormat.pattern(":%S"),Bl=l.DateTimeFormat.pattern("%I:%M"),Hl=l.DateTimeFormat.pattern("%I %p"),ql=l.DateTimeFormat.pattern("%a %d"),zl=l.DateTimeFormat.pattern("%b %d"),Yl=l.DateTimeFormat.pattern("%B"),Xl=l.DateTimeFormat.pattern("%Y"),Gl=function(){function t(){}return t.prototype.format=function(t){return""+t},t.fromScale=function(t,e){if(void 0===e&&(e=10),t instanceof l.TimeScale){var i=t.domain;return new Zl(i[0],i[1],e)}if(t instanceof s.LinearScale){i=t.domain;return new Kl(i[0],i[1],e)}throw new TypeError(""+t)},t.step=function(t,e){var i=Math.abs(t)/e,o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),n=i/o;return n>=Ol?o*=10:n>=xl?o*=5:n>=Dl&&(o*=2),t<0?-o:o},t}(),Kl=function(t){function e(e,i,o){var n=t.call(this)||this;return n.x0=e,n.dx=i-n.x0,n.n=Math.max(0,o),n}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?s.LinearDomain(this.x0,this.x0+this.dx):void 0===e?(this.x0=t[0],this.dx=t[1]-this.x0,this):(this.x0=t,this.dx=e-this.x0,this)},e.prototype.generate=function(){var t,i;this.dx<0?t=(i=this.x0)+this.dx:i=(t=this.x0)+this.dx;var o,n=e.interval(i-t,this.n);if(0===n||!isFinite(n))return[];if(n>0){t=Math.ceil(t/n),i=Math.floor(i/n);var r=Math.ceil(i-t+1);o=new Array(r);for(var a=0;a<r;a+=1)o[a]=(t+a)*n}else{t=Math.floor(t*n),i=Math.ceil(i*n);r=Math.ceil(t-i+1);o=new Array(r);for(a=0;a<r;a+=1)o[a]=(t-a)/n}return this.dx<0&&o.reverse(),o},e.interval=function(t,e){void 0===e&&(e=10);var i=t/e,o=Math.floor(Math.log(i)/Math.LN10),n=Math.pow(10,o),r=i/n,a=r>=Ol?10:r>=xl?5:r>=Dl?2:1;return o>=0?n*a:-Math.pow(10,-o)/a},e}(Gl),Zl=function(t){function e(e,i,o,n){var r=t.call(this)||this,a=l.DateTime.fromAny(e),s=l.DateTime.fromAny(i);return r.t0=a.time,r.dt=s.time-r.t0,r.zone=void 0!==n?n:a.zone,r.n=Math.max(0,o),r}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?l.TimeDomain(new l.DateTime(this.t0,this.zone),new l.DateTime(this.t0+this.dt,this.zone)):(void 0===e?(e=t[1],t=t[0]):t=t,t=l.DateTime.fromAny(t),e=l.DateTime.fromAny(e),this.t0=t.time,this.dt=e.time-this.t0,this)},e.prototype.generate=function(t){var i,o;this.dt<0?i=(o=this.t0)+this.dt:o=(i=this.t0)+this.dt,void 0===t&&(t=this.n);var n=(t=e.interval(o-i,t)).range(new l.DateTime(i,this.zone),new l.DateTime(o+1,this.zone));return this.dt<0&&n.reverse(),n},e.prototype.format=function(t){return l.TimeInterval.second.floor(t)<t?Nl.format(t):l.TimeInterval.minute.floor(t)<t?Ul.format(t):l.TimeInterval.hour.floor(t)<t?Bl.format(t):l.TimeInterval.day.floor(t)<t?Hl.format(t):l.TimeInterval.month.floor(t)<t?l.TimeInterval.week.floor(t)<t?ql.format(t):zl.format(t):l.TimeInterval.year.floor(t)<t?Yl.format(t):Xl.format(t)},e.interval=function(t,e){if(void 0===e&&(e=10),"number"==typeof e){var i=Math.abs(t)/e,o=Wl.nextKey(i);if(void 0===o){var n=Gl.step(t/El,e);e=l.TimeInterval.year.every(n)}else if(o>Rl)e=i/Wl.previousKey(i)<o/i?Wl.previousValue(i):Wl.nextValue(i);else{n=Math.max(1,Gl.step(t,e));e=l.TimeInterval.millisecond.every(n)}}return e},e}(Gl);t.TickState=void 0,(ks=t.TickState||(t.TickState={}))[ks.Excluded=0]="Excluded",ks[ks.Entering=1]="Entering",ks[ks.Included=2]="Included",ks[ks.Leaving=3]="Leaving";var _l=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"value",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"offset",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"tickState",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"preserved",{value:!0,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label)},e.prototype.setOffset=function(t){Object.defineProperty(this,"offset",{value:t,enumerable:!0,configurable:!0})},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.tickViewWillSetLabel&&i.tickViewWillSetLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.tickViewWillSetLabel&&a.tickViewWillSetLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tickViewDidSetLabel&&r.tickViewDidSetLabel(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.tickViewDidSetLabel&&a.tickViewDidSetLabel(t,e,this)},e.prototype.preserve=function(t){return void 0===t?this.preserved:(Object.defineProperty(this,"preserved",{value:t,enumerable:!0,configurable:!0}),this)},e.prototype.fadeIn=function(t){0!==this.tickState&&3!==this.tickState||(this.opacity.setState(1,t),Object.defineProperty(this,"tickState",{value:1,enumerable:!0,configurable:!0}))},e.prototype.fadeOut=function(t){1!==this.tickState&&2!==this.tickState||(this.opacity.setState(0,t),Object.defineProperty(this,"tickState",{value:3,enumerable:!0,configurable:!0}))},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label.view;null!==i&&this.layoutLabel(i)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof pr&&i.context.save()},e.prototype.onRender=function(t){var e=t.renderer;if(e instanceof pr&&!this.isHidden()&&!this.isCulled()){var i=e.context;i.globalAlpha=this.opacity.getValue(),this.renderTick(i,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof pr&&i.context.restore();t.prototype.didRender.call(this,e)},e.top=function(t){return new Ql(t)},e.right=function(t){return new Jl(t)},e.bottom=function(t){return new $l(t)},e.left=function(t){return new tu(t)},e.from=function(t,e){if("top"===e)return this.top(t);if("right"===e)return this.right(t);if("bottom"===e)return this.bottom(t);if("left"===e)return this.left(t);throw new TypeError(e)},e.fromInit=function(t,e){if(void 0!==t.orientation&&(e=t.orientation),void 0===e)throw new TypeError;var i=this.from(t.value,e);return i.initView(t),i},e.fromAny=function(t,i){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t,i);throw new TypeError(""+t)},m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"anchor",void 0),m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([So({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),m([jo({key:!0,type:Vr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Vr?(this.view.text(t),this.view):Vr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(ar),Ql=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Cr.is(t)&&(t.textAlign.setAutoState("center"),t.textBaseline.setAutoState("bottom"),t.textOrigin.setAutoState(new r.PointR2(i,o)))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),a=n-r,s=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==s&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=s.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(o,a),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(o,e.yMax),t.stroke())},e}(_l),Jl=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Cr.is(t)&&(t.textAlign.setAutoState("left"),t.textBaseline.setAutoState("middle"),t.textOrigin.setAutoState(new r.PointR2(n,o)))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),a=o+r,s=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==s&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=s.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(a,n),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(e.xMin,n),t.stroke())},e}(_l),$l=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Cr.is(t)&&(t.textAlign.setAutoState("center"),t.textBaseline.setAutoState("top"),t.textOrigin.setAutoState(new r.PointR2(i,o)))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),a=n+r,s=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==s&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=s.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(o,a),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(o,e.yMin),t.stroke())},e}(_l),tu=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Cr.is(t)&&(t.textAlign.setAutoState("right"),t.textBaseline.setAutoState("middle"),t.textOrigin.setAutoState(new r.PointR2(n,o)))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),a=o-r,s=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==s&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=s.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(a,n),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(e.xMax,n),t.stroke())},e}(_l),eu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"ticks",{value:new h.BTree,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.scale&&this.scale(e.scale);var i=e.ticks;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertTick(i[o]);void 0!==e.tickGenerator&&this.tickGenerator(e.tickGenerator),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkSpacing&&this.tickMarkSpacing(e.tickMarkSpacing),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.getTick=function(t){var e=this.ticks.get(t);return void 0!==e?e:null},e.prototype.insertTick=function(t){return(t=_l.fromAny(t,this.orientation)).remove(),this.willInsertChildView(t,null),this.ticks.set(t.value,t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),t},e.prototype.removeTick=function(t){var e=this.ticks.get(t);if(void 0!==e){if(e.parentView!==this)throw new Error("not a child view");return this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),e}return null},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.ticks.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.ticks.forEachValue((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.ticks.firstValue();return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.ticks.lastValue();return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t instanceof _l){var e=this.ticks.nextValue(t.value);if(void 0!==e)return e}return null},e.prototype.previousChildView=function(t){if(t instanceof _l){var e=this.ticks.previousValue(t.value);if(void 0!==e)return e}return null},e.prototype.forEachChildView=function(t,e){return this.ticks.forEachValue(t,e)},e.prototype.getChildView=function(t){return null},e.prototype.setChildView=function(t,e){throw new Error("unsupported")},e.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof _l))throw new TypeError(""+t);this.insertTick(t)},e.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof _l))throw new TypeError(""+t);this.insertTick(t)},e.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof _l))throw new TypeError(""+t);this.insertTick(t)},e.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof _l))throw new TypeError(""+t);this.removeTick(t.value)},e.prototype.removeAll=function(){this.ticks.forEach((function(t,e){this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0)}),this)},e.prototype.updateTicks=function(){var t=this.scale.value,e=this.tickGenerator.state;if(null!==t&&null!==e){var i=this.tickTransition.state;!0===e&&(e=Gl.fromScale(t),this.tickGenerator.setState(e),i=!1),this.generateTicks(e,t,i)}},e.prototype.generateTicks=function(t,e,i){var o=this.tickMarkSpacing.getValue();if(0!==o){var n=e.range,r=Math.abs(n[1]-n[0]),a=Math.max(1,Math.floor(r/o));t.count(a)}t.domain(e.domain);var s=this.ticks.clone(),l=t.generate(),u=0;for(a=l.length;u<a;u+=1){var h=l[u],p=s.get(h);if(void 0!==p)s.delete(h),p.fadeIn(i);else{var d=this.createTickView(h);null!==d&&(this.insertTick(d),Object.defineProperty(d.opacity,"ownValue",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(d.opacity,"ownState",{value:0,enumerable:!0,configurable:!0}),d.fadeIn(i))}}s.forEachValue((function(t){t.preserved||t.fadeOut(i)}),this)},e.prototype.createTickView=function(t){var e=_l.from(t,this.orientation);if(null!==e){var i=this.createTickLabel(t,e);null!==i&&(e.label(i),e.preserve(!1))}return e},e.prototype.createTickLabel=function(t,e){var i=null,o=this.viewController;null!==o&&void 0!==o.createTickLabel&&(i=o.createTickLabel(t,e,this));for(var n=this.viewObservers,r=0,a=n.length;r<a&&null==i;r+=1){var s=n[r];void 0!==s.createTickLabel&&(i=s.createTickLabel(t,e,this))}if(null==i){var l=this.tickGenerator.state;i=l instanceof Gl?l.format(t):""+t}return"string"==typeof i&&(i=this.formatTickLabel(i,e)),i},e.prototype.formatTickLabel=function(t,e){var i=this.viewController;if(null!==i&&void 0!==i.formatTickLabel&&void 0!==(a=i.formatTickLabel(t,e,this)))return a;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a,s=o[n];if(void 0!==s.formatTickLabel)if(void 0!==(a=s.formatTickLabel(t,e,this)))return a}return t},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Gi.NeedsLayout)&&(t&=~Gi.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.scale.isInherited()&&this.scale.isAnimating()&&this.scale.onAnimate(e.updateTime),this.updateTicks()},e.prototype.willDisplayChildView=function(e,i,o){if(t.prototype.willDisplayChildView.call(this,e,i,o),0!=(i&Gi.NeedsLayout)&&e instanceof _l){var n=this.scale.value;null!==n&&this.layoutTick(e,this.origin.getValue(),this.viewFrame,n)}},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof pr&&i.context.save()},e.prototype.didRender=function(e){var i=e.renderer;if(i instanceof pr){var o=i.context;this.renderDomain(o,this.origin.getValue(),this.viewFrame),o.restore()}t.prototype.didRender.call(this,e)},e.fromInit=function(t){var e=t.orientation;if("top"===e)return iu.fromInit(t);if("right"===e)return ou.fromInit(t);if("bottom"===e)return nu.fromInit(t);if("left"===e)return ru.fromInit(t);throw new Error("unknown axis orientation: "+e)},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t){var i=t.orientation;if("top"===i)return iu.fromAny(t);if("right"===i)return ou.fromAny(t);if("bottom"===i)return nu.fromAny(t);if("left"===i)return ru.fromAny(t);throw new Error("unknown axis orientation: "+i)}throw new TypeError(""+t)},m([ho({type:Gl,state:!0})],e.prototype,"tickGenerator",void 0),m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"origin",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"borderColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"borderWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"borderSerif",void 0),m([So({type:Number,state:80})],e.prototype,"tickMarkSpacing",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([ho({type:s.Timing,inherit:!0,initState:function(){return s.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([So({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(nr),iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.isAuto()){var n=o(t.value);t.setOffset(n),t.anchor.setAutoState(new r.PointR2(i.xMin+n,e.y))}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,a=i.xMax,s=e.y,l=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==l?(t.moveTo(r,s-l),t.lineTo(r,s),t.lineTo(a,s),t.lineTo(a,s-l)):(t.moveTo(r,s),t.lineTo(a,s)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof eu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:ol,type:s.ContinuousScale,inherit:"xScale",updateFlags:Gi.NeedsLayout})],e.prototype,"scale",void 0),e}(eu),ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.isAuto()){var n=o(t.value);t.setOffset(n),t.anchor.setAutoState(new r.PointR2(e.x,i.yMin+n))}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,a=this.borderSerif.getValue(),s=i.yMin,l=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==a?(t.moveTo(r+a,s),t.lineTo(r,s),t.lineTo(r,l),t.lineTo(r+a,l)):(t.moveTo(r,s),t.lineTo(r,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof eu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:ol,type:s.ContinuousScale,inherit:"yScale",updateFlags:Gi.NeedsLayout})],e.prototype,"scale",void 0),e}(eu),nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.isAuto()){var n=o(t.value);t.setOffset(n),t.anchor.setAutoState(new r.PointR2(i.xMin+n,e.y))}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,a=i.xMax,s=e.y,l=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==l?(t.moveTo(r,s+l),t.lineTo(r,s),t.lineTo(a,s),t.lineTo(a,s+l)):(t.moveTo(r,s),t.lineTo(a,s)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof eu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:ol,type:s.ContinuousScale,inherit:"xScale",updateFlags:Gi.NeedsLayout})],e.prototype,"scale",void 0),e}(eu),ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.isAuto()){var n=o(t.value);t.setOffset(n),t.anchor.setAutoState(new r.PointR2(e.x,i.yMin+n))}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,a=this.borderSerif.getValue(),s=i.yMin,l=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==a?(t.moveTo(r-a,s),t.lineTo(r,s),t.lineTo(r,l),t.lineTo(r-a,l)):(t.moveTo(r,s),t.lineTo(r,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof eu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:ol,type:s.ContinuousScale,inherit:"yScale",updateFlags:Gi.NeedsLayout})],e.prototype,"scale",void 0),e}(eu),au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(st),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initAxisTrait=function(t){},e.prototype.attachAxisTrait=function(t){},e.prototype.detachAxisTrait=function(t){},e.prototype.willSetAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.axisWillSetTrait&&r.axisWillSetTrait(t,e,this)}},e.prototype.onSetAxisTrait=function(t,e){null!==e&&this.detachAxisTrait(e),null!==t&&(this.attachAxisTrait(t),this.initAxisTrait(t))},e.prototype.didSetAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.axisDidSetTrait&&r.axisDidSetTrait(t,e,this)}},e.prototype.initAxisView=function(t){},e.prototype.themeAxisView=function(t,e,i,o){},e.prototype.attachAxisView=function(t){},e.prototype.detachAxisView=function(t){},e.prototype.willSetAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.axisWillSetView&&r.axisWillSetView(t,e,this)}},e.prototype.onSetAxisView=function(t,e){null!==e&&this.detachAxisView(e),null!==t&&(this.attachAxisView(t),this.initAxisView(t))},e.prototype.didSetAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.axisDidSetView&&r.axisDidSetView(t,e,this)}},e.prototype.createAxis=function(t){return t instanceof su?new du:t instanceof lu?new cu:t instanceof uu?new fu:t instanceof hu?new vu:null},e.AxisFastener=fa.define({observeView:!0,willSetView:function(t,e){this.owner.willSetAxisView(t,e)},onSetView:function(t,e){this.owner.onSetAxisView(t,e)},didSetView:function(t,e){this.owner.didSetAxisView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeAxisView(o,t,e,i)},createView:function(){return this.owner.createAxisView()},traitType:au,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetAxisTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetAxisTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetAxisTrait(t,e)}}),m([fa({extends:e.AxisFastener})],e.prototype,"axis",void 0),e}(ma),du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return iu.create()},e}(pu),cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return ou.create()},e}(pu),fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return nu.create()},e}(pu),vu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return ru.create()},e}(pu),yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.graph&&this.graph(e.graph),void 0!==e.topAxis&&this.topAxis(e.topAxis),void 0!==e.rightAxis&&this.rightAxis(e.rightAxis),void 0!==e.bottomAxis&&this.bottomAxis(e.bottomAxis),void 0!==e.leftAxis&&this.leftAxis(e.leftAxis),void 0!==e.gutterTop&&this.gutterTop(e.gutterTop),void 0!==e.gutterRight&&this.gutterRight(e.gutterRight),void 0!==e.gutterBottom&&this.gutterBottom(e.gutterBottom),void 0!==e.gutterLeft&&this.gutterLeft(e.gutterLeft),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.xRange=function(){var t=this.viewFrame,e=this.gutterLeft.getValue().pxValue(t.width),i=this.gutterRight.getValue().pxValue(t.width),o=this.xRangePadding.state,n=o[0],r=this.viewFrame.width-i-e-o[1];return s.LinearRange(n,r)},e.prototype.yRange=function(){var t=this.viewFrame,e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterBottom.getValue().pxValue(t.height),o=this.yRangePadding.state,n=o[0],r=this.viewFrame.height-i-e-o[1];return s.LinearRange(n,r)},e.prototype.createGraph=function(){return new Al},e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){},e.prototype.detachGraph=function(t){},e.prototype.willSetGraph=function(t,e){var i=this.viewController;null!==i&&void 0!==i.chartViewWillSetGraph&&i.chartViewWillSetGraph(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartViewWillSetGraph&&a.chartViewWillSetGraph(t,e,this)}},e.prototype.onSetGraph=function(t,e){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartViewDidSetGraph&&r.chartViewDidSetGraph(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.chartViewDidSetGraph&&a.chartViewDidSetGraph(t,e,this)},e.prototype.createTopAxis=function(){return new iu},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){},e.prototype.detachTopAxis=function(t){},e.prototype.willSetTopAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.chartViewWillSetTopAxis&&i.chartViewWillSetTopAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartViewWillSetTopAxis&&a.chartViewWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartViewDidSetTopAxis&&r.chartViewDidSetTopAxis(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.chartViewDidSetTopAxis&&a.chartViewDidSetTopAxis(t,e,this)},e.prototype.createRightAxis=function(){return new ou},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){},e.prototype.detachRightAxis=function(t){},e.prototype.willSetRightAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.chartViewWillSetRightAxis&&i.chartViewWillSetRightAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartViewWillSetRightAxis&&a.chartViewWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartViewDidSetRightAxis&&r.chartViewDidSetRightAxis(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.chartViewDidSetRightAxis&&a.chartViewDidSetRightAxis(t,e,this)},e.prototype.createBottomAxis=function(){return new nu},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){},e.prototype.detachBottomAxis=function(t){},e.prototype.willSetBottomAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.chartViewWillSetBottomAxis&&i.chartViewWillSetBottomAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartViewWillSetBottomAxis&&a.chartViewWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartViewDidSetBottomAxis&&r.chartViewDidSetBottomAxis(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.chartViewDidSetBottomAxis&&a.chartViewDidSetBottomAxis(t,e,this)},e.prototype.createLeftAxis=function(){return new ru},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){},e.prototype.detachLeftAxis=function(t){},e.prototype.willSetLeftAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.chartViewWillSetLeftAxis&&i.chartViewWillSetLeftAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartViewWillSetLeftAxis&&a.chartViewWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartViewDidSetLeftAxis&&r.chartViewDidSetLeftAxis(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.chartViewDidSetLeftAxis&&a.chartViewDidSetLeftAxis(t,e,this)},e.prototype.detectGraphView=function(t){return t instanceof Al?t:null},e.prototype.detectTopAxisView=function(t){return t instanceof iu?t:null},e.prototype.detectRightAxisView=function(t){return t instanceof ou?t:null},e.prototype.detectBottomAxisView=function(t){return t instanceof nu?t:null},e.prototype.detectLeftAxisView=function(t){return t instanceof ru?t:null},e.prototype.onInsertChildView=function(e,i){if(t.prototype.onInsertChildView.call(this,e,i),null===this.graph.view){var o=this.detectGraphView(e);null!==o&&this.graph.setView(o,i)}if(null===this.topAxis.view){var n=this.detectTopAxisView(e);null!==n&&this.topAxis.setView(n,i)}if(null===this.rightAxis.view){var r=this.detectRightAxisView(e);null!==r&&this.rightAxis.setView(r,i)}if(null===this.bottomAxis.view){var a=this.detectBottomAxisView(e);null!==a&&this.bottomAxis.setView(a,i)}if(null===this.leftAxis.view){var s=this.detectLeftAxisView(e);null!==s&&this.leftAxis.setView(s,i)}},e.prototype.onRemoveChildView=function(e){if(t.prototype.onRemoveChildView.call(this,e),null===this.graph.view){var i=this.detectGraphView(e);null!==i&&this.graph.view===i&&this.graph.setView(null)}if(null===this.topAxis.view){var o=this.detectTopAxisView(e);null!==o&&this.topAxis.view===o&&this.topAxis.setView(null)}if(null===this.rightAxis.view){var n=this.detectRightAxisView(e);null!==n&&this.rightAxis.view===n&&this.rightAxis.setView(null)}if(null===this.bottomAxis.view){var r=this.detectBottomAxisView(e);null!==r&&this.bottomAxis.view===r&&this.bottomAxis.setView(null)}if(null===this.leftAxis.view){var a=this.detectLeftAxisView(e);null!==a&&this.leftAxis.view===a&&this.leftAxis.setView(null)}},e.prototype.updateScales=function(){this.layoutChart(this.viewFrame),t.prototype.updateScales.call(this)},e.prototype.layoutChart=function(t){var e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterRight.getValue().pxValue(t.width),o=this.gutterBottom.getValue().pxValue(t.height),n=this.gutterLeft.getValue().pxValue(t.width),a=t.yMin+e,s=t.xMax-i,l=t.yMax-o,u=t.xMin+n,h=this.topAxis.view;if(null!==h){var p=h.viewFrame;p.xMin===u&&p.yMin===t.yMin&&p.xMax===s&&p.yMax===l||(h.setViewFrame(new r.BoxR2(u,t.yMin,s,l)),h.origin.setAutoState(new r.PointR2(u,a)),h.requireUpdate(Gi.NeedsLayout))}var d=this.rightAxis.view;if(null!==d){var c=d.viewFrame;c.xMin===u&&c.yMin===a&&c.xMax===t.xMax&&c.yMax===l||(d.setViewFrame(new r.BoxR2(u,a,t.xMax,l)),d.origin.setAutoState(new r.PointR2(Math.max(u,s),l)),d.requireUpdate(Gi.NeedsLayout))}var f=this.bottomAxis.view;if(null!==f){var v=f.viewFrame;v.xMin===u&&v.yMin===a&&v.xMax===s&&v.yMax===t.yMax||(f.setViewFrame(new r.BoxR2(u,a,s,t.yMax)),f.origin.setAutoState(new r.PointR2(u,Math.max(a,l))),f.requireUpdate(Gi.NeedsLayout))}var y=this.leftAxis.view;if(null!==y){var g=y.viewFrame;g.xMin===t.xMin&&g.yMin===a&&g.xMax===s&&g.yMax===l||(y.setViewFrame(new r.BoxR2(t.xMin,a,s,l)),y.origin.setAutoState(new r.PointR2(u,l)),y.requireUpdate(Gi.NeedsLayout))}var w=this.graph.view;if(null!==w){var m=w.viewFrame;m.xMin===u&&m.yMin===a&&m.xMax===s&&m.yMax===l||(w.setViewFrame(new r.BoxR2(u,a,s,l)),w.requireUpdate(Gi.NeedsLayout))}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterTop",void 0),m([So({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterRight",void 0),m([So({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterBottom",void 0),m([So({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterLeft",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"borderColor",void 0),m([So({type:Number,state:1})],e.prototype,"borderWidth",void 0),m([So({type:Number,state:6})],e.prototype,"borderSerif",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,state:2})],e.prototype,"tickLabelPadding",void 0),m([ho({type:s.Timing,initState:function(){return s.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([So({type:St,state:null,look:Qt.subduedColor})],e.prototype,"gridLineColor",void 0),m([So({type:Number,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([jo({key:!0,type:Al,createView:function(){return this.owner.createGraph()},willSetView:function(t,e){this.owner.willSetGraph(t,e)},onSetView:function(t,e){this.owner.onSetGraph(t,e)},didSetView:function(t,e){this.owner.didSetGraph(t,e)}})],e.prototype,"graph",void 0),m([jo({key:!0,type:iu,createView:function(){return this.owner.createTopAxis()},willSetView:function(t,e){this.owner.willSetTopAxis(t,e)},onSetView:function(t,e){this.owner.onSetTopAxis(t,e)},didSetView:function(t,e){this.owner.didSetTopAxis(t,e)}})],e.prototype,"topAxis",void 0),m([jo({key:!0,type:ou,createView:function(){return this.owner.createRightAxis()},willSetView:function(t,e){this.owner.willSetRightAxis(t,e)},onSetView:function(t,e){this.owner.onSetRightAxis(t,e)},didSetView:function(t,e){this.owner.didSetRightAxis(t,e)}})],e.prototype,"rightAxis",void 0),m([jo({key:!0,type:nu,createView:function(){return this.owner.createBottomAxis()},willSetView:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetView:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetView:function(t,e){this.owner.didSetBottomAxis(t,e)}})],e.prototype,"bottomAxis",void 0),m([jo({key:!0,type:ru,createView:function(){return this.owner.createLeftAxis()},willSetView:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetView:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetView:function(t,e){this.owner.didSetLeftAxis(t,e)}})],e.prototype,"leftAxis",void 0),e}(sl),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachGraph=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitWillSetGraph&&a.chartTraitWillSetGraph(t,e,i,this)}},e.prototype.onSetGraph=function(t,e,i){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitDidSetGraph&&a.chartTraitDidSetGraph(t,e,i,this)}},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachTopAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitWillSetTopAxis&&a.chartTraitWillSetTopAxis(t,e,i,this)}},e.prototype.onSetTopAxis=function(t,e,i){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitDidSetTopAxis&&a.chartTraitDidSetTopAxis(t,e,i,this)}},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachRightAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitWillSetRightAxis&&a.chartTraitWillSetRightAxis(t,e,i,this)}},e.prototype.onSetRightAxis=function(t,e,i){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitDidSetRightAxis&&a.chartTraitDidSetRightAxis(t,e,i,this)}},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachBottomAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitWillSetBottomAxis&&a.chartTraitWillSetBottomAxis(t,e,i,this)}},e.prototype.onSetBottomAxis=function(t,e,i){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitDidSetBottomAxis&&a.chartTraitDidSetBottomAxis(t,e,i,this)}},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachLeftAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitWillSetLeftAxis&&a.chartTraitWillSetLeftAxis(t,e,i,this)}},e.prototype.onSetLeftAxis=function(t,e,i){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.chartTraitDidSetLeftAxis&&a.chartTraitDidSetLeftAxis(t,e,i,this)}},e.prototype.detectGraphTrait=function(t){return t instanceof Fl?t:null},e.prototype.detectTopAxisTrait=function(t){return t instanceof su?t:null},e.prototype.detectRightAxisTrait=function(t){return t instanceof lu?t:null},e.prototype.detectBottomAxisTrait=function(t){return t instanceof uu?t:null},e.prototype.detectLeftAxisTrait=function(t){return t instanceof hu?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i];if(null===this.graph.trait){var r=this.detectGraphTrait(n);null!==r&&this.graph.setTrait(r)}if(null===this.topAxis.trait){var a=this.detectTopAxisTrait(n);null!==a&&this.topAxis.setTrait(a)}if(null===this.rightAxis.trait){var s=this.detectRightAxisTrait(n);null!==s&&this.rightAxis.setTrait(s)}if(null===this.bottomAxis.trait){var l=this.detectBottomAxisTrait(n);null!==l&&this.bottomAxis.setTrait(l)}if(null===this.leftAxis.trait){var u=this.detectLeftAxisTrait(n);null!==u&&this.leftAxis.setTrait(u)}}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.graph.trait){var o=this.detectGraphTrait(e);null!==o&&this.graph.setTrait(o,i)}if(null===this.topAxis.trait){var n=this.detectTopAxisTrait(e);null!==n&&this.topAxis.setTrait(n,i)}if(null===this.rightAxis.trait){var r=this.detectRightAxisTrait(e);null!==r&&this.rightAxis.setTrait(r,i)}if(null===this.bottomAxis.trait){var a=this.detectBottomAxisTrait(e);null!==a&&this.bottomAxis.setTrait(a,i)}if(null===this.leftAxis.trait){var s=this.detectLeftAxisTrait(e);null!==s&&this.leftAxis.setTrait(s,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectGraphTrait(e);null!==i&&this.graph.trait===i&&this.graph.setTrait(null);var o=this.detectTopAxisTrait(e);null!==o&&this.topAxis.trait===o&&this.topAxis.setTrait(null);var n=this.detectRightAxisTrait(e);null!==n&&this.rightAxis.trait===n&&this.rightAxis.setTrait(null);var r=this.detectBottomAxisTrait(e);null!==r&&this.bottomAxis.trait===r&&this.bottomAxis.setTrait(null);var a=this.detectLeftAxisTrait(e);null!==a&&this.leftAxis.trait===a&&this.leftAxis.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.graph.trait;null!==e&&e.addTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.addTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.addTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.addTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.graph.trait;null!==e&&e.removeTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.removeTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.removeTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.removeTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.removeTraitConsumer(this)},m([G({type:Fl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetGraph(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetGraph(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetGraph(t,e,i)}})],e.prototype,"graph",void 0),m([G({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTopAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetTopAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetTopAxis(t,e,i)}})],e.prototype,"topAxis",void 0),m([G({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetRightAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetRightAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetRightAxis(t,e,i)}})],e.prototype,"rightAxis",void 0),m([G({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetBottomAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetBottomAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetBottomAxis(t,e,i)}})],e.prototype,"bottomAxis",void 0),m([G({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetLeftAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetLeftAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetLeftAxis(t,e,i)}})],e.prototype,"leftAxis",void 0),e}(st),wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initChartTrait=function(t){},e.prototype.attachChartTrait=function(t){this.graph.setTrait(t.graph.trait);var e=t.topAxis.trait;null!==e&&this.insertTopAxisTrait(e);var i=t.rightAxis.trait;null!==i&&this.insertRightAxisTrait(i);var o=t.bottomAxis.trait;null!==o&&this.insertBottomAxisTrait(o);var n=t.leftAxis.trait;null!==n&&this.insertLeftAxisTrait(n)},e.prototype.detachChartTrait=function(t){var e=t.leftAxis.trait;null!==e&&this.removeLeftAxisTrait(e);var i=t.bottomAxis.trait;null!==i&&this.removeBottomAxisTrait(i);var o=t.rightAxis.trait;null!==o&&this.removeRightAxisTrait(o);var n=t.topAxis.trait;null!==n&&this.removeTopAxisTrait(n),this.graph.setTrait(null)},e.prototype.willSetChartTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetTrait&&r.chartWillSetTrait(t,e,this)}},e.prototype.onSetChartTrait=function(t,e){null!==e&&this.detachChartTrait(e),null!==t&&(this.attachChartTrait(t),this.initChartTrait(t))},e.prototype.didSetChartTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetTrait&&r.chartDidSetTrait(t,e,this)}},e.prototype.createChartView=function(){return yu.create()},e.prototype.initChartView=function(t){},e.prototype.themeChartView=function(t,e,i,o){},e.prototype.attachChartView=function(t){null===this.graph.view&&null===this.graph.trait||this.graph.injectView(t)},e.prototype.detachChartView=function(t){},e.prototype.willSetChartView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetView&&r.chartWillSetView(t,e,this)}},e.prototype.onSetChartView=function(t,e){null!==e&&this.detachChartView(e),null!==t&&(this.attachChartView(t),this.initChartView(t))},e.prototype.didSetChartView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetView&&r.chartDidSetView(t,e,this)}},e.prototype.attachGraphTrait=function(e){t.prototype.attachGraphTrait.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.attachGraphView=function(e){t.prototype.attachGraphView.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.detachGraphView=function(t){t.remove()},e.prototype.createTopAxis=function(t){return new du},e.prototype.initTopAxis=function(t){var e=t.axis.trait;null!==e&&this.initTopAxisTrait(e);var i=t.axis.view;null!==i&&this.initTopAxisView(i)},e.prototype.attachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.attachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.attachTopAxisView(i)},e.prototype.detachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.detachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.detachTopAxisView(i)},e.prototype.willSetTopAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetTopAxis&&r.chartWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetTopAxis&&r.chartDidSetTopAxis(t,e,this)}},e.prototype.insertTopAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a instanceof pu){if(a.axis.trait===t)return;a.axis.trait===e&&(o=a)}}var s=this.createTopAxis(t);if(null!==s&&(s.axis.setTrait(t),this.topAxis.setComponent(s,o),this.insertChildComponent(s,o),null===s.axis.view)){var l=this.createTopAxisView(s),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?s.axis.injectView(h,l,u,null):s.axis.setView(l,u)}},e.prototype.removeTopAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof pu&&n.axis.trait===t)return this.topAxis.setComponent(null),void n.remove()}},e.prototype.initTopAxisTrait=function(t){},e.prototype.attachTopAxisTrait=function(t){},e.prototype.detachTopAxisTrait=function(t){},e.prototype.willSetTopAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetTopAxisTrait&&r.chartWillSetTopAxisTrait(t,e,this)}},e.prototype.onSetTopAxisTrait=function(t,e){null!==e&&this.detachTopAxisTrait(e),null!==t&&(this.attachTopAxisTrait(t),this.initTopAxisTrait(t))},e.prototype.didSetTopAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetTopAxisTrait&&r.chartDidSetTopAxisTrait(t,e,this)}},e.prototype.createTopAxisView=function(t){return t.axis.createView()},e.prototype.initTopAxisView=function(t){},e.prototype.attachTopAxisView=function(t){},e.prototype.detachTopAxisView=function(t){t.remove()},e.prototype.willSetTopAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetTopAxisView&&r.chartWillSetTopAxisView(t,e,this)}},e.prototype.onSetTopAxisView=function(t,e){null!==e&&this.detachTopAxisView(e),null!==t&&(this.attachTopAxisView(t),this.initTopAxisView(t))},e.prototype.didSetTopAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetTopAxisView&&r.chartDidSetTopAxisView(t,e,this)}},e.prototype.createRightAxis=function(t){return new cu},e.prototype.initRightAxis=function(t){var e=t.axis.trait;null!==e&&this.initRightAxisTrait(e);var i=t.axis.view;null!==i&&this.initRightAxisView(i)},e.prototype.attachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.attachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.attachRightAxisView(i)},e.prototype.detachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.detachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.detachRightAxisView(i)},e.prototype.willSetRightAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetRightAxis&&r.chartWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetRightAxis&&r.chartDidSetRightAxis(t,e,this)}},e.prototype.insertRightAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a instanceof pu){if(a.axis.trait===t)return;a.axis.trait===e&&(o=a)}}var s=this.createRightAxis(t);if(null!==s&&(s.axis.setTrait(t),this.rightAxis.setComponent(s,o),this.insertChildComponent(s,o),null===s.axis.view)){var l=this.createRightAxisView(s),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?s.axis.injectView(h,l,u,null):s.axis.setView(l,u)}},e.prototype.removeRightAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof pu&&n.axis.trait===t)return this.rightAxis.setComponent(null),void n.remove()}},e.prototype.initRightAxisTrait=function(t){},e.prototype.attachRightAxisTrait=function(t){},e.prototype.detachRightAxisTrait=function(t){},e.prototype.willSetRightAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetRightAxisTrait&&r.chartWillSetRightAxisTrait(t,e,this)}},e.prototype.onSetRightAxisTrait=function(t,e){null!==e&&this.detachRightAxisTrait(e),null!==t&&(this.attachRightAxisTrait(t),this.initRightAxisTrait(t))},e.prototype.didSetRightAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetRightAxisTrait&&r.chartDidSetRightAxisTrait(t,e,this)}},e.prototype.createRightAxisView=function(t){return t.axis.createView()},e.prototype.initRightAxisView=function(t){},e.prototype.attachRightAxisView=function(t){},e.prototype.detachRightAxisView=function(t){t.remove()},e.prototype.willSetRightAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetRightAxisView&&r.chartWillSetRightAxisView(t,e,this)}},e.prototype.onSetRightAxisView=function(t,e){null!==e&&this.detachRightAxisView(e),null!==t&&(this.attachRightAxisView(t),this.initRightAxisView(t))},e.prototype.didSetRightAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetRightAxisView&&r.chartDidSetRightAxisView(t,e,this)}},e.prototype.createBottomAxis=function(t){return new fu},e.prototype.initBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.initBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.initBottomAxisView(i)},e.prototype.attachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.attachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.attachBottomAxisView(i)},e.prototype.detachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.detachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.detachBottomAxisView(i)},e.prototype.willSetBottomAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetBottomAxis&&r.chartWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetBottomAxis&&r.chartDidSetBottomAxis(t,e,this)}},e.prototype.insertBottomAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a instanceof pu){if(a.axis.trait===t)return;a.axis.trait===e&&(o=a)}}var s=this.createBottomAxis(t);if(null!==s&&(s.axis.setTrait(t),this.bottomAxis.setComponent(s,o),this.insertChildComponent(s,o),null===s.axis.view)){var l=this.createBottomAxisView(s),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?s.axis.injectView(h,l,u,null):s.axis.setView(l,u)}},e.prototype.removeBottomAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof pu&&n.axis.trait===t)return this.bottomAxis.setComponent(null),void n.remove()}},e.prototype.initBottomAxisTrait=function(t){},e.prototype.attachBottomAxisTrait=function(t){},e.prototype.detachBottomAxisTrait=function(t){},e.prototype.willSetBottomAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetBottomAxisTrait&&r.chartWillSetBottomAxisTrait(t,e,this)}},e.prototype.onSetBottomAxisTrait=function(t,e){null!==e&&this.detachBottomAxisTrait(e),null!==t&&(this.attachBottomAxisTrait(t),this.initBottomAxisTrait(t))},e.prototype.didSetBottomAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetBottomAxisTrait&&r.chartDidSetBottomAxisTrait(t,e,this)}},e.prototype.createBottomAxisView=function(t){return t.axis.createView()},e.prototype.initBottomAxisView=function(t){},e.prototype.attachBottomAxisView=function(t){},e.prototype.detachBottomAxisView=function(t){t.remove()},e.prototype.willSetBottomAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetBottomAxisView&&r.chartWillSetBottomAxisView(t,e,this)}},e.prototype.onSetBottomAxisView=function(t,e){null!==e&&this.detachBottomAxisView(e),null!==t&&(this.attachBottomAxisView(t),this.initBottomAxisView(t))},e.prototype.didSetBottomAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetBottomAxisView&&r.chartDidSetBottomAxisView(t,e,this)}},e.prototype.createLeftAxis=function(t){return new vu},e.prototype.initLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.initLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.initLeftAxisView(i)},e.prototype.attachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.attachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.attachLeftAxisView(i)},e.prototype.detachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.detachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.detachLeftAxisView(i)},e.prototype.willSetLeftAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetLeftAxis&&r.chartWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetLeftAxis&&r.chartDidSetLeftAxis(t,e,this)}},e.prototype.insertLeftAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var a=i[n];if(a instanceof pu){if(a.axis.trait===t)return;a.axis.trait===e&&(o=a)}}var s=this.createLeftAxis(t);if(null!==s&&(s.axis.setTrait(t),this.leftAxis.setComponent(s,o),this.insertChildComponent(s,o),null===s.axis.view)){var l=this.createLeftAxisView(s),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?s.axis.injectView(h,l,u,null):s.axis.setView(l,u)}},e.prototype.removeLeftAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof pu&&n.axis.trait===t)return this.leftAxis.setComponent(null),void n.remove()}},e.prototype.initLeftAxisTrait=function(t){},e.prototype.attachLeftAxisTrait=function(t){},e.prototype.detachLeftAxisTrait=function(t){},e.prototype.willSetLeftAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetLeftAxisTrait&&r.chartWillSetLeftAxisTrait(t,e,this)}},e.prototype.onSetLeftAxisTrait=function(t,e){null!==e&&this.detachLeftAxisTrait(e),null!==t&&(this.attachLeftAxisTrait(t),this.initLeftAxisTrait(t))},e.prototype.didSetLeftAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetLeftAxisTrait&&r.chartDidSetLeftAxisTrait(t,e,this)}},e.prototype.createLeftAxisView=function(t){return t.axis.createView()},e.prototype.initLeftAxisView=function(t){},e.prototype.attachLeftAxisView=function(t){},e.prototype.detachLeftAxisView=function(t){t.remove()},e.prototype.willSetLeftAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartWillSetLeftAxisView&&r.chartWillSetLeftAxisView(t,e,this)}},e.prototype.onSetLeftAxisView=function(t,e){null!==e&&this.detachLeftAxisView(e),null!==t&&(this.attachLeftAxisView(t),this.initLeftAxisView(t))},e.prototype.didSetLeftAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.chartDidSetLeftAxisView&&r.chartDidSetLeftAxisView(t,e,this)}},e.prototype.detectTopAxisComponent=function(t){return t instanceof du?t:null},e.prototype.detectRightAxisComponent=function(t){return t instanceof cu?t:null},e.prototype.detectBottomAxisComponent=function(t){return t instanceof fu?t:null},e.prototype.detectLeftAxisComponent=function(t){return t instanceof vu?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectTopAxisComponent(e);null!==o&&this.topAxis.setComponent(o,i);var n=this.detectRightAxisComponent(e);null!==n&&this.rightAxis.setComponent(n,i);var r=this.detectBottomAxisComponent(e);null!==r&&this.bottomAxis.setComponent(r,i);var a=this.detectLeftAxisComponent(e);null!==a&&this.leftAxis.setComponent(a,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e),null!==this.detectTopAxisComponent(e)&&this.topAxis.setComponent(null),null!==this.detectRightAxisComponent(e)&&this.rightAxis.setComponent(null),null!==this.detectBottomAxisComponent(e)&&this.bottomAxis.setComponent(null),null!==this.detectLeftAxisComponent(e)&&this.leftAxis.setComponent(null)},e.ChartFastener=fa.define({viewType:yu,observeView:!0,willSetView:function(t,e){this.owner.willSetChartView(t,e)},onSetView:function(t,e){this.owner.onSetChartView(t,e)},didSetView:function(t,e){this.owner.didSetChartView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeChartView(o,t,e,i)},createView:function(){return this.owner.createChartView()},traitType:gu,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetChartTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetChartTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetChartTrait(t,e)},chartTraitWillSetTopAxis:function(t,e,i){null!==e&&this.owner.removeTopAxisTrait(e)},chartTraitDidSetTopAxis:function(t,e,i){null!==t&&this.owner.insertTopAxisTrait(t)},chartTraitWillSetRightAxis:function(t,e,i){null!==e&&this.owner.removeRightAxisTrait(e)},chartTraitDidSetRightAxis:function(t,e,i){null!==t&&this.owner.insertRightAxisTrait(t)},chartTraitWillSetBottomAxis:function(t,e,i){null!==e&&this.owner.removeBottomAxisTrait(e)},chartTraitDidSetBottomAxis:function(t,e,i){null!==t&&this.owner.insertBottomAxisTrait(t)},chartTraitWillSetLeftAxis:function(t,e,i){null!==e&&this.owner.removeLeftAxisTrait(e)},chartTraitDidSetLeftAxis:function(t,e,i){null!==t&&this.owner.insertLeftAxisTrait(t)}}),e.TopAxisFastener=ya.define({type:du,observe:!0,willSetComponent:function(t,e){this.owner.willSetTopAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetTopAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetTopAxis(t,e)},axisWillSetTrait:function(t,e){this.owner.willSetTopAxisTrait(t,e)},axisDidSetTrait:function(t,e){this.owner.onSetTopAxisTrait(t,e),this.owner.didSetTopAxisTrait(t,e)},axisWillSetView:function(t,e){this.owner.willSetTopAxisView(t,e)},axisDidSetView:function(t,e){this.owner.onSetTopAxisView(t,e),this.owner.didSetTopAxisView(t,e)}}),e.RightAxisFastener=ya.define({type:cu,observe:!0,willSetComponent:function(t,e){this.owner.willSetRightAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetRightAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetRightAxis(t,e)},axisWillSetTrait:function(t,e){this.owner.willSetRightAxisTrait(t,e)},axisDidSetTrait:function(t,e){this.owner.onSetRightAxisTrait(t,e),this.owner.didSetRightAxisTrait(t,e)},axisWillSetView:function(t,e){this.owner.willSetRightAxisView(t,e)},axisDidSetView:function(t,e){this.owner.onSetRightAxisView(t,e),this.owner.didSetRightAxisView(t,e)}}),e.BottomAxisFastener=ya.define({type:fu,observe:!0,willSetComponent:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetBottomAxis(t,e)},axisWillSetTrait:function(t,e){this.owner.willSetBottomAxisTrait(t,e)},axisDidSetTrait:function(t,e){this.owner.onSetBottomAxisTrait(t,e),this.owner.didSetBottomAxisTrait(t,e)},axisWillSetView:function(t,e){this.owner.willSetBottomAxisView(t,e)},axisDidSetView:function(t,e){this.owner.onSetBottomAxisView(t,e),this.owner.didSetBottomAxisView(t,e)}}),e.LeftAxisFastener=ya.define({type:vu,observe:!0,willSetComponent:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetLeftAxis(t,e)},axisWillSetTrait:function(t,e){this.owner.willSetLeftAxisTrait(t,e)},axisDidSetTrait:function(t,e){this.owner.onSetLeftAxisTrait(t,e),this.owner.didSetLeftAxisTrait(t,e)},axisWillSetView:function(t,e){this.owner.willSetLeftAxisView(t,e)},axisDidSetView:function(t,e){this.owner.onSetLeftAxisView(t,e),this.owner.didSetLeftAxisView(t,e)}}),m([fa({extends:e.ChartFastener})],e.prototype,"chart",void 0),m([ya({extends:e.TopAxisFastener})],e.prototype,"topAxis",void 0),m([ya({extends:e.RightAxisFastener})],e.prototype,"rightAxis",void 0),m([ya({extends:e.BottomAxisFastener})],e.prototype,"bottomAxis",void 0),m([ya({extends:e.LeftAxisFastener})],e.prototype,"leftAxis",void 0),e}(Ml),mu=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidProjectObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidProjectObservers))},Object.defineProperty(i.prototype,"geoProjection",{get:function(){var t=this.parentView;return t instanceof i?t.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapZoom",{get:function(){var t=this.parentView;return t instanceof i?t.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapHeading",{get:function(){var t=this.parentView;return t instanceof i?t.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapTilt",{get:function(){var t=this.parentView;return t instanceof i?t.mapTilt:0},enumerable:!1,configurable:!0}),i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&Gi.NeedsAnimate)&&(t&=~Gi.NeedsAnimate),t},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Gi.NeedsProcess|Gi.TraversingFlag|Gi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Gi.NeedsResize)&&(i|=Gi.NeedsResize,this.setViewFlags(this.viewFlags&~Gi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Gi.NeedsScroll)&&(i|=Gi.NeedsScroll,this.setViewFlags(this.viewFlags&~Gi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Gi.NeedsChange)&&(i|=Gi.NeedsChange,this.setViewFlags(this.viewFlags&~Gi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Gi.NeedsAnimate)&&(i|=Gi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Gi.NeedsAnimate),this.willAnimate(e)),0!=((this.viewFlags|t)&Gi.NeedsLayout)&&(i|=Gi.NeedsLayout,this.setViewFlags(this.viewFlags&~Gi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Gi.NeedsProject)&&(i|=Gi.NeedsProject,this.setViewFlags(this.viewFlags&~Gi.NeedsProject),this.willProject(e)),this.onProcess(i,e),0!=(i&Gi.NeedsResize)&&this.onResize(e),0!=(i&Gi.NeedsScroll)&&this.onScroll(e),0!=(i&Gi.NeedsChange)&&this.onChange(e),0!=(i&Gi.NeedsAnimate)&&this.onAnimate(e),0!=(i&Gi.NeedsLayout)&&this.onLayout(e),0!=(i&Gi.NeedsProject)&&this.onProject(e),this.doProcessChildViews(i,e),0!=(i&Gi.NeedsProject)&&this.didProject(e),0!=(i&Gi.NeedsLayout)&&this.didLayout(e),0!=(i&Gi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Gi.NeedsChange)&&this.didChange(e),0!=(i&Gi.NeedsScroll)&&this.didScroll(e),0!=(i&Gi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Gi.TraversingFlag|Gi.ProcessingFlag))}},i.prototype.willProject=function(t){var e=this.viewController;null!==e&&e.viewWillProject(t,this);var i=this.viewObserverCache.viewWillProjectObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillProject(t,this)}},i.prototype.onProject=function(t){},i.prototype.didProject=function(t){var e=this.viewObserverCache.viewDidProjectObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidProject(t,this)}var o=this.viewController;null!==o&&o.viewDidProject(t,this)},i.prototype.onSetHidden=function(t){t||this.requireUpdate(Gi.NeedsProject)},i.prototype.didSetHidden=function(e){var o=this.parentView;o instanceof i&&o.childViewDidSetHidden(this,e),t.prototype.didSetHidden.call(this,e)},i.prototype.childViewDidSetHidden=function(t,e){},i.prototype.cullGeoFrame=function(t){void 0===t&&(t=this.geoFrame),this.setCulled(!t.intersects(this.geoBounds))},Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.parentView;return t instanceof i?t.geoFrame:p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"geoBounds",{get:function(){return this.geoFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ownGeoBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.deriveGeoBounds=function(){var t=this.ownGeoBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.geoBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.geoFrame),t},i.prototype.didSetGeoBounds=function(t,e){var o=this.parentView;o instanceof i&&o.childViewDidSetGeoBounds(this,t,e)},i.prototype.childViewDidSetGeoBounds=function(t,e,i){},i.mountFlags=nr.mountFlags|Gi.NeedsProject,i.uncullFlags=nr.uncullFlags|Gi.NeedsProject,i}(nr),bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoProjection",{get:function(){var t=this.view;return null!==t?t.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapZoom",{get:function(){var t=this.view;return null!==t?t.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHeading",{get:function(){var t=this.view;return null!==t?t.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapTilt",{get:function(){var t=this.view;return null!==t?t.mapTilt:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoFrame",{get:function(){var t=this.view;return null!==t?t.geoFrame:p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.view;return null!==t?t.geoBounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e}(rr),Su=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childViews",{value:[],enumerable:!0}),Object.defineProperty(e,"childViewMap",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof nr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof nr))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.didInsertChildView=function(e,i){e instanceof mu&&this.childViewDidInsertGeoBounds(e,e.geoBounds),t.prototype.didInsertChildView.call(this,e,i)},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof nr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.didRemoveChildView=function(e){e instanceof mu&&this.childViewDidRemoveGeoBounds(e,e.geoBounds),t.prototype.didRemoveChildView.call(this,e)},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.doMountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doPowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&Gi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Gi.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Gi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Gi.RemovingFlag),this.removeChildView(r))}},e.prototype.doUpdateGeoBounds=function(){var t=this.geoBounds,e=this.deriveGeoBounds();t.equals(e)||(Object.defineProperty(this,"geoBounds",{value:e,enumerable:!0,configurable:!0}),this.didSetGeoBounds(e,t))},e.prototype.childViewDidInsertGeoBounds=function(t,e){this.doUpdateGeoBounds()},e.prototype.childViewDidRemoveGeoBounds=function(t,e){this.doUpdateGeoBounds()},e.prototype.childViewDidSetGeoBounds=function(t,e,i){this.doUpdateGeoBounds()},e.prototype.childViewDidSetHidden=function(t,e){this.doUpdateGeoBounds()},e.prototype.deriveGeoBounds=function(){for(var t=this.ownGeoBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof mu&&!n.isHidden()){var r=n.geoBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.geoFrame),t},e.prototype.deriveViewBounds=function(){for(var t=this.ownViewBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.viewBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.childViews,r=n.length-1;r>=0;r-=1){var a=n[r];if(a instanceof nr&&!a.isHidden()&&!a.isCulled())if(a.hitBounds.contains(t,e)&&null!==(o=a.hitTest(t,e,i)))break}return o},e}(mu),Cu=function(){function t(t,e,i,o,n,r,a,s,l,u,h,p){Object.defineProperty(this,"depth",{value:t,enumerable:!0}),Object.defineProperty(this,"maxDepth",{value:e,enumerable:!0}),Object.defineProperty(this,"density",{value:i,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:o,enumerable:!0}),Object.defineProperty(this,"geoBounds",{value:n,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:r,enumerable:!0}),Object.defineProperty(this,"southWest",{value:a,enumerable:!0}),Object.defineProperty(this,"northWest",{value:s,enumerable:!0}),Object.defineProperty(this,"southEast",{value:l,enumerable:!0}),Object.defineProperty(this,"northEast",{value:u,enumerable:!0}),Object.defineProperty(this,"views",{value:h,enumerable:!0}),Object.defineProperty(this,"size",{value:p,enumerable:!0})}return t.prototype.isEmpty=function(){return 0===this.size},t.prototype.contains=function(t){return this.geoFrame.contains(t)},t.prototype.intersects=function(t){return this.geoFrame.intersects(t)},t.prototype.getTile=function(t){if(this.depth<this.maxDepth&&this.size>this.density){var e=this.geoCenter,i=t.lngMin<=e.lng,o=t.latMin<=e.lat,n=t.lngMax>e.lng,r=t.latMax>e.lat;if(i!==n&&o!==r)if(o&&i){var a=this.southWest;if(null!==a)return a.getTile(t)}else if(r&&i){var s=this.northWest;if(null!==s)return s.getTile(t)}else if(o&&n){var l=this.southEast;if(null!==l)return l.getTile(t)}else if(r&&n){var u=this.northEast;if(null!==u)return u.getTile(t)}}return this},t.prototype.has=function(t,e){if(this.depth<this.maxDepth&&this.size>this.density){var i=this.hasNode(t,e);if(void 0!==i)return i}return this.hasLeaf(t,e)},t.prototype.hasNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,a=e.latMax>i.lat;if(o!==r&&n!==a)if(n&&o){var s=this.southWest;if(null!==s)return s.has(t,e)}else if(a&&o){var l=this.northWest;if(null!==l)return l.has(t,e)}else if(n&&r){var u=this.southEast;if(null!==u)return u.has(t,e)}else if(a&&r){var h=this.northEast;if(null!==h)return h.has(t,e)}},t.prototype.hasLeaf=function(t,e){return this.views.indexOf(t)>=0},t.prototype.inserted=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.insertedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density+1&&(i=i.reinsertedNode()),i}return this!==(i=i.insertedLeaf(t,e))&&i.depth<i.maxDepth&&i.size===i.density+1&&(i=i.reinsertedNode()),i},t.prototype.insertedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,a=e.latMax>i.lat;if(o!==r&&n!==a){if(n&&o){var s=this.southWest,l=s;return null===l&&(l=this.createTile(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoFrame.latMin,this.geoCenter.lng,this.geoCenter.lat))),s!==(l=l.inserted(t,e))?this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,l,this.northWest,this.southEast,this.northEast,this.views,this.size+1):this}if(a&&o){var u=this.northWest,h=u;return null===h&&(h=this.createTile(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoCenter.lat,this.geoCenter.lng,this.geoFrame.latMax))),u!==(h=h.inserted(t,e))?this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,h,this.southEast,this.northEast,this.views,this.size+1):this}if(n&&r){var d=this.southEast,c=d;return null===c&&(c=this.createTile(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoFrame.latMin,this.geoFrame.lngMax,this.geoCenter.lat))),d!==(c=c.inserted(t,e))?this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,c,this.northEast,this.views,this.size+1):this}if(a&&r){var f=this.northEast,v=f;return null===v&&(v=this.createTile(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoCenter.lat,this.geoFrame.lngMax,this.geoFrame.latMax))),f!==(v=v.inserted(t,e))?this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,v,this.views,this.size+1):this}}return null},t.prototype.insertedLeaf=function(t,e){var i=this.views;if(i.indexOf(t)<0){var o=i.slice(0);return o.push(t),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,o,this.size+1)}return this},t.prototype.removed=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.removedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density&&(i=i.reinsertedLeaf()),i}return this!==(i=i.removedLeaf(t,e))&&i.size===i.density&&(i=i.reinsertedLeaf()),i},t.prototype.removedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,a=e.latMax>i.lat;if(o!==r&&n!==a){if(n&&o){var s=this.southWest;if(null!==s){var l=s.removed(t,e);return l.isEmpty()&&(l=null),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,l,this.northWest,this.southEast,this.northEast,this.views,this.size-1)}return this}if(a&&o){var u=this.northWest;if(null!==u){var h=u.removed(t,e);return h.isEmpty()&&(h=null),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,h,this.southEast,this.northEast,this.views,this.size-1)}return this}if(n&&r){var p=this.southEast;if(null!==p){var d=p.removed(t,e);return d.isEmpty()&&(d=null),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,d,this.northEast,this.views,this.size-1)}return this}if(a&&r){var c=this.northEast;if(null!==c){var f=c.removed(t,e);return f.isEmpty()&&(f=null),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,f,this.views,this.size-1)}return this}}return null},t.prototype.removedLeaf=function(t,e){var i=this.views,o=i.indexOf(t);if(o>=0){var n=i.slice(0);return n.splice(o,1),this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,n,this.size-1)}return this},t.prototype.reinsertedNode=function(){var t=this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){var i=e.geoBounds,o=t.insertedNode(e,i);t=null!==o?o:t.insertedLeaf(e,i)}),this),t},t.prototype.reinsertedLeaf=function(){var t=this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){t=t.insertedLeaf(e,e.geoBounds)}),this),t},t.prototype.moved=function(t,e,i){if(this.depth<this.maxDepth&&this.size>this.density){var o=this.geoCenter,n=e.lngMin<=o.lng,r=e.latMin<=o.lat,a=e.lngMax>o.lng,s=e.latMax>o.lat,l=i.lngMin<=o.lng,u=i.latMin<=o.lat,h=i.lngMax>o.lng,p=i.latMax>o.lat;if(n!==l||r!==u||a!==h||s!==p)return this.removed(t,i).inserted(t,e);if(n!==a&&r!==s)if(r&&n){var d=this.southWest,c=d.moved(t,e,i);if(d!==c)return this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,c,this.northWest,this.southEast,this.northEast,this.views,this.size)}else if(s&&n){var f=this.northWest,v=f.moved(t,e,i);if(f!==v)return this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,v,this.southEast,this.northEast,this.views,this.size)}else if(r&&a){var y=this.southEast,g=y.moved(t,e,i);if(y!==g)return this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,g,this.northEast,this.views,this.size)}else if(s&&a){var w=this.northEast,m=w.moved(t,e,i);if(w!==m)return this.createTile(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,m,this.views,this.size)}}return this},t.prototype.forEach=function(t,e){if(null!==this.southWest&&void 0!==(n=this.southWest.forEach(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEach(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEach(t,e)))return n;if(null!==this.northEast&&void 0!==(n=this.northEast.forEach(t,e)))return n;for(var i=this.views,o=0;o<i.length;o+=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}},t.prototype.forEachReverse=function(t,e){for(var i=this.views,o=i.length-1;o>=0;o-=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}if(null!==this.northEast&&void 0!==(n=this.northEast.forEachReverse(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEachReverse(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEachReverse(t,e)))return n;if(null!==this.southWest&&void 0!==(n=this.southWest.forEachReverse(t,e)))return n},t.prototype.forEachIntersecting=function(t,e,i){if(this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.forEachNonIntersecting=function(t,e,i){if(!this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachNonIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.createTile=function(i,o,n,r,a,s,l,u,h,p,d,c){if(void 0===l&&(l=null),void 0===u&&(u=null),void 0===h&&(h=null),void 0===p&&(p=null),void 0===d&&(d=e.Arrays.empty),void 0===c&&(c=0),void 0===s&&(s=r.center),void 0===a){null!==l&&(a=l.geoBounds),null!==u&&(a=void 0!==a?a.union(u.geoBounds):u.geoBounds),null!==h&&(a=void 0!==a?a.union(h.geoBounds):h.geoBounds),null!==p&&(a=void 0!==a?a.union(p.geoBounds):p.geoBounds);for(var f=0;f<d.length;f+=1){var v=d[f];a=void 0!==a?a.union(v.geoBounds):v.geoBounds}void 0===a&&(a=r)}return new t(i,o,n,r,a,s,l,u,h,p,d,c)},t.empty=function(i,o,n,r){return void 0===i&&(i=p.GeoBox.globe()),void 0===o&&(o=0),void 0===n&&(n=20),void 0===r&&(r=8),new t(o,n=Math.max(o,n),r,i,i,i.center,null,null,null,null,e.Arrays.empty,0)},t}(),Pu=function(t){function e(e,i,o,n){var r=t.call(this)||this;return Object.defineProperty(r,"quadtree",{value:Cu.empty(e,i,o,n),enumerable:!0,configurable:!0}),Object.defineProperty(r,"childViewMap",{value:null,enumerable:!0,configurable:!0}),r}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.tileOutlineColor&&this.tileOutlineColor(e.tileOutlineColor)},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.quadtree.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.quadtree.forEach((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.quadtree.forEach((function(t){return t}),this);return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.quadtree.forEachReverse((function(t){return t}),this);return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t.parentView===this){var e=null,i=this.quadtree.forEachReverse((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.previousChildView=function(t){if(t.parentView===this){var e=null,i=this.quadtree.forEach((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.forEachChildView=function(t,e){return this.quadtree.forEach(t,e)},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){if(null!==e){if(!(e instanceof mu))throw new TypeError(""+e);e.remove()}var i=this.getChildView(t);if(null!==i){var o=i.geoBounds;this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i);var n=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.removed(i,o),enumerable:!0,configurable:!0}),(a=this.quadtree.geoBounds).equals(n)||this.didSetGeoBounds(a,n),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}if(null!==e){var r=e.geoBounds;e.setKey(t);var a;n=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.inserted(e,r),enumerable:!0,configurable:!0}),(a=this.quadtree.geoBounds).equals(n)||this.didSetGeoBounds(a,n),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,null),this.didInsertChildView(e,null),e.cascadeInsert()}return i},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof mu))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.inserted(t,i),enumerable:!0,configurable:!0});var n=this.quadtree.geoBounds;n.equals(o)||this.didSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof mu))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.inserted(t,i),enumerable:!0,configurable:!0});var n=this.quadtree.geoBounds;n.equals(o)||this.didSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof mu))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.geoBounds;this.willInsertChildView(t,e);var n=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.inserted(t,o),enumerable:!0,configurable:!0});var r=this.quadtree.geoBounds;r.equals(n)||this.didSetGeoBounds(r,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof mu))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");var i=e.geoBounds;this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var o=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.removed(e,i),enumerable:!0,configurable:!0});var n=this.quadtree.geoBounds;if(n.equals(o)||this.didSetGeoBounds(n,o),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){this.quadtree.forEach((function(t){this.removeChildView(t)}),this)},e.prototype.doProcessChildViews=function(t,e){0==(t&Gi.ProcessMask)||this.isHidden()||this.isCulled()||(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},e.prototype.processChildViews=function(t,e,i){this.processTile(this.quadtree,t,e,i)},e.prototype.processTile=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoFrame)&&this.processTile(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoFrame)&&this.processTile(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoFrame)&&this.processTile(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoFrame)&&this.processTile(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var a=n[r];o.call(this,a,e,i),0!=(a.viewFlags&Gi.RemovingFlag)&&(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}},e.prototype.onRender=function(t){var e=this.getViewAnimator("tileOutlineColor");null!==e&&void 0!==e.value&&this.renderTiles(t,e.value)},e.prototype.renderTiles=function(t,e){var i=t.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderTile(this.quadtree,o,t.geoProjection,e),o.restore()}},e.prototype.renderTile=function(t,e,i,o){null!==t.southWest&&this.renderTile(t.southWest,e,i,o),null!==t.northWest&&this.renderTile(t.northWest,e,i,o),null!==t.southEast&&this.renderTile(t.southEast,e,i,o),null!==t.northEast&&this.renderTile(t.northEast,e,i,o);if(t.depth>=2){var n=i.project(t.geoFrame.southWest),r=i.project(t.geoFrame.northWest),a=i.project(t.geoFrame.northEast),s=i.project(t.geoFrame.southEast);e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.lineTo(a.x,a.y),e.lineTo(s.x,s.y),e.closePath();var l=(t.depth-2)/(t.maxDepth-2);e.lineWidth=4*(1-l)+.5*l,e.strokeStyle=o.toString(),e.stroke()}},e.prototype.displayChildViews=function(t,e,i){this.displayTile(this.quadtree,t,e,i)},e.prototype.displayTile=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoFrame)&&this.displayTile(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoFrame)&&this.displayTile(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoFrame)&&this.displayTile(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoFrame)&&this.displayTile(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var a=n[r];o.call(this,a,e,i),0!=(a.viewFlags&Gi.RemovingFlag)&&(a.setViewFlags(a.viewFlags&~Gi.RemovingFlag),this.removeChildView(a))}},e.prototype.childViewDidSetGeoBounds=function(t,e,i){var o=this.quadtree.geoBounds;Object.defineProperty(this,"quadtree",{value:this.quadtree.moved(t,e,i),enumerable:!0,configurable:!0});var n=this.quadtree.geoBounds;n.equals(o)||this.didSetGeoBounds(n,o)},Object.defineProperty(e.prototype,"geoBounds",{get:function(){return this.quadtree.geoBounds},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(t,e,i){var o=i.geoProjection.unproject(t,e);return this.hitTestTile(this.quadtree,t,e,o,i)},e.prototype.hitTestTile=function(t,e,i,o,n){var r=null;if(null!==t.southWest&&t.southWest.geoFrame.contains(o)&&(r=this.hitTestTile(t.southWest,e,i,o,n)),null===r&&null!==t.northWest&&t.northWest.geoFrame.contains(o)&&(r=this.hitTestTile(t.northWest,e,i,o,n)),null===r&&null!==t.southEast&&t.southEast.geoFrame.contains(o)&&(r=this.hitTestTile(t.southEast,e,i,o,n)),null===r&&null!==t.northEast&&t.northEast.geoFrame.contains(o)&&(r=this.hitTestTile(t.northEast,e,i,o,n)),null===r)for(var a=t.views,s=0;s<a.length;s+=1){var l=a[s];if(l.hitBounds.contains(e,i)&&null!==(r=l.hitTest(e,i,n)))break}return r},e.create=function(){return new e},m([So({type:St})],e.prototype,"tileOutlineColor",void 0),e}(mu),Vu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:e.createCanvas(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"renderer",{value:e.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rasterFrame",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof nr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new pr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new dr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.needsProcess=function(t,e){return 0!=(this.viewFlags&Gi.ProcessMask)||0!=(t&Gi.NeedsResize)?this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite):t=0,t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&Gi.DisplayMask)?t|=Gi.NeedsRender|Gi.NeedsComposite:t=0!=(t&Gi.NeedsComposite)?Gi.NeedsDisplay|Gi.NeedsComposite:0,t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this.canvas),this.resetRenderer()},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e),this.clearCanvas()},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(Gi.NeedsRender|Gi.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"compositeFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof nr?e.viewFrame:r.BoxR2.undefined()}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this.rasterFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},e.prototype.doHitTest=function(t,e,i){var o=this.compositeFrame;t-=Math.floor(o.xMin),e-=Math.floor(o.yMin);for(var n=null,r=this.childViews,a=r.length-1;a>=0;a-=1){var s=r[a];if(s instanceof nr&&!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(n=s.hitTest(t,e,i)))break}return n},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.compositeFrame,e=Math.floor(t.xMin),i=Math.floor(t.yMin);return 0!==e||0!==i?r.Transform.translate(-e,-i):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t){var e=this.compositeFrame,i=e.xMin-Math.floor(e.xMin),o=e.yMin-Math.floor(e.yMin),n=Math.ceil(i+e.width),a=Math.ceil(o+e.height),s=new r.BoxR2(i,o,n,a);if(!this.rasterFrame.equals(s)){var l=this.pixelRatio;t.width=n*l,t.height=a*l,t.style.width=n+"px",t.style.height=a+"px",Object.defineProperty(this,"rasterFrame",{value:s,enumerable:!0,configurable:!0})}},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof pr){var e=this.rasterFrame;t.context.clearRect(0,0,e.xMax,e.yMax)}else if(t instanceof dr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof pr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof dr){var i=this.rasterFrame;t.context.viewport(0,0,i.xMax,i.yMax)}},e.prototype.compositeImage=function(t){var e=t.compositor,i=t.renderer;if(e instanceof pr&&i instanceof pr){var o=this.compositeFrame,n=e.context;n.save(),n.globalAlpha=this.opacity.getValue(),n.globalCompositeOperation=this.compositeOperation.getValue();var r=Math.floor(o.x),a=Math.floor(o.y);n.drawImage(this.canvas,r,a,o.width,o.height),n.restore()}},e.create=function(){return new e},e.mountFlags=Su.mountFlags|Gi.NeedsRender|Gi.NeedsComposite,e.powerFlags=Su.powerFlags|Gi.NeedsRender|Gi.NeedsComposite,e.uncullFlags=Su.uncullFlags|Gi.NeedsRender|Gi.NeedsComposite,m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:String,state:"source-over"})],e.prototype,"compositeOperation",void 0),e}(Su),Tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.label=function(t){if(void 0===t){var e=this.getChildView("label");return e instanceof nr?e:null}return null===t||t instanceof nr||(t=Vr.fromAny(t)),this.setChildView("label",t),this},e.prototype.isGradientStop=function(){return!!this.color.value||"number"==typeof this.opacity.value},e.prototype.setState=function(t,i){var o;void 0!==(o=t instanceof e||t instanceof p.GeoPoint?t.toAny():p.GeoPoint.isTuple(t)?{lng:t[0],lat:t[1]}:t).lng&&void 0!==o.lat?this.geoPoint(new p.GeoPoint(o.lng,o.lat),i):void 0!==o.x&&void 0!==o.y&&this.viewPoint(new r.PointR2(o.x,o.y),i),void 0!==o.radius&&this.radius(o.radius,i),void 0!==o.hitRadius&&this.hitRadius(o.hitRadius),void 0!==o.color&&this.color(o.color,i),void 0!==o.opacity&&this.opacity(o.opacity,i),void 0!==o.labelPadding&&this.labelPadding(o.labelPadding,i),void 0!==o.labelPlacement&&this.labelPlacement(o.labelPlacement),void 0!==o.font&&this.font(o.font,i),void 0!==o.textColor&&this.textColor(o.textColor,i),void 0!==o.label&&this.label(o.label)},e.prototype.onSetGeoPoint=function(t,e){if(t.isDefined()){var i=this.geoBounds,o=new p.GeoBox(t.lng,t.lat,t.lng,t.lat);i.equals(o)||(Object.defineProperty(this,"geoBounds",{value:o,enumerable:!0,configurable:!0}),this.didSetGeoBounds(o,i),this.requireUpdate(Gi.NeedsProject))}},e.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsProject)&&null!==this.label()&&this.requireUpdate(Gi.NeedsLayout),t},e.prototype.onProject=function(e){if(t.prototype.onProject.call(this,e),this.viewPoint.isAuto()){var i=e.geoProjection.project(this.geoPoint.getValue());Object.defineProperty(this.viewPoint,"ownValue",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this.viewPoint,"ownState",{value:i,enumerable:!0,configurable:!0})}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label();null!==i&&this.layoutLabel(i,this.viewFrame)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state,o=Math.min(e.width,e.height),n=this.labelPadding.getValue().pxValue(o),a=this.viewPoint.getValue(),s=a.x,l=a.y;"top"===i?l-=n:"bottom"===i&&(l+=n),Cr.is(t)&&(t.textAlign.setAutoState("center"),t.textBaseline.setAutoState("bottom"),t.textOrigin.setAutoState(new r.PointR2(s,l)))},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y;return new r.BoxR2(e,i,e,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y,o=this.hitRadius.getStateOr(0);return new r.BoxR2(e-o,i-o,e+o,i+o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;n=this.hitTestPoint(e,i,a,this.viewFrame)}}return n},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.viewPoint.getValue(),r=n.x,a=n.y,s=this.radius.value,l=this.hitRadius.getStateOr(0);if(null!==s){var u=Math.min(o.width,o.height);l=Math.max(l,s.pxValue(u))}var h=r-t,p=a-e;return h*h+p*p<l*l?this:null},e.prototype.toAny=function(){var t={};return t.lng=this.geoPoint.value.lng,t.lat=this.geoPoint.value.lat,this.viewPoint.isAuto()||(t.x=this.viewPoint.value.x,t.y=this.viewPoint.value.y),null!==this.radius.value&&(t.radius=this.radius.value),void 0!==this.hitRadius.state&&(t.hitRadius=this.hitRadius.state),null!==this.color.value&&(t.color=this.color.value),void 0!==this.opacity.value&&(t.opacity=this.opacity.value),null!==this.labelPadding.value&&(t.labelPadding=this.labelPadding.value),void 0!==this.labelPlacement.state&&(t.labelPlacement=this.labelPlacement.state),t},e.create=function(){return new e},e.fromGeoPoint=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof p.GeoPoint||p.GeoPoint.isTuple(t))return this.fromGeoPoint(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:p.GeoPoint.origin(),didSetValue:function(t,e){this.owner.onSetGeoPoint(t,e)}})],e.prototype,"geoPoint",void 0),m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewPoint",void 0),m([So({type:r.Length,state:null})],e.prototype,"radius",void 0),m([So({type:St,state:null})],e.prototype,"color",void 0),m([So({type:Number})],e.prototype,"opacity",void 0),m([So({type:r.Length,state:null})],e.prototype,"labelPadding",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:Number})],e.prototype,"hitRadius",void 0),m([ho({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(Su),Au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.radius&&this.radius(e.radius),void 0!==e.hitRadius&&this.hitRadius(e.hitRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},e.prototype.onSetGeoCenter=function(t,e){if(t.isDefined()){var i=this.geoBounds,o=new p.GeoBox(t.lng,t.lat,t.lng,t.lat);i.equals(o)||(Object.defineProperty(this,"geoBounds",{value:o,enumerable:!0,configurable:!0}),this.didSetGeoBounds(o,i),this.requireUpdate(Gi.NeedsProject))}},e.prototype.onProject=function(e){var i;(t.prototype.onProject.call(this,e),this.viewCenter.isAuto())?(i=e.geoProjection.project(this.geoCenter.getValue()),this.viewCenter.setAutoState(i)):i=this.viewCenter.getValue();var o=this.viewFrame,n=Math.min(o.width,o.height),a=this.radius.getValue().pxValue(n),s=!isFinite(i.x)||!isFinite(i.y)||!isFinite(a)||!o.intersectsCircle(new r.CircleR2(i.x,i.y,a));this.setCulled(s)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderCircle(i.context,this.viewFrame),o.restore()}},e.prototype.renderCircle=function(t,e){var i=Math.min(e.width,e.height),o=this.viewCenter.getValue(),n=this.radius.getValue().pxValue(i);t.beginPath(),t.arc(o.x,o.y,n,0,2*Math.PI);var r=this.fill.value;null!==r&&(t.fillStyle=r.toString(),t.fill());var a=this.stroke.value;if(null!==a){var s=this.strokeWidth.value;null!==s&&(t.lineWidth=s.pxValue(i)),t.strokeStyle=a.toString(),t.stroke()}},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.viewCenter.getValue(),n=i.transformX(o.x,o.y),a=i.transformY(o.x,o.y),s=this.radius.getValue().pxValue(e);return new r.BoxR2(n-s,a-s,n+s,a+s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.viewCenter.getValue(),o=this.radius.getValue().pxValue(e);return new r.BoxR2(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.viewCenter.getValue(),o=this.radius.getValue().pxValue(e),n=Math.max(this.hitRadius.getStateOr(o),o);return new r.BoxR2(i.x-n,i.y-n,i.x+n,i.y+n)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;n=this.hitTestCircle(e,i,a,this.viewFrame,r.pixelRatio)}}return n},e.prototype.hitTestCircle=function(t,e,i,o,n){var r=Math.min(o.width,o.height),a=this.viewCenter.getValue(),s=this.radius.getValue().pxValue(r);if(null!==this.fill.value){var l=Math.max(this.hitRadius.getStateOr(s),s),u=a.x-t,h=a.y-e;if(u*u+h*h<l*l)return this}var p=this.strokeWidth.value;if(null!==this.stroke.value&&null!==p){if(t*=n,e*=n,i.save(),i.beginPath(),i.arc(a.x,a.y,s,0,2*Math.PI),i.lineWidth=p.pxValue(r),i.isPointInStroke(t,e))return i.restore(),this;i.restore()}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:p.GeoPoint.origin(),didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewCenter",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"radius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([ho({type:Number})],e.prototype,"hitRadius",void 0),e}(Su),Fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"value",{get:function(){return new br(this.viewCenter.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new br(this.viewCenter.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),e.prototype.onSetGeoCenter=function(t,e){if(t.isDefined()){var i=this.geoBounds,o=new p.GeoBox(t.lng,t.lat,t.lng,t.lat);i.equals(o)||(Object.defineProperty(this,"geoBounds",{value:o,enumerable:!0,configurable:!0}),this.didSetGeoBounds(o,i),this.requireUpdate(Gi.NeedsProject))}},e.prototype.onProject=function(e){var i;(t.prototype.onProject.call(this,e),this.viewCenter.isAuto())?(i=e.geoProjection.project(this.geoCenter.getValue()),this.viewCenter.setAutoState(i)):i=this.viewCenter.getValue();var o=this.viewFrame,n=Math.min(o.width,o.height),a=this.outerRadius.getValue().pxValue(n),s=!isFinite(i.x)||!isFinite(i.y)||!isFinite(a)||!o.intersectsCircle(new r.CircleR2(i.x,i.y,a));this.setCulled(s)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){this.value.draw(t,e);var i=this.fill.value;null!==i&&(t.fillStyle=i.toString(),t.fill());var o=this.stroke.value;if(null!==o){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r)}t.strokeStyle=o.toString(),t.stroke()}},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.viewCenter.getValue(),n=i.transformX(o.x,o.y),a=i.transformY(o.x,o.y),s=(this.innerRadius.getValue().pxValue(e)+this.outerRadius.getValue().pxValue(e))/2,l=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,u=n+s*Math.cos(l),h=a+s*Math.sin(l);return new r.BoxR2(u,h,u,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.viewCenter.getValue(),o=this.outerRadius.getValue().pxValue(e);return new r.BoxR2(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArc(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestArc=function(t,e,i,o){if(i.beginPath(),this.value.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(void 0!==this.stroke.value){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(o.width,o.height);if(i.lineWidth=n.pxValue(r),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:p.GeoPoint.origin(),didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewCenter",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"sweepAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(Su),Mu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"gradientStops",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"viewBounds",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor);var i=e.points;void 0!==i&&this.points(i)},e.prototype.points=function(t,e){var i=this.childViews;if(void 0===t){for(var o=[],n=0;n<i.length;n+=1){(b=i[n])instanceof Tu&&o.push(b)}return o}for(var r=this.geoBounds,a=1/0,s=1/0,l=-1/0,u=-1/0,h=0,d=0,c=!1,f=(n=0,0);n<i.length&&f<t.length;){if((b=i[n])instanceof Tu){var v=t[f];b.setState(v);var y=b.geoPoint.getValue();h+=g=y.lng,d+=w=y.lat,a=Math.min(a,g),s=Math.min(s,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),f+=1}n+=1}for(;f<t.length;){v=Tu.fromAny(t[f]);this.appendChildView(v);var g,w,m=v.geoPoint.getValue();h+=g=m.lng,d+=w=m.lat,a=Math.min(a,g),s=Math.min(s,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),n+=1,f+=1}for(;n<i.length;){var b;(b=i[n])instanceof Tu?this.removeChildView(b):n+=1}c||0===f?(this.geoCentroid.setAutoState(p.GeoPoint.origin()),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0})):(h/=f,d/=f,this.geoCentroid.setAutoState(new p.GeoPoint(h,d)),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(a,s,l,u),enumerable:!0,configurable:!0}));var S=this.geoBounds;return r.equals(S)||this.didSetGeoBounds(S,r),this},e.prototype.appendPoint=function(t,e){return t=Tu.fromAny(t),this.appendChildView(t,e),t},e.prototype.setPoint=function(t,e){return e=Tu.fromAny(e),this.setChildView(t,e),e},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Tu&&this.onInsertPoint(e)},e.prototype.onInsertPoint=function(t){t.requireUpdate(Gi.NeedsAnimate|Gi.NeedsProject)},e.prototype.didProject=function(e){for(var i=this.geoBounds,o=1/0,n=1/0,a=-1/0,s=-1/0,l=0,u=0,h=1/0,d=1/0,c=-1/0,f=-1/0,v=0,y=0,g=!1,w=0,m=0,b=this.childViews,S=0;S<b.length;S+=1){var C=b[S];if(C instanceof Tu){var P=C.geoPoint.getValue(),V=P.lng,T=P.lat;l+=V,u+=T,o=Math.min(o,V),n=Math.min(n,T),a=Math.max(V,a),s=Math.max(T,s),g=g||!isFinite(V)||!isFinite(T);var A=C.viewPoint.getValue(),F=A.x,M=A.y;h=Math.min(h,F),d=Math.min(d,M),c=Math.max(F,c),f=Math.max(M,f),v+=F,y+=M,g=g||!isFinite(F)||!isFinite(M),C.isGradientStop()&&(w+=1),m+=1}}g||0===m?(this.geoCentroid.setAutoState(p.GeoPoint.origin()),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0}),this.viewCentroid.setAutoState(r.PointR2.origin()),Object.defineProperty(this,"viewBounds",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),this.setCulled(!0)):(l/=m,u/=m,this.geoCentroid.setAutoState(new p.GeoPoint(l,u)),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(o,n,a,s),enumerable:!0,configurable:!0}),v/=m,y/=m,this.viewCentroid.setAutoState(new r.PointR2(v,y)),Object.defineProperty(this,"viewBounds",{value:new r.BoxR2(h,d,c,f),enumerable:!0,configurable:!0}),this.cullGeoFrame(e.geoFrame)),Object.defineProperty(this,"gradientStops",{value:w,enumerable:!0,configurable:!0});var O=this.geoBounds;i.equals(O)||this.didSetGeoBounds(O,i),t.prototype.didProject.call(this,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),0!==this.gradientStops?this.renderPolylineGradient(o,this.viewFrame):this.renderPolylineStroke(o,this.viewFrame),o.restore()}},e.prototype.renderPolylineStroke=function(t,e){var i=this.childViews,o=i.length,n=0;t.beginPath();for(var r=0;r<o;r+=1){var a=i[r];if(a instanceof Tu){var s=a.viewPoint.getValue(),l=s.x,u=s.y;0===n?t.moveTo(l,u):t.lineTo(l,u),n+=1}}if(0!==n){var h=this.stroke.value;if(null!==h){var p=Math.min(e.width,e.height),d=this.strokeWidth.getValue().pxValue(p);t.strokeStyle=h.toString(),t.lineWidth=d,t.stroke()}}},e.prototype.renderPolylineGradient=function(t,e){for(var i,o=this.stroke.getValue(),n=Math.min(e.width,e.height),r=this.strokeWidth.getValue().pxValue(n),a=this.childViews,s=a.length,l=0;l<s;l+=1){var u=a[l];if(u instanceof Tu){if(void 0!==i){var h=i.viewPoint.getValue().x,p=i.viewPoint.getValue().y,d=u.viewPoint.getValue().x,c=u.viewPoint.getValue().y,f=t.createLinearGradient(h,p,d,c),v=i.color.getValueOr(o),y=i.opacity.value;"number"==typeof y&&(v=v.alpha(y)),f.addColorStop(0,v.toString()),v=u.color.getValueOr(o),"number"==typeof(y=u.opacity.value)&&(v=v.alpha(y)),f.addColorStop(1,v.toString()),t.beginPath(),t.moveTo(h,p),t.lineTo(d,c),t.strokeStyle=f,t.lineWidth=r,t.stroke()}i=u}}},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCentroid.state,e=this.pageTransform.inverse(),i=e.transformX(t.x,t.y),o=e.transformY(t.x,t.y);return new r.BoxR2(i,o,i,o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestPolyline(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestPolyline=function(t,e,i,o){var n=this.childViews.length,r=0;i.beginPath();for(var a=0;a<n;a+=1){var s=this.childViews[a];if(s instanceof Tu){var l=s.viewPoint.getValue(),u=l.x,h=l.y;0===a?i.moveTo(u,h):i.lineTo(u,h),r+=1}}if(0!==r){var p=this.hitWidth.getStateOr(0),d=this.strokeWidth.value;if(null!==d){var c=Math.min(o.width,o.height);p=Math.max(p,d.pxValue(c))}if(i.lineWidth=p,i.isPointInStroke(t,e))return this}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.value=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:p.GeoPoint,state:p.GeoPoint.origin()})],e.prototype,"geoCentroid",void 0),m([ho({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewCentroid",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:Number})],e.prototype,"hitWidth",void 0),e}(Su),Ou=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.clipViewport&&this.clipViewport(e.clipViewport),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor);var i=e.points;void 0!==i&&this.points(i)},e.prototype.points=function(t,e){var i=this.childViews;if(void 0===t){for(var o=[],n=0;n<i.length;n+=1){(b=i[n])instanceof Tu&&o.push(b)}return o}for(var r=this.geoBounds,a=1/0,s=1/0,l=-1/0,u=-1/0,h=0,d=0,c=!1,f=(n=0,0);n<i.length&&f<t.length;){if((b=i[n])instanceof Tu){var v=t[f];b.setState(v);var y=b.geoPoint.getValue();h+=g=y.lng,d+=w=y.lat,a=Math.min(a,g),s=Math.min(s,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),f+=1}n+=1}for(;f<t.length;){v=Tu.fromAny(t[f]);this.appendChildView(v);var g,w,m=v.geoPoint.getValue();h+=g=m.lng,d+=w=m.lat,a=Math.min(a,g),s=Math.min(s,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),n+=1,f+=1}for(;n<i.length;){var b;(b=i[n])instanceof Tu?this.removeChildView(b):n+=1}c||0===f?(this.geoCentroid.setAutoState(p.GeoPoint.origin()),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0})):(h/=f,d/=f,this.geoCentroid.setAutoState(new p.GeoPoint(h,d)),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(a,s,l,u),enumerable:!0,configurable:!0}));var S=this.geoBounds;return r.equals(S)||this.didSetGeoBounds(S,r),this},e.prototype.appendPoint=function(t,e){return t=Tu.fromAny(t),this.appendChildView(t,e),t},e.prototype.setPoint=function(t,e){return e=Tu.fromAny(e),this.setChildView(t,e),e},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Tu&&this.onInsertPoint(e)},e.prototype.onInsertPoint=function(t){t.requireUpdate(Gi.NeedsAnimate|Gi.NeedsProject)},e.prototype.didProject=function(e){for(var i=this.geoBounds,o=1/0,n=1/0,a=-1/0,s=-1/0,l=0,u=0,h=1/0,d=1/0,c=-1/0,f=-1/0,v=0,y=0,g=!1,w=0,m=this.childViews,b=0;b<m.length;b+=1){var S=m[b];if(S instanceof Tu){var C=S.geoPoint.getValue(),P=C.lng,V=C.lat;l+=P,u+=V,o=Math.min(o,P),n=Math.min(n,V),a=Math.max(P,a),s=Math.max(V,s),g=g||!isFinite(P)||!isFinite(V);var T=S.viewPoint.getValue(),A=T.x,F=T.y;h=Math.min(h,A),d=Math.min(d,F),c=Math.max(A,c),f=Math.max(F,f),v+=A,y+=F,g=g||!isFinite(A)||!isFinite(F),w+=1}}if(g||0===w)this.geoCentroid.setAutoState(p.GeoPoint.origin()),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0}),this.viewCentroid.setAutoState(r.PointR2.origin()),Object.defineProperty(this,"viewBounds",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),this.setCulled(!0);else if(l/=w,u/=w,this.geoCentroid.setAutoState(new p.GeoPoint(l,u)),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(o,n,a,s),enumerable:!0,configurable:!0}),v/=w,y/=w,this.viewCentroid.setAutoState(new r.PointR2(v,y)),Object.defineProperty(this,"viewBounds",{value:new r.BoxR2(h,d,c,f),enumerable:!0,configurable:!0}),e.geoFrame.intersects(this.geoBounds)){var M=this.viewFrame,O=this.viewBounds,x=!(!this.clipViewport.state||M.xMin-4*M.width<=O.xMin&&O.xMax<=M.xMax+4*M.width&&M.yMin-4*M.height<=O.yMin&&O.yMax<=M.yMax+4*M.height)||!M.intersects(O);this.setCulled(x)}else this.setCulled(!0);var D=this.geoBounds;i.equals(D)||this.didSetGeoBounds(D,i),t.prototype.didProject.call(this,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderPolygon(o,this.viewFrame),o.restore()}},e.prototype.renderPolygon=function(t,e){var i=this.childViews,o=i.length,n=0;t.beginPath();for(var r=0;r<o;r+=1){var a=i[r];if(a instanceof Tu){var s=a.viewPoint.getValue(),l=s.x,u=s.y;0===n?t.moveTo(l,u):t.lineTo(l,u),n+=1}}if(t.closePath(),0!==n){var h=this.fill.value;null!==h&&(t.fillStyle=h.toString(),t.fill());var p=this.stroke.value,d=this.strokeWidth.value;if(null!==p&&null!==d){var c=Math.min(e.width,e.height);t.lineWidth=d.pxValue(c),t.strokeStyle=p.toString(),t.stroke()}}},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCentroid.state,e=this.pageTransform.inverse(),i=e.transformX(t.x,t.y),o=e.transformY(t.x,t.y);return new r.BoxR2(i,o,i,o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestPolygon(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestPolygon=function(t,e,i,o){var n=this.childViews.length,r=0;i.beginPath();for(var a=0;a<n;a+=1){var s=this.childViews[a];if(s instanceof Tu){var l=s.viewPoint.getValue(),u=l.x,h=l.y;0===a?i.moveTo(u,h):i.lineTo(u,h),r+=1}}if(i.closePath(),0!==r){if(null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var p=this.strokeWidth.value;if(null!==p){var d=Math.min(o.width,o.height);if(i.lineWidth=p.pxValue(d),i.isPointInStroke(t,e))return this}}}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Boolean,state:!0})],e.prototype,"clipViewport",void 0),m([ho({type:p.GeoPoint,state:p.GeoPoint.origin()})],e.prototype,"geoCentroid",void 0),m([ho({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewCentroid",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),e}(Su),xu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.BoxR2.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoPath&&this.geoPath(e.geoPath)},e.prototype.onSetGeoPath=function(t,e){var i=this.geoBounds,o=t.bounds;i.equals(o)||(Object.defineProperty(this,"geoBounds",{value:o,enumerable:!0,configurable:!0}),this.didSetGeoBounds(o,i),this.requireUpdate(Gi.NeedsProject))},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e);var i,o=e.geoProjection;this.viewPath.isAuto()?(i=this.geoPath.getValue().project(o),this.viewPath.setAutoState(i)):i=this.viewPath.getValue();if(this.viewCentroid.isAuto()){var n=this.geoCentroid.getValue(),r=o.project(n);this.viewCentroid.setAutoState(r)}Object.defineProperty(this,"viewBounds",{value:i.bounds,enumerable:!0,configurable:!0}),this.cullGeoFrame(e.geoFrame)},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse(),e=this.viewCentroid.getValue();if(e.isDefined()){var i=t.transformX(e.x,e.y),o=t.transformY(e.x,e.y);return new r.BoxR2(i,o,i,o)}return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),m([So({type:p.GeoPath,state:p.GeoPath.empty(),didSetValue:function(t,e){this.owner.onSetGeoPath(t,e)}})],e.prototype,"geoPath",void 0),m([So({type:r.PathR2,state:r.PathR2.empty()})],e.prototype,"viewPath",void 0),m([So({type:p.GeoPoint,state:p.GeoPoint.undefined()})],e.prototype,"geoCentroid",void 0),m([So({type:r.PointR2,state:r.PointR2.undefined()})],e.prototype,"viewCentroid",void 0),e}(Su),Du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth)},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.isAuto()&&this.geoCentroid.setAutoState(e.centroid())},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderLine(o,this.viewFrame),o.restore()}},e.prototype.renderLine=function(t,e){var i=this.viewPath.getValue();if(i.isDefined()){t.beginPath(),i.draw(t);var o=this.stroke.value,n=this.strokeWidth.value;if(null!==o&&null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r),t.strokeStyle=o.toString(),t.stroke()}}},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestLine(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestLine=function(t,e,i,o){var n=this.viewPath.getValue();if(n.isDefined()&&(i.beginPath(),n.draw(i),null!==this.stroke.value)){var r=this.hitWidth.getStateOr(0),a=this.strokeWidth.value;if(null!==a){var s=Math.min(o.width,o.height);r=Math.max(r,a.pxValue(s))}if(i.lineWidth=r,i.isPointInStroke(t,e))return this}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([ho({type:Number})],e.prototype,"hitWidth",void 0),e}(xu),Ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.clipViewport&&this.clipViewport(e.clipViewport)},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.isAuto()&&this.geoCentroid.setAutoState(e.centroid())},e.prototype.cullGeoFrame=function(t){var e;if(void 0===t&&(t=this.geoFrame),t.intersects(this.geoBounds)){var i=this.viewFrame,o=this.viewBounds;e=!(!this.clipViewport.state||i.xMin-4*i.width<=o.xMin&&o.xMax<=i.xMax+4*i.width&&i.yMin-4*i.height<=o.yMin&&o.yMax<=i.yMax+4*i.height)||!i.intersects(o)}else e=!0;this.setCulled(e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof pr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArea(o,this.viewFrame),o.restore()}},e.prototype.renderArea=function(t,e){var i=this.viewPath.getValue();if(i.isDefined()){t.beginPath(),i.draw(t);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value,r=this.strokeWidth.value;if(null!==n&&null!==r){var a=Math.min(e.width,e.height);t.lineWidth=r.pxValue(a),t.strokeStyle=n.toString(),t.stroke()}}},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArea(e,i,a,this.viewFrame),a.restore()}}return n},e.prototype.hitTestArea=function(t,e,i,o){var n=this.viewPath.getValue();if(n.isDefined()){if(i.beginPath(),n.draw(i),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var a=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(a),i.isPointInStroke(t,e))return this}}}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([ho({type:Boolean,state:!0})],e.prototype,"clipViewport",void 0),e}(xu),Lu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"iconBounds",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),jr.initView(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter)},e.prototype.onSetGeoCenter=function(t,e){if(t.isDefined()){var i=this.geoBounds,o=new p.GeoBox(t.lng,t.lat,t.lng,t.lat);i.equals(o)||(Object.defineProperty(this,"geoBounds",{value:o,enumerable:!0,configurable:!0}),this.didSetGeoBounds(o,i),this.requireUpdate(Gi.NeedsProject))}},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Tr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Ar){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onProject=function(e){var i;(t.prototype.onProject.call(this,e),this.viewCenter.isAuto())?(i=e.geoProjection.project(this.geoCenter.getValue()),this.viewCenter.setAutoState(i)):i=this.viewCenter.getValue();Object.defineProperty(this,"iconBounds",{value:null,enumerable:!0,configurable:!0});var o=!isFinite(i.x)||!isFinite(i.y)||!this.viewFrame.intersectsBox(this.viewBounds);this.setCulled(o)},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Gi.NeedsLayout)&&(t&=~Gi.NeedsLayout),0==(this.viewFlags&Gi.NeedsRender)&&(t&=~Gi.NeedsRender),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),Object.defineProperty(this,"iconBounds",{value:null,enumerable:!0,configurable:!0})},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;i instanceof pr&&!this.isHidden()&&!this.isCulled()&&this.renderIcon(i,this.viewBounds)},e.prototype.renderIcon=function(t,e){var i=this.graphics.value;if(null!==i){var o=this.canvas;null===o&&(o=document.createElement("canvas"),Object.defineProperty(this,"canvas",{value:o,enumerable:!0,configurable:!0}));var n=t.pixelRatio,a=e.width,s=e.height,l=o.getContext("2d");o.width===n*a&&o.height===n*s||(o.width=n*a,o.height=n*s,l.setTransform(n,0,0,n,0,0)),l.clearRect(0,0,a,s),l.beginPath();var u=new pr(l,n,this.theme.state,this.mood.state),h=new r.BoxR2(0,0,a,s);i.render(u,h)}else Object.defineProperty(this,"canvas",{value:null,enumerable:!0,configurable:!0})},e.prototype.onComposite=function(e){t.prototype.onComposite.call(this,e);var i=e.renderer;i instanceof pr&&!this.isHidden()&&!this.isCulled()&&this.compositeIcon(i,this.viewBounds)},e.prototype.compositeIcon=function(t,e){var i=this.canvas;null!==i&&t.context.drawImage(i,e.x,e.y,e.width,e.height)},e.prototype.doUpdateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.viewCenter.getValue(),n=i.transformX(o.x,o.y),a=i.transformY(o.x,o.y),s=this.iconWidth.value;s=s instanceof r.Length?s.pxValue(e):e;var l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(e):e;var u=n-s*this.xAlign.getValue(),h=a-l*this.yAlign.getValue();return new r.BoxR2(u,h,u+s,h+l)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.iconBounds;if(null===t){var e=this.viewFrame,i=Math.min(e.width,e.height),o=this.viewCenter.getValue(),n=this.iconWidth.value;n=n instanceof r.Length?n.pxValue(i):i;var a=this.iconWidth.state;a=a instanceof r.Length?a.pxValue(i):i;var s=Math.max(n,a),l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(i):i;var u=this.iconHeight.state;u=u instanceof r.Length?u.pxValue(i):i;var h=Math.max(l,u),p=o.x-s*this.xAlign.getValue(),d=o.y-h*this.yAlign.getValue();t=new r.BoxR2(p,d,p+s,d+h),Object.defineProperty(this,"iconBounds",{value:t,enumerable:!0,configurable:!0})}return t},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof pr){var a=r.context;a.save(),n=this.hitTestIcon(e,i,r,this.viewBounds),a.restore()}}return n},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:p.GeoPoint.origin(),didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.PointR2,state:r.PointR2.origin()})],e.prototype,"viewCenter",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Gi.NeedsLayout|Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"iconColor",void 0),m([So({extends:Ir,type:Object,updateFlags:Gi.NeedsRender|Gi.NeedsComposite})],e.prototype,"graphics",void 0),e}(Su),ku=function(){function t(){}return Object.defineProperty(t.prototype,"bounds",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),t}(),ju=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoProjection",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.project=function(t,e){return 1===arguments.length?this.geoProjection.project(t):this.geoProjection.project(t,e)},e.prototype.unproject=function(t,e){return 1===arguments.length?this.geoProjection.unproject(t):this.geoProjection.unproject(t,e)},Object.defineProperty(e.prototype,"mapCenter",{get:function(){return p.GeoPoint.origin()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapZoom",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapHeading",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapTilt",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.moveTo=function(t,e,i){},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoProjection=this.geoProjection,e.geoFrame=this.geoFrame,e.mapZoom=this.mapZoom,e.mapHeading=this.mapHeading,e.mapTilt=this.mapTilt,e},Object.defineProperty(e.prototype,"geoFrame",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),e.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsResize)&&(t|=Gi.NeedsProject),t},e.prototype.willProcess=function(e,i){if(t.prototype.willProcess.call(this,e,i),0!=(e&Gi.NeedsProject)){var o=this.geoProjection,n=o.withFrame(this.viewFrame);o!==n&&(Object.defineProperty(this,"geoProjection",{value:n,enumerable:!0,configurable:!0}),i.geoProjection=n)}},e.create=function(t){return void 0===t&&(t=new Eu(r.BoxR2.undefined())),new e(t)},e.powerFlags=Su.powerFlags|Gi.NeedsProject,e}(Su),Iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mapViewWillMove=function(t,e,i){},e.prototype.mapViewDidMove=function(t,e,i){},e}(bu),Eu=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"frame",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.withFrame=function(t){var i=t.xMin,o=t.yMin,n=t.xMax,a=t.yMax,s=n-i,l=a-o,u=s/l;if(u<2){var h=(l-s/2)/2;o+=h,a-=h,t=new r.BoxR2(i,o,n,a)}else if(u>2){var p=(s-2*l)/2;i+=p,n-=p,t=new r.BoxR2(i,o,n,a)}return new e(t)},Object.defineProperty(e.prototype,"bounds",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),e.prototype.project=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.lat,t=t.lng));var i=this.frame,o=i.xMin+(180+t)/360*i.width,n=i.yMax-(90+e)/180*i.height;return new r.PointR2(o,n)},e.prototype.unproject=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x));var i=this.frame,o=360*(t-i.xMin)/i.width-180,n=180*(i.yMax-e)/i.height-90;return new p.GeoPoint(o,n)},e}(ku),Wu=function(){function t(t){Object.defineProperty(this,"map",{value:t,enumerable:!0,configurable:!0})}return Object.defineProperty(t.prototype,"bounds",{get:function(){var t=this.map.getBounds();return new p.GeoBox(t.getWest(),t.getSouth(),t.getEast(),t.getNorth())},enumerable:!1,configurable:!0}),t.prototype.project=function(t,e){var i;i="number"==typeof t?new mapboxgl.LngLat(t,e):t;var o=this.map.project(i);return new r.PointR2(o.x,o.y)},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?new mapboxgl.Point(t,e):Array.isArray(t)?t:new mapboxgl.Point(t.x,t.y);var o=this.map.unproject(i);return new p.GeoPoint(o.lng,o.lat)},t}(),Nu=function(t){function i(e){var i=t.call(this)||this;Object.defineProperty(i,"map",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"geoProjection",{value:new Wu(e),enumerable:!0,configurable:!0});var o=e.getCenter();return Object.defineProperty(i,"mapCenter",{value:new p.GeoPoint(o.lng,o.lat),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapZoom",{value:e.getZoom(),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapHeading",{value:e.getBearing(),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapTilt",{value:e.getPitch(),enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.startRepositioning=i.startRepositioning.bind(i),i.stopRepositioning=i.stopRepositioning.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.on("render",this.onMapRender),t.on("movestart",this.startRepositioning),t.on("moveend",this.stopRepositioning)},i.prototype.project=function(t,e){return 1===arguments.length?this.geoProjection.project(t):this.geoProjection.project(t,e)},i.prototype.unproject=function(t,e){return 1===arguments.length?this.geoProjection.unproject(t):this.geoProjection.unproject(t,e)},i.prototype.moveTo=function(t,i,o){o=void 0===o||!0===o?this.getLookOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(o);var n={};void 0!==t&&(t=p.GeoPoint.fromAny(t),this.mapCenter.equivalentTo(t,1e-5)||(n.center=t)),void 0===i||e.Equivalent(this.mapZoom,i,1e-5)||(n.zoom=i),o instanceof s.Timing&&(n.duration=o.duration),this.map.flyTo(n)},i.prototype.mapWillMove=function(t,e){var i=this.viewController;null!==i&&void 0!==i.mapViewWillMove&&i.mapViewWillMove(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.mapViewWillMove&&a.mapViewWillMove(t,e,this)}},i.prototype.mapDidMove=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.mapViewDidMove&&r.mapViewDidMove(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.mapViewDidMove&&a.mapViewDidMove(t,e,this)},i.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoProjection=this.geoProjection,e.geoFrame=this.geoFrame,e.mapZoom=this.mapZoom,e.mapHeading=this.mapHeading,e.mapTilt=this.mapTilt,e},Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.map.getBounds();return new p.GeoBox(t.getWest(),t.getSouth(),t.getEast(),t.getNorth())},enumerable:!1,configurable:!0}),i.prototype.needsProcess=function(t,e){return 0!=(t&Gi.NeedsResize)&&(t|=Gi.NeedsProject),t},i.prototype.onMapRender=function(){var t=this.map,e=!1,i=this.mapCenter,o=t.getCenter(),n=new p.GeoPoint(o.lng,o.lat);i.equals(n)||(Object.defineProperty(this,"mapCenter",{value:n,enumerable:!0,configurable:!0}),e=!0);var r=this.mapZoom,a=t.getZoom();r!==a&&(Object.defineProperty(this,"mapZoom",{value:a,enumerable:!0,configurable:!0}),e=!0);var s=this.mapHeading,l=t.getBearing();s!==l&&(Object.defineProperty(this,"mapHeading",{value:l,enumerable:!0,configurable:!0}),e=!0);var u=this.mapTilt,h=t.getPitch();u!==h&&(Object.defineProperty(this,"mapTilt",{value:h,enumerable:!0,configurable:!0}),e=!0),!e||this.isHidden()||this.isCulled()||this.requireUpdate(Gi.NeedsProject,!0)},i.prototype.startRepositioning=function(){this.mapWillMove(this.mapCenter,this.mapZoom)},i.prototype.stopRepositioning=function(){this.mapDidMove(this.mapCenter,this.mapZoom)},i.prototype.overlayCanvas=function(){if(this.isMounted())return this.getSuperView(cr);var t=this.map;Zn.fromNode(t.getContainer());var e=Zn.fromNode(t.getCanvasContainer()),i=e.append(cr);return i.setEventNode(e.node),i.appendChildView(this),i},i.powerFlags=Su.powerFlags|Gi.NeedsProject,i}(Su),Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mapViewWillMove=function(t,e,i){},e.prototype.mapViewDidMove=function(t,e,i){},e}(bu),Bu=function(){function t(t){Object.defineProperty(this,"mapView",{value:t,enumerable:!0,configurable:!0})}return Object.defineProperty(t.prototype,"map",{get:function(){return this.mapView.map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){var t=this.mapView.map.getBounds(),e=t.getSouthWest(),i=t.getNorthEast();return new p.GeoBox(e.lng(),e.lat(),i.lng(),i.lat())},enumerable:!1,configurable:!0}),t.prototype.project=function(t,e){var i;i="number"==typeof t?new google.maps.LatLng(e,t):Array.isArray(t)?new google.maps.LatLng(t[1],t[0]):new google.maps.LatLng(t.lat,t.lng);var o=this.mapView.mapOverlay.getProjection().fromLatLngToContainerPixel(i);return new r.PointR2(o.x,o.y)},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?new google.maps.Point(t,e):Array.isArray(t)?new google.maps.Point(t[0],t[1]):new google.maps.Point(t.x,t.y);var o=this.mapView.mapOverlay.getProjection().fromContainerPixelToLatLng(i);return new p.GeoPoint(o.lng(),o.lat())},t}(),Hu=function(t){function i(e){var i=t.call(this)||this;Object.defineProperty(i,"map",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"geoProjection",{value:new Bu(i),enumerable:!0,configurable:!0});var o=e.getCenter();return Object.defineProperty(i,"mapCenter",{value:new p.GeoPoint(o.lng(),o.lat()),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapZoom",{value:e.getZoom(),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapHeading",{value:e.getHeading(),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapTilt",{value:e.getTilt(),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapOverlay",{value:null,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){},i.prototype.project=function(t,e){return 1===arguments.length?this.geoProjection.project(t):this.geoProjection.project(t,e)},i.prototype.unproject=function(t,e){return 1===arguments.length?this.geoProjection.unproject(t):this.geoProjection.unproject(t,e)},i.prototype.moveTo=function(t,i,o){o=void 0===o||!0===o?this.getLookOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(o),void 0!==t&&(t=p.GeoPoint.fromAny(t),this.mapCenter.equivalentTo(t,1e-5)||this.map.panTo(t)),void 0===i||e.Equivalent(this.mapZoom,i,1e-5)||this.map.setZoom(i)},i.prototype.mapWillMove=function(t,e){var i=this.viewController;null!==i&&void 0!==i.mapViewWillMove&&i.mapViewWillMove(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.mapViewWillMove&&a.mapViewWillMove(t,e,this)}},i.prototype.mapDidMove=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.mapViewDidMove&&r.mapViewDidMove(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.mapViewDidMove&&a.mapViewDidMove(t,e,this)},i.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoProjection=this.geoProjection,e.geoFrame=this.geoFrame,e.mapZoom=this.mapZoom,e.mapHeading=this.mapHeading,e.mapTilt=this.mapTilt,e},Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.map.getBounds(),e=t.getSouthWest(),i=t.getNorthEast();return new p.GeoBox(e.lng(),e.lat(),i.lng(),i.lat())},enumerable:!1,configurable:!0}),i.prototype.onMapRender=function(){this.mapWillMove(this.mapCenter,this.mapZoom);var t=this.map,e=t.getCenter();Object.defineProperty(this,"mapCenter",{value:new p.GeoPoint(e.lng(),e.lat()),enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapZoom",{value:t.getZoom(),enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapHeading",{value:t.getHeading(),enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapTilt",{value:t.getTilt(),enumerable:!0,configurable:!0}),this.isHidden()||this.isCulled()||this.requireUpdate(Gi.NeedsProject,!0),this.mapDidMove(this.mapCenter,this.mapZoom)},i.prototype.overlayCanvas=function(){if(this.isMounted())return this.getSuperView(cr);var t=new(function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"mapView",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"canvasView",{value:cr.create(),enumerable:!0,configurable:!0}),i.canvasView.appendChildView(e),i}return w(e,t),e.prototype.onAdd=function(){var t=this.getPanes();i.materializeAncestors(t.overlayMouseTarget).parentView.parentView.appendChildView(this.canvasView)},e.prototype.onRemove=function(){this.canvasView.remove()},e.prototype.draw=function(){this.mapView.onMapRender()},e}(google.maps.OverlayView))(this);return t.setMap(this.map),Object.defineProperty(this,"mapOverlay",{value:t,enumerable:!0,configurable:!0}),t.canvasView},i.materializeAncestors=function(t){var e=t.parentNode;return e instanceof HTMLElement&&!e.view&&i.materializeAncestors(e),Zn.fromNode(t)},i.powerFlags=Su.powerFlags|Gi.NeedsProject,i}(Su),qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mapViewWillMove=function(t,e,i){},e.prototype.mapViewDidMove=function(t,e,i){},e}(bu),zu={init:function(){void 0===zu.webMercatorUtils&&window.require(["esri/geometry/support/webMercatorUtils"],(function(t){zu.webMercatorUtils=t}))}},Yu=function(t){function e(){var e=t.call(this)||this;return zu.init(),e}return w(e,t),e.prototype.mapWillMove=function(t,e){var i=this.viewController;null!==i&&void 0!==i.mapViewWillMove&&i.mapViewWillMove(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var a=o[n];void 0!==a.mapViewWillMove&&a.mapViewWillMove(t,e,this)}},e.prototype.mapDidMove=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.mapViewDidMove&&r.mapViewDidMove(t,e,this)}var a=this.viewController;null!==a&&void 0!==a.mapViewDidMove&&a.mapViewDidMove(t,e,this)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoProjection=this.geoProjection,e.geoFrame=this.geoFrame,e.mapZoom=this.mapZoom,e.mapHeading=this.mapHeading,e.mapTilt=this.mapTilt,e},e.powerFlags=Su.powerFlags|Gi.NeedsProject,e}(Su),Xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mapViewWillMove=function(t,e,i){},e.prototype.mapViewDidMove=function(t,e,i){},e}(bu),Gu=function(){function t(t){zu.init(),Object.defineProperty(this,"map",{value:t,enumerable:!0,configurable:!0})}return Object.defineProperty(t.prototype,"bounds",{get:function(){var t=this.map.extent;return null!==t&&(t=zu.webMercatorUtils.webMercatorToGeographic(t)),null!==t?new p.GeoBox(t.xmin,t.ymin,t.xmax,t.ymax):p.GeoBox.globe()},enumerable:!1,configurable:!0}),t.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.PointR2(o.x,o.y):r.PointR2.origin()},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},t}(),Ku=function(t){function i(e){var i=t.call(this)||this;Object.defineProperty(i,"map",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"geoProjection",{value:new Gu(e),enumerable:!0,configurable:!0});var o=e.center;return Object.defineProperty(i,"mapCenter",{value:new p.GeoPoint(o.longitude,o.latitude),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapZoom",{value:e.zoom,enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapHeading",{value:e.rotation,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.project=function(t,e){return 1===arguments.length?this.geoProjection.project(t):this.geoProjection.project(t,e)},i.prototype.unproject=function(t,e){return 1===arguments.length?this.geoProjection.unproject(t):this.geoProjection.unproject(t,e)},Object.defineProperty(i.prototype,"mapTilt",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.moveTo=function(t,i,o){o=void 0===o||!0===o?this.getLookOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(o);var n={};void 0!==t&&(t=p.GeoPoint.fromAny(t),this.mapCenter.equivalentTo(t,1e-5)||(n.center=[t.lng,t.lat])),void 0===i||e.Equivalent(this.mapZoom,i,1e-5)||(n.zoom=i);var r={};o instanceof s.Timing&&(r.duration=o.duration),this.map.goTo(n,r)},Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.map.extent;return null!==t&&(t=zu.webMercatorUtils.webMercatorToGeographic(t)),null!==t?new p.GeoBox(t.xmin,t.ymin,t.xmax,t.ymax):p.GeoBox.globe()},enumerable:!1,configurable:!0}),i.prototype.onMapRender=function(){this.mapWillMove(this.mapCenter,this.mapZoom);var t=this.map,e=t.center;Object.defineProperty(this,"mapCenter",{value:new p.GeoPoint(e.longitude,e.latitude),enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapZoom",{value:t.zoom,enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapHeading",{value:t.rotation,enumerable:!0,configurable:!0}),this.isHidden()||this.isCulled()||this.requireUpdate(Gi.NeedsProject,!1),this.mapDidMove(this.mapCenter,this.mapZoom)},i.prototype.overlayCanvas=function(){if(this.isMounted())return this.getSuperView(cr);var t=this.map,e=Zn.fromNode(t.container),i=Zn.fromNode(e.node.querySelector(".esri-view-root")),o=Zn.fromNode(i.node.querySelector(".esri-overlay-surface")).append(cr);return o.setEventNode(i.node),o.appendChildView(this),o},i}(Yu),Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Xu),_u=function(){function t(t){zu.init(),Object.defineProperty(this,"map",{value:t,enumerable:!0,configurable:!0})}return Object.defineProperty(t.prototype,"bounds",{get:function(){var t=this.map.extent;return null!==t&&(t=zu.webMercatorUtils.webMercatorToGeographic(t)),null!==t?new p.GeoBox(t.xmin,t.ymin,t.xmax,t.ymax):p.GeoBox.globe()},enumerable:!1,configurable:!0}),t.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.PointR2(o.x,o.y):r.PointR2.origin()},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},t}(),Qu=function(t){function i(e){var i=t.call(this)||this;Object.defineProperty(i,"map",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"geoProjection",{value:new _u(e),enumerable:!0,configurable:!0});var o=e.center;return Object.defineProperty(i,"mapCenter",{value:new p.GeoPoint(o.longitude,o.latitude),enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapZoom",{value:e.zoom,enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapHeading",{value:e.camera.heading,enumerable:!0,configurable:!0}),Object.defineProperty(i,"mapTilt",{value:e.camera.tilt,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.project=function(t,e){return 1===arguments.length?this.geoProjection.project(t):this.geoProjection.project(t,e)},i.prototype.unproject=function(t,e){return 1===arguments.length?this.geoProjection.unproject(t):this.geoProjection.unproject(t,e)},i.prototype.moveTo=function(t,i,o){o=void 0===o||!0===o?this.getLookOr(Qt.timing,he.ambient,!1):s.Timing.fromAny(o);var n={};void 0!==t&&(t=p.GeoPoint.fromAny(t),this.mapCenter.equivalentTo(t,1e-5)||(n.center=[t.lng,t.lat])),void 0===i||e.Equivalent(this.mapZoom,i,1e-5)||(n.zoom=i);var r={};o instanceof s.Timing&&(r.duration=o.duration),this.map.goTo(n,r)},Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.map.extent;return null!==t&&(t=zu.webMercatorUtils.webMercatorToGeographic(t)),null!==t?new p.GeoBox(t.xmin,t.ymin,t.xmax,t.ymax):p.GeoBox.globe()},enumerable:!1,configurable:!0}),i.prototype.onMapRender=function(){this.mapWillMove(this.mapCenter,this.mapZoom);var t=this.map,e=t.center;Object.defineProperty(this,"mapCenter",{value:new p.GeoPoint(e.longitude,e.latitude),enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapZoom",{value:t.zoom,enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapHeading",{value:t.camera.heading,enumerable:!0,configurable:!0}),Object.defineProperty(this,"mapTilt",{value:t.camera.tilt,enumerable:!0,configurable:!0}),this.isHidden()||this.isCulled()||this.requireUpdate(Gi.NeedsProject,!1),this.mapDidMove(this.mapCenter,this.mapZoom)},i.prototype.overlayCanvas=function(){if(this.isMounted())return this.getSuperView(cr);var t=this.map,e=Zn.fromNode(t.container),i=Zn.fromNode(e.node.querySelector(".esri-view-root")),o=Zn.fromNode(i.node.querySelector(".esri-view-surface")).append(cr);return o.appendChildView(this),o},i}(Yu),Ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Xu);t.AbstractMomentumGesture=Yo,t.AbstractPositionGesture=No,t.AbstractScaleGesture=Qo,t.AngleViewAnimator=Oo,t.Animator=bo,t.Arc=br,t.ArcView=Sr,t.AreaPlotComponent=Tl,t.AreaPlotTrait=ml,t.AreaPlotView=cl,t.AttributeAnimator=Nn,t.AxisComponent=pu,t.AxisTrait=au,t.AxisView=eu,t.BooleanAttributeAnimator=Hn,t.BooleanComponentProperty=aa,t.BooleanModelProperty=L,t.BooleanTraitProperty=W,t.BooleanViewAnimator=Ao,t.BooleanViewProperty=yo,t.BottomAxisComponent=fu,t.BottomAxisTrait=uu,t.BottomAxisView=nu,t.BottomTickView=$l,t.BoxShadow=Bt,t.BoxShadowForm=qt,t.BoxShadowInterpolator=Ht,t.BoxShadowParser=zt,t.BoxShadowStyleAnimator=vn,t.BrightnessFeel=le,t.BubblePlotComponent=Pl,t.BubblePlotTrait=gl,t.BubblePlotView=pl,t.ButtonGlow=ba,t.ButtonItem=Pa,t.ButtonMembrane=Sa,t.ButtonStack=Va,t.ButtonStackController=Ta,t.CanvasRenderer=pr,t.CanvasView=cr,t.CanvasViewController=fr,t.CellComponent=Ia,t.CellTrait=ja,t.CellView=ka,t.ChartComponent=wu,t.ChartTrait=gu,t.ChartView=yu,t.CircleIcon=Or,t.CircleIconInterpolator=xr,t.ColComponent=Na,t.ColLayout=Ra,t.ColTrait=Wa,t.ColView=Ea,t.Color=St,t.ColorAttributeAnimator=Yn,t.ColorChannel=Vt,t.ColorChannelParser=Tt,t.ColorForm=Ct,t.ColorLook=te,t.ColorParser=Pt,t.ColorStop=Lt,t.ColorStopInterpolator=kt,t.ColorStopListParser=It,t.ColorStopParser=jt,t.ColorStyleAnimator=cn,t.ColorViewAnimator=Ro,t.Component=qr,t.ComponentContext=Hr,t.ComponentFastener=ya,t.ComponentManager=zr,t.ComponentManagerService=$r,t.ComponentModel=la,t.ComponentProperty=oa,t.ComponentService=Qr,t.ComponentTrait=ha,t.ComponentView=da,t.ComponentViewTrait=fa,t.CompositeComponent=ma,t.CompoundModel=dt,t.ContinuousScaleAnimator=ol,t.CssContext=Fn,t.CssRule=Mn,t.DataPointComponent=el,t.DataPointTrait=$s,t.DataPointView=Js,t.DataSetComponent=il,t.DataSetTrait=tl,t.DeckBar=xs,t.DeckButton=Ts,t.DeckButtonBackIcon=Fs,t.DeckButtonCloseIcon=As,t.DeckButtonLabel=Ms,t.DeckCard=Ds,t.DeckPost=ms,t.DeckRail=bs,t.DeckSlider=Cs,t.DeckSliderItem=Ps,t.DeckSlot=Ss,t.DeckView=Rs,t.DeckViewBar=Ls,t.DeckViewCard=js,t.DeckViewController=Es,t.DialComponent=Hs,t.DialTrait=Bs,t.DialView=Us,t.DisclosureButton=Fa,t.DisclosureTreeCell=is,t.DisplayManager=Qi,t.DisplayService=ao,t.DomManager=er,t.DomService=ir,t.DownlinkTrait=lt,t.DrawerButton=ws,t.DrawerView=ys,t.DrawerViewController=gs,t.DrawingRenderer=sr,t.ElementView=Gn,t.ElementViewController=Kn,t.EnclosedIcon=Lr,t.EnclosedIconInterpolator=kr,t.EphemeralStorageManager=_r,t.EquirectangularGeoMapProjection=Eu,t.EsriMapView=Ku,t.EsriMapViewController=Zu,t.EsriMapViewProjection=Gu,t.EsriProjection=zu,t.EsriSceneView=Qu,t.EsriSceneViewController=Ju,t.EsriSceneViewProjection=_u,t.EsriView=Yu,t.EsriViewController=Xu,t.ExecuteManager=Yr,t.ExecuteService=ta,t.Feel=re,t.FeelVector=ne,t.FeelVectorInterpolator=ae,t.FillView=yr,t.FilledIcon=Ar,t.FloatingButton=Ca,t.Font=gt,t.FontFamily=vt,t.FontFamilyParser=yt,t.FontFamilyStyleAnimator=fn,t.FontForm=mt,t.FontInterpolator=wt,t.FontLook=ee,t.FontParser=bt,t.FontSize=ct,t.FontViewAnimator=Lo,t.GaugeComponent=Ys,t.GaugeTrait=zs,t.GaugeView=qs,t.GenericComponent=wa,t.GenericModel=pt,t.GenericTrait=st,t.GeoMapProjection=ku,t.GeoMapView=ju,t.GeoMapViewController=Iu,t.GestureInput=Eo,t.GoogleMapProjection=Bu,t.GoogleMapView=Hu,t.GoogleMapViewController=qu,t.GraphComponent=Ml,t.GraphTrait=Fl,t.GraphView=Al,t.GraphicsIconView=Er,t.GraphicsRenderer=or,t.GraphicsView=nr,t.GraphicsViewController=rr,t.HexColorParser=Mt,t.HistoryManager=Gr,t.HistoryService=ea,t.HistoryState=Xr,t.HslColor=xt,t.HslColorInterpolator=Dt,t.HslColorParser=Rt,t.HtmlIconView=Br,t.HtmlView=Zn,t.HtmlViewController=_n,t.Icon=Tr,t.IconButton=Aa,t.IconTreeCell=os,t.IconView=jr,t.IconViewAnimator=Ir,t.InputTokenView=xa,t.InputTokenViewController=Da,t.InterpolatedFeel=se,t.LayerView=ar,t.LayoutManager=Ji,t.LayoutService=so,t.LeftAxisComponent=vu,t.LeftAxisTrait=hu,t.LeftAxisView=ru,t.LeftTickView=tu,t.LengthAttributeAnimator=zn,t.LengthLook=$t,t.LengthStyleAnimator=pn,t.LengthStyleAnimatorConstraint=dn,t.LengthViewAnimator=xo,t.LengthViewAnimatorConstraint=Do,t.LengthViewPropertyConstraint=mo,t.LineHeight=ft,t.LinePlotComponent=Vl,t.LinePlotTrait=wl,t.LinePlotView=dl,t.LinearGradient=Et,t.LinearGradientAngleParser=Nt,t.LinearGradientInterpolator=Wt,t.LinearGradientParser=Ut,t.ListItem=hs,t.ListItemController=ps,t.ListView=us,t.ListViewController=ds,t.Look=Qt,t.LookVector=_t,t.MapArcView=Fu,t.MapAreaView=Ru,t.MapCircleView=Au,t.MapDownlinkTrait=ht,t.MapGraphicsView=mu,t.MapGraphicsViewController=bu,t.MapGridTile=Cu,t.MapGridView=Pu,t.MapIconView=Lu,t.MapLayerView=Su,t.MapLineView=Du,t.MapPathView=xu,t.MapPointView=Tu,t.MapPolygonView=Ou,t.MapPolylineView=Mu,t.MapRasterView=Vu,t.MapboxProjection=Wu,t.MapboxView=Nu,t.MapboxViewController=Uu,t.MediaRule=Rn,t.Modal=to,t.ModalManager=eo,t.ModalService=uo,t.Model=c,t.ModelContext=d,t.ModelController=f,t.ModelDownlink=_,t.ModelDownlinkContext=Z,t.ModelEventDownlink=J,t.ModelFastener=U,t.ModelListDownlink=tt,t.ModelManager=y,t.ModelManagerService=T,t.ModelMapDownlink=it,t.ModelProperty=x,t.ModelService=P,t.ModelTrait=H,t.ModelValueDownlink=rt,t.MomentumGesture=Zo,t.MomentumGestureInput=zo,t.Mood=he,t.MoodMatrix=de,t.MoodVector=pe,t.MouseMomentumGesture=Ko,t.MousePositionGesture=Ho,t.MouseScaleGesture=tn,t.NodeView=jn,t.NodeViewController=In,t.NumberAttributeAnimator=qn,t.NumberComponentProperty=sa,t.NumberLook=Jt,t.NumberModelProperty=k,t.NumberStyleAnimator=un,t.NumberStyleAnimatorConstraint=hn,t.NumberTickGenerator=Kl,t.NumberTraitProperty=N,t.NumberViewAnimator=Fo,t.NumberViewAnimatorConstraint=Mo,t.NumberViewProperty=go,t.NumberViewPropertyConstraint=wo,t.OpacityFeel=ue,t.PaintingRenderer=hr,t.PathContext=lr,t.PathRenderer=ur,t.PieComponent=Qs,t.PieTrait=Zs,t.PieView=Gs,t.PlotComponent=bl,t.PlotTrait=fl,t.PlotView=ll,t.PointerMomentumGesture=Xo,t.PointerPositionGesture=Uo,t.PointerScaleGesture=Jo,t.PolygonIcon=Dr,t.PolygonIconInterpolator=Rr,t.PopoverView=fs,t.PopoverViewController=vs,t.PositionGesture=qo,t.PositionGestureInput=Wo,t.RasterView=vr,t.Rect=wr,t.RectView=mr,t.RefreshManager=S,t.RefreshService=A,t.RgbColor=At,t.RgbColorInterpolator=Ft,t.RgbColorParser=Ot,t.RightAxisComponent=cu,t.RightAxisTrait=lu,t.RightAxisView=ou,t.RightTickView=Jl,t.RowComponent=Ha,t.RowTrait=Ba,t.RowView=Ua,t.ScaleGesture=en,t.ScaleGestureInput=_o,t.ScaledView=sl,t.ScaledXView=nl,t.ScaledXYView=al,t.ScaledYView=rl,t.ScatterPlotComponent=Sl,t.ScatterPlotTrait=vl,t.ScatterPlotView=ul,t.ScrimView=cs,t.SeriesPlotComponent=Cl,t.SeriesPlotTrait=yl,t.SeriesPlotView=hl,t.ShadowLook=ie,t.SliceComponent=_s,t.SliceTrait=Ks,t.SliceView=Xs,t.StorageManager=Kr,t.StorageService=ia,t.StringAttributeAnimator=Bn,t.StringComponentProperty=ra,t.StringModelProperty=R,t.StringStyleAnimator=ln,t.StringTraitProperty=E,t.StringViewAnimator=To,t.StringViewProperty=vo,t.StrokeView=gr,t.StyleAnimator=nn,t.StyleAnimatorConstraint=an,t.StyleContext=on,t.StyleMap=gn,t.StyleRule=xn,t.StyleSheet=kn,t.StyleValue=Yt,t.StyleValueForm=Xt,t.StyleValueParser=Gt,t.StyleView=Qn,t.StyleViewController=Jn,t.SvgIconView=Ur,t.SvgView=$n,t.SvgViewController=tr,t.TableComponent=Ya,t.TableLayout=La,t.TableTrait=za,t.TableView=qa,t.TextRun=Pr,t.TextRunView=Vr,t.TextView=En,t.TextViewController=Wn,t.Theme=ce,t.ThemeManager=$i,t.ThemeMatrix=fe,t.ThemeService=lo,t.TickGenerator=Gl,t.TickView=_l,t.TimeTickGenerator=Zl,t.TimingLook=oe,t.TitleDeckBar=Ws,t.TitleDeckViewController=Ns,t.TitleTreeCell=_a,t.ToAttributeString=Kt,t.ToStyleString=Zt,t.TokenView=Ma,t.TokenViewController=Oa,t.TopAxisComponent=du,t.TopAxisTrait=su,t.TopAxisView=iu,t.TopTickView=Ql,t.TouchMomentumGesture=Go,t.TouchPositionGesture=Bo,t.TouchScaleGesture=$o,t.Trait=v,t.TraitFastener=G,t.TraitModel=z,t.TraitProperty=j,t.TraitService=F,t.TransformAttributeAnimator=Xn,t.TransformStyleAnimator=yn,t.TransformViewAnimator=ko,t.TreeCell=Ka,t.TreeCellController=Za,t.TreeLeaf=Qa,t.TreeLeafController=ns,t.TreeLimb=es,t.TreeLimbController=rs,t.TreeRoot=Xa,t.TreeSeed=Ga,t.TreeStem=$a,t.TreeStemController=ss,t.TreeVein=Ja,t.TreeVeinController=as,t.TreeView=ts,t.TreeViewController=ls,t.TypesetView=Cr,t.ValueDownlinkTrait=ut,t.VectorIcon=Fr,t.VectorIconInterpolator=Mr,t.View=Gi,t.ViewAnimator=So,t.ViewAnimatorConstraint=Po,t.ViewContext=Xi,t.ViewController=Ki,t.ViewFastener=jo,t.ViewManager=Zi,t.ViewManagerService=no,t.ViewProperty=ho,t.ViewPropertyConstraint=co,t.ViewService=io,t.Viewport=Yi,t.ViewportManager=_i,t.ViewportService=ro,t.WarpManager=C,t.WarpService=O,t.WebGLRenderer=dr,t.WebStorageManager=Zr,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-toolkit.min.js.map