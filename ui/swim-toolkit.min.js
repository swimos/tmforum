// swim-toolkit-3.11.0; copyright 2015-2021 Swim inc.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@swim/util"),require("@swim/client"),require("@swim/structure"),require("@swim/uri"),require("@swim/math"),require("@swim/codec"),require("@swim/mapping"),require("@swim/time"),require("@swim/constraint"),require("@swim/collections"),require("@swim/geo")):"function"==typeof define&&define.amd?define(["exports","@swim/util","@swim/client","@swim/structure","@swim/uri","@swim/math","@swim/codec","@swim/mapping","@swim/time","@swim/constraint","@swim/collections","@swim/geo"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).swim=t.swim||{},t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim)}(this,(function(t,e,i,o,n,r,s,a,l,u,h,p){"use strict";var d={default:function(){return{updateTime:performance.now()}}},c={initModelDownlinks:function(t){var e=Object.getPrototypeOf(t);do{if(Object.prototype.hasOwnProperty.call(e,"modelDownlinkConstructors")){var i=e.modelDownlinkConstructors;for(var o in i){var n=i[o];if(void 0!==n.prototype.consume&&!t.hasModelDownlink(o)){var r=new n(t,o);t.setModelDownlink(o,r)}}}e=Object.getPrototypeOf(e)}while(null!==e)},getModelDownlinkConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"modelDownlinkConstructors")){var i=e.modelDownlinkConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateModelDownlink:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelDownlinkConstructors")||(o.modelDownlinkConstructors={}),o.modelDownlinkConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelDownlink(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelDownlink(i.toString(),e)),e},configurable:!0,enumerable:!0})}},v=function(){function t(){Object.defineProperty(this,"modelFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"modelObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traits",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitMap",{value:{},enumerable:!0,configurable:!0})}return t.prototype.initModel=function(t){},t.prototype.setModelFlags=function(t){Object.defineProperty(this,"modelFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.addModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelObserver(t),Object.defineProperty(this,"modelObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelObserver(t),this.didAddModelObserver(t))},t.prototype.willAddModelObserver=function(t){},t.prototype.onAddModelObserver=function(t){},t.prototype.didAddModelObserver=function(t){},t.prototype.removeModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelObserver(t),Object.defineProperty(this,"modelObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelObserver(t),this.didRemoveModelObserver(t))},t.prototype.willRemoveModelObserver=function(t){},t.prototype.onRemoveModelObserver=function(t){},t.prototype.didRemoveModelObserver=function(t){},t.prototype.attachParentModel=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower());for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].attachParentModel(t)},t.prototype.detachParentModel=function(t){try{for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].detachParentModel(t)}finally{if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}}},t.prototype.willSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willSetParentModel(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillSetParentModel&&s.modelWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onSetParentModel(t,e)},t.prototype.didSetParentModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidSetParentModel&&r.modelDidSetParentModel(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didSetParentModel(t,e)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertChildModel(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillInsertChildModel&&s.modelWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertChildModel(t,e)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertChildModel&&r.modelDidInsertChildModel(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertChildModel(t,e)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveChildModel(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillRemoveChildModel&&r.modelWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveChildModel(t)},t.prototype.didRemoveChildModel=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveChildModel&&n.modelDidRemoveChildModel(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didRemoveChildModel(t)},t.prototype.getSuperModel=function(t){var e=this.parentModel;return null===e?null:e instanceof t?e:e.getSuperModel(t)},t.prototype.getBaseModel=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseModel(t);return null!==i?i:e instanceof t?e:null},Object.defineProperty(t.prototype,"traitCount",{get:function(){return this.traits.length},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.traits;return 0!==t.length?t[0]:null},t.prototype.lastTrait=function(){var t=this.traits;return 0!==t.length?t[t.length-1]:null},t.prototype.nextTrait=function(t){var e=this.traits,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},t.prototype.previousTrait=function(t){var e=this.traits,i=e.indexOf(t);return i-1>=0?e[i-1]:null},t.prototype.forEachTrait=function(t,e){for(var i,o=this.traits,n=0,r=o.length;n<r;n+=1){var s=o[n];if(void 0!==(i=t.call(e,s)))break}return i},t.prototype.getTrait=function(t){if("string"==typeof t){if(void 0!==(n=this.traitMap[t]))return n}else for(var e=this.traits,i=0,o=e.length;i<o;i+=1){var n;if((n=e[i])instanceof t)return n}return null},t.prototype.setTrait=function(t,e){null!==e&&e.remove();var i=-1,o=null,n=this.traits,r=this.getTrait(t);return null!==r&&(i=n.indexOf(r),o=n[i+1]||null,this.willRemoveTrait(r),r.setModel(null,this),this.removeTraitMap(r),n.splice(i,1),this.onRemoveTrait(r),this.didRemoveTrait(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertTrait(e,o),i>=0?n.splice(i,0,e):n.push(e),this.insertTraitMap(e),e.setModel(this,null),this.onInsertTrait(e,o),this.didInsertTrait(e,o)),r},t.prototype.insertTraitMap=function(t){var e=t.key;void 0!==e&&(this.traitMap[e]=t)},t.prototype.removeTraitMap=function(t){var e=t.key;void 0!==e&&delete this.traitMap[e]},t.prototype.appendTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e)),this.willInsertTrait(t,null),this.traits.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,null),this.didInsertTrait(t,null)},t.prototype.prependTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e));var i=this.traits,o=0!==i.length?i[0]:null;this.willInsertTrait(t,o),i.unshift(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,o),this.didInsertTrait(t,o)},t.prototype.insertTrait=function(t,e,i){if(null!==e&&e.model!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeTrait(i),t.setKey(i)),this.willInsertTrait(t,e);var o=this.traits,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,e),this.didInsertTrait(t,e)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertTrait(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillInsertTrait&&s.modelWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertTrait(t,e)},t.prototype.didInsertTrait=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertTrait&&r.modelDidInsertTrait(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertTrait(t,e)},t.prototype.removeTrait=function(t){var e;if("string"==typeof t){if(null===(e=this.getTrait(t)))return null}else e=t;if(e.model!==this)throw new Error("not a member trait");this.willRemoveTrait(e),e.setModel(null,this),this.removeTraitMap(e);var i=this.traits,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveTrait(e),this.didRemoveTrait(e),e.setKey(void 0),"string"==typeof t)return e},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveTrait(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillRemoveTrait&&r.modelWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags);for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveTrait(t)},t.prototype.didRemoveTrait=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveTrait&&n.modelDidRemoveTrait(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didRemoveTrait(t)},t.prototype.getSuperTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getTrait(t);return null!==i?i:e.getSuperTrait(t)},t.prototype.getBaseTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseTrait(t);return null!==i?i:e.getTrait(t)},t.prototype.isMounted=function(){return 0!=(this.modelFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentModel||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillMount&&o.modelWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.modelFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidMount&&o.modelDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillUnmount&&o.modelWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnmount&&o.modelDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.modelFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillPower&&o.modelWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.modelFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidPower&&o.modelDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillUnpower&&o.modelWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnpower&&o.modelDidUnpower(this)}},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.modelFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setModelFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRequireUpdate(t,e)},t.prototype.onRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRequireUpdate(t,e)},t.prototype.didRequireUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRequireUpdate(t,e)},t.prototype.requestUpdate=function(e,i,o){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsAnalyze|t.NeedsRefresh);if(0!=(i&t.AnalyzeMask)&&0==(this.modelFlags&t.NeedsAnalyze)&&(this.setModelFlags(this.modelFlags|t.NeedsAnalyze),n|=t.NeedsAnalyze),0!=(i&t.RefreshMask)&&0==(this.modelFlags&t.NeedsRefresh)&&(this.setModelFlags(this.modelFlags|t.NeedsRefresh),n|=t.NeedsRefresh),0!=(n&(t.NeedsAnalyze|t.NeedsRefresh))||o){this.onRequestUpdate(e,i,o);var r=this.parentModel;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.refreshService.manager;void 0!==s&&s.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)},t.prototype.willRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)e|=o[n].willRequestUpdate(t,e,i)},t.prototype.onRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onRequestUpdate(t,e,i)},t.prototype.didRequestUpdate=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didRequestUpdate(t,e,i)},t.prototype.isTraversing=function(){return 0!=(this.modelFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.modelFlags&t.UpdatingMask)},t.prototype.isAnalyzing=function(){return 0!=(this.modelFlags&t.AnalyzingFlag)},t.prototype.needsAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsAnalyze(t,e);return t},t.prototype.willAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willAnalyze(t,e)},t.prototype.onAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onAnalyze(t,e)},t.prototype.didAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didAnalyze(t,e)},t.prototype.willMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willMutate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillMutate&&r.modelWillMutate(t,this)}},t.prototype.onMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onMutate(t)},t.prototype.didMutate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidMutate&&n.modelDidMutate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didMutate(t)},t.prototype.willAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willAggregate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillAggregate&&r.modelWillAggregate(t,this)}},t.prototype.onAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onAggregate(t)},t.prototype.didAggregate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidAggregate&&n.modelDidAggregate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didAggregate(t)},t.prototype.willCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willCorrelate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillCorrelate&&r.modelWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onCorrelate(t)},t.prototype.didCorrelate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidCorrelate&&n.modelDidCorrelate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didCorrelate(t)},t.prototype.doAnalyzeChildModels=function(e,i){0!=(e&t.AnalyzeMask)&&(this.willAnalyzeChildModels(e,i),this.onAnalyzeChildModels(e,i),this.didAnalyzeChildModels(e,i))},t.prototype.willAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willAnalyzeChildModels(t,e)},t.prototype.onAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onAnalyzeChildModels(t,e);this.analyzeChildModels(t,e,this.analyzeChildModel)},t.prototype.didAnalyzeChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didAnalyzeChildModels(t,e)},t.prototype.analyzeChildModel=function(t,e,i){this.willAnalyzeChildModel(t,e,i),this.onAnalyzeChildModel(t,e,i),this.didAnalyzeChildModel(t,e,i)},t.prototype.willAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].willAnalyzeChildModel(t,e,i)},t.prototype.onAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onAnalyzeChildModel(t,e,i);t.cascadeAnalyze(e,i)},t.prototype.didAnalyzeChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didAnalyzeChildModel(t,e,i)},t.prototype.isRefreshing=function(){return 0!=(this.modelFlags&t.RefreshingFlag)},t.prototype.needsRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsRefresh(t,e);return t},t.prototype.willRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRefresh(t,e)},t.prototype.onRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRefresh(t,e)},t.prototype.didRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRefresh(t,e)},t.prototype.willValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willValidate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillValidate&&r.modelWillValidate(t,this)}},t.prototype.onValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onValidate(t)},t.prototype.didValidate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidValidate&&n.modelDidValidate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didValidate(t)},t.prototype.willReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willReconcile(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillReconcile&&r.modelWillReconcile(t,this)}},t.prototype.onReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onReconcile(t)},t.prototype.didReconcile=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidReconcile&&n.modelDidReconcile(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didReconcile(t)},t.prototype.doRefreshChildModels=function(e,i){e&t.RefreshMask&&(this.willRefreshChildModels(e,i),this.onRefreshChildModels(e,i),this.didRefreshChildModels(e,i))},t.prototype.willRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRefreshChildModels(t,e)},t.prototype.onRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRefreshChildModels(t,e);this.refreshChildModels(t,e,this.refreshChildModel)},t.prototype.didRefreshChildModels=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRefreshChildModels(t,e)},t.prototype.refreshChildModel=function(t,e,i){this.willRefreshChildModel(t,e,i),this.onRefreshChildModel(t,e,i),this.didRefreshChildModel(t,e,i)},t.prototype.willRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].willRefreshChildModel(t,e,i)},t.prototype.onRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].onRefreshChildModel(t,e,i);t.cascadeRefresh(e,i)},t.prototype.didRefreshChildModel=function(t,e,i){for(var o=this.traits,n=0,r=o.length;n<r;n+=1)o[n].didRefreshChildModel(t,e,i)},t.prototype.isConsuming=function(){return 0!=(this.modelFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.startConsuming=function(){0==(this.modelFlags&t.ConsumingFlag)&&(this.willStartConsuming(),this.setModelFlags(this.modelFlags|t.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},t.prototype.willStartConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillStartConsuming&&o.modelWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStartConsuming&&o.modelDidStartConsuming(this)}},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.stopConsuming=function(){0!=(this.modelFlags&t.ConsumingFlag)&&(this.willStopConsuming(),this.setModelFlags(this.modelFlags&~t.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},t.prototype.willStopConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillStopConsuming&&o.modelWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStopConsuming&&o.modelDidStopConsuming(this)}},t.prototype.willAddModelConsumer=function(t){},t.prototype.onAddModelConsumer=function(t){},t.prototype.didAddModelConsumer=function(t){},t.prototype.willRemoveModelConsumer=function(t){},t.prototype.onRemoveModelConsumer=function(t){},t.prototype.didRemoveModelConsumer=function(t){},t.prototype.getLazyModelService=function(e){var i=this.getModelService(e);if(null===i){var o=t.getModelServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelService(e,i))}return i},t.prototype.getLazyModelProperty=function(e){var i=this.getModelProperty(e);if(null===i){var o=t.getModelPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelProperty(e,i))}return i},t.prototype.getLazyModelFastener=function(e){var i=this.getModelFastener(e);if(null===i){var o=t.getModelFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelFastener(e,i)}return i},t.prototype.getLazyModelTrait=function(e){var i=this.getModelTrait(e);if(null===i){var o=t.getModelTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelTrait(e,i)}return i},t.prototype.getLazyModelDownlink=function(t){var e=this.getModelDownlink(t);if(null===e){var i=c.getModelDownlinkConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setModelDownlink(t,e))}return e},t.prototype.extendModelContext=function(t){return t},Object.defineProperty(t.prototype,"superModelContext",{get:function(){var t=this.parentModel;return null!==t?t.modelContext:this.refreshService.updatedModelContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelContext",{get:function(){return this.extendModelContext(this.superModelContext)},enumerable:!1,configurable:!0}),t.getModelServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelServiceConstructors")){var i=e.modelServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelServiceConstructors")||(o.modelServiceConstructors={}),o.modelServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelPropertyConstructors")){var i=e.modelPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelPropertyConstructors")||(o.modelPropertyConstructors={}),o.modelPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelFastenerConstructors")){var i=e.modelFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelFastenerConstructors")||(r.modelFastenerConstructors={}),r.modelFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelFastener(o);return null===e&&(e=new t(this,n,o),this.setModelFastener(o,e)),e},configurable:!0,enumerable:!0})},t.getModelTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelTraitConstructors")){var i=e.modelTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelTraitConstructors")||(r.modelTraitConstructors={}),r.modelTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelTrait(o);return null===e&&(e=new t(this,n,o),this.setModelTrait(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.TraversingFlag=8,t.AnalyzingFlag=16,t.RefreshingFlag=32,t.RemovingFlag=64,t.ImmediateFlag=128,t.UpdatingMask=t.AnalyzingFlag|t.RefreshingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.ConsumingFlag|t.TraversingFlag|t.AnalyzingFlag|t.RefreshingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsAnalyze=256,t.NeedsMutate=512,t.NeedsAggregate=1024,t.NeedsCorrelate=2048,t.AnalyzeMask=t.NeedsAnalyze|t.NeedsMutate|t.NeedsAggregate|t.NeedsCorrelate,t.NeedsRefresh=4096,t.NeedsValidate=8192,t.NeedsReconcile=16384,t.RefreshMask=t.NeedsRefresh|t.NeedsValidate|t.NeedsReconcile,t.UpdateMask=t.AnalyzeMask|t.RefreshMask,t.ModelFlagShift=24,t.ModelFlagMask=(1<<t.ModelFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t.Intrinsic=0,t.Extrinsic=1,t}(),f=function(){function t(){Object.defineProperty(this,"traitFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.setTraitFlags=function(t){Object.defineProperty(this,"traitFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.addTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitObserver(t),Object.defineProperty(this,"traitObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddTraitObserver(t),this.didAddTraitObserver(t))},t.prototype.willAddTraitObserver=function(t){},t.prototype.onAddTraitObserver=function(t){},t.prototype.didAddTraitObserver=function(t){},t.prototype.removeTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitObserver(t),Object.defineProperty(this,"traitObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveTraitObserver(t),this.didRemoveTraitObserver(t))},t.prototype.willRemoveTraitObserver=function(t){},t.prototype.onRemoveTraitObserver=function(t){},t.prototype.didRemoveTraitObserver=function(t){},Object.defineProperty(t.prototype,"modelFlags",{get:function(){var t=this.model;return null!==t?t.modelFlags:0},enumerable:!1,configurable:!0}),t.prototype.setModelFlags=function(t){var e=this.model;if(null===e)throw new Error("no model");e.setModelFlags(t)},t.prototype.willSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetModel&&r.traitWillSetModel(t,e,this)}},t.prototype.onSetModel=function(t,e){if(null!==t)t.isMounted()&&(this.doMount(),t.isPowered()&&this.doPower());else if(this.isMounted())try{this.isPowered()&&this.doUnpower()}finally{this.doUnmount()}},t.prototype.didSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetModel&&r.traitDidSetModel(t,e,this)}},Object.defineProperty(t.prototype,"parentModel",{get:function(){var t=this.model;return null!==t?t.parentModel:null},enumerable:!1,configurable:!0}),t.prototype.attachParentModel=function(t){},t.prototype.detachParentModel=function(t){},t.prototype.willSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetParentModel&&r.traitWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){},t.prototype.didSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetParentModel&&r.traitDidSetParentModel(t,e,this)}},Object.defineProperty(t.prototype,"childModelCount",{get:function(){var t=this.model;return null!==t?t.childModelCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childModels",{get:function(){var t=this.model;return null!==t?t.childModels:[]},enumerable:!1,configurable:!0}),t.prototype.firstChildModel=function(){var t=this.model;return null!==t?t.firstChildModel():null},t.prototype.lastChildModel=function(){var t=this.model;return null!==t?t.lastChildModel():null},t.prototype.nextChildModel=function(t){var e=this.model;return null!==e?e.nextChildModel(t):null},t.prototype.previousChildModel=function(t){var e=this.model;return null!==e?e.previousChildModel(t):null},t.prototype.forEachChildModel=function(t,e){var i=this.model;return null!==i?i.forEachChildModel(t,e):void 0},t.prototype.getChildModel=function(t){var e=this.model;return null!==e?e.getChildModel(t):null},t.prototype.setChildModel=function(t,e){var i=this.model;if(null!==i)return i.setChildModel(t,e);throw new Error("no model")},t.prototype.appendChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendChildModel(t,e)},t.prototype.prependChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependChildModel(t,e)},t.prototype.insertChildModel=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertChildModel(t,e,i)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertChildModel&&r.traitWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertChildModel&&r.traitDidInsertChildModel(t,e,this)}},t.prototype.removeChildModel=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeChildModel(t):null;null!==e&&e.removeChildModel(t)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveChildModel&&n.traitWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){},t.prototype.didRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveChildModel&&n.traitDidRemoveChildModel(t,this)}},t.prototype.getSuperModel=function(t){var e=this.model;return null!==e?e.getSuperModel(t):null},t.prototype.getBaseModel=function(t){var e=this.model;return null!==e?e.getBaseModel(t):null},Object.defineProperty(t.prototype,"traitCount",{get:function(){var t=this.model;return null!==t?t.traitCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"traits",{get:function(){var t=this.model;return null!==t?t.traits:[]},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.model;return null!==t?t.firstTrait():null},t.prototype.lastTrait=function(){var t=this.model;return null!==t?t.lastTrait():null},t.prototype.nextTrait=function(t){var e=this.model;return null!==e?e.nextTrait(t):null},t.prototype.previousTrait=function(t){var e=this.model;return null!==e?e.previousTrait(t):null},t.prototype.forEachTrait=function(t,e){var i=this.model;return null!==i?i.forEachTrait(t,e):void 0},t.prototype.getTrait=function(t){var e=this.model;return null!==e?e.getTrait(t):null},t.prototype.setTrait=function(t,e){var i=this.model;if(null!==i)return i.setTrait(t,e);throw new Error("no model")},t.prototype.appendTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendTrait(t,e)},t.prototype.prependTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependTrait(t,e)},t.prototype.insertTrait=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertTrait(t,e,i)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertTrait&&r.traitWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags)},t.prototype.didInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertTrait&&r.traitDidInsertTrait(t,e,this)}},t.prototype.removeTrait=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeTrait(t):null;null!==e&&e.removeTrait(t)},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveTrait&&n.traitWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags)},t.prototype.didRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveTrait&&n.traitDidRemoveTrait(t,this)}},t.prototype.getSuperTrait=function(t){var e=this.model;return null!==e?e.getSuperTrait(t):null},t.prototype.getBaseTrait=function(t){var e=this.model;return null!==e?e.getBaseTrait(t):null},t.prototype.isMounted=function(){return 0!=(this.traitFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillMount&&o.traitWillMount(this)}},t.prototype.onMount=function(){this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidMount&&o.traitDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnmount&&o.traitWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnmount&&o.traitDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.traitFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillPower&&o.traitWillPower(this)}},t.prototype.onPower=function(){this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidPower&&o.traitDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnpower&&o.traitWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnpower&&o.traitDidUnpower(this)}},t.prototype.requireUpdate=function(t,e){void 0===e&&(e=!1);var i=this.model;null!==i&&i.requireUpdate(t,e)},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(t,e,i){var o=this.model;if(null===o)throw new TypeError("no model");o.requestUpdate(t,e,i)},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){var t=this.model;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.model;return null!==t&&t.isUpdating()},t.prototype.isAnalyzing=function(){var t=this.model;return null!==t&&t.isAnalyzing()},t.prototype.needsAnalyze=function(t,e){return t},t.prototype.willAnalyze=function(t,e){},t.prototype.onAnalyze=function(t,e){},t.prototype.didAnalyze=function(t,e){},t.prototype.willMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillMutate&&n.traitWillMutate(t,this)}},t.prototype.onMutate=function(t){},t.prototype.didMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidMutate&&n.traitDidMutate(t,this)}},t.prototype.willAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillAggregate&&n.traitWillAggregate(t,this)}},t.prototype.onAggregate=function(t){},t.prototype.didAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidAggregate&&n.traitDidAggregate(t,this)}},t.prototype.willCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillCorrelate&&n.traitWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){},t.prototype.didCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidCorrelate&&n.traitDidCorrelate(t,this)}},t.prototype.willAnalyzeChildModels=function(t,e){},t.prototype.onAnalyzeChildModels=function(t,e){},t.prototype.didAnalyzeChildModels=function(t,e){},t.prototype.analyzeChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.willAnalyzeChildModel=function(t,e,i){},t.prototype.onAnalyzeChildModel=function(t,e,i){},t.prototype.didAnalyzeChildModel=function(t,e,i){},t.prototype.isRefreshing=function(){var t=this.model;return null!==t&&t.isRefreshing()},t.prototype.needsRefresh=function(t,e){return t},t.prototype.willRefresh=function(t,e){},t.prototype.onRefresh=function(t,e){},t.prototype.didRefresh=function(t,e){},t.prototype.willValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillValidate&&n.traitWillValidate(t,this)}},t.prototype.onValidate=function(t){},t.prototype.didValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidValidate&&n.traitDidValidate(t,this)}},t.prototype.willReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillReconcile&&n.traitWillReconcile(t,this)}},t.prototype.onReconcile=function(t){},t.prototype.didReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidReconcile&&n.traitDidReconcile(t,this)}},t.prototype.willRefreshChildModels=function(t,e){},t.prototype.onRefreshChildModels=function(t,e){},t.prototype.didRefreshChildModels=function(t,e){},t.prototype.refreshChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.willRefreshChildModel=function(t,e,i){},t.prototype.onRefreshChildModel=function(t,e,i){},t.prototype.didRefreshChildModel=function(t,e,i){},t.prototype.isConsuming=function(){return 0!=(this.traitFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.startConsuming=function(){0==(this.traitFlags&t.ConsumingFlag)&&(this.willStartConsuming(),this.setTraitFlags(this.traitFlags|t.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},t.prototype.willStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStartConsuming&&o.traitWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStartConsuming&&o.traitDidStartConsuming(this)}},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.stopConsuming=function(){0!=(this.traitFlags&t.ConsumingFlag)&&(this.willStopConsuming(),this.setTraitFlags(this.traitFlags&~t.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},t.prototype.willStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStopConsuming&&o.traitWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStopConsuming&&o.traitDidStopConsuming(this)}},t.prototype.willAddTraitConsumer=function(t){},t.prototype.onAddTraitConsumer=function(t){},t.prototype.didAddTraitConsumer=function(t){},t.prototype.willRemoveTraitConsumer=function(t){},t.prototype.onRemoveTraitConsumer=function(t){},t.prototype.didRemoveTraitConsumer=function(t){},t.prototype.getLazyTraitService=function(e){var i=this.getTraitService(e);if(null===i){var o=t.getTraitServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitService(e,i))}return i},t.prototype.getLazyTraitProperty=function(e){var i=this.getTraitProperty(e);if(null===i){var o=t.getTraitPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitProperty(e,i))}return i},t.prototype.getLazyTraitModel=function(e){var i=this.getTraitModel(e);if(null===i){var o=t.getTraitModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitModel(e,i)}return i},t.prototype.getLazyTraitFastener=function(e){var i=this.getTraitFastener(e);if(null===i){var o=t.getTraitFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitFastener(e,i)}return i},t.prototype.getLazyModelDownlink=function(t){var e=this.getModelDownlink(t);if(null===e){var i=c.getModelDownlinkConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setModelDownlink(t,e))}return e},Object.defineProperty(t.prototype,"modelContext",{get:function(){var t=this.model;return null!==t?t.modelContext:null},enumerable:!1,configurable:!0}),t.getTraitServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitServiceConstructors")){var i=e.traitServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitServiceConstructors")||(o.traitServiceConstructors={}),o.traitServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelPropertyConstructors")){var i=e.modelPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.getTraitPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitPropertyConstructors")){var i=e.traitPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitPropertyConstructors")||(o.traitPropertyConstructors={}),o.traitPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getTraitModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitModelConstructors")){var i=e.traitModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitModelConstructors")||(r.traitModelConstructors={}),r.traitModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitModel(o);return null===e&&(e=new t(this,n,o),this.setTraitModel(o,e)),e},configurable:!0,enumerable:!0})},t.getTraitFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitFastenerConstructors")){var i=e.traitFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitFastenerConstructors")||(r.traitFastenerConstructors={}),r.traitFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitFastener(o);return null===e&&(e=new t(this,n,o),this.setTraitFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t}(),y=function(){function t(){Object.defineProperty(this,"rootModels",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"modelManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelManagerObserver(t),Object.defineProperty(this,"modelManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelManagerObserver(t),this.didAddModelManagerObserver(t))},t.prototype.willAddModelManagerObserver=function(t){},t.prototype.onAddModelManagerObserver=function(t){},t.prototype.didAddModelManagerObserver=function(t){},t.prototype.removeModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelManagerObserver(t),Object.defineProperty(this,"modelManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelManagerObserver(t),this.didRemoveModelManagerObserver(t))},t.prototype.willRemoveModelManagerObserver=function(t){},t.prototype.onRemoveModelManagerObserver=function(t){},t.prototype.didRemoveModelManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootModels.length},t.prototype.willAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillAttach&&o.modelManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidAttach&&o.modelManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillDetach&&o.modelManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidDetach&&o.modelManagerDidDetach(this)}},t.prototype.insertRootModel=function(t){var i=this.rootModels,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootModel(t),Object.defineProperty(this,"rootModels",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootModel(t),this.didInsertRootModel(t),n&&this.didAttach()}},t.prototype.willInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillInsertRootModel&&n.modelManagerWillInsertRootModel(t,this)}},t.prototype.onInsertRootModel=function(t){},t.prototype.didInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidInsertRootModel&&n.modelManagerDidInsertRootModel(t,this)}},t.prototype.removeRootModel=function(t){var i=this.rootModels,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootModel(t),Object.defineProperty(this,"rootModels",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootModel(t),this.didRemoveRootModel(t),n&&this.didDetach()}},t.prototype.willRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillRemoveRootModel&&n.modelManagerWillRemoveRootModel(t,this)}},t.prototype.onRemoveRootModel=function(t){},t.prototype.didRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidRemoveRootModel&&n.modelManagerDidRemoveRootModel(t,this)}},t}(),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function m(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function b(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||e)}var S=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"modelContext",{value:e.initModelContext(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.analyzeTimer=0,e.refreshTimer=0,e.updateDelay=i.MinUpdateDelay,e.runAnalyzePass=e.runAnalyzePass.bind(e),e.runRefreshPass=e.runRefreshPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initModelContext=function(){return{updateTime:0}},i.prototype.updatedModelContext=function(){var t=this.modelContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootModels()},i.prototype.powerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootModel(o)}},i.prototype.powerRootModel=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootModels()},i.prototype.unpowerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootModel(o)}},i.prototype.unpowerRootModel=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&v.AnalyzeMask)&&this.setRootFlags(this.rootFlags|v.NeedsAnalyze),0!=(e&v.RefreshMask)&&this.setRootFlags(this.rootFlags|v.NeedsRefresh),0!=(this.rootFlags&v.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxAnalyzeInterval&&0==(this.rootFlags&(v.TraversingFlag|v.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.analyzeTimer&&0===this.refreshTimer&&0==(t&v.UpdatingMask)&&0!=(t&v.UpdateMask)&&(this.analyzeTimer=setTimeout(this.runAnalyzePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.analyzeTimer&&(clearTimeout(this.analyzeTimer),this.analyzeTimer=0),0!==this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|v.ImmediateFlag);try{0!=(this.rootFlags&v.AnalyzeMask)&&(this.cancelUpdate(),this.runAnalyzePass(!0)),0!=(this.rootFlags&v.RefreshMask)&&this.updateDelay<=i.MaxAnalyzeInterval&&(this.cancelUpdate(),this.runRefreshPass(!0))}finally{this.setRootFlags(this.rootFlags&~v.ImmediateFlag)}},i.prototype.runAnalyzePass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~v.AnalyzeMask|v.TraversingFlag|v.AnalyzingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.modelFlags&v.AnalyzeMask)&&s.cascadeAnalyze(0,n)}var a=performance.now(),l=Math.max(i.MinAnalyzeInterval,this.updateDelay);this.updateDelay=a-o>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&v.RefreshMask)?this.refreshTimer=setTimeout(this.runRefreshPass,i.MinRefreshInterval):0!=(this.rootFlags&v.AnalyzeMask)&&(t&&(l=Math.max(i.MaxAnalyzeInterval,l)),this.analyzeTimer=setTimeout(this.runAnalyzePass,l))}finally{this.setRootFlags(this.rootFlags&~(v.TraversingFlag|v.AnalyzingFlag))}},i.prototype.runRefreshPass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~v.RefreshMask|v.TraversingFlag|v.RefreshingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.modelFlags&v.RefreshMask)&&s.cascadeRefresh(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&v.AnalyzeMask)){var a=this.updateDelay;t&&(a=Math.max(i.MaxAnalyzeInterval,a)),this.analyzeTimer=setTimeout(this.runAnalyzePass,a)}else 0!=(this.rootFlags&v.RefreshMask)&&(this.refreshTimer=setTimeout(this.runRefreshPass,i.MaxRefreshInterval))}finally{this.setRootFlags(this.rootFlags&~(v.TraversingFlag|v.RefreshingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootModel=function(e){t.prototype.onInsertRootModel.call(this,e),this.requestUpdate(e,e.modelFlags&v.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinAnalyzeInterval=12,i.MaxAnalyzeInterval=33,i.MinRefreshInterval=4,i.MaxRefreshInterval=16,m([e.Lazy],i,"global",null),i}(y),C=function(t){function o(e){var i=t.call(this)||this;return Object.defineProperty(i,"client",{value:e,enumerable:!0,configurable:!0}),i}return w(o,t),o.global=function(){return new o(i.client)},m([e.Lazy],o,"global",null),o}(y),P=function(t,e){return this instanceof P?V.call(this,t,e):(i=t,v.decorateModelService.bind(v,P.define(i)));var i};function V(t,i){var o;return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(o=this.inherit)&&void 0!==o&&o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitServices",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(P,Object),P.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},P.prototype.isInherited=function(){return 0!=(this.serviceFlags&P.InheritedFlag)},P.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(P.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),P.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentModel;if(null!==o){if(null===(n=(e=o).getModelService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyModelService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|P.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~P.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})));for(var r=this.traitServices,s=0,a=r.length;s<a;s+=1){var l=r[s];l.setServiceFlags(l.serviceFlags&~P.InheritedFlag|this.serviceFlags&P.InheritedFlag),Object.defineProperty(l,"manager",{value:this.manager,enumerable:!0,configurable:!0})}},P.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~P.InheritedFlag);for(var t=this.traitServices,e=0,i=t.length;e<i;e+=1){var o=t[e];o.setServiceFlags(o.serviceFlags&~P.InheritedFlag)}},P.prototype.addTraitService=function(t){Object.defineProperty(this,"traitServices",{value:e.Arrays.inserted(t,this.traitServices),enumerable:!0,configurable:!0})},P.prototype.removeTraitService=function(t){Object.defineProperty(this,"traitServices",{value:e.Arrays.removed(t,this.traitServices),enumerable:!0,configurable:!0})},Object.defineProperty(P.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),P.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},P.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},P.prototype.initManager=function(){},P.prototype.mount=function(){this.bindSuperService()},P.prototype.unmount=function(){this.unbindSuperService()},P.getClass=function(t){return t===S?T:t===C?O:t===y?F:null},P.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=P.getClass(t.type)),null===e&&(e=P);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},s=t;return Object.setPrototypeOf(r,e),(r.prototype=s).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(s.initManager=function(){return i}),Object.defineProperty(s,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},P.InheritedFlag=1;var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootModel(this.owner),!1!==this.observe&&e.addModelManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeModelManagerObserver(this),this.isInherited()||e.removeRootModel(this.owner)),t.prototype.unmount.call(this)},e}(P),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"modelContext",{get:function(){var t=this.manager;return void 0===t&&(t=S.global()),t.modelContext},enumerable:!1,configurable:!0}),e.prototype.updatedModelContext=function(){var t=this.manager;return void 0===t&&(t=S.global()),t.updatedModelContext()},e.prototype.initManager=function(){return S.global()},e}(F);P({extends:T,type:S,observe:!1})(v.prototype,"refreshService");var D=function(t,e){return this instanceof D?M.call(this,t,e):(i=t,f.decorateTraitService.bind(f,D.define(i)));var i};function M(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"modelService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(D,Object),D.prototype.createModelService=function(){var t=this.modelServiceConstructor;if(void 0!==t){var e=this.owner.model;if(null!==e){var i=new t(e,this.name);return Object.defineProperty(i,"inherit",{value:this.inherit,enumerable:!0,configurable:!0}),i.setServiceFlags(this.serviceFlags),i}throw new Error("no model")}throw new Error("no model service constructor")},D.prototype.bindModelService=function(){var t=this.owner.model;if(null!==t){var e=t.getLazyModelService(this.name);null===e&&(e=this.createModelService(),t.setModelService(this.name,e)),Object.defineProperty(this,"modelService",{value:e,enumerable:!0,configurable:!0}),e.addTraitService(this),Object.defineProperty(this,"inherit",{value:e.inherit,enumerable:!0,configurable:!0}),this.setServiceFlags(e.serviceFlags),Object.defineProperty(this,"manager",{value:e.manager,enumerable:!0,configurable:!0})}},D.prototype.unbindModelService=function(){var t=this.modelService;null!==t&&(t.removeTraitService(this),Object.defineProperty(this,"modelService",{value:null,enumerable:!0,configurable:!0}))},D.prototype.setInherit=function(t){var e=this.modelService;null!==e?e.setInherit(t):Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0})},D.prototype.isInherited=function(){return 0!=(this.serviceFlags&P.InheritedFlag)},D.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(D.prototype,"superName",{get:function(){var t=this.modelService;return null!==t?t.superName:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"superService",{get:function(){var t=this.modelService;return null!==t?t.superService:null},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"superManager",{get:function(){var t=this.modelService;return null!==t?t.superManager:void 0},enumerable:!0,configurable:!0}),D.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},D.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},D.prototype.attach=function(){this.bindModelService(),this.manager instanceof y&&!0===this.observe&&this.manager.addModelManagerObserver(this)},D.prototype.detach=function(){this.manager instanceof y&&!0===this.observe&&this.manager.removeModelManagerObserver(this),this.unbindModelService()},D.define=function(t){var e=t.extends,i=t.type,o=t.manager,n=t.inherit,r=t.initManager,s=t.modelService;delete t.extends,delete t.manager,delete t.modelService,void 0===e&&(e=D);var a=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},l=t;return Object.setPrototypeOf(a,e),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,e.prototype),void 0!==o&&void 0===r&&(r=function(){return o},l.initManager=r),Object.defineProperty(l,"inherit",{value:null==n||n,enumerable:!0,configurable:!0}),void 0===l.modelServiceConstructor&&(void 0===s&&(s={extends:void 0,type:i,manager:o,inherit:n},void 0!==r&&(s.initManager=r)),l.modelServiceConstructor=P.define(s)),a};var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"client",{get:function(){return this.manager.client},enumerable:!1,configurable:!0}),e.prototype.initManager=function(){return C.global()},e}(F);P({extends:O,type:C,observe:!1})(v.prototype,"warpService"),D({type:C,observe:!1,modelService:{extends:O,type:C,observe:!1}})(f.prototype,"warpService");var x=function(t,e){return this instanceof x?A.call(this,t,e):(i=t,v.decorateModelProperty.bind(v,x.define(i)));var i};function A(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precedence",{value:v.Intrinsic,enumerable:!0,configurable:!0}),Object.defineProperty(this,"propertyFlags",{value:x.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:void 0,enumerable:!0,configurable:!0}),this}w(x,Object),x.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},x.prototype.isInherited=function(){return 0!=(this.propertyFlags&x.InheritedFlag)},x.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&x.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~x.OverrideFlag|x.InheritedFlag),this.setOwnState(e.state),this.mutate());else if(!t&&0!=(this.propertyFlags&x.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag)}},Object.defineProperty(x.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),x.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentModel;null!==e;){var i=e.getLazyModelProperty(t);if(null!==i){Object.defineProperty(this,"superProperty",{value:i,enumerable:!0,configurable:!0}),i.addSubProperty(this),0==(this.propertyFlags&x.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|x.InheritedFlag),this.setOwnState(i.state),this.mutate());break}e=e.parentModel}},x.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag))},x.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},x.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(x.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),x.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},x.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},x.prototype.setState=function(t,e){void 0===e&&(e=v.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag|x.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},x.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.state;e.Equals(t,i)||(this.willSetState(t,i),Object.defineProperty(this,"ownState",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|x.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},x.prototype.willSetState=function(t,e){},x.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},x.prototype.didSetState=function(t,e){},x.prototype.takesPrecedence=function(t){return t>=this.precedence},x.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),Object.defineProperty(this,"precedence",{value:t,enumerable:!0,configurable:!0}),this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},x.prototype.willSetPrecedence=function(t,e){},x.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&x.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~x.InheritedFlag)}},x.prototype.didSetPrecedence=function(t,e){},x.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},x.prototype.isUpdated=function(){return 0!=(this.propertyFlags&x.UpdatedFlag)},Object.defineProperty(x.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&x.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),x.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&x.UpdatedFlag)?(this.setPropertyFlags(t&~x.UpdatedFlag),this.state):void 0},x.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~x.UpdatedFlag),this.state},x.prototype.mutate=function(){this.owner.requireUpdate(v.NeedsMutate)},x.prototype.onMutate=function(){this.isInherited()&&this.onMutateInherited()},x.prototype.onMutateInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},x.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.mutate()}},x.prototype.fromAny=function(t){return t},x.prototype.isMounted=function(){return 0!=(this.propertyFlags&x.MountedFlag)},x.prototype.mount=function(){0==(this.propertyFlags&x.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|x.MountedFlag),this.onMount(),this.didMount())},x.prototype.willMount=function(){},x.prototype.onMount=function(){this.bindSuperProperty()},x.prototype.didMount=function(){},x.prototype.unmount=function(){0!=(this.propertyFlags&x.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~x.MountedFlag),this.onUnmount(),this.didUnmount())},x.prototype.willUnmount=function(){},x.prototype.onUnmount=function(){this.unbindSuperProperty()},x.prototype.didUnmount=function(){},x.prototype.toString=function(){return this.name},x.getClass=function(t){return t===String?R:t===Boolean?k:t===Number?I:null},x.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=x.getClass(t.type)),null===i&&(i=x,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e){return 0===arguments.length?l.state:(l.setState(t,e),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==n&&(a=l.fromAny(n)),void 0!==a&&Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(l,"inherit",{value:o,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a},x.MountedFlag=1,x.UpdatedFlag=2,x.OverrideFlag=4,x.InheritedFlag=8;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(x),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(x),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(x),j=function(t,e){return this instanceof j?W.call(this,t,e):(i=t,f.decorateTraitProperty.bind(f,j.define(i)));var i};function W(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precedence",{value:v.Intrinsic,enumerable:!0,configurable:!0}),Object.defineProperty(this,"propertyFlags",{value:j.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:void 0,enumerable:!0,configurable:!0}),this}w(j,Object),j.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},j.prototype.isInherited=function(){return 0!=(this.propertyFlags&j.InheritedFlag)},j.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&j.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~j.OverrideFlag|j.InheritedFlag),this.setOwnState(e.state),this.mutate());else if(!t&&0!=(this.propertyFlags&j.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~j.InheritedFlag)}},Object.defineProperty(j.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),j.prototype.getSuperTrait=function(t){return t.getTrait(this.name)},j.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentModel;null!==e;){var i=this.getSuperTrait(e),o=null!==i?i.getLazyTraitProperty(t):null;if(null!==o){Object.defineProperty(this,"superProperty",{value:o,enumerable:!0,configurable:!0}),o.addSubProperty(this),0==(this.propertyFlags&j.OverrideFlag)&&o.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|j.InheritedFlag),this.setOwnState(o.state),this.mutate());break}e=e.parentModel}},j.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~j.InheritedFlag))},j.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},j.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(j.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),j.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},j.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},j.prototype.setState=function(t,e){void 0===e&&(e=v.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~j.InheritedFlag|j.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},j.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.state;e.Equals(t,i)||(this.willSetState(t,i),Object.defineProperty(this,"ownState",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|j.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},j.prototype.willSetState=function(t,e){},j.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},j.prototype.didSetState=function(t,e){},j.prototype.takesPrecedence=function(t){return t>=this.precedence},j.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),Object.defineProperty(this,"precedence",{value:t,enumerable:!0,configurable:!0}),this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},j.prototype.willSetPrecedence=function(t,e){},j.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&j.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~j.InheritedFlag)}},j.prototype.didSetPrecedence=function(t,e){},j.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},j.prototype.isUpdated=function(){return 0!=(this.propertyFlags&j.UpdatedFlag)},Object.defineProperty(j.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&j.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),j.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&j.UpdatedFlag)?(this.setPropertyFlags(t&~j.UpdatedFlag),this.state):void 0},j.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~j.UpdatedFlag),this.state},j.prototype.mutate=function(){this.owner.requireUpdate(v.NeedsMutate)},j.prototype.onMutate=function(){this.isInherited()&&this.onMutateInherited()},j.prototype.onMutateInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},j.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.mutate()}},j.prototype.fromAny=function(t){return t},j.prototype.isMounted=function(){return 0!=(this.propertyFlags&j.MountedFlag)},j.prototype.mount=function(){0==(this.propertyFlags&j.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|j.MountedFlag),this.onMount(),this.didMount())},j.prototype.willMount=function(){},j.prototype.onMount=function(){this.bindSuperProperty()},j.prototype.didMount=function(){},j.prototype.unmount=function(){0!=(this.propertyFlags&j.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~j.MountedFlag),this.onUnmount(),this.didUnmount())},j.prototype.willUnmount=function(){},j.prototype.onUnmount=function(){this.unbindSuperProperty()},j.prototype.didUnmount=function(){},j.prototype.toString=function(){return this.name},j.getClass=function(t){return t===String?E:t===Boolean?N:t===Number?G:null},j.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=j.getClass(t.type)),null===i&&(i=j,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e){return 0===arguments.length?l.state:(l.setState(t,e),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==n&&(a=l.fromAny(n)),void 0!==a&&Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(l,"inherit",{value:o,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a},j.MountedFlag=1,j.UpdatedFlag=2,j.OverrideFlag=4,j.InheritedFlag=8;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(j),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(j),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(j),U=function(t,e,i){return this instanceof U?B.call(this,t,e,i):(o=t,v.decorateModelFastener.bind(v,U.define(o)));var o};function B(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}w(U,Object),U.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},U.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},U.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentModel===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertModel(this.owner,t,e,this.key)),this.doSetModel(t,e),i},U.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},U.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},U.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},U.prototype.willSetModel=function(t,e,i){},U.prototype.onSetModel=function(t,e,i){},U.prototype.didSetModel=function(t,e,i){},Object.defineProperty(U.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),U.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},U.prototype.createModel=function(){return null},U.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},U.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},U.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},U.prototype.isMounted=function(){return 0!=(this.fastenerFlags&U.MountedFlag)},U.prototype.mount=function(){0==(this.fastenerFlags&U.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|U.MountedFlag),this.onMount(),this.didMount())},U.prototype.willMount=function(){},U.prototype.onMount=function(){},U.prototype.didMount=function(){},U.prototype.unmount=function(){0!=(this.fastenerFlags&U.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~U.MountedFlag),this.onUnmount(),this.didUnmount())},U.prototype.willUnmount=function(){},U.prototype.onUnmount=function(){},U.prototype.didUnmount=function(){},U.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=U);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},U.MountedFlag=1;var H=function(t,e,i){return this instanceof H?z.call(this,t,e,i):(o=t,v.decorateModelTrait.bind(v,H.define(o)));var o};function z(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(H,Object),H.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},H.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},H.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&(null===t||t.model===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertTrait(this.owner,t,e,this.key)),this.doSetTrait(t,e),i},H.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},H.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},H.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},H.prototype.willSetTrait=function(t,e,i){},H.prototype.onSetTrait=function(t,e,i){},H.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(H.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),H.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},H.prototype.createTrait=function(){return null},H.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},H.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},H.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},H.prototype.isMounted=function(){return 0!=(this.fastenerFlags&H.MountedFlag)},H.prototype.mount=function(){0==(this.fastenerFlags&H.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|H.MountedFlag),this.onMount(),this.didMount())},H.prototype.willMount=function(){},H.prototype.onMount=function(){},H.prototype.didMount=function(){},H.prototype.unmount=function(){0!=(this.fastenerFlags&H.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~H.MountedFlag),this.onUnmount(),this.didUnmount())},H.prototype.willUnmount=function(){},H.prototype.onUnmount=function(){},H.prototype.didUnmount=function(){},H.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=H);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},H.MountedFlag=1;var q=function t(e,i,o){return this instanceof t?Y.call(this,e,i,o):X(e)};function Y(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}function X(t){return f.decorateTraitModel.bind(f,q.define(t))}w(q,Object),q.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},q.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},q.prototype.setModel=function(t,e){var i,o=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&null!==(i=this.owner.model)&&(null===t||t.parentModel===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertModel(i,t,e,this.key)),this.doSetModel(t,e),o},q.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},q.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},q.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},q.prototype.willSetModel=function(t,e,i){},q.prototype.onSetModel=function(t,e,i){},q.prototype.didSetModel=function(t,e,i){},Object.defineProperty(q.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),q.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},q.prototype.createModel=function(){return null},q.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},q.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},q.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},q.prototype.isMounted=function(){return 0!=(this.fastenerFlags&q.MountedFlag)},q.prototype.mount=function(){0==(this.fastenerFlags&q.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|q.MountedFlag),this.onMount(),this.didMount())},q.prototype.willMount=function(){},q.prototype.onMount=function(){},q.prototype.didMount=function(){},q.prototype.unmount=function(){0!=(this.fastenerFlags&q.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~q.MountedFlag),this.onUnmount(),this.didUnmount())},q.prototype.willUnmount=function(){},q.prototype.onUnmount=function(){},q.prototype.didUnmount=function(){},q.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=q);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},q.MountedFlag=1;var K=function(t,e,i){return this instanceof K?Z.call(this,t,e,i):(o=t,f.decorateTraitFastener.bind(f,K.define(o)));var o};function Z(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(K,Object),K.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},K.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},K.prototype.setTrait=function(t,e){var i,o=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&null!==(i=this.owner.model)&&(null===t||t.model===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertTrait(i,t,e,this.key)),this.doSetTrait(t,e),o},K.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},K.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},K.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},K.prototype.willSetTrait=function(t,e,i){},K.prototype.onSetTrait=function(t,e,i){},K.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(K.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),K.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},K.prototype.createTrait=function(){return null},K.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},K.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},K.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},K.prototype.isMounted=function(){return 0!=(this.fastenerFlags&K.MountedFlag)},K.prototype.mount=function(){0==(this.fastenerFlags&K.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|K.MountedFlag),this.onMount(),this.didMount())},K.prototype.willMount=function(){},K.prototype.onMount=function(){},K.prototype.didMount=function(){},K.prototype.unmount=function(){0!=(this.fastenerFlags&K.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~K.MountedFlag),this.onUnmount(),this.didUnmount())},K.prototype.willUnmount=function(){},K.prototype.onUnmount=function(){},K.prototype.didUnmount=function(){},K.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=K);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},K.MountedFlag=1;var _=function(t,e){return this instanceof _?Q.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,_.define(i)));var i};function Q(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"downlink",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"downlinkFlags",{value:_.PendingFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"downlinkConsumers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownWarp",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownHostUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownNodeUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownLaneUri",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownPrio",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownRate",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownBody",{value:null,enumerable:!0,configurable:!0}),this}w(_,Object),_.prototype.setDownlinkFlags=function(t){Object.defineProperty(this,"downlinkFlags",{value:t,enumerable:!0,configurable:!0})},_.prototype.isConsuming=function(){return 0!=(this.downlinkFlags&_.ConsumingFlag)},_.prototype.startConsuming=function(){0==(this.downlinkFlags&_.ConsumingFlag)&&(this.willStartConsuming(),this.setDownlinkFlags(this.downlinkFlags|_.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},_.prototype.willStartConsuming=function(){},_.prototype.onStartConsuming=function(){this.owner.requireUpdate(v.NeedsReconcile)},_.prototype.didStartConsuming=function(){},_.prototype.stopConsuming=function(){0!=(this.downlinkFlags&_.ConsumingFlag)&&(this.willStopConsuming(),this.setDownlinkFlags(this.downlinkFlags&~_.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},_.prototype.willStopConsuming=function(){},_.prototype.onStopConsuming=function(){this.owner.requireUpdate(v.NeedsReconcile)},_.prototype.didStopConsuming=function(){},_.prototype.addDownlinkConsumer=function(t){var i=this.downlinkConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddDownlinkConsumer(t),Object.defineProperty(this,"downlinkConsumers",{value:o,enumerable:!0,configurable:!0}),this.onAddDownlinkConsumer(t),this.didAddDownlinkConsumer(t),0===i.length&&this.startConsuming())},_.prototype.willAddDownlinkConsumer=function(t){},_.prototype.onAddDownlinkConsumer=function(t){},_.prototype.didAddDownlinkConsumer=function(t){},_.prototype.removeDownlinkConsumer=function(t){var i=this.downlinkConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveDownlinkConsumer(t),Object.defineProperty(this,"downlinkConsumers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveDownlinkConsumer(t),this.didRemoveDownlinkConsumer(t),0===o.length&&this.stopConsuming())},_.prototype.willRemoveDownlinkConsumer=function(t){},_.prototype.onRemoveDownlinkConsumer=function(t){},_.prototype.didRemoveDownlinkConsumer=function(t){},_.prototype.warp=function(t){return void 0===t?this.ownWarp:(null===t&&(t=void 0),this.ownWarp!==t&&(Object.defineProperty(this,"ownWarp",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.hostUri=function(t){return void 0===t?null!==this.ownHostUri?this.ownHostUri:(null!==(t=void 0!==this.initHostUri?this.initHostUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownHostUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownHostUri,t)||(Object.defineProperty(this,"ownHostUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.nodeUri=function(t){return void 0===t?null!==this.ownNodeUri?this.ownNodeUri:(null!==(t=void 0!==this.initNodeUri?this.initNodeUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownNodeUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownNodeUri,t)||(Object.defineProperty(this,"ownNodeUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.laneUri=function(t){return void 0===t?null!==this.ownLaneUri?this.ownLaneUri:(null!==(t=void 0!==this.initLaneUri?this.initLaneUri():null)&&(t=n.Uri.fromAny(t),Object.defineProperty(this,"ownLaneUri",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownLaneUri,t)||(Object.defineProperty(this,"ownLaneUri",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.prio=function(t){return 0===arguments.length?void 0!==this.ownPrio?this.ownPrio:(void 0!==(t=void 0!==this.initPrio?this.initPrio():void 0)&&Object.defineProperty(this,"ownPrio",{value:t,enumerable:!0,configurable:!0}),t):(this.ownPrio!==t&&(Object.defineProperty(this,"ownPrio",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.rate=function(t){return 0===arguments.length?void 0!==this.ownRate?this.ownRate:(void 0!==(t=void 0!==this.initRate?this.initRate():void 0)&&Object.defineProperty(this,"ownRate",{value:t,enumerable:!0,configurable:!0}),t):(this.ownRate!==t&&(Object.defineProperty(this,"ownRate",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.body=function(t){return void 0===t?null!==this.ownBody?this.ownBody:(null!==(t=void 0!==this.initBody?this.initBody():null)&&(t=o.Value.fromAny(t),Object.defineProperty(this,"ownBody",{value:t,enumerable:!0,configurable:!0})),t):(null!==t&&(t=o.Value.fromAny(t)),e.Equals(this.ownBody,t)||(Object.defineProperty(this,"ownBody",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},_.prototype.link=function(){if(null===this.downlink){var t=this.ownWarp;null===t&&(t=this.owner.warpRef.state),null===t&&(t=this.owner.warpService.manager.client);var e=this.createDownlink(t);e=this.bindDownlink(e),void 0!==this.initDownlink&&(e=this.initDownlink(e)),e=e.observe(this),Object.defineProperty(this,"downlink",{value:e.open(),enumerable:!0,configurable:!0}),this.setDownlinkFlags(this.downlinkFlags&~_.PendingFlag)}},_.prototype.unlink=function(){var t=this.downlink;null!==t&&(t.close(),Object.defineProperty(this,"downlink",{value:null,enumerable:!0,configurable:!0}),this.setDownlinkFlags(this.downlinkFlags|_.PendingFlag))},_.prototype.relink=function(){this.setDownlinkFlags(this.downlinkFlags|_.PendingFlag),0!=(this.downlinkFlags&_.ConsumingFlag)&&this.owner.requireUpdate(v.NeedsReconcile)},_.prototype.reconcile=function(){null!==this.downlink&&(this.downlinkFlags&_.RelinkMask)===_.RelinkMask?(this.unlink(),this.link()):null===this.downlink&&0!=(this.downlinkFlags&_.ConsumingFlag)?this.link():null!==this.downlink&&0==(this.downlinkFlags&_.ConsumingFlag)&&this.unlink()},_.prototype.bindDownlink=function(t){var e=this.hostUri();null!==e&&(t=t.hostUri(e));var i=this.nodeUri();null!==i&&(t=t.nodeUri(i));var o=this.laneUri();null!==o&&(t=t.laneUri(o));var n=this.prio();void 0!==n&&(t=t.prio(n));var r=this.rate();void 0!==r&&(t=t.rate(r));var s=this.body();return null!==s&&(t=t.body(s)),t},_.prototype.isMounted=function(){return 0!=(this.downlinkFlags&_.MountedFlag)},_.prototype.mount=function(){0==(this.downlinkFlags&_.MountedFlag)&&(this.willMount(),this.setDownlinkFlags(this.downlinkFlags|_.MountedFlag),this.onMount(),this.didMount())},_.prototype.willMount=function(){},_.prototype.onMount=function(){0!=(this.downlinkFlags&_.ConsumingFlag)&&this.owner.requireUpdate(v.NeedsReconcile)},_.prototype.didMount=function(){},_.prototype.unmount=function(){0!=(this.downlinkFlags&_.MountedFlag)&&(this.willUnmount(),this.setDownlinkFlags(this.downlinkFlags&~_.MountedFlag),this.onUnmount(),this.didUnmount())},_.prototype.willUnmount=function(){},_.prototype.onUnmount=function(){this.unlink()},_.prototype.didUnmount=function(){},_.define=function(t){var e=t.type;if(delete t.type,"event"===e)return J.define(t);if("list"===e)return tt.define(t);if("map"===e)return it.define(t);if("value"===e)return rt.define(t);var i=t.extends,r=t.hostUri,s=t.nodeUri,a=t.laneUri,l=t.prio,u=t.rate,h=t.body;delete t.extends,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===i&&(i=_);var p=function(t,e){var o=i.call(this,t,e)||this;return void 0!==r&&Object.defineProperty(o,"ownHostUri",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(o,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(o,"ownLaneUri",{value:a,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(o,"ownPrio",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(o,"ownRate",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(o,"ownBody",{value:h,enumerable:!0,configurable:!0}),o},d=t;return Object.setPrototypeOf(p,i),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,i.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof a?(d.initLaneUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof l&&(d.initPrio=l,l=void 0),"function"==typeof u&&(d.initRate=u,u=void 0),"function"==typeof h?(d.initBody=h,h=void 0):void 0!==h&&(h=o.Value.fromAny(h)),p},_.MountedFlag=1,_.ConsumingFlag=2,_.PendingFlag=4,_.RelinkMask=_.ConsumingFlag|_.PendingFlag;var J=function(t,e){return this instanceof J?$.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,J.define(i)));var i};function $(t,e){return _.call(this,t,e)||this}w(J,_),J.prototype.createDownlink=function(t){return t.downlink()},J.define=function(t){var e=t.extends,i=t.hostUri,r=t.nodeUri,s=t.laneUri,a=t.prio,l=t.rate,u=t.body;delete t.extends,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=J);var h=function(t,o){var n=e.call(this,t,o)||this;return void 0!==i&&Object.defineProperty(n,"ownHostUri",{value:i,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownNodeUri",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownLaneUri",{value:s,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownPrio",{value:a,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownRate",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownBody",{value:u,enumerable:!0,configurable:!0}),n},p=t;return Object.setPrototypeOf(h,e),(h.prototype=p).constructor=h,Object.setPrototypeOf(h.prototype,e.prototype),"function"==typeof i?(p.initHostUri=i,i=void 0):void 0!==i&&(i=n.Uri.fromAny(i)),"function"==typeof r?(p.initNodeUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(p.initLaneUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof a&&(p.initPrio=a,a=void 0),"function"==typeof l&&(p.initRate=l,l=void 0),"function"==typeof u?(p.initBody=u,u=void 0):void 0!==u&&(u=o.Value.fromAny(u)),h};var tt=function(t,e){return this instanceof tt?et.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,tt.define(i)));var i};function et(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}w(tt,_),tt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},Object.defineProperty(tt.prototype,"length",{get:function(){var t=this.downlink;return null!==t?t.length:0},enumerable:!0,configurable:!0}),tt.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},tt.prototype.get=function(t,e){var i=this.downlink;return null!==i?i.get(t,e):void 0},tt.prototype.getEntry=function(t,e){var i=this.downlink;return null!==i?i.getEntry(t,e):void 0},tt.prototype.set=function(t,e,i){var o=this.downlink;return null!=o&&o.set(t,e,i),this},tt.prototype.insert=function(t,e,i){var o=this.downlink;return null!=o&&o.insert(t,e,i),this},tt.prototype.remove=function(t,e){var i=this.downlink;return null!=i&&i.remove(t,e),this},tt.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.push.apply(i,t):0},tt.prototype.pop=function(){var t=this.downlink;return null!==t?t.pop():void 0},tt.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.unshift.apply(i,t):0},tt.prototype.shift=function(){var t=this.downlink;return null!==t?t.shift():void 0},tt.prototype.move=function(t,e,i){var o=this.downlink;return null!=o&&o.move(t,e,i),this},tt.prototype.splice=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.downlink;return null!==n?n.splice.apply(n,b([t,e],i)):[]},tt.prototype.clear=function(){var t=this.downlink;null!=t&&t.clear()},tt.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},tt.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},tt.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},tt.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},tt.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},tt.define=function(t){var e=t.extends,i=t.valueForm,r=t.hostUri,s=t.nodeUri,a=t.laneUri,l=t.prio,u=t.rate,h=t.body;delete t.extends,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=tt);var p=function(t,o){var n=function(t,e){return 0===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&Object.defineProperty(n,"ownValueForm",{value:i,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownHostUri",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownLaneUri",{value:a,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownPrio",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownRate",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownBody",{value:h,enumerable:!0,configurable:!0}),n},d=t;return Object.setPrototypeOf(p,e),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,e.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof a?(d.initLaneUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof l&&(d.initPrio=l,l=void 0),"function"==typeof u&&(d.initRate=u,u=void 0),"function"==typeof h?(d.initBody=h,h=void 0):void 0!==h&&(h=o.Value.fromAny(h)),p};var it=function t(e,i){return this instanceof t?ot.call(this,e,i):nt(e)};function ot(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownKeyForm",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}function nt(t){return c.decorateModelDownlink.bind(c,it.define(t))}w(it,_),it.prototype.keyForm=function(t){return void 0===t?this.ownKeyForm:(this.ownKeyForm!==t&&(Object.defineProperty(this,"ownKeyForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},it.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},Object.defineProperty(it.prototype,"size",{get:function(){var t=this.downlink;return null!==t?t.size:0},enumerable:!0,configurable:!0}),it.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},it.prototype.has=function(t){var e=this.downlink;return null!==e&&e.has(t)},it.prototype.get=function(t){var e,i=this.downlink;return null!==i&&(e=i.get(t)),void 0===e&&null!==this.ownValueForm&&(e=this.ownValueForm.unit),e},it.prototype.getEntry=function(t){var e=this.downlink;return null!==e?e.getEntry(t):void 0},it.prototype.firstKey=function(){var t=this.downlink;return null!==t?t.firstKey():void 0},it.prototype.firstValue=function(){var t=this.downlink;return null!==t?t.firstValue():void 0},it.prototype.firstEntry=function(){var t=this.downlink;return null!==t?t.firstEntry():void 0},it.prototype.lastKey=function(){var t=this.downlink;return null!==t?t.lastKey():void 0},it.prototype.lastValue=function(){var t=this.downlink;return null!==t?t.lastValue():void 0},it.prototype.lastEntry=function(){var t=this.downlink;return null!==t?t.lastEntry():void 0},it.prototype.nextKey=function(t){var e=this.downlink;return null!==e?e.nextKey(t):void 0},it.prototype.nextValue=function(t){var e=this.downlink;return null!==e?e.nextValue(t):void 0},it.prototype.nextEntry=function(t){var e=this.downlink;return null!==e?e.nextEntry(t):void 0},it.prototype.previousKey=function(t){var e=this.downlink;return null!==e?e.previousKey(t):void 0},it.prototype.previousValue=function(t){var e=this.downlink;return null!==e?e.previousValue(t):void 0},it.prototype.previousEntry=function(t){var e=this.downlink;return null!==e?e.previousEntry(t):void 0},it.prototype.set=function(t,e){var i=this.downlink;return null!==i&&i.set(t,e),this},it.prototype.delete=function(t){var e=this.downlink;return null!==e&&e.delete(t)},it.prototype.drop=function(t){var e=this.downlink;return null!==e&&e.drop(t),this},it.prototype.take=function(t){var e=this.downlink;return null!==e&&e.take(t),this},it.prototype.clear=function(){var t=this.downlink;null!==t&&t.clear()},it.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},it.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},it.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},it.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},it.prototype.createDownlink=function(t){var e=t.downlinkMap();return null!==this.ownKeyForm&&(e=e.keyForm(this.ownKeyForm)),null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},it.define=function(t){var e=t.extends,i=t.keyForm,r=t.valueForm,s=t.hostUri,a=t.nodeUri,l=t.laneUri,u=t.prio,h=t.rate,p=t.body;delete t.extends,delete t.keyForm,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=it);var d=function(t,o){var n=function(t,e){return 1===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&Object.defineProperty(n,"ownKeyForm",{value:i,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownValueForm",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownHostUri",{value:s,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownNodeUri",{value:a,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownLaneUri",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownPrio",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownRate",{value:h,enumerable:!0,configurable:!0}),void 0!==p&&Object.defineProperty(n,"ownBody",{value:p,enumerable:!0,configurable:!0}),n},c=t;return Object.setPrototypeOf(d,e),(d.prototype=c).constructor=d,Object.setPrototypeOf(d.prototype,e.prototype),"function"==typeof s?(c.initHostUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof a?(c.initNodeUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof l?(c.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof u&&(c.initPrio=u,u=void 0),"function"==typeof h&&(c.initRate=h,h=void 0),"function"==typeof p?(c.initBody=p,p=void 0):void 0!==p&&(p=o.Value.fromAny(p)),d};var rt=function(t,e){return this instanceof rt?st.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,rt.define(i)));var i};function st(t,e){var i=_.call(this,t,e)||this;return Object.defineProperty(i,"ownValueForm",{value:null,enumerable:!0,configurable:!0}),i}w(rt,_),rt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(Object.defineProperty(this,"ownValueForm",{value:t,enumerable:!0,configurable:!0}),this.relink()),this)},rt.prototype.get=function(){var t=this.downlink;return null!==t?t.get():void 0},rt.prototype.set=function(t){var e=this.downlink;null!==e&&e.set(t)},rt.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},rt.define=function(t){var e=t.extends,i=t.valueForm,r=t.hostUri,s=t.nodeUri,a=t.laneUri,l=t.prio,u=t.rate,h=t.body;delete t.extends,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=rt);var p=function(t,o){var n=function(t){return 0===arguments.length?n.get():(n.set(t),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&Object.defineProperty(n,"ownValueForm",{value:i,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(n,"ownHostUri",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(n,"ownNodeUri",{value:s,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(n,"ownLaneUri",{value:a,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(n,"ownPrio",{value:l,enumerable:!0,configurable:!0}),void 0!==u&&Object.defineProperty(n,"ownRate",{value:u,enumerable:!0,configurable:!0}),void 0!==h&&Object.defineProperty(n,"ownBody",{value:h,enumerable:!0,configurable:!0}),n},d=t;return Object.setPrototypeOf(p,e),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,e.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof a?(d.initLaneUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof l&&(d.initPrio=l,l=void 0),"function"==typeof u&&(d.initRate=u,u=void 0),"function"==typeof h?(d.initBody=h,h=void 0):void 0!==h&&(h=o.Value.fromAny(h)),p};var at=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"model",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitConsumers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitModels",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"traitDownlinks",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.willObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setModel=function(t,e){this.willSetModel(t,e),null!==e&&this.detachModel(e),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),this.onSetModel(t,e),null!==t&&this.attachModel(t),this.didSetModel(t,e)},i.prototype.attachModel=function(t){this.attachTraitServices(),this.isMounted()&&(this.mountTraitProperties(),this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks())},i.prototype.detachModel=function(t){this.isMounted()&&(this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels(),this.unmountTraitProperties()),this.detachTraitServices()},i.prototype.remove=function(){var t=this.model;null!==t&&t.removeTrait(this)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertTraitModel(e,i)},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeTraitModel(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertTraitFastener(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeTraitFastener(e)},i.prototype.doMount=function(){if(0!=(this.traitFlags&f.MountedFlag))throw new Error("already mounted");this.setTraitFlags(this.traitFlags|f.MountedFlag),this.willMount(),this.onMount(),this.didMount()},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks(),0!==this.traitConsumers.length&&this.startConsuming()},i.prototype.doUnmount=function(){if(0==(this.traitFlags&f.MountedFlag))throw new Error("already unmounted");this.setTraitFlags(this.traitFlags&~f.MountedFlag),this.willUnmount(),this.onUnmount(),this.didUnmount()},i.prototype.onUnmount=function(){this.stopConsuming(),this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels()},i.prototype.doPower=function(){if(0!=(this.traitFlags&f.PoweredFlag))throw new Error("already powered");this.setTraitFlags(this.traitFlags|f.PoweredFlag),this.willPower(),this.onPower(),this.didPower()},i.prototype.doUnpower=function(){if(0==(this.traitFlags&f.PoweredFlag))throw new Error("already unpowered");this.setTraitFlags(this.traitFlags&~f.PoweredFlag),this.willUnpower(),this.onUnpower(),this.didUnpower()},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateTraitProperties()},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileTraitDownlinks()},i.prototype.addTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitConsumer(t),Object.defineProperty(this,"traitConsumers",{value:o,enumerable:!0,configurable:!0}),this.onAddTraitConsumer(t),this.didAddTraitConsumer(t),0===i.length&&this.isMounted()&&this.startConsuming())},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingTraitDownlinks()},i.prototype.removeTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitConsumer(t),Object.defineProperty(this,"traitConsumers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveTraitConsumer(t),this.didRemoveTraitConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.onStopConsuming=function(){this.stopConsumingTraitDownlinks(),t.prototype.onStopConsuming.call(this)},i.prototype.hasTraitService=function(t){var e=this.traitServices;return null!==e&&void 0!==e[t]},i.prototype.getTraitService=function(t){var e=this.traitServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitService=function(t,e){var i=this.traitServices;null===i&&(i={},Object.defineProperty(this,"traitServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.detach(),null!==e?(i[t]=e,this.isMounted()&&e.attach()):delete i[t]},i.prototype.attachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].attach()}},i.prototype.detachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].detach()}},i.prototype.hasModelProperty=function(t){var e=this.model;return null!==e&&e.hasModelProperty(t)},i.prototype.getModelProperty=function(t){var e=this.model;return null!==e?e.getModelProperty(t):null},i.prototype.setModelProperty=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.setModelProperty(t,e)},i.prototype.hasTraitProperty=function(t){var e=this.traitProperties;return null!==e&&void 0!==e[t]},i.prototype.getTraitProperty=function(t){var e=this.traitProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitProperty=function(t,e){var i=this.traitProperties;null===i&&(i={},Object.defineProperty(this,"traitProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mutateTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].onMutate()}},i.prototype.mountTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].mount()}},i.prototype.unmountTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].unmount()}},i.prototype.hasTraitModel=function(t){var e=this.traitModels;return null!==e&&void 0!==e[t]},i.prototype.getTraitModel=function(t){var e=this.traitModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitModel=function(t,e){var i=this.traitModels;null===i&&(i={},Object.defineProperty(this,"traitModels",{value:i,enumerable:!0,configurable:!0}));var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.child)){var n=this.getChildModel(e.name);null!==n&&e.doSetModel(n,null)}}else delete i[t]},i.prototype.mountTraitModels=function(){var t=this.traitModels;for(var e in t){var i=t[e];if(i.mount(),!0===i.child){var o=this.getChildModel(i.name);null!==o&&i.doSetModel(o,null)}}},i.prototype.unmountTraitModels=function(){var t=this.traitModels;for(var e in t){t[e].unmount()}},i.prototype.insertTraitModel=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitModel(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeTraitModel=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitModel(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasTraitFastener=function(t){var e=this.traitFasteners;return null!==e&&void 0!==e[t]},i.prototype.getTraitFastener=function(t){var e=this.traitFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitFastener=function(t,e){var i=this.traitFasteners;null===i&&(i={},Object.defineProperty(this,"traitFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.sibling)){var n=this.getTrait(e.name);null!==n&&e.doSetTrait(n,null)}}else delete i[t]},i.prototype.mountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){var i=t[e];if(i.mount(),!0===i.sibling){var o=this.getTrait(i.name);null!==o&&i.doSetTrait(o,null)}}},i.prototype.unmountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertTraitFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitFastener(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeTraitFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitFastener(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.traitDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.traitDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.traitDownlinks;null===i&&(i={},Object.defineProperty(this,"traitDownlinks",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&(this.isConsuming()&&!0===o.consume&&o.removeDownlinkConsumer(this),o.unmount()),null!==e?(i[t]=e,this.isMounted()&&(e.mount(),this.isConsuming()&&!0===e.consume&&e.addDownlinkConsumer(this))):delete i[t]},i.prototype.mountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].mount()}c.initModelDownlinks(this)},i.prototype.unmountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].reconcile()}},i.prototype.startConsumingTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.addDownlinkConsumer(this)}},i.prototype.stopConsumingTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.removeDownlinkConsumer(this)}},i}(f);x({type:Object,inherit:!0,state:null,updateFlags:v.NeedsReconcile})(f.prototype,"warpRef");var lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.attachDriver=function(t){t.isConsuming()&&this.addTraitConsumer(t)},e.prototype.detachDriver=function(t){t.isConsuming()&&this.removeTraitConsumer(t)},e.prototype.driverDidStartConsuming=function(t){this.addTraitConsumer(t)},e.prototype.driverWillStopConsuming=function(t){this.removeTraitConsumer(t)},m([K({type:f,observe:!0,onSetTrait:function(t,e){null!==e&&this.owner.detachDriver(e),null!==t&&this.owner.attachDriver(t)},traitDidStartConsuming:function(t){this.owner.driverDidStartConsuming(t)},traitWillStopConsuming:function(t){this.owner.driverWillStopConsuming(t)}})],e.prototype,"driver",void 0),e}(at),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidSet=function(t,e){},m([rt({consume:!0,didSet:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidSet(t,e)}})],e.prototype,"downlink",void 0),e}(lt),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidUpdate=function(t,e,i){},e.prototype.downlinkDidRemove=function(t,e){},m([it({consume:!0,didUpdate:function(t,e,i){this.owner.isConsuming()&&this.owner.downlinkDidUpdate(t,e,i)},didRemove:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidRemove(t,e)}})],e.prototype,"downlink",void 0),e}(lt),pt=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"parentModel",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelConsumers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modelDownlinks",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.willObserve=function(t){for(var e,i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setParentModel=function(t,e){this.willSetParentModel(t,e),null!==e&&this.detachParentModel(e),Object.defineProperty(this,"parentModel",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentModel(t),this.onSetParentModel(t,e),this.didSetParentModel(t,e)},i.prototype.remove=function(){var t=this.parentModel;null!==t&&(0==(this.modelFlags&v.TraversingFlag)?t.removeChildModel(this):this.setModelFlags(this.modelFlags|v.RemovingFlag))},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertModelFastener(e,i)},i.prototype.cascadeInsert=function(t,e){},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeModelFastener(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertModelTrait(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeModelTrait(e)},i.prototype.cascadeMount=function(){if(0!=(this.modelFlags&v.MountedFlag))throw new Error("already mounted");this.setModelFlags(this.modelFlags|v.MountedFlag|v.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountTraits(),this.doMountChildModels(),this.didMount()}finally{this.setModelFlags(this.modelFlags&~v.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountModelServices(),this.mountModelProperties(),this.mountModelFasteners(),this.mountModelTraits(),this.mountModelDownlinks(),0!==this.modelConsumers.length&&this.startConsuming()},i.prototype.doMountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doMount()},i.prototype.doMountChildModels=function(){this.forEachChildModel((function(t){t.cascadeMount(),0!=(t.modelFlags&v.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~v.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.modelFlags&v.MountedFlag))throw new Error("already unmounted");this.setModelFlags(this.modelFlags&~v.MountedFlag|v.TraversingFlag);try{this.willUnmount(),this.doUnmountChildModels(),this.doUnmountTraits(),this.onUnmount(),this.didUnmount()}finally{this.setModelFlags(this.modelFlags&~v.TraversingFlag)}},i.prototype.onUnmount=function(){this.stopConsuming(),this.unmountModelDownlinks(),this.unmountModelTraits(),this.unmountModelFasteners(),this.unmountModelProperties(),this.unmountModelServices(),this.setModelFlags(this.modelFlags&(~v.ModelFlagMask|v.RemovingFlag))},i.prototype.doUnmountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doUnmount()},i.prototype.doUnmountChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnmount(),0!=(t.modelFlags&v.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~v.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.modelFlags&v.PoweredFlag))throw new Error("already powered");this.setModelFlags(this.modelFlags|v.PoweredFlag|v.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerTraits(),this.doPowerChildModels(),this.didPower()}finally{this.setModelFlags(this.modelFlags&~v.TraversingFlag)}},i.prototype.doPowerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doPower()},i.prototype.doPowerChildModels=function(){this.forEachChildModel((function(t){t.cascadePower(),0!=(t.modelFlags&v.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~v.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.modelFlags&v.PoweredFlag))throw new Error("already unpowered");this.setModelFlags(this.modelFlags&~v.PoweredFlag|v.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildModels(),this.doUnpowerTraits(),this.onUnpower(),this.didUnpower()}finally{this.setModelFlags(this.modelFlags&~v.TraversingFlag)}},i.prototype.doUnpowerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].doUnpower()},i.prototype.doUnpowerChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnpower(),0!=(t.modelFlags&v.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~v.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeAnalyze=function(t,e){var i=this.extendModelContext(e);t&=~v.NeedsAnalyze,t|=this.modelFlags&v.UpdateMask,0!=((t=this.needsAnalyze(t,i))&v.AnalyzeMask)&&this.doAnalyze(t,i)},i.prototype.doAnalyze=function(t,e){var i=t;this.setModelFlags(this.modelFlags&~v.NeedsAnalyze|v.TraversingFlag|v.AnalyzingFlag);try{this.willAnalyze(i,e),0!=((this.modelFlags|t)&v.NeedsMutate)&&(i|=v.NeedsMutate,this.setModelFlags(this.modelFlags&~v.NeedsMutate),this.willMutate(e)),0!=((this.modelFlags|t)&v.NeedsAggregate)&&(i|=v.NeedsAggregate,this.setModelFlags(this.modelFlags&~v.NeedsAggregate),this.willAggregate(e)),0!=((this.modelFlags|t)&v.NeedsCorrelate)&&(i|=v.NeedsCorrelate,this.setModelFlags(this.modelFlags&~v.NeedsCorrelate),this.willCorrelate(e)),this.onAnalyze(i,e),0!=(i&v.NeedsMutate)&&this.onMutate(e),0!=(i&v.NeedsAggregate)&&this.onAggregate(e),0!=(i&v.NeedsCorrelate)&&this.onCorrelate(e),this.doAnalyzeChildModels(i,e),0!=(i&v.NeedsCorrelate)&&this.didCorrelate(e),0!=(i&v.NeedsAggregate)&&this.didAggregate(e),0!=(i&v.NeedsMutate)&&this.didMutate(e),this.didAnalyze(i,e)}finally{this.setModelFlags(this.modelFlags&~(v.TraversingFlag|v.AnalyzingFlag))}},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateModelProperties()},i.prototype.analyzeTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].analyzeChildModels(i,o,n,this.analyzeTraitChildModels.bind(this,t,e+1)):this.analyzeOwnChildModels(i,o,n)},i.prototype.analyzeChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.analyzeTraitChildModels(o,0,t,e,i):this.analyzeOwnChildModels(t,e,i)},i.prototype.cascadeRefresh=function(t,e){var i=this.extendModelContext(e);t&=~v.NeedsRefresh,t|=this.modelFlags&v.UpdateMask,0!=((t=this.needsRefresh(t,i))&v.RefreshMask)&&this.doRefresh(t,i)},i.prototype.doRefresh=function(t,e){var i=t;this.setModelFlags(this.modelFlags&~v.NeedsRefresh|v.TraversingFlag|v.RefreshingFlag);try{this.willRefresh(i,e),0!=((this.modelFlags|t)&v.NeedsValidate)&&(i|=v.NeedsValidate,this.setModelFlags(this.modelFlags&~v.NeedsValidate),this.willValidate(e)),0!=((this.modelFlags|t)&v.NeedsReconcile)&&(i|=v.NeedsReconcile,this.setModelFlags(this.modelFlags&~v.NeedsReconcile),this.willReconcile(e)),this.onRefresh(i,e),0!=(i&v.NeedsValidate)&&this.onValidate(e),0!=(i&v.NeedsReconcile)&&this.onReconcile(e),this.doRefreshChildModels(i,e),0!=(i&v.NeedsReconcile)&&this.didReconcile(e),0!=(i&v.NeedsValidate)&&this.didValidate(e),this.didRefresh(i,e)}finally{this.setModelFlags(this.modelFlags&~(v.TraversingFlag|v.RefreshingFlag))}},i.prototype.refreshTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].refreshChildModels(i,o,n,this.refreshTraitChildModels.bind(this,t,e+1)):this.refreshOwnChildModels(i,o,n)},i.prototype.refreshChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.refreshTraitChildModels(o,0,t,e,i):this.refreshOwnChildModels(t,e,i)},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileModelDownlinks()},i.prototype.addModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelConsumer(t),Object.defineProperty(this,"modelConsumers",{value:o,enumerable:!0,configurable:!0}),this.onAddModelConsumer(t),this.didAddModelConsumer(t),0===i.length&&this.isMounted()&&this.startConsuming())},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingModelDownlinks()},i.prototype.removeModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelConsumer(t),Object.defineProperty(this,"modelConsumers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveModelConsumer(t),this.didRemoveModelConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.onStopConsuming=function(){this.stopConsumingModelDownlinks(),t.prototype.onStopConsuming.call(this)},i.prototype.hasModelService=function(t){var e=this.modelServices;return null!==e&&void 0!==e[t]},i.prototype.getModelService=function(t){var e=this.modelServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelService=function(t,e){var i=this.modelServices;null===i&&(i={},Object.defineProperty(this,"modelServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].mount()}},i.prototype.unmountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].unmount()}},i.prototype.hasModelProperty=function(t){var e=this.modelProperties;return null!==e&&void 0!==e[t]},i.prototype.getModelProperty=function(t){var e=this.modelProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelProperty=function(t,e){var i=this.modelProperties;null===i&&(i={},Object.defineProperty(this,"modelProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mutateModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].onMutate()}},i.prototype.mountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].mount()}},i.prototype.unmountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].unmount()}},i.prototype.hasModelFastener=function(t){var e=this.modelFasteners;return null!==e&&void 0!==e[t]},i.prototype.getModelFastener=function(t){var e=this.modelFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelFastener=function(t,e){var i=this.modelFasteners;null===i&&(i={},Object.defineProperty(this,"modelFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertModelFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelFastener(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeModelFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getModelFastener(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasModelTrait=function(t){var e=this.modelTraits;return null!==e&&void 0!==e[t]},i.prototype.getModelTrait=function(t){var e=this.modelTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelTrait=function(t,e){var i=this.modelTraits;null===i&&(i={},Object.defineProperty(this,"modelTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].mount()}},i.prototype.unmountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].unmount()}},i.prototype.insertModelTrait=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelTrait(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeModelTrait=function(t){var e=t.key;if(void 0!==e){var i=this.getModelTrait(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.modelDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.modelDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.modelDownlinks;null===i&&(i={},Object.defineProperty(this,"modelDownlinks",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&(this.isConsuming()&&!0===o.consume&&o.removeDownlinkConsumer(this),o.unmount()),null!==e?(i[t]=e,this.isMounted()&&(e.mount(),this.isConsuming()&&!0===e.consume&&e.addDownlinkConsumer(this))):delete i[t]},i.prototype.mountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].mount()}c.initModelDownlinks(this)},i.prototype.unmountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].reconcile()}},i.prototype.startConsumingModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.addDownlinkConsumer(this)}},i.prototype.stopConsumingModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.removeDownlinkConsumer(this)}},i}(v);x({type:Object,inherit:!0,state:null,updateFlags:v.NeedsReconcile})(v.prototype,"warpRef");var dt=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childModels",{value:[],enumerable:!0}),Object.defineProperty(e,"childModelMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childModelCount",{get:function(){return this.childModels.length},enumerable:!1,configurable:!0}),e.prototype.firstChildModel=function(){var t=this.childModels;return 0!==t.length?t[0]:null},e.prototype.lastChildModel=function(){var t=this.childModels;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildModel=function(t,e){for(var i,o=this.childModels,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildModel=function(t){var e=this.childModelMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildModel=function(t,e){var i=null,o=this.childModels;null!==e&&(e.parentModel===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildModel(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildModel(r),r.setParentModel(null,this),this.removeChildModelMap(r),o.splice(n,1),this.onRemoveChildModel(r),this.didRemoveChildModel(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildModel(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildModelMap(e),e.setParentModel(this,null),this.onInsertChildModel(e,i),this.didInsertChildModel(e,i),e.cascadeInsert()),r},e.prototype.insertChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null===i&&(i={},Object.defineProperty(this,"childModelMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null!==i&&delete i[e]}},e.prototype.appendChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e)),this.willInsertChildModel(t,null),this.childModels.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,null),this.didInsertChildModel(t,null),t.cascadeInsert()},e.prototype.prependChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e));var i=this.childModels,o=0!==i.length?i[0]:null;this.willInsertChildModel(t,o),i.unshift(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,o),this.didInsertChildModel(t,o),t.cascadeInsert()},e.prototype.insertChildModel=function(t,e,i){if(null!==e&&e.parentModel!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildModel(i),t.setKey(i)),this.willInsertChildModel(t,e);var o=this.childModels,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,e),this.didInsertChildModel(t,e),t.cascadeInsert()},e.prototype.removeChildModel=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildModel(t)))return null}else e=t;if(e.parentModel!==this)throw new Error("not a child model");this.willRemoveChildModel(e),e.setParentModel(null,this),this.removeChildModelMap(e);var i=this.childModels,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildModel(e),this.didRemoveChildModel(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childModels;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildModel(i),i.setParentModel(null,this),this.removeChildModelMap(i),t.pop(),this.onRemoveChildModel(i),this.didRemoveChildModel(i),i.setKey(void 0)}},e.prototype.doMountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.modelFlags&v.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~v.RemovingFlag),this.removeChildModel(i))}},e.prototype.doUnmountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.modelFlags&v.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~v.RemovingFlag),this.removeChildModel(i))}},e.prototype.doPowerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.modelFlags&v.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~v.RemovingFlag),this.removeChildModel(i))}},e.prototype.doUnpowerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.modelFlags&v.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~v.RemovingFlag),this.removeChildModel(i))}},e.prototype.analyzeOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&v.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~v.RemovingFlag),this.removeChildModel(r))}},e.prototype.refreshOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&v.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~v.RemovingFlag),this.removeChildModel(r))}},e}(pt),ct={fromAny:function(t){return"string"!=typeof t||"large"!==t&&"larger"!==t&&"medium"!==t&&"small"!==t&&"smaller"!==t&&"x-large"!==t&&"x-small"!==t&&"xx-large"!==t&&"xx-small"!==t?r.Length.fromAny(t):t},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return ct.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},vt={fromAny:function(t){return"string"==typeof t&&"normal"===t?t:r.Length.fromAny(t)},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return vt.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},ft={fromValue:function(t){var e=null;return t.forEach((function(t){if(t instanceof o.Value){var i=t.stringValue(void 0);void 0!==i&&(null===e?e=i:"string"==typeof e?e=[e,i]:e.push(i))}})),e},format:function(t){var e,i=t.length;if(i>0){e=s.Unicode.isAlpha(t.charCodeAt(0));for(var o=t.offsetByCodePoints(0,1);e&&o<i;o=t.offsetByCodePoints(o,1)){var n=t.charCodeAt(o);e=s.Unicode.isAlpha(n)||45===n}}else e=!1;if(e)return t;var r=s.Unicode.stringOutput();r.write(34);for(o=0;o<i;o=t.offsetByCodePoints(o,1)){if(10===(n=t.charCodeAt(o))||34===n||39===n)r.write(92).write(n);else if(n>=32)r.write(n);else{var a=s.Base16.uppercase;r.write(92).write(a.encodeDigit(n>>>20&15)).write(a.encodeDigit(n>>>16&15)).write(a.encodeDigit(n>>>12&15)).write(a.encodeDigit(n>>>8&15)).write(a.encodeDigit(n>>>4&15)).write(a.encodeDigit(15&n))}}return r.write(34),r.toString()}},yt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.output=e,r.quote=i,r.code=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.output,this.quote,this.code,this.step)},e.parse=function(t,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1);var a=0;if(1===r){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont())if(s.Unicode.isAlpha(a)||45===a)i=i||s.Unicode.stringOutput(),r=2;else{if(34!==a&&(39!==a||o!==a&&0!==o))return s.Parser.error(s.Diagnostic.expected("font family",t));t=t.step(),i=i||s.Unicode.stringOutput(),o=a,r=3}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected("font family",t))}if(2===r){for(;t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a)||45===a);)t=t.step(),i.write(a);if(!t.isEmpty())return s.Parser.done(i.bind())}t:for(;;){if(3===r){for(;t.isCont()&&(a=t.head())>=32&&a!==o&&92!==a;)t=t.step(),i.write(a);if(t.isCont()){if(a===o)return t=t.step(),s.Parser.done(i.bind());if(92!==a)return s.Parser.error(s.Diagnostic.expected(o,t));t=t.step(),r=4}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected(o,t))}if(4===r)if(t.isCont()){if(a=t.head(),!s.Base16.isDigit(a)){if(10===a){t.step(),r=3;continue}t.step(),i.write(a),r=3;continue}r=5}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected("escape character",t));if(r>=5)for(;;){if(t.isCont()&&(a=t.head(),s.Base16.isDigit(a))){if(t=t.step(),n=16*n+s.Base16.decodeDigit(a),r<=11){r+=1;continue}if(0===n)return s.Parser.error(s.Diagnostic.message("zero escape",t));i.write(n),n=0,r=3;continue t}if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));break}break}return new e(i,o,n,r)},e}(s.Parser),gt=function(){function t(t,e,i,o,n,r,s){Object.defineProperty(this,"style",{value:t,enumerable:!0}),Object.defineProperty(this,"variant",{value:e,enumerable:!0}),Object.defineProperty(this,"weight",{value:i,enumerable:!0}),Object.defineProperty(this,"stretch",{value:o,enumerable:!0}),Object.defineProperty(this,"size",{value:n,enumerable:!0}),Object.defineProperty(this,"height",{value:r,enumerable:!0}),Object.defineProperty(this,"family",{value:s,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withStyle=function(e){return e===this.style?this:new t(e,this.variant,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withVariant=function(e){return e===this.variant?this:new t(this.style,e,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withWeight=function(e){return e===this.weight?this:new t(this.style,this.variant,e,this.stretch,this.size,this.height,this.family)},t.prototype.withStretch=function(e){return e===this.stretch?this:new t(this.style,this.variant,this.weight,e,this.size,this.height,this.family)},t.prototype.withSize=function(i){return null!==i&&(i=ct.fromAny(i)),e.Values.equal(i,this.size)?this:new t(this.style,this.variant,this.weight,this.stretch,i,this.height,this.family)},t.prototype.withHeight=function(i){return null!==i&&(i=vt.fromAny(i)),e.Values.equal(i,this.height)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,i,this.family)},t.prototype.withFamily=function(i){return Array.isArray(i)&&1===i.length&&(i=i[0]),e.Values.equal(i,this.family)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,this.height,i)},t.prototype.toAny=function(){return{style:this.style,variant:this.variant,weight:this.weight,stretch:this.stretch,size:this.size,height:this.height,family:Array.isArray(this.family)?this.family.slice(0):this.family}},t.prototype.interpolateTo=function(e){return e instanceof t?wt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equivalent(this.size,i.size,o)&&e.Values.equivalent(this.height,i.height,o)&&e.Values.equivalent(this.family,i.family,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equal(this.size,i.size)&&e.Values.equal(this.height,i.height)&&e.Values.equal(this.family,i.family))},t.prototype.debug=function(t){if(t=t.write("Font").write(46).write("family").write(40),"string"==typeof this.family)t=t.debug(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){t=t.debug(this.family[0]);for(var e=1;e<this.family.length;e+=1)t=t.write(", ").debug(this.family[e])}t=t.write(41),void 0!==this.style&&(t=t.write(46).write("style").write(40).debug(this.style).write(41)),void 0!==this.variant&&(t=t.write(46).write("variant").write(40).debug(this.variant).write(41)),void 0!==this.weight&&(t=t.write(46).write("weight").write(40).debug(this.weight).write(41)),void 0!==this.stretch&&(t=t.write(46).write("stretch").write(40).debug(this.stretch).write(41)),void 0!==this.size&&(t=t.write(46).write("size").write(40).debug(this.size).write(41)),void 0!==this.height&&(t=t.write(46).write("height").write(40).debug(this.height).write(41))},t.prototype.toString=function(){var t,e,i,o=this.stringValue;if(void 0===o){if(o="",void 0===this.style&&"normal"!==this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(o+=null!==(t=this.style)&&void 0!==t?t:"normal"),void 0===this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(e=this.variant)&&void 0!==e?e:"normal"),void 0===this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(i=this.weight)&&void 0!==i?i:"normal"),void 0!==this.stretch&&(0!==o.length&&(o+=" "),o+=this.stretch),null!==this.size&&(0!==o.length&&(o+=" "),o+=this.size.toString(),null!==this.height&&(o+="/",o+=this.height.toString())),"string"==typeof this.family)0!==o.length&&(o+=" "),o+=ft.format(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){0!==o.length&&(o+=" "),o+=ft.format(this.family[0]);for(var n=1;n<this.family.length;n+=1)o+=", ",o+=ft.format(this.family[n])}Object.defineProperty(this,"stringValue",{value:o,enumerable:!0,configurable:!0})}return o},t.style=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(e,void 0,void 0,void 0,null,null,i)},t.variant=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,e,void 0,void 0,null,null,i)},t.weight=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,e,void 0,null,null,i)},t.stretch=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,e,null,null,i)},t.size=function(e,i){return e=null!==e?ct.fromAny(e):null,Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,void 0,e,null,i)},t.family=function(e){return Array.isArray(e)&&1===e.length&&(e=e[0]),new t(void 0,void 0,void 0,void 0,null,null,e)},t.create=function(e,i,o,n,r,s,a){return r=null!=r?ct.fromAny(r):null,s=null!=s?vt.fromAny(s):null,Array.isArray(a)&&1===a.length&&(a=a[0]),new t(e,i,o,n,r,s,a)},t.fromInit=function(e){return t.create(e.style,e.variant,e.weight,e.stretch,e.size,e.height,e.family)},t.fromValue=function(e){var i=e.header("font");if(i.isDefined()){var o=i.get("style").stringValue(void 0),n=i.get("variant").stringValue(void 0),r=i.get("weight").stringValue(void 0),s=i.get("stretch").stringValue(void 0),a=ct.fromValue(i.get("size")),l=vt.fromValue(i.get("height")),u=ft.fromValue(i.get("family"));if(null!==u)return t.create(o,n,r,s,a,l,u)}return null},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=bt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.family},t.isAny=function(e){return e instanceof t||t.isInit(e)},t.form=function(t){return new mt(void 0)},m([e.Lazy],t,"form",null),t}();function wt(t,e){var i=function(t){var e=i.styleInterpolator(t),o=i.variantInterpolator(t),n=i.weightInterpolator(t),r=i.stretchInterpolator(t),s=i.sizeInterpolator(t),a=i.heightInterpolator(t),l=i.familyInterpolator(t);return new gt(e,o,n,r,s,a,l)};return Object.setPrototypeOf(i,wt.prototype),Object.defineProperty(i,"styleInterpolator",{value:a.Interpolator(t.style,e.style),enumerable:!0}),Object.defineProperty(i,"variantInterpolator",{value:a.Interpolator(t.variant,e.variant),enumerable:!0}),Object.defineProperty(i,"weightInterpolator",{value:a.Interpolator(t.weight,e.weight),enumerable:!0}),Object.defineProperty(i,"stretchInterpolator",{value:a.Interpolator(t.stretch,e.stretch),enumerable:!0}),Object.defineProperty(i,"sizeInterpolator",{value:a.Interpolator(t.size,e.size),enumerable:!0}),Object.defineProperty(i,"heightInterpolator",{value:a.Interpolator(t.height,e.height),enumerable:!0}),Object.defineProperty(i,"familyInterpolator",{value:a.Interpolator(t.family,e.family),enumerable:!0}),i}w(wt,a.Interpolator),Object.defineProperty(wt.prototype,0,{get:function(){var t=this.styleInterpolator[0],e=this.variantInterpolator[0],i=this.weightInterpolator[0],o=this.stretchInterpolator[0],n=this.sizeInterpolator[0],r=this.heightInterpolator[0],s=this.familyInterpolator[0];return new gt(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Object.defineProperty(wt.prototype,1,{get:function(){var t=this.styleInterpolator[1],e=this.variantInterpolator[1],i=this.weightInterpolator[1],o=this.stretchInterpolator[1],n=this.sizeInterpolator[1],r=this.heightInterpolator[1],s=this.familyInterpolator[1];return new gt(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),wt.prototype.equals=function(t){return this===t||t instanceof wt&&(this.styleInterpolator.equals(t.styleInterpolator)&&this.variantInterpolator.equals(t.variantInterpolator)&&this.weightInterpolator.equals(t.weightInterpolator)&&this.stretchInterpolator.equals(t.stretchInterpolator)&&this.sizeInterpolator.equals(t.sizeInterpolator)&&this.heightInterpolator.equals(t.heightInterpolator)&&this.familyInterpolator.equals(t.familyInterpolator))};var mt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){t=gt.fromAny(t);var e=o.Record.create(7);if(void 0!==t.style&&e.slot("style",t.style),void 0!==t.variant&&e.slot("variant",t.variant),void 0!==t.weight&&e.slot("weight",t.weight),void 0!==t.stretch&&e.slot("stretch",t.stretch),t.size instanceof r.Length?e.slot("size",r.Length.form().mold(t.size)):void 0!==t.size&&e.slot("size",t.size),t.height instanceof r.Length?e.slot("height",r.Length.form().mold(t.height)):void 0!==t.height&&e.slot("height",t.height),Array.isArray(t.family)){for(var i=o.Record.create(t.family.length),n=0;n<t.family.length;n+=1)i.push(t.family[n]);e.slot("family",i)}else e.slot("family",t.family);return o.Record.of(o.Attr.of("font",e))},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(null===(i=gt.fromValue(e))){var o=e.stringValue();void 0!==o&&(i=gt.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),bt=function(t){function e(e,i,o,n,r,s,a,l,u,h,p){var d=t.call(this)||this;return d.style=e,d.variant=i,d.weight=o,d.stretch=n,d.size=r,d.height=s,d.family=a,d.identOutput=l,d.lengthParser=u,d.familyParser=h,d.step=p,d}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.style,this.variant,this.weight,this.stretch,this.size,this.height,this.family,this.identOutput,this.lengthParser,this.familyParser,this.step)},e.parse=function(t,i,o,n,a,l,u,h,p,d,c,v){void 0===v&&(v=1);for(var f=0;;){if(1===v){for(;t.isCont()&&(f=t.head(),s.Unicode.isSpace(f));)t.step();if(t.isCont())v=s.Unicode.isAlpha(f)?2:34===f||39===f?11:4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===v){for(p=p||s.Unicode.stringOutput();t.isCont()&&(f=t.head(),s.Unicode.isAlpha(f)||45===f);)t=t.step(),p.write(f);if(!t.isEmpty()){var y=p.bind();switch(p=void 0,y){case"italic":case"oblique":if(void 0!==i)return s.Parser.error(s.Diagnostic.message("reapeated font style: "+y,t));i=y,v=3;break;case"small-caps":if(void 0!==o)return s.Parser.error(s.Diagnostic.message("reapeated font variant: "+y,t));o=y,v=3;break;case"bold":case"bolder":case"lighter":if(void 0!==n)return s.Parser.error(s.Diagnostic.message("reapeated font weight: "+y,t));n=y,v=3;break;case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":if(void 0!==a)return s.Parser.error(s.Diagnostic.message("reapeated font stretch: "+y,t));a=y,v=3;break;case"normal":if(void 0===i)i=y;else if(void 0===o)o=y;else if(void 0===n)n=y;else{if(void 0!==a)return s.Parser.error(s.Diagnostic.message("reapeated font property: "+y,t));a=y}v=3;break;case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":l=y,v=5;break;default:h=y,v=12}}}if(3===v){if(t.isCont()){if(f=t.head(),s.Unicode.isSpace(f)){t.step(),v=1;continue}return s.Parser.error(s.Diagnostic.expected("font property, size, or family",t))}if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(4===v)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone()){var g=d.bind();if(""===g.units){var w=g.value;switch(w){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:if(void 0!==n)return s.Parser.error(s.Diagnostic.message("reapeated font weight: "+w,t));n=String(w);break;default:return s.Parser.error(s.Diagnostic.message("unknown font property: "+w,t))}v=3;continue}l=g,d=void 0,v=5}else if(d.isError())return d.asError();if(5===v)if(t.isCont())if(f=t.head(),s.Unicode.isSpace(f))t.step(),v=6;else{if(47!==f)return s.Parser.error(s.Diagnostic.expected("font family",t));t.step(),v=7}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(6===v){for(;t.isCont()&&(f=t.head(),s.Unicode.isSpace(f));)t.step();if(t.isCont())47===f?(t.step(),v=7):v=11;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(7===v){for(;t.isCont()&&(f=t.head(),s.Unicode.isSpace(f));)t.step();if(t.isCont())v=s.Unicode.isAlpha(f)?8:9;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===v){for(p=p||s.Unicode.stringOutput();t.isCont()&&(f=t.head(),s.Unicode.isAlpha(f));)t=t.step(),p.write(f);if(!t.isEmpty()){y=p.bind();switch(p=void 0,y){case"normal":u=y,v=10;break;default:return s.Parser.error(s.Diagnostic.message("unknown line height: "+y,t))}}}if(9===v)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone())u=d.bind(),d=void 0,v=10;else if(d.isError())return d.asError();if(10===v)if(t.isCont()){if(f=t.head(),!s.Unicode.isSpace(f))return s.Parser.error(s.Diagnostic.expected("font family",t));t.step(),v=11}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(11===v)if((c=void 0===c?yt.parse(t):c.feed(t)).isDone())Array.isArray(h)?h.push(c.bind()):h=void 0!==h?[h,c.bind()]:c.bind(),c=void 0,v=12;else if(c.isError())return c.asError();if(12===v){for(;t.isCont()&&(f=t.head(),s.Unicode.isSpace(f));)t.step();if(t.isCont()&&44===f){t.step(),v=11;continue}if(!t.isEmpty())return s.Parser.done(gt.create(i,o,n,a,l,u,h))}break}return new e(i,o,n,a,l,u,h,p,d,c,v)},e.parseRest=function(t,i,o,n,r,s,a,l){var u=void 0!==l?12:void 0!==s?5:3;return e.parse(t,i,o,n,r,s,a,l,void 0,void 0,void 0,u)},e}(s.Parser),St=function(){function t(){}return t.prototype.contrast=function(t){return this.lightness<.67?this.lighter(t):this.darker(t)},t.prototype.interpolateTo=function(e){return e instanceof t?Dt(this.rgb(),e.rgb()):null},t.transparent=function(){return Tt.transparent()},t.black=function(t){return Tt.black(t)},t.white=function(t){return Tt.white(t)},t.rgb=function(t,e,i,o){return new Tt(t,e,i,o)},t.hsl=function(t,e,i,o){return"number"!=typeof t&&(t=r.Angle.fromAny(t).degValue()),new xt(t,e,i,o)},t.forName=function(e){switch(e){case"transparent":return t.transparent();case"black":return t.black();case"white":return t.white();default:return null}},t.fromInit=function(t){if(Tt.isInit(t))return Tt.fromInit(t);if(xt.isInit(t))return xt.fromInit(t);throw new TypeError(""+t)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(Tt.isInit(e))return Tt.fromInit(e);if(xt.isInit(e))return xt.fromInit(e);throw new TypeError(""+e)},t.fromValue=function(t){var e;return void 0===(e=Tt.fromValue(t))&&(e=xt.fromValue(t)),e},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Pt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return Tt.isInit(t)||xt.isInit(t)},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t.form=function(){return new Ct(t.transparent())},t.Darker=.7,t.Brighter=1/t.Darker,m([e.Lazy],t,"form",null),t}(),Ct=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){return t=St.fromAny(t),o.Text.from(t.toString())},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(void 0===(i=St.fromValue(e))){var o=e.stringValue(void 0);void 0!==o&&(i=St.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),Pt=function(t){function e(e,i){var o=t.call(this)||this;return o.identOutput=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.step)},e.parse=function(t,i,o){void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()){if(35===t.head())return Mt.parse(t);o=2}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(2===o){for(i=i||s.Unicode.stringOutput();t.isCont()&&(n=t.head(),s.Unicode.isAlpha(n));)t=t.step(),i.write(n);if(!t.isEmpty()){var r=i.bind();switch(r){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return Rt.parseRest(t);default:var a=St.forName(r);return null!==a?s.Parser.done(a):s.Parser.error(s.Diagnostic.message("unknown color: "+r,t))}}}return new e(i,o)},e}(s.Parser),Vt=function(){function t(t,e){Object.defineProperty(this,"value",{value:t,enumerable:!0}),Object.defineProperty(this,"units",{value:void 0!==e?e:"",enumerable:!0})}return t.prototype.scale=function(t){return"%"===this.units?this.value*t/100:this.value},t}(),Ft=function(t){function e(e,i){var o=t.call(this)||this;return o.valueParser=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.valueParser,this.step)},e.parse=function(t,i,o){if(void 0===o&&(o=1),1===o)if((i=void 0===i?s.Base10.parseNumber(t):i.feed(t)).isDone())o=2;else if(i.isError())return i.asError();if(2===o){if(t.isCont()&&37===t.head())return t=t.step(),s.Parser.done(new Vt(i.bind(),"%"));if(!t.isEmpty())return s.Parser.done(new Vt(i.bind()))}return new e(i,o)},e}(s.Parser),Tt=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return Object.defineProperty(r,"r",{value:e,enumerable:!0}),Object.defineProperty(r,"g",{value:i,enumerable:!0}),Object.defineProperty(r,"b",{value:o,enumerable:!0}),Object.defineProperty(r,"a",{value:n,enumerable:!0}),Object.defineProperty(r,"stringValue",{value:void 0,enumerable:!0,configurable:!0}),r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.r)&&isFinite(this.g)&&isFinite(this.b)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.r,this.g,this.b,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i);return(Math.max(t,e,i)+o)/2},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=St.fromAny(t).rgb(),new i(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},i.prototype.times=function(t){return new i(this.r*t,this.g*t,this.b*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=St.fromAny(t).rgb(),new i(this.r+t.r*e,this.g+t.g*e,this.b+t.b*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?St.Brighter:Math.pow(St.Brighter,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?St.Darker:Math.pow(St.Darker,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.rgb=function(){return this},i.prototype.hsl=function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i),n=Math.max(t,e,i),r=NaN,s=n-o,a=(n+o)/2;return 0!==s?(r=t===n?(e-i)/s+6*+(e<i):e===n?(i-t)/s+2:(t-e)/s+4,s/=a<.5?n+o:2-(n+o),r*=60):s=a>0&&a<1?0:r,new xt(r,s,a,this.a)},i.prototype.interpolateTo=function(e){return e instanceof i?Dt(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof St&&(t=t.rgb(),e.Numbers.equivalent(this.r,t.r,i)&&e.Numbers.equivalent(this.g,t.g,i)&&e.Numbers.equivalent(this.b,t.b,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.r)),e.Numbers.hash(this.g)),e.Numbers.hash(this.b)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){t=t.write("Color").write(46).write("rgb").write(40).debug(this.r).write(", ").debug(this.g).write(", ").debug(this.b),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){var t=Math.min(Math.max(0,Math.round(this.r||0)),255),e=Math.min(Math.max(0,Math.round(this.g||0)),255),i=Math.min(Math.max(0,Math.round(this.b||0)),255),o="#",n=s.Base16.lowercase.alphabet;return o+=n.charAt(t>>>4&15),o+=n.charAt(15&t),o+=n.charAt(e>>>4&15),o+=n.charAt(15&e),o+=n.charAt(i>>>4&15),o+=n.charAt(15&i)},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?t=this.toHexString():(t=1===e?"rgb":"rgba",t+="(",t+=Math.max(0,Math.min(Math.round(this.r)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.g)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.b)||0,255)),1!==e&&(t+=",",t+=e),t+=")"),Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(255,255,255,t)},i.fromInit=function(t){return new i(t.r,t.g,t.b,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,r,s,a,l=t.tag;return"rgb"===l||"rgba"===l?(t=t.header(l),e=!0):e=!1,t.forEach((function(t,i){var l=t.key.stringValue();void 0!==l?"r"===l?n=t.toValue().numberValue(n):"g"===l?r=t.toValue().numberValue(r):"b"===l?s=t.toValue().numberValue(s):"a"===l&&(a=t.toValue().numberValue(a)):t instanceof o.Value&&e&&(0===i?n=t.numberValue(n):1===i?r=t.numberValue(r):2===i?s=t.numberValue(s):3===i&&(a=t.numberValue(a)))})),void 0!==n&&void 0!==r&&void 0!==s?new i(n,r,s,a):null},i.parse=function(t){return St.parse(t).rgb()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(St),Dt=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.r+t*(o.r-e.r),r=e.g+t*(o.g-e.g),s=e.b+t*(o.b-e.b),a=e.a+t*(o.a-e.a);return new Tt(n,r,s,a)};return Object.setPrototypeOf(i,Dt.prototype),Object.defineProperty(i,0,{value:t,enumerable:!0}),Object.defineProperty(i,1,{value:e,enumerable:!0}),i};Dt.prototype=Object.create(a.Interpolator.prototype);var Mt=function(t){function e(e,i){var o=t.call(this)||this;return o.value=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.value,this.step)},e.parse=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()&&35===t.head())t=t.step(),o=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("#",t));if(o>=2){for(;o<=9&&t.isCont()&&(n=t.head(),s.Base16.isDigit(n));)t=t.step(),i=i<<4|s.Base16.decodeDigit(n),o+=1;if(!t.isEmpty())return 5===o?s.Parser.done(new Tt(i>>8&15|i>>4&240,i>>4&15|240&i,i<<4&240|15&i)):6===o?s.Parser.done(new Tt(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,(i<<4&240|15&i)/255)):8===o?s.Parser.done(new Tt(i>>16&255,i>>8&255,255&i)):10===o?s.Parser.done(new Tt(i>>24&255,i>>16&255,i>>8&255,(255&i)/255)):s.Parser.error(s.Diagnostic.unexpected(t))}return new e(i,o)},e}(s.Parser),Ot=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.rParser=e,s.gParser=i,s.bParser=o,s.aParser=n,s.step=r,s}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.rParser,this.gParser,this.bParser,this.aParser,this.step)},e.parse=function(t,i,o,n,r,a){var l=0;if(1===a)if(t.isCont()&&114===t.head())t=t.step(),a=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("r",t));if(2===a)if(t.isCont()&&103===t.head())t=t.step(),a=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("g",t));if(3===a)if(t.isCont()&&98===t.head())t=t.step(),a=4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("b",t));if(4===a&&(t.isCont()&&97===t.head()?(t=t.step(),a=5):t.isEmpty()||(a=5)),5===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&40===l)t=t.step(),a=6;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(6===a){if(void 0===i){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=Ft.parse(t))}else i=i.feed(t);if(void 0!==i)if(i.isDone())a=7;else if(i.isError())return i.asError()}if(7===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont())44===l&&(t=t.step()),a=8;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===a){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Ft.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())a=9;else if(o.isError())return o.asError()}if(9===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont())44===l&&(t=t.step()),a=10;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(10===a){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(n=Ft.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())a=11;else if(n.isError())return n.asError()}if(11===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()){if(41===l)return t=t.step(),s.Parser.done(new Tt(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255)));44!==l&&47!==l||(t=t.step()),a=12}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(12===a){if(void 0===r){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(r=Ft.parse(t))}else r=r.feed(t);if(void 0!==r)if(r.isDone())a=13;else if(r.isError())return r.asError()}if(13===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&41===l)return t=t.step(),s.Parser.done(new Tt(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255),r.bind().scale(1)));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,r,a)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(s.Parser),xt=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return Object.defineProperty(r,"h",{value:e,enumerable:!0}),Object.defineProperty(r,"s",{value:i,enumerable:!0}),Object.defineProperty(r,"l",{value:o,enumerable:!0}),Object.defineProperty(r,"a",{value:n,enumerable:!0}),Object.defineProperty(r,"stringValue",{value:void 0,enumerable:!0,configurable:!0}),r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.h)&&isFinite(this.s)&&isFinite(this.l)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.h,this.s,this.l,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){return this.l},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=St.fromAny(t).hsl(),new i(this.h+t.h,this.s+t.s,this.l+t.l,this.a+t.a)},i.prototype.times=function(t){return new i(this.h*t,this.s*t,this.l*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=St.fromAny(t).hsl(),new i(this.h+t.h*e,this.s+t.s*e,this.l+t.l*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?St.Brighter:Math.pow(St.Brighter,t))?new i(this.h,this.s,this.l*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?St.Darker:Math.pow(St.Darker,t))?new i(this.h,this.s,this.l*t,this.a):this},i.toRgb=function(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)},i.prototype.rgb=function(){var t=this.h%360+360*+(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,n=o+(o<.5?o:1-o)*e,r=2*o-n;return new Tt(i.toRgb(t>=240?t-240:t+120,r,n),i.toRgb(t,r,n),i.toRgb(t<120?t+240:t-120,r,n),this.a)},i.prototype.hsl=function(){return this},i.prototype.interpolateTo=function(e){return e instanceof i?At(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof St&&(t=t.hsl(),e.Numbers.equivalent(this.h,t.h,i)&&e.Numbers.equivalent(this.s,t.s,i)&&e.Numbers.equivalent(this.l,t.l,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.h===t.h&&this.s===t.s&&this.l===t.l&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.h)),e.Numbers.hash(this.s)),e.Numbers.hash(this.l)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){t=t.write("Color").write(46).write("hsl").write(40).debug(this.h).write(", ").debug(this.s).write(", ").debug(this.l),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){return this.rgb().toHexString()},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;t=1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?"hsl":"hsla",t+="(",t+=Math.max(0,Math.min(Math.round(this.h)||0,360)),t+=",",t+=Math.max(0,Math.min(100*Math.round(this.s)||0,100))+"%",t+=",",t+=Math.max(0,Math.min(100*Math.round(this.l)||0,100))+"%",1!==e&&(t+=",",t+=e),t+=")",Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(0,1,1,t)},i.fromInit=function(t){return new i("number"==typeof t.h?t.h:r.Angle.fromAny(t.h).degValue(),t.s,t.l,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,s,a,l,u=t.tag;return"hsl"===u||"hsla"===u?(t=t.header(u),e=!0):e=!1,t.forEach((function(t,i){var u=t.key.stringValue();void 0!==u?"h"===u?n=t.toValue().cast(r.Angle.form(),n):"s"===u?s=t.toValue().numberValue(s):"l"===u?a=t.toValue().numberValue(a):"a"===u&&(l=t.toValue().numberValue(l)):t instanceof o.Value&&e&&(0===i?n=t.cast(r.Angle.form(),n):1===i?s=t.numberValue(s):2===i?a=t.numberValue(a):3===i&&(l=t.numberValue(l)))})),void 0!==n&&void 0!==s&&void 0!==a?new i(n.degValue(),s,a,l):null},i.parse=function(t){return St.parse(t).hsl()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return r.Angle.isAny(e.h)&&"number"==typeof e.s&&"number"==typeof e.l&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(St),At=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.h+t*(o.h-e.h),r=e.s+t*(o.s-e.s),s=e.l+t*(o.l-e.l),a=e.a+t*(o.a-e.a);return new xt(n,r,s,a)};return Object.setPrototypeOf(i,At.prototype),Object.defineProperty(i,0,{value:t,enumerable:!0}),Object.defineProperty(i,1,{value:e,enumerable:!0}),i};At.prototype=Object.create(a.Interpolator.prototype);var Rt=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.hParser=e,s.sParser=i,s.lParser=o,s.aParser=n,s.step=r,s}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.hParser,this.sParser,this.lParser,this.aParser,this.step)},e.parse=function(t,i,o,n,a,l){var u=0;if(1===l)if(t.isCont()&&104===t.head())t=t.step(),l=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("h",t));if(2===l)if(t.isCont()&&115===t.head())t=t.step(),l=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("s",t));if(3===l)if(t.isCont()&&108===t.head())t=t.step(),l=4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("l",t));if(4===l&&(t.isCont()&&97===t.head()?(t=t.step(),l=5):t.isEmpty()||(l=5)),5===l){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&40===u)t=t.step(),l=6;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(6===l){if(void 0===i){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=r.AngleParser.parse(t,"deg"))}else i=i.feed(t);if(void 0!==i)if(i.isDone())l=7;else if(i.isError())return i.asError()}if(7===l){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),l=8;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===l){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Ft.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone()){if("%"!==o.bind().units)return s.Parser.error(s.Diagnostic.expected("%",t));l=9}else if(o.isError())return o.asError()}if(9===l){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),l=10;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(10===l){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isCont()&&(n=Ft.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone()){if("%"!==n.bind().units)return s.Parser.error(s.Diagnostic.expected("%",t));l=11}else if(n.isError())return n.asError()}if(11===l){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t=t.step();if(t.isCont()){if(41===u)return t=t.step(),s.Parser.done(new xt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1)));44!==u&&47!==u||(t=t.step()),l=12}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(12===l){if(void 0===a){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(a=Ft.parse(t))}else a=a.feed(t);if(void 0!==a)if(a.isDone())l=13;else if(a.isError())return a.asError()}if(13===l){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&41===u)return t=t.step(),s.Parser.done(new xt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1),a.bind().scale(1)));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,a,l)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(s.Parser),kt=function(){function t(t,e,i){Object.defineProperty(this,"color",{value:t,enumerable:!0}),Object.defineProperty(this,"stop",{value:e,enumerable:!0}),Object.defineProperty(this,"hint",{value:i,enumerable:!0})}return t.prototype.withColor=function(e){return new t(e=St.fromAny(e),this.stop,this.hint)},t.prototype.withStop=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,e,this.hint)},t.prototype.withHint=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,this.stop,e)},t.prototype.interpolateTo=function(e){return e instanceof t?It(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Equivalent(this.color,i.color,o)&&e.Equivalent(this.stop,i.stop,o)&&e.Equivalent(this.hint,i.hint,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.color.equals(i.color)&&e.Equals(this.stop,i.stop)&&e.Equals(this.hint,i.hint))},t.prototype.toString=function(){var t="";return null!==this.hint&&(t+=this.hint.toString(),t+=", "),t+=this.color.toString(),null!==this.stop&&(t+=" ",t+=this.stop.toString()),t},t.create=function(e,i,o){return void 0===i&&(i=null),void 0===o&&(o=null),e=St.fromAny(e),null!==i&&(i=r.Length.fromAny(i,"%")),null!==o&&(o=r.Length.fromAny(o,"%")),new t(e,i,o)},t.fromInit=function(e){return new t(St.fromAny(e.color),void 0!==e.stop?r.Length.fromAny(e.stop,"%"):null,void 0!==e.hint?r.Length.fromAny(e.hint,"%"):null)},t.fromTuple=function(e){return new t(St.fromAny(e[0]),null!==e[1]?r.Length.fromAny(e[1],"%"):null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(t.isInit(e))return t.fromInit(e);if(t.isTuple(e))return t.fromTuple(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Lt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseHint=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Lt.parseHint(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseList=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=jt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.color},t.isTuple=function(t){return Array.isArray(t)&&2===t.length&&St.isAny(t[0])&&(null===t[1]||r.Length.isAny(t[1]))},t.isAny=function(e){return e instanceof t||t.isInit(e)||t.isTuple(e)||"string"==typeof e},t}(),It=function(t,e){var i=function(t){var e=i.colorInterpolator(t),o=i.stopInterpolator(t),n=i.hintInterpolator(t);return new kt(e,o,n)};return Object.setPrototypeOf(i,It.prototype),Object.defineProperty(i,"colorInterpolator",{value:t.color.interpolateTo(e.color),enumerable:!0}),Object.defineProperty(i,"stopInterpolator",{value:a.Interpolator(t.stop,e.stop),enumerable:!0}),Object.defineProperty(i,"hintInterpolator",{value:a.Interpolator(t.hint,e.hint),enumerable:!0}),i};It.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(It.prototype,0,{get:function(){var t=this.colorInterpolator[0],e=this.stopInterpolator[0],i=this.hintInterpolator[0];return new kt(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(It.prototype,1,{get:function(){var t=this.colorInterpolator[1],e=this.stopInterpolator[1],i=this.hintInterpolator[1];return new kt(t,e,i)},enumerable:!0,configurable:!0}),It.prototype.equals=function(t){return this===t||t instanceof It&&(this.colorInterpolator.equals(t.colorInterpolator)&&this.stopInterpolator.equals(t.stopInterpolator)&&this.hintInterpolator.equals(t.hintInterpolator))};var Lt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.colorParser=e,r.stopParser=i,r.hintParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.colorParser,this.stopParser,this.hintParser,this.step)},e.parse=function(t,i,o,n,a){void 0===a&&(a=4);var l=0;if(1===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t.step();if(t.isCont())a=45===l||46===l||l>=48&&l<=57?2:7;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===a&&void 0!==(n=void 0===n?r.LengthParser.parse(t):n.feed(t)))if(n.isDone())a=3;else if(n.isError())return n.asError();if(3===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t.step();if(t.isCont())44===l?(t.step(),a=4):(o=n,n=void 0,a=7);else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(4===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t.step();if(t.isCont())a=45===l||46===l||l>=48&&l<=57?5:7;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(5===a&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t)))if(o.isDone())a=6;else if(o.isError())return o.asError();if(6===a)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("color",t));t.step(),a=7}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(7===a&&void 0!==(i=void 0===i?Pt.parse(t):i.feed(t)))if(i.isDone()){if(void 0!==o){var u=void 0!==n?n.bind():null;return s.Parser.done(new kt(i.bind(),o.bind(),u))}a=8}else if(i.isError())return i.asError();if(8===a)if(t.isCont()&&s.Unicode.isSpace(t.head()))t.step(),a=9;else if(!t.isEmpty()){u=void 0!==n?n.bind():null;return s.Parser.done(new kt(i.bind(),null,u))}if(9===a&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t))){if(o.isDone()){u=void 0!==n?n.bind():null;return s.Parser.done(new kt(i.bind(),o.bind(),u))}if(o.isError())return o.asError()}return new e(i,o,n,a)},e.parseHint=function(t){return e.parse(t,void 0,void 0,void 0,1)},e}(s.Parser),jt=function(t){function e(e,i,o){var n=t.call(this)||this;return n.stops=e,n.stopParser=i,n.step=o,n}return w(e,t),e.prototype.feed=function(t){return e.parse(t,void 0!==this.stops?this.stops.slice(0):void 0,this.stopParser,this.step)},e.parse=function(t,i,o,n){void 0===n&&(n=1);var r=0;if(1===n){if(void 0===o){for(;t.isCont()&&(r=t.head(),s.Unicode.isSpace(r));)t.step();t.isEmpty()||(o=Lt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())void 0===i&&(i=[]),i.push(o.bind()),o=void 0,n=2;else if(o.isError())return o.asError()}for(;;){if(2===n){for(;t.isCont()&&(r=t.head(),s.Unicode.isSpace(r));)t=t.step();if(!t.isCont()||44!==r)return s.Parser.done(i);t=t.step(),n=3}if(3===n){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=Lt.parseHint(t))}else o=o.feed(t);if(void 0!==o){if(o.isDone()){i.push(o.bind()),o=void 0,n=2;continue}if(o.isError())return o.asError()}}break}return new e(i,o,n)},e}(s.Parser),Wt=function(){function t(t,e){Object.defineProperty(this,"angle",{value:t,enumerable:!0}),Object.defineProperty(this,"stops",{value:e,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withAngle=function(e){return(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg")),new t(e,this.stops)},t.prototype.withStops=function(e){for(var i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=kt.fromAny(e[n]);return new t(this.angle,o)},t.prototype.interpolateTo=function(e){return e instanceof t?Et(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Values.equivalent(this.angle,i.angle,o)&&e.Arrays.equivalent(this.stops,i.stops,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Values.equal(this.angle,i.angle)&&e.Arrays.equal(this.stops,i.stops))},t.prototype.toString=function(){var t=this.stringValue;if(void 0===t){if(t="linear-gradient(",this.angle instanceof r.Angle)t+=this.angle.toString();else if(t+="to","string"==typeof this.angle)t+=" ",t+=this.angle;else for(var e=0,i=this.angle.length;e<i;e+=1)t+=" ",t+=this.angle[e];for(e=0,i=this.stops.length;e<i;e+=1)t+=", ",t+=this.stops[e].toString();t+=")",Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})}return t},t.create=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg"));for(var n=i.length,s=new Array(n),a=0;a<n;a+=1){var l=i[a];s[a]="string"==typeof l?0===a?kt.parse(l):kt.parseHint(l):kt.fromAny(i[a])}return new t(e,s)},t.fromInit=function(e){var i=e.angle;(i instanceof r.Angle||"number"==typeof i)&&(i=r.Angle.fromAny(i,"deg"));for(var o=e.stops.length,n=new Array(o),s=0;s<o;s+=1)n[s]=kt.fromAny(e.stops[s]);return new t(i,n)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Gt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseAngle=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Nt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.angle&&void 0!==e.stops}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t}(),Et=function(t,e){var i=function(t){for(var e=i.angleInterpolator(t),o=i.stopInterpolators,n=o.length,r=new Array(n),s=0;s<n;s+=1)r[s]=o[s](t);return new Wt(e,r)};Object.setPrototypeOf(i,Et.prototype),Object.defineProperty(i,"angleInterpolator",{value:a.Interpolator(t.angle,e.angle),enumerable:!0});for(var o=t.stops,n=e.stops,r=Math.min(o.length,n.length),s=new Array(r),l=0;l<r;l+=1)s[l]=o[l].interpolateTo(n[l]);return Object.defineProperty(i,"stopInterpolators",{value:s,enumerable:!0}),i};Et.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(Et.prototype,0,{get:function(){for(var t=this.angleInterpolator[0],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][0];return new Wt(t,o)},enumerable:!0,configurable:!0}),Object.defineProperty(Et.prototype,1,{get:function(){for(var t=this.angleInterpolator[1],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][1];return new Wt(t,o)},enumerable:!0,configurable:!0}),Et.prototype.equals=function(t){if(this===t)return!0;if(t instanceof Et&&this.angleInterpolator.equals(t.angleInterpolator)){var e=this.stopInterpolators.length;if(e===t.stopInterpolators.length){for(var i=0;i<e;i+=1)if(!this.stopInterpolators[i].equals(t.stopInterpolators[i]))return!1;return!0}}return!1};var Nt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.side=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.side,this.step)},e.parse=function(t,i,o,n,a){void 0===a&&(a=1);var l=0;if(1===a){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t.step();if(t.isCont())a=45===l||46===l||l>=48&&l<=57?2:3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===a&&void 0!==(o=void 0===o?r.AngleParser.parse(t,"deg"):o.feed(t))){if(o.isDone())return o;if(o.isError())return o.asError()}if(3===a){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){if("to"!==(u=i.bind()))return s.Parser.error(s.Diagnostic.message("unexpected "+u,t));i=void 0,a=4}}if(4===a)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("side or corner",t));t.step(),a=5}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(5===a){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){var u=i.bind();switch(i=void 0,u){case"left":case"right":n=u,a=6;break;case"top":case"bottom":n=u,a=7;break;default:return s.Parser.error(s.Diagnostic.message("unknown side: "+u,t))}}}if(6===a){if(void 0===i){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&s.Unicode.isAlpha(l))i=s.Unicode.stringOutput();else if(!t.isEmpty())return s.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){u=i.bind();switch(i=void 0,u){case"top":case"bottom":return s.Parser.done([n,u]);default:return s.Parser.error(s.Diagnostic.message("unknown side: "+u,t))}}}}if(7===a){if(void 0===i){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&s.Unicode.isAlpha(l))i=s.Unicode.stringOutput();else if(!t.isEmpty())return s.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l));)t=t.step(),i.write(l);if(!t.isEmpty()){u=i.bind();switch(i=void 0,u){case"left":case"right":return s.Parser.done([n,u]);default:return s.Parser.error(s.Diagnostic.message("unknown side: "+u,t))}}}}return new e(i,o,n,a)},e}(s.Parser),Gt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.stopsParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.stopsParser,this.step)},e.parse=function(t,i,o,n,r){void 0===r&&(r=1);var a=0;if(1===r){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a)||45===a);)t=t.step(),i.write(a);if(!t.isEmpty()){var l=i.bind();if("linear-gradient"!==l)return s.Parser.error(s.Diagnostic.message("unexpected "+l,t));i=void 0,r=2}}if(2===r){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t.step(),r=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(3===r&&void 0!==(o=void 0===o?Nt.parse(t):o.feed(t)))if(o.isDone())r=4;else if(o.isError())return o.asError();if(4===r){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(!t.isCont()||44!==a)return s.Parser.error(s.Diagnostic.expected("color stops",t));t=t.step(),r=5}if(5===r&&void 0!==(n=void 0===n?jt.parse(t):n.feed(t)))if(n.isDone())r=6;else if(n.isError())return n.asError();if(6===r){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();if(t.isCont()&&41===t.head())return t.step(),s.Parser.done(new Wt(o.bind(),n.bind()));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,r)},e.parseRest=function(t,i){return e.parse(t,i,void 0,void 0,2)},e}(s.Parser),Ut=function(){function t(t,e,i,o,n,r,s){Object.defineProperty(this,"inset",{value:t,enumerable:!0}),Object.defineProperty(this,"offsetX",{value:e,enumerable:!0}),Object.defineProperty(this,"offsetY",{value:i,enumerable:!0}),Object.defineProperty(this,"blurRadius",{value:o,enumerable:!0}),Object.defineProperty(this,"spreadRadius",{value:n,enumerable:!0}),Object.defineProperty(this,"color",{value:r,enumerable:!0}),Object.defineProperty(this,"next",{value:s,enumerable:!0}),Object.defineProperty(this,"stringValue",{value:void 0,enumerable:!0,configurable:!0})}return t.prototype.withInset=function(e){return e===this.inset?this:new t(e,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetX=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetX)?this:new t(this.inset,e,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetY=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetY)?this:new t(this.inset,this.offsetX,e,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withBlurRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.blurRadius)?this:new t(this.inset,this.offsetX,this.offsetY,e,this.spreadRadius,this.color,this.next)},t.prototype.withSpreadRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.spreadRadius)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,e,this.color,this.next)},t.prototype.withColor=function(e){return(e=St.fromAny(e)).equals(this.color)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,e,this.next)},t.prototype.and=function(e,i,o,n,r,s){var a;return a=null!==this.next?this.next.and.apply(this.next,arguments):t.create.apply(t,arguments),new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,a)},t.prototype.interpolateTo=function(e){return e instanceof t?Bt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equivalentTo(i.offsetX,o)&&this.offsetY.equivalentTo(i.offsetY,o)&&this.blurRadius.equivalentTo(i.blurRadius,o)&&this.spreadRadius.equivalentTo(i.spreadRadius,o)&&this.color.equivalentTo(i.color,o)&&e.Equivalent(this.next,i.next,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equals(i.offsetX)&&this.offsetY.equals(i.offsetY)&&this.blurRadius.equals(i.blurRadius)&&this.spreadRadius.equals(i.spreadRadius)&&this.color.equals(i.color)&&e.Equals(this.next,i.next))},t.prototype.toString=function(){var t=this.stringValue;return void 0===t&&(t="",this.inset&&(t+="inset",t+=" "),t+=this.offsetX.toString(),t+=" ",t+=this.offsetY.toString(),t+=" ",t+=this.blurRadius.toString(),t+=" ",t+=this.spreadRadius.toString(),t+=" ",t+=this.color.toString(),null!==this.next&&(t+=", ",t+=this.next.toString()),Object.defineProperty(this,"stringValue",{value:t,enumerable:!0,configurable:!0})),t},t.create=function(e,i,o,n,s,a){if(1===arguments.length)return t.fromAny(e);if("boolean"!=typeof e){if(3===arguments.length)a=St.fromAny(o),s=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else if(4===arguments.length)a=St.fromAny(n),s=r.Length.zero(),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else{if(5!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+s+", "+a);a=St.fromAny(s),s=r.Length.fromAny(n),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e)}e=!1}else if(4===arguments.length)a=St.fromAny(n),s=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else if(5===arguments.length)a=St.fromAny(s),s=r.Length.zero(),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else{if(6!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+s+", "+a);a=St.fromAny(a),s=r.Length.fromAny(s),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i)}return new t(e,i,o,n,s,a,null)},t.fromInit=function(e){return new t(e.inset||!1,void 0!==e.offsetX?r.Length.fromAny(e.offsetX):r.Length.zero(),void 0!==e.offsetY?r.Length.fromAny(e.offsetY):r.Length.zero(),void 0!==e.blurRadius?r.Length.fromAny(e.blurRadius):r.Length.zero(),void 0!==e.spreadRadius?r.Length.fromAny(e.spreadRadius):r.Length.zero(),void 0!==e.color?St.fromAny(e.color):St.black(),null)},t.fromArray=function(e){for(var i=t.fromAny(e[0]),o=1;o<e.length;o+=1)i=i.and(e[o]);return i},t.fromAny=function(){for(var e,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(0===arguments.length)return null;if(null==(e=1===arguments.length?i[0]:i)||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e&&void 0===e.length)return t.fromInit(e);if("object"==typeof e&&null!==e&&e.length>0)return t.fromArray(e);throw new TypeError(""+e)},t.fromValue=function(e){var i=null;return e.forEach((function(e,n){var s=e.header("boxShadow");if(s.isDefined()){var a,l,u,h,p,d;s.forEach((function(t,e){var i=t.key.stringValue();void 0!==i?"inset"===i?a=t.toValue().booleanValue(a):"offsetX"===i?l=t.toValue().cast(r.Length.form(),l):"offsetY"===i?u=t.toValue().cast(r.Length.form(),u):"blurRadius"===i?h=t.toValue().cast(r.Length.form(),h):"spreadRadius"===i?p=t.toValue().cast(r.Length.form(),p):"color"===i&&(d=t.toValue().cast(St.form(),d)):t instanceof o.Value&&(0===e&&t instanceof o.Text&&"inset"===t.value?a=!0:0===e||1===e&&void 0!==a?l=t.cast(r.Length.form(),l):1===e||2===e&&void 0!==a?u=t.cast(r.Length.form(),u):2===e||3===e&&void 0!==a?void 0===(h=t.cast(r.Length.form(),h))&&(d=t.cast(St.form(),d)):(3===e||4===e&&void 0===a)&&void 0===d?void 0===(p=t.cast(r.Length.form(),p))&&(d=t.cast(St.form(),d)):(4===e||5===e&&void 0===a)&&void 0===d&&(d=t.cast(St.form(),d)))})),a=void 0!==a&&a,l=void 0!==l?l:r.Length.zero(),u=void 0!==u?u:r.Length.zero(),h=void 0!==h?h:r.Length.zero(),p=void 0!==p?p:r.Length.zero(),d=void 0!==d?d:St.black();var c=new t(a||!1,l,u,h,p,d,null);i=null!==i?i.and(c):c}})),i},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=zt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==e.color}return!1},t.isArray=function(e){if(Array.isArray(e)){var i=e.length;if(0!==i){for(var o=0;o<i;o+=1)if(!t.isAny(e))return!1;return!0}}return!1},t.isAny=function(e){return e instanceof t||t.isArray(e)||t.isInit(e)||"string"==typeof e},t.form=function(){return new Ht(null)},m([e.Lazy],t,"form",null),t}();function Bt(t,e){var i=function(t){var e=i.insetInterpolator(t),o=i.offsetXInterpolator(t),n=i.offsetYInterpolator(t),r=i.blurRadiusInterpolator(t),s=i.spreadRadiusInterpolator(t),a=i.colorInterpolator(t),l=i.nextInterpolator(t);return new Ut(e,o,n,r,s,a,l)};return Object.setPrototypeOf(i,Bt.prototype),Object.defineProperty(i,"insetInterpolator",{value:a.Interpolator(t.inset,e.inset),enumerable:!0}),Object.defineProperty(i,"offsetXInterpolator",{value:a.Interpolator(t.offsetX,e.offsetX),enumerable:!0}),Object.defineProperty(i,"offsetYInterpolator",{value:a.Interpolator(t.offsetY,e.offsetY),enumerable:!0}),Object.defineProperty(i,"blurRadiusInterpolator",{value:a.Interpolator(t.blurRadius,e.blurRadius),enumerable:!0}),Object.defineProperty(i,"spreadRadiusInterpolator",{value:a.Interpolator(t.spreadRadius,e.spreadRadius),enumerable:!0}),Object.defineProperty(i,"colorInterpolator",{value:a.Interpolator(t.color,e.color),enumerable:!0}),Object.defineProperty(i,"nextInterpolator",{value:a.Interpolator(t.next,e.next),enumerable:!0}),i}w(Bt,a.Interpolator),Object.defineProperty(Bt.prototype,0,{get:function(){var t=this.insetInterpolator[0],e=this.offsetXInterpolator[0],i=this.offsetYInterpolator[0],o=this.blurRadiusInterpolator[0],n=this.spreadRadiusInterpolator[0],r=this.colorInterpolator[0],s=this.nextInterpolator[0];return new Ut(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Object.defineProperty(Bt.prototype,1,{get:function(){var t=this.insetInterpolator[1],e=this.offsetXInterpolator[1],i=this.offsetYInterpolator[1],o=this.blurRadiusInterpolator[1],n=this.spreadRadiusInterpolator[1],r=this.colorInterpolator[1],s=this.nextInterpolator[1];return new Ut(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Bt.prototype.equals=function(t){return this===t||t instanceof Bt&&(this.insetInterpolator.equals(t.insetInterpolator)&&this.offsetXInterpolator.equals(t.offsetXInterpolator)&&this.offsetYInterpolator.equals(t.offsetYInterpolator)&&this.blurRadiusInterpolator.equals(t.blurRadiusInterpolator)&&this.spreadRadiusInterpolator.equals(t.spreadRadiusInterpolator)&&this.colorInterpolator.equals(t.colorInterpolator)&&this.nextInterpolator.equals(t.nextInterpolator))};var Ht=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){for(var e=Ut.fromAny(t),i=o.Record.create();;){var n=o.Record.create(5);if(e.inset&&n.push("inset"),n.push(r.Length.form().mold(e.offsetX)),n.push(r.Length.form().mold(e.offsetY)),n.push(r.Length.form().mold(e.blurRadius)),n.push(r.Length.form().mold(e.spreadRadius)),n.push(St.form().mold(e.color)),i.attr("boxShadow",n),null===e.next)break;e=e.next}return i},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=Ut.fromValue(i))){var o=i.stringValue();void 0!==o&&(e=Ut.parse(o))}}catch(t){}return e},e}(o.Form),zt=function(t){function e(e,i,o,n,r,s,a,l){var u=t.call(this)||this;return u.boxShadow=e,u.identOutput=i,u.offsetXParser=o,u.offsetYParser=n,u.blurRadiusParser=r,u.spreadRadiusParser=s,u.colorParser=a,u.step=l,u}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.boxShadow,this.identOutput,this.offsetXParser,this.offsetYParser,this.blurRadiusParser,this.spreadRadiusParser,this.colorParser,this.step)},e.parse=function(t,i,o,n,a,l,u,h,p){void 0===p&&(p=1);for(var d=0;;){if(1===p){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();if(t.isCont())p=s.Unicode.isAlpha(d)?2:4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===p){for(o=o||s.Unicode.stringOutput();t.isCont()&&(d=t.head(),s.Unicode.isAlpha(d));)t=t.step(),o.write(d);if(!t.isEmpty()){var c=o.bind();switch(c){case"inset":p=3;break;case"none":return s.Parser.done(null);default:return s.Parser.error(s.Diagnostic.message("unknown box-shadow: "+c,t))}}}if(3===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=4}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(4===p){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=r.LengthParser.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())p=5;else if(n.isError())return n.asError()}if(5===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=6}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(6===p){if(void 0===a){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(a=r.LengthParser.parse(t))}else a=a.feed(t);if(void 0!==a)if(a.isDone())p=7;else if(a.isError())return a.asError()}if(7===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=8}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(8===p){if(void 0===l){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?l=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else l=l.feed(t);if(void 0!==l)if(l.isDone())p=9;else if(l.isError())return l.asError()}if(9===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=10}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(10===p){if(void 0===u){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?u=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else u=u.feed(t);if(void 0!==u)if(u.isDone())p=11;else if(u.isError())return u.asError()}if(11===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=12}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(12===p){if(void 0===h){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(h=Pt.parse(t))}else h=h.feed(t);if(void 0!==h)if(h.isDone()){var v=void 0!==o&&"inset"===o.bind(),f=n.bind(),y=a.bind(),g=void 0!==l?l.bind():r.Length.zero(),w=void 0!==u?u.bind():r.Length.zero(),m=h.bind(),b=new Ut(v,f,y,g,w,m,null);i=void 0===i?b:i.and(b),o=void 0,n=void 0,a=void 0,l=void 0,u=void 0,h=void 0,p=13}else if(h.isError())return h.asError()}if(13===p){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();if(t.isCont()&&44===d){t.step(),p=1;continue}if(!t.isEmpty())return s.Parser.done(i)}break}return new e(i,o,n,a,l,u,h,p)},e}(s.Parser),qt={fromAny:function(t){if(t instanceof l.DateTime||t instanceof r.Angle||t instanceof r.Length||t instanceof St||t instanceof gt||t instanceof Ut||t instanceof Wt||t instanceof r.Transform||t instanceof a.Interpolator||"number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Date||l.DateTime.isInit(t))return l.DateTime.fromAny(t);if(gt.isInit(t))return gt.fromAny(t);if(St.isInit(t))return St.fromAny(t);if(Ut.isInit(t))return Ut.fromAny(t);if("string"==typeof t)return qt.parse(t);throw new TypeError(""+t)},parse:function(t){for("string"==typeof t&&(t=s.Unicode.stringInput(t));t.isCont()&&s.Unicode.isWhitespace(t.head());)t=t.step();var e=Xt.parse(t);if(e.isDone())for(;t.isCont()&&s.Unicode.isWhitespace(t.head());)t=t.step();return t.isCont()&&!e.isError()&&(e=s.Parser.error(s.Diagnostic.unexpected(t))),e.bind()}};Object.defineProperty(qt,"form",{value:function(){var t=new Yt(void 0);return Object.defineProperty(qt,"form",{value:function(){return t},enumerable:!0,configurable:!0}),t},enumerable:!0,configurable:!0});var Yt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){if(void 0!==t){if((t=qt.fromAny(t))instanceof l.DateTime)return l.DateTime.form().mold(t);if(t instanceof r.Angle)return r.Angle.form().mold(t);if(t instanceof r.Length)return r.Length.form().mold(t);if(t instanceof gt)return gt.form().mold(t);if(t instanceof St)return St.form().mold(t);if(t instanceof Ut)return Ut.form().mold(t);if(t instanceof r.Transform)return r.Transform.form().mold(t);if("number"==typeof t)return o.Num.from(t);throw new TypeError(""+t)}return o.Item.extant()},e.prototype.cast=function(t){var e=t.toValue();if(e instanceof o.Num)return e.numberValue();if(e instanceof o.Bool)return e.booleanValue();var i=e.stringValue(void 0);if(void 0!==i)try{return qt.parse(i)}catch(t){}if(e instanceof o.Record){var n=l.DateTime.fromValue(e);if(null!==n)return n;var s=r.Angle.fromValue(e);if(null!==s)return s;var a=r.Length.fromValue(e);if(null!==a)return a;var u=gt.fromValue(e);if(null!==u)return u;var h=St.fromValue(e);if(null!==h)return h;var p=Ut.fromValue(e);if(null!==p)return p;var d=r.Transform.fromValue(e);if(null!==d)return d}},e}(o.Form),Xt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.valueParser=i,r.unitsOutput=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.valueParser,this.unitsOutput,this.step)},e.parse=function(t,i,o,n,a){void 0===a&&(a=1);var u=0;if(1===a){for(;t.isCont()&&(u=t.head(),s.Unicode.isSpace(u));)t.step();if(t.isCont()){if(35===u)return Mt.parse(t);a=s.Unicode.isAlpha(u)?2:3}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===a){for(i=i||s.Unicode.stringOutput();t.isCont()&&(u=t.head(),s.Unicode.isAlpha(u)||s.Unicode.isDigit(u)||45===u);)t=t.step(),i.write(u);if(!t.isEmpty()){var h=i.bind();switch(h){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return Rt.parseRest(t);case"linear-gradient":return Gt.parseRest(t,i);case"normal":case"italic":case"oblique":return bt.parseRest(t,h);case"small-caps":return bt.parseRest(t,void 0,h);case"bold":case"bolder":case"lighter":return bt.parseRest(t,void 0,void 0,h);case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":return bt.parseRest(t,void 0,void 0,void 0,h);case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":return bt.parseRest(t,void 0,void 0,void 0,void 0,h);case"translate3d":case"translateX":case"translateY":case"translate":return r.TranslateTransformParser.parseRest(t,i);case"scaleX":case"scaleY":case"scale":return r.ScaleTransformParser.parseRest(t,i);case"rotate":return r.RotateTransformParser.parseRest(t,i);case"skewX":case"skewY":case"skew":return r.SkewTransformParser.parseRest(t,i);case"matrix":return r.AffineTransformParser.parseRest(t,i);case"none":return s.Parser.done(r.Transform.identity());case"true":return s.Parser.done(!0);case"false":return s.Parser.done(!1);default:var p=St.forName(h);return null!==p?s.Parser.done(p):s.Parser.error(s.Diagnostic.message("unknown style value: "+h,t))}}}if(3===a)if((o=void 0===o?s.Base10.parseDecimal(t):o.feed(t)).isDone())a=4;else if(o.isError())return o.asError();if(4===a){if(t.isCont()&&45===(u=t.head())){t.step();var d={};return d.year=o.bind(),l.DateTimeFormat.pattern("%m-%dT%H:%M:%S.%LZ").parseDate(t,d)}t.isEmpty()||(a=5)}if(5===a){for(n=n||s.Unicode.stringOutput();t.isCont()&&(u=t.head(),s.Unicode.isAlpha(u)||37===u);)t.step(),n.push(u);t.isEmpty()||(a=6)}if(6===a&&!t.isEmpty()){var c=o.bind(),v=n.bind(),f=void 0;switch(v){case"deg":f=r.Angle.deg(c);break;case"rad":f=r.Angle.rad(c);break;case"grad":f=r.Angle.grad(c);break;case"turn":f=r.Angle.turn(c);break;case"px":f=r.Length.px(c);break;case"em":f=r.Length.em(c);break;case"rem":f=r.Length.rem(c);break;case"%":f=r.Length.pct(c);break;case"":f=c;break;default:return s.Parser.error(s.Diagnostic.message("unknown style units: "+v,t))}if(t.isCont()&&(u=t.head(),s.Unicode.isSpace(u)||47===u)){if(f instanceof r.Length)return bt.parseRest(t,void 0,void 0,void 0,void 0,f);if("number"==typeof f)switch(c){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:return bt.parseRest(t,void 0,void 0,String(c))}}return s.Parser.done(f)}return new e(i,o,n,a)},e}(s.Parser);function Kt(t){return"object"==typeof t&&null!==t?"function"==typeof t.toAttributeString?t.toAttributeString():t.toString():""+t}function Zt(t){return"object"==typeof t&&null!==t?"function"==typeof t.toStyleString?t.toStyleString():t.toString():""+t}t.ToCssValue=void 0,"undefined"!=typeof CSSStyleValue?t.ToCssValue=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toCssValue?t.toCssValue():"number"==typeof t?new CSSUnitValue(t,"number"):null}:t.ToCssValue=Zt;var _t=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n=this.array,r=this.index,s=Array.isArray(t)?t.length:1,a=0;a<s;a+=1){0!==a||Array.isArray(t)?(o=(i=t[a])[0],e=i[1]):o=t;var l=r[o.name];if(void 0!==e&&void 0!==l){var u=n.slice(0);u[l]=[o,e],n=u}else if(void 0!==e){var h=n.slice(0),p={};for(var d in r)p[d]=r[d];p[o.name]=h.length,h.push([o,e]),n=h,r=p}else if(void 0!==l){for(var c=new Array,v={},f=0,y=0,g=n.length;y<g;y+=1){var w=n[y];w[0]!==o&&(c[f]=w,v[w[0].name]=f,f+=1)}n=c,r=v}}return this},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("LookVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t(e.Arrays.empty,{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),Qt=function(){function t(t){Object.defineProperty(this,"name",{value:t,configurable:!0,enumerable:!0})}return t.prototype.add=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=(h=i[s])[0],u=e.get(l);r[l.name]=n.length,n.push(void 0===u?h:[l,l.combine(this,h[1],u)])}for(s=0,a=o.length;s<a;s+=1){var h;void 0===r[(l=(h=o[s])[0]).name]&&(r[l.name]=n.length,n.push(h))}return this.fromArray(n,r)},t.prototype.negate=function(t){for(var e=t.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],a=r[1];o[n]=[s,s.combine(this,void 0,a,-1)]}return this.fromArray(o,t.index)},t.prototype.subtract=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=i[s],u=l[0],h=e.get(u);r[u.name]=n.length,n.push(void 0===h?l:[u,u.combine(this,l[1],h,-1)])}for(s=0,a=o.length;s<a;s+=1){var p=o[s];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,u.combine(this,void 0,h,-1)]))}return this.fromArray(n,r)},t.prototype.multiply=function(t,e){for(var i=t.array,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],a=s[0],l=s[1];n[r]=[a,a.combine(this,void 0,l,e)]}return this.fromArray(n,t.index)},t.prototype.dot=function(t,e){for(var i,o=t.array,n=0,r=o.length;n<r;n+=1){var s=o[n],a=s[0],l=s[1],u=e.get(a);void 0!==u&&0!==u&&(i=a.combine(this,i,l,u))}return i},t.prototype.dotOr=function(t,e,i){var o=t.array;if(0!==o.length){for(var n=void 0,r=0,s=o.length;r<s;r+=1){var a=o[r],l=a[0],u=a[1],h=e.get(l);void 0!==h&&0!==h&&(n=l.combine(this,n,u,h))}return n}return i},t.prototype.empty=function(){return _t.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n={},r=0;r<i;r+=1){var s=t[r],a=s[0],l=s[1];o[r]=[a,this.coerce(l)],n[a.name]=r}return this.fromArray(o,n)},t.prototype.fromArray=function(t,e){return _t.fromArray(t,e)},t.prototype.toString=function(){return"Look."+this.name},t}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:(1-i)*t+i*e:void 0!==i&&1!==i?e*i:e},e.prototype.between=function(t,e){return a.NumberInterpolator(t,e)},e.prototype.coerce=function(t){return t},e}(Qt),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:r.LengthInterpolator(t,e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return r.LengthInterpolator(t,e)},e.prototype.coerce=function(t){return r.Length.fromAny(t)},e}(Qt),te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:t.interpolateTo(e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return t.interpolateTo(e)},e.prototype.coerce=function(t){return St.fromAny(t)},e}(Qt),ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:gt.family(e.family)},e.prototype.between=function(t,e){return wt(t,e)},e.prototype.coerce=function(t){return gt.fromAny(t)},e}(Qt),ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return Bt(t,e)},e.prototype.coerce=function(t){return Ut.fromAny(t)},e}(Qt),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return a.Interpolator(t,e)},e.prototype.coerce=function(t){return a.Timing.fromAny(t)},e}(Qt),ne=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n=this.array,r=this.index,s=Array.isArray(t)?t.length:1,a=0;a<s;a+=1){0!==a||Array.isArray(t)?(o=(i=t[a])[0],e=i[1]):o=t;var l=r[o.name];if(void 0!==e&&void 0!==l){var u=n.slice(0);u[l]=[o,e],n=u}else if(void 0!==e){var h=n.slice(0),p={};for(var d in r)p[d]=r[d];p[o.name]=h.length,h.push([o,e]),n=h,r=p}else if(void 0!==l){for(var c=new Array,v={},f=0,y=0,g=n.length;y<g;y+=1){var w=n[y];w[0]!==o&&(c[f]=w,v[w[0].name]=f,f+=1)}n=c,r=v}}return this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var a=(u=e[r])[0],l=t.get(a);n[a.name]=o.length,o.push(void 0===l?u:[a,a.combine(u[1],l)])}for(r=0,s=i.length;r<s;r+=1){var u;void 0===n[(a=(u=i[r])[0]).name]&&(n[a.name]=o.length,o.push(u))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],s=n[1];i[o]=[r,r.combine(void 0,s,-1)]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var a=e[r],l=a[0],u=t.get(l);n[l.name]=o.length,o.push(void 0===u?a:[l,l.combine(a[1],u,-1)])}for(r=0,s=i.length;r<s;r+=1){var h=i[r];l=h[0],u=h[1];void 0===n[l.name]&&(n[l.name]=o.length,o.push([l,l.combine(void 0,u,-1)]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],a=r[1];o[n]=[s,s.combine(void 0,a,t)]}return this.copy(o,this.index)},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.interpolateTo=function(e){return e instanceof t?se(this,e):null},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("FeelVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r={},s=0;s<o;s+=1){var a=e[s],l=a[0],u=a[1];n[s]=[l,l.coerce(u)],r[l.name]=s}return new t(n,r)},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.of.apply(t,e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),re=function(){function t(t){Object.defineProperty(this,"name",{value:t,configurable:!0,enumerable:!0})}return t.prototype.empty=function(){return ne.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ne.of.apply(ne,t)},t.prototype.from=function(t,e){return ne.fromArray(t,e)},t.prototype.toString=function(){return"Feel."+this.name},t}();function se(t,e){var i=function(t){for(var e=i.interpolators,o=e.length,n=new Array(o),r=i.index,s=0;s<o;s+=1){var a=e[s],l=a[0],u=(0,a[1])(t);n[s]=[l,u]}return ne.fromArray(n,r)};Object.setPrototypeOf(i,se.prototype);var o=new Array,n={};return t.forEach((function(t,i){var r=e.get(i);if(void 0!==r){var s=i.between(t,r);n[i.name]=o.length,o.push([i,s])}})),Object.defineProperty(i,"interpolators",{value:o,enumerable:!0}),Object.defineProperty(i,"index",{value:n,enumerable:!0}),i}w(se,a.Interpolator),Object.defineProperty(se.prototype,0,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],s=r[0],a=r[1][0];i[n]=[s,a]}return ne.fromArray(i,o)},enumerable:!0,configurable:!0}),Object.defineProperty(se.prototype,1,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],s=r[0],a=r[1][1];i[n]=[s,a]}return ne.fromArray(i,o)},enumerable:!0,configurable:!0}),se.prototype.equals=function(t){if(this===t)return!0;if(t instanceof se){var i=this.interpolators.length;if(i===t.interpolators.length){for(var o=0;o<i;o+=1)if(!e.Arrays.equal(this.interpolators[o],t.interpolators[o]))return!1;return!0}}return!1};var ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){return t.combine(e,i,o)},e}(re),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof St&&i instanceof St){var n=void 0===o?i.alpha():i.alpha()*o;return n>=0?e.darker(n):e.lighter(-n)}return t.combine(e,i,o)},e}(re),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof St&&i instanceof St){if(void 0===o||1===o)return e.alpha(i.alpha());if(0===o)return e;var n=(1-o)*e.alpha()+o*i.alpha();return e.alpha(n)}return t.combine(e,i,o)},e}(re),he={},pe=function(){function t(t,e){Object.defineProperty(this,"array",{value:t,enumerable:!0}),Object.defineProperty(this,"index",{value:e,enumerable:!0})}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n,r,s=this.array,a=this.index,l=Array.isArray(t)?t.length:1,u=0;u<l;u+=1){0!==u||Array.isArray(t)?(o=(i=t[u])[0],e=i[1]):o=t;var h=a[o.name];if(void 0!==e&&void 0!==h)r=a,(n=s.slice(0))[h]=[o,e],s=n;else if(void 0!==e){for(var p in n=s.slice(0),r={},a)r[p]=a[p];r[o.name]=n.length,n.push([o,e]),s=n,a=r}else if(void 0!==h){n=new Array,r={};for(var d=0,c=0,v=s.length;c<v;c+=1){var f=s[c];f[0]!==o&&(n[d]=f,r[f[0].name]=d,d+=1)}s=n,a=r}}return void 0!==n&&void 0!==r?this.copy(n,r):this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var a=(u=e[r])[0],l=t.get(a);n[a.name]=o.length,o.push(void 0===l?u:[a,u[1]+l])}for(r=0,s=i.length;r<s;r+=1){var u;void 0===n[(a=(u=i[r])[0]).name]&&(n[a.name]=o.length,o.push(u))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],s=n[1];i[o]=[r,-s]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var a=e[r],l=a[0],u=t.get(l);n[l.name]=o.length,o.push(void 0===u?a:[l,a[1]-u])}for(r=0,s=i.length;r<s;r+=1){var h=i[r];l=h[0],u=h[1];void 0===n[l.name]&&(n[l.name]=o.length,o.push([l,-u]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],a=r[1];o[n]=[s,a*t]}return this.copy(o,this.index)},t.prototype.dot=function(t){for(var e,i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=r[0],a=r[1],l=t.get(s);void 0!==l&&(void 0===e?e=a*l:e+=a*l)}return e},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("MoodVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),de=function(){function t(t,e,i,o){Object.defineProperty(this,"rowArray",{value:t,enumerable:!0}),Object.defineProperty(this,"rowIndex",{value:e,enumerable:!0}),Object.defineProperty(this,"colArray",{value:i,enumerable:!0}),Object.defineProperty(this,"colIndex",{value:o,enumerable:!0})}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=(h=i[s])[0],u=e.getCol(l);r[l.name]=n.length,n.push(void 0===u?h:[l,h[1].plus(u)])}for(s=0,a=o.length;s<a;s+=1){var h;void 0===r[(l=(h=o[s])[0]).name]&&(r[l.name]=n.length,n.push(h))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],a=r[1];o[n]=[s,a.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=i[s],u=l[0],h=e.getCol(u);r[u.name]=n.length,n.push(void 0===h?l:[u,l[1].minus(h)])}for(s=0,a=o.length;s<a;s+=1){var p=o[s];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,h.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],a=s[0],l=s[1];n[r]=[a,l.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i)return t=i[0],i[1].dot(e)},t.prototype.timesCol=function(t,e){void 0===e&&(e=!1);for(var i=this.rowArray,o=new Array,n={},r=0,s=i.length;r<s;r+=1){var a=i[r],l=a[0],u=a[1].dot(t);void 0!==u&&(n[l.name]=o.length,o.push([l,u]))}if(e){var h=t.array;for(r=0,s=h.length;r<s;r+=1){l=h[r][0];this.hasRow(l)||(n[l.name]=o.length,o.push(h[r]))}}return pe.fromArray(o,n)},t.prototype.timesRow=function(t,e){void 0===e&&(e=!1);for(var i=this.colArray,o=new Array,n={},r=0,s=i.length;r<s;r+=1){var a=i[r],l=a[0],u=a[1],h=t.dot(u);void 0!==h&&(n[l.name]=o.length,o.push([l,h]))}if(e){var p=t.array;for(r=0,s=p.length;r<s;r+=1){l=p[r][0];this.hasCol(l)||(n[l.name]=o.length,o.push(p[r]))}}return pe.fromArray(o,n)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,s={},a=new Array,l={},u=0,h=n.length;u<h;u+=1){var p=n[u][0],d=e.getCol(p);if(void 0===d&&i&&(d=pe.of([p,1])),void 0!==d)for(var c=0,v=o.length;c<v;c+=1){var f=o[c],y=f[0],g=f[1].dot(d);if(void 0!==g){var w=s[y.name];if(void 0!==w){var m=r[w][1];m.index[y.name]=m.array.length,m.array.push([p,g])}else s[y.name]=r.length,r.push([y,pe.of([p,g])]);var b=l[p.name];if(void 0!==b){var S=a[b][1];S.index[p.name]=S.array.length,S.array.push([y,g])}else l[p.name]=a.length,a.push([p,pe.of([y,g])])}}}return new t(r,s,a,l)},t.prototype.identityFor=function(e){for(var i,o,n=this.rowArray,r=e.colArray,s=0,a=r.length;s<a;s+=1){var l=r[s][0];if(!this.hasRow(l)){if(void 0===i&&(i=n.slice(0)),void 0===o)for(var u in o={},this.rowIndex)o[u]=this.rowIndex[u];o[l.name]=i.length,i.push([l,pe.of([l,1])])}}return void 0!==i&&void 0!==o?t.fromRowArray(i,o):this},t.prototype.row=function(e,i){void 0!==i&&(i=pe.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromRowArray(s,n);if(void 0!==i){var s=o.slice(0),a={};for(var l in n)a[l]=n[l];return a[e.name]=s.length,s.push([e,i]),t.fromRowArray(s,a)}if(void 0!==r){s=new Array,a={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(s[u]=d,a[d[0].name]=u,u+=1)}return t.fromRowArray(s,a)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=pe.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromColArray(s,n);if(void 0!==i){var s=o.slice(0),a={};for(var l in n)a[l]=n[l];return a[e.name]=s.length,s.push([e,i]),t.fromColArray(s,a)}if(void 0!==r){s=new Array,a={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(s[u]=d,a[d[0].name]=u,u+=1)}return t.fromColArray(s,a)}return this},t.prototype.updatedRow=function(t,e,i){var o=this.getRow(t),n=o;return void 0===n&&(!0===i?i=pe.of([t,1]):!1===i&&(i=void 0),n=i=void 0!==i?pe.fromAny(i):pe.empty()),(n=n.updated(e)).equals(o)?this:this.row(t,n)},t.prototype.updatedCol=function(t,e,i){var o=this.getCol(t),n=o;return void 0===n&&(!0===i?i=pe.of([t,1]):!1===i&&(i=void 0),n=i=void 0!==i?pe.fromAny(i):pe.empty()),(n=n.updated(e)).equals(o)?this:this.col(t,n)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("MoodMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],a=r[1];o[n]=[s,pe.fromAny(a)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],a=r[1];o[n]=[s,pe.fromAny(a)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=pe.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var a=0,l=o.length;a<l;a+=1){var u=o[a],h=u[0],p=new Array,d={};for(r=0,s=e.length;r<s;r+=1){var c=e[r],v=c[0],f=c[1].get(h);void 0!==f&&(d[v.name]=p.length,p.push([v,f]))}var y=pe.fromArray(p,d);u[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=pe.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var a=o.length;r<a;r+=1){var l=o[r],u=l[0],h=new Array,p={},d=0;for(s=e.length;d<s;d+=1){var c=e[d],v=c[0],f=c[1].get(u);void 0!==f&&(p[v.name]=h.length,h.push([v,f]))}var y=pe.fromArray(h,p);l[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}(),ce={},ve=function(){function t(t,e,i,o){Object.defineProperty(this,"rowArray",{value:t,enumerable:!0}),Object.defineProperty(this,"rowIndex",{value:e,enumerable:!0}),Object.defineProperty(this,"colArray",{value:i,enumerable:!0}),Object.defineProperty(this,"colIndex",{value:o,enumerable:!0})}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.get=function(t,e){return this.dot(t,e)},t.prototype.getOr=function(t,e,i){return this.dotOr(t,e,i)},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=(h=i[s])[0],u=e.getCol(l);r[l.name]=n.length,n.push(void 0===u?h:[l,h[1].plus(u)])}for(s=0,a=o.length;s<a;s+=1){var h;void 0===r[(l=(h=o[s])[0]).name]&&(r[l.name]=n.length,n.push(h))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],a=r[1];o[n]=[s,a.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,a=i.length;s<a;s+=1){var l=i[s],u=l[0],h=e.getCol(u);r[u.name]=n.length,n.push(void 0===h?l:[u,l[1].minus(h)])}for(s=0,a=o.length;s<a;s+=1){var p=o[s];u=p[0],h=p[1];void 0===r[u.name]&&(r[u.name]=n.length,n.push([u,h.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],a=s[0],l=s[1];n[r]=[a,l.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i){t=i[0];var o=i[1];return t.dot(o,e)}},t.prototype.dotOr=function(t,e,i){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var o="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==o){t=o[0];var n=o[1];return t.dotOr(n,e,i)}return i},t.prototype.timesCol=function(t){for(var e=this.rowArray,i=new Array,o={},n=0,r=e.length;n<r;n+=1){var s=e[n],a=s[0],l=s[1],u=a.dot(l,t);void 0!==u&&(o[a.name]=i.length,i.push([a,u]))}return ne.fromArray(i,o)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,s={},a=new Array,l={},u=0,h=n.length;u<h;u+=1){var p=n[u][0],d=e.getCol(p);if(void 0===d&&i&&(d=pe.of([p,1])),void 0!==d)for(var c=0,v=o.length;c<v;c+=1){var f=o[c],y=f[0],g=f[1],w=y.dot(g,d);if(void 0!==w){var m=s[y.name];if(void 0!==m){var b=r[m][1];b.index[y.name]=b.array.length,b.array.push([p,w])}else s[y.name]=r.length,r.push([y,_t.of([p,w])]);var S=l[p.name];if(void 0!==S){var C=a[S][1];C.index[p.name]=C.array.length,C.array.push([y,w])}else l[p.name]=a.length,a.push([p,ne.of([y,w])])}}}return new t(r,s,a,l)},t.prototype.row=function(e,i){void 0!==i&&(i=_t.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromRowArray(s,n);if(void 0!==i){var s=o.slice(0),a={};for(var l in n)a[l]=n[l];return a[e.name]=s.length,s.push([e,i]),t.fromRowArray(s,a)}if(void 0!==r){s=new Array,a={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(s[u]=d,a[d[0].name]=u,u+=1)}return t.fromRowArray(s,a)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=ne.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromColArray(s,n);if(void 0!==i){var s=o.slice(0),a={};for(var l in n)a[l]=n[l];return a[e.name]=s.length,s.push([e,i]),t.fromColArray(s,a)}if(void 0!==r){s=new Array,a={};for(var u=0,h=0,p=o.length;h<p;h+=1){var d=o[h];d[0]!==e&&(s[u]=d,a[d[0].name]=u,u+=1)}return t.fromColArray(s,a)}return this},t.prototype.updatedRow=function(t,e,i){var o=this.getRow(t),n=o;return void 0===n&&(n=i=void 0!==i?_t.fromAny(i):_t.empty()),(n=n.updated(e)).equals(o)?this:this.row(t,n)},t.prototype.updatedCol=function(t,e,i){var o=this.getCol(t),n=o;return void 0===n&&(n=i=void 0!==i?ne.fromAny(i):ne.empty()),(n=n.updated(e)).equals(o)?this:this.col(t,n)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("ThemeMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],a=r[1];o[n]=[s,_t.fromAny(a)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],a=r[1];o[n]=[s,ne.fromAny(a)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=ne.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var a=0,l=o.length;a<l;a+=1){var u=o[a],h=u[0],p=new Array,d={};for(r=0,s=e.length;r<s;r+=1){var c=e[r],v=c[0],f=c[1].get(h);void 0!==f&&(d[v.name]=p.length,p.push([v,f]))}var y=ne.fromArray(p,d);u[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=_t.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var a=o.length;r<a;r+=1){var l=o[r],u=l[0],h=new Array,p={},d=0;for(s=e.length;d<s;d+=1){var c=e[d],v=c[0],f=c[1].get(u);void 0!==f&&(p[v.name]=h.length,h.push([v,f]))}var y=_t.fromArray(h,p);l[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}();Qt.font=new ee("font"),Qt.color=new te("color"),Qt.iconColor=new te("iconColor"),Qt.statusColor=new te("statusColor"),Qt.accentColor=new te("accentColor"),Qt.mutedColor=new te("mutedColor"),Qt.neutralColor=new te("neutralColor"),Qt.subduedColor=new te("subduedColor"),Qt.faintColor=new te("faintColor"),Qt.highlightColor=new te("highlightColor"),Qt.backgroundColor=new te("backgroundColor"),Qt.borderColor=new te("borderColor"),Qt.opacity=new Jt("opacity"),Qt.shadow=new ie("shadow"),Qt.spacing=new $t("spacing"),Qt.timing=new oe("timing"),re.ambient=new ae("ambient"),re.default=new ae("default"),re.primary=new ae("primary"),re.secondary=new ae("secondary"),re.selected=new le("selected"),re.disabled=new ae("disabled"),re.inactive=new ae("inactive"),re.warning=new ae("warning"),re.alert=new ae("alert"),re.darker=new le("darker"),re.lighter=new le("lighter"),re.contrasted=new le("contrasted"),re.raised=new ae("raised"),re.covered=new ae("covered"),re.floating=new ae("floating"),re.transparent=new ae("transparent"),re.translucent=new ue("translucent"),re.embossed=new le("embossed"),re.nested=new le("nested"),re.hovering=new le("hovering"),re.navigating=new ae("navigating"),he.ambient=pe.of([re.ambient,1]),he.default=pe.of([re.default,1]),he.primary=pe.of([re.primary,1]),he.secondary=pe.of([re.secondary,1]),he.selected=pe.of([re.selected,1]),he.disabled=pe.of([re.disabled,1]),he.inactive=pe.of([re.inactive,1]),he.warning=pe.of([re.warning,1]),he.alert=pe.of([re.alert,1]),he.darker=pe.of([re.darker,1]),he.lighter=pe.of([re.lighter,1]),he.contrasted=pe.of([re.contrasted,1]),he.raised=pe.of([re.raised,1]),he.covered=pe.of([re.covered,1]),he.floating=pe.of([re.floating,1]),he.transparent=pe.of([re.transparent,1]),he.translucent=pe.of([re.translucent,1]),he.embossed=pe.of([re.embossed,1]),he.nested=pe.of([re.nested,1]),he.hovering=pe.of([re.hovering,1]),he.navigating=pe.of([re.navigating,1]);var fe=gt.parse("14px -apple-system, system-ui, sans-serif"),ye=St.parse("#d8d8d8"),ge=St.parse("#d8d8d8"),we=St.parse("#6c6d6e"),me=St.parse("#989898"),be=St.parse("#808080"),Se=St.parse("#28292a"),Ce=St.parse("#1f2123"),Pe=St.white(.1),Ve=St.parse("#161719"),Fe=Ve.lighter(2/3),Te=St.parse("#18191b"),De=St.parse("#1e2022"),Me=St.parse("#66ffdd"),Oe=St.parse("#32c5ff"),xe=St.parse("#7b7c7d"),Ae=St.parse("#7b7c7d"),Re=St.parse("#f9f070"),ke=St.parse("#f6511d"),Ie=r.Length.px(10),Le=ne.of([Qt.font,fe],[Qt.color,ye],[Qt.iconColor,ge],[Qt.statusColor,ye],[Qt.accentColor,we],[Qt.mutedColor,me],[Qt.neutralColor,be],[Qt.subduedColor,Se],[Qt.faintColor,Ce],[Qt.highlightColor,Pe],[Qt.backgroundColor,Ve],[Qt.borderColor,Fe],[Qt.spacing,Ie],[Qt.timing,a.Easing.linear.withDuration(1e3)]),je=ne.of([Qt.font,fe],[Qt.color,ye],[Qt.iconColor,ge],[Qt.statusColor,ye],[Qt.accentColor,we],[Qt.mutedColor,me],[Qt.neutralColor,be],[Qt.subduedColor,Se],[Qt.faintColor,Ce],[Qt.highlightColor,Pe],[Qt.backgroundColor,Ve],[Qt.borderColor,Fe],[Qt.spacing,Ie],[Qt.timing,a.Easing.cubicOut.withDuration(250)]),We=ne.of([Qt.accentColor,Me]),Ee=ne.of([Qt.accentColor,Oe]),Ne=ne.of([Qt.backgroundColor,St.black(1)]),Ge=ne.of([Qt.color,xe],[Qt.iconColor,xe],[Qt.statusColor,xe],[Qt.accentColor,xe]),Ue=ne.of([Qt.statusColor,Ae],[Qt.accentColor,Ae]),Be=ne.of([Qt.statusColor,Re],[Qt.accentColor,Re]),He=ne.of([Qt.statusColor,ke],[Qt.accentColor,ke]),ze=ne.of([Qt.mutedColor,me.darker(1/3)],[Qt.neutralColor,be.darker(1/3)],[Qt.backgroundColor,Te]),qe=ne.of([Qt.mutedColor,me.darker(1/3)],[Qt.neutralColor,be.darker(1/3)],[Qt.backgroundColor,De]),Ye=ne.of([Qt.shadow,Ut.create(0,2,4,0,St.black(.5))]),Xe=ne.of([Qt.backgroundColor,Ve.alpha(0)],[Qt.borderColor,Fe.alpha(0)]),Ke=ne.of([Qt.iconColor,St.black(.8)],[Qt.statusColor,St.black(.8)],[Qt.accentColor,St.black(.8)],[Qt.backgroundColor,St.black(.8)],[Qt.borderColor,St.black(.8)]),Ze=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),_e=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Qe=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Je=ne.of([Qt.iconColor,St.black(2)],[Qt.statusColor,St.black(2)],[Qt.accentColor,St.black(2)]),$e=ne.of([Qt.backgroundColor,St.black(1/3)],[Qt.borderColor,St.black(1/3)]),ti=ne.of([Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)],[Qt.backgroundColor,St.black(-1)]),ei=ne.of([Qt.timing,a.Easing.cubicOut.withDuration(350)]),ii=ve.forCols([re.ambient,Le],[re.default,je],[re.primary,We],[re.secondary,Ee],[re.selected,Ne],[re.disabled,Ge],[re.inactive,Ue],[re.warning,Be],[re.alert,He],[re.darker,Ze],[re.lighter,_e],[re.contrasted,Qe],[re.raised,ze],[re.covered,qe],[re.floating,Ye],[re.transparent,Xe],[re.translucent,Ke],[re.embossed,Je],[re.nested,$e],[re.hovering,ti],[re.navigating,ei]);ce.dark=ii;var oi=gt.parse("14px -apple-system, system-ui, sans-serif"),ni=St.parse("#4a4a4a"),ri=St.parse("#4a4a4a"),si=St.parse("#5c5d5e"),ai=St.parse("#989898"),li=St.parse("#808080"),ui=St.parse("#d7d6d5"),hi=St.parse("#e0dedc"),pi=St.black(.05),di=St.parse("#f9f8f6"),ci=di.darker(.5),vi=St.parse("#f7f6f4"),fi=St.parse("#f1efed"),yi=St.parse("#4fcfb3"),gi=St.parse("#008cc7"),wi=St.parse("#7b7c7d"),mi=St.parse("#7b7c7d"),bi=St.parse("#e6de65"),Si=St.parse("#df4616"),Ci=r.Length.px(10),Pi=ne.of([Qt.font,oi],[Qt.color,ni],[Qt.iconColor,ri],[Qt.statusColor,ni],[Qt.accentColor,si],[Qt.mutedColor,ai],[Qt.neutralColor,li],[Qt.subduedColor,ui],[Qt.faintColor,hi],[Qt.highlightColor,pi],[Qt.backgroundColor,di],[Qt.borderColor,ci],[Qt.spacing,Ci],[Qt.timing,a.Easing.linear.withDuration(1e3)]),Vi=ne.of([Qt.font,oi],[Qt.color,ni],[Qt.iconColor,ri],[Qt.statusColor,ni],[Qt.accentColor,si],[Qt.mutedColor,ai],[Qt.neutralColor,li],[Qt.subduedColor,ui],[Qt.faintColor,hi],[Qt.highlightColor,pi],[Qt.backgroundColor,di],[Qt.borderColor,ci],[Qt.spacing,Ci],[Qt.timing,a.Easing.cubicOut.withDuration(250)]),Fi=ne.of([Qt.accentColor,yi]),Ti=ne.of([Qt.accentColor,gi]),Di=ne.of([Qt.backgroundColor,St.black(.5)]),Mi=ne.of([Qt.color,wi],[Qt.iconColor,wi],[Qt.statusColor,wi],[Qt.accentColor,wi]),Oi=ne.of([Qt.statusColor,mi],[Qt.accentColor,mi]),xi=ne.of([Qt.statusColor,bi],[Qt.accentColor,bi]),Ai=ne.of([Qt.statusColor,Si],[Qt.accentColor,Si]),Ri=ne.of([Qt.mutedColor,ai.darker(1/3)],[Qt.neutralColor,li.darker(1/3)],[Qt.backgroundColor,vi]),ki=ne.of([Qt.mutedColor,ai.darker(1/3)],[Qt.neutralColor,li.darker(1/3)],[Qt.backgroundColor,fi]),Ii=ne.of([Qt.shadow,Ut.create(0,2,4,0,St.black(.5))]),Li=ne.of([Qt.backgroundColor,di.alpha(0)],[Qt.borderColor,ci.alpha(0)]),ji=ne.of([Qt.iconColor,St.black(.8)],[Qt.statusColor,St.black(.8)],[Qt.accentColor,St.black(.8)],[Qt.backgroundColor,St.black(.8)],[Qt.borderColor,St.black(.8)]),Wi=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Ei=ne.of([Qt.iconColor,St.black(-1)],[Qt.statusColor,St.black(-1)],[Qt.accentColor,St.black(-1)]),Ni=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Gi=ne.of([Qt.iconColor,St.black(1)],[Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)]),Ui=ne.of([Qt.backgroundColor,St.black(1/24)],[Qt.accentColor,St.black(-1/8)],[Qt.borderColor,St.black(1/24)]),Bi=ne.of([Qt.statusColor,St.black(1)],[Qt.accentColor,St.black(1)],[Qt.backgroundColor,St.black(1)]),Hi=ne.of([Qt.timing,a.Easing.cubicOut.withDuration(350)]),zi=ve.forCols([re.ambient,Pi],[re.default,Vi],[re.primary,Fi],[re.secondary,Ti],[re.selected,Di],[re.disabled,Mi],[re.inactive,Oi],[re.warning,xi],[re.alert,Ai],[re.darker,Wi],[re.lighter,Ei],[re.contrasted,Ni],[re.raised,Ri],[re.covered,ki],[re.floating,Ii],[re.transparent,Li],[re.translucent,ji],[re.embossed,Gi],[re.nested,Ui],[re.hovering,Bi],[re.navigating,Hi]);ce.light=zi;var qi={detect:function(){var t=0,e=0,i=0,o=0,n=document.documentElement.style.width,r=document.documentElement.style.height;document.documentElement.style.width="100%",document.documentElement.style.height="100%";var s=document.createElement("div");s.style.setProperty("position","fixed"),s.style.setProperty("top","0"),s.style.setProperty("right","0"),s.style.setProperty("width",window.innerWidth===document.documentElement.offsetWidth?"100%":"100vw"),s.style.setProperty("height",window.innerHeight===document.documentElement.offsetHeight?"100%":"100vh"),s.style.setProperty("box-sizing","border-box"),s.style.setProperty("padding-top","env(safe-area-inset-top)"),s.style.setProperty("padding-right","env(safe-area-inset-right)"),s.style.setProperty("padding-bottom","env(safe-area-inset-bottom)"),s.style.setProperty("padding-left","env(safe-area-inset-left)"),s.style.setProperty("overflow","hidden"),s.style.setProperty("visibility","hidden"),document.body.appendChild(s);var a=window.getComputedStyle(s),l=parseFloat(a.getPropertyValue("width")),u=parseFloat(a.getPropertyValue("height")),h=l,p=u,d=0,c=0,v=0,f=0,y=1;void 0!==window.visualViewport&&(h=window.visualViewport.width,p=window.visualViewport.height,d=window.visualViewport.offsetLeft,c=window.visualViewport.offsetTop,v=window.visualViewport.pageLeft,f=window.visualViewport.pageTop,y=window.visualViewport.scale);var g={width:h,height:p,offsetLeft:d,offsetTop:c,pageLeft:v,pageTop:f,scale:y};"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("padding-top: env(safe-area-inset-top)")&&(t=parseFloat(a.getPropertyValue("padding-top")),e=parseFloat(a.getPropertyValue("padding-right")),i=parseFloat(a.getPropertyValue("padding-bottom")),o=parseFloat(a.getPropertyValue("padding-left"))),document.body.removeChild(s),document.documentElement.style.width=n,document.documentElement.style.height=r;var w={insetTop:t,insetRight:e,insetBottom:i,insetLeft:o},m=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;if(void 0===m)switch(window.orientation){case 0:m="portrait-primary";break;case 180:m="portrait-secondary";break;case-90:m="landscape-primary";break;case 90:m="landscape-secondary";break;default:m="landscape-primary"}return{width:l,height:u,visual:g,safeArea:w,orientation:m,colorScheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"no-preference"}}},Yi={default:function(){return{updateTime:performance.now(),viewIdiom:"unspecified",viewport:qi.detect()}}},Xi=function(){function t(){Object.defineProperty(this,"viewFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewController",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewObserverCache",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.initView=function(t){void 0!==t.viewController&&this.setViewController(t.viewController)},t.prototype.setViewFlags=function(t){Object.defineProperty(this,"viewFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.setViewController=function(t){var e=this.viewController;e!==t&&(this.willSetViewController(t),null!==e&&e.setView(null),Object.defineProperty(this,"viewController",{value:t,enumerable:!0,configurable:!0}),null!==t&&t.setView(this),this.onSetViewController(t),this.didSetViewController(t))},t.prototype.willSetViewController=function(t){},t.prototype.onSetViewController=function(t){},t.prototype.didSetViewController=function(t){},t.prototype.addViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewObserver(t),Object.defineProperty(this,"viewObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddViewObserver(t),this.didAddViewObserver(t))},t.prototype.willAddViewObserver=function(t){},t.prototype.onAddViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didAddViewObserver=function(t){},t.prototype.removeViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewObserver(t),Object.defineProperty(this,"viewObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveViewObserver(t),this.didRemoveViewObserver(t))},t.prototype.willRemoveViewObserver=function(t){},t.prototype.onRemoveViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didRemoveViewObserver=function(t){},t.prototype.attachParentView=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower(),t.isCulled()&&this.cascadeCull())},t.prototype.detachParentView=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentView=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetParentView&&i.viewWillSetParentView(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetParentView&&s.viewWillSetParentView(t,e,this)}},t.prototype.onSetParentView=function(t,e){},t.prototype.didSetParentView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetParentView&&r.viewDidSetParentView(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetParentView&&s.viewDidSetParentView(t,e,this)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildView=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillInsertChildView&&i.viewWillInsertChildView(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillInsertChildView&&s.viewWillInsertChildView(t,e,this)}},t.prototype.onInsertChildView=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildView&&r.viewDidInsertChildView(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidInsertChildView&&s.viewDidInsertChildView(t,e,this)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildView=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRemoveChildView&&e.viewWillRemoveChildView(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillRemoveChildView&&r.viewWillRemoveChildView(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildView=function(t){},t.prototype.didRemoveChildView=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildView&&n.viewDidRemoveChildView(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidRemoveChildView&&r.viewDidRemoveChildView(t,this)},t.prototype.getSuperView=function(t){var e=this.parentView;return null===e?null:e instanceof t?e:e.getSuperView(t)},t.prototype.getBaseView=function(t){var e=this.parentView;if(null===e)return null;var i=e.getBaseView(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.viewFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillMount&&t.viewWillMount(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillMount&&n.viewWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags),0===this.animationTracks.length||this.isCulled()||this.requireUpdate(t.NeedsAnimate)},t.prototype.didMount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMount&&o.viewDidMount(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidMount&&n.viewDidMount(this)},t.prototype.willUnmount=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUnmount&&t.viewWillUnmount(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUnmount&&n.viewWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnmount&&o.viewDidUnmount(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUnmount&&n.viewDidUnmount(this)},t.prototype.isPowered=function(){return 0!=(this.viewFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillPower&&t.viewWillPower(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillPower&&n.viewWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidPower&&o.viewDidPower(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidPower&&n.viewDidPower(this)},t.prototype.willUnpower=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUnpower&&t.viewWillUnpower(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUnpower&&n.viewWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnpower&&o.viewDidUnpower(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUnpower&&n.viewDidUnpower(this)},t.prototype.isCulled=function(){return 0!=(this.viewFlags&t.CulledMask)},t.prototype.willCull=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillCull&&t.viewWillCull(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillCull&&n.viewWillCull(this)}},t.prototype.onCull=function(){},t.prototype.didCull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidCull&&o.viewDidCull(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidCull&&n.viewDidCull(this)},Object.defineProperty(t.prototype,"uncullFlags",{get:function(){return this.constructor.uncullFlags},enumerable:!1,configurable:!0}),t.prototype.willUncull=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillUncull&&t.viewWillUncull(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUncull&&n.viewWillUncull(this)}},t.prototype.onUncull=function(){this.requestUpdate(this,this.viewFlags&~t.StatusMask,!1),this.requireUpdate(this.uncullFlags),0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didUncull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUncull&&o.viewDidUncull(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidUncull&&n.viewDidUncull(this)},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.viewFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setViewFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(e,i,o){if((this.viewFlags&t.CulledMask)!==t.CulledFlag){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsProcess|t.NeedsDisplay);if(0!=(i&t.ProcessMask)&&0==(this.viewFlags&t.NeedsProcess)&&(this.setViewFlags(this.viewFlags|t.NeedsProcess),n|=t.NeedsProcess),0!=(i&t.DisplayMask)&&0==(this.viewFlags&t.NeedsDisplay)&&(this.setViewFlags(this.viewFlags|t.NeedsDisplay),n|=t.NeedsDisplay),0!=(n&(t.NeedsProcess|t.NeedsDisplay))||o){this.onRequestUpdate(e,i,o);var r=this.parentView;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.displayService.manager;void 0!==s&&s.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)}},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){return 0!=(this.viewFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.viewFlags&t.UpdatingMask)},t.prototype.isProcessing=function(){return 0!=(this.viewFlags&t.ProcessingFlag)},t.prototype.needsProcess=function(t,e){return t},t.prototype.willProcess=function(t,e){},t.prototype.onProcess=function(t,e){},t.prototype.didProcess=function(t,e){},t.prototype.willResize=function(t){var e=this.viewController;null!==e&&e.viewWillResize(t,this);var i=this.viewObserverCache.viewWillResizeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillResize(t,this)}},t.prototype.onResize=function(t){},t.prototype.didResize=function(t){var e=this.viewObserverCache.viewDidResizeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidResize(t,this)}var n=this.viewController;null!==n&&n.viewDidResize(t,this)},t.prototype.willScroll=function(t){var e=this.viewController;null!==e&&e.viewWillScroll(t,this);var i=this.viewObserverCache.viewWillScrollObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillScroll(t,this)}},t.prototype.onScroll=function(t){},t.prototype.didScroll=function(t){var e=this.viewObserverCache.viewDidScrollObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidScroll(t,this)}var n=this.viewController;null!==n&&n.viewDidScroll(t,this)},t.prototype.willChange=function(t){var e=this.viewController;null!==e&&e.viewWillChange(t,this);var i=this.viewObserverCache.viewWillChangeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillChange(t,this)}},t.prototype.onChange=function(t){},t.prototype.didChange=function(t){var e=this.viewObserverCache.viewDidChangeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidChange(t,this)}var n=this.viewController;null!==n&&n.viewDidChange(t,this)},t.prototype.willAnimate=function(t){var e=this.viewController;null!==e&&e.viewWillAnimate(t,this);var i=this.viewObserverCache.viewWillAnimateObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillAnimate(t,this)}},t.prototype.onAnimate=function(t){this.isCulled()||this.updateAnimations(t.updateTime)},t.prototype.updateAnimations=function(e){for(var i=this.animationTracks,o=0,n=i.length;o<n;o+=1){i[o].onAnimate(e)}0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didAnimate=function(t){var e=this.viewObserverCache.viewDidAnimateObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidAnimate(t,this)}var n=this.viewController;null!==n&&n.viewDidAnimate(t,this)},t.prototype.willProcessChildViews=function(t,e){},t.prototype.onProcessChildViews=function(t,e){this.processChildViews(t,e,this.processChildView)},t.prototype.didProcessChildViews=function(t,e){},t.prototype.processChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.processChildView=function(t,e,i){this.willProcessChildView(t,e,i),this.onProcessChildView(t,e,i),this.didProcessChildView(t,e,i)},t.prototype.willProcessChildView=function(t,e,i){},t.prototype.onProcessChildView=function(t,e,i){t.cascadeProcess(e,i)},t.prototype.didProcessChildView=function(t,e,i){},t.prototype.isDisplaying=function(){return 0!=(this.viewFlags&t.DisplayingFlag)},t.prototype.needsDisplay=function(t,e){return t},t.prototype.willDisplay=function(t,e){},t.prototype.onDisplay=function(t,e){},t.prototype.didDisplay=function(t,e){},t.prototype.willLayout=function(t){var e=this.viewController;null!==e&&e.viewWillLayout(t,this);var i=this.viewObserverCache.viewWillLayoutObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillLayout(t,this)}},t.prototype.onLayout=function(t){},t.prototype.didLayout=function(t){var e=this.viewObserverCache.viewDidLayoutObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidLayout(t,this)}var n=this.viewController;null!==n&&n.viewDidLayout(t,this)},t.prototype.willDisplayChildViews=function(t,e){},t.prototype.onDisplayChildViews=function(t,e){this.displayChildViews(t,e,this.displayChildView)},t.prototype.didDisplayChildViews=function(t,e){},t.prototype.displayChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.displayChildView=function(t,e,i){this.willDisplayChildView(t,e,i),this.onDisplayChildView(t,e,i),this.didDisplayChildView(t,e,i)},t.prototype.willDisplayChildView=function(t,e,i){},t.prototype.onDisplayChildView=function(t,e,i){t.cascadeDisplay(e,i)},t.prototype.didDisplayChildView=function(t,e,i){},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},t.prototype.willApplyTheme=function(t,e,i){var o=this.viewController;null!==o&&void 0!==o.viewWillApplyTheme&&o.viewWillApplyTheme(t,e,i,this);for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewWillApplyTheme&&a.viewWillApplyTheme(t,e,i,this)}},t.prototype.onApplyTheme=function(t,e,i){},t.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidApplyTheme&&s.viewDidApplyTheme(t,e,i,this)}var a=this.viewController;null!==a&&void 0!==a.viewDidApplyTheme&&a.viewDidApplyTheme(t,e,i,this)},t.prototype.getLazyViewService=function(e){var i=this.getViewService(e);if(null===i){var o=t.getViewServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewService(e,i))}return i},t.prototype.getLazyViewProperty=function(e){var i=this.getViewProperty(e);if(null===i){var o=t.getViewPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewProperty(e,i))}return i},t.prototype.getLazyViewAnimator=function(e){var i=this.getViewAnimator(e);if(null===i){var o=t.getViewAnimatorConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewAnimator(e,i))}return i},t.prototype.trackWillStartAnimating=function(i){Object.defineProperty(this,"animationTracks",{value:e.Arrays.inserted(i,this.animationTracks),enumerable:!0,configurable:!0}),this.isCulled()||this.requireUpdate(t.NeedsAnimate)},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){Object.defineProperty(this,"animationTracks",{value:e.Arrays.removed(t,this.animationTracks),enumerable:!0,configurable:!0})},t.prototype.getLazyViewFastener=function(e){var i=this.getViewFastener(e);if(null===i){var o=t.getViewFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setViewFastener(e,i)}return i},t.prototype.constraint=function(t,e,i,o){t=u.ConstraintExpression.fromAny(t),void 0!==i&&(i=u.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?u.ConstraintStrength.Required:u.ConstraintStrength.fromAny(o);var r=new u.Constraint(this,n,e,o);return this.addConstraint(r),r},t.prototype.activateConstraint=function(e){var i=this.layoutService.manager;void 0!==i&&(i.activateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraint=function(e){var i=this.layoutService.manager;void 0!==i&&(i.deactivateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?u.ConstraintStrength.Strong:u.ConstraintStrength.fromAny(i),new u.ConstraintBinding(this,t,e,i)},t.prototype.activateConstraintVariable=function(e){var i=this.layoutService.manager;void 0!==i&&(i.activateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraintVariable=function(e){var i=this.layoutService.manager;void 0!==i&&(i.deactivateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.setConstraintVariable=function(t,e){var i=this.layoutService.manager;void 0!==i&&i.setConstraintVariable(t,e)},t.prototype.setViewMember=function(t,e,i,o){var n=this.getLazyViewProperty(t);if(null===n){var r=this.getLazyViewAnimator(t);null===r||r.setState(e,i,o)}else n.setState(e,o)},t.prototype.setViewState=function(e,i,o){for(var n in"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=t.Extrinsic),e){var r=e[n];this.setViewMember(n,r,i,o)}},t.prototype.extendViewContext=function(t){return t},Object.defineProperty(t.prototype,"superViewContext",{get:function(){var t=this.parentView;if(null!==t)return t.viewContext;var e=this.viewportService.viewContext;return this.displayService.updatedViewContext(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageTransform",{get:function(){var t=this.parentView;return null!==t?t.pageTransform.transform(this.parentTransform):r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBounds",{get:function(){var t=this.clientBounds,e=this.clientTransform;return t.transform(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popoverFrame",{get:function(){return this.pageBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientTransform",{get:function(){var t,e=window.pageXOffset,i=window.pageYOffset;t=0!==e||0!==i?r.Transform.translate(e,i):r.Transform.identity();var o=this.pageTransform;return t.transform(o)},enumerable:!1,configurable:!0}),t.prototype.intersectsViewport=function(){var t=this.clientBounds,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return(t.top<=0&&0<t.bottom||0<=t.top&&t.top<i)&&(t.left<=0&&0<t.right||0<=t.left&&t.left<e)},t.getViewServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewServiceConstructors")){var i=e.viewServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewServiceConstructors")||(o.viewServiceConstructors={}),o.viewServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewService(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewPropertyConstructors")){var i=e.viewPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewPropertyConstructors")||(o.viewPropertyConstructors={}),o.viewPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewProperty(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewAnimatorConstructor=function(t,e){for(null===e&&(e=this.prototype);null!==e;){if(Object.prototype.hasOwnProperty.call(e,"viewAnimatorConstructors")){var i=e.viewAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},t.decorateViewAnimator=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewAnimatorConstructors")||(o.viewAnimatorConstructors={}),o.viewAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewAnimator(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewFastenerConstructors")){var i=e.viewFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"viewFastenerConstructors")||(r.viewFastenerConstructors={}),r.viewFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewFastener(o);return null===e&&(e=new t(this,n,o),this.setViewFastener(o,e)),e},enumerable:!0,configurable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.CullFlag=4,t.CulledFlag=8,t.HideFlag=16,t.HiddenFlag=32,t.TraversingFlag=64,t.ProcessingFlag=128,t.DisplayingFlag=256,t.RemovingFlag=512,t.ImmediateFlag=1024,t.CulledMask=t.CullFlag|t.CulledFlag,t.HiddenMask=t.HideFlag|t.HiddenFlag,t.UpdatingMask=t.ProcessingFlag|t.DisplayingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.CullFlag|t.CulledFlag|t.HiddenFlag|t.TraversingFlag|t.ProcessingFlag|t.DisplayingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsProcess=2048,t.NeedsResize=4096,t.NeedsScroll=8192,t.NeedsChange=16384,t.NeedsAnimate=32768,t.NeedsProject=65536,t.ProcessMask=t.NeedsProcess|t.NeedsResize|t.NeedsScroll|t.NeedsChange|t.NeedsAnimate|t.NeedsProject,t.NeedsDisplay=1<<17,t.NeedsLayout=1<<18,t.NeedsRender=1<<19,t.NeedsRasterize=1<<20,t.NeedsComposite=1<<21,t.DisplayMask=t.NeedsDisplay|t.NeedsLayout|t.NeedsRender|t.NeedsRasterize|t.NeedsComposite,t.UpdateMask=t.ProcessMask|t.DisplayMask,t.ViewFlagShift=24,t.ViewFlagMask=(1<<t.ViewFlagShift)-1,t.mountFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.powerFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.uncullFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.insertChildFlags=t.NeedsLayout,t.removeChildFlags=t.NeedsLayout,t.Intrinsic=0,t.Extrinsic=1,t}();Object.defineProperty(Xi.prototype,"viewContext",{get:function(){return this.extendViewContext(this.superViewContext)},enumerable:!0,configurable:!0});var Ki=function(){function t(){Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0})}return t.prototype.setView=function(t){this.willSetView(t),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),this.onSetView(t),this.didSetView(t)},t.prototype.willSetView=function(t){},t.prototype.onSetView=function(t){},t.prototype.didSetView=function(t){},Object.defineProperty(t.prototype,"key",{get:function(){var t=this.view;return null!==t?t.key:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentView",{get:function(){var t=this.view;return null!==t?t.parentView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentViewController",{get:function(){var t=this.parentView;return null!==t?t.viewController:null},enumerable:!1,configurable:!0}),t.prototype.viewWillSetParentView=function(t,e,i){},t.prototype.viewDidSetParentView=function(t,e,i){},Object.defineProperty(t.prototype,"childViewCount",{get:function(){var t=this.view;return null!==t?t.childViewCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childViews",{get:function(){var t=this.view;return null!==t?t.childViews:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childViewControllers",{get:function(){return this.childViews.map((function(t){return t.viewController}))},enumerable:!1,configurable:!0}),t.prototype.getChildView=function(t){var e=this.view;return null!==e?e.getChildView(t):null},t.prototype.getChildViewController=function(t){var e=this.getChildView(t);return null!==e?e.viewController:null},t.prototype.setChildView=function(t,e){var i=this.view;if(null!==i)return i.setChildView(t,e);throw new Error("no view")},t.prototype.setChildViewController=function(t,e){var i=null!==e?e.view:null;if(null!==i){var o=this.setChildView(t,i);return null!==o?o.viewController:null}throw new Error("no view")},t.prototype.appendChildView=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.appendChildView(t,e)},t.prototype.appendChildViewController=function(t,e){var i=this.view,o=t.view;if(null===i||null===o)throw new Error("no view");i.appendChildView(o,e)},t.prototype.prependChildView=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.prependChildView(t,e)},t.prototype.prependChildViewController=function(t,e){var i=this.view,o=t.view;if(null===i||null===o)throw new Error("no view");i.prependChildView(o,e)},t.prototype.insertChildView=function(t,e,i){var o=this.view;if(null===o)throw new Error("no view");o.insertChildView(t,e,i)},t.prototype.insertChildViewController=function(t,e,i){var o=this.view,n=t.view;if(null===o||null===n)throw new Error("no view");var r=void 0;r=null===e||e instanceof Xi?e:e.view,o.insertChildView(n,r,i)},t.prototype.viewWillInsertChildView=function(t,e,i){},t.prototype.viewDidInsertChildView=function(t,e,i){},t.prototype.removeChildView=function(t){var e=this.view;if("string"==typeof t)return null!==e?e.removeChildView(t):null;null!==e&&e.removeChildView(t)},t.prototype.removeChildViewController=function(t){var e,i=this.view;if(null===i)throw new Error("no view");if("string"==typeof t)return null!==(e=i.removeChildView(t))?e.viewController:null;if(null===(e=t.view))throw new Error("no view");i.removeChildView(e)},t.prototype.removeAll=function(){var t=this.view;if(null===t)throw new Error("no view");t.removeAll()},t.prototype.remove=function(){var t=this.view;if(null===t)throw new Error("no view");t.remove()},t.prototype.viewWillRemoveChildView=function(t,e){},t.prototype.viewDidRemoveChildView=function(t,e){},t.prototype.getSuperView=function(t){var e=this.view;return null!==e?e.getSuperView(t):null},t.prototype.getBaseView=function(t){var e=this.view;return null!==e?e.getBaseView(t):null},t.prototype.isMounted=function(){var t=this.view;return null!==t&&t.isMounted()},t.prototype.viewWillMount=function(t){},t.prototype.viewDidMount=function(t){},t.prototype.viewWillUnmount=function(t){},t.prototype.viewDidUnmount=function(t){},t.prototype.isPowered=function(){var t=this.view;return null!==t&&t.isPowered()},t.prototype.viewWillPower=function(t){},t.prototype.viewDidPower=function(t){},t.prototype.viewWillUnpower=function(t){},t.prototype.viewDidUnpower=function(t){},t.prototype.isCulled=function(){var t=this.view;return null!==t&&t.isCulled()},t.prototype.viewWillCull=function(t){},t.prototype.viewDidCull=function(t){},t.prototype.viewWillUncull=function(t){},t.prototype.viewDidUncull=function(t){},t.prototype.isTraversing=function(){var t=this.view;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.view;return null!==t&&t.isUpdating()},t.prototype.isProcessing=function(){var t=this.view;return null!==t&&t.isProcessing()},t.prototype.viewWillResize=function(t,e){},t.prototype.viewDidResize=function(t,e){},t.prototype.viewWillScroll=function(t,e){},t.prototype.viewDidScroll=function(t,e){},t.prototype.viewWillChange=function(t,e){},t.prototype.viewDidChange=function(t,e){},t.prototype.viewWillAnimate=function(t,e){},t.prototype.viewDidAnimate=function(t,e){},t.prototype.viewWillProject=function(t,e){},t.prototype.viewDidProject=function(t,e){},t.prototype.isDisplaying=function(){var t=this.view;return null!==t&&t.isDisplaying()},t.prototype.viewWillLayout=function(t,e){},t.prototype.viewDidLayout=function(t,e){},t.prototype.viewWillRender=function(t,e){},t.prototype.viewDidRender=function(t,e){},t.prototype.viewWillRasterize=function(t,e){},t.prototype.viewDidRasterize=function(t,e){},t.prototype.viewWillComposite=function(t,e){},t.prototype.viewDidComposite=function(t,e){},t.prototype.viewWillApplyTheme=function(t,e,i,o){},t.prototype.viewDidApplyTheme=function(t,e,i,o){},Object.defineProperty(t.prototype,"viewContext",{get:function(){var t=this.view;return null!==t?t.viewContext:_i.global().viewContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),t}(),Zi=function(){function t(){Object.defineProperty(this,"rootViews",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewManagerObserver(t),Object.defineProperty(this,"viewManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddViewManagerObserver(t),this.didAddViewManagerObserver(t))},t.prototype.willAddViewManagerObserver=function(t){},t.prototype.onAddViewManagerObserver=function(t){},t.prototype.didAddViewManagerObserver=function(t){},t.prototype.removeViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewManagerObserver(t),Object.defineProperty(this,"viewManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveViewManagerObserver(t),this.didRemoveViewManagerObserver(t))},t.prototype.willRemoveViewManagerObserver=function(t){},t.prototype.onRemoveViewManagerObserver=function(t){},t.prototype.didRemoveViewManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootViews.length},t.prototype.willAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillAttach&&o.viewManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidAttach&&o.viewManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillDetach&&o.viewManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidDetach&&o.viewManagerDidDetach(this)}},t.prototype.insertRootView=function(t){var i=this.rootViews,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootView(t),Object.defineProperty(this,"rootViews",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootView(t),this.didInsertRootView(t),n&&this.didAttach()}},t.prototype.willInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillInsertRootView&&n.viewManagerWillInsertRootView(t,this)}},t.prototype.onInsertRootView=function(t){},t.prototype.didInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidInsertRootView&&n.viewManagerDidInsertRootView(t,this)}},t.prototype.removeRootView=function(t){var i=this.rootViews,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootView(t),Object.defineProperty(this,"rootViews",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootView(t),this.didRemoveRootView(t),n&&this.didDetach()}},t.prototype.willRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillRemoveRootView&&n.viewManagerWillRemoveRootView(t,this)}},t.prototype.onRemoveRootView=function(t){},t.prototype.didRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidRemoveRootView&&n.viewManagerDidRemoveRootView(t,this)}},t}(),_i=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"viewContext",{value:e.initViewContext(),enumerable:!0,configurable:!0}),e.viewportResizeTimer=0,e.reorientationTimer=0,e.throttleScroll=e.throttleScroll.bind(e),e.throttleResize=e.throttleResize.bind(e),e.debounceViewportResize=e.debounceViewportResize.bind(e),e.throttleViewportResize=e.throttleViewportResize.bind(e),e.debounceReorientation=e.debounceReorientation.bind(e),e.throttleReorientation=e.throttleReorientation.bind(e),e}return w(i,t),i.prototype.initViewContext=function(){return{updateTime:0,viewIdiom:"unspecified",viewport:this.detectViewport()}},Object.defineProperty(i.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),i.prototype.detectViewport=function(){return qi.detect()},i.prototype.detectViewIdiom=function(t){return t.width<960||t.height<480?"mobile":"desktop"},i.prototype.updateViewIdiom=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==r.detectViewIdiom&&void 0!==(e=r.detectViewIdiom(t,this)))break}void 0===e&&(e=this.detectViewIdiom(t)),void 0!==e&&this.setViewIdiom(e)},i.prototype.setViewIdiom=function(t){var e=this.viewContext,i=e.viewIdiom;i!==t&&(this.willSetViewIdiom(t,i),e.viewIdiom=t,this.onSetViewIdiom(t,i),this.didSetViewIdiom(t,i))},i.prototype.willSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerWillSetViewIdiom&&r.viewportManagerWillSetViewIdiom(t,e,this)}},i.prototype.onSetViewIdiom=function(t,e){for(var i=this.rootViews,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(Xi.NeedsLayout)},i.prototype.didSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerDidSetViewIdiom&&r.viewportManagerDidSetViewIdiom(t,e,this)}},i.prototype.willReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerWillReorient&&n.viewportManagerWillReorient(t,this)}},i.prototype.onReorient=function(t){},i.prototype.didReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerDidReorient&&n.viewportManagerDidReorient(t,this)}},i.prototype.onAddViewManagerObserver=function(e){t.prototype.onAddViewManagerObserver.call(this,e),this.isAttached()&&this.updateViewIdiom(this.viewport)},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents(),this.updateViewIdiom(this.viewport)},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&(window.addEventListener("scroll",this.throttleScroll,{passive:!0}),window.addEventListener("resize",this.throttleResize),window.addEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.addEventListener("resize",this.debounceViewportResize))},i.prototype.detachEvents=function(){"undefined"!=typeof window&&(window.removeEventListener("scroll",this.throttleScroll),window.removeEventListener("resize",this.throttleResize),window.removeEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.removeEventListener("resize",this.debounceViewportResize))},i.prototype.throttleScroll=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(Xi.NeedsScroll)},i.prototype.throttleResize=function(){var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Xi.NeedsResize|Xi.NeedsLayout)},i.prototype.debounceViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0),this.viewportResizeTimer=setTimeout(this.throttleViewportResize,i.ViewportResizeDelay)},i.prototype.throttleViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Xi.NeedsResize|Xi.NeedsScroll|Xi.NeedsLayout)},i.prototype.debounceReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0),this.reorientationTimer=setTimeout(this.throttleReorientation,i.ReorientationDelay)},i.prototype.throttleReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.willReorient(t.orientation),this.updateViewIdiom(t),this.onReorient(t.orientation),this.didReorient(t.orientation);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(Xi.NeedsResize|Xi.NeedsScroll|Xi.NeedsLayout)},i.global=function(){return new i},i.ViewportResizeDelay=200,i.ReorientationDelay=100,m([e.Lazy],i,"global",null),i}(Zi),Qi=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.processTimer=0,e.displayFrame=0,e.updateDelay=i.MinUpdateDelay,e.runProcessPass=e.runProcessPass.bind(e),e.runDisplayPass=e.runDisplayPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.updatedViewContext=function(t){return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return Xi.NeedsResize|Xi.NeedsScroll},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootViews()},i.prototype.powerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootView(o)}},i.prototype.powerRootView=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootViews()},i.prototype.unpowerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootView(o)}},i.prototype.unpowerRootView=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&Xi.ProcessMask)&&this.setRootFlags(this.rootFlags|Xi.NeedsProcess),0!=(e&Xi.DisplayMask)&&this.setRootFlags(this.rootFlags|Xi.NeedsDisplay),0!=(this.rootFlags&Xi.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxProcessInterval&&0==(this.rootFlags&(Xi.TraversingFlag|Xi.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.processTimer&&0===this.displayFrame&&0==(t&Xi.UpdatingMask)&&0!=(t&Xi.UpdateMask)&&(this.processTimer=setTimeout(this.runProcessPass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.processTimer&&(clearTimeout(this.processTimer),this.processTimer=0),0!==this.displayFrame&&(cancelAnimationFrame(this.displayFrame),this.displayFrame=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|Xi.ImmediateFlag);try{0!=(this.rootFlags&Xi.ProcessMask)&&(this.cancelUpdate(),this.runProcessPass(!0)),0!=(this.rootFlags&Xi.DisplayMask)&&this.updateDelay<=i.MaxProcessInterval&&(this.cancelUpdate(),this.runDisplayPass(void 0,!0))}finally{this.setRootFlags(this.rootFlags&~Xi.ImmediateFlag)}},i.prototype.runProcessPass=function(t){void 0===t&&(t=!1),this.setRootFlags(this.rootFlags&~Xi.ProcessMask|Xi.TraversingFlag|Xi.ProcessingFlag);try{for(var e=performance.now(),o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&Xi.ProcessMask)){var s=r.viewportService.viewContext;s.updateTime=e,r.cascadeProcess(0,s)}}var a=performance.now(),l=Math.max(i.MinProcessInterval,this.updateDelay);this.updateDelay=a-e>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&Xi.DisplayMask)?this.displayFrame=requestAnimationFrame(this.runDisplayPass):0!=(this.rootFlags&Xi.ProcessMask)&&(t&&(l=Math.max(i.MaxProcessInterval,l)),this.processTimer=setTimeout(this.runProcessPass,l))}finally{this.setRootFlags(this.rootFlags&~(Xi.TraversingFlag|Xi.ProcessingFlag))}},i.prototype.runDisplayPass=function(t,e){void 0===e&&(e=!1),this.setRootFlags(this.rootFlags&~Xi.DisplayMask|Xi.TraversingFlag|Xi.DisplayingFlag);try{void 0===t&&(t=performance.now());for(var o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&Xi.DisplayMask)){var s=r.viewportService.viewContext;s.updateTime=t,r.cascadeDisplay(0,s)}}if(this.cancelUpdate(),0!=(this.rootFlags&Xi.ProcessMask)){var a=this.updateDelay;e&&(a=Math.max(i.MaxProcessInterval,a)),this.processTimer=setTimeout(this.runProcessPass,a)}else 0!=(this.rootFlags&Xi.DisplayMask)&&(this.displayFrame=requestAnimationFrame(this.runDisplayPass))}finally{this.setRootFlags(this.rootFlags&~(Xi.TraversingFlag|Xi.DisplayingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.requestUpdate(e,e.viewFlags&Xi.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinProcessInterval=12,i.MaxProcessInterval=33,m([e.Lazy],i,"global",null),i}(Zi),Ji=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"solver",{value:e.createSolver(),enumerable:!0}),e}return w(i,t),i.prototype.createSolver=function(){return new u.ConstraintSolver},i.prototype.activateConstraint=function(t){this.solver.addConstraint(t)},i.prototype.deactivateConstraint=function(t){this.solver.removeConstraint(t)},i.prototype.activateConstraintVariable=function(t){this.solver.addConstraintVariable(t)},i.prototype.deactivateConstraintVariable=function(t){this.solver.removeConstraintVariable(t)},i.prototype.setConstraintVariable=function(t,e){this.solver.setConstraintVariable(t,e)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),$i=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"mood",{value:e.initMood(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"theme",{value:e.initTheme(),enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initMood=function(){return he.default},i.prototype.setMood=function(t){Object.defineProperty(this,"mood",{value:t,enumerable:!0,configurable:!0}),this.applyTheme(this.theme,t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.mood.takesPrecedence(Xi.Intrinsic)&&(n.mood.setState(t,Xi.Intrinsic),n.requireUpdate(Xi.NeedsChange))}},i.prototype.initTheme=function(){return"dark"===qi.detect().colorScheme?ce.dark:ce.light},i.prototype.setTheme=function(t){Object.defineProperty(this,"theme",{value:t,enumerable:!0,configurable:!0}),this.applyTheme(t,this.mood);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.theme.takesPrecedence(Xi.Intrinsic)&&(n.theme.setState(t,Xi.Intrinsic),n.requireUpdate(Xi.NeedsChange))}},i.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},i.prototype.willApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.themeManagerWillApplyTheme&&s.themeManagerWillApplyTheme(t,e,i,this)}},i.prototype.onApplyTheme=function(t,e,i){},i.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.themeManagerDidApplyTheme&&s.themeManagerDidApplyTheme(t,e,i,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.applyTheme(this.theme,this.mood)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),to={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"modalView"in e&&"modalState"in e&&"modality"in e&&"function"==typeof e.showModal&&"function"==typeof e.hideModal}return!1}},eo=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"modals",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"modality",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"matteView",{value:null,enumerable:!0,configurable:!0}),i.onClick=i.onClick.bind(i),i}return w(i,t),i.prototype.isModal=function(){return 0!==this.modality},i.prototype.setMatteView=function(t){Object.defineProperty(this,"matteView",{value:t,enumerable:!0,configurable:!0})},i.prototype.insertModalView=function(t){var e=this.matteView;null!==e?e.appendChildView(t):this.constructor.insertModalView(t)},i.prototype.presentModal=function(t,i){void 0===i&&(i={});var o=this.modals,n=e.Arrays.inserted(t,o);if(o!==n){i.multi||this.dismissModals(),this.willPresentModal(t,i),Object.defineProperty(this,"modals",{value:n,enumerable:!0,configurable:!0});var r=t.modalView;null===r||r.isMounted()||this.insertModalView(r),t.showModal(i,!0),this.onPresentModal(t,i),this.updateModality(),this.didPresentModal(t,i)}},i.prototype.willPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillPresentModal&&r.modalManagerWillPresentModal(t,e,this)}},i.prototype.onPresentModal=function(t,e){},i.prototype.didPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidPresentModal&&r.modalManagerDidPresentModal(t,e,this)}},i.prototype.dismissModal=function(t){var i=this.modals,o=e.Arrays.removed(t,i);i!==o&&(this.willDismissModal(t),Object.defineProperty(this,"modals",{value:o,enumerable:!0,configurable:!0}),t.hideModal(!0),this.onDismissModal(t),this.updateModality(),this.didDismissModal(t))},i.prototype.willDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerWillDismissModal&&n.modalManagerWillDismissModal(t,this)}},i.prototype.onDismissModal=function(t){},i.prototype.didDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDismissModal&&n.modalManagerDidDismissModal(t,this)}},i.prototype.dismissModals=function(){for(var t=0,e=this.modals.length;t<e;t+=1)this.dismissModal(this.modals[t])},i.prototype.toggleModal=function(t,e){var i=t.modalState;"hidden"===i||"hiding"===i?this.presentModal(t,e):"shown"!==i&&"showing"!==i||this.dismissModal(t)},i.prototype.updateModality=function(){for(var t=this.modality,e=0,i=this.modals,o=0,n=i.length;o<n;o+=1){var r=+i[o].modality;e=Math.min(Math.max(e,r),1)}t!==e&&(this.willUpdateModality(e,t),Object.defineProperty(this,"modality",{value:e,enumerable:!0,configurable:!0}),this.onUpdateModality(e,t),this.didUpdateModality(e,t))},i.prototype.willUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillUpdateModality&&r.modalManagerWillUpdateModality(t,e,this)}},i.prototype.onUpdateModality=function(t,e){},i.prototype.didUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidUpdateModality&&r.modalManagerDidUpdateModality(t,e,this)}},i.prototype.displaceModals=function(t){this.willDisplaceModals(t)||(this.onDisplaceModals(t),this.didDisplaceModals(t))},i.prototype.willDisplaceModals=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillDisplaceModals&&(e=r.modalManagerWillDisplaceModals(t,this))}return void 0!==e&&e},i.prototype.onDisplaceModals=function(t){for(var e=this.modals,i=0;i<e.length;){var o=e[i];"shown"===o.modalState?this.dismissModal(o):i+=1}},i.prototype.didDisplaceModals=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDisplaceModals&&n.modalManagerDidDisplaceModals(t,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.attachEvents(e)},i.prototype.onRemoveRootView=function(e){t.prototype.onRemoveRootView.call(this,e),this.detachEvents(e)},i.prototype.attachEvents=function(t){t.on("click",this.onClick)},i.prototype.detachEvents=function(t){t.off("click",this.onClick)},i.prototype.onClick=function(t){this.displaceModals(t)},i.insertModalView=function(t){throw new TypeError(""+t)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(Zi),io=function(t,e){return this instanceof io?oo.call(this,t,e):(i=t,Xi.decorateViewService.bind(Xi,io.define(i)));var i};function oo(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(io,Object),io.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},io.prototype.isInherited=function(){return 0!=(this.serviceFlags&io.InheritedFlag)},io.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(io.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),io.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentView;if(null!==o){if(null===(n=(e=o).getViewService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyViewService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|io.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~io.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})))},io.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~io.InheritedFlag)},Object.defineProperty(io.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(io.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),io.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},io.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},io.prototype.initManager=function(){},io.prototype.mount=function(){this.bindSuperService()},io.prototype.unmount=function(){this.unbindSuperService()},io.getClass=function(t){return t===_i?ro:t===Qi?so:t===Ji?ao:t===$i?lo:t===eo?uo:t===Zi?no:null},io.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=io.getClass(t.type)),null===e&&(e=io);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},s=t;return Object.setPrototypeOf(r,e),(r.prototype=s).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(s.initManager=function(){return i}),Object.defineProperty(s,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},io.InheritedFlag=1;var no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootView(this.owner),!1!==this.observe&&e.addViewManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeViewManagerObserver(this),this.isInherited()||e.removeRootView(this.owner)),t.prototype.unmount.call(this)},e}(io),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"viewContext",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewIdiom",{get:function(){var t=this.manager;return void 0===t&&(t=_i.global()),t.viewIdiom},enumerable:!1,configurable:!0}),e.prototype.setViewIdiom=function(t){var e=this.manager;void 0===e&&(e=_i.global()),e.setViewIdiom(t)},e.prototype.initManager=function(){return _i.global()},e}(no);io({extends:ro,type:_i,observe:!1})(Xi.prototype,"viewportService");var so=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.updatedViewContext=function(t){var e=this.manager;return void 0===e&&(e=Qi.global()),e.updatedViewContext(t)},e.prototype.initManager=function(){return Qi.global()},e}(no);io({extends:so,type:Qi,observe:!1})(Xi.prototype,"displayService");var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return Ji.global()},e}(no);io({extends:ao,type:Ji,observe:!1})(Xi.prototype,"layoutService");var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"mood",{get:function(){return this.manager.mood},enumerable:!1,configurable:!0}),e.prototype.setMood=function(t){this.manager.setMood(t)},Object.defineProperty(e.prototype,"theme",{get:function(){return this.manager.theme},enumerable:!1,configurable:!0}),e.prototype.setTheme=function(t){this.manager.setTheme(t)},e.prototype.initManager=function(){return $i.global()},e}(no);io({extends:lo,type:$i,observe:!1})(Xi.prototype,"themeService");var uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.presentModal=function(t,e){this.manager.presentModal(t,e)},e.prototype.dismissModal=function(t){this.manager.dismissModal(t)},e.prototype.dismissModals=function(){this.manager.dismissModals()},e.prototype.toggleModal=function(t,e){this.manager.toggleModal(t,e)},e.prototype.updateModality=function(){this.manager.updateModality()},e.prototype.displaceModals=function(t){this.manager.displaceModals(t)},e.prototype.initManager=function(){return eo.global()},e}(no);io({extends:uo,type:eo,observe:!1})(Xi.prototype,"modalService");var ho=function(t,e){return this instanceof ho?po.call(this,t,e):(i=t,Xi.decorateViewProperty.bind(Xi,ho.define(i)));var i};function po(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precedence",{value:Xi.Intrinsic,enumerable:!0,configurable:!0}),Object.defineProperty(this,"propertyFlags",{value:ho.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:void 0,enumerable:!0,configurable:!0}),this}w(ho,Object),ho.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},ho.prototype.isInherited=function(){return 0!=(this.propertyFlags&ho.InheritedFlag)},ho.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&ho.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ho.OverrideFlag|ho.InheritedFlag),this.setOwnState(e.state),this.change());else if(!t&&0!=(this.propertyFlags&ho.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag)}},Object.defineProperty(ho.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),ho.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentView;null!==e;){var i=e.getLazyViewProperty(t);if(null!==i){Object.defineProperty(this,"superProperty",{value:i,enumerable:!0,configurable:!0}),i.addSubProperty(this),0==(this.propertyFlags&ho.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|ho.InheritedFlag),this.setOwnState(i.state),this.change());break}e=e.parentView}},ho.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag))},ho.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},ho.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(ho.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(ho.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),ho.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},ho.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},ho.prototype.setState=function(t,e){void 0===e&&(e=Xi.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag|ho.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},ho.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.state;e.Equals(t,i)||(this.willSetState(t,i),Object.defineProperty(this,"ownState",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|ho.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},ho.prototype.willSetState=function(t,e){},ho.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},ho.prototype.didSetState=function(t,e){},ho.prototype.takesPrecedence=function(t){return t>=this.precedence},ho.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),Object.defineProperty(this,"precedence",{value:t,enumerable:!0,configurable:!0}),this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},ho.prototype.willSetPrecedence=function(t,e){},ho.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&ho.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ho.InheritedFlag)}},ho.prototype.didSetPrecedence=function(t,e){},ho.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},ho.prototype.isUpdated=function(){return 0!=(this.propertyFlags&ho.UpdatedFlag)},Object.defineProperty(ho.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&ho.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),ho.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&ho.UpdatedFlag)?(this.setPropertyFlags(t&~ho.UpdatedFlag),this.state):void 0},ho.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~ho.UpdatedFlag),this.state},ho.prototype.change=function(){this.owner.requireUpdate(Xi.NeedsChange)},ho.prototype.onChange=function(){this.isInherited()&&this.onChangeInherited()},ho.prototype.onChangeInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},ho.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.change()}},ho.prototype.fromAny=function(t){return t},ho.prototype.isMounted=function(){return 0!=(this.propertyFlags&ho.MountedFlag)},ho.prototype.mount=function(){0==(this.propertyFlags&ho.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|ho.MountedFlag),this.onMount(),this.didMount())},ho.prototype.willMount=function(){},ho.prototype.onMount=function(){this.bindSuperProperty()},ho.prototype.didMount=function(){},ho.prototype.unmount=function(){0!=(this.propertyFlags&ho.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~ho.MountedFlag),this.onUnmount(),this.didUnmount())},ho.prototype.willUnmount=function(){},ho.prototype.onUnmount=function(){this.unbindSuperProperty()},ho.prototype.didUnmount=function(){},ho.prototype.toString=function(){return this.name},ho.getClass=function(t){return t===String?fo:t===Boolean?yo:t===Number?go:null},ho.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=ho.getClass(t.type)),null===i&&(i=ho,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e){return 0===arguments.length?l.state:(l.setState(t,e),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==n&&(a=l.fromAny(n)),void 0!==a&&Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(l,"inherit",{value:o,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a},ho.MountedFlag=1,ho.UpdatedFlag=2,ho.OverrideFlag=4,ho.InheritedFlag=8,ho.ConstrainedFlag=16,ho.ConstrainingFlag=32,ho({extends:void 0,type:pe,state:null,inherit:!0})(Xi.prototype,"mood"),ho({extends:void 0,type:ve,state:null,inherit:!0})(Xi.prototype,"theme");var co=function(t,e){return this instanceof co?vo.call(this,t,e):(i=t,Xi.decorateViewProperty.bind(Xi,co.define(i)));var i};function vo(t,e){var i,o=ho.call(this,t,e)||this;return Object.defineProperty(o,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(o,"strength",{value:null!==(i=o.strength)&&void 0!==i?i:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(o,"conditionCount",{value:0,enumerable:!0,configurable:!0}),o}w(co,ho),co.prototype.isExternal=function(){return!0},co.prototype.isDummy=function(){return!1},co.prototype.isInvalid=function(){return!1},co.prototype.isConstant=function(){return!1},co.prototype.onSetState=function(t,e){ho.prototype.onSetState.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,void 0!==t?this.toNumber(t):0)},co.prototype.evaluateConstraintVariable=function(){},co.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&this.setOwnState(t)},Object.defineProperty(co.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(co.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),co.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},co.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},co.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},co.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},co.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},co.prototype.isConstrained=function(){return 0!=(this.propertyFlags&ho.ConstrainedFlag)},co.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.propertyFlags;return t&&0==(e&ho.ConstrainedFlag)?(this.setPropertyFlags(e|ho.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&ho.ConstrainedFlag)||(this.setPropertyFlags(e&~ho.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},co.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},co.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},co.prototype.isConstraining=function(){return 0!=(this.propertyFlags&ho.ConstrainingFlag)},co.prototype.startConstraining=function(){0==(this.propertyFlags&ho.ConstrainingFlag)&&(this.willStartConstraining(),this.setPropertyFlags(this.propertyFlags|ho.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},co.prototype.willStartConstraining=function(){},co.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},co.prototype.didStartConstraining=function(){},co.prototype.stopConstraining=function(){0!=(this.propertyFlags&ho.ConstrainingFlag)&&(this.willStopConstraining(),this.setPropertyFlags(this.propertyFlags&~ho.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},co.prototype.willStopConstraining=function(){},co.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},co.prototype.didStopConstraining=function(){},co.prototype.updateConstraintVariable=function(){var t=this.state;void 0!==t&&this.owner.setConstraintVariable(this,this.toNumber(t))},co.prototype.onMount=function(){ho.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},co.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),ho.prototype.onUnmount.call(this)},co.getClass=function(t){return t===Number?wo:t===r.Length?mo:null},co.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=void 0!==t.strength?u.ConstraintStrength.fromAny(t.strength):void 0,s=t.constrain,a=t.precedence,l=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=co.getClass(t.type)),null===i&&(i=co,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var h=function(t,e){var u,h=function(t,e){return 0===arguments.length?h.state:(h.setState(t,e),h.owner)};return Object.setPrototypeOf(h,this),h=i.call(h,t,e)||h,void 0!==l?u=h.fromAny(l()):void 0!==n&&(u=h.fromAny(n)),void 0!==u&&Object.defineProperty(h,"ownState",{value:u,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(h,"strength",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(h,"precedence",{value:a,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(h,"inherit",{value:o,enumerable:!0,configurable:!0}),!0===s&&h.constrain(),h},p=t;return Object.setPrototypeOf(h,i),(h.prototype=p).constructor=h,Object.setPrototypeOf(h.prototype,i.prototype),h};var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(ho),yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(ho),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(ho),wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(co),mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(co),bo=function(){function t(){Object.defineProperty(this,"ownValue",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownLook",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precedence",{value:Xi.Intrinsic,enumerable:!0,configurable:!0}),Object.defineProperty(this,"animatorFlags",{value:t.UpdatedFlag,enumerable:!0,configurable:!0})}return t.prototype.isDefined=function(t){return null!=t},Object.defineProperty(t.prototype,"value",{get:function(){return this.ownValue},enumerable:!1,configurable:!0}),t.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" value");return t},t.prototype.getValueOr=function(t){var e=this.value;return null==e&&(e=t),e},t.prototype.setValue=function(i,o){1===arguments.length&&(o=this.value),e.Equals(i,o)||(this.willSetValue(i,o),Object.defineProperty(this,"ownValue",{value:i,enumerable:!0,configurable:!0}),this.setAnimatorFlags(this.animatorFlags|t.UpdatedFlag),this.onSetValue(i,o),this.didSetValue(i,o))},t.prototype.willSetValue=function(t,e){},t.prototype.onSetValue=function(t,e){},t.prototype.didSetValue=function(t,e){},t.prototype.setIntermediateValue=function(i,o){var n=arguments.length>1?this.state:void 0,r=arguments.length>1&&!e.Equals(o,n);r&&(this.willSetState(o,n),Object.defineProperty(this,"ownState",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),this.onSetState(o,n)),this.setValue(i),r&&(this.didSetState(o,n),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating()))},Object.defineProperty(t.prototype,"state",{get:function(){return this.ownState},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" state");return t},t.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},t.prototype.setState=function(e,i,o){"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=Xi.Extrinsic),o>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~t.InheritedFlag|t.OverrideFlag),this.setPrecedence(o),this.setOwnLook(null,!1),this.setOwnState(e,i))},t.prototype.setOwnState=function(t,i){var o,n=this.state;this.isDefined(n)?e.Equals(t,n)||(!1===(i=void 0!==i&&!1!==i&&(!0===i?null!==(o=this.timing)&&void 0!==o&&o:a.Timing.fromAny(i)))?this.setImmediateState(t,n):this.setAnimatedState(t,n,i)):this.setImmediateState(t,n)},t.prototype.setImmediateState=function(e,i){this.willSetState(e,i),Object.defineProperty(this,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),this.onSetState(e,i),this.setValue(e),this.didSetState(e,i),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating())},t.prototype.setAnimatedState=function(e,i,o){this.willSetState(e,i),Object.defineProperty(this,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"timing",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"interpolator",{value:a.Interpolator(this.value,e),enumerable:!0,configurable:!0}),0!=(this.animatorFlags&t.AnimatingFlag)?this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag|t.InterruptFlag):this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag),this.onSetState(e,i),this.didSetState(e,i),this.startAnimating()},t.prototype.willSetState=function(t,e){},t.prototype.onSetState=function(t,e){},t.prototype.didSetState=function(t,e){},Object.defineProperty(t.prototype,"look",{get:function(){return this.ownLook},enumerable:!1,configurable:!0}),t.prototype.setLook=function(e,i,o){"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=Xi.Extrinsic),o>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~t.InheritedFlag|t.OverrideFlag),this.setPrecedence(o),this.setOwnLook(e,i))},t.prototype.setOwnLook=function(t,e){var i=this.look;t!==i&&(e=void 0!==e&&a.Timing.fromAny(e),this.willSetLook(t,i,e),Object.defineProperty(this,"ownLook",{value:t,enumerable:!0,configurable:!0}),this.onSetLook(t,i,e),this.didSetLook(t,i,e))},t.prototype.willSetLook=function(t,e,i){},t.prototype.onSetLook=function(t,e,i){},t.prototype.didSetLook=function(t,e,i){},t.prototype.takesPrecedence=function(t){return t>=this.precedence},t.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),Object.defineProperty(this,"precedence",{value:t,enumerable:!0,configurable:!0}),this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},t.prototype.willSetPrecedence=function(t,e){},t.prototype.onSetPrecedence=function(t,e){},t.prototype.didSetPrecedence=function(t,e){},t.prototype.setAnimatorFlags=function(t){Object.defineProperty(this,"animatorFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.isUpdated=function(){return 0!=(this.animatorFlags&t.UpdatedFlag)},Object.defineProperty(t.prototype,"updatedValue",{get:function(){return 0!=(this.animatorFlags&t.UpdatedFlag)?this.value:void 0},enumerable:!1,configurable:!0}),t.prototype.takeUpdatedValue=function(){var e=this.animatorFlags;return 0!=(e&t.UpdatedFlag)?(this.setAnimatorFlags(e&~t.UpdatedFlag),this.value):void 0},t.prototype.takeValue=function(){return this.setAnimatorFlags(this.animatorFlags&~t.UpdatedFlag),this.value},t.prototype.isAnimating=function(){return 0!=(this.animatorFlags&t.AnimatingFlag)},t.prototype.startAnimating=function(){0==(this.animatorFlags&t.AnimatingFlag)&&(this.willStartAnimating(),this.setAnimatorFlags(this.animatorFlags|t.AnimatingFlag),this.onStartAnimating(),this.didStartAnimating())},t.prototype.willStartAnimating=function(){},t.prototype.onStartAnimating=function(){},t.prototype.didStartAnimating=function(){},t.prototype.stopAnimating=function(){0!=(this.animatorFlags&t.AnimatingFlag)&&(this.willStopAnimating(),this.setAnimatorFlags(this.animatorFlags&~t.AnimatingFlag),this.onStopAnimating(),this.didStopAnimating())},t.prototype.willStopAnimating=function(){},t.prototype.onStopAnimating=function(){},t.prototype.didStopAnimating=function(){},t.prototype.onAnimate=function(i){if(0!=(this.animatorFlags&t.AnimatingFlag)){var o=this.value,n=this.timing;null===n&&(n=a.Easing.linear.withDomain(i,i),Object.defineProperty(this,"timing",{value:n,enumerable:!0,configurable:!0}));var r=this.interpolator;null===r&&(r=a.Interpolator(o,this.state),Object.defineProperty(this,"interpolator",{value:r,enumerable:!0,configurable:!0})),0!=(this.animatorFlags&t.InterruptFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.InterruptFlag),this.onInterrupt(o)),0!=(this.animatorFlags&t.DivergedFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.DivergedFlag),n=e.Equals(this.state,o)?n.withDomain(i-n.duration,i):n.withDomain(i,i+n.duration),Object.defineProperty(this,"timing",{value:n,enumerable:!0,configurable:!0}),this.onBegin(o));var s=n(i),l=r(s);this.setValue(l),s>=1&&(this.stopAnimating(),Object.defineProperty(this,"interpolator",{value:null,enumerable:!0,configurable:!0}),this.onEnd(l))}},t.prototype.onBegin=function(t){},t.prototype.onEnd=function(t){},t.prototype.onInterrupt=function(t){},t.MountedFlag=1,t.UpdatedFlag=2,t.OverrideFlag=4,t.InheritedFlag=8,t.ConstrainedFlag=16,t.ConstrainingFlag=32,t.AnimatingFlag=64,t.DivergedFlag=128,t.InterruptFlag=256,t.AnimatorFlagsShift=12,t}(),So=function(t,e){return this instanceof So?Co.call(this,t,e):(i=t,Xi.decorateViewAnimator.bind(So,So.define(i)));var i};function Co(t,e){var i=bo.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"owner",{value:t,enumerable:!0}),Object.defineProperty(i,"inherit",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(i,"superAnimator",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"subAnimators",{value:null,enumerable:!0,configurable:!0}),i}w(So,bo),So.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperAnimator(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperAnimator())},So.prototype.isInherited=function(){return 0!=(this.animatorFlags&bo.InheritedFlag)},So.prototype.setInherited=function(t){if(t&&0==(this.animatorFlags&bo.InheritedFlag))null!==(e=this.superAnimator)&&e.precedence>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~bo.OverrideFlag|bo.InheritedFlag),this.setOwnLook(e.look),null===this.look&&(Object.defineProperty(this,"ownState",{value:e.state,enumerable:!0,configurable:!0}),this.setValue(e.value,this.value),e.isAnimating()?this.startAnimating():this.stopAnimating()));else if(!t&&0!=(this.animatorFlags&bo.InheritedFlag)){var e;null!==(e=this.superAnimator)&&e.precedence<this.precedence&&this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag)}},Object.defineProperty(So.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),So.prototype.bindSuperAnimator=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentView;null!==e;){var i=e.getLazyViewAnimator(t);if(null!==i){Object.defineProperty(this,"superAnimator",{value:i,enumerable:!0,configurable:!0}),i.addSubAnimator(this),0==(this.animatorFlags&bo.OverrideFlag)&&i.precedence>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags|bo.InheritedFlag),this.setOwnLook(i.look),null===this.look&&(Object.defineProperty(this,"ownState",{value:i.state,enumerable:!0,configurable:!0}),this.setValue(i.value,this.value),i.isAnimating()?this.startAnimating():this.stopAnimating()));break}e=e.parentView}},So.prototype.unbindSuperAnimator=function(){var t=this.superAnimator;null!==t&&(t.removeSubAnimator(this),Object.defineProperty(this,"superAnimator",{value:null,enumerable:!0,configurable:!0}),this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag))},So.prototype.addSubAnimator=function(t){var e=this.subAnimators;null===e&&(e=[],Object.defineProperty(this,"subAnimators",{value:e,enumerable:!0,configurable:!0})),e.push(t)},So.prototype.removeSubAnimator=function(t){var e=this.subAnimators;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(So.prototype,"superValue",{get:function(){var t=this.superAnimator;return null!==t?t.value:void 0},enumerable:!0,configurable:!0}),So.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},So.prototype.onSetValue=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},Object.defineProperty(So.prototype,"superState",{get:function(){var t=this.superAnimator;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),So.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},So.prototype.setOwnState=function(t,e){t=this.fromAny(t),bo.prototype.setOwnState.call(this,t,e)},So.prototype.setImmediateState=function(t,e){bo.prototype.setImmediateState.call(this,t,e);var i=this.subAnimators;if(null!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];r.isInherited()&&r.startAnimating()}},So.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.animatorFlags&bo.InheritedFlag)){var i=this.superAnimator;null!==i&&i.precedence<this.precedence&&this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag)}},Object.defineProperty(So.prototype,"superLook",{get:function(){var t=this.superAnimator;return null!==t?t.look:null},enumerable:!0,configurable:!0}),So.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},So.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(Xi.NeedsChange)},So.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(n,i))}},So.prototype.onAnimate=function(t){this.isInherited()?this.onAnimateInherited(t):bo.prototype.onAnimate.call(this,t)},So.prototype.onAnimateInherited=function(t){var e=this.superAnimator;null!==e&&e.precedence>=this.precedence?(this.setOwnLook(e.look),null!==this.look?bo.prototype.onAnimate.call(this,t):(Object.defineProperty(this,"ownState",{value:e.state,enumerable:!0,configurable:!0}),this.setValue(e.value,this.value),e.isAnimating()||this.stopAnimating())):this.stopAnimating()},So.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this);var t=this.subAnimators;if(null!==t)for(var e=0,i=t.length;e<i;e+=1){var o=t[e];o.isInherited()&&o.startAnimating()}},So.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},So.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},So.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},So.prototype.fromAny=function(t){return t},So.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},So.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},So.prototype.willMount=function(){},So.prototype.onMount=function(){this.bindSuperAnimator();var t=this.look;null!==t&&this.applyLook(t,!1)},So.prototype.didMount=function(){},So.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},So.prototype.willUnmount=function(){},So.prototype.onUnmount=function(){this.stopAnimating(),this.unbindSuperAnimator()},So.prototype.didUnmount=function(){},So.prototype.toString=function(){return this.name},So.getClass=function(t){return t===String?Fo:t===Boolean?To:t===Number?Do:t===r.Angle?Oo:t===r.Length?xo:t===St?Ro:t===gt?ko:t===r.Transform?Io:null},So.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.look,s=t.precedence,a=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=So.getClass(t.type)),null===i&&(i=So,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,u=function(t,e,i){return 0===arguments.length?u.value:(2===arguments.length?u.setState(t,e):u.setState(t,e,i),u.owner)};return Object.setPrototypeOf(u,this),u=i.call(u,t,e)||u,void 0!==a?l=u.fromAny(a()):void 0!==n&&(l=u.fromAny(n)),void 0!==l&&(Object.defineProperty(u,"ownValue",{value:l,enumerable:!0,configurable:!0}),Object.defineProperty(u,"ownState",{value:l,enumerable:!0,configurable:!0})),void 0!==r&&Object.defineProperty(u,"ownLook",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(u,"precedence",{value:s,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(u,"inherit",{value:o,enumerable:!0,configurable:!0}),u},u=t;return Object.setPrototypeOf(l,i),(l.prototype=u).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l};var Po=function(t,e){return this instanceof Po?Vo.call(this,t,e):(i=t,Xi.decorateViewAnimator.bind(Po,Po.define(i)));var i};function Vo(t,e){var i=So.call(this,t,e)||this;return Object.defineProperty(i,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(i,"strength",{value:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(i,"conditionCount",{value:0,enumerable:!0,configurable:!0}),i}w(Po,So),Po.prototype.isExternal=function(){return!0},Po.prototype.isDummy=function(){return!1},Po.prototype.isInvalid=function(){return!1},Po.prototype.isConstant=function(){return!1},Po.prototype.onSetValue=function(t,e){So.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},Po.prototype.evaluateConstraintVariable=function(){},Po.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&bo.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(Po.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),Po.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},Po.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},Po.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},Po.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},Po.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},Po.prototype.isConstrained=function(){return 0!=(this.animatorFlags&bo.ConstrainedFlag)},Po.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&bo.ConstrainedFlag)?(this.setAnimatorFlags(e|bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&bo.ConstrainedFlag)||(this.setAnimatorFlags(e&~bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},Po.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},Po.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},Po.prototype.isConstraining=function(){return 0!=(this.animatorFlags&bo.ConstrainingFlag)},Po.prototype.startConstraining=function(){0==(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|bo.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},Po.prototype.willStartConstraining=function(){},Po.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},Po.prototype.didStartConstraining=function(){},Po.prototype.stopConstraining=function(){0!=(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~bo.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},Po.prototype.willStopConstraining=function(){},Po.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},Po.prototype.didStopConstraining=function(){},Po.prototype.updateConstraintVariable=function(){this.owner.setConstraintVariable(this,this.toNumber(this.value))},Po.prototype.onMount=function(){So.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},Po.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),So.prototype.onUnmount.call(this)},Po.getClass=function(t){return t===Number?Mo:t===r.Length?Ao:null},Po.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.look,s=void 0!==t.strength?u.ConstraintStrength.fromAny(t.strength):void 0,a=t.constrain,l=t.precedence,h=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.look,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=Po.getClass(t.type)),null===i&&(i=Po,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var p=function(t,e){var u,p=function(t,e,i){return 0===arguments.length?p.value:(2===arguments.length?p.setState(t,e):p.setState(t,e,i),p.owner)};return Object.setPrototypeOf(p,this),p=i.call(p,t,e)||p,void 0!==h?u=p.fromAny(h()):void 0!==n&&(u=p.fromAny(n)),void 0!==u&&(Object.defineProperty(p,"ownValue",{value:u,enumerable:!0,configurable:!0}),Object.defineProperty(p,"ownState",{value:u,enumerable:!0,configurable:!0})),void 0!==r&&Object.defineProperty(p,"ownLook",{value:r,enumerable:!0,configurable:!0}),void 0!==s&&Object.defineProperty(p,"strength",{value:s,enumerable:!0,configurable:!0}),void 0!==l&&Object.defineProperty(p,"precedence",{value:l,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(p,"inherit",{value:o,enumerable:!0,configurable:!0}),!0===a&&p.constrain(),p},d=t;return Object.setPrototypeOf(p,i),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,i.prototype),p};var Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(So),To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(So),Do=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(So),Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(Po),Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Angle.fromAny(t):t},e}(So),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(So),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e}(Po),Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?St.fromAny(t):t},e}(So),ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?gt.fromAny(t):t},e}(So),Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Transform.fromAny(t):null},e}(So),Lo=function(t,e,i){return this instanceof Lo?jo.call(this,t,e,i):(o=t,Xi.decorateViewFastener.bind(Xi,Lo.define(o)));var o};function jo(t,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),this}w(Lo,Object),Lo.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},Lo.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},Lo.prototype.setView=function(t,e){var i=this.view;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentView===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertView(this.owner,t,e,this.key)),this.doSetView(t,e),i},Lo.prototype.doSetView=function(t,e){var i=this.view;i!==t&&(this.deactivateLayout(),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e))},Lo.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},Lo.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},Lo.prototype.willSetView=function(t,e,i){},Lo.prototype.onSetView=function(t,e,i){},Lo.prototype.didSetView=function(t,e,i){},Lo.prototype.constraint=function(t,e,i,o){t=u.ConstraintExpression.fromAny(t),void 0!==i&&(i=u.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?u.ConstraintStrength.Required:u.ConstraintStrength.fromAny(o);var r=new u.Constraint(this.owner,n,e,o);return this.addConstraint(r),r},Lo.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},Lo.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},Lo.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},Lo.prototype.activateConstraint=function(t){this.owner.activateConstraint(t)},Lo.prototype.deactivateConstraint=function(t){this.owner.deactivateConstraint(t)},Lo.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?u.ConstraintStrength.Strong:u.ConstraintStrength.fromAny(i),new u.ConstraintBinding(this,t,e,i)},Lo.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},Lo.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},Lo.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},Lo.prototype.activateConstraintVariable=function(t){this.owner.activateConstraintVariable(t)},Lo.prototype.deactivateConstraintVariable=function(t){this.owner.deactivateConstraintVariable(t)},Lo.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},Lo.prototype.activateLayout=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1)this.owner.activateConstraintVariable(t[e]);var o=this.constraints;for(e=0,i=o.length;e<i;e+=1)this.owner.activateConstraint(o[e])},Lo.prototype.deactivateLayout=function(){for(var t=this.constraints,e=0,i=t.length;e<i;e+=1)this.owner.deactivateConstraint(t[e]);var o=this.constraintVariables;for(e=0,i=o.length;e<i;e+=1)this.owner.deactivateConstraintVariable(o[e])},Object.defineProperty(Lo.prototype,"parentView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Lo.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.doSetView(e,i),null!==e&&(null==t&&(t=this.parentView),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.doSetView(e,i)),e},Lo.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},Lo.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},Lo.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},Lo.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof Xi?t:null},Lo.prototype.isMounted=function(){return 0!=(this.fastenerFlags&Lo.MountedFlag)},Lo.prototype.mount=function(){0==(this.fastenerFlags&Lo.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|Lo.MountedFlag),this.onMount(),this.didMount())},Lo.prototype.willMount=function(){},Lo.prototype.onMount=function(){this.activateLayout()},Lo.prototype.didMount=function(){},Lo.prototype.unmount=function(){0!=(this.fastenerFlags&Lo.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~Lo.MountedFlag),this.onUnmount(),this.didUnmount())},Lo.prototype.willUnmount=function(){},Lo.prototype.onUnmount=function(){this.deactivateLayout()},Lo.prototype.didUnmount=function(){},Lo.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=Lo);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},Lo.MountedFlag=1;var Wo=function(){function t(t,e,i,o,n,r){this.inputId=t,this.inputType=e,this.isPrimary=i,this.target=null,this.button=0,this.buttons=0,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.twist=0,this.pressure=0,this.tangentialPressure=0,this.x0=o,this.y0=n,this.t0=r,this.dx=0,this.dy=0,this.dt=0,this.x=o,this.y=n,this.t=r,this.detail=void 0,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}(),Eo=function(t){function e(e,i,o,n,r,s){var a=t.call(this,e,i,o,n,r,s)||this;return a.hovering=!1,a.pressing=!1,a.holdTimer=0,a.holdDelay=400,a}return w(e,t),e.prototype.isRunaway=function(){var t=this.x-this.x0,e=this.y-this.y0,i=this.t-this.t0;return"mouse"!==this.inputType&&i<100&&t*t+e*e>100},e.prototype.setHoldTimer=function(t){0!==this.holdDelay&&(this.clearHoldTimer(),this.holdTimer=setTimeout(t,this.holdDelay))},e.prototype.clearHoldTimer=function(){0!==this.holdTimer&&(clearTimeout(this.holdTimer),this.holdTimer=0)},e}(Wo),No=function(){function t(t,e){void 0===e&&(e=null),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),Object.defineProperty(this,"delegate",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputs",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"hoverCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pressCount",{value:0,enumerable:!0,configurable:!0})}return t.prototype.initView=function(t){null!==t&&(t.addViewObserver(this),t.isMounted()&&this.attachEvents(t))},t.prototype.setView=function(t){var e=this.view;e!==t&&(null!==e&&(this.detachEvents(e),e.removeViewObserver(this)),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&(t.addViewObserver(this),t.isMounted()&&this.attachEvents(t)))},t.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},t.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},t.prototype.createInput=function(t,e,i,o,n,r){return new Eo(t,e,i,o,n,r)},t.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var s=this.inputs,a=s[t];return void 0===a&&(a=this.createInput(t,e,i,o,n,r),s[t]=a,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),a},t.prototype.clearInput=function(t){t.hovering||t.pressing||(delete this.inputs[t.inputId],Object.defineProperty(this,"inputCount",{value:this.inputCount-1,enumerable:!0,configurable:!0}))},t.prototype.viewDidMount=function(t){this.attachEvents(t)},t.prototype.viewWillUnmount=function(t){this.detachEvents(t),Object.defineProperty(this,"inputs",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"inputCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"hoverCount",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pressCount",{value:0,enumerable:!0,configurable:!0})},t.prototype.attachEvents=function(t){this.attachHoverEvents(t)},t.prototype.detachEvents=function(t){this.detachHoverEvents(t),this.detachPressEvents(t)},t.prototype.attachHoverEvents=function(t){},t.prototype.detachHoverEvents=function(t){},t.prototype.attachPressEvents=function(t){},t.prototype.detachPressEvents=function(t){},t.prototype.isHovering=function(){return 0!==this.hoverCount},t.prototype.startHovering=function(){this.willStartHovering(),this.onStartHovering(),this.didStartHovering()},t.prototype.willStartHovering=function(){var t=this.delegate;null!==t&&void 0!==t.willStartHovering&&t.willStartHovering()},t.prototype.onStartHovering=function(){},t.prototype.didStartHovering=function(){var t=this.delegate;null!==t&&void 0!==t.didStartHovering&&t.didStartHovering()},t.prototype.stopHovering=function(){this.willStopHovering(),this.onStopHovering(),this.didStopHovering()},t.prototype.willStopHovering=function(){var t=this.delegate;null!==t&&void 0!==t.willStopHovering&&t.willStopHovering()},t.prototype.onStopHovering=function(){},t.prototype.didStopHovering=function(){var t=this.delegate;null!==t&&void 0!==t.didStopHovering&&t.didStopHovering()},t.prototype.beginHover=function(t,e){t.hovering||(this.willBeginHover(t,e),t.hovering=!0,Object.defineProperty(this,"hoverCount",{value:this.hoverCount+1,enumerable:!0,configurable:!0}),this.onBeginHover(t,e),this.didBeginHover(t,e),1===this.hoverCount&&this.startHovering())},t.prototype.willBeginHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willBeginHover&&i.willBeginHover(t,e)},t.prototype.onBeginHover=function(t,e){},t.prototype.didBeginHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginHover&&i.didBeginHover(t,e)},t.prototype.endHover=function(t,e){t.hovering&&(this.willEndHover(t,e),t.hovering=!1,Object.defineProperty(this,"hoverCount",{value:this.hoverCount-1,enumerable:!0,configurable:!0}),this.onEndHover(t,e),this.didEndHover(t,e),0===this.hoverCount&&this.stopHovering(),this.clearInput(t))},t.prototype.willEndHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndHover&&i.willEndHover(t,e)},t.prototype.onEndHover=function(t,e){},t.prototype.didEndHover=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndHover&&i.didEndHover(t,e)},t.prototype.isPressing=function(){return 0!==this.pressCount},t.prototype.startPressing=function(){this.willStartPressing(),this.onStartPressing(),this.didStartPressing()},t.prototype.willStartPressing=function(){var t=this.delegate;null!==t&&void 0!==t.willStartPressing&&t.willStartPressing()},t.prototype.onStartPressing=function(){this.attachPressEvents(this.view)},t.prototype.didStartPressing=function(){var t=this.delegate;null!==t&&void 0!==t.didStartPressing&&t.didStartPressing()},t.prototype.stopPressing=function(){this.willStopPressing(),this.onStopPressing(),this.didStopPressing()},t.prototype.willStopPressing=function(){var t=this.delegate;null!==t&&void 0!==t.willStopPressing&&t.willStopPressing()},t.prototype.onStopPressing=function(){this.detachPressEvents(this.view)},t.prototype.didStopPressing=function(){var t=this.delegate;null!==t&&void 0!==t.didStopPressing&&t.didStopPressing()},t.prototype.beginPress=function(t,e){t.pressing||this.willBeginPress(t,e)&&(t.pressing=!0,t.defaultPrevented=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount+1,enumerable:!0,configurable:!0}),this.onBeginPress(t,e),t.setHoldTimer(this.longPress.bind(this,t)),this.didBeginPress(t,e),1===this.pressCount&&this.startPressing())},t.prototype.willBeginPress=function(t,e){var i=this.delegate;if(null!==i&&void 0!==i.willBeginPress&&!1===i.willBeginPress(t,e))return!1;return!0},t.prototype.onBeginPress=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},t.prototype.didBeginPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginPress&&i.didBeginPress(t,e)},t.prototype.movePress=function(t,e){t.pressing&&(this.willMovePress(t,e),this.onMovePress(t,e),this.didMovePress(t,e))},t.prototype.willMovePress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willMovePress&&i.willMovePress(t,e)},t.prototype.onMovePress=function(t,e){},t.prototype.didMovePress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didMovePress&&i.didMovePress(t,e)},t.prototype.endPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willEndPress(t,e),t.pressing=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount-1,enumerable:!0,configurable:!0}),this.onEndPress(t,e),this.didEndPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},t.prototype.willEndPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndPress&&i.willEndPress(t,e)},t.prototype.onEndPress=function(t,e){},t.prototype.didEndPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndPress&&i.didEndPress(t,e)},t.prototype.cancelPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willCancelPress(t,e),t.pressing=!1,Object.defineProperty(this,"pressCount",{value:this.pressCount-1,enumerable:!0,configurable:!0}),this.onCancelPress(t,e),this.didCancelPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},t.prototype.willCancelPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willCancelPress&&i.willCancelPress(t,e)},t.prototype.onCancelPress=function(t,e){},t.prototype.didCancelPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didCancelPress&&i.didCancelPress(t,e)},t.prototype.press=function(t,e){this.willPress(t,e),this.onPress(t,e),this.didPress(t,e)},t.prototype.willPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willPress&&i.willPress(t,e)},t.prototype.onPress=function(t,e){},t.prototype.didPress=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didPress&&i.didPress(t,e)},t.prototype.longPress=function(t){t.clearHoldTimer(),performance.now()-t.t0<1.5*t.holdDelay&&t.pressing&&(this.willLongPress(t),this.onLongPress(t),this.didLongPress(t))},t.prototype.willLongPress=function(t){var e=this.delegate;null!==e&&void 0!==e.willLongPress&&e.willLongPress(t)},t.prototype.onLongPress=function(t){var e=performance.now();t.dt=e-t.t,t.t=e},t.prototype.didLongPress=function(t){var e=this.delegate;null!==e&&void 0!==e.didLongPress&&e.didLongPress(t)},t}(),Go=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(No),Uo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(No),Bo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.y,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(No),Ho="undefined"!=typeof PointerEvent?Go:"undefined"!=typeof TouchEvent?Uo:Bo,zo=function(t){function e(e,i,o,n,r,s){var a=t.call(this,e,i,o,n,r,s)||this;return a.vx=0,a.vy=0,a.ax=0,a.ay=0,a.path=[],a.coasting=!1,a}return w(e,t),e.prototype.updatePosition=function(t){var e=this.path,i=this.x,o=this.y,n=this.t;for(e.push({x:i,y:o,t:n});e.length>1&&n-e[0].t>t;)e.shift()},e.prototype.deriveVelocity=function(t){var e=this.path[0],i=this.path[this.path.length-1];if(void 0!==i&&i!==e){var o=i.t-e.t,n=void 0,r=void 0;if(0!==o){var s=(n=(i.x-e.x)/o)*n+(r=(i.y-e.y)/o)*r;if(t*t<s){var a=Math.sqrt(s);n=n*t/a,r=r*t/a}}else n=0,r=0;this.vx=n,this.vy=r}else void 0!==e&&(this.vx=0,this.vy=0)},e.prototype.integrateVelocity=function(t){var e=t-this.t;if(0!==e){var i=this.vx+this.ax*e,o=void 0;i<0==this.vx<0?o=this.x+this.vx*e+this.ax*e*e*.5:(o=this.x-this.vx*this.vx/(2*this.ax),i=0,this.ax=0);var n=this.vy+this.ay*e,r=void 0;n<0==this.vy<0?r=this.y+this.vy*e+this.ay*e*e*.5:(r=this.y-this.vy*this.vy/(2*this.ay),n=0,this.ay=0),this.dx=o-this.x,this.dy=r-this.y,this.dt=e,this.x=o,this.y=r,this.t=t,this.vx=i,this.vy=n}},e}(Eo),qo=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return Object.defineProperty(o,"coastCount",{value:0,enumerable:!0,configurable:!0}),o}return w(e,t),e.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},e.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},e.prototype.createInput=function(t,e,i,o,n,r){return new zo(t,e,i,o,n,r)},e.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var s=this.inputs,a=s[t];return void 0===a&&(a=this.createInput(t,e,i,o,n,r),s[t]=a,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),a},e.prototype.clearInput=function(t){t.hovering||t.pressing||t.coasting||(delete this.inputs[t.inputId],Object.defineProperty(this,"inputCount",{value:this.inputCount-1,enumerable:!0,configurable:!0}))},Object.defineProperty(e.prototype,"hysteresis",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.hysteresis?t.hysteresis():Zo.Hysteresis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"acceleration",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.acceleration?t.acceleration():Zo.Acceleration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityMax",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.velocityMax?t.velocityMax():Zo.VelocityMax},enumerable:!1,configurable:!0}),e.prototype.viewWillUnmount=function(e){t.prototype.viewWillUnmount.call(this,e),Object.defineProperty(this,"coastCount",{value:0,enumerable:!0,configurable:!0})},e.prototype.viewWillAnimate=function(t){this.doCoast(t.updateTime)},e.prototype.interrupt=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endCoast(o,t)}},e.prototype.cancel=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endPress(o,t),this.endCoast(o,t)}},e.prototype.startInteracting=function(){this.willStartInteracting(),this.onStartInteracting(),this.didStartInteracting()},e.prototype.willStartInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.willStartInteracting&&t.willStartInteracting()},e.prototype.onStartInteracting=function(){},e.prototype.didStartInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.didStartInteracting&&t.didStartInteracting()},e.prototype.stopInteracting=function(){this.willStopInteracting(),this.onStopInteracting(),this.didStopInteracting()},e.prototype.willStopInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.willStopInteracting&&t.willStopInteracting()},e.prototype.onStopInteracting=function(){},e.prototype.didStopInteracting=function(){var t=this.delegate;null!==t&&void 0!==t.didStopInteracting&&t.didStopInteracting()},e.prototype.onStartPressing=function(){t.prototype.onStartPressing.call(this),0===this.coastCount&&this.startInteracting()},e.prototype.onStopPressing=function(){t.prototype.onStopPressing.call(this),0===this.coastCount&&this.stopInteracting()},e.prototype.beginPress=function(e,i){t.prototype.beginPress.call(this,e,i),this.interrupt(i)},e.prototype.onBeginPress=function(e,i){t.prototype.onBeginPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.onMovePress=function(e,i){t.prototype.onMovePress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.willEndPress=function(e,i){t.prototype.willEndPress.call(this,e,i),this.beginCoast(e,i)},e.prototype.onEndPress=function(e,i){t.prototype.onEndPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.onCancelPress=function(e,i){t.prototype.onCancelPress.call(this,e,i),e.updatePosition(this.hysteresis),e.deriveVelocity(this.velocityMax)},e.prototype.isCoasting=function(){return 0!==this.coastCount},e.prototype.startCoasting=function(){this.willStartCoasting(),this.onStartCoasting(),this.didStartCoasting()},e.prototype.willStartCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.willStartCoasting&&t.willStartCoasting()},e.prototype.onStartCoasting=function(){0===this.pressCount&&this.startInteracting(),null!==this.view&&this.view.requireUpdate(Xi.NeedsAnimate)},e.prototype.didStartCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.didStartCoasting&&t.didStartCoasting()},e.prototype.stopCoasting=function(){this.willStopCoasting(),this.onStopCoasting(),this.didStopCoasting()},e.prototype.willStopCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.willStopCoasting&&t.willStopCoasting()},e.prototype.onStopCoasting=function(){0===this.pressCount&&this.stopInteracting()},e.prototype.didStopCoasting=function(){var t=this.delegate;null!==t&&void 0!==t.didStopCoasting&&t.didStopCoasting()},e.prototype.beginCoast=function(t,e){if(!t.coasting&&(0!==t.vx||0!==t.vy)){var i=Math.atan2(Math.abs(t.vy),Math.abs(t.vx)),o=this.acceleration,n=(t.vx<0?o:t.vx>0?-o:0)*Math.cos(i),r=(t.vy<0?o:t.vy>0?-o:0)*Math.sin(i);if(0!==n||0!==r)t.ax=n,t.ay=r,this.willBeginCoast(t,e)&&(t.coasting=!0,Object.defineProperty(this,"coastCount",{value:this.coastCount+1,enumerable:!0,configurable:!0}),this.onBeginCoast(t,e),this.didBeginCoast(t,e),1===this.coastCount&&this.startCoasting())}},e.prototype.willBeginCoast=function(t,e){var i=this.delegate;if(null!==i&&void 0!==i.willBeginCoast&&!1===i.willBeginCoast(t,e))return!1;return!0},e.prototype.onBeginCoast=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},e.prototype.didBeginCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didBeginCoast&&i.didBeginCoast(t,e)},e.prototype.endCoast=function(t,e){t.coasting&&(this.willEndCoast(t,e),t.coasting=!1,Object.defineProperty(this,"coastCount",{value:this.coastCount-1,enumerable:!0,configurable:!0}),this.onEndCoast(t,e),this.didEndCoast(t,e),0===this.coastCount&&this.stopCoasting(),this.clearInput(t))},e.prototype.willEndCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.willEndCoast&&i.willEndCoast(t,e)},e.prototype.onEndCoast=function(t,e){},e.prototype.didEndCoast=function(t,e){var i=this.delegate;null!==i&&void 0!==i.didEndCoast&&i.didEndCoast(t,e)},e.prototype.doCoast=function(t){if(0!==this.coastCount){this.willCoast(),this.integrate(t),this.onCoast();var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&0===o.ax&&0===o.ay&&this.endCoast(o,null)}this.didCoast(),0!==this.coastCount&&null!==this.view&&this.view.requireUpdate(Xi.NeedsAnimate)}},e.prototype.willCoast=function(){var t=this.delegate;null!==t&&void 0!==t.willCoast&&t.willCoast()},e.prototype.onCoast=function(){},e.prototype.didCoast=function(){var t=this.delegate;null!==t&&void 0!==t.didCoast&&t.didCoast()},e.prototype.integrate=function(t){var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&o.integrateVelocity(t)}},e.Hysteresis=67,e.Acceleration=.00175,e.VelocityMax=1.75,e}(No),Yo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(qo),Xo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(qo),Ko=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(qo),Zo="undefined"!=typeof PointerEvent?Yo:"undefined"!=typeof TouchEvent?Xo:Ko,_o=function(t){function e(e,i,o,n,r,s){var a=t.call(this,e,i,o,n,r,s)||this;return a.xCoord=void 0,a.yCoord=void 0,a.disableX=!1,a.disableY=!1,a}return w(e,t),e}(zo),Qo=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return Object.defineProperty(o,"needsRescale",{value:!1,enumerable:!0,configurable:!0}),o}return w(e,t),e.prototype.setDelegate=function(t){Object.defineProperty(this,"delegate",{value:t,enumerable:!0,configurable:!0})},e.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},e.prototype.createInput=function(t,e,i,o,n,r){return new _o(t,e,i,o,n,r)},e.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var s=this.inputs,a=s[t];return void 0===a&&(a=this.createInput(t,e,i,o,n,r),s[t]=a,Object.defineProperty(this,"inputCount",{value:this.inputCount+1,enumerable:!0,configurable:!0})),a},e.prototype.wheel=function(t){return void 0!==t&&this},Object.defineProperty(e.prototype,"distanceMin",{get:function(){var t=this.delegate;return null!==t&&void 0!==t.distanceMin?t.distanceMin():en.DistanceMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveAspectRatio",{get:function(){var t=this.delegate;return null===t||void 0===t.preserveAspectRatio||t.preserveAspectRatio()},enumerable:!1,configurable:!0}),e.prototype.xGestures=function(){var t=this.delegate;return null===t||void 0===t.xGestures||t.xGestures()},e.prototype.yGestures=function(){var t=this.delegate;return null===t||void 0===t.yGestures||t.yGestures()},e.prototype.xScale=function(t,e){var i=this.delegate;return void 0===t?null===i||void 0===i.xScale||void 0!==i.xGestures&&!i.xGestures()?null:i.xScale():(null!==i&&void 0!==i.xScale&&(void 0===i.xGestures||i.xGestures())&&i.xScale(t),this)},e.prototype.yScale=function(t,e){var i=this.delegate;return void 0===t?null===i||void 0===i.yScale||void 0!==i.yGestures&&!i.yGestures()?null:i.yScale():(null!==i&&void 0!==i.yScale&&(void 0===i.yGestures||i.yGestures())&&i.yScale(t),this)},e.prototype.clientToRangeX=function(t,e,i){var o=t-i.xMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.xMax+o-n[0]},e.prototype.clientToRangeY=function(t,e,i){var o=t-i.yMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.yMax+o-n[0]},e.prototype.unscaleX=function(t,e,i){return e.inverse(this.clientToRangeX(t,e,i))},e.prototype.unscaleY=function(t,e,i){return e.inverse(this.clientToRangeY(t,e,i))},e.prototype.viewWillAnimate=function(e){t.prototype.viewWillAnimate.call(this,e),this.needsRescale&&this.rescale()},e.prototype.onBeginPress=function(e,i){t.prototype.onBeginPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onMovePress=function(e,i){t.prototype.onMovePress.call(this,e,i),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onEndPress=function(e,i){t.prototype.onEndPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onCancelPress=function(e,i){t.prototype.onCancelPress.call(this,e,i),this.updateInputDomain(e),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.beginCoast=function(e,i){this.coastCount<2&&t.prototype.beginCoast.call(this,e,i)},e.prototype.onBeginCoast=function(e,i){t.prototype.onBeginCoast.call(this,e,i),this.updateInputDomain(e),this.conserveMomentum(e),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onEndCoast=function(e,i){t.prototype.onEndCoast.call(this,e,i),e.disableX=!1,e.disableY=!1,this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.onCoast=function(){t.prototype.onCoast.call(this),this.view.requireUpdate(Xi.NeedsAnimate),Object.defineProperty(this,"needsRescale",{value:!0,enumerable:!0,configurable:!0})},e.prototype.updateInputDomain=function(t,e,i,o){void 0===e&&(e=this.xScale()),null!==e&&(void 0===o&&(o=this.view.clientBounds),t.xCoord=this.unscaleX(t.x0,e,o)),void 0===i&&(i=this.yScale()),null!==i&&(void 0===o&&(o=this.view.clientBounds),t.yCoord=this.unscaleY(t.y0,i,o))},e.prototype.neutralizeX=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableX=!0,i.vx=0,i.ax=0)}},e.prototype.neutralizeY=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableY=!0,i.vy=0,i.ay=0)}},e.prototype.rescale=function(){var t,e,i=this.inputs;for(var o in i){var n=i[o];(n.pressing||n.coasting)&&(void 0===t?t=n:void 0===e?e=n:n.t0<t.t0?t=n:n.t0<e.t0&&(e=n))}if(void 0!==t){var r=this.view.clientBounds,s=this.xScale(),a=this.yScale();null!==s&&null!==a?void 0!==e&&this.preserveAspectRatio?this.rescaleRadial(s,a,t,e,r):this.rescaleXY(s,a,t,e,r):null!==s?this.rescaleX(s,t,e,r):null!==a&&this.rescaleY(a,t,e,r)}Object.defineProperty(this,"needsRescale",{value:!1,enumerable:!0,configurable:!0})},e.prototype.rescaleRadial=function(t,e,i,o,n){var r=i.xCoord,s=i.yCoord,a=this.clientToRangeX(i.x0,t,n),l=this.clientToRangeY(i.y0,e,n),u=this.clientToRangeX(i.x,t,n),h=this.clientToRangeY(i.y,e,n),p=i.vx,d=i.vy,c=i.ax,v=i.ay,f=o.xCoord,y=o.yCoord,g=this.clientToRangeX(o.x0,t,n),w=this.clientToRangeY(o.y0,e,n),m=this.clientToRangeX(o.x,t,n),b=this.clientToRangeY(o.y,e,n),S=o.vx,C=o.vy,P=o.ax,V=o.ay,F=g-a,T=w-l,D=Math.max(this.distanceMin,Math.sqrt(F*F+T*T)),M=F/D,O=T/D,x=u-a,A=h-l,R=m-g,k=b-w,I=x*M+A*O,L=R*M+k*O,j=x*O+A*-M,W=R*O+k*-M,E=(j*O+W*O)/2,N=(j*-M+W*-M)/2,G=a+I*M+E,U=l+I*O+N,B=g+L*M+E,H=w+L*O+N,z=p*M+d*O,q=S*M+C*O,Y=p*O+d*-M,X=S*O+C*-M,K=(Y*O+X*O)/2,Z=(Y*-M+X*-M)/2,_=z*M+K,Q=z*O+Z,J=q*M+K,$=q*O+Z,tt=Math.sqrt(_*_+Q*Q),et=Math.sqrt(J*J+$*$),it=0!==tt?_/tt:0,ot=0!==tt?Q/tt:0,nt=0!==et?J/et:0,rt=0!==et?$/et:0;_=it*tt,Q=ot*tt,J=nt*et,$=rt*et;var st=Math.sqrt(c*c+v*v),at=Math.sqrt(P*P+V*V),lt=st*-it,ut=st*-ot,ht=at*-nt,pt=at*-rt,dt=null,ct=t.solveDomain(r,G,f,B);ct.equals(t)||(dt=ct,this.xScale(dt));var vt=null,ft=e.solveDomain(s,U,y,H);if(ft.equals(e)||(vt=ft,this.yScale(vt)),(null!==dt||null!==vt)&&(null!==dt&&(i.x0=i.x,i.dx=0,i.vx=_,i.ax=lt,i.xCoord=this.unscaleX(i.x0,dt,n),o.x0=o.x,o.dx=0,o.vx=J,o.ax=ht,o.xCoord=this.unscaleX(o.x0,dt,n)),null!==vt&&(i.y0=i.y,i.dy=0,i.vy=Q,i.ay=ut,i.yCoord=this.unscaleY(i.y0,vt,n),o.y0=o.y,o.dy=0,o.vy=$,o.ay=pt,o.yCoord=this.unscaleY(o.y0,vt,n)),this.inputCount>2)){var yt=this.inputs;for(var gt in yt){var wt=yt[gt];wt!==i&&wt!==o&&(null!==dt&&(wt.x0=wt.x,wt.dx=0,wt.xCoord=this.unscaleX(wt.x0,dt,n)),null!==vt&&(wt.y0=wt.y,wt.dy=0,wt.yCoord=this.unscaleY(wt.y0,vt,n)))}}},e.prototype.rescaleXY=function(t,e,i,o,n){var r,s,a,l,u=i.xCoord,h=i.yCoord,p=this.clientToRangeX(i.x,t,n),d=this.clientToRangeY(i.y,e,n),c=i.disableX,v=i.disableY;if(void 0!==o){r=o.xCoord,s=o.yCoord,a=this.clientToRangeX(o.x,t,n),l=this.clientToRangeY(o.y,e,n),c=c||o.disableX,v=v||o.disableY;var f=Math.abs(a-p),y=Math.abs(l-d),g=this.distanceMin;if(f<g){var w=(g-f)/2;p<=a?(p-=w,a+=w):(p+=w,a-=w)}if(y<g){var m=(g-y)/2;d<=l?(d-=m,l+=m):(d+=m,l-=m)}}var b=null;c||(b=t.solveDomain(u,p,r,a)).equals(t)||this.xScale(b);var S=null;if(v||(S=e.solveDomain(h,d,s,l)).equals(e)||this.yScale(S),(null!==b||null!==S)&&this.preserveAspectRatio){var C=this.inputs;for(var P in C){var V=C[P];null!==b&&(V.x0=V.x,V.dx=0,V.xCoord=this.unscaleX(V.x0,b,n)),null!==S&&(V.y0=V.y,V.dy=0,V.yCoord=this.unscaleY(V.y0,S,n))}}},e.prototype.rescaleX=function(t,e,i,o){var n,r,s=e.xCoord,a=this.clientToRangeX(e.x,t,o),l=e.disableX;if(void 0!==i){r=i.xCoord,n=this.clientToRangeX(i.x,t,o),l=l||i.disableX;var u=Math.abs(n-a),h=this.distanceMin;if(u<h){var p=(h-u)/2;a<=n?(a-=p,n+=p):(a+=p,n-=p)}}if(!l){var d=t.solveDomain(s,a,r,n);d.equals(t)||this.xScale(d)}},e.prototype.rescaleY=function(t,e,i,o){var n,r,s=e.yCoord,a=this.clientToRangeY(e.y,t,o),l=e.disableY;if(void 0!==i){r=i.yCoord,n=this.clientToRangeY(i.y,t,o),l=l||i.disableY;var u=Math.abs(n-a),h=this.distanceMin;if(u<h){var p=(h-u)/2;a<=n?(a-=p,n+=p):(a+=p,n-=p)}}if(!l){var d=t.solveDomain(s,a,r,n);d.equals(t)||this.yScale(d)}},e.prototype.conserveMomentum=function(t){var e,i=this.inputs;for(var o in i){var n=i[o];n.coasting&&(void 0===e||n.t0<e.t0)&&(e=n)}if(void 0!==e){var r=this.xScale(),s=this.yScale();null!==r&&null!==s?this.distributeXYMomentum(t,e):null!==r?this.distributeXMomentum(t,e):null!==s&&this.distributeYMomentum(t,e)}},e.prototype.distributeXYMomentum=function(t,e){var i=t.vx,o=t.vy,n=e.vx,r=e.vy,s=Math.sqrt(i*i+o*o),a=Math.sqrt(n*n+r*r),l=0!==s?i/s:0,u=0!==s?o/s:0,h=0!==a?n/a:0,p=0!==a?r/a:0,d=(s+a)/2;t.vx=l*d,t.vy=u*d,e.vx=h*d,e.vy=p*d;var c=t.ax,v=t.ay,f=e.ax,y=e.ay,g=Math.sqrt(c*c+v*v),w=Math.sqrt(f*f+y*y),m=0!==g?c/g:0,b=0!==g?v/g:0,S=0!==w?f/w:0,C=0!==w?y/w:0,P=(g+w)/2;t.ax=m*P,t.ay=b*P,e.ax=S*P,e.ay=C*P},e.prototype.distributeXMomentum=function(t,e){var i=t.vx,o=e.vx,n=Math.abs(i),r=Math.abs(o),s=0!==n?i/n:0,a=0!==r?o/r:0,l=(n+r)/2;t.vx=s*l,e.vx=a*l;var u=t.ax,h=e.ax,p=Math.abs(u),d=Math.abs(h),c=0!==p?u/p:0,v=0!==d?h/d:0,f=(p+d)/2;t.ax=c*f,e.ax=v*f},e.prototype.distributeYMomentum=function(t,e){var i=t.vy,o=e.vy,n=Math.sqrt(i),r=Math.sqrt(o),s=0!==n?i/n:0,a=0!==r?o/r:0,l=(n+r)/2;t.vy=s*l,e.vy=a*l;var u=t.ay,h=e.ay,p=Math.sqrt(u),d=Math.sqrt(h),c=0!==p?u/p:0,v=0!==d?h/d:0,f=(p+d)/2;t.ay=c*f,e.ay=v*f},e.prototype.integrate=function(t){var e,i,o=this.inputs;for(var n in o){var r=o[n];if(r.coasting)if(void 0===e)e=r;else if(void 0===i){var s=(i=r).x-e.x,a=i.y-e.y,l=Math.sqrt(s*s+a*a);e.integrateVelocity(t),i.integrateVelocity(t);var u=i.x-e.x,h=i.y-e.y,p=Math.sqrt(u*u+h*h)/l;e.vx*=p,e.vy*=p,e.ax*=p,e.ay*=p,i.vx*=p,i.vy*=p,i.ax*=p,i.ay*=p}else r.integrateVelocity(t)}void 0!==e&&void 0===i&&e.integrateVelocity(t)},e.prototype.zoom=function(t,e,i,o){if(0!==i){var n=null!==o?o.timeStamp:performance.now(),r=this.acceleration,s=r*Math.cos(Math.PI/4),a=r*Math.sin(Math.PI/4),l=this.velocityMax,u=.5*l*Math.cos(Math.PI/4),h=.5*l*Math.sin(Math.PI/4),p=4*u*u/s,d=4*h*h/a,c=this.inputs,v=c.zoom0,f=c.zoom1;if(void 0!==v&&void 0!==f){var y=n-v.t;if(y>0){var g=Math.abs(f.x-v.x)/2,w=Math.abs(f.y-v.y)/2,m=(i=Math.min(Math.max(-l*y,i),l*y))*g*Math.cos(Math.PI/4)/p,b=i*w*Math.sin(Math.PI/4)/d;s=s*g/p,a=a*w/d,v.x+=m,v.y+=b,v.t=n,v.dx=m,v.dy=b,v.dt=y,v.vx=m/y,v.vy=b/y,v.ax=v.vx<0?s:v.vx>0?-s:0,v.ay=v.vy<0?a:v.vy>0?-a:0,f.x-=m,f.y-=b,f.t=n,v.dx=-m,v.dy=-b,v.dt=y,f.vx=-m/y,f.vy=-b/y,f.ax=f.vx<0?s:f.vx>0?-s:0,f.ay=f.vy<0?a:f.vy>0?-a:0}}else this.interrupt(o),i<0?((v=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=-u,v.vy=-h,v.ax=s,v.ay=a,(f=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=u,f.vy=h,f.ax=-s,f.ay=-a):((v=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=u,v.vy=h,v.ax=-s,v.ay=-a,(f=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=-u,f.vy=-h,f.ax=s,f.ay=a),c.zoom0=v,c.zoom1=f,Object.defineProperty(this,"inputCount",{value:this.inputCount+2,enumerable:!0,configurable:!0}),this.beginCoast(v,o),this.beginCoast(f,o)}},e.DistanceMin=10,e}(qo),Jo=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o.wheelZoom=!0,o.initView(e),o}return w(e,t),e.prototype.wheel=function(t){return void 0===t?this.wheelZoom:(this.wheelZoom!==t&&(this.wheelZoom=t,null!==this.view&&(t?this.attachWheelEvents(this.view):this.detachWheelEvents(this.view))),this)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.wheelZoom&&this.attachWheelEvents(e)},e.prototype.detachEvents=function(e){t.prototype.detachEvents.call(this,e),this.detachWheelEvents(e)},e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.attachWheelEvents=function(t){t.on("wheel",this.onWheel)},e.prototype.detachWheelEvents=function(t){t.off("wheel",this.onWheel)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);i.coasting||this.updateInput(i,t),i.hovering||this.beginHover(i,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var i=this.getOrCreateInput(t.pointerId,e.inputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(i,t),i.pressing||this.beginPress(i,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(i,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e.inputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(Qo),$o=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initView(e),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(Qo),tn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o.wheelZoom=!0,o.initView(e),o}return w(e,t),e.prototype.wheel=function(t){return void 0===t?this.wheelZoom:(this.wheelZoom!==t&&(this.wheelZoom=t,null!==this.view&&(t?this.attachWheelEvents(this.view):this.detachWheelEvents(this.view))),this)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.wheelZoom&&this.attachWheelEvents(e)},e.prototype.detachEvents=function(e){t.prototype.detachEvents.call(this,e),this.detachWheelEvents(e)},e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.attachWheelEvents=function(t){t.on("wheel",this.onWheel)},e.prototype.detachWheelEvents=function(t){t.off("wheel",this.onWheel)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);e.coasting||this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e}(Qo),en="undefined"!=typeof PointerEvent?Jo:"undefined"!=typeof TouchEvent?$o:tn,on={getStyleAnimatorConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"styleAnimatorConstructors")){var i=e.styleAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateStyleAnimator:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"styleAnimatorConstructors")||(o.styleAnimatorConstructors={}),o.styleAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getStyleAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setStyleAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})}},nn=function(t,e){return this instanceof nn?rn.call(this,t,e):(i=t,on.decorateStyleAnimator.bind(on,nn.define(i)));var i};function rn(t,e){var i=bo.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"owner",{value:t,enumerable:!0}),Object.defineProperty(i,"priority",{value:void 0,enumerable:!0,configurable:!0}),i}w(nn,bo),Object.defineProperty(nn.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"propertyValue",{get:function(){var t,e=this.owner.getStyle(this.propertyNames);if("undefined"!=typeof CSSStyleValue&&e instanceof CSSStyleValue){try{t=this.fromCssValue(e)}catch(t){}void 0===t&&(e=e.toString())}if("string"==typeof e&&""!==e)try{t=this.parse(e)}catch(t){}return t},enumerable:!0,configurable:!0}),nn.prototype.setPriority=function(t){Object.defineProperty(this,"priority",{value:t,enumerable:!0,configurable:!0});var e=this.value;if(this.isDefined(e)){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,e,t);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],e,t)}},Object.defineProperty(nn.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.propertyValue;void 0!==e&&(t=e,this.setPrecedence(Xi.Extrinsic))}return t},enumerable:!0,configurable:!0}),nn.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},nn.prototype.onSetValue=function(t,e){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,t,this.priority);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],t,this.priority);var r=this.updateFlags;void 0!==r&&this.owner.requireUpdate(r)},nn.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},nn.prototype.setOwnState=function(t,e){t=this.fromAny(t),bo.prototype.setOwnState.call(this,t,e)},nn.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},nn.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(Xi.NeedsChange)},nn.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(n,i))}},nn.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},nn.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},nn.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},nn.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},nn.prototype.parse=function(t){throw new Error},nn.prototype.fromCssValue=function(t){throw new Error},nn.prototype.fromAny=function(t){return t},nn.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},nn.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},nn.prototype.willMount=function(){},nn.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},nn.prototype.didMount=function(){},nn.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},nn.prototype.willUnmount=function(){},nn.prototype.onUnmount=function(){this.stopAnimating()},nn.prototype.didUnmount=function(){},nn.prototype.toString=function(){return this.name},nn.getClass=function(t){return t===String?ln:t===Number?un:t===r.Length?pn:t===St?cn:t===ft?vn:t===Ut?fn:t===r.Transform?yn:null},nn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.precedence,s=t.initState;delete t.extends,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=nn.getClass(t.type)),null===i&&(i=nn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e,i){return 0===arguments.length?l.value:(2===arguments.length?l.setState(t,e):l.setState(t,e,i),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==o&&(a=l.fromAny(o)),void 0!==a&&(Object.defineProperty(l,"ownValue",{value:a,enumerable:!0,configurable:!0}),Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0})),void 0!==n&&Object.defineProperty(l,"ownLook",{value:n,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a};var sn=function(t,e){return this instanceof sn?an.call(this,t,e):(i=t,on.decorateStyleAnimator.bind(on,sn.define(i)));var i};function an(t,e){var i=nn.call(this,t,e)||this;return Object.defineProperty(i,"id",{value:u.ConstraintKey.nextId(),enumerable:!0}),Object.defineProperty(i,"strength",{value:u.ConstraintStrength.Strong,enumerable:!0,configurable:!0}),Object.defineProperty(i,"conditionCount",{value:0,enumerable:!0,configurable:!0}),i}w(sn,nn),sn.prototype.isExternal=function(){return!0},sn.prototype.isDummy=function(){return!1},sn.prototype.isInvalid=function(){return!1},sn.prototype.isConstant=function(){return!1},Object.defineProperty(sn.prototype,"computedValue",{get:function(){},enumerable:!0,configurable:!0}),sn.prototype.onSetValue=function(t,e){nn.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},sn.prototype.evaluateConstraintVariable=function(){if(!this.isConstrained()&&this.isConstraining()&&!this.isDefined(this.ownValue)){var t=this.computedValue;this.isDefined(t)&&this.owner.setConstraintVariable(this,this.toNumber(t))}},sn.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&bo.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(sn.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"terms",{get:function(){var t=new u.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),sn.prototype.plus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.product(2,this):u.ConstraintExpression.sum(this,t)},sn.prototype.negative=function(){return u.ConstraintExpression.product(-1,this)},sn.prototype.minus=function(t){return this===(t=u.ConstraintExpression.fromAny(t))?u.ConstraintExpression.zero:u.ConstraintExpression.sum(this,t.negative())},sn.prototype.times=function(t){return u.ConstraintExpression.product(t,this)},sn.prototype.divide=function(t){return u.ConstraintExpression.product(1/t,this)},sn.prototype.isConstrained=function(){return 0!=(this.animatorFlags&bo.ConstrainedFlag)},sn.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&bo.ConstrainedFlag)?(this.setAnimatorFlags(e|bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&bo.ConstrainedFlag)||(this.setAnimatorFlags(e&~bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},sn.prototype.addConstraintCondition=function(t,e){var i=this.conditionCount,o=i+1;Object.defineProperty(this,"conditionCount",{value:o,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},sn.prototype.removeConstraintCondition=function(t,e){var i=this.conditionCount-1;Object.defineProperty(this,"conditionCount",{value:i,enumerable:!0,configurable:!0}),!this.isConstrained()&&0===i&&this.isMounted()&&this.stopConstraining()},sn.prototype.isConstraining=function(){return 0!=(this.animatorFlags&bo.ConstrainingFlag)},sn.prototype.startConstraining=function(){0==(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|bo.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},sn.prototype.willStartConstraining=function(){},sn.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},sn.prototype.didStartConstraining=function(){},sn.prototype.stopConstraining=function(){0!=(this.animatorFlags&bo.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~bo.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},sn.prototype.willStopConstraining=function(){},sn.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},sn.prototype.didStopConstraining=function(){},sn.prototype.updateConstraintVariable=function(){var t=this.ownValue;this.isDefined(t)||(t=this.computedValue),this.owner.setConstraintVariable(this,this.toNumber(t))},sn.prototype.onMount=function(){nn.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},sn.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),nn.prototype.onUnmount.call(this)},sn.getClass=function(t){return t===Number?hn:t===r.Length?dn:null},sn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=void 0!==t.strength?u.ConstraintStrength.fromAny(t.strength):void 0,s=t.constrain,a=t.precedence,l=t.initState;delete t.extends,delete t.state,delete t.look,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=sn.getClass(t.type)),null===i&&(i=sn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var h=function(t,e){var u,h=function(t,e,i){return 0===arguments.length?h.value:(2===arguments.length?h.setState(t,e):h.setState(t,e,i),h.owner)};return Object.setPrototypeOf(h,this),h=i.call(h,t,e)||h,void 0!==l?u=h.fromAny(l()):void 0!==o&&(u=h.fromAny(o)),void 0!==u&&(Object.defineProperty(h,"ownValue",{value:u,enumerable:!0,configurable:!0}),Object.defineProperty(h,"ownState",{value:u,enumerable:!0,configurable:!0})),void 0!==n&&Object.defineProperty(h,"ownLook",{value:n,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(h,"strength",{value:r,enumerable:!0,configurable:!0}),void 0!==a&&Object.defineProperty(h,"precedence",{value:a,enumerable:!0,configurable:!0}),!0===s&&h.constrain(),h},p=t;return Object.setPrototypeOf(h,i),(h.prototype=p).constructor=h,Object.setPrototypeOf(h.prototype,i.prototype),h};var ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromCssValue=function(t){return t.toString()},e.prototype.fromAny=function(t){return t},e}(nn),un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(nn),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(sn),pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(nn),dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.toNumber=function(t){try{return t.pxValue()}catch(t){return 0}},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(sn),cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return St.parse(t)},e.prototype.fromAny=function(t){try{return St.fromAny(t)}catch(t){return null}},e}(nn),vn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return gt.parse(t).family},e.prototype.fromAny=function(t){return gt.family(t).family},e}(nn),fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return Ut.parse(t)},e.prototype.fromAny=function(t){return Ut.fromAny(t)},e}(nn),yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromCssValue=function(t){return r.Transform.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e}(nn),gn={};function wn(t,i,o){if(void 0===t){var n=this.borderTopColor.value,r=this.borderRightColor.value,s=this.borderBottomColor.value,a=this.borderLeftColor.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,a)?n:[n,r,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopColor.setState(t[0],i,o),t.length>=2&&this.borderRightColor.setState(t[1],i,o),t.length>=3&&this.borderBottomColor.setState(t[2],i,o),t.length>=4&&this.borderLeftColor.setState(t[3],i,o)):(this.borderTopColor.setState(t,i,o),this.borderRightColor.setState(t,i,o),this.borderBottomColor.setState(t,i,o),this.borderLeftColor.setState(t,i,o)),this}function mn(t,i,o){if(void 0===t){var n=this.borderTopLeftRadius.value,r=this.borderTopRightRadius.value,s=this.borderBottomRightRadius.value,a=this.borderBottomLeftRadius.value;return e.Equals(n,r)&&e.Equals(r,s)&&e.Equals(s,a)?n:[n,r,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopLeftRadius.setState(t[0],i,o),t.length>=2&&this.borderTopRightRadius.setState(t[1],i,o),t.length>=3&&this.borderBottomRightRadius.setState(t[2],i,o),t.length>=4&&this.borderBottomLeftRadius.setState(t[3],i,o)):(this.borderTopLeftRadius.setState(t,i,o),this.borderTopRightRadius.setState(t,i,o),this.borderBottomRightRadius.setState(t,i,o),this.borderBottomLeftRadius.setState(t,i,o)),this}function bn(t,e,i){if(void 0===t){var o=this.borderTopStyle.value,n=this.borderRightStyle.value,r=this.borderBottomStyle.value,s=this.borderLeftStyle.value;return o===n&&n===r&&r===s?o:[o,n,r,s]}return Array.isArray(t)?(t.length>=1&&this.borderTopStyle.setState(t[0],e,i),t.length>=2&&this.borderRightStyle.setState(t[1],e,i),t.length>=3&&this.borderBottomStyle.setState(t[2],e,i),t.length>=4&&this.borderLeftStyle.setState(t[3],e,i)):(this.borderTopStyle.setState(t,e,i),this.borderRightStyle.setState(t,e,i),this.borderBottomStyle.setState(t,e,i),this.borderLeftStyle.setState(t,e,i)),this}function Sn(t,i,o){if(void 0===t){var n=this.borderTopWidth.value,r=this.borderRightWidth.value,s=this.borderBottomWidth.value,a=this.borderLeftWidth.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,a)?n:[n,r,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopWidth.setState(t[0],i,o),t.length>=2&&this.borderRightWidth.setState(t[1],i,o),t.length>=3&&this.borderBottomWidth.setState(t[2],i,o),t.length>=4&&this.borderLeftWidth.setState(t[3],i,o)):(this.borderTopWidth.setState(t,i,o),this.borderRightWidth.setState(t,i,o),this.borderBottomWidth.setState(t,i,o),this.borderLeftWidth.setState(t,i,o)),this}function Cn(t,e,i){if(void 0===t){var o=this.fontStyle.value,n=this.fontVariant.value,r=this.fontWeight.value,s=this.fontStretch.value,a=this.fontSize.value,l=this.lineHeight.value,u=this.fontFamily.value;return void 0!==u?gt.create(o,n,r,s,a,l,u):null}return null!==t?(void 0!==(t=gt.fromAny(t)).style&&this.fontStyle.setState(t.style,e,i),void 0!==t.variant&&this.fontVariant.setState(t.variant,e,i),void 0!==t.weight&&this.fontWeight.setState(t.weight,e,i),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e,i),void 0!==t.size&&this.fontSize.setState(t.size,e,i),void 0!==t.height&&this.lineHeight.setState(t.height,e,i),this.fontFamily.setState(t.family,e,i)):(this.fontStyle.setState(void 0,e,i),this.fontVariant.setState(void 0,e,i),this.fontWeight.setState(void 0,e,i),this.fontStretch.setState(void 0,e,i),this.fontSize.setState(null,e,i),this.lineHeight.setState(null,e,i),this.fontFamily.setState(void 0,e,i)),this}function Pn(t,i,o){if(void 0===t){var n=this.marginTop.value,r=this.marginRight.value,s=this.marginBottom.value,a=this.marginLeft.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,a)?n:[n,r,s,a]}return Array.isArray(t)?(t.length>=1&&this.marginTop.setState(t[0],i,o),t.length>=2&&this.marginRight.setState(t[1],i,o),t.length>=3&&this.marginBottom.setState(t[2],i,o),t.length>=4&&this.marginLeft.setState(t[3],i,o)):(this.marginTop.setState(t,i,o),this.marginRight.setState(t,i,o),this.marginBottom.setState(t,i,o),this.marginLeft.setState(t,i,o)),this}function Vn(t,e,i){if(void 0===t){var o=this.overflowX.value,n=this.overflowY.value;return o===n?o:[o,n]}return Array.isArray(t)?(t.length>=1&&this.overflowX.setState(t[0],e,i),t.length>=2&&this.overflowY.setState(t[1],e,i)):(this.overflowX.setState(t,e,i),this.overflowY.setState(t,e,i)),this}function Fn(t,e,i){if(void 0===t){var o=this.overscrollBehaviorX.value,n=this.overscrollBehaviorY.value;return o===n?o:[o,n]}return Array.isArray(t)?(t.length>=1&&this.overscrollBehaviorX.setState(t[0],e,i),t.length>=2&&this.overscrollBehaviorY.setState(t[1],e,i)):(this.overscrollBehaviorX.setState(t,e,i),this.overscrollBehaviorY.setState(t,e,i)),this}function Tn(t,i,o){if(void 0===t){var n=this.paddingTop.value,r=this.paddingRight.value,s=this.paddingBottom.value,a=this.paddingLeft.value;return e.Equals(n,r)&&e.Equals(r,s)&&e.Equals(s,a)?n:[n,r,s,a]}return Array.isArray(t)?(t.length>=1&&this.paddingTop.setState(t[0],i,o),t.length>=2&&this.paddingRight.setState(t[1],i,o),t.length>=3&&this.paddingBottom.setState(t[2],i,o),t.length>=4&&this.paddingLeft.setState(t[3],i,o)):(this.paddingTop.setState(t,i,o),this.paddingRight.setState(t,i,o),this.paddingBottom.setState(t,i,o),this.paddingLeft.setState(t,i,o)),this}gn.init=function(t,e){void 0!==e.alignContent&&t.alignContent(e.alignContent),void 0!==e.alignItems&&t.alignItems(e.alignItems),void 0!==e.alignSelf&&t.alignSelf(e.alignSelf),void 0!==e.appearance&&t.appearance(e.appearance),void 0!==e.backdropFilter&&t.backdropFilter(e.backdropFilter),void 0!==e.backgroundClip&&t.backgroundClip(e.backgroundClip),void 0!==e.backgroundColor&&t.backgroundColor(e.backgroundColor),void 0!==e.backgroundImage&&t.backgroundImage(e.backgroundImage),void 0!==e.borderCollapse&&t.borderCollapse(e.borderCollapse),void 0!==e.borderColor&&t.borderColor(e.borderColor),void 0!==e.borderTopColor&&t.borderTopColor(e.borderTopColor),void 0!==e.borderRightColor&&t.borderRightColor(e.borderRightColor),void 0!==e.borderBottomColor&&t.borderBottomColor(e.borderBottomColor),void 0!==e.borderLeftColor&&t.borderLeftColor(e.borderLeftColor),void 0!==e.borderRadius&&t.borderRadius(e.borderRadius),void 0!==e.borderTopLeftRadius&&t.borderTopLeftRadius(e.borderTopLeftRadius),void 0!==e.borderTopRightRadius&&t.borderTopRightRadius(e.borderTopRightRadius),void 0!==e.borderBottomRightRadius&&t.borderBottomRightRadius(e.borderBottomRightRadius),void 0!==e.borderBottomLeftRadius&&t.borderBottomLeftRadius(e.borderBottomLeftRadius),void 0!==e.borderSpacing&&t.borderSpacing(e.borderSpacing),void 0!==e.borderStyle&&t.borderStyle(e.borderStyle),void 0!==e.borderTopStyle&&t.borderTopStyle(e.borderTopStyle),void 0!==e.borderRightStyle&&t.borderRightStyle(e.borderRightStyle),void 0!==e.borderBottomStyle&&t.borderBottomStyle(e.borderBottomStyle),void 0!==e.borderLeftStyle&&t.borderLeftStyle(e.borderLeftStyle),void 0!==e.borderWidth&&t.borderWidth(e.borderWidth),void 0!==e.borderTopWidth&&t.borderTopWidth(e.borderTopWidth),void 0!==e.borderRightWidth&&t.borderRightWidth(e.borderRightWidth),void 0!==e.borderBottomWidth&&t.borderBottomWidth(e.borderBottomWidth),void 0!==e.borderLeftWidth&&t.borderLeftWidth(e.borderLeftWidth),void 0!==e.bottom&&t.bottom(e.bottom),void 0!==e.boxShadow&&t.boxShadow(e.boxShadow),void 0!==e.boxSizing&&t.boxSizing(e.boxSizing),void 0!==e.color&&t.color(e.color),void 0!==e.cursor&&t.cursor(e.cursor),void 0!==e.display&&t.display(e.display),void 0!==e.filter&&t.filter(e.filter),void 0!==e.flexBasis&&t.flexBasis(e.flexBasis),void 0!==e.flexDirection&&t.flexDirection(e.flexDirection),void 0!==e.flexGrow&&t.flexGrow(e.flexGrow),void 0!==e.flexShrink&&t.flexShrink(e.flexShrink),void 0!==e.flexWrap&&t.flexWrap(e.flexWrap),void 0!==e.font&&t.font(e.font),void 0!==e.fontFamily&&t.fontFamily(e.fontFamily),void 0!==e.fontSize&&t.fontSize(e.fontSize),void 0!==e.fontStretch&&t.fontStretch(e.fontStretch),void 0!==e.fontStyle&&t.fontStyle(e.fontStyle),void 0!==e.fontVariant&&t.fontVariant(e.fontVariant),void 0!==e.fontWeight&&t.fontWeight(e.fontWeight),void 0!==e.height&&t.height(e.height),void 0!==e.justifyContent&&t.justifyContent(e.justifyContent),void 0!==e.left&&t.left(e.left),void 0!==e.lineHeight&&t.lineHeight(e.lineHeight),void 0!==e.margin&&t.margin(e.margin),void 0!==e.marginTop&&t.marginTop(e.marginTop),void 0!==e.marginRight&&t.marginRight(e.marginRight),void 0!==e.marginBottom&&t.marginBottom(e.marginBottom),void 0!==e.marginLeft&&t.marginLeft(e.marginLeft),void 0!==e.maxHeight&&t.maxHeight(e.maxHeight),void 0!==e.maxWidth&&t.maxWidth(e.maxWidth),void 0!==e.minHeight&&t.minHeight(e.minHeight),void 0!==e.minWidth&&t.minWidth(e.minWidth),void 0!==e.opacity&&t.opacity(e.opacity),void 0!==e.order&&t.order(e.order),void 0!==e.outlineColor&&t.outlineColor(e.outlineColor),void 0!==e.outlineStyle&&t.outlineStyle(e.outlineStyle),void 0!==e.outlineWidth&&t.outlineWidth(e.outlineWidth),void 0!==e.overflow&&t.overflow(e.overflow),void 0!==e.overflowX&&t.overflowX(e.overflowX),void 0!==e.overflowY&&t.overflowY(e.overflowY),void 0!==e.overflowScrolling&&t.overflowScrolling(e.overflowScrolling),void 0!==e.overscrollBehavior&&t.overscrollBehavior(e.overscrollBehavior),void 0!==e.overscrollBehaviorX&&t.overscrollBehaviorX(e.overscrollBehaviorX),void 0!==e.overscrollBehaviorY&&t.overscrollBehaviorY(e.overscrollBehaviorY),void 0!==e.padding&&t.padding(e.padding),void 0!==e.paddingTop&&t.paddingTop(e.paddingTop),void 0!==e.paddingRight&&t.paddingRight(e.paddingRight),void 0!==e.paddingBottom&&t.paddingBottom(e.paddingBottom),void 0!==e.paddingLeft&&t.paddingLeft(e.paddingLeft),void 0!==e.pointerEvents&&t.pointerEvents(e.pointerEvents),void 0!==e.position&&t.position(e.position),void 0!==e.right&&t.right(e.right),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textDecorationColor&&t.textDecorationColor(e.textDecorationColor),void 0!==e.textDecorationLine&&t.textDecorationLine(e.textDecorationLine),void 0!==e.textDecorationStyle&&t.textDecorationStyle(e.textDecorationStyle),void 0!==e.textOverflow&&t.textOverflow(e.textOverflow),void 0!==e.textTransform&&t.textTransform(e.textTransform),void 0!==e.top&&t.top(e.top),void 0!==e.touchAction&&t.touchAction(e.touchAction),void 0!==e.transform&&t.transform(e.transform),void 0!==e.userSelect&&t.userSelect(e.userSelect),void 0!==e.verticalAlign&&t.verticalAlign(e.verticalAlign),void 0!==e.visibility&&t.visibility(e.visibility),void 0!==e.whiteSpace&&t.whiteSpace(e.whiteSpace),void 0!==e.width&&t.width(e.width),void 0!==e.zIndex&&t.zIndex(e.zIndex)},gn.define=function(t){nn({propertyNames:"align-content",type:String})(t,"alignContent"),nn({propertyNames:"align-items",type:String})(t,"alignItems"),nn({propertyNames:"align-self",type:String})(t,"alignSelf"),nn({propertyNames:["appearance","-webkit-appearance"],type:String})(t,"appearance"),nn({propertyNames:["backdrop-filter","-webkit-backdrop-filter"],type:String})(t,"backdropFilter"),nn({propertyNames:["background-clip","-webkit-background-clip"],type:String})(t,"backgroundClip"),nn({propertyNames:"background-color",type:St,state:null})(t,"backgroundColor"),nn({propertyNames:"background-image",type:St,state:null,parse:function(t){try{return Wt.parse(t)}catch(e){return t}},fromAny:function(t){if("string"!=typeof t)return Wt.fromAny(t);try{return Wt.parse(t)}catch(e){return t}}})(t,"backgroundImage"),nn({propertyNames:"border-collapse",type:String})(t,"borderCollapse"),t.borderColor=wn,nn({propertyNames:"border-top-color",type:St,state:null})(t,"borderTopColor"),nn({propertyNames:"border-right-color",type:St,state:null})(t,"borderRightColor"),nn({propertyNames:"border-bottom-color",type:St,state:null})(t,"borderBottomColor"),nn({propertyNames:"border-left-color",type:St,state:null})(t,"borderLeftColor"),t.borderRadius=mn,nn({propertyNames:"border-top-left-radius",type:r.Length,state:null})(t,"borderTopLeftRadius"),nn({propertyNames:"border-top-right-radius",type:r.Length,state:null})(t,"borderTopRightRadius"),nn({propertyNames:"border-bottom-right-radius",type:r.Length,state:null})(t,"borderBottomRightRadius"),nn({propertyNames:"border-bottom-left-radius",type:r.Length,state:null})(t,"borderBottomLeftRadius"),nn({propertyNames:"border-spacing",type:String})(t,"borderSpacing"),t.borderStyle=bn,nn({propertyNames:"border-top-style",type:String})(t,"borderTopStyle"),nn({propertyNames:"border-right-style",type:String})(t,"borderRightStyle"),nn({propertyNames:"border-bottom-style",type:String})(t,"borderBottomStyle"),nn({propertyNames:"border-left-style",type:String})(t,"borderLeftStyle"),t.borderWidth=Sn,nn({propertyNames:"border-top-width",type:r.Length,state:null})(t,"borderTopWidth"),nn({propertyNames:"border-right-width",type:r.Length,state:null})(t,"borderRightWidth"),nn({propertyNames:"border-bottom-width",type:r.Length,state:null})(t,"borderBottomWidth"),nn({propertyNames:"border-left-width",type:r.Length,state:null})(t,"borderLeftWidth"),sn({propertyNames:"bottom",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.bottom-i.bottom)}}return null}})(t,"bottom"),nn({propertyNames:"box-shadow",type:Ut,state:null})(t,"boxShadow"),nn({propertyNames:"box-sizing",type:String})(t,"boxSizing"),nn({propertyNames:"color",type:St,state:null})(t,"color"),nn({propertyNames:"cursor",type:String})(t,"cursor"),nn({propertyNames:"display",type:String})(t,"display"),nn({propertyNames:"filter",type:String})(t,"filter"),nn({propertyNames:"flex-basis",type:r.Length,state:null})(t,"flexBasis"),nn({propertyNames:"flex-direction",type:String})(t,"flexDirection"),nn({propertyNames:"flex-grow",type:Number})(t,"flexGrow"),nn({propertyNames:"flex-shrink",type:Number})(t,"flexShrink"),nn({propertyNames:"flex-wrap",type:String})(t,"flexWrap"),t.font=Cn,nn({propertyNames:"font-family",type:ft})(t,"fontFamily"),nn({propertyNames:"font-size",type:r.Length,state:null})(t,"fontSize"),nn({propertyNames:"font-stretch",type:String})(t,"fontStretch"),nn({propertyNames:"font-style",type:String})(t,"fontStyle"),nn({propertyNames:"font-variant",type:String})(t,"fontVariant"),nn({propertyNames:"font-weight",type:String})(t,"fontWeight"),sn({propertyNames:"height",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetHeight):null}})(t,"height"),nn({propertyNames:"justify-content",type:String})(t,"justifyContent"),sn({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null}})(t,"left"),nn({propertyNames:"line-height",type:r.Length,state:null})(t,"lineHeight"),t.margin=Pn,sn({propertyNames:"margin-top",type:r.Length,state:null})(t,"marginTop"),sn({propertyNames:"margin-right",type:r.Length,state:null})(t,"marginRight"),sn({propertyNames:"margin-bottom",type:r.Length,state:null})(t,"marginBottom"),sn({propertyNames:"margin-left",type:r.Length,state:null})(t,"marginLeft"),nn({propertyNames:"max-height",type:r.Length,state:null})(t,"maxHeight"),nn({propertyNames:"max-width",type:r.Length,state:null})(t,"maxWidth"),nn({propertyNames:"min-height",type:r.Length,state:null})(t,"minHeight"),nn({propertyNames:"min-width",type:r.Length,state:null})(t,"minWidth"),nn({propertyNames:"opacity",type:Number})(t,"opacity"),nn({propertyNames:"order",type:Number})(t,"order"),nn({propertyNames:"outline-color",type:St,state:null})(t,"outlineColor"),nn({propertyNames:"outline-style",type:String})(t,"outlineStyle"),nn({propertyNames:"outline-width",type:r.Length,state:null})(t,"outlineWidth"),t.overflow=Vn,nn({propertyNames:"overflow-x",type:String})(t,"overflowX"),nn({propertyNames:"overflow-y",type:String})(t,"overflowY"),nn({propertyNames:"-webkit-overflow-scrolling",type:String})(t,"overflowScrolling"),t.overscrollBehavior=Fn,nn({propertyNames:"overscroll-behavior-x",type:String})(t,"overscrollBehaviorX"),nn({propertyNames:"overscroll-behavior-y",type:String})(t,"overscrollBehaviorY"),t.padding=Tn,sn({propertyNames:"padding-top",type:r.Length,state:null})(t,"paddingTop"),sn({propertyNames:"padding-right",type:r.Length,state:null})(t,"paddingRight"),sn({propertyNames:"padding-bottom",type:r.Length,state:null})(t,"paddingBottom"),sn({propertyNames:"padding-left",type:r.Length,state:null})(t,"paddingLeft"),nn({propertyNames:"pointer-events",type:String})(t,"pointerEvents"),nn({propertyNames:"position",type:String})(t,"position"),sn({propertyNames:"right",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.right-i.right)}}return null}})(t,"right"),nn({propertyNames:"text-align",type:String})(t,"textAlign"),nn({propertyNames:"text-decoration-color",type:St,state:null})(t,"textDecorationColor"),nn({propertyNames:"text-decoration-line",type:String})(t,"textDecorationLine"),nn({propertyNames:"text-decoration-style",type:String})(t,"textDecorationStyle"),nn({propertyNames:"text-overflow",type:String})(t,"textOverflow"),nn({propertyNames:"text-transform",type:String})(t,"textTransform"),sn({propertyNames:"top",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetTop):null}})(t,"top"),nn({propertyNames:"touch-action",type:String})(t,"touchAction"),nn({propertyNames:"transform",type:r.Transform,state:null})(t,"transform"),nn({propertyNames:["user-select","-webkit-user-select","-moz-user-select","-ms-user-select"],type:String})(t,"userSelect"),nn({propertyNames:"vertical-align",type:String})(t,"verticalAlign"),nn({propertyNames:"visibility",type:String})(t,"visibility"),nn({propertyNames:"white-space",type:String})(t,"whiteSpace"),sn({propertyNames:"width",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetWidth):null}})(t,"width"),nn({propertyNames:"z-index",type:Number})(t,"zIndex")};var Dn={getCssRuleConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"cssRuleConstructors")){var i=e.cssRuleConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateCssRule:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"cssRuleConstructors")||(o.cssRuleConstructors={}),o.cssRuleConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getCssRule(i.toString());return null===e&&(e=new t(this,i.toString()),this.setCssRule(i.toString(),e)),e},configurable:!0,enumerable:!0})}},Mn=function(t,e){return this instanceof Mn?On.call(this,t,e):(i=t,Dn.decorateCssRule.bind(Dn,Mn.define(i)));var i};function On(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),this}w(Mn,Object),Mn.prototype.onAnimate=function(t){this.updateAnimations(t)},Mn.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},Mn.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},Mn.prototype.trackDidStartAnimating=function(t){},Mn.prototype.trackWillStopAnimating=function(t){},Mn.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},Mn.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},Mn.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},Mn.prototype.addConstraint=function(t){this.owner.addConstraint(t)},Mn.prototype.removeConstraint=function(t){this.owner.removeConstraint(t)},Mn.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},Mn.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},Mn.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},Mn.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},Mn.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},Mn.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},Mn.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},Mn.prototype.applyTheme=function(t,e,i){},Mn.prototype.mount=function(){},Mn.prototype.unmount=function(){},Mn.prototype.createRule=function(t){if(void 0!==t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSRule)return i;throw new TypeError(""+i)}throw new Error("undefined css rule")},Mn.define=function(t){var e=t.type;if(delete t.type,void 0===e||"style"===e)return xn.define(t);if("media"===e)return Rn.define(t);var i=t.extends,o=t.css;delete t.extends,delete t.css,void 0===i&&(i=Mn);var n=function(t,e){var n,r=i.call(this,t,e)||this;void 0!==o?n=o:void 0!==r.initCss&&(n=r.initCss());var s=r.createRule(n);return void 0!==r.initRule&&(s=r.initRule(s)),Object.defineProperty(r,"rule",{value:s,enumerable:!0,configurable:!0}),r},r=t;return Object.setPrototypeOf(n,i),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,i.prototype),"function"==typeof o&&(r.initCss=o,o=void 0),n};var xn=function(t,e){return this instanceof xn?An.call(this,t,e):(i=t,Dn.decorateCssRule.bind(Dn,xn.define(i)));var i};function An(t,e){var i=Mn.call(this,t,e)||this;return Object.defineProperty(i,"styleAnimators",{value:{},enumerable:!0,configurable:!0}),i}w(xn,Mn),gn.define(xn.prototype),Object.defineProperty(xn.prototype,"node",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"selector",{get:function(){return this.rule.selectorText},enumerable:!0,configurable:!0}),xn.prototype.setSelector=function(t){this.rule.selectorText=t},xn.prototype.getStyle=function(t){if("undefined"!=typeof CSSStyleValue){var e=this.rule.styleMap;if("string"==typeof t)return e.get(t);for(var i=0,o=t.length;i<o;i+=1){if(""!==(n=e.get(t[i])))return n}return""}e=this.rule.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.getPropertyValue(t[i])))return n}return""},xn.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.rule.styleMap.set(e,n)}catch(t){}else this.rule.style.setProperty(e,Zt(i),o)}else this.rule.styleMap.delete(e);else null!=i?this.rule.style.setProperty(e,Zt(i),o):this.rule.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},xn.prototype.willSetStyle=function(t,e,i){},xn.prototype.onSetStyle=function(t,e,i){},xn.prototype.didSetStyle=function(t,e,i){},xn.prototype.hasStyleAnimator=function(t){return void 0!==this.styleAnimators[t]},xn.prototype.getStyleAnimator=function(t){var e=this.styleAnimators[t];return void 0!==e?e:null},xn.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null!==e?i[t]=e:delete i[t]},xn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i);var o=this.styleAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},xn.prototype.mount=function(){Mn.prototype.mount.call(this);var t=this.styleAnimators;for(var e in t){t[e].mount()}},xn.prototype.unmount=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}Mn.prototype.unmount.call(this)},xn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSStyleRule)return i;throw new TypeError(""+i)},xn.define=function(t){var e=t.extends,i=t.css,o=t.style;delete t.extends,delete t.css,delete t.style,void 0===e&&(e=xn);var n=function(t,n){var r,s=function(t,e){return void 0===e?s.getStyle(t):(s.setStyle(t,e),s.owner)};if(Object.setPrototypeOf(s,this),s=e.call(s,t,n)||s,void 0!==i)r=i;else{if(void 0===s.initCss)throw new Error("undefined css");r=s.initCss()}var a=s.createRule(r);return void 0!==s.initRule&&(a=s.initRule(a)),Object.defineProperty(s,"rule",{value:a,enumerable:!0,configurable:!0}),void 0!==o&&gn.init(s,o),s},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),"function"==typeof i&&(r.initCss=i,i=void 0),n};var Rn=function(t,e){return this instanceof Rn?kn.call(this,t,e):(i=t,Dn.decorateCssRule.bind(Dn,Rn.define(i)));var i};function kn(t,e){var i=Mn.call(this,t,e)||this;return Object.defineProperty(i,"cssRules",{value:{},enumerable:!0,configurable:!0}),i}w(Rn,Mn),Rn.prototype.getRule=function(t){return this.rule.cssRules.item(t)},Rn.prototype.insertRule=function(t,e){return this.rule.insertRule(t,e)},Rn.prototype.removeRule=function(t){this.rule.deleteRule(t)},Rn.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},Rn.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},Rn.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},Rn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},Rn.prototype.mount=function(){Mn.prototype.mount.call(this);var t=this.cssRules;for(var e in t){t[e].mount()}},Rn.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}Mn.prototype.unmount.call(this)},Rn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSMediaRule)return i;throw new TypeError(""+i)},Rn.define=function(t){var e=t.extends,i=t.css;delete t.extends,delete t.css,void 0===e&&(e=Rn);var o=function(t,o){var n,r=e.call(this,t,o)||this;if(void 0!==i)n=i;else{if(void 0===r.initCss)throw new Error("undefined css");n=r.initCss()}var s=r.createRule(n);return void 0!==r.initRule&&(s=r.initRule(s)),Object.defineProperty(r,"rule",{value:s,enumerable:!0,configurable:!0}),r},n=t;return Object.setPrototypeOf(o,e),(o.prototype=n).constructor=o,Object.setPrototypeOf(o.prototype,e.prototype),"function"==typeof i&&(n.initCss=i,i=void 0),o};var In=function(){function t(t,i){Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"stylesheet",{value:void 0!==i?i:this.createStylesheet(),enumerable:!0}),Object.defineProperty(this,"cssRules",{value:{},enumerable:!0,configurable:!0}),Object.defineProperty(this,"animationTracks",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.createStylesheet=function(){return new CSSStyleSheet},t.prototype.getRule=function(t){return this.stylesheet.cssRules.item(t)},t.prototype.insertRule=function(t,e){return this.stylesheet.insertRule(t,e)},t.prototype.removeRule=function(t){this.stylesheet.deleteRule(t)},t.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},t.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},t.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},t.prototype.getLazyCssRule=function(t){var e=this.getCssRule(t);if(null===e){var i=Dn.getCssRuleConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setCssRule(t,e))}return e},t.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},t.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},t.prototype.onAnimate=function(t){this.updateAnimations(t)},t.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},t.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(Object.defineProperty(this,"animationTracks",{value:o,enumerable:!0,configurable:!0}),0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},t.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},t.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},t.prototype.addConstraint=function(t){return this.owner.addConstraint(t)},t.prototype.removeConstraint=function(t){return this.owner.removeConstraint(t)},t.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},t.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},t.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},t.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},t.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},t.prototype.requireUpdate=function(t){"function"==typeof this.owner.requireUpdate&&this.owner.requireUpdate(t)},t.prototype.mount=function(){var t=this.cssRules;for(var e in t){t[e].mount()}},t.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}},t}(),Ln=function(t){function i(i){var o=t.call(this)||this;return Object.defineProperty(o,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(o,"node",{value:i,enumerable:!0}),Object.defineProperty(o,"childViewMap",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(o,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),i.view=o,o}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.text&&this.text(e.text)},i.prototype.willObserve=function(t){var e,i=this.viewController;if(null!==i&&void 0!==(e=t.call(this,i)))return e;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];if(void 0!==(e=t.call(this,s)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}var s=this.viewController;return null!==s&&(e=t.call(this,s)),e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(i.prototype,"parentView",{get:function(){var t=this.node.parentNode;if(null!==t){var e=t.view;if(e instanceof Xi)return e}return null},enumerable:!1,configurable:!0}),i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.node,e=t.parentNode;if(null!==e){var i=e.view;void 0!==i?0==(this.viewFlags&Xi.TraversingFlag)?i.removeChildView(this):this.setViewFlags(this.viewFlags|Xi.RemovingFlag):(e.removeChild(t),this.setParentView(null,this),this.setKey(void 0))}},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}return null},i.prototype.lastChildView=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;if(void 0!==i)return i}return null},i.prototype.nextChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.nextSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n],s=r.view;if(void 0!==s&&void 0!==(i=t.call(e,s)))break;o[n]===r&&(n+=1)}return i},i.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setChildView=function(t,e){var o=null;if(null!==e){if(!(e instanceof i))throw new TypeError(""+e);e.parentView===this&&(o=e.node.nextSibling),e.remove()}var n=this.getChildView(t);if(null!==n){if(!(n instanceof i))throw new TypeError(""+n);var r=n.node;o=r.nextSibling,this.willRemoveChildView(n),this.willRemoveChildNode(r),n.setParentView(null,this),this.removeChildViewMap(n),this.node.removeChild(r),this.onRemoveChildNode(r),this.onRemoveChildView(n),this.didRemoveChildNode(r),this.didRemoveChildView(n),n.setKey(void 0)}if(null!==e){var s=e.node,a=null;null!==o&&void 0===(a=o.view)&&(a=null),e.setKey(t),this.willInsertChildView(e,a),this.willInsertChildNode(s,o),this.node.insertBefore(s,o),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildNode(s,o),this.onInsertChildView(e,a),this.didInsertChildNode(s,o),this.didInsertChildView(e,a),e.cascadeInsert()}return n},i.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},i.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},i.prototype.appendChild=function(t,e){if(t instanceof Xi)this.appendChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.appendChildNode(t,e)}},i.prototype.appendChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node;this.willInsertChildView(t,null),this.willInsertChildNode(o,null),this.node.appendChild(o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,null),this.onInsertChildView(t,null),this.didInsertChildNode(o,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.appendChildNode=function(t,e){var i=t.view;void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,null)),this.willInsertChildNode(t,null),this.node.appendChild(t),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,null),void 0!==i&&this.onInsertChildView(i,null),this.didInsertChildNode(t,null),void 0!==i&&(this.didInsertChildView(i,null),i.cascadeInsert())},i.prototype.prependChild=function(t,e){if(t instanceof Xi)this.prependChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.prependChildNode(t,e)}},i.prototype.prependChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node,n=this.node.firstChild,r=null;null!==n&&void 0===(r=n.view)&&(r=null),this.willInsertChildView(t,r),this.willInsertChildNode(o,n),this.node.insertBefore(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,r),this.didInsertChildNode(o,n),this.didInsertChildView(t,r),t.cascadeInsert()},i.prototype.prependChildNode=function(t,e){var i=t.view,o=this.node.firstChild,n=null;null!==o&&void 0===(n=o.view)&&(n=null),void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,n)),this.willInsertChildNode(t,o),this.node.insertBefore(t,o),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,o),void 0!==i&&this.onInsertChildView(i,n),this.didInsertChildNode(t,o),void 0!==i&&(this.didInsertChildView(i,n),i.cascadeInsert())},i.prototype.insertChild=function(t,e,o){if(t instanceof i)if(e instanceof Xi)this.insertChildView(t,e,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t.node,e,o)}else{if(!(t instanceof Node))throw new TypeError(""+t);if(e instanceof i)this.insertChildNode(t,e.node,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t,e,o)}}},i.prototype.insertChildView=function(t,e,o){if(!(t instanceof i))throw new TypeError(""+t);if(null!==e&&!(e instanceof i))throw new TypeError(""+e);t.remove(),void 0!==o&&(this.removeChildView(o),t.setKey(o));var n=t.node,r=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(n,r),this.node.insertBefore(n,r),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(n,r),this.onInsertChildView(t,e),this.didInsertChildNode(n,r),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i)},i.prototype.insertChildNode=function(t,e,i){var o=t.view,n=null;null!==e&&void 0===(n=e.view)&&(n=null),void 0!==o&&(o.remove(),void 0!==i&&(this.removeChildView(i),o.setKey(i)),this.willInsertChildView(o,n)),this.willInsertChildNode(t,e),this.node.insertBefore(t,e),void 0!==o&&(this.insertChildViewMap(o),o.setParentView(this,null)),this.onInsertChildNode(t,e),void 0!==o&&this.onInsertChildView(o,n),this.didInsertChildNode(t,e),void 0!==o&&(this.didInsertChildView(o,n),o.cascadeInsert())},i.prototype.injectChildView=function(t,e,i){void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.node,n=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,e),this.didInsertChildNode(o,n),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.willInsertChildNode=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillInsertChildNode&&i.viewWillInsertChildNode(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillInsertChildNode&&s.viewWillInsertChildNode(t,e,this)}},i.prototype.onInsertChildNode=function(t,e){this.requireUpdate(this.insertChildFlags)},i.prototype.didInsertChildNode=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildNode&&r.viewDidInsertChildNode(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidInsertChildNode&&s.viewDidInsertChildNode(t,e,this)},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Xi.MountedFlag|Xi.PoweredFlag))==(Xi.MountedFlag|Xi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Xi.UpdateMask)&Xi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.removeChild=function(t){if(t instanceof Xi)this.removeChildView(t);else{if(!(t instanceof Node))throw new TypeError(""+t);this.removeChildNode(t)}},i.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof i))throw new TypeError(""+e);var o=e.node;if(o.parentNode!==this.node)throw new Error("not a child view");if(this.willRemoveChildView(e),this.willRemoveChildNode(o),e.setParentView(null,this),this.removeChildViewMap(e),this.node.removeChild(o),this.onRemoveChildNode(o),this.onRemoveChildView(e),this.didRemoveChildNode(o),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeViewFastener(e)},i.prototype.removeChildNode=function(t){if(t.parentNode!==this.node)throw new Error("not a child node");var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))},i.prototype.removeAll=function(){for(;;){var t=this.node.lastChild;if(null===t)break;var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))}},i.prototype.willRemoveChildNode=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRemoveChildNode&&e.viewWillRemoveChildNode(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillRemoveChildNode&&r.viewWillRemoveChildNode(t,this)}},i.prototype.onRemoveChildNode=function(t){this.requireUpdate(this.removeChildFlags)},i.prototype.didRemoveChildNode=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildNode&&n.viewDidRemoveChildNode(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidRemoveChildNode&&r.viewDidRemoveChildNode(t,this)},i.prototype.text=function(t){return 0===arguments.length?(null===(t=this.node.textContent)&&(t=void 0),t):(void 0===t&&(t=null),this.node.textContent=t,this)},i.isRootView=function(t){for(;;){var e=t.parentNode;if(null===e)break;if(e.view instanceof Xi)return!1;t=e}return!0},i.isNodeMounted=function(t){var e=t.isConnected;if("boolean"!=typeof e){var i=t.ownerDocument;if(null!==i)e=0==(i.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED);else e=!1}return e},i.prototype.mount=function(){!this.isMounted()&&i.isNodeMounted(this.node)&&i.isRootView(this.node)&&(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&Xi.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|Xi.MountedFlag|Xi.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners()},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.doMountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeMount(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&Xi.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~Xi.MountedFlag|Xi.TraversingFlag);try{this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~Xi.ViewFlagMask|Xi.RemovingFlag))},i.prototype.doUnmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnmount(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&Xi.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|Xi.PoweredFlag|Xi.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doPowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadePower(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&Xi.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~Xi.PoweredFlag|Xi.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doUnpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnpower(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&Xi.CulledFlag)?(this.setViewFlags(e|Xi.CulledFlag),0==(e&Xi.CullFlag)&&this.doCull()):t||0==(e&Xi.CulledFlag)||(this.setViewFlags(e&~Xi.CulledFlag),0==(e&Xi.CullFlag)&&this.doUncull())},i.prototype.cascadeCull=function(){0==(this.viewFlags&Xi.CullFlag)&&(this.setViewFlags(this.viewFlags|Xi.CullFlag),0==(this.viewFlags&Xi.CulledFlag)&&this.doCull())},i.prototype.doCull=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willCull(),this.onCull(),this.doCullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doCullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeCull(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&Xi.CullFlag)&&(this.setViewFlags(this.viewFlags&~Xi.CullFlag),0==(this.viewFlags&Xi.CulledFlag)&&this.doUncull())},i.prototype.doUncull=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willUncull(),this.doUncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doUncullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUncull(),0==(i.viewFlags&Xi.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);t&=~Xi.NeedsProcess,t|=this.viewFlags&Xi.UpdateMask,0!=((t=this.needsProcess(t,i))&Xi.ProcessMask)&&this.doProcess(t,i)},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Xi.NeedsProcess|Xi.NeedsProject)|Xi.TraversingFlag|Xi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Xi.NeedsResize)&&(i|=Xi.NeedsResize,this.setViewFlags(this.viewFlags&~Xi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Xi.NeedsScroll)&&(i|=Xi.NeedsScroll,this.setViewFlags(this.viewFlags&~Xi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Xi.NeedsChange)&&(i|=Xi.NeedsChange,this.setViewFlags(this.viewFlags&~Xi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Xi.NeedsAnimate)&&(i|=Xi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Xi.NeedsAnimate),this.willAnimate(e)),this.onProcess(i,e),0!=(i&Xi.NeedsResize)&&this.onResize(e),0!=(i&Xi.NeedsScroll)&&this.onScroll(e),0!=(i&Xi.NeedsChange)&&this.onChange(e),0!=(i&Xi.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&Xi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Xi.NeedsChange)&&this.didChange(e),0!=(i&Xi.NeedsScroll)&&this.didScroll(e),0!=(i&Xi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.ProcessingFlag))}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties()},i.prototype.doProcessChildViews=function(t,e){0!=(t&Xi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);t&=~Xi.NeedsDisplay,t|=this.viewFlags&Xi.UpdateMask,0!=((t=this.needsDisplay(t,i))&Xi.DisplayMask)&&this.doDisplay(t,i)},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Xi.NeedsDisplay|Xi.NeedsRender|Xi.NeedsRasterize|Xi.NeedsComposite)|Xi.TraversingFlag|Xi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Xi.NeedsLayout)&&(i|=Xi.NeedsLayout,this.setViewFlags(this.viewFlags&~Xi.NeedsLayout),this.willLayout(e)),this.onDisplay(i,e),0!=(i&Xi.NeedsLayout)&&this.onLayout(e),this.doDisplayChildViews(i,e),0!=(i&Xi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.DisplayingFlag))}},i.prototype.doDisplayChildViews=function(t,e){0==(t&Xi.DisplayMask)||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},i.prototype.getLook=function(t,e){},i.prototype.getLookOr=function(t,e,i){return 2===arguments.length&&(i=e,e=null),i},i.prototype.modifyMood=function(t,e,i){},i.prototype.modifyTheme=function(t,e,i){},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},Object.defineProperty(this,"viewServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},Object.defineProperty(this,"viewProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},Object.defineProperty(this,"viewAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},Object.defineProperty(this,"viewFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();return t.detach(),new r.R2Box(e.left,e.top,e.right,e.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();t.detach();var i=window.pageXOffset,o=window.pageYOffset;return new r.R2Box(e.left+i,e.top+o,e.right+i,e.bottom+o)},enumerable:!1,configurable:!0}),i.prototype.dispatchEvent=function(t){return this.node.dispatchEvent(t)},i.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},i.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},i.mount=function(t){var e=t.parentView;null!==e?(t.setParentView(e,null),t.cascadeInsert()):t.mount()},i.fromNode=function(t){if(t.view instanceof this)return t.view;if(t instanceof Element)return Xn.fromNode(t);if(t instanceof Text)return Wn.fromNode(t);var e=new i(t);return this.mount(e),e},i.fromConstructor=function(t){if(t.prototype instanceof Xn)return Xn.fromConstructor(t);if(t.prototype instanceof Wn)return Wn.fromConstructor(t);if(t.prototype instanceof Xi)return new t;throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if(t instanceof Node)return this.fromNode(t);throw new TypeError(""+t)},i}(Xi);eo.insertModalView=function(t){var e=document.body,i=e.view;if(void 0!==i)i.appendChildView(t);else{if(!(t instanceof Ln))throw new TypeError(""+t);e.appendChild(t.node),t.mount()}};var jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"node",{get:function(){var t=this.view;return null!==t?t.node:null},enumerable:!1,configurable:!0}),e.prototype.appendChildNode=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.appendChildNode(t,e)},e.prototype.prependChildNode=function(t,e){var i=this.view;if(null===i)throw new Error("no view");i.prependChildNode(t,e)},e.prototype.insertChildNode=function(t,e,i){var o=this.view;if(null===o)throw new Error("no view");o.insertChildNode(t,e,i)},e.prototype.viewWillInsertChildNode=function(t,e,i){},e.prototype.viewDidInsertChildNode=function(t,e,i){},e.prototype.removeChildNode=function(t){var e=this.view;if(null===e)throw new Error("no view");e.removeChildNode(t)},e.prototype.viewWillRemoveChildNode=function(t,e){},e.prototype.viewDidRemoveChildNode=function(t,e){},e}(Ki),Wn=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.create=function(t){return void 0===t&&(t=""),new e(document.createTextNode(t))},e.fromConstructor=function(i){return i.prototype instanceof e?new i(document.createTextNode("")):t.fromConstructor.call(this,i)},e}(Ln),En=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(jn),Nn=function(t,e){return this instanceof Nn?Gn.call(this,t,e):(i=t,Xn.decorateAttributeAnimator.bind(Xn,Nn.define(i)));var i};function Gn(t,e){var i=bo.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"owner",{value:t,enumerable:!0}),i}w(Nn,bo),Object.defineProperty(Nn.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty(Nn.prototype,"attributeValue",{get:function(){var t=this.owner.getAttribute(this.attributeName);if(null!==t)try{return this.parse(t)}catch(t){}},enumerable:!0,configurable:!0}),Object.defineProperty(Nn.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.attributeValue;void 0!==e&&(t=e,this.setPrecedence(Xi.Extrinsic))}return t},enumerable:!0,configurable:!0}),Nn.prototype.getValue=function(){var t=this.value;if(void 0===t)throw new TypeError(t+" "+this.name+" value");return t},Nn.prototype.onSetValue=function(t,e){this.owner.setAttribute(this.attributeName,t);var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},Nn.prototype.getState=function(){var t=this.state;if(void 0===t)throw new TypeError(t+" "+this.name+" state");return t},Nn.prototype.setOwnState=function(t,e){t=this.fromAny(t),bo.prototype.setOwnState.call(this,t,e)},Nn.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},Nn.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(Xi.NeedsChange)},Nn.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(Qt.timing,!0)),this.setOwnState(n,i))}},Nn.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},Nn.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},Nn.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},Nn.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},Nn.prototype.parse=function(){throw new Error},Nn.prototype.fromAny=function(t){return t},Nn.prototype.isMounted=function(){return 0!=(this.animatorFlags&bo.MountedFlag)},Nn.prototype.mount=function(){0==(this.animatorFlags&bo.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|bo.MountedFlag),this.onMount(),this.didMount())},Nn.prototype.willMount=function(){},Nn.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},Nn.prototype.didMount=function(){},Nn.prototype.unmount=function(){0!=(this.animatorFlags&bo.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},Nn.prototype.willUnmount=function(){},Nn.prototype.onUnmount=function(){this.stopAnimating()},Nn.prototype.didUnmount=function(){},Nn.prototype.toString=function(){return this.name},Nn.getClass=function(t){return t===String?Un:t===Boolean?Bn:t===Number?Hn:t===r.Length?zn:t===St?qn:t===r.Transform?Yn:null},Nn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.precedence,s=t.initState;delete t.extends,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=Nn.getClass(t.type)),null===i&&(i=Nn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e,i){return 0===arguments.length?l.value:(2===arguments.length?l.setState(t,e):l.setState(t,e,i),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==o&&(a=l.fromAny(o)),void 0!==a&&(Object.defineProperty(l,"ownValue",{value:a,enumerable:!0,configurable:!0}),Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0})),void 0!==n&&Object.defineProperty(l,"ownLook",{value:n,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a};var Un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromAny=function(t){return t},e}(Nn),Bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return!!t},e.prototype.fromAny=function(t){return!!t},e}(Nn),Hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e}(Nn),zn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e}(Nn),qn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return St.parse(t)},e.prototype.fromAny=function(t){try{return St.fromAny(t)}catch(t){return null}},e}(Nn),Yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e}(Nn),Xn=function(i){function o(t){var e=i.call(this,t)||this;return Object.defineProperty(e,"attributeAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"styleAnimators",{value:null,enumerable:!0,configurable:!0}),e}return w(o,i),o.prototype.initView=function(t){i.prototype.initView.call(this,t),void 0!==t.id&&this.id(t.id),void 0!==t.classList&&this.addClass.apply(this,t.classList),void 0!==t.mood&&this.mood(t.mood),void 0!==t.moodModifier&&this.moodModifier(t.moodModifier),void 0!==t.theme&&this.theme(t.theme),void 0!==t.themeModifier&&this.themeModifier(t.themeModifier)},o.prototype.onAddViewObserver=function(t){i.prototype.onAddViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onRemoveViewObserver=function(t){i.prototype.onRemoveViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onMount=function(){i.prototype.onMount.call(this),this.mountTheme()},o.prototype.onChange=function(t){i.prototype.onChange.call(this,t),this.updateTheme()},o.prototype.onUncull=function(){i.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},o.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},o.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},o.prototype.modifyMood=function(t,e,i){if(this.moodModifier.takesPrecedence(Xi.Intrinsic)){var o=this.moodModifier.getStateOr(de.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.moodModifier.setState(n,Xi.Intrinsic),this.changeMood(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(Qt.timing,s,!1):a.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(Xi.NeedsChange)}},o.prototype.modifyTheme=function(t,e,i){if(this.themeModifier.takesPrecedence(Xi.Intrinsic)){var o=this.themeModifier.getStateOr(de.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.themeModifier.setState(n,Xi.Intrinsic),this.changeTheme(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(Qt.timing,s,!1):a.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(Xi.NeedsChange)}},o.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.takesPrecedence(Xi.Intrinsic)){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setState(n,Xi.Intrinsic)}}else this.mood.setInherited(!0)}},o.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.takesPrecedence(Xi.Intrinsic)){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setState(n,Xi.Intrinsic)}}else this.theme.setInherited(!0)}},o.prototype.updateTheme=function(){this.changeMood(),this.changeTheme();var t=this.theme.state,e=this.mood.state;null!==t&&null!==e&&this.applyTheme(t,e)},o.prototype.onApplyTheme=function(t,e,o){i.prototype.onApplyTheme.call(this,t,e,o),this.themeViewAnimators(t,e,o)},o.prototype.mountTheme=function(){if(Ln.isRootView(this.node)){var t=this.themeService.manager;void 0!==t&&(this.mood.takesPrecedence(Xi.Intrinsic)&&null===this.mood.state&&this.mood.setState(t.mood,Xi.Intrinsic),this.theme.takesPrecedence(Xi.Intrinsic)&&null===this.theme.state&&this.theme.setState(t.theme,Xi.Intrinsic))}},o.prototype.getAttribute=function(t){return this.node.getAttribute(t)},o.prototype.setAttribute=function(t,e){return this.willSetAttribute(t,e),null!=e?this.node.setAttribute(t,Kt(e)):this.node.removeAttribute(t),this.onSetAttribute(t,e),this.didSetAttribute(t,e),this},o.prototype.willSetAttribute=function(t,e){var i=this.viewController;null!==i&&i.viewWillSetAttribute(t,e,this);var o=this.viewObserverCache.viewWillSetAttributeObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewWillSetAttribute(t,e,this)}},o.prototype.onSetAttribute=function(t,e){},o.prototype.didSetAttribute=function(t,e){var i=this.viewObserverCache.viewDidSetAttributeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewDidSetAttribute(t,e,this)}var r=this.viewController;null!==r&&r.viewDidSetAttribute(t,e,this)},o.prototype.hasAttributeAnimator=function(t){var e=this.attributeAnimators;return null!==e&&void 0!==e[t]},o.prototype.getAttributeAnimator=function(t){var e=this.attributeAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setAttributeAnimator=function(t,e){var i=this.attributeAnimators;null===i&&(i={},Object.defineProperty(this,"attributeAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.getLazyAttributeAnimator=function(t){var e=this.getAttributeAnimator(t);if(null===e){var i=o.getAttributeAnimatorConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setAttributeAnimator(t,e))}return e},o.prototype.getStyle=function(t){if("undefined"==typeof CSSStyleValue){e=this.node.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){if(""!==(n=e.getPropertyValue(t[i])))return n}return""}var e=this.node.attributeStyleMap;if("string"!=typeof t){for(var i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.get(t[i])))return n}return""}try{return e.get(t)}catch(t){return}},o.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.node.attributeStyleMap.set(e,n)}catch(t){}else this.node.style.setProperty(e,Zt(i),o)}else this.node.attributeStyleMap.delete(e);else null!=i?this.node.style.setProperty(e,Zt(i),o):this.node.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},o.prototype.willSetStyle=function(t,e,i){var o=this.viewController;null!==o&&o.viewWillSetStyle(t,e,i,this);var n=this.viewObserverCache.viewWillSetStyleObservers;if(void 0!==n)for(var r=0,s=n.length;r<s;r+=1){n[r].viewWillSetStyle(t,e,i,this)}},o.prototype.onSetStyle=function(t,e,i){},o.prototype.didSetStyle=function(t,e,i){var o=this.viewObserverCache.viewDidSetStyleObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewDidSetStyle(t,e,i,this)}var s=this.viewController;null!==s&&s.viewDidSetStyle(t,e,i,this)},o.prototype.hasStyleAnimator=function(t){var e=this.styleAnimators;return null!==e&&void 0!==e[t]},o.prototype.getStyleAnimator=function(t){var e=this.styleAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null===i&&(i={},Object.defineProperty(this,"styleAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.getLazyStyleAnimator=function(t){var e=this.getStyleAnimator(t);if(null===e){var i=on.getStyleAnimatorConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setStyleAnimator(t,e))}return e},o.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}var r=this.attributeAnimators;for(var n in r){r[n].applyTheme(t,e,i)}var s=this.styleAnimators;for(var n in s){s[n].applyTheme(t,e,i)}},o.prototype.mountViewAnimators=function(){i.prototype.mountViewAnimators.call(this);var t=this.attributeAnimators;for(var e in t){t[e].mount()}var o=this.styleAnimators;for(var e in o){o[e].mount()}},o.prototype.unmountViewAnimators=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}var o=this.attributeAnimators;for(var e in o){o[e].unmount()}i.prototype.unmountViewAnimators.call(this)},o.prototype.id=function(t){if(0==arguments.length){var e=this.getAttribute("id");return null!==e?e:void 0}return this.setAttribute("id",t),this},o.prototype.className=function(t){if(0===arguments.length){var e=this.getAttribute("class");return null!==e?e:void 0}return this.setAttribute("class",t),this},Object.defineProperty(o.prototype,"classList",{get:function(){return this.node.classList},enumerable:!1,configurable:!0}),o.prototype.hasClass=function(t){return this.node.classList.contains(t)},o.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.add(t[o]);return this},o.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.remove(t[o]);return this},o.prototype.toggleClass=function(t,e){var i=this.node.classList;return void 0===e?i.toggle(t):!0===e?i.add(t):!1===e&&i.remove(t),this},o.prototype.setViewMember=function(t,e,i,o){var n=this.getLazyViewProperty(t);if(null===n){var r=this.getLazyViewAnimator(t);if(null===r){var s=this.getLazyStyleAnimator(t);if(null===s){var a=this.getLazyAttributeAnimator(t);null===a||a.setState(e,i,o)}else s.setState(e,i,o)}else r.setState(e,i,o)}else n.setState(e,o)},o.prototype.setViewState=function(t,e,i){for(var o in"number"==typeof e?(i=e,e=void 0):void 0===i&&(i=Xi.Extrinsic),t){var n=t[o];this.setViewMember(o,n,e,i)}},Object.defineProperty(o.prototype,"clientBounds",{get:function(){var t=this.node.getBoundingClientRect();return new r.R2Box(t.left,t.top,t.right,t.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageBounds",{get:function(){var t=this.node.getBoundingClientRect(),e=window.pageXOffset,i=window.pageYOffset;return new r.R2Box(t.left+e,t.top+i,t.right+e,t.bottom+i)},enumerable:!1,configurable:!0}),o.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},o.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},o.fromTag=function(t){var e;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this);var i=e.namespace;return new e(void 0!==i?document.createElementNS(i,t):document.createElement(t))},o.fromNode=function(t){if(t.view instanceof this)return t.view;var e=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t.tagName]),void 0===e&&(e=this);var i=new e(t);return this.mount(i),i},o.fromConstructor=function(t){if(t.prototype instanceof o){var e=t.tag;if("string"==typeof e){var n=t.namespace;return new t(void 0!==n?document.createElementNS(n,e):document.createElement(e))}throw new TypeError(""+t)}return i.fromConstructor.call(this,t)},o.fromAny=function(t){if(t instanceof o)return t;if(t instanceof Element)return this.fromNode(t);throw new TypeError(""+t)},o.getAttributeAnimatorConstructor=function(t,e){for(null===e&&(e=this.prototype);null!==e;){if(Object.prototype.hasOwnProperty.call(e,"attributeAnimatorConstructors")){var i=e.attributeAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},o.decorateAttributeAnimator=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"attributeAnimatorConstructors")||(o.attributeAnimatorConstructors={}),o.attributeAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getAttributeAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setAttributeAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})},o.tags={},m([ho({type:de,state:null})],o.prototype,"moodModifier",void 0),m([ho({type:de,state:null})],o.prototype,"themeModifier",void 0),o}(Ln),Kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetAttribute=function(t,e,i){},e.prototype.viewDidSetAttribute=function(t,e,i){},e.prototype.viewWillSetStyle=function(t,e,i,o){},e.prototype.viewDidSetStyle=function(t,e,i,o){},e}(jn),Zn=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.autocomplete&&this.autocomplete(t.autocomplete),void 0!==t.checked&&this.checked(t.checked),void 0!==t.colspan&&this.colspan(t.colspan),void 0!==t.disabled&&this.disabled(t.disabled),void 0!==t.placeholder&&this.placeholder(t.placeholder),void 0!==t.rowspan&&this.rowspan(t.rowspan),void 0!==t.selected&&this.selected(t.selected),void 0!==t.title&&this.title(t.title),void 0!==t.type&&this.type(t.type),void 0!==t.value&&this.value(t.value)},e.prototype.initStyle=function(t){gn.init(this,t)},e.prototype.append=function(t,i){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.node.hasAttribute("swim-theme")&&this.applyRootTheme(e,i,o)},e.prototype.applyRootTheme=function(t,e,i){var o=t.getOr(Qt.font,he.ambient,null);null!==o&&(void 0!==o.style&&this.fontStyle.setState(o.style,void 0,0),void 0!==o.variant&&this.fontVariant.setState(o.variant,void 0,0),void 0!==o.weight&&this.fontWeight.setState(o.weight,void 0,0),void 0!==o.stretch&&this.fontStretch.setState(o.stretch,void 0,0),null!==o.size&&this.fontSize.setState(o.size,void 0,0),null!==o.height&&this.lineHeight.setState(o.height,void 0,0),this.fontFamily.setState(o.family,void 0,0)),this.backgroundColor.setState(t.getOr(Qt.backgroundColor,he.ambient,null),i,Xi.Intrinsic),this.color.setState(t.getOr(Qt.color,he.ambient,null),i,Xi.Intrinsic)},e.isPositioned=function(t){var e=window.getComputedStyle(t);return"relative"===e.position||"absolute"===e.position},e.prototype.isPositioned=function(){return e.isPositioned(this.node)},e.parentTransform=function(t){if(e.isPositioned(t)){var i=t.offsetLeft,o=t.offsetTop;if(0!==i||0!==o)return r.Transform.translate(-i,-o)}return r.Transform.identity()},e.pageTransform=function(t){var i=t.parentNode;return i instanceof HTMLElement?e.pageTransform(i).transform(e.parentTransform(t)):r.Transform.identity()},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;if(null!==t)return t;if(this.isPositioned()){var e=this.node.offsetLeft,i=this.node.offsetTop;if(0!==e||0!==i)return r.Transform.translate(-e,-i)}return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageTransform",{get:function(){var t=this.parentView;if(null!==t)return t.pageTransform.transform(this.parentTransform);var i=this.node.parentNode;return i instanceof HTMLElement?e.pageTransform(i).transform(this.parentTransform):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElement(t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in Xn.tags||(Xn.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="div",m([Nn({attributeName:"autocomplete",type:String})],e.prototype,"autocomplete",void 0),m([Nn({attributeName:"checked",type:Boolean})],e.prototype,"checked",void 0),m([Nn({attributeName:"colspan",type:Number})],e.prototype,"colspan",void 0),m([Nn({attributeName:"disabled",type:Boolean})],e.prototype,"disabled",void 0),m([Nn({attributeName:"placeholder",type:String})],e.prototype,"placeholder",void 0),m([Nn({attributeName:"rowspan",type:Number})],e.prototype,"rowspan",void 0),m([Nn({attributeName:"selected",type:Boolean})],e.prototype,"selected",void 0),m([Nn({attributeName:"title",type:String})],e.prototype,"title",void 0),m([Nn({attributeName:"type",type:String})],e.prototype,"type",void 0),m([Nn({attributeName:"value",type:String})],e.prototype,"value",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("abbr")],e,"abbr",void 0),m([e.Tag("address")],e,"address",void 0),m([e.Tag("area")],e,"area",void 0),m([e.Tag("article")],e,"article",void 0),m([e.Tag("aside")],e,"aside",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("b")],e,"b",void 0),m([e.Tag("base")],e,"base",void 0),m([e.Tag("bdi")],e,"bdi",void 0),m([e.Tag("bdo")],e,"bdo",void 0),m([e.Tag("blockquote")],e,"blockquote",void 0),m([e.Tag("body")],e,"body",void 0),m([e.Tag("br")],e,"br",void 0),m([e.Tag("button")],e,"button",void 0),m([e.Tag("caption")],e,"caption",void 0),m([e.Tag("cite")],e,"cite",void 0),m([e.Tag("code")],e,"code",void 0),m([e.Tag("col")],e,"col",void 0),m([e.Tag("colgroup")],e,"colgroup",void 0),m([e.Tag("data")],e,"data",void 0),m([e.Tag("datalist")],e,"datalist",void 0),m([e.Tag("dd")],e,"dd",void 0),m([e.Tag("del")],e,"del",void 0),m([e.Tag("details")],e,"details",void 0),m([e.Tag("dfn")],e,"dfn",void 0),m([e.Tag("dialog")],e,"dialog",void 0),m([e.Tag("div")],e,"div",void 0),m([e.Tag("dl")],e,"dl",void 0),m([e.Tag("dt")],e,"dt",void 0),m([e.Tag("em")],e,"em",void 0),m([e.Tag("embed")],e,"embed",void 0),m([e.Tag("fieldset")],e,"fieldset",void 0),m([e.Tag("figcaption")],e,"figcaption",void 0),m([e.Tag("figure")],e,"figure",void 0),m([e.Tag("footer")],e,"footer",void 0),m([e.Tag("form")],e,"form",void 0),m([e.Tag("h1")],e,"h1",void 0),m([e.Tag("h2")],e,"h2",void 0),m([e.Tag("h3")],e,"h3",void 0),m([e.Tag("h4")],e,"h4",void 0),m([e.Tag("h5")],e,"h5",void 0),m([e.Tag("h6")],e,"h6",void 0),m([e.Tag("head")],e,"head",void 0),m([e.Tag("header")],e,"header",void 0),m([e.Tag("hr")],e,"hr",void 0),m([e.Tag("html")],e,"html",void 0),m([e.Tag("i")],e,"i",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("img")],e,"img",void 0),m([e.Tag("input")],e,"input",void 0),m([e.Tag("ins")],e,"ins",void 0),m([e.Tag("kbd")],e,"kbd",void 0),m([e.Tag("label")],e,"label",void 0),m([e.Tag("legend")],e,"legend",void 0),m([e.Tag("li")],e,"li",void 0),m([e.Tag("link")],e,"link",void 0),m([e.Tag("main")],e,"main",void 0),m([e.Tag("map")],e,"map",void 0),m([e.Tag("mark")],e,"mark",void 0),m([e.Tag("meta")],e,"meta",void 0),m([e.Tag("meter")],e,"meter",void 0),m([e.Tag("nav")],e,"nav",void 0),m([e.Tag("noscript")],e,"noscript",void 0),m([e.Tag("object")],e,"object",void 0),m([e.Tag("ol")],e,"ol",void 0),m([e.Tag("optgroup")],e,"optgroup",void 0),m([e.Tag("option")],e,"option",void 0),m([e.Tag("output")],e,"output",void 0),m([e.Tag("p")],e,"p",void 0),m([e.Tag("param")],e,"param",void 0),m([e.Tag("picture")],e,"picture",void 0),m([e.Tag("pre")],e,"pre",void 0),m([e.Tag("progress")],e,"progress",void 0),m([e.Tag("q")],e,"q",void 0),m([e.Tag("rb")],e,"rb",void 0),m([e.Tag("rp")],e,"rp",void 0),m([e.Tag("rt")],e,"rt",void 0),m([e.Tag("rtc")],e,"rtc",void 0),m([e.Tag("ruby")],e,"ruby",void 0),m([e.Tag("s")],e,"s",void 0),m([e.Tag("samp")],e,"samp",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("section")],e,"section",void 0),m([e.Tag("select")],e,"select",void 0),m([e.Tag("small")],e,"small",void 0),m([e.Tag("slot")],e,"slot",void 0),m([e.Tag("source")],e,"source",void 0),m([e.Tag("span")],e,"span",void 0),m([e.Tag("strong")],e,"strong",void 0),m([e.Tag("sub")],e,"sub",void 0),m([e.Tag("summary")],e,"summary",void 0),m([e.Tag("sup")],e,"sup",void 0),m([e.Tag("table")],e,"table",void 0),m([e.Tag("tbody")],e,"tbody",void 0),m([e.Tag("td")],e,"td",void 0),m([e.Tag("template")],e,"template",void 0),m([e.Tag("textarea")],e,"textarea",void 0),m([e.Tag("tfoot")],e,"tfoot",void 0),m([e.Tag("th")],e,"th",void 0),m([e.Tag("thead")],e,"thead",void 0),m([e.Tag("time")],e,"time",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tr")],e,"tr",void 0),m([e.Tag("track")],e,"track",void 0),m([e.Tag("u")],e,"u",void 0),m([e.Tag("ul")],e,"ul",void 0),m([e.Tag("var")],e,"var",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("wbr")],e,"wbr",void 0),e}(Xn);gn.define(Zn.prototype);var _n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Kn),Qn=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"sheet",{value:null,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.createSheet=function(){var t=this.node.sheet;return null!==t?new In(this,t):null},e.prototype.hasCssRule=function(t){var e=this.sheet;return null!==e&&e.hasCssRule(t)},e.prototype.getCssRule=function(t){var e=this.sheet;return null!==e?e.getCssRule(t):null},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.sheet;null!==n&&n.applyTheme(e,i,o)},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.createSheet();Object.defineProperty(this,"sheet",{value:e,enumerable:!0,configurable:!0}),null!==e&&e.mount()},e.prototype.onUnmount=function(){var e=this.sheet;null!==e&&e.unmount(),Object.defineProperty(this,"sheet",{value:null,enumerable:!0,configurable:!0}),t.prototype.onUnmount.call(this)},e.tag="style",e}(Zn);Zn.Tag("style")(Qn,"style");var Jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),$n=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.alignmentBaseline&&this.alignmentBaseline(t.alignmentBaseline),void 0!==t.clipPath&&this.clipPath(t.clipPath),void 0!==t.cursor&&this.cursor(t.cursor),void 0!==t.cx&&this.cx(t.cx),void 0!==t.cy&&this.cy(t.cy),void 0!==t.cy&&this.cy(t.cy),void 0!==t.d&&this.d(t.d),void 0!==t.dx&&this.dx(t.dx),void 0!==t.dy&&this.dy(t.dy),void 0!==t.edgeMode&&this.edgeMode(t.edgeMode),void 0!==t.fill&&this.fill(t.fill),void 0!==t.fillRule&&this.fillRule(t.fillRule),void 0!==t.floodColor&&this.floodColor(t.floodColor),void 0!==t.floodOpacity&&this.floodOpacity(t.floodOpacity),void 0!==t.height&&this.height(t.height),void 0!==t.in&&this.in(t.in),void 0!==t.in2&&this.in2(t.in2),void 0!==t.lengthAdjust&&this.lengthAdjust(t.lengthAdjust),void 0!==t.mode&&this.mode(t.mode),void 0!==t.opacity&&this.opacity(t.opacity),void 0!==t.pointerEvents&&this.pointerEvents(t.pointerEvents),void 0!==t.points&&this.points(t.points),void 0!==t.preserveAspectRatio&&this.preserveAspectRatio(t.preserveAspectRatio),void 0!==t.r&&this.r(t.r),void 0!==t.result&&this.result(t.result),void 0!==t.stdDeviation&&this.stdDeviation(t.stdDeviation),void 0!==t.stroke&&this.stroke(t.stroke),void 0!==t.strokeDasharray&&this.strokeDasharray(t.strokeDasharray),void 0!==t.strokeLinecap&&this.strokeLinecap(t.strokeLinecap),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth),void 0!==t.textAnchor&&this.textAnchor(t.textAnchor),void 0!==t.textLength&&this.textLength(t.textLength),void 0!==t.transform&&this.transform(t.transform),void 0!==t.type&&this.type(t.type),void 0!==t.values&&this.values(t.values),void 0!==t.viewBox&&this.viewBox(t.viewBox),void 0!==t.width&&this.width(t.width),void 0!==t.x&&this.x(t.x),void 0!==t.x1&&this.x1(t.x1),void 0!==t.x2&&this.x2(t.x2),void 0!==t.y&&this.y(t.y),void 0!==t.y1&&this.y1(t.y1),void 0!==t.y2&&this.y2(t.y2)},e.prototype.initStyle=function(t){void 0!==t.cssTransform&&this.cssTransform(t.cssTransform),void 0!==t.filter&&this.filter(t.filter),void 0!==t.fontFamily&&this.fontFamily(t.fontFamily),void 0!==t.fontSize&&this.fontSize(t.fontSize),void 0!==t.fontStretch&&this.fontStretch(t.fontStretch),void 0!==t.fontStyle&&this.fontStyle(t.fontStyle),void 0!==t.fontVariant&&this.fontVariant(t.fontVariant),void 0!==t.fontWeight&&this.fontWeight(t.fontWeight),void 0!==t.lineHeight&&this.lineHeight(t.lineHeight),void 0!==t.touchAction&&this.touchAction(t.touchAction)},e.prototype.append=function(t,i){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;return null!==t?t:r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.prototype.font=function(t,e){if(void 0===t){var i=this.fontStyle.value,o=this.fontVariant.value,n=this.fontWeight.value,r=this.fontStretch.value,s=this.fontSize.value,a=this.lineHeight.value,l=this.fontFamily.value;return void 0!==l?gt.create(i,o,n,r,s,a,l):null}return null!==t?(void 0!==(t=gt.fromAny(t)).style&&this.fontStyle.setState(t.style,e),void 0!==t.variant&&this.fontVariant.setState(t.variant,e),void 0!==t.weight&&this.fontWeight.setState(t.weight,e),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e),void 0!==t.size&&this.fontSize.setState(t.size,e),void 0!==t.height&&this.lineHeight.setState(t.height,e),this.fontFamily.setState(t.family,e)):(this.fontStyle.setState(void 0,e),this.fontVariant.setState(void 0,e),this.fontWeight.setState(void 0,e),this.fontStretch.setState(void 0,e),this.fontSize.setState(null,e),this.lineHeight.setState(null,e),this.fontFamily.setState(void 0,e)),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElementNS(e.namespace,t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof SVGElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in Xn.tags||(Xn.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="svg",e.namespace="http://www.w3.org/2000/svg",m([Nn({attributeName:"alignment-baseline",type:String})],e.prototype,"alignmentBaseline",void 0),m([Nn({attributeName:"clip-path",type:String})],e.prototype,"clipPath",void 0),m([Nn({attributeName:"cursor",type:String})],e.prototype,"cursor",void 0),m([Nn({attributeName:"cx",type:Number})],e.prototype,"cx",void 0),m([Nn({attributeName:"cy",type:Number})],e.prototype,"cy",void 0),m([Nn({attributeName:"d",type:String})],e.prototype,"d",void 0),m([Nn({attributeName:"dx",type:r.Length,state:null})],e.prototype,"dx",void 0),m([Nn({attributeName:"dy",type:r.Length,state:null})],e.prototype,"dy",void 0),m([Nn({attributeName:"edgeMode",type:String})],e.prototype,"edgeMode",void 0),m([Nn({attributeName:"fill",type:St,state:null})],e.prototype,"fill",void 0),m([Nn({attributeName:"fill-rule",type:String})],e.prototype,"fillRule",void 0),m([Nn({attributeName:"flood-color",type:St,state:null})],e.prototype,"floodColor",void 0),m([Nn({attributeName:"flood-opacity",type:Number})],e.prototype,"floodOpacity",void 0),m([Nn({attributeName:"height",type:r.Length,state:null})],e.prototype,"height",void 0),m([Nn({attributeName:"in",type:String})],e.prototype,"in",void 0),m([Nn({attributeName:"in2",type:String})],e.prototype,"in2",void 0),m([Nn({attributeName:"lengthAdjust",type:String})],e.prototype,"lengthAdjust",void 0),m([Nn({attributeName:"mode",type:String})],e.prototype,"mode",void 0),m([Nn({attributeName:"opacity",type:Number})],e.prototype,"opacity",void 0),m([Nn({attributeName:"pointer-events",type:String})],e.prototype,"pointerEvents",void 0),m([Nn({attributeName:"points",type:String})],e.prototype,"points",void 0),m([Nn({attributeName:"preserveAspectRatio",type:Boolean})],e.prototype,"preserveAspectRatio",void 0),m([Nn({attributeName:"r",type:Number})],e.prototype,"r",void 0),m([Nn({attributeName:"result",type:String})],e.prototype,"result",void 0),m([Nn({attributeName:"stdDeviation",type:Number})],e.prototype,"stdDeviation",void 0),m([Nn({attributeName:"stroke",type:St,state:null})],e.prototype,"stroke",void 0),m([Nn({attributeName:"stroke-dasharray",type:String})],e.prototype,"strokeDasharray",void 0),m([Nn({attributeName:"stroke-linecap",type:String})],e.prototype,"strokeLinecap",void 0),m([Nn({attributeName:"stroke-width",type:Number})],e.prototype,"strokeWidth",void 0),m([Nn({attributeName:"text-anchor",type:String})],e.prototype,"textAnchor",void 0),m([Nn({attributeName:"textLength",type:r.Length,state:null})],e.prototype,"textLength",void 0),m([Nn({attributeName:"transform",type:r.Transform,state:null})],e.prototype,"transform",void 0),m([Nn({attributeName:"type",type:String})],e.prototype,"type",void 0),m([Nn({attributeName:"values",type:String})],e.prototype,"values",void 0),m([Nn({attributeName:"viewBox",type:String})],e.prototype,"viewBox",void 0),m([Nn({attributeName:"width",type:r.Length,state:null})],e.prototype,"width",void 0),m([Nn({attributeName:"x",type:Number})],e.prototype,"x",void 0),m([Nn({attributeName:"x1",type:Number})],e.prototype,"x1",void 0),m([Nn({attributeName:"x2",type:Number})],e.prototype,"x2",void 0),m([Nn({attributeName:"y",type:Number})],e.prototype,"y",void 0),m([Nn({attributeName:"y1",type:Number})],e.prototype,"y1",void 0),m([Nn({attributeName:"y2",type:Number})],e.prototype,"y2",void 0),m([nn({propertyNames:"transform",type:r.Transform,state:null})],e.prototype,"cssTransform",void 0),m([nn({propertyNames:"filter",type:String})],e.prototype,"filter",void 0),m([nn({propertyNames:"font-family",type:ft})],e.prototype,"fontFamily",void 0),m([nn({propertyNames:"font-size",type:r.Length,state:null})],e.prototype,"fontSize",void 0),m([nn({propertyNames:"font-stretch",type:String})],e.prototype,"fontStretch",void 0),m([nn({propertyNames:"font-style",type:String})],e.prototype,"fontStyle",void 0),m([nn({propertyNames:"font-variant",type:String})],e.prototype,"fontVariant",void 0),m([nn({propertyNames:"font-weight",type:String})],e.prototype,"fontWeight",void 0),m([nn({propertyNames:"line-height",type:r.Length,state:null})],e.prototype,"lineHeight",void 0),m([nn({propertyNames:"touch-action",type:String})],e.prototype,"touchAction",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("animate")],e,"animate",void 0),m([e.Tag("animateMotion")],e,"animateMotion",void 0),m([e.Tag("animateTransform")],e,"animateTransform",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("canvas")],e,"canvas",void 0),m([e.Tag("circle")],e,"circle",void 0),m([e.Tag("clipPath")],e,"clipPath",void 0),m([e.Tag("defs")],e,"defs",void 0),m([e.Tag("desc")],e,"desc",void 0),m([e.Tag("discard")],e,"discard",void 0),m([e.Tag("ellipse")],e,"ellipse",void 0),m([e.Tag("feBlend")],e,"feBlend",void 0),m([e.Tag("feColorMatrix")],e,"feColorMatrix",void 0),m([e.Tag("feComponentTransfer")],e,"feComponentTransfer",void 0),m([e.Tag("feComposite")],e,"feComposite",void 0),m([e.Tag("feConvolveMatrix")],e,"feConvolveMatrix",void 0),m([e.Tag("feDiffuseLighting")],e,"feDiffuseLighting",void 0),m([e.Tag("feDisplacementMap")],e,"feDisplacementMap",void 0),m([e.Tag("feDistantLight")],e,"feDistantLight",void 0),m([e.Tag("feDropShadow")],e,"feDropShadow",void 0),m([e.Tag("feFlood")],e,"feFlood",void 0),m([e.Tag("feFuncA")],e,"feFuncA",void 0),m([e.Tag("feFuncB")],e,"feFuncB",void 0),m([e.Tag("feFuncG")],e,"feFuncG",void 0),m([e.Tag("feFuncR")],e,"feFuncR",void 0),m([e.Tag("feGaussianBlur")],e,"feGaussianBlur",void 0),m([e.Tag("feImage")],e,"feImage",void 0),m([e.Tag("feMerge")],e,"feMerge",void 0),m([e.Tag("feMergeNode")],e,"feMergeNode",void 0),m([e.Tag("feMorphology")],e,"feMorphology",void 0),m([e.Tag("feOffset")],e,"feOffset",void 0),m([e.Tag("fePointLight")],e,"fePointLight",void 0),m([e.Tag("feSpecularLighting")],e,"feSpecularLighting",void 0),m([e.Tag("feSpotLight")],e,"feSpotLight",void 0),m([e.Tag("feTile")],e,"feTile",void 0),m([e.Tag("feTurbulence")],e,"feTurbulence",void 0),m([e.Tag("filter")],e,"filter",void 0),m([e.Tag("foreignObject")],e,"foreignObject",void 0),m([e.Tag("g")],e,"g",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("image")],e,"image",void 0),m([e.Tag("line")],e,"line",void 0),m([e.Tag("linearGradient")],e,"linearGradient",void 0),m([e.Tag("marker")],e,"marker",void 0),m([e.Tag("mask")],e,"mask",void 0),m([e.Tag("metadata")],e,"metadata",void 0),m([e.Tag("mpath")],e,"mpath",void 0),m([e.Tag("path")],e,"path",void 0),m([e.Tag("pattern")],e,"pattern",void 0),m([e.Tag("polygon")],e,"polygon",void 0),m([e.Tag("polyline")],e,"polyline",void 0),m([e.Tag("radialGradient")],e,"radialGradient",void 0),m([e.Tag("rect")],e,"rect",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("set")],e,"set",void 0),m([e.Tag("stop")],e,"stop",void 0),m([e.Tag("style")],e,"style",void 0),m([e.Tag("svg")],e,"svg",void 0),m([e.Tag("switch")],e,"switch",void 0),m([e.Tag("symbol")],e,"symbol",void 0),m([e.Tag("text")],e,"text",void 0),m([e.Tag("textPath")],e,"textPath",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tspan")],e,"tspan",void 0),m([e.Tag("unknown")],e,"unknown",void 0),m([e.Tag("use")],e,"use",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("view")],e,"view",void 0),e}(Xn),tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Kn),er=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),e instanceof Xn&&e.node.hasAttribute("swim-app")&&(this.materializeViewController(e),this.materializeView(e))},i.prototype.materializeView=function(t){for(var e=t.node.childNodes,i=0;i<e.length;i+=1){var o=e[i],n=this.materializeNode(t,o);null!==n&&this.materializeView(n)}},i.prototype.materializeNode=function(t,e){return void 0!==e.view?e.view:e instanceof Element?this.materializeElement(t,e):e instanceof Text?this.materializeText(t,e):null},i.prototype.materializeElement=function(t,e){var o,n=e.getAttribute("swim-view");if(null!==n&&"function"!=typeof(o=i.eval(n)))throw new TypeError(n);void 0===o&&(o=e instanceof HTMLElement?Zn:e instanceof SVGElement?$n:Xn);var r=new o(e);this.materializeViewController(r);var s=e.getAttribute("key");return t.injectChildView(r,null,null!==s?s:void 0),r},i.prototype.materializeText=function(t,e){return null},i.prototype.materializeViewController=function(t){var e=t.node.getAttribute("swim-controller");if(null!==e){var o=i.eval(e);if("function"!=typeof o)throw new TypeError(e);var n=new o;t.setViewController(n)}},i.global=function(){return new i},i.boot=function(){for(var t=[],e=document.querySelectorAll("[swim-app]"),o=0;o<e.length;o+=1){var n=e[o];if(n instanceof HTMLElement){var r=i.bootElement(n);t.push(r)}}return t},i.bootElement=function(t){var e=t.view;if(void 0===e){var o=void 0,n=t.getAttribute("swim-app");if(null!==n&&""!==n&&"function"!=typeof(o=i.eval(n)))throw new TypeError(n);if(void 0===o&&(o=t instanceof HTMLElement?Zn:t instanceof SVGElement?$n:Xn),e=new o(t),o.mount(e),void 0===e.domService)throw new Error("DomService not available")}return e},i.eval=function(t){for(var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,i=t.split("."),o=0,n=i.length;"object"==typeof e&&null!==e&&o<n;o+=1){e=e[i[o]]}return e},m([e.Lazy],i,"global",null),i}(Zi),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return er.global()},e}(no);io({extends:ir,type:er,observe:!1})(Ln.prototype,"domService");var or=function(){},nr=function(t){function i(){var i=t.call(this)||this;return Object.defineProperty(i,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"parentView",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewAnimators",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"viewFasteners",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"constraints",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"constraintVariables",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(i,"ownViewFrame",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"eventHandlers",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"hoverSet",{value:null,enumerable:!0,configurable:!0}),i}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.mood&&this.mood(e.mood),void 0!==e.moodModifier&&this.moodModifier(e.moodModifier),void 0!==e.theme&&this.theme(e.theme),void 0!==e.themeModifier&&this.themeModifier(e.themeModifier),void 0!==e.hidden&&this.setHidden(e.hidden)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.willObserve=function(t){var e,i=this.viewController;if(null!==i&&void 0!==(e=t.call(this,i)))return e;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];if(void 0!==(e=t.call(this,s)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}var s=this.viewController;return null!==s&&(e=t.call(this,s)),e},i.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),Object.defineProperty(this,"parentView",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.parentView;null!==t&&(0==(this.viewFlags&Xi.TraversingFlag)?t.removeChildView(this):this.setViewFlags(this.viewFlags|Xi.RemovingFlag))},i.prototype.append=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.appendChildView(t,e),t},i.prototype.prepend=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.prependChildView(t,e),t},i.prototype.insert=function(t,e,o){return"function"==typeof t&&(t=i.fromConstructor(t)),this.insertChildView(t,e,o),t},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i)},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Xi.MountedFlag|Xi.PoweredFlag))==(Xi.MountedFlag|Xi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Xi.UpdateMask)&Xi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeViewFastener(e)},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&Xi.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|Xi.MountedFlag|Xi.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners(),this.mountTheme()},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.doMountChildViews=function(){this.forEachChildView((function(t){t.cascadeMount(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&Xi.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~Xi.MountedFlag|Xi.TraversingFlag);try{this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~Xi.ViewFlagMask|Xi.RemovingFlag))},i.prototype.doUnmountChildViews=function(){this.forEachChildView((function(t){t.cascadeUnmount(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&Xi.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|Xi.PoweredFlag|Xi.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doPowerChildViews=function(){this.forEachChildView((function(t){t.cascadePower(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&Xi.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~Xi.PoweredFlag|Xi.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doUnpowerChildViews=function(){this.forEachChildView((function(t){t.cascadeUnpower(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&Xi.CulledFlag)?(this.setViewFlags(e|Xi.CulledFlag),0==(e&Xi.CullFlag)&&this.doCull()):t||0==(e&Xi.CulledFlag)||(this.setViewFlags(e&~Xi.CulledFlag),0==(e&Xi.CullFlag)&&this.doUncull())},i.prototype.cascadeCull=function(){0==(this.viewFlags&Xi.CullFlag)&&(this.setViewFlags(this.viewFlags|Xi.CullFlag),0==(this.viewFlags&Xi.CulledFlag)&&this.doCull())},i.prototype.doCull=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willCull(),this.onCull(),this.doCullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doCullChildViews=function(){this.forEachChildView((function(t){t.cascadeCull(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&Xi.CullFlag)&&(this.setViewFlags(this.viewFlags&~Xi.CullFlag),0==(this.viewFlags&Xi.CulledFlag)&&this.doUncull())},i.prototype.doUncull=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willUncull(),this.doUncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doUncullChildViews=function(){this.forEachChildView((function(t){t.cascadeUncull(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},i.prototype.cullViewFrame=function(t){void 0===t&&(t=this.viewFrame),this.setCulled(!t.intersects(this.viewBounds))},i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&Xi.NeedsAnimate)&&(t&=~Xi.NeedsAnimate),t},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);t&=~Xi.NeedsProcess,t|=this.viewFlags&Xi.UpdateMask,0!=((t=this.needsProcess(t,i))&Xi.ProcessMask)&&this.doProcess(t,i)},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~(Xi.NeedsProcess|Xi.NeedsProject)|Xi.TraversingFlag|Xi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Xi.NeedsResize)&&(i|=Xi.NeedsResize,this.setViewFlags(this.viewFlags&~Xi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Xi.NeedsScroll)&&(i|=Xi.NeedsScroll,this.setViewFlags(this.viewFlags&~Xi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Xi.NeedsChange)&&(i|=Xi.NeedsChange,this.setViewFlags(this.viewFlags&~Xi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Xi.NeedsAnimate)&&(i|=Xi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Xi.NeedsAnimate),this.willAnimate(e)),this.onProcess(i,e),0!=(i&Xi.NeedsResize)&&this.onResize(e),0!=(i&Xi.NeedsScroll)&&this.onScroll(e),0!=(i&Xi.NeedsChange)&&this.onChange(e),0!=(i&Xi.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&Xi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Xi.NeedsChange)&&this.didChange(e),0!=(i&Xi.NeedsScroll)&&this.didScroll(e),0!=(i&Xi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.ProcessingFlag))}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties(),this.updateTheme()},i.prototype.doProcessChildViews=function(t,e){0!=(t&Xi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);t&=~Xi.NeedsDisplay,t|=this.viewFlags&Xi.UpdateMask,0!=((t=this.needsDisplay(t,i))&Xi.DisplayMask)&&this.doDisplay(t,i)},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Xi.NeedsDisplay|Xi.TraversingFlag|Xi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Xi.NeedsLayout)&&(i|=Xi.NeedsLayout,this.setViewFlags(this.viewFlags&~Xi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Xi.NeedsRender)&&(i|=Xi.NeedsRender,this.setViewFlags(this.viewFlags&~Xi.NeedsRender),this.willRender(e)),0!=((this.viewFlags|t)&Xi.NeedsRasterize)&&(i|=Xi.NeedsRasterize,this.setViewFlags(this.viewFlags&~Xi.NeedsRasterize),this.willRasterize(e)),0!=((this.viewFlags|t)&Xi.NeedsComposite)&&(i|=Xi.NeedsComposite,this.setViewFlags(this.viewFlags&~Xi.NeedsComposite),this.willComposite(e)),this.onDisplay(i,e),0!=(i&Xi.NeedsLayout)&&this.onLayout(e),0!=(i&Xi.NeedsRender)&&this.onRender(e),0!=(i&Xi.NeedsRasterize)&&this.onRasterize(e),0!=(i&Xi.NeedsComposite)&&this.onComposite(e),this.doDisplayChildViews(i,e),0!=(i&Xi.NeedsComposite)&&this.didComposite(e),0!=(i&Xi.NeedsRasterize)&&this.didRasterize(e),0!=(i&Xi.NeedsRender)&&this.didRender(e),0!=(i&Xi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.DisplayingFlag))}},i.prototype.willRender=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRender&&e.viewWillRender(t,this);var i=this.viewObserverCache.viewWillRenderObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRender(t,this)}},i.prototype.onRender=function(t){},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}var o=this.viewController;null!==o&&void 0!==o.viewDidRender&&o.viewDidRender(t,this)},i.prototype.willRasterize=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillRasterize&&e.viewWillRasterize(t,this);var i=this.viewObserverCache.viewWillRasterizeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRasterize(t,this)}},i.prototype.onRasterize=function(t){},i.prototype.didRasterize=function(t){var e=this.viewObserverCache.viewDidRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRasterize(t,this)}var o=this.viewController;null!==o&&void 0!==o.viewDidRasterize&&o.viewDidRasterize(t,this)},i.prototype.willComposite=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillComposite&&e.viewWillComposite(t,this);var i=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}var o=this.viewController;null!==o&&void 0!==o.viewDidComposite&&o.viewDidComposite(t,this)},i.prototype.doDisplayChildViews=function(t,e){0==(t&Xi.DisplayMask)||this.isHidden()||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},i.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},i.prototype.modifyMood=function(t,e,i){if(this.moodModifier.takesPrecedence(Xi.Intrinsic)){var o=this.moodModifier.getStateOr(de.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.moodModifier.setState(n,Xi.Intrinsic),this.changeMood(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(Qt.timing,s,!1):a.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(Xi.NeedsChange)}},i.prototype.modifyTheme=function(t,e,i){if(this.themeModifier.takesPrecedence(Xi.Intrinsic)){var o=this.themeModifier.getStateOr(de.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.themeModifier.setState(n,Xi.Intrinsic),this.changeTheme(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(Qt.timing,s,!1):a.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(Xi.NeedsChange)}},i.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.takesPrecedence(Xi.Intrinsic)){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setState(n,Xi.Intrinsic)}}else this.mood.setInherited(!0)}},i.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.takesPrecedence(Xi.Intrinsic)){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;void 0!==o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setState(n,Xi.Intrinsic)}}else this.theme.setInherited(!0)}},i.prototype.updateTheme=function(){this.changeMood(),this.changeTheme();var t=this.theme.state,e=this.mood.state;null!==t&&null!==e&&this.applyTheme(t,e)},i.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.themeViewAnimators(e,i,o)},i.prototype.mountTheme=function(){},i.prototype.isHidden=function(){return 0!=(this.viewFlags&Xi.HiddenMask)},i.prototype.setHidden=function(t){var e=this.viewFlags;t&&0==(e&Xi.HiddenFlag)?(this.setViewFlags(e|Xi.HiddenFlag),0==(e&Xi.HideFlag)&&this.doHide()):t||0==(e&Xi.HiddenFlag)||(this.setViewFlags(e&~Xi.HiddenFlag),0==(e&Xi.HideFlag)&&this.doUnhide())},i.prototype.cascadeHide=function(){0==(this.viewFlags&Xi.HideFlag)&&(this.setViewFlags(this.viewFlags|Xi.HideFlag),0==(this.viewFlags&Xi.HiddenFlag)&&this.doHide())},i.prototype.doHide=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willSetHidden(!0),this.onSetHidden(!0),this.doHideChildViews(),this.didSetHidden(!0)}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doHideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeHide(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.cascadeUnhide=function(){0!=(this.viewFlags&Xi.HideFlag)&&(this.setViewFlags(this.viewFlags&~Xi.HideFlag),0==(this.viewFlags&Xi.HiddenFlag)&&this.doUnhide())},i.prototype.doUnhide=function(){this.setViewFlags(this.viewFlags|Xi.TraversingFlag);try{this.willSetHidden(!1),this.doUnhideChildViews(),this.onSetHidden(!1),this.didSetHidden(!1)}finally{this.setViewFlags(this.viewFlags&~Xi.TraversingFlag)}},i.prototype.doUnhideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeUnhide(),0!=(t.viewFlags&Xi.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~Xi.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.willSetHidden=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetHidden&&r.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(Xi.NeedsRender)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidSetHidden&&r.viewDidSetHidden(t,this)},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},Object.defineProperty(this,"viewServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},Object.defineProperty(this,"viewProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},Object.defineProperty(this,"viewAnimators",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},Object.defineProperty(this,"viewFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}),this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),Object.defineProperty(this,"constraints",{value:o,enumerable:!0,configurable:!0}))},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}),this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),Object.defineProperty(this,"constraintVariables",{value:o,enumerable:!0,configurable:!0}))},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(void 0!==t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"viewFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof i||e instanceof fr?e.viewFrame:r.R2Box.undefined()}return t},enumerable:!1,configurable:!0}),i.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(i.prototype,"ownViewBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.deriveViewBounds=function(){var t=this.ownViewBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.viewBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.viewFrame),t},Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),i.prototype.deriveHitBounds=function(){var t;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.hitBounds;t=void 0===t?o:t.union(o)}}),this),void 0===t&&(t=this.viewBounds),t},i.prototype.hitTest=function(t,e,i){if(this.isHidden()||this.isCulled())return null;var o=this.extendViewContext(i);return this.doHitTest(t,e,o)},i.prototype.doHitTest=function(t,e,o){return this.forEachChildView((function(n){if(n instanceof i&&!n.isHidden()&&!n.isCulled()&&n.hitBounds.contains(t,e)){var r=n.hitTest(t,e,o);if(null!==r)return r}}),this)||null},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=this.clientTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),i.prototype.on=function(t,e,i){var o=this.eventHandlers;null===o&&(o={},Object.defineProperty(this,"eventHandlers",{value:o,enumerable:!0,configurable:!0}));var n,r=o[t],s="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,a=i&&"object"==typeof i&&i.passive||!1,l=i&&"object"==typeof i&&i.once||!1;if(void 0===r)r=[n={listener:e,capture:s,passive:a,once:l}],o[t]=r;else{for(var u=r.length,h=0;h<u&&((n=r[h]).listener!==e||n.capture!==s);)h+=1;h<u?(n.passive=a,n.once=l):(n={listener:e,capture:s,passive:a,once:l},r.push(n))}return this},i.prototype.off=function(t,e,i){var o=this.eventHandlers;if(null!==o){var n=o[t];if(void 0!==n)for(var r="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,s=n.length,a=0;a<s;){var l=n[a];if(l.listener===e&&l.capture===r){n.splice(a,1),0===n.length&&delete o[t];break}a+=1}}return this},i.prototype.handleEvent=function(t){var e=t.type,i=this.eventHandlers;if(null!==i){var o=i[e];if(void 0!==o){for(var n=0;n<o.length;){var r=o[n];if(!r.capture){var s=r.listener;if("function"==typeof s?s.call(this,t):"object"==typeof s&&null!==s&&s.handleEvent(t),r.once){o.splice(n,1);continue}}n+=1}0===o.length&&delete i[e]}}"mouseover"===e?this.onMouseOver(t):"mouseout"===e?this.onMouseOut(t):"pointerover"===e?this.onPointerOver(t):"pointerout"===e&&this.onPointerOut(t)},i.prototype.bubbleEvent=function(t){var e;if(this.handleEvent(t),t.bubbles&&!t.cancelBubble){var o=this.parentView;e=o instanceof i||o instanceof fr?o.bubbleEvent(t):o}else e=null;return e},i.prototype.dispatchEvent=function(t){t.targetView=this;var e=this.bubbleEvent(t);return null!==e?e.dispatchEvent(t):!t.cancelBubble},i.prototype.isHovering=function(){var t=this.hoverSet;return null!==t&&0!==Object.keys(t).length},i.prototype.onMouseOver=function(t){var e=this.hoverSet;if(null===e&&(e={},Object.defineProperty(this,"hoverSet",{value:e,enumerable:!0,configurable:!0})),void 0===e.mouse){e.mouse=null;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseenter){var o=new MouseEvent("mouseenter",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onMouseOut=function(t){var e=this.hoverSet;if(null!==e&&void 0!==e.mouse){delete e.mouse;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseleave){var o=new MouseEvent("mouseleave",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onPointerOver=function(t){var e=this.hoverSet;null===e&&(e={},Object.defineProperty(this,"hoverSet",{value:e,enumerable:!0,configurable:!0}));var i=""+t.pointerId;if(void 0===e[i]){e[i]=null;var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerenter){var n=new PointerEvent("pointerenter",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}},i.prototype.onPointerOut=function(t){var e=this.hoverSet;if(null!==e){var i=""+t.pointerId;if(void 0!==e[i]){delete e[i];var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerleave){var n=new PointerEvent("pointerleave",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}}},i.fromConstructor=function(t){if(t.prototype instanceof Xi)return new t;throw new TypeError(""+t)},i.uncullFlags=Xi.uncullFlags|Xi.NeedsRender,i.insertChildFlags=Xi.insertChildFlags|Xi.NeedsRender,i.removeChildFlags=Xi.removeChildFlags|Xi.NeedsRender,m([ho({type:de,state:null})],i.prototype,"moodModifier",void 0),m([ho({type:de,state:null})],i.prototype,"themeModifier",void 0),i}(Xi);Object.defineProperty(nr.prototype,"renderer",{get:function(){var t=this.parentView;return t instanceof nr||t instanceof fr?t.renderer:null},enumerable:!0,configurable:!0}),Object.defineProperty(nr.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!0,configurable:!0});var rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.isHidden=function(){var t=this.view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this.view;return null!==t?t.viewFrame:r.R2Box.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.view;return null!==t?t.viewBounds:r.R2Box.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.view;return null!==t?t.hitBounds:r.R2Box.undefined()},enumerable:!1,configurable:!0}),e}(Ki),sr=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childViews",{value:[],enumerable:!0}),Object.defineProperty(e,"childViewMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof nr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof nr))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof nr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.doMountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doPowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.deriveViewBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.viewBounds;r.isDefined()&&(t=void 0!==t?t.union(r):r)}}return void 0===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.childViews,r=n.length-1;r>=0;r-=1){var s=n[r];if(s instanceof nr&&!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(o=s.hitTest(t,e,i)))break}return o},e.create=function(){return new e},e}(nr),ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(or),lr=function(){function t(){Object.defineProperty(this,"precision",{value:-1,enumerable:!0,configurable:!0}),this.x0=NaN,this.y0=NaN,this.x1=NaN,this.y1=NaN,this.d=""}return t.prototype.setPrecision=function(t){Object.defineProperty(this,"precision",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(t.prototype,"anglePrecision",{get:function(){var t=this.precision;return t>0?Math.max(5,t):t},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(t,e){this.d+="M"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision),this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.lineTo=function(t,e){this.d+="L"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision),this.x1=t,this.y1=e},t.prototype.quadraticCurveTo=function(t,e,i,o){this.d+="Q"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision),this.x1=i,this.y1=o},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.d+="C"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision)+","+s.Format.decimal(n,this.precision)+","+s.Format.decimal(r,this.precision),this.x1=n,this.y1=r},t.prototype.arcTo=function(e,i,o,n,r){var a=this.x1,l=this.y1,u=o-e,h=n-i,p=a-e,d=l-i,c=p*p+d*d;if(r<0)throw new Error("negative radius: "+r);if(isNaN(this.x1))this.d+="M"+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else if(c>t.Epsilon)if(Math.abs(d*u-h*p)>t.Epsilon&&0!==r){var v=o-a,f=n-l,y=u*u+h*h,g=v*v+f*f,w=Math.sqrt(y),m=Math.sqrt(c),b=r*Math.tan((Math.PI-Math.acos((y+c-g)/(2*w*m)))/2),S=b/m,C=b/w;Math.abs(S-1)>t.Epsilon&&(this.d+="L"+s.Format.decimal(e+S*p,this.precision)+","+s.Format.decimal(i+S*d,this.precision)),e+=C*u,i+=C*h;var P=s.Format.decimal(r,this.precision);this.d+="A"+P+","+P+",0,0,"+(d*v>p*f?"1":"0")+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i}else this.d+="L"+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else;},t.prototype.arc=function(e,i,o,n,r,a){void 0===a&&(a=!1);var l=o*Math.cos(n),u=o*Math.sin(n),h=e+l,p=i+u,d=1^+a,c=a?n-r:r-n;if(o<0)throw new Error("negative radius: "+o);if(isNaN(this.x1)?this.d+="M"+s.Format.decimal(h,this.precision)+","+s.Format.decimal(p,this.precision):(Math.abs(this.x1-h)>t.Epsilon||Math.abs(this.y1-p)>t.Epsilon)&&(this.d+="L"+s.Format.decimal(h,this.precision)+","+s.Format.decimal(p,this.precision)),0!==o){c<0&&(c=c%(2*Math.PI)+2*Math.PI);var v=s.Format.decimal(o,this.precision);if(c>2*Math.PI-t.Epsilon)this.d+="A"+v+","+v+",0,1,"+(d?"1":"0")+","+s.Format.decimal(e-l,this.precision)+","+s.Format.decimal(i-u,this.precision),this.d+="A"+s.Format.decimal(o,this.precision)+","+s.Format.decimal(o,this.precision)+",0,1,"+(d?"1":"0")+","+s.Format.decimal(h,this.precision)+","+s.Format.decimal(p,this.precision),this.x1=h,this.y1=p;else if(c>t.Epsilon){var f=e+o*Math.cos(r),y=i+o*Math.sin(r);this.d+="A"+v+","+v+",0,"+(c>=Math.PI?"1":"0")+","+(d?"1":"0")+","+s.Format.decimal(f,this.precision)+","+s.Format.decimal(y,this.precision),this.x1=f,this.y1=y}}},t.prototype.rect=function(t,e,i,o){this.d+="M"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+"h"+s.Format.decimal(i,this.precision)+"v"+s.Format.decimal(o,this.precision)+"h"+s.Format.decimal(-i,this.precision)+"Z",this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.ellipse=function(t,e,i,o,n,r,a,l){var u=a-r;!0===l&&u>0?u-=2*Math.PI:!1===l&&u<0&&(u+=2*Math.PI);var h=Math.cos(n),p=Math.sin(n),d=Math.cos(a),c=Math.sin(a),v=h*i*d-p*o*c+t,f=p*i*d+h*o*c+e;Math.abs(u),Math.PI;this.d+="A"+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision)+","+s.Format.decimal(n,this.anglePrecision),s.Format.decimal(v,this.precision),s.Format.decimal(f,this.precision),this.x1=v,this.y1=f},t.prototype.closePath=function(){isNaN(this.x1)||(this.d+="Z",this.x1=this.x0,this.y1=this.y0)},t.prototype.toString=function(){return this.d},t.Epsilon=1e-6,t}(),ur=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"context",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(ar),hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.getLook=function(t,e){var i,o=this.theme;return null!==o&&(null==e&&(e=this.mood),null!==e&&(i=o.get(t,e))),i},e.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme;return null!==n?(null==e&&(e=this.mood),o=null!==e?n.getOr(t,e,i):i):o=i,o},e}(ar),pr=function(){function t(t){Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precision",{value:-1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathContext",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathView",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"pathFlags",{value:0,enumerable:!0,configurable:!0}),this.fillStyle="",this.strokeStyle=""}return t.prototype.setPrecision=function(t){Object.defineProperty(this,"precision",{value:t,enumerable:!0,configurable:!0})},t.prototype.getPathContext=function(){var t=this.pathContext;if(null==t)throw new Error("no path");return t},t.prototype.getOrCreatePathContext=function(){var t=this.pathContext;if(null===t){if(t=this.createPathContext(),Object.defineProperty(this,"pathContext",{value:t,enumerable:!0,configurable:!0}),null===this.pathView||0!==this.pathFlags){this.finalizePath();var e=this.nextPathView();this.setPathView(e)}this.setPathFlags(0)}return t},t.prototype.createPathContext=function(){var t=new lr;return t.setPrecision(this.precision),t},t.prototype.setPathView=function(t){Object.defineProperty(this,"pathView",{value:t,enumerable:!0,configurable:!0})},t.prototype.nextPathView=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(t=null;null!==e;){if(e instanceof SVGPathElement){t=$n.fromNode(e);break}e=e.nextSibling}}return t},t.prototype.finalizePath=function(){var e=this.pathView;if(null!==e){var i=this.pathFlags;if(0==(i&t.FillFlag)){var o=e.getAttributeAnimator("fill");null!==o&&o.setState(null,Xi.Intrinsic)}if(0==(i&t.FillRuleFlag)){var n=e.getAttributeAnimator("fillRule");null!==n&&n.setState(void 0,Xi.Intrinsic)}if(0==(i&t.StrokeFlag)){var r=e.getAttributeAnimator("stroke");null!==r&&r.setState(null,Xi.Intrinsic)}if(0==(i&t.PathFlag)){var s=e.getAttributeAnimator("d");null!==s&&s.setState(void 0,Xi.Intrinsic)}}},t.prototype.setPathFlags=function(t){Object.defineProperty(this,"pathFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.beginPath=function(){Object.defineProperty(this,"pathContext",{value:null,enumerable:!0,configurable:!0})},t.prototype.moveTo=function(t,e){this.getOrCreatePathContext().moveTo(t,e)},t.prototype.lineTo=function(t,e){this.getPathContext().lineTo(t,e)},t.prototype.quadraticCurveTo=function(t,e,i,o){this.getPathContext().quadraticCurveTo(t,e,i,o)},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.getPathContext().bezierCurveTo(t,e,i,o,n,r)},t.prototype.arcTo=function(t,e,i,o,n){this.getPathContext().arcTo(t,e,i,o,n)},t.prototype.arc=function(t,e,i,o,n,r){this.getOrCreatePathContext().arc(t,e,i,o,n,r)},t.prototype.ellipse=function(t,e,i,o,n,r,s,a){this.getOrCreatePathContext().ellipse(t,e,i,o,n,r,s,a)},t.prototype.rect=function(t,e,i,o){this.getOrCreatePathContext().rect(t,e,i,o)},t.prototype.closePath=function(){var t=this.pathContext;null!==t&&t.closePath()},t.prototype.fill=function(e){var i=this.fillStyle;if("string"!=typeof i)throw new Error("unsupported fill style: "+i);var o=this.pathView;null!==o&&0!=(this.pathFlags&t.FillFlag)&&(this.finalizePath(),o=this.nextPathView(),this.setPathView(o));var n=!1;if(null===o&&(o=$n.path.create(),this.setPathView(o),n=!0),o.fill.setState(i,Xi.Intrinsic),this.setPathFlags(this.pathFlags|t.FillFlag),void 0!==e&&(o.fillRule.setState(e,Xi.Intrinsic),this.setPathFlags(this.pathFlags|t.FillRuleFlag)),0==(this.pathFlags&t.PathFlag)){var r=this.getPathContext().toString();o.d.setState(r,Xi.Intrinsic),this.setPathFlags(this.pathFlags|t.PathFlag)}n&&this.view.appendChildView(o)},t.prototype.stroke=function(){var e=this.strokeStyle;if("string"!=typeof e)throw new Error("unsupported stroke style: "+e);var i=this.pathView;null!==i&&0!=(this.pathFlags&t.StrokeFlag)&&(this.finalizePath(),i=this.nextPathView(),this.setPathView(i));var o=!1;if(null===i&&(i=$n.path.create(),this.setPathView(i),o=!0),i.stroke.setState(e,Xi.Intrinsic),this.setPathFlags(this.pathFlags|t.StrokeFlag),0==(this.pathFlags&t.PathFlag)){var n=this.getPathContext().toString();i.d.setState(n,Xi.Intrinsic),this.setPathFlags(this.pathFlags|t.PathFlag)}o&&this.view.appendChildView(i)},t.prototype.beginSvg=function(){for(var t=null,e=this.view.node.firstChild;null!==e;){if(e instanceof SVGPathElement){t=$n.fromNode(e);break}e=e.nextSibling}this.setPathView(t),this.setPathFlags(0)},t.prototype.finalizeSvg=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(null===t.fill.state&&null===t.stroke.state&&(Object.defineProperty(this,"pathView",{value:null,enumerable:!0,configurable:!0}),t.remove()),t=null;null!==e;){var i=e.view;e=e.nextSibling,void 0!==i&&i.remove()}}},t.FillFlag=1,t.FillRuleFlag=2,t.StrokeFlag=4,t.PathFlag=8,t}(),dr=function(t){function e(e,i,o){var n=t.call(this)||this;return Object.defineProperty(n,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(n,"theme",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(n,"mood",{value:o,enumerable:!0,configurable:!0}),n}return w(e,t),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(hr),cr=function(t){function e(e,i,o,n){var r=t.call(this)||this;return Object.defineProperty(r,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(r,"pixelRatio",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(r,"theme",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(r,"mood",{value:n,enumerable:!0,configurable:!0}),r}return w(e,t),e}(hr),vr=function(t){function e(e,i){var o=t.call(this)||this;return Object.defineProperty(o,"context",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"pixelRatio",{value:void 0!==i?i:window.devicePixelRatio||1,enumerable:!0,configurable:!0}),o}return w(e,t),e}(or),fr=function(t){function i(e){var o=t.call(this,e)||this;return Object.defineProperty(o,"graphicsViews",{value:[],enumerable:!0}),Object.defineProperty(o,"renderer",{value:o.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(o,"viewFrame",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),Object.defineProperty(o,"canvasFlags",{value:i.ClickEventsFlag,enumerable:!0,configurable:!0}),Object.defineProperty(o,"eventNode",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o,"mouse",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"pointers",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"touches",{value:null,enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),o.onDblClick=o.onDblClick.bind(o),o.onContextMenu=o.onContextMenu.bind(o),o.onWheel=o.onWheel.bind(o),o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initCanvas(),o}return w(i,t),i.prototype.initCanvas=function(){this.position.setState("absolute",Xi.Intrinsic)},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.renderer&&this.setRenderer(e.renderer),void 0!==e.clickEventsEnabled&&this.clickEventsEnabled(e.clickEventsEnabled),void 0!==e.wheelEventsEnabled&&this.wheelEventsEnabled(e.wheelEventsEnabled),void 0!==e.mouseEventsEnabled&&this.mouseEventsEnabled(e.mouseEventsEnabled),void 0!==e.pointerEventsEnabled&&this.pointerEventsEnabled(e.pointerEventsEnabled),void 0!==e.touchEventsEnabled&&this.touchEventsEnabled(e.touchEventsEnabled)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t+=this.graphicsViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e.push.apply(e,this.graphicsViews),e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}var n=this.graphicsViews;return 0!==n.length?n[0]:null},i.prototype.lastChildView=function(){var t=this.graphicsViews;if(0!==t.length)return t[t.length-1];for(var e=this.node.childNodes,i=e.length-1;i>=0;i-=1){var o=e[i].view;if(void 0!==o)return o}return null},i.prototype.nextChildView=function(t){var e=this.graphicsViews;if(t instanceof Ln&&t.parentView===this){for(var i=t.node;;){if(null===(i=i.nextSibling))break;if(void 0!==i.view)return i.view}if(0!==e.length)return e[0]}else if(t instanceof nr){var o=e.indexOf(t);if(o>=0&&o+1<e.length)return e[o+1]}return null},i.prototype.previousChildView=function(t){var e=null;if(t instanceof nr){var i=this.graphicsViews,o=i.indexOf(t);if(o-1>=0)return i[o-1];if(0===o&&null!==(e=this.node.lastChild)&&void 0!==e.view)return e.view}else t instanceof Ln&&t.parentView===this&&(e=t.node);if(null!==e)for(;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n];if(void 0!==(a=r.view)&&void 0!==(i=t.call(e,a)))break;o[n]===r&&(n+=1)}var s=this.graphicsViews;for(n=0;n<s.length;){var a=s[n];if(void 0!==(i=t.call(e,a)))break;s[n]===a&&(n+=1)}return i},i.prototype.setChildView=function(e,i){return i instanceof nr?this.setGraphicsView(e,i):t.prototype.setChildView.call(this,e,i)},i.prototype.setGraphicsView=function(t,e){var i=null,o=this.graphicsViews;null!==e&&(e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildView(t);if(r instanceof nr)n=o.indexOf(r),i=o[n+1],this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0);else if(r instanceof Ln){var s=r.node,a=s.nextSibling;i=null!==a&&a.view||null,this.willRemoveChildView(r),this.willRemoveChildNode(s),r.setParentView(null,this),this.removeChildViewMap(r),this.node.removeChild(s),this.onRemoveChildNode(s),this.onRemoveChildView(r),this.didRemoveChildNode(s),this.didRemoveChildView(r),r.setKey(void 0)}else if(null!==r)throw new TypeError(""+r);return null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},i.prototype.append=function(t,e){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.appendChildView(t,e),t},i.prototype.appendChildView=function(e,i){e instanceof nr?this.appendGraphicsView(e,i):t.prototype.appendChildView.call(this,e,i)},i.prototype.appendGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.graphicsViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.prepend=function(t,e){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.prependChildView(t,e),t},i.prototype.prependChildView=function(e,i){e instanceof nr?this.prependGraphicsView(e):t.prototype.prependChildView.call(this,e)},i.prototype.prependGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.graphicsViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},i.prototype.insert=function(t,e,i){return t instanceof Node?t=Ln.fromNode(t):"function"==typeof t?t=Ln.fromConstructor(t):"string"==typeof t&&(t=Zn.fromTag(t)),this.insertChild(t,e,i),t},i.prototype.insertChildView=function(e,i,o){e instanceof nr?this.insertGraphicsView(e,i,o):t.prototype.insertChildView.call(this,e,i,o)},i.prototype.insertGraphicsView=function(t,e,i){if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.graphicsViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.removeChildView=function(e){var i;if("string"==typeof e){if(null===(i=this.getChildView(e)))return null}else i=e;if(i instanceof nr?this.removeGraphicsView(i):t.prototype.removeChildView.call(this,i),"string"==typeof e)return i},i.prototype.removeGraphicsView=function(t){if(t.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(t),t.setParentView(null,this),this.removeChildViewMap(t);var e=this.graphicsViews,i=e.indexOf(t);i>=0&&e.splice(i,1),this.onRemoveChildView(t),this.didRemoveChildView(t),t.setKey(void 0)},i.prototype.removeAll=function(){t.prototype.removeAll.call(this);for(var e=this.graphicsViews;;){var i=e.length;if(!(i>0))break;var o=e[i-1];this.willRemoveChildView(o),o.setParentView(null,this),this.removeChildViewMap(o),e.pop(),this.onRemoveChildView(o),this.didRemoveChildView(o),o.setKey(void 0)}},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),i.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},i.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.node.getContext("2d")))return new cr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.node.getContext("webgl")))return new vr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},i.prototype.setCanvasFlags=function(t){Object.defineProperty(this,"canvasFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents(this.eventNode)},i.prototype.doMountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeMount(),0==(o.viewFlags&Xi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeMount(),0==(o.viewFlags&Xi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}},i.prototype.onUnmount=function(){this.detachEvents(this.eventNode),t.prototype.onUnmount.call(this)},i.prototype.doUnmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnmount(),0==(o.viewFlags&Xi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnmount(),0==(o.viewFlags&Xi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}},i.prototype.doPowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadePower(),0==(o.viewFlags&Xi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadePower(),0==(o.viewFlags&Xi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}},i.prototype.doUnpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnpower(),0==(o.viewFlags&Xi.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnpower(),0==(o.viewFlags&Xi.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~Xi.RemovingFlag),this.removeChildView(o))}},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(Xi.MountedFlag|Xi.PoweredFlag))==(Xi.MountedFlag|Xi.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&Xi.UpdateMask)&Xi.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},i.prototype.needsProcess=function(t,e){return 0!=(t&Xi.ProcessMask)&&this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite),t},i.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeCanvas(this.node),this.resetRenderer(),this.requireUpdate(Xi.NeedsLayout|Xi.NeedsRender|Xi.NeedsComposite)},i.prototype.onScroll=function(e){t.prototype.onScroll.call(this,e),this.setCulled(!this.intersectsViewport())},i.prototype.doProcessChildViews=function(t,e){0!=(t&Xi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(s=o[n].view)||(i.call(this,s,t,e),0==(s.viewFlags&Xi.RemovingFlag))?n+=1:(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}var r=this.graphicsViews;for(n=0;n<r.length;){var s=r[n];i.call(this,s,t,e),0==(s.viewFlags&Xi.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}},i.prototype.needsDisplay=function(t,e){return t|=Xi.NeedsRender|Xi.NeedsComposite},i.prototype.doDisplay=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Xi.NeedsDisplay|Xi.TraversingFlag|Xi.DisplayingFlag);try{this.willDisplay(i,e),0!=((this.viewFlags|t)&Xi.NeedsLayout)&&(i|=Xi.NeedsLayout,this.setViewFlags(this.viewFlags&~Xi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Xi.NeedsRender)&&(i|=Xi.NeedsRender,this.setViewFlags(this.viewFlags&~Xi.NeedsRender),this.willRender(e)),0!=((this.viewFlags|t)&Xi.NeedsRasterize)&&(i|=Xi.NeedsRasterize,this.setViewFlags(this.viewFlags&~Xi.NeedsRasterize),this.willRasterize(e)),0!=((this.viewFlags|t)&Xi.NeedsComposite)&&(i|=Xi.NeedsComposite,this.setViewFlags(this.viewFlags&~Xi.NeedsComposite),this.willComposite(e)),this.onDisplay(i,e),0!=(i&Xi.NeedsLayout)&&this.onLayout(e),0!=(i&Xi.NeedsRender)&&this.onRender(e),0!=(i&Xi.NeedsRasterize)&&this.onRasterize(e),0!=(i&Xi.NeedsComposite)&&this.onComposite(e),this.doDisplayChildViews(i,e),0!=(i&Xi.NeedsComposite)&&this.didComposite(e),0!=(i&Xi.NeedsRasterize)&&this.didRasterize(e),0!=(i&Xi.NeedsRender)&&this.didRender(e),0!=(i&Xi.NeedsLayout)&&this.didLayout(e),this.didDisplay(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.DisplayingFlag))}},i.prototype.didDisplay=function(e,i){this.detectHitTargets(),t.prototype.didDisplay.call(this,e,i)},i.prototype.willRender=function(t){var e=this.viewController;null!==e&&e.viewWillRender(t,this);var i=this.viewObserverCache.viewWillRenderObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRender(t,this)}},i.prototype.onRender=function(t){this.clearCanvas()},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}var o=this.viewController;null!==o&&o.viewDidRender(t,this)},i.prototype.willRasterize=function(t){var e=this.viewController;null!==e&&e.viewWillRasterize(t,this);var i=this.viewObserverCache.viewWillRasterizeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillRasterize(t,this)}},i.prototype.onRasterize=function(t){},i.prototype.didRasterize=function(t){var e=this.viewObserverCache.viewDidRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRasterize(t,this)}var o=this.viewController;null!==o&&o.viewDidRasterize(t,this)},i.prototype.willComposite=function(t){var e=this.viewController;null!==e&&e.viewWillComposite(t,this);var i=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}var o=this.viewController;null!==o&&o.viewDidComposite(t,this)},i.prototype.doDisplayChildViews=function(t,e){0==(t&Xi.DisplayMask)||this.isHidden()||this.isCulled()||(this.willDisplayChildViews(t,e),this.onDisplayChildViews(t,e),this.didDisplayChildViews(t,e))},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(s=o[n].view)||(i.call(this,s,t,e),0==(s.viewFlags&Xi.RemovingFlag))?n+=1:(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}var r=this.graphicsViews;for(n=0;n<r.length;){var s=r[n];i.call(this,s,t,e),0==(s.viewFlags&Xi.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}},i.prototype.isHidden=function(){return 0!=(this.viewFlags&Xi.HiddenFlag)},i.prototype.setHidden=function(t){0!=(this.viewFlags&Xi.HiddenFlag)!==t&&(this.willSetHidden(t),t?this.setViewFlags(this.viewFlags|Xi.HiddenFlag):this.setViewFlags(this.viewFlags&~Xi.HiddenFlag),this.onSetHidden(t),this.didSetHidden(t))},i.prototype.willSetHidden=function(t){var e=this.viewController;null!==e&&void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetHidden&&r.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}var r=this.viewController;null!==r&&void 0!==r.viewDidSetHidden&&r.viewDidSetHidden(t,this)},i.prototype.extendViewContext=function(t){var e=Object.create(t);return e.renderer=this.renderer,e},i.prototype.setViewFrame=function(t){},Object.defineProperty(i.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(t,e,i){if(this.isHidden()||this.isCulled())return null;void 0===i&&(i=this.superViewContext);var o=this.extendViewContext(i);return this.doHitTest(t,e,o)},i.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.graphicsViews,r=n.length-1;r>=0;r-=1){var s=n[r];if(!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(o=s.hitTest(t,e,i)))break}return o},i.prototype.detectHitTargets=function(t){if(0!=(this.canvasFlags&i.MouseEventsFlag)){var e=this.mouse;null!==e&&(void 0===t&&(t=this.clientBounds),this.detectMouseTarget(e,this.clientBounds))}if(0!=(this.canvasFlags&i.PointerEventsFlag)){var o=this.pointers;for(var n in o){var r=o[n];void 0===t&&(t=this.clientBounds),this.detectPointerTarget(r,t)}}},i.prototype.setEventNode=function(t){null===t&&(t=this.node);var e=this.eventNode;e!==t&&(this.detachEvents(e),Object.defineProperty(this,"eventNode",{value:t,enumerable:!0,configurable:!0}),this.attachEvents(t))},i.prototype.clickEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.ClickEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.ClickEventsFlag),this.attachClickEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.ClickEventsFlag),this.detachClickEvents(this.eventNode)),this)},i.prototype.wheelEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.WheelEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.WheelEventsFlag),this.attachWheelEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.WheelEventsFlag),this.detachWheelEvents(this.eventNode)),this)},i.prototype.mouseEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.MouseEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.MouseEventsFlag),this.attachPassiveMouseEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.MouseEventsFlag),this.detachPassiveMouseEvents(this.eventNode)),this)},i.prototype.pointerEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.PointerEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.PointerEventsFlag),this.attachPassivePointerEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.PointerEventsFlag),this.detachPassivePointerEvents(this.eventNode)),this)},i.prototype.touchEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.TouchEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.TouchEventsFlag),this.attachPassiveTouchEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.TouchEventsFlag),this.detachPassiveTouchEvents(this.eventNode)),this)},i.prototype.handleEvent=function(t){},i.prototype.bubbleEvent=function(t){return this.handleEvent(t),this},i.prototype.attachEvents=function(t){0!=(this.canvasFlags&i.ClickEventsFlag)&&this.attachClickEvents(t),0!=(this.canvasFlags&i.WheelEventsFlag)&&this.attachWheelEvents(t),0!=(this.canvasFlags&i.MouseEventsFlag)&&this.attachPassiveMouseEvents(t),0!=(this.canvasFlags&i.PointerEventsFlag)&&this.attachPassivePointerEvents(t),0!=(this.canvasFlags&i.TouchEventsFlag)&&this.attachPassiveTouchEvents(t)},i.prototype.detachEvents=function(t){this.detachClickEvents(t),this.detachWheelEvents(t),this.detachPassiveMouseEvents(t),this.detachActiveMouseEvents(t),this.detachPassivePointerEvents(t),this.detachActivePointerEvents(t),this.detachPassiveTouchEvents(t),this.detachActiveTouchEvents(t)},i.prototype.fireEvent=function(t,e,i){var o=this.clientBounds;if(o.contains(e,i)){var n=e-o.x,r=i-o.y,s=this.hitTest(n,r);if(null!==s)return t.targetView=s,s.bubbleEvent(t),s}return null},i.prototype.attachClickEvents=function(t){t.addEventListener("click",this.onClick),t.addEventListener("dblclick",this.onDblClick),t.addEventListener("contextmenu",this.onContextMenu)},i.prototype.detachClickEvents=function(t){t.removeEventListener("click",this.onClick),t.removeEventListener("dblclick",this.onDblClick),t.removeEventListener("contextmenu",this.onContextMenu)},i.prototype.attachWheelEvents=function(t){t.addEventListener("wheel",this.onWheel)},i.prototype.detachWheelEvents=function(t){t.removeEventListener("wheel",this.onWheel)},i.prototype.attachPassiveMouseEvents=function(t){t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave),t.addEventListener("mousedown",this.onMouseDown)},i.prototype.detachPassiveMouseEvents=function(t){t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),t.removeEventListener("mousedown",this.onMouseDown)},i.prototype.attachActiveMouseEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},i.prototype.detachActiveMouseEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp)},i.prototype.updateMouse=function(t,e){t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.fireMouseEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onDblClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onContextMenu=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onWheel=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseEnter=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t)},i.prototype.onMouseLeave=function(t){null!==this.mouse&&(Object.defineProperty(this,"mouse",{value:null,enumerable:!0,configurable:!0}),this.detachActiveMouseEvents(this.eventNode))},i.prototype.onMouseDown=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseMove=function(t){var e=this.mouse;null===e&&(e={},Object.defineProperty(this,"mouse",{value:e,enumerable:!0,configurable:!0})),this.updateMouse(e,t);var i=e.targetView,o=this.fireMouseEvent(t);null===o&&(o=void 0),o!==i&&this.onMouseTargetChange(e,o,i)},i.prototype.onMouseUp=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new MouseEvent("mouseout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new MouseEvent("mouseover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectMouseTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,s=t.targetView,a=this.hitTest(n,r);null===a&&(a=void 0),a!==s&&this.onMouseTargetChange(t,a,s)}},i.prototype.attachPassivePointerEvents=function(t){t.addEventListener("pointerenter",this.onPointerEnter),t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerdown",this.onPointerDown)},i.prototype.detachPassivePointerEvents=function(t){t.removeEventListener("pointerenter",this.onPointerEnter),t.removeEventListener("pointerleave",this.onPointerLeave),t.removeEventListener("pointerdown",this.onPointerDown)},i.prototype.attachActivePointerEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel)},i.prototype.detachActivePointerEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel)},i.prototype.updatePointer=function(t,e){t.pointerId=e.pointerId,t.pointerType=e.pointerType,t.isPrimary=e.isPrimary,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.firePointerEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onPointerEnter=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t)},i.prototype.onPointerLeave=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerDown=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t),this.firePointerEvent(t)},i.prototype.onPointerMove=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t);var n=o.targetView,r=this.firePointerEvent(t);null===r&&(r=void 0),r!==n&&this.onPointerTargetChange(o,r,n)},i.prototype.onPointerUp=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerCancel=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},Object.defineProperty(this,"pointers",{value:i,enumerable:!0,configurable:!0}));var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new PointerEvent("pointerout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new PointerEvent("pointerover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectPointerTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,s=t.targetView,a=this.hitTest(n,r);null===a&&(a=void 0),a!==s&&this.onPointerTargetChange(t,a,s)}},i.prototype.attachPassiveTouchEvents=function(t){t.addEventListener("touchstart",this.onTouchStart)},i.prototype.detachPassiveTouchEvents=function(t){t.removeEventListener("touchstart",this.onTouchStart)},i.prototype.attachActiveTouchEvents=function(t){t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchCancel)},i.prototype.detachActiveTouchEvents=function(t){t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel)},i.prototype.updateTouch=function(t,e){t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.pageX=e.pageX,t.pageY=e.pageY,t.radiusX=e.radiusX,t.radiusY=e.radiusY,t.altitudeAngle=e.altitudeAngle,t.azimuthAngle=e.azimuthAngle,t.rotationAngle=e.rotationAngle,t.force=e.force},i.prototype.fireTouchEvent=function(t,e){for(var i=e.changedTouches,o=[],n=function(n,r){var s=i[n],a=s.targetView;if(void 0!==a&&o.indexOf(a)<0){var l=new TouchEvent(t,{changedTouches:i,targetTouches:e.targetTouches,touches:e.touches,bubbles:!0});l.targetView=a;for(var u=[s],h=n+1;h<r;h+=1){var p=i[h];p.targetView===a&&u.push(p)}void 0!==document.createTouchList?l.targetViewTouches=document.createTouchList.apply(document,u):(u.item=function(t){return u[t]},l.targetViewTouches=u),a.bubbleEvent(l),o.push(a)}},r=0,s=i.length;r<s;r+=1)n(r,s)},i.prototype.onTouchStart=function(t){var e,i=this.touches;null===i&&(i={},Object.defineProperty(this,"touches",{value:i,enumerable:!0,configurable:!0}));for(var o=t.changedTouches,n=0,r=o.length;n<r;n+=1){var s=o[n],a=""+s.identifier,l=i[a];void 0===l&&(0===Object.keys(i).length&&this.attachActiveTouchEvents(this.eventNode),l={identifier:s.identifier,touchType:s.touchType,target:s.target},i[a]=l),this.updateTouch(l,s);var u=l.clientX,h=l.clientY;if(void 0===e&&(e=this.clientBounds),e.contains(u,h)){var p=u-e.x,d=h-e.y,c=this.hitTest(p,d);null!==c&&(l.targetView=c,s.targetView=c)}}this.fireTouchEvent("touchstart",t)},i.prototype.onTouchMove=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=0,n=i.length;o<n;o+=1){var r=i[o],s=""+r.identifier,a=e[s];void 0===a&&(a={identifier:r.identifier,touchType:r.touchType,target:r.target},e[s]=a),this.updateTouch(a,r),r.targetView=a.targetView}this.fireTouchEvent("touchmove",t)},i.prototype.onTouchEnd=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[a=""+(s=i[n]).identifier];void 0===r&&(r={identifier:s.identifier,touchType:s.touchType,target:s.target},e[a]=r),this.updateTouch(r,s),s.targetView=r.targetView}this.fireTouchEvent("touchend",t);for(n=0;n<o;n+=1){var s,a;delete e[a=""+(s=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.onTouchCancel=function(t){var e=this.touches;null===e&&(e={},Object.defineProperty(this,"touches",{value:e,enumerable:!0,configurable:!0}));for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[a=""+(s=i[n]).identifier];void 0===r&&(r={identifier:s.identifier,touchType:s.touchType,target:s.target},e[a]=r),this.updateTouch(r,s),s.targetView=r.targetView}this.fireTouchEvent("touchcancel",t);for(n=0;n<o;n+=1){var s,a;delete e[a=""+(s=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.resizeCanvas=function(t){var e,i,o,n=t.parentNode;if(n instanceof HTMLElement){do{if(e=Math.floor(n.offsetWidth),i=Math.floor(n.offsetHeight),0!==e&&0!==i)break;n=n.parentNode}while(n instanceof HTMLElement);o=this.pixelRatio,t.width=e*o,t.height=i*o,t.style.width=e+"px",t.style.height=i+"px"}else e=Math.floor(t.width),i=Math.floor(t.height),o=1;Object.defineProperty(this,"viewFrame",{value:new r.R2Box(0,0,e,i),enumerable:!0,configurable:!0})},i.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof cr){var e=this.viewFrame;t.context.clearRect(0,0,e.width,e.height)}else if(t instanceof vr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},i.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof cr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof vr){var i=this.viewFrame;t.context.viewport(0,0,i.width,i.height)}},i.tag="canvas",i.ClickEventsFlag=1,i.WheelEventsFlag=2,i.MouseEventsFlag=4,i.PointerEventsFlag=8,i.TouchEventsFlag=16,i.EventsMask=i.ClickEventsFlag|i.WheelEventsFlag|i.MouseEventsFlag|i.PointerEventsFlag|i.TouchEventsFlag,i.powerFlags=Zn.powerFlags|Xi.NeedsRender|Xi.NeedsComposite,i.uncullFlags=Zn.uncullFlags|Xi.NeedsRender|Xi.NeedsComposite,i}(Zn);Zn.Tag("canvas")(fr,"canvas");var yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.isHidden=function(){var t=this.view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this.view;return null!==t?t.viewFrame:r.R2Box.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.view;return null!==t?t.viewBounds:r.R2Box.undefined()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.view;return null!==t?t.hitBounds:r.R2Box.undefined()},enumerable:!1,configurable:!0}),e}(_n),gr=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:e.createCanvas(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"renderer",{value:e.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rasterFrame",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof nr||t instanceof fr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new cr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new vr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.needsProcess=function(t,e){return 0!=(this.viewFlags&Xi.ProcessMask)||0!=(t&Xi.NeedsResize)?this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite):t=0,t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Xi.NeedsLayout|Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&Xi.DisplayMask)?t|=Xi.NeedsRender|Xi.NeedsComposite:t=0!=(t&Xi.NeedsComposite)?Xi.NeedsDisplay|Xi.NeedsComposite:0,t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this.canvas),this.resetRenderer()},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e),this.clearCanvas()},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"compositeFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof nr||e instanceof fr?e.viewFrame:r.R2Box.undefined()}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this.rasterFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},e.prototype.doHitTest=function(t,e,i){var o=this.compositeFrame;t-=Math.floor(o.xMin),e-=Math.floor(o.yMin);for(var n=null,r=this.childViews,s=r.length-1;s>=0;s-=1){var a=r[s];if(a instanceof nr&&!a.isHidden()&&!a.isCulled())if(a.hitBounds.contains(t,e)&&null!==(n=a.hitTest(t,e,i)))break}return n},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.compositeFrame,e=Math.floor(t.xMin),i=Math.floor(t.yMin);return 0!==e||0!==i?r.Transform.translate(-e,-i):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t){var e=this.compositeFrame,i=e.xMin-Math.floor(e.xMin),o=e.yMin-Math.floor(e.yMin),n=Math.ceil(i+e.width),s=Math.ceil(o+e.height),a=new r.R2Box(i,o,n,s);if(!this.rasterFrame.equals(a)){var l=this.pixelRatio;t.width=n*l,t.height=s*l,t.style.width=n+"px",t.style.height=s+"px",Object.defineProperty(this,"rasterFrame",{value:a,enumerable:!0,configurable:!0})}},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof cr){var e=this.rasterFrame;t.context.clearRect(0,0,e.xMax,e.yMax)}else if(t instanceof vr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof cr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof vr){var i=this.rasterFrame;t.context.viewport(0,0,i.xMax,i.yMax)}},e.prototype.compositeImage=function(t){var e=t.compositor,i=t.renderer;if(e instanceof cr&&i instanceof cr){var o=this.compositeFrame,n=e.context;n.save(),n.globalAlpha=this.opacity.getValue(),n.globalCompositeOperation=this.compositeOperation.getValue();var r=Math.floor(o.x),s=Math.floor(o.y);n.drawImage(this.canvas,r,s,o.width,o.height),n.restore()}},e.create=function(){return new e},e.mountFlags=sr.mountFlags|Xi.NeedsRender|Xi.NeedsComposite,e.powerFlags=sr.powerFlags|Xi.NeedsRender|Xi.NeedsComposite,e.uncullFlags=sr.uncullFlags|Xi.NeedsRender|Xi.NeedsComposite,m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:String,state:"source-over"})],e.prototype,"compositeOperation",void 0),e}(sr),wr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"fill"in t}return!1},initView:function(t,e){void 0!==e.fill&&t.fill(e.fill)}},mr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"stroke"in t&&"strokeWidth"in t}return!1},initView:function(t,e){void 0!==e.stroke&&t.stroke(e.stroke),void 0!==e.strokeWidth&&t.strokeWidth(e.strokeWidth)}},br=function(){function t(t,e,i,o){Object.defineProperty(this,"x",{value:t,enumerable:!0}),Object.defineProperty(this,"y",{value:e,enumerable:!0}),Object.defineProperty(this,"width",{value:i,enumerable:!0}),Object.defineProperty(this,"height",{value:o,enumerable:!0})}return t.prototype.withX=function(t){return t=r.Length.fromAny(t),this.x.equals(t)?this:this.copy(t,this.y,this.width,this.height)},t.prototype.withY=function(t){return t=r.Length.fromAny(t),this.y.equals(t)?this:this.copy(this.x,t,this.width,this.height)},t.prototype.withWidth=function(t){return t=r.Length.fromAny(t),this.width.equals(t)?this:this.copy(this.x,this.y,t,this.height)},t.prototype.withHeight=function(t){return t=r.Length.fromAny(t),this.height.equals(t)?this:this.copy(this.x,this.y,this.width,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new lr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof ur&&this.draw(t.context,e)},t.prototype.draw=function(t,e){void 0===e&&(e=null),this.renderRect(t,e)},t.prototype.renderRect=function(t,e){t.rect(this.x.pxValue(),this.y.pxValue(),this.width.pxValue(),this.height.pxValue())},t.prototype.copy=function(e,i,o,n){return new t(e,i,o,n)},t.prototype.toAny=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.x.equals(e.x)&&this.y.equals(e.y)&&this.width.equals(e.width)&&this.height.equals(e.height))},t.prototype.debug=function(t){t=t.write("Rect").write(46).write("create").write(40).debug(this.x).write(", ").debug(this.y).write(", ").debug(this.width).write(", ").debug(this.height).write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n){return new t(e=r.Length.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Length.fromAny(n))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.x,e.y,e.width,e.height);throw new TypeError(""+e)},t}(),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new br(this.x.getValue(),this.y.getValue(),this.width.getValue(),this.height.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new br(this.x.getState(),this.y.getState(),this.width.getState(),this.height.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof br&&(t=t.toAny()),void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.width&&this.width(t.width,e),void 0!==t.height&&this.height(t.height,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderRect(o,this.viewFrame),o.restore()}},e.prototype.renderRect=function(t,e){var i=this.x.getValue().pxValue(e.width),o=this.y.getValue().pxValue(e.height),n=this.width.getValue().pxValue(e.width),r=this.height.getValue().pxValue(e.height);t.beginPath(),t.rect(i,o,n,r);var s=this.fill.value;null!==s&&(t.fillStyle=s.toString(),t.fill());var a=this.stroke.value;if(null!==a){var l=this.strokeWidth.value;if(null!==l){var u=Math.min(e.width,e.height);t.lineWidth=l.pxValue(u)}t.strokeStyle=a.toString(),t.stroke()}},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestRect(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestRect=function(t,e,i,o){var n=this.x.getValue().pxValue(o.width),r=this.y.getValue().pxValue(o.height),s=this.width.getValue().pxValue(o.width),a=this.height.getValue().pxValue(o.height);if(i.beginPath(),i.rect(n,r,s,a),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var l=this.strokeWidth.value;if(null!==l){var u=Math.min(o.width,o.height);if(i.lineWidth=l.pxValue(u),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromRect=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof br)return this.fromRect(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"x",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"y",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"width",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"height",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(sr);Object.defineProperty(Sr.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=this.x.getValue().pxValue(t.width),i=this.y.getValue().pxValue(t.height),o=this.width.getValue().pxValue(t.width),n=this.height.getValue().pxValue(t.height);return new r.R2Box(e,i,e+o,i+n)},enumerable:!0,configurable:!0});var Cr=function(){function t(t,e,i,o,n,r,s,a){Object.defineProperty(this,"center",{value:t,enumerable:!0}),Object.defineProperty(this,"innerRadius",{value:e,enumerable:!0}),Object.defineProperty(this,"outerRadius",{value:i,enumerable:!0}),Object.defineProperty(this,"startAngle",{value:o,enumerable:!0}),Object.defineProperty(this,"sweepAngle",{value:n,enumerable:!0}),Object.defineProperty(this,"padAngle",{value:r,enumerable:!0}),Object.defineProperty(this,"padRadius",{value:s,enumerable:!0}),Object.defineProperty(this,"cornerRadius",{value:a,enumerable:!0})}return t.prototype.withCenter=function(t){return t=r.R2Point.fromAny(t),this.center.equals(t)?this:this.copy(t,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withInnerRadius=function(t){return t=r.Length.fromAny(t),this.innerRadius.equals(t)?this:this.copy(this.center,t,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withOuterRadius=function(t){return t=r.Length.fromAny(t),this.outerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,t,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withStartAngle=function(t){return t=r.Angle.fromAny(t),this.startAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,t,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withSweepAngle=function(t){return t=r.Angle.fromAny(t),this.sweepAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,t,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withPadAngle=function(t){return t=r.Angle.fromAny(t),this.padAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,t,this.padRadius,this.cornerRadius)},t.prototype.withPadRadius=function(t){return null!==t&&(t=r.Length.fromAny(t)),e.Equals(this.padRadius,t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,t,this.cornerRadius)},t.prototype.withCornerRadius=function(t){return t=r.Length.fromAny(t),this.cornerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new lr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof ur&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderArc(t,e)},t.prototype.renderArc=function(e,i){var o;void 0!==i&&(o=Math.min(i.width,i.height));var n=this.center,r=n.x,s=n.y,a=this.innerRadius.pxValue(o),l=this.outerRadius.pxValue(o),u=this.startAngle.radValue(),h=this.sweepAngle.radValue(),p=u+h,d=h>=0;if(l<a){var c=l;l=a,a=c}if(l>t.Epsilon)if(h>2*Math.PI-t.Epsilon)e.moveTo(r+l*Math.cos(u),s+l*Math.sin(u)),e.arc(r,s,l,u,p,!d),a>t.Epsilon&&(e.moveTo(r+a*Math.cos(p),s+a*Math.sin(p)),e.arc(r,s,a,p,u,d));else{var v=u,f=p,y=u,g=p,w=h,m=h,b=this.padAngle.radValue()/2,S=+(b>t.Epsilon)&&(null!==this.padRadius?this.padRadius.pxValue(o):Math.sqrt(a*a+l*l)),C=Math.min(Math.abs(l-a)/2,this.cornerRadius.pxValue(o)),P=C,V=C;if(S>t.Epsilon){var F=Math.asin(S/a*Math.sin(b)),T=Math.asin(S/l*Math.sin(b));(w-=2*F)>t.Epsilon?(y+=F*=d?1:-1,g-=F):(w=0,y=g=(u+p)/2),(m-=2*T)>t.Epsilon?(v+=T*=d?1:-1,f-=T):(m=0,v=f=(u+p)/2)}var D=void 0,M=void 0,O=l*Math.cos(v),x=l*Math.sin(v),A=a*Math.cos(g),R=a*Math.sin(g),k=void 0,I=void 0;if(C>t.Epsilon&&(k=l*Math.cos(f),I=l*Math.sin(f),D=a*Math.cos(y),M=a*Math.sin(y),h<Math.PI)){var L=w>t.Epsilon?t.intersect(O,x,D,M,k,I,A,R):[A,R],j=O-L[0],W=x-L[1],E=k-L[0],N=I-L[1],G=1/Math.sin(.5*Math.acos((j*E+W*N)/(Math.sqrt(j*j+W*W)*Math.sqrt(E*E+N*N)))),U=Math.sqrt(L[0]*L[0]+L[1]*L[1]);P=Math.min(C,(a-U)/(G-1)),V=Math.min(C,(l-U)/(G+1))}if(m>t.Epsilon)if(V>t.Epsilon){var B=t.cornerTangents(D,M,O,x,l,V,d),H=t.cornerTangents(k,I,A,R,l,V,d);e.moveTo(r+B.cx+B.x01,s+B.cy+B.y01),V<C?e.arc(r+B.cx,s+B.cy,V,Math.atan2(B.y01,B.x01),Math.atan2(H.y01,H.x01),!d):(e.arc(r+B.cx,s+B.cy,V,Math.atan2(B.y01,B.x01),Math.atan2(B.y11,B.x11),!d),e.arc(r,s,l,Math.atan2(B.cy+B.y11,B.cx+B.x11),Math.atan2(H.cy+H.y11,H.cx+H.x11),!d),e.arc(r+H.cx,s+H.cy,V,Math.atan2(H.y11,H.x11),Math.atan2(H.y01,H.x01),!d))}else e.moveTo(r+O,s+x),e.arc(r,s,l,v,f,!d);else e.moveTo(r+O,s+x);if(a>t.Epsilon&&w>t.Epsilon)if(P>t.Epsilon){B=t.cornerTangents(A,R,k,I,a,-P,d),H=t.cornerTangents(O,x,D,M,a,-P,d);e.lineTo(r+B.cx+B.x01,s+B.cy+B.y01),P<C?e.arc(r+B.cx,s+B.cy,P,Math.atan2(B.y01,B.x01),Math.atan2(H.y01,H.x01),!d):(e.arc(r+B.cx,s+B.cy,P,Math.atan2(B.y01,B.x01),Math.atan2(B.y11,B.x11),!d),e.arc(r,s,a,Math.atan2(B.cy+B.y11,B.cx+B.x11),Math.atan2(H.cy+H.y11,H.cx+H.x11),d),e.arc(r+H.cx,s+H.cy,P,Math.atan2(H.y11,H.x11),Math.atan2(H.y01,H.x01),!d))}else e.arc(r,s,a,g,y,d);else e.lineTo(r+A,s+R)}else e.moveTo(r,s);e.closePath()},t.prototype.copy=function(e,i,o,n,r,s,a,l){return new t(e,i,o,n,r,s,a,l)},t.prototype.toAny=function(){return{center:this.center,innerRadius:this.innerRadius,outerRadius:this.outerRadius,startAngle:this.startAngle,sweepAngle:this.sweepAngle,padAngle:this.padAngle,padRadius:this.padRadius,cornerRadius:this.cornerRadius}},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.center.equals(i.center)&&this.innerRadius.equals(i.innerRadius)&&this.outerRadius.equals(i.outerRadius)&&this.startAngle.equals(i.startAngle)&&this.sweepAngle.equals(i.sweepAngle)&&this.padAngle.equals(i.padAngle)&&e.Equals(this.padRadius,i.padRadius)&&this.cornerRadius.equals(i.cornerRadius))},t.prototype.debug=function(t){t=t.write("Arc").write(46).write("create").write(40).write(41),this.center.isDefined()&&(t=t.write(46).write("center").write(40).debug(this.center).write(41)),this.innerRadius.isDefined()&&(t=t.write(46).write("innerRadius").write(40).debug(this.innerRadius).write(41)),this.outerRadius.isDefined()&&(t=t.write(46).write("outerRadius").write(40).debug(this.outerRadius).write(41)),this.startAngle.isDefined()&&(t=t.write(46).write("startAngle").write(40).debug(this.startAngle).write(41)),this.sweepAngle.isDefined()&&(t=t.write(46).write("sweepAngle").write(40).debug(this.sweepAngle).write(41)),this.padAngle.isDefined()&&(t=t.write(46).write("padAngle").write(40).debug(this.padAngle).write(41)),null!==this.padRadius&&(t=t.write(46).write("padRadius").write(40).debug(this.padRadius).write(41)),this.cornerRadius.isDefined()&&(t=t.write(46).write("cornerRadius").write(40).debug(this.cornerRadius).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,a,l,u){return void 0===e&&(e=r.R2Point.origin()),void 0===i&&(i=r.Length.zero()),void 0===o&&(o=r.Length.zero()),void 0===n&&(n=r.Angle.zero()),void 0===s&&(s=r.Angle.zero()),void 0===a&&(a=r.Angle.zero()),void 0===l&&(l=null),void 0===u&&(u=r.Length.zero()),new t(e=r.R2Point.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Angle.fromAny(n),s=r.Angle.fromAny(s),a=r.Angle.fromAny(a),l=null!==l?r.Length.fromAny(l):null,u=r.Length.fromAny(u))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.center,e.innerRadius,e.outerRadius,e.startAngle,e.sweepAngle,e.padAngle,e.padRadius,e.cornerRadius);throw new TypeError(""+e)},t.intersect=function(t,e,i,o,n,r,s,a){var l=i-t,u=o-e,h=s-n,p=a-r,d=(h*(e-r)-p*(t-n))/(p*l-h*u);return[t+d*l,e+d*u]},t.cornerTangents=function(t,e,i,o,n,r,s){var a=t-i,l=e-o,u=(s?r:-r)/Math.sqrt(a*a+l*l),h=u*l,p=-u*a,d=t+h,c=e+p,v=i+h,f=o+p,y=(d+v)/2,g=(c+f)/2,w=v-d,m=f-c,b=w*w+m*m,S=n-r,C=d*f-v*c,P=(m<0?-1:1)*Math.sqrt(Math.max(0,S*S*b-C*C)),V=(C*m-w*P)/b,F=(-C*w-m*P)/b,T=(C*m+w*P)/b,D=(-C*w+m*P)/b,M=V-y,O=F-g,x=T-y,A=D-g;return M*M+O*O>x*x+A*A&&(V=T,F=D),{cx:V,cy:F,x01:-h,y01:-p,x11:V*(n/S-1),y11:F*(n/S-1)}},t.Epsilon=1e-12,t}(),Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Cr(this.center.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Cr(this.center.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof Cr&&(t=t.toAny()),void 0!==t.center&&this.center(t.center,e),void 0!==t.innerRadius&&this.innerRadius(t.innerRadius,e),void 0!==t.outerRadius&&this.outerRadius(t.outerRadius,e),void 0!==t.startAngle&&this.startAngle(t.startAngle,e),void 0!==t.sweepAngle&&this.sweepAngle(t.sweepAngle,e),void 0!==t.padAngle&&this.padAngle(t.padAngle,e),void 0!==t.padRadius&&this.padRadius(t.padRadius,e),void 0!==t.cornerRadius&&this.cornerRadius(t.cornerRadius,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){t.beginPath(),this.value.draw(t,e);var i=this.fill.value;null!==i&&(t.fillStyle=i.toString(),t.fill());var o=this.stroke.value;if(null!==o){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r)}t.strokeStyle=o.toString(),t.stroke()}},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.center.getValue(),n=i.transformX(o.x,o.y),s=i.transformY(o.x,o.y),a=(this.innerRadius.getValue().pxValue(e)+this.outerRadius.getValue().pxValue(e))/2,l=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,u=n+a*Math.cos(l),h=s+a*Math.sin(l);return new r.R2Box(u,h,u,h)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArc(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestArc=function(t,e,i,o){if(i.beginPath(),this.value.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var n=this.strokeWidth.value;if(null!==n){var r=Math.min(o.width,o.height);if(i.lineWidth=n.pxValue(r),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromArc=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Cr)return this.fromArc(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"center",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"sweepAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(sr);Object.defineProperty(Pr.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.center.getValue(),o=this.outerRadius.getValue().pxValue(e);return new r.R2Box(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!0,configurable:!0});var Vr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof nr&&"font"in t&&"textAlign"in t&&"textBaseline"in t&&"textOrigin"in t&&"textColor"in t}return!1},initView:function(t,e){void 0!==e.font&&t.font(e.font),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textBaseline&&t.textBaseline(e.textBaseline),void 0!==e.textOrigin&&t.textOrigin(e.textOrigin),void 0!==e.textColor&&t.textColor(e.textColor)}},Fr=function(){function t(t,e,i,o,n,r){Object.defineProperty(this,"text",{value:t,enumerable:!0}),Object.defineProperty(this,"font",{value:e,enumerable:!0}),Object.defineProperty(this,"textAlign",{value:i,enumerable:!0}),Object.defineProperty(this,"textBaseline",{value:o,enumerable:!0}),Object.defineProperty(this,"textOrigin",{value:n,enumerable:!0}),Object.defineProperty(this,"textColor",{value:r,enumerable:!0})}return t.prototype.withText=function(t){return this.text===t?this:this.copy(t,this.font,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withFont=function(t){return null!==t&&(t=gt.fromAny(t)),this.font===t?this:this.copy(this.text,t,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextAlign=function(t){return this.textAlign===t?this:this.copy(this.text,this.font,t,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextBaseline=function(t){return this.textBaseline===t?this:this.copy(this.text,this.font,this.textAlign,t,this.textOrigin,this.textColor)},t.prototype.withTextOrigin=function(t){return null!==t&&(t=r.R2Point.fromAny(t)),e.Equals(this.textOrigin,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,t,this.textColor)},t.prototype.withTextColor=function(t){return null!==t&&(t=St.fromAny(t)),e.Equals(this.textColor,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,this.textOrigin,t)},t.prototype.render=function(t,e){t instanceof cr&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderText(t,e)},t.prototype.renderText=function(t,e){t.save(),null!==this.font&&(t.font=this.font.toString()),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline);var i=this.textOrigin;null===i&&(i=r.R2Point.origin()),null!==this.textColor&&(t.fillStyle=this.textColor.toString()),t.fillText(this.text,i.x,i.y),t.restore()},t.prototype.copy=function(e,i,o,n,r,s){return new t(e,i,o,n,r,s)},t.prototype.toAny=function(){var t={text:this.text};return t.text=this.text,null!==this.font&&(t.font=this.font),null!==this.font&&(t.font=this.font),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline),null!==this.textOrigin&&(t.textOrigin=this.textOrigin),null!==this.textColor&&(t.textColor=this.textColor),t},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.text===i.text&&e.Equals(this.font,i.font)&&this.textAlign===i.textAlign&&this.textBaseline===i.textBaseline&&e.Equals(this.textOrigin,i.textOrigin)&&e.Equals(this.textColor,i.textColor))},t.prototype.debug=function(t){t=t.write("TextRun").write(46).write("create").write(40).debug(this.text).write(41),null!==this.font&&(t=t.write(46).write("font").write(40).debug(this.font).write(41)),null!==this.textAlign&&(t=t.write(46).write("textAlign").write(40).debug(this.textAlign).write(41)),null!==this.textBaseline&&(t=t.write(46).write("textBaseline").write(40).debug(this.textBaseline).write(41)),null!==this.textOrigin&&(t=t.write(46).write("textOrigin").write(40).debug(this.textOrigin).write(41)),null!==this.textColor&&(t=t.write(46).write("textColor").write(40).debug(this.textColor).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,a){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=null),null!==i&&(i=gt.fromAny(i)),null!==s&&(s=r.R2Point.fromAny(s)),null!==a&&(a=St.fromAny(a)),new t(e,i,o,n,s,a)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.create(e);if("object"==typeof e&&null!==e)return t.create(e.text,e.font,e.textAlign,e.textBaseline,e.textOrigin,e.textColor);throw new TypeError(""+e)},t}(),Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Fr(this.text.getValue(),this.font.getValue(),this.textAlign.getValue(),this.textBaseline.getValue(),this.textOrigin.getValue(),this.textColor.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Fr(this.text.getState(),this.font.getState(),this.textAlign.getState(),this.textBaseline.getState(),this.textOrigin.getState(),this.textColor.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){"string"==typeof t?this.text(t,e):(t instanceof Fr&&(t=t.toAny()),void 0!==t.text&&this.text(t.text,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textAlign&&this.textAlign(t.textAlign,e),void 0!==t.textBaseline&&this.textBaseline(t.textBaseline,e),void 0!==t.textOrigin&&this.textOrigin(t.textOrigin,e),void 0!==t.textColor&&this.textColor(t.textColor,e))},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderText(o),o.restore()}},e.prototype.renderText=function(t){var e=this.font.value;null!==e&&(t.font=e.toString());var i=this.textAlign.value;void 0!==i&&(t.textAlign=i);var o=this.textBaseline.value;void 0!==o&&(t.textBaseline=o);var n=this.textOrigin.value;null===n&&(n=r.R2Point.origin());var s=this.textColor.value;null!==s&&(t.fillStyle=s.toString()),t.fillText(this.text.getValue(),n.x,n.y)},e.create=function(){return new e},e.fromText=function(t){var i=new e;return i.text(t),i},e.fromTextRun=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Fr)return this.fromTextRun(t);if("object"==typeof t&&null!==t)return this.fromInit(t);if("string"==typeof t)return this.fromText(t);throw new TypeError(""+t)},m([So({type:String,state:""})],e.prototype,"text",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:String,inherit:!0})],e.prototype,"textAlign",void 0),m([So({type:String,inherit:!0})],e.prototype,"textBaseline",void 0),m([So({type:r.R2Point,state:null,inherit:!0})],e.prototype,"textOrigin",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),e}(sr),Dr={fromAny:function(t){return null==t?t:{iconWidth:r.Length.fromAny(t.iconWidth),iconHeight:r.Length.fromAny(t.iconHeight),xAlign:t.xAlign,yAlign:t.yAlign}},is:function(t){if(null!=t){return"iconWidth"in t&&"iconHeight"in t}return!1}},Mr=function(){},Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Mr),xr=function(t){function i(e,i,o,n,r){var s=t.call(this)||this;return Object.defineProperty(s,"path",{value:e,enumerable:!0}),Object.defineProperty(s,"fillRule",{value:i,enumerable:!0}),Object.defineProperty(s,"fillColor",{value:o,enumerable:!0}),Object.defineProperty(s,"fillLook",{value:n,enumerable:!0}),Object.defineProperty(s,"moodModifier",{value:r,enumerable:!0}),s}return w(i,t),i.prototype.withFillRule=function(t){return e.Equals(this.fillRule,t)?this:this.copy(this.path,t,this.fillColor,this.fillLook,this.moodModifier)},i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.path,this.fillRule,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.path,this.fillRule,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.path,this.fillRule,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof ar&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill(this.fillRule)},i.prototype.draw=function(t,e){this.path.transformDraw(t,r.Transform.scale(e.width,e.height).translate(e.x,e.y))},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Ar(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.path.equivalentTo(t.path,o)&&this.fillRule===t.fillRule&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("VectorIcon").write(40).debug(this.path).write(", ").debug(this.fillRule).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e,o,n){return o=r.R2Path.fromAny(o),1===t&&1===e||(o=o.transform(r.Transform.scale(1/t,1/e))),void 0===n&&(n="nonzero"),new i(o,n,null,Qt.iconColor,null)},i}(Or),Ar=function(t,e){var i=function(t){var e=i.path,o=i.fillRule,n=i.fillColorInterpolator(t),r=i.fillLook,s=i.moodModifier;return new xr(e,o,n,r,s)};return Object.setPrototypeOf(i,Ar.prototype),Object.defineProperty(i,"path",{value:e.path,enumerable:!0}),Object.defineProperty(i,"fillRule",{value:e.fillRule,enumerable:!0}),Object.defineProperty(i,"fillColorInterpolator",{value:a.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};Ar.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(Ar.prototype,0,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new xr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,1,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new xr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Ar.prototype.equals=function(t){return this===t||t instanceof Ar&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Rr=function(t){function i(e,i,o){var n=t.call(this)||this;return Object.defineProperty(n,"fillColor",{value:e,enumerable:!0}),Object.defineProperty(n,"fillLook",{value:i,enumerable:!0}),Object.defineProperty(n,"moodModifier",{value:o,enumerable:!0}),n}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof ar&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=(e.xMin+e.xMax)/2,o=(e.yMin+e.yMax)/2,n=e.width,r=e.height,s=Math.min(n,r)/2;t.arc(i,o,s,0,2*Math.PI),t.closePath()},i.prototype.copy=function(t,e,o){return new i(t,e,o)},i.prototype.interpolateTo=function(t){return t instanceof i?kr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("CircleIcon").write(40).debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(){return new i(null,Qt.accentColor,null)},m([e.Lazy],i,"create",null),i}(Or),kr=function(t,e){var i=function(t){var e=i.fillColorInterpolator(t),o=i.fillLook,n=i.moodModifier;return new Rr(e,o,n)};return Object.setPrototypeOf(i,kr.prototype),Object.defineProperty(i,"fillColorInterpolator",{value:a.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};kr.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(kr.prototype,0,{get:function(){var t=this.fillColorInterpolator[0],e=this.fillLook,i=this.moodModifier;return new Rr(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(kr.prototype,1,{get:function(){var t=this.fillColorInterpolator[1],e=this.fillLook,i=this.moodModifier;return new Rr(t,e,i)},enumerable:!0,configurable:!0}),kr.prototype.equals=function(t){return this===t||t instanceof kr&&(this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Ir=function(t){function i(e,i,o,n,r){var s=t.call(this)||this;return Object.defineProperty(s,"sides",{value:e,enumerable:!0}),Object.defineProperty(s,"rotation",{value:i,enumerable:!0}),Object.defineProperty(s,"fillColor",{value:o,enumerable:!0}),Object.defineProperty(s,"fillLook",{value:n,enumerable:!0}),Object.defineProperty(s,"moodModifier",{value:r,enumerable:!0}),s}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.sides,this.rotation,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.sides,this.rotation,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.sides,this.rotation,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof ar&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=this.sides;if(i>=3){var o=(e.xMin+e.xMax)/2,n=(e.yMin+e.yMax)/2,r=e.width,s=e.height,a=Math.min(r,s)/2,l=2*Math.PI/i,u=this.rotation.radValue();t.moveTo(o+a*Math.cos(u),n+a*Math.sin(u)),u+=l;for(var h=1;h<i;h+=1)t.lineTo(o+a*Math.cos(u),n+a*Math.sin(u)),u+=l;t.closePath()}},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Lr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equivalentTo(t.rotation,o)&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equals(t.rotation)&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("PolygonIcon").write(40).debug(this.sides).write(", ").debug(this.rotation).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e){return new i(t,e=void 0!==e?r.Angle.fromAny(e):r.Angle.zero(),null,Qt.accentColor,null)},i}(Or),Lr=function(t,e){var i=function(t){var e=i.sides,o=i.rotationInterpolator(t),n=i.fillColorInterpolator(t),r=i.fillLook,s=i.moodModifier;return new Ir(e,o,n,r,s)};return Object.setPrototypeOf(i,Lr.prototype),Object.defineProperty(i,"sides",{value:e.sides,enumerable:!0}),Object.defineProperty(i,"rotationInterpolator",{value:t.rotation.interpolateTo(e.rotation),enumerable:!0}),Object.defineProperty(i,"fillColorInterpolator",{value:a.Interpolator(t.fillColor,e.fillColor),enumerable:!0}),Object.defineProperty(i,"fillLook",{value:e.fillLook,enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),i};Lr.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(Lr.prototype,0,{get:function(){var t=this.sides,e=this.rotationInterpolator[0],i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new Ir(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,1,{get:function(){var t=this.sides,e=this.rotationInterpolator[1],i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new Ir(t,e,i,o,n)},enumerable:!0,configurable:!0}),Lr.prototype.equals=function(t){return this===t||t instanceof Lr&&(this.sides===t.sides&&this.rotationInterpolator.equals(t.rotationInterpolator)&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var jr=function(t){function i(e,i,o,n,r,s){var a=t.call(this)||this;return Object.defineProperty(a,"outer",{value:e,enumerable:!0}),Object.defineProperty(a,"inner",{value:i,enumerable:!0}),Object.defineProperty(a,"innerScale",{value:o,enumerable:!0}),Object.defineProperty(a,"moodModifier",{value:n,enumerable:!0}),Object.defineProperty(a,"outerMoodModifier",{value:r,enumerable:!0}),Object.defineProperty(a,"innerMoodModifier",{value:s,enumerable:!0}),a}return w(i,t),i.prototype.withOuter=function(t){return this.outer===t?this:this.copy(t,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInner=function(t){return this.inner===t?this:this.copy(this.outer,t,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInnerScale=function(t){return this.innerScale===t?this:this.copy(this.outer,this.inner,t,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,t,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.withOuterMoodModifier=function(t){return e.Equals(this.outerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,t,this.innerMoodModifier)},i.prototype.modifyOuterMood=function(t,e){var i=this.outerMoodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withOuterMoodModifier(o)},i.prototype.withInnerMoodModifier=function(t){return e.Equals(this.innerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,t)},i.prototype.modifyInnerMood=function(t,e){var i=this.innerMoodModifier;null===i&&(i=de.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withInnerMoodModifier(o)},i.prototype.isThemed=function(){var t=this.outer,e=this.inner;return(null===t||t.isThemed())&&(null===e||e.isThemed())},i.prototype.withTheme=function(t,e){var i=this.moodModifier,o=this.outerMoodModifier,n=this.innerMoodModifier,r=e;null!==i&&(r=i.timesCol(r,!0));var s,a=this.outer;if(null!==a){var l=r;null!==o&&(l=o.timesCol(l,!0)),s=a.withTheme(t,l)}else s=null;var u,h=this.inner;if(null!==h){var p=r;null!==n&&(p=n.timesCol(p,!0)),u=h.withTheme(t,p)}else u=null;return a!==s||h!==u?this.copy(s,u,this.innerScale,i,o,n):this},i.prototype.render=function(t,e){t instanceof hr?this.paint(t.context,e):t instanceof ar&&this.draw(t.context,e)},i.prototype.paint=function(t,e){var i=this.outer;null!==i&&i.paint(t,this.outerFrame(e));var o=this.inner;null!==o&&o.paint(t,this.innerFrame(e))},i.prototype.draw=function(t,e){var i=this.outer;null!==i&&i.draw(t,this.outerFrame(e));var o=this.inner;null!==o&&o.draw(t,this.innerFrame(e))},i.prototype.outerFrame=function(t){return t},i.prototype.innerFrame=function(t){var e=t.xMin,i=t.xMax,o=t.yMin,n=t.yMax,s=i-e,a=n-o,l=this.innerScale;if(1!==l){var u=(e+i)/2,h=(o+n)/2;e=u-(s*=l)/2,o=h-(a*=l)/2,i=u+s/2,n=h+a/2}if(s>a){var p=(s-a)/2;e+=p,i-=p}else if(s<a){var d=(a-s)/2;o+=d,n-=d}return s!==a||1!==l?new r.R2Box(e,o,i,n):t},i.prototype.copy=function(t,e,o,n,r,s){return new i(t,e,o,n,r,s)},i.prototype.interpolateTo=function(t){return t instanceof i?Wr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.outer,t.outer,o)&&e.Equivalent(this.inner,t.inner,o)&&e.Equivalent(this.innerScale,t.innerScale,o)&&e.Equivalent(this.moodModifier,t.moodModifier,o)&&e.Equivalent(this.outerMoodModifier,t.outerMoodModifier,o)&&e.Equivalent(this.innerMoodModifier,t.innerMoodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.outer,t.outer)&&e.Equals(this.inner,t.inner)&&e.Equals(this.innerScale,t.innerScale)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))},i.prototype.debug=function(t){t=t.write("new").write(32).write("EnclosedIcon").write(40).debug(this.outer).write(", ").debug(this.inner).write(", ").debug(this.innerScale).write(", ").debug(this.moodModifier).write(", ").debug(this.outerMoodModifier).write(", ").debug(this.innerMoodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e){return new i(t,e,1,null,null,null)},i.embossed=function(t,e){return new i(t,e,1,null,null,i.embossedMoodModifier)},Object.defineProperty(i,"embossedMoodModifier",{get:function(){return de.empty().updatedCol(re.default,[[re.embossed,1]],!0)},enumerable:!1,configurable:!0}),m([e.Lazy],i,"embossedMoodModifier",null),i}(Mr),Wr=function(t,e){var i=function(t){var e=i.outerInterpolator(t),o=i.innerInterpolator(t),n=i.innerScaleInterpolator(t),r=i.moodModifier,s=i.outerMoodModifier,a=i.innerMoodModifier;return new jr(e,o,n,r,s,a)};return Object.setPrototypeOf(i,Wr.prototype),Object.defineProperty(i,"outerInterpolator",{value:a.Interpolator(t.outer,e.outer),enumerable:!0}),Object.defineProperty(i,"innerInterpolator",{value:a.Interpolator(t.inner,e.inner),enumerable:!0}),Object.defineProperty(i,"innerScaleInterpolator",{value:a.Interpolator(t.innerScale,e.innerScale),enumerable:!0}),Object.defineProperty(i,"moodModifier",{value:e.moodModifier,enumerable:!0}),Object.defineProperty(i,"outerMoodModifier",{value:e.outerMoodModifier,enumerable:!0}),Object.defineProperty(i,"innerMoodModifier",{value:e.innerMoodModifier,enumerable:!0}),i};Wr.prototype=Object.create(a.Interpolator.prototype),Object.defineProperty(Wr.prototype,0,{get:function(){var t=this.outerInterpolator[0],e=this.innerInterpolator[0],i=this.innerScaleInterpolator[0],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new jr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),Object.defineProperty(Wr.prototype,1,{get:function(){var t=this.outerInterpolator[1],e=this.innerInterpolator[1],i=this.innerScaleInterpolator[1],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new jr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),Wr.prototype.equals=function(t){return this===t||t instanceof Wr&&(this.outerInterpolator.equals(t.outerInterpolator)&&this.innerInterpolator.equals(t.innerInterpolator)&&this.innerScaleInterpolator.equals(t.innerScaleInterpolator)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))};var Er={is:function(t){if("object"==typeof t&&null!==t){return t instanceof Gr||t instanceof Ur||t instanceof Br||t instanceof Xi&&"xAlign"in t&&"yAlign"in t&&"iconWidth"in t&&"iconHeight"in t&&"iconColor"in t&&"graphics"in t}return!1},initView:function(t,e){void 0!==e.xAlign&&t.xAlign(e.xAlign),void 0!==e.yAlign&&t.yAlign(e.yAlign),void 0!==e.iconWidth&&t.iconWidth(e.iconWidth),void 0!==e.iconHeight&&t.iconHeight(e.iconHeight),void 0!==e.iconColor&&t.iconColor(e.iconColor),void 0!==e.graphics&&t.graphics(e.graphics)}},Nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if(t instanceof Mr){var e=this.owner.iconColor.state;if(null!==e&&t instanceof Or)t=t.withFillColor(e);else{var i=this.owner.theme.state,o=this.owner.mood.state;null!==i&&null!==o&&(t=t.withTheme(i,o))}}return t},e}(So),Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Mr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderIcon(i,this.viewBounds),o.restore()}},e.prototype.renderIcon=function(t,e){var i=this.graphics.value;null!==i&&(t.context.beginPath(),i.render(t,e))},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),n=this.hitTestIcon(e,i,r,this.viewBounds),s.restore()}}return n},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.create=function(){return new e},m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Nr,type:Object,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"graphics",void 0),e}(sr);Object.defineProperty(Gr.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=t.width,i=t.height,o=Math.min(e,i),n=this.iconWidth.value;n=n instanceof r.Length?n.pxValue(o):o;var s=this.iconHeight.value;s=s instanceof r.Length?s.pxValue(o):o;var a=t.x+(e-n)*this.xAlign.getValue(),l=t.y+(i-s)*this.yAlign.getValue();return new r.R2Box(a,l,a+n,l+s)},enumerable:!0,configurable:!0});var Ur=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Mr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.renderIcon()},e.prototype.renderIcon=function(){var t=new pr(this);t.setPrecision(3),t.beginSvg();var e=this.graphics.takeValue();if(null!==e){var i=this.iconBounds;if(i.isDefined()&&i.width>0&&i.height>0){t.beginPath();var o=new dr(t,this.theme.state,this.mood.state);e.render(o,i)}}t.finalizeSvg()},Object.defineProperty(e.prototype,"iconBounds",{get:function(){var t=this.node.viewportElement;if(null===t&&(t=this.node),t instanceof SVGSVGElement){var e=t.viewBox.animVal,i=e.width,o=e.height,n=Math.min(i,o),s=this.iconWidth.value;s=s instanceof r.Length?s.pxValue(n):n;var a=this.iconHeight.value;a=a instanceof r.Length?a.pxValue(n):n;var l=e.x+(i-s)*this.xAlign.getValue(),u=e.y+(o-a)*this.yAlign.getValue();return new r.R2Box(l,u,l+s,u+a)}return r.R2Box.undefined()},enumerable:!1,configurable:!0}),e.mountFlags=$n.mountFlags|Xi.NeedsAnimate,m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Nr,type:Object,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"graphics",void 0),e}($n),Br=function(t){function e(e){var i=t.call(this,e)||this;return i.initIcon(),i}return w(e,t),e.prototype.initIcon=function(){this.position.setState("relative",Xi.Intrinsic);var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e)},e.prototype.createSvgView=function(){return Ur.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Ur?t:null},enumerable:!1,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Ur&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Mr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Xi.NeedsLayout)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Xi.NeedsLayout)&&(t&=~Xi.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.takesPrecedence(Xi.Intrinsic)||t.height.takesPrecedence(Xi.Intrinsic)||t.viewBox.takesPrecedence(Xi.Intrinsic))){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setState(e,Xi.Intrinsic),t.height.setState(i,Xi.Intrinsic),t.viewBox.setState("0 0 "+e+" "+i,Xi.Intrinsic)}},m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Nr,type:Object,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Zn),Hr={default:function(){return{updateTime:performance.now()}}},zr=function(){function t(){Object.defineProperty(this,"componentFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"componentObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.initComponent=function(t){},t.prototype.setComponentFlags=function(t){Object.defineProperty(this,"componentFlags",{value:t,enumerable:!0,configurable:!0})},t.prototype.addComponentObserver=function(t){var i=this.componentObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddComponentObserver(t),Object.defineProperty(this,"componentObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddComponentObserver(t),this.didAddComponentObserver(t))},t.prototype.willAddComponentObserver=function(t){},t.prototype.onAddComponentObserver=function(t){},t.prototype.didAddComponentObserver=function(t){},t.prototype.removeComponentObserver=function(t){var i=this.componentObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveComponentObserver(t),Object.defineProperty(this,"componentObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveComponentObserver(t),this.didRemoveComponentObserver(t))},t.prototype.willRemoveComponentObserver=function(t){},t.prototype.onRemoveComponentObserver=function(t){},t.prototype.didRemoveComponentObserver=function(t){},t.prototype.attachParentComponent=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower())},t.prototype.detachParentComponent=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetParentComponent&&r.componentWillSetParentComponent(t,e,this)}},t.prototype.onSetParentComponent=function(t,e){},t.prototype.didSetParentComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetParentComponent&&r.componentDidSetParentComponent(t,e,this)}},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillInsertChildComponent&&r.componentWillInsertChildComponent(t,e,this)}},t.prototype.onInsertChildComponent=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildComponent=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidInsertChildComponent&&r.componentDidInsertChildComponent(t,e,this)}},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildComponent=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillRemoveChildComponent&&n.componentWillRemoveChildComponent(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildComponent=function(t){},t.prototype.didRemoveChildComponent=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidRemoveChildComponent&&n.componentDidRemoveChildComponent(t,this)}},t.prototype.getSuperComponent=function(t){var e=this.parentComponent;return null===e?null:e instanceof t?e:e.getSuperComponent(t)},t.prototype.getBaseComponent=function(t){var e=this.parentComponent;if(null===e)return null;var i=e.getBaseComponent(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.componentFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentComponent||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillMount&&o.componentWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.componentFlags&~t.StatusMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidMount&&o.componentDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillUnmount&&o.componentWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidUnmount&&o.componentDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.componentFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillPower&&o.componentWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.componentFlags&~t.StatusMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidPower&&o.componentDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentWillUnpower&&o.componentWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.componentObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentDidUnpower&&o.componentDidUnpower(this)}},t.prototype.requireUpdate=function(e,i){if(void 0===i&&(i=!1),0!==(e&=~t.StatusMask)){this.willRequireUpdate(e,i);var o=this.componentFlags,n=o|e,r=n&~o&~t.StatusMask;0!==r&&(this.setComponentFlags(n),this.onRequireUpdate(e,i),this.requestUpdate(this,r,i)),this.didRequireUpdate(e,i)}},t.prototype.willRequireUpdate=function(t,e){},t.prototype.onRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(e,i,o){this.willRequestUpdate(e,i,o);var n=i&(t.NeedsCompile|t.NeedsExecute);if(0!=(i&t.CompileMask)&&0==(this.componentFlags&t.NeedsCompile)&&(this.setComponentFlags(this.componentFlags|t.NeedsCompile),n|=t.NeedsCompile),0!=(i&t.ExecuteMask)&&0==(this.componentFlags&t.NeedsExecute)&&(this.setComponentFlags(this.componentFlags|t.NeedsExecute),n|=t.NeedsExecute),0!=(n&(t.NeedsCompile|t.NeedsExecute))||o){this.onRequestUpdate(e,i,o);var r=this.parentComponent;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.executeService.manager;void 0!==s&&s.requestUpdate(e,i,o)}}this.didRequestUpdate(e,i,o)},t.prototype.willRequestUpdate=function(t,e,i){},t.prototype.onRequestUpdate=function(t,e,i){},t.prototype.didRequestUpdate=function(t,e,i){},t.prototype.isTraversing=function(){return 0!=(this.componentFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.componentFlags&t.UpdatingMask)},t.prototype.isCompiling=function(){return 0!=(this.componentFlags&t.CompilingFlag)},t.prototype.needsCompile=function(t,e){return t},t.prototype.willCompile=function(t,e){},t.prototype.onCompile=function(t,e){},t.prototype.didCompile=function(t,e){},t.prototype.willResolve=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillResolve&&n.componentWillResolve(t,this)}},t.prototype.onResolve=function(t){},t.prototype.didResolve=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidResolve&&n.componentDidResolve(t,this)}},t.prototype.willGenerate=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillGenerate&&n.componentWillGenerate(t,this)}},t.prototype.onGenerate=function(t){},t.prototype.didGenerate=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidGenerate&&n.componentDidGenerate(t,this)}},t.prototype.willAssemble=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillAssemble&&n.componentWillAssemble(t,this)}},t.prototype.onAssemble=function(t){},t.prototype.didAssemble=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidAssemble&&n.componentDidAssemble(t,this)}},t.prototype.doCompileChildComponents=function(e,i){0!=(e&t.CompileMask)&&(this.willCompileChildComponents(e,i),this.onCompileChildComponents(e,i),this.didCompileChildComponents(e,i))},t.prototype.willCompileChildComponents=function(t,e){},t.prototype.onCompileChildComponents=function(t,e){this.compileChildComponents(t,e,this.compileChildComponent)},t.prototype.didCompileChildComponents=function(t,e){},t.prototype.compileChildComponents=function(e,i,o){this.forEachChildComponent((function(n){o.call(this,n,e,i),0!=(n.componentFlags&t.RemovingFlag)&&(n.setComponentFlags(n.componentFlags&~t.RemovingFlag),this.removeChildComponent(n))}),this)},t.prototype.compileChildComponent=function(t,e,i){this.willCompileChildComponent(t,e,i),this.onCompileChildComponent(t,e,i),this.didCompileChildComponent(t,e,i)},t.prototype.willCompileChildComponent=function(t,e,i){},t.prototype.onCompileChildComponent=function(t,e,i){t.cascadeCompile(e,i)},t.prototype.didCompileChildComponent=function(t,e,i){},t.prototype.isExecuting=function(){return 0!=(this.componentFlags&t.ExecutingFlag)},t.prototype.needsExecute=function(t,e){return t},t.prototype.willExecute=function(t,e){},t.prototype.onExecute=function(t,e){},t.prototype.didExecute=function(t,e){},t.prototype.willRevise=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillRevise&&n.componentWillRevise(t,this)}},t.prototype.onRevise=function(t){},t.prototype.didRevise=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidRevise&&n.componentDidRevise(t,this)}},t.prototype.willCompute=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentWillCompute&&n.componentWillCompute(t,this)}},t.prototype.onCompute=function(t){},t.prototype.didCompute=function(t){for(var e=this.componentObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentDidCompute&&n.componentDidCompute(t,this)}},t.prototype.doExecuteChildComponents=function(e,i){0!=(e&t.ExecuteMask)&&(this.willExecuteChildComponents(e,i),this.onExecuteChildComponents(e,i),this.didExecuteChildComponents(e,i))},t.prototype.willExecuteChildComponents=function(t,e){},t.prototype.onExecuteChildComponents=function(t,e){this.executeChildComponents(t,e,this.executeChildComponent)},t.prototype.didExecuteChildComponents=function(t,e){},t.prototype.executeChildComponents=function(e,i,o){this.forEachChildComponent((function(n){o.call(this,n,e,i),0!=(n.componentFlags&t.RemovingFlag)&&(n.setComponentFlags(n.componentFlags&~t.RemovingFlag),this.removeChildComponent(n))}),this)},t.prototype.executeChildComponent=function(t,e,i){this.willExecuteChildComponent(t,e,i),this.onExecuteChildComponent(t,e,i),this.didExecuteChildComponent(t,e,i)},t.prototype.willExecuteChildComponent=function(t,e,i){},t.prototype.onExecuteChildComponent=function(t,e,i){t.cascadeExecute(e,i)},t.prototype.didExecuteChildComponent=function(t,e,i){},t.prototype.getLazyComponentService=function(e){var i=this.getComponentService(e);if(null===i){var o=t.getComponentServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setComponentService(e,i))}return i},t.prototype.getLazyComponentProperty=function(e){var i=this.getComponentProperty(e);if(null===i){var o=t.getComponentPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setComponentProperty(e,i))}return i},t.prototype.getLazyComponentModel=function(e){var i=this.getComponentModel(e);if(null===i){var o=t.getComponentModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentModel(e,i)}return i},t.prototype.getLazyComponentTrait=function(e){var i=this.getComponentTrait(e);if(null===i){var o=t.getComponentTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentTrait(e,i)}return i},t.prototype.getLazyComponentView=function(e){var i=this.getComponentView(e);if(null===i){var o=t.getComponentViewConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentView(e,i)}return i},t.prototype.getLazyComponentViewTrait=function(e){var i=this.getComponentViewTrait(e);if(null===i){var o=t.getComponentViewTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.viewKey?e:!1===o.prototype.viewKey?void 0:o.prototype.viewKey,!0===o.prototype.traitKey?e:!1===o.prototype.traitKey?void 0:o.prototype.traitKey,e),this.setComponentViewTrait(e,i)}return i},t.prototype.getLazyComponentFastener=function(e){var i=this.getComponentFastener(e);if(null===i){var o=t.getComponentFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setComponentFastener(e,i)}return i},t.prototype.extendComponentContext=function(t){return t},Object.defineProperty(t.prototype,"superComponentContext",{get:function(){var t=this.parentComponent;return null!==t?t.componentContext:this.executeService.updatedComponentContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentContext",{get:function(){return this.extendComponentContext(this.superComponentContext)},enumerable:!1,configurable:!0}),t.getComponentServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentServiceConstructors")){var i=e.componentServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"componentServiceConstructors")||(o.componentServiceConstructors={}),o.componentServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setComponentService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getComponentPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentPropertyConstructors")){var i=e.componentPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"componentPropertyConstructors")||(o.componentPropertyConstructors={}),o.componentPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setComponentProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getComponentModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentModelConstructors")){var i=e.componentModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentModelConstructors")||(r.componentModelConstructors={}),r.componentModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentModel(o);return null===e&&(e=new t(this,n,o),this.setComponentModel(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentTraitConstructors")){var i=e.componentTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentTraitConstructors")||(r.componentTraitConstructors={}),r.componentTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentTrait(o);return null===e&&(e=new t(this,n,o),this.setComponentTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentViewConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentViewConstructors")){var i=e.componentViewConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentView=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentViewConstructors")||(r.componentViewConstructors={}),r.componentViewConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentView(o);return null===e&&(e=new t(this,n,o),this.setComponentView(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentViewTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentViewTraitConstructors")){var i=e.componentViewTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentViewTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.viewKey?o:!1===t.prototype.viewKey?void 0:t.prototype.viewKey,r=!0===t.prototype.traitKey?o:!1===t.prototype.traitKey?void 0:t.prototype.traitKey,s=e;Object.prototype.hasOwnProperty.call(s,"componentViewTraitConstructors")||(s.componentViewTraitConstructors={}),s.componentViewTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentViewTrait(o);return null===e&&(e=new t(this,n,r,o),this.setComponentViewTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getComponentFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"componentFastenerConstructors")){var i=e.componentFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateComponentFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"componentFastenerConstructors")||(r.componentFastenerConstructors={}),r.componentFastenerConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getComponentFastener(o);return null===e&&(e=new t(this,n,o),this.setComponentFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.TraversingFlag=4,t.CompilingFlag=8,t.ExecutingFlag=16,t.RemovingFlag=32,t.ImmediateFlag=64,t.UpdatingMask=t.CompilingFlag|t.ExecutingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.TraversingFlag|t.CompilingFlag|t.ExecutingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsCompile=128,t.NeedsResolve=256,t.NeedsGenerate=512,t.NeedsAssemble=1024,t.CompileMask=t.NeedsCompile|t.NeedsResolve|t.NeedsGenerate|t.NeedsAssemble,t.NeedsExecute=2048,t.NeedsRevise=4096,t.NeedsCompute=8192,t.ExecuteMask=t.NeedsExecute|t.NeedsRevise|t.NeedsCompute,t.UpdateMask=t.CompileMask|t.ExecuteMask,t.ComponentFlagShift=24,t.ComponentFlagMask=(1<<t.ComponentFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.Intrinsic=0,t.Extrinsic=1,t}(),qr=function(){function t(){Object.defineProperty(this,"rootComponents",{value:e.Arrays.empty,enumerable:!0,configurable:!0}),Object.defineProperty(this,"componentManagerObservers",{value:e.Arrays.empty,enumerable:!0,configurable:!0})}return t.prototype.addComponentManagerObserver=function(t){var i=this.componentManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddComponentManagerObserver(t),Object.defineProperty(this,"componentManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onAddComponentManagerObserver(t),this.didAddComponentManagerObserver(t))},t.prototype.willAddComponentManagerObserver=function(t){},t.prototype.onAddComponentManagerObserver=function(t){},t.prototype.didAddComponentManagerObserver=function(t){},t.prototype.removeComponentManagerObserver=function(t){var i=this.componentManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveComponentManagerObserver(t),Object.defineProperty(this,"componentManagerObservers",{value:o,enumerable:!0,configurable:!0}),this.onRemoveComponentManagerObserver(t),this.didRemoveComponentManagerObserver(t))},t.prototype.willRemoveComponentManagerObserver=function(t){},t.prototype.onRemoveComponentManagerObserver=function(t){},t.prototype.didRemoveComponentManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootComponents.length},t.prototype.willAttach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerWillAttach&&o.componentManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerDidAttach&&o.componentManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerWillDetach&&o.componentManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.componentManagerDidDetach&&o.componentManagerDidDetach(this)}},t.prototype.insertRootComponent=function(t){var i=this.rootComponents,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootComponent(t),Object.defineProperty(this,"rootComponents",{value:o,enumerable:!0,configurable:!0}),n&&this.onAttach(),this.onInsertRootComponent(t),this.didInsertRootComponent(t),n&&this.didAttach()}},t.prototype.willInsertRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerWillInsertRootComponent&&n.componentManagerWillInsertRootComponent(t,this)}},t.prototype.onInsertRootComponent=function(t){},t.prototype.didInsertRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerDidInsertRootComponent&&n.componentManagerDidInsertRootComponent(t,this)}},t.prototype.removeRootComponent=function(t){var i=this.rootComponents,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootComponent(t),Object.defineProperty(this,"rootComponents",{value:o,enumerable:!0,configurable:!0}),n&&this.onDetach(),this.onRemoveRootComponent(t),this.didRemoveRootComponent(t),n&&this.didDetach()}},t.prototype.willRemoveRootComponent=function(t){for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerWillRemoveRootComponent&&n.componentManagerWillRemoveRootComponent(t,this)}},t.prototype.onRemoveRootComponent=function(t){},t.prototype.didRemoveRootComponent=function(t){this.didObserve((function(e){void 0!==e.componentManagerDidRemoveRootComponent&&e.componentManagerDidRemoveRootComponent(t,this)}));for(var e=this.componentManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.componentManagerDidRemoveRootComponent&&n.componentManagerDidRemoveRootComponent(t,this)}},t}(),Yr=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"componentContext",{value:e.initComponentContext(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rootFlags",{value:0,enumerable:!0,configurable:!0}),e.compileTimer=0,e.executeTimer=0,e.updateDelay=i.MinUpdateDelay,e.runCompilePass=e.runCompilePass.bind(e),e.runExecutePass=e.runExecutePass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initComponentContext=function(){return{updateTime:0}},i.prototype.updatedComponentContext=function(){var t=this.componentContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootComponents()},i.prototype.powerRootComponents=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootComponent(o)}},i.prototype.powerRootComponent=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootComponents()},i.prototype.unpowerRootComponents=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootComponent(o)}},i.prototype.unpowerRootComponent=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){Object.defineProperty(this,"rootFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.requestUpdate=function(t,e,o){this.willRequestUpdate(t,e,o),0!=(e&zr.CompileMask)&&this.setRootFlags(this.rootFlags|zr.NeedsCompile),0!=(e&zr.ExecuteMask)&&this.setRootFlags(this.rootFlags|zr.NeedsExecute),0!=(this.rootFlags&zr.UpdateMask)&&(this.onRequestUpdate(t,e,o),o&&this.updateDelay<=i.MaxCompileInterval&&0==(this.rootFlags&(zr.TraversingFlag|zr.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate()),this.didRequestUpdate(t,e,o)},i.prototype.willRequestUpdate=function(t,e,i){},i.prototype.onRequestUpdate=function(t,e,i){},i.prototype.didRequestUpdate=function(t,e,i){},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.compileTimer&&0===this.executeTimer&&0==(t&zr.UpdatingMask)&&0!=(t&zr.UpdateMask)&&(this.compileTimer=setTimeout(this.runCompilePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.compileTimer&&(clearTimeout(this.compileTimer),this.compileTimer=0),0!==this.executeTimer&&(clearTimeout(this.executeTimer),this.executeTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|zr.ImmediateFlag);try{0!=(this.rootFlags&zr.CompileMask)&&(this.cancelUpdate(),this.runCompilePass(!0)),0!=(this.rootFlags&zr.ExecuteMask)&&this.updateDelay<=i.MaxCompileInterval&&(this.cancelUpdate(),this.runExecutePass(!0))}finally{this.setRootFlags(this.rootFlags&~zr.ImmediateFlag)}},i.prototype.runCompilePass=function(t){void 0===t&&(t=!1);var e=this.rootComponents;this.setRootFlags(this.rootFlags&~zr.CompileMask|zr.TraversingFlag|zr.CompilingFlag);try{var o=performance.now(),n=this.componentContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.componentFlags&zr.CompileMask)&&s.cascadeCompile(0,n)}var a=performance.now(),l=Math.max(i.MinCompileInterval,this.updateDelay);this.updateDelay=a-o>l?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&zr.ExecuteMask)?this.executeTimer=setTimeout(this.runExecutePass,i.MinExecuteInterval):0!=(this.rootFlags&zr.CompileMask)&&(t&&(l=Math.max(i.MaxCompileInterval,l)),this.compileTimer=setTimeout(this.runCompilePass,l))}finally{this.setRootFlags(this.rootFlags&~(zr.TraversingFlag|zr.CompilingFlag))}},i.prototype.runExecutePass=function(t){void 0===t&&(t=!1);var e=this.rootComponents;this.setRootFlags(this.rootFlags&~zr.ExecuteMask|zr.TraversingFlag|zr.ExecutingFlag);try{var o=performance.now(),n=this.componentContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.componentFlags&zr.ExecuteMask)&&s.cascadeExecute(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&zr.CompileMask)){var a=this.updateDelay;t&&(a=Math.max(i.MaxCompileInterval,a)),this.compileTimer=setTimeout(this.runCompilePass,a)}else 0!=(this.rootFlags&zr.ExecuteMask)&&(this.executeTimer=setTimeout(this.runExecutePass,i.MaxExecuteInterval))}finally{this.setRootFlags(this.rootFlags&~(zr.TraversingFlag|zr.ExecutingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootComponent=function(e){t.prototype.onInsertRootComponent.call(this,e),this.requestUpdate(e,e.componentFlags&zr.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinCompileInterval=12,i.MaxCompileInterval=33,i.MinExecuteInterval=4,i.MaxExecuteInterval=16,m([e.Lazy],i,"global",null),i}(qr),Xr={empty:function(){return{fragment:void 0,permanent:{},ephemeral:{}}},current:function(){try{return Xr.fromUri(window.location.href)}catch(t){return console.error(t),{fragment:void 0,permanent:{},ephemeral:{}}}},updated:function(t,e){for(var i in void 0===e&&(e=Xr.current()),"fragment"in t&&(e.fragment=t.fragment),t.permanent){void 0!==(o=t.permanent[i])?e.permanent[i]=o:delete e.permanent[i]}for(var i in t.ephemeral){var o;void 0!==(o=t.ephemeral[i])?e.ephemeral[i]=o:delete e.ephemeral[i]}return e},cloned:function(t){var e={fragment:t.fragment,permanent:{},ephemeral:{}};for(var i in t.permanent)e.permanent[i]=t.permanent[i];for(var i in t.ephemeral)e.ephemeral[i]=t.ephemeral[i];return e},fromUri:function(t){var e=(t=n.Uri.fromAny(t)).fragment;return e.isDefined()?Xr.fromUriFragment(e):Xr.empty()},fromUriFragment:function(t){for(var e=void 0!==(t=n.UriFragment.fromAny(t)).identifier?n.UriQuery.parse(t.identifier):n.UriQuery.undefined(),i={fragment:void 0,permanent:{},ephemeral:{}};!e.isEmpty();){var o=e.key,r=e.value;void 0!==o?i.permanent[o]=r:i.fragment=r,e=e.tail()}return i},toUri:function(t){var e=n.UriQuery.builder();for(var i in void 0!==t.fragment&&e.add(void 0,t.fragment),t.permanent){var o=t.permanent[i];e.add(i,o)}return n.Uri.fragment(n.UriFragment.create(e.bind().toString()))}},Kr=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"historyState",{value:Xr.current(),enumerable:!0,configurable:!0}),e.popHistory=e.popHistory.bind(e),e}return w(i,t),Object.defineProperty(i.prototype,"historyUri",{get:function(){return Xr.toUri(this.historyState)},enumerable:!1,configurable:!0}),i.prototype.pushHistory=function(t){var e=this.historyState,i=Xr.updated(t,Xr.cloned(e)),o=Xr.toUri(i);this.willPushHistory(i,e),Object.defineProperty(this,"historyState",{value:i,enumerable:!0,configurable:!0}),window.history.pushState(i.ephemeral,"",o.toString()),this.onPushHistory(i,e),this.didPushHistory(i,e)},i.prototype.willPushHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPushHistory&&r.historyManagerWillPushHistory(t,e,this)}},i.prototype.onPushHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(zr.NeedsRevise)},i.prototype.didPushHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPushHistory&&r.historyManagerDidPushHistory(t,e,this)}},i.prototype.replaceHistory=function(t){var i=this.historyState,o=Xr.updated(t,Xr.cloned(i));if(!e.Objects.equal(i,o)){var n=Xr.toUri(o);this.willReplaceHistory(o,i),Object.defineProperty(this,"historyState",{value:o,enumerable:!0,configurable:!0}),window.history.replaceState(o.ephemeral,"",n.toString()),this.onReplaceHistory(o,i),this.didReplaceHistory(o,i)}},i.prototype.willReplaceHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillReplaceHistory&&r.historyManagerWillReplaceHistory(t,e,this)}},i.prototype.onReplaceHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(zr.NeedsRevise)},i.prototype.didReplaceHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidReplaceHistory&&r.historyManagerDidReplaceHistory(t,e,this)}},i.prototype.popHistory=function(t){var e={};"object"==typeof t.state&&null!==t.state&&(e.ephemeral=t.state);var i=Xr.current(),o=Xr.updated(e,i);this.willPopHistory(o,i),Object.defineProperty(this,"historyState",{value:o,enumerable:!0,configurable:!0}),this.onPopHistory(o,i),this.didPopHistory(o,i)},i.prototype.willPopHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPopHistory&&r.historyManagerWillPopHistory(t,e,this)}},i.prototype.onPopHistory=function(t,e){for(var i=this.rootComponents,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(zr.NeedsRevise)},i.prototype.didPopHistory=function(t,e){for(var i=this.componentManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPopHistory&&r.historyManagerDidPopHistory(t,e,this)}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("popstate",this.popHistory)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("popstate",this.popHistory)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(qr),Zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSet=function(t,e,i){for(var o=this.componentManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.storageManagerWillSet&&s.storageManagerWillSet(t,e,i,this)}},e.prototype.onSet=function(t,e,i){for(var o=this.rootComponents,n=0,r=o.length;n<r;n+=1)o[n].requireUpdate(zr.NeedsRevise)},e.prototype.didSet=function(t,e,i){for(var o=this.componentManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.storageManagerDidSet&&s.storageManagerDidSet(t,e,i,this)}},e.prototype.willClear=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerWillClear&&o.storageManagerWillClear(this)}},e.prototype.onClear=function(){for(var t=this.rootComponents,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(zr.NeedsRevise)},e.prototype.didClear=function(){for(var t=this.componentManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerDidClear&&o.storageManagerDidClear(this)}},e}(qr),_r=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"storage",{value:e,enumerable:!0}),i.onStorage=i.onStorage.bind(i),i}return w(i,t),i.prototype.get=function(t){var e=this.storage.getItem(t);return null!==e?e:void 0},i.prototype.set=function(t,e){var i=this.storage.getItem(t);return null===i&&(i=void 0),e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage.setItem(t,e):this.storage.removeItem(t),this.onSet(t,e,i),this.didSet(t,e,i)),i},i.prototype.clear=function(){this.willClear(),this.storage.clear(),this.onClear(),this.didClear()},i.prototype.onStorage=function(t){if(t.storageArea===this.storage){var e=t.key;if(null!==e){var i=t.newValue;null===i&&(i=void 0);var o=t.oldValue;null===o&&(o=void 0),i!==o&&(this.willSet(e,i,o),this.onSet(e,i,o),this.didSet(e,i,o))}else this.willClear(),this.onClear(),this.didClear()}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("storage",this.onStorage)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("storage",this.onStorage)},i.local=function(){try{return new i(window.localStorage)}catch(t){return null}},i.session=function(){try{return new i(window.sessionStorage)}catch(t){return null}},m([e.Lazy],i,"local",null),m([e.Lazy],i,"session",null),i}(Zr),Qr=function(t){function e(e){var i=t.call(this)||this;return void 0===e&&(e={}),Object.defineProperty(i,"storage",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.get=function(t){return this.storage[t]},e.prototype.set=function(t,e){var i=this.storage[t];return e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage[t]=e:delete this.storage[t],this.onSet(t,e,i),this.didSet(t,e,i)),i},e.prototype.clear=function(){this.willClear(),Object.defineProperty(this,"storage",{value:{},enumerable:!0,configurable:!0}),this.onClear(),this.didClear()},e}(Zr),Jr=function(t,e){return this instanceof Jr?$r.call(this,t,e):(i=t,zr.decorateComponentService.bind(zr,Jr.define(i)));var i};function $r(t,e){var i;return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:null!==(i=this.inherit)&&void 0!==i&&i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"serviceFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"manager",{value:void 0,enumerable:!0,configurable:!0}),this}w(Jr,Object),Jr.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperService())},Jr.prototype.isInherited=function(){return 0!=(this.serviceFlags&Jr.InheritedFlag)},Jr.prototype.setServiceFlags=function(t){Object.defineProperty(this,"serviceFlags",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(Jr.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),Jr.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentComponent;if(null!==o){if(null===(n=(e=o).getComponentService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyComponentService(t))&&(i=n)}break}Object.defineProperty(this,"superService",{value:i,enumerable:!0,configurable:!0})}void 0===this.manager&&(null!==i?(this.setServiceFlags(this.serviceFlags|Jr.InheritedFlag),Object.defineProperty(this,"manager",{value:i.manager,enumerable:!0,configurable:!0})):(this.setServiceFlags(this.serviceFlags&~Jr.InheritedFlag),Object.defineProperty(this,"manager",{value:this.initManager(),enumerable:!0,configurable:!0})))},Jr.prototype.unbindSuperService=function(){Object.defineProperty(this,"superService",{value:null,enumerable:!0,configurable:!0}),this.setServiceFlags(this.serviceFlags&~Jr.InheritedFlag)},Object.defineProperty(Jr.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(Jr.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),Jr.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},Jr.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},Jr.prototype.initManager=function(){},Jr.prototype.mount=function(){this.bindSuperService()},Jr.prototype.unmount=function(){this.unbindSuperService()},Jr.getClass=function(t){return t===Yr?es:t===Kr?is:t===Zr?os:t===qr?ts:null},Jr.define=function(t){var e=t.extends,i=t.manager,o=t.inherit,n=t.initManager;delete t.extends,delete t.manager,void 0===e&&(e=Jr.getClass(t.type)),null===e&&(e=Jr);var r=function(t,i){var o=function(){return o.manager};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},s=t;return Object.setPrototypeOf(r,e),(r.prototype=s).constructor=r,Object.setPrototypeOf(r.prototype,e.prototype),void 0!==i&&void 0===n&&(s.initManager=function(){return i}),Object.defineProperty(s,"inherit",{value:null==o||o,enumerable:!0,configurable:!0}),r},Jr.InheritedFlag=1;var ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.mount=function(){t.prototype.mount.call(this);var e=this.manager;void 0!==e&&(this.isInherited()||e.insertRootComponent(this.owner),!1!==this.observe&&e.addComponentManagerObserver(this))},e.prototype.unmount=function(){var e=this.manager;void 0!==e&&(!1!==this.observe&&e.removeComponentManagerObserver(this),this.isInherited()||e.removeRootComponent(this.owner)),t.prototype.unmount.call(this)},e}(Jr),es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"componentContext",{get:function(){var t=this.manager;return void 0===t&&(t=Yr.global()),t.componentContext},enumerable:!1,configurable:!0}),e.prototype.updatedComponentContext=function(){var t=this.manager;return void 0===t&&(t=Yr.global()),t.updatedComponentContext()},e.prototype.initManager=function(){return Yr.global()},e}(ts);Jr({extends:es,type:Yr,observe:!1})(zr.prototype,"executeService");var is=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"historyState",{get:function(){return this.manager.historyState},enumerable:!1,configurable:!0}),e.prototype.pushHistory=function(t){this.manager.pushHistory(t)},e.prototype.replaceHistory=function(t){this.manager.replaceHistory(t)},e.prototype.initManager=function(){return Kr.global()},e}(ts);Jr({extends:is,type:Kr,observe:!1})(zr.prototype,"historyService");var os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.get=function(t){return this.manager.get(t)},e.prototype.set=function(t,e){return this.manager.set(t,e)},e.prototype.clear=function(){this.manager.clear()},e.prototype.initManager=function(){var t=_r.local();return null===t&&(t=new Qr),t},e}(ts);Jr({extends:os,type:Zr,observe:!1})(zr.prototype,"storageService");var ns=function(t,e){return this instanceof ns?rs.call(this,t,e):(i=t,zr.decorateComponentProperty.bind(zr,ns.define(i)));var i};function rs(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"inherit",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"subProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"precedence",{value:zr.Intrinsic,enumerable:!0,configurable:!0}),Object.defineProperty(this,"propertyFlags",{value:ns.UpdatedFlag,enumerable:!0,configurable:!0}),Object.defineProperty(this,"ownState",{value:void 0,enumerable:!0,configurable:!0}),this}w(ns,Object),ns.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),Object.defineProperty(this,"inherit",{value:t,enumerable:!0,configurable:!0}),this.bindSuperProperty())},ns.prototype.isInherited=function(){return 0!=(this.propertyFlags&ns.InheritedFlag)},ns.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&ns.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ns.OverrideFlag|ns.InheritedFlag),this.setOwnState(e.state),this.revise());else if(!t&&0!=(this.propertyFlags&ns.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ns.InheritedFlag)}},Object.defineProperty(ns.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),ns.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentComponent;null!==e;){var i=e.getLazyComponentProperty(t);if(null!==i){Object.defineProperty(this,"superProperty",{value:i,enumerable:!0,configurable:!0}),i.addSubProperty(this),0==(this.propertyFlags&ns.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|ns.InheritedFlag),this.setOwnState(i.state),this.revise());break}e=e.parentComponent}},ns.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),Object.defineProperty(this,"superProperty",{value:null,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags&~ns.InheritedFlag))},ns.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],Object.defineProperty(this,"subProperties",{value:e,enumerable:!0,configurable:!0})),e.push(t)},ns.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(ns.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(ns.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),ns.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},ns.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},ns.prototype.setState=function(t,e){void 0===e&&(e=zr.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ns.InheritedFlag|ns.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},ns.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.state;e.Equals(t,i)||(this.willSetState(t,i),Object.defineProperty(this,"ownState",{value:t,enumerable:!0,configurable:!0}),this.setPropertyFlags(this.propertyFlags|ns.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},ns.prototype.willSetState=function(t,e){},ns.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},ns.prototype.didSetState=function(t,e){},ns.prototype.takesPrecedence=function(t){return t>=this.precedence},ns.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),Object.defineProperty(this,"precedence",{value:t,enumerable:!0,configurable:!0}),this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},ns.prototype.willSetPrecedence=function(t,e){},ns.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&ns.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ns.InheritedFlag)}},ns.prototype.didSetPrecedence=function(t,e){},ns.prototype.setPropertyFlags=function(t){Object.defineProperty(this,"propertyFlags",{value:t,enumerable:!0,configurable:!0})},ns.prototype.isUpdated=function(){return 0!=(this.propertyFlags&ns.UpdatedFlag)},Object.defineProperty(ns.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&ns.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),ns.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&ns.UpdatedFlag)?(this.setPropertyFlags(t&~ns.UpdatedFlag),this.state):void 0},ns.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~ns.UpdatedFlag),this.state},ns.prototype.revise=function(){this.owner.requireUpdate(zr.NeedsRevise)},ns.prototype.onRevise=function(){this.isInherited()&&this.onReviseInherited()},ns.prototype.onReviseInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},ns.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.revise()}},ns.prototype.fromAny=function(t){return t},ns.prototype.isMounted=function(){return 0!=(this.propertyFlags&ns.MountedFlag)},ns.prototype.mount=function(){0==(this.propertyFlags&ns.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|ns.MountedFlag),this.onMount(),this.didMount())},ns.prototype.willMount=function(){},ns.prototype.onMount=function(){this.bindSuperProperty()},ns.prototype.didMount=function(){},ns.prototype.unmount=function(){0!=(this.propertyFlags&ns.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~ns.MountedFlag),this.onUnmount(),this.didUnmount())},ns.prototype.willUnmount=function(){},ns.prototype.onUnmount=function(){this.unbindSuperProperty()},ns.prototype.didUnmount=function(){},ns.prototype.toString=function(){return this.name},ns.getConstructor=function(t){return t===String?ss:t===Boolean?as:t===Number?ls:null},ns.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=ns.getConstructor(t.type)),null===i&&(i=ns,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,l=function(t,e){return 0===arguments.length?l.state:(l.setState(t,e),l.owner)};return Object.setPrototypeOf(l,this),l=i.call(l,t,e)||l,void 0!==s?a=l.fromAny(s()):void 0!==n&&(a=l.fromAny(n)),void 0!==a&&Object.defineProperty(l,"ownState",{value:a,enumerable:!0,configurable:!0}),void 0!==r&&Object.defineProperty(l,"precedence",{value:r,enumerable:!0,configurable:!0}),void 0!==o&&Object.defineProperty(l,"inherit",{value:o,enumerable:!0,configurable:!0}),l},l=t;return Object.setPrototypeOf(a,i),(a.prototype=l).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a},ns.MountedFlag=1,ns.UpdatedFlag=2,ns.OverrideFlag=4,ns.InheritedFlag=8;var ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(ns),as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(ns),ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(ns),us=function(t,e,i){return this instanceof us?hs.call(this,t,e,i):(o=t,zr.decorateComponentModel.bind(zr,us.define(o)));var o};function hs(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"model",{value:null,enumerable:!0,configurable:!0}),this}w(us,Object),us.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},us.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},us.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetModel(t,i,e),null!==i&&this.detachModel(i),Object.defineProperty(this,"model",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e)),i},us.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},us.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},us.prototype.willSetModel=function(t,e,i){},us.prototype.onSetModel=function(t,e,i){},us.prototype.didSetModel=function(t,e,i){},us.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.setModel(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.setModel(e,i)),e},us.prototype.createModel=function(){return null},us.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},us.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},us.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},us.prototype.isMounted=function(){return 0!=(this.fastenerFlags&us.MountedFlag)},us.prototype.mount=function(){0==(this.fastenerFlags&us.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|us.MountedFlag),this.onMount(),this.didMount())},us.prototype.willMount=function(){},us.prototype.onMount=function(){},us.prototype.didMount=function(){},us.prototype.unmount=function(){0!=(this.fastenerFlags&us.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~us.MountedFlag),this.onUnmount(),this.didUnmount())},us.prototype.willUnmount=function(){},us.prototype.onUnmount=function(){},us.prototype.didUnmount=function(){},us.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=us);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},us.MountedFlag=1;var ps=function(t,e,i){return this instanceof ps?ds.call(this,t,e,i):(o=t,zr.decorateComponentTrait.bind(zr,ps.define(o)));var o};function ds(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(ps,Object),ps.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},ps.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},ps.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},ps.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},ps.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},ps.prototype.willSetTrait=function(t,e,i){},ps.prototype.onSetTrait=function(t,e,i){},ps.prototype.didSetTrait=function(t,e,i){},ps.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},ps.prototype.createTrait=function(){return null},ps.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},ps.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},ps.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},ps.prototype.isMounted=function(){return 0!=(this.fastenerFlags&ps.MountedFlag)},ps.prototype.mount=function(){0==(this.fastenerFlags&ps.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|ps.MountedFlag),this.onMount(),this.didMount())},ps.prototype.willMount=function(){},ps.prototype.onMount=function(){},ps.prototype.didMount=function(){},ps.prototype.unmount=function(){0!=(this.fastenerFlags&ps.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~ps.MountedFlag),this.onUnmount(),this.didUnmount())},ps.prototype.willUnmount=function(){},ps.prototype.onUnmount=function(){},ps.prototype.didUnmount=function(){},ps.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=ps);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},ps.MountedFlag=1;var cs=function(t,e,i){return this instanceof cs?vs.call(this,t,e,i):(o=t,zr.decorateComponentView.bind(zr,cs.define(o)));var o};function vs(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),this}w(cs,Object),cs.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},cs.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},cs.prototype.setView=function(t,e){(t instanceof Ln&&t.isMounted()||t instanceof Node&&Ln.isNodeMounted(t)&&Ln.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},cs.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},cs.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},cs.prototype.willSetView=function(t,e,i){},cs.prototype.onSetView=function(t,e,i){},cs.prototype.didSetView=function(t,e,i){},cs.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},cs.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},cs.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},cs.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},cs.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof Xi?t:null},cs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&cs.MountedFlag)},cs.prototype.mount=function(){0==(this.fastenerFlags&cs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|cs.MountedFlag),this.onMount(),this.didMount())},cs.prototype.willMount=function(){},cs.prototype.onMount=function(){},cs.prototype.didMount=function(){},cs.prototype.unmount=function(){0!=(this.fastenerFlags&cs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~cs.MountedFlag),this.onUnmount(),this.didUnmount())},cs.prototype.willUnmount=function(){},cs.prototype.onUnmount=function(){},cs.prototype.didUnmount=function(){},cs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=cs);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},cs.MountedFlag=1;var fs=function(t,e,i,o){return this instanceof fs?ys.call(this,t,e,i,o):(n=t,zr.decorateComponentViewTrait.bind(zr,fs.define(n)));var n};function ys(t,e,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"viewKey",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"view",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(this,"traitKey",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"trait",{value:null,enumerable:!0,configurable:!0}),this}w(fs,Object),fs.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},fs.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},fs.prototype.setView=function(t,e){(t instanceof Ln&&t.isMounted()||t instanceof Node&&Ln.isNodeMounted(t)&&Ln.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAnyView(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),Object.defineProperty(this,"view",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},fs.prototype.attachView=function(t){!0===this.observeView&&t.addViewObserver(this)},fs.prototype.detachView=function(t){!0===this.observeView&&t.removeViewObserver(this)},fs.prototype.willSetView=function(t,e,i){},fs.prototype.onSetView=function(t,e,i){},fs.prototype.didSetView=function(t,e,i){},fs.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAnyView(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.viewKey:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},fs.prototype.createView=function(){var t=this.viewType;return void 0!==t?t.create():null},fs.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},fs.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},fs.prototype.fromAnyView=function(t){var i=this.viewType;return e.FromAny.is(i)?i.fromAny(t):t instanceof Xi?t:null},fs.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},fs.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAnyTrait(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),Object.defineProperty(this,"trait",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},fs.prototype.attachTrait=function(t){!0===this.observeTrait&&t.addTraitObserver(this)},fs.prototype.detachTrait=function(t){!0===this.observeTrait&&t.removeTraitObserver(this)},fs.prototype.willSetTrait=function(t,e,i){},fs.prototype.onSetTrait=function(t,e,i){},fs.prototype.didSetTrait=function(t,e,i){},fs.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAnyTrait(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.traitKey:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},fs.prototype.createTrait=function(){return null},fs.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},fs.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},fs.prototype.fromAnyTrait=function(t){var i=this.traitType;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},fs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&fs.MountedFlag)},fs.prototype.mount=function(){0==(this.fastenerFlags&fs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|fs.MountedFlag),this.onMount(),this.didMount())},fs.prototype.willMount=function(){},fs.prototype.onMount=function(){},fs.prototype.didMount=function(){},fs.prototype.unmount=function(){0!=(this.fastenerFlags&fs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~fs.MountedFlag),this.onUnmount(),this.didUnmount())},fs.prototype.willUnmount=function(){},fs.prototype.onUnmount=function(){},fs.prototype.didUnmount=function(){},fs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=fs);var i=function(t,i,o,n){return e.call(this,t,i,o,n)||this},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},fs.MountedFlag=1;var gs=function(t,e,i){return this instanceof gs?ws.call(this,t,e,i):(o=t,zr.decorateComponentFastener.bind(zr,gs.define(o)));var o};function ws(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this,"owner",{value:t,enumerable:!0}),Object.defineProperty(this,"fastenerFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(this,"key",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"component",{value:null,enumerable:!0,configurable:!0}),this}w(gs,Object),gs.prototype.setFastenerFlags=function(t){Object.defineProperty(this,"fastenerFlags",{value:t,enumerable:!0,configurable:!0})},gs.prototype.getComponent=function(){var t=this.component;if(null===t)throw new TypeError("null "+this.name+" component");return t},gs.prototype.setComponent=function(t,e){var i=this.component;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentComponent===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertComponent(this.owner,t,e,this.key)),this.doSetComponent(t,e),i},gs.prototype.doSetComponent=function(t,e){var i=this.component;i!==t&&(this.willSetComponent(t,i,e),null!==i&&this.detachComponent(i),Object.defineProperty(this,"component",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachComponent(t),this.onSetComponent(t,i,e),this.didSetComponent(t,i,e))},gs.prototype.attachComponent=function(t){!0===this.observe&&t.addComponentObserver(this)},gs.prototype.detachComponent=function(t){!0===this.observe&&t.removeComponentObserver(this)},gs.prototype.willSetComponent=function(t,e,i){},gs.prototype.onSetComponent=function(t,e,i){},gs.prototype.didSetComponent=function(t,e,i){},Object.defineProperty(gs.prototype,"parentComponent",{get:function(){return this.owner},enumerable:!0,configurable:!0}),gs.prototype.injectComponent=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.component)&&(e=this.createComponent()):null!==(e=this.fromAny(e))&&this.doSetComponent(e,i),null!==e&&(null==t&&(t=this.parentComponent),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentComponent===t&&e.key===o||this.insertComponent(t,e,i,o),null===this.component&&this.doSetComponent(e,i)),e},gs.prototype.createComponent=function(){return null},gs.prototype.insertComponent=function(t,e,i,o){t.insertChildComponent(e,i,o)},gs.prototype.removeComponent=function(){var t=this.component;return null!==t&&t.remove(),t},gs.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof zr?t:null},gs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&gs.MountedFlag)},gs.prototype.mount=function(){0==(this.fastenerFlags&gs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|gs.MountedFlag),this.onMount(),this.didMount())},gs.prototype.willMount=function(){},gs.prototype.onMount=function(){},gs.prototype.didMount=function(){},gs.prototype.unmount=function(){0!=(this.fastenerFlags&gs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~gs.MountedFlag),this.onUnmount(),this.didUnmount())},gs.prototype.willUnmount=function(){},gs.prototype.onUnmount=function(){},gs.prototype.didUnmount=function(){},gs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=gs);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.component:(n.setComponent(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},gs.MountedFlag=1;var ms=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"key",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"parentComponent",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentServices",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentProperties",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentModels",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentViews",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentViewTraits",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"componentFasteners",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.willObserve=function(t){for(var e,i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.didObserve=function(t){for(var e,i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.setKey=function(t){Object.defineProperty(this,"key",{value:t,enumerable:!0,configurable:!0})},e.prototype.setParentComponent=function(t,e){this.willSetParentComponent(t,e),null!==e&&this.detachParentComponent(e),Object.defineProperty(this,"parentComponent",{value:t,enumerable:!0,configurable:!0}),null!==t&&this.attachParentComponent(t),this.onSetParentComponent(t,e),this.didSetParentComponent(t,e)},e.prototype.remove=function(){var t=this.parentComponent;null!==t&&(0==(this.componentFlags&zr.TraversingFlag)?t.removeChildComponent(this):this.setComponentFlags(this.componentFlags|zr.RemovingFlag))},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i),this.insertComponentFastener(e,i)},e.prototype.cascadeInsert=function(t,e){},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e),this.removeComponentFastener(e)},e.prototype.cascadeMount=function(){if(0!=(this.componentFlags&zr.MountedFlag))throw new Error("already mounted");this.setComponentFlags(this.componentFlags|zr.MountedFlag|zr.TraversingFlag);try{this.willMount(),this.onMount(),this.doMountChildComponents(),this.didMount()}finally{this.setComponentFlags(this.componentFlags&~zr.TraversingFlag)}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountComponentServices(),this.mountComponentProperties(),this.mountComponentModels(),this.mountComponentTraits(),this.mountComponentViews(),this.mountComponentViewTraits(),this.mountComponentFasteners()},e.prototype.doMountChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeMount(),0!=(t.componentFlags&zr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~zr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeUnmount=function(){if(0==(this.componentFlags&zr.MountedFlag))throw new Error("already unmounted");this.setComponentFlags(this.componentFlags&~zr.MountedFlag|zr.TraversingFlag);try{this.willUnmount(),this.doUnmountChildComponents(),this.onUnmount(),this.didUnmount()}finally{this.setComponentFlags(this.componentFlags&~zr.TraversingFlag)}},e.prototype.onUnmount=function(){this.unmountComponentFasteners(),this.unmountComponentViewTraits(),this.unmountComponentViews(),this.unmountComponentTraits(),this.unmountComponentModels(),this.unmountComponentProperties(),this.unmountComponentServices(),this.setComponentFlags(this.componentFlags&(~zr.ComponentFlagMask|zr.RemovingFlag))},e.prototype.doUnmountChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeUnmount(),0!=(t.componentFlags&zr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~zr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadePower=function(){if(0!=(this.componentFlags&zr.PoweredFlag))throw new Error("already powered");this.setComponentFlags(this.componentFlags|zr.PoweredFlag|zr.TraversingFlag);try{this.willPower(),this.onPower(),this.doPowerChildComponents(),this.didPower()}finally{this.setComponentFlags(this.componentFlags&~zr.TraversingFlag)}},e.prototype.doPowerChildComponents=function(){this.forEachChildComponent((function(t){t.cascadePower(),0!=(t.componentFlags&zr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~zr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeUnpower=function(){if(0==(this.componentFlags&zr.PoweredFlag))throw new Error("already unpowered");this.setComponentFlags(this.componentFlags&~zr.PoweredFlag|zr.TraversingFlag);try{this.willUnpower(),this.doUnpowerChildComponents(),this.onUnpower(),this.didUnpower()}finally{this.setComponentFlags(this.componentFlags&~zr.TraversingFlag)}},e.prototype.doUnpowerChildComponents=function(){this.forEachChildComponent((function(t){t.cascadeUnpower(),0!=(t.componentFlags&zr.RemovingFlag)&&(t.setComponentFlags(t.componentFlags&~zr.RemovingFlag),this.removeChildComponent(t))}),this)},e.prototype.cascadeCompile=function(t,e){var i=this.extendComponentContext(e);t&=~zr.NeedsCompile,t|=this.componentFlags&zr.UpdateMask,0!=((t=this.needsCompile(t,i))&zr.CompileMask)&&this.doCompile(t,i)},e.prototype.doCompile=function(t,e){var i=t;this.setComponentFlags(this.componentFlags&~zr.NeedsCompile|zr.TraversingFlag|zr.CompilingFlag);try{this.willCompile(i,e),0!=((this.componentFlags|t)&zr.NeedsResolve)&&(i|=zr.NeedsResolve,this.setComponentFlags(this.componentFlags&~zr.NeedsResolve),this.willResolve(e)),0!=((this.componentFlags|t)&zr.NeedsGenerate)&&(i|=zr.NeedsGenerate,this.setComponentFlags(this.componentFlags&~zr.NeedsGenerate),this.willGenerate(e)),0!=((this.componentFlags|t)&zr.NeedsAssemble)&&(i|=zr.NeedsAssemble,this.setComponentFlags(this.componentFlags&~zr.NeedsAssemble),this.willAssemble(e)),this.onCompile(i,e),0!=(i&zr.NeedsResolve)&&this.onResolve(e),0!=(i&zr.NeedsGenerate)&&this.onGenerate(e),0!=(i&zr.NeedsAssemble)&&this.onAssemble(e),this.doCompileChildComponents(i,e),0!=(i&zr.NeedsAssemble)&&this.didAssemble(e),0!=(i&zr.NeedsGenerate)&&this.didGenerate(e),0!=(i&zr.NeedsResolve)&&this.didResolve(e),this.didCompile(i,e)}finally{this.setComponentFlags(this.componentFlags&~(zr.TraversingFlag|zr.CompilingFlag))}},e.prototype.cascadeExecute=function(t,e){var i=this.extendComponentContext(e);t&=~zr.NeedsExecute,t|=this.componentFlags&zr.UpdateMask,0!=((t=this.needsExecute(t,i))&zr.ExecuteMask)&&this.doExecute(t,i)},e.prototype.doExecute=function(t,e){var i=t;this.setComponentFlags(this.componentFlags&~zr.NeedsExecute|zr.TraversingFlag|zr.ExecutingFlag);try{this.willExecute(i,e),0!=((this.componentFlags|t)&zr.NeedsRevise)&&(i|=zr.NeedsRevise,this.setComponentFlags(this.componentFlags&~zr.NeedsRevise),this.willRevise(e)),0!=((this.componentFlags|t)&zr.NeedsCompute)&&(i|=zr.NeedsCompute,this.setComponentFlags(this.componentFlags&~zr.NeedsCompute),this.willCompute(e)),this.onExecute(i,e),0!=(i&zr.NeedsRevise)&&this.onRevise(e),0!=(i&zr.NeedsCompute)&&this.onCompute(e),this.doExecuteChildComponents(i,e),0!=(i&zr.NeedsCompute)&&this.didCompute(e),0!=(i&zr.NeedsRevise)&&this.didRevise(e),this.didExecute(i,e)}finally{this.setComponentFlags(this.componentFlags&~(zr.TraversingFlag|zr.ExecutingFlag))}},e.prototype.onRevise=function(e){t.prototype.onRevise.call(this,e),this.reviseComponentProperties()},e.prototype.hasComponentService=function(t){var e=this.componentServices;return null!==e&&void 0!==e[t]},e.prototype.getComponentService=function(t){var e=this.componentServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentService=function(t,e){var i=this.componentServices;null===i&&(i={},Object.defineProperty(this,"componentServices",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentServices=function(){var t=this.componentServices;for(var e in t){t[e].mount()}},e.prototype.unmountComponentServices=function(){var t=this.componentServices;for(var e in t){t[e].unmount()}},e.prototype.hasComponentProperty=function(t){var e=this.componentProperties;return null!==e&&void 0!==e[t]},e.prototype.getComponentProperty=function(t){var e=this.componentProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentProperty=function(t,e){var i=this.componentProperties;null===i&&(i={},Object.defineProperty(this,"componentProperties",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.reviseComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].onRevise()}},e.prototype.mountComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].mount()}},e.prototype.unmountComponentProperties=function(){var t=this.componentProperties;for(var e in t){t[e].unmount()}},e.prototype.hasComponentModel=function(t){var e=this.componentModels;return null!==e&&void 0!==e[t]},e.prototype.getComponentModel=function(t){var e=this.componentModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentModel=function(t,e){var i=this.componentModels;null===i&&(i={},Object.defineProperty(this,"componentModels",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentModels=function(){var t=this.componentModels;for(var e in t){t[e].mount()}},e.prototype.unmountComponentModels=function(){var t=this.componentModels;for(var e in t){t[e].unmount()}},e.prototype.hasComponentTrait=function(t){var e=this.componentTraits;return null!==e&&void 0!==e[t]},e.prototype.getComponentTrait=function(t){var e=this.componentTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentTrait=function(t,e){var i=this.componentTraits;null===i&&(i={},Object.defineProperty(this,"componentTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentTraits=function(){var t=this.componentTraits;for(var e in t){t[e].mount()}},e.prototype.unmountComponentTraits=function(){var t=this.componentTraits;for(var e in t){t[e].unmount()}},e.prototype.hasComponentView=function(t){var e=this.componentViews;return null!==e&&void 0!==e[t]},e.prototype.getComponentView=function(t){var e=this.componentViews;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentView=function(t,e){var i=this.componentViews;null===i&&(i={},Object.defineProperty(this,"componentViews",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentViews=function(){var t=this.componentViews;for(var e in t){t[e].mount()}},e.prototype.unmountComponentViews=function(){var t=this.componentViews;for(var e in t){t[e].unmount()}},e.prototype.hasComponentViewTrait=function(t){var e=this.componentViewTraits;return null!==e&&void 0!==e[t]},e.prototype.getComponentViewTrait=function(t){var e=this.componentViewTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentViewTrait=function(t,e){var i=this.componentViewTraits;null===i&&(i={},Object.defineProperty(this,"componentViewTraits",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentViewTraits=function(){var t=this.componentViewTraits;for(var e in t){t[e].mount()}},e.prototype.unmountComponentViewTraits=function(){var t=this.componentViewTraits;for(var e in t){t[e].unmount()}},e.prototype.hasComponentFastener=function(t){var e=this.componentFasteners;return null!==e&&void 0!==e[t]},e.prototype.getComponentFastener=function(t){var e=this.componentFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setComponentFastener=function(t,e){var i=this.componentFasteners;null===i&&(i={},Object.defineProperty(this,"componentFasteners",{value:i,enumerable:!0,configurable:!0}));var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountComponentFasteners=function(){var t=this.componentFasteners;for(var e in t){t[e].mount()}},e.prototype.unmountComponentFasteners=function(){var t=this.componentFasteners;for(var e in t){t[e].unmount()}},e.prototype.insertComponentFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyComponentFastener(i);null!==o&&!0===o.child&&o.doSetComponent(t,e)}},e.prototype.removeComponentFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getComponentFastener(e);null!==i&&!0===i.child&&i.doSetComponent(null,null)}},e}(zr),bs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childComponents",{value:[],enumerable:!0}),Object.defineProperty(e,"childComponentMap",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childComponentCount",{get:function(){return this.childComponents.length},enumerable:!1,configurable:!0}),e.prototype.forEachChildComponent=function(t,e){for(var i,o=this.childComponents,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.firstChildComponent=function(){var t=this.childComponents;return 0!==t.length?t[0]:null},e.prototype.lastChildComponent=function(){var t=this.childComponents;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildComponent=function(t){var e=this.childComponents,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildComponent=function(t){var e=this.childComponents,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.getChildComponent=function(t){var e=this.childComponentMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildComponent=function(t,e){var i=null,o=this.childComponents;null!==e&&(e.parentComponent===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildComponent(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildComponent(r),r.setParentComponent(null,this),this.removeChildComponentMap(r),o.splice(n,1),this.onRemoveChildComponent(r),this.didRemoveChildComponent(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildComponent(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildComponentMap(e),e.setParentComponent(this,null),this.onInsertChildComponent(e,i),this.didInsertChildComponent(e,i),e.cascadeInsert()),r},e.prototype.insertChildComponentMap=function(t){var e=t.key;if(void 0!==e){var i=this.childComponentMap;null===i&&(i={},Object.defineProperty(this,"childComponentMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildComponentMap=function(t){var e=t.key;if(void 0!==e){var i=this.childComponentMap;null!==i&&delete i[e]}},e.prototype.appendChildComponent=function(t,e){t.remove(),void 0!==e&&(this.removeChildComponent(e),t.setKey(e)),this.willInsertChildComponent(t,null),this.childComponents.push(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,null),this.didInsertChildComponent(t,null),t.cascadeInsert()},e.prototype.prependChildComponent=function(t,e){t.remove(),void 0!==e&&(this.removeChildComponent(e),t.setKey(e));var i=this.childComponents,o=0!==i.length?i[0]:null;this.willInsertChildComponent(t,o),i.unshift(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,o),this.didInsertChildComponent(t,o),t.cascadeInsert()},e.prototype.insertChildComponent=function(t,e,i){if(null!==e&&e.parentComponent!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildComponent(i),t.setKey(i)),this.willInsertChildComponent(t,e);var o=this.childComponents,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildComponentMap(t),t.setParentComponent(this,null),this.onInsertChildComponent(t,e),this.didInsertChildComponent(t,e),t.cascadeInsert()},e.prototype.removeChildComponent=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildComponent(t)))return null}else e=t;if(e.parentComponent!==this)throw new Error("not a child component");this.willRemoveChildComponent(e),e.setParentComponent(null,this),this.removeChildComponentMap(e);var i=this.childComponents,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildComponent(e),this.didRemoveChildComponent(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childComponents;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildComponent(i),i.setParentComponent(null,this),this.removeChildComponentMap(i),t.pop(),this.onRemoveChildComponent(i),this.didRemoveChildComponent(i),i.setKey(void 0)}},e.prototype.doMountChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.componentFlags&zr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~zr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doUnmountChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.componentFlags&zr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~zr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doPowerChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.componentFlags&zr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~zr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.doUnpowerChildComponents=function(){for(var t=this.childComponents,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.componentFlags&zr.RemovingFlag)?e+=1:(i.setComponentFlags(i.componentFlags&~zr.RemovingFlag),this.removeChildComponent(i))}},e.prototype.compileChildComponents=function(t,e,i){for(var o=this.childComponents,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.componentFlags&zr.RemovingFlag)?n+=1:(r.setComponentFlags(r.componentFlags&~zr.RemovingFlag),this.removeChildComponent(r))}},e.prototype.executeChildComponents=function(t,e,i){for(var o=this.childComponents,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.componentFlags&zr.RemovingFlag)?n+=1:(r.setComponentFlags(r.componentFlags&~zr.RemovingFlag),this.removeChildComponent(r))}},e}(ms),Ss=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"glowState",{value:"ready",enumerable:!0,configurable:!0}),i.glowTimer=0,i.initGlow(),i}return w(e,t),e.prototype.initGlow=function(){this.addClass("button-glow"),this.position.setState("absolute",Xi.Intrinsic),this.width.setState(r.Length.zero(),Xi.Intrinsic),this.height.setState(r.Length.zero(),Xi.Intrinsic),this.borderTopLeftRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderTopRightRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderBottomLeftRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderBottomRightRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.didMount=function(){if(this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var e=this.getLookOr(Qt.highlightColor,null);null!==e&&(e=e.alpha(1)),this.backgroundColor.setState(e,Xi.Intrinsic)}t.prototype.didMount.call(this)},e.prototype.onUnmount=function(){Object.defineProperty(this,"glowState",{value:"ready",enumerable:!0,configurable:!0}),this.cancelGlow(),this.remove(),t.prototype.onUnmount.call(this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var n=e.getOr(Qt.highlightColor,i,null);null!==n&&(n=n.alpha(1)),this.backgroundColor.setState(n,Xi.Intrinsic)}},e.prototype.glow=function(t,e,i,o){if(void 0===o&&(o=0),"ready"===this.glowState)if(this.cancelGlow(),0!==o){var n=this.glow.bind(this,t,e,i,Xi.Intrinsic);this.glowTimer=setTimeout(n,o)}else{i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i),this.willGlow();var r=this.node.offsetParent;if(null!==r){var s=r.getBoundingClientRect(),l=t-s.left,u=e-s.top,h=Math.max(l,s.width-l),p=Math.max(u,s.height-u),d=Math.sqrt(h*h+p*p),c=this.getLook(Qt.highlightColor),v=void 0!==c?c.alpha():.1;this.opacity.setState(v,Xi.Intrinsic),!1!==i?(this.left.setState(l,Xi.Intrinsic),this.top.setState(u,Xi.Intrinsic),this.left.setState(l-d,i,Xi.Intrinsic),this.top.setState(u-d,i,Xi.Intrinsic),this.width.setState(2*d,i,Xi.Intrinsic),this.height.setState(2*d,i,Xi.Intrinsic)):(this.left.setState(l-d,Xi.Intrinsic),this.top.setState(u-d,Xi.Intrinsic),this.width.setState(2*d,Xi.Intrinsic),this.height.setState(2*d,Xi.Intrinsic),this.didGlow()),Object.defineProperty(this,"glowState",{value:"glowing",enumerable:!0,configurable:!0})}}},e.prototype.willGlow=function(){},e.prototype.didGlow=function(){},e.prototype.cancelGlow=function(){0!==this.glowTimer&&(clearTimeout(this.glowTimer),this.glowTimer=0)},e.prototype.pulse=function(t,e,i){i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i),"ready"===this.glowState&&this.glow(t,e,i),"glowing"===this.glowState&&(this.willPulse(),!1!==i?this.opacity.setState(0,i,Xi.Intrinsic):(this.opacity.setState(0,Xi.Intrinsic),this.didPulse()),Object.defineProperty(this,"glowState",{value:"pulsing",enumerable:!0,configurable:!0}))},e.prototype.willPulse=function(){},e.prototype.didPulse=function(){this.remove()},e.prototype.fade=function(t,e,i){"ready"===this.glowState?(this.cancelGlow(),this.didFade()):"glowing"===this.glowState&&(i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i),this.willFade(),!1!==i?this.opacity.setState(0,i,Xi.Intrinsic):(this.opacity.setState(0,Xi.Intrinsic),this.didFade())),Object.defineProperty(this,"glowState",{value:"fading",enumerable:!0,configurable:!0})},e.prototype.willFade=function(){},e.prototype.didFade=function(){this.remove()},m([sn({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null},onEnd:function(t){this.owner.didGlow()}})],e.prototype,"left",void 0),m([nn({propertyNames:"opacity",type:Number,onEnd:function(t){"pulsing"===this.owner.glowState&&0===t?this.owner.didPulse():"fading"===this.owner.glowState&&0===t&&this.owner.didFade()}})],e.prototype,"opacity",void 0),e}(Zn),Cs=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"gesture",{value:i.createGesture(),enumerable:!0,configurable:!0}),i.initMembrane(e),i}return w(e,t),e.prototype.initMembrane=function(t){this.addClass("membrane")},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.createGesture=function(){return new Ho(this,this)},Object.defineProperty(e.prototype,"glows",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setGlows=function(t){this.glows!==t&&Object.defineProperty(this,"glows",{value:t,configurable:!0,enumerable:!0})},e.prototype.didBeginPress=function(t,e){this.glows&&this.glow(t)},e.prototype.glow=function(t){if(t.detail instanceof Ss&&(t.detail.fade(t.x,t.y),t.detail=void 0),void 0===t.detail){var e="mouse"===t.inputType?0:100;t.detail=this.prepend(Ss),t.detail.glow(t.x,t.y,void 0,e)}},e.prototype.didMovePress=function(t,e){t.isRunaway()?this.gesture.cancelPress(t,e):this.clientBounds.contains(t.x,t.y)||(this.gesture.beginHover(t,e),t.detail instanceof Ss&&(t.detail.fade(t.x,t.y),t.detail=void 0))},e.prototype.didEndPress=function(t,e){this.clientBounds.contains(t.x,t.y)?t.detail instanceof Ss&&t.detail.pulse(t.x,t.y):(this.gesture.endHover(t,e),t.detail instanceof Ss&&(t.detail.fade(t.x,t.y),t.detail=void 0))},e.prototype.didCancelPress=function(t,e){this.clientBounds.contains(t.x,t.y)||this.gesture.endHover(t,e),t.detail instanceof Ss&&(t.detail.fade(t.x,t.y),t.detail=void 0)},e}(Zn),Ps=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"buttonType",{value:"regular",enumerable:!0,configurable:!0}),i.iconCount=0,i.icon=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("floating-button"),this.position.setState("relative",Xi.Intrinsic),"regular"===this.buttonType?(this.width.setState(56,Xi.Intrinsic),this.height.setState(56,Xi.Intrinsic)):"mini"===this.buttonType&&(this.width.setState(40,Xi.Intrinsic),this.height.setState(40,Xi.Intrinsic)),this.borderTopLeftRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderTopRightRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderBottomLeftRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.borderBottomRightRadius.setState(r.Length.pct(50),Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic)},e.prototype.setButtonType=function(t){this.buttonType!==t&&(Object.defineProperty(this,"buttonType",{value:t,enumerable:!0,configurable:!0}),"regular"===t?(this.width.setState(56,Xi.Intrinsic),this.height.setState(56,Xi.Intrinsic)):"mini"===t&&(this.width.setState(40,Xi.Intrinsic),this.height.setState(40,Xi.Intrinsic)))},e.prototype.pushIcon=function(t,i){i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i);var o=this.iconCount,n="icon"+o,s=this.getViewFastener(n),l=null!==s?s.view:null;null!==l&&(!1!==i?(l.opacity.setState(0,i,Xi.Intrinsic),l.transform.setState(r.Transform.rotate(r.Angle.deg(90)),i,Xi.Intrinsic)):l.remove());var u=o+1,h="icon"+u,p=new e.IconFastener(this,h,h);p.iconIndex=u;var d=Br.create();d.position.setState("absolute",Xi.Intrinsic),d.left.setState(0,Xi.Intrinsic),d.top.setState(0,Xi.Intrinsic),d.width.setState(this.width.state,Xi.Intrinsic),d.height.setState(this.height.state,Xi.Intrinsic),d.opacity.setState(0,Xi.Intrinsic),d.opacity.setState(1,i,Xi.Intrinsic),d.transform.setState(r.Transform.rotate(r.Angle.deg(-90)),Xi.Intrinsic),d.transform.setState(r.Transform.rotate(r.Angle.deg(0)),i,Xi.Intrinsic),d.pointerEvents.setState("none",Xi.Intrinsic),d.iconWidth.setState(24,Xi.Intrinsic),d.iconHeight.setState(24,Xi.Intrinsic),d.iconColor.setPrecedence(Xi.Extrinsic),d.graphics.setState(t,Xi.Intrinsic),p.setView(d),this.setViewFastener(h,p),this.appendChildView(d,h),this.iconCount=u,this.icon=p},e.prototype.popIcon=function(t){t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t);var e=this.iconCount,i="icon"+e,o=this.getViewFastener(i),n=null!==o?o.view:null;null!==n&&(!1!==t?(n.opacity.setState(0,t,Xi.Intrinsic),n.transform.setState(r.Transform.rotate(r.Angle.deg(-90)),t,Xi.Intrinsic)):n.remove());var s=e-1,l="icon"+s,u=this.getViewFastener(l),h=null!==u?u.view:null;null!==h&&(h.opacity.setState(1,t,Xi.Intrinsic),h.transform.setState(r.Transform.rotate(r.Angle.deg(0)),t,Xi.Intrinsic),this.appendChildView(h,l)),this.iconCount=s,this.icon=u},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.setState(e.getOr(Qt.accentColor,i,null),o,Xi.Intrinsic);var n=e.getOr(Qt.shadow,he.floating,null);if(null!==n){var r=n.color,s=this.stackPhase.getValueOr(1);n=n.withColor(r.alpha(r.alpha()*s))}this.boxShadow.setState(n,o,Xi.Intrinsic)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.getLookOr(Qt.shadow,he.floating,null);if(null!==i){var o=i.color,n=this.stackPhase.getValueOr(1);i=i.withColor(o.alpha(o.alpha()*n))}this.boxShadow.setState(i,Xi.Intrinsic)},e.prototype.didStartHovering=function(){if(this.modifyMood(re.default,[[re.hovering,1]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var t=this.getLook(Qt.timing);this.backgroundColor.setState(this.getLookOr(Qt.accentColor,null),t,Xi.Intrinsic)}},e.prototype.didStopHovering=function(){if(this.modifyMood(re.default,[[re.hovering,void 0]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var t=this.getLook(Qt.timing);this.backgroundColor.setState(this.getLookOr(Qt.accentColor,null),t,Xi.Intrinsic)}},e.prototype.didMovePress=function(t,e){},e.IconFastener=Lo.define({extends:void 0,type:Br,child:!1,observe:!0,iconIndex:0,viewDidApplyTheme:function(t,e,i,o){var n=t.getOr(Qt.backgroundColor,e,null);o.iconColor.setState(n,i)},viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.key,null))}}),m([So({type:Number,inherit:!0})],e.prototype,"stackPhase",void 0),e}(Cs),Vs=function(t){function e(e){var i=t.call(this,e)||this;return i.initButtonItem(),i}return w(e,t),e.prototype.initButtonItem=function(){this.addClass("button-item"),this.position.setState("relative",Xi.Intrinsic);var t=this.createButton();null!==t&&this.setChildView("button",t)},e.prototype.createButton=function(){var t=Ps.create();return t.setButtonType("mini"),t},Object.defineProperty(e.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof Ps?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){var t=this.button,e=null!==t?t.icon:null;return null!==e?e.view:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this.getChildView("label");return t instanceof Zn?t:null},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.label;null!==n&&n.color.takesPrecedence(Xi.Intrinsic)&&n.color.setState(e.getOr(Qt.mutedColor,i,null),o,Xi.Intrinsic)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.stackPhase.getValueOr(1),o=this.button;null!==o&&(this.width.setState(o.width.state,Xi.Intrinsic),this.height.setState(o.height.state,Xi.Intrinsic));var n=this.label;null!==n&&n.opacity.setState(i,Xi.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=e.key;"button"===o&&e instanceof Ps?this.onInsertButton(e):"label"===o&&e instanceof Zn&&this.onInsertLabel(e)},e.prototype.onRemoveChildView=function(e){var i=e.key;"button"===i&&e instanceof Ps?this.onRemoveButton(e):"label"===i&&e instanceof Zn&&this.onRemoveLabel(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertButton=function(t){},e.prototype.onRemoveButton=function(t){},e.prototype.onInsertLabel=function(t){t.display.setState("block",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.right.setState(56,Xi.Intrinsic),t.bottom.setState(0,Xi.Intrinsic),t.fontSize.setState(17,Xi.Intrinsic),t.fontWeight.setState("500",Xi.Intrinsic),t.lineHeight.setState(40,Xi.Intrinsic),t.whiteSpace.setState("nowrap",Xi.Intrinsic),t.opacity.setState(this.stackPhase.getValueOr(0),Xi.Intrinsic)},e.prototype.onRemoveLabel=function(t){},m([So({type:Number,inherit:!0})],e.prototype,"stackPhase",void 0),e}(Zn),Fs=function(t){function i(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"stackState",{value:"collapsed",enumerable:!0,configurable:!0}),Object.defineProperty(i,"stackHeight",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"gesture",{value:null,enumerable:!0,configurable:!0}),i.onClick=i.onClick.bind(i),i.onContextMenu=i.onContextMenu.bind(i),i.initButtonStack(),i.initButton(),i}return w(i,t),i.prototype.initButtonStack=function(){this.addClass("button-stack"),this.display.setState("block",Xi.Intrinsic),this.position.setState("relative",Xi.Intrinsic),this.width.setState(56,Xi.Intrinsic),this.height.setState(56,Xi.Intrinsic),this.opacity.setState(1,Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic)},i.prototype.initButton=function(){var t=this.createButton();null!==t&&this.append(t,"button")},i.prototype.createButton=function(){return Ps.create()},i.prototype.isExpanded=function(){return"expanded"===this.stackState||"expanding"===this.stackState},i.prototype.isCollapsed=function(){return"collapsed"===this.stackState||"collapsing"===this.stackState},Object.defineProperty(i.prototype,"modalView",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){var t=this.stackState;return"collapsed"===t?"hidden":"expanding"===t?"showing":"expanded"===t?"shown":"collapsing"===t?"hiding":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modality",{get:function(){return this.stackPhase.getValue()},enumerable:!1,configurable:!0}),i.prototype.showModal=function(t,e){this.expand(e)},i.prototype.hideModal=function(t){this.collapse(t)},Object.defineProperty(i.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof Zn?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;n instanceof Vs&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.insertItem=function(t,e,i){void 0===e&&(e=this.node.childNodes.length-1),this.insertChildNode(t.node,this.node.childNodes[1+e]||null,i)},i.prototype.removeItems=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;i instanceof Vs&&this.removeChild(i)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu)},i.prototype.onUnmount=function(){this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),t.prototype.onUnmount.call(this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutStack();var i=this.modalService.manager;void 0!==i&&i.updateModality()},i.prototype.layoutStack=function(){var t,e=this.stackPhase.getValue(),i=this.node.childNodes,o=i.length,n=this.button,s=o-1,a=0,l=0;if(null!==n){n.zIndex.setState(o,Xi.Intrinsic);var u=null!==n?n.height.value:void 0;t=u instanceof r.Length?u.pxValue():n.node.offsetHeight}else t=0;for(var h=this.buttonSpacing.value,p=this.itemSpacing.value,d=0;d<o;d+=1){var c=i[d].view;if(c instanceof Vs){0===a?(l+=h,t+=h):(l+=p,t+=p);var v=c.height.value,f=v instanceof r.Length?v.pxValue():c.node.offsetHeight;c.display.setState(0===e?"none":"flex",Xi.Intrinsic),c.bottom.setState(e*t,Xi.Intrinsic),c.zIndex.setState(s,Xi.Intrinsic),t+=f,l+=f,a+=1,s-=1}}Object.defineProperty(this,"stackHeight",{value:l,enumerable:!0,configurable:!0})},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"button"===e.key&&e instanceof Zn?this.onInsertButton(e):e instanceof Vs&&this.onInsertItem(e)},i.prototype.onRemoveChildView=function(e){"button"===e.key&&e instanceof Zn?this.onRemoveButton(e):e instanceof Vs&&this.onRemoveItem(e),t.prototype.onRemoveChildView.call(this,e)},i.prototype.onInsertButton=function(t){var e=new Ho(t,this);Object.defineProperty(this,"gesture",{value:e,enumerable:!0,configurable:!0}),t.addViewObserver(e),t instanceof Ps&&(t.stackPhase.setState(1,Xi.Intrinsic),this.isExpanded()&&t.pushIcon(this.closeIcon)),t.zIndex.setState(0,Xi.Intrinsic)},i.prototype.onRemoveButton=function(t){t.removeViewObserver(this.gesture),Object.defineProperty(this,"gesture",{value:null,enumerable:!0,configurable:!0})},i.prototype.onInsertItem=function(t){t.position.setState("absolute",Xi.Intrinsic),t.right.setState(8,Xi.Intrinsic),t.bottom.setState(8,Xi.Intrinsic),t.left.setState(8,Xi.Intrinsic),t.zIndex.setState(0,Xi.Intrinsic)},i.prototype.onRemoveItem=function(t){},i.prototype.expand=function(t){if("expanded"!==this.stackState||1!==this.stackPhase.value){if(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),"expanding"!==this.stackState){this.willExpand();var e=this.button;e instanceof Ps&&e.pushIcon(this.closeIcon,t)}!1!==t?1!==this.stackPhase.value?this.stackPhase.setState(1,t,Xi.Intrinsic):setTimeout(this.didExpand.bind(this)):(this.stackPhase.setState(1,Xi.Intrinsic),this.didExpand())}},i.prototype.willExpand=function(){Object.defineProperty(this,"stackState",{value:"expanding",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.buttonStackWillExpand&&t.buttonStackWillExpand(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillExpand&&n.buttonStackWillExpand(this)}},i.prototype.didExpand=function(){Object.defineProperty(this,"stackState",{value:"expanded",enumerable:!0,configurable:!0}),this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidExpand&&o.buttonStackDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidExpand&&n.buttonStackDidExpand(this)},i.prototype.collapse=function(t){if("collapsed"!==this.stackState||0!==this.stackPhase.value){if(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),"collapsing"!==this.stackState){this.willCollapse();var e=this.button;e instanceof Ps&&e.iconCount>1&&e.popIcon(t)}!1!==t?0!==this.stackPhase.value?this.stackPhase.setState(0,t,Xi.Intrinsic):setTimeout(this.didCollapse.bind(this)):(this.stackPhase.setState(0,Xi.Intrinsic),this.didCollapse())}},i.prototype.willCollapse=function(){Object.defineProperty(this,"stackState",{value:"collapsing",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.buttonStackWillCollapse&&t.buttonStackWillCollapse(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillCollapse&&n.buttonStackWillCollapse(this)}},i.prototype.didCollapse=function(){Object.defineProperty(this,"stackState",{value:"collapsed",enumerable:!0,configurable:!0}),this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidCollapse&&o.buttonStackDidCollapse(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidCollapse&&n.buttonStackDidCollapse(this)},i.prototype.toggle=function(t){var e=this.stackState;"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},i.prototype.show=function(t){1!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willShow(),!1!==t?this.opacity.setState(1,t,Xi.Intrinsic):(this.opacity.setState(1,Xi.Intrinsic),this.didShow()))},i.prototype.willShow=function(){var t=this.viewController;null!==t&&void 0!==t.buttonStackWillShow&&t.buttonStackWillShow(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillShow&&n.buttonStackWillShow(this)}this.display("block")},i.prototype.didShow=function(){this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidShow&&o.buttonStackDidShow(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidShow&&n.buttonStackDidShow(this)},i.prototype.hide=function(t){0!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willHide(),!1!==t?this.opacity.setState(0,t,Xi.Intrinsic):(this.opacity.setState(0,Xi.Intrinsic),this.didHide()))},i.prototype.willHide=function(){var t=this.viewController;null!==t&&void 0!==t.buttonStackWillHide&&t.buttonStackWillHide(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonStackWillHide&&n.buttonStackWillHide(this)}},i.prototype.didHide=function(){this.display("none"),this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidHide&&o.buttonStackDidHide(this)}var n=this.viewController;null!==n&&void 0!==n.buttonStackDidHide&&n.buttonStackDidHide(this)},i.prototype.didBeginPress=function(t,e){},i.prototype.didMovePress=function(t,e){if(!t.defaultPrevented&&"expanded"!==this.stackState){var i=this.stackHeight,o=Math.min(Math.max(0,-(t.y-t.y0)/(.5*i)),1);if(this.stackPhase.setState(o,Xi.Intrinsic),this.requireUpdate(Xi.NeedsLayout),o>.1&&(t.clearHoldTimer(),"collapsed"===this.stackState)){this.willExpand();var n=this.button;n instanceof Ps&&n.pushIcon(this.closeIcon)}}},i.prototype.didEndPress=function(t,e){if(!t.defaultPrevented){var i=this.stackPhase.getValue();t.t-t.t0<t.holdDelay?i<.1||"expanded"===this.stackState?this.collapse():this.expand():i<.5?this.collapse():i>=.5&&this.expand()}},i.prototype.didCancelPress=function(t,e){2===t.buttons?this.toggle():this.stackPhase.getValue()<.1||"expanded"===this.stackState?this.collapse():this.expand()},i.prototype.didLongPress=function(t){t.preventDefault(),this.toggle()},i.prototype.onClick=function(t){var e;t.target===(null===(e=this.button)||void 0===e?void 0:e.node)&&t.stopPropagation()},i.prototype.onContextMenu=function(t){t.preventDefault()},Object.defineProperty(i,"closeIcon",{get:function(){return xr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),m([So({type:Number,state:0,updateFlags:Xi.NeedsLayout,onEnd:function(t){var e=this.owner.stackState;"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],i.prototype,"stackPhase",void 0),m([So({type:Number,state:28,updateFlags:Xi.NeedsLayout})],i.prototype,"buttonSpacing",void 0),m([So({type:Number,state:20,updateFlags:Xi.NeedsLayout})],i.prototype,"itemSpacing",void 0),m([nn({propertyNames:"opacity",type:Number,onEnd:function(t){1===t?this.owner.didShow():0===t&&this.owner.didHide()}})],i.prototype,"opacity",void 0),m([e.Lazy],i,"closeIcon",null),i}(Zn),Ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"stackState",{get:function(){var t=this.view;return null!==t?t.stackState:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){var t=this.view;return null!==t?t.button:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this.view;return null!==t?t.items:[]},enumerable:!1,configurable:!0}),e.prototype.removeItems=function(){var t=this.view;null!==t&&t.removeItems()},e.prototype.buttonStackWillExpand=function(t){t.modalService.presentModal(t)},e.prototype.buttonStackDidExpand=function(t){},e.prototype.buttonStackWillCollapse=function(t){},e.prototype.buttonStackDidCollapse=function(t){t.modalService.dismissModal(t)},e.prototype.buttonStackWillShow=function(t){},e.prototype.buttonStackDidShow=function(t){},e.prototype.buttonStackWillHide=function(t){},e.prototype.buttonStackDidHide=function(t){},e}(_n),Ds=function(t){function e(e){var i=t.call(this,e)||this;return i.iconCount=0,i.icon=null,i.onClick=i.onClick.bind(i),i.initButton(),i.initTheme(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("icon-button"),this.position.setState("relative",Xi.Intrinsic),this.width.setState(44,Xi.Intrinsic),this.height.setState(44,Xi.Intrinsic),this.display.setState("flex",Xi.Intrinsic),this.justifyContent.setState("center",Xi.Intrinsic),this.alignItems.setState("center",Xi.Intrinsic),this.borderTopLeftRadius.setState(4,Xi.Intrinsic),this.borderTopRightRadius.setState(4,Xi.Intrinsic),this.borderBottomLeftRadius.setState(4,Xi.Intrinsic),this.borderBottomRightRadius.setState(4,Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic)},e.prototype.initTheme=function(){this.modifyTheme(re.default,[[re.translucent,1]])},e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e)},e.prototype.pushIcon=function(t,i){var o=this.iconCount,n=o+1;this.iconCount=n,i=(void 0!==i||0!==o)&&(void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i));var s="icon"+o,l=this.getViewFastener(s),u=null!==l?l.view:null;null!==u&&(!1!==i?(u.opacity.setState(0,i,Xi.Intrinsic),u.cssTransform.setState(r.Transform.rotate(r.Angle.deg(90)),i,Xi.Intrinsic)):u.remove());var h="icon"+n,p=new e.IconFastener(this,h,h);p.iconIndex=n,this.icon=p;var d=Ur.create();d.setStyle("position","absolute"),d.setStyle("left","0"),d.setStyle("top","0"),d.opacity.setState(0,Xi.Intrinsic),d.opacity.setState(1,i,Xi.Intrinsic),d.cssTransform.setState(r.Transform.rotate(r.Angle.deg(-90)),Xi.Intrinsic),d.cssTransform.setState(r.Transform.rotate(r.Angle.deg(0)),i,Xi.Intrinsic),d.pointerEvents.setState("none",Xi.Intrinsic),d.xAlign.setInherit(!0),d.yAlign.setInherit(!0),d.iconWidth.setInherit(!0),d.iconHeight.setInherit(!0),d.iconColor.setInherit(!0),d.graphics.setState(t,Xi.Intrinsic),p.setView(d),this.setViewFastener(h,p),this.appendChildView(d,h)},e.prototype.popIcon=function(t){var e=this.iconCount,i=e-1;this.iconCount=i,t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t);var o="icon"+e,n=this.getViewFastener(o),s=null!==n?n.view:null;null!==s&&(!1!==t?(s.opacity.setState(0,t,Xi.Intrinsic),s.cssTransform.setState(r.Transform.rotate(r.Angle.deg(-90)),t,Xi.Intrinsic)):(s.remove(),this.setViewFastener(o,null)));var l="icon"+i,u=this.getViewFastener(l);this.icon=u;var h=null!==u?u.view:null;return null!==h&&(h.opacity.setState(1,t,Xi.Intrinsic),h.cssTransform.setState(r.Transform.rotate(r.Angle.deg(0)),t,Xi.Intrinsic),this.appendChildView(h,l)),s},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var n=this.getLookOr(Qt.backgroundColor,null);!this.gesture.isHovering()&&n instanceof St&&(n=n.alpha(0)),this.backgroundColor.setState(n,o,Xi.Intrinsic)}if(!this.graphics.isInherited()){var r=this.graphics.value;if(r instanceof Mr){var s=r.withTheme(e,i);this.graphics.setOwnState(s,!!r.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Xi.NeedsLayout)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Xi.NeedsLayout)&&(t&=~Xi.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.viewFasteners;if(null!==t){var i=this.width.value;i=i instanceof r.Length?i.pxValue():this.node.offsetWidth;var o=this.height.value;for(var n in o=o instanceof r.Length?o.pxValue():this.node.offsetHeight,t){var s=t[n];if(s instanceof e.IconFastener){var a=s.view;null!==a&&(a.width.setState(i,Xi.Intrinsic),a.height.setState(o,Xi.Intrinsic),a.viewBox.setState("0 0 "+i+" "+o,Xi.Intrinsic))}}}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick)},e.prototype.onUnmount=function(){this.off("click",this.onClick),t.prototype.onUnmount.call(this)},Object.defineProperty(e.prototype,"hovers",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setHovers=function(t){this.hovers!==t&&Object.defineProperty(this,"hovers",{value:t,configurable:!0,enumerable:!0})},e.prototype.didStartHovering=function(){if(this.hovers){this.modifyMood(re.default,[[re.hovering,1]]);var t=this.getLook(Qt.timing);this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(this.getLookOr(Qt.backgroundColor,null),t,Xi.Intrinsic)}},e.prototype.didStopHovering=function(){this.modifyMood(re.default,[[re.hovering,void 0]]);var t=this.getLook(Qt.timing);if(this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var e=this.getLookOr(Qt.backgroundColor,null);null!==e&&(e=e.alpha(0)),this.backgroundColor.setState(e,t,Xi.Intrinsic)}},e.prototype.onClick=function(t){t.stopPropagation();for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonDidPress&&n.buttonDidPress(this)}var r=this.viewController;null!==r&&void 0!==r.buttonDidPress&&r.buttonDidPress(this)},e.IconFastener=Lo.define({extends:void 0,type:Ur,child:!1,observe:!0,iconIndex:0,viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.name,null))}}),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:r.Length.px(24),updateFlags:Xi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:r.Length.px(24),updateFlags:Xi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Nr,state:null,type:Object,updateFlags:Xi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Cs),Ms=function(t){function e(e){var i=t.call(this,e)||this;return i.initDisclosureButton(),i}return w(e,t),e.prototype.initDisclosureButton=function(){this.addClass("disclosure-button"),this.display.setState("flex",Xi.Intrinsic),this.justifyContent.setState("center",Xi.Intrinsic),this.alignItems.setState("center",Xi.Intrinsic),this.flexGrow.setState(1,Xi.Intrinsic),this.flexShrink.setState(0,Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic);var t=this.append($n,"icon");t.width.setState(24,Xi.Intrinsic),t.height.setState(24,Xi.Intrinsic),t.viewBox.setState("0 0 24 24",Xi.Intrinsic);var e=t.append("polygon","arrow");e.points.setState("0 4 -6 -2 -4.59 -3.41 0 1.17 4.59 -3.41 6 -2",Xi.Intrinsic),e.transform.setState(r.Transform.translate(12,12).rotate(r.Angle.deg(0)),Xi.Intrinsic)},Object.defineProperty(e.prototype,"icon",{get:function(){return this.getChildView("icon")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arrow",{get:function(){return this.icon.getChildView("arrow")},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.collapsedColor.setState(e.getOr(Qt.color,i,null),o,Xi.Intrinsic),this.expandedColor.setState(e.getOr(Qt.accentColor,i,null),o,Xi.Intrinsic)},e.prototype.onAnimate=function(e){if(t.prototype.onAnimate.call(this,e),this.disclosurePhase.isUpdated()||this.collapsedColor.isUpdated()||this.expandedColor.isUpdated()){var i=this.disclosurePhase.takeValue(),o=this.collapsedColor.takeValue(),n=this.expandedColor.takeValue();if(null!==o&&null!==n&&this.arrow.fill.takesPrecedence(Xi.Intrinsic)){var s=o.interpolateTo(n);this.arrow.fill.setState(s(i),Xi.Intrinsic)}var a=r.Transform.translate(12,12).rotate(r.Angle.deg(-180*i));this.arrow.transform.setState(a,Xi.Intrinsic)}},m([So({type:Number,inherit:!0,updateFlags:Xi.NeedsAnimate})],e.prototype,"disclosurePhase",void 0),m([So({type:St,inherit:!0,state:null,updateFlags:Xi.NeedsAnimate})],e.prototype,"collapsedColor",void 0),m([So({type:St,inherit:!0,state:null,updateFlags:Xi.NeedsAnimate})],e.prototype,"expandedColor",void 0),e}(Zn),Os=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"tokenState",{value:"expanded",enumerable:!0,configurable:!0}),Object.defineProperty(i,"headGesture",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"bodyGesture",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(i,"footGesture",{value:null,enumerable:!0,configurable:!0}),i.onClickHead=i.onClickHead.bind(i),i.onClickBody=i.onClickBody.bind(i),i.onClickFoot=i.onClickFoot.bind(i),i.initToken(),i}return w(e,t),e.prototype.initToken=function(){this.addClass("token"),this.position.setState("relative",Xi.Intrinsic),this.height.setState(32,Xi.Intrinsic),this.boxSizing.setState("content-box",Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.shape.injectView()},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initShape=function(t){t.addClass("shape"),t.setStyle("position","absolute"),t.setStyle("top","0"),t.setStyle("left","0"),this.head.injectView(t),this.headIcon.setView(this.headIcon.createView()),this.body.injectView(t),this.foot.injectView(t),this.footIcon.setView(this.footIcon.createView())},e.prototype.initHead=function(t){t.addClass("head"),t.fillRule.setState("evenodd",Xi.Intrinsic),t.pointerEvents.setState("bounding-box",Xi.Intrinsic),t.cursor.setState("pointer",Xi.Intrinsic);var e=this.createHeadGesture(t);null!==e&&Object.defineProperty(this,"headGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createHeadGesture=function(t){return new Ho(t,this.head)},e.prototype.initHeadIcon=function(t){t.addClass("head-icon"),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.initBody=function(t){t.addClass("body"),t.pointerEvents.setState("fill",Xi.Intrinsic),t.cursor.setState("pointer",Xi.Intrinsic);var e=this.createBodyGesture(t);null!==e&&Object.defineProperty(this,"bodyGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createBodyGesture=function(t){return new Ho(t,this.body)},e.prototype.initFoot=function(t){t.addClass("foot"),t.fillRule.setState("evenodd",Xi.Intrinsic),t.pointerEvents.setState("bounding-box",Xi.Intrinsic),t.cursor.setState("pointer",Xi.Intrinsic);var e=this.createFootGesture(t);null!==e&&Object.defineProperty(this,"footGesture",{value:e,enumerable:!0,configurable:!0})},e.prototype.createFootGesture=function(t){return new Ho(t,this.foot)},e.prototype.initFootIcon=function(t){t.addClass("foot-icon"),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.initLabelContainer=function(t){t.addClass("label"),t.display.setState("block",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic),t.overflowX.setState("hidden",Xi.Intrinsic),t.overflowY.setState("hidden",Xi.Intrinsic),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.initLabel=function(t){t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.bottom.setState(0,Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic)},e.prototype.isExpanded=function(){return"expanded"===this.tokenState||"expanding"===this.tokenState},e.prototype.isCollapsed=function(){return"collapsed"===this.tokenState||"collapsing"===this.tokenState},Object.defineProperty(e.prototype,"fillLook",{get:function(){return Qt.accentColor},enumerable:!1,configurable:!0}),e.prototype.needsProcess=function(t,e){return 0!=(t&Xi.NeedsLayout)&&(t|=Xi.NeedsAnimate),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutToken()},e.prototype.layoutToken=function(){var t=this.paddingTop.getStateOr(r.Length.zero()).pxValue(),e=this.paddingRight.getStateOr(r.Length.zero()).pxValue(),i=this.paddingBottom.getStateOr(r.Length.zero()).pxValue(),o=this.paddingLeft.getStateOr(r.Length.zero()).pxValue(),n=this.node.clientHeight,s=n-t-i,a=s/2,l=Math.sqrt(4+2*a*2),u=Math.asin(l/(a+2)),h=a/2,p=a,d=a/2,c=this.expandedPhase.value,v=this.icon.state,f=this.accessory.state,y=0,g=0,w=this.label.view;null!==w&&(g+=h+(y=w.node.clientWidth)+p);var m=0;null!==f&&(m+=2*a+d);var b=s;0!==c&&0!==g&&(b+=2+c*g);var S=b;0!==c&&0!==m&&(b+=2+c*m);var C=b+o+e,P=n;this.width.setState(b,Xi.Intrinsic);var V=this.labelContainer.view;null!==V&&(V.display.setState(0!==c?"block":"none",Xi.Intrinsic),V.left.setState(o+s+2+h,Xi.Intrinsic),V.top.setState(t,Xi.Intrinsic),V.width.setState(c*y,Xi.Intrinsic),V.height.setState(s,Xi.Intrinsic));var F=this.shape.view;null!==F&&(F.width.setState(C,Xi.Intrinsic),F.height.setState(P,Xi.Intrinsic),F.viewBox.setState("0 0 "+C+" "+P,Xi.Intrinsic));var T=this.head.view;if(null!==T){if((I=new lr).setPrecision(3),I.arc(o+a,t+a,a,-Math.PI/2,Math.PI/2*3),I.closePath(),null!==v&&!this.icon.embossed){var D=new ur(I),M=new r.R2Box(o,t,o+s,t+s);v.render(D,M),this.headIcon.removeView()}T.d.setState(I.toString(),Xi.Intrinsic)}var O=this.headIcon.view;if(null!==O)if(null!==v&&this.icon.embossed){(I=new lr).setPrecision(3);D=new ur(I),M=new r.R2Box(o,t,o+s,t+s);v.render(D,M),O.d.setState(I.toString(),Xi.Intrinsic),this.headIcon.injectView()}else this.headIcon.removeView();var x=this.body.view;if(null!==x){if((I=new lr).setPrecision(3),0!==c){var A=1-c;I.arc(o+a,t+a,a+2,-Math.PI/2+u,Math.PI/2-u),I.arc(o+S-a-2*A,t+a,a+2*A,Math.PI/2-A*u,-Math.PI/2+A*u,!0),I.closePath()}x.d.setState(I.toString(),Xi.Intrinsic)}var R=this.foot.view;if(null!==R&&null!==f){if((I=new lr).setPrecision(3),0!==c){A=1-c;if(I.arc(o+S-a,t+a,a+2,-Math.PI/2+u,Math.PI/2-u),I.arc(o+b-a-2*A,t+a,a+2*A,Math.PI/2-A*u,-Math.PI/2+A*u,!0),I.closePath(),null!==f&&!this.accessory.embossed){D=new ur(I),M=new r.R2Box(o+S+2,t,o+S+2+2*a,t+2*a);f.render(D,M),this.headIcon.removeView()}}R.d.setState(I.toString(),Xi.Intrinsic)}var k=this.footIcon.view;if(null!==k)if(null!==f&&this.accessory.embossed){var I;if((I=new lr).setPrecision(3),0!==c){D=new ur(I),M=new r.R2Box(o+S+2,t,o+S+2+s,t+s);f.render(D,M)}k.d.setState(I.toString(),Xi.Intrinsic),this.footIcon.injectView()}else this.footIcon.removeView()},e.prototype.expand=function(t){"expanded"===this.tokenState&&1===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),"expanding"!==this.tokenState&&this.willExpand(),!1!==t?1!==this.expandedPhase.value?this.expandedPhase.setState(1,t,Xi.Intrinsic):setTimeout(this.didExpand.bind(this)):(this.expandedPhase.setState(1,Xi.Intrinsic),this.didExpand()))},e.prototype.willExpand=function(){Object.defineProperty(this,"tokenState",{value:"expanding",enumerable:!0,configurable:!0});var t=this.labelContainer.view;null!==t&&t.display.setState("block",Xi.Intrinsic);var e=this.viewController;null!==e&&void 0!==e.tokenWillExpand&&e.tokenWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.tokenWillExpand&&r.tokenWillExpand(this)}},e.prototype.didExpand=function(){Object.defineProperty(this,"tokenState",{value:"expanded",enumerable:!0,configurable:!0}),this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidExpand&&o.tokenDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidExpand&&n.tokenDidExpand(this)},e.prototype.collapse=function(t){"collapsed"===this.tokenState&&0===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),"collapsing"!==this.tokenState&&this.willCollapse(),!1!==t?0!==this.expandedPhase.value?this.expandedPhase.setState(0,t,Xi.Intrinsic):setTimeout(this.didCollapse.bind(this)):(this.expandedPhase.setState(0,Xi.Intrinsic),this.didCollapse()))},e.prototype.willCollapse=function(){Object.defineProperty(this,"tokenState",{value:"collapsing",enumerable:!0,configurable:!0});var t=this.viewController;null!==t&&void 0!==t.tokenWillCollapse&&t.tokenWillCollapse(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenWillCollapse&&n.tokenWillCollapse(this)}},e.prototype.didCollapse=function(){Object.defineProperty(this,"tokenState",{value:"collapsed",enumerable:!0,configurable:!0}),this.requireUpdate(Xi.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidCollapse&&o.tokenDidCollapse(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidCollapse&&n.tokenDidCollapse(this)},e.prototype.toggle=function(t){var e=this.tokenState;"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},e.prototype.onClickHead=function(t){this.didPressHead()},e.prototype.didPressHead=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressHead&&o.tokenDidPressHead(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressHead&&n.tokenDidPressHead(this)},e.prototype.onClickBody=function(t){this.didPressBody()},e.prototype.didPressBody=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressBody&&o.tokenDidPressBody(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressBody&&n.tokenDidPressBody(this)},e.prototype.onClickFoot=function(t){this.didPressFoot()},e.prototype.didPressFoot=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressFoot&&o.tokenDidPressFoot(this)}var n=this.viewController;null!==n&&void 0!==n.tokenDidPressFoot&&n.tokenDidPressFoot(this)},m([So({type:Number,state:1,updateFlags:Xi.NeedsLayout,onEnd:function(t){var e=this.owner.tokenState;"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],e.prototype,"expandedPhase",void 0),m([Lo({key:!0,type:$n,onSetView:function(t){null!==t&&this.owner.initShape(t)}})],e.prototype,"shape",void 0),m([Lo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initHead(t)},viewDidMount:function(t){t.on("click",this.owner.onClickHead)},viewWillUnmount:function(t){t.off("click",this.owner.onClickHead)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,Xi.Intrinsic);var n=this.owner.headIcon.view;if(null!==n&&n.fill.takesPrecedence(Xi.Intrinsic)){var r=t.getOr(this.owner.fillLook,e.updated(re.embossed,1),null);n.fill.setState(r,i,Xi.Intrinsic)}},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,1]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.headIcon.view;if(null!==i&&i.fill.takesPrecedence(Xi.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setState(o,e,Xi.Intrinsic)}},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,void 0]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.headIcon.view;if(null!==i&&i.fill.takesPrecedence(Xi.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setState(o,e,Xi.Intrinsic)}},didBeginPress:function(t,e){var i=this.owner.headGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.headGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.headGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.headGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"head",void 0),m([Lo({extends:void 0,key:!0,type:$n.path,child:!1,onSetView:function(t){null!==t&&this.owner.initHeadIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.insertChildView(e,this.owner.body.view,o)}})],e.prototype,"headIcon",void 0),m([ho({extends:void 0,type:Object,state:null,updateFlags:Xi.NeedsLayout,embossed:!0})],e.prototype,"icon",void 0),m([Lo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initBody(t)},viewDidMount:function(t){t.on("click",this.owner.onClickBody)},viewWillUnmount:function(t){t.off("click",this.owner.onClickBody)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,Xi.Intrinsic);var n=this.owner.label.view;null!==n&&n.color.takesPrecedence(Xi.Intrinsic)&&n.color.setState(t.getOr(Qt.backgroundColor,e,null),i,Xi.Intrinsic)},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,1]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.label.view;null!==i&&i.color.takesPrecedence(Xi.Intrinsic)&&i.color.setState(t.getLookOr(Qt.backgroundColor,null),e,Xi.Intrinsic)},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,void 0]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.label.view;null!==i&&i.color.takesPrecedence(Xi.Intrinsic)&&i.color.setState(t.getLookOr(Qt.backgroundColor,null),e,Xi.Intrinsic)},didBeginPress:function(t,e){var i=this.owner.bodyGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.bodyGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.bodyGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.bodyGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"body",void 0),m([Lo({extends:void 0,key:!0,type:$n.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initFoot(t)},viewDidMount:function(t){t.on("click",this.owner.onClickFoot)},viewWillUnmount:function(t){t.off("click",this.owner.onClickFoot)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,Xi.Intrinsic);var n=this.owner.footIcon.view;if(null!==n&&n.fill.takesPrecedence(Xi.Intrinsic)){var r=t.getOr(this.owner.fillLook,e.updated(re.embossed,1),null);n.fill.setState(r,i,Xi.Intrinsic)}},didStartHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,1]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.footIcon.view;if(null!==i&&i.fill.takesPrecedence(Xi.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setState(o,e,Xi.Intrinsic)}},didStopHovering:function(){var t=this.view;t.modifyMood(re.default,[[re.hovering,void 0]]);var e=t.getLook(Qt.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,Xi.Intrinsic);var i=this.owner.footIcon.view;if(null!==i&&i.fill.takesPrecedence(Xi.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(re.embossed,1),null);i.fill.setState(o,e,Xi.Intrinsic)}},didBeginPress:function(t,e){var i=this.owner.footGesture;null!==i&&"mouse"!==t.inputType&&i.beginHover(t,e)},didMovePress:function(t,e){var i=this.owner.footGesture;null!==i&&t.isRunaway()&&i.cancelPress(t,e)},didEndPress:function(t,e){var i=this.owner.footGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)},didCancelPress:function(t,e){var i=this.owner.footGesture;null===i||"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||i.endHover(t,e)}})],e.prototype,"foot",void 0),m([Lo({extends:void 0,key:!0,type:$n.path,child:!1,onSetView:function(t){null!==t&&this.owner.initFootIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.appendChildView(e,o)}})],e.prototype,"footIcon",void 0),m([ho({extends:void 0,type:Object,state:null,updateFlags:Xi.NeedsLayout,embossed:!0})],e.prototype,"accessory",void 0),m([Lo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initLabelContainer(t)}})],e.prototype,"labelContainer",void 0),m([Lo({key:!0,child:!1,type:Zn,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}}})],e.prototype,"label",void 0),e}(Zn),xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"tokenState",{get:function(){var t=this.view;return null!==t?t.tokenState:null},enumerable:!1,configurable:!0}),e.prototype.tokenWillExpand=function(t){},e.prototype.tokenDidExpand=function(t){},e.prototype.tokenWillCollapse=function(t){var e=t.label.view;null!==e&&e.node.blur()},e.prototype.tokenDidCollapse=function(t){},e.prototype.tokenDidPressHead=function(t){t.toggle();var e=t.label.view;null!==e&&t.isExpanded()&&e.node.focus()},e.prototype.tokenDidPressBody=function(t){},e.prototype.tokenDidPressFoot=function(t){},e}(_n),As=function(t){function e(e){var i=t.call(this,e)||this;return i.onInputUpdate=i.onInputUpdate.bind(i),i.onInputChange=i.onInputChange.bind(i),i.onInputKey=i.onInputKey.bind(i),i}return w(e,t),e.prototype.initToken=function(){this.stylesheet.injectView(),t.prototype.initToken.call(this),this.addClass("input-token"),this.label.setView(this.label.createView())},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initStylesheet=function(t){var i=t.sheet;if(null!==i){var o=new e.PlaceholderRule(i,"placeholder");i.setCssRule("placeholder",o)}},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.paddingTop.setState(0,Xi.Intrinsic),e.paddingRight.setState(0,Xi.Intrinsic),e.paddingBottom.setState(0,Xi.Intrinsic),e.paddingLeft.setState(0,Xi.Intrinsic),e.borderTopStyle.setState("none",Xi.Intrinsic),e.borderRightStyle.setState("none",Xi.Intrinsic),e.borderBottomStyle.setState("none",Xi.Intrinsic),e.borderLeftStyle.setState("none",Xi.Intrinsic),e.boxSizing.setState("border-box",Xi.Intrinsic),e.backgroundColor.setState(St.transparent(),Xi.Intrinsic),e.appearance.setState("none",Xi.Intrinsic),e.outlineStyle.setState("none",Xi.Intrinsic),e.pointerEvents.setState("auto",Xi.Intrinsic)},e.prototype.createBodyGesture=function(t){return null},Object.defineProperty(e.prototype,"placeholderLook",{get:function(){return Qt.neutralColor},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.stylesheet.view;if(null!==n){var r=n.getCssRule("placeholder");null!==r&&r.color.setState(e.getOr(this.placeholderLook,i,null),o,Xi.Intrinsic)}var s=this.label.view;null!==s&&s.font(e.getOr(Qt.font,i,null),!1,Xi.Intrinsic)},e.prototype.onInputUpdate=function(t){var e=this.label.view;null!==e&&this.didUpdateInput(e)},e.prototype.didUpdateInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidUpdateInput&&n.tokenDidUpdateInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidUpdateInput&&r.tokenDidUpdateInput(t,this)},e.prototype.onInputChange=function(t){var e=this.label.view;null!==e&&this.didChangeInput(e)},e.prototype.didChangeInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidChangeInput&&n.tokenDidChangeInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidChangeInput&&r.tokenDidChangeInput(t,this)},e.prototype.onInputKey=function(t){var e=this.label.view;null!==e&&"Enter"===t.key&&this.didAcceptInput(e)},e.prototype.didAcceptInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidAcceptInput&&n.tokenDidAcceptInput(t,this)}var r=this.viewController;null!==r&&void 0!==r.tokenDidAcceptInput&&r.tokenDidAcceptInput(t,this)},e.PlaceholderRule=xn.define({css:"::placeholder {}"}),m([Lo({key:!0,type:Zn.style,child:!0,observe:!0,viewDidMount:function(t){this.owner.initStylesheet(t)}})],e.prototype,"stylesheet",void 0),m([Lo({child:!1,type:Zn.input,observe:!0,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}},viewDidMount:function(t){t.on("input",this.owner.onInputUpdate),t.on("change",this.owner.onInputChange),t.on("keydown",this.owner.onInputKey)},viewWillUnmount:function(t){t.off("input",this.owner.onInputUpdate),t.off("change",this.owner.onInputChange),t.off("keydown",this.owner.onInputKey)}})],e.prototype,"label",void 0),e}(Os),Rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.tokenDidUpdateInput=function(t,e){},e.prototype.tokenDidChangeInput=function(t,e){},e.prototype.tokenDidAcceptInput=function(t,e){},e}(xs),ks=function(){function t(t,e,i,o,n,r,s,a,l,u){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"optional",{value:n,enumerable:!0}),Object.defineProperty(this,"textColor",{value:r,enumerable:!0}),Object.defineProperty(this,"width",{value:s,enumerable:!0}),Object.defineProperty(this,"left",{value:a,enumerable:!0}),Object.defineProperty(this,"right",{value:l,enumerable:!0}),Object.defineProperty(this,"hidden",{value:u,enumerable:!0})}return t.prototype.withFlex=function(t,e,i){return i=void 0!==i?r.Length.fromAny(i):this.basis,this.copy(this.key,t,e,i,this.optional,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.asOptional=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,t,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.withTextColor=function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,t,this.width,this.left,this.right,this.hidden)},t.prototype.asHidden=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.textColor,this.width,this.left,this.right,t)},t.prototype.resized=function(t,e,i,o){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),void 0===o&&(o=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.textColor,t,e,i,o)},t.prototype.copy=function(e,i,o,n,r,s,a,l,u,h){return new t(e,i,o,n,r,s,a,l,u,h)},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equivalentTo(i.basis,o)&&this.optional===i.optional&&e.Equivalent(this.textColor,i.textColor,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&this.optional===i.optional&&e.Equals(this.textColor,i.textColor)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&this.hidden===i.hidden)},t.prototype.debug=function(t){t=t.write("ColLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis),this.optional&&(t=t.write(", ").debug(this.optional)),null!==this.textColor&&(t=t.write(", ").debug(this.textColor)),t=t.write(41),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,a){return void 0===i&&(i=0),void 0===o&&(o=1),n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),void 0===s&&(s=!1),void 0===a&&(a=null),null===a||a instanceof Qt||(a=St.fromAny(a)),new t(e,i,o,n,s,a,null,null,null,!1)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var s=e.basis;s=void 0!==s?r.Length.fromAny(s):r.Length.zero();var a=e.optional;void 0===a&&(a=!1);var l=e.textColor;void 0===l&&(l=null),null===l||l instanceof Qt||(l=St.fromAny(l));var u=e.width;u=null!=u?r.Length.fromAny(u):null;var h=e.left;h=null!=h?r.Length.fromAny(h):null;var p=e.right;p=null!=p?r.Length.fromAny(p):null;var d=e.hidden;return void 0===d&&(d=!1),new t(i,o,n,s,a,l,u,h,p,d)},t}(),Is=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"colSpacing",{value:o,enumerable:!0}),Object.defineProperty(this,"cols",{value:n,enumerable:!0})}return t.prototype.getCol=function(t){for(var e=this.cols,i=0,o=e.length;i<o;i+=1){var n=e[i];if(t===n.key)return n}return null},t.prototype.resized=function(i,o,n,s){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===s?s=this.colSpacing:null!==s&&(s=r.Length.fromAny(s)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.colSpacing,s))return this;for(var a=this.cols,l=a.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==s?s.pxValue(h):0,v=0,f=0,y=0,g=p+d,w=p,m=0;m<l;m+=1){0!==m&&(g+=c,w+=c);var b=(F=a[m]).basis.pxValue(h);u[m]=F.resized(b,w,h-b-w,!1),v+=F.grow,f+=F.shrink,F.optional&&(y+=1),g+=b,w+=b}if(g>h&&y>0){for(m=l-1;m>=0&&y>0;){b=(F=u[m]).width.pxValue();if(F.optional&&(u[m]=F.resized(0,w,h-w,!0),v-=F.grow,f-=F.shrink,y-=1,g-=b),w-=b,0!==m&&(g-=c,w-=c),g<=h)break;m-=1}for(m+=1;m<l;){if(!(F=u[m]).optional){g+=c,w+=c;b=F.basis.pxValue(h);u[m]=F.resized(b,w,h-b-w),w+=b}m+=1}}if(g<h&&v>0){var S=h-g,C=p,P=0;for(m=0;m<l;m+=1){if((F=u[m]).hidden)u[m]=F.resized(0,C+c,h-C-c);else{0!==P&&(C+=c);b=F.basis.pxValue(h)+S*(F.grow/v);u[m]=F.resized(b,C,h-b-C),C+=b,P+=1}}}else if(g>h&&f>0){S=g-h;var V=p;for(P=0,m=0;m<l;m+=1){var F;if((F=u[m]).hidden)u[m]=F.resized(0,V+c,h-V-c);else{0!==P&&(V+=c);b=F.basis.pxValue(h)-S*(F.shrink/f);u[m]=F.resized(b,V,h-b-V),V+=b,P+=1}}}return new t(i,o,n,s,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.cols,n=e.cols,r=o.length;if(r===n.length){for(var s=0;s<r;s+=1)if(!o[s].equivalentTo(n[s],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.colSpacing,i.colSpacing)&&e.Arrays.equal(this.cols,i.cols))},t.prototype.debug=function(t){t=t.write("TableLayout").write(46).write("of").write(40);for(var e=0,i=this.cols.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.cols[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.colSpacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.colSpacing).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=ks.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var s=e.colSpacing;s=null!=s?r.Length.fromAny(s):null;for(var a=e.cols.length,l=new Array(a),u=0;u<a;u+=1)l[u]=ks.fromAny(e.cols[u]);return new t(i,o,n,s,l)},t}(),Ls=function(t){function e(e){var i=t.call(this,e)||this;return i.initCell(),i}return w(e,t),e.prototype.initCell=function(){this.addClass("cell"),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.createContent=function(t){var e=Zn.span.create();return e.alignSelf.setState("center",Xi.Intrinsic),e.whiteSpace.setState("nowrap",Xi.Intrinsic),e.textOverflow.setState("ellipsis",Xi.Intrinsic),e.overflowX.setState("hidden",Xi.Intrinsic),e.overflowY.setState("hidden",Xi.Intrinsic),void 0!==t&&e.text(t),e},e.prototype.initContent=function(t){},e.prototype.attachContent=function(t){},e.prototype.detachContent=function(t){},e.prototype.willSetContent=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetCellContent&&i.viewWillSetCellContent(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetCellContent&&s.viewWillSetCellContent(t,e,this)}},e.prototype.onSetContent=function(t,e){null!==e&&this.detachContent(e),null!==t&&(this.attachContent(t),this.initContent(t))},e.prototype.didSetContent=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetCellContent&&r.viewDidSetCellContent(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetCellContent&&s.viewDidSetCellContent(t,e,this)},m([Lo({key:!0,type:Zn,fromAny:function(t){return t instanceof Zn?t:this.owner.createContent(t)},willSetView:function(t,e){this.owner.willSetContent(t,e)},onSetView:function(t,e){this.owner.onSetContent(t,e)},didSetView:function(t,e){this.owner.didSetContent(t,e)}})],e.prototype,"content",void 0),e}(Zn),js=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetCellContent&&r.traitWillSetCellContent(t,e,this)}},e.prototype.onSetContent=function(t,e){},e.prototype.didSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetCellContent&&r.traitDidSetCellContent(t,e,this)}},m([j({state:null,willSetState:function(t,e){this.owner.willSetContent(t,e)},didSetState:function(t,e){this.owner.onSetContent(t,e),this.owner.didSetContent(t,e)}})],e.prototype,"content",void 0),e}(at),Ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCellTrait=function(t){},e.prototype.attachCellTrait=function(t){null!==this.cell.view&&this.setContentView(t.content.state,t)},e.prototype.detachCellTrait=function(t){null!==this.cell.view&&this.setContentView(null,t)},e.prototype.willSetCellTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetCellTrait&&r.componentWillSetCellTrait(t,e,this)}},e.prototype.onSetCellTrait=function(t,e){null!==e&&this.detachCellTrait(e),null!==t&&(this.attachCellTrait(t),this.initCellTrait(t))},e.prototype.didSetCellTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetCellTrait&&r.componentDidSetCellTrait(t,e,this)}},e.prototype.createCellView=function(){return Ls.create()},e.prototype.initCellView=function(t){},e.prototype.attachCellView=function(t){this.content.setView(t.content.view);var e=this.cell.trait;null!==e&&this.setContentView(e.content.state,e)},e.prototype.detachCellView=function(t){this.content.setView(null)},e.prototype.willSetCellView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetCellView&&r.componentWillSetCellView(t,e,this)}},e.prototype.onSetCellView=function(t,e){null!==e&&this.detachCellView(e),null!==t&&(this.attachCellView(t),this.initCellView(t))},e.prototype.didSetCellView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetCellView&&r.componentDidSetCellView(t,e,this)}},e.prototype.themeCellView=function(t,e,i,o){},e.prototype.createContentView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setContentView=function(t,e){var i=this.cell.view;if(null!==i){var o=null!==t?this.createContentView(t,e):null;i.content.setView(o)}},e.prototype.initContentView=function(t){},e.prototype.attachContentView=function(t){},e.prototype.detachContentView=function(t){},e.prototype.willSetContentView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetCellContentView&&r.componentWillSetCellContentView(t,e,this)}},e.prototype.onSetContentView=function(t,e){null!==e&&this.detachContentView(e),null!==t&&(this.attachContentView(t),this.initContentView(t))},e.prototype.didSetContentView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetCellContentView&&r.componentDidSetCellContentView(t,e,this)}},e.CellFastener=fs.define({viewType:Ls,observeView:!0,willSetView:function(t,e){this.owner.willSetCellView(t,e)},onSetView:function(t,e){this.owner.onSetCellView(t,e)},didSetView:function(t,e){this.owner.didSetCellView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeCellView(t,e,i,o)},viewDidSetCellContent:function(t,e){this.owner.content.setView(t)},createView:function(){return this.owner.createCellView()},traitType:js,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetCellTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetCellTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetCellTrait(t,e)},traitDidSetCellContent:function(t,e,i){this.owner.setContentView(t,i)}}),m([fs({extends:e.CellFastener})],e.prototype,"cell",void 0),m([cs({willSetView:function(t,e){this.owner.willSetContentView(t,e)},onSetView:function(t,e){this.owner.onSetContentView(t,e)},didSetView:function(t,e){this.owner.didSetContentView(t,e)}})],e.prototype,"content",void 0),e}(bs),Es=function(t){function e(e){var i=t.call(this,e)||this;return i.initCol(),i}return w(e,t),e.prototype.initCol=function(){this.addClass("col"),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.createHeader=function(t){var e=Zn.span.create();return e.alignSelf.setState("center",Xi.Intrinsic),void 0!==t&&e.text(t),e},e.prototype.initHeader=function(t){},e.prototype.attachHeader=function(t){},e.prototype.detachHeader=function(t){},e.prototype.willSetHeader=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetColHeader&&i.viewWillSetColHeader(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetColHeader&&s.viewWillSetColHeader(t,e,this)}},e.prototype.onSetHeader=function(t,e){null!==e&&this.detachHeader(e),null!==t&&(this.attachHeader(t),this.initHeader(t))},e.prototype.didSetHeader=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetColHeader&&r.viewDidSetColHeader(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetColHeader&&s.viewDidSetColHeader(t,e,this)},m([Lo({key:!0,type:Zn,fromAny:function(t){return t instanceof Zn?t:this.owner.createHeader(t)},willSetView:function(t,e){this.owner.willSetHeader(t,e)},onSetView:function(t,e){this.owner.onSetHeader(t,e)},didSetView:function(t,e){this.owner.didSetHeader(t,e)}})],e.prototype,"header",void 0),e}(Zn),Ns=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetColLayout&&r.traitWillSetColLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetColLayout&&r.traitDidSetColLayout(t,e,this)}},e.prototype.willSetHeader=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetColHeader&&r.traitWillSetColHeader(t,e,this)}},e.prototype.onSetHeader=function(t,e){},e.prototype.didSetHeader=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetColHeader&&r.traitDidSetColHeader(t,e,this)}},m([j({type:ks,state:null,willSetState:function(t,e){this.owner.willSetLayout(t,e)},didSetState:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)}})],e.prototype,"layout",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetHeader(t,e)},didSetState:function(t,e){this.owner.onSetHeader(t,e),this.owner.didSetHeader(t,e)}})],e.prototype,"header",void 0),e}(at),Gs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initColTrait=function(t){},e.prototype.attachColTrait=function(t){null!==this.col.view&&this.setHeaderView(t.header.state,t)},e.prototype.detachColTrait=function(t){null!==this.col.view&&this.setHeaderView(null,t)},e.prototype.willSetColTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetColTrait&&r.componentWillSetColTrait(t,e,this)}},e.prototype.onSetColTrait=function(t,e){null!==e&&this.detachColTrait(e),null!==t&&(this.attachColTrait(t),this.initColTrait(t))},e.prototype.didSetColTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetColTrait&&r.componentDidSetColTrait(t,e,this)}},e.prototype.willSetLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetColLayout&&r.componentWillSetColLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetColLayout&&r.componentDidSetColLayout(t,e,this)}},e.prototype.createColView=function(){return Es.create()},e.prototype.initColView=function(t){},e.prototype.attachColView=function(t){this.header.setView(t.header.view);var e=this.col.trait;null!==e&&this.setHeaderView(e.header.state,e)},e.prototype.detachColView=function(t){this.header.setView(null)},e.prototype.willSetColView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetColView&&r.componentWillSetColView(t,e,this)}},e.prototype.onSetColView=function(t,e){null!==e&&this.detachColView(e),null!==t&&(this.attachColView(t),this.initColView(t))},e.prototype.didSetColView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetColView&&r.componentDidSetColView(t,e,this)}},e.prototype.themeColView=function(t,e,i,o){},e.prototype.createHeaderView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setHeaderView=function(t,e){var i=this.col.view;if(null!==i){var o=null!==t?this.createHeaderView(t,e):null;i.header.setView(o)}},e.prototype.initHeaderView=function(t){},e.prototype.attachHeaderView=function(t){},e.prototype.detachHeaderView=function(t){},e.prototype.willSetHeaderView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetColHeaderView&&r.componentWillSetColHeaderView(t,e,this)}},e.prototype.onSetHeaderView=function(t,e){null!==e&&this.detachHeaderView(e),null!==t&&(this.attachHeaderView(t),this.initHeaderView(t))},e.prototype.didSetHeaderView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetColHeaderView&&r.componentDidSetColHeaderView(t,e,this)}},e.ColFastener=fs.define({viewType:Es,observeView:!0,willSetView:function(t,e){this.owner.willSetColView(t,e)},onSetView:function(t,e){this.owner.onSetColView(t,e)},didSetView:function(t,e){this.owner.didSetColView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeColView(t,e,i,o)},viewDidSetColHeader:function(t,e){this.owner.header.setView(t)},createView:function(){return this.owner.createColView()},traitType:Ns,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetColTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetColTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetColTrait(t,e)},traitWillSetColLayout:function(t,e){this.owner.willSetLayout(t,e)},traitDidSetColLayout:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)},traitDidSetColHeader:function(t,e,i){this.owner.setHeaderView(t,i)}}),m([fs({extends:e.ColFastener})],e.prototype,"col",void 0),m([cs({willSetView:function(t,e){this.owner.willSetHeaderView(t,e)},onSetView:function(t,e){this.owner.onSetHeaderView(t,e)},didSetView:function(t,e){this.owner.didSetHeaderView(t,e)}})],e.prototype,"header",void 0),e}(bs),Us=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"cellFasteners",{value:[],enumerable:!0}),i.initRow(),i}return w(e,t),e.prototype.initRow=function(){this.addClass("row"),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createCellFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){t.display.setState("none",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.width.setState(0,Xi.Intrinsic),t.height.setState(this.height.state,Xi.Intrinsic)},e.prototype.attachCell=function(t,e){},e.prototype.detachCell=function(t,e){},e.prototype.willSetCell=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetCell&&n.viewWillSetCell(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetCell&&l.viewWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetCell&&a.viewDidSetCell(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetCell&&l.viewDidSetCell(t,e,i,this)},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCell=function(t){return t instanceof Ls?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectCell(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectCell(e);null!==i&&this.removeCell(i)},e.prototype.displayChildViews=function(e,i,o){0!=(e&Xi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.layout.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Ls){var s=t.key,a=null!==n&&void 0!==s?n.getCol(s):null;if(null!==a){t.display.setState(a.hidden?"none":"flex",Xi.Intrinsic),t.left.setState(a.left,Xi.Intrinsic),t.width.setState(a.width,Xi.Intrinsic),t.height.setState(r,Xi.Intrinsic);var l=a.textColor;l instanceof Qt?t.color.setLook(l,Xi.Intrinsic):t.color.setState(l,Xi.Intrinsic)}else t.display.setState("none",Xi.Intrinsic),t.left.setState(null,Xi.Intrinsic),t.width.setState(null,Xi.Intrinsic),t.height.setState(null,Xi.Intrinsic)}o.call(this,t,e,i)}))},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountViewFasteners.call(this)},e.CellFastener=Lo.define({type:Ls,child:!1,willSetView:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),m([ho({type:Is,state:null,inherit:!0})],e.prototype,"layout",void 0),e}(Zn),Bs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"cellFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createCellFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){},e.prototype.attachCell=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCell=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetCell&&a.traitWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetCell&&a.traitDidSetCell(t,e,i,this)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectCellModel=function(t){return t.getTrait(js)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellModel(n);null!==r&&this.insertCell(r)}},e.prototype.detectCellTrait=function(t){return t instanceof js?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellTrait(n);null!==r&&this.insertCell(r)}},e.prototype.didSetModel=function(e,i){null!==e&&(this.detectModels(e),this.detectTraits(e)),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectCellModel(e);if(null!==o){var n=null!==i?this.detectCellModel(i):null;this.insertCell(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectCellModel(e);null!==i&&this.removeCell(i)},e.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectCellTrait(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectCellTrait(e);null!==i&&this.removeCell(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCells()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingCells()},e.CellFastener=K.define({type:js,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),e}(at),Hs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"cellFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initRowTrait=function(t){},e.prototype.attachRowTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertCellTrait(n)}},e.prototype.detachRowTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeCellTrait(n)}},e.prototype.willSetRowTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetRowTrait&&r.componentWillSetRowTrait(t,e,this)}},e.prototype.onSetRowTrait=function(t,e){null!==e&&this.detachRowTrait(e),null!==t&&(this.attachRowTrait(t),this.initRowTrait(t))},e.prototype.didSetRowTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetRowTrait&&r.componentDidSetRowTrait(t,e,this)}},e.prototype.createRowView=function(){return Us.create()},e.prototype.initRowView=function(t){},e.prototype.attachRowView=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.cell.view;if(null!==r&&null===r.parentView){var s=n.cell.trait;null!==s&&n.cell.injectView(t,void 0,void 0,s.key)}}}},e.prototype.detachRowView=function(t){},e.prototype.willSetRowView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetRowView&&r.componentWillSetRowView(t,e,this)}},e.prototype.onSetRowView=function(t,e){null!==e&&this.detachRowView(e),null!==t&&(this.attachRowView(t),this.initRowView(t))},e.prototype.didSetRowView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetRowView&&r.componentDidSetRowView(t,e,this)}},e.prototype.themeRowView=function(t,e,i,o){},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createCellFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCell=function(t){return new Ws},e.prototype.initCell=function(t,e){var i=t.cell.trait;null!==i&&this.initCellTrait(i,e);var o=t.cell.view;null!==o&&this.initCellView(o,e)},e.prototype.attachCell=function(t,e){var i=t.cell.trait;null!==i&&this.attachCellTrait(i,e);var o=t.cell.view;null!==o&&this.attachCellView(o,e)},e.prototype.detachCell=function(t,e){var i=t.cell.view;null!==i&&this.detachCellView(i,e);var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e)},e.prototype.willSetCell=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetCell&&s.componentWillSetCell(t,e,i)}},e.prototype.onSetCell=function(t,e,i){null!==e&&this.detachCell(e,i),null!==t&&(this.attachCell(t,i),this.initCell(t,i))},e.prototype.didSetCell=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetCell&&s.componentDidSetCell(t,e,i)}},e.prototype.insertCellTrait=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.cell.trait===t)return;s.cell.trait===e&&(o=s)}}var a=this.createCell(t);if(null!==a&&(a.cell.setTrait(t),this.insertChildComponent(a,o,t.key),null===a.cell.view)){var l=this.createCellView(a),u=null;null!==o&&(u=o.cell.view);var h=this.row.view;null!==h?a.cell.injectView(h,l,u,t.key):a.cell.setView(l,u)}},e.prototype.removeCellTrait=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.cell.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initCellTrait=function(t,e){},e.prototype.attachCellTrait=function(t,e){},e.prototype.detachCellTrait=function(t,e){},e.prototype.willSetCellTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetCellTrait&&s.componentWillSetCellTrait(t,e,i)}},e.prototype.onSetCellTrait=function(t,e,i){null!==e&&this.detachCellTrait(e,i),null!==t&&(this.attachCellTrait(e,i),this.initCellTrait(t,i))},e.prototype.didSetCellTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetCellTrait&&s.componentDidSetCellTrait(t,e,i)}},e.prototype.createCellView=function(t){return t.cell.createView()},e.prototype.initCellView=function(t,e){var i=t.content.view;null!==i&&this.initCellContentView(i,e)},e.prototype.attachCellView=function(t,e){var i=t.content.view;null!==i&&this.attachCellContentView(i,e)},e.prototype.detachCellView=function(t,e){var i=t.content.view;null!==i&&this.detachCellContentView(i,e),t.remove()},e.prototype.willSetCellView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetCellView&&s.componentWillSetCellView(t,e,i)}},e.prototype.onSetCellView=function(t,e,i){null!==e&&this.detachCellView(e,i),null!==t&&(this.attachCellView(t,i),this.initCellView(t,i))},e.prototype.didSetCellView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetCellView&&s.componentDidSetCellView(t,e,i)}},e.prototype.initCellContentView=function(t,e){},e.prototype.attachCellContentView=function(t,e){},e.prototype.detachCellContentView=function(t,e){},e.prototype.willSetCellContentView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetCellContentView&&s.componentWillSetCellContentView(t,e,i)}},e.prototype.onSetCellContentView=function(t,e,i){null!==e&&this.detachCellContentView(e,i),null!==t&&(this.attachCellContentView(t,i),this.initCellContentView(t,i))},e.prototype.didSetCellContentView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetCellContentView&&s.componentDidSetCellContentView(t,e,i)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.getCellFastener=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.cell.trait===t)return n}return null},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCellComponent=function(t){return t instanceof Ws?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectCellComponent(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectCellComponent(e);null!==i&&this.removeCell(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.RowFastener=fs.define({viewType:Us,observeView:!0,willSetView:function(t,e){this.owner.willSetRowView(t,e)},onSetView:function(t,e){this.owner.onSetRowView(t,e)},didSetView:function(t,e){this.owner.didSetRowView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeRowView(t,e,i,o)},createView:function(){return this.owner.createRowView()},traitType:Bs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetRowTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetRowTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetRowTrait(t,e)},traitWillSetCell:function(t,e,i){null!==e&&this.owner.removeCellTrait(e)},traitDidSetCell:function(t,e,i){null!==t&&this.owner.insertCellTrait(t,i)}}),e.CellFastener=gs.define({type:Ws,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetCell(t,e,this)},onSetComponent:function(t,e){this.owner.onSetCell(t,e,this)},didSetComponent:function(t,e){this.owner.didSetCell(t,e,this)},componentWillSetCellTrait:function(t,e){this.owner.willSetCellTrait(t,e,this)},componentDidSetCellTrait:function(t,e){this.owner.onSetCellTrait(t,e,this),this.owner.didSetCellTrait(t,e,this)},componentWillSetCellView:function(t,e){this.owner.willSetCellView(t,e,this)},componentDidSetCellView:function(t,e){this.owner.onSetCellView(t,e,this),this.owner.didSetCellView(t,e,this)},componentWillSetCellContentView:function(t,e){this.owner.willSetCellContentView(t,e,this)},componentDidSetCellContentView:function(t,e){this.owner.onSetCellContentView(t,e,this),this.owner.didSetCellContentView(t,e,this)}}),m([fs({extends:e.RowFastener})],e.prototype,"row",void 0),e}(bs),zs=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"rowFasteners",{value:[],enumerable:!0}),Object.defineProperty(i,"visibleViews",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(i,"visibleFrame",{value:new r.R2Box(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initTable(),i}return w(e,t),e.prototype.initTable=function(){this.addClass("table")},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createRowFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initRow=function(t,e){t.display.setState("none",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic),t.top.setState(null,Xi.Intrinsic);var i=this.layout.state;t.width.setState(null!==i?i.width:null,Xi.Intrinsic),t.height.setState(this.rowHeight.getState(),Xi.Intrinsic),t.opacity.setState(0,Xi.Intrinsic),t.setCulled(!0)},e.prototype.attachRow=function(t,e){},e.prototype.detachRow=function(t,e){},e.prototype.willSetRow=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetRow&&n.viewWillSetRow(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetRow&&l.viewWillSetRow(t,e,i,this)}},e.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},e.prototype.didSetRow=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetRow&&a.viewDidSetRow(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetRow&&l.viewDidSetRow(t,e,i,this)},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectRow=function(t){return t instanceof Us?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectRow(e);null!==o&&this.insertRow(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectRow(e);null!==i&&this.removeRow(i)},e.prototype.detectVisibleFrame=function(){var t=this.node.getBoundingClientRect(),e=-t.x-0,i=-t.y-64,o=window.innerWidth-t.x+0,n=window.innerHeight-t.y+64;return new r.R2Box(e,i,o,n)},e.prototype.needsProcess=function(t,e){return 0!=(t&Xi.NeedsResize)&&(t|=Xi.NeedsScroll),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeTable()},e.prototype.resizeTable=function(){var t=this.layout.state;if(null!==t){var e=this.width.state;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.edgeInsets.state,o=this.paddingLeft.state;o=o instanceof r.Length?o.pxValue(e):0;var n=this.paddingRight.state;n=n instanceof r.Length?n.pxValue(e):0;var s=null!==i?i.insetLeft:0;s+=o;var a=null!==i?i.insetRight:0;a+=n;var l=t.resized(e,s,a);this.layout.setState(l)}},e.prototype.processVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.processChildViews=function(t,e,i){this.isCulled()||(0!=(t&Xi.NeedsScroll)?this.scrollChildViews(t,e,i):this.processVisibleViews(t,e,i))},e.prototype.scrollChildViews=function(e,i,o){var n=this.visibleViews;n.length=0;var s=this.detectVisibleFrame();Object.defineProperty(this,"visibleFrame",{value:s,enumerable:!0,configurable:!0}),t.prototype.processChildViews.call(this,e,i,(function(t,e,i){var a;if(t instanceof Zn){var l=t.top.state,u=t.height.state;if(l instanceof r.Length&&u instanceof r.Length){var h=s.yMin,p=s.yMax,d=l.pxValue();a=h<=d+u.pxValue()&&d<=p,t.display.setState(a?"flex":"none",Xi.Intrinsic),t.setCulled(!a)}else a=!0}else a=!0;a&&(n.push(t),o.call(this,t,e,i))}))},e.prototype.displayVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){0!=(t&Xi.NeedsLayout)?this.layoutChildViews(t,e,i):this.displayVisibleViews(t,e,i)},e.prototype.layoutChildViews=function(e,i,o){this.resizeTable();var n=this.layout.state,s=null!==n?n.width:null,a=this.rowHeight.getState(),l=this.rowSpacing.getState().pxValue(a.pxValue()),u=l,h=this.visibleViews;h.length=0;var p=this.detectVisibleFrame();Object.defineProperty(this,"visibleFrame",{value:p,enumerable:!0,configurable:!0});var d=this.getLook(Qt.timing);t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){var n;if(t instanceof Us&&(t.top.setState(u,d,Xi.Intrinsic),t.width.setState(s,Xi.Intrinsic),t.height.setState(a,d,Xi.Intrinsic),t.opacity.setState(1,d,Xi.Intrinsic)),t instanceof Zn){var c=t.top.state,v=t.height.state;if(c instanceof r.Length&&v instanceof r.Length){var f=p.yMin,y=p.yMax,g=c.pxValue();n=f<=g+v.pxValue()&&g<=y}else n=!0;t.display.setState(n?"flex":"none",Xi.Intrinsic),t.setCulled(!n)}else n=!0;n&&h.push(t),o.call(this,t,e,i),t instanceof Us&&(v=(v=t.height.state)instanceof r.Length?v.pxValue():t.node.offsetHeight,u+=v+l)})),this.height.setState(u,Xi.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountRowFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountRowFasteners(),t.prototype.unmountViewFasteners.call(this)},e.RowFastener=Lo.define({type:Us,child:!1,willSetView:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetRow(t,e,i,this)}}),m([ho({type:Is,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"layout",void 0),m([ho({type:r.Length,state:r.Length.zero()})],e.prototype,"rowSpacing",void 0),m([ho({type:r.Length,state:r.Length.px(24)})],e.prototype,"rowHeight",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),e}(Zn),qs=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"colFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"rowFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.createLayout=function(){for(var t=[],e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;if(null!==n){var r=n.layout.state;null!==r&&t.push(r)}}var s=this.colSpacing.state;return new Is(null,null,null,s,t)},e.prototype.updateLayout=function(){var t=this.createLayout();this.layout.setState(t,v.Intrinsic)},e.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetTableLayout&&r.traitWillSetTableLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetTableLayout&&r.traitDidSetTableLayout(t,e,this)}},e.prototype.onSetColSpacing=function(t,e){this.updateLayout()},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createColFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCol=function(t,e){},e.prototype.attachCol=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCol=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetCol&&a.traitWillSetCol(t,e,i,this)}},e.prototype.onSetCol=function(t,e,i,o){null!==e&&this.detachCol(e,o),null!==t&&(this.attachCol(t,o),this.initCol(t,o)),this.updateLayout()},e.prototype.didSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetCol&&a.traitDidSetCol(t,e,i,this)}},e.prototype.onSetColLayout=function(t,e,i){this.updateLayout()},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createRowFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initRow=function(t,e){},e.prototype.attachRow=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachRow=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetRow&&a.traitWillSetRow(t,e,i,this)}},e.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},e.prototype.didSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetRow&&a.traitDidSetRow(t,e,i,this)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectColModel=function(t){return t.getTrait(Ns)},e.prototype.detectRowModel=function(t){return t.getTrait(Bs)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectColModel(n);null!==r&&this.insertCol(r);var s=this.detectRowModel(n);null!==s&&this.insertRow(s)}},e.prototype.detectColTrait=function(t){return t instanceof Ns?t:null},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectColModel(e);if(null!==o){var n=null!==i?this.detectColModel(i):null;this.insertCol(o,n)}var r=this.detectRowModel(e);if(null!==r){n=null!==i?this.detectRowModel(i):null;this.insertRow(r,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectColModel(e);null!==i&&this.removeCol(i);var o=this.detectRowModel(e);null!==o&&this.removeRow(o)},e.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectColTrait(e);null!==o&&this.insertCol(o,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectColTrait(e);null!==i&&this.removeCol(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCols(),this.startConsumingRows()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingRows(),this.stopConsumingCols()},e.ColFastener=K.define({type:Ns,sibling:!1,observe:!0,willSetTrait:function(t,e,i){this.owner.willSetCol(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCol(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCol(t,e,i,this)},traitDidSetColLayout:function(t,e){this.owner.onSetColLayout(t,e,this)}}),e.RowFastener=K.define({type:Bs,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetRow(t,e,i,this)}}),m([j({type:Is,state:null,willSetState:function(t,e){this.owner.willSetLayout(t,e)},didSetState:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)}})],e.prototype,"layout",void 0),m([j({type:r.Length,state:null,didSetState:function(t,e){this.owner.onSetColSpacing(t,e)}})],e.prototype,"colSpacing",void 0),e}(at),Ys=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"colFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"rowFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.layoutTable=function(t,e){e.layout.setState(t,Xi.Intrinsic)},e.prototype.initTableTrait=function(t){var e=t.layout.state;if(null!==e){var i=this.table.view;null!==i&&this.layoutTable(e,i)}},e.prototype.attachTableTrait=function(t){for(var e=t.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertColTrait(n)}var r=t.rowFasteners;for(i=0,o=r.length;i<o;i+=1){var s=r[i].trait;null!==s&&this.insertRowTrait(s)}},e.prototype.detachTableTrait=function(t){for(var e=t.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeRowTrait(n)}var r=t.colFasteners;for(i=0,o=r.length;i<o;i+=1){var s=r[i].trait;null!==s&&this.removeColTrait(s)}},e.prototype.willSetTableTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTableTrait&&r.componentWillSetTableTrait(t,e,this)}},e.prototype.onSetTableTrait=function(t,e){null!==e&&this.detachTableTrait(e),null!==t&&(this.attachTableTrait(t),this.initTableTrait(t))},e.prototype.didSetTableTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTableTrait&&r.componentDidSetTableTrait(t,e,this)}},e.prototype.willSetTableLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTableLayout&&r.componentWillSetTableLayout(t,e,this)}},e.prototype.onSetTableLayout=function(t,e){},e.prototype.didSetTableLayout=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTableLayout&&r.componentDidSetTableLayout(t,e,this)}},e.prototype.createTableView=function(){return zs.create()},e.prototype.initTableView=function(t){var e=this.table.trait;if(null!==e){var i=e.layout.state;null!==i&&this.layoutTable(i,t)}},e.prototype.attachTableView=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.row.view;null!==r&&null===r.parentView&&n.row.injectView(t)}}},e.prototype.detachTableView=function(t){},e.prototype.willSetTableView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTableView&&r.componentWillSetTableView(t,e,this)}},e.prototype.onSetTableView=function(t,e){null!==e&&this.detachTableView(e),null!==t&&(this.attachTableView(t),this.initTableView(t))},e.prototype.didSetTableView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTableView&&r.componentDidSetTableView(t,e,this)}},e.prototype.themeTableView=function(t,e,i,o){},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createColFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCol=function(t){return new Gs},e.prototype.initCol=function(t,e){var i=t.col.trait;null!==i&&this.initColTrait(i,e);var o=t.col.view;null!==o&&this.initColView(o,e)},e.prototype.attachCol=function(t,e){var i=t.col.trait;null!==i&&this.attachColTrait(i,e);var o=t.col.view;null!==o&&this.attachColView(o,e)},e.prototype.detachCol=function(t,e){var i=t.col.trait;null!==i&&this.detachColTrait(i,e);var o=t.col.view;null!==o&&this.detachColView(o,e)},e.prototype.willSetCol=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetCol&&s.componentWillSetCol(t,e,i)}},e.prototype.onSetCol=function(t,e,i){null!==e&&this.detachCol(e,i),null!==t&&(this.attachCol(t,i),this.initCol(t,i))},e.prototype.didSetCol=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetCol&&s.componentDidSetCol(t,e,i)}},e.prototype.insertColTrait=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.col.trait===t)return;s.col.trait===e&&(o=s)}}var a=this.createCol(t);null!==a&&(this.insertChildComponent(a,o),a.col.setTrait(t))},e.prototype.removeColTrait=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.col.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initColTrait=function(t,e){},e.prototype.attachColTrait=function(t,e){},e.prototype.detachColTrait=function(t,e){},e.prototype.willSetColTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetColTrait&&s.componentWillSetColTrait(t,e,i)}},e.prototype.onSetColTrait=function(t,e,i){null!==e&&this.detachColTrait(e,i),null!==t&&(this.attachColTrait(e,i),this.initColTrait(t,i))},e.prototype.didSetColTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetColTrait&&s.componentDidSetColTrait(t,e,i)}},e.prototype.willSetColLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetColLayout&&s.componentWillSetColLayout(t,e,i)}},e.prototype.onSetColLayout=function(t,e,i){},e.prototype.didSetColLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetColLayout&&s.componentDidSetColLayout(t,e,i)}},e.prototype.createColView=function(t){return t.col.createView()},e.prototype.initColView=function(t,e){var i=t.header.view;null!==i&&this.initColHeaderView(i,e)},e.prototype.attachColView=function(t,e){var i=t.header.view;null!==i&&this.attachColHeaderView(i,e)},e.prototype.detachColView=function(t,e){var i=t.header.view;null!==i&&this.detachColHeaderView(i,e),t.remove()},e.prototype.willSetColView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetColView&&s.componentWillSetColView(t,e,i)}},e.prototype.onSetColView=function(t,e,i){null!==e&&this.detachColView(e,i),null!==t&&(this.attachColView(t,i),this.initColView(t,i))},e.prototype.didSetColView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetColView&&s.componentDidSetColView(t,e,i)}},e.prototype.initColHeaderView=function(t,e){},e.prototype.attachColHeaderView=function(t,e){},e.prototype.detachColHeaderView=function(t,e){},e.prototype.willSetColHeaderView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetColHeaderView&&s.componentWillSetColHeaderView(t,e,i)}},e.prototype.onSetColHeaderView=function(t,e,i){null!==e&&this.detachColHeaderView(e,i),null!==t&&(this.attachColHeaderView(t,i),this.initColHeaderView(t,i))},e.prototype.didSetColHeaderView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetColHeaderView&&s.componentDidSetColHeaderView(t,e,i)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.getColFastener=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.col.trait===t)return n}return null},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createRowFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createRow=function(t){return new Hs},e.prototype.initRow=function(t,e){var i=t.row.trait;null!==i&&this.initRowTrait(i,e);var o=t.row.view;null!==o&&this.initRowView(o,e)},e.prototype.attachRow=function(t,e){var i=t.row.trait;null!==i&&this.attachRowTrait(i,e);var o=t.row.view;null!==o&&this.attachRowView(o,e)},e.prototype.detachRow=function(t,e){var i=t.row.view;null!==i&&this.detachRowView(i,e);var o=t.row.trait;null!==o&&this.detachRowTrait(o,e)},e.prototype.willSetRow=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetRow&&s.componentWillSetRow(t,e,i)}},e.prototype.onSetRow=function(t,e,i){null!==e&&this.detachRow(e,i),null!==t&&(this.attachRow(t,i),this.initRow(t,i))},e.prototype.didSetRow=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetRow&&s.componentDidSetRow(t,e,i)}},e.prototype.insertRowTrait=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.row.trait===t)return;s.row.trait===e&&(o=s)}}var a=this.createRow(t);if(null!==a&&(a.row.setTrait(t),this.insertChildComponent(a,o),null===a.row.view)){var l=this.createRowView(a),u=null;null!==o&&(u=o.row.view);var h=this.table.view;null!==h?a.row.injectView(h,l,u,null):a.row.setView(l,u)}},e.prototype.removeRowTrait=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.row.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initRowTrait=function(t,e){},e.prototype.attachRowTrait=function(t,e){},e.prototype.detachRowTrait=function(t,e){},e.prototype.willSetRowTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetRowTrait&&s.componentWillSetRowTrait(t,e,i)}},e.prototype.onSetRowTrait=function(t,e,i){null!==e&&this.detachRowTrait(e,i),null!==t&&(this.attachRowTrait(t,i),this.initRowTrait(t,i))},e.prototype.didSetRowTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetRowTrait&&s.componentDidSetRowTrait(t,e,i)}},e.prototype.createRowView=function(t){return t.row.createView()},e.prototype.initRowView=function(t,e){},e.prototype.attachRowView=function(t,e){},e.prototype.detachRowView=function(t,e){t.remove()},e.prototype.willSetRowView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetRowView&&s.componentWillSetRowView(t,e,i)}},e.prototype.onSetRowView=function(t,e,i){null!==e&&this.detachRowView(e,i),null!==t&&(this.attachRowView(t,i),this.initRowView(t,i))},e.prototype.didSetRowView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetRowView&&s.componentDidSetRowView(t,e,i)}},e.prototype.initCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.initCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.initCellView(n,e,i)},e.prototype.attachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.attachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.attachCellView(n,e,i)},e.prototype.detachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.detachCellView(n,e,i)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetCell&&a.componentWillSetCell(t,e,i,o)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,i,o),null!==t&&(this.attachCell(t,i,o),this.initCell(t,i,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetCell&&a.componentDidSetCell(t,e,i,o)}},e.prototype.initCellTrait=function(t,e,i){},e.prototype.attachCellTrait=function(t,e,i){},e.prototype.detachCellTrait=function(t,e,i){},e.prototype.willSetCellTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetCellTrait&&a.componentWillSetCellTrait(t,e,i,o)}},e.prototype.onSetCellTrait=function(t,e,i,o){null!==e&&this.detachCellTrait(e,i,o),null!==t&&(this.attachCellTrait(e,i,o),this.initCellTrait(t,i,o))},e.prototype.didSetCellTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetCellTrait&&a.componentDidSetCellTrait(t,e,i,o)}},e.prototype.initCellView=function(t,e,i){var o=t.content.view;null!==o&&this.initCellContentView(o,e,i)},e.prototype.attachCellView=function(t,e,i){var o=t.content.view;null!==o&&this.attachCellContentView(o,e,i)},e.prototype.detachCellView=function(t,e,i){var o=t.content.view;null!==o&&this.detachCellContentView(o,e,i)},e.prototype.willSetCellView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetCellView&&a.componentWillSetCellView(t,e,i,o)}},e.prototype.onSetCellView=function(t,e,i,o){null!==e&&this.detachCellView(e,i,o),null!==t&&(this.attachCellView(t,i,o),this.initCellView(t,i,o))},e.prototype.didSetCellView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetCellView&&a.componentDidSetCellView(t,e,i,o)}},e.prototype.initCellContentView=function(t,e,i){},e.prototype.attachCellContentView=function(t,e,i){},e.prototype.detachCellContentView=function(t,e,i){},e.prototype.willSetCellContentView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetCellContentView&&a.componentWillSetCellContentView(t,e,i,o)}},e.prototype.onSetCellContentView=function(t,e,i,o){null!==e&&this.detachCellContentView(e,i,o),null!==t&&(this.attachCellContentView(t,i,o),this.initCellContentView(t,i,o))},e.prototype.didSetCellContentView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetCellContentView&&a.componentDidSetCellContentView(t,e,i,o)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.getRowFastener=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.row.trait===t)return n}return null},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectRowComponent=function(t){return t instanceof Hs?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectRowComponent(e);null!==o&&this.insertRow(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectRowComponent(e);null!==i&&this.removeRow(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.TableFastener=fs.define({viewType:zs,observeView:!0,willSetView:function(t,e){this.owner.willSetTableView(t,e)},onSetView:function(t,e){this.owner.onSetTableView(t,e)},didSetView:function(t,e){this.owner.didSetTableView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeTableView(t,e,i,o)},createView:function(){return this.owner.createTableView()},traitType:qs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetTableTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetTableTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetTableTrait(t,e)},traitWillSetTableLayout:function(t,e){this.owner.willSetTableLayout(t,e)},traitDidSetTableLayout:function(t,e){this.owner.onSetTableLayout(t,e),this.owner.didSetTableLayout(t,e)},traitWillSetCol:function(t,e,i){null!==e&&this.owner.removeColTrait(e)},traitDidSetCol:function(t,e,i){null!==t&&this.owner.insertColTrait(t,i)},traitWillSetRow:function(t,e,i){null!==e&&this.owner.removeRowTrait(e)},traitDidSetRow:function(t,e,i){null!==t&&this.owner.insertRowTrait(t,i)}}),e.ColFastener=gs.define({type:Gs,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetCol(t,e,this)},onSetComponent:function(t,e){this.owner.onSetCol(t,e,this)},didSetComponent:function(t,e){this.owner.didSetCol(t,e,this)},componentWillSetColTrait:function(t,e){this.owner.willSetColTrait(t,e,this)},componentDidSetColTrait:function(t,e){this.owner.onSetColTrait(t,e,this),this.owner.didSetColTrait(t,e,this)},componentWillSetColLayout:function(t,e){this.owner.willSetColLayout(t,e,this)},componentDidSetColLayout:function(t,e){this.owner.onSetColLayout(t,e,this),this.owner.didSetColLayout(t,e,this)},componentWillSetColView:function(t,e){this.owner.willSetColView(t,e,this)},componentDidSetColView:function(t,e){this.owner.onSetColView(t,e,this),this.owner.didSetColView(t,e,this)},componentWillSetColHeaderView:function(t,e){this.owner.willSetColHeaderView(t,e,this)},componentDidSetColHeaderView:function(t,e){this.owner.onSetColHeaderView(t,e,this),this.owner.didSetColHeaderView(t,e,this)}}),e.RowFastener=gs.define({type:Hs,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetRow(t,e,this)},onSetComponent:function(t,e){this.owner.onSetRow(t,e,this)},didSetComponent:function(t,e){this.owner.didSetRow(t,e,this)},componentWillSetRowTrait:function(t,e){this.owner.willSetRowTrait(t,e,this)},componentDidSetRowTrait:function(t,e){this.owner.onSetRowTrait(t,e,this),this.owner.didSetRowTrait(t,e,this)},componentWillSetRowView:function(t,e){this.owner.willSetRowView(t,e,this)},componentDidSetRowView:function(t,e){this.owner.onSetRowView(t,e,this),this.owner.didSetRowView(t,e,this)},componentWillSetCell:function(t,e,i){this.owner.willSetCell(t,e,i,this)},componentDidSetCell:function(t,e,i){this.owner.onSetCell(t,e,i,this),this.owner.didSetCell(t,e,i,this)},componentWillSetCellTrait:function(t,e,i){this.owner.willSetCellTrait(t,e,i,this)},componentDidSetCellTrait:function(t,e,i){this.owner.onSetCellTrait(t,e,i,this),this.owner.didSetCellTrait(t,e,i,this)},componentWillSetCellView:function(t,e,i){this.owner.willSetCellView(t,e,i,this)},componentDidSetCellView:function(t,e,i){this.owner.onSetCellView(t,e,i,this),this.owner.didSetCellView(t,e,i,this)},componentWillSetCellContentView:function(t,e,i){this.owner.willSetCellContentView(t,e,i,this)},componentDidSetCellContentView:function(t,e,i){this.owner.onSetCellContentView(t,e,i,this),this.owner.didSetCellContentView(t,e,i,this)}}),m([fs({extends:e.TableFastener})],e.prototype,"table",void 0),e}(bs),Xs=function(){function t(t,e,i,o,n,r,s,a,l){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"optional",{value:n,enumerable:!0}),Object.defineProperty(this,"width",{value:r,enumerable:!0}),Object.defineProperty(this,"left",{value:s,enumerable:!0}),Object.defineProperty(this,"right",{value:a,enumerable:!0}),Object.defineProperty(this,"hidden",{value:l,enumerable:!0})}return t.prototype.withFlex=function(t,e,i){return i=void 0!==i?r.Length.fromAny(i):this.basis,this.copy(this.key,t,e,i,this.optional,this.width,this.left,this.right,this.hidden)},t.prototype.asOptional=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,t,this.width,this.left,this.right,this.hidden)},t.prototype.asHidden=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.width,this.left,this.right,t)},t.prototype.resized=function(t,e,i,o){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),void 0===o&&(o=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,t,e,i,o)},t.prototype.copy=function(e,i,o,n,r,s,a,l,u){return new t(e,i,o,n,r,s,a,l,u)},t.prototype.equivalentTo=function(e,i){return this===e||e instanceof t&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i)&&this.optional===e.optional)},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&this.optional===i.optional&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&this.hidden===i.hidden)},t.prototype.debug=function(t){t=t.write("TreeRoot").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis),this.optional&&(t=t.write(", ").debug(this.optional)),t=t.write(41),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s){return void 0===i&&(i=0),void 0===o&&(o=1),void 0===s&&(s=!1),new t(e,i,o,n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),s,null,null,null,!1)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var s=e.basis;s=void 0!==s?r.Length.fromAny(s):r.Length.zero();var a=e.optional;void 0===a&&(a=!1);var l=e.width;l=null!=l?r.Length.fromAny(l):null;var u=e.left;u=null!=u?r.Length.fromAny(u):null;var h=e.right;h=null!=h?r.Length.fromAny(h):null;var p=e.hidden;return void 0===p&&(p=!1),new t(i,o,n,s,a,l,u,h,p)},t}(),Ks=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"spacing",{value:o,enumerable:!0}),Object.defineProperty(this,"roots",{value:n,enumerable:!0})}return t.prototype.getRoot=function(t){for(var e=this.roots,i=0,o=e.length;i<o;i+=1){var n=e[i];if(t===n.key)return n}return null},t.prototype.resized=function(i,o,n,s){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===s?s=this.spacing:null!==s&&(s=r.Length.fromAny(s)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.spacing,s))return this;for(var a=this.roots,l=a.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==s?s.pxValue(h):0,v=0,f=0,y=0,g=p+d,w=p,m=0;m<l;m+=1){0!==m&&(g+=c,w+=c);var b=(F=a[m]).basis.pxValue(h);u[m]=F.resized(b,w,h-b-w,!1),v+=F.grow,f+=F.shrink,F.optional&&(y+=1),g+=b,w+=b}if(g>h&&y>0){for(m=l-1;m>=0&&y>0;){b=(F=u[m]).width.pxValue();if(F.optional&&(u[m]=F.resized(0,w,h-w,!0),v-=F.grow,f-=F.shrink,y-=1,g-=b),w-=b,0!==m&&(g-=c,w-=c),g<=h)break;m-=1}for(m+=1;m<l;){if(!(F=u[m]).optional){g+=c,w+=c;b=F.basis.pxValue(h);u[m]=F.resized(b,w,h-b-w),w+=b}m+=1}}if(g<h&&v>0){var S=h-g,C=p,P=0;for(m=0;m<l;m+=1){if((F=u[m]).hidden)u[m]=F.resized(0,C+c,h-C-c);else{0!==P&&(C+=c);b=F.basis.pxValue(h)+S*(F.grow/v);u[m]=F.resized(b,C,h-b-C),C+=b,P+=1}}}else if(g>h&&f>0){S=g-h;var V=p;for(P=0,m=0;m<l;m+=1){var F;if((F=u[m]).hidden)u[m]=F.resized(0,V+c,h-V-c);else{0!==P&&(V+=c);b=F.basis.pxValue(h)-S*(F.shrink/f);u[m]=F.resized(b,V,h-b-V),V+=b,P+=1}}}return new t(i,o,n,s,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.roots,n=e.roots,r=o.length;if(r===n.length){for(var s=0;s<r;s+=1)if(!o[s].equivalentTo(n[s],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.spacing,i.spacing)&&e.Arrays.equal(this.roots,i.roots))},t.prototype.debug=function(t){t=t.write("TreeSeed").write(46).write("of").write(40);for(var e=0,i=this.roots.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.roots[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=Xs.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var s=e.spacing;s=null!=s?r.Length.fromAny(s):null;for(var a=e.roots.length,l=new Array(a),u=0;u<a;u+=1)l[u]=Xs.fromAny(e.roots[u]);return new t(i,o,n,s,l)},t}(),Zs=function(t){function e(e){var i=t.call(this,e)||this;return i.initCell(),i}return w(e,t),e.prototype.initCell=function(){this.addClass("tree-cell"),this.display.setState("none",Xi.Intrinsic),this.alignItems.setState("center",Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.didPress=function(t,e){if(!t.defaultPrevented){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.cellDidPress&&r.cellDidPress(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.cellDidPress&&s.cellDidPress(t,e,this)}},e.prototype.didLongPress=function(t){if(!t.defaultPrevented){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.cellDidLongPress&&n.cellDidLongPress(t,this)}var r=this.viewController;null!==r&&void 0!==r.cellDidLongPress&&r.cellDidLongPress(t,this)}},e.fromInit=function(t){var i;return(i="title"===t.cellType?Qs.create():"disclosure"===t.cellType?oa.create():"icon"===t.cellType?na.create():e.create()).initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e}(Zn),_s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.cellDidPress=function(t,e,i){},e.prototype.cellDidLongPress=function(t,e){},e}(_n),Qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("title-tree-cell")},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.color.setState(e.getOr(Qt.accentColor,i,null),o,Xi.Intrinsic)},e}(Zs),Js=function(t){function e(e){var i=t.call(this,e)||this;return i.initLeaf(),i}return w(e,t),e.prototype.initLeaf=function(){this.addClass("tree-leaf"),this.position.setState("relative",Xi.Intrinsic),this.height.setState(58,Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),!0===e.highlighted?this.highlight():!1===e.highlighted&&this.unhighlight(),void 0!==e.cells&&this.addCells(e.cells)},e.prototype.addCell=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=Zs.fromAny(t),this.appendChildView(t,e),t},e.prototype.addCells=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addCell(t[e])},e.prototype.highlight=function(t){this.highlighted.state||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willHighlight(t),this.highlighted.setState(!0),this.onHighlight(t),this.didHighlight(t))},e.prototype.willHighlight=function(t){var e=this.viewController;null!==e&&void 0!==e.leafWillHighlight&&e.leafWillHighlight(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafWillHighlight&&r.leafWillHighlight(t,this)}},e.prototype.onHighlight=function(t){this.modifyMood(re.default,[[re.selected,1]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(this.getLookOr(Qt.backgroundColor,null),t,Xi.Intrinsic);var e=this.getLookOr(Qt.accentColor,null),i=this.getChildView("selected");null===i&&((i=this.prepend("div","selected")).addClass("selected"),i.position.setState("absolute",Xi.Intrinsic),i.top.setState(2,Xi.Intrinsic),i.bottom.setState(2,Xi.Intrinsic),i.left.setState(0,Xi.Intrinsic),i.width.setState(4,Xi.Intrinsic),null!==e&&i.backgroundColor.setState(e.alpha(0),Xi.Intrinsic)),null!==i&&i.backgroundColor.setState(e,t,Xi.Intrinsic)},e.prototype.didHighlight=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.leafDidHighlight&&n.leafDidHighlight(t,this)}var r=this.viewController;null!==r&&void 0!==r.leafDidHighlight&&r.leafDidHighlight(t,this)},e.prototype.unhighlight=function(t){this.highlighted.state&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willUnhighlight(t),this.highlighted.setState(!1),this.onUnhighlight(t),this.didUnhighlight(t))},e.prototype.willUnhighlight=function(t){var e=this.viewController;null!==e&&void 0!==e.leafWillUnhighlight&&e.leafWillUnhighlight(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafWillUnhighlight&&r.leafWillUnhighlight(t,this)}},e.prototype.onUnhighlight=function(t){if(this.modifyMood(re.default,[[re.selected,void 0]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var e=this.getLookOr(Qt.backgroundColor,null);null!==e&&(e=e.alpha(0)),this.backgroundColor.setState(e,t,Xi.Intrinsic)}var i=this.getChildView("selected");if(null!==i){var o=this.getLookOr(Qt.accentColor,null);null!==o&&(o=o.alpha(0)),i.backgroundColor.setState(o,t,Xi.Intrinsic)}},e.prototype.didUnhighlight=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.leafDidUnhighlight&&n.leafDidUnhighlight(t,this)}var r=this.viewController;null!==r&&void 0!==r.leafDidUnhighlight&&r.leafDidUnhighlight(t,this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var n=this.getLookOr(Qt.backgroundColor,null);null===n||this.highlighted.state||(n=n.alpha(0)),this.backgroundColor.setState(n,o,Xi.Intrinsic)}var r=this.getChildView("selected");if(null!==r){var s=this.getLookOr(Qt.accentColor,null);null===s||this.highlighted.state||(s=s.alpha(0)),r.backgroundColor.setState(s,o,Xi.Intrinsic)}},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Zs&&this.onInsertCell(e)},e.prototype.onRemoveChildView=function(e){e instanceof Zs&&this.onRemoveCell(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertCell=function(t){t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.bottom.setState(0,Xi.Intrinsic)},e.prototype.onRemoveCell=function(t){},e.prototype.displayChildViews=function(e,i,o){0!=(e&Xi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.seed.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Zs){var s=t.key,a=null!==n&&void 0!==s?n.getRoot(s):null;null!==a?(t.display.setState(a.hidden?"none":"flex",Xi.Intrinsic),t.left.setState(a.left,Xi.Intrinsic),t.width.setState(a.width,Xi.Intrinsic),t.height.setState(r,Xi.Intrinsic)):(t.display.setState("none",Xi.Intrinsic),t.left.setState(null,Xi.Intrinsic),t.width.setState(null,Xi.Intrinsic),t.height.setState(null,Xi.Intrinsic))}o.call(this,t,e,i)}))},e.prototype.didEndPress=function(e,i){t.prototype.didEndPress.call(this,e,i);for(var o=e.target;null!==o&&o!==this.node;){var n=o.view;if(n instanceof Zs){n.didPress(e,i);break}o=o instanceof Node?o.parentNode:null}},e.prototype.didPress=function(t,e){if(!t.defaultPrevented){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.leafDidPress&&r.leafDidPress(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.leafDidPress&&s.leafDidPress(t,e,this)}},e.prototype.didLongPress=function(t){for(var e=t.target;null!==e&&e!==this.node;){var i=e.view;if(i instanceof Zs){i.didLongPress(t);break}e=e instanceof Node?e.parentNode:null}if(!t.defaultPrevented){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.leafDidLongPress&&s.leafDidLongPress(t,this)}var a=this.viewController;null!==a&&void 0!==a.leafDidLongPress&&a.leafDidLongPress(t,this)}},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ks,state:null,inherit:!0})],e.prototype,"seed",void 0),m([ho({type:Number,inherit:!0})],e.prototype,"limbSpacing",void 0),m([ho({type:Boolean,state:!1})],e.prototype,"highlighted",void 0),e}(Cs),$s=function(t){function e(e){var i=t.call(this,e)||this;return i.initVein(),i}return w(e,t),e.prototype.initVein=function(){this.addClass("tree-vein"),this.display.setState("none",Xi.Intrinsic),this.alignItems.setState("center",Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.color.setState(e.getOr(Qt.neutralColor,i,null),o,Xi.Intrinsic)},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e}(Zn),ta=function(t){function e(e){var i=t.call(this,e)||this;return i.initStem(),i}return w(e,t),e.prototype.initStem=function(){this.addClass("tree-stem"),this.position.setState("relative",Xi.Intrinsic),this.height.setState(60,Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.veins&&this.addVeins(e.veins)},e.prototype.addVein=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=$s.fromAny(t),this.appendChildView(t,e),t},e.prototype.addVeins=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addVein(t[e])},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof $s&&this.onInsertVein(e)},e.prototype.onRemoveChildView=function(e){e instanceof $s&&this.onRemoveVein(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertVein=function(t){t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.bottom.setState(0,Xi.Intrinsic)},e.prototype.onRemoveVein=function(t){},e.prototype.displayChildViews=function(e,i,o){0!=(e&Xi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.seed.state,r=this.height.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof $s){var s=t.key,a=null!==n&&void 0!==s?n.getRoot(s):null;null!==a?(t.display.setState(a.hidden?"none":"flex",Xi.Intrinsic),t.left.setState(a.left,Xi.Intrinsic),t.width.setState(a.width,Xi.Intrinsic),t.height.setState(r,Xi.Intrinsic)):(t.display.setState("none",Xi.Intrinsic),t.left.setState(null,Xi.Intrinsic),t.width.setState(null,Xi.Intrinsic),t.height.setState(null,Xi.Intrinsic))}o.call(this,t,e,i)}))},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ks,state:null,inherit:!0})],e.prototype,"seed",void 0),e}(Zn),ea=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"visibleViews",{value:[],enumerable:!0,configurable:!0}),Object.defineProperty(i,"visibleFrame",{value:new r.R2Box(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initTree(),i}return w(e,t),e.prototype.initTree=function(){this.addClass("tree"),this.display.setState("block",Xi.Intrinsic),this.position.setState("relative",Xi.Intrinsic),this.opacity.setState(0,Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limbSpacing&&this.limbSpacing(e.limbSpacing),void 0!==e.seed&&this.seed(e.seed),void 0!==e.stem&&this.setStem(e.stem),void 0!==e.limbs&&this.addLimbs(e.limbs),void 0!==e.depth&&this.depth(e.depth)},Object.defineProperty(e.prototype,"stem",{get:function(){var t=this.getChildView("stem");return t instanceof ta?t:null},enumerable:!1,configurable:!0}),e.prototype.setStem=function(t){null!==t&&(t=ta.fromAny(t)),this.setChildView("stem",t)},e.prototype.addLimb=function(t,e){return void 0===e&&"key"in t&&(e=t.key),t=ia.fromAny(t),this.appendChildView(t,e),t},e.prototype.addLimbs=function(t){for(var e=0,i=t.length;e<i;e+=1)this.addLimb(t[e])},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=e.key;"stem"===o&&e instanceof ta?this.onInsertStem(e):e instanceof ia?this.onInsertLimb(e):"topBranch"===o&&e instanceof Zn?this.onInsertTopBranch(e):"bottomBranch"===o&&e instanceof Zn&&this.onInsertBottomBranch(e)},e.prototype.onRemoveChildView=function(e){var i=e.key;"stem"===i&&e instanceof ta?this.onRemoveStem(e):e instanceof ia?this.onRemoveLimb(e):"topBranch"===i&&e instanceof Zn?this.onRemoveTopBranch(e):"bottomBranch"===i&&e instanceof Zn&&this.onRemoveBottomBranch(e);var o=this.visibleViews,n=o.indexOf(e);n>=0&&o.splice(n,1),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertStem=function(t){t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic);var e=this.seed.state,i=null!==e?e.width:null;t.width.setState(i,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic)},e.prototype.onRemoveStem=function(t){},e.prototype.onInsertLimb=function(t){t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic);var e=this.seed.state,i=null!==e?e.width:null;t.width.setState(i,Xi.Intrinsic),t.depth.setState(this.depth.state+1,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic),t.setCulled(!0)},e.prototype.onRemoveLimb=function(t){},e.prototype.onInsertTopBranch=function(t){t.addClass("branch-top"),t.position.setState("absolute",Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic);var e=this.seed.state,i=null!==e?e.width:null;t.width.setState(i,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic)},e.prototype.onRemoveTopBranch=function(t){},e.prototype.onInsertBottomBranch=function(t){t.addClass("branch-bottom"),t.position.setState("absolute",Xi.Intrinsic),t.bottom.setState(0,Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic);var e=this.seed.state,i=null!==e?e.width:null;t.width.setState(i,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic)},e.prototype.onRemoveBottomBranch=function(t){},e.prototype.onUpdateDepth=function(t){this.modifyTheme(re.default,[[re.nested,0!==t?1:void 0]])},e.prototype.descendantDidSetDisclosurePhase=function(t,e){this.requireUpdate(Xi.NeedsLayout);var i=this.parentView;i instanceof ia&&i.descendantDidSetDisclosurePhase(t,e)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.depth.state;if(void 0!==n&&0!==n){var r=this.theme.superState;null==r&&(r=e);var s=this.parentView,a=s instanceof ia?s.leaf:null,l=null!==a?a.moodModifier.state:null,u=null!==l?l.timesCol(i):i,h=e.getOr(Qt.backgroundColor,i,null);this.backgroundColor.setState(h,o,Xi.Intrinsic);var p=r.getOr(Qt.accentColor,u,null),d=r.getOr(Qt.borderColor,u,null),c=this.limbSpacing.getState(),v=this.getChildView("bottomBranch");null===v&&(v=this.prepend("div","bottomBranch")),v.height.setState(c/2,o,Xi.Intrinsic),v.backgroundColor.setState(d,o,Xi.Intrinsic),v.zIndex.setState(1e3-n,Xi.Intrinsic);var f=this.getChildView("topBranch");null===f&&(f=this.prepend("div","topBranch")),f.height.setState(c,o,Xi.Intrinsic),f.backgroundColor.setState(p,o,Xi.Intrinsic),f.zIndex.setState(1e3-n,Xi.Intrinsic)}else this.removeChildView("topBranch"),this.removeChildView("bottomBranch")},e.prototype.detectVisibleFrame=function(t){var e=t.visibleFrame;if(void 0!==e){var i=this.left.state,o=i instanceof r.Length?i.pxValue():0,n=this.top.state,s=n instanceof r.Length?n.pxValue():0;return new r.R2Box(e.xMin-o-0,e.yMin-s-64,e.xMax-o+0,e.yMax-s+64)}var a=this.node.getBoundingClientRect();o=a.x,s=a.y;return new r.R2Box(-o-0,-s-64,window.innerWidth-o+0,window.innerHeight-s+64)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.needsProcess=function(t,e){return 0!=(t&Xi.NeedsResize)&&(t|=Xi.NeedsScroll),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeTree()},e.prototype.resizeTree=function(){var t=this.seed.isInherited()?null:this.seed.state;if(null!==t){var e=this.seed.superState,i=null;null!=e&&null!==e.width&&(i=e.width.pxValue()),null===i&&(i=(i=this.width.state)instanceof r.Length?i.pxValue():this.node.offsetWidth);var o=this.edgeInsets.state,n=null!==o?o.insetLeft:0,s=null!==o?o.insetRight:0,a=this.limbSpacing.getState(),l=t.resized(i,n,s,a);this.seed.setState(l)}},e.prototype.processVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.processChildViews=function(t,e,i){this.isCulled()||(0!=(t&(Xi.NeedsScroll|Xi.NeedsChange))?this.scrollChildViews(t,e,i):this.processVisibleViews(t,e,i))},e.prototype.scrollChildViews=function(e,i,o){var n=this.depth.getState(),s=this.visibleViews;s.length=0;var a=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=a,Object.defineProperty(this,"visibleFrame",{value:a,enumerable:!0,configurable:!0}),t.prototype.processChildViews.call(this,e,i,(function(t,e,i){if(0!=(e&Xi.NeedsChange)&&t instanceof ia){var l=t.subtree;null!==l&&l.depth.setState(n+1,Xi.Intrinsic)}var u;if(t instanceof Zn){var h=t.top.state,p=t.height.state;if(h instanceof r.Length&&p instanceof r.Length){var d=a.yMin,c=a.yMax,v=h.pxValue();u=d<=v+p.pxValue()&&v<=c,t.visibility.setState(u?"visible":"hidden",Xi.Intrinsic),t.setCulled(!u)}else u=!0}else u=!0;u&&(s.push(t),o.call(this,t,e,i))}))},e.prototype.displayVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){0!=(t&Xi.NeedsLayout)?this.layoutChildViews(t,e,i):this.displayVisibleViews(t,e,i)},e.prototype.layoutChildViews=function(e,i,o){this.resizeTree();var n=this.seed.state,s=null!==n?n.width:null,a=this.limbSpacing.getState(),l=a,u=this.disclosingPhase.getValueOr(1),h=this.visibleViews;h.length=0;var p=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=p,Object.defineProperty(this,"visibleFrame",{value:p,enumerable:!0,configurable:!0}),t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){var n;if(t instanceof Zn){t.width.setState(s,Xi.Intrinsic),(t instanceof ia||t instanceof ta)&&t.top.takesPrecedence(Xi.Intrinsic)&&t.top.setIntermediateValue(r.Length.px(a*u),r.Length.px(l));var d=t.top.state,c=t.height.state;if(d instanceof r.Length&&c instanceof r.Length){var v=p.yMin,f=p.yMax,y=d.pxValue();n=v<=y+c.pxValue()&&y<=f}else n=!0;t.visibility.setState(n?"visible":"hidden",Xi.Intrinsic),t.setCulled(!n)}else n=!0;if(n&&h.push(t),o.call(this,t,e,i),t instanceof ia||t instanceof ta){var g=t.height.value;g=g instanceof r.Length?g.pxValue():t.node.offsetHeight;var w=t.height.state;w=w instanceof r.Length?w.pxValue():g,a+=g*u,l+=w}})),this.height.takesPrecedence(Xi.Intrinsic)&&this.height.setIntermediateValue(r.Length.px(a),r.Length.px(l));var d=this.disclosurePhase.getValueOr(1);this.opacity.setState(d,Xi.Intrinsic)},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ks,state:null,inherit:!0,updateFlags:Xi.NeedsResize|Xi.NeedsLayout})],e.prototype,"seed",void 0),m([ho({type:Number,state:0,didSetState:function(t){this.owner.onUpdateDepth(t)}})],e.prototype,"depth",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([ho({type:Number,state:2})],e.prototype,"limbSpacing",void 0),m([ho({type:String,inherit:!0})],e.prototype,"disclosureState",void 0),m([So({type:Number,inherit:!0})],e.prototype,"disclosurePhase",void 0),m([So({type:Number,inherit:!0})],e.prototype,"disclosingPhase",void 0),e}(Zn),ia=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"visibleFrame",{value:new r.R2Box(0,0,window.innerWidth,window.innerHeight),enumerable:!0,configurable:!0}),i.initLimb(),i}return w(e,t),e.prototype.initLimb=function(){this.addClass("tree-limb"),this.position.setState("relative",Xi.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),!0===e.expanded?this.expand():!1===e.expanded&&this.collapse(),void 0!==e.leaf&&this.setLeaf(e.leaf),void 0!==e.subtree&&this.setSubtree(e.subtree)},Object.defineProperty(e.prototype,"leaf",{get:function(){var t=this.getChildView("leaf");return t instanceof Js?t:null},enumerable:!1,configurable:!0}),e.prototype.setLeaf=function(t){null!==t&&(t=Js.fromAny(t)),this.setChildView("leaf",t)},Object.defineProperty(e.prototype,"subtree",{get:function(){var t=this.getChildView("subtree");return t instanceof ea?t:null},enumerable:!1,configurable:!0}),e.prototype.setSubtree=function(t){null!==t&&(t=ea.fromAny(t)),this.setChildView("subtree",t)},e.prototype.isExpanded=function(){var t=this.disclosureState.getStateOr("expanded");return"expanded"===t||"expanding"===t},e.prototype.isCollapsed=function(){var t=this.disclosureState.getStateOr("expanded");return"collapsed"===t||"collapsing"===t},e.prototype.expand=function(t){var e=this.disclosurePhase.value;(this.isCollapsed()||1!==e)&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willExpand(t),!1!==t?1!==e?(this.disclosurePhase.setState(1,t,Xi.Intrinsic),this.disclosingPhase.setState(this.disclosurePhase.value,Xi.Intrinsic),this.disclosingPhase.setState(1,t,Xi.Intrinsic)):this.didExpand():(this.disclosurePhase.setState(1,Xi.Intrinsic),this.disclosingPhase.setState(1,Xi.Intrinsic),this.didExpand()))},e.prototype.willExpand=function(t){this.disclosureState.setState("expanding",Xi.Intrinsic),this.requireUpdate(Xi.NeedsResize|Xi.NeedsChange|Xi.NeedsLayout);var e=this.viewController;null!==e&&void 0!==e.limbWillExpand&&e.limbWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.limbWillExpand&&r.limbWillExpand(this)}var s=this.subtree;null!==s&&s.display.setState("block",Xi.Intrinsic)},e.prototype.didExpand=function(){this.disclosureState.setState("expanded",Xi.Intrinsic),this.disclosingPhase.setInherited(!0);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.limbDidExpand&&o.limbDidExpand(this)}var n=this.viewController;null!==n&&void 0!==n.limbDidExpand&&n.limbDidExpand(this)},e.prototype.collapse=function(t){var e=this.disclosurePhase.value;(this.isExpanded()||0!==e)&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.willCollapse(t),!1!==t?0!==e?(this.disclosurePhase.setState(0,t,Xi.Intrinsic),this.disclosingPhase.setState(this.disclosurePhase.value,Xi.Intrinsic),this.disclosingPhase.setState(0,t,Xi.Intrinsic)):this.didCollapse():(this.disclosurePhase.setState(0,Xi.Intrinsic),this.disclosingPhase.setState(0,Xi.Intrinsic),this.didCollapse()))},e.prototype.willCollapse=function(t){this.disclosureState.setState("collapsing",Xi.Intrinsic);var e=this.viewController;null!==e&&void 0!==e.limbWillCollapse&&e.limbWillCollapse(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.limbWillCollapse&&r.limbWillCollapse(this)}var s=this.subtree;null!==s&&s.height.setState(0,t,Xi.Intrinsic)},e.prototype.didCollapse=function(){this.disclosureState.setState("collapsed",Xi.Intrinsic),this.disclosingPhase.setInherited(!0),this.requireUpdate(Xi.NeedsResize|Xi.NeedsLayout);var t=this.subtree;null!==t&&t.display.setState("none",Xi.Intrinsic);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.limbDidCollapse&&n.limbDidCollapse(this)}var r=this.viewController;null!==r&&void 0!==r.limbDidCollapse&&r.limbDidCollapse(this)},e.prototype.toggle=function(t){var e=this.disclosureState.getStateOr("collapsed");"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},e.prototype.onCull=function(){t.prototype.onCull.call(this),this.display.setState("none",Xi.Intrinsic)},e.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.display.setState("block",Xi.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"leaf"===e.key&&e instanceof Js?this.onInsertLeaf(e):"subtree"===e.key&&e instanceof ea&&this.onInsertSubtree(e)},e.prototype.onRemoveChildView=function(e){"leaf"===e.key&&e instanceof Js?this.onRemoveLeaf(e):"subtree"===e.key&&e instanceof ea&&this.onRemoveSubtree(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertLeaf=function(t){t.position.setState("absolute",Xi.Intrinsic)},e.prototype.onRemoveLeaf=function(t){},e.prototype.onInsertSubtree=function(t){t.display.setState(this.isExpanded()?"block":"none",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic);var e=this.seed.state,i=null!==e?e.width:null;t.width.setState(i,Xi.Intrinsic),t.depth.setState(this.depth.state,Xi.Intrinsic)},e.prototype.onRemoveSubtree=function(t){},e.prototype.onUpdateDepth=function(t){var e=this.subtree;null!==e&&e.depth.setState(t,Xi.Intrinsic)},e.prototype.descendantDidSetDisclosurePhase=function(t,e){this.requireUpdate(Xi.NeedsLayout);var i=this.parentView;i instanceof ea&&i.descendantDidSetDisclosurePhase(t,e)},e.prototype.detectVisibleFrame=function(t){var e=t.visibleFrame;if(void 0!==e){var i=this.left.state,o=i instanceof r.Length?i.pxValue():0,n=this.top.state,s=n instanceof r.Length?n.pxValue():0;return new r.R2Box(e.xMin-o-0,e.yMin-s-64,e.xMax-o+0,e.yMax-s+64)}var a=this.node.getBoundingClientRect();o=a.x,s=a.y;return new r.R2Box(-o-0,-s-64,window.innerWidth-o+0,window.innerHeight-s+64)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.onProcess=function(e,i){t.prototype.onProcess.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));Object.defineProperty(this,"visibleFrame",{value:o,enumerable:!0,configurable:!0}),i.visibleFrame=this.visibleFrame},e.prototype.onDisplay=function(e,i){t.prototype.onDisplay.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));Object.defineProperty(this,"visibleFrame",{value:o,enumerable:!0,configurable:!0}),i.visibleFrame=this.visibleFrame,this.setViewFlags(this.viewFlags&~Xi.NeedsScroll)},e.prototype.didLayout=function(e){this.layoutLimb(),t.prototype.didLayout.call(this,e)},e.prototype.layoutLimb=function(){var t=this.disclosureState.getStateOr("expanded"),e="expanded"===t?this.disclosingPhase.getValueOr(1):1,i=this.seed.state,o=null!==i?i.width:null,n=this.limbSpacing.getStateOr(0),s=0,a=s,l=this.leaf;null!==l&&(l.top.takesPrecedence(Xi.Intrinsic)&&l.top.setIntermediateValue(r.Length.px(s*e),r.Length.px(a)),l.width.setState(o,Xi.Intrinsic),s+=(u=(u=l.height.value)instanceof r.Length?u.pxValue():l.node.offsetHeight)*e,a+=h=(h=l.height.state)instanceof r.Length?h.pxValue():u);var u,h,p=this.subtree;null!==p&&"collapsed"!==t?(p.top.takesPrecedence(Xi.Intrinsic)&&p.top.setIntermediateValue(r.Length.px(s*e),r.Length.px(a)),p.width.setState(o,Xi.Intrinsic),u=(u=p.height.value)instanceof r.Length?u.pxValue():p.node.offsetHeight,h=(h=p.height.state)instanceof r.Length?h.pxValue():u,s+=u*e,a+="collapsing"!==t?h:n):(s+=n*e,a+=n);this.height.takesPrecedence(Xi.Intrinsic)&&this.height.setIntermediateValue(r.Length.px(s),r.Length.px(a))},e.fromInit=function(t){var i=e.create();return i.initView(t),i},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:Ks,state:null,inherit:!0})],e.prototype,"seed",void 0),m([ho({type:Number,state:0,didSetState:function(t){this.owner.onUpdateDepth(t)}})],e.prototype,"depth",void 0),m([ho({type:String,state:"collapsed"})],e.prototype,"disclosureState",void 0),m([So({type:Number,state:0,didSetValue:function(t,e){this.owner.descendantDidSetDisclosurePhase(this.owner,t)},onEnd:function(t){var e=this.owner.disclosureState.getStateOr("expanded");"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],e.prototype,"disclosurePhase",void 0),m([So({type:Number,inherit:!0,updateFlags:Xi.NeedsLayout})],e.prototype,"disclosingPhase",void 0),m([ho({type:Number,inherit:!0})],e.prototype,"limbSpacing",void 0),e}(Zn),oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("disclosure-tree-cell"),this.append(Ms,"button")},Object.defineProperty(e.prototype,"button",{get:function(){return this.getChildView("button")},enumerable:!1,configurable:!0}),e.prototype.didPress=function(e,i){e.preventDefault();var o=this.parentView;if(o instanceof Js){var n=o.parentView;n instanceof ia&&n.toggle()}t.prototype.didPress.call(this,e,i)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"button"===e.key&&e instanceof Ms&&this.onInsertButton(e)},e.prototype.onRemoveChildView=function(e){"button"===e.key&&e instanceof Ms&&this.onRemoveButton(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertButton=function(t){},e.prototype.onRemoveButton=function(t){},e}(Zs),na=function(t){function e(e){var i=t.call(this,e)||this;return i.initIcon(),i}return w(e,t),e.prototype.initIcon=function(){this.addClass("icon-tree-cell");var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e)},e.prototype.createSvgView=function(){return Ur.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Ur?t:null},enumerable:!1,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Ur&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Mr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Xi.NeedsLayout)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Xi.NeedsLayout)&&(t&=~Xi.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.takesPrecedence(Xi.Intrinsic)||t.height.takesPrecedence(Xi.Intrinsic)||t.viewBox.takesPrecedence(Xi.Intrinsic))){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setState(e,Xi.Intrinsic),t.height.setState(i,Xi.Intrinsic),t.viewBox.setState("0 0 "+e+" "+i,Xi.Intrinsic)}},m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"iconColor",void 0),m([So({extends:Nr,type:Object,state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"graphics",void 0),e}(Zs),ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.leafDidPress=function(t,e,i){},e.prototype.leafDidLongPress=function(t,e){},e.prototype.leafWillHighlight=function(t,e){},e.prototype.leafDidHighlight=function(t,e){},e.prototype.leafWillUnhighlight=function(t,e){},e.prototype.leafDidUnhighlight=function(t,e){},e}(_n),sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.limbWillExpand=function(t){},e.prototype.limbDidExpand=function(t){},e.prototype.limbWillCollapse=function(t){},e.prototype.limbDidCollapse=function(t){},e}(_n),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(_n),ha=function(t){function e(e){var i=t.call(this,e)||this;return i.initList(),i}return w(e,t),e.prototype.initList=function(){this.addClass("list"),this.flexGrow.setState(1,Xi.Intrinsic),this.flexShrink.setState(0,Xi.Intrinsic),this.marginTop.setState(12,Xi.Intrinsic),this.marginBottom.setState(12,Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof pa&&this.onInsertItem(e)},e.prototype.onRemoveChildView=function(e){e instanceof pa&&this.onRemoveItem(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertItem=function(t){},e.prototype.onRemoveItem=function(t){},e.prototype.onPressItem=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.listDidPressItem&&n.listDidPressItem(t,this)}var r=this.viewController;null!==r&&void 0!==r.listDidPressItem&&r.listDidPressItem(t,this)},e}(Zn),pa=function(t){function e(e){var i=t.call(this,e)||this;return i.onClick=i.onClick.bind(i),i.initListItem(),i}return w(e,t),e.prototype.initListItem=function(){this.addClass("list-item"),this.position.setState("relative",Xi.Intrinsic),this.display.setState("flex",Xi.Intrinsic),this.flexShrink.setState(0,Xi.Intrinsic),this.height.setState(44,Xi.Intrinsic),this.boxSizing.setState("border-box",Xi.Intrinsic),this.lineHeight.setState(this.height.state,Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic)},e.prototype.createIconView=function(){return Br.create()},e.prototype.initIconView=function(t){t.flexShrink.setState(0,Xi.Intrinsic),t.width.setState(this.collapsedWidth.getStateOr(e.DefaultCollapsedWidth),Xi.Intrinsic),t.height.setState(this.height.state,Xi.Intrinsic),t instanceof Br&&(t.iconWidth.setState(24,Xi.Intrinsic),t.iconHeight.setState(24,Xi.Intrinsic),t.iconColor.setState(this.getLookOr(Qt.mutedColor,null)))},e.prototype.createLabelView=function(){var t=Zn.span.create();return t.display.setState("block",Xi.Intrinsic),t.fontFamily.setState("system-ui, 'Open Sans', sans-serif",Xi.Intrinsic),t.fontSize.setState(17,Xi.Intrinsic),t.whiteSpace.setState("nowrap",Xi.Intrinsic),t.textOverflow.setState("ellipsis",Xi.Intrinsic),t.overflowX.setState("hidden",Xi.Intrinsic),t.overflowY.setState("hidden",Xi.Intrinsic),t},e.prototype.initLabelView=function(t){if(t.flexGrow.setState(1,Xi.Intrinsic),t.flexShrink.setState(0,Xi.Intrinsic),t.color.takesPrecedence(Xi.Intrinsic)){var e=this.getLookOr(this.highlighted.state?Qt.color:Qt.mutedColor,null);t.color.setState(e,Xi.Intrinsic)}},e.prototype.createAccessoryIconView=function(){return Br.create()},e.prototype.createAccessoryView=function(){var t=Zn.span.create();return t.display.setState("block",Xi.Intrinsic),t.fontFamily.setState("system-ui, 'Open Sans', sans-serif",Xi.Intrinsic),t.fontSize.setState(17,Xi.Intrinsic),t.whiteSpace.setState("nowrap",Xi.Intrinsic),t.textOverflow.setState("ellipsis",Xi.Intrinsic),t.overflowX.setState("hidden",Xi.Intrinsic),t.overflowY.setState("hidden",Xi.Intrinsic),t},e.prototype.initAccessoryView=function(t){if(t.flexShrink.setState(0,Xi.Intrinsic),t.width.setState(this.collapsedWidth.getStateOr(e.DefaultCollapsedWidth),Xi.Intrinsic),t instanceof Br)t.iconWidth.setState(24,Xi.Intrinsic),t.iconHeight.setState(24,Xi.Intrinsic),t.iconColor.setState(this.getLookOr(Qt.mutedColor,null));else if(t.color.takesPrecedence(Xi.Intrinsic)){var i=this.getLookOr(this.highlighted.state?Qt.color:Qt.mutedColor,null);t.color.setState(i,Xi.Intrinsic)}},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=e.getOr(this.highlighted.state?Qt.color:Qt.mutedColor,i,null);if(this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var r=e.getOr(Qt.backgroundColor,i,null);null===r||this.highlighted.state||this.gesture.isHovering()||(r=r.alpha(0)),this.backgroundColor.setState(r,o,Xi.Intrinsic)}var s=this.icon.view;s instanceof Br&&s.iconColor.setState(n,o,1);var a=this.label.view;null!==a&&a.color.setState(n,o,Xi.Intrinsic);var l=this.accessory.view;l instanceof Br?l.iconColor.setState(n,o,Xi.Intrinsic):null!==l&&l.color.setState(n,o,Xi.Intrinsic)},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick)},e.prototype.onUnmount=function(){this.off("click",this.onClick),t.prototype.onUnmount.call(this)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e),this.lineHeight.setState(this.height.state,Xi.Intrinsic);var i=this.drawerStretch.value;if(void 0!==i){var o=this.label.view;null!==o&&(o.display.setState(0===i?"none":"block",Xi.Intrinsic),o.opacity.setState(i,Xi.Intrinsic));var n=this.accessory.view;null!==n&&(n.display.setState(0===i?"none":"block",Xi.Intrinsic),n.opacity.setState(i,Xi.Intrinsic))}},e.prototype.onLayout=function(i){t.prototype.onLayout.call(this,i);var o=this.edgeInsets.state;if(null!==o){var n=this.collapsedWidth.state;n=null!==n?n.pxValue():e.DefaultCollapsedWidth;var s=this.height.state;s=s instanceof r.Length?s.pxValue():this.clientBounds.height;var a=Math.max(0,(n-s)/2);this.paddingLeft.setState(Math.max(0,o.insetLeft-a),Xi.Intrinsic);var l=this.icon.view;null!==l&&(l.width.setState(n,Xi.Intrinsic),l.height.setState(this.height.state,Xi.Intrinsic));var u=this.label.view,h=this.accessory.view;null!==h?(h.paddingRight.setState(o.insetRight,Xi.Intrinsic),null!==u&&u.paddingRight.setState(null,Xi.Intrinsic)):null!==u&&u.paddingRight.setState(o.insetRight,Xi.Intrinsic)}},e.prototype.highlight=function(t){if(!this.highlighted.state){this.highlighted.setState(!0),this.modifyMood(re.default,[[re.selected,1],[re.hovering,void 0]]),t=!0===t?this.getLook(Qt.timing):a.Timing.fromAny(t),this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(this.getLookOr(Qt.backgroundColor,null),Xi.Intrinsic);var e=this.getLookOr(Qt.color,null),i=this.icon.view;i instanceof Br&&i.iconColor.setState(e,t);var o=this.label.view;null!==o&&o.color.takesPrecedence(Xi.Intrinsic)&&o.color.setState(e,t,Xi.Intrinsic);var n=this.accessory.view;n instanceof Br?n.iconColor.setState(e,t):null!==n&&n.color.takesPrecedence(Xi.Intrinsic)&&n.color.setState(e,t,Xi.Intrinsic)}return this},e.prototype.unhighlight=function(t){if(this.highlighted.state){if(this.highlighted.setState(!1),this.modifyMood(re.default,[[re.selected,void 0]]),t=!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var e=this.getLookOr(Qt.backgroundColor,null);null===e||this.gesture.isHovering()||(e=e.alpha(0)),this.backgroundColor.setState(e,t,Xi.Intrinsic)}var i=this.getLookOr(Qt.mutedColor,null),o=this.icon.view;o instanceof Br&&o.iconColor.setState(i,t,1);var n=this.label.view;null!==n&&n.color.takesPrecedence(Xi.Intrinsic)&&n.color.setState(i,t,Xi.Intrinsic);var r=this.accessory.view;r instanceof Br?r.iconColor.setState(i,t):null!==r&&r.color.takesPrecedence(Xi.Intrinsic)&&r.color.setState(i,t,Xi.Intrinsic)}return this},e.prototype.glow=function(e){this.highlighted.state||t.prototype.glow.call(this,e)},Object.defineProperty(e.prototype,"hovers",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setHovers=function(t){this.hovers!==t&&Object.defineProperty(this,"hovers",{value:t,configurable:!0,enumerable:!0})},e.prototype.didStartHovering=function(){if(!this.highlighted.state&&this.hovers&&(this.modifyMood(re.default,[[re.hovering,1]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic))){var t=!!this.gesture.isPressing()&&this.getLook(Qt.timing);this.backgroundColor.setState(this.getLookOr(Qt.backgroundColor,null),t,Xi.Intrinsic)}},e.prototype.didStopHovering=function(){if(this.modifyMood(re.default,[[re.hovering,void 0]]),this.backgroundColor.takesPrecedence(Xi.Intrinsic)){var t=this.getLookOr(Qt.backgroundColor,null);null===t||this.highlighted.state||(t=t.alpha(0));var e=this.getLook(Qt.timing);this.backgroundColor.setState(t,e,Xi.Intrinsic)}},e.prototype.onClick=function(t){t.stopPropagation();for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.listItemDidPress&&n.listItemDidPress(this)}var r=this.viewController;null!==r&&void 0!==r.listItemDidPress&&r.listItemDidPress(this);var s=this.parentView;s instanceof ha&&s.onPressItem(this)},e.DefaultCollapsedWidth=60,m([ho({type:Boolean,state:!1})],e.prototype,"highlighted",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([So({type:r.Length,inherit:!0,state:null})],e.prototype,"collapsedWidth",void 0),m([So({type:Number,inherit:!0,updateFlags:Xi.NeedsAnimate})],e.prototype,"drawerStretch",void 0),m([Lo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initIconView(t)},createView:function(){return this.owner.createIconView()},insertView:function(t,e,i,o){t.prependChildView(e,o)},fromAny:function(t){if(t instanceof Zn)return t;var e=this.owner.createIconView();return e.graphics.setState(t,Xi.Intrinsic),e}})],e.prototype,"icon",void 0),m([Lo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initLabelView(t)},createView:function(){return this.owner.createLabelView()},insertView:function(t,e,i,o){i=this.owner.accessory.view,t.insertChildView(e,i,o)},fromAny:function(t){if(t instanceof Zn)return t;if("string"==typeof t){var e=this.owner.createLabelView();return e.text(t),e}return null}})],e.prototype,"label",void 0),m([Lo({key:!0,type:Zn,onSetView:function(t){null!==t&&this.owner.initAccessoryView(t)},createView:function(){return this.owner.createAccessoryView()},insertView:function(t,e,i,o){t.appendChildView(e,o)},fromAny:function(t){return t instanceof Zn?t:"string"==typeof t?((e=this.owner.createAccessoryView()).text(t),e):((e=this.owner.createAccessoryIconView()).graphics.setState(t,Xi.Intrinsic),e);var e}})],e.prototype,"accessory",void 0),e}(Cs),da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.listItemDidPress=function(t){},e}(_n),ca=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"selectedItem",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.selectItem=function(t){var e=this.selectedItem;e!==t&&(this.willSelectItem(t,e),Object.defineProperty(this,"selectedItem",{value:t,enumerable:!0,configurable:!0}),this.onSelectItem(t,e),this.didSelectItem(t,e))},e.prototype.willSelectItem=function(t,e){},e.prototype.onSelectItem=function(t,e){null!==e&&e.unhighlight(!0),null!==t&&t.highlight(!1)},e.prototype.didSelectItem=function(t,e){},e.prototype.listDidPressItem=function(t,e){this.selectItem(t)},e}(_n),va=function(t){function e(i){var o=t.call(this,i)||this;return Object.defineProperty(o,"displayState",{value:e.HiddenState,enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),"undefined"!=typeof PointerEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("pointerup",o.onClick),o.on("click",o.onSyntheticClick)):"undefined"!=typeof TouchEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("touchend",o.onClick),o.on("click",o.onSyntheticClick)):o.on("click",o.onClick),o.initScrim(),o}return w(e,t),e.prototype.initScrim=function(){this.addClass("scrim"),this.display.setState("none",Xi.Intrinsic),this.position.setState("absolute",Xi.Intrinsic),this.top.setState(0,Xi.Intrinsic),this.right.setState(0,Xi.Intrinsic),this.bottom.setState(0,Xi.Intrinsic),this.left.setState(0,Xi.Intrinsic),this.pointerEvents.setState("auto",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic),this.backgroundColor.setState(St.black(0),Xi.Intrinsic)},e.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},e.prototype.isShown=function(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:return!0;default:return!1}},e.prototype.isHidden=function(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}},e.prototype.show=function(t,i){this.isHidden()&&(i=void 0===i||!0===i?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(i),this.setDisplayState(e.ShowState),!1!==i?(this.backgroundColor.setState(St.black(0),Xi.Intrinsic),this.backgroundColor.setState(St.black(t),i,Xi.Intrinsic)):(this.willShow(),this.backgroundColor.setState(St.black(t),Xi.Intrinsic),this.didShow()))},e.prototype.willShow=function(){this.setDisplayState(e.ShowingState),this.display.setState("block",Xi.Intrinsic)},e.prototype.didShow=function(){this.setDisplayState(e.ShownState)},e.prototype.hide=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(e.HideState),!1!==t?this.backgroundColor.setState(St.black(0),t,Xi.Intrinsic):(this.willHide(),this.backgroundColor.setState(St.black(0),Xi.Intrinsic),this.didHide()))},e.prototype.willHide=function(){this.setDisplayState(e.HidingState)},e.prototype.didHide=function(){this.setDisplayState(e.HiddenState),this.display.setState("none",Xi.Intrinsic)},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.modalService.manager;void 0!==e&&(e.addViewManagerObserver(this),this.modalManagerDidUpdateModality(e.modality,0,e))},e.prototype.onUnmount=function(){var e=this.modalService.manager;void 0!==e&&e.removeViewManagerObserver(this),this.hide(!1),t.prototype.onUnmount.call(this)},e.prototype.modalManagerDidUpdateModality=function(t,i,o){if(0!==t){var n=.5*t;0===i?this.show(n):(this.backgroundColor.setState(St.black(n),Xi.Intrinsic),this.displayState===e.ShowingState&&this.didShow())}else this.hide()},e.prototype.onClick=function(t){var e=this.modalService.manager;void 0!==e&&e.displaceModals(t)},e.prototype.onSyntheticClick=function(t){t.preventDefault(),t.stopPropagation()},e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,m([nn({propertyNames:"background-color",type:St,state:null,onBegin:function(t){var i=this.owner.displayState;i===e.ShowState?this.owner.willShow():i===e.HideState&&this.owner.willHide()},onEnd:function(t){var i=this.owner.displayState;i===e.ShowingState?this.owner.didShow():i===e.HidingState&&this.owner.didHide()}})],e.prototype,"backgroundColor",void 0),e}(Zn),fa=function(t){function i(e){var o=t.call(this,e)||this;return Object.defineProperty(o,"sourceFrame",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(o,"displayState",{value:i.HiddenState,enumerable:!0,configurable:!0}),Object.defineProperty(o,"modality",{value:!1,enumerable:!0,configurable:!0}),Object.defineProperty(o,"allowedPlacement",{value:["top","bottom","right","left"],enumerable:!0,configurable:!0}),Object.defineProperty(o,"currentPlacement",{value:"none",enumerable:!0,configurable:!0}),o.onClick=o.onClick.bind(o),o.initArrow(),o}return w(i,t),i.prototype.initArrow=function(){var t=this.createArrow();null!==t&&this.prependChildView(t,"arrow")},i.prototype.createArrow=function(){var t=Zn.create("div");return t.addClass("popover-arrow"),t.display.setState("none",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.width.setState(0,Xi.Intrinsic),t.height.setState(0,Xi.Intrinsic),t},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.source&&this.source.setView(e.source),void 0!==e.placement&&this.placement(e.placement),void 0!==e.placementFrame&&this.placementFrame(e.placementFrame),void 0!==e.arrowWidth&&this.arrowWidth(e.arrowWidth),void 0!==e.arrowHeight&&this.arrowHeight(e.arrowHeight)},i.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},i.prototype.initSourceView=function(t){},i.prototype.attachSourceView=function(t){},i.prototype.detachSourceView=function(t){},i.prototype.willSetSourceView=function(t,e){var i=this.viewController;null!==i&&void 0!==i.popoverWillSetSource&&i.popoverWillSetSource(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.popoverWillSetSource&&s.popoverWillSetSource(t,e,this)}},i.prototype.onSetSourceView=function(t,e){this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetSourceView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverDidSetSource&&r.popoverDidSetSource(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.popoverDidSetSource&&s.popoverDidSetSource(t,e,this)},i.prototype.setSource=function(t){this.source.setView(t)},Object.defineProperty(i.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){switch(this.displayState){case i.HiddenState:return"hidden";case i.HidingState:case i.HideState:return"hiding";case i.ShownState:return"shown";case i.ShowingState:case i.ShowState:return"showing";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),i.prototype.isShown=function(){switch(this.displayState){case i.ShownState:case i.ShowingState:case i.ShowState:return!0;default:return!1}},i.prototype.isHidden=function(){switch(this.displayState){case i.HiddenState:case i.HidingState:case i.HideState:return!0;default:return!1}},i.prototype.showModal=function(t,e){this.isHidden()&&(e=void 0===e||!0===e?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(e),void 0!==t.modal&&Object.defineProperty(this,"modality",{value:t.modal,enumerable:!0,configurable:!0}),this.setDisplayState(i.ShowState),!1!==e?this.displayPhase.setState(1,e):(this.willShow(),this.didShow()))},i.prototype.willShow=function(){this.setDisplayState(i.ShowingState);var t=this.viewController;null!==t&&void 0!==t.popoverWillShow&&t.popoverWillShow(this);for(var e=this.viewObservers,o=0,n=e.length;o<n;o+=1){var r=e[o];void 0!==r.popoverWillShow&&r.popoverWillShow(this)}this.place(),this.visibility.setState("visible",Xi.Intrinsic)},i.prototype.didShow=function(){this.setDisplayState(i.ShownState),this.pointerEvents.setState("auto",Xi.Intrinsic),this.marginTop.setState(null,Xi.Intrinsic),this.opacity.setState(void 0,Xi.Intrinsic);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidShow&&n.popoverDidShow(this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidShow&&r.popoverDidShow(this)},i.prototype.hideModal=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(i.HideState),!1!==t?this.displayPhase.setState(0,t):(this.willHide(),this.didHide()))},i.prototype.willHide=function(){this.setDisplayState(i.HidingState);var t=this.viewController;null!==t&&void 0!==t.popoverWillHide&&t.popoverWillHide(this);for(var e=this.viewObservers,o=0,n=e.length;o<n;o+=1){var r=e[o];void 0!==r.popoverWillHide&&r.popoverWillHide(this)}this.pointerEvents.setState("none",Xi.Intrinsic)},i.prototype.didHide=function(){this.setDisplayState(i.HiddenState),this.visibility.setState("hidden",Xi.Intrinsic),this.marginTop.setState(null,Xi.Intrinsic),this.opacity.setState(void 0,Xi.Intrinsic);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidHide&&n.popoverDidHide(this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidHide&&r.popoverDidHide(this)},i.prototype.placement=function(t){var i;return void 0===t?this.allowedPlacement:(e.Arrays.equal(this.allowedPlacement,t)||(this.allowedPlacement.length=0,(i=this.allowedPlacement).push.apply(i,t),this.place()),this)},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents()},i.prototype.onUnmount=function(){t.prototype.onUnmount.call(this),this.detachEvents()},i.prototype.attachEvents=function(){this.on("click",this.onClick)},i.prototype.detachEvents=function(){this.off("click",this.onClick)},i.prototype.needsProcess=function(t,e){return 0!=(t&(Xi.NeedsScroll|Xi.NeedsAnimate))&&this.requireUpdate(Xi.NeedsLayout),t},i.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e),void 0!==this.backgroundColor.takeUpdatedValue()&&this.place(!0);var o=this.displayState;o===i.ShowState?this.willShow():o===i.HideState?this.willHide():o!==i.ShowingState||this.displayPhase.isAnimating()?o!==i.HidingState||this.displayPhase.isAnimating()||this.didHide():this.didShow(),(this.displayPhase.isAnimating()||this.displayPhase.isUpdated())&&this.applyDisplayPhase(this.displayPhase.takeValue())},i.prototype.applyDisplayPhase=function(t){var e=this.currentPlacement;"above"===e?(this.opacity.setState(void 0,Xi.Intrinsic),this.marginTop.setState((1-t)*-this.node.clientHeight,Xi.Intrinsic)):"below"===e?(this.opacity.setState(void 0,Xi.Intrinsic),this.marginTop.setState((1-t)*this.node.clientHeight,Xi.Intrinsic)):(this.marginTop.setState(null,Xi.Intrinsic),this.opacity.setState(t,Xi.Intrinsic))},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.place()},i.prototype.place=function(t){void 0===t&&(t=!1);var e=this.source.view,i=this.sourceFrame,o=null!==e?e.popoverFrame:null;if(null===o||0===this.allowedPlacement.length||!t&&o.equals(i))return"none";Object.defineProperty(this,"newSourceFrame",{value:null,enumerable:!0,configurable:!0});var n=this.placePopover(e,o),r=this.getChildView("arrow");return r instanceof Zn&&this.placeArrow(e,o,r,n),n},i.prototype.placePopover=function(t,e){var i=this.node,o=i.offsetParent;if(null===o)return"none";for(var n,s=i.clientWidth,a=i.clientHeight,l=o.getBoundingClientRect(),u=l.left,h=l.top,p=e.left-window.pageXOffset-u,d=e.right-window.pageXOffset-u,c=e.top-window.pageYOffset-h,v=e.bottom-window.pageYOffset-h,f=e.width,y=e.height,g=p+f/2,w=c+y/2,m=this.placementFrame.state,b=null!==m?m.left:0,S=(null!==m?m.right:window.innerWidth)-u,C=null!==m?m.top:0,P=(null!==m?m.bottom:window.innerHeight)-h,V=p-b-window.pageXOffset,F=S-p-f,T=c-C-window.pageYOffset,D=P-c-y,M=this.dropdown.state,O=this.arrowHeight.getValue().pxValue(),x=this.placementGap.getValue().pxValue(),A=this.allowedPlacement,R=0,k=A.length;R<k;R+=1){if("above"===(I=A[R])||"below"===I||"over"===I){n=I;break}if("top"===I&&a+O+x<=T){n=I;break}if("bottom"===I&&a+O+x<=D){n=I;break}if("left"===I&&s+O+x<=V){n=I;break}if("right"===I&&s+O+x<=F){n=I;break}}if(void 0===n){n="none";for(R=0,k=A.length;R<k;R+=1){var I;if("top"===(I=A[R])&&T>=D){n=I;break}if("bottom"===I&&D>=T){n=I;break}if("left"===I&&V>=F){n=I;break}if("right"===I&&F>=V){n=I;break}}}var L=i.offsetLeft,j=i.offsetTop,W=null,E=null,N=this.width.state;N=N instanceof r.Length?N.pxValue():null;var G=this.height.state,U=N,B=G=G instanceof r.Length?G.pxValue():null,H=this.maxWidth.state;H=H instanceof r.Length?H.pxValue():null;var z=this.maxHeight.state,q=H,Y=z=z instanceof r.Length?z.pxValue():null;return"above"===n?(L=Math.round(b),j=Math.round(C),W=Math.round((null!==m?m.width:window.innerWidth)-S),U=Math.round(Math.max(0,S-b)),B=null,q=null,Y=Math.round(Math.max(0,P-C))):"below"===n?(L=Math.round(b),j=Math.round(P-a),W=Math.round(S-(null!==m?m.width:window.innerWidth)),U=Math.round(Math.max(0,S-b)),B=null,q=null,Y=Math.round(Math.max(0,P-C))):"over"===n?(L=Math.round(b),j=Math.round(C),W=Math.round(S-(null!==m?m.width:window.innerWidth)),E=Math.round(P-(null!==m?m.height:window.innerHeight)),U=Math.round(Math.max(0,S-b)),B=Math.round(Math.max(0,P-C)),q=null,Y=null):"top"!==n||M?"bottom"!==n||M?"left"!==n||M?"right"!==n||M?"top"===n&&M?(L=Math.max(b,p),j=Math.round(Math.max(C,c-(a+x))),U=Math.round(Math.max(0,Math.min(f,S-p))),B=null,q=Math.round(Math.max(0,S-b)),Y=Math.round(Math.max(0,v-C))):"bottom"===n&&M?(L=Math.max(b,p),j=Math.round(Math.max(C,v+x)),U=Math.round(Math.max(0,Math.min(f,S-p))),B=null,q=Math.round(Math.max(0,S-b)),Y=Math.round(Math.max(0,P-c))):"left"===n&&M?(L=Math.round(Math.max(b,p-(s+x))),j=Math.max(C,c),U=null,B=Math.round(Math.max(0,Math.min(y,P-c))),q=Math.round(Math.max(0,d-b)),Y=Math.round(Math.max(0,P-C))):"right"===n&&M&&(L=Math.round(Math.max(b,d+x)),j=Math.max(C,c),U=null,B=Math.round(Math.max(0,Math.min(y,P-c))),q=Math.round(Math.max(0,S-p)),Y=Math.round(Math.max(0,P-C))):(L=Math.round(Math.max(b,d+O+x)),j=w-a/2<=C?Math.round(C):w+a/2>=P?Math.round(P-a):Math.round(w-a/2),q=Math.round(Math.max(0,S-p)),Y=Math.round(Math.max(0,P-C))):(L=Math.round(Math.max(b,p-(s+O+x))),j=w-a/2<=C?Math.round(C):w+a/2>=P?Math.round(P-a):Math.round(w-a/2),q=Math.round(Math.max(0,d-b)),Y=Math.round(Math.max(0,P-C))):(L=g-s/2<=b?Math.round(b):g+s/2>=S?Math.round(S-s):Math.round(g-s/2),j=Math.round(Math.max(C,v+O+x)),q=Math.round(Math.max(0,S-b)),Y=Math.round(Math.max(0,P-c))):(L=g-s/2<=b?Math.round(b):g+s/2>=S?Math.round(S-s):Math.round(g-s/2),j=Math.round(Math.max(C,c-(a+O+x))),q=Math.round(Math.max(0,S-b)),Y=Math.round(Math.max(0,v-C))),"none"!==n&&(L!==i.offsetLeft&&this.left.takesPrecedence(Xi.Intrinsic)||j!==i.offsetTop&&this.top.takesPrecedence(Xi.Intrinsic)||U!==N&&this.width.takesPrecedence(Xi.Intrinsic)||B!==G&&this.height.takesPrecedence(Xi.Intrinsic)||q!==H&&this.maxWidth.takesPrecedence(Xi.Intrinsic)||Y!==z&&this.maxHeight.takesPrecedence(Xi.Intrinsic))&&(this.willPlacePopover(n),this.position.setState("absolute",Xi.Intrinsic),this.left.setState(L,Xi.Intrinsic),this.right.setState(W,Xi.Intrinsic),this.top.setState(j,Xi.Intrinsic),this.bottom.setState(E,Xi.Intrinsic),this.width.setState(U,Xi.Intrinsic),this.height.setState(B,Xi.Intrinsic),this.maxWidth.setState(q,Xi.Intrinsic),this.maxHeight.setState(Y,Xi.Intrinsic),this.onPlacePopover(n),this.didPlacePopover(n)),Object.defineProperty(this,"currentPlacement",{value:n,enumerable:!0,configurable:!0}),n},i.prototype.willPlacePopover=function(t){var e=this.viewController;null!==e&&void 0!==e.popoverWillPlace&&e.popoverWillPlace(t,this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverWillPlace&&r.popoverWillPlace(t,this)}},i.prototype.onPlacePopover=function(t){},i.prototype.didPlacePopover=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.popoverDidPlace&&n.popoverDidPlace(t,this)}var r=this.viewController;null!==r&&void 0!==r.popoverDidPlace&&r.popoverDidPlace(t,this)},i.prototype.placeArrow=function(t,e,i,o){var n=this.node,s=n.offsetParent;if(null!==s){var a=s.getBoundingClientRect(),l=a.left,u=a.top,h=e.left-window.pageXOffset-l,p=e.top-window.pageYOffset-u,d=h+e.width/2,c=p+e.height/2,v=n.offsetLeft,f=v+n.clientWidth,y=n.offsetTop,g=y+n.clientHeight,w=this.backgroundColor.value;null===w&&(w=St.transparent());var m=this.borderRadius(),b=m instanceof r.Length?m.pxValue():0,S=this.arrowWidth.getValue().pxValue(),C=this.arrowHeight.getValue().pxValue(),P=v+b+S/2,V=f-b-S/2,F=y+b+S/2,T=g-b-S/2;i.top.setState(null,Xi.Intrinsic),i.right.setState(null,Xi.Intrinsic),i.bottom.setState(null,Xi.Intrinsic),i.left.setState(null,Xi.Intrinsic),i.borderLeftWidth.setState(null,Xi.Intrinsic),i.borderLeftStyle.setState(void 0,Xi.Intrinsic),i.borderLeftColor.setState(null,Xi.Intrinsic),i.borderRightWidth.setState(null,Xi.Intrinsic),i.borderRightStyle.setState(void 0,Xi.Intrinsic),i.borderRightColor.setState(null,Xi.Intrinsic),i.borderTopWidth.setState(null,Xi.Intrinsic),i.borderTopStyle.setState(void 0,Xi.Intrinsic),i.borderTopColor.setState(null,Xi.Intrinsic),i.borderBottomWidth.setState(null,Xi.Intrinsic),i.borderBottomStyle.setState(void 0,Xi.Intrinsic),i.borderBottomColor.setState(null,Xi.Intrinsic),i.zIndex.setState(100,Xi.Intrinsic),"none"===o||"above"===o||"below"===o||"over"===o?i.display.setState("none",Xi.Intrinsic):Math.round(c)<=Math.round(y-C)&&P<=d&&d<=V?(i.display.setState("block",Xi.Intrinsic),i.top.setState(Math.round(-C),Xi.Intrinsic),i.left.setState(Math.round(d-v-S/2),Xi.Intrinsic),i.borderLeftWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderLeftStyle.setState("solid",Xi.Intrinsic),i.borderLeftColor.setState(St.transparent(),Xi.Intrinsic),i.borderRightWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderRightStyle.setState("solid",Xi.Intrinsic),i.borderRightColor.setState(St.transparent(),Xi.Intrinsic),i.borderBottomWidth.setState(Math.round(C),Xi.Intrinsic),i.borderBottomStyle.setState("solid",Xi.Intrinsic),i.borderBottomColor.setState(w,Xi.Intrinsic)):Math.round(g+C)<=Math.round(c)&&P<=d&&d<=V?(i.display.setState("block",Xi.Intrinsic),i.bottom.setState(Math.round(-C),Xi.Intrinsic),i.left.setState(Math.round(d-v-S/2),Xi.Intrinsic),i.borderLeftWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderLeftStyle.setState("solid",Xi.Intrinsic),i.borderLeftColor.setState(St.transparent(),Xi.Intrinsic),i.borderRightWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderRightStyle.setState("solid",Xi.Intrinsic),i.borderRightColor.setState(St.transparent(),Xi.Intrinsic),i.borderTopWidth.setState(Math.round(C),Xi.Intrinsic),i.borderTopStyle.setState("solid",Xi.Intrinsic),i.borderTopColor.setState(w,Xi.Intrinsic)):Math.round(d)<=Math.round(v-C)&&F<=c&&c<=T?(i.display.setState("block"),i.left.setState(Math.round(-C),Xi.Intrinsic),i.top.setState(Math.round(c-y-S/2),Xi.Intrinsic),i.borderTopWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderTopStyle.setState("solid",Xi.Intrinsic),i.borderTopColor.setState(St.transparent(),Xi.Intrinsic),i.borderBottomWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderBottomStyle.setState("solid",Xi.Intrinsic),i.borderBottomColor.setState(St.transparent(),Xi.Intrinsic),i.borderRightWidth.setState(Math.round(C),Xi.Intrinsic),i.borderRightStyle.setState("solid",Xi.Intrinsic),i.borderRightColor.setState(w,Xi.Intrinsic)):Math.round(f+C)<=Math.round(d)&&F<=c&&c<=T?(i.display.setState("block",Xi.Intrinsic),i.right.setState(Math.round(-C),Xi.Intrinsic),i.top.setState(Math.round(c-y-S/2),Xi.Intrinsic),i.borderTopWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderTopStyle.setState("solid",Xi.Intrinsic),i.borderTopColor.setState(St.transparent(),Xi.Intrinsic),i.borderBottomWidth.setState(Math.round(S/2),Xi.Intrinsic),i.borderBottomStyle.setState("solid",Xi.Intrinsic),i.borderBottomColor.setState(St.transparent(),Xi.Intrinsic),i.borderLeftWidth.setState(Math.round(C),Xi.Intrinsic),i.borderLeftStyle.setState("solid",Xi.Intrinsic),i.borderLeftColor.setState(w,Xi.Intrinsic)):i.display.setState("none",Xi.Intrinsic)}},i.prototype.onClick=function(t){t.stopPropagation()},i.SourceFastener=Lo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetSourceView(t,e)},onSetView:function(t,e,i){null!==e&&this.owner.detachSourceView(e),this.owner.onSetSourceView(t,e),null!==t&&(this.owner.attachSourceView(t),this.owner.initSourceView(t))},didSetView:function(t,e,i){this.owner.didSetSourceView(t,e)},viewDidMount:function(t){this.owner.place()},viewDidPower:function(t){this.owner.place()},viewDidResize:function(t,e){this.owner.place()},viewDidScroll:function(t,e){this.owner.place()},viewDidAnimate:function(t,e){this.owner.place()},viewDidLayout:function(t,e){this.owner.place()},viewDidProject:function(t,e){this.owner.place()},viewDidSetAttribute:function(t,e,i){this.owner.place()},viewDidSetStyle:function(t,e,i,o){this.owner.place()}}),i.HiddenState=0,i.HidingState=1,i.HideState=2,i.ShownState=3,i.ShowingState=4,i.ShowState=5,m([So({type:Number,state:0})],i.prototype,"displayPhase",void 0),m([So({type:r.Length,state:r.Length.zero()})],i.prototype,"placementGap",void 0),m([So({type:r.Length,state:r.Length.px(10)})],i.prototype,"arrowWidth",void 0),m([So({type:r.Length,state:r.Length.px(8)})],i.prototype,"arrowHeight",void 0),m([Lo({extends:i.SourceFastener})],i.prototype,"source",void 0),m([ho({type:r.R2Box,state:null,didSetState:function(t){this.owner.place()},fromAny:function(t){return null!==t?r.R2Box.fromAny(t):null}})],i.prototype,"placementFrame",void 0),m([ho({type:Boolean,state:!1,didSetState:function(t){this.owner.place()}})],i.prototype,"dropdown",void 0),i}(Zn),ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"sourceView",{get:function(){var t=this.view;return null!==t?t.source.view:null},enumerable:!1,configurable:!0}),e.prototype.popoverWillSetSource=function(t,e,i){},e.prototype.popoverDidSetSource=function(t,e,i){},e.prototype.popoverWillPlace=function(t,e){},e.prototype.popoverDidPlace=function(t,e){},e.prototype.popoverWillShow=function(t){},e.prototype.popoverDidShow=function(t){},e.prototype.popoverWillHide=function(t){},e.prototype.popoverDidHide=function(t){},e}(_n),ga=function(t){function e(i){var o=t.call(this,i)||this;return Object.defineProperty(o,"displayState",{value:e.HiddenState,enumerable:!0,configurable:!0}),Object.defineProperty(o,"placement",{value:"left",enumerable:!0,configurable:!0}),Object.defineProperty(o,"modality",{value:!0,enumerable:!0,configurable:!0}),o.initDrawer(),o.initTheme(),o}return w(e,t),e.prototype.initDrawer=function(){this.addClass("drawer"),this.display.setState("none",Xi.Intrinsic),this.flexDirection.setState("column",Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("auto",Xi.Intrinsic),this.overscrollBehaviorY.setState("contain",Xi.Intrinsic),this.overflowScrolling.setState("touch",Xi.Intrinsic)},e.prototype.initTheme=function(){this.modifyTheme(re.default,[[re.raised,1]])},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.drawerPlacement&&this.drawerPlacement(e.drawerPlacement),void 0!==e.collapsedWidth&&this.collapsedWidth(e.collapsedWidth),void 0!==e.expandedWidth&&this.expandedWidth(e.expandedWidth)},e.prototype.setDisplayState=function(t){Object.defineProperty(this,"displayState",{value:t,enumerable:!0,configurable:!0})},Object.defineProperty(e.prototype,"drawerState",{get:function(){switch(this.displayState){case e.HiddenState:return"hidden";case e.HidingState:case e.HideState:return"hiding";case e.ShownState:return"shown";case e.ShowingState:case e.ShowState:return"showing";case e.CollapsedState:return"collapsed";case e.CollapsingState:case e.CollapseState:return"collapsing";case e.ExpandingState:case e.ExpandState:return"shown";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),e.prototype.isShown=function(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:case e.ExpandingState:case e.ExpandState:return!0;default:return!1}},e.prototype.isHidden=function(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}},e.prototype.isCollapsed=function(){switch(this.displayState){case e.CollapsedState:case e.CollapsingState:case e.CollapseState:return!0;default:return!1}},e.prototype.drawerPlacement=function(t){var e=this.placement;return void 0===t?e:(e!==t&&(this.willSetDrawerPlacement(t,e),Object.defineProperty(this,"placement",{value:t,enumerable:!0,configurable:!0}),this.onSetDrawerPlacement(t,e),this.didSetDrawerPlacement(t,e)),this)},e.prototype.isHorizontal=function(){return"top"===this.placement||"bottom"===this.placement},e.prototype.isVertical=function(){return"left"===this.placement||"right"===this.placement},e.prototype.willSetDrawerPlacement=function(t,e){var i=this.viewController;null!==i&&void 0!==i.drawerWillSetPlacement&&i.drawerWillSetPlacement(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.drawerWillSetPlacement&&s.drawerWillSetPlacement(t,e,this)}},e.prototype.onSetDrawerPlacement=function(t,e){this.requireUpdate(Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout)},e.prototype.didSetDrawerPlacement=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerDidSetPlacement&&r.drawerDidSetPlacement(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.drawerDidSetPlacement&&s.drawerDidSetPlacement(t,e,this)},e.prototype.updateDrawerSlide=function(t){var e=this.placement;"top"===e?this.updateDrawerSlideTop(t):"right"===e?this.updateDrawerSlideRight(t):"bottom"===e?this.updateDrawerSlideBottom(t):"left"===e&&this.updateDrawerSlideLeft(t)},e.prototype.updateDrawerSlideTop=function(t){var e=this.height.value;e=e instanceof r.Length?e.pxValue():this.node.offsetHeight,this.top.setState(r.Length.px((t-1)*e),Xi.Intrinsic),this.effectiveWidth.setState(this.width.value),this.effectiveHeight.setState(r.Length.px(t*e),Xi.Intrinsic)},e.prototype.updateDrawerSlideRight=function(t){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth,this.right.setState(r.Length.px((t-1)*e),Xi.Intrinsic),this.effectiveWidth.setState(r.Length.px(t*e),Xi.Intrinsic),this.effectiveHeight.setState(this.height.value,Xi.Intrinsic)},e.prototype.updateDrawerSlideBottom=function(t){var e=this.height.value;e=e instanceof r.Length?e.pxValue():this.node.offsetHeight,this.bottom.setState(r.Length.px((t-1)*e),Xi.Intrinsic),this.effectiveWidth.setState(this.width.value,Xi.Intrinsic),this.effectiveHeight.setState(r.Length.px(t*e),Xi.Intrinsic)},e.prototype.updateDrawerSlideLeft=function(t){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth,this.left.setState(r.Length.px((t-1)*e),Xi.Intrinsic),this.effectiveWidth.setState(r.Length.px(t*e),Xi.Intrinsic),this.effectiveHeight.setState(this.height.value,Xi.Intrinsic)},e.prototype.updateDrawerStretch=function(t){if(this.isVertical()){var e=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue(),o=e.times(1-t).plus(i.times(t));this.width.setState(o,Xi.Intrinsic),this.effectiveWidth.setState(o,Xi.Intrinsic)}},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(e.getOr(Qt.backgroundColor,i,null),o,Xi.Intrinsic)},e.prototype.onAnimate=function(i){var o=this.displayState;o===e.ShowState?this.willShow():o===e.HideState?this.willHide():o===e.ExpandState?this.willExpand():o===e.CollapseState&&this.willCollapse(),t.prototype.onAnimate.call(this,i);var n=this.drawerStretch.takeUpdatedValue();void 0!==n&&this.updateDrawerStretch(n);var r=this.drawerSlide.takeUpdatedValue();void 0!==r&&this.updateDrawerSlide(r)},e.prototype.didAnimate=function(i){var o=this.displayState,n=this.drawerStretch.value,r=this.drawerSlide.value;o===e.ShowingState&&1===r?this.didShow():o===e.HidingState&&0===r?this.didHide():o===e.ExpandingState&&1===n?this.didExpand():o===e.CollapsingState&&0===n&&this.didCollapse(),t.prototype.didAnimate.call(this,i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.place(e),"mobile"===e.viewIdiom?this.boxShadow.setState(this.getLookOr(Qt.shadow,he.floating,null),Xi.Intrinsic):this.boxShadow.setState(this.getLookOr(Qt.shadow,null),Xi.Intrinsic)},e.prototype.place=function(t){var e=this.placement;"top"===e?this.placeTop(t):"right"===e?this.placeRight(t):"bottom"===e?this.placeBottom(t):"left"===e&&this.placeLeft(t)},e.prototype.placeTop=function(t){this.addClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",Xi.Intrinsic),this.width.setState(null,Xi.Intrinsic),this.height.setState(null,Xi.Intrinsic),this.top.setState(null,Xi.Intrinsic),this.right.setState(r.Length.zero(),Xi.Intrinsic),this.bottom.setState(null,Xi.Intrinsic),this.left.setState(r.Length.zero(),Xi.Intrinsic),this.updateDrawerSlideTop(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.edgeInsets.setState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:e.insetLeft},Xi.Intrinsic),this.isCollapsed()&&this.expand()},e.prototype.placeRight=function(t){this.removeClass("drawer-top").addClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",Xi.Intrinsic),this.width.setState(null,Xi.Intrinsic),this.height.setState(null,Xi.Intrinsic),this.top.setState(r.Length.zero(),Xi.Intrinsic),this.right.setState(null,Xi.Intrinsic),this.bottom.setState(r.Length.zero(),Xi.Intrinsic),this.left.setState(null,Xi.Intrinsic),this.updateDrawerStretch(this.drawerStretch.getValue()),this.updateDrawerSlideRight(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.paddingTop.setState(r.Length.px(e.insetTop),Xi.Intrinsic),this.paddingBottom.setState(r.Length.px(e.insetBottom),Xi.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:0},Xi.Intrinsic)},e.prototype.placeBottom=function(t){this.removeClass("drawer-top").removeClass("drawer-right").addClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",Xi.Intrinsic),this.width.setState(null,Xi.Intrinsic),this.height.setState(null,Xi.Intrinsic),this.top.setState(null,Xi.Intrinsic),this.right.setState(r.Length.zero(),Xi.Intrinsic),this.bottom.setState(null,Xi.Intrinsic),this.left.setState(r.Length.zero(),Xi.Intrinsic),this.updateDrawerSlideBottom(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.edgeInsets.setState({insetTop:0,insetRight:e.insetRight,insetBottom:0,insetLeft:e.insetLeft},Xi.Intrinsic),this.isCollapsed()&&this.expand()},e.prototype.placeLeft=function(t){this.removeClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").addClass("drawer-left"),this.position.setState("fixed",Xi.Intrinsic),this.width.setState(null,Xi.Intrinsic),this.height.setState(null,Xi.Intrinsic),this.top.setState(r.Length.zero(),Xi.Intrinsic),this.right.setState(null,Xi.Intrinsic),this.bottom.setState(r.Length.zero(),Xi.Intrinsic),this.left.setState(null,Xi.Intrinsic),this.updateDrawerStretch(this.drawerStretch.getValue()),this.updateDrawerSlideLeft(this.drawerSlide.getValue());var e=this.edgeInsets.superState;null!=e&&null!==e||(e=t.viewport.safeArea),this.paddingTop.setState(r.Length.px(e.insetTop),Xi.Intrinsic),this.paddingBottom.setState(r.Length.px(e.insetBottom),Xi.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:e.insetLeft},Xi.Intrinsic)},Object.defineProperty(e.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalState",{get:function(){switch(this.displayState){case e.HiddenState:return"hidden";case e.HidingState:case e.HideState:return"hiding";case e.ShownState:return"shown";case e.ShowingState:case e.ShowState:return"showing";case e.CollapsedState:case e.CollapsingState:case e.CollapseState:case e.ExpandingState:case e.ExpandState:return"shown";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),e.prototype.showModal=function(t,e){void 0!==t.modal&&Object.defineProperty(this,"modality",{value:t.modal,enumerable:!0,configurable:!0}),this.show(e)},e.prototype.hideModal=function(t){this.hide(t)},e.prototype.show=function(t){this.isShown()&&1===this.drawerSlide.value&&1===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(e.ShowState),!1!==t?(this.drawerStretch.setState(1,t,Xi.Intrinsic),this.drawerSlide.setState(1,t,Xi.Intrinsic)):(this.willShow(),this.drawerStretch.setState(1,Xi.Intrinsic),this.drawerSlide.setState(1,Xi.Intrinsic),this.didShow()))},e.prototype.willShow=function(){this.setDisplayState(e.ShowingState);var t=this.viewController;null!==t&&void 0!==t.drawerWillShow&&t.drawerWillShow(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillShow&&r.drawerWillShow(this)}this.display.setState("flex",Xi.Intrinsic),this.place(this.viewContext)},e.prototype.didShow=function(){this.setDisplayState(e.ShownState),this.requireUpdate(Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidShow&&n.drawerDidShow(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidShow&&r.drawerDidShow(this)},e.prototype.hide=function(t){this.isHidden()&&0===this.drawerSlide.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(e.HideState),!1!==t?this.drawerSlide.setState(0,t,Xi.Intrinsic):(this.willHide(),this.drawerSlide.setState(0,Xi.Intrinsic),this.didHide()))},e.prototype.willHide=function(){this.setDisplayState(e.HidingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillHide&&t.drawerWillHide(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillHide&&r.drawerWillHide(this)}},e.prototype.didHide=function(){this.setDisplayState(e.HiddenState),this.requireUpdate(Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout),this.display.setState("none",Xi.Intrinsic);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidHide&&n.drawerDidHide(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidHide&&r.drawerDidHide(this)},e.prototype.expand=function(t){this.isShown()&&1===this.drawerSlide.value&&1===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(e.ExpandState),!1!==t?1!==this.drawerStretch.value?(this.drawerSlide.setState(1,t,Xi.Intrinsic),this.drawerStretch.setState(1,t,Xi.Intrinsic)):this.drawerSlide.setState(1,t,Xi.Intrinsic):(this.willExpand(),this.drawerSlide.setState(1,Xi.Intrinsic),this.drawerStretch.setState(1,Xi.Intrinsic),this.didExpand()))},e.prototype.willExpand=function(){this.setDisplayState(e.ExpandingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillExpand&&t.drawerWillExpand(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillExpand&&r.drawerWillExpand(this)}},e.prototype.didExpand=function(){this.setDisplayState(e.ShownState),this.requireUpdate(Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidExpand&&n.drawerDidExpand(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidExpand&&r.drawerDidExpand(this)},e.prototype.collapse=function(t){!this.isVertical()||this.isCollapsed()&&1===this.drawerSlide.value&&0===this.drawerStretch.value||(t=void 0===t||!0===t?this.getLookOr(Qt.timing,!1):a.Timing.fromAny(t),this.setDisplayState(e.CollapseState),0===this.drawerSlide.value&&this.drawerStretch.setState(0,Xi.Intrinsic),!1!==t?0!==this.drawerStretch.value?(this.drawerSlide.setState(1,t,Xi.Intrinsic),this.drawerStretch.setState(0,t,Xi.Intrinsic)):this.drawerSlide.setState(1,t,Xi.Intrinsic):(this.willCollapse(),this.drawerSlide.setState(1,Xi.Intrinsic),this.drawerStretch.setState(0,Xi.Intrinsic),this.didCollapse()))},e.prototype.willCollapse=function(){this.setDisplayState(e.CollapsingState),this.modalService.dismissModal(this);var t=this.viewController;null!==t&&void 0!==t.drawerWillCollapse&&t.drawerWillCollapse(this);for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.drawerWillCollapse&&r.drawerWillCollapse(this)}this.display.setState("flex",Xi.Intrinsic)},e.prototype.didCollapse=function(){this.setDisplayState(e.CollapsedState),this.requireUpdate(Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout);for(var t=this.viewObservers,i=0,o=t.length;i<o;i+=1){var n=t[i];void 0!==n.drawerDidCollapse&&n.drawerDidCollapse(this)}var r=this.viewController;null!==r&&void 0!==r.drawerDidCollapse&&r.drawerDidCollapse(this)},e.prototype.toggle=function(t){var e=this.drawerState;"mobile"!==this.viewIdiom||"hidden"!==e&&"hiding"!==e?"hidden"===e||"hiding"===e?this.show(t):"collapsed"===e||"collapsing"===e?this.expand(t):"mobile"===this.viewIdiom?this.hide(t):this.collapse(t):this.modalService.presentModal(this,{modal:!0})},e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e.CollapsedState=6,e.CollapsingState=7,e.CollapseState=8,e.ExpandingState=9,e.ExpandState=10,m([Po({type:r.Length,state:r.Length.px(60)})],e.prototype,"collapsedWidth",void 0),m([Po({type:r.Length,state:r.Length.px(200)})],e.prototype,"expandedWidth",void 0),m([So({type:Number,state:0,updateFlags:Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout})],e.prototype,"drawerSlide",void 0),m([So({type:Number,state:1,updateFlags:Xi.NeedsResize|Xi.NeedsAnimate|Xi.NeedsLayout})],e.prototype,"drawerStretch",void 0),m([co({type:r.Length,state:null})],e.prototype,"effectiveWidth",void 0),m([co({type:r.Length,state:null})],e.prototype,"effectiveHeight",void 0),m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),e}(Zn),wa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.drawerWillSetPlacement=function(t,e,i){},e.prototype.drawerDidSetPlacement=function(t,e,i){},e.prototype.drawerWillShow=function(t){},e.prototype.drawerDidShow=function(t){},e.prototype.drawerWillHide=function(t){},e.prototype.drawerDidHide=function(t){},e.prototype.drawerWillExpand=function(t){},e.prototype.drawerDidExpand=function(t){},e.prototype.drawerWillCollapse=function(t){},e.prototype.drawerDidCollapse=function(t){},e}(_n),ma=function(t){function i(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"drawerView",{value:null,enumerable:!0,configurable:!0}),i.initIcon(),i}return w(i,t),i.prototype.initButton=function(){t.prototype.initButton.call(this),this.addClass("drawer-button")},i.prototype.initIcon=function(){this.pushIcon(i.hamburgerIcon)},i.prototype.setDrawerView=function(t){Object.defineProperty(this,"drawerView",{value:t,enumerable:!0,configurable:!0})},i.prototype.onClick=function(e){t.prototype.onClick.call(this,e);var i=this.drawerView;null!==i&&i.toggle()},Object.defineProperty(i,"hamburgerIcon",{get:function(){return xr.create(24,24,"M21,17L21,19L3,19L3,17L21,17ZM21,11L21,13L3,13L3,11L21,11ZM3,5L3,7L21,7L21,5L3,5Z")},enumerable:!1,configurable:!0}),m([e.Lazy],i,"hamburgerIcon",null),i}(Ds),ba=function(){function t(t,e,i,o,n,r,s){Object.defineProperty(this,"key",{value:t,enumerable:!0}),Object.defineProperty(this,"grow",{value:e,enumerable:!0}),Object.defineProperty(this,"shrink",{value:i,enumerable:!0}),Object.defineProperty(this,"basis",{value:o,enumerable:!0}),Object.defineProperty(this,"width",{value:n,enumerable:!0}),Object.defineProperty(this,"left",{value:r,enumerable:!0}),Object.defineProperty(this,"right",{value:s,enumerable:!0})}return t.prototype.withGrow=function(t){return this.copy(this.key,t,this.shrink,this.basis,this.width,this.left,this.right)},t.prototype.withShrink=function(t){return this.copy(this.key,this.grow,t,this.basis,this.width,this.left,this.right)},t.prototype.withBasis=function(t){return t=r.Length.fromAny(t),this.copy(this.key,this.grow,this.shrink,t,this.width,this.left,this.right)},t.prototype.resized=function(t,e,i){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),this.copy(this.key,this.grow,this.shrink,this.basis,t,e,i)},t.prototype.copy=function(e,i,o,n,r,s,a){return new t(e,i,o,n,r,s,a)},t.prototype.equivalentTo=function(e,i){return this===e||e instanceof t&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right))},t.prototype.debug=function(t){t=t.write("DeckPost").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),null===this.width&&null===this.left&&null===this.right||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n){return void 0===i&&(i=0),void 0===o&&(o=1),new t(e,i,o,n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),null,null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var s=e.basis;s=void 0!==s?r.Length.fromAny(s):r.Length.zero();var a=e.width;a=null!=a?r.Length.fromAny(a):null;var l=e.left;l=null!=l?r.Length.fromAny(l):null;var u=e.right;return new t(i,o,n,s,a,l,u=null!=u?r.Length.fromAny(u):null)},t}(),Sa=function(){function t(t,e,i,o,n){Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"left",{value:e,enumerable:!0}),Object.defineProperty(this,"right",{value:i,enumerable:!0}),Object.defineProperty(this,"spacing",{value:o,enumerable:!0}),Object.defineProperty(this,"posts",{value:n,enumerable:!0})}return t.prototype.lookupPost=function(t){for(var e=this.posts,i=0,o=e.length;i<o;i+=1){if(t===e[i].key)return i}},t.prototype.getPost=function(t){var e=this.posts;if("number"==typeof t){if(void 0!==(n=e[t]))return n}else if("string"==typeof t)for(var i=0,o=e.length;i<o;i+=1){var n;if(t===(n=e[i]).key)return n}return null},t.prototype.resized=function(i,o,n,s){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===s?s=this.spacing:null!==s&&(s=r.Length.fromAny(s)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.spacing,s))return this;for(var a=this.posts,l=a.length,u=new Array(l),h=i.pxValue(),p=null!==o?o.pxValue(h):0,d=null!==n?n.pxValue(h):0,c=null!==s?s.pxValue(h):0,v=0,f=0,y=p+d,g=p,w=0;w<l;w+=1){0!==w&&(y+=c,g+=c);var m=(V=a[w]).basis.pxValue(h);u[w]=V.resized(m,g,h-m-g),v+=V.grow,f+=V.shrink,y+=m,g+=m}if(y<h&&v>0){var b=h-y,S=p,C=0;for(w=0;w<l;w+=1){0!==C&&(y+=c,S+=c);m=(V=u[w]).basis.pxValue(h)+b*(V.grow/v);u[w]=V.resized(m,S,h-m-S),S+=m,C+=1}}else if(y>h&&f>0){b=y-h;var P=p;for(C=0,w=0;w<l;w+=1){var V;0!==C&&(y+=c,P+=c);m=(V=u[w]).basis.pxValue(h)-b*(V.shrink/f);u[w]=V.resized(m,P,h-m-P),P+=m,C+=1}}return new t(i,o,n,s,u)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.posts,n=e.posts,r=o.length;if(r===n.length){for(var s=0;s<r;s+=1)if(!o[s].equivalentTo(n[s],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.spacing,i.spacing)&&e.Arrays.equal(this.posts,i.posts))},t.prototype.debug=function(t){t=t.write("DeckRail").write(46).write("of").write(40);for(var e=0,i=this.posts.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.posts[e]);t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41))},t.prototype.toString=function(){return s.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=ba.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var s,a=e.spacing;if(a=null!=a?r.Length.fromAny(a):null,void 0!==e.posts){var l=e.posts.length;s=new Array(l);for(var u=0;u<l;u+=1)s[u]=ba.fromAny(e.posts[u])}else s=[];return new t(i,o,n,a,s)},t}(),Ca=function(t){function e(e){var i=t.call(this,e)||this;return i.initSlot(),i}return w(e,t),e.prototype.initSlot=function(){this.addClass("deck-slot")},m([ho({type:ba,state:null,inherit:!0})],e.prototype,"post",void 0),m([ho({type:ba,state:null})],e.prototype,"nextPost",void 0),m([ho({type:ba,state:null})],e.prototype,"prevPost",void 0),e}(Zn),Pa=function(t){function e(e){var i=t.call(this,e)||this;return i.itemCount=0,i.item=null,i.initSlider(),i}return w(e,t),e.prototype.initSlider=function(){this.addClass("deck-slider"),this.position.setState("relative",Xi.Intrinsic)},Object.defineProperty(e.prototype,"colorLook",{get:function(){return Qt.color},enumerable:!1,configurable:!0}),e.prototype.createItem=function(t){var e=Zn.span.create();return e.display.setState("flex",Xi.Intrinsic),e.alignItems.setState("center",Xi.Intrinsic),e.whiteSpace.setState("nowrap",Xi.Intrinsic),e.text(t),e},e.prototype.pushItem=function(t,e){"string"==typeof t&&(t=this.createItem(t));var i=this.itemCount,o=i+1;this.itemCount=o;var n="item"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,l="item"+o,u=new Fa(this,l,l);u.itemIndex=o,this.willPushItem(t,s),this.item=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),!1===(e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(e)))&&this.didPushItem(t,s)},e.prototype.willPushItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPushItem&&i.deckSliderWillPushItem(t,e,this)}))},e.prototype.didPushItem=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckSliderDidPushItem&&i.deckSliderDidPushItem(t,e,this)}))},e.prototype.popItem=function(t){var e=this.itemCount,i=e-1;this.itemCount=i;var o="item"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="item"+i,l=this.getViewFastener(s),u=null!==l?l.view:null;this.willPopItem(u,r),this.item=l,null!==l&&l.injectView(),!1===(t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(t))&&this.didPopItem(u,r)}return r},e.prototype.willPopItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPopItem&&i.deckSliderWillPopItem(t,e,this)}))},e.prototype.didPopItem=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.itemIndex>this.itemCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckSliderDidPopItem&&i.deckSliderDidPopItem(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="item"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopItem(null!==this.item?this.item.view:null,r);else if(null!==this.item&&null!==this.item.view&&Math.round(i)>0){var s="item"+Math.round(i-1),a=this.getViewFastener(s),l=null!==a?a.view:null;this.didPushItem(this.item.view,l)}}}t.prototype.didLayout.call(this,e)},m([So({type:Number,inherit:!0,updateFlags:Xi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([So({type:Number,state:.5})],e.prototype,"slotAlign",void 0),e}(Ca),Va=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.itemIndex=0,n.itemWidth=null,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initItem(t)},e.prototype.insertView=function(t,e,i,o){var n="item"+(this.itemIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.takesPrecedence(Xi.Intrinsic)&&o.color.setState(t.getOr(this.owner.colorLook,e,null),i,Xi.Intrinsic)},e.prototype.viewDidLayout=function(t,e){this.layoutItem(e)},e.prototype.initItem=function(t){t.position.setState("absolute",Xi.Intrinsic)},e.prototype.layoutItem=function(t){var e=this.itemIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var s=this.owner.deckPhase.getValueOr(0),a=Math.max(this.owner.itemCount,Math.ceil(s)),l=a-1,u=s-l,h=t.width.state;this.itemWidth=h,h instanceof r.Length?h=h.pxValue(o):(h=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setState(h,Xi.Intrinsic):t.width.setState(this.itemWidth,Xi.Intrinsic));var p=o-h;e<l||e===l&&1===u?(t.left.setState(0,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.height.setState(n,Xi.Intrinsic),t.opacity.setState(0,Xi.Intrinsic),t.setCulled(!0)):e===l?(t.left.setState(p*i*(1-u),Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.height.setState(n,Xi.Intrinsic),t.opacity.setState(1-u,Xi.Intrinsic),t.setCulled(!1)):e===a?(t.left.setState(p*(1-u)+p*i*u,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.height.setState(n,Xi.Intrinsic),t.opacity.setState(u,Xi.Intrinsic),t.setCulled(!1)):(t.left.setState(p,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.height.setState(n,Xi.Intrinsic),t.opacity.setState(0,Xi.Intrinsic),t.setCulled(!0))},e}(Lo),Fa=Lo.define({extends:Va,type:Zn,child:!1,observe:!0}),Ta=function(t){function e(e){var i=t.call(this,e)||this;return i.labelCount=0,i.label=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("deck-button"),this.position.setState("relative",Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.cursor.setState("pointer",Xi.Intrinsic)},Object.defineProperty(e.prototype,"colorLook",{get:function(){return Qt.accentColor},enumerable:!1,configurable:!0}),e.prototype.createLabel=function(t){var e=Zn.span.create();return e.display.setState("flex",Xi.Intrinsic),e.alignItems.setState("center",Xi.Intrinsic),e.whiteSpace.setState("nowrap",Xi.Intrinsic),e.text(t),e},e.prototype.pushLabel=function(t,e){"string"==typeof t&&(t=this.createLabel(t));var i=this.labelCount,o=i+1;this.labelCount=o;var n="label"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,l="label"+o,u=new xa(this,l,l);u.labelIndex=o,this.willPushLabel(t,s),this.label=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),!1===(e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(e)))&&this.didPushLabel(t,s)},e.prototype.willPushLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPushLabel&&i.deckButtonWillPushLabel(t,e,this)}))},e.prototype.didPushLabel=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckButtonDidPushLabel&&i.deckButtonDidPushLabel(t,e,this)}))},e.prototype.popLabel=function(t){var e=this.labelCount,i=e-1;this.labelCount=i;var o="label"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="label"+i,l=this.getViewFastener(s),u=null!==l?l.view:null;this.willPopLabel(u,r),this.label=l,null!==l&&l.injectView(),!1===(t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(t))&&this.didPopLabel(u,r)}return r},e.prototype.willPopLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPopLabel&&i.deckButtonWillPopLabel(t,e,this)}))},e.prototype.didPopLabel=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.labelIndex>this.labelCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckButtonDidPopLabel&&i.deckButtonDidPopLabel(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="label"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopLabel(null!==this.label?this.label.view:null,r);else if(null!==this.label&&null!==this.label.view&&Math.round(i)>0){var s="label"+Math.round(i-1),a=this.getViewFastener(s),l=null!==a?a.view:null;this.didPushLabel(this.label.view,l)}}}t.prototype.didLayout.call(this,e)},m([ho({type:r.Length,state:r.Length.px(12)})],e.prototype,"iconPadding",void 0),m([So({type:Number,inherit:!0,updateFlags:Xi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([So({type:Number,state:0})],e.prototype,"slotAlign",void 0),e}(Ca),Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("close-icon"),t.setStyle("position","absolute"),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),s=t.width.state;s=s instanceof r.Length?s.pxValue():0;var a=t.height.state;a=a instanceof r.Length?a.pxValue():0;var l=this.owner.deckPhase.getValueOr(0),u=Math.min(Math.max(0,l-1),1),h=n+(i-s-n)*e,p=(o-a)/2;t.setStyle("left",h+"px"),t.setStyle("top",p+"px"),t.viewBox.setState("0 0 "+s+" "+a,Xi.Intrinsic),t.opacity.setState(1-u,Xi.Intrinsic)},e}(Lo);Lo({extends:Da,key:!0,type:Ur,observe:!0})(Ta.prototype,"closeIcon");var Ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("back-icon"),t.setStyle("position","absolute"),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),s=t.width.state;s=s instanceof r.Length?s.pxValue():0;var a=t.height.state;a=a instanceof r.Length?a.pxValue():0;var l,u=this.owner.deckPhase.getValueOr(0),h=Math.max(this.owner.labelCount,Math.ceil(u)),p="label"+h,d=this.owner.getChildView(p),c=n+(i-s-n)*e,v=(o-a)/2;if(u<=1)l=0,t.iconColor.setState(null,Xi.Intrinsic);else if(null!==d&&u<2){var f=this.owner.parentView,y=this.owner.nextPost.state,g=null!==f&&null!==y?f.getChildView(y.key):null,w=void 0,m=void 0;if(g instanceof Ca){w=g.slotAlign.value,m=(m=g.width.state)instanceof r.Length?m.pxValue():g.node.offsetWidth;var b=g.left.state;b=b instanceof r.Length?b.pxValue():g.node.offsetLeft;var S=this.owner.left.state;m+=b-((S=S instanceof r.Length?S.pxValue():this.owner.node.offsetLeft)+i)}else w=0,m=0;var C=u-(h-1),P=d.width.state,V=i-c-s+(m-(P=P instanceof r.Length?P.pxValue(i):d.node.offsetWidth))*w;c+=V*(1-C)+V*e*C,l=C;var F=g instanceof Ca?g.getLookOr(g.colorLook,null):null,T=this.owner.getLookOr(this.owner.colorLook,null);null!==F&&null!==T?t.iconColor.setState(F.interpolateTo(T)(C),Xi.Intrinsic):t.iconColor.setState(T,Xi.Intrinsic)}t.setStyle("left",c+"px"),t.setStyle("top",v+"px"),t.viewBox.setState("0 0 "+s+" "+a,Xi.Intrinsic),t.opacity.setState(l,Xi.Intrinsic)},e}(Lo);Lo({extends:Ma,key:!0,type:Ur,observe:!0})(Ta.prototype,"backIcon");var Oa=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.labelIndex=0,n.labelWidth=null,n.layoutWidth=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initLabel(t)},e.prototype.insertView=function(t,e,i,o){var n="label"+(this.labelIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.takesPrecedence(Xi.Intrinsic)&&o.color.setState(t.getOr(this.owner.colorLook,e,null),i,Xi.Intrinsic)},e.prototype.viewDidLayout=function(t,e){this.layoutLabel(e)},e.prototype.initLabel=function(t){t.position.setState("absolute",Xi.Intrinsic),t.pointerEvents.setState("none",Xi.Intrinsic)},e.prototype.layoutLabel=function(t){var e=this.labelIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var s,a,l=this.owner.parentView,u=this.owner.nextPost.state,h=null!==l&&null!==u?l.getChildView(u.key):null;if(h instanceof Ca){s=h.slotAlign.value,a=(a=h.width.state)instanceof r.Length?a.pxValue():h.node.offsetWidth;var p=h.left.state;p=p instanceof r.Length?p.pxValue():h.node.offsetLeft;var d=this.owner.left.state;a+=p-((d=d instanceof r.Length?d.pxValue():this.owner.node.offsetLeft)+o)}else s=0,a=0;var c,v,f=this.owner.iconPadding.getState().pxValue(o),y=this.owner.backIcon.view;null!==y?(c=(c=y.width.state)instanceof r.Length?c.pxValue():0,v=(v=y.height.state)instanceof r.Length?v.pxValue():0):(c=0,v=0);var g=this.owner.deckPhase.getValueOr(0),w=Math.max(this.owner.labelCount,Math.ceil(g)),m=w-1,b=g-m,S=t.width.state;this.labelWidth=S,S instanceof r.Length?S=S.pxValue(o):(S=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setState(S,Xi.Intrinsic):t.width.setState(this.labelWidth,Xi.Intrinsic));var C=f+(o-c-f)*i,P=(n-v)/2,V=o-C-c+(a-S)*s;if(e<m||e===m&&1===b)t.left.setState(C+c,Xi.Intrinsic),t.top.setState(P,Xi.Intrinsic),t.height.setState(v,Xi.Intrinsic),t.opacity.setState(0,Xi.Intrinsic),t.setCulled(!0);else if(e===m)t.left.setState(C+c+V*i*(1-b),Xi.Intrinsic),t.top.setState(P,Xi.Intrinsic),t.height.setState(v,Xi.Intrinsic),t.opacity.setState(1-b,Xi.Intrinsic),t.setCulled(!1);else if(e===w){t.left.setState(C+c+(V*(1-b)+V*i*b),Xi.Intrinsic),t.top.setState(P,Xi.Intrinsic),t.height.setState(v,Xi.Intrinsic);var F=h instanceof Ca?h.getLookOr(h.colorLook,null):null,T=this.owner.getLookOr(this.owner.colorLook,null);null!==F&&null!==T?t.color.setState(F.interpolateTo(T)(b),Xi.Intrinsic):t.color.setState(T,Xi.Intrinsic),t.opacity.setState(1,Xi.Intrinsic),t.setCulled(!1)}else t.left.setState(C+c+V,Xi.Intrinsic),t.top.setState(P,Xi.Intrinsic),t.height.setState(v,Xi.Intrinsic),t.opacity.setState(0,Xi.Intrinsic),t.setCulled(!0);this.layoutWidth=C+c+S+f},e}(Lo),xa=Lo.define({extends:Oa,type:Zn,child:!1,observe:!0}),Aa=function(t){function e(e){var i=t.call(this,e)||this;return i.initBar(),i.initTheme(),i}return w(e,t),e.prototype.initBar=function(){this.addClass("deck-bar"),this.position.setState("relative",Xi.Intrinsic),this.height.setState(this.barHeight.state,Xi.Intrinsic),this.userSelect.setState("none",Xi.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:0},Xi.Intrinsic)},e.prototype.initTheme=function(){this.modifyTheme(re.default,[[re.translucent,1],[re.primary,1]])},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(e.getOr(Qt.backgroundColor,i,null),o,Xi.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Ca&&this.onInsertSlot(e)},e.prototype.onInsertSlot=function(t){t.position.setState("absolute",Xi.Intrinsic)},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeBar(e)},e.prototype.resizeBar=function(t){var e=this.rail.isInherited()?null:this.rail.ownState;if(null!=e){var i=this.rail.superState,o=null;if(null!=i&&null!==i.width&&(o=i.width.pxValue()),null===o){var n=this.parentView;n instanceof Zn&&(o=(o=n.width.state)instanceof r.Length?o.pxValue():n.node.offsetWidth)}null===o&&(o=(o=this.width.state)instanceof r.Length?o.pxValue():this.node.offsetWidth);var s=this.edgeInsets.superState;null==s&&this.edgeInsets.takesPrecedence(Xi.Intrinsic)&&(s=t.viewport.safeArea);var a=null!=s?s.insetTop:0,l=null!=s?s.insetLeft:0,u=null!=s?s.insetRight:0,h=this.itemSpacing.getStateOr(r.Length.zero()).pxValue(o),p=e.resized(o,l,u,h);this.rail.setState(p),this.height.setState(this.barHeight.state.plus(a),Xi.Intrinsic)}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutBar(e)},e.prototype.layoutBar=function(t){var e=this.edgeInsets.superState;null==e&&this.edgeInsets.takesPrecedence(Xi.Intrinsic)&&(e=t.viewport.safeArea);var i=null!=e?e.insetTop:0;this.height.setState(this.barHeight.state.plus(i),Xi.Intrinsic)},e.prototype.displayChildViews=function(e,i,o){0!=(e&Xi.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.rail.state,s=this.edgeInsets.superState;null==s&&this.edgeInsets.takesPrecedence(Xi.Intrinsic)&&(s=i.viewport.safeArea);var a=this.height.state;a=a instanceof r.Length?a.pxValue():this.node.offsetHeight;var l=null!=s?s.insetTop:0,u=this.barHeight.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Ca){var r=t.key,s=null!==n&&void 0!==r?n.lookupPost(r):void 0;if(void 0!==s){var a=n.getPost(s),h=n.getPost(s+1),p=n.getPost(s-1);t.display.setState("flex",Xi.Intrinsic),t.left.setState(a.left,Xi.Intrinsic),t.top.setState(l,Xi.Intrinsic),t.width.setState(a.width,Xi.Intrinsic),t.height.setState(u,Xi.Intrinsic),t.post.setState(a,Xi.Intrinsic),t.nextPost.setState(h,Xi.Intrinsic),t.prevPost.setState(p,Xi.Intrinsic)}else t.display.setState("none",Xi.Intrinsic),t.left.setState(null,Xi.Intrinsic),t.top.setState(null,Xi.Intrinsic),t.width.setState(null,Xi.Intrinsic),t.height.setState(null,Xi.Intrinsic),t.post.setState(null,Xi.Intrinsic),t.nextPost.setState(null,Xi.Intrinsic),t.prevPost.setState(null,Xi.Intrinsic)}o.call(this,t,e,i)}))},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressBackButton&&e.deckBarDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressCloseButton&&e.deckBarDidPressCloseButton(t,this)}))},m([ho({type:Sa,state:null})],e.prototype,"rail",void 0),m([So({type:Number,inherit:!0})],e.prototype,"deckPhase",void 0),m([ho({type:r.Length,state:r.Length.px(48),updateFlags:Xi.NeedsLayout})],e.prototype,"barHeight",void 0),m([ho({type:r.Length,state:r.Length.zero(),updateFlags:Xi.NeedsResize})],e.prototype,"itemSpacing",void 0),m([ho({type:Object,inherit:!0,state:null,updateFlags:Xi.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(Zn),Ra=function(t){function e(e){var i=t.call(this,e)||this;return i.initCard(),i}return w(e,t),e.prototype.initCard=function(){this.addClass("deck-card"),this.position.setState("relative",Xi.Intrinsic),this.overflowX.setState("auto",Xi.Intrinsic),this.overflowY.setState("auto",Xi.Intrinsic),this.overflowScrolling.setState("touch",Xi.Intrinsic)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(Xi.Intrinsic)&&this.backgroundColor.setState(e.getOr(Qt.backgroundColor,i,null),o,Xi.Intrinsic)},m([ho({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([ho({type:String})],e.prototype,"cardTitle",void 0),m([Lo({type:Zn,child:!1})],e.prototype,"backItem",void 0),m([Lo({type:Zn,child:!1})],e.prototype,"titleView",void 0),m([Lo({type:Zn,child:!1})],e.prototype,"leftItem",void 0),m([Lo({type:Zn,child:!1})],e.prototype,"rightItem",void 0),e}(Zn),ka=function(t){function e(e){var i=t.call(this,e)||this;return i.cardCount=0,i.card=null,i.initDeck(),i}return w(e,t),e.prototype.initDeck=function(){this.addClass("deck"),this.position.setState("relative",Xi.Intrinsic),this.overflowX.setState("hidden",Xi.Intrinsic),this.overflowY.setState("hidden",Xi.Intrinsic)},e.prototype.pushCard=function(t,e){if(!this.deckPhase.isAnimating()){var i=this.cardCount,o=i+1;this.cardCount=o;var n="card"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,l="card"+o,u=new Wa(this,l,l);u.cardIndex=o,this.willPushCard(t,s),this.card=u,this.setViewFastener(l,u),u.setView(t),u.injectView(),e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(e)),this.deckPhase.setState(o,e),!1===e&&this.didPushCard(t,s)}},e.prototype.willPushCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPushCard&&i.deckWillPushCard(t,e,this)}))},e.prototype.didPushCard=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckDidPushCard&&i.deckDidPushCard(t,e,this)}))},e.prototype.popCard=function(t){if(this.deckPhase.isAnimating())return null;var e=this.cardCount,i=e-1;this.cardCount=i;var o="card"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="card"+i,l=this.getViewFastener(s),u=null!==l?l.view:null;this.willPopCard(u,r),this.card=l,null!==l&&l.injectView(),t=void 0===t||!0===t?this.getLookOr(Qt.timing,he.navigating,!1):a.Timing.fromAny(t),this.deckPhase.setState(i,t),!1===t&&this.didPopCard(u,r)}return r},e.prototype.willPopCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPopCard&&i.deckWillPopCard(t,e,this)}))},e.prototype.didPopCard=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.cardIndex>this.cardCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckDidPopCard&&i.deckDidPopCard(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="card"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopCard(null!==this.card?this.card.view:null,r);else if(null!==this.card&&null!==this.card.view&&Math.round(i)>0){var s="card"+Math.round(i-1),a=this.getViewFastener(s),l=null!==a?a.view:null;this.didPushCard(this.card.view,l)}}}t.prototype.didLayout.call(this,e)},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressBackButton&&e.deckDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressCloseButton&&e.deckDidPressCloseButton(t,this)}))},m([So({type:Number,state:0,updateFlags:Xi.NeedsLayout})],e.prototype,"deckPhase",void 0),m([ho({type:Number,state:1})],e.prototype,"inAlign",void 0),m([ho({type:Number,state:1/3})],e.prototype,"outAlign",void 0),m([ho({type:Object,inherit:!0,state:null,updateFlags:Xi.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(Zn),Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initBar(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidResize=function(t,e){this.resizeBar(e)},e.prototype.initBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.width.setState(e,Xi.Intrinsic),t.zIndex.setState(1,Xi.Intrinsic)},e.prototype.resizeBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.width.setState(e,Xi.Intrinsic)},e.prototype.deckBarDidPressBackButton=function(t,e){this.owner.didPressBackButton(t)},e.prototype.deckBarDidPressCloseButton=function(t,e){this.owner.didPressCloseButton(t)},e}(Lo);Lo({extends:Ia,key:!0,type:Aa,observe:!0})(ka.prototype,"bar");var La,ja=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.cardIndex=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initCard(t)},e.prototype.insertView=function(t,e,i,o){var n="card"+(this.cardIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidResize=function(t,e){this.resizeCard(e,t)},e.prototype.viewDidLayout=function(t,e){this.layoutCard(e,t)},e.prototype.initCard=function(t){var e=this.owner.edgeInsets.state;void 0===e&&this.owner.edgeInsets.takesPrecedence(Xi.Intrinsic)&&(e=this.owner.viewport.safeArea);var i=this.owner.width.state;i=i instanceof r.Length?i:r.Length.px(this.owner.node.offsetWidth);var o=this.owner.height.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetHeight);var n=null,s=this.owner.bar.view;null!==s&&(n=(n=s.height.state)instanceof r.Length?n:r.Length.px(s.node.offsetHeight),null!==e&&(e={insetTop:0,insetRight:e.insetRight,insetBottom:e.insetBottom,insetLeft:e.insetLeft})),t.edgeInsets.setState(e,Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(i,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.width.setState(i,Xi.Intrinsic),t.height.setState(o,Xi.Intrinsic),t.paddingTop.setState(n,Xi.Intrinsic),t.boxSizing.setState("border-box",Xi.Intrinsic),t.zIndex.setState(0,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic)},e.prototype.resizeCard=function(t,e){var i=this.owner.edgeInsets.state;void 0===i&&this.owner.edgeInsets.takesPrecedence(Xi.Intrinsic)&&(i=e.viewport.safeArea);var o=this.owner.width.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetWidth);var n=this.owner.height.state;n=n instanceof r.Length?n:r.Length.px(this.owner.node.offsetHeight);var s=null,a=this.owner.bar.view;null!==a&&(s=(s=a.height.state)instanceof r.Length?s:r.Length.px(a.node.offsetHeight),null!==i&&(i={insetTop:0,insetRight:i.insetRight,insetBottom:i.insetBottom,insetLeft:i.insetLeft})),t.edgeInsets.setState(i,Xi.Intrinsic),t.width.setState(o,Xi.Intrinsic),t.height.setState(n,Xi.Intrinsic),t.paddingTop.setState(s,Xi.Intrinsic)},e.prototype.layoutCard=function(t,e){var i=t.width.state;i=i instanceof r.Length?i:r.Length.px(t.node.offsetWidth);var o=this.owner.inAlign.state,n=this.owner.outAlign.state,s=this.owner.deckPhase.getValue(),a=Math.max(this.owner.cardCount,Math.ceil(s)),l=a-1,u=s-l,h=this.cardIndex;h<l||h===l&&1===u?(t.left.setState(-i.pxValue()*n,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic),t.setCulled(!0)):h===l?(t.left.setState(-i.pxValue()*n*u,Xi.Intrinsic),t.visibility.setState(void 0,Xi.Intrinsic),t.setCulled(!1)):h===a?(t.left.setState(i.pxValue()*o*(1-u),Xi.Intrinsic),t.visibility.setState(void 0,Xi.Intrinsic),t.setCulled(!1)):(t.left.setState(i.pxValue()*o,Xi.Intrinsic),t.visibility.setState("hidden",Xi.Intrinsic),t.setCulled(!0))},e}(Lo),Wa=Lo.define({extends:ja,type:Ra,child:!1,observe:!0}),Ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.deckWillPushCard=function(t,e,i){},e.prototype.deckDidPushCard=function(t,e,i){},e.prototype.deckWillPopCard=function(t,e,i){},e.prototype.deckDidPopCard=function(t,e,i){},e.prototype.deckDidPressBackButton=function(t,e){},e.prototype.deckDidPressCloseButton=function(t,e){},e}(_n),Na=function(t){function i(e){var i=t.call(this,e)||this;return i.onBackButtonClick=i.onBackButtonClick.bind(i),i.initRail(),i}return w(i,t),i.prototype.initRail=function(){var t=ba.create("backButton",0,0,48),e=ba.create("titleSlider",1,1),i=ba.create("moreSlider",0,0,48),o=Sa.create([t,e,i]);this.rail.setState(o,Xi.Intrinsic),this.backMembrane.injectView(),this.backButton.injectView(),this.titleSlider.injectView(),this.moreSlider.injectView()},Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),i.prototype.createCloseIcon=function(){var t=Ur.create();return t.width.setState(24,Xi.Intrinsic),t.height.setState(24,Xi.Intrinsic),t.iconWidth.setState(24,Xi.Intrinsic),t.iconHeight.setState(24,Xi.Intrinsic),t.graphics.setState(this.closeIcon,Xi.Intrinsic),t},i.prototype.initBackMembrane=function(t){t.display.setState("none",Xi.Intrinsic),t.position.setState("absolute",Xi.Intrinsic),t.left.setState(0,Xi.Intrinsic),t.top.setState(0,Xi.Intrinsic),t.borderTopLeftRadius.setState(4,Xi.Intrinsic),t.borderTopRightRadius.setState(4,Xi.Intrinsic),t.borderBottomLeftRadius.setState(4,Xi.Intrinsic),t.borderBottomRightRadius.setState(4,Xi.Intrinsic),t.overflowX.setState("hidden",Xi.Intrinsic),t.overflowY.setState("hidden",Xi.Intrinsic),t.cursor.setState("pointer",Xi.Intrinsic)},Object.defineProperty(i.prototype,"backIcon",{get:function(){return i.backIcon},enumerable:!1,configurable:!0}),i.prototype.createBackIcon=function(){var t=Ur.create();return t.width.setState(24,Xi.Intrinsic),t.height.setState(24,Xi.Intrinsic),t.iconWidth.setState(24,Xi.Intrinsic),t.iconHeight.setState(24,Xi.Intrinsic),t.graphics.setState(this.backIcon,Xi.Intrinsic),t},i.prototype.createBackButton=function(){var t=Ta.create();return t.backIcon.setView(this.createBackIcon()),t.backIcon.injectView(),t},i.prototype.initBackButton=function(t){t.pointerEvents.setState("none",Xi.Intrinsic)},i.prototype.initTitleSlider=function(t){t.pointerEvents.setState("none",Xi.Intrinsic)},i.prototype.initMoreSlider=function(t){},i.prototype.pushTitle=function(t,e){var i=this.titleSlider.view,o=this.backButton.view;if(null!==i&&null!==o){var n=i.item,r=null;null!==n&&(r=n.view,n.setView(null),i.item=null),i.pushItem(t,e),null!==r?o.pushLabel(r,e):o.labelCount=i.itemCount}},i.prototype.popTitle=function(t){var e=this.titleSlider.view,i=this.backButton.view;null!==e&&null!==i&&(e.popItem(t),i.popLabel(t))},i.prototype.didPopBackButton=function(t,e,i){var o=i.getViewFastener(e.key);null!==o&&(o.setView(null),i.setViewFastener(o.key,null));var n=this.titleSlider.view;if(null!==n){var r="item"+n.itemCount,s=n.getViewFastener(r);null!==s&&s.setView(e),n.item=s,n.appendChildView(e,r)}},i.prototype.didLayout=function(e){var i=this.backMembrane.view,o=this.backButton.view;if(null!==i&&null!==o){if(i.width.takesPrecedence(Xi.Intrinsic)){var n=o.left.state;if(n=n instanceof r.Length?n.pxValue():o.node.offsetLeft,null!==o.label)i.width.setState(n+o.label.layoutWidth,Xi.Intrinsic);else{var s=o.height.state;s=s instanceof r.Length?s.pxValue():o.node.offsetWidth,i.width.setState(n+s,Xi.Intrinsic)}}if(i.height.takesPrecedence(Xi.Intrinsic)){var a=o.top.state;a=a instanceof r.Length?a.pxValue():o.node.offsetTop;var l=o.height.state;l=l instanceof r.Length?l.pxValue():o.node.offsetHeight,i.height.setState(a+l,Xi.Intrinsic)}if(null!==o.backIcon.view){var u=o.closeIcon.view,h=o.deckPhase.getValueOr(0),p=Math.min(Math.max(0,h-1),1);i.display.setState(null===u&&0===p?"none":"block",Xi.Intrinsic)}}t.prototype.didLayout.call(this,e)},i.prototype.onBackButtonClick=function(t){t.stopPropagation(),this.deckPhase.getStateOr(0)>1?this.didPressBackButton(t):this.didPressCloseButton(t)},Object.defineProperty(i,"closeIcon",{get:function(){return xr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),Object.defineProperty(i,"backIcon",{get:function(){return xr.create(24,24,"M11.7,3.9L9.9,2.1L0,12L9.9,21.9L11.7,20.1L3.5,12Z").withFillLook(Qt.accentColor)},enumerable:!1,configurable:!0}),m([Lo({key:!0,type:Cs,onSetView:function(t,e){null!==e&&e.off("click",this.owner.onBackButtonClick),null!==t&&(this.owner.initBackMembrane(t),t.on("click",this.owner.onBackButtonClick))}})],i.prototype,"backMembrane",void 0),m([Lo({key:!0,type:Ta,observe:!0,onSetView:function(t){null!==t&&this.owner.initBackButton(t)},createView:function(){return this.owner.createBackButton()},deckButtonDidPopLabel:function(t,e,i){this.owner.didPopBackButton(t,e,i)}})],i.prototype,"backButton",void 0),m([Lo({key:!0,type:Pa,onSetView:function(t){null!==t&&this.owner.initTitleSlider(t)}})],i.prototype,"titleSlider",void 0),m([Lo({key:!0,type:Pa,onSetView:function(t){null!==t&&this.owner.initMoreSlider(t)}})],i.prototype,"moreSlider",void 0),m([e.Lazy],i,"closeIcon",null),m([e.Lazy],i,"backIcon",null),i}(Aa),Ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(e){t.prototype.onSetView.call(this,e),null!==e&&this.initBar(e)},e.prototype.initBar=function(t){var e=t.bar.view;e instanceof Na||(e=Na.create(),t.bar.setView(e))},e.prototype.deckWillPushCard=function(t,e,i){var o=i.bar.view;if(o instanceof Na){o.pushTitle(t.cardTitle.getStateOr(""));var n=o.backMembrane.view;null!==n&&n.pointerEvents.setState("none",Xi.Intrinsic)}},e.prototype.deckDidPushCard=function(t,e,i){var o=i.bar.view;if(o instanceof Na){var n=o.backMembrane.view;null!==n&&n.pointerEvents.setState("auto",Xi.Intrinsic)}},e.prototype.deckWillPopCard=function(t,e,i){var o=i.bar.view;o instanceof Na&&o.popTitle()},e.prototype.deckDidPressBackButton=function(t,e){e.deckPhase.isAnimating()||e.popCard()},e}(Ea),Ua=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.arrangement&&this.arrangement(e.arrangement),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDialValue&&i.viewWillSetDialValue(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDialValue&&s.viewWillSetDialValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialValue&&r.viewDidSetDialValue(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDialValue&&s.viewDidSetDialValue(t,e,this)},i.prototype.willSetLimit=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDialLimit&&i.viewWillSetDialLimit(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDialLimit&&s.viewWillSetDialLimit(t,e,this)}},i.prototype.onSetLimit=function(t,e){},i.prototype.didSetLimit=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLimit&&r.viewDidSetDialLimit(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDialLimit&&s.viewDidSetDialLimit(t,e,this)},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDialLabel&&i.viewWillSetDialLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDialLabel&&s.viewWillSetDialLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLabel&&r.viewDidSetDialLabel(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDialLabel&&s.viewDidSetDialLabel(t,e,this)},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDialLegend&&i.viewWillSetDialLegend(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDialLegend&&s.viewWillSetDialLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLegend&&r.viewDidSetDialLegend(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDialLegend&&s.viewDidSetDialLegend(t,e,this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderDial(o,this.viewFrame),o.restore()}},i.prototype.renderDial=function(t,i){var o=i.width,n=i.height,s=Math.min(o,n),a=this.value.getValue(),l=this.limit.getValue(),u=0!==l?a/l:0,h=this.center.getValue(),p=this.innerRadius.getValue().px(s),d=this.outerRadius.getValue().px(s),c=d.value-p.value,v=this.startAngle.getValue().rad(),f=this.sweepAngle.getValue().rad(),y=this.cornerRadius.getValue().px(c),g=new Cr(h,p,d,v,f,r.Angle.zero(),null,y),w=g.withSweepAngle(f.times(u));t.save(),t.beginPath();var m=this.dialColor.value;null!==m&&(t.fillStyle=m.toString()),g.draw(t,i),null!==m&&t.fill(),t.clip();var b=this.meterColor.value;null!==b&&(t.beginPath(),t.fillStyle=b.toString(),w.draw(t,i),t.fill()),t.restore();var S=this.label.view;if(null!==S&&!S.isHidden()){var C=(p.value+d.value)/2,P=C*Math.cos(v.value+e.Equivalent.Epsilon),V=C*Math.sin(v.value+e.Equivalent.Epsilon),F=void 0;F=P>=0?V>=0?"start":"end":V<0?"end":"start";var T=v.value-Math.PI/2,D=this.labelPadding.getValue().pxValue(c),M=D*Math.cos(T),O=D*Math.sin(T);Vr.is(S)&&(S.textAlign.setState(F,Xi.Intrinsic),S.textBaseline.setState("middle",Xi.Intrinsic),S.textOrigin.setState(new r.R2Point(h.x+P+M,h.y+V+O),Xi.Intrinsic))}var x=this.legend.view;if(null!==x&&!x.isHidden()){var A=this.tickAlign.getValue(),R=v.value+f.value*u*A,k=this.tickRadius.getValue().pxValue(s),I=this.tickLength.getValue().pxValue(o),L=this.tickWidth.getValue().pxValue(s),j=this.tickColor.value,W=h.x,E=h.y,N=d.value*Math.cos(R+e.Equivalent.Epsilon),G=d.value*Math.sin(R+e.Equivalent.Epsilon),U=k*Math.cos(R+e.Equivalent.Epsilon),B=k*Math.sin(R+e.Equivalent.Epsilon);M=0;null!==j&&(t.beginPath(),t.strokeStyle=j.toString(),t.lineWidth=L,t.moveTo(W+N,E+G),t.lineTo(W+U,E+B),0!==I&&(U>=0?(t.lineTo(W+I,E+B),M=I-U):U<0&&(t.lineTo(W-I,E+B),M=I+U)),t.stroke());F=void 0;if(U>=0?F="end":(M=-M,F="start"),Vr.is(x)){var H=this.tickPadding.getValue().pxValue(s);wr.is(x)&&x.fill.setState(j,Xi.Intrinsic),x.textAlign.setState(F,Xi.Intrinsic),x.textBaseline.setState("alphabetic",Xi.Intrinsic),x.textOrigin.setState(new r.R2Point(W+U+M,E+B-H),Xi.Intrinsic)}}},i.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestDial(e,i,s,this.viewFrame),s.restore()}}return n},i.prototype.hitTestDial=function(t,e,i,o){var n=Math.min(o.width,o.height),s=this.center.getValue(),a=this.innerRadius.getValue().px(n),l=this.outerRadius.getValue().px(n),u=l.value-a.value,h=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.cornerRadius.getValue().px(u),c=new Cr(s,a,l,h,p,r.Angle.zero(),null,d);return i.beginPath(),c.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return i.fromInit(t);throw new TypeError(""+t)},m([So({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},didSetValue:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([So({type:Number,state:1,willSetValue:function(t,e){this.owner.willSetLimit(t,e)},didSetValue:function(t,e){this.owner.onSetLimit(t,e),this.owner.didSetLimit(t,e)}})],i.prototype,"limit",void 0),m([So({type:r.R2Point,inherit:!0,state:r.R2Point.origin()})],i.prototype,"center",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"innerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(40)})],i.prototype,"outerRadius",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.rad(-Math.PI/2)})],i.prototype,"startAngle",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.rad(2*Math.PI)})],i.prototype,"sweepAngle",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"cornerRadius",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.subduedColor})],i.prototype,"dialColor",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.accentColor})],i.prototype,"meterColor",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"labelPadding",void 0),m([So({type:Number,inherit:!0,state:1})],i.prototype,"tickAlign",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(45)})],i.prototype,"tickRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.neutralColor})],i.prototype,"tickColor",void 0),m([So({type:gt,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,inherit:!0,look:Qt.mutedColor})],i.prototype,"textColor",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),m([ho({type:String,state:"auto"})],i.prototype,"arrangement",void 0),i}(sr),Ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialValue&&r.traitWillSetDialValue(t,e,this)}},e.prototype.onSetValue=function(t,e){},e.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialValue&&r.traitDidSetDialValue(t,e,this)}},e.prototype.willSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLimit&&r.traitWillSetDialLimit(t,e,this)}},e.prototype.onSetLimit=function(t,e){},e.prototype.didSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLimit&&r.traitDidSetDialLimit(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLabel&&r.traitWillSetDialLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLabel&&r.traitDidSetDialLabel(t,e,this)}},e.prototype.formatLabel=function(t,e){},e.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLegend&&r.traitWillSetDialLegend(t,e,this)}},e.prototype.onSetLegend=function(t,e){},e.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLegend&&r.traitDidSetDialLegend(t,e,this)}},e.prototype.formatLegend=function(t,e){},m([j({type:Number,state:0,willSetState:function(t,e){this.owner.willSetValue(t,e)},didSetState:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],e.prototype,"value",void 0),m([j({type:Number,state:1,willSetState:function(t,e){this.owner.willSetLimit(t,e)},didSetState:function(t,e){this.owner.onSetLimit(t,e),this.owner.didSetLimit(t,e)}})],e.prototype,"limit",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetLegend(t,e)},didSetState:function(t,e){this.owner.onSetLegend(t,e),this.owner.didSetLegend(t,e)}})],e.prototype,"legend",void 0),e}(at),Ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDialTrait=function(t){},e.prototype.attachDialTrait=function(t){null!==this.dial.view&&(this.setValue(t.value.state,t),this.setLimit(t.limit.state,t),this.setLabelView(t.label.state,t),this.setLegendView(t.legend.state,t))},e.prototype.detachDialTrait=function(t){},e.prototype.willSetDialTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDialTrait&&r.componentWillSetDialTrait(t,e,this)}},e.prototype.onSetDialTrait=function(t,e){null!==e&&this.detachDialTrait(e),null!==t&&(this.attachDialTrait(t),this.initDialTrait(t))},e.prototype.didSetDialTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDialTrait&&r.componentDidSetDialTrait(t,e,this)}},e.prototype.updateLabel=function(t,e,i){if(i.label.takesPrecedence(v.Intrinsic)){var o=i.formatLabel(t,e);void 0!==o&&i.label.setState(o,v.Intrinsic)}},e.prototype.updateLegend=function(t,e,i){if(i.legend.takesPrecedence(v.Intrinsic)){var o=i.formatLegend(t,e);void 0!==o&&i.legend.setState(o,v.Intrinsic)}},e.prototype.createDialView=function(){return Ua.create()},e.prototype.initDialView=function(t){var e=this.dial.trait;if(null!==e){var i=t.value.value,o=t.limit.value;this.updateLabel(i,o,e),this.updateLegend(i,o,e),this.setValue(e.value.state,e),this.setLimit(e.limit.state,e),this.setLabelView(e.label.state,e),this.setLegendView(e.legend.state,e)}},e.prototype.attachDialView=function(t){this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachDialView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetDialView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDialView&&r.componentWillSetDialView(t,e,this)}},e.prototype.onSetDialView=function(t,e){null!==e&&this.detachDialView(e),null!==t&&(this.attachDialView(t),this.initDialView(t))},e.prototype.didSetDialView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDialView&&r.componentDidSetDialView(t,e,this)}},e.prototype.themeDialView=function(t,e,i,o){},e.prototype.setValue=function(t,e,i){var o=this.dial.view;null!==o&&o.value.takesPrecedence(Xi.Intrinsic)&&(void 0===i||!0===i?!0===(i=this.dialTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.value.setState(t,i,Xi.Intrinsic))},e.prototype.willSetValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialValue&&s.componentWillSetDialValue(t,e,this)}},e.prototype.onSetValue=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.limit.value;this.updateLabel(t,n,o),this.updateLegend(t,n,o)}},e.prototype.didSetValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialValue&&s.componentDidSetDialValue(t,e,this)}},e.prototype.setLimit=function(t,e,i){var o=this.dial.view;null!==o&&o.limit.takesPrecedence(Xi.Intrinsic)&&(void 0===i||!0===i?!0===(i=this.dialTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.limit.setState(t,i,Xi.Intrinsic))},e.prototype.willSetLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialLimit&&s.componentWillSetDialLimit(t,e,this)}},e.prototype.onSetLimit=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.value.value;this.updateLabel(n,t,o),this.updateLegend(n,t,o)}},e.prototype.didSetLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialLimit&&s.componentDidSetDialLimit(t,e,this)}},e.prototype.createLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLabelView=function(t,e){var i=this.dial.view;if(null!==i){var o=null!==t?this.createLabelView(t,e):null;i.label.setView(o)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDialLabelView&&r.componentWillSetDialLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDialLabelView&&r.componentDidSetDialLabelView(t,e,this)}},e.prototype.createLegendView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLegendView=function(t,e){var i=this.dial.view;if(null!==i){var o=null!==t?this.createLegendView(t,e):null;i.legend.setView(o)}},e.prototype.initLegendView=function(t){},e.prototype.attachLegendView=function(t){},e.prototype.detachLegendView=function(t){},e.prototype.willSetLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDialLegendView&&r.componentWillSetDialLegendView(t,e,this)}},e.prototype.onSetLegendView=function(t,e){null!==e&&this.detachLegendView(e),null!==t&&(this.attachLegendView(t),this.initLegendView(t))},e.prototype.didSetLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDialLegendView&&r.componentDidSetDialLegendView(t,e,this)}},e.DialFastener=fs.define({viewType:Ua,observeView:!0,willSetView:function(t,e){this.owner.willSetDialView(t,e)},onSetView:function(t,e){this.owner.onSetDialView(t,e)},didSetView:function(t,e){this.owner.didSetDialView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeDialView(t,e,i,o)},viewWillSetDialValue:function(t,e,i){this.owner.willSetValue(t,e,i)},viewDidSetDialValue:function(t,e,i){this.owner.onSetValue(t,e,i),this.owner.didSetValue(t,e,i)},viewWillSetDialLimit:function(t,e,i){this.owner.willSetLimit(t,e,i)},viewDidSetDialLimit:function(t,e,i){this.owner.onSetLimit(t,e,i),this.owner.didSetLimit(t,e,i)},viewDidSetDialLabel:function(t,e){this.owner.label.setView(t)},viewDidSetDialLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createDialView()},traitType:Ba,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDialTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDialTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDialTrait(t,e)},traitDidSetDialValue:function(t,e,i){this.owner.setValue(t,i)},traitDidSetDialLimit:function(t,e,i){this.owner.setLimit(t,i)},traitDidSetDialLabel:function(t,e,i){this.owner.setLabelView(t,i)},traitDidSetDialLegend:function(t,e,i){this.owner.setLegendView(t,i)}}),m([ns({type:a.Timing,inherit:!0})],e.prototype,"dialTiming",void 0),m([fs({extends:e.DialFastener})],e.prototype,"dial",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetLegendView(t,e)},onSetView:function(t,e){this.owner.onSetLegendView(t,e)},didSetView:function(t,e){this.owner.didSetLegendView(t,e)}})],e.prototype,"legend",void 0),e}(bs),za=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialSpacing&&this.dialSpacing(e.dialSpacing),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.dials;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(Ua.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),t.textBaseline.setState("middle",Xi.Intrinsic),t.textOrigin.setState(this.center.state,Xi.Intrinsic))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGaugeTitle&&i.viewWillSetGaugeTitle(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGaugeTitle&&s.viewWillSetGaugeTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGaugeTitle&&r.viewDidSetGaugeTitle(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGaugeTitle&&s.viewDidSetGaugeTitle(t,e,this)},e.prototype.insertDial=function(t,e){void 0===e&&(e=null),t=Ua.fromAny(t);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createDialFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDial=function(t,e){var i=t.label.view;null!==i&&this.initDialLabel(i,e);var o=t.legend.view;null!==o&&this.initDialLegend(o,e)},e.prototype.attachDial=function(t,e){},e.prototype.detachDial=function(t,e){},e.prototype.willSetDial=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetDial&&n.viewWillSetDial(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetDial&&l.viewWillSetDial(t,e,i,this)}},e.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},e.prototype.didSetDial=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetDial&&a.viewDidSetDial(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetDial&&l.viewDidSetDial(t,e,i,this)},e.prototype.onSetDialValue=function(t,e,i){this.requireUpdate(Xi.NeedsLayout)},e.prototype.initDialLabel=function(t,e){},e.prototype.onSetDialLabel=function(t,e,i){null!==t&&this.initDialLabel(t,i)},e.prototype.initDialLegend=function(t,e){},e.prototype.onSetDialLegend=function(t,e,i){null!==t&&this.initDialLegend(t,i)},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDial=function(t){return t instanceof Ua?t:null},e.prototype.onInsertDial=function(t,e){this.insertDial(t,e)},e.prototype.onRemoveDial=function(t){this.removeDial(t)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDial(e);null!==o&&this.onInsertDial(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDial(e);null!==i&&this.onRemoveDial(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutGauge(this.viewFrame)},e.prototype.layoutGauge=function(t){if(this.center.takesPrecedence(Xi.Intrinsic)){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setState(new r.R2Point(e,i),Xi.Intrinsic)}for(var o=this.dialFasteners,n=o.length,s=0,a=0;a<n;a+=1){null!==(y=o[a].view)&&"auto"===y.arrangement.state&&(s+=1)}var l=Math.min(t.width,t.height),u=this.limit.getValue(),h=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.innerRadius.getValue().pxValue(l),c=this.outerRadius.getValue().pxValue(l),v=this.dialSpacing.getValue().pxValue(l),f=s>1?(c-d-v*(s-1))/s:c-d;for(a=0;a<n;a+=1){var y;if(null!==(y=o[a].view)&&"auto"===y.arrangement.state){if(isFinite(u)){var g=y.limit.getValue();y.limit.setState(Math.max(g,u),Xi.Intrinsic)}y.startAngle.setState(h,Xi.Intrinsic),y.sweepAngle.setState(p,Xi.Intrinsic),y.innerRadius.setState(r.Length.px(d),Xi.Intrinsic),y.outerRadius.setState(r.Length.px(d+f),Xi.Intrinsic),d=d+f+v}}var w=this.title.view;Vr.is(w)&&w.textOrigin.setState(this.center.state,Xi.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.DialFastener=Lo.define({type:Ua,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDial(t,e,i,this)},viewDidSetDialValue:function(t,e){this.owner.onSetDialValue(t,e,this)},viewDidSetDialLabel:function(t,e){this.owner.onSetDialLabel(t,e,this)},viewDidSetDialLegend:function(t,e){this.owner.onSetDialLegend(t,e,this)}}),m([So({type:Number,state:0,updateFlags:Xi.NeedsLayout})],e.prototype,"limit",void 0),m([So({type:r.R2Point,state:r.R2Point.origin(),updateFlags:Xi.NeedsLayout})],e.prototype,"center",void 0),m([So({type:r.Length,state:r.Length.pct(30),updateFlags:Xi.NeedsLayout})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(40),updateFlags:Xi.NeedsLayout})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:Xi.NeedsLayout})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.rad(2*Math.PI),updateFlags:Xi.NeedsLayout})],e.prototype,"sweepAngle",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"cornerRadius",void 0),m([So({type:r.Length,state:r.Length.px(1),updateFlags:Xi.NeedsLayout})],e.prototype,"dialSpacing",void 0),m([So({type:St,state:null,look:Qt.subduedColor})],e.prototype,"dialColor",void 0),m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"meterColor",void 0),m([So({type:r.Length,state:r.Length.pct(25)})],e.prototype,"labelPadding",void 0),m([So({type:Number,state:1})],e.prototype,"tickAlign",void 0),m([So({type:r.Length,state:r.Length.pct(45)})],e.prototype,"tickRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([So({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([So({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickColor",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(sr),qa=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGaugeTitle&&r.traitWillSetGaugeTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){},e.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGaugeTitle&&r.traitDidSetGaugeTitle(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createDialFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDial=function(t,e){},e.prototype.attachDial=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDial=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetDial&&a.traitWillSetDial(t,e,i,this)}},e.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},e.prototype.didSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetDial&&a.traitDidSetDial(t,e,i,this)}},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectDialModel=function(t){return t.getTrait(Ba)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDialModel(n);null!==r&&this.insertDial(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDialModel(e);if(null!==o){var n=null!==i?this.detectDialModel(i):null;this.insertDial(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDialModel(e);null!==i&&this.removeDial(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDials()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDials()},e.DialFastener=K.define({type:Ba,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDial(t,e,i,this)}}),m([j({state:null,willSetState:function(t,e){this.owner.willSetTitle(t,e)},didSetState:function(t,e){this.owner.onSetTitle(t,e),this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(at),Ya=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dialFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initGaugeTrait=function(t){},e.prototype.attachGaugeTrait=function(t){null!==this.gauge.view&&this.setTitleView(t.title.state,t);for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDialTrait(n)}},e.prototype.detachGaugeTrait=function(t){for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDialTrait(n)}null!==this.gauge.view&&this.setTitleView(null,t)},e.prototype.willSetGaugeTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGaugeTrait&&r.componentWillSetGaugeTrait(t,e,this)}},e.prototype.onSetGaugeTrait=function(t,e){null!==e&&this.detachGaugeTrait(e),null!==t&&(this.attachGaugeTrait(t),this.initGaugeTrait(t))},e.prototype.didSetGaugeTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGaugeTrait&&r.componentDidSetGaugeTrait(t,e,this)}},e.prototype.createGaugeView=function(){return za.create()},e.prototype.initGaugeView=function(t){},e.prototype.attachGaugeView=function(t){this.title.setView(t.title.view);var e=this.gauge.trait;null!==e&&this.setTitleView(e.title.state,e);for(var i=this.dialFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var s=r.dial.view;null!==s&&null===s.parentView&&r.dial.injectView(t)}}},e.prototype.detachGaugeView=function(t){this.title.setView(null)},e.prototype.willSetGaugeView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGaugeView&&r.componentWillSetGaugeView(t,e,this)}},e.prototype.onSetGaugeView=function(t,e){null!==e&&this.detachGaugeView(e),null!==t&&(this.attachGaugeView(t),this.initGaugeView(t))},e.prototype.didSetGaugeView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGaugeView&&r.componentDidSetGaugeView(t,e,this)}},e.prototype.themeGaugeView=function(t,e,i,o){},e.prototype.createTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setTitleView=function(t,e){var i=this.gauge.view;if(null!==i){var o=null!==t?this.createTitleView(t,e):null;i.title.setView(o)}},e.prototype.initTitleView=function(t){},e.prototype.attachTitleView=function(t){},e.prototype.detachTitleView=function(t){},e.prototype.willSetTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGaugeTitleView&&r.componentWillSetGaugeTitleView(t,e,this)}},e.prototype.onSetTitleView=function(t,e){null!==e&&this.detachTitleView(e),null!==t&&(this.attachTitleView(t),this.initTitleView(t))},e.prototype.didSetTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGaugeTitleView&&r.componentWillSetGaugeTitleView(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createDialFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDial=function(t){return new Ha},e.prototype.initDial=function(t,e){var i=t.dial.trait;null!==i&&this.initDialTrait(i,e);var o=t.dial.view;null!==o&&this.initDialView(o,e)},e.prototype.attachDial=function(t,e){var i=t.dial.trait;null!==i&&this.attachDialTrait(i,e);var o=t.dial.view;null!==o&&this.attachDialView(o,e)},e.prototype.detachDial=function(t,e){var i=t.dial.trait;null!==i&&this.detachDialTrait(i,e);var o=t.dial.view;null!==o&&this.detachDialView(o,e)},e.prototype.willSetDial=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDial&&s.componentWillSetDial(t,e,i)}},e.prototype.onSetDial=function(t,e,i){null!==e&&this.detachDial(e,i),null!==t&&(this.attachDial(t,i),this.initDial(t,i))},e.prototype.didSetDial=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDial&&s.componentDidSetDial(t,e,i)}},e.prototype.insertDialTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.dial.trait===t)return;s.dial.trait===e&&(o=s)}}var a=this.createDial(t);if(null!==a&&(a.dial.setTrait(t),this.insertChildComponent(a,o),null===a.dial.view)){var l=this.createDialView(a),u=null;null!==o&&(u=o.dial.view);var h=this.gauge.view;null!==h?a.dial.injectView(h,l,u,null):a.dial.setView(l,u)}},e.prototype.removeDialTrait=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dial.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDialTrait=function(t,e){},e.prototype.attachDialTrait=function(t,e){},e.prototype.detachDialTrait=function(t,e){},e.prototype.willSetDialTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialTrait&&s.componentWillSetDialTrait(t,e,i)}},e.prototype.onSetDialTrait=function(t,e,i){null!==e&&this.detachDialTrait(e,i),null!==t&&(this.attachDialTrait(t,i),this.initDialTrait(t,i))},e.prototype.didSetDialTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialTrait&&s.componentDidSetDialTrait(t,e,i)}},e.prototype.createDialView=function(t){return t.dial.createView()},e.prototype.initDialView=function(t,e){var i=t.label.view;null!==i&&this.initDialLabelView(i,e);var o=t.legend.view;null!==o&&this.initDialLegendView(o,e)},e.prototype.attachDialView=function(t,e){var i=t.label.view;null!==i&&this.attachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.attachDialLegendView(o,e)},e.prototype.detachDialView=function(t,e){var i=t.label.view;null!==i&&this.detachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.detachDialLegendView(o,e),t.remove()},e.prototype.willSetDialView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialView&&s.componentWillSetDialView(t,e,i)}},e.prototype.onSetDialView=function(t,e,i){null!==e&&this.detachDialView(e,i),null!==t&&(this.attachDialView(t,i),this.initDialView(t,i))},e.prototype.didSetDialView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialView&&s.componentDidSetDialView(t,e,i)}},e.prototype.willSetDialValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialValue&&s.componentWillSetDialValue(t,e,i)}},e.prototype.onSetDialValue=function(t,e,i){},e.prototype.didSetDialValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialValue&&s.componentDidSetDialValue(t,e,i)}},e.prototype.willSetDialLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialLimit&&s.componentWillSetDialLimit(t,e,i)}},e.prototype.onSetDialLimit=function(t,e,i){},e.prototype.didSetDialLimit=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialLimit&&s.componentDidSetDialLimit(t,e,i)}},e.prototype.initDialLabelView=function(t,e){},e.prototype.attachDialLabelView=function(t,e){},e.prototype.detachDialLabelView=function(t,e){},e.prototype.willSetDialLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialLabelView&&s.componentWillSetDialLabelView(t,e,i)}},e.prototype.onSetDialLabelView=function(t,e,i){null!==e&&this.detachDialLabelView(e,i),null!==t&&(this.attachDialLabelView(t,i),this.initDialLabelView(t,i))},e.prototype.didSetDialLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialLabelView&&s.componentDidSetDialLabelView(t,e,i)}},e.prototype.initDialLegendView=function(t,e){},e.prototype.attachDialLegendView=function(t,e){},e.prototype.detachDialLegendView=function(t,e){},e.prototype.willSetDialLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDialLegendView&&s.componentWillSetDialLegendView(t,e,i)}},e.prototype.onSetDialLegendView=function(t,e,i){null!==e&&this.detachDialLegendView(e,i),null!==t&&(this.attachDialLegendView(t,i),this.initDialLegendView(t,i))},e.prototype.didSetDialLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDialLegendView&&s.componentDidSetDialLegendView(t,e,i)}},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.getDialastener=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dial.trait===t)return n}return null},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDialComponent=function(t){return t instanceof Ha?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectDialComponent(e);null!==o&&this.insertDial(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectDialComponent(e);null!==i&&this.removeDial(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GaugeFastener=fs.define({viewType:za,observeView:!0,willSetView:function(t,e){this.owner.willSetGaugeView(t,e)},onSetView:function(t,e){this.owner.onSetGaugeView(t,e)},didSetView:function(t,e){this.owner.didSetGaugeView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGaugeView(t,e,i,o)},viewDidSetGaugeTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createGaugeView()},traitType:qa,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGaugeTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGaugeTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGaugeTrait(t,e)},traitDidSetGaugeTitle:function(t,e,i){this.owner.setTitleView(t,i)},traitWillSetDial:function(t,e,i){null!==e&&this.owner.removeDialTrait(e)},traitDidSetDial:function(t,e,i){null!==t&&this.owner.insertDialTrait(t,i)}}),e.DialFastener=gs.define({type:Ha,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetDial(t,e,this)},onSetComponent:function(t,e){this.owner.onSetDial(t,e,this)},didSetComponent:function(t,e){this.owner.didSetDial(t,e,this)},componentWillSetDialTrait:function(t,e){this.owner.willSetDialTrait(t,e,this)},componentDidSetDialTrait:function(t,e){this.owner.onSetDialTrait(t,e,this),this.owner.didSetDialTrait(t,e,this)},componentWillSetDialView:function(t,e){this.owner.willSetDialView(t,e,this)},componentDidSetDialView:function(t,e){this.owner.onSetDialView(t,e,this),this.owner.didSetDialView(t,e,this)},componentWillSetDialValue:function(t,e){this.owner.willSetDialValue(t,e,this)},componentDidSetDialValue:function(t,e){this.owner.onSetDialValue(t,e,this),this.owner.didSetDialValue(t,e,this)},componentWillSetDialLimit:function(t,e){this.owner.willSetDialLimit(t,e,this)},componentDidSetDialLimit:function(t,e){this.owner.onSetDialLimit(t,e,this),this.owner.didSetDialLimit(t,e,this)},componentWillSetDialLabelView:function(t,e){this.owner.willSetDialLabelView(t,e,this)},componentDidSetDialLabelView:function(t,e){this.owner.onSetDialLabelView(t,e,this),this.owner.didSetDialLabelView(t,e,this)},componentWillSetDialLegendView:function(t,e){this.owner.willSetDialLegendView(t,e,this)},componentDidSetDialLegendView:function(t,e){this.owner.onSetDialLegendView(t,e,this),this.owner.didSetDialLegendView(t,e,this)}}),m([fs({extends:e.GaugeFastener})],e.prototype,"gauge",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetTitleView(t,e)},onSetView:function(t,e){this.owner.onSetTitleView(t,e)},didSetView:function(t,e){this.owner.didSetTitleView(t,e)}})],e.prototype,"title",void 0),m([ns({type:a.Timing,state:!0})],e.prototype,"dialTiming",void 0),e}(bs),Xa=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.total&&this.total(e.total),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.phaseAngle&&this.phaseAngle(e.phaseAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetSliceValue&&i.viewWillSetSliceValue(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetSliceValue&&s.viewWillSetSliceValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceValue&&r.viewDidSetSliceValue(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetSliceValue&&s.viewDidSetSliceValue(t,e,this)},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetSliceLabel&&i.viewWillSetSliceLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetSliceLabel&&s.viewWillSetSliceLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceLabel&&r.viewDidSetSliceLabel(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetSliceLabel&&s.viewDidSetSliceLabel(t,e,this)},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetSliceLegend&&i.viewWillSetSliceLegend(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetSliceLegend&&s.viewWillSetSliceLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceLegend&&r.viewDidSetSliceLegend(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetSliceLegend&&s.viewDidSetSliceLegend(t,e,this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderSlice(o,this.viewFrame),o.restore()}},i.prototype.renderSlice=function(t,i){var o=i.width,n=i.height,s=Math.min(o,n),a=this.value.getValue(),l=this.total.getValue(),u=0!==l?a/l:0,h=this.center.getValue(),p=this.innerRadius.getValue().px(s),d=this.outerRadius.getValue().px(s),c=d.value-p.value,v=this.phaseAngle.getValue().rad(),f=r.Angle.rad(2*Math.PI*u),y=this.padAngle.getValue(),g=this.padRadius.getValueOr(null),w=this.cornerRadius.getValue().px(c),m=new Cr(h,p,d,v,f,y,g,w),b=this.sliceColor.value;null!==b&&(t.beginPath(),t.fillStyle=b.toString(),m.draw(t,i),t.fill());var S=this.label.view;if(null!==S&&!S.isHidden()){var C=this.labelRadius.getValue().pxValue(c),P=v.value+f.value/2,V=p.value+C,F=V*Math.cos(P),T=V*Math.sin(P);Vr.is(S)&&(S.textAlign.setState("center",Xi.Intrinsic),S.textBaseline.setState("middle",Xi.Intrinsic),S.textOrigin.setState(new r.R2Point(h.x+F,h.y+T),Xi.Intrinsic))}var D=this.legend.view;if(null!==D&&!D.isHidden()){var M=this.tickAlign.getValue(),O=v.value+f.value*M,x=this.tickRadius.getValue().pxValue(s),A=this.tickLength.getValue().pxValue(o),R=this.tickWidth.getValue().pxValue(s),k=this.tickColor.value,I=h.x,L=h.y,j=d.value*Math.cos(O+e.Equivalent.Epsilon),W=d.value*Math.sin(O+e.Equivalent.Epsilon),E=x*Math.cos(O+e.Equivalent.Epsilon),N=x*Math.sin(O+e.Equivalent.Epsilon),G=0;null!==k&&0!==R&&(t.beginPath(),t.strokeStyle=k.toString(),t.lineWidth=R,t.moveTo(I+j,L+W),t.lineTo(I+E,L+N),0!==A&&(E>=0?(t.lineTo(I+A,L+N),G=A-E):E<0&&(t.lineTo(I-A,L+N),G=A+E)),t.stroke());var U=void 0;if(E>=0?U="end":(G=-G,U="start"),Vr.is(D)){var B=this.tickPadding.getValue().pxValue(s);wr.is(D)&&D.fill.setState(k,Xi.Intrinsic),D.textAlign.setState(U,Xi.Intrinsic),D.textBaseline.setState("alphabetic",Xi.Intrinsic),D.textOrigin.setState(new r.R2Point(I+E+G,L+N-B),Xi.Intrinsic)}}},i.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestSlice(e,i,s,this.viewFrame),s.restore()}}return n},i.prototype.hitTestSlice=function(t,e,i,o){var n=Math.min(o.width,o.height),s=this.value.getValue(),a=this.total.getValue(),l=0!==a?s/a:0,u=this.center.getValue(),h=this.innerRadius.getValue().px(n),p=this.outerRadius.getValue().px(n),d=p.value-h.value,c=this.phaseAngle.getValue().rad(),v=r.Angle.rad(2*Math.PI*l),f=this.padAngle.getValue(),y=this.padRadius.getValueOr(null),g=this.cornerRadius.getValue().px(d),w=new Cr(u,h,p,c,v,f,y,g);return i.beginPath(),w.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},didSetValue:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([So({type:Number,state:1})],i.prototype,"total",void 0),m([So({type:r.R2Point,inherit:!0,state:r.R2Point.origin()})],i.prototype,"center",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(3)})],i.prototype,"innerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],i.prototype,"phaseAngle",void 0),m([So({type:r.Angle,inherit:!0,state:r.Angle.deg(2)})],i.prototype,"padAngle",void 0),m([So({type:r.Length,inherit:!0,state:null})],i.prototype,"padRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.zero()})],i.prototype,"cornerRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"labelRadius",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.accentColor})],i.prototype,"sliceColor",void 0),m([So({type:Number,inherit:!0,state:.5})],i.prototype,"tickAlign",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"tickRadius",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([So({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.neutralColor})],i.prototype,"tickColor",void 0),m([So({type:gt,inherit:!0,state:null})],i.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null,look:Qt.mutedColor})],i.prototype,"textColor",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),i}(sr),Ka=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceValue&&r.traitWillSetSliceValue(t,e,this)}},e.prototype.onSetValue=function(t,e){},e.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceValue&&r.traitDidSetSliceValue(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceLabel&&r.traitWillSetSliceLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceLabel&&r.traitDidSetSliceLabel(t,e,this)}},e.prototype.formatLabel=function(t){},e.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceLegend&&r.traitWillSetSliceLegend(t,e,this)}},e.prototype.onSetLegend=function(t,e){},e.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceLegend&&r.traitDidSetSliceLegend(t,e,this)}},e.prototype.formatLegend=function(t){},m([j({type:Number,state:0,willSetState:function(t,e){this.owner.willSetValue(t,e)},didSetState:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],e.prototype,"value",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetLegend(t,e)},didSetState:function(t,e){this.owner.onSetLegend(t,e),this.owner.didSetLegend(t,e)}})],e.prototype,"legend",void 0),e}(at),Za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initSliceTrait=function(t){},e.prototype.attachSliceTrait=function(t){null!==this.slice.view&&(this.setValue(t.value.state,t),this.setLabelView(t.label.state,t),this.setLegendView(t.legend.state,t))},e.prototype.detachSliceTrait=function(t){},e.prototype.willSetSliceTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetSliceTrait&&r.componentWillSetSliceTrait(t,e,this)}},e.prototype.onSetSliceTrait=function(t,e){null!==e&&this.detachSliceTrait(e),null!==t&&(this.attachSliceTrait(t),this.initSliceTrait(t))},e.prototype.didSetSliceTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetSliceTrait&&r.componentDidSetSliceTrait(t,e,this)}},e.prototype.updateLabel=function(t,e){if(e.label.takesPrecedence(v.Intrinsic)){var i=e.formatLabel(t);void 0!==i&&e.label.setState(i,v.Intrinsic)}},e.prototype.updateLegend=function(t,e){if(e.legend.takesPrecedence(v.Intrinsic)){var i=e.formatLegend(t);void 0!==i&&e.legend.setState(i,v.Intrinsic)}},e.prototype.createSliceView=function(){return Xa.create()},e.prototype.initSliceView=function(t){var e=t.value.value;t.setHidden(0===e);var i=this.slice.trait;null!==i&&(this.updateLabel(e,i),this.updateLegend(e,i),this.setValue(i.value.state,i),this.setLabelView(i.label.state,i),this.setLegendView(i.legend.state,i))},e.prototype.attachSliceView=function(t){this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachSliceView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetSliceView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetSliceView&&r.componentWillSetSliceView(t,e,this)}},e.prototype.onSetSliceView=function(t,e){null!==e&&this.detachSliceView(e),null!==t&&(this.attachSliceView(t),this.initSliceView(t))},e.prototype.didSetSliceView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetSliceView&&r.componentDidSetSliceView(t,e,this)}},e.prototype.themeSliceView=function(t,e,i,o){},e.prototype.setValue=function(t,e,i){var o=this.slice.view;null!==o&&o.value.takesPrecedence(Xi.Intrinsic)&&(void 0===i||!0===i?!0===(i=this.sliceTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.value.setState(t,i,Xi.Intrinsic))},e.prototype.willSetValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceValue&&s.componentWillSetSliceValue(t,e,this)}},e.prototype.onSetValue=function(t,e,i){i.setHidden(0===t);var o=this.slice.trait;null!==o&&(this.updateLabel(t,o),this.updateLegend(t,o))},e.prototype.didSetValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceValue&&s.componentDidSetSliceValue(t,e,this)}},e.prototype.createLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLabelView=function(t,e){var i=this.slice.view;if(null!==i){var o=null!==t?this.createLabelView(t,e):null;i.label.setView(o)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetSliceLabelView&&r.componentWillSetSliceLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetSliceLabelView&&r.componentDidSetSliceLabelView(t,e,this)}},e.prototype.createLegendView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLegendView=function(t,e){var i=this.slice.view;if(null!==i){var o=null!==t?this.createLegendView(t,e):null;i.legend.setView(o)}},e.prototype.initLegendView=function(t){},e.prototype.attachLegendView=function(t){},e.prototype.detachLegendView=function(t){},e.prototype.willSetLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetSliceLegendView&&r.componentWillSetSliceLegendView(t,e,this)}},e.prototype.onSetLegendView=function(t,e){null!==e&&this.detachLegendView(e),null!==t&&(this.attachLegendView(t),this.initLegendView(t))},e.prototype.didSetLegendView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetSliceLegendView&&r.componentDidSetSliceLegendView(t,e,this)}},e.SliceFastener=fs.define({viewType:Xa,observeView:!0,willSetView:function(t,e){this.owner.willSetSliceView(t,e)},onSetView:function(t,e){this.owner.onSetSliceView(t,e)},didSetView:function(t,e){this.owner.didSetSliceView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeSliceView(t,e,i,o)},viewWillSetSliceValue:function(t,e,i){this.owner.willSetValue(t,e,i)},viewDidSetSliceValue:function(t,e,i){this.owner.onSetValue(t,e,i),this.owner.didSetValue(t,e,i)},viewDidSetSliceLabel:function(t,e){this.owner.label.setView(t)},viewDidSetSliceLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createSliceView()},traitType:Ka,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetSliceTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetSliceTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetSliceTrait(t,e)},traitDidSetSliceValue:function(t,e,i){this.owner.setValue(t,i)},traitDidSetSliceLabel:function(t,e,i){this.owner.setLabelView(t,i)},traitDidSetSliceLegend:function(t,e,i){this.owner.setLegendView(t,i)}}),m([ns({type:a.Timing,inherit:!0})],e.prototype,"sliceTiming",void 0),m([fs({extends:e.SliceFastener})],e.prototype,"slice",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetLegendView(t,e)},onSetView:function(t,e){this.owner.onSetLegendView(t,e)},didSetView:function(t,e){this.owner.didSetLegendView(t,e)}})],e.prototype,"legend",void 0),e}(bs),_a=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.baseAngle&&this.baseAngle(e.baseAngle),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.slices;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(Xa.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),t.textBaseline.setState("middle",Xi.Intrinsic),t.textOrigin.setState(this.center.state,Xi.Intrinsic))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPieTitle&&i.viewWillSetPieTitle(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPieTitle&&s.viewWillSetPieTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPieTitle&&r.viewDidSetPieTitle(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPieTitle&&s.viewDidSetPieTitle(t,e,this)},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null),t=Xa.fromAny(t);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createSliceFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initSlice=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabel(i,e);var o=t.legend.view;null!==o&&this.initSliceLegend(o,e)},e.prototype.attachSlice=function(t,e){},e.prototype.detachSlice=function(t,e){},e.prototype.willSetSlice=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetSlice&&n.viewWillSetSlice(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetSlice&&l.viewWillSetSlice(t,e,i,this)}},e.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},e.prototype.didSetSlice=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetSlice&&a.viewDidSetSlice(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetSlice&&l.viewDidSetSlice(t,e,i,this)},e.prototype.onSetSliceValue=function(t,e,i){this.requireUpdate(Xi.NeedsLayout)},e.prototype.initSliceLabel=function(t,e){},e.prototype.onSetSliceLabel=function(t,e,i){null!==t&&this.initSliceLabel(t,i)},e.prototype.initSliceLegend=function(t,e){},e.prototype.onSetSliceLegend=function(t,e,i){null!==t&&this.initSliceLegend(t,i)},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSlice=function(t){return t instanceof Xa?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectSlice(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectSlice(e);null!==i&&this.removeSlice(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutPie(this.viewFrame)},e.prototype.layoutPie=function(t){if(this.center.takesPrecedence(Xi.Intrinsic)){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setState(new r.R2Point(e,i),Xi.Intrinsic)}for(var o=this.sliceFasteners,n=o.length,s=0,a=0;a<n;a+=1){if(null!==(h=o[a].view)){var l=h.value.getValue();isFinite(l)&&(s+=l)}}s=Math.max(s,this.limit.getValue());var u=this.baseAngle.getValue().rad();for(a=0;a<n;a+=1){var h;if(null!==(h=o[a].view)){h.total.setState(s,Xi.Intrinsic),h.phaseAngle.setState(u,Xi.Intrinsic);l=h.value.getValue();if(isFinite(l)){var p=0!==s?l/s:0;u=r.Angle.rad(u.value+2*Math.PI*p)}}}var d=this.title.view;Vr.is(d)&&d.textOrigin.setState(this.center.value,Xi.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.SliceFastener=Lo.define({type:Xa,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetSlice(t,e,i,this)},viewDidSetSliceValue:function(t,e){this.owner.onSetSliceValue(t,e,this)},viewDidSetSliceLabel:function(t,e){this.owner.onSetSliceLabel(t,e,this)},viewDidSetSliceLegend:function(t,e){this.owner.onSetSliceLegend(t,e,this)}}),m([So({type:Number,state:0,updateFlags:Xi.NeedsLayout})],e.prototype,"limit",void 0),m([So({type:r.R2Point,state:r.R2Point.origin(),updateFlags:Xi.NeedsLayout})],e.prototype,"center",void 0),m([So({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:Xi.NeedsLayout})],e.prototype,"baseAngle",void 0),m([So({type:r.Length,state:r.Length.pct(3)})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(25)})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.deg(2)})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"labelRadius",void 0),m([So({type:St,state:null,look:Qt.accentColor})],e.prototype,"sliceColor",void 0),m([So({type:Number,state:.5})],e.prototype,"tickAlign",void 0),m([So({type:r.Length,state:r.Length.pct(30)})],e.prototype,"tickRadius",void 0),m([So({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([So({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([So({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickColor",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(sr),Qa=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPieTitle&&r.traitWillSetPieTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){},e.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPieTitle&&r.traitDidSetPieTitle(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createSliceFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initSlice=function(t,e){},e.prototype.attachSlice=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachSlice=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetSlice&&a.traitWillSetSlice(t,e,i,this)}},e.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},e.prototype.didSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetSlice&&a.traitDidSetSlice(t,e,i,this)}},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectSliceModel=function(t){return t.getTrait(Ka)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectSliceModel(n);null!==r&&this.insertSlice(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectSliceModel(e);if(null!==o){var n=null!==i?this.detectSliceModel(i):null;this.insertSlice(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectSliceModel(e);null!==i&&this.removeSlice(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingSlices()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingSlices()},e.SliceFastener=K.define({type:Ka,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetSlice(t,e,i,this)}}),m([j({state:null,willSetState:function(t,e){this.owner.willSetTitle(t,e)},didSetState:function(t,e){this.owner.onSetTitle(t,e),this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(at),Ja=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"sliceFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initPieTrait=function(t){},e.prototype.attachPieTrait=function(t){null!==this.pie.view&&this.setTitleView(t.title.state,t);for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertSliceTrait(n)}},e.prototype.detachPieTrait=function(t){for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeSliceTrait(n)}null!==this.pie.view&&this.setTitleView(null,t)},e.prototype.willSetPieTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPieTrait&&r.componentWillSetPieTrait(t,e,this)}},e.prototype.onSetPieTrait=function(t,e){null!==e&&this.detachPieTrait(e),null!==t&&(this.attachPieTrait(t),this.initPieTrait(t))},e.prototype.didSetPieTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPieTrait&&r.componentDidSetPieTrait(t,e,this)}},e.prototype.createPieView=function(){return _a.create()},e.prototype.initPieView=function(t){},e.prototype.attachPieView=function(t){this.title.setView(t.title.view);var e=this.pie.trait;null!==e&&this.setTitleView(e.title.state,e);for(var i=this.sliceFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var s=r.slice.view;null!==s&&null===s.parentView&&r.slice.injectView(t)}}},e.prototype.detachPieView=function(t){this.title.setView(null)},e.prototype.willSetPieView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPieView&&r.componentWillSetPieView(t,e,this)}},e.prototype.onSetPieView=function(t,e){null!==e&&this.detachPieView(e),null!==t&&(this.attachPieView(t),this.initPieView(t))},e.prototype.didSetPieView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPieView&&r.componentDidSetPieView(t,e,this)}},e.prototype.themePieView=function(t,e,i,o){},e.prototype.createTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setTitleView=function(t,e){var i=this.pie.view;if(null!==i){var o=null!==t?this.createTitleView(t,e):null;i.title.setView(o)}},e.prototype.initTitleView=function(t){},e.prototype.attachTitleView=function(t){},e.prototype.detachTitleView=function(t){},e.prototype.willSetTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPieTitleView&&r.componentWillSetPieTitleView(t,e,this)}},e.prototype.onSetTitleView=function(t,e){null!==e&&this.detachTitleView(e),null!==t&&(this.attachTitleView(t),this.initTitleView(t))},e.prototype.didSetTitleView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPieTitleView&&r.componentDidSetPieTitleView(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createSliceFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createSlice=function(t){return new Za},e.prototype.initSlice=function(t,e){var i=t.slice.trait;null!==i&&this.initSliceTrait(i,e);var o=t.slice.view;null!==o&&this.initSliceView(o,e)},e.prototype.attachSlice=function(t,e){var i=t.slice.trait;null!==i&&this.attachSliceTrait(i,e);var o=t.slice.view;null!==o&&this.attachSliceView(o,e)},e.prototype.detachSlice=function(t,e){var i=t.slice.view;null!==i&&this.detachSliceView(i,e);var o=t.slice.trait;null!==o&&this.detachSliceTrait(o,e)},e.prototype.willSetSlice=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSlice&&s.componentWillSetSlice(t,e,i)}},e.prototype.onSetSlice=function(t,e,i){null!==e&&this.detachSlice(e,i),null!==t&&(this.attachSlice(t,i),this.initSlice(t,i))},e.prototype.didSetSlice=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSlice&&s.componentDidSetSlice(t,e,i)}},e.prototype.insertSliceTrait=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.slice.trait===t)return;s.slice.trait===e&&(o=s)}}var a=this.createSlice(t);if(null!==a&&(a.slice.setTrait(t),this.insertChildComponent(a,o),null===a.slice.view)){var l=this.createSliceView(a),u=null;null!==o&&(u=o.slice.view);var h=this.pie.view;null!==h?a.slice.injectView(h,l,u,null):a.slice.setView(l,u)}},e.prototype.removeSliceTrait=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.slice.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initSliceTrait=function(t,e){},e.prototype.attachSliceTrait=function(t,e){},e.prototype.detachSliceTrait=function(t,e){},e.prototype.willSetSliceTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceTrait&&s.componentWillSetSliceTrait(t,e,i)}},e.prototype.onSetSliceTrait=function(t,e,i){null!==e&&this.detachSliceTrait(e,i),null!==t&&(this.attachSliceTrait(t,i),this.initSliceTrait(t,i))},e.prototype.didSetSliceTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceTrait&&s.componentDidSetSliceTrait(t,e,i)}},e.prototype.createSliceView=function(t){return t.slice.createView()},e.prototype.initSliceView=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.initSliceLegendView(o,e)},e.prototype.attachSliceView=function(t,e){var i=t.label.view;null!==i&&this.attachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.attachSliceLegendView(o,e)},e.prototype.detachSliceView=function(t,e){var i=t.label.view;null!==i&&this.detachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.detachSliceLegendView(o,e),t.remove()},e.prototype.willSetSliceView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceView&&s.componentWillSetSliceView(t,e,i)}},e.prototype.onSetSliceView=function(t,e,i){null!==e&&this.detachSliceView(e,i),null!==t&&(this.attachSliceView(t,i),this.initSliceView(t,i))},e.prototype.didSetSliceView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceView&&s.componentDidSetSliceView(t,e,i)}},e.prototype.willSetSliceValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceValue&&s.componentWillSetSliceValue(t,e,i)}},e.prototype.onSetSliceValue=function(t,e,i){if(0===t){var o=i.component;if(null!==o){var n=o.slice.trait;null!==n&&this.removeSliceTrait(n)}}},e.prototype.didSetSliceValue=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceValue&&s.componentDidSetSliceValue(t,e,i)}},e.prototype.initSliceLabelView=function(t,e){},e.prototype.attachSliceLabelView=function(t,e){},e.prototype.detachSliceLabelView=function(t,e){},e.prototype.willSetSliceLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceLabelView&&s.componentWillSetSliceLabelView(t,e,i)}},e.prototype.onSetSliceLabelView=function(t,e,i){null!==e&&this.detachSliceLabelView(e,i),null!==t&&(this.attachSliceLabelView(t,i),this.initSliceLabelView(t,i))},e.prototype.didSetSliceLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceLabelView&&s.componentDidSetSliceLabelView(t,e,i)}},e.prototype.initSliceLegendView=function(t,e){},e.prototype.attachSliceLegendView=function(t,e){},e.prototype.detachSliceLegendView=function(t,e){},e.prototype.willSetSliceLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetSliceLegendView&&s.componentWillSetSliceLegendView(t,e,i)}},e.prototype.onSetSliceLegendView=function(t,e,i){null!==e&&this.detachSliceLegendView(e,i),null!==t&&(this.attachSliceLegendView(t,i),this.initSliceLegendView(t,i))},e.prototype.didSetSliceLegendView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetSliceLegendView&&s.componentDidSetSliceLegendView(t,e,i)}},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.getSliceFastener=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.slice.trait===t)return n}return null},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSliceComponent=function(t){return t instanceof Za?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectSliceComponent(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectSliceComponent(e);null!==i&&this.removeSlice(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.PieFastener=fs.define({viewType:_a,observeView:!0,willSetView:function(t,e){this.owner.willSetPieView(t,e)},onSetView:function(t,e){this.owner.onSetPieView(t,e)},didSetView:function(t,e){this.owner.didSetPieView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePieView(t,e,i,o)},viewDidSetPieTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createPieView()},traitType:Qa,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPieTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPieTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPieTrait(t,e)},traitDidSetPieTitle:function(t,e,i){this.owner.setTitleView(t,i)},traitWillSetSlice:function(t,e,i){null!==e&&this.owner.removeSliceTrait(e)},traitDidSetSlice:function(t,e,i){null!==t&&this.owner.insertSliceTrait(t,i)}}),e.SliceFastener=gs.define({type:Za,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetSlice(t,e,this)},onSetComponent:function(t,e){this.owner.onSetSlice(t,e,this)},didSetComponent:function(t,e){this.owner.didSetSlice(t,e,this)},componentWillSetSliceTrait:function(t,e){this.owner.willSetSliceTrait(t,e,this)},componentDidSetSliceTrait:function(t,e){this.owner.onSetSliceTrait(t,e,this),this.owner.didSetSliceTrait(t,e,this)},componentWillSetSliceView:function(t,e){this.owner.willSetSliceView(t,e,this)},componentDidSetSliceView:function(t,e){this.owner.onSetSliceView(t,e,this),this.owner.didSetSliceView(t,e,this)},componentWillSetSliceValue:function(t,e){this.owner.willSetSliceValue(t,e,this)},componentDidSetSliceValue:function(t,e){this.owner.onSetSliceValue(t,e,this),this.owner.didSetSliceValue(t,e,this)},componentWillSetSliceLabelView:function(t,e){this.owner.willSetSliceLabelView(t,e,this)},componentDidSetSliceLabelView:function(t,e){this.owner.onSetSliceLabelView(t,e,this),this.owner.didSetSliceLabelView(t,e,this)},componentWillSetSliceLegendView:function(t,e){this.owner.willSetSliceLegendView(t,e,this)},componentDidSetSliceLegendView:function(t,e){this.owner.onSetSliceLegendView(t,e,this),this.owner.didSetSliceLegendView(t,e,this)}}),m([fs({extends:e.PieFastener})],e.prototype,"pie",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetTitleView(t,e)},onSetView:function(t,e){this.owner.onSetTitleView(t,e)},didSetView:function(t,e){this.owner.didSetTitleView(t,e)}})],e.prototype,"title",void 0),m([ns({type:a.Timing,state:!0})],e.prototype,"sliceTiming",void 0),e}(bs),$a=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"xCoord",{value:NaN,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yCoord",{value:NaN,enumerable:!0,configurable:!0}),Object.defineProperty(e,"y2Coord",{value:void 0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"gradientStop",{value:!1,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.setXCoord=function(t){Object.defineProperty(this,"xCoord",{value:t,enumerable:!0,configurable:!0})},e.prototype.setYCoord=function(t){Object.defineProperty(this,"yCoord",{value:t,enumerable:!0,configurable:!0})},e.prototype.setY2Coord=function(t){Object.defineProperty(this,"y2Coord",{value:t,enumerable:!0,configurable:!0})},e.prototype.willSetX=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointX&&i.viewWillSetDataPointX(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointX&&s.viewWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e){},e.prototype.didSetX=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointX&&r.viewDidSetDataPointX(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointX&&s.viewDidSetDataPointX(t,e,this)},e.prototype.willSetY=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointY&&i.viewWillSetDataPointY(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointY&&s.viewWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e){},e.prototype.didSetY=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointY&&r.viewDidSetDataPointY(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointY&&s.viewDidSetDataPointY(t,e,this)},e.prototype.willSetY2=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointY2&&i.viewWillSetDataPointY2(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointY2&&s.viewWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e){},e.prototype.didSetY2=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointY2&&r.viewDidSetDataPointY2(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointY2&&s.viewDidSetDataPointY2(t,e,this)},e.prototype.willSetRadius=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointRadius&&i.viewWillSetDataPointRadius(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointRadius&&s.viewWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointRadius&&r.viewDidSetDataPointRadius(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointRadius&&s.viewDidSetDataPointRadius(t,e,this)},e.prototype.willSetColor=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointColor&&i.viewWillSetDataPointColor(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointColor&&s.viewWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e){this.updateGradientStop()},e.prototype.didSetColor=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointColor&&r.viewDidSetDataPointColor(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointColor&&s.viewDidSetDataPointColor(t,e,this)},e.prototype.willSetOpacity=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointOpacity&&i.viewWillSetDataPointOpacity(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointOpacity&&s.viewWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e){this.updateGradientStop()},e.prototype.didSetOpacity=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointOpacity&&r.viewDidSetDataPointOpacity(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointOpacity&&s.viewDidSetDataPointOpacity(t,e,this)},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetDataPointLabel&&i.viewWillSetDataPointLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetDataPointLabel&&s.viewWillSetDataPointLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointLabel&&r.viewDidSetDataPointLabel(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetDataPointLabel&&s.viewDidSetDataPointLabel(t,e,this)},e.prototype.setState=function(t,e){void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.y2&&this.y2(t.y2,e),void 0!==t.radius&&this.radius(t.radius,e),void 0!==t.hitRadius&&this.hitRadius(t.hitRadius),void 0!==t.color&&this.color(t.color,e),void 0!==t.opacity&&this.opacity(t.opacity,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textColor&&this.textColor(t.textColor,e),void 0!==t.category&&this.category(t.category),void 0!==t.labelPadding&&this.labelPadding(t.labelPadding,e),void 0!==t.labelPlacement&&this.labelPlacement(t.labelPlacement),void 0!==t.label&&this.label(t.label)},e.prototype.isGradientStop=function(){return this.gradientStop},e.prototype.updateGradientStop=function(){Object.defineProperty(this,"gradientStop",{value:null!==this.color.value||void 0!==this.opacity.value,enumerable:!0,configurable:!0})},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutDataPoint(this.viewFrame)},e.prototype.layoutDataPoint=function(t){var e=this.label.view;null!==e&&this.layoutLabel(e,t)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state;if("above"!==i&&"below"!==i&&"middle"!==i){var o=this.category.state;i="increasing"===o||"maxima"===o?"above":"decreasing"===o||"minima"===o?"below":"above"}var n=this.xCoord,s=this.yCoord;"above"===i?s-=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height)):"below"===i&&(s+=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height))),Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),"above"===i?t.textBaseline.setState("bottom",Xi.Intrinsic):"below"===i?t.textBaseline.setState("top",Xi.Intrinsic):"middle"===i&&t.textBaseline.setState("middle",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(n,s),Xi.Intrinsic))},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;n=this.hitTestPoint(e,i,s,this.viewFrame)}}return n},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.hitRadius.state,r=this.radius.value;if(null!==r){var s=Math.min(o.width,o.height);n=Math.max(n,r.pxValue(s))}var a=this.xCoord-t,l=this.yCoord-e;return a*a+l*l<n*n?this:null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:void 0,willSetValue:function(t,e){this.owner.willSetX(t,e)},didSetValue:function(t,e){this.owner.onSetX(t,e),this.owner.didSetX(t,e)}})],e.prototype,"x",void 0),m([So({willSetValue:function(t,e){this.owner.willSetY(t,e)},didSetValue:function(t,e){this.owner.onSetY(t,e),this.owner.didSetY(t,e)}})],e.prototype,"y",void 0),m([So({willSetValue:function(t,e){this.owner.willSetY2(t,e)},didSetValue:function(t,e){this.owner.onSetY2(t,e),this.owner.didSetY2(t,e)}})],e.prototype,"y2",void 0),m([So({type:r.Length,state:null,willSetValue:function(t,e){this.owner.willSetRadius(t,e)},didSetValue:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([ho({type:Number,state:5})],e.prototype,"hitRadius",void 0),m([So({type:St,state:null,willSetValue:function(t,e){this.owner.willSetColor(t,e)},didSetValue:function(t,e){this.owner.onSetColor(t,e),this.owner.didSetColor(t,e)}})],e.prototype,"color",void 0),m([So({type:Number,willSetValue:function(t,e){this.owner.willSetOpacity(t,e)},didSetValue:function(t,e){this.owner.onSetOpacity(t,e),this.owner.didSetOpacity(t,e)}})],e.prototype,"opacity",void 0),m([So({type:gt,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:String})],e.prototype,"category",void 0),m([So({type:r.Length,state:r.Length.zero(),updateFlags:Xi.NeedsLayout})],e.prototype,"labelPadding",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([ho({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(sr),tl=function(t){function e(e,i){var o=t.call(this)||this;return Object.defineProperty(o.x,"ownState",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(o.y,"ownState",{value:i,enumerable:!0,configurable:!0}),o}return w(e,t),e.prototype.willSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointX&&r.traitWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e){},e.prototype.didSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointX&&r.traitDidSetDataPointX(t,e,this)}},e.prototype.willSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointY&&r.traitWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e){},e.prototype.didSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointY&&r.traitDidSetDataPointY(t,e,this)}},e.prototype.willSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointY2&&r.traitWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e){},e.prototype.didSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointY2&&r.traitDidSetDataPointY2(t,e,this)}},e.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointRadius&&r.traitWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointRadius&&r.traitDidSetDataPointRadius(t,e,this)}},e.prototype.willSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointColor&&r.traitWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e){},e.prototype.didSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointColor&&r.traitDidSetDataPointColor(t,e,this)}},e.prototype.willSetOpacity=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointOpacity&&r.traitWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e){},e.prototype.didSetOpacity=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointOpacity&&r.traitDidSetDataPointOpacity(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointLabel&&r.traitWillSetDataPointLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointLabel&&r.traitDidSetDataPointLabel(t,e,this)}},e.prototype.formatLabel=function(t,e){},m([j({willSetState:function(t,e){this.owner.willSetX(t,e)},didSetState:function(t,e){this.owner.onSetX(t,e),this.owner.didSetX(t,e)}})],e.prototype,"x",void 0),m([j({willSetState:function(t,e){this.owner.willSetY(t,e)},didSetState:function(t,e){this.owner.onSetY(t,e),this.owner.didSetY(t,e)}})],e.prototype,"y",void 0),m([j({willSetState:function(t,e){this.owner.willSetY2(t,e)},didSetState:function(t,e){this.owner.onSetY2(t,e),this.owner.didSetY2(t,e)}})],e.prototype,"y2",void 0),m([j({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetRadius(t,e)},didSetState:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetColor(t,e)},didSetState:function(t,e){this.owner.onSetColor(t,e),this.owner.didSetColor(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"color",void 0),m([j({type:Number,willSetState:function(t,e){this.owner.willSetOpacity(t,e)},didSetState:function(t,e){this.owner.onSetOpacity(t,e),this.owner.didSetOpacity(t,e)}})],e.prototype,"opacity",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(at),el=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createDataPointFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDataPoint=function(t,e){},e.prototype.attachDataPoint=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataPoint=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetDataPoint&&a.traitWillSetDataPoint(t,e,i,this)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetDataPoint&&a.traitDidSetDataPoint(t,e,i,this)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.onInsertDataPoint=function(t,e){this.insertDataPoint(t,e)},e.prototype.onRemoveDataPoint=function(t){this.removeDataPoint(t)},e.prototype.detectDataPointModel=function(t){return t.getTrait(tl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataPointModel(n);null!==r&&this.insertDataPoint(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDataPointModel(e);if(null!==o){var n=null!==i?this.detectDataPointModel(i):null;this.onInsertDataPoint(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDataPointModel(e);null!==i&&this.onRemoveDataPoint(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDataPoints()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDataPoints()},e.DataPointFastener=K.define({type:tl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)}}),e}(at),il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDataPointTrait=function(t){},e.prototype.attachDataPointTrait=function(t){null!==this.dataPoint.view&&(this.setX(t.x.state,t),this.setY(t.y.state,t),this.setY2(t.y2.state,t),this.setRadius(t.radius.state,t),this.setColor(t.color.state,t),this.setOpacity(t.opacity.state,t),this.setLabelView(t.label.state,t))},e.prototype.detachDataPointTrait=function(t){null!==this.dataPoint.view&&this.setLabelView(null,t)},e.prototype.willSetDataPointTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDataPointTrait&&r.componentWillSetDataPointTrait(t,e,this)}},e.prototype.onSetDataPointTrait=function(t,e){null!==e&&this.detachDataPointTrait(e),null!==t&&(this.attachDataPointTrait(t),this.initDataPointTrait(t))},e.prototype.didSetDataPointTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDataPointTrait&&r.componentDidSetDataPointTrait(t,e,this)}},e.prototype.updateLabel=function(t,e,i){var o=i.formatLabel(t,e);void 0!==o&&i.label.setState(o,v.Intrinsic)},e.prototype.createDataPointView=function(t){var e=$a.create();return null!==t&&(e.x.setState(t.x.state,Xi.Intrinsic),e.y.setState(t.y.state,Xi.Intrinsic),e.y2.setState(t.y2.state,Xi.Intrinsic),e.radius.setState(t.radius.state,Xi.Intrinsic)),e},e.prototype.initDataPointView=function(t){var e=this.dataPoint.trait;if(null!==e){var i=t.x.value,o=t.y.value;this.updateLabel(i,o,e)}},e.prototype.attachDataPointView=function(t){this.label.setView(t.label.view);var e=this.dataPoint.trait;null!==e&&(this.setX(e.x.state,e),this.setY(e.y.state,e),this.setY2(e.y2.state,e),this.setRadius(e.radius.state,e),this.setColor(e.color.state,e),this.setOpacity(e.opacity.state,e),this.setLabelView(e.label.state,e))},e.prototype.detachDataPointView=function(t){this.label.setView(null)},e.prototype.willSetDataPointView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDataPointView&&r.componentWillSetDataPointView(t,e,this)}},e.prototype.onSetDataPointView=function(t,e){null!==e&&this.detachDataPointView(e),null!==t&&(this.attachDataPointView(t),this.initDataPointView(t))},e.prototype.didSetDataPointView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDataPointView&&r.componentDidSetDataPointView(t,e,this)}},e.prototype.themeDataPointView=function(t,e,i,o){},e.prototype.setX=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.x.setState(t,i,Xi.Intrinsic))},e.prototype.willSetX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointX&&s.componentWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.y.value;this.updateLabel(t,n,o)}},e.prototype.didSetX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointX&&s.componentDidSetDataPointX(t,e,this)}},e.prototype.setY=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.y.setState(t,i,Xi.Intrinsic))},e.prototype.willSetY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointY&&s.componentWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.x.value;this.updateLabel(n,t,o)}},e.prototype.didSetY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointY&&s.componentDidSetDataPointY(t,e,this)}},e.prototype.setY2=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.y2.setState(t,i,Xi.Intrinsic))},e.prototype.willSetY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointY2&&s.componentWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e,i){},e.prototype.didSetY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointY2&&s.componentDidSetDataPointY2(t,e,this)}},e.prototype.setRadius=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.radius.setState(t,i,Xi.Intrinsic))},e.prototype.willSetRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointRadius&&s.componentWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e,i){},e.prototype.didSetRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointRadius&&s.componentDidSetDataPointRadius(t,e,this)}},e.prototype.setColor=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.color.setLook(t,i,Xi.Intrinsic):o.color.setState(t,i,Xi.Intrinsic))},e.prototype.willSetColor=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointColor&&s.componentWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e,i){},e.prototype.didSetColor=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointColor&&s.componentDidSetDataPointColor(t,e,this)}},e.prototype.setOpacity=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.opacity.setState(t,i,Xi.Intrinsic))},e.prototype.willSetOpacity=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointOpacity&&s.componentWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e,i){},e.prototype.didSetOpacity=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointOpacity&&s.componentDidSetDataPointOpacity(t,e,this)}},e.prototype.createLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLabelView=function(t,e){var i=this.dataPoint.view;if(null!==i){var o=null!==t?this.createLabelView(t,e):null;i.label.setView(o)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDataPointLabelView&&r.componentWillSetDataPointLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDataPointLabelView&&r.componentDidSetDataPointLabelView(t,e,this)}},e.DataPointFastener=fs.define({viewType:$a,observeView:!0,willSetView:function(t,e){this.owner.willSetDataPointView(t,e)},onSetView:function(t,e){this.owner.onSetDataPointView(t,e)},didSetView:function(t,e){this.owner.didSetDataPointView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeDataPointView(t,e,i,o)},viewWillSetDataPointX:function(t,e,i){this.owner.willSetX(t,e,i)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetX(t,e,i),this.owner.didSetX(t,e,i)},viewWillSetDataPointY:function(t,e,i){this.owner.willSetY(t,e,i)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetY(t,e,i),this.owner.didSetY(t,e,i)},viewWillSetDataPointY2:function(t,e,i){this.owner.willSetY2(t,e,i)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetY2(t,e,i),this.owner.didSetY2(t,e,i)},viewWillSetDataPointRadius:function(t,e,i){this.owner.willSetRadius(t,e,i)},viewDidSetDataPointRadius:function(t,e,i){this.owner.onSetRadius(t,e,i),this.owner.didSetRadius(t,e,i)},viewWillSetDataPointColor:function(t,e,i){this.owner.willSetColor(t,e,i)},viewDidSetDataPointColor:function(t,e,i){this.owner.onSetColor(t,e,i),this.owner.didSetColor(t,e,i)},viewWillSetDataPointOpacity:function(t,e,i){this.owner.willSetOpacity(t,e,i)},viewDidSetDataPointOpacity:function(t,e,i){this.owner.onSetOpacity(t,e,i),this.owner.didSetOpacity(t,e,i)},viewDidSetDataPointLabel:function(t,e){this.owner.label.setView(t)},createView:function(){return this.owner.createDataPointView(this.trait)},traitType:tl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDataPointTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataPointTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataPointTrait(t,e)},traitDidSetDataPointX:function(t,e,i){this.owner.setX(t,i)},traitDidSetDataPointY:function(t,e,i){this.owner.setY(t,i)},traitDidSetDataPointY2:function(t,e,i){this.owner.setY2(t,i)},traitDidSetDataPointRadius:function(t,e,i){this.owner.setRadius(t,i)},traitDidSetDataPointColor:function(t,e,i){this.owner.setColor(t,i)},traitDidSetDataPointOpacity:function(t,e,i){this.owner.setOpacity(t,i)},traitDidSetDataPointLabel:function(t,e,i){this.owner.setLabelView(t,i)}}),m([ns({type:a.Timing,inherit:!0})],e.prototype,"dataPointTiming",void 0),m([fs({extends:e.DataPointFastener})],e.prototype,"dataPoint",void 0),m([cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),e}(bs),ol=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initDataSetTrait=function(t){},e.prototype.attachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDataPointTrait(n)}},e.prototype.detachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDataPointTrait(n)}},e.prototype.willSetDataSetTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetDataSetTrait&&r.componentWillSetDataSetTrait(t,e,this)}},e.prototype.onSetDataSetTrait=function(t,e){null!==e&&this.detachDataSetTrait(e),null!==t&&(this.attachDataSetTrait(t),this.initDataSetTrait(t))},e.prototype.didSetDataSetTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetDataSetTrait&&r.componentDidSetDataSetTrait(t,e,this)}},e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createDataPointFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDataPoint=function(t){return new il},e.prototype.initDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.initDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.initDataPointView(o,e)},e.prototype.attachDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.attachDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.attachDataPointView(o,e)},e.prototype.detachDataPoint=function(t,e){var i=t.dataPoint.view;null!==i&&this.detachDataPointView(i,e);var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e)},e.prototype.willSetDataPoint=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPoint&&s.componentWillSetDataPoint(t,e,i)}},e.prototype.onSetDataPoint=function(t,e,i){null!==e&&this.detachDataPoint(e,i),null!==t&&(this.attachDataPoint(t,i),this.initDataPoint(t,i))},e.prototype.didSetDataPoint=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPoint&&s.componentDidSetDataPoint(t,e,i)}},e.prototype.insertDataPointTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.dataPoint.trait===t)return;s.dataPoint.trait===e&&(o=s)}}var a=this.createDataPoint(t);if(null!==a&&(a.dataPoint.setTrait(t),this.insertChildComponent(a,o),null===a.dataPoint.view)){var l=this.createDataPointView(a),u=null;null!==o&&(u=o.dataPoint.view),a.dataPoint.setView(l,u)}},e.prototype.removeDataPointTrait=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dataPoint.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDataPointTrait=function(t,e){},e.prototype.attachDataPointTrait=function(t,e){},e.prototype.detachDataPointTrait=function(t,e){},e.prototype.willSetDataPointTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointTrait&&s.componentWillSetDataPointTrait(t,e,i)}},e.prototype.onSetDataPointTrait=function(t,e,i){null!==e&&this.detachDataPointTrait(e,i),null!==t&&(this.attachDataPointTrait(t,i),this.initDataPointTrait(t,i))},e.prototype.didSetDataPointTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointTrait&&s.componentDidSetDataPointTrait(t,e,i)}},e.prototype.createDataPointView=function(t){return t.dataPoint.createView()},e.prototype.initDataPointView=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabelView(i,e)},e.prototype.attachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.attachDataPointLabelView(i,e)},e.prototype.detachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.detachDataPointLabelView(i,e),t.remove()},e.prototype.willSetDataPointView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointView&&s.componentWillSetDataPointView(t,e,i)}},e.prototype.onSetDataPointView=function(t,e,i){null!==e&&this.detachDataPointView(e,i),null!==t&&(this.attachDataPointView(t,i),this.initDataPointView(t,i))},e.prototype.didSetDataPointView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointView&&s.componentDidSetDataPointView(t,e,i)}},e.prototype.willSetDataPointX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointX&&s.componentWillSetDataPointX(t,e,i)}},e.prototype.onSetDataPointX=function(t,e,i){},e.prototype.didSetDataPointX=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointX&&s.componentDidSetDataPointX(t,e,i)}},e.prototype.willSetDataPointY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointY&&s.componentWillSetDataPointY(t,e,i)}},e.prototype.onSetDataPointY=function(t,e,i){},e.prototype.didSetDataPointY=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointY&&s.componentDidSetDataPointY(t,e,i)}},e.prototype.willSetDataPointY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointY2&&s.componentWillSetDataPointY2(t,e,i)}},e.prototype.onSetDataPointY2=function(t,e,i){},e.prototype.didSetDataPointY2=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointY2&&s.componentDidSetDataPointY2(t,e,i)}},e.prototype.willSetDataPointRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointRadius&&s.componentWillSetDataPointRadius(t,e,i)}},e.prototype.onSetDataPointRadius=function(t,e,i){},e.prototype.didSetDataPointRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointRadius&&s.componentDidSetDataPointRadius(t,e,i)}},e.prototype.willSetDataPointColor=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointColor&&s.componentWillSetDataPointColor(t,e,i)}},e.prototype.onSetDataPointColor=function(t,e,i){},e.prototype.didSetDataPointColor=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointColor&&s.componentDidSetDataPointColor(t,e,i)}},e.prototype.willSetDataPointOpacity=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointOpacity&&s.componentWillSetDataPointOpacity(t,e,i)}},e.prototype.onSetDataPointOpacity=function(t,e,i){},e.prototype.didSetDataPointOpacity=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointOpacity&&s.componentDidSetDataPointOpacity(t,e,i)}},e.prototype.initDataPointLabelView=function(t,e){},e.prototype.attachDataPointLabelView=function(t,e){},e.prototype.detachDataPointLabelView=function(t,e){},e.prototype.willSetDataPointLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataPointLabelView&&s.componentWillSetDataPointLabelView(t,e,i)}},e.prototype.onSetDataPointLabelView=function(t,e,i){null!==e&&this.detachDataPointLabelView(e,i),null!==t&&(this.attachDataPointLabelView(t,i),this.initDataPointLabelView(t,i))},e.prototype.didSetDataPointLabelView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataPointLabelView&&s.componentDidSetDataPointLabelView(t,e,i)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.getDataPointFastener=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.dataPoint.trait===t)return n}return null},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDataPointComponent=function(t){return t instanceof il?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectDataPointComponent(e);null!==o&&this.insertDataPoint(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectDataPointComponent(e);null!==i&&this.removeDataPoint(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.DataSetFastener=ps.define({type:el,observe:!0,willSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataSetTrait(t,e)},traitWillSetDataPoint:function(t,e,i){null!==e&&this.owner.removeDataPointTrait(e)},traitDidSetDataPoint:function(t,e,i){null!==t&&this.owner.insertDataPointTrait(t,i)}}),e.DataPointFastener=gs.define({type:il,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetDataPoint(t,e,this)},onSetComponent:function(t,e){this.owner.onSetDataPoint(t,e,this)},didSetComponent:function(t,e){this.owner.didSetDataPoint(t,e,this)},componentWillSetDataPointTrait:function(t,e){this.owner.willSetDataPointTrait(t,e,this)},componentDidSetDataPointTrait:function(t,e){this.owner.onSetDataPointTrait(t,e,this),this.owner.didSetDataPointTrait(t,e,this)},componentWillSetDataPointView:function(t,e){this.owner.willSetDataPointView(t,e,this)},componentDidSetDataPointView:function(t,e){this.owner.onSetDataPointView(t,e,this),this.owner.didSetDataPointView(t,e,this)},componentWillSetDataPointX:function(t,e){this.owner.willSetDataPointX(t,e,this)},componentDidSetDataPointX:function(t,e){this.owner.onSetDataPointX(t,e,this),this.owner.didSetDataPointX(t,e,this)},componentWillSetDataPointY:function(t,e){this.owner.willSetDataPointY(t,e,this)},componentDidSetDataPointY:function(t,e){this.owner.onSetDataPointY(t,e,this),this.owner.didSetDataPointY(t,e,this)},componentWillSetDataPointY2:function(t,e){this.owner.willSetDataPointY2(t,e,this)},componentDidSetDataPointY2:function(t,e){this.owner.onSetDataPointY2(t,e,this),this.owner.didSetDataPointY2(t,e,this)},componentWillSetDataPointRadius:function(t,e){this.owner.willSetDataPointRadius(t,e,this)},componentDidSetDataPointRadius:function(t,e){this.owner.onSetDataPointRadius(t,e,this),this.owner.didSetDataPointRadius(t,e,this)},componentWillSetDataPointColor:function(t,e){this.owner.willSetDataPointColor(t,e,this)},componentDidSetDataPointColor:function(t,e){this.owner.onSetDataPointColor(t,e,this),this.owner.didSetDataPointColor(t,e,this)},componentWillSetDataPointOpacity:function(t,e){this.owner.willSetDataPointOpacity(t,e,this)},componentDidSetDataPointOpacity:function(t,e){this.owner.onSetDataPointOpacity(t,e,this),this.owner.didSetDataPointOpacity(t,e,this)},componentWillSetDataPointLabelView:function(t,e){this.owner.willSetDataPointLabelView(t,e,this)},componentDidSetDataPointLabelView:function(t,e){this.owner.onSetDataPointLabelView(t,e,this),this.owner.didSetDataPointLabelView(t,e,this)}}),m([ps({extends:e.DataSetFastener})],e.prototype,"dataSet",void 0),m([ns({type:a.Timing,state:!0})],e.prototype,"dataPointTiming",void 0),e}(bs),nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.setScale=function(t,e,i,o,n){"string"==typeof t&&(t=ll.parseScale(t).domain),t instanceof a.Domain&&(n=i,e instanceof a.Domain&&(o=e[1],i=e[0]),e=t[1],t=t[0]);var r,s=this.state;if(null!==s){if(r=s.withDomain(t,e),void 0!==i&&void 0!==o&&(r=r.overRange(i,o)),(void 0===n||!1===n)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var l=this.getValue().withDomain(t,e);this.setValue(l),n=!0}}else r=ll.createScale(t,e,i,o);this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag),this.setOwnState(r,n)},e.prototype.setDomain=function(t,e,i){"string"==typeof t&&(t=ll.parseScale(t).domain),t instanceof a.Domain&&(i=e,e=t[1],t=t[0]);var o,n=this.state;if(null!==n){if(o=n.withDomain(t,e),(void 0===i||!1===i)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var r=this.getValue().withDomain(t,e);this.setValue(r),i=!0}}else o=ll.createScale(t,e,0,1);this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag),this.setOwnState(o,i)},e.prototype.setRange=function(t,e,i){var o=this.state;if(null!==o){t instanceof a.Range&&(i=e,e=t[1],t=t[0]);var n=o.overRange(t,e);if((void 0===i||!1===i)&&0!=(this.animatorFlags&bo.AnimatingFlag)){var r=this.getValue().overRange(t,e);this.setValue(r),i=!0}this.setAnimatorFlags(this.animatorFlags&~bo.InheritedFlag),this.setOwnState(n,i)}},e.prototype.setBaseScale=function(t,i,o,n,r){var s;this.isInherited()&&(s=this.superAnimator)instanceof e?s.setBaseScale(t,i,o,n,r):this.setScale(t,i,o,n,r)},e.prototype.setBaseDomain=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseDomain(t,i,o):this.setDomain(t,i,o)},e.prototype.setBaseRange=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseRange(t,i,o):this.setRange(t,i,o)},e.prototype.fromAny=function(t){return"string"==typeof t&&(t=ll.parseScale(t)),t},e}(So),rl={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ll||t instanceof nr&&"xScale"in t}return!1}},sl={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ll||t instanceof nr&&"yScale"in t}return!1}},al={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ll||t instanceof nr&&"xScale"in t&&"yScale"in t}return!1}},ll=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"scaledFlags",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"scaledFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataDomainPadded",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomainPadded",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale),void 0!==e.xDomainBounds&&this.xDomainBounds(e.xDomainBounds),void 0!==e.yDomainBounds&&this.yDomainBounds(e.yDomainBounds),void 0!==e.xZoomBounds&&this.xZoomBounds(e.xZoomBounds),void 0!==e.yZoomBounds&&this.yZoomBounds(e.yZoomBounds),void 0!==e.xDomainPadding&&this.xDomainPadding(e.xDomainPadding),void 0!==e.yDomainPadding&&this.yDomainPadding(e.yDomainPadding),void 0!==e.xRangePadding&&this.xRangePadding(e.xRangePadding),void 0!==e.yRangePadding&&this.yRangePadding(e.yRangePadding),void 0!==e.fitAlign&&this.fitAlign(e.fitAlign),void 0!==e.xFitAlign&&this.xFitAlign(e.xFitAlign),void 0!==e.yFitAlign&&this.yFitAlign(e.yFitAlign),void 0!==e.fitAspectRatio&&this.fitAspectRatio(e.fitAspectRatio),void 0!==e.preserveAspectRatio&&this.preserveAspectRatio(e.preserveAspectRatio),void 0!==e.domainTracking&&this.domainTracking(e.domainTracking),void 0!==e.xDomainTracking&&this.xDomainTracking(e.xDomainTracking),void 0!==e.yDomainTracking&&this.yDomainTracking(e.yDomainTracking),void 0!==e.gestures&&this.gestures(e.gestures),void 0!==e.xGestures&&this.xGestures(e.xGestures),void 0!==e.yGestures&&this.yGestures(e.yGestures),void 0!==e.scaleGesture&&(this.scaleGesture.setState(e.scaleGesture),e.scaleGesture.setView(this)),void 0!==e.rescaleTransition&&this.rescaleTransition.setState(e.rescaleTransition),void 0!==e.reboundTransition&&this.reboundTransition.setState(e.reboundTransition)},i.prototype.setScaledFlags=function(t){Object.defineProperty(this,"scaledFlags",{value:t,enumerable:!0,configurable:!0})},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXScale&&i.viewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXScale&&s.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXScale&&s.viewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYScale&&i.viewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYScale&&s.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYScale&&s.viewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(void 0===t){var o=this.xScale.value;return null!==o?o.domain:null}(t instanceof a.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.xRange();return t instanceof a.Domain||"string"==typeof t?null!==n?this.xScale.setBaseScale(t,n,i):this.xScale.setBaseDomain(t,i):null!==n?this.xScale.setBaseScale(t,e,n[0],n[1],i):this.xScale.setBaseDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(void 0===t){var o=this.yScale.value;return null!==o?o.domain:null}(t instanceof a.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.yRange();return t instanceof a.Domain||"string"==typeof t?null!==n?this.yScale.setBaseScale(t,a.LinearRange(n[1],n[0]),i):this.yScale.setBaseDomain(t,i):null!==n?this.yScale.setBaseScale(t,e,n[1],n[0],i):this.yScale.setBaseDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.viewFrame.width;if(isFinite(t)){var e=this.xRangePadding.state,i=e[0],o=t-e[1];return a.LinearRange(i,o)}return null},i.prototype.yRange=function(){var t=this.viewFrame.height;if(isFinite(t)){var e=this.yRangePadding.state,i=e[0],o=t-e[1];return a.LinearRange(o,i)}return null},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXDataDomain&&i.viewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXDataDomain&&s.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.updateXDataDomainPadded(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXDataDomain&&s.viewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t,i){var o=this.xDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=a.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=a.Domain(o[0],t[1]))),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYDataDomain&&i.viewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYDataDomain&&s.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.updateYDataDomainPadded(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYDataDomain&&s.viewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t,i){var o=this.yDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=a.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=a.Domain(o[0],t[1]))),this.setYDataDomain(o)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.setXDataDomainPadded=function(t){Object.defineProperty(this,"xDataDomainPadded",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataDomainPadded=function(){var t,e=this.xDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.xDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=a.Domain(i,o)}else t=null;this.setXDataDomainPadded(t)},i.prototype.setYDataDomainPadded=function(t){Object.defineProperty(this,"yDataDomainPadded",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataDomainPadded=function(){var t,e=this.yDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.xDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=a.Domain(i,o)}else t=null;this.setYDataDomainPadded(t)},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXRangePadding&&i.viewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXRangePadding&&s.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXRangePadding&&s.viewDidSetXRangePadding(t,e,this)},i.prototype.updateXRangePadding=function(t,e){if(this.xRangePadding.takesPrecedence(Xi.Intrinsic)){var i=this.xRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.xRangePadding.setState(i,Xi.Intrinsic)}},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYRangePadding&&i.viewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYRangePadding&&s.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYRangePadding&&s.viewDidSetYRangePadding(t,e,this)},i.prototype.updateYRangePadding=function(t,e){if(this.yRangePadding.takesPrecedence(Xi.Intrinsic)){var i=this.yRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.yRangePadding.setState(i,Xi.Intrinsic)}},i.prototype.xFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([t,e[1]]),this)},i.prototype.yFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([e[0],t]),this)},i.prototype.preserveAspectRatio=function(t){return void 0===t?0!=(this.scaledFlags&i.PreserveAspectRatioFlag):(t?this.setScaledFlags(this.scaledFlags|i.PreserveAspectRatioFlag):this.setScaledFlags(this.scaledFlags&~i.PreserveAspectRatioFlag),this)},i.prototype.domainTracking=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XDomainTrackingFlag),0!=(this.scaledFlags&i.YDomainTrackingFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),e?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.xDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.XDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),this)},i.prototype.yDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.YDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.gestures=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XGesturesFlag),0!=(this.scaledFlags&i.YGesturesFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?(this.setScaledFlags(this.scaledFlags|i.XGesturesFlag),this.didEnableXGestures()):(this.setScaledFlags(this.scaledFlags&~i.XGesturesFlag),this.didDisableXGestures()),e?(this.setScaledFlags(this.scaledFlags|i.YGesturesFlag),this.didEnableYGestures()):(this.setScaledFlags(this.scaledFlags&~i.YGesturesFlag),this.didDisableYGestures()),this)},i.prototype.xGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.XGesturesFlag):(t?(this.setScaledFlags(this.scaledFlags|i.XGesturesFlag),this.didEnableXGestures()):(this.setScaledFlags(this.scaledFlags&~i.XGesturesFlag),this.didDisableXGestures()),this)},i.prototype.yGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.YGesturesFlag):(t?(this.setScaledFlags(this.scaledFlags|i.YGesturesFlag),this.didEnableYGestures()):(this.setScaledFlags(this.scaledFlags&~i.YGesturesFlag),this.didDisableYGestures()),this)},i.prototype.didEnableXGestures=function(){null===this.scaleGesture.state&&this.scaleGesture.setState(!0)},i.prototype.didDisableXGestures=function(){},i.prototype.didEnableYGestures=function(){null===this.scaleGesture.state&&this.scaleGesture.setState(!0)},i.prototype.didDisableYGestures=function(){},i.prototype.createScaleGesture=function(){return new en(this,this)},i.prototype.fitX=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.XFitTweenFlag),this.requireUpdate(Xi.NeedsLayout)},i.prototype.fitY=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.YFitTweenFlag),this.requireUpdate(Xi.NeedsLayout)},i.prototype.fit=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.FitTweenMask),this.requireUpdate(Xi.NeedsLayout)},i.prototype.insertScaled=function(t,e){void 0===e&&(e=null);for(var i=this.scaledFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createScaledFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},i.prototype.removeScaled=function(t){for(var e=this.scaledFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initScaled=function(t,e){},i.prototype.willSetScaled=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetScaled&&n.viewWillSetScaled(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetScaled&&l.viewWillSetScaled(t,e,i,this)}},i.prototype.onSetScaled=function(t,e,i,o){null!==t&&(this.initScaled(t,o),rl.is(t)&&this.updateXDataDomain(t.xDataDomain,o),sl.is(t)&&this.updateYDataDomain(t.yDataDomain,o))},i.prototype.didSetScaled=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetScaled&&a.viewDidSetScaled(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetScaled&&l.viewDidSetScaled(t,e,i,this)},i.prototype.onSetScaledXScale=function(t,e,i){},i.prototype.onSetScaledYScale=function(t,e,i){},i.prototype.onSetScaledXRangePadding=function(t,e,i){this.updateXRangePadding(t,i)},i.prototype.onSetScaledYRangePadding=function(t,e,i){this.updateYRangePadding(t,i)},i.prototype.onSetScaledXDataDomain=function(t,e,i){this.updateXDataDomain(t,i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetScaledYDataDomain=function(t,e,i){this.updateYDataDomain(t,i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.createScaledFastener=function(t){return new i.ScaledFastener(this,t.key,"scaled")},i.prototype.mountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectScaled=function(t){return rl.is(t)||sl.is(t)?t:null},i.prototype.onInsertScaled=function(t,e){this.insertScaled(t,e)},i.prototype.onRemoveScaled=function(t){this.removeScaled(t)},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectScaled(e);null!==o&&this.onInsertScaled(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectScaled(e);null!==i&&this.onRemoveScaled(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(),this.updateScales()},i.prototype.resizeScales=function(){var t,e,o=this.xRange();if(null!==o)if(null!==(t=this.xScale.isInherited()?null:this.xScale.ownState))t.range.equals(o)||(this.xScale.setRange(o),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.xScale.superAnimator||null===this.xScale.superValue){var n=this.xDataDomainPadded;null!==n&&(t=i.createScale(n[0],n[1],o[0],o[1]),this.xScale.setState(t),this.setScaledFlags(this.scaledFlags|i.XFitFlag))}var r=this.yRange();if(null!==r)if(null!==(e=this.yScale.isInherited()?null:this.yScale.ownState))e.range.equals(r)||(this.yScale.setRange(r),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.yScale.superAnimator||null===this.yScale.superValue){var s=this.yDataDomainPadded;null!==s&&(e=i.createScale(s[0],s[1],r[0],r[1]),this.yScale.setState(e),this.setScaledFlags(this.scaledFlags|i.YFitFlag))}},i.prototype.updateScales=function(){var t=this.xScale.isInherited()?null:this.xScale.ownState,e=this.yScale.isInherited()?null:this.yScale.ownState;if(null!==t&&null!==e){var i=this.scaleGesture.state;if(!(null!==i&&i.isPressing())){var o=null!==i&&i.isCoasting();this.boundScales(t,e,o)}}},i.prototype.boundScales=function(t,o,n){var r=t.domain,s=o.domain,u=r,h=s,p=this.xDataDomainPadded;null!==p&&0!=(this.scaledFlags&i.XFitFlag)?(u=p,this.setScaledFlags(this.scaledFlags|i.XInRangeMask)):u=r;var d=this.yDataDomainPadded;null!==d&&0!=(this.scaledFlags&i.YFitFlag)?(h=d,this.setScaledFlags(this.scaledFlags|i.YInRangeMask)):h=s;var c=null!==p?p:r,v=this.xDomainBounds.state,f=!1===v[0]?void 0:!0===v[0]?c[0]:v[0],y=!1===v[1]?void 0:!0===v[1]?c[1]:v[1],g=this.xZoomBounds.state,w=g[0],m=g[1];!0===w?w=t instanceof a.LinearScale?i.LinearZoomMin:t instanceof l.TimeScale?i.TimeZoomMin:void 0:!1===w&&(w=void 0),!0===m?m=t instanceof a.LinearScale?i.LinearZoomMax:t instanceof l.TimeScale?i.TimeZoomMax:void 0:!1===m&&(m=void 0),u=t.clampDomain(f,y,w,m).domain;var b=null!==d?d:s,S=this.yDomainBounds.state,C=!1===S[0]?void 0:!0===S[0]?b[0]:S[0],P=!1===S[1]?void 0:!0===S[1]?b[1]:S[1],V=this.yZoomBounds.state,F=V[0],T=V[1];if(!0===F?F=o instanceof a.LinearScale?i.LinearZoomMin:o instanceof l.TimeScale?i.TimeZoomMin:void 0:!1===F&&(F=void 0),!0===T?T=o instanceof a.LinearScale?i.LinearZoomMax:o instanceof l.TimeScale?i.TimeZoomMax:void 0:!1===T&&(T=void 0),h=o.clampDomain(C,P,F,T).domain,null!==p&&!n&&0!=(this.scaledFlags&i.XDomainTrackingFlag)&&0!=(this.scaledFlags&i.XInRangeMask))if((this.scaledFlags&i.XInRangeMask)===i.XInRangeMask)u=p;else{var D=+u[1]-+u[0];u=0!=(this.scaledFlags&i.XMinInRangeFlag)?a.Domain(p[0],+p[0]+ +D):a.Domain(+p[1]-+D,p[1])}if(null!==d&&!n&&0!=(this.scaledFlags&i.YDomainTrackingFlag)&&0!=(this.scaledFlags&i.YInRangeMask))if((this.scaledFlags&i.YInRangeMask)===i.YInRangeMask)h=d;else{var M=+h[1]-+h[0];h=0!=(this.scaledFlags&i.YMinInRangeFlag)?a.Domain(d[0],+d[0]+ +M):a.Domain(+d[1]-+M,d[1])}var O=this.fitAspectRatio.state;if(void 0!==O&&0!=(this.scaledFlags&(i.PreserveAspectRatioFlag|i.FitMask))){var x=t.range,A=o.range,R=+u[1]-+u[0],k=+h[1]-+h[0],I=R/k,L=(x[1]-x[0])/(A[0]-A[1]),j=Math.abs(O*L);if(!e.Equivalent(I,j)){var W=this.fitAlign.state;if(O<0&&I<j||O>0&&I>j){var E=k*j-R;u=a.Domain(+u[0]-E*W[0],+u[1]+E*(1-W[0]))}else{var N=R/j-k;h=a.Domain(+h[0]-N*W[1],+h[1]+N*(1-W[1]))}}}if(0==(this.scaledFlags&i.XBoundingFlag)&&!e.Equivalent(u,r)){var G=void 0;0!=(this.scaledFlags&(i.XFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.XFitTweenFlag)||void 0!==(G=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==G&&this.setScaledFlags(this.scaledFlags|i.XBoundingFlag),this.willReboundX(t),this.xDomain(u,G),void 0===G&&!1!==G&&this.didReboundX(this.xScale.getState()),null!==p&&0!=(this.scaledFlags&i.XFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.XFitFlag)}if(0==(this.scaledFlags&i.YBoundingFlag)&&!e.Equivalent(h,s)){G=void 0;0!=(this.scaledFlags&(i.YFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.YFitTweenFlag)||void 0!==(G=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==G&&this.setScaledFlags(this.scaledFlags|i.YBoundingFlag),this.willReboundY(o),this.yDomain(h,G),void 0===G&&!1!==G&&this.didReboundY(this.yScale.getState()),null!==d&&0!=(this.scaledFlags&i.YFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.YFitFlag)}this.setScaledFlags(this.scaledFlags&~(i.InteractedFlag|i.RescaleFlag))},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Xi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var l,u,h,p,d=0,c=0,v=0,f=0,y=0,g=0;t.prototype.displayChildViews.call(this,n,r,(function(t,i,o){if(s.call(this,t,i,o),rl.is(t)&&t.xScale.isInherited()){var n=t.xDataDomain;if(null!==n){0!==y?(e.Values.compare(n[0],l)<0&&(l=n[0]),e.Values.compare(u,n[1])<0&&(u=n[1])):(l=n[0],u=n[1]);var r=t.xRangePadding();d=Math.max(r[0],d),c=Math.max(r[1],c),y+=1}}if(sl.is(t)&&t.yScale.isInherited()){var a=t.yDataDomain;if(null!==a){0!==g?(e.Values.compare(a[0],h)<0&&(h=a[0]),e.Values.compare(p,a[1])<0&&(p=a[1])):(h=a[0],p=a[1]);var w=t.yRangePadding();v=Math.max(w[0],v),f=Math.max(w[1],f),g+=1}}})),this.setXDataDomain(0!==y?a.Domain(l,u):null),this.setYDataDomain(0!==g?a.Domain(h,p):null),this.xRangePadding.setState([d,c],Xi.Intrinsic),this.yRangePadding.setState([v,f],Xi.Intrinsic)},i.prototype.onBeginBoundingXScale=function(t){},i.prototype.onEndBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onInterruptBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onBeginBoundingYScale=function(t){},i.prototype.onEndBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.onInterruptBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.willReboundX=function(t){var e=this.scaleGesture.state;null!==e&&e.neutralizeX()},i.prototype.didReboundX=function(t){},i.prototype.willReboundY=function(t){var e=this.scaleGesture.state;null!==e&&e.neutralizeY()},i.prototype.didReboundY=function(t){},i.prototype.willStartInteracting=function(){this.setScaledFlags(this.scaledFlags&~i.BoundingMask|i.InteractingFlag)},i.prototype.didStopInteracting=function(){var t=this.xScale.value,e=this.xDataDomain;if(null!==t&&null!==e){var o=t.domain;o.contains(e[0])?this.setScaledFlags(this.scaledFlags|i.XMinInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.XMinInRangeFlag),o.contains(e[1])?this.setScaledFlags(this.scaledFlags|i.XMaxInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.XMaxInRangeFlag)}var n=this.yScale.value,r=this.yDataDomain;if(null!==n&&null!==r){var s=n.domain;s.contains(r[0])?this.setScaledFlags(this.scaledFlags|i.YMinInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.YMinInRangeFlag),s.contains(r[1])?this.setScaledFlags(this.scaledFlags|i.YMaxInRangeFlag):this.setScaledFlags(this.scaledFlags&~i.YMaxInRangeFlag)}this.setScaledFlags(this.scaledFlags&~i.InteractingFlag|i.InteractedFlag)},i.prototype.didStopPressing=function(){this.requireUpdate(Xi.NeedsLayout)},i.prototype.willBeginCoast=function(t,e){0==(this.scaledFlags&i.XGesturesFlag)&&(t.disableX=!0,t.vx=0,t.ax=0),0==(this.scaledFlags&i.YGesturesFlag)&&(t.disableY=!0,t.vy=0,t.ay=0)},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountScaledFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountScaledFasteners(),t.prototype.unmountViewFasteners.call(this)},i.createScale=function(t,e,i,o){var n;if(n="number"==typeof i&&"number"==typeof o?a.LinearRange(i,o):a.LinearRange(0,1),"number"==typeof t&&"number"==typeof e)return a.LinearScale(a.LinearDomain(t,e),n);if(t instanceof l.DateTime&&e instanceof l.DateTime)return l.TimeScale(l.TimeDomain(t,e),n);throw new TypeError(t+", "+e+", "+i+", "+o)},i.parseScale=function(t){if("linear"===t)return a.LinearScale(a.LinearDomain(0,1),a.LinearRange(0,1));if("time"===t){var e=(r=l.DateTime.current()).withDay(r.day-1);return l.TimeScale(l.TimeDomain(e,r),a.LinearRange(0,1))}var i=t.split("..."),o=+i[0],n=+i[1];if(isFinite(o)&&isFinite(n))return a.LinearScale(a.LinearDomain(o,n),a.LinearRange(0,1));e=l.DateTime.parse(i[0]);var r=l.DateTime.parse(i[1]);return l.TimeScale(l.TimeDomain(e,r),a.LinearRange(0,1))},i.ScaledFastener=Lo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetScaled(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetScaled(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetScaled(t,e,i,this)},viewDidSetXScale:function(t,e){this.owner.onSetScaledXScale(t,e,this)},viewDidSetYScale:function(t,e){this.owner.onSetScaledYScale(t,e,this)},viewDidSetXRangePadding:function(t,e){this.owner.onSetScaledXRangePadding(t,e,this)},viewDidSetYRangePadding:function(t,e){this.owner.onSetScaledYRangePadding(t,e,this)},viewDidSetXDataDomain:function(t,e){this.owner.onSetScaledXDataDomain(t,e,this)},viewDidSetYDataDomain:function(t,e){this.owner.onSetScaledYDataDomain(t,e,this)}}),i.PreserveAspectRatioFlag=1,i.XDomainTrackingFlag=2,i.YDomainTrackingFlag=4,i.XGesturesFlag=8,i.YGesturesFlag=16,i.XMinInRangeFlag=32,i.XMaxInRangeFlag=64,i.YMinInRangeFlag=128,i.YMaxInRangeFlag=256,i.InteractingFlag=512,i.InteractedFlag=1024,i.XBoundingFlag=2048,i.YBoundingFlag=4096,i.XFitFlag=8192,i.YFitFlag=16384,i.XFitTweenFlag=32768,i.YFitTweenFlag=65536,i.RescaleFlag=1<<17,i.DomainTrackingMask=i.XDomainTrackingFlag|i.YDomainTrackingFlag,i.GesturesMask=i.XGesturesFlag|i.YGesturesFlag,i.XInRangeMask=i.XMinInRangeFlag|i.XMaxInRangeFlag,i.YInRangeMask=i.YMinInRangeFlag|i.YMaxInRangeFlag,i.InteractingMask=i.InteractingFlag|i.InteractedFlag,i.BoundingMask=i.XBoundingFlag|i.YBoundingFlag,i.FitMask=i.XFitFlag|i.YFitFlag,i.FitTweenMask=i.XFitTweenFlag|i.YFitTweenFlag,i.LinearZoomMin=1e6,i.LinearZoomMax=.001,i.TimeZoomMin=864e5,i.TimeZoomMax=1,i.insertChildFlags=sr.insertChildFlags|Xi.NeedsResize,m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onBeginBoundingXScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onEndBoundingXScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onInterruptBoundingXScale(t)}})],i.prototype,"xScale",void 0),m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onBeginBoundingYScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onEndBoundingYScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onInterruptBoundingYScale(t)}})],i.prototype,"yScale",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"xDomainBounds",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"yDomainBounds",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"xZoomBounds",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!0,!0]}})],i.prototype,"yZoomBounds",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!1,!1]}})],i.prototype,"xDomainPadding",void 0),m([ho({updateFlags:Xi.NeedsLayout,initState:function(){return[!1,!1]}})],i.prototype,"yDomainPadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),m([ho({type:Object,initState:function(){return[1,.5]},fromAny:function(t){return"number"==typeof t?[t,t]:t}})],i.prototype,"fitAlign",void 0),m([ho({type:Number})],i.prototype,"fitAspectRatio",void 0),m([ho({type:en,inherit:!0,state:null,fromAny:function(t){return!0===t?this.owner.createScaleGesture():!1===t?null:t}})],i.prototype,"scaleGesture",void 0),m([ho({type:a.Timing,inherit:!0,initState:function(){return a.Easing.linear.withDuration(250)}})],i.prototype,"rescaleTransition",void 0),m([ho({type:a.Timing,inherit:!0,initState:function(){return a.Easing.cubicOut.withDuration(250)}})],i.prototype,"reboundTransition",void 0),i}(sr),ul={is:function(t){if("object"==typeof t&&null!==t){return t instanceof hl||t instanceof pl||t instanceof nr&&"plotType"in t}return!1},fromType:function(t){if("bubble"===t)return new dl;if("line"===t)return new cl;if("area"===t)return new vl;throw new TypeError(""+t)},fromInit:function(t){var e=t.plotType;if("bubble"===e)return dl.fromInit(t);if("line"===e)return cl.fromInit(t);if("area"===e)return vl.fromInit(t);throw new TypeError(""+t)},fromAny:function(t){if(this.is(t))return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)}},hl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:[],enumerable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXScale&&i.viewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXScale&&s.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXScale&&s.viewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYScale&&i.viewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYScale&&s.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYScale&&s.viewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXRangePadding&&i.viewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXRangePadding&&s.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXRangePadding&&s.viewDidSetXRangePadding(t,e,this)},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYRangePadding&&i.viewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYRangePadding&&s.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYRangePadding&&s.viewDidSetYRangePadding(t,e,this)},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXDataDomain&&i.viewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXDataDomain&&s.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXDataDomain&&s.viewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t){var i=t.x.getValue(),o=this.xDataDomain;null===o?o=a.Domain(i,i):e.Values.compare(i,o[0])<0?o=a.Domain(i,o[1]):e.Values.compare(o[1],i)<0&&(o=a.Domain(o[0],i)),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYDataDomain&&i.viewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYDataDomain&&s.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYDataDomain&&s.viewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=a.Domain(i,i):(e.Values.compare(i,n[0])<0?n=a.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=a.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=a.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=a.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),t=$a.fromAny(t);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var a=this.createDataPointFastener(t);i.splice(o,0,a),a.setView(t,e),this.isMounted()&&a.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){},i.prototype.willSetDataPoint=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetDataPoint&&n.viewWillSetDataPoint(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetDataPoint&&l.viewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetDataPoint&&a.viewDidSetDataPoint(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetDataPoint&&l.viewDidSetDataPoint(t,e,i,this)},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectDataPoint=function(t){return t instanceof $a?t:null},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDataPoint(e);null!==o&&this.insertDataPoint(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDataPoint(e);null!==i&&this.removeDataPoint(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Xi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var l,u,h,p,d=this.viewFrame,c=Math.min(d.width,d.height),v=0,f=0,y=0,g=0,w=null;t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){if(t instanceof $a){var a=t.x.getValue(),m=t.y.getValue(),b=t.y2.value,S=t.radius.value,C=i(a),P=o(m);if(t.setXCoord(d.xMin+C),t.setYCoord(d.yMin+P),null!==w?(e.Values.compare(a,l)<0?l=a:e.Values.compare(u,a)<0&&(u=a),e.Values.compare(m,h)<0?h=m:e.Values.compare(p,m)<0&&(p=m),void 0!==b&&(e.Values.compare(b,h)<0?h=b:e.Values.compare(p,b)<0&&(p=b))):(l=a,u=a,h=m,p=m),null!==S){var V=S.pxValue(c);v=Math.max(V,v),f=Math.max(V,f),y=Math.max(V,y),g=Math.max(V,g)}w=t}s.call(this,t,n,r)})),this.setXDataDomain(null!==w?a.Domain(l,u):null),this.setYDataDomain(null!==w?a.Domain(h,p):null),this.xRangePadding.setState([v,f],Xi.Intrinsic),this.yRangePadding.setState([y,g],Xi.Intrinsic)},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("bubble"===t)return new dl;throw new TypeError(""+t)},i.fromInit=function(t){if("bubble"===t.plotType)return dl.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=Lo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},viewDidSetDataPointLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([So({type:gt,state:null,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(sr),pl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"dataPointFasteners",{value:new h.BTree,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataDomain",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"xDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"yDataRange",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"gradientStops",{value:0,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.hitMode&&this.hitMode(e.hitMode)},i.prototype.willSetXScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXScale&&i.viewWillSetXScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXScale&&s.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXScale&&s.viewDidSetXScale(t,e,this)},i.prototype.willSetYScale=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYScale&&i.viewWillSetYScale(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYScale&&s.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYScale&&s.viewDidSetYScale(t,e,this)},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXRangePadding&&i.viewWillSetXRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXRangePadding&&s.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXRangePadding&&s.viewDidSetXRangePadding(t,e,this)},i.prototype.willSetYRangePadding=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYRangePadding&&i.viewWillSetYRangePadding(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYRangePadding&&s.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYRangePadding&&s.viewDidSetYRangePadding(t,e,this)},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),Object.defineProperty(this,"xDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetXDataDomain&&i.viewWillSetXDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetXDataDomain&&s.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetXDataDomain&&s.viewDidSetXDataDomain(t,e,this)},i.prototype.updateXDataDomain=function(t){var e,i=this.dataPointFasteners,o=i.firstKey(),n=i.lastKey();if(void 0!==o&&void 0!==n)e=a.Domain(o,n);else{var r=t.x.getValue();e=a.Domain(r,r)}this.setXDataDomain(e)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),Object.defineProperty(this,"yDataDomain",{value:t,enumerable:!0,configurable:!0}),this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetYDataDomain&&i.viewWillSetYDataDomain(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetYDataDomain&&s.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(Xi.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetYDataDomain&&s.viewDidSetYDataDomain(t,e,this)},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=a.Domain(i,i):(e.Values.compare(i,n[0])<0?n=a.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=a.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=a.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=a.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){Object.defineProperty(this,"xDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){Object.defineProperty(this,"yDataRange",{value:t,enumerable:!0,configurable:!0})},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(a.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),(t=$a.fromAny(t)).remove();var i=t.x.getState();this.removeDataPoint(i);var o=this.createDataPointFastener(t);this.willInsertChildView(t,null),this.dataPointFasteners.set(i,o),o.setView(t,e),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),this.isMounted()&&o.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){t instanceof $a&&(t=t.x.getState());var e=this.dataPointFasteners.get(t);if(void 0!==e){var i=e.view;if(i.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){this.updateXDataDomain(t)},i.prototype.willSetDataPoint=function(t,e,i,o){var n=this.viewController;null!==n&&void 0!==n.viewWillSetDataPoint&&n.viewWillSetDataPoint(t,e,i,this);for(var r=this.viewObservers,s=0,a=r.length;s<a;s+=1){var l=r[s];void 0!==l.viewWillSetDataPoint&&l.viewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.viewDidSetDataPoint&&a.viewDidSetDataPoint(t,e,i,this)}var l=this.viewController;null!==l&&void 0!==l.viewDidSetDataPoint&&l.viewDidSetDataPoint(t,e,i,this)},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(Xi.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(Xi.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.getDataPointFastener=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e:null},i.prototype.getDataPointView=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e.view:null},i.prototype.mountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.mount()}),this)},i.prototype.unmountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.unmount()}),this)},Object.defineProperty(i.prototype,"childViewCount",{get:function(){return this.dataPointFasteners.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){var t=[];return this.dataPointFasteners.forEachValue((function(e){t.push(e.view)}),this),t},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){var t=this.dataPointFasteners.firstValue();return void 0!==t?t.view:null},i.prototype.lastChildView=function(){var t=this.dataPointFasteners.lastValue();return void 0!==t?t.view:null},i.prototype.nextChildView=function(t){if(t instanceof $a){var e=this.dataPointFasteners.nextValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof $a){var e=this.dataPointFasteners.previousValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.forEachChildView=function(t,e){return this.dataPointFasteners.forEachValue((function(i){var o=t.call(e,i.view);if(void 0!==o)return o}),e)},i.prototype.getChildView=function(t){return null},i.prototype.setChildView=function(t,e){throw new Error("unsupported")},i.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof $a))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof $a))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof $a))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof $a))throw new TypeError(""+t);this.removeDataPoint(t.x.getState())},i.prototype.removeAll=function(){this.dataPointFasteners.forEach((function(t,e){var i=e.view;this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}),this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&Xi.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var l,u,h,p,d,c,v=this.viewFrame,f=0,y=null,g=null;if(t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){var a=t,w=a.x.getValue(),m=a.y.getValue(),b=a.y2.value,S=i(w),C=o(m);a.setXCoord(v.xMin+S),a.setYCoord(v.yMin+C);var P=void 0!==b?o(b):void 0;if(void 0!==P?a.setY2Coord(v.yMin+P):void 0!==a.y2Coord&&a.setY2Coord(void 0),a.isGradientStop()&&(f+=1),null!==g){var V=void 0;V=null!==y?e.Values.compare(d,c)<0&&e.Values.compare(m,c)<0?"maxima":e.Values.compare(c,d)<0&&e.Values.compare(c,m)<0?"minima":e.Values.compare(d,c)<0&&e.Values.compare(c,m)<0?"increasing":e.Values.compare(c,d)<0&&e.Values.compare(m,c)<0?"decreasing":"flat":e.Values.compare(c,m)<0?"increasing":e.Values.compare(m,c)<0?"decreasing":"flat",g.category.setState(V,Xi.Intrinsic),e.Values.compare(m,h)<0?h=m:e.Values.compare(p,m)<0&&(p=m),void 0!==b&&(e.Values.compare(b,h)<0?h=b:e.Values.compare(p,b)<0&&(p=b))}else l=w,u=w,h=m,p=m;y=g,g=a,d=c,c=m,u=w,s.call(this,t,n,r)})),null!==g){var w=void 0;w=null!==y?e.Values.compare(d,c)<0?"increasing":e.Values.compare(c,d)<0?"decreasing":"flat":"flat",g.category.setState(w,Xi.Intrinsic)}this.setXDataDomain(null!==y?a.Domain(l,u):null),this.setYDataDomain(null!==y?a.Domain(h,p):null),Object.defineProperty(this,"gradientStops",{value:f,enumerable:!0,configurable:!0})},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.doHitTest=function(t,e,i){var o=null,n=this.hitMode.state;if("none"!==n){var r=i.renderer;if(r instanceof cr){var s=r.context;s.save(),t*=r.pixelRatio,e*=r.pixelRatio,o="domain"===n?this.hitTestDomain(t,e,r):this.hitTestPlot(t,e,r),s.restore()}}return o},i.prototype.hitTestDomain=function(t,e,i){var o=this.xScale.value;if(null!==o){var n=o.inverse(t/i.pixelRatio-this.viewFrame.xMin),r=this.dataPointFasteners.previousValue(n),s=this.dataPointFasteners.nextValue(n),a=void 0!==r?r.view.x.value:void 0,l=void 0!==s?s.view.x.value:void 0,u=void 0!==a?+n-+a:NaN,h=void 0!==l?+l-+n:NaN;if(u<=h)return r.view;if(u>h)return s.view;if(void 0!==r)return r.view;if(void 0!==s)return s.view}return null},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("line"===t)return new cl;if("area"===t)return new vl;throw new TypeError(""+t)},i.fromInit=function(t){var e=t.plotType;if("line"===e)return cl.fromInit(t);if("area"===e)return vl.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=Lo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},viewDidSetDataPointLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([So({type:gt,state:null,inherit:!0})],i.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([ho({type:String,state:"domain"})],i.prototype,"hitMode",void 0),m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([So({extends:nl,type:a.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([ho({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(nr),dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.radius&&this.radius(e.radius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"bubble"},enumerable:!1,configurable:!0}),e.prototype.willSetRadius=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPlotRadius&&i.viewWillSetPlotRadius(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPlotRadius&&s.viewWillSetPlotRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotRadius&&r.viewDidSetPlotRadius(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPlotRadius&&s.viewDidSetPlotRadius(t,e,this)},e.prototype.willSetFill=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPlotFill&&i.viewWillSetPlotFill(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPlotFill&&s.viewWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotFill&&r.viewDidSetPlotFill(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPlotFill&&s.viewDidSetPlotFill(t,e,this)},e.prototype.renderPlot=function(t,e){for(var i=Math.min(e.width,e.height),o=this.radius.getValueOr(r.Length.zero()),n=this.fill.value,s=this.stroke.value,a=this.strokeWidth.value,l=this.dataPointFasteners,u=0,h=l.length;u<h;u+=1){var p=l[u].view;t.beginPath();var d=p.radius.getValueOr(o).pxValue(i);t.arc(p.xCoord,p.yCoord,d,0,2*Math.PI);var c=p.color.getValueOr(n);if(null!==c){var v=p.opacity.value;void 0!==v&&(c=c.alpha(v)),t.fillStyle=c.toString(),t.fill()}null!==s&&(null!==a&&(t.lineWidth=a.pxValue(i)),t.strokeStyle=s.toString(),t.stroke())}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.px(5),willSetValue:function(t,e){this.owner.willSetRadius(t,e)},didSetValue:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([So({type:St,state:null,look:Qt.accentColor,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),m([So({type:St,state:null})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null})],e.prototype,"strokeWidth",void 0),e}(hl),cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"line"},enumerable:!1,configurable:!0}),e.prototype.willSetStroke=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPlotStroke&&i.viewWillSetPlotStroke(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPlotStroke&&s.viewWillSetPlotStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotStroke&&r.viewDidSetPlotStroke(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPlotStroke&&s.viewDidSetPlotStroke(t,e,this)},e.prototype.willSetStrokeWidth=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPlotStrokeWidth&&i.viewWillSetPlotStrokeWidth(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPlotStrokeWidth&&s.viewWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){if(this.xRangePadding.takesPrecedence(Xi.Intrinsic)||this.yRangePadding.takesPrecedence(Xi.Intrinsic)){var i=this.viewFrame,o=Math.min(i.width,i.height),n=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(o)/2;this.xRangePadding.setState([n,n],Xi.Intrinsic),this.yRangePadding.setState([n,n],Xi.Intrinsic)}},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotStrokeWidth&&r.viewDidSetPlotStrokeWidth(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPlotStrokeWidth&&s.viewDidSetPlotStrokeWidth(t,e,this)},e.prototype.renderPlot=function(t,e){var i,o,n,s=Math.min(e.width,e.height),a=this.stroke.getValueOr(St.transparent()),l=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(s),u=this.gradientStops,h=null,p=this.dataPointFasteners;if(p.isEmpty())i=NaN,o=NaN,n=NaN;else{var d=p.firstValue().view,c=p.lastValue().view;i=d.xCoord,o=c.xCoord,n=o-i,0!==u&&(h=t.createLinearGradient(i,0,o,0))}t.beginPath();var v=0;p.forEach((function(e,o){var r=o.view,s=r.xCoord,l=r.yCoord;if(0===v?t.moveTo(s,l):t.lineTo(s,l),null!==h&&r.isGradientStop()){var u=r.color.getValueOr(a),p=r.opacity.value;void 0!==p&&(u=u.alpha(p));var d=(s-i)/(n||1);h.addColorStop(d,u.toString())}v+=1}),this),t.strokeStyle=null!==h?h:a.toString(),t.lineWidth=l,t.stroke()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.hitWidth.state,r=this.strokeWidth.value;if(null!==r){var s=this.viewFrame,a=Math.min(s.width,s.height);n=Math.max(n,r.pxValue(a))}o.beginPath();var l=0;if(this.dataPointFasteners.forEach((function(t,e){var i=e.view,n=i.xCoord,r=i.yCoord;0===l?o.moveTo(n,r):o.lineTo(n,r),l+=1}),this),o.lineWidth=n,o.isPointInStroke(t,e)){var u=this.hitMode.state;if("plot"===u)return this;if("data"===u)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:St,state:null,look:Qt.accentColor,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:r.Length.px(1),willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([ho({type:Number,state:5})],e.prototype,"hitWidth",void 0),e}(pl),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"area"},enumerable:!1,configurable:!0}),e.prototype.willSetFill=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetPlotFill&&i.viewWillSetPlotFill(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetPlotFill&&s.viewWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotFill&&r.viewDidSetPlotFill(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetPlotFill&&s.viewDidSetPlotFill(t,e,this)},e.prototype.renderPlot=function(t,e){var i,o,n,r=this.fill.getValueOr(St.transparent()),s=this.gradientStops,a=null;t.beginPath();var l=this.dataPointFasteners;if(l.isEmpty())i=NaN,o=NaN,n=NaN;else{var u=l.firstValue().view,h=l.lastValue().view;if(i=u.xCoord,n=(o=h.xCoord)-i,t.moveTo(u.xCoord,u.yCoord),0!==s&&(a=t.createLinearGradient(i,0,o,0),u.isGradientStop())){var p=u.color.getValueOr(r);void 0!==(v=u.opacity.value)&&(p=p.alpha(v)),a.addColorStop(0,p.toString())}}var d=l.values();for(d.next();d.hasNext();){var c=d.next().value.view;if(t.lineTo(c.xCoord,c.yCoord),null!==a&&c.isGradientStop()){var v;p=c.color.value||r;void 0!==(v=c.opacity.value)&&(p=p.alpha(v));var f=(c.xCoord-i)/(n||1);a.addColorStop(f,p.toString())}}for(;d.hasPrevious();){c=d.previous().value.view;t.lineTo(c.xCoord,c.y2Coord)}l.isEmpty()||t.closePath(),t.fillStyle=null!==a?a:r.toString(),t.fill()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.dataPointFasteners;o.beginPath();var r=n.values();if(r.hasNext()){var s=r.next().value.view;o.moveTo(s.xCoord,s.yCoord)}for(;r.hasNext();){s=r.next().value.view;o.lineTo(s.xCoord,s.yCoord)}for(;r.hasPrevious();){s=r.previous().value.view;o.lineTo(s.xCoord,s.y2Coord)}if(n.isEmpty()||o.closePath(),o.isPointInPath(t,e)){var a=this.hitMode.state;if("plot"===a)return this;if("data"===a)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:St,state:null,look:Qt.accentColor,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),e}(pl),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDataSet=function(t){},e.prototype.attachDataSet=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataSet=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetDataSet&&s.traitWillSetDataSet(t,e,i,this)}},e.prototype.onSetDataSet=function(t,e,i){null!==e&&this.detachDataSet(e),null!==t&&(this.attachDataSet(t),this.initDataSet(t))},e.prototype.didSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetDataSet&&s.traitDidSetDataSet(t,e,i,this)}},e.prototype.detectDataSetTrait=function(t){return t instanceof el?t:null},e.prototype.detectTraits=function(t){if(null===this.dataSet.trait)for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataSetTrait(n);null!==r&&this.dataSet.setTrait(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.dataSet.trait){var o=this.detectDataSetTrait(e);null!==o&&this.dataSet.setTrait(o,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectDataSetTrait(e);null!==i&&this.dataSet.trait===i&&this.dataSet.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.removeTraitConsumer(this)},m([K({type:el,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataSet(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetDataSet(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetDataSet(t,e,i)}})],e.prototype,"dataSet",void 0),e}(at),yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(fl),gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(fl),wl=function(t){function i(){var e=t.call(this)||this;return Object.defineProperty(e,"radius",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"fill",{value:null,enumerable:!0,configurable:!0}),e}return w(i,t),i.prototype.setRadius=function(t){t=r.Length.fromAny(t);var i=this.radius;e.Equals(t,i)||(this.willSetRadius(t,i),Object.defineProperty(this,"radius",{value:t,enumerable:!0,configurable:!0}),this.onSetRadius(t,i),this.didSetRadius(t,i))},i.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotRadius&&r.traitWillSetPlotRadius(t,e,this)}},i.prototype.onSetRadius=function(t,e){},i.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotRadius&&r.traitDidSetPlotRadius(t,e,this)}},i.prototype.setFill=function(t){null===t||t instanceof Qt||(t=St.fromAny(t));var i=this.fill;e.Equals(t,i)||(this.willSetFill(t,i),Object.defineProperty(this,"fill",{value:t,enumerable:!0,configurable:!0}),this.onSetFill(t,i),this.didSetFill(t,i))},i.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotFill&&r.traitWillSetPlotFill(t,e,this)}},i.prototype.onSetFill=function(t,e){},i.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotFill&&r.traitDidSetPlotFill(t,e,this)}},i}(yl),ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotStroke&&r.traitWillSetPlotStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotStroke&&r.traitDidSetPlotStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotStrokeWidth&&r.traitWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotStrokeWidth&&r.traitDidSetPlotStrokeWidth(t,e,this)}},m([j({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([j({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(gl),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotFill&&r.traitWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotFill&&r.traitDidSetPlotFill(t,e,this)}},m([j({state:null,willSetState:function(t,e){this.owner.willSetFill(t,e)},didSetState:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"fill",void 0),e}(gl),Sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.createPlot=function(t){return t instanceof wl?new Vl:t instanceof ml?new Fl:t instanceof bl?new Tl:null},m([ns({type:a.Timing,inherit:!0})],e.prototype,"plotTiming",void 0),e}(ol),Cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Sl),Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Sl),Vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(el)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){null!==this.plot.view&&(this.setPlotRadius(t.radius,t),this.setPlotFill(t.fill,t))},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotTrait&&r.componentWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotTrait&&r.componentDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return dl.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;null!==e&&(this.setPlotRadius(e.radius,e),this.setPlotFill(e.fill,e));for(var i=this.dataPointFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;null!==r&&r.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotView&&r.componentWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotView&&r.componentDidSetPlotView(t,e,this)}},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.setPlotRadius=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.radius.setState(t,i,Xi.Intrinsic))},e.prototype.willSetPlotRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotRadius&&s.componentWillSetPlotRadius(t,e,this)}},e.prototype.onSetPlotRadius=function(t,e,i){},e.prototype.didSetPlotRadius=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotRadius&&s.componentDidSetPlotRadius(t,e,this)}},e.prototype.setPlotFill=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.fill.setLook(t,i,Xi.Intrinsic):o.fill.setState(t,i,Xi.Intrinsic))},e.prototype.willSetPlotFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotFill&&s.componentWillSetPlotFill(t,e,this)}},e.prototype.onSetPlotFill=function(t,e,i){},e.prototype.didSetPlotFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotFill&&s.componentDidSetPlotFill(t,e,this)}},e.PlotFastener=fs.define({viewType:dl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(t,e,i,o)},viewWillSetPlotRadius:function(t,e,i){this.owner.willSetPlotRadius(t,e,i)},viewDidSetPlotRadius:function(t,e,i){this.owner.onSetPlotRadius(t,e,i),this.owner.didSetPlotRadius(t,e,i)},viewWillSetPlotFill:function(t,e,i){this.owner.willSetPlotFill(t,e,i)},viewDidSetPlotFill:function(t,e,i){this.owner.onSetPlotFill(t,e,i),this.owner.didSetPlotFill(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:wl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotRadius:function(t,e,i){this.owner.setPlotRadius(t,i)},traitDidSetPlotFill:function(t,e,i){this.owner.setPlotFill(t,i)}}),m([fs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Cl),Fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(el)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=this.plot.view;null!==o&&e.dataPoint.injectView(o)},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){if(null!==this.plot.view){var e=t.stroke.state;null!==e&&this.setPlotStroke(e,t);var i=t.strokeWidth.state;null!==i&&this.setPlotStrokeWidth(i,t)}},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotTrait&&r.componentWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotTrait&&r.componentDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return cl.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;if(null!==e){var i=e.stroke.state;null!==i&&this.setPlotStroke(i,e);var o=e.strokeWidth.state;null!==o&&this.setPlotStrokeWidth(o,e)}for(var n=this.dataPointFasteners,r=0,s=n.length;r<s;r+=1){var a=n[r].component;null!==a&&a.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotView&&r.componentWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotView&&r.componentDidSetPlotView(t,e,this)}},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.setPlotStroke=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.stroke.setLook(t,i,Xi.Intrinsic):o.stroke.setState(t,i,Xi.Intrinsic))},e.prototype.willSetPlotStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotStroke&&s.componentWillSetPlotStroke(t,e,this)}},e.prototype.onSetPlotStroke=function(t,e,i){},e.prototype.didSetPlotStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotStroke&&s.componentDidSetPlotStroke(t,e,this)}},e.prototype.setPlotStrokeWidth=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.strokeWidth.setState(t,i,Xi.Intrinsic))},e.prototype.willSetPlotStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotStrokeWidth&&s.componentWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetPlotStrokeWidth=function(t,e,i){},e.prototype.didSetPlotStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotStrokeWidth&&s.componentDidSetPlotStrokeWidth(t,e,this)}},e.PlotFastener=fs.define({viewType:cl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(t,e,i,o)},viewWillSetPlotStroke:function(t,e,i){this.owner.willSetPlotStroke(t,e,i)},viewDidSetPlotStroke:function(t,e,i){this.owner.onSetPlotStroke(t,e,i),this.owner.didSetPlotStroke(t,e,i)},viewWillSetPlotStrokeWidth:function(t,e,i){this.owner.willSetPlotStrokeWidth(t,e,i)},viewDidSetPlotStrokeWidth:function(t,e,i){this.owner.onSetPlotStrokeWidth(t,e,i),this.owner.didSetPlotStrokeWidth(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:ml,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotStroke:function(t,e,i){this.owner.setPlotStroke(t,i)},traitDidSetPlotStrokeWidth:function(t,e,i){this.owner.setPlotStrokeWidth(t,i)}}),m([fs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Pl),Tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(el)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){if(null!==this.plot.view){var e=t.fill.state;null!==e&&this.setPlotFill(e,t)}},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotTrait&&r.componentWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotTrait&&r.componentDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return vl.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;if(null!==e){var i=e.fill.state;null!==i&&this.setPlotFill(i,e)}for(var o=this.dataPointFasteners,n=0,r=o.length;n<r;n+=1){var s=o[n].component;null!==s&&s.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetPlotView&&r.componentWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetPlotView&&r.componentDidSetPlotView(t,e,this)}},e.prototype.themePlotView=function(t,e,i,o){},e.prototype.setPlotFill=function(t,e,i){var o=this.plot.view;null!==o&&(void 0===i||!0===i?!0===(i=this.plotTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.fill.setLook(t,i,Xi.Intrinsic):o.fill.setState(t,i,Xi.Intrinsic))},e.prototype.willSetPlotFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotFill&&s.componentWillSetPlotFill(t,e,this)}},e.prototype.onSetPlotFill=function(t,e,i){},e.prototype.didSetPlotFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotFill&&s.componentDidSetPlotFill(t,e,this)}},e.PlotFastener=fs.define({viewType:vl,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themePlotView(t,e,i,o)},viewWillSetPlotFill:function(t,e,i){this.owner.willSetPlotFill(t,e,i)},viewDidSetPlotFill:function(t,e,i){this.owner.onSetPlotFill(t,e,i),this.owner.didSetPlotFill(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:bl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotFill:function(t,e,i){this.owner.setPlotFill(t,i)}}),m([fs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(Pl),Dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e);var i=e.plots;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.addPlot(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.addPlot=function(t,e){t=ul.fromAny(t),this.appendChildView(t)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;if(i instanceof cr){var o=i.context;o.save(),this.clipGraph(o,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof cr&&i.context.restore();t.prototype.didRender.call(this,e)},e.prototype.clipGraph=function(t,e){t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);return null===n&&(n=this),n},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(ll),Ml=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"plotFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createPlotFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initPlot=function(t,e){},e.prototype.attachPlot=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachPlot=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetPlot&&a.traitWillSetPlot(t,e,i,this)}},e.prototype.onSetPlot=function(t,e,i,o){null!==e&&this.detachPlot(e,o),null!==t&&(this.attachPlot(t,o),this.initPlot(t,o))},e.prototype.didSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetPlot&&a.traitDidSetPlot(t,e,i,this)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectPlotModel=function(t){return t.getTrait(fl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectPlotModel(n);null!==r&&this.insertPlot(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectPlotModel(e);if(null!==o){var n=null!==i?this.detectPlotModel(i):null;this.insertPlot(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectPlotModel(e);null!==i&&this.removePlot(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingPlots()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingPlots()},e.PlotFastener=K.define({type:fl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetPlot(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetPlot(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetPlot(t,e,i,this)}}),e}(at),Ol=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"plotFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initGraphTrait=function(t){},e.prototype.attachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertPlotTrait(n)}},e.prototype.detachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removePlotTrait(n)}},e.prototype.willSetGraphTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGraphTrait&&r.componentWillSetGraphTrait(t,e,this)}},e.prototype.onSetGraphTrait=function(t,e){null!==e&&this.detachGraphTrait(e),null!==t&&(this.attachGraphTrait(t),this.initGraphTrait(t))},e.prototype.didSetGraphTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGraphTrait&&r.componentDidSetGraphTrait(t,e,this)}},e.prototype.createGraphView=function(){return Dl.create()},e.prototype.initGraphView=function(t){},e.prototype.attachGraphView=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.plot.view;null!==r&&null===r.parentView&&n.plot.injectView(t)}}},e.prototype.detachGraphView=function(t){},e.prototype.willSetGraphView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGraphView&&r.componentWillSetGraphView(t,e,this)}},e.prototype.onSetGraphView=function(t,e){null!==e&&this.detachGraphView(e),null!==t&&(this.attachGraphView(t),this.initGraphView(t))},e.prototype.didSetGraphView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGraphView&&r.componentDidSetGraphView(t,e,this)}},e.prototype.themeGraphView=function(t,e,i,o){},e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createPlotFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createPlot=function(t){return Sl.createPlot(t)},e.prototype.initPlot=function(t,e){var i=t.plot.trait;null!==i&&this.initPlotTrait(i,e);var o=t.plot.view;null!==o&&this.initPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.initDataSetTrait(n,e)},e.prototype.attachPlot=function(t,e){var i=t.plot.trait;null!==i&&this.attachPlotTrait(i,e);var o=t.plot.view;null!==o&&this.attachPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.attachDataSetTrait(n,e)},e.prototype.detachPlot=function(t,e){var i=t.dataSet.trait;null!==i&&this.detachDataSetTrait(i,e);var o=t.plot.view;null!==o&&this.detachPlotView(o,e);var n=t.plot.trait;null!==n&&this.detachPlotTrait(n,e)},e.prototype.willSetPlot=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlot&&s.componentWillSetPlot(t,e,i)}},e.prototype.onSetPlot=function(t,e,i){null!==e&&this.detachPlot(e,i),null!==t&&(this.attachPlot(t,i),this.initPlot(t,i))},e.prototype.didSetPlot=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlot&&s.componentDidSetPlot(t,e,i)}},e.prototype.insertPlotTrait=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.plot.trait===t)return;s.plot.trait===e&&(o=s)}}var a=this.createPlot(t);if(null!==a&&(a.plot.setTrait(t),this.insertChildComponent(a,o),null===a.plot.view)){var l=this.createPlotView(a),u=null;null!==o&&(u=o.plot.view);var h=this.graph.view;null!==h?a.plot.injectView(h,l,u,null):a.plot.setView(l,u)}},e.prototype.removePlotTrait=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.plot.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initPlotTrait=function(t,e){},e.prototype.attachPlotTrait=function(t,e){},e.prototype.detachPlotTrait=function(t,e){},e.prototype.willSetPlotTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotTrait&&s.componentWillSetPlotTrait(t,e,i)}},e.prototype.onSetPlotTrait=function(t,e,i){null!==e&&this.detachPlotTrait(e,i),null!==t&&(this.attachPlotTrait(t,i),this.initPlotTrait(t,i))},e.prototype.didSetPlotTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotTrait&&s.componentDidSetPlotTrait(t,e,i)}},e.prototype.createPlotView=function(t){return t.plot.createView()},e.prototype.initPlotView=function(t,e){},e.prototype.attachPlotView=function(t,e){},e.prototype.detachPlotView=function(t,e){t.remove()},e.prototype.willSetPlotView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetPlotView&&s.componentWillSetPlotView(t,e,i)}},e.prototype.onSetPlotView=function(t,e,i){null!==e&&this.detachPlotView(e,i),null!==t&&(this.attachPlotView(t,i),this.initPlotView(t,i))},e.prototype.didSetPlotView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetPlotView&&s.componentDidSetPlotView(t,e,i)}},e.prototype.initDataSetTrait=function(t,e){},e.prototype.attachDataSetTrait=function(t,e){},e.prototype.detachDataSetTrait=function(t,e){},e.prototype.willSetDataSetTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetDataSetTrait&&s.componentWillSetDataSetTrait(t,e,i)}},e.prototype.onSetDataSetTrait=function(t,e,i){null!==e&&this.detachDataSetTrait(e,i),null!==t&&(this.attachDataSetTrait(t,i),this.initDataSetTrait(t,i))},e.prototype.didSetDataSetTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetDataSetTrait&&s.componentDidSetDataSetTrait(t,e,i)}},e.prototype.initDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.initDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.initDataPointView(n,e,i)},e.prototype.attachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.attachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.attachDataPointView(n,e,i)},e.prototype.detachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.detachDataPointView(n,e,i)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetDataPoint&&a.componentWillSetDataPoint(t,e,i,o)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,i,o),null!==t&&(this.attachDataPoint(t,i,o),this.initDataPoint(t,i,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetDataPoint&&a.componentDidSetDataPoint(t,e,i,o)}},e.prototype.initDataPointTrait=function(t,e,i){},e.prototype.attachDataPointTrait=function(t,e,i){},e.prototype.detachDataPointTrait=function(t,e,i){},e.prototype.willSetDataPointTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetDataPointTrait&&a.componentWillSetDataPointTrait(t,e,i,o)}},e.prototype.onSetDataPointTrait=function(t,e,i,o){null!==e&&this.detachDataPointTrait(e,i,o),null!==t&&(this.attachDataPointTrait(t,i,o),this.initDataPointTrait(t,i,o))},e.prototype.didSetDataPointTrait=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetDataPointTrait&&a.componentDidSetDataPointTrait(t,e,i,o)}},e.prototype.initDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.initDataPointLabelView(o,e,i)},e.prototype.attachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.attachDataPointLabelView(o,e,i)},e.prototype.detachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.detachDataPointLabelView(o,e,i)},e.prototype.willSetDataPointView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetDataPointView&&a.componentWillSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointView=function(t,e,i,o){null!==e&&this.detachDataPointView(e,i,o),null!==t&&(this.attachDataPointView(t,i,o),this.initDataPointView(t,i,o))},e.prototype.didSetDataPointView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetDataPointView&&a.componentDidSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointX=function(t,e,i,o){},e.prototype.onSetDataPointY=function(t,e,i,o){},e.prototype.onSetDataPointY2=function(t,e,i,o){},e.prototype.onSetDataPointRadius=function(t,e,i,o){},e.prototype.onSetDataPointColor=function(t,e,i,o){},e.prototype.onSetDataPointOpacity=function(t,e,i,o){},e.prototype.initDataPointLabelView=function(t,e,i){},e.prototype.attachDataPointLabelView=function(t,e,i){},e.prototype.detachDataPointLabelView=function(t,e,i){},e.prototype.willSetDataPointLabelView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentWillSetDataPointLabelView&&a.componentWillSetDataPointLabelView(t,e,i,o)}},e.prototype.onSetDataPointLabelView=function(t,e,i,o){null!==e&&this.detachDataPointLabelView(e,i,o),null!==t&&(this.attachDataPointLabelView(t,i,o),this.initDataPointLabelView(t,i,o))},e.prototype.didSetDataPointLabelView=function(t,e,i,o){for(var n=this.componentObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.componentDidSetDataPointLabelView&&a.componentDidSetDataPointLabelView(t,e,i,o)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.getPlotFastener=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.plot.trait===t)return n}return null},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectPlotComponent=function(t){return t instanceof Sl?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectPlotComponent(e);null!==o&&this.insertPlot(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectPlotComponent(e);null!==i&&this.removePlot(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GraphFastener=fs.define({viewType:Dl,observeView:!0,willSetView:function(t,e){this.owner.willSetGraphView(t,e)},onSetView:function(t,e){this.owner.onSetGraphView(t,e)},didSetView:function(t,e){this.owner.didSetGraphView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGraphView(t,e,i,o)},createView:function(){return this.owner.createGraphView()},traitType:Ml,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGraphTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGraphTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGraphTrait(t,e)},traitWillSetPlot:function(t,e,i){null!==e&&this.owner.removePlotTrait(e)},traitDidSetPlot:function(t,e,i){null!==t&&this.owner.insertPlotTrait(t,i)}}),e.PlotFastener=gs.define({type:Sl,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetPlot(t,e,this)},onSetComponent:function(t,e){this.owner.onSetPlot(t,e,this)},didSetComponent:function(t,e){this.owner.didSetPlot(t,e,this)},componentWillSetPlotTrait:function(t,e){this.owner.willSetPlotTrait(t,e,this)},componentDidSetPlotTrait:function(t,e){this.owner.onSetPlotTrait(t,e,this),this.owner.didSetPlotTrait(t,e,this)},componentWillSetPlotView:function(t,e){this.owner.willSetPlotView(t,e,this)},componentDidSetPlotView:function(t,e){this.owner.onSetPlotView(t,e,this),this.owner.didSetPlotView(t,e,this)},componentWillSetDataSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e,this)},componentDidSetDataSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e,this),this.owner.didSetDataSetTrait(t,e,this)},componentWillSetDataPoint:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},componentDidSetDataPoint:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this),this.owner.didSetDataPoint(t,e,i,this)},componentWillSetDataPointTrait:function(t,e,i){this.owner.willSetDataPointTrait(t,e,i,this)},componentDidSetDataPointTrait:function(t,e,i){this.owner.onSetDataPointTrait(t,e,i,this),this.owner.didSetDataPointTrait(t,e,i,this)},componentWillSetDataPointView:function(t,e,i){this.owner.willSetDataPointView(t,e,i,this)},componentDidSetDataPointView:function(t,e,i){this.owner.onSetDataPointView(t,e,i,this),this.owner.didSetDataPointView(t,e,i,this)},componentDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},componentDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},componentDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},componentDidSetDataPointRadius:function(t,e,i){this.owner.onSetDataPointRadius(t,e,i,this)},componentDidSetDataPointColor:function(t,e,i){this.owner.onSetDataPointColor(t,e,i,this)},componentWillSetDataPointLabelView:function(t,e,i){this.owner.willSetDataPointLabelView(t,e,i,this)},componentDidSetDataPointLabelView:function(t,e,i){this.owner.onSetDataPointLabelView(t,e,i,this),this.owner.didSetDataPointLabelView(t,e,i,this)}}),m([fs({extends:e.GraphFastener})],e.prototype,"graph",void 0),e}(bs),xl=Math.sqrt(50),Al=Math.sqrt(10),Rl=Math.sqrt(2),kl=1e3,Il=6e4,Ll=36e5,jl=24*Ll,Wl=30*jl,El=365*jl,Nl=(new h.BTree).set(kl,l.TimeInterval.second).set(5e3,l.TimeInterval.second.every(5)).set(15e3,l.TimeInterval.second.every(15)).set(3e4,l.TimeInterval.second.every(30)).set(Il,l.TimeInterval.minute).set(3e5,l.TimeInterval.minute.every(5)).set(9e5,l.TimeInterval.minute.every(15)).set(18e5,l.TimeInterval.minute.every(30)).set(Ll,l.TimeInterval.hour).set(3*Ll,l.TimeInterval.hour.every(3)).set(6*Ll,l.TimeInterval.hour.every(6)).set(12*Ll,l.TimeInterval.hour.every(12)).set(jl,l.TimeInterval.day).set(2*jl,l.TimeInterval.day.every(2)).set(6048e5,l.TimeInterval.week).set(Wl,l.TimeInterval.month).set(3*Wl,l.TimeInterval.month.every(3)).set(El,l.TimeInterval.year),Gl=l.DateTimeFormat.pattern(".%L"),Ul=l.DateTimeFormat.pattern(":%S"),Bl=l.DateTimeFormat.pattern("%I:%M"),Hl=l.DateTimeFormat.pattern("%I %p"),zl=l.DateTimeFormat.pattern("%a %d"),ql=l.DateTimeFormat.pattern("%b %d"),Yl=l.DateTimeFormat.pattern("%B"),Xl=l.DateTimeFormat.pattern("%Y"),Kl=function(){function t(){}return t.prototype.format=function(t){return""+t},t.fromScale=function(t,e){if(void 0===e&&(e=10),t instanceof l.TimeScale){var i=t.domain;return new _l(i[0],i[1],e)}if(t instanceof a.LinearScale){i=t.domain;return new Zl(i[0],i[1],e)}throw new TypeError(""+t)},t.step=function(t,e){var i=Math.abs(t)/e,o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),n=i/o;return n>=xl?o*=10:n>=Al?o*=5:n>=Rl&&(o*=2),t<0?-o:o},t}(),Zl=function(t){function e(e,i,o){var n=t.call(this)||this;return n.x0=e,n.dx=i-n.x0,n.n=Math.max(0,o),n}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?a.LinearDomain(this.x0,this.x0+this.dx):void 0===e?(this.x0=t[0],this.dx=t[1]-this.x0,this):(this.x0=t,this.dx=e-this.x0,this)},e.prototype.generate=function(){var t,i;this.dx<0?t=(i=this.x0)+this.dx:i=(t=this.x0)+this.dx;var o,n=e.interval(i-t,this.n);if(0===n||!isFinite(n))return[];if(n>0){t=Math.ceil(t/n),i=Math.floor(i/n);var r=Math.ceil(i-t+1);o=new Array(r);for(var s=0;s<r;s+=1)o[s]=(t+s)*n}else{t=Math.floor(t*n),i=Math.ceil(i*n);r=Math.ceil(t-i+1);o=new Array(r);for(s=0;s<r;s+=1)o[s]=(t-s)/n}return this.dx<0&&o.reverse(),o},e.interval=function(t,e){void 0===e&&(e=10);var i=t/e,o=Math.floor(Math.log(i)/Math.LN10),n=Math.pow(10,o),r=i/n,s=r>=xl?10:r>=Al?5:r>=Rl?2:1;return o>=0?n*s:-Math.pow(10,-o)/s},e}(Kl),_l=function(t){function e(e,i,o,n){var r=t.call(this)||this,s=l.DateTime.fromAny(e),a=l.DateTime.fromAny(i);return r.t0=s.time,r.dt=a.time-r.t0,r.zone=void 0!==n?n:s.zone,r.n=Math.max(0,o),r}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?l.TimeDomain(new l.DateTime(this.t0,this.zone),new l.DateTime(this.t0+this.dt,this.zone)):(void 0===e?(e=t[1],t=t[0]):t=t,t=l.DateTime.fromAny(t),e=l.DateTime.fromAny(e),this.t0=t.time,this.dt=e.time-this.t0,this)},e.prototype.generate=function(t){var i,o;this.dt<0?i=(o=this.t0)+this.dt:o=(i=this.t0)+this.dt,void 0===t&&(t=this.n);var n=(t=e.interval(o-i,t)).range(new l.DateTime(i,this.zone),new l.DateTime(o+1,this.zone));return this.dt<0&&n.reverse(),n},e.prototype.format=function(t){return l.TimeInterval.second.floor(t)<t?Gl.format(t):l.TimeInterval.minute.floor(t)<t?Ul.format(t):l.TimeInterval.hour.floor(t)<t?Bl.format(t):l.TimeInterval.day.floor(t)<t?Hl.format(t):l.TimeInterval.month.floor(t)<t?l.TimeInterval.week.floor(t)<t?zl.format(t):ql.format(t):l.TimeInterval.year.floor(t)<t?Yl.format(t):Xl.format(t)},e.interval=function(t,e){if(void 0===e&&(e=10),"number"==typeof e){var i=Math.abs(t)/e,o=Nl.nextKey(i);if(void 0===o){var n=Kl.step(t/El,e);e=l.TimeInterval.year.every(n)}else if(o>kl)e=i/Nl.previousKey(i)<o/i?Nl.previousValue(i):Nl.nextValue(i);else{n=Math.max(1,Kl.step(t,e));e=l.TimeInterval.millisecond.every(n)}}return e},e}(Kl);t.TickState=void 0,(La=t.TickState||(t.TickState={}))[La.Excluded=0]="Excluded",La[La.Entering=1]="Entering",La[La.Included=2]="Included",La[La.Leaving=3]="Leaving";var Ql=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"value",{value:e,enumerable:!0,configurable:!0}),Object.defineProperty(i,"offset",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"tickState",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(i,"preserved",{value:!0,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label)},e.prototype.setOffset=function(t){Object.defineProperty(this,"offset",{value:t,enumerable:!0,configurable:!0})},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetTickLabel&&i.viewWillSetTickLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetTickLabel&&s.viewWillSetTickLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetTickLabel&&r.viewDidSetTickLabel(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetTickLabel&&s.viewDidSetTickLabel(t,e,this)},e.prototype.preserve=function(t){return void 0===t?this.preserved:(Object.defineProperty(this,"preserved",{value:t,enumerable:!0,configurable:!0}),this)},e.prototype.fadeIn=function(t){0!==this.tickState&&3!==this.tickState||(this.opacity.setState(1,t),Object.defineProperty(this,"tickState",{value:1,enumerable:!0,configurable:!0}))},e.prototype.fadeOut=function(t){1!==this.tickState&&2!==this.tickState||(this.opacity.setState(0,t),Object.defineProperty(this,"tickState",{value:3,enumerable:!0,configurable:!0}))},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label.view;null!==i&&this.layoutLabel(i)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof cr&&i.context.save()},e.prototype.onRender=function(t){var e=t.renderer;if(e instanceof cr&&!this.isHidden()&&!this.isCulled()){var i=e.context;i.globalAlpha=this.opacity.getValue(),this.renderTick(i,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof cr&&i.context.restore();t.prototype.didRender.call(this,e)},e.top=function(t){return new Jl(t)},e.right=function(t){return new $l(t)},e.bottom=function(t){return new tu(t)},e.left=function(t){return new eu(t)},e.from=function(t,e){if("top"===e)return this.top(t);if("right"===e)return this.right(t);if("bottom"===e)return this.bottom(t);if("left"===e)return this.left(t);throw new TypeError(e)},e.fromInit=function(t,e){if(void 0!==t.orientation&&(e=t.orientation),void 0===e)throw new TypeError;var i=this.from(t.value,e);return i.initView(t),i},e.fromAny=function(t,i){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t,i);throw new TypeError(""+t)},m([So({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"anchor",void 0),m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([So({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(sr),Jl=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),t.textBaseline.setState("bottom",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(i,o),Xi.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=n-r,a=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==a&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=a.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(o,s),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(o,e.yMax),t.stroke())},e}(Ql),$l=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Vr.is(t)&&(t.textAlign.setState("left",Xi.Intrinsic),t.textBaseline.setState("middle",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(n,o),Xi.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=o+r,a=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==a&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=a.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(s,n),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(e.xMin,n),t.stroke())},e}(Ql),tu=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),t.textBaseline.setState("top",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(i,o),Xi.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=n+r,a=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==a&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=a.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(o,s),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(o,e.yMin),t.stroke())},e}(Ql),eu=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Vr.is(t)&&(t.textAlign.setState("right",Xi.Intrinsic),t.textBaseline.setState("middle",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(n,o),Xi.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=o-r,a=this.tickMarkColor.value,l=this.tickMarkWidth.getValue();null!==a&&0!==l&&0!==r&&(t.beginPath(),t.strokeStyle=a.toString(),t.lineWidth=l,t.moveTo(o,n),t.lineTo(s,n),t.stroke());var u=this.gridLineColor.value,h=this.gridLineWidth.getValue();null!==u&&0!==h&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=u.toString(),t.lineWidth=h,t.moveTo(o,n),t.lineTo(e.xMax,n),t.stroke())},e}(Ql),iu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"ticks",{value:new h.BTree,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.scale&&this.scale(e.scale);var i=e.ticks;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertTick(i[o]);void 0!==e.tickGenerator&&this.tickGenerator(e.tickGenerator),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkSpacing&&this.tickMarkSpacing(e.tickMarkSpacing),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.getTick=function(t){var e=this.ticks.get(t);return void 0!==e?e:null},e.prototype.insertTick=function(t){return(t=Ql.fromAny(t,this.orientation)).remove(),this.willInsertChildView(t,null),this.ticks.set(t.value,t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),t},e.prototype.removeTick=function(t){var e=this.ticks.get(t);if(void 0!==e){if(e.parentView!==this)throw new Error("not a child view");return this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),e}return null},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.ticks.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.ticks.forEachValue((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.ticks.firstValue();return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.ticks.lastValue();return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t instanceof Ql){var e=this.ticks.nextValue(t.value);if(void 0!==e)return e}return null},e.prototype.previousChildView=function(t){if(t instanceof Ql){var e=this.ticks.previousValue(t.value);if(void 0!==e)return e}return null},e.prototype.forEachChildView=function(t,e){return this.ticks.forEachValue(t,e)},e.prototype.getChildView=function(t){return null},e.prototype.setChildView=function(t,e){throw new Error("unsupported")},e.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Ql))throw new TypeError(""+t);this.insertTick(t)},e.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Ql))throw new TypeError(""+t);this.insertTick(t)},e.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof Ql))throw new TypeError(""+t);this.insertTick(t)},e.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof Ql))throw new TypeError(""+t);this.removeTick(t.value)},e.prototype.removeAll=function(){this.ticks.forEach((function(t,e){this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0)}),this)},e.prototype.updateTicks=function(){var t=this.scale.value,e=this.tickGenerator.state;if(null!==t&&null!==e){var i=this.tickTransition.state;!0===e&&(e=Kl.fromScale(t),this.tickGenerator.setState(e),i=!1),this.generateTicks(e,t,i)}},e.prototype.generateTicks=function(t,e,i){var o=this.tickMarkSpacing.getValue();if(0!==o){var n=e.range,r=Math.abs(n[1]-n[0]),s=Math.max(1,Math.floor(r/o));t.count(s)}t.domain(e.domain);var a=this.ticks.clone(),l=t.generate(),u=0;for(s=l.length;u<s;u+=1){var h=l[u],p=a.get(h);if(void 0!==p)a.delete(h),p.fadeIn(i);else{var d=this.createTickView(h);null!==d&&(this.insertTick(d),Object.defineProperty(d.opacity,"ownValue",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(d.opacity,"ownState",{value:0,enumerable:!0,configurable:!0}),d.fadeIn(i))}}a.forEachValue((function(t){t.preserved||t.fadeOut(i)}),this)},e.prototype.createTickView=function(t){var e=Ql.from(t,this.orientation);if(null!==e){var i=this.createTickLabel(t,e);null!==i&&(e.label(i),e.preserve(!1))}return e},e.prototype.createTickLabel=function(t,e){var i=null,o=this.viewController;null!==o&&void 0!==o.createTickLabel&&(i=o.createTickLabel(t,e,this));for(var n=this.viewObservers,r=0,s=n.length;r<s&&null==i;r+=1){var a=n[r];void 0!==a.createTickLabel&&(i=a.createTickLabel(t,e,this))}if(null==i){var l=this.tickGenerator.state;i=l instanceof Kl?l.format(t):""+t}return"string"==typeof i&&(i=this.formatTickLabel(i,e)),i},e.prototype.formatTickLabel=function(t,e){var i=this.viewController;if(null!==i&&void 0!==i.formatTickLabel&&void 0!==(s=i.formatTickLabel(t,e,this)))return s;for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s,a=o[n];if(void 0!==a.formatTickLabel)if(void 0!==(s=a.formatTickLabel(t,e,this)))return s}return t},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&Xi.NeedsLayout)&&(t&=~Xi.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.scale.onAnimate(e.updateTime),this.updateTicks()},e.prototype.willDisplayChildView=function(e,i,o){if(t.prototype.willDisplayChildView.call(this,e,i,o),0!=(i&Xi.NeedsLayout)&&e instanceof Ql){var n=this.scale.value;null!==n&&this.layoutTick(e,this.origin.getValue(),this.viewFrame,n)}},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof cr&&i.context.save()},e.prototype.didRender=function(e){var i=e.renderer;if(i instanceof cr){var o=i.context;this.renderDomain(o,this.origin.getValue(),this.viewFrame),o.restore()}t.prototype.didRender.call(this,e)},e.fromInit=function(t){var e=t.orientation;if("top"===e)return ou.fromInit(t);if("right"===e)return nu.fromInit(t);if("bottom"===e)return ru.fromInit(t);if("left"===e)return su.fromInit(t);throw new Error("unknown axis orientation: "+e)},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t){var i=t.orientation;if("top"===i)return ou.fromAny(t);if("right"===i)return nu.fromAny(t);if("bottom"===i)return ru.fromAny(t);if("left"===i)return su.fromAny(t);throw new Error("unknown axis orientation: "+i)}throw new TypeError(""+t)},m([ho({type:Kl,state:!0})],e.prototype,"tickGenerator",void 0),m([So({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"origin",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"borderColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"borderWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"borderSerif",void 0),m([So({type:Number,state:80})],e.prototype,"tickMarkSpacing",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([ho({type:a.Timing,inherit:!0,initState:function(){return a.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([So({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,inherit:!0,state:null})],e.prototype,"font",void 0),m([So({type:St,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(nr),ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(Xi.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(i.xMin+n,e.y),Xi.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,s=i.xMax,a=e.y,l=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==l?(t.moveTo(r,a-l),t.lineTo(r,a),t.lineTo(s,a),t.lineTo(s,a-l)):(t.moveTo(r,a),t.lineTo(s,a)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof iu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:nl,type:a.ContinuousScale,inherit:"xScale",state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"scale",void 0),e}(iu),nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(Xi.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(e.x,i.yMin+n),Xi.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,s=this.borderSerif.getValue(),a=i.yMin,l=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==s?(t.moveTo(r+s,a),t.lineTo(r,a),t.lineTo(r,l),t.lineTo(r+s,l)):(t.moveTo(r,a),t.lineTo(r,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof iu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:nl,type:a.ContinuousScale,inherit:"yScale",state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"scale",void 0),e}(iu),ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(Xi.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(i.xMin+n,e.y),Xi.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,s=i.xMax,a=e.y,l=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==l?(t.moveTo(r,a+l),t.lineTo(r,a),t.lineTo(s,a),t.lineTo(s,a+l)):(t.moveTo(r,a),t.lineTo(s,a)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof iu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:nl,type:a.ContinuousScale,inherit:"xScale",state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"scale",void 0),e}(iu),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(Xi.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(e.x,i.yMin+n),Xi.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,s=this.borderSerif.getValue(),a=i.yMin,l=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==s?(t.moveTo(r-s,a),t.lineTo(r,a),t.lineTo(r,l),t.lineTo(r-s,l)):(t.moveTo(r,a),t.lineTo(r,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof iu))return this.fromInit(t);throw new TypeError(""+t)},m([So({extends:nl,type:a.ContinuousScale,inherit:"yScale",state:null,updateFlags:Xi.NeedsLayout})],e.prototype,"scale",void 0),e}(iu),au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(at),lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(au),du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initAxisTrait=function(t){},e.prototype.attachAxisTrait=function(t){},e.prototype.detachAxisTrait=function(t){},e.prototype.willSetAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetAxisTrait&&r.componentWillSetAxisTrait(t,e,this)}},e.prototype.onSetAxisTrait=function(t,e){null!==e&&this.detachAxisTrait(e),null!==t&&(this.attachAxisTrait(t),this.initAxisTrait(t))},e.prototype.didSetAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetAxisTrait&&r.componentDidSetAxisTrait(t,e,this)}},e.prototype.initAxisView=function(t){},e.prototype.attachAxisView=function(t){},e.prototype.detachAxisView=function(t){},e.prototype.willSetAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetAxisView&&r.componentWillSetAxisView(t,e,this)}},e.prototype.onSetAxisView=function(t,e){null!==e&&this.detachAxisView(e),null!==t&&(this.attachAxisView(t),this.initAxisView(t))},e.prototype.didSetAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetAxisView&&r.componentDidSetAxisView(t,e,this)}},e.prototype.themeAxisView=function(t,e,i,o){},e.prototype.createAxis=function(t){return t instanceof lu?new cu:t instanceof uu?new vu:t instanceof hu?new fu:t instanceof pu?new yu:null},e.AxisFastener=fs.define({observeView:!0,willSetView:function(t,e){this.owner.willSetAxisView(t,e)},onSetView:function(t,e){this.owner.onSetAxisView(t,e)},didSetView:function(t,e){this.owner.didSetAxisView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeAxisView(t,e,i,o)},createView:function(){return this.owner.createAxisView()},traitType:au,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetAxisTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetAxisTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetAxisTrait(t,e)}}),m([fs({extends:e.AxisFastener})],e.prototype,"axis",void 0),e}(bs),cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return ou.create()},e}(du),vu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return nu.create()},e}(du),fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return ru.create()},e}(du),yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return su.create()},e}(du),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.graph&&this.graph(e.graph),void 0!==e.topAxis&&this.topAxis(e.topAxis),void 0!==e.rightAxis&&this.rightAxis(e.rightAxis),void 0!==e.bottomAxis&&this.bottomAxis(e.bottomAxis),void 0!==e.leftAxis&&this.leftAxis(e.leftAxis),void 0!==e.gutterTop&&this.gutterTop(e.gutterTop),void 0!==e.gutterRight&&this.gutterRight(e.gutterRight),void 0!==e.gutterBottom&&this.gutterBottom(e.gutterBottom),void 0!==e.gutterLeft&&this.gutterLeft(e.gutterLeft),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.xRange=function(){var t=this.viewFrame,e=this.gutterLeft.getValue().pxValue(t.width),i=this.gutterRight.getValue().pxValue(t.width),o=this.xRangePadding.state,n=o[0],r=this.viewFrame.width-i-e-o[1];return a.LinearRange(n,r)},e.prototype.yRange=function(){var t=this.viewFrame,e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterBottom.getValue().pxValue(t.height),o=this.yRangePadding.state,n=o[0],r=this.viewFrame.height-i-e-o[1];return a.LinearRange(n,r)},e.prototype.createGraph=function(){return new Dl},e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){},e.prototype.detachGraph=function(t){},e.prototype.willSetGraph=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGraph&&i.viewWillSetGraph(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGraph&&s.viewWillSetGraph(t,e,this)}},e.prototype.onSetGraph=function(t,e){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGraph&&r.viewDidSetGraph(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGraph&&s.viewDidSetGraph(t,e,this)},e.prototype.createTopAxis=function(){return new ou},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){},e.prototype.detachTopAxis=function(t){},e.prototype.willSetTopAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetTopAxis&&i.viewWillSetTopAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetTopAxis&&s.viewWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetTopAxis&&r.viewDidSetTopAxis(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetTopAxis&&s.viewDidSetTopAxis(t,e,this)},e.prototype.createRightAxis=function(){return new nu},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){},e.prototype.detachRightAxis=function(t){},e.prototype.willSetRightAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetRightAxis&&i.viewWillSetRightAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetRightAxis&&s.viewWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetRightAxis&&r.viewDidSetRightAxis(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetRightAxis&&s.viewDidSetRightAxis(t,e,this)},e.prototype.createBottomAxis=function(){return new ru},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){},e.prototype.detachBottomAxis=function(t){},e.prototype.willSetBottomAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetBottomAxis&&i.viewWillSetBottomAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetBottomAxis&&s.viewWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetBottomAxis&&r.viewDidSetBottomAxis(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetBottomAxis&&s.viewDidSetBottomAxis(t,e,this)},e.prototype.createLeftAxis=function(){return new su},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){},e.prototype.detachLeftAxis=function(t){},e.prototype.willSetLeftAxis=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetLeftAxis&&i.viewWillSetLeftAxis(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetLeftAxis&&s.viewWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetLeftAxis&&r.viewDidSetLeftAxis(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetLeftAxis&&s.viewDidSetLeftAxis(t,e,this)},e.prototype.detectGraphView=function(t){return t instanceof Dl?t:null},e.prototype.detectTopAxisView=function(t){return t instanceof ou?t:null},e.prototype.detectRightAxisView=function(t){return t instanceof nu?t:null},e.prototype.detectBottomAxisView=function(t){return t instanceof ru?t:null},e.prototype.detectLeftAxisView=function(t){return t instanceof su?t:null},e.prototype.onInsertChildView=function(e,i){if(t.prototype.onInsertChildView.call(this,e,i),null===this.graph.view){var o=this.detectGraphView(e);null!==o&&this.graph.setView(o,i)}if(null===this.topAxis.view){var n=this.detectTopAxisView(e);null!==n&&this.topAxis.setView(n,i)}if(null===this.rightAxis.view){var r=this.detectRightAxisView(e);null!==r&&this.rightAxis.setView(r,i)}if(null===this.bottomAxis.view){var s=this.detectBottomAxisView(e);null!==s&&this.bottomAxis.setView(s,i)}if(null===this.leftAxis.view){var a=this.detectLeftAxisView(e);null!==a&&this.leftAxis.setView(a,i)}},e.prototype.onRemoveChildView=function(e){if(t.prototype.onRemoveChildView.call(this,e),null===this.graph.view){var i=this.detectGraphView(e);null!==i&&this.graph.view===i&&this.graph.setView(null)}if(null===this.topAxis.view){var o=this.detectTopAxisView(e);null!==o&&this.topAxis.view===o&&this.topAxis.setView(null)}if(null===this.rightAxis.view){var n=this.detectRightAxisView(e);null!==n&&this.rightAxis.view===n&&this.rightAxis.setView(null)}if(null===this.bottomAxis.view){var r=this.detectBottomAxisView(e);null!==r&&this.bottomAxis.view===r&&this.bottomAxis.setView(null)}if(null===this.leftAxis.view){var s=this.detectLeftAxisView(e);null!==s&&this.leftAxis.view===s&&this.leftAxis.setView(null)}},e.prototype.updateScales=function(){this.layoutChart(this.viewFrame),t.prototype.updateScales.call(this)},e.prototype.layoutChart=function(t){var e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterRight.getValue().pxValue(t.width),o=this.gutterBottom.getValue().pxValue(t.height),n=this.gutterLeft.getValue().pxValue(t.width),s=t.yMin+e,a=t.xMax-i,l=t.yMax-o,u=t.xMin+n,h=this.topAxis.view;null!==h&&(h.setViewFrame(new r.R2Box(u,t.yMin,a,l)),h.origin.setState(new r.R2Point(u,s),Xi.Intrinsic));var p=this.rightAxis.view;null!==p&&(p.setViewFrame(new r.R2Box(u,s,t.xMax,l)),p.origin.setState(new r.R2Point(Math.max(u,a),l),Xi.Intrinsic));var d=this.bottomAxis.view;null!==d&&(d.setViewFrame(new r.R2Box(u,s,a,t.yMax)),d.origin.setState(new r.R2Point(u,Math.max(s,l)),Xi.Intrinsic));var c=this.leftAxis.view;null!==c&&(c.setViewFrame(new r.R2Box(t.xMin,s,a,l)),c.origin.setState(new r.R2Point(u,l),Xi.Intrinsic));var v=this.graph.view;null!==v&&v.setViewFrame(new r.R2Box(u,s,a,l))},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterTop",void 0),m([So({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterRight",void 0),m([So({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterBottom",void 0),m([So({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterLeft",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"borderColor",void 0),m([So({type:Number,state:1})],e.prototype,"borderWidth",void 0),m([So({type:Number,state:6})],e.prototype,"borderSerif",void 0),m([So({type:St,state:null,look:Qt.neutralColor})],e.prototype,"tickMarkColor",void 0),m([So({type:Number,state:1})],e.prototype,"tickMarkWidth",void 0),m([So({type:Number,state:6})],e.prototype,"tickMarkLength",void 0),m([So({type:Number,state:2})],e.prototype,"tickLabelPadding",void 0),m([ho({type:a.Timing,initState:function(){return a.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([So({type:St,state:null,look:Qt.subduedColor})],e.prototype,"gridLineColor",void 0),m([So({type:Number,state:0})],e.prototype,"gridLineWidth",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,look:Qt.mutedColor})],e.prototype,"textColor",void 0),m([Lo({key:!0,type:Dl,createView:function(){return this.owner.createGraph()},willSetView:function(t,e){this.owner.willSetGraph(t,e)},onSetView:function(t,e){this.owner.onSetGraph(t,e)},didSetView:function(t,e){this.owner.didSetGraph(t,e)}})],e.prototype,"graph",void 0),m([Lo({key:!0,type:ou,createView:function(){return this.owner.createTopAxis()},willSetView:function(t,e){this.owner.willSetTopAxis(t,e)},onSetView:function(t,e){this.owner.onSetTopAxis(t,e)},didSetView:function(t,e){this.owner.didSetTopAxis(t,e)}})],e.prototype,"topAxis",void 0),m([Lo({key:!0,type:nu,createView:function(){return this.owner.createRightAxis()},willSetView:function(t,e){this.owner.willSetRightAxis(t,e)},onSetView:function(t,e){this.owner.onSetRightAxis(t,e)},didSetView:function(t,e){this.owner.didSetRightAxis(t,e)}})],e.prototype,"rightAxis",void 0),m([Lo({key:!0,type:ru,createView:function(){return this.owner.createBottomAxis()},willSetView:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetView:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetView:function(t,e){this.owner.didSetBottomAxis(t,e)}})],e.prototype,"bottomAxis",void 0),m([Lo({key:!0,type:su,createView:function(){return this.owner.createLeftAxis()},willSetView:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetView:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetView:function(t,e){this.owner.didSetLeftAxis(t,e)}})],e.prototype,"leftAxis",void 0),e}(ll),wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachGraph=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetGraph&&s.traitWillSetGraph(t,e,i,this)}},e.prototype.onSetGraph=function(t,e,i){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetGraph&&s.traitDidSetGraph(t,e,i,this)}},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachTopAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetTopAxis&&s.traitWillSetTopAxis(t,e,i,this)}},e.prototype.onSetTopAxis=function(t,e,i){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetTopAxis&&s.traitDidSetTopAxis(t,e,i,this)}},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachRightAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetRightAxis&&s.traitWillSetRightAxis(t,e,i,this)}},e.prototype.onSetRightAxis=function(t,e,i){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetRightAxis&&s.traitDidSetRightAxis(t,e,i,this)}},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachBottomAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetBottomAxis&&s.traitWillSetBottomAxis(t,e,i,this)}},e.prototype.onSetBottomAxis=function(t,e,i){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetBottomAxis&&s.traitDidSetBottomAxis(t,e,i,this)}},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachLeftAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetLeftAxis&&s.traitWillSetLeftAxis(t,e,i,this)}},e.prototype.onSetLeftAxis=function(t,e,i){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetLeftAxis&&s.traitDidSetLeftAxis(t,e,i,this)}},e.prototype.detectGraphTrait=function(t){return t instanceof Ml?t:null},e.prototype.detectTopAxisTrait=function(t){return t instanceof lu?t:null},e.prototype.detectRightAxisTrait=function(t){return t instanceof uu?t:null},e.prototype.detectBottomAxisTrait=function(t){return t instanceof hu?t:null},e.prototype.detectLeftAxisTrait=function(t){return t instanceof pu?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i];if(null===this.graph.trait){var r=this.detectGraphTrait(n);null!==r&&this.graph.setTrait(r)}if(null===this.topAxis.trait){var s=this.detectTopAxisTrait(n);null!==s&&this.topAxis.setTrait(s)}if(null===this.rightAxis.trait){var a=this.detectRightAxisTrait(n);null!==a&&this.rightAxis.setTrait(a)}if(null===this.bottomAxis.trait){var l=this.detectBottomAxisTrait(n);null!==l&&this.bottomAxis.setTrait(l)}if(null===this.leftAxis.trait){var u=this.detectLeftAxisTrait(n);null!==u&&this.leftAxis.setTrait(u)}}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.graph.trait){var o=this.detectGraphTrait(e);null!==o&&this.graph.setTrait(o,i)}if(null===this.topAxis.trait){var n=this.detectTopAxisTrait(e);null!==n&&this.topAxis.setTrait(n,i)}if(null===this.rightAxis.trait){var r=this.detectRightAxisTrait(e);null!==r&&this.rightAxis.setTrait(r,i)}if(null===this.bottomAxis.trait){var s=this.detectBottomAxisTrait(e);null!==s&&this.bottomAxis.setTrait(s,i)}if(null===this.leftAxis.trait){var a=this.detectLeftAxisTrait(e);null!==a&&this.leftAxis.setTrait(a,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectGraphTrait(e);null!==i&&this.graph.trait===i&&this.graph.setTrait(null);var o=this.detectTopAxisTrait(e);null!==o&&this.topAxis.trait===o&&this.topAxis.setTrait(null);var n=this.detectRightAxisTrait(e);null!==n&&this.rightAxis.trait===n&&this.rightAxis.setTrait(null);var r=this.detectBottomAxisTrait(e);null!==r&&this.bottomAxis.trait===r&&this.bottomAxis.setTrait(null);var s=this.detectLeftAxisTrait(e);null!==s&&this.leftAxis.trait===s&&this.leftAxis.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.graph.trait;null!==e&&e.addTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.addTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.addTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.addTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.graph.trait;null!==e&&e.removeTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.removeTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.removeTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.removeTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.removeTraitConsumer(this)},m([K({type:Ml,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetGraph(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetGraph(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetGraph(t,e,i)}})],e.prototype,"graph",void 0),m([K({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTopAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetTopAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetTopAxis(t,e,i)}})],e.prototype,"topAxis",void 0),m([K({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetRightAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetRightAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetRightAxis(t,e,i)}})],e.prototype,"rightAxis",void 0),m([K({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetBottomAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetBottomAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetBottomAxis(t,e,i)}})],e.prototype,"bottomAxis",void 0),m([K({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetLeftAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetLeftAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetLeftAxis(t,e,i)}})],e.prototype,"leftAxis",void 0),e}(at),mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initChartTrait=function(t){},e.prototype.attachChartTrait=function(t){this.graph.setTrait(t.graph.trait);var e=t.topAxis.trait;null!==e&&this.insertTopAxisTrait(e);var i=t.rightAxis.trait;null!==i&&this.insertRightAxisTrait(i);var o=t.bottomAxis.trait;null!==o&&this.insertBottomAxisTrait(o);var n=t.leftAxis.trait;null!==n&&this.insertLeftAxisTrait(n)},e.prototype.detachChartTrait=function(t){var e=t.leftAxis.trait;null!==e&&this.removeLeftAxisTrait(e);var i=t.bottomAxis.trait;null!==i&&this.removeBottomAxisTrait(i);var o=t.rightAxis.trait;null!==o&&this.removeRightAxisTrait(o);var n=t.topAxis.trait;null!==n&&this.removeTopAxisTrait(n),this.graph.setTrait(null)},e.prototype.willSetChartTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetChartTrait&&r.componentWillSetChartTrait(t,e,this)}},e.prototype.onSetChartTrait=function(t,e){null!==e&&this.detachChartTrait(e),null!==t&&(this.attachChartTrait(t),this.initChartTrait(t))},e.prototype.didSetChartTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetChartTrait&&r.componentDidSetChartTrait(t,e,this)}},e.prototype.createChartView=function(){return gu.create()},e.prototype.initChartView=function(t){},e.prototype.attachChartView=function(t){var e=this.topAxis.component;null!==e&&e.axis.injectView(t);var i=this.rightAxis.component;null!==i&&i.axis.injectView(t);var o=this.bottomAxis.component;null!==o&&o.axis.injectView(t);var n=this.leftAxis.component;null!==n&&n.axis.injectView(t),null===this.graph.view&&null===this.graph.trait||this.graph.injectView(t)},e.prototype.detachChartView=function(t){},e.prototype.willSetChartView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetChartView&&r.componentWillSetChartView(t,e,this)}},e.prototype.onSetChartView=function(t,e){null!==e&&this.detachChartView(e),null!==t&&(this.attachChartView(t),this.initChartView(t))},e.prototype.didSetChartView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetChartView&&r.componentDidSetChartView(t,e,this)}},e.prototype.themeChartView=function(t,e,i,o){},e.prototype.attachGraphTrait=function(e){t.prototype.attachGraphTrait.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.attachGraphView=function(e){t.prototype.attachGraphView.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.detachGraphView=function(t){t.remove()},e.prototype.createTopAxis=function(t){return new cu},e.prototype.initTopAxis=function(t){var e=t.axis.trait;null!==e&&this.initTopAxisTrait(e);var i=t.axis.view;null!==i&&this.initTopAxisView(i)},e.prototype.attachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.attachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.attachTopAxisView(i)},e.prototype.detachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.detachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.detachTopAxisView(i)},e.prototype.willSetTopAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTopAxis&&r.componentWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTopAxis&&r.componentDidSetTopAxis(t,e,this)}},e.prototype.insertTopAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof du){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var a=this.createTopAxis(t);if(null!==a&&(a.axis.setTrait(t),this.topAxis.setComponent(a,o),this.insertChildComponent(a,o),null===a.axis.view)){var l=this.createTopAxisView(a),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?a.axis.injectView(h,l,u,null):a.axis.setView(l,u)}},e.prototype.removeTopAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof du&&n.axis.trait===t)return this.topAxis.setComponent(null),void n.remove()}},e.prototype.initTopAxisTrait=function(t){},e.prototype.attachTopAxisTrait=function(t){},e.prototype.detachTopAxisTrait=function(t){},e.prototype.willSetTopAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTopAxisTrait&&r.componentWillSetTopAxisTrait(t,e,this)}},e.prototype.onSetTopAxisTrait=function(t,e){null!==e&&this.detachTopAxisTrait(e),null!==t&&(this.attachTopAxisTrait(t),this.initTopAxisTrait(t))},e.prototype.didSetTopAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTopAxisTrait&&r.componentDidSetTopAxisTrait(t,e,this)}},e.prototype.createTopAxisView=function(t){return t.axis.createView()},e.prototype.initTopAxisView=function(t){},e.prototype.attachTopAxisView=function(t){},e.prototype.detachTopAxisView=function(t){t.remove()},e.prototype.willSetTopAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetTopAxisView&&r.componentWillSetTopAxisView(t,e,this)}},e.prototype.onSetTopAxisView=function(t,e){null!==e&&this.detachTopAxisView(e),null!==t&&(this.attachTopAxisView(t),this.initTopAxisView(t))},e.prototype.didSetTopAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetTopAxisView&&r.componentDidSetTopAxisView(t,e,this)}},e.prototype.createRightAxis=function(t){return new vu},e.prototype.initRightAxis=function(t){var e=t.axis.trait;null!==e&&this.initRightAxisTrait(e);var i=t.axis.view;null!==i&&this.initRightAxisView(i)},e.prototype.attachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.attachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.attachRightAxisView(i)},e.prototype.detachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.detachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.detachRightAxisView(i)},e.prototype.willSetRightAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetRightAxis&&r.componentWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetRightAxis&&r.componentDidSetRightAxis(t,e,this)}},e.prototype.insertRightAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof du){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var a=this.createRightAxis(t);if(null!==a&&(a.axis.setTrait(t),this.rightAxis.setComponent(a,o),this.insertChildComponent(a,o),null===a.axis.view)){var l=this.createRightAxisView(a),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?a.axis.injectView(h,l,u,null):a.axis.setView(l,u)}},e.prototype.removeRightAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof du&&n.axis.trait===t)return this.rightAxis.setComponent(null),void n.remove()}},e.prototype.initRightAxisTrait=function(t){},e.prototype.attachRightAxisTrait=function(t){},e.prototype.detachRightAxisTrait=function(t){},e.prototype.willSetRightAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetRightAxisTrait&&r.componentWillSetRightAxisTrait(t,e,this)}},e.prototype.onSetRightAxisTrait=function(t,e){null!==e&&this.detachRightAxisTrait(e),null!==t&&(this.attachRightAxisTrait(t),this.initRightAxisTrait(t))},e.prototype.didSetRightAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetRightAxisTrait&&r.componentDidSetRightAxisTrait(t,e,this)}},e.prototype.createRightAxisView=function(t){return t.axis.createView()},e.prototype.initRightAxisView=function(t){},e.prototype.attachRightAxisView=function(t){},e.prototype.detachRightAxisView=function(t){t.remove()},e.prototype.willSetRightAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetRightAxisView&&r.componentWillSetRightAxisView(t,e,this)}},e.prototype.onSetRightAxisView=function(t,e){null!==e&&this.detachRightAxisView(e),null!==t&&(this.attachRightAxisView(t),this.initRightAxisView(t))},e.prototype.didSetRightAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetRightAxisView&&r.componentDidSetRightAxisView(t,e,this)}},e.prototype.createBottomAxis=function(t){return new fu},e.prototype.initBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.initBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.initBottomAxisView(i)},e.prototype.attachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.attachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.attachBottomAxisView(i)},e.prototype.detachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.detachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.detachBottomAxisView(i)},e.prototype.willSetBottomAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetBottomAxis&&r.componentWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetBottomAxis&&r.componentDidSetBottomAxis(t,e,this)}},e.prototype.insertBottomAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof du){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var a=this.createBottomAxis(t);if(null!==a&&(a.axis.setTrait(t),this.bottomAxis.setComponent(a,o),this.insertChildComponent(a,o),null===a.axis.view)){var l=this.createBottomAxisView(a),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?a.axis.injectView(h,l,u,null):a.axis.setView(l,u)}},e.prototype.removeBottomAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof du&&n.axis.trait===t)return this.bottomAxis.setComponent(null),void n.remove()}},e.prototype.initBottomAxisTrait=function(t){},e.prototype.attachBottomAxisTrait=function(t){},e.prototype.detachBottomAxisTrait=function(t){},e.prototype.willSetBottomAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetBottomAxisTrait&&r.componentWillSetBottomAxisTrait(t,e,this)}},e.prototype.onSetBottomAxisTrait=function(t,e){null!==e&&this.detachBottomAxisTrait(e),null!==t&&(this.attachBottomAxisTrait(t),this.initBottomAxisTrait(t))},e.prototype.didSetBottomAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetBottomAxisTrait&&r.componentDidSetBottomAxisTrait(t,e,this)}},e.prototype.createBottomAxisView=function(t){return t.axis.createView()},e.prototype.initBottomAxisView=function(t){},e.prototype.attachBottomAxisView=function(t){},e.prototype.detachBottomAxisView=function(t){t.remove()},e.prototype.willSetBottomAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetBottomAxisView&&r.componentWillSetBottomAxisView(t,e,this)}},e.prototype.onSetBottomAxisView=function(t,e){null!==e&&this.detachBottomAxisView(e),null!==t&&(this.attachBottomAxisView(t),this.initBottomAxisView(t))},e.prototype.didSetBottomAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetBottomAxisView&&r.componentDidSetBottomAxisView(t,e,this)}},e.prototype.createLeftAxis=function(t){return new yu},e.prototype.initLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.initLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.initLeftAxisView(i)},e.prototype.attachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.attachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.attachLeftAxisView(i)},e.prototype.detachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.detachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.detachLeftAxisView(i)},e.prototype.willSetLeftAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetLeftAxis&&r.componentWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetLeftAxis&&r.componentDidSetLeftAxis(t,e,this)}},e.prototype.insertLeftAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childComponents,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof du){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var a=this.createLeftAxis(t);if(null!==a&&(a.axis.setTrait(t),this.leftAxis.setComponent(a,o),this.insertChildComponent(a,o),null===a.axis.view)){var l=this.createLeftAxisView(a),u=null;null!==o&&(u=o.axis.view);var h=this.chart.view;null!==h?a.axis.injectView(h,l,u,null):a.axis.setView(l,u)}},e.prototype.removeLeftAxisTrait=function(t){for(var e=this.childComponents,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof du&&n.axis.trait===t)return this.leftAxis.setComponent(null),void n.remove()}},e.prototype.initLeftAxisTrait=function(t){},e.prototype.attachLeftAxisTrait=function(t){},e.prototype.detachLeftAxisTrait=function(t){},e.prototype.willSetLeftAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetLeftAxisTrait&&r.componentWillSetLeftAxisTrait(t,e,this)}},e.prototype.onSetLeftAxisTrait=function(t,e){null!==e&&this.detachLeftAxisTrait(e),null!==t&&(this.attachLeftAxisTrait(t),this.initLeftAxisTrait(t))},e.prototype.didSetLeftAxisTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetLeftAxisTrait&&r.componentDidSetLeftAxisTrait(t,e,this)}},e.prototype.createLeftAxisView=function(t){return t.axis.createView()},e.prototype.initLeftAxisView=function(t){},e.prototype.attachLeftAxisView=function(t){},e.prototype.detachLeftAxisView=function(t){t.remove()},e.prototype.willSetLeftAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetLeftAxisView&&r.componentWillSetLeftAxisView(t,e,this)}},e.prototype.onSetLeftAxisView=function(t,e){null!==e&&this.detachLeftAxisView(e),null!==t&&(this.attachLeftAxisView(t),this.initLeftAxisView(t))},e.prototype.didSetLeftAxisView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetLeftAxisView&&r.componentDidSetLeftAxisView(t,e,this)}},e.prototype.detectTopAxisComponent=function(t){return t instanceof cu?t:null},e.prototype.detectRightAxisComponent=function(t){return t instanceof vu?t:null},e.prototype.detectBottomAxisComponent=function(t){return t instanceof fu?t:null},e.prototype.detectLeftAxisComponent=function(t){return t instanceof yu?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectTopAxisComponent(e);null!==o&&this.topAxis.setComponent(o,i);var n=this.detectRightAxisComponent(e);null!==n&&this.rightAxis.setComponent(n,i);var r=this.detectBottomAxisComponent(e);null!==r&&this.bottomAxis.setComponent(r,i);var s=this.detectLeftAxisComponent(e);null!==s&&this.leftAxis.setComponent(s,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e),null!==this.detectTopAxisComponent(e)&&this.topAxis.setComponent(null),null!==this.detectRightAxisComponent(e)&&this.rightAxis.setComponent(null),null!==this.detectBottomAxisComponent(e)&&this.bottomAxis.setComponent(null),null!==this.detectLeftAxisComponent(e)&&this.leftAxis.setComponent(null)},e.ChartFastener=fs.define({viewType:gu,observeView:!0,willSetView:function(t,e){this.owner.willSetChartView(t,e)},onSetView:function(t,e){this.owner.onSetChartView(t,e)},didSetView:function(t,e){this.owner.didSetChartView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeChartView(t,e,i,o)},createView:function(){return this.owner.createChartView()},traitType:wu,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetChartTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetChartTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetChartTrait(t,e)},traitWillSetTopAxis:function(t,e,i){null!==e&&this.owner.removeTopAxisTrait(e)},traitDidSetTopAxis:function(t,e,i){null!==t&&this.owner.insertTopAxisTrait(t)},traitWillSetRightAxis:function(t,e,i){null!==e&&this.owner.removeRightAxisTrait(e)},traitDidSetRightAxis:function(t,e,i){null!==t&&this.owner.insertRightAxisTrait(t)},traitWillSetBottomAxis:function(t,e,i){null!==e&&this.owner.removeBottomAxisTrait(e)},traitDidSetBottomAxis:function(t,e,i){null!==t&&this.owner.insertBottomAxisTrait(t)},traitWillSetLeftAxis:function(t,e,i){null!==e&&this.owner.removeLeftAxisTrait(e)},traitDidSetLeftAxis:function(t,e,i){null!==t&&this.owner.insertLeftAxisTrait(t)}}),e.TopAxisFastener=gs.define({type:cu,observe:!0,willSetComponent:function(t,e){this.owner.willSetTopAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetTopAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetTopAxis(t,e)},componentWillSetAxisTrait:function(t,e){this.owner.willSetTopAxisTrait(t,e)},componentDidSetAxisTrait:function(t,e){this.owner.onSetTopAxisTrait(t,e),this.owner.didSetTopAxisTrait(t,e)},componentWillSetAxisView:function(t,e){this.owner.willSetTopAxisView(t,e)},componentDidSetAxisView:function(t,e){this.owner.onSetTopAxisView(t,e),this.owner.didSetTopAxisView(t,e)}}),e.RightAxisFastener=gs.define({type:vu,observe:!0,willSetComponent:function(t,e){this.owner.willSetRightAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetRightAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetRightAxis(t,e)},componentWillSetAxisTrait:function(t,e){this.owner.willSetRightAxisTrait(t,e)},componentDidSetAxisTrait:function(t,e){this.owner.onSetRightAxisTrait(t,e),this.owner.didSetRightAxisTrait(t,e)},componentWillSetAxisView:function(t,e){this.owner.willSetRightAxisView(t,e)},componentDidSetAxisView:function(t,e){this.owner.onSetRightAxisView(t,e),this.owner.didSetRightAxisView(t,e)}}),e.BottomAxisFastener=gs.define({type:fu,observe:!0,willSetComponent:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetBottomAxis(t,e)},componentWillSetAxisTrait:function(t,e){this.owner.willSetBottomAxisTrait(t,e)},componentDidSetAxisTrait:function(t,e){this.owner.onSetBottomAxisTrait(t,e),this.owner.didSetBottomAxisTrait(t,e)},componentWillSetAxisView:function(t,e){this.owner.willSetBottomAxisView(t,e)},componentDidSetAxisView:function(t,e){this.owner.onSetBottomAxisView(t,e),this.owner.didSetBottomAxisView(t,e)}}),e.LeftAxisFastener=gs.define({type:yu,observe:!0,willSetComponent:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetComponent:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetComponent:function(t,e){this.owner.didSetLeftAxis(t,e)},componentWillSetAxisTrait:function(t,e){this.owner.willSetLeftAxisTrait(t,e)},componentDidSetAxisTrait:function(t,e){this.owner.onSetLeftAxisTrait(t,e),this.owner.didSetLeftAxisTrait(t,e)},componentWillSetAxisView:function(t,e){this.owner.willSetLeftAxisView(t,e)},componentDidSetAxisView:function(t,e){this.owner.onSetLeftAxisView(t,e),this.owner.didSetLeftAxisView(t,e)}}),m([fs({extends:e.ChartFastener})],e.prototype,"chart",void 0),m([gs({extends:e.TopAxisFastener})],e.prototype,"topAxis",void 0),m([gs({extends:e.RightAxisFastener})],e.prototype,"rightAxis",void 0),m([gs({extends:e.BottomAxisFastener})],e.prototype,"bottomAxis",void 0),m([gs({extends:e.LeftAxisFastener})],e.prototype,"leftAxis",void 0),e}(Ol),bu={fromAny:function(t){if(null==t)return t;return{geoFrame:void 0!==t.geoFrame&&null!==t.geoFrame?p.GeoBox.fromAny(t.geoFrame):null,geoCenter:void 0!==t.geoCenter&&null!==t.geoCenter?p.GeoPoint.fromAny(t.geoCenter):null,zoom:t.zoom,heading:t.heading,tilt:t.tilt}},is:function(t){if(null!=t){return"geoFrame"in t&&"geoCenter"in t&&"zoom"in t&&"heading"in t&&"tilt"in t}return!1}},Su={is:function(t){return!(!p.GeoProjection.is(t)||!bu.is(t))}},Cu=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidProjectObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidProjectObservers))},i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&Xi.NeedsAnimate)&&(t&=~Xi.NeedsAnimate),t},i.prototype.doProcess=function(t,e){var i=t;this.setViewFlags(this.viewFlags&~Xi.NeedsProcess|Xi.TraversingFlag|Xi.ProcessingFlag);try{this.willProcess(i,e),0!=((this.viewFlags|t)&Xi.NeedsResize)&&(i|=Xi.NeedsResize,this.setViewFlags(this.viewFlags&~Xi.NeedsResize),this.willResize(e)),0!=((this.viewFlags|t)&Xi.NeedsScroll)&&(i|=Xi.NeedsScroll,this.setViewFlags(this.viewFlags&~Xi.NeedsScroll),this.willScroll(e)),0!=((this.viewFlags|t)&Xi.NeedsChange)&&(i|=Xi.NeedsChange,this.setViewFlags(this.viewFlags&~Xi.NeedsChange),this.willChange(e)),0!=((this.viewFlags|t)&Xi.NeedsAnimate)&&(i|=Xi.NeedsAnimate,this.setViewFlags(this.viewFlags&~Xi.NeedsAnimate),this.willAnimate(e)),0!=((this.viewFlags|t)&Xi.NeedsLayout)&&(i|=Xi.NeedsLayout,this.setViewFlags(this.viewFlags&~Xi.NeedsLayout),this.willLayout(e)),0!=((this.viewFlags|t)&Xi.NeedsProject)&&(i|=Xi.NeedsProject,this.setViewFlags(this.viewFlags&~Xi.NeedsProject),this.willProject(e)),this.onProcess(i,e),0!=(i&Xi.NeedsResize)&&this.onResize(e),0!=(i&Xi.NeedsScroll)&&this.onScroll(e),0!=(i&Xi.NeedsChange)&&this.onChange(e),0!=(i&Xi.NeedsAnimate)&&this.onAnimate(e),0!=(i&Xi.NeedsLayout)&&this.onLayout(e),0!=(i&Xi.NeedsProject)&&this.onProject(e),this.doProcessChildViews(i,e),0!=(i&Xi.NeedsProject)&&this.didProject(e),0!=(i&Xi.NeedsLayout)&&this.didLayout(e),0!=(i&Xi.NeedsAnimate)&&this.didAnimate(e),0!=(i&Xi.NeedsChange)&&this.didChange(e),0!=(i&Xi.NeedsScroll)&&this.didScroll(e),0!=(i&Xi.NeedsResize)&&this.didResize(e),this.didProcess(i,e)}finally{this.setViewFlags(this.viewFlags&~(Xi.TraversingFlag|Xi.ProcessingFlag))}},i.prototype.willProject=function(t){var e=this.viewController;null!==e&&e.viewWillProject(t,this);var i=this.viewObserverCache.viewWillProjectObservers;if(void 0!==i)for(var o=0;o<i.length;o+=1){i[o].viewWillProject(t,this)}},i.prototype.onProject=function(t){},i.prototype.didProject=function(t){var e=this.viewObserverCache.viewDidProjectObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidProject(t,this)}var o=this.viewController;null!==o&&o.viewDidProject(t,this)},i.prototype.onSetHidden=function(t){var e=this.parentView;e instanceof i&&e.onSetChildViewHidden(this,t),t||this.requireUpdate(Xi.NeedsProject)},i.prototype.onSetChildViewHidden=function(t,e){},i.prototype.cullGeoFrame=function(t){void 0===t&&(t=this.geoFrame),this.setCulled(!t.intersects(this.geoBounds))},Object.defineProperty(i.prototype,"geoViewport",{get:function(){return this.viewContext.geoViewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.parentView;return t instanceof i?t.geoFrame:p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ownGeoBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.willSetGeoBounds=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoBounds&&i.viewWillSetGeoBounds(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoBounds&&s.viewWillSetGeoBounds(t,e,this)}},i.prototype.onSetGeoBounds=function(t,e){var o=this.parentView;o instanceof i&&o.onSetChildViewGeoBounds(this,t,e)},i.prototype.didSetGeoBounds=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoBounds&&r.viewDidSetGeoBounds(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoBounds&&s.viewDidSetGeoBounds(t,e,this)},i.prototype.onSetChildViewGeoBounds=function(t,e,i){},i.prototype.deriveGeoBounds=function(){var t=this.ownGeoBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()){var o=e.geoBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.geoFrame),t},i.mountFlags=nr.mountFlags|Xi.NeedsProject,i.uncullFlags=nr.uncullFlags|Xi.NeedsProject,i}(nr);Object.defineProperty(Cu.prototype,"geoBounds",{get:function(){return this.geoFrame},enumerable:!0,configurable:!0});var Pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoViewport",{get:function(){var t=this.view;return null!==t?t.geoViewport:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoFrame",{get:function(){var t=this.view;return null!==t?t.geoFrame:p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.view;return null!==t?t.geoBounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e.prototype.viewWillSetGeoBounds=function(t,e,i){},e.prototype.viewDidSetGeoBounds=function(t,e,i){},e}(rr),Vu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(at),Fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.fromTrait=function(t){return t instanceof Du?new xu:t instanceof _u?new Qu:t instanceof Hu?new Yu:t instanceof Bu?new qu:null},m([ns({type:a.Timing,inherit:!0})],e.prototype,"geoTiming",void 0),e}(bs),Tu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"childViews",{value:[],enumerable:!0}),Object.defineProperty(e,"childViewMap",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof nr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof nr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof nr))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.didInsertChildView=function(e,i){e instanceof Cu&&this.onInsertChildViewBounds(e,e.geoBounds),t.prototype.didInsertChildView.call(this,e,i)},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof nr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.didRemoveChildView=function(e){e instanceof Cu&&this.onRemoveChildViewBounds(e,e.geoBounds),t.prototype.didRemoveChildView.call(this,e)},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.doMountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doPowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.doUnpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&Xi.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~Xi.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&Xi.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~Xi.RemovingFlag),this.removeChildView(r))}},e.prototype.setGeoBounds=function(t){var e=this.geoBounds;e.equals(t)||(this.willSetGeoBounds(t,e),Object.defineProperty(this,"geoBounds",{value:t,enumerable:!0,configurable:!0}),this.onSetGeoBounds(t,e),this.didSetGeoBounds(t,e))},e.prototype.updateGeoBounds=function(){this.setGeoBounds(this.deriveGeoBounds())},e.prototype.onInsertChildViewBounds=function(t,e){this.updateGeoBounds()},e.prototype.onRemoveChildViewBounds=function(t,e){this.updateGeoBounds()},e.prototype.onSetChildViewGeoBounds=function(t,e,i){this.updateGeoBounds()},e.prototype.onSetChildViewHidden=function(t,e){this.updateGeoBounds()},e.prototype.deriveGeoBounds=function(){for(var t=this.ownGeoBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof Cu&&!n.isHidden()){var r=n.geoBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.geoFrame),t},e.prototype.deriveViewBounds=function(){for(var t=this.ownViewBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.viewBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof nr&&!n.isHidden()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.doHitTest=function(t,e,i){for(var o=null,n=this.childViews,r=n.length-1;r>=0;r-=1){var s=n[r];if(s instanceof nr&&!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(o=s.hitTest(t,e,i)))break}return o},e}(Cu),Du=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"geoBounds",{value:p.GeoBox.globe(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"featureFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.setGeoBounds=function(t){var e=this.geoBounds;t.equals(e)||(this.willSetGeoBounds(t,e),Object.defineProperty(this,"geoBounds",{value:t,enumerable:!0,configurable:!0}),this.onSetGeoBounds(t,e),this.didSetGeoBounds(t,e))},e.prototype.willSetGeoBounds=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoBounds&&r.traitWillSetGeoBounds(t,e,this)}},e.prototype.onSetGeoBounds=function(t,e){},e.prototype.didSetGeoBounds=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoBounds&&r.traitDidSetGeoBounds(t,e,this)}},e.prototype.insertFeature=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createFeatureFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeFeature=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initFeature=function(t,e){},e.prototype.attachFeature=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachFeature=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetFeature=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetFeature&&a.traitWillSetFeature(t,e,i,this)}},e.prototype.onSetFeature=function(t,e,i,o){null!==e&&this.detachFeature(e,o),null!==t&&(this.attachFeature(t,o),this.initFeature(t,o))},e.prototype.didSetFeature=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetFeature&&a.traitDidSetFeature(t,e,i,this)}},e.prototype.createFeatureFastener=function(t){return new e.FeatureFastener(this,t.key,"feature")},e.prototype.mountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingFeatures=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingFeatures=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectFeatureModel=function(t){return t.getTrait(Vu)},e.prototype.detectChildModel=function(t){var e=this.detectFeatureModel(t);null!==e&&this.insertFeature(e)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i];this.detectChildModel(n)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.detectInsertChildModel=function(t,e){var i=this.detectFeatureModel(t);if(null!==i){var o=null!==e?this.detectFeatureModel(e):null;this.insertFeature(i,o)}},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.detectInsertChildModel(e,i)},e.prototype.detectRemoveChildModel=function(t){var e=this.detectFeatureModel(t);null!==e&&this.removeFeature(e)},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.detectRemoveChildModel(e)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountFeatureFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountFeatureFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingFeatures()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingFeatures()},e.FeatureFastener=K.define({type:Vu,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetFeature(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetFeature(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetFeature(t,e,i,this)}}),e}(Vu),Mu=function(){function t(t,e,i,o,n,r,s,a,l,u,h,p){Object.defineProperty(this,"depth",{value:t,enumerable:!0}),Object.defineProperty(this,"maxDepth",{value:e,enumerable:!0}),Object.defineProperty(this,"density",{value:i,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:o,enumerable:!0}),Object.defineProperty(this,"geoBounds",{value:n,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:r,enumerable:!0}),Object.defineProperty(this,"southWest",{value:s,enumerable:!0}),Object.defineProperty(this,"northWest",{value:a,enumerable:!0}),Object.defineProperty(this,"southEast",{value:l,enumerable:!0}),Object.defineProperty(this,"northEast",{value:u,enumerable:!0}),Object.defineProperty(this,"views",{value:h,enumerable:!0}),Object.defineProperty(this,"size",{value:p,enumerable:!0})}return t.prototype.isEmpty=function(){return 0===this.size},t.prototype.contains=function(t){return this.geoFrame.contains(t)},t.prototype.intersects=function(t){return this.geoFrame.intersects(t)},t.prototype.getTree=function(t){if(this.depth<this.maxDepth&&this.size>this.density){var e=this.geoCenter,i=t.lngMin<=e.lng,o=t.latMin<=e.lat,n=t.lngMax>e.lng,r=t.latMax>e.lat;if(i!==n&&o!==r)if(o&&i){var s=this.southWest;if(null!==s)return s.getTree(t)}else if(r&&i){var a=this.northWest;if(null!==a)return a.getTree(t)}else if(o&&n){var l=this.southEast;if(null!==l)return l.getTree(t)}else if(r&&n){var u=this.northEast;if(null!==u)return u.getTree(t)}}return this},t.prototype.has=function(t,e){if(this.depth<this.maxDepth&&this.size>this.density){var i=this.hasNode(t,e);if(void 0!==i)return i}return this.hasLeaf(t,e)},t.prototype.hasNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s)if(n&&o){var a=this.southWest;if(null!==a)return a.has(t,e)}else if(s&&o){var l=this.northWest;if(null!==l)return l.has(t,e)}else if(n&&r){var u=this.southEast;if(null!==u)return u.has(t,e)}else if(s&&r){var h=this.northEast;if(null!==h)return h.has(t,e)}},t.prototype.hasLeaf=function(t,e){return this.views.indexOf(t)>=0},t.prototype.inserted=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.insertedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density+1&&(i=i.reinsertedNode()),i}return this!==(i=i.insertedLeaf(t,e))&&i.depth<i.maxDepth&&i.size===i.density+1&&(i=i.reinsertedNode()),i},t.prototype.insertedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var a=this.southWest,l=a;return null===l&&(l=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoFrame.latMin,this.geoCenter.lng,this.geoCenter.lat))),a!==(l=l.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,l,this.northWest,this.southEast,this.northEast,this.views,this.size+1):this}if(s&&o){var u=this.northWest,h=u;return null===h&&(h=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoCenter.lat,this.geoCenter.lng,this.geoFrame.latMax))),u!==(h=h.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,h,this.southEast,this.northEast,this.views,this.size+1):this}if(n&&r){var d=this.southEast,c=d;return null===c&&(c=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoFrame.latMin,this.geoFrame.lngMax,this.geoCenter.lat))),d!==(c=c.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,c,this.northEast,this.views,this.size+1):this}if(s&&r){var v=this.northEast,f=v;return null===f&&(f=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoCenter.lat,this.geoFrame.lngMax,this.geoFrame.latMax))),v!==(f=f.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,f,this.views,this.size+1):this}}return null},t.prototype.insertedLeaf=function(t,e){var i=this.views;if(i.indexOf(t)<0){var o=i.slice(0);return o.push(t),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,o,this.size+1)}return this},t.prototype.removed=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.removedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density&&(i=i.reinsertedLeaf()),i}return this!==(i=i.removedLeaf(t,e))&&i.size===i.density&&(i=i.reinsertedLeaf()),i},t.prototype.removedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var a=this.southWest;if(null!==a){var l=a.removed(t,e);return l.isEmpty()&&(l=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,l,this.northWest,this.southEast,this.northEast,this.views,this.size-1)}return this}if(s&&o){var u=this.northWest;if(null!==u){var h=u.removed(t,e);return h.isEmpty()&&(h=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,h,this.southEast,this.northEast,this.views,this.size-1)}return this}if(n&&r){var p=this.southEast;if(null!==p){var d=p.removed(t,e);return d.isEmpty()&&(d=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,d,this.northEast,this.views,this.size-1)}return this}if(s&&r){var c=this.northEast;if(null!==c){var v=c.removed(t,e);return v.isEmpty()&&(v=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,v,this.views,this.size-1)}return this}}return null},t.prototype.removedLeaf=function(t,e){var i=this.views,o=i.indexOf(t);if(o>=0){var n=i.slice(0);return n.splice(o,1),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,n,this.size-1)}return this},t.prototype.reinsertedNode=function(){var t=this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){var i=e.geoBounds,o=t.insertedNode(e,i);t=null!==o?o:t.insertedLeaf(e,i)}),this),t},t.prototype.reinsertedLeaf=function(){var t=this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){t=t.insertedLeaf(e,e.geoBounds)}),this),t},t.prototype.moved=function(t,e,i){if(this.depth<this.maxDepth&&this.size>this.density){var o=this.geoCenter,n=e.lngMin<=o.lng,r=e.latMin<=o.lat,s=e.lngMax>o.lng,a=e.latMax>o.lat,l=i.lngMin<=o.lng,u=i.latMin<=o.lat,h=i.lngMax>o.lng,p=i.latMax>o.lat;if(n!==l||r!==u||s!==h||a!==p)return this.removed(t,i).inserted(t,e);if(n!==s&&r!==a)if(r&&n){var d=this.southWest,c=d.moved(t,e,i);if(d!==c)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,c,this.northWest,this.southEast,this.northEast,this.views,this.size)}else if(a&&n){var v=this.northWest,f=v.moved(t,e,i);if(v!==f)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,f,this.southEast,this.northEast,this.views,this.size)}else if(r&&s){var y=this.southEast,g=y.moved(t,e,i);if(y!==g)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,g,this.northEast,this.views,this.size)}else if(a&&s){var w=this.northEast,m=w.moved(t,e,i);if(w!==m)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,m,this.views,this.size)}}return this},t.prototype.forEach=function(t,e){if(null!==this.southWest&&void 0!==(n=this.southWest.forEach(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEach(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEach(t,e)))return n;if(null!==this.northEast&&void 0!==(n=this.northEast.forEach(t,e)))return n;for(var i=this.views,o=0;o<i.length;o+=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}},t.prototype.forEachReverse=function(t,e){for(var i=this.views,o=i.length-1;o>=0;o-=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}if(null!==this.northEast&&void 0!==(n=this.northEast.forEachReverse(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEachReverse(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEachReverse(t,e)))return n;if(null!==this.southWest&&void 0!==(n=this.southWest.forEachReverse(t,e)))return n},t.prototype.forEachIntersecting=function(t,e,i){if(this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.forEachNonIntersecting=function(t,e,i){if(!this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachNonIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.createTree=function(i,o,n,r,s,a,l,u,h,p,d,c){if(void 0===l&&(l=null),void 0===u&&(u=null),void 0===h&&(h=null),void 0===p&&(p=null),void 0===d&&(d=e.Arrays.empty),void 0===c&&(c=0),void 0===a&&(a=r.center),void 0===s){null!==l&&(s=l.geoBounds),null!==u&&(s=void 0!==s?s.union(u.geoBounds):u.geoBounds),null!==h&&(s=void 0!==s?s.union(h.geoBounds):h.geoBounds),null!==p&&(s=void 0!==s?s.union(p.geoBounds):p.geoBounds);for(var v=0;v<d.length;v+=1){var f=d[v];s=void 0!==s?s.union(f.geoBounds):f.geoBounds}void 0===s&&(s=r)}return new t(i,o,n,r,s,a,l,u,h,p,d,c)},t.empty=function(i,o,n,r){return void 0===i&&(i=p.GeoBox.globe()),void 0===o&&(o=0),void 0===n&&(n=20),void 0===r&&(r=8),new t(o,n=Math.max(o,n),r,i,i,i.center,null,null,null,null,e.Arrays.empty,0)},t}(),Ou=function(t){function e(e,i,o,n){var r=t.call(this)||this;return Object.defineProperty(r,"root",{value:Mu.empty(e,i,o,n),enumerable:!0,configurable:!0}),Object.defineProperty(r,"childViewMap",{value:null,enumerable:!0,configurable:!0}),r}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.treeOutlineColor&&this.treeOutlineColor(e.treeOutlineColor)},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.root.forEach((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.root.forEach((function(t){return t}),this);return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.root.forEachReverse((function(t){return t}),this);return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t.parentView===this){var e=null,i=this.root.forEachReverse((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.previousChildView=function(t){if(t.parentView===this){var e=null,i=this.root.forEach((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.forEachChildView=function(t,e){return this.root.forEach(t,e)},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){if(null!==e){if(!(e instanceof Cu))throw new TypeError(""+e);e.remove()}var i=this.getChildView(t);if(null!==i){var o=i.geoBounds;this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i);var n=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.removed(i,o),enumerable:!0,configurable:!0}),(s=this.root.geoBounds).equals(n)||this.onSetGeoBounds(s,n),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}if(null!==e){var r=e.geoBounds;e.setKey(t);var s;n=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.inserted(e,r),enumerable:!0,configurable:!0}),(s=this.root.geoBounds).equals(n)||this.onSetGeoBounds(s,n),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,null),this.didInsertChildView(e,null),e.cascadeInsert()}return i},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},Object.defineProperty(this,"childViewMap",{value:i,enumerable:!0,configurable:!0})),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof Cu))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.inserted(t,i),enumerable:!0,configurable:!0});var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof Cu))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.inserted(t,i),enumerable:!0,configurable:!0});var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof Cu))throw new TypeError(""+t);if(null!==e&&!(e instanceof nr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.geoBounds;this.willInsertChildView(t,e);var n=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.inserted(t,o),enumerable:!0,configurable:!0});var r=this.root.geoBounds;r.equals(n)||this.onSetGeoBounds(r,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof Cu))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");var i=e.geoBounds;this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var o=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.removed(e,i),enumerable:!0,configurable:!0});var n=this.root.geoBounds;if(n.equals(o)||this.onSetGeoBounds(n,o),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){this.root.forEach((function(t){this.removeChildView(t)}),this)},e.prototype.doProcessChildViews=function(t,e){0!=(t&Xi.ProcessMask)&&(this.willProcessChildViews(t,e),this.onProcessChildViews(t,e),this.didProcessChildViews(t,e))},e.prototype.processChildViews=function(t,e,i){this.processTree(this.root,t,e,i)},e.prototype.processTree=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var s=n[r];o.call(this,s,e,i),0!=(s.viewFlags&Xi.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}},e.prototype.onRender=function(t){var e=this.getViewAnimator("treeOutlineColor");null!==e&&void 0!==e.value&&this.renderTree(t,e.value)},e.prototype.renderTree=function(t,e){var i=t.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderTreeOutline(this.root,o,t.geoViewport,e),o.restore()}},e.prototype.renderTreeOutline=function(t,e,i,o){null!==t.southWest&&this.renderTreeOutline(t.southWest,e,i,o),null!==t.northWest&&this.renderTreeOutline(t.northWest,e,i,o),null!==t.southEast&&this.renderTreeOutline(t.southEast,e,i,o),null!==t.northEast&&this.renderTreeOutline(t.northEast,e,i,o);if(t.depth>=2){var n=i.project(t.geoFrame.southWest.normalized()),r=i.project(t.geoFrame.northWest.normalized()),s=i.project(t.geoFrame.northEast.normalized()),a=i.project(t.geoFrame.southEast.normalized());e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.lineTo(s.x,s.y),e.lineTo(a.x,a.y),e.closePath();var l=(t.depth-2)/(t.maxDepth-2);e.lineWidth=4*(1-l)+.5*l,e.strokeStyle=o.toString(),e.stroke()}},e.prototype.displayChildViews=function(t,e,i){this.displayTree(this.root,t,e,i)},e.prototype.displayTree=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var s=n[r];o.call(this,s,e,i),0!=(s.viewFlags&Xi.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~Xi.RemovingFlag),this.removeChildView(s))}},e.prototype.onSetChildViewGeoBounds=function(t,e,i){var o=this.root.geoBounds;Object.defineProperty(this,"root",{value:this.root.moved(t,e,i),enumerable:!0,configurable:!0});var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o)},e.prototype.doHitTest=function(t,e,i){var o=i.geoViewport.unproject(t,e);return this.hitTestTree(this.root,t,e,o,i)},e.prototype.hitTestTree=function(t,e,i,o,n){var r=null;if(null!==t.southWest&&t.southWest.geoFrame.contains(o)&&(r=this.hitTestTree(t.southWest,e,i,o,n)),null===r&&null!==t.northWest&&t.northWest.geoFrame.contains(o)&&(r=this.hitTestTree(t.northWest,e,i,o,n)),null===r&&null!==t.southEast&&t.southEast.geoFrame.contains(o)&&(r=this.hitTestTree(t.southEast,e,i,o,n)),null===r&&null!==t.northEast&&t.northEast.geoFrame.contains(o)&&(r=this.hitTestTree(t.northEast,e,i,o,n)),null===r)for(var s=t.views,a=0;a<s.length;a+=1){var l=s[a];if(l.hitBounds.contains(e,i)&&null!==(r=l.hitTest(e,i,n)))break}return r},e.create=function(){return new e},m([So({type:St})],e.prototype,"treeOutlineColor",void 0),e}(Cu);Object.defineProperty(Ou.prototype,"geoBounds",{get:function(){return this.root.geoBounds},enumerable:!0,configurable:!0});var xu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"featureFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){for(var e=t.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertFeatureTrait(n)}},e.prototype.detachGeoTrait=function(t){for(var e=t.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeFeatureTrait(n)}},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoTrait&&r.componentWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoTrait&&r.componentDidSetGeoTrait(t,e,this)}},e.prototype.willSetGeoBounds=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoBounds&&r.componentWillSetGeoBounds(t,e,this)}},e.prototype.onSetGeoBounds=function(t,e){},e.prototype.didSetGeoBounds=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoBounds&&r.componentDidSetGeoBounds(t,e,this)}},e.prototype.createGeoView=function(){return Ou.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].component;if(null!==n){var r=n.geo.view;null!==r&&null===r.parentView&&n.geo.injectView(t)}}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoView&&r.componentWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoView&&r.componentDidSetGeoView(t,e,this)}},e.prototype.themeGeoView=function(t,e,i,o){},e.prototype.projectGeoView=function(t,e){},e.prototype.cullGeoView=function(t){},e.prototype.uncullGeoView=function(t){},e.prototype.insertFeature=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createFeatureFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeFeature=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createFeature=function(t){return Fu.fromTrait(t)},e.prototype.initFeature=function(t,e){var i=t.geo.trait;null!==i&&this.initFeatureTrait(i,e);var o=t.geo.view;null!==o&&this.initFeatureView(o,e)},e.prototype.attachFeature=function(t,e){var i=t.geo.trait;null!==i&&this.attachFeatureTrait(i,e);var o=t.geo.view;null!==o&&this.attachFeatureView(o,e)},e.prototype.detachFeature=function(t,e){var i=t.geo.view;null!==i&&this.detachFeatureView(i,e);var o=t.geo.trait;null!==o&&this.detachFeatureTrait(o,e)},e.prototype.willSetFeature=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetFeature&&s.componentWillSetFeature(t,e,i)}},e.prototype.onSetFeature=function(t,e,i){null!==e&&this.detachFeature(e,i),null!==t&&(this.attachFeature(t,i),this.initFeature(t,i))},e.prototype.didSetFeature=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetFeature&&s.componentDidSetFeature(t,e,i)}},e.prototype.insertFeatureTrait=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var a=this.createFeature(t);if(null!==a&&(a.geo.setTrait(t),this.insertChildComponent(a,o),null===a.geo.view)){var l=this.createFeatureView(a),u=null;null!==o&&(u=o.geo.view);var h=this.geo.view;null!==h?a.geo.injectView(h,l,u,null):a.geo.setView(l,u)}},e.prototype.removeFeatureTrait=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initFeatureTrait=function(t,e){},e.prototype.attachFeatureTrait=function(t,e){},e.prototype.detachFeatureTrait=function(t,e){},e.prototype.willSetFeatureTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetFeatureTrait&&s.componentWillSetFeatureTrait(t,e,i)}},e.prototype.onSetFeatureTrait=function(t,e,i){null!==e&&this.detachFeatureTrait(e,i),null!==t&&(this.attachFeatureTrait(t,i),this.initFeatureTrait(t,i))},e.prototype.didSetFeatureTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetFeatureTrait&&s.componentDidSetFeatureTrait(t,e,i)}},e.prototype.createFeatureView=function(t){return t.geo.createView()},e.prototype.initFeatureView=function(t,e){},e.prototype.attachFeatureView=function(t,e){},e.prototype.detachFeatureView=function(t,e){t.remove()},e.prototype.willSetFeatureView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetFeatureView&&s.componentWillSetFeatureView(t,e,i)}},e.prototype.onSetFeatureView=function(t,e,i){null!==e&&this.detachFeatureView(e,i),null!==t&&(this.attachFeatureView(t,i),this.initFeatureView(t,i))},e.prototype.didSetFeatureView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetFeatureView&&s.componentDidSetFeatureView(t,e,i)}},e.prototype.willSetFeatureGeoBounds=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetFeatureGeoBounds&&s.componentWillSetFeatureGeoBounds(t,e,i)}},e.prototype.onSetFeatureGeoBounds=function(t,e,i){},e.prototype.didSetFeatureGeoBounds=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetFeatureGeoBounds&&s.componentDidSetFeatureGeoBounds(t,e,i)}},e.prototype.createFeatureFastener=function(t){return new e.FeatureFastener(this,t.key,"feature")},e.prototype.getFeatureFastener=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectFeatureComponent=function(t){return t instanceof Fu?t:null},e.prototype.detectInsertChildComponent=function(t,e){var i=this.detectFeatureComponent(t);null!==i&&this.insertFeature(i,e)},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i),this.detectInsertChildComponent(e,i)},e.prototype.detectRemoveChildComponent=function(t){var e=this.detectFeatureComponent(t);null!==e&&this.removeFeature(e)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e),this.detectRemoveChildComponent(e)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountFeatureFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountFeatureFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GeoFastener=fs.define({observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGeoView(t,e,i,o)},viewWillProject:function(t,e){this.owner.projectGeoView(t,e)},viewDidCull:function(t){this.owner.cullGeoView(t)},viewWillUncull:function(t){this.owner.uncullGeoView(t)},createView:function(){return this.owner.createGeoView()},traitType:Du,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitWillSetGeoBounds:function(t,e){this.owner.willSetGeoBounds(t,e)},traitDidSetGeoBounds:function(t,e){this.owner.onSetGeoBounds(t,e),this.owner.didSetGeoBounds(t,e)},traitWillSetFeature:function(t,e,i){null!==e&&this.owner.removeFeatureTrait(e)},traitDidSetFeature:function(t,e,i){null!==t&&this.owner.insertFeatureTrait(t,i)}}),e.FeatureFastener=gs.define({type:Fu,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetFeature(t,e,this)},onSetComponent:function(t,e){this.owner.onSetFeature(t,e,this)},didSetComponent:function(t,e){this.owner.didSetFeature(t,e,this)},componentWillSetGeoTrait:function(t,e){this.owner.willSetFeatureTrait(t,e,this)},componentDidSetGeoTrait:function(t,e){this.owner.onSetFeatureTrait(t,e,this),this.owner.didSetFeatureTrait(t,e,this)},componentWillSetGeoView:function(t,e){this.owner.willSetFeatureView(t,e,this)},componentDidSetGeoView:function(t,e){this.owner.onSetFeatureView(t,e,this),this.owner.didSetFeatureView(t,e,this)},componentWillSetGeoBounds:function(t,e){this.owner.willSetFeatureGeoBounds(t,e,this)},componentDidSetGeoBounds:function(t,e){this.owner.onSetFeatureGeoBounds(t,e,this),this.owner.didSetFeatureGeoBounds(t,e,this)}}),m([fs({extends:e.GeoFastener})],e.prototype,"geo",void 0),e}(Fu),Au=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:e.createCanvas(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"renderer",{value:e.createRenderer(),enumerable:!0,configurable:!0}),Object.defineProperty(e,"rasterFrame",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof nr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),Object.defineProperty(this,"renderer",{value:t,enumerable:!0,configurable:!0}),this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new cr(e,this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new vr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.didRequestUpdate=function(e,i,o){t.prototype.didRequestUpdate.call(this,e,i,o),this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.needsProcess=function(t,e){return 0!=(this.viewFlags&Xi.ProcessMask)||0!=(t&Xi.NeedsResize)?this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite):t=0,t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(Xi.NeedsLayout|Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&Xi.DisplayMask)?t|=Xi.NeedsRender|Xi.NeedsComposite:t=0!=(t&Xi.NeedsComposite)?Xi.NeedsDisplay|Xi.NeedsComposite:0,t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this.canvas),this.resetRenderer()},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e),this.clearCanvas()},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(Xi.NeedsRender|Xi.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"compositeFrame",{get:function(){var t=this.ownViewFrame;if(null===t){var e=this.parentView;t=e instanceof nr?e.viewFrame:r.R2Box.undefined()}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this.rasterFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){Object.defineProperty(this,"ownViewFrame",{value:t,enumerable:!0,configurable:!0})},e.prototype.doHitTest=function(t,e,i){var o=this.compositeFrame;t-=Math.floor(o.xMin),e-=Math.floor(o.yMin);for(var n=null,r=this.childViews,s=r.length-1;s>=0;s-=1){var a=r[s];if(a instanceof nr&&!a.isHidden()&&!a.isCulled())if(a.hitBounds.contains(t,e)&&null!==(n=a.hitTest(t,e,i)))break}return n},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.compositeFrame,e=Math.floor(t.xMin),i=Math.floor(t.yMin);return 0!==e||0!==i?r.Transform.translate(-e,-i):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t){var e=this.compositeFrame,i=e.xMin-Math.floor(e.xMin),o=e.yMin-Math.floor(e.yMin),n=Math.ceil(i+e.width),s=Math.ceil(o+e.height),a=new r.R2Box(i,o,n,s);if(!this.rasterFrame.equals(a)){var l=this.pixelRatio;t.width=n*l,t.height=s*l,t.style.width=n+"px",t.style.height=s+"px",Object.defineProperty(this,"rasterFrame",{value:a,enumerable:!0,configurable:!0})}},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof cr){var e=this.rasterFrame;t.context.clearRect(0,0,e.xMax,e.yMax)}else if(t instanceof vr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof cr){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof vr){var i=this.rasterFrame;t.context.viewport(0,0,i.xMax,i.yMax)}},e.prototype.compositeImage=function(t){var e=t.compositor,i=t.renderer;if(e instanceof cr&&i instanceof cr){var o=this.compositeFrame,n=e.context;n.save(),n.globalAlpha=this.opacity.getValue(),n.globalCompositeOperation=this.compositeOperation.getValue();var r=Math.floor(o.x),s=Math.floor(o.y);n.drawImage(this.canvas,r,s,o.width,o.height),n.restore()}},e.create=function(){return new e},e.mountFlags=Tu.mountFlags|Xi.NeedsRender|Xi.NeedsComposite,e.powerFlags=Tu.powerFlags|Xi.NeedsRender|Xi.NeedsComposite,e.uncullFlags=Tu.uncullFlags|Xi.NeedsRender|Xi.NeedsComposite,m([So({type:Number,state:1})],e.prototype,"opacity",void 0),m([So({type:String,state:"source-over"})],e.prototype,"compositeOperation",void 0),e}(Tu),Ru=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoTile",{value:e,enumerable:!0}),Object.defineProperty(i,"geoBounds",{value:e.bounds,enumerable:!0}),i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.gridOutlineColor&&this.gridOutlineColor(e.gridOutlineColor)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer,o=this.getViewAnimator("gridOutlineColor");if(i instanceof cr&&!this.isHidden()&&!this.isCulled()&&null!==o&&void 0!==o.value){var n=i.context;n.save(),this.renderTile(n,e.geoViewport,o.value),n.restore()}},e.prototype.renderTile=function(t,e,i){var o=this.geoTile,n=e.project(o.southWest),r=e.project(o.northWest),s=e.project(o.northEast),a=e.project(o.southEast);t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.lineTo(s.x,s.y),t.lineTo(a.x,a.y),t.closePath();var l=Math.min(Math.max(0,o.z/20),1);t.lineWidth=4*(1-l)+.5*l,t.strokeStyle=i.toString(),t.stroke()},e.prototype.setGeoBounds=function(t){},e.prototype.updateGeoBounds=function(){},m([So({type:St,inherit:!0})],e.prototype,"gridOutlineColor",void 0),e}(Tu),ku=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoTile",{value:e,enumerable:!0}),Object.defineProperty(i,"geoBounds",{value:e.bounds,enumerable:!0}),Object.defineProperty(i,"tileFasteners",{value:[],enumerable:!0}),i}return w(e,t),e.prototype.setGeoBounds=function(t){},e.prototype.insertTile=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createTileFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeTile=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initTile=function(t,e){},e.prototype.attachTile=function(t,e){},e.prototype.detachTile=function(t,e){},e.prototype.willSetTile=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetTile&&a.traitWillSetTile(t,e,i,this)}},e.prototype.onSetTile=function(t,e,i,o){null!==e&&this.detachTile(e,o),null!==t&&(this.attachTile(t,o),this.initTile(t,o))},e.prototype.didSetTile=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetTile&&a.traitDidSetTile(t,e,i,this)}},e.prototype.createTileFastener=function(t){return new e.TileFastener(this,t.key,"tile")},e.prototype.mountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.createTileTrait=function(t){return new e(t)},e.prototype.createTileModel=function(t){var e=this.createTileTrait(t);if(null!==e){var i=new dt;return i.setTrait("tile",e),i}return null},e.prototype.initTiles=function(){var t=this.getChildModel("southWest");null===t&&null!==(t=this.createTileModel(this.geoTile.southWestTile))&&this.setChildModel("southWest",t);var e=this.getChildModel("northWest");null===e&&null!==(e=this.createTileModel(this.geoTile.northWestTile))&&this.setChildModel("northWest",e);var i=this.getChildModel("southEast");null===i&&null!==(i=this.createTileModel(this.geoTile.southEastTile))&&this.setChildModel("southEast",i);var o=this.getChildModel("northEast");null===o&&null!==(o=this.createTileModel(this.geoTile.northEastTile))&&this.setChildModel("northEast",o)},e.prototype.detectTileModel=function(t){return t.getTrait(e)},e.prototype.detectChildModel=function(e){var i=this.detectTileModel(e);null!==i?this.insertTile(i):t.prototype.detectChildModel.call(this,e)},e.prototype.detectInsertChildModel=function(e,i){var o=this.detectTileModel(e);if(null!==o){var n=null!==i?this.detectTileModel(i):null;this.insertTile(o,n)}else t.prototype.detectInsertChildModel.call(this,e,i)},e.prototype.detectRemoveChildModel=function(e){var i=this.detectTileModel(e);null!==i?this.removeTile(i):t.prototype.detectRemoveChildModel.call(this,e)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountTileFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountTileFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.initTiles()},e.TileFastener=K.define({type:e,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTile(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetTile(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetTile(t,e,i,this)}}),e}(Du),Iu=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoTile",{value:e,enumerable:!0}),Object.defineProperty(i,"tileFasteners",{value:[],enumerable:!0}),i}return w(e,t),e.prototype.initGeoTrait=function(e){t.prototype.initGeoTrait.call(this,e)},e.prototype.attachGeoTrait=function(e){t.prototype.attachGeoTrait.call(this,e);for(var i=e.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].trait;null!==r&&this.insertTileTrait(r)}var s=this.geo.view;null===s||s.isCulled()||e.addTraitConsumer(this)},e.prototype.detachGeoTrait=function(e){e.removeTraitConsumer(this);for(var i=e.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].trait;null!==r&&this.removeTileTrait(r)}t.prototype.detachGeoTrait.call(this,e)},e.prototype.willSetGeoTrait=function(e,i){t.prototype.willSetGeoTrait.call(this,e,i)},e.prototype.onSetGeoTrait=function(e,i){t.prototype.onSetGeoTrait.call(this,e,i)},e.prototype.didSetGeoTrait=function(e,i){t.prototype.didSetGeoTrait.call(this,e,i)},e.prototype.createGeoView=function(){return new Ru(this.geoTile)},e.prototype.initGeoView=function(e){t.prototype.initGeoView.call(this,e),e.setCulled(!0)},e.prototype.attachGeoView=function(e){t.prototype.attachGeoView.call(this,e);for(var i=this.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var s=r.geo.view;null!==s&&null===s.parentView&&r.geo.injectView(e)}}},e.prototype.detachGeoView=function(e){t.prototype.detachGeoView.call(this,e)},e.prototype.projectGeoView=function(e,i){t.prototype.projectGeoView.call(this,e,i),this.autoCullGeoView(e.geoViewport,i),this.autoConsumeGeoView(e.geoViewport,i)},Object.defineProperty(e.prototype,"minCullZoom",{get:function(){return this.geoTile.z},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxCullZoom",{get:function(){return 1/0},enumerable:!1,configurable:!0}),e.prototype.autoCullGeoView=function(t,e){var i=this.minCullZoom<=t.zoom&&t.zoom<this.maxCullZoom&&t.geoFrame.intersects(e.geoBounds);e.setCulled(!i)},Object.defineProperty(e.prototype,"minConsumeZoom",{get:function(){return this.geoTile.z},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxConsumeZoom",{get:function(){return 1/0},enumerable:!1,configurable:!0}),e.prototype.autoConsumeGeoView=function(t,e){var i=this.geo.trait;null!==i&&(this.minConsumeZoom<=t.zoom&&t.zoom<this.maxConsumeZoom&&t.geoFrame.intersects(e.geoBounds)?i.addTraitConsumer(this):i.removeTraitConsumer(this))},e.prototype.insertTile=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createTileFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeTile=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createTile=function(t){return new e(t.geoTile)},e.prototype.initTile=function(t,e){var i=t.geo.trait;null!==i&&this.initTileTrait(i,e);var o=t.geo.view;null!==o&&this.initTileView(o,e)},e.prototype.attachTile=function(t,e){var i=t.geo.trait;null!==i&&this.attachTileTrait(i,e);var o=t.geo.view;null!==o&&this.attachTileView(o,e)},e.prototype.detachTile=function(t,e){var i=t.geo.view;null!==i&&this.detachTileView(i,e);var o=t.geo.trait;null!==o&&this.detachTileTrait(o,e)},e.prototype.willSetTile=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetTile&&s.componentWillSetTile(t,e,i)}},e.prototype.onSetTile=function(t,e,i){null!==e&&this.detachTile(e,i),null!==t&&(this.attachTile(t,i),this.initTile(t,i))},e.prototype.didSetTile=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetTile&&s.componentDidSetTile(t,e,i)}},e.prototype.insertTileTrait=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var a=this.createTile(t);if(null!==a&&(a.geo.setTrait(t),this.insertChildComponent(a,o),null===a.geo.view)){var l=this.createTileView(a),u=null;null!==o&&(u=o.geo.view);var h=this.geo.view;null!==h?a.geo.injectView(h,l,u,null):a.geo.setView(l,u)}},e.prototype.removeTileTrait=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initTileTrait=function(t,e){},e.prototype.attachTileTrait=function(t,e){},e.prototype.detachTileTrait=function(t,e){},e.prototype.willSetTileTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetTileTrait&&s.componentWillSetTileTrait(t,e,i)}},e.prototype.onSetTileTrait=function(t,e,i){null!==e&&this.detachTileTrait(e,i),null!==t&&(this.attachTileTrait(t,i),this.initTileTrait(t,i))},e.prototype.didSetTileTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetTileTrait&&s.componentDidSetTileTrait(t,e,i)}},e.prototype.createTileView=function(t){return t.geo.createView()},e.prototype.initTileView=function(t,e){},e.prototype.attachTileView=function(t,e){},e.prototype.detachTileView=function(t,e){t.remove()},e.prototype.willSetTileView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetTileView&&s.componentWillSetTileView(t,e,i)}},e.prototype.onSetTileView=function(t,e,i){null!==e&&this.detachTileView(e,i),null!==t&&(this.attachTileView(t,i),this.initTileView(t,i))},e.prototype.didSetTileView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetTileView&&s.componentDidSetTileView(t,e,i)}},e.prototype.createTileFastener=function(t){return new e.TileFastener(this,t.key,"tile")},e.prototype.getTileFastener=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectTileComponent=function(t){return t instanceof e?t:null},e.prototype.detectInsertChildComponent=function(e,i){var o=this.detectTileComponent(e);null!==o?this.insertTile(o,i):t.prototype.detectInsertChildComponent.call(this,e,i)},e.prototype.detectRemoveChildComponent=function(e){var i=this.detectTileComponent(e);null!==i?this.removeTile(i):t.prototype.detectRemoveChildComponent.call(this,e)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountTileFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountTileFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.GeoFastener=fs.define({extends:xu.GeoFastener,traitType:ku,observeTrait:!0,traitWillSetTile:function(t,e,i){null!==e&&this.owner.removeTileTrait(e)},traitDidSetTile:function(t,e,i){null!==t&&this.owner.insertTileTrait(t,i)}}),e.TileFastener=gs.define({type:e,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetTile(t,e,this)},onSetComponent:function(t,e){this.owner.onSetTile(t,e,this)},didSetComponent:function(t,e){this.owner.didSetTile(t,e,this)},componentWillSetGeoTrait:function(t,e){this.owner.willSetTileTrait(t,e,this)},componentDidSetGeoTrait:function(t,e){this.owner.onSetTileTrait(t,e,this),this.owner.didSetTileTrait(t,e,this)},componentWillSetGeoView:function(t,e){this.owner.willSetTileView(t,e,this)},componentDidSetGeoView:function(t,e){this.owner.onSetTileView(t,e,this),this.owner.didSetTileView(t,e,this)}}),m([fs({extends:e.GeoFastener})],e.prototype,"geo",void 0),e}(xu),Lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetGeoCenter=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoCenter&&i.viewWillSetGeoCenter(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoCenter&&s.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectRipple(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoCenter&&s.viewDidSetGeoCenter(t,e,this)},e.prototype.onSetRadius=function(t,e){this.isMounted()&&this.projectRipple(this.viewContext)},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectRipple(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectRipple(e)}},e.prototype.projectRipple=function(t){if(this.viewCenter.takesPrecedence(Xi.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=Math.min(o.width,o.height),s=this.radius.getValue().pxValue(n),a=this.viewCenter.value,l=this.viewCenter.state;null!==a&&null!==l&&(o.intersectsCircle(new r.R2Circle(a.x,a.y,s))||o.intersectsSegment(new r.R2Segment(a.x,a.y,l.x,l.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderRipple(i.context,this.viewFrame),o.restore()}},e.prototype.renderRipple=function(t,e){var i=this.viewCenter.value;if(null!==i&&i.isDefined()){var o=Math.min(e.width,e.height),n=this.radius.getValue().pxValue(o);t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI);var r=this.stroke.value;if(null!==r){var s=this.strokeWidth.value;null!==s&&(t.lineWidth=s.pxValue(o)),t.strokeStyle=r.toString(),t.stroke()}}},e.prototype.updateGeoBounds=function(){},e.prototype.ripple=function(t){var e,i,o,n,s,l;e=void 0===t||void 0===t.source?null:t.source,i=void 0===t||void 0===t.center||null===t.center?null:p.GeoPoint.fromAny(t.center),o=void 0===t||void 0===t.width||null===t.width?null:r.Length.fromAny(t.width),n=void 0===t||void 0===t.radius||null===t.radius?r.Length.pct(12.5):r.Length.fromAny(t.radius),s=void 0===t||void 0===t.color||null===t.color?this.getLookOr(Qt.accentColor,null):t.color instanceof Qt?this.getLookOr(t.color,null):St.fromAny(t.color),l=void 0===t||void 0===t.timing||!0===t.timing?this.getLookOr(Qt.timing,he.ambient,!1):"number"==typeof t.timing?a.Easing.linear.withDuration(t.timing):a.Timing.fromAny(t.timing);var u=void 0!==t?t.opacity:void 0;return null!==e&&this.source.setView(e),null!==i&&this.geoCenter.setState(i,Xi.Intrinsic),null!==o&&this.strokeWidth.setState(o,Xi.Intrinsic),this.radius.setState(n,l),null!==s&&(this.stroke.setState(void 0!==u?s.alpha(u):s),this.stroke.setState(s.alpha(0),l)),this},e.ripple=function(t,i){if(document.hidden||t.isHidden()||t.isCulled()||!t.geoBounds.intersects(t.geoViewport.geoFrame))return null;var o=e.create();return o.source.setView(t),t.appendChildView(o),o.ripple(i),o},e.create=function(){return new e},m([So({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.R2Point,state:r.R2Point.undefined()})],e.prototype,"viewCenter",void 0),m([So({type:r.Length,state:r.Length.zero(),didSetValue:function(t,e){this.owner.onSetRadius(t,e)},onEnd:function(){this.owner.source.setView(null),this.owner.remove()}})],e.prototype,"radius",void 0),m([So({type:St,state:null,look:Qt.accentColor,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:r.Length.px(1),inherit:!0})],e.prototype,"strokeWidth",void 0),m([Lo({child:!1,observe:!0,onSetView:function(t,e){null!==t&&this.owner.geoCenter.setState(t.geoBounds.center,Xi.Intrinsic)},viewDidUnmount:function(t){this.owner.remove()},viewDidSetGeoBounds:function(t,e,i){this.owner.geoCenter.setState(t.center,Xi.Intrinsic)}})],e.prototype,"source",void 0),e}(Tu);Object.defineProperty(Lu.prototype,"viewBounds",{get:function(){var t=this.viewCenter.value;return null!==t&&t.isDefined()?t.bounds:this.viewFrame},enumerable:!0,configurable:!0});var ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.radius&&this.radius(e.radius),void 0!==e.hitRadius&&this.hitRadius(e.hitRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},e.prototype.willSetGeoCenter=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoCenter&&i.viewWillSetGeoCenter(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoCenter&&s.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectCircle(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoCenter&&s.viewDidSetGeoCenter(t,e,this)},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectCircle(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectCircle(e)}},e.prototype.projectCircle=function(t){if(this.viewCenter.takesPrecedence(Xi.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=Math.min(o.width,o.height),s=this.radius.getValue().pxValue(n),a=this.viewCenter.value,l=this.viewCenter.state;null!==a&&null!==l&&(o.intersectsCircle(new r.R2Circle(a.x,a.y,s))||o.intersectsSegment(new r.R2Segment(a.x,a.y,l.x,l.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderCircle(i.context,this.viewFrame),o.restore()}},e.prototype.renderCircle=function(t,e){var i=this.viewCenter.value;if(null!==i&&i.isDefined()){var o=Math.min(e.width,e.height),n=this.radius.getValue().pxValue(o);t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI);var r=this.fill.value;null!==r&&(t.fillStyle=r.toString(),t.fill());var s=this.stroke.value;if(null!==s){var a=this.strokeWidth.value;null!==a&&(t.lineWidth=a.pxValue(o)),t.strokeStyle=s.toString(),t.stroke()}}},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),a=this.radius.getValue().pxValue(i);return new r.R2Box(n-a,s-a,n+a,s+a)}return this.pageBounds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.radius.getValue().pxValue(i),n=Math.max(this.hitRadius.getStateOr(o),o);return new r.R2Box(t.x-n,t.y-n,t.x+n,t.y+n)}return this.viewBounds},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;n=this.hitTestCircle(e,i,s,this.viewFrame,r.pixelRatio)}}return n},e.prototype.hitTestCircle=function(t,e,i,o,n){var r=this.viewCenter.value;if(null!==r&&r.isDefined()){var s=Math.min(o.width,o.height),a=this.radius.getValue().pxValue(s);if(null!==this.fill.value){var l=Math.max(this.hitRadius.getStateOr(a),a),u=r.x-t,h=r.y-e;if(u*u+h*h<l*l)return this}var p=this.strokeWidth.value;if(null!==this.stroke.value&&null!==p){if(t*=n,e*=n,i.save(),i.beginPath(),i.arc(r.x,r.y,a,0,2*Math.PI),i.lineWidth=p.pxValue(s),i.isPointInStroke(t,e))return i.restore(),this;i.restore()}}return null},e.prototype.ripple=function(t){return Lu.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.R2Point,state:r.R2Point.undefined()})],e.prototype,"viewCenter",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"radius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([ho({type:Number})],e.prototype,"hitRadius",void 0),e}(Tu);Object.defineProperty(ju.prototype,"viewBounds",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.radius.getValue().pxValue(i);return new r.R2Box(t.x-o,t.y-o,t.x+o,t.y+o)}return this.viewFrame},enumerable:!0,configurable:!0});var Wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},e.prototype.willSetGeoCenter=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoCenter&&i.viewWillSetGeoCenter(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoCenter&&s.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectArc(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoCenter&&s.viewDidSetGeoCenter(t,e,this)},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.viewCenter.value;return null!==t&&t.isDefined()?new Cr(t,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){var t=this.viewCenter.state;return null!==t&&t.isDefined()?new Cr(t,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state):null},enumerable:!1,configurable:!0}),e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectArc(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectArc(e)}},e.prototype.projectArc=function(t){if(this.viewCenter.takesPrecedence(Xi.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=Math.min(o.width,o.height),s=this.outerRadius.getValue().pxValue(n),a=this.viewCenter.value,l=this.viewCenter.state;null!==a&&null!==l&&(o.intersectsCircle(new r.R2Circle(a.x,a.y,s))||o.intersectsSegment(new r.R2Segment(a.x,a.y,l.x,l.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){var i=this.value;if(null!==i&&e.isDefined()){t.beginPath(),i.draw(t,e);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value;if(null!==n){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s)}t.strokeStyle=n.toString(),t.stroke()}}},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),a=(this.innerRadius.getValue().pxValue(i)+this.outerRadius.getValue().pxValue(i))/2,l=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,u=n+a*Math.cos(l),h=s+a*Math.sin(l);return new r.R2Box(u,h,u,h)}return this.pageBounds},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArc(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestArc=function(t,e,i,o){var n=this.value;if(null!==n){if(i.beginPath(),n.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(void 0!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(s),i.isPointInStroke(t,e))return this}}}return null},e.prototype.ripple=function(t){return Lu.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.R2Point,state:r.R2Point.undefined()})],e.prototype,"viewCenter",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"innerRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"outerRadius",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"startAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"sweepAngle",void 0),m([So({type:r.Angle,state:r.Angle.zero()})],e.prototype,"padAngle",void 0),m([So({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([So({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(Tu);Object.defineProperty(Wu.prototype,"viewBounds",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.outerRadius.getValue().pxValue(i);return new r.R2Box(t.x-o,t.y-o,t.x+o,t.y+o)}return this.viewFrame},enumerable:!0,configurable:!0});var Eu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoPath&&this.geoPath(e.geoPath)},e.prototype.willSetGeoPath=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoPath&&i.viewWillSetGeoPath(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoPath&&s.viewWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectPath(this.viewContext)},e.prototype.didSetGeoPath=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoPath&&r.viewDidSetGeoPath(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoPath&&s.viewDidSetGeoPath(t,e,this)},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectPath(e)},e.prototype.projectPath=function(t){var e,i=t.geoViewport;if(this.viewPath.takesPrecedence(Xi.Intrinsic)){var o=this.geoPath.value;e=null!==o&&o.isDefined()?o.project(i):null,this.viewPath.setState(e,Xi.Intrinsic)}else e=this.viewPath.value;if(this.viewCentroid.takesPrecedence(Xi.Intrinsic)){var n=this.geoCentroid.value,r=null!==n&&n.isDefined()?i.project(n):null;this.viewCentroid.setState(r,Xi.Intrinsic)}Object.defineProperty(this,"viewBounds",{value:null!==e?e.bounds:this.viewFrame,enumerable:!0,configurable:!0}),this.cullGeoFrame(t.geoViewport.geoFrame)},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse(),e=this.viewCentroid.value;if(null!==e&&e.isDefined()){var i=t.transformX(e.x,e.y),o=t.transformY(e.x,e.y);return new r.R2Box(i,o,i,o)}return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),e.prototype.ripple=function(t){return Lu.ripple(this,t)},m([So({type:p.GeoPath,state:null,willSetValue:function(t,e){this.owner.willSetGeoPath(t,e)},didSetValue:function(t,e){this.owner.onSetGeoPath(t,e),this.owner.didSetGeoPath(t,e)}})],e.prototype,"geoPath",void 0),m([So({type:r.R2Path,state:null})],e.prototype,"viewPath",void 0),m([So({type:p.GeoPoint,state:null})],e.prototype,"geoCentroid",void 0),m([So({type:r.R2Point,state:null})],e.prototype,"viewCentroid",void 0),e}(Tu),Nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth)},e.prototype.willSetStroke=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetStroke&&i.viewWillSetStroke(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetStroke&&s.viewWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){this.requireUpdate(Xi.NeedsRender)},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStroke&&r.viewDidSetStroke(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetStroke&&s.viewDidSetStroke(t,e,this)},e.prototype.willSetStrokeWidth=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetStrokeWidth&&i.viewWillSetStrokeWidth(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetStrokeWidth&&s.viewWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){this.requireUpdate(Xi.NeedsRender)},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStrokeWidth&&r.viewDidSetStrokeWidth(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetStrokeWidth&&s.viewDidSetStrokeWidth(t,e,this)},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.takesPrecedence(Xi.Intrinsic)&&this.geoCentroid.setState(e.centroid(),Xi.Intrinsic)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderLine(o,this.viewFrame),o.restore()}},e.prototype.renderLine=function(t,e){var i=this.viewPath.value;if(null!==i&&i.isDefined()){t.beginPath(),i.draw(t);var o=this.stroke.value,n=this.strokeWidth.value;if(null!==o&&null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r),t.strokeStyle=o.toString(),t.stroke()}}},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestLine(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestLine=function(t,e,i,o){var n=this.viewPath.value;if(null!==n&&n.isDefined()&&(i.beginPath(),n.draw(i),null!==this.stroke.value)){var r=this.hitWidth.getStateOr(0),s=this.strokeWidth.value;if(null!==s){var a=Math.min(o.width,o.height);r=Math.max(r,s.pxValue(a))}if(i.lineWidth=r,i.isPointInStroke(t,e))return this}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([So({type:St,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([ho({type:Number})],e.prototype,"hitWidth",void 0),e}(Eu),Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.clipViewport&&this.clipViewport(e.clipViewport)},e.prototype.willSetFill=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetFill&&i.viewWillSetFill(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetFill&&s.viewWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e){this.requireUpdate(Xi.NeedsRender)},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetFill&&r.viewDidSetFill(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetFill&&s.viewDidSetFill(t,e,this)},e.prototype.willSetStroke=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetStroke&&i.viewWillSetStroke(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetStroke&&s.viewWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){this.requireUpdate(Xi.NeedsRender)},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStroke&&r.viewDidSetStroke(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetStroke&&s.viewDidSetStroke(t,e,this)},e.prototype.willSetStrokeWidth=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetStrokeWidth&&i.viewWillSetStrokeWidth(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetStrokeWidth&&s.viewWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){this.requireUpdate(Xi.NeedsRender)},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStrokeWidth&&r.viewDidSetStrokeWidth(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetStrokeWidth&&s.viewDidSetStrokeWidth(t,e,this)},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.takesPrecedence(Xi.Intrinsic)&&this.geoCentroid.setState(e.centroid(),Xi.Intrinsic)},e.prototype.cullGeoFrame=function(t){var e;if(void 0===t&&(t=this.geoFrame),t.intersects(this.geoBounds)){var i=this.viewFrame,o=this.viewBounds;e=!(!this.clipViewport.state||i.xMin-4*i.width<=o.xMin&&o.xMax<=i.xMax+4*i.width&&i.yMin-4*i.height<=o.yMin&&o.yMax<=i.yMax+4*i.height)||!i.intersects(o)}else e=!0;this.setCulled(e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArea(o,this.viewFrame),o.restore()}},e.prototype.renderArea=function(t,e){var i=this.viewPath.value;if(null!==i&&i.isDefined()){t.beginPath(),i.draw(t);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value,r=this.strokeWidth.value;if(null!==n&&null!==r){var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s),t.strokeStyle=n.toString(),t.stroke()}}},e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArea(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestArea=function(t,e,i,o){var n=this.viewPath.value;if(null!==n&&n.isDefined()){if(i.beginPath(),n.draw(i),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(s),i.isPointInStroke(t,e))return this}}}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([So({type:St,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),m([So({type:St,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([ho({type:Boolean,state:!0})],e.prototype,"clipViewport",void 0),e}(Eu),Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.geoPath.state;return null!==t?t.bounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoPath=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoPath&&r.traitWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e){},e.prototype.didSetGeoPath=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoPath&&r.traitDidSetGeoPath(t,e,this)}},m([j({type:p.GeoPath,state:null,willSetState:function(t,e){this.owner.willSetGeoPath(t,e)},didSetState:function(t,e){this.owner.onSetGeoPath(t,e),this.owner.didSetGeoPath(t,e)}})],e.prototype,"geoPath",void 0),e}(Vu),Bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStroke&&r.traitWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStroke&&r.traitDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStrokeWidth&&r.traitWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStrokeWidth&&r.traitDidSetStrokeWidth(t,e,this)}},m([j({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([j({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(Uu),Hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetFill&&r.traitWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetFill&&r.traitDidSetFill(t,e,this)}},e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStroke&&r.traitWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStroke&&r.traitDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStrokeWidth&&r.traitWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStrokeWidth&&r.traitDidSetStrokeWidth(t,e,this)}},m([j({state:null,willSetState:function(t,e){this.owner.willSetFill(t,e)},didSetState:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"fill",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof Qt||(t=St.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([j({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(Uu),zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Fu),qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){if(null!==this.geo.view){this.setGeoPath(t.geoPath.state,t);var e=t.stroke.state;null!==e&&this.setStroke(e,t);var i=t.strokeWidth.state;null!==i&&this.setStrokeWidth(i,t)}},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoTrait&&r.componentWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoTrait&&r.componentDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return Nu.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;if(null!==e){this.setGeoPath(e.geoPath.state,e);var i=e.stroke.state;null!==i&&this.setStroke(i,e);var o=e.strokeWidth.state;null!==o&&this.setStrokeWidth(o,e)}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoView&&r.componentWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoView&&r.componentDidSetGeoView(t,e,this)}},e.prototype.themeGeoView=function(t,e,i,o){},e.prototype.setGeoPath=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.geoPath.setState(t,i,Xi.Intrinsic))},e.prototype.willSetGeoPath=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetGeoPath&&s.componentWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e,i){},e.prototype.didSetGeoPath=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetGeoPath&&s.componentDidSetGeoPath(t,e,this)}},e.prototype.setStroke=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.stroke.setLook(t,i,Xi.Intrinsic):o.stroke.setState(t,i,Xi.Intrinsic))},e.prototype.willSetStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetStroke&&s.componentWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e,i){},e.prototype.didSetStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetStroke&&s.componentDidSetStroke(t,e,this)}},e.prototype.setStrokeWidth=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.strokeWidth.setState(t,i,Xi.Intrinsic))},e.prototype.willSetStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetStrokeWidth&&s.componentWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e,i){},e.prototype.didSetStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetStrokeWidth&&s.componentDidSetStrokeWidth(t,e,this)}},e.GetFastener=fs.define({viewType:Nu,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGeoView(t,e,i,o)},viewWillSetGeoPath:function(t,e,i){this.owner.willSetGeoPath(t,e,i)},viewDidSetGeoPath:function(t,e,i){this.owner.onSetGeoPath(t,e,i),this.owner.didSetGeoPath(t,e,i)},viewWillSetStroke:function(t,e,i){this.owner.willSetStroke(t,e,i)},viewDidSetStroke:function(t,e,i){this.owner.onSetStroke(t,e,i),this.owner.didSetStroke(t,e,i)},viewWillSetStrokeWidth:function(t,e,i){this.owner.willSetStrokeWidth(t,e,i)},viewDidSetStrokeWidth:function(t,e,i){this.owner.onSetStrokeWidth(t,e,i),this.owner.didSetStrokeWidth(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:Bu,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoPath:function(t,e,i){this.owner.setGeoPath(t,i)},traitDidSetStroke:function(t,e,i){this.owner.setStroke(t,i)},traitDidSetStrokeWidth:function(t,e,i){this.owner.setStrokeWidth(t,i)}}),m([fs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(zu),Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){if(null!==this.geo.view){this.setGeoPath(t.geoPath.state,t);var e=t.fill.state;null!==e&&this.setFill(e,t);var i=t.stroke.state;null!==i&&this.setStroke(i,t);var o=t.strokeWidth.state;null!==o&&this.setStrokeWidth(o,t)}},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoTrait&&r.componentWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoTrait&&r.componentDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return Gu.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;if(null!==e){this.setGeoPath(e.geoPath.state,e);var i=e.fill.state;null!==i&&this.setFill(i,e);var o=e.stroke.state;null!==o&&this.setStroke(o,e);var n=e.strokeWidth.state;null!==n&&this.setStrokeWidth(n,e)}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoView&&r.componentWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoView&&r.componentDidSetGeoView(t,e,this)}},e.prototype.themeGeoView=function(t,e,i,o){},e.prototype.setGeoPath=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.geoPath.setState(t,i,Xi.Intrinsic))},e.prototype.willSetGeoPath=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetGeoPath&&s.componentWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e,i){},e.prototype.didSetGeoPath=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetGeoPath&&s.componentDidSetGeoPath(t,e,this)}},e.prototype.setFill=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.fill.setLook(t,i,Xi.Intrinsic):o.fill.setState(t,i,Xi.Intrinsic))},e.prototype.willSetFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetFill&&s.componentWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e,i){},e.prototype.didSetFill=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetFill&&s.componentDidSetFill(t,e,this)}},e.prototype.setStroke=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),t instanceof Qt?o.stroke.setLook(t,i,Xi.Intrinsic):o.stroke.setState(t,i,Xi.Intrinsic))},e.prototype.willSetStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetStroke&&s.componentWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e,i){},e.prototype.didSetStroke=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetStroke&&s.componentDidSetStroke(t,e,this)}},e.prototype.setStrokeWidth=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.strokeWidth.setState(t,i,Xi.Intrinsic))},e.prototype.willSetStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetStrokeWidth&&s.componentWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e,i){},e.prototype.didSetStrokeWidth=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetStrokeWidth&&s.componentDidSetStrokeWidth(t,e,this)}},e.GetFastener=fs.define({viewType:Gu,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGeoView(t,e,i,o)},viewWillSetGeoPath:function(t,e,i){this.owner.willSetGeoPath(t,e,i)},viewDidSetGeoPath:function(t,e,i){this.owner.onSetGeoPath(t,e,i),this.owner.didSetGeoPath(t,e,i)},viewWillSetFill:function(t,e,i){this.owner.willSetFill(t,e,i)},viewDidSetFill:function(t,e,i){this.owner.onSetFill(t,e,i),this.owner.didSetFill(t,e,i)},viewWillSetStroke:function(t,e,i){this.owner.willSetStroke(t,e,i)},viewDidSetStroke:function(t,e,i){this.owner.onSetStroke(t,e,i),this.owner.didSetStroke(t,e,i)},viewWillSetStrokeWidth:function(t,e,i){this.owner.willSetStrokeWidth(t,e,i)},viewDidSetStrokeWidth:function(t,e,i){this.owner.onSetStrokeWidth(t,e,i),this.owner.didSetStrokeWidth(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:Hu,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoPath:function(t,e,i){this.owner.setGeoPath(t,i)},traitDidSetFill:function(t,e,i){this.owner.setFill(t,i)},traitDidSetStroke:function(t,e,i){this.owner.setStroke(t,i)},traitDidSetStrokeWidth:function(t,e,i){this.owner.setStrokeWidth(t,i)}}),m([fs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(zu),Xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.willSetGeoPoint=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoPoint&&i.viewWillSetGeoPoint(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoPoint&&s.viewWillSetGeoPoint(t,e,this)}},e.prototype.onSetGeoPoint=function(t,e){this.setGeoBounds(new p.GeoBox(t.lng,t.lat,t.lng,t.lat)),this.requireUpdate(Xi.NeedsProject)},e.prototype.didSetGeoPoint=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoPoint&&r.viewDidSetGeoPoint(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoPoint&&s.viewDidSetGeoPoint(t,e,this)},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoLabel&&i.viewWillSetGeoLabel(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoLabel&&s.viewWillSetGeoLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoLabel&&r.viewDidSetGeoLabel(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoLabel&&s.viewDidSetGeoLabel(t,e,this)},e.prototype.isGradientStop=function(){return null!==this.color.value||void 0!==this.opacity.value},e.prototype.setState=function(t,i){var o;void 0!==(o=t instanceof e||t instanceof p.GeoPoint?t.toAny():p.GeoPoint.isTuple(t)?{lng:t[0],lat:t[1]}:t).lng&&void 0!==o.lat?this.geoPoint(new p.GeoPoint(o.lng,o.lat),i):void 0!==o.x&&void 0!==o.y&&this.viewPoint(new r.R2Point(o.x,o.y),i),void 0!==o.radius&&this.radius(o.radius,i),void 0!==o.hitRadius&&this.hitRadius(o.hitRadius),void 0!==o.color&&this.color(o.color,i),void 0!==o.opacity&&this.opacity(o.opacity,i),void 0!==o.labelPadding&&this.labelPadding(o.labelPadding,i),void 0!==o.labelPlacement&&this.labelPlacement(o.labelPlacement),void 0!==o.font&&this.font(o.font,i),void 0!==o.textColor&&this.textColor(o.textColor,i),void 0!==o.label&&this.label(o.label)},e.prototype.needsProcess=function(t,e){return 0!=(t&Xi.NeedsProject)&&null!==this.label.view&&this.requireUpdate(Xi.NeedsLayout),t},e.prototype.onProject=function(e){if(t.prototype.onProject.call(this,e),this.viewPoint.takesPrecedence(Xi.Intrinsic)){var i=e.geoViewport.project(this.geoPoint.getValue());Object.defineProperty(this.viewPoint,"ownValue",{value:i,enumerable:!0,configurable:!0}),Object.defineProperty(this.viewPoint,"ownState",{value:i,enumerable:!0,configurable:!0})}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label.view;null!==i&&this.layoutLabel(i,this.viewFrame)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state,o=Math.min(e.width,e.height),n=this.labelPadding.getValue().pxValue(o),s=this.viewPoint.getValue(),a=s.x,l=s.y;"top"===i?l-=n:"bottom"===i&&(l+=n),Vr.is(t)&&(t.textAlign.setState("center",Xi.Intrinsic),t.textBaseline.setState("bottom",Xi.Intrinsic),t.textOrigin.setState(new r.R2Point(a,l),Xi.Intrinsic))},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y,o=this.hitRadius.getStateOr(0);return new r.R2Box(e-o,i-o,e+o,i+o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;n=this.hitTestPoint(e,i,s,this.viewFrame)}}return n},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.viewPoint.getValue(),r=n.x,s=n.y,a=this.radius.value,l=this.hitRadius.getStateOr(0);if(null!==a){var u=Math.min(o.width,o.height);l=Math.max(l,a.pxValue(u))}var h=r-t,p=s-e;return h*h+p*p<l*l?this:null},e.prototype.ripple=function(t){return Lu.ripple(this,t)},e.prototype.toAny=function(){var t={};return t.lng=this.geoPoint.value.lng,t.lat=this.geoPoint.value.lat,this.viewPoint.takesPrecedence(Xi.Intrinsic)||(t.x=this.viewPoint.value.x,t.y=this.viewPoint.value.y),null!==this.radius.value&&(t.radius=this.radius.value),void 0!==this.hitRadius.state&&(t.hitRadius=this.hitRadius.state),null!==this.color.value&&(t.color=this.color.value),void 0!==this.opacity.value&&(t.opacity=this.opacity.value),null!==this.labelPadding.value&&(t.labelPadding=this.labelPadding.value),void 0!==this.labelPlacement.state&&(t.labelPlacement=this.labelPlacement.state),t},e.create=function(){return new e},e.fromGeoPoint=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof p.GeoPoint||p.GeoPoint.isTuple(t))return this.fromGeoPoint(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([So({type:p.GeoPoint,state:p.GeoPoint.origin(),willSetValue:function(t,e){this.owner.willSetGeoPoint(t,e)},didSetValue:function(t,e){this.owner.onSetGeoPoint(t,e),this.owner.didSetGeoPoint(t,e)}})],e.prototype,"geoPoint",void 0),m([So({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"viewPoint",void 0),m([So({type:r.Length,state:null})],e.prototype,"radius",void 0),m([So({type:St,state:null})],e.prototype,"color",void 0),m([So({type:Number})],e.prototype,"opacity",void 0),m([So({type:r.Length,state:null})],e.prototype,"labelPadding",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:Number})],e.prototype,"hitRadius",void 0),m([Lo({key:!0,type:Tr,fromAny:function(t){return t instanceof nr?t:"string"==typeof t&&this.view instanceof Tr?(this.view.text(t),this.view):Tr.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([ho({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(Tu);Object.defineProperty(Xu.prototype,"viewBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y;return new r.R2Box(e,i,e,i)},enumerable:!0,configurable:!0});var Ku=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"gradientStops",{value:0,enumerable:!0,configurable:!0}),Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor);var i=e.points;void 0!==i&&this.points(i)},e.prototype.points=function(t,e){var i=this.childViews;if(void 0===t){for(var o=[],n=0;n<i.length;n+=1){(b=i[n])instanceof Xu&&o.push(b)}return o}for(var r=this.geoBounds,s=1/0,a=1/0,l=-1/0,u=-1/0,h=0,d=0,c=!1,v=(n=0,0);n<i.length&&v<t.length;){if((b=i[n])instanceof Xu){var f=t[v];b.setState(f);var y=b.geoPoint.getValue();h+=g=y.lng,d+=w=y.lat,s=Math.min(s,g),a=Math.min(a,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),v+=1}n+=1}for(;v<t.length;){f=Xu.fromAny(t[v]);this.appendChildView(f);var g,w,m=f.geoPoint.getValue();h+=g=m.lng,d+=w=m.lat,s=Math.min(s,g),a=Math.min(a,w),l=Math.max(g,l),u=Math.max(w,u),c=c||!isFinite(g)||!isFinite(w),n+=1,v+=1}for(;n<i.length;){var b;(b=i[n])instanceof Xu?this.removeChildView(b):n+=1}c||0===v?(this.geoCentroid.setState(p.GeoPoint.origin(),Xi.Intrinsic),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0})):(h/=v,d/=v,this.geoCentroid.setState(new p.GeoPoint(h,d),Xi.Intrinsic),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(s,a,l,u),enumerable:!0,configurable:!0}));var S=this.geoBounds;return r.equals(S)||(this.willSetGeoBounds(S,r),this.onSetGeoBounds(S,r),this.didSetGeoBounds(S,r)),this},e.prototype.appendPoint=function(t,e){return t=Xu.fromAny(t),this.appendChildView(t,e),t},e.prototype.setPoint=function(t,e){return e=Xu.fromAny(e),this.setChildView(t,e),e},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Xu&&this.onInsertPoint(e)},e.prototype.onInsertPoint=function(t){t.requireUpdate(Xi.NeedsAnimate|Xi.NeedsProject)},e.prototype.didProject=function(e){for(var i=this.geoBounds,o=1/0,n=1/0,s=-1/0,a=-1/0,l=0,u=0,h=1/0,d=1/0,c=-1/0,v=-1/0,f=0,y=0,g=!1,w=0,m=0,b=this.childViews,S=0;S<b.length;S+=1){var C=b[S];if(C instanceof Xu){var P=C.geoPoint.getValue(),V=P.lng,F=P.lat;l+=V,u+=F,o=Math.min(o,V),n=Math.min(n,F),s=Math.max(V,s),a=Math.max(F,a),g=g||!isFinite(V)||!isFinite(F);var T=C.viewPoint.getValue(),D=T.x,M=T.y;h=Math.min(h,D),d=Math.min(d,M),c=Math.max(D,c),v=Math.max(M,v),f+=D,y+=M,g=g||!isFinite(D)||!isFinite(M),C.isGradientStop()&&(w+=1),m+=1}}g||0===m?(this.geoCentroid.setState(p.GeoPoint.origin(),Xi.Intrinsic),Object.defineProperty(this,"geoBounds",{value:p.GeoBox.undefined(),enumerable:!0,configurable:!0}),this.viewCentroid.setState(r.R2Point.origin(),Xi.Intrinsic),Object.defineProperty(this,"viewBounds",{value:r.R2Box.undefined(),enumerable:!0,configurable:!0}),this.setCulled(!0)):(l/=m,u/=m,this.geoCentroid.setState(new p.GeoPoint(l,u),Xi.Intrinsic),Object.defineProperty(this,"geoBounds",{value:new p.GeoBox(o,n,s,a),enumerable:!0,configurable:!0}),f/=m,y/=m,this.viewCentroid.setState(new r.R2Point(f,y),Xi.Intrinsic),Object.defineProperty(this,"viewBounds",{value:new r.R2Box(h,d,c,v),enumerable:!0,configurable:!0}),this.cullGeoFrame(e.geoViewport.geoFrame)),Object.defineProperty(this,"gradientStops",{value:w,enumerable:!0,configurable:!0});var O=this.geoBounds;i.equals(O)||(this.willSetGeoBounds(O,i),this.onSetGeoBounds(O,i),this.didSetGeoBounds(O,i)),t.prototype.didProject.call(this,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof cr&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),0!==this.gradientStops?this.renderPlotGradient(o,this.viewFrame):this.renderPlotStroke(o,this.viewFrame),o.restore()}},e.prototype.renderPlotStroke=function(t,e){var i=this.childViews,o=i.length,n=0;t.beginPath();for(var r=0;r<o;r+=1){var s=i[r];if(s instanceof Xu){var a=s.viewPoint.getValue(),l=a.x,u=a.y;0===n?t.moveTo(l,u):t.lineTo(l,u),n+=1}}if(0!==n){var h=this.stroke.value;if(null!==h){var p=Math.min(e.width,e.height),d=this.strokeWidth.getValue().pxValue(p);t.strokeStyle=h.toString(),t.lineWidth=d,t.stroke()}}},e.prototype.renderPlotGradient=function(t,e){for(var i,o=this.stroke.getValue(),n=Math.min(e.width,e.height),r=this.strokeWidth.getValue().pxValue(n),s=this.childViews,a=s.length,l=0;l<a;l+=1){var u=s[l];if(u instanceof Xu){if(void 0!==i){var h=i.viewPoint.getValue().x,p=i.viewPoint.getValue().y,d=u.viewPoint.getValue().x,c=u.viewPoint.getValue().y,v=t.createLinearGradient(h,p,d,c),f=i.color.getValueOr(o),y=i.opacity.value;"number"==typeof y&&(f=f.alpha(y)),v.addColorStop(0,f.toString()),f=u.color.getValueOr(o),"number"==typeof(y=u.opacity.value)&&(f=f.alpha(y)),v.addColorStop(1,f.toString()),t.beginPath(),t.moveTo(h,p),t.lineTo(d,c),t.strokeStyle=v,t.lineWidth=r,t.stroke()}i=u}}},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCentroid.state,e=this.pageTransform.inverse(),i=e.transformX(t.x,t.y),o=e.transformY(t.x,t.y);return new r.R2Box(i,o,i,o)},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),e*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestPlot(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestPlot=function(t,e,i,o){var n=this.childViews.length,r=0;i.beginPath();for(var s=0;s<n;s+=1){var a=this.childViews[s];if(a instanceof Xu){var l=a.viewPoint.getValue(),u=l.x,h=l.y;0===s?i.moveTo(u,h):i.lineTo(u,h),r+=1}}if(0!==r){var p=this.hitWidth.getStateOr(0),d=this.strokeWidth.value;if(null!==d){var c=Math.min(o.width,o.height);p=Math.max(p,d.pxValue(c))}if(i.lineWidth=p,i.isPointInStroke(t,e))return this}return null},e.prototype.ripple=function(t){return Lu.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.value=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([ho({type:p.GeoPoint,state:p.GeoPoint.origin()})],e.prototype,"geoCentroid",void 0),m([ho({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"viewCentroid",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([So({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([So({type:gt,state:null,inherit:!0})],e.prototype,"font",void 0),m([So({type:St,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([ho({type:Number})],e.prototype,"hitWidth",void 0),e}(Tu),Zu=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"canvas",{value:null,enumerable:!0,configurable:!0}),Object.defineProperty(e,"iconBounds",{value:null,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Er.initView(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter)},e.prototype.willSetGeoCenter=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoCenter&&i.viewWillSetGeoCenter(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoCenter&&s.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectIcon(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoCenter&&s.viewDidSetGeoCenter(t,e,this)},e.prototype.onSetViewCenter=function(t,e){Object.defineProperty(this,"iconBounds",{value:null,enumerable:!0,configurable:!0})},e.prototype.willSetGraphics=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGraphics&&i.viewWillSetGraphics(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGraphics&&s.viewWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e){this.requireUpdate(Xi.NeedsRasterize|Xi.NeedsComposite)},e.prototype.didSetGraphics=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGraphics&&r.viewDidSetGraphics(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGraphics&&s.viewDidSetGraphics(t,e,this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Mr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Or){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectIcon(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectIcon(e)}},e.prototype.projectIcon=function(t){if(this.viewCenter.takesPrecedence(Xi.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=this.viewCenter.value,s=this.viewCenter.state;null!==n&&null!==s&&(o.intersectsBox(this.viewBounds)||o.intersectsSegment(new r.R2Segment(n.x,n.y,s.x,s.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),Object.defineProperty(this,"iconBounds",{value:null,enumerable:!0,configurable:!0})},e.prototype.onRasterize=function(e){t.prototype.onRasterize.call(this,e);var i=e.renderer;i instanceof cr&&!this.isHidden()&&!this.isCulled()&&this.rasterizeIcon(i,this.viewBounds)},e.prototype.rasterizeIcon=function(t,e){var i=this.graphics.value;if(null!==i&&null!==this.iconBounds){var o=this.canvas;null===o&&(o=document.createElement("canvas"),Object.defineProperty(this,"canvas",{value:o,enumerable:!0,configurable:!0}));var n=t.pixelRatio,s=e.width,a=e.height,l=o.getContext("2d");o.width===n*s&&o.height===n*a||(o.width=n*s,o.height=n*a,l.setTransform(n,0,0,n,0,0)),l.clearRect(0,0,s,a),l.beginPath();var u=new cr(l,n,this.theme.state,this.mood.state),h=new r.R2Box(0,0,s,a);i.render(u,h)}else Object.defineProperty(this,"canvas",{value:null,enumerable:!0,configurable:!0})},e.prototype.onComposite=function(e){t.prototype.onComposite.call(this,e);var i=e.renderer;i instanceof cr&&!this.isHidden()&&!this.isCulled()&&this.compositeIcon(i,this.viewBounds)},e.prototype.compositeIcon=function(t,e){var i=this.canvas;null!==i&&t.context.drawImage(i,e.x,e.y,e.width,e.height)},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()&&e.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),a=this.iconWidth.value;a=a instanceof r.Length?a.pxValue(i):i;var l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(i):i;var u=n-a*this.xAlign.getValue(),h=s-l*this.yAlign.getValue();return new r.R2Box(u,h,u+a,h+l)}return this.pageBounds},enumerable:!1,configurable:!0}),e.prototype.doHitTest=function(e,i,o){var n=t.prototype.doHitTest.call(this,e,i,o);if(null===n){var r=o.renderer;if(r instanceof cr){var s=r.context;s.save(),n=this.hitTestIcon(e,i,r,this.viewBounds),s.restore()}}return n},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.prototype.ripple=function(t){return Lu.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.mountFlags=Tu.mountFlags|Xi.NeedsRasterize,e.powerFlags=Tu.powerFlags|Xi.NeedsRasterize,e.uncullFlags=Tu.uncullFlags|Xi.NeedsRasterize,m([So({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([So({type:r.R2Point,state:r.R2Point.undefined(),didSetValue:function(t,e){this.owner.onSetViewCenter(t,e)}})],e.prototype,"viewCenter",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout|Xi.NeedsRasterize|Xi.NeedsComposite})],e.prototype,"xAlign",void 0),m([So({type:Number,state:.5,updateFlags:Xi.NeedsLayout|Xi.NeedsRasterize|Xi.NeedsComposite})],e.prototype,"yAlign",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout|Xi.NeedsRasterize|Xi.NeedsComposite})],e.prototype,"iconWidth",void 0),m([So({type:r.Length,state:null,updateFlags:Xi.NeedsLayout|Xi.NeedsRasterize|Xi.NeedsComposite})],e.prototype,"iconHeight",void 0),m([So({type:St,state:null,updateFlags:Xi.NeedsRasterize|Xi.NeedsComposite})],e.prototype,"iconColor",void 0),m([So({extends:Nr,type:Object,willSetValue:function(t,e){this.owner.willSetGraphics(t,e)},didSetValue:function(t,e){this.owner.onSetGraphics(t,e),this.owner.didSetGraphics(t,e)}})],e.prototype,"graphics",void 0),e}(Tu);Object.defineProperty(Zu.prototype,"viewBounds",{get:function(){var t=this.iconBounds;if(null===t){var e=this.viewCenter.value,i=this.viewFrame;if(null!==e&&e.isDefined()&&i.isDefined()){var o=Math.min(i.width,i.height),n=this.iconWidth.value;n=n instanceof r.Length?n.pxValue(o):o;var s=this.iconWidth.state;s=s instanceof r.Length?s.pxValue(o):o;var a=Math.max(n,s),l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(o):o;var u=this.iconHeight.state;u=u instanceof r.Length?u.pxValue(o):o;var h=Math.max(l,u),p=e.x-a*this.xAlign.getValue(),d=e.y-h*this.yAlign.getValue();t=new r.R2Box(p,d,p+a,d+h),Object.defineProperty(this,"iconBounds",{value:t,enumerable:!0,configurable:!0})}else t=this.viewFrame}return t},enumerable:!0,configurable:!0});var _u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.geoCenter.state;return null!==t?t.bounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoCenter=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoCenter&&r.traitWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoCenter&&r.traitDidSetGeoCenter(t,e,this)}},e.prototype.willSetIconLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetIconLayout&&r.traitWillSetIconLayout(t,e,this)}},e.prototype.onSetIconLayout=function(t,e){},e.prototype.didSetIconLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetIconLayout&&r.traitDidSetIconLayout(t,e,this)}},e.prototype.willSetGraphics=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGraphics&&r.traitWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e){},e.prototype.didSetGraphics=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGraphics&&r.traitDidSetGraphics(t,e,this)}},m([j({type:p.GeoPoint,state:null,willSetState:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetState:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([j({type:Dr,state:null,willSetState:function(t,e){this.owner.willSetIconLayout(t,e)},didSetState:function(t,e){this.owner.onSetIconLayout(t,e),this.owner.didSetIconLayout(t,e)}})],e.prototype,"iconLayout",void 0),m([j({state:null,willSetState:function(t,e){this.owner.willSetGraphics(t,e)},didSetState:function(t,e){this.owner.onSetGraphics(t,e),this.owner.didSetGraphics(t,e)}})],e.prototype,"graphics",void 0),e}(Vu),Qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){null!==this.geo.view&&(this.setGeoCenter(t.geoCenter.state,t),this.setIconLayout(t.iconLayout.state,t),this.setGraphics(t.graphics.state,t))},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoTrait&&r.componentWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoTrait&&r.componentDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return Zu.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;null!==e&&(this.setGeoCenter(e.geoCenter.state,e),this.setIconLayout(e.iconLayout.state,e),this.setGraphics(e.graphics.state,e))},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetGeoView&&r.componentWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetGeoView&&r.componentDidSetGeoView(t,e,this)}},e.prototype.themeGeoView=function(t,e,i,o){},e.prototype.setGeoCenter=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.geoCenter.setState(t,i,Xi.Intrinsic))},e.prototype.willSetGeoCenter=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetGeoCenter&&s.componentWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e,i){},e.prototype.didSetGeoCenter=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetGeoCenter&&s.componentDidSetGeoCenter(t,e,this)}},e.prototype.setIconLayout=function(t,e,i){var o=this.geo.view;null!==o&&null!==t&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.iconWidth.setState(t.iconWidth,i,Xi.Intrinsic),o.iconHeight.setState(t.iconHeight,i,Xi.Intrinsic),void 0!==t.xAlign&&o.xAlign.setState(t.xAlign,i,Xi.Intrinsic),void 0!==t.yAlign&&o.yAlign.setState(t.yAlign,i,Xi.Intrinsic))},e.prototype.willSetIconLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetIconLayout&&s.componentWillSetIconLayout(t,e,this)}},e.prototype.onSetIconLayout=function(t,e,i){},e.prototype.didSetIconLayout=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetIconLayout&&s.componentDidSetIconLayout(t,e,this)}},e.prototype.setGraphics=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(Qt.timing,he.ambient)):i=a.Timing.fromAny(i),o.graphics.setState(t,i,Xi.Intrinsic))},e.prototype.willSetGraphics=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetGraphics&&s.componentWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e,i){},e.prototype.didSetGraphics=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetGraphics&&s.componentDidSetGraphics(t,e,this)}},e.GetFastener=fs.define({viewType:Zu,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeGeoView(t,e,i,o)},viewWillSetGeoCenter:function(t,e,i){this.owner.willSetGeoCenter(t,e,i)},viewDidSetGeoCenter:function(t,e,i){this.owner.onSetGeoCenter(t,e,i),this.owner.didSetGeoCenter(t,e,i)},viewWillSetGraphics:function(t,e,i){this.owner.willSetGraphics(t,e,i)},viewDidSetGraphics:function(t,e,i){this.owner.onSetGraphics(t,e,i),this.owner.didSetGraphics(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:_u,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoCenter:function(t,e,i){this.owner.setGeoCenter(t,i)},traitDidSetIconLayout:function(t,e,i){this.owner.setIconLayout(t,i)},traitDidSetGraphics:function(t,e,i){this.owner.setGraphics(t,i)}}),m([fs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(Fu),Ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.needsProcess=function(t,e){return 0!=(t&Xi.NeedsResize)&&(t|=Xi.NeedsProject),t},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoViewport=this.geoViewport,e},Object.defineProperty(e.prototype,"geoFrame",{get:function(){return this.geoViewport.geoFrame},enumerable:!1,configurable:!0}),e.prototype.initCanvas=function(t){},e.prototype.attachCanvas=function(t){},e.prototype.detachCanvas=function(t){},e.prototype.willSetCanvas=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetMapCanvas&&i.viewWillSetMapCanvas(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetMapCanvas&&s.viewWillSetMapCanvas(t,e,this)}},e.prototype.onSetCanvas=function(t,e){null!==e&&this.detachCanvas(e),null!==t&&(this.attachCanvas(t),this.initCanvas(t))},e.prototype.didSetCanvas=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetMapCanvas&&r.viewDidSetMapCanvas(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetMapCanvas&&s.viewDidSetMapCanvas(t,e,this)},e.prototype.initContainer=function(t){},e.prototype.attachContainer=function(t){},e.prototype.detachContainer=function(t){},e.prototype.willSetContainer=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetMapContainer&&i.viewWillSetMapContainer(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetMapContainer&&s.viewWillSetMapContainer(t,e,this)}},e.prototype.onSetContainer=function(t,e){null!==e&&this.detachContainer(e),null!==t&&(this.attachContainer(t),this.initContainer(t))},e.prototype.didSetContainer=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetMapContainer&&r.viewDidSetMapContainer(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetMapContainer&&s.viewDidSetMapContainer(t,e,this)},e.powerFlags=Tu.powerFlags|Xi.NeedsProject,m([Lo({type:fr,child:!1,willSetView:function(t,e){this.owner.willSetCanvas(t,e)},onSetView:function(t,e){this.owner.onSetCanvas(t,e)},didSetView:function(t,e){this.owner.didSetCanvas(t,e)}})],e.prototype,"canvas",void 0),m([Lo({type:Zn,child:!1,willSetView:function(t,e){this.owner.willSetContainer(t,e)},onSetView:function(t,e){this.owner.onSetContainer(t,e)},didSetView:function(t,e){this.owner.didSetContainer(t,e)}})],e.prototype,"container",void 0),e}(Tu),$u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e.prototype.viewWillSetMapCanvas=function(t,e,i){},e.prototype.viewDidSetMapCanvas=function(t,e,i){},e.prototype.viewWillSetMapContainer=function(t,e,i){},e.prototype.viewDidSetMapContainer=function(t,e,i){},e}(Pu),th=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"layerFasteners",{value:[],enumerable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoPerspective=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoPerspective&&r.traitWillSetGeoPerspective(t,e,this)}},e.prototype.onSetGeoPerspective=function(t,e){},e.prototype.didSetGeoPerspective=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoPerspective&&r.traitDidSetGeoPerspective(t,e,this)}},e.prototype.insertLayer=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var a=this.createLayerFastener(t);i.splice(o,0,a),a.setTrait(t,e),this.isMounted()&&a.mount()},e.prototype.removeLayer=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initLayer=function(t,e){},e.prototype.attachLayer=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachLayer=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetLayer=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitWillSetLayer&&a.traitWillSetLayer(t,e,i,this)}},e.prototype.onSetLayer=function(t,e,i,o){null!==e&&this.detachLayer(e,o),null!==t&&(this.attachLayer(t,o),this.initLayer(t,o))},e.prototype.didSetLayer=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var a=n[r];void 0!==a.traitDidSetLayer&&a.traitDidSetLayer(t,e,i,this)}},e.prototype.createLayerFastener=function(t){return new e.LayerFastener(this,t.key,"layer")},e.prototype.mountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingLayers=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingLayers=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectLayerModel=function(t){return t.getTrait(Vu)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectLayerModel(n);null!==r&&this.insertLayer(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectLayerModel(e);if(null!==o){var n=null!==i?this.detectLayerModel(i):null;this.insertLayer(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectLayerModel(e);null!==i&&this.removeLayer(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountLayerFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountLayerFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingLayers()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingLayers()},e.LayerFastener=K.define({type:Vu,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetLayer(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetLayer(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetLayer(t,e,i,this)}}),m([j({type:bu,state:null,willSetState:function(t,e){this.owner.willSetGeoPerspective(t,e)},didSetState:function(t,e){this.owner.onSetGeoPerspective(t,e),this.owner.didSetGeoPerspective(t,e)}})],e.prototype,"geoPerspective",void 0),e}(Vu),eh=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"layerFasteners",{value:[],enumerable:!0}),e}return w(e,t),e.prototype.initMapTrait=function(t){},e.prototype.attachMapTrait=function(t){null!==this.map.view&&this.setGeoPerspective(t.geoPerspective.state,t);for(var e=t.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertLayerTrait(n)}},e.prototype.detachMapTrait=function(t){for(var e=t.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeLayerTrait(n)}},e.prototype.willSetMapTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetMapTrait&&r.componentWillSetMapTrait(t,e,this)}},e.prototype.onSetMapTrait=function(t,e){null!==e&&this.detachMapTrait(e),null!==t&&(this.attachMapTrait(t),this.initMapTrait(t))},e.prototype.didSetMapTrait=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetMapTrait&&r.componentDidSetMapTrait(t,e,this)}},e.prototype.initMapView=function(t){},e.prototype.attachMapView=function(t){this.canvas.setView(t.canvas.view),this.container.setView(t.container.view);var e=this.map.trait;null!==e&&this.setGeoPerspective(e.geoPerspective.state,e);for(var i=this.layerFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].component;if(null!==r){var s=r.geo.view;null!==s&&null===s.parentView&&r.geo.injectView(t)}}},e.prototype.detachMapView=function(t){this.canvas.setView(null),this.container.setView(null)},e.prototype.willSetMapView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetMapView&&r.componentWillSetMapView(t,e,this)}},e.prototype.onSetMapView=function(t,e){null!==e&&this.detachMapView(e),null!==t&&(this.attachMapView(t),this.initMapView(t))},e.prototype.didSetMapView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetMapView&&r.componentDidSetMapView(t,e,this)}},e.prototype.themeMapView=function(t,e,i,o){},e.prototype.setGeoPerspective=function(t,e){if(null!==t){var i=this.map.view;null!==i&&i.moveTo(t)}},e.prototype.willSetGeoViewport=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetGeoViewport&&s.componentWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e,i){},e.prototype.didSetGeoViewport=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetGeoViewport&&s.componentDidSetGeoViewport(t,e,this)}},e.prototype.initCanvasView=function(t){},e.prototype.attachCanvasView=function(t){},e.prototype.detachCanvasView=function(t){},e.prototype.willSetCanvasView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetCanvasView&&r.componentWillSetCanvasView(t,e,this)}},e.prototype.onSetCanvasView=function(t,e){null!==e&&this.detachCanvasView(e),null!==t&&(this.attachCanvasView(t),this.initCanvasView(t))},e.prototype.didSetCanvasView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetCanvasView&&r.componentDidSetCanvasView(t,e,this)}},e.prototype.initContainerView=function(t){var e=this.createMapView(t);e.container.setView(t),this.map.setView(e)},e.prototype.attachContainerView=function(t){},e.prototype.detachContainerView=function(t){},e.prototype.willSetContainerView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentWillSetContainerView&&r.componentWillSetContainerView(t,e,this)}},e.prototype.onSetContainerView=function(t,e){null!==e&&this.detachContainerView(e),null!==t&&(this.attachContainerView(t),this.initContainerView(t))},e.prototype.didSetContainerView=function(t,e){for(var i=this.componentObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.componentDidSetContainerView&&r.componentDidSetContainerView(t,e,this)}},e.prototype.insertLayer=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.component===t)return;s.component===e&&(o=n)}var a=this.createLayerFastener(t);i.splice(o,0,a),a.setComponent(t,e),this.isMounted()&&a.mount()},e.prototype.removeLayer=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.component===t){n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createLayer=function(t){return Fu.fromTrait(t)},e.prototype.initLayer=function(t,e){var i=t.geo.trait;null!==i&&this.initLayerTrait(i,e);var o=t.geo.view;null!==o&&this.initLayerView(o,e)},e.prototype.attachLayer=function(t,e){var i=t.geo.trait;null!==i&&this.attachLayerTrait(i,e);var o=t.geo.view;null!==o&&this.attachLayerView(o,e)},e.prototype.detachLayer=function(t,e){var i=t.geo.view;null!==i&&this.detachLayerView(i,e);var o=t.geo.trait;null!==o&&this.detachLayerTrait(o,e)},e.prototype.willSetLayer=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetLayer&&s.componentWillSetLayer(t,e,i)}},e.prototype.onSetLayer=function(t,e,i){null!==e&&this.detachLayer(e,i),null!==t&&(this.attachLayer(t,i),this.initLayer(t,i))},e.prototype.didSetLayer=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetLayer&&s.componentDidSetLayer(t,e,i)}},e.prototype.insertLayerTrait=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].component;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var a=this.createLayer(t);if(null!==a&&(a.geo.setTrait(t),this.insertChildComponent(a,o),null===a.geo.view)){var l=this.createLayerView(a),u=null;null!==o&&(u=o.geo.view);var h=this.map.view;null!==h?a.geo.injectView(h,l,u,null):a.geo.setView(l,u)}},e.prototype.removeLayerTrait=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n.setComponent(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initLayerTrait=function(t,e){},e.prototype.attachLayerTrait=function(t,e){},e.prototype.detachLayerTrait=function(t,e){},e.prototype.willSetLayerTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetLayerTrait&&s.componentWillSetLayerTrait(t,e,i)}},e.prototype.onSetLayerTrait=function(t,e,i){null!==e&&this.detachLayerTrait(e,i),null!==t&&(this.attachLayerTrait(t,i),this.initLayerTrait(t,i))},e.prototype.didSetLayerTrait=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetLayerTrait&&s.componentDidSetLayerTrait(t,e,i)}},e.prototype.createLayerView=function(t){return t.geo.createView()},e.prototype.initLayerView=function(t,e){},e.prototype.attachLayerView=function(t,e){},e.prototype.detachLayerView=function(t,e){t.remove()},e.prototype.willSetLayerView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetLayerView&&s.componentWillSetLayerView(t,e,i)}},e.prototype.onSetLayerView=function(t,e,i){null!==e&&this.detachLayerView(e,i),null!==t&&(this.attachLayerView(t,i),this.initLayerView(t,i))},e.prototype.didSetLayerView=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetLayerView&&s.componentDidSetLayerView(t,e,i)}},e.prototype.willSetLayerGeoBounds=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentWillSetLayerGeoBounds&&s.componentWillSetLayerGeoBounds(t,e,i)}},e.prototype.onSetLayerGeoBounds=function(t,e,i){},e.prototype.didSetLayerGeoBounds=function(t,e,i){for(var o=this.componentObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.componentDidSetLayerGeoBounds&&s.componentDidSetLayerGeoBounds(t,e,i)}},e.prototype.createLayerFastener=function(t){return new e.LayerFastener(this,t.key,"layer")},e.prototype.getLayerFastener=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.component;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectLayerComponent=function(t){return t instanceof Fu?t:null},e.prototype.onInsertChildComponent=function(e,i){t.prototype.onInsertChildComponent.call(this,e,i);var o=this.detectLayerComponent(e);null!==o&&this.insertLayer(o,i)},e.prototype.onRemoveChildComponent=function(e){t.prototype.onRemoveChildComponent.call(this,e);var i=this.detectLayerComponent(e);null!==i&&this.removeLayer(i)},e.prototype.mountComponentFasteners=function(){t.prototype.mountComponentFasteners.call(this),this.mountLayerFasteners()},e.prototype.unmountComponentFasteners=function(){this.unmountLayerFasteners(),t.prototype.unmountComponentFasteners.call(this)},e.MapFastener=fs.define({observeView:!0,willSetView:function(t,e){this.owner.willSetMapView(t,e)},onSetView:function(t,e){this.owner.onSetMapView(t,e)},didSetView:function(t,e){this.owner.didSetMapView(t,e)},viewDidApplyTheme:function(t,e,i,o){this.owner.themeMapView(t,e,i,o)},viewWillSetGeoViewport:function(t,e,i){this.owner.willSetGeoViewport(t,e,i)},viewDidSetGeoViewport:function(t,e,i){this.owner.onSetGeoViewport(t,e,i),this.owner.didSetGeoViewport(t,e,i)},viewDidSetMapCanvas:function(t,e,i){this.owner.canvas.setView(t)},viewDidSetMapContainer:function(t,e,i){this.owner.container.setView(t)},traitType:th,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetMapTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetMapTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetMapTrait(t,e)},traitDidSetGeoPerspective:function(t,e,i){this.owner.setGeoPerspective(t,i)},traitWillSetLayer:function(t,e,i){null!==e&&this.owner.removeLayerTrait(e)},traitDidSetLayer:function(t,e,i){null!==t&&this.owner.insertLayerTrait(t,i)}}),e.CanvasFastener=cs.define({type:fr,willSetView:function(t,e){this.owner.willSetCanvasView(t,e)},onSetView:function(t,e){this.owner.onSetCanvasView(t,e)},didSetView:function(t,e){this.owner.didSetCanvasView(t,e)}}),e.ContainerFastener=cs.define({type:Zn,willSetView:function(t,e){this.owner.willSetContainerView(t,e)},onSetView:function(t,e){this.owner.onSetContainerView(t,e)},didSetView:function(t,e){this.owner.didSetContainerView(t,e)}}),e.LayerFastener=gs.define({type:Fu,child:!1,observe:!0,willSetComponent:function(t,e){this.owner.willSetLayer(t,e,this)},onSetComponent:function(t,e){this.owner.onSetLayer(t,e,this)},didSetComponent:function(t,e){this.owner.didSetLayer(t,e,this)},componentWillSetGeoTrait:function(t,e){this.owner.willSetLayerTrait(t,e,this)},componentDidSetGeoTrait:function(t,e){this.owner.onSetLayerTrait(t,e,this),this.owner.didSetLayerTrait(t,e,this)},componentWillSetGeoView:function(t,e){this.owner.willSetLayerView(t,e,this)},componentDidSetGeoView:function(t,e){this.owner.onSetLayerView(t,e,this),this.owner.didSetLayerView(t,e,this)},componentWillSetGeoBounds:function(t,e){this.owner.willSetLayerGeoBounds(t,e,this)},componentDidSetGeoBounds:function(t,e){this.owner.onSetLayerGeoBounds(t,e,this),this.owner.didSetLayerGeoBounds(t,e,this)}}),m([fs({extends:e.MapFastener})],e.prototype,"map",void 0),m([cs({extends:e.CanvasFastener})],e.prototype,"canvas",void 0),m([cs({extends:e.ContainerFastener})],e.prototype,"container",void 0),m([ns({type:a.Timing,state:!0})],e.prototype,"geoTiming",void 0),e}(bs),ih=function(){function t(){}return Object.defineProperty(t.prototype,"geoFrame",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoCenter",{get:function(){return p.GeoPoint.origin()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heading",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilt",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.canEqual=function(e){return e instanceof t&&this.constructor===e.constructor},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this.viewFrame.equals(e.viewFrame))},t}(),oh=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"viewFrame",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.withViewFrame=function(t){var i=t.xMin,o=t.yMin,n=t.xMax,s=t.yMax,a=n-i,l=s-o,u=a/l;if(u<2){var h=(l-a/2)/2;o+=h,s-=h,t=new r.R2Box(i,o,n,s)}else if(u>2){var p=(a-2*l)/2;i+=p,n-=p,t=new r.R2Box(i,o,n,s)}return new e(t)},e.prototype.project=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.lat,t=t.lng));var i=this.viewFrame,o=i.xMin+(180+t)/360*i.width,n=i.yMax-(90+e)/180*i.height;return new r.R2Point(o,n)},e.prototype.unproject=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x));var i=this.viewFrame,o=360*(t-i.xMin)/i.width-180,n=180*(i.yMax-e)/i.height-90;return new p.GeoPoint(o,n)},e}(ih),nh=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoViewport",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e){},e.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},e.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=t.withViewFrame(this.viewFrame);return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},e.prototype.willProcess=function(e,i){0!=(e&Xi.NeedsProject)&&(this.updateGeoViewport(),i.geoViewport=this.geoViewport),t.prototype.willProcess.call(this,e,i)},e.prototype.moveTo=function(t,e){},e.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},e.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},e.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e),this.canvas.injectView(e)},e.prototype.detachContainer=function(e){var i=this.canvas.view;null!==i&&i.parentView===e&&e.removeChildView(e),t.prototype.detachContainer.call(this,e)},e.create=function(t){return void 0===t&&(t=new oh(r.R2Box.undefined())),new e(t)},e}(Ju),rh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e}($u),sh=function(){function t(t,e,i,o,n,r){Object.defineProperty(this,"map",{value:t,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:e,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:i,enumerable:!0}),Object.defineProperty(this,"zoom",{value:o,enumerable:!0}),Object.defineProperty(this,"heading",{value:n,enumerable:!0}),Object.defineProperty(this,"tilt",{value:r,enumerable:!0})}return t.prototype.project=function(t,e){var i;i="number"==typeof t?new mapboxgl.LngLat(t,e):t;var o=this.map.project(i);return new r.R2Point(o.x,o.y)},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?new mapboxgl.Point(t,e):Array.isArray(t)?t:new mapboxgl.Point(t.x,t.y);var o=this.map.unproject(i);return new p.GeoPoint(o.lng,o.lat)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e){var i=e.getBounds(),o=new p.GeoBox(i.getWest(),i.getSouth(),i.getEast(),i.getNorth()),n=e.getCenter(),r=new p.GeoPoint(n.lng,n.lat),s=e.getZoom(),a=e.getBearing(),l=e.getPitch();return new t(e,o,r,s,a,l)},t}(),ah=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"map",{value:e,enumerable:!0}),Object.defineProperty(i,"geoViewport",{value:sh.create(e),enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.onMoveStart=i.onMoveStart.bind(i),i.onMoveEnd=i.onMoveEnd.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.on("render",this.onMapRender),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd)},i.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=sh.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(Xi.NeedsProject,t)}},i.prototype.onMoveStart=function(){this.willMoveMap()},i.prototype.onMoveEnd=function(){this.didMoveMap()},i.prototype.moveTo=function(t,i){var o={},n=this.geoViewport,r=t.geoCenter;null!=r&&(r=p.GeoPoint.fromAny(r),n.geoCenter.equivalentTo(r,1e-5)||(o.center=r));var s=t.zoom;void 0===s||e.Equivalent(n.zoom,s,1e-5)||(o.zoom=s);var l=t.heading;void 0===l||e.Equivalent(n.heading,l,1e-5)||(o.bearing=l);var u=t.tilt;void 0===u||e.Equivalent(n.tilt,u,1e-5)||(o.pitch=u),(i=void 0===i||!0===i?this.getLookOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i))instanceof a.Timing&&(o.duration=i.duration),this.map.flyTo(o)},i.prototype.willMoveMap=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillMoveMap&&t.viewWillMoveMap(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillMoveMap&&n.viewWillMoveMap(this)}},i.prototype.didMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMoveMap&&o.viewDidMoveMap(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidMoveMap&&n.viewDidMoveMap(this)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.getCanvasContainer()))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e),Zn.fromNode(this.map.getContainer()),Zn.fromNode(this.map.getCanvasContainer())},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=Zn.fromNode(this.map.getCanvasContainer());this.canvas.injectView(i)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=Zn.fromNode(this.map.getCanvasContainer());null!==i&&i.parentView===o&&o.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(Ju),lh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e.prototype.viewWillMoveMap=function(t){},e.prototype.viewDidMoveMap=function(t){},e}($u),uh=function(){function t(t,e,i,o,n,r,s){Object.defineProperty(this,"map",{value:t,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:e,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:i,enumerable:!0}),Object.defineProperty(this,"viewOrigin",{value:o,enumerable:!0}),Object.defineProperty(this,"zoom",{value:n,enumerable:!0}),Object.defineProperty(this,"heading",{value:r,enumerable:!0}),Object.defineProperty(this,"tilt",{value:s,enumerable:!0})}return t.prototype.project=function(t,e){var i,o=this.viewOrigin;i="number"==typeof t?new L.LatLng(e,t):Array.isArray(t)?new L.LatLng(t[1],t[0]):t;var n=this.map.project(i,this.zoom);return new r.R2Point(n.x-o.x,n.y-o.y)},t.prototype.unproject=function(t,e){var i,o=this.viewOrigin;i="number"==typeof t?new L.Point(t+o.x,e+o.y):Array.isArray(t)?new L.Point(t[0]+o.x,t[1]+o.y):new L.Point(t.x+o.x,t.y+o.y);var n=this.map.unproject(i,this.zoom);return new p.GeoPoint(n.lng,n.lat)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.viewOrigin.equals(e.viewOrigin)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e){var i=e.getBounds(),o=new p.GeoBox(i.getWest(),i.getSouth(),i.getEast(),i.getNorth()),n=e.getCenter(),s=new p.GeoPoint(n.lng,n.lat),a=e.getPixelOrigin(),l=a.x,u=a.y;try{var h=r.Transform.parse(e.getPane("mapPane").style.transform);h instanceof r.TranslateTransform&&(l-=h.x.pxValue(),u-=h.y.pxValue())}catch(t){}var d=new r.R2Point(l,u),c=e.getZoom();return new t(e,o,s,d,c,0,0)},t}(),hh=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"map",{value:e,enumerable:!0}),Object.defineProperty(i,"geoViewport",{value:uh.create(e),enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.onMoveStart=i.onMoveStart.bind(i),i.onMoveEnd=i.onMoveEnd.bind(i),i.initMap(e),i}return w(e,t),e.prototype.initMap=function(t){t.on("move",this.onMapRender),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd)},e.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e){},e.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},e.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=uh.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},e.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(Xi.NeedsProject,t)}},e.prototype.onMoveStart=function(){this.willMoveMap()},e.prototype.onMoveEnd=function(){this.didMoveMap()},e.prototype.moveTo=function(t,e){var i={},o=this.geoViewport,n=t.geoCenter;n=null!=n?p.GeoPoint.fromAny(n):o.geoCenter;var r=t.zoom;(e=void 0===e||!0===e?this.getLookOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(e))instanceof a.Timing&&(i.animate=!0,i.duration=e.duration),this.map.flyTo(n,r,i)},e.prototype.willMoveMap=function(){var t=this.viewController;null!==t&&void 0!==t.viewWillMoveMap&&t.viewWillMoveMap(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillMoveMap&&n.viewWillMoveMap(this)}},e.prototype.didMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMoveMap&&o.viewDidMoveMap(this)}var n=this.viewController;null!==n&&void 0!==n.viewDidMoveMap&&n.viewDidMoveMap(this)},e.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},e.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},e.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e),Zn.fromNode(e.node.querySelector(".leaflet-control-container"))},e.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=Zn.fromNode(e.node.querySelector(".leaflet-control-container")),o=this.canvas.injectView(e,void 0,i);null!==o&&o.zIndex.setState(500,Xi.Intrinsic)},e.prototype.detachContainer=function(e){var i=this.canvas.view;null!==i&&i.parentView===e&&e.removeChildView(e),t.prototype.detachContainer.call(this,e)},e}(Ju),ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e.prototype.viewWillMoveMap=function(t){},e.prototype.viewDidMoveMap=function(t){},e}($u),dh=function(){function t(t,e,i,o,n,r){Object.defineProperty(this,"projection",{value:t,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:e,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:i,enumerable:!0}),Object.defineProperty(this,"zoom",{value:o,enumerable:!0}),Object.defineProperty(this,"heading",{value:n,enumerable:!0}),Object.defineProperty(this,"tilt",{value:r,enumerable:!0})}return t.prototype.project=function(t,e){var i=this.projection;if(null!==i){var o=void 0;o="number"==typeof t?new google.maps.LatLng(e,t):Array.isArray(t)?new google.maps.LatLng(t[1],t[0]):new google.maps.LatLng(t.lat,t.lng);var n=i.fromLatLngToContainerPixel(o);if(null!==n)return new r.R2Point(n.x,n.y)}return r.R2Point.undefined()},t.prototype.unproject=function(t,e){var i=this.projection;if(null!==i){var o=void 0;o="number"==typeof t?new google.maps.Point(t,e):Array.isArray(t)?new google.maps.Point(t[0],t[1]):new google.maps.Point(t.x,t.y);var n=i.fromContainerPixelToLatLng(o);if(null!==n)return new p.GeoPoint(n.lng(),n.lat())}return p.GeoPoint.undefined()},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.projection===e.projection&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e,i){void 0===i&&(i=null);var o,n=e.getBounds();if(null!=n){var r=n.getSouthWest(),s=n.getNorthEast();o=new p.GeoBox(r.lng(),r.lat(),s.lng(),s.lat())}else o=p.GeoBox.undefined();var a=e.getCenter(),l=void 0!==a?new p.GeoPoint(a.lng(),a.lat()):p.GeoPoint.origin(),u=e.getZoom();void 0===u&&(u=0);var h=e.getHeading();void 0===h&&(h=0);var d=e.getTilt();return void 0===d&&(d=0),new t(i,o,l,u,h,d)},t}(),ch=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"map",{value:e,enumerable:!0}),Object.defineProperty(i,"mapOverlay",{value:i.createMapOverlay(e),enumerable:!0}),Object.defineProperty(i,"geoViewport",{value:dh.create(i.map,i.mapOverlay.getProjection()),enumerable:!0,configurable:!0}),i.onMapDraw=i.onMapDraw.bind(i),i.onMapIdle=i.onMapIdle.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.addListener("idle",this.onMapIdle)},i.prototype.createMapOverlay=function(t){var e=new i.MapOverlay(this);return e.setMap(t),e},Object.defineProperty(i,"MapOverlay",{get:function(){return function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"owner",{value:e,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.onAdd=function(){var t=this.owner.container.view;null!==t&&(this.owner.initContainer(t),this.owner.attachContainer(t))},e.prototype.onRemove=function(){this.owner.canvas.removeView()},e.prototype.draw=function(){this.owner.onMapDraw()},e}(google.maps.OverlayView)},enumerable:!1,configurable:!0}),i.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=dh.create(this.map,this.mapOverlay.getProjection());return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.willProcess=function(e,i){0!=(this.viewFlags&Xi.NeedsProject)&&this.updateGeoViewport()&&(i.geoViewport=this.geoViewport),t.prototype.willProcess.call(this,e,i)},i.prototype.onMapDraw=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(Xi.NeedsProject,t)}},i.prototype.onMapIdle=function(){this.requireUpdate(Xi.NeedsProject)},i.prototype.moveTo=function(t,i){var o=this.geoViewport,n=t.geoCenter;null!=n&&(n=p.GeoPoint.fromAny(n),o.geoCenter.equivalentTo(n,1e-5)||this.map.panTo(n));var r=t.zoom;void 0===r||e.Equivalent(o.zoom,r,1e-5)||this.map.setZoom(r);var s=t.heading;void 0===s||e.Equivalent(o.heading,s,1e-5)||this.map.setHeading(s);var a=t.tilt;void 0===a||e.Equivalent(o.tilt,a,1e-5)||this.map.setTilt(a)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=this.mapOverlay.getPanes();null!=i&&function t(e){var i=e.parentNode;i instanceof HTMLElement&&void 0===i.view&&t(i);return Zn.fromNode(e)}(i.overlayMouseTarget)},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=this.mapOverlay.getPanes();if(null!=i){var o=i.overlayMouseTarget.view.parentView.parentView;this.canvas.injectView(o)}else null===this.canvas.view&&this.canvas.setView(this.canvas.createView())},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=this.mapOverlay.getPanes();if(null!=o){var n=o.overlayMouseTarget.view.parentView.parentView;null!==i&&i.parentView===n&&n.removeChildView(e)}t.prototype.detachContainer.call(this,e)},m([e.Lazy],i,"MapOverlay",null),i}(Ju),vh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e}($u),fh=function(){function t(t,e,i,o,n,r){Object.defineProperty(this,"map",{value:t,enumerable:!0}),Object.defineProperty(this,"geoFrame",{value:e,enumerable:!0}),Object.defineProperty(this,"geoCenter",{value:i,enumerable:!0}),Object.defineProperty(this,"zoom",{value:o,enumerable:!0}),Object.defineProperty(this,"heading",{value:n,enumerable:!0}),Object.defineProperty(this,"tilt",{value:r,enumerable:!0})}return t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.init=function(){void 0===t.webMercatorUtils&&window.require(["esri/geometry/support/webMercatorUtils"],(function(e){t.webMercatorUtils=e}))},t.webMercatorUtils=void 0,t}(),yh=function(t){function e(){var e=t.call(this)||this;return fh.init(),e}return w(e,t),e}(Ju),gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e}($u),wh=function(t){function e(e,i,o,n,r,s){return t.call(this,e,i,o,n,r,s)||this}return w(e,t),e.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.R2Point(o.x,o.y):r.R2Point.origin()},e.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},e.create=function(t){var i,o=t.extent;null!==o?(o=fh.webMercatorUtils.webMercatorToGeographic(o),i=new p.GeoBox(o.xmin,o.ymin,o.xmax,o.ymax)):i=p.GeoBox.undefined();var n=t.center;return new e(t,i,new p.GeoPoint(n.longitude,n.latitude),t.zoom,t.rotation,0)},e}(fh),mh=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"map",{value:e,enumerable:!0}),Object.defineProperty(i,"geoViewport",{value:wh.create(e),enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=wh.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(Xi.NeedsProject,t)}},i.prototype.moveTo=function(t,i){var o={},n={},r=this.geoViewport,s=t.geoCenter;null!=s&&(s=p.GeoPoint.fromAny(s),r.geoCenter.equivalentTo(s,1e-5)||(o.center=[s.lng,s.lat]));var l=t.zoom;void 0===l||e.Equivalent(r.zoom,l,1e-5)||(o.zoom=l);var u=t.heading;void 0===u||e.Equivalent(r.heading,u,1e-5)||(o.heading=u);var h=t.tilt;void 0===h||e.Equivalent(r.tilt,h,1e-5)||(o.tilt=h),(i=void 0===i||!0===i?this.getLookOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i))instanceof a.Timing&&(n.duration=i.duration),this.map.goTo(o,n)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.container.querySelector(".esri-view-root")))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=Zn.fromNode(this.map.container),o=Zn.fromNode(i.node.querySelector(".esri-view-root"));Zn.fromNode(o.node.querySelector(".esri-overlay-surface"))},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=Zn.fromNode(this.map.container),o=Zn.fromNode(i.node.querySelector(".esri-view-root")),n=Zn.fromNode(o.node.querySelector(".esri-overlay-surface"));this.canvas.injectView(n)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=Zn.fromNode(this.map.container),n=Zn.fromNode(o.node.querySelector(".esri-view-root")),r=Zn.fromNode(n.node.querySelector(".esri-overlay-surface"));null!==i&&i.parentView===r&&r.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(yh),bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e}(gh),Sh=function(t){function e(e,i,o,n,r,s){return t.call(this,e,i,o,n,r,s)||this}return w(e,t),e.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.R2Point(o.x,o.y):r.R2Point.origin()},e.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},e.create=function(t){var i,o=t.extent;null!==o?(o=fh.webMercatorUtils.webMercatorToGeographic(o),i=new p.GeoBox(o.xmin,o.ymin,o.xmax,o.ymax)):i=p.GeoBox.undefined();var n=t.center;return new e(t,i,new p.GeoPoint(n.longitude,n.latitude),t.zoom,t.camera.heading,t.camera.tilt)},e}(fh),Ch=function(t){function i(e){var i=t.call(this)||this;return Object.defineProperty(i,"map",{value:e,enumerable:!0}),Object.defineProperty(i,"geoViewport",{value:Sh.create(e),enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.willSetGeoViewport=function(t,e){var i=this.viewController;null!==i&&void 0!==i.viewWillSetGeoViewport&&i.viewWillSetGeoViewport(t,e,this);for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetGeoViewport&&s.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}var s=this.viewController;null!==s&&void 0!==s.viewDidSetGeoViewport&&s.viewDidSetGeoViewport(t,e,this)},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=Sh.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),Object.defineProperty(this,"geoViewport",{value:e,enumerable:!0,configurable:!0}),this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(Xi.NeedsProject,t)}},i.prototype.moveTo=function(t,i){var o={},n={},r=this.geoViewport,s=t.geoCenter;null!=s&&(s=p.GeoPoint.fromAny(s),r.geoCenter.equivalentTo(s,1e-5)||(o.center=[s.lng,s.lat]));var l=t.zoom;void 0===l||e.Equivalent(r.zoom,l,1e-5)||(o.zoom=l);var u=t.heading;void 0===u||e.Equivalent(r.heading,u,1e-5)||(o.heading=u);var h=t.tilt;void 0===h||e.Equivalent(r.tilt,h,1e-5)||(o.tilt=h),(i=void 0===i||!0===i?this.getLookOr(Qt.timing,he.ambient,!1):a.Timing.fromAny(i))instanceof a.Timing&&(n.duration=i.duration),this.map.goTo(o,n)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.container.querySelector(".esri-view-root")))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=Zn.fromNode(this.map.container),o=Zn.fromNode(i.node.querySelector(".esri-view-root"));Zn.fromNode(o.node.querySelector(".esri-overlay-surface"))},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=Zn.fromNode(this.map.container),o=Zn.fromNode(i.node.querySelector(".esri-view-root")),n=Zn.fromNode(o.node.querySelector(".esri-view-surface"));this.canvas.injectView(n)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=Zn.fromNode(this.map.container),n=Zn.fromNode(o.node.querySelector(".esri-view-root")),r=Zn.fromNode(n.node.querySelector(".esri-view-surface"));null!==i&&i.parentView===r&&r.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(yh),Ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.viewWillSetGeoViewport=function(t,e,i){},e.prototype.viewDidSetGeoViewport=function(t,e,i){},e}(gh);t.AbstractMomentumGesture=qo,t.AbstractPositionGesture=No,t.AbstractScaleGesture=Qo,t.AngleViewAnimator=Oo,t.Animator=bo,t.Arc=Cr,t.ArcView=Pr,t.AreaPlotComponent=Tl,t.AreaPlotTrait=bl,t.AreaPlotView=vl,t.AttributeAnimator=Nn,t.AxisComponent=du,t.AxisTrait=au,t.AxisView=iu,t.BooleanAttributeAnimator=Bn,t.BooleanComponentProperty=as,t.BooleanModelProperty=k,t.BooleanTraitProperty=N,t.BooleanViewAnimator=To,t.BooleanViewProperty=yo,t.BottomAxisComponent=fu,t.BottomAxisTrait=hu,t.BottomAxisView=ru,t.BottomTickView=tu,t.BoxShadow=Ut,t.BoxShadowForm=Ht,t.BoxShadowInterpolator=Bt,t.BoxShadowParser=zt,t.BoxShadowStyleAnimator=fn,t.BrightnessFeel=le,t.BubblePlotComponent=Vl,t.BubblePlotTrait=wl,t.BubblePlotView=dl,t.ButtonGlow=Ss,t.ButtonItem=Vs,t.ButtonMembrane=Cs,t.ButtonStack=Fs,t.ButtonStackController=Ts,t.CanvasRenderer=cr,t.CanvasView=fr,t.CanvasViewController=yr,t.CellComponent=Ws,t.CellTrait=js,t.CellView=Ls,t.ChartComponent=mu,t.ChartTrait=wu,t.ChartView=gu,t.CircleIcon=Rr,t.CircleIconInterpolator=kr,t.ColComponent=Gs,t.ColLayout=ks,t.ColTrait=Ns,t.ColView=Es,t.Color=St,t.ColorAttributeAnimator=qn,t.ColorChannel=Vt,t.ColorChannelParser=Ft,t.ColorForm=Ct,t.ColorLook=te,t.ColorParser=Pt,t.ColorStop=kt,t.ColorStopInterpolator=It,t.ColorStopListParser=jt,t.ColorStopParser=Lt,t.ColorStyleAnimator=cn,t.ColorViewAnimator=Ro,t.Component=zr,t.ComponentContext=Hr,t.ComponentFastener=gs,t.ComponentManager=qr,t.ComponentManagerService=ts,t.ComponentModel=us,t.ComponentProperty=ns,t.ComponentService=Jr,t.ComponentTrait=ps,t.ComponentView=cs,t.ComponentViewTrait=fs,t.CompositeComponent=bs,t.CompoundModel=dt,t.ContinuousScaleAnimator=nl,t.CssContext=Dn,t.CssRule=Mn,t.DataPointComponent=il,t.DataPointTrait=tl,t.DataPointView=$a,t.DataSetComponent=ol,t.DataSetTrait=el,t.DeckBar=Aa,t.DeckButton=Ta,t.DeckButtonBackIcon=Ma,t.DeckButtonCloseIcon=Da,t.DeckButtonLabel=Oa,t.DeckCard=Ra,t.DeckPost=ba,t.DeckRail=Sa,t.DeckSlider=Pa,t.DeckSliderItem=Va,t.DeckSlot=Ca,t.DeckView=ka,t.DeckViewBar=Ia,t.DeckViewCard=ja,t.DeckViewController=Ea,t.DialComponent=Ha,t.DialTrait=Ba,t.DialView=Ua,t.DisclosureButton=Ms,t.DisclosureTreeCell=oa,t.DisplayManager=Qi,t.DisplayService=so,t.DomManager=er,t.DomService=ir,t.DownlinkTrait=lt,t.DrawerButton=ma,t.DrawerView=ga,t.DrawerViewController=wa,t.DrawingRenderer=ar,t.ElementView=Xn,t.ElementViewController=Kn,t.EnclosedIcon=jr,t.EnclosedIconInterpolator=Wr,t.EphemeralStorageManager=Qr,t.EquirectangularMapViewport=oh,t.EsriMapView=mh,t.EsriMapViewController=bh,t.EsriMapViewport=wh,t.EsriSceneView=Ch,t.EsriSceneViewController=Ph,t.EsriSceneViewport=Sh,t.EsriView=yh,t.EsriViewController=gh,t.EsriViewport=fh,t.ExecuteManager=Yr,t.ExecuteService=es,t.Feel=re,t.FeelVector=ne,t.FeelVectorInterpolator=se,t.FillView=wr,t.FilledIcon=Or,t.FloatingButton=Ps,t.Font=gt,t.FontFamily=ft,t.FontFamilyParser=yt,t.FontFamilyStyleAnimator=vn,t.FontForm=mt,t.FontInterpolator=wt,t.FontLook=ee,t.FontParser=bt,t.FontSize=ct,t.FontViewAnimator=ko,t.GaugeComponent=Ya,t.GaugeTrait=qa,t.GaugeView=za,t.GenericComponent=ms,t.GenericModel=pt,t.GenericTrait=at,t.GeoArcView=Wu,t.GeoAreaComponent=Yu,t.GeoAreaTrait=Hu,t.GeoAreaView=Gu,t.GeoCircleView=ju,t.GeoComponent=Fu,t.GeoGridComponent=Iu,t.GeoGridTrait=ku,t.GeoGridView=Ru,t.GeoIconComponent=Qu,t.GeoIconTrait=_u,t.GeoIconView=Zu,t.GeoLayerComponent=xu,t.GeoLayerTrait=Du,t.GeoLayerView=Tu,t.GeoLineComponent=qu,t.GeoLineTrait=Bu,t.GeoLineView=Nu,t.GeoPathComponent=zu,t.GeoPathTrait=Uu,t.GeoPathView=Eu,t.GeoPerspective=bu,t.GeoPlotView=Ku,t.GeoPointView=Xu,t.GeoRasterView=Au,t.GeoRippleView=Lu,t.GeoTrait=Vu,t.GeoTree=Mu,t.GeoTreeView=Ou,t.GeoView=Cu,t.GeoViewController=Pu,t.GeoViewport=Su,t.GestureInput=Wo,t.GoogleMapView=ch,t.GoogleMapViewController=vh,t.GoogleMapViewport=dh,t.GraphComponent=Ol,t.GraphTrait=Ml,t.GraphView=Dl,t.GraphicsIconView=Gr,t.GraphicsRenderer=or,t.GraphicsView=nr,t.GraphicsViewController=rr,t.HexColorParser=Mt,t.HistoryManager=Kr,t.HistoryService=is,t.HistoryState=Xr,t.HslColor=xt,t.HslColorInterpolator=At,t.HslColorParser=Rt,t.HtmlIconView=Br,t.HtmlView=Zn,t.HtmlViewController=_n,t.Icon=Mr,t.IconButton=Ds,t.IconLayout=Dr,t.IconTreeCell=na,t.IconView=Er,t.IconViewAnimator=Nr,t.InputTokenView=As,t.InputTokenViewController=Rs,t.InterpolatedFeel=ae,t.LayerView=sr,t.LayoutManager=Ji,t.LayoutService=ao,t.LeafletView=hh,t.LeafletViewController=ph,t.LeafletViewport=uh,t.LeftAxisComponent=yu,t.LeftAxisTrait=pu,t.LeftAxisView=su,t.LeftTickView=eu,t.LengthAttributeAnimator=zn,t.LengthLook=$t,t.LengthStyleAnimator=pn,t.LengthStyleAnimatorConstraint=dn,t.LengthViewAnimator=xo,t.LengthViewAnimatorConstraint=Ao,t.LengthViewPropertyConstraint=mo,t.LineHeight=vt,t.LinePlotComponent=Fl,t.LinePlotTrait=ml,t.LinePlotView=cl,t.LinearGradient=Wt,t.LinearGradientAngleParser=Nt,t.LinearGradientInterpolator=Et,t.LinearGradientParser=Gt,t.ListItem=pa,t.ListItemController=da,t.ListView=ha,t.ListViewController=ca,t.Look=Qt,t.LookVector=_t,t.MapComponent=eh,t.MapDownlinkTrait=ht,t.MapTrait=th,t.MapView=Ju,t.MapViewController=$u,t.MapboxView=ah,t.MapboxViewController=lh,t.MapboxViewport=sh,t.MediaRule=Rn,t.Modal=to,t.ModalManager=eo,t.ModalService=uo,t.Model=v,t.ModelContext=d,t.ModelDownlink=_,t.ModelDownlinkContext=c,t.ModelEventDownlink=J,t.ModelFastener=U,t.ModelListDownlink=tt,t.ModelManager=y,t.ModelManagerService=F,t.ModelMapDownlink=it,t.ModelProperty=x,t.ModelService=P,t.ModelTrait=H,t.ModelValueDownlink=rt,t.MomentumGesture=Zo,t.MomentumGestureInput=zo,t.Mood=he,t.MoodMatrix=de,t.MoodVector=pe,t.MouseMomentumGesture=Ko,t.MousePositionGesture=Bo,t.MouseScaleGesture=tn,t.NodeView=Ln,t.NodeViewController=jn,t.NumberAttributeAnimator=Hn,t.NumberComponentProperty=ls,t.NumberLook=Jt,t.NumberModelProperty=I,t.NumberStyleAnimator=un,t.NumberStyleAnimatorConstraint=hn,t.NumberTickGenerator=Zl,t.NumberTraitProperty=G,t.NumberViewAnimator=Do,t.NumberViewAnimatorConstraint=Mo,t.NumberViewProperty=go,t.NumberViewPropertyConstraint=wo,t.OpacityFeel=ue,t.PaintingRenderer=hr,t.PathContext=lr,t.PathRenderer=ur,t.PieComponent=Ja,t.PieTrait=Qa,t.PieView=_a,t.PlotComponent=Sl,t.PlotTrait=fl,t.PlotView=ul,t.PointerMomentumGesture=Yo,t.PointerPositionGesture=Go,t.PointerScaleGesture=Jo,t.PolygonIcon=Ir,t.PolygonIconInterpolator=Lr,t.PopoverView=fa,t.PopoverViewController=ya,t.PositionGesture=Ho,t.PositionGestureInput=Eo,t.RasterView=gr,t.Rect=br,t.RectView=Sr,t.RefreshManager=S,t.RefreshService=T,t.RgbColor=Tt,t.RgbColorInterpolator=Dt,t.RgbColorParser=Ot,t.RightAxisComponent=vu,t.RightAxisTrait=uu,t.RightAxisView=nu,t.RightTickView=$l,t.RowComponent=Hs,t.RowTrait=Bs,t.RowView=Us,t.ScaleGesture=en,t.ScaleGestureInput=_o,t.ScaledView=ll,t.ScaledXView=rl,t.ScaledXYView=al,t.ScaledYView=sl,t.ScatterPlotComponent=Cl,t.ScatterPlotTrait=yl,t.ScatterPlotView=hl,t.ScrimView=va,t.SeriesPlotComponent=Pl,t.SeriesPlotTrait=gl,t.SeriesPlotView=pl,t.ShadowLook=ie,t.SliceComponent=Za,t.SliceTrait=Ka,t.SliceView=Xa,t.StorageManager=Zr,t.StorageService=os,t.StringAttributeAnimator=Un,t.StringComponentProperty=ss,t.StringModelProperty=R,t.StringStyleAnimator=ln,t.StringTraitProperty=E,t.StringViewAnimator=Fo,t.StringViewProperty=fo,t.StrokeView=mr,t.StyleAnimator=nn,t.StyleAnimatorConstraint=sn,t.StyleContext=on,t.StyleMap=gn,t.StyleRule=xn,t.StyleSheet=In,t.StyleValue=qt,t.StyleValueForm=Yt,t.StyleValueParser=Xt,t.StyleView=Qn,t.StyleViewController=Jn,t.SvgContext=pr,t.SvgIconView=Ur,t.SvgRenderer=dr,t.SvgView=$n,t.SvgViewController=tr,t.TableComponent=Ys,t.TableLayout=Is,t.TableTrait=qs,t.TableView=zs,t.TextRun=Fr,t.TextRunView=Tr,t.TextView=Wn,t.TextViewController=En,t.Theme=ce,t.ThemeManager=$i,t.ThemeMatrix=ve,t.ThemeService=lo,t.TickGenerator=Kl,t.TickView=Ql,t.TimeTickGenerator=_l,t.TimingLook=oe,t.TitleDeckBar=Na,t.TitleDeckViewController=Ga,t.TitleTreeCell=Qs,t.ToAttributeString=Kt,t.ToStyleString=Zt,t.TokenView=Os,t.TokenViewController=xs,t.TopAxisComponent=cu,t.TopAxisTrait=lu,t.TopAxisView=ou,t.TopTickView=Jl,t.TouchMomentumGesture=Xo,t.TouchPositionGesture=Uo,t.TouchScaleGesture=$o,t.Trait=f,t.TraitFastener=K,t.TraitModel=q,t.TraitProperty=j,t.TraitService=D,t.TransformAttributeAnimator=Yn,t.TransformStyleAnimator=yn,t.TransformViewAnimator=Io,t.TreeCell=Zs,t.TreeCellController=_s,t.TreeLeaf=Js,t.TreeLeafController=ra,t.TreeLimb=ia,t.TreeLimbController=sa,t.TreeRoot=Xs,t.TreeSeed=Ks,t.TreeStem=ta,t.TreeStemController=la,t.TreeVein=$s,t.TreeVeinController=aa,t.TreeView=ea,t.TreeViewController=ua,t.TypesetView=Vr,t.ValueDownlinkTrait=ut,t.VectorIcon=xr,t.VectorIconInterpolator=Ar,t.View=Xi,t.ViewAnimator=So,t.ViewAnimatorConstraint=Po,t.ViewContext=Yi,t.ViewController=Ki,t.ViewFastener=Lo,t.ViewManager=Zi,t.ViewManagerService=no,t.ViewProperty=ho,t.ViewPropertyConstraint=co,t.ViewService=io,t.Viewport=qi,t.ViewportManager=_i,t.ViewportService=ro,t.WarpManager=C,t.WarpService=O,t.WebGLRenderer=vr,t.WebStorageManager=_r,t.WorldMapView=nh,t.WorldMapViewController=rh,t.WorldMapViewport=ih,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-toolkit.min.js.map