// swim-toolkit-4.0.0-dev.20210927.1; copyright 2015-2021 Swim Inc.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@swim/util"),require("@swim/client"),require("@swim/structure"),require("@swim/uri"),require("@swim/math"),require("@swim/codec"),require("@swim/mapping"),require("@swim/time"),require("@swim/constraint"),require("@swim/collections"),require("@swim/geo")):"function"==typeof define&&define.amd?define(["exports","@swim/util","@swim/client","@swim/structure","@swim/uri","@swim/math","@swim/codec","@swim/mapping","@swim/time","@swim/constraint","@swim/collections","@swim/geo"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).swim=t.swim||{},t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim)}(this,(function(t,e,i,o,n,r,s,l,a,h,u,p){"use strict";var d={default:function(){return{updateTime:performance.now()}}},c={initModelDownlinks:function(t){var e=Object.getPrototypeOf(t);do{if(Object.prototype.hasOwnProperty.call(e,"modelDownlinkConstructors")){var i=e.modelDownlinkConstructors;for(var o in i){var n=i[o];if(void 0!==n.prototype.consume&&!t.hasModelDownlink(o)){var r=new n(t,o);t.setModelDownlink(o,r)}}}e=Object.getPrototypeOf(e)}while(null!==e)},getModelDownlinkConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"modelDownlinkConstructors")){var i=e.modelDownlinkConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateModelDownlink:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelDownlinkConstructors")||(o.modelDownlinkConstructors={}),o.modelDownlinkConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelDownlink(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelDownlink(i.toString(),e)),e},configurable:!0,enumerable:!0})}},f=function(){function t(){this.modelFlags=0,this.modelObservers=e.Arrays.empty,this.traits=[],this.traitMap={}}return t.prototype.initModel=function(t){},t.prototype.setModelFlags=function(t){this.modelFlags=t},t.prototype.addModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelObserver(t),this.modelObservers=o,this.onAddModelObserver(t),this.didAddModelObserver(t))},t.prototype.willAddModelObserver=function(t){},t.prototype.onAddModelObserver=function(t){},t.prototype.didAddModelObserver=function(t){},t.prototype.removeModelObserver=function(t){var i=this.modelObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelObserver(t),this.modelObservers=o,this.onRemoveModelObserver(t),this.didRemoveModelObserver(t))},t.prototype.willRemoveModelObserver=function(t){},t.prototype.onRemoveModelObserver=function(t){},t.prototype.didRemoveModelObserver=function(t){},t.prototype.attachParentModel=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower());for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].attachParentModel(t)},t.prototype.detachParentModel=function(t){try{for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].detachParentModel(t)}finally{if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}}},t.prototype.willSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willSetParentModel(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillSetParentModel&&s.modelWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onSetParentModel(t,e)},t.prototype.didSetParentModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidSetParentModel&&r.modelDidSetParentModel(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didSetParentModel(t,e)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertChildModel(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillInsertChildModel&&s.modelWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertChildModel(t,e)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertChildModel&&r.modelDidInsertChildModel(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertChildModel(t,e)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveChildModel(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillRemoveChildModel&&r.modelWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveChildModel(t)},t.prototype.didRemoveChildModel=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveChildModel&&n.modelDidRemoveChildModel(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didRemoveChildModel(t)},t.prototype.getSuperModel=function(t){var e=this.parentModel;return null===e?null:e instanceof t?e:e.getSuperModel(t)},t.prototype.getBaseModel=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseModel(t);return null!==i?i:e instanceof t?e:null},Object.defineProperty(t.prototype,"traitCount",{get:function(){return this.traits.length},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.traits;return 0!==t.length?t[0]:null},t.prototype.lastTrait=function(){var t=this.traits;return 0!==t.length?t[t.length-1]:null},t.prototype.nextTrait=function(t){var e=this.traits,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},t.prototype.previousTrait=function(t){var e=this.traits,i=e.indexOf(t);return i-1>=0?e[i-1]:null},t.prototype.forEachTrait=function(t,e){for(var i,o=this.traits,n=0,r=o.length;n<r;n+=1){var s=o[n];if(void 0!==(i=t.call(e,s)))break}return i},t.prototype.getTrait=function(t){if("string"==typeof t){if(void 0!==(n=this.traitMap[t]))return n}else for(var e=this.traits,i=0,o=e.length;i<o;i+=1){var n;if((n=e[i])instanceof t)return n}return null},t.prototype.setTrait=function(t,e){null!==e&&e.remove();var i=-1,o=null,n=this.traits,r=this.getTrait(t);return null!==r&&(i=n.indexOf(r),o=n[i+1]||null,this.willRemoveTrait(r),r.setModel(null,this),this.removeTraitMap(r),n.splice(i,1),this.onRemoveTrait(r),this.didRemoveTrait(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertTrait(e,o),i>=0?n.splice(i,0,e):n.push(e),this.insertTraitMap(e),e.setModel(this,null),this.onInsertTrait(e,o),this.didInsertTrait(e,o)),r},t.prototype.insertTraitMap=function(t){var e=t.key;void 0!==e&&(this.traitMap[e]=t)},t.prototype.removeTraitMap=function(t){var e=t.key;void 0!==e&&delete this.traitMap[e]},t.prototype.appendTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e)),this.willInsertTrait(t,null),this.traits.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,null),this.didInsertTrait(t,null)},t.prototype.prependTrait=function(t,e){t.remove(),void 0!==e&&(this.removeTrait(e),t.setKey(e));var i=this.traits,o=0!==i.length?i[0]:null;this.willInsertTrait(t,o),i.unshift(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,o),this.didInsertTrait(t,o)},t.prototype.insertTrait=function(t,e,i){if(null!==e&&e.model!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeTrait(i),t.setKey(i)),this.willInsertTrait(t,e);var o=this.traits,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertTraitMap(t),t.setModel(this,null),this.onInsertTrait(t,e),this.didInsertTrait(t,e)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willInsertTrait(t,e);var r=this.modelObservers;for(o=0,n=r.length;o<n;o+=1){var s=r[o];void 0!==s.modelWillInsertTrait&&s.modelWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags);for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onInsertTrait(t,e)},t.prototype.didInsertTrait=function(t,e){for(var i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modelDidInsertTrait&&r.modelDidInsertTrait(t,e,this)}var s=this.traits;for(o=0,n=s.length;o<n;o+=1)s[o].didInsertTrait(t,e)},t.prototype.removeTrait=function(t){var e;if("string"==typeof t){if(null===(e=this.getTrait(t)))return null}else e=t;if(e.model!==this)throw new Error("not a member trait");this.willRemoveTrait(e),e.setModel(null,this),this.removeTraitMap(e);var i=this.traits,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveTrait(e),this.didRemoveTrait(e),e.setKey(void 0),"string"==typeof t)return e},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willRemoveTrait(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillRemoveTrait&&r.modelWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags);for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onRemoveTrait(t)},t.prototype.didRemoveTrait=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidRemoveTrait&&n.modelDidRemoveTrait(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didRemoveTrait(t)},t.prototype.getSuperTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getTrait(t);return null!==i?i:e.getSuperTrait(t)},t.prototype.getBaseTrait=function(t){var e=this.parentModel;if(null===e)return null;var i=e.getBaseTrait(t);return null!==i?i:e.getTrait(t)},t.prototype.isMounted=function(){return 0!=(this.modelFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentModel||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillMount&&o.modelWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.modelFlags&t.UpdateMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidMount&&o.modelDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillUnmount&&o.modelWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnmount&&o.modelDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.modelFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillPower&&o.modelWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.modelFlags&t.UpdateMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidPower&&o.modelDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillUnpower&&o.modelWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidUnpower&&o.modelDidUnpower(this)}},t.prototype.requireUpdate=function(e,i){void 0===i&&(i=!1);var o=this.modelFlags,n=e&~o&t.UpdateMask;0!==n&&(this.setModelFlags(o|n),this.requestUpdate(this,n,i))},t.prototype.needsUpdate=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsUpdate(t,e);return t},t.prototype.requestUpdate=function(e,i,o){i=this.needsUpdate(i,o);var n=this.modelFlags&~i&t.UpdateMask;if(0!=(i&t.AnalyzeMask)&&(n|=t.NeedsAnalyze),0!=(i&t.RefreshMask)&&(n|=t.NeedsRefresh),0!==n||o){this.setModelFlags(this.modelFlags|n);var r=this.parentModel;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.refreshService.manager;null!=s&&s.requestUpdate(e,i,o)}}},t.prototype.isTraversing=function(){return 0!=(this.modelFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.modelFlags&t.UpdatingMask)},t.prototype.isAnalyzing=function(){return 0!=(this.modelFlags&t.AnalyzingFlag)},t.prototype.needsAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsAnalyze(t,e);return t},t.prototype.willAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willAnalyze(t,e)},t.prototype.onAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onAnalyze(t,e)},t.prototype.didAnalyze=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didAnalyze(t,e)},t.prototype.willMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willMutate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillMutate&&r.modelWillMutate(t,this)}},t.prototype.onMutate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onMutate(t)},t.prototype.didMutate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidMutate&&n.modelDidMutate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didMutate(t)},t.prototype.willAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willAggregate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillAggregate&&r.modelWillAggregate(t,this)}},t.prototype.onAggregate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onAggregate(t)},t.prototype.didAggregate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidAggregate&&n.modelDidAggregate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didAggregate(t)},t.prototype.willCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willCorrelate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillCorrelate&&r.modelWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onCorrelate(t)},t.prototype.didCorrelate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidCorrelate&&n.modelDidCorrelate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didCorrelate(t)},t.prototype.analyzeChildModel=function(t,e,i){t.cascadeAnalyze(e,i)},t.prototype.isRefreshing=function(){return 0!=(this.modelFlags&t.RefreshingFlag)},t.prototype.needsRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)t=i[o].needsRefresh(t,e);return t},t.prototype.willRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].willRefresh(t,e)},t.prototype.onRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].onRefresh(t,e)},t.prototype.didRefresh=function(t,e){for(var i=this.traits,o=0,n=i.length;o<n;o+=1)i[o].didRefresh(t,e)},t.prototype.willValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willValidate(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillValidate&&r.modelWillValidate(t,this)}},t.prototype.onValidate=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onValidate(t)},t.prototype.didValidate=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidValidate&&n.modelDidValidate(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didValidate(t)},t.prototype.willReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].willReconcile(t);var n=this.modelObservers;for(i=0,o=n.length;i<o;i+=1){var r=n[i];void 0!==r.modelWillReconcile&&r.modelWillReconcile(t,this)}},t.prototype.onReconcile=function(t){for(var e=this.traits,i=0,o=e.length;i<o;i+=1)e[i].onReconcile(t)},t.prototype.didReconcile=function(t){for(var e=this.modelObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelDidReconcile&&n.modelDidReconcile(t,this)}var r=this.traits;for(i=0,o=r.length;i<o;i+=1)r[i].didReconcile(t)},t.prototype.refreshChildModel=function(t,e,i){t.cascadeRefresh(e,i)},t.prototype.isConsuming=function(){return 0!=(this.modelFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.startConsuming=function(){0==(this.modelFlags&t.ConsumingFlag)&&(this.willStartConsuming(),this.setModelFlags(this.modelFlags|t.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},t.prototype.willStartConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillStartConsuming&&o.modelWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStartConsuming&&o.modelDidStartConsuming(this)}},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.stopConsuming=function(){0!=(this.modelFlags&t.ConsumingFlag)&&(this.willStopConsuming(),this.setModelFlags(this.modelFlags&~t.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},t.prototype.willStopConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelWillStopConsuming&&o.modelWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.modelObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelDidStopConsuming&&o.modelDidStopConsuming(this)}},t.prototype.willAddModelConsumer=function(t){},t.prototype.onAddModelConsumer=function(t){},t.prototype.didAddModelConsumer=function(t){},t.prototype.willRemoveModelConsumer=function(t){},t.prototype.onRemoveModelConsumer=function(t){},t.prototype.didRemoveModelConsumer=function(t){},t.prototype.getLazyModelService=function(e){var i=this.getModelService(e);if(null===i){var o=t.getModelServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelService(e,i))}return i},t.prototype.getLazyModelProperty=function(e){var i=this.getModelProperty(e);if(null===i){var o=t.getModelPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setModelProperty(e,i))}return i},t.prototype.getLazyModelFastener=function(e){var i=this.getModelFastener(e);if(null===i){var o=t.getModelFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelFastener(e,i)}return i},t.prototype.getLazyModelTrait=function(e){var i=this.getModelTrait(e);if(null===i){var o=t.getModelTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setModelTrait(e,i)}return i},t.prototype.getLazyModelDownlink=function(t){var e=this.getModelDownlink(t);if(null===e){var i=c.getModelDownlinkConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setModelDownlink(t,e))}return e},t.prototype.extendModelContext=function(t){return t},Object.defineProperty(t.prototype,"superModelContext",{get:function(){var t=this.parentModel;return null!==t?t.modelContext:this.refreshService.updatedModelContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelContext",{get:function(){return this.extendModelContext(this.superModelContext)},enumerable:!1,configurable:!0}),t.getModelServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelServiceConstructors")){var i=e.modelServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelServiceConstructors")||(o.modelServiceConstructors={}),o.modelServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelPropertyConstructors")){var i=e.modelPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"modelPropertyConstructors")||(o.modelPropertyConstructors={}),o.modelPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setModelProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelFastenerConstructors")){var i=e.modelFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelFastenerConstructors")||(r.modelFastenerConstructors={}),r.modelFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelFastener(o);return null===e&&(e=new t(this,n,o),this.setModelFastener(o,e)),e},configurable:!0,enumerable:!0})},t.getModelTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelTraitConstructors")){var i=e.modelTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateModelTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"modelTraitConstructors")||(r.modelTraitConstructors={}),r.modelTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getModelTrait(o);return null===e&&(e=new t(this,n,o),this.setModelTrait(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.TraversingFlag=8,t.AnalyzingFlag=16,t.RefreshingFlag=32,t.RemovingFlag=64,t.ImmediateFlag=128,t.UpdatingMask=t.AnalyzingFlag|t.RefreshingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.ConsumingFlag|t.TraversingFlag|t.AnalyzingFlag|t.RefreshingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsAnalyze=256,t.NeedsMutate=512,t.NeedsAggregate=1024,t.NeedsCorrelate=2048,t.AnalyzeMask=t.NeedsAnalyze|t.NeedsMutate|t.NeedsAggregate|t.NeedsCorrelate,t.NeedsRefresh=4096,t.NeedsValidate=8192,t.NeedsReconcile=16384,t.RefreshMask=t.NeedsRefresh|t.NeedsValidate|t.NeedsReconcile,t.UpdateMask=t.AnalyzeMask|t.RefreshMask,t.ModelFlagShift=24,t.ModelFlagMask=(1<<t.ModelFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t.Intrinsic=0,t.Extrinsic=1,t}(),v=function(){function t(){this.traitFlags=0,this.traitObservers=e.Arrays.empty}return t.prototype.setTraitFlags=function(t){this.traitFlags=t},t.prototype.addTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitObserver(t),this.traitObservers=o,this.onAddTraitObserver(t),this.didAddTraitObserver(t))},t.prototype.willAddTraitObserver=function(t){},t.prototype.onAddTraitObserver=function(t){},t.prototype.didAddTraitObserver=function(t){},t.prototype.removeTraitObserver=function(t){var i=this.traitObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitObserver(t),this.traitObservers=o,this.onRemoveTraitObserver(t),this.didRemoveTraitObserver(t))},t.prototype.willRemoveTraitObserver=function(t){},t.prototype.onRemoveTraitObserver=function(t){},t.prototype.didRemoveTraitObserver=function(t){},Object.defineProperty(t.prototype,"modelFlags",{get:function(){var t=this.model;return null!==t?t.modelFlags:0},enumerable:!1,configurable:!0}),t.prototype.setModelFlags=function(t){var e=this.model;if(null===e)throw new Error("no model");e.setModelFlags(t)},t.prototype.willSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetModel&&r.traitWillSetModel(t,e,this)}},t.prototype.onSetModel=function(t,e){if(null!==t)t.isMounted()&&(this.mountTrait(),t.isPowered()&&this.powerTrait());else if(this.isMounted())try{this.isPowered()&&this.unpowerTrait()}finally{this.unmountTrait()}},t.prototype.didSetModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetModel&&r.traitDidSetModel(t,e,this)}},Object.defineProperty(t.prototype,"parentModel",{get:function(){var t=this.model;return null!==t?t.parentModel:null},enumerable:!1,configurable:!0}),t.prototype.attachParentModel=function(t){},t.prototype.detachParentModel=function(t){},t.prototype.willSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetParentModel&&r.traitWillSetParentModel(t,e,this)}},t.prototype.onSetParentModel=function(t,e){},t.prototype.didSetParentModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetParentModel&&r.traitDidSetParentModel(t,e,this)}},Object.defineProperty(t.prototype,"childModelCount",{get:function(){var t=this.model;return null!==t?t.childModelCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childModels",{get:function(){var t=this.model;return null!==t?t.childModels:[]},enumerable:!1,configurable:!0}),t.prototype.firstChildModel=function(){var t=this.model;return null!==t?t.firstChildModel():null},t.prototype.lastChildModel=function(){var t=this.model;return null!==t?t.lastChildModel():null},t.prototype.nextChildModel=function(t){var e=this.model;return null!==e?e.nextChildModel(t):null},t.prototype.previousChildModel=function(t){var e=this.model;return null!==e?e.previousChildModel(t):null},t.prototype.forEachChildModel=function(t,e){var i=this.model;return null!==i?i.forEachChildModel(t,e):void 0},t.prototype.getChildModel=function(t){var e=this.model;return null!==e?e.getChildModel(t):null},t.prototype.setChildModel=function(t,e){var i=this.model;if(null!==i)return i.setChildModel(t,e);throw new Error("no model")},t.prototype.appendChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendChildModel(t,e)},t.prototype.prependChildModel=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependChildModel(t,e)},t.prototype.insertChildModel=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertChildModel(t,e,i)},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertChildModel&&r.traitWillInsertChildModel(t,e,this)}},t.prototype.onInsertChildModel=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildModel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertChildModel&&r.traitDidInsertChildModel(t,e,this)}},t.prototype.removeChildModel=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeChildModel(t):null;null!==e&&e.removeChildModel(t)},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveChildModel&&n.traitWillRemoveChildModel(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildModel=function(t){},t.prototype.didRemoveChildModel=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveChildModel&&n.traitDidRemoveChildModel(t,this)}},t.prototype.getSuperModel=function(t){var e=this.model;return null!==e?e.getSuperModel(t):null},t.prototype.getBaseModel=function(t){var e=this.model;return null!==e?e.getBaseModel(t):null},Object.defineProperty(t.prototype,"traitCount",{get:function(){var t=this.model;return null!==t?t.traitCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"traits",{get:function(){var t=this.model;return null!==t?t.traits:[]},enumerable:!1,configurable:!0}),t.prototype.firstTrait=function(){var t=this.model;return null!==t?t.firstTrait():null},t.prototype.lastTrait=function(){var t=this.model;return null!==t?t.lastTrait():null},t.prototype.nextTrait=function(t){var e=this.model;return null!==e?e.nextTrait(t):null},t.prototype.previousTrait=function(t){var e=this.model;return null!==e?e.previousTrait(t):null},t.prototype.forEachTrait=function(t,e){var i=this.model;return null!==i?i.forEachTrait(t,e):void 0},t.prototype.getTrait=function(t){var e=this.model;return null!==e?e.getTrait(t):null},t.prototype.setTrait=function(t,e){var i=this.model;if(null!==i)return i.setTrait(t,e);throw new Error("no model")},t.prototype.appendTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.appendTrait(t,e)},t.prototype.prependTrait=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.prependTrait(t,e)},t.prototype.insertTrait=function(t,e,i){var o=this.model;if(null===o)throw new Error("no model");o.insertTrait(t,e,i)},Object.defineProperty(t.prototype,"insertTraitFlags",{get:function(){return this.constructor.insertTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillInsertTrait&&r.traitWillInsertTrait(t,e,this)}},t.prototype.onInsertTrait=function(t,e){this.requireUpdate(this.insertTraitFlags)},t.prototype.didInsertTrait=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidInsertTrait&&r.traitDidInsertTrait(t,e,this)}},t.prototype.removeTrait=function(t){var e=this.model;if("string"==typeof t)return null!==e?e.removeTrait(t):null;null!==e&&e.removeTrait(t)},Object.defineProperty(t.prototype,"removeTraitFlags",{get:function(){return this.constructor.removeTraitFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillRemoveTrait&&n.traitWillRemoveTrait(t,this)}},t.prototype.onRemoveTrait=function(t){this.requireUpdate(this.removeTraitFlags)},t.prototype.didRemoveTrait=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidRemoveTrait&&n.traitDidRemoveTrait(t,this)}},t.prototype.getSuperTrait=function(t){var e=this.model;return null!==e?e.getSuperTrait(t):null},t.prototype.getBaseTrait=function(t){var e=this.model;return null!==e?e.getBaseTrait(t):null},t.prototype.isMounted=function(){return 0!=(this.traitFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillMount&&o.traitWillMount(this)}},t.prototype.onMount=function(){this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidMount&&o.traitDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnmount&&o.traitWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnmount&&o.traitDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.traitFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillPower&&o.traitWillPower(this)}},t.prototype.onPower=function(){this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidPower&&o.traitDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnpower&&o.traitWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnpower&&o.traitDidUnpower(this)}},t.prototype.requireUpdate=function(t,e){void 0===e&&(e=!1);var i=this.model;null!==i&&i.requireUpdate(t,e)},t.prototype.needsUpdate=function(t,e){return t},t.prototype.requestUpdate=function(t,e,i){var o=this.model;if(null===o)throw new TypeError("no model");o.requestUpdate(t,e,i)},t.prototype.isTraversing=function(){var t=this.model;return null!==t&&t.isTraversing()},t.prototype.isUpdating=function(){var t=this.model;return null!==t&&t.isUpdating()},t.prototype.isAnalyzing=function(){var t=this.model;return null!==t&&t.isAnalyzing()},t.prototype.needsAnalyze=function(t,e){return t},t.prototype.willAnalyze=function(t,e){},t.prototype.onAnalyze=function(t,e){},t.prototype.didAnalyze=function(t,e){},t.prototype.willMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillMutate&&n.traitWillMutate(t,this)}},t.prototype.onMutate=function(t){},t.prototype.didMutate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidMutate&&n.traitDidMutate(t,this)}},t.prototype.willAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillAggregate&&n.traitWillAggregate(t,this)}},t.prototype.onAggregate=function(t){},t.prototype.didAggregate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidAggregate&&n.traitDidAggregate(t,this)}},t.prototype.willCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillCorrelate&&n.traitWillCorrelate(t,this)}},t.prototype.onCorrelate=function(t){},t.prototype.didCorrelate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidCorrelate&&n.traitDidCorrelate(t,this)}},t.prototype.analyzeChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.isRefreshing=function(){var t=this.model;return null!==t&&t.isRefreshing()},t.prototype.needsRefresh=function(t,e){return t},t.prototype.willRefresh=function(t,e){},t.prototype.onRefresh=function(t,e){},t.prototype.didRefresh=function(t,e){},t.prototype.willValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillValidate&&n.traitWillValidate(t,this)}},t.prototype.onValidate=function(t){},t.prototype.didValidate=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidValidate&&n.traitDidValidate(t,this)}},t.prototype.willReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillReconcile&&n.traitWillReconcile(t,this)}},t.prototype.onReconcile=function(t){},t.prototype.didReconcile=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidReconcile&&n.traitDidReconcile(t,this)}},t.prototype.refreshChildModels=function(t,e,i,o){var n=this.model;o.call(n,t,e,i)},t.prototype.isConsuming=function(){return 0!=(this.traitFlags&t.ConsumingFlag)},Object.defineProperty(t.prototype,"startConsumingFlags",{get:function(){return this.constructor.startConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.startConsuming=function(){0==(this.traitFlags&t.ConsumingFlag)&&(this.willStartConsuming(),this.setTraitFlags(this.traitFlags|t.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},t.prototype.willStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStartConsuming&&o.traitWillStartConsuming(this)}},t.prototype.onStartConsuming=function(){this.requireUpdate(this.startConsumingFlags)},t.prototype.didStartConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStartConsuming&&o.traitDidStartConsuming(this)}},Object.defineProperty(t.prototype,"stopConsumingFlags",{get:function(){return this.constructor.stopConsumingFlags},enumerable:!1,configurable:!0}),t.prototype.stopConsuming=function(){0!=(this.traitFlags&t.ConsumingFlag)&&(this.willStopConsuming(),this.setTraitFlags(this.traitFlags&~t.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},t.prototype.willStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillStopConsuming&&o.traitWillStopConsuming(this)}},t.prototype.onStopConsuming=function(){this.requireUpdate(this.stopConsumingFlags)},t.prototype.didStopConsuming=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidStopConsuming&&o.traitDidStopConsuming(this)}},t.prototype.willAddTraitConsumer=function(t){},t.prototype.onAddTraitConsumer=function(t){},t.prototype.didAddTraitConsumer=function(t){},t.prototype.willRemoveTraitConsumer=function(t){},t.prototype.onRemoveTraitConsumer=function(t){},t.prototype.didRemoveTraitConsumer=function(t){},t.prototype.getLazyTraitService=function(e){var i=this.getTraitService(e);if(null===i){var o=t.getTraitServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitService(e,i))}return i},t.prototype.getLazyTraitProperty=function(e){var i=this.getTraitProperty(e);if(null===i){var o=t.getTraitPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setTraitProperty(e,i))}return i},t.prototype.getLazyTraitModel=function(e){var i=this.getTraitModel(e);if(null===i){var o=t.getTraitModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitModel(e,i)}return i},t.prototype.getLazyTraitFastener=function(e){var i=this.getTraitFastener(e);if(null===i){var o=t.getTraitFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setTraitFastener(e,i)}return i},t.prototype.getLazyModelDownlink=function(t){var e=this.getModelDownlink(t);if(null===e){var i=c.getModelDownlinkConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setModelDownlink(t,e))}return e},Object.defineProperty(t.prototype,"modelContext",{get:function(){var t=this.model;return null!==t?t.modelContext:null},enumerable:!1,configurable:!0}),t.getTraitServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitServiceConstructors")){var i=e.traitServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitServiceConstructors")||(o.traitServiceConstructors={}),o.traitServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getModelPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"modelPropertyConstructors")){var i=e.modelPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.getTraitPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitPropertyConstructors")){var i=e.traitPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"traitPropertyConstructors")||(o.traitPropertyConstructors={}),o.traitPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setTraitProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getTraitModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitModelConstructors")){var i=e.traitModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitModelConstructors")||(r.traitModelConstructors={}),r.traitModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitModel(o);return null===e&&(e=new t(this,n,o),this.setTraitModel(o,e)),e},configurable:!0,enumerable:!0})},t.getTraitFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"traitFastenerConstructors")){var i=e.traitFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateTraitFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"traitFastenerConstructors")||(r.traitFastenerConstructors={}),r.traitFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getTraitFastener(o);return null===e&&(e=new t(this,n,o),this.setTraitFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.ConsumingFlag=4,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.insertTraitFlags=0,t.removeTraitFlags=0,t.startConsumingFlags=0,t.stopConsumingFlags=0,t}(),y=function(){function t(){this.rootModels=e.Arrays.empty,this.modelManagerObservers=e.Arrays.empty}return t.prototype.addModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelManagerObserver(t),this.modelManagerObservers=o,this.onAddModelManagerObserver(t),this.didAddModelManagerObserver(t))},t.prototype.willAddModelManagerObserver=function(t){},t.prototype.onAddModelManagerObserver=function(t){},t.prototype.didAddModelManagerObserver=function(t){},t.prototype.removeModelManagerObserver=function(t){var i=this.modelManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelManagerObserver(t),this.modelManagerObservers=o,this.onRemoveModelManagerObserver(t),this.didRemoveModelManagerObserver(t))},t.prototype.willRemoveModelManagerObserver=function(t){},t.prototype.onRemoveModelManagerObserver=function(t){},t.prototype.didRemoveModelManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.modelManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootModels.length},t.prototype.willAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillAttach&&o.modelManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidAttach&&o.modelManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerWillDetach&&o.modelManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.modelManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.modelManagerDidDetach&&o.modelManagerDidDetach(this)}},t.prototype.insertRootModel=function(t){var i=this.rootModels,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootModel(t),this.rootModels=o,n&&this.onAttach(),this.onInsertRootModel(t),this.didInsertRootModel(t),n&&this.didAttach()}},t.prototype.willInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillInsertRootModel&&n.modelManagerWillInsertRootModel(t,this)}},t.prototype.onInsertRootModel=function(t){},t.prototype.didInsertRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidInsertRootModel&&n.modelManagerDidInsertRootModel(t,this)}},t.prototype.removeRootModel=function(t){var i=this.rootModels,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootModel(t),this.rootModels=o,n&&this.onDetach(),this.onRemoveRootModel(t),this.didRemoveRootModel(t),n&&this.didDetach()}},t.prototype.willRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerWillRemoveRootModel&&n.modelManagerWillRemoveRootModel(t,this)}},t.prototype.onRemoveRootModel=function(t){},t.prototype.didRemoveRootModel=function(t){for(var e=this.modelManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modelManagerDidRemoveRootModel&&n.modelManagerDidRemoveRootModel(t,this)}},t}(),g=function(t,e){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},g(t,e)};function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function m(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function S(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var C=function(t){function i(){var e=t.call(this)||this;return e.modelContext=e.initModelContext(),e.rootFlags=0,e.analyzeTimer=0,e.refreshTimer=0,e.updateDelay=i.MinUpdateDelay,e.runAnalyzePass=e.runAnalyzePass.bind(e),e.runRefreshPass=e.runRefreshPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initModelContext=function(){return{updateTime:0}},i.prototype.updatedModelContext=function(){var t=this.modelContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootModels()},i.prototype.powerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootModel(o)}},i.prototype.powerRootModel=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootModels()},i.prototype.unpowerRootModels=function(){for(var t=this.rootModels,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootModel(o)}},i.prototype.unpowerRootModel=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){this.rootFlags=t},i.prototype.needsUpdate=function(t,e){return t},i.prototype.requestUpdate=function(t,e,o){e=this.needsUpdate(e,o);var n=this.rootFlags&~e&f.UpdateMask;0!=(e&f.AnalyzeMask)&&(n|=f.NeedsAnalyze),0!=(e&f.RefreshMask)&&(n|=f.NeedsRefresh),(0!==n||o)&&(this.setRootFlags(this.rootFlags|n),o&&this.updateDelay<=i.MaxAnalyzeInterval&&0==(this.rootFlags&(f.TraversingFlag|f.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate())},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.analyzeTimer&&0===this.refreshTimer&&0==(t&f.UpdatingMask)&&0!=(t&f.UpdateMask)&&(this.analyzeTimer=setTimeout(this.runAnalyzePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.analyzeTimer&&(clearTimeout(this.analyzeTimer),this.analyzeTimer=0),0!==this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|f.ImmediateFlag);try{0!=(this.rootFlags&f.AnalyzeMask)&&(this.cancelUpdate(),this.runAnalyzePass(!0)),0!=(this.rootFlags&f.RefreshMask)&&this.updateDelay<=i.MaxAnalyzeInterval&&(this.cancelUpdate(),this.runRefreshPass(!0))}finally{this.setRootFlags(this.rootFlags&~f.ImmediateFlag)}},i.prototype.runAnalyzePass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~f.AnalyzeMask|f.TraversingFlag|f.AnalyzingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.modelFlags&f.AnalyzeMask)&&s.cascadeAnalyze(0,n)}var l=performance.now(),a=Math.max(i.MinAnalyzeInterval,this.updateDelay);this.updateDelay=l-o>a?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&f.RefreshMask)?this.refreshTimer=setTimeout(this.runRefreshPass,i.MinRefreshInterval):0!=(this.rootFlags&f.AnalyzeMask)&&(t&&(a=Math.max(i.MaxAnalyzeInterval,a)),this.analyzeTimer=setTimeout(this.runAnalyzePass,a))}finally{this.setRootFlags(this.rootFlags&~(f.TraversingFlag|f.AnalyzingFlag))}},i.prototype.runRefreshPass=function(t){void 0===t&&(t=!1);var e=this.rootModels;this.setRootFlags(this.rootFlags&~f.RefreshMask|f.TraversingFlag|f.RefreshingFlag);try{var o=performance.now(),n=this.modelContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.modelFlags&f.RefreshMask)&&s.cascadeRefresh(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&f.AnalyzeMask)){var l=this.updateDelay;t&&(l=Math.max(i.MaxAnalyzeInterval,l)),this.analyzeTimer=setTimeout(this.runAnalyzePass,l)}else 0!=(this.rootFlags&f.RefreshMask)&&(this.refreshTimer=setTimeout(this.runRefreshPass,i.MaxRefreshInterval))}finally{this.setRootFlags(this.rootFlags&~(f.TraversingFlag|f.RefreshingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootModel=function(e){t.prototype.onInsertRootModel.call(this,e),this.requestUpdate(e,e.modelFlags&f.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinAnalyzeInterval=12,i.MaxAnalyzeInterval=33,i.MinRefreshInterval=4,i.MaxRefreshInterval=16,m([e.Lazy],i,"global",null),i}(y),b=function(t){function i(){var e=t.call(this)||this;return e.selections=[],e}return w(i,t),i.prototype.isSelected=function(t){return this.selections.indexOf(t)>=0},i.prototype.select=function(t,e,i){var o=this.selections;if(o.indexOf(t)<0){void 0===e&&(e=null),null!==e&&e.multi||this.unselectAll(),void 0===i?i=o.length:(i<0&&(i=o.length+1+i),i=Math.min(Math.max(0,i,o.length)));var n=t.getTrait(vt);this.willSelect(t,i,e),null!==n&&n.willSelect(e),o.splice(i,0,t),this.onSelect(t,i,e),null!==n&&(n.onSelect(e),n.didSelect(e)),this.didSelect(t,i,e)}},i.prototype.willSelect=function(t,e,i){this.willObserve((function(o){void 0!==o.selectionManagerWillSelect&&o.selectionManagerWillSelect(t,e,i,this)}))},i.prototype.onSelect=function(t,e,i){},i.prototype.didSelect=function(t,e,i){this.didObserve((function(o){void 0!==o.selectionManagerDidSelect&&o.selectionManagerDidSelect(t,e,i,this)}))},i.prototype.unselect=function(t){var e=this.selections,i=e.indexOf(t);if(i>=0){var o=t.getTrait(vt);this.willUnselect(t),null!==o&&o.willUnselect(),e.splice(i,1),this.onUnselect(t),null!==o&&(o.onUnselect(),o.didUnselect()),this.didUnselect(t)}},i.prototype.willUnselect=function(t){this.willObserve((function(e){void 0!==e.selectionManagerWillUnselect&&e.selectionManagerWillUnselect(t,this)}))},i.prototype.onUnselect=function(t){},i.prototype.didUnselect=function(t){this.didObserve((function(e){void 0!==e.selectionManagerDidUnselect&&e.selectionManagerDidUnselect(t,this)}))},i.prototype.unselectAll=function(){for(var t=this.selections;0!==t.length;)this.unselect(t[0])},i.prototype.toggle=function(t,e,i){var o=this.selections,n=o.indexOf(t);if(n<0){void 0===e&&(e=null),null!==e&&e.multi||this.unselectAll(),void 0===i?i=o.length:(i<0&&(i=o.length+1+i),i=Math.min(Math.max(0,i,o.length)));var r=t.getTrait(vt);this.willSelect(t,i,e),null!==r&&r.willSelect(e),o.splice(i,0,t),this.onSelect(t,i,e),null!==r&&(r.onSelect(e),r.didSelect(e)),this.didSelect(t,i,e)}else{r=t.getTrait(vt);this.willUnselect(t),null!==r&&r.willUnselect(),o.splice(n,1),this.onUnselect(t),null!==r&&(r.onUnselect(),r.didUnselect()),this.didUnselect(t)}},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(y),V=function(t){function o(e){var i=t.call(this)||this;return i.client=e,i}return w(o,t),o.global=function(){return new o(i.client)},m([e.Lazy],o,"global",null),o}(y),T=function(t,e){return this instanceof T?F.call(this,t,e):(i=t,f.decorateModelService.bind(f,T.define(i)));var i};function F(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!0,this.serviceFlags=0,this.superService=null,this.traitServices=e.Arrays.empty,this.manager=void 0,this}w(T,Object),T.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),this.inherit=t,this.bindSuperService())},T.prototype.isInherited=function(){return 0!=(this.serviceFlags&T.InheritedFlag)},T.prototype.setServiceFlags=function(t){this.serviceFlags=t},Object.defineProperty(T.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),T.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentModel;if(null!==o){if(null===(n=(e=o).getModelService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyModelService(t))&&(i=n)}break}this.superService=i}void 0!==this.manager&&null!==this.manager||(null!==i?(this.setServiceFlags(this.serviceFlags|T.InheritedFlag),this.manager=i.manager):(this.setServiceFlags(this.serviceFlags&~T.InheritedFlag),this.manager=this.initManager()));for(var r=this.traitServices,s=0,l=r.length;s<l;s+=1){var a=r[s];a.setServiceFlags(a.serviceFlags&~T.InheritedFlag|this.serviceFlags&T.InheritedFlag),a.manager=this.manager}},T.prototype.unbindSuperService=function(){this.superService=null,this.setServiceFlags(this.serviceFlags&~T.InheritedFlag);for(var t=this.traitServices,e=0,i=t.length;e<i;e+=1){var o=t[e];o.setServiceFlags(o.serviceFlags&~T.InheritedFlag)}},T.prototype.addTraitService=function(t){this.traitServices=e.Arrays.inserted(t,this.traitServices)},T.prototype.removeTraitService=function(t){this.traitServices=e.Arrays.removed(t,this.traitServices)},Object.defineProperty(T.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),T.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},T.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},T.prototype.initManager=function(){return this.manager},T.prototype.isMounted=function(){return 0!=(this.serviceFlags&T.MountedFlag)},T.prototype.mount=function(){0==(this.serviceFlags&T.MountedFlag)&&(this.willMount(),this.setServiceFlags(this.serviceFlags|T.MountedFlag),this.onMount(),this.didMount())},T.prototype.willMount=function(){},T.prototype.onMount=function(){this.bindSuperService()},T.prototype.didMount=function(){},T.prototype.unmount=function(){0!=(this.serviceFlags&T.MountedFlag)&&(this.willUnmount(),this.setServiceFlags(this.serviceFlags&~T.MountedFlag),this.onUnmount(),this.didUnmount())},T.prototype.willUnmount=function(){},T.prototype.onUnmount=function(){this.unbindSuperService()},T.prototype.didUnmount=function(){},T.prototype.toString=function(){return this.name},T.getClass=function(t){return t===C?M:t===b?D:t===V?O:t===y?P:null},T.define=function(t){var e=t.extends,i=t.inherit,o=t.manager;delete t.extends,delete t.inherit,delete t.manager,void 0===e&&(e=T.getClass(t.type)),null===e&&(e=T);var n=function(t,n){var r=function(){return r.manager};return Object.setPrototypeOf(r,this),r=e.call(r,t,n)||r,void 0!==o&&(r.manager=o),void 0!==i&&(r.inherit=i),r},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),n},T.MountedFlag=1,T.InheritedFlag=2;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.didMount=function(){var e=this.manager;null!=e&&(this.isInherited()||e.insertRootModel(this.owner),!1!==this.observe&&e.addModelManagerObserver(this)),t.prototype.didMount.call(this)},e.prototype.willUnmount=function(){t.prototype.willUnmount.call(this);var e=this.manager;null!=e&&(!1!==this.observe&&e.removeModelManagerObserver(this),this.isInherited()||e.removeRootModel(this.owner))},e}(T),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"modelContext",{get:function(){var t=this.manager;return null==t&&(t=C.global()),t.modelContext},enumerable:!1,configurable:!0}),e.prototype.updatedModelContext=function(){var t=this.manager;return null==t&&(t=C.global()),t.updatedModelContext()},e.prototype.requestUpdate=function(t,e,i){var o=this.manager;null==o&&(o=C.global()),o.requestUpdate(t,e,i)},e.prototype.initManager=function(){return C.global()},e}(P);T({extends:M,type:C,observe:!1,manager:C.global()})(f.prototype,"refreshService");var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"selections",{get:function(){var t=this.manager;return null==t&&(t=b.global()),t.selections},enumerable:!1,configurable:!0}),e.prototype.select=function(t,e,i){var o=this.manager;null==o&&(o=b.global()),o.select(t,e,i)},e.prototype.unselect=function(t){var e=this.manager;null==e&&(e=b.global()),e.unselect(t)},e.prototype.unselectAll=function(){var t=this.manager;null==t&&(t=b.global()),t.unselectAll()},e.prototype.initManager=function(){return b.global()},e}(P);T({extends:D,type:b,observe:!1,manager:b.global()})(f.prototype,"selectionService");var x=function(t,e){return this instanceof x?A.call(this,t,e):(i=t,v.decorateTraitService.bind(v,x.define(i)));var i};function A(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.modelService=null,this.inherit=!0,this.serviceFlags=0,this.manager=void 0,this}w(x,Object),x.prototype.createModelService=function(){var t=this.modelServiceConstructor;if(void 0!==t){var e=this.owner.model;if(null!==e){var i=new t(e,this.name);return i.inherit=this.inherit,i.setServiceFlags(this.serviceFlags),i}throw new Error("no model")}throw new Error("no model service constructor")},x.prototype.bindModelService=function(){var t=this.owner.model;if(null!==t){var e=t.getLazyModelService(this.name);null===e&&(e=this.createModelService(),t.setModelService(this.name,e)),this.modelService=e,e.addTraitService(this),this.inherit=e.inherit,this.setServiceFlags(e.serviceFlags),this.manager=e.manager}},x.prototype.unbindModelService=function(){var t=this.modelService;null!==t&&(t.removeTraitService(this),this.modelService=null)},x.prototype.setInherit=function(t){var e=this.modelService;null!==e?e.setInherit(t):this.inherit=t},x.prototype.isInherited=function(){return 0!=(this.serviceFlags&T.InheritedFlag)},x.prototype.setServiceFlags=function(t){this.serviceFlags=t},Object.defineProperty(x.prototype,"superName",{get:function(){var t=this.modelService;return null!==t?t.superName:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"superService",{get:function(){var t=this.modelService;return null!==t?t.superService:null},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"superManager",{get:function(){var t=this.modelService;return null!==t?t.superManager:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),x.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},x.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},x.prototype.attach=function(){this.bindModelService(),this.manager instanceof y&&!0===this.observe&&this.manager.addModelManagerObserver(this)},x.prototype.detach=function(){this.manager instanceof y&&!0===this.observe&&this.manager.removeModelManagerObserver(this),this.unbindModelService()},x.prototype.toString=function(){return this.name},x.define=function(t){var e=t.extends,i=t.type,o=t.inherit,n=t.manager,r=t.initManager,s=t.modelService;delete t.extends,delete t.inherit,delete t.manager,delete t.modelService,void 0===e&&(e=x);var l=function(t,i){var r=function(){return r.manager};return Object.setPrototypeOf(r,this),r=e.call(r,t,i)||r,void 0!==n&&(r.manager=n),void 0!==o&&(r.inherit=o),r},a=t;return Object.setPrototypeOf(l,e),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,e.prototype),void 0===a.modelServiceConstructor&&(void 0===s&&(s={extends:void 0,type:i,inherit:o,manager:n},void 0!==r&&(s.initManager=r)),a.modelServiceConstructor=T.define(s)),l};var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"client",{get:function(){var t=this.manager;return null==t&&(t=V.global()),t.client},enumerable:!1,configurable:!0}),e.prototype.initManager=function(){return V.global()},e}(P);T({extends:O,type:V,observe:!1,manager:V.global()})(f.prototype,"warpService"),x({type:V,observe:!1,manager:V.global(),modelService:{extends:O,type:V,observe:!1,manager:V.global()}})(v.prototype,"warpService");var R=function(t,e){return this instanceof R?I.call(this,t,e):(i=t,f.decorateModelProperty.bind(f,R.define(i)));var i};function I(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!1,this.superProperty=null,this.subProperties=null,this.precedence=f.Intrinsic,this.propertyFlags=R.UpdatedFlag,this.ownState=void 0,this}w(R,Object),R.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),this.inherit=t,this.bindSuperProperty())},R.prototype.isInherited=function(){return 0!=(this.propertyFlags&R.InheritedFlag)},R.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&R.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~R.OverrideFlag|R.InheritedFlag),this.setOwnState(e.state),this.mutate());else if(!t&&0!=(this.propertyFlags&R.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~R.InheritedFlag)}},Object.defineProperty(R.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),R.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentModel;null!==e;){var i=e.getLazyModelProperty(t);if(null!==i){this.superProperty=i,i.addSubProperty(this),0==(this.propertyFlags&R.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|R.InheritedFlag),this.setOwnState(i.state),this.mutate());break}e=e.parentModel}},R.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),this.superProperty=null,this.setPropertyFlags(this.propertyFlags&~R.InheritedFlag))},R.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],this.subProperties=e),e.push(t)},R.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(R.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),R.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},R.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},R.prototype.setState=function(t,e){void 0===e&&(e=f.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~R.InheritedFlag|R.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},R.prototype.setOwnState=function(t){t=this.fromAny(t);var e=this.state;this.equalState(t,e)||(this.willSetState(t,e),this.ownState=t,this.setPropertyFlags(this.propertyFlags|R.UpdatedFlag),this.onSetState(t,e),this.updateSubProperties(t,e),this.didSetState(t,e))},R.prototype.willSetState=function(t,e){},R.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},R.prototype.didSetState=function(t,e){},R.prototype.takesPrecedence=function(t){return t>=this.precedence},R.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),this.precedence=t,this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},R.prototype.willSetPrecedence=function(t,e){},R.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&R.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~R.InheritedFlag)}},R.prototype.didSetPrecedence=function(t,e){},R.prototype.setPropertyFlags=function(t){this.propertyFlags=t},R.prototype.isUpdated=function(){return 0!=(this.propertyFlags&R.UpdatedFlag)},Object.defineProperty(R.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&R.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),R.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&R.UpdatedFlag)?(this.setPropertyFlags(t&~R.UpdatedFlag),this.state):void 0},R.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~R.UpdatedFlag),this.state},R.prototype.mutate=function(){this.owner.requireUpdate(f.NeedsMutate)},R.prototype.onMutate=function(){this.isInherited()&&this.onMutateInherited()},R.prototype.onMutateInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},R.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.mutate()}},R.prototype.equalState=function(t,i){return e.Equals(t,i)},R.prototype.fromAny=function(t){return t},R.prototype.isMounted=function(){return 0!=(this.propertyFlags&R.MountedFlag)},R.prototype.mount=function(){0==(this.propertyFlags&R.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|R.MountedFlag),this.onMount(),this.didMount())},R.prototype.willMount=function(){},R.prototype.onMount=function(){this.bindSuperProperty()},R.prototype.didMount=function(){},R.prototype.unmount=function(){0!=(this.propertyFlags&R.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~R.MountedFlag),this.onUnmount(),this.didUnmount())},R.prototype.willUnmount=function(){},R.prototype.onUnmount=function(){this.unbindSuperProperty()},R.prototype.didUnmount=function(){},R.prototype.toString=function(){return this.name},R.getClass=function(t){return t===String?k:t===Boolean?W:t===Number?E:null},R.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=R.getClass(t.type)),null===i&&(i=R,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e){return 0===arguments.length?a.state:(a.setState(t,e),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==n&&(l=a.fromAny(n)),void 0!==l&&(a.ownState=l),void 0!==r&&(a.precedence=r),void 0!==o&&(a.inherit=o),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l},R.MountedFlag=1,R.UpdatedFlag=2,R.OverrideFlag=4,R.InheritedFlag=8;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}(R),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e.prototype.equalState=function(t,e){return t===e},e}(R),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(R),N=function(t,e){return this instanceof N?U.call(this,t,e):(i=t,v.decorateTraitProperty.bind(v,N.define(i)));var i};function U(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!1,this.superProperty=null,this.subProperties=null,this.precedence=f.Intrinsic,this.propertyFlags=N.UpdatedFlag,this.ownState=void 0,this}w(N,Object),N.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),this.inherit=t,this.bindSuperProperty())},N.prototype.isInherited=function(){return 0!=(this.propertyFlags&N.InheritedFlag)},N.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&N.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~N.OverrideFlag|N.InheritedFlag),this.setOwnState(e.state),this.mutate());else if(!t&&0!=(this.propertyFlags&N.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~N.InheritedFlag)}},Object.defineProperty(N.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),N.prototype.getSuperTrait=function(t){return t.getTrait(this.name)},N.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentModel;null!==e;){var i=this.getSuperTrait(e),o=null!==i?i.getLazyTraitProperty(t):null;if(null!==o){this.superProperty=o,o.addSubProperty(this),0==(this.propertyFlags&N.OverrideFlag)&&o.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|N.InheritedFlag),this.setOwnState(o.state),this.mutate());break}e=e.parentModel}},N.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),this.superProperty=null,this.setPropertyFlags(this.propertyFlags&~N.InheritedFlag))},N.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],this.subProperties=e),e.push(t)},N.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(N.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),N.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},N.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},N.prototype.setState=function(t,e){void 0===e&&(e=f.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~N.InheritedFlag|N.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},N.prototype.setOwnState=function(t){t=this.fromAny(t);var i=this.state;e.Equals(t,i)||(this.willSetState(t,i),this.ownState=t,this.setPropertyFlags(this.propertyFlags|N.UpdatedFlag),this.onSetState(t,i),this.updateSubProperties(t,i),this.didSetState(t,i))},N.prototype.willSetState=function(t,e){},N.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},N.prototype.didSetState=function(t,e){},N.prototype.takesPrecedence=function(t){return t>=this.precedence},N.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),this.precedence=t,this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},N.prototype.willSetPrecedence=function(t,e){},N.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&N.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~N.InheritedFlag)}},N.prototype.didSetPrecedence=function(t,e){},N.prototype.setPropertyFlags=function(t){this.propertyFlags=t},N.prototype.isUpdated=function(){return 0!=(this.propertyFlags&N.UpdatedFlag)},Object.defineProperty(N.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&N.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),N.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&N.UpdatedFlag)?(this.setPropertyFlags(t&~N.UpdatedFlag),this.state):void 0},N.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~N.UpdatedFlag),this.state},N.prototype.mutate=function(){this.owner.requireUpdate(f.NeedsMutate)},N.prototype.onMutate=function(){this.isInherited()&&this.onMutateInherited()},N.prototype.onMutateInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},N.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.mutate()}},N.prototype.fromAny=function(t){return t},N.prototype.isMounted=function(){return 0!=(this.propertyFlags&N.MountedFlag)},N.prototype.mount=function(){0==(this.propertyFlags&N.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|N.MountedFlag),this.onMount(),this.didMount())},N.prototype.willMount=function(){},N.prototype.onMount=function(){this.bindSuperProperty()},N.prototype.didMount=function(){},N.prototype.unmount=function(){0!=(this.propertyFlags&N.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~N.MountedFlag),this.onUnmount(),this.didUnmount())},N.prototype.willUnmount=function(){},N.prototype.onUnmount=function(){this.unbindSuperProperty()},N.prototype.didUnmount=function(){},N.prototype.toString=function(){return this.name},N.getClass=function(t){return t===String?G:t===Boolean?B:t===Number?j:null},N.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=N.getClass(t.type)),null===i&&(i=N,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e){return 0===arguments.length?a.state:(a.setState(t,e),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==n&&(l=a.fromAny(n)),void 0!==l&&(a.ownState=l),void 0!==r&&(a.precedence=r),void 0!==o&&(a.inherit=o),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l},N.MountedFlag=1,N.UpdatedFlag=2,N.OverrideFlag=4,N.InheritedFlag=8;var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e}(N),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e}(N),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(N),H=function(t,e,i){return this instanceof H?q.call(this,t,e,i):(o=t,f.decorateModelFastener.bind(f,H.define(o)));var o};function q(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.model=null,this}w(H,Object),H.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},H.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},H.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentModel===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertModel(this.owner,t,e,this.key)),this.doSetModel(t,e),i},H.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),this.model=t,null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},H.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},H.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},H.prototype.willSetModel=function(t,e,i){},H.prototype.onSetModel=function(t,e,i){},H.prototype.didSetModel=function(t,e,i){},Object.defineProperty(H.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),H.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},H.prototype.createModel=function(){return null},H.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},H.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},H.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},H.prototype.isMounted=function(){return 0!=(this.fastenerFlags&H.MountedFlag)},H.prototype.mount=function(){0==(this.fastenerFlags&H.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|H.MountedFlag),this.onMount(),this.didMount())},H.prototype.willMount=function(){},H.prototype.onMount=function(){},H.prototype.didMount=function(){},H.prototype.unmount=function(){0!=(this.fastenerFlags&H.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~H.MountedFlag),this.onUnmount(),this.didUnmount())},H.prototype.willUnmount=function(){},H.prototype.onUnmount=function(){},H.prototype.didUnmount=function(){},H.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=H);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},H.MountedFlag=1;var z=function(t,e,i){return this instanceof z?Y.call(this,t,e,i):(o=t,f.decorateModelTrait.bind(f,z.define(o)));var o};function Y(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.trait=null,this}w(z,Object),z.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},z.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},z.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&(null===t||t.model===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertTrait(this.owner,t,e,this.key)),this.doSetTrait(t,e),i},z.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),this.trait=t,null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},z.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},z.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},z.prototype.willSetTrait=function(t,e,i){},z.prototype.onSetTrait=function(t,e,i){},z.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(z.prototype,"parentModel",{get:function(){return this.owner},enumerable:!0,configurable:!0}),z.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},z.prototype.createTrait=function(){return null},z.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},z.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},z.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},z.prototype.isMounted=function(){return 0!=(this.fastenerFlags&z.MountedFlag)},z.prototype.mount=function(){0==(this.fastenerFlags&z.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|z.MountedFlag),this.onMount(),this.didMount())},z.prototype.willMount=function(){},z.prototype.onMount=function(){},z.prototype.didMount=function(){},z.prototype.unmount=function(){0!=(this.fastenerFlags&z.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~z.MountedFlag),this.onUnmount(),this.didUnmount())},z.prototype.willUnmount=function(){},z.prototype.onUnmount=function(){},z.prototype.didUnmount=function(){},z.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=z);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},z.MountedFlag=1;var X=function t(e,i,o){return this instanceof t?K.call(this,e,i,o):Z(e)};function K(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.model=null,this}function Z(t){return v.decorateTraitModel.bind(v,X.define(t))}w(X,Object),X.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},X.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},X.prototype.setModel=function(t,e){var i,o=this.model;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&null!==(i=this.owner.model)&&(null===t||t.parentModel===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertModel(i,t,e,this.key)),this.doSetModel(t,e),o},X.prototype.doSetModel=function(t,e){var i=this.model;i!==t&&(this.willSetModel(t,i,e),null!==i&&this.detachModel(i),this.model=t,null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e))},X.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},X.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},X.prototype.willSetModel=function(t,e,i){},X.prototype.onSetModel=function(t,e,i){},X.prototype.didSetModel=function(t,e,i){},Object.defineProperty(X.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),X.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.doSetModel(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.doSetModel(e,i)),e},X.prototype.createModel=function(){return null},X.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},X.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},X.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},X.prototype.isMounted=function(){return 0!=(this.fastenerFlags&X.MountedFlag)},X.prototype.mount=function(){0==(this.fastenerFlags&X.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|X.MountedFlag),this.onMount(),this.didMount())},X.prototype.willMount=function(){},X.prototype.onMount=function(){},X.prototype.didMount=function(){},X.prototype.unmount=function(){0!=(this.fastenerFlags&X.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~X.MountedFlag),this.onUnmount(),this.didUnmount())},X.prototype.willUnmount=function(){},X.prototype.onUnmount=function(){},X.prototype.didUnmount=function(){},X.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=X);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},X.MountedFlag=1;var _=function(t,e,i){return this instanceof _?Q.call(this,t,e,i):(o=t,v.decorateTraitFastener.bind(v,_.define(o)));var o};function Q(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.trait=null,this}w(_,Object),_.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},_.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},_.prototype.setTrait=function(t,e){var i,o=this.trait;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.sibling&&null!==(i=this.owner.model)&&(null===t||t.model===i&&t.key===this.key?null===t&&null!==o&&o.remove():this.insertTrait(i,t,e,this.key)),this.doSetTrait(t,e),o},_.prototype.doSetTrait=function(t,e){var i=this.trait;i!==t&&(this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),this.trait=t,null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e))},_.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},_.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},_.prototype.willSetTrait=function(t,e,i){},_.prototype.onSetTrait=function(t,e,i){},_.prototype.didSetTrait=function(t,e,i){},Object.defineProperty(_.prototype,"parentModel",{get:function(){return this.owner.model},enumerable:!0,configurable:!0}),_.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.doSetTrait(e,i),null!==e&&(null==t&&(t=this.parentModel),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.doSetTrait(e,i)),e},_.prototype.createTrait=function(){return null},_.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},_.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},_.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},_.prototype.isMounted=function(){return 0!=(this.fastenerFlags&_.MountedFlag)},_.prototype.mount=function(){0==(this.fastenerFlags&_.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|_.MountedFlag),this.onMount(),this.didMount())},_.prototype.willMount=function(){},_.prototype.onMount=function(){},_.prototype.didMount=function(){},_.prototype.unmount=function(){0!=(this.fastenerFlags&_.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~_.MountedFlag),this.onUnmount(),this.didUnmount())},_.prototype.willUnmount=function(){},_.prototype.onUnmount=function(){},_.prototype.didUnmount=function(){},_.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=_);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.sibling&&(o.sibling=!0),i},_.MountedFlag=1;var J=function(t,e){return this instanceof J?$.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,J.define(i)));var i};function $(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.downlink=null,this.downlinkFlags=J.PendingFlag,this.downlinkConsumers=e.Arrays.empty,this.ownWarp=null,this.ownHostUri=null,this.ownNodeUri=null,this.ownLaneUri=null,this.ownPrio=void 0,this.ownRate=void 0,this.ownBody=null,this}w(J,Object),J.prototype.setDownlinkFlags=function(t){this.downlinkFlags=t},J.prototype.isConsuming=function(){return 0!=(this.downlinkFlags&J.ConsumingFlag)},J.prototype.startConsuming=function(){0==(this.downlinkFlags&J.ConsumingFlag)&&(this.willStartConsuming(),this.setDownlinkFlags(this.downlinkFlags|J.ConsumingFlag),this.onStartConsuming(),this.didStartConsuming())},J.prototype.willStartConsuming=function(){},J.prototype.onStartConsuming=function(){this.owner.requireUpdate(f.NeedsReconcile)},J.prototype.didStartConsuming=function(){},J.prototype.stopConsuming=function(){0!=(this.downlinkFlags&J.ConsumingFlag)&&(this.willStopConsuming(),this.setDownlinkFlags(this.downlinkFlags&~J.ConsumingFlag),this.onStopConsuming(),this.didStopConsuming())},J.prototype.willStopConsuming=function(){},J.prototype.onStopConsuming=function(){this.owner.requireUpdate(f.NeedsReconcile)},J.prototype.didStopConsuming=function(){},J.prototype.addDownlinkConsumer=function(t){var i=this.downlinkConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddDownlinkConsumer(t),this.downlinkConsumers=o,this.onAddDownlinkConsumer(t),this.didAddDownlinkConsumer(t),0===i.length&&this.startConsuming())},J.prototype.willAddDownlinkConsumer=function(t){},J.prototype.onAddDownlinkConsumer=function(t){},J.prototype.didAddDownlinkConsumer=function(t){},J.prototype.removeDownlinkConsumer=function(t){var i=this.downlinkConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveDownlinkConsumer(t),this.downlinkConsumers=o,this.onRemoveDownlinkConsumer(t),this.didRemoveDownlinkConsumer(t),0===o.length&&this.stopConsuming())},J.prototype.willRemoveDownlinkConsumer=function(t){},J.prototype.onRemoveDownlinkConsumer=function(t){},J.prototype.didRemoveDownlinkConsumer=function(t){},J.prototype.warp=function(t){return void 0===t?this.ownWarp:(this.ownWarp!==t&&(this.ownWarp=t,this.relink()),this)},J.prototype.hostUri=function(t){return void 0===t?null!==this.ownHostUri?this.ownHostUri:(null!==(t=void 0!==this.initHostUri?this.initHostUri():null)&&(t=n.Uri.fromAny(t),this.ownHostUri=t),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownHostUri,t)||(this.ownHostUri=t,this.relink()),this)},J.prototype.nodeUri=function(t){return void 0===t?null!==this.ownNodeUri?this.ownNodeUri:(null!==(t=void 0!==this.initNodeUri?this.initNodeUri():null)&&(t=n.Uri.fromAny(t),this.ownNodeUri=t),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownNodeUri,t)||(this.ownNodeUri=t,this.relink()),this)},J.prototype.laneUri=function(t){return void 0===t?null!==this.ownLaneUri?this.ownLaneUri:(null!==(t=void 0!==this.initLaneUri?this.initLaneUri():null)&&(t=n.Uri.fromAny(t),this.ownLaneUri=t),t):(null!==t&&(t=n.Uri.fromAny(t)),e.Equals(this.ownLaneUri,t)||(this.ownLaneUri=t,this.relink()),this)},J.prototype.prio=function(t){return 0===arguments.length?void 0!==this.ownPrio?this.ownPrio:(void 0!==(t=void 0!==this.initPrio?this.initPrio():void 0)&&(this.ownPrio=t),t):(this.ownPrio!==t&&(this.ownPrio=t,this.relink()),this)},J.prototype.rate=function(t){return 0===arguments.length?void 0!==this.ownRate?this.ownRate:(void 0!==(t=void 0!==this.initRate?this.initRate():void 0)&&(this.ownRate=t),t):(this.ownRate!==t&&(this.ownRate=t,this.relink()),this)},J.prototype.body=function(t){return void 0===t?null!==this.ownBody?this.ownBody:(null!==(t=void 0!==this.initBody?this.initBody():null)&&(t=o.Value.fromAny(t),this.ownBody=t),t):(null!==t&&(t=o.Value.fromAny(t)),e.Equals(this.ownBody,t)||(this.ownBody=t,this.relink()),this)},J.prototype.link=function(){if(null===this.downlink){var t=this.ownWarp;null===t&&(t=this.owner.warpRef.state),null===t&&(t=this.owner.warpService.manager.client);var e=this.createDownlink(t);e=this.bindDownlink(e),void 0!==this.initDownlink&&(e=this.initDownlink(e)),e=e.observe(this),this.downlink=e.open(),this.setDownlinkFlags(this.downlinkFlags&~J.PendingFlag)}},J.prototype.unlink=function(){var t=this.downlink;null!==t&&(t.close(),this.downlink=null,this.setDownlinkFlags(this.downlinkFlags|J.PendingFlag))},J.prototype.relink=function(){this.setDownlinkFlags(this.downlinkFlags|J.PendingFlag),0!=(this.downlinkFlags&J.ConsumingFlag)&&this.owner.requireUpdate(f.NeedsReconcile)},J.prototype.reconcile=function(){null!==this.downlink&&(this.downlinkFlags&J.RelinkMask)===J.RelinkMask?(this.unlink(),this.link()):null===this.downlink&&0!=(this.downlinkFlags&J.ConsumingFlag)?this.link():null!==this.downlink&&0==(this.downlinkFlags&J.ConsumingFlag)&&this.unlink()},J.prototype.bindDownlink=function(t){var e=this.hostUri();null!==e&&(t=t.hostUri(e));var i=this.nodeUri();null!==i&&(t=t.nodeUri(i));var o=this.laneUri();null!==o&&(t=t.laneUri(o));var n=this.prio();void 0!==n&&(t=t.prio(n));var r=this.rate();void 0!==r&&(t=t.rate(r));var s=this.body();return null!==s&&(t=t.body(s)),t},J.prototype.isMounted=function(){return 0!=(this.downlinkFlags&J.MountedFlag)},J.prototype.mount=function(){0==(this.downlinkFlags&J.MountedFlag)&&(this.willMount(),this.setDownlinkFlags(this.downlinkFlags|J.MountedFlag),this.onMount(),this.didMount())},J.prototype.willMount=function(){},J.prototype.onMount=function(){0!=(this.downlinkFlags&J.ConsumingFlag)&&this.owner.requireUpdate(f.NeedsReconcile)},J.prototype.didMount=function(){},J.prototype.unmount=function(){0!=(this.downlinkFlags&J.MountedFlag)&&(this.willUnmount(),this.setDownlinkFlags(this.downlinkFlags&~J.MountedFlag),this.onUnmount(),this.didUnmount())},J.prototype.willUnmount=function(){},J.prototype.onUnmount=function(){this.unlink()},J.prototype.didUnmount=function(){},J.define=function(t){var e=t.type;if(delete t.type,"event"===e)return tt.define(t);if("list"===e)return it.define(t);if("map"===e)return nt.define(t);if("value"===e)return lt.define(t);var i=t.extends,r=t.hostUri,s=t.nodeUri,l=t.laneUri,a=t.prio,h=t.rate,u=t.body;delete t.extends,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===i&&(i=J);var p=function(t,e){var o=i.call(this,t,e)||this;return void 0!==r&&(o.ownHostUri=r),void 0!==s&&(o.ownNodeUri=s),void 0!==l&&(o.ownLaneUri=l),void 0!==a&&(o.ownPrio=a),void 0!==h&&(o.ownRate=h),void 0!==u&&(o.ownBody=u),o},d=t;return Object.setPrototypeOf(p,i),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,i.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(d.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof a&&(d.initPrio=a,a=void 0),"function"==typeof h&&(d.initRate=h,h=void 0),"function"==typeof u?(d.initBody=u,u=void 0):void 0!==u&&(u=o.Value.fromAny(u)),p},J.MountedFlag=1,J.ConsumingFlag=2,J.PendingFlag=4,J.RelinkMask=J.ConsumingFlag|J.PendingFlag;var tt=function(t,e){return this instanceof tt?et.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,tt.define(i)));var i};function et(t,e){return J.call(this,t,e)||this}w(tt,J),tt.prototype.createDownlink=function(t){return t.downlink()},tt.define=function(t){var e=t.extends,i=t.hostUri,r=t.nodeUri,s=t.laneUri,l=t.prio,a=t.rate,h=t.body;delete t.extends,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=tt);var u=function(t,o){var n=e.call(this,t,o)||this;return void 0!==i&&(n.ownHostUri=i),void 0!==r&&(n.ownNodeUri=r),void 0!==s&&(n.ownLaneUri=s),void 0!==l&&(n.ownPrio=l),void 0!==a&&(n.ownRate=a),void 0!==h&&(n.ownBody=h),n},p=t;return Object.setPrototypeOf(u,e),(u.prototype=p).constructor=u,Object.setPrototypeOf(u.prototype,e.prototype),"function"==typeof i?(p.initHostUri=i,i=void 0):void 0!==i&&(i=n.Uri.fromAny(i)),"function"==typeof r?(p.initNodeUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(p.initLaneUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l&&(p.initPrio=l,l=void 0),"function"==typeof a&&(p.initRate=a,a=void 0),"function"==typeof h?(p.initBody=h,h=void 0):void 0!==h&&(h=o.Value.fromAny(h)),u};var it=function(t,e){return this instanceof it?ot.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,it.define(i)));var i};function ot(t,e){var i=J.call(this,t,e)||this;return i.ownValueForm=null,i}w(it,J),it.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(this.ownValueForm=t,this.relink()),this)},Object.defineProperty(it.prototype,"length",{get:function(){var t=this.downlink;return null!==t?t.length:0},enumerable:!0,configurable:!0}),it.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},it.prototype.get=function(t,e){var i=this.downlink;return null!==i?i.get(t,e):void 0},it.prototype.getEntry=function(t,e){var i=this.downlink;return null!==i?i.getEntry(t,e):void 0},it.prototype.set=function(t,e,i){var o=this.downlink;return null!=o&&o.set(t,e,i),this},it.prototype.insert=function(t,e,i){var o=this.downlink;return null!=o&&o.insert(t,e,i),this},it.prototype.remove=function(t,e){var i=this.downlink;return null!=i&&i.remove(t,e),this},it.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.push.apply(i,t):0},it.prototype.pop=function(){var t=this.downlink;return null!==t?t.pop():void 0},it.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.downlink;return null!==i?i.unshift.apply(i,t):0},it.prototype.shift=function(){var t=this.downlink;return null!==t?t.shift():void 0},it.prototype.move=function(t,e,i){var o=this.downlink;return null!=o&&o.move(t,e,i),this},it.prototype.splice=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this.downlink;return null!==n?n.splice.apply(n,S([t,e],i,!1)):[]},it.prototype.clear=function(){var t=this.downlink;null!=t&&t.clear()},it.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},it.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},it.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},it.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},it.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},it.define=function(t){var e=t.extends,i=t.valueForm,r=t.hostUri,s=t.nodeUri,l=t.laneUri,a=t.prio,h=t.rate,u=t.body;delete t.extends,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=it);var p=function(t,o){var n=function(t,e){return 0===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&(n.ownValueForm=i),void 0!==r&&(n.ownHostUri=r),void 0!==s&&(n.ownNodeUri=s),void 0!==l&&(n.ownLaneUri=l),void 0!==a&&(n.ownPrio=a),void 0!==h&&(n.ownRate=h),void 0!==u&&(n.ownBody=u),n},d=t;return Object.setPrototypeOf(p,e),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,e.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(d.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof a&&(d.initPrio=a,a=void 0),"function"==typeof h&&(d.initRate=h,h=void 0),"function"==typeof u?(d.initBody=u,u=void 0):void 0!==u&&(u=o.Value.fromAny(u)),p};var nt=function t(e,i){return this instanceof t?rt.call(this,e,i):st(e)};function rt(t,e){var i=J.call(this,t,e)||this;return i.ownKeyForm=null,i.ownValueForm=null,i}function st(t){return c.decorateModelDownlink.bind(c,nt.define(t))}w(nt,J),nt.prototype.keyForm=function(t){return void 0===t?this.ownKeyForm:(this.ownKeyForm!==t&&(this.ownKeyForm=t,this.relink()),this)},nt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(this.ownValueForm=t,this.relink()),this)},Object.defineProperty(nt.prototype,"size",{get:function(){var t=this.downlink;return null!==t?t.size:0},enumerable:!0,configurable:!0}),nt.prototype.isEmpty=function(){var t=this.downlink;return null===t||t.isEmpty()},nt.prototype.has=function(t){var e=this.downlink;return null!==e&&e.has(t)},nt.prototype.get=function(t){var e,i=this.downlink;return null!==i&&(e=i.get(t)),void 0===e&&null!==this.ownValueForm&&(e=this.ownValueForm.unit),e},nt.prototype.getEntry=function(t){var e=this.downlink;return null!==e?e.getEntry(t):void 0},nt.prototype.firstKey=function(){var t=this.downlink;return null!==t?t.firstKey():void 0},nt.prototype.firstValue=function(){var t=this.downlink;return null!==t?t.firstValue():void 0},nt.prototype.firstEntry=function(){var t=this.downlink;return null!==t?t.firstEntry():void 0},nt.prototype.lastKey=function(){var t=this.downlink;return null!==t?t.lastKey():void 0},nt.prototype.lastValue=function(){var t=this.downlink;return null!==t?t.lastValue():void 0},nt.prototype.lastEntry=function(){var t=this.downlink;return null!==t?t.lastEntry():void 0},nt.prototype.nextKey=function(t){var e=this.downlink;return null!==e?e.nextKey(t):void 0},nt.prototype.nextValue=function(t){var e=this.downlink;return null!==e?e.nextValue(t):void 0},nt.prototype.nextEntry=function(t){var e=this.downlink;return null!==e?e.nextEntry(t):void 0},nt.prototype.previousKey=function(t){var e=this.downlink;return null!==e?e.previousKey(t):void 0},nt.prototype.previousValue=function(t){var e=this.downlink;return null!==e?e.previousValue(t):void 0},nt.prototype.previousEntry=function(t){var e=this.downlink;return null!==e?e.previousEntry(t):void 0},nt.prototype.set=function(t,e){var i=this.downlink;return null!==i&&i.set(t,e),this},nt.prototype.delete=function(t){var e=this.downlink;return null!==e&&e.delete(t)},nt.prototype.drop=function(t){var e=this.downlink;return null!==e&&e.drop(t),this},nt.prototype.take=function(t){var e=this.downlink;return null!==e&&e.take(t),this},nt.prototype.clear=function(){var t=this.downlink;null!==t&&t.clear()},nt.prototype.forEach=function(t,e){var i=this.downlink;return null!==i?i.forEach(t,e):void 0},nt.prototype.keys=function(){var t=this.downlink;return null!==t?t.keys():e.Cursor.empty()},nt.prototype.values=function(){var t=this.downlink;return null!==t?t.values():e.Cursor.empty()},nt.prototype.entries=function(){var t=this.downlink;return null!==t?t.entries():e.Cursor.empty()},nt.prototype.createDownlink=function(t){var e=t.downlinkMap();return null!==this.ownKeyForm&&(e=e.keyForm(this.ownKeyForm)),null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},nt.define=function(t){var e=t.extends,i=t.keyForm,r=t.valueForm,s=t.hostUri,l=t.nodeUri,a=t.laneUri,h=t.prio,u=t.rate,p=t.body;delete t.extends,delete t.keyForm,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=nt);var d=function(t,o){var n=function(t,e){return 1===arguments.length?n.get(t):(n.set(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&(n.ownKeyForm=i),void 0!==r&&(n.ownValueForm=r),void 0!==s&&(n.ownHostUri=s),void 0!==l&&(n.ownNodeUri=l),void 0!==a&&(n.ownLaneUri=a),void 0!==h&&(n.ownPrio=h),void 0!==u&&(n.ownRate=u),void 0!==p&&(n.ownBody=p),n},c=t;return Object.setPrototypeOf(d,e),(d.prototype=c).constructor=d,Object.setPrototypeOf(d.prototype,e.prototype),"function"==typeof s?(c.initHostUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(c.initNodeUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof a?(c.initLaneUri=a,a=void 0):void 0!==a&&(a=n.Uri.fromAny(a)),"function"==typeof h&&(c.initPrio=h,h=void 0),"function"==typeof u&&(c.initRate=u,u=void 0),"function"==typeof p?(c.initBody=p,p=void 0):void 0!==p&&(p=o.Value.fromAny(p)),d};var lt=function(t,e){return this instanceof lt?at.call(this,t,e):(i=t,c.decorateModelDownlink.bind(c,lt.define(i)));var i};function at(t,e){var i=J.call(this,t,e)||this;return i.ownValueForm=null,i}w(lt,J),lt.prototype.valueForm=function(t){return void 0===t?this.ownValueForm:(this.ownValueForm!==t&&(this.ownValueForm=t,this.relink()),this)},lt.prototype.get=function(){var t=this.downlink;return null!==t?t.get():void 0},lt.prototype.set=function(t){var e=this.downlink;null!==e&&e.set(t)},lt.prototype.createDownlink=function(t){var e=t.downlinkValue();return null!==this.ownValueForm&&(e=e.valueForm(this.ownValueForm)),e},lt.define=function(t){var e=t.extends,i=t.valueForm,r=t.hostUri,s=t.nodeUri,l=t.laneUri,a=t.prio,h=t.rate,u=t.body;delete t.extends,delete t.valueForm,delete t.hostUri,delete t.nodeUri,delete t.laneUri,delete t.prio,delete t.rate,delete t.body,void 0===e&&(e=lt);var p=function(t,o){var n=function(t){return 0===arguments.length?n.get():(n.set(t),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,o)||n,void 0!==i&&(n.ownValueForm=i),void 0!==r&&(n.ownHostUri=r),void 0!==s&&(n.ownNodeUri=s),void 0!==l&&(n.ownLaneUri=l),void 0!==a&&(n.ownPrio=a),void 0!==h&&(n.ownRate=h),void 0!==u&&(n.ownBody=u),n},d=t;return Object.setPrototypeOf(p,e),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,e.prototype),"function"==typeof r?(d.initHostUri=r,r=void 0):void 0!==r&&(r=n.Uri.fromAny(r)),"function"==typeof s?(d.initNodeUri=s,s=void 0):void 0!==s&&(s=n.Uri.fromAny(s)),"function"==typeof l?(d.initLaneUri=l,l=void 0):void 0!==l&&(l=n.Uri.fromAny(l)),"function"==typeof a&&(d.initPrio=a,a=void 0),"function"==typeof h&&(d.initRate=h,h=void 0),"function"==typeof u?(d.initBody=u,u=void 0):void 0!==u&&(u=o.Value.fromAny(u)),p};var ht=function(t){function i(){var i=t.call(this)||this;return i.model=null,i.key=void 0,i.traitConsumers=e.Arrays.empty,i.traitServices=null,i.traitProperties=null,i.traitModels=null,i.traitFasteners=null,i.traitDownlinks=null,i}return w(i,t),i.prototype.willObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){this.key=t},i.prototype.setModel=function(t,e){this.willSetModel(t,e),null!==e&&this.detachModel(e),this.model=t,this.onSetModel(t,e),null!==t&&this.attachModel(t),this.didSetModel(t,e)},i.prototype.attachModel=function(t){this.attachTraitServices(),this.isMounted()&&(this.mountTraitProperties(),this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks())},i.prototype.detachModel=function(t){this.isMounted()&&(this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels(),this.unmountTraitProperties()),this.detachTraitServices()},i.prototype.remove=function(){var t=this.model;null!==t&&t.removeTrait(this)},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertTraitModel(e,i)},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeTraitModel(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertTraitFastener(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeTraitFastener(e)},i.prototype.mountTrait=function(){if(0!=(this.traitFlags&v.MountedFlag))throw new Error("already mounted");this.setTraitFlags(this.traitFlags|v.MountedFlag),this.willMount(),this.onMount(),this.didMount()},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountTraitModels(),this.mountTraitFasteners(),this.mountTraitDownlinks(),0!==this.traitConsumers.length&&this.startConsuming()},i.prototype.unmountTrait=function(){if(0==(this.traitFlags&v.MountedFlag))throw new Error("already unmounted");this.setTraitFlags(this.traitFlags&~v.MountedFlag),this.willUnmount(),this.onUnmount(),this.didUnmount()},i.prototype.onUnmount=function(){this.stopConsuming(),this.unmountTraitDownlinks(),this.unmountTraitFasteners(),this.unmountTraitModels()},i.prototype.powerTrait=function(){if(0!=(this.traitFlags&v.PoweredFlag))throw new Error("already powered");this.setTraitFlags(this.traitFlags|v.PoweredFlag),this.willPower(),this.onPower(),this.didPower()},i.prototype.unpowerTrait=function(){if(0==(this.traitFlags&v.PoweredFlag))throw new Error("already unpowered");this.setTraitFlags(this.traitFlags&~v.PoweredFlag),this.willUnpower(),this.onUnpower(),this.didUnpower()},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateTraitProperties()},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileTraitDownlinks()},i.prototype.addTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddTraitConsumer(t),this.traitConsumers=o,this.onAddTraitConsumer(t),this.didAddTraitConsumer(t),0===i.length&&this.isMounted()&&this.startConsuming())},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingTraitDownlinks()},i.prototype.removeTraitConsumer=function(t){var i=this.traitConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveTraitConsumer(t),this.traitConsumers=o,this.onRemoveTraitConsumer(t),this.didRemoveTraitConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.onStopConsuming=function(){this.stopConsumingTraitDownlinks(),t.prototype.onStopConsuming.call(this)},i.prototype.hasTraitService=function(t){var e=this.traitServices;return null!==e&&void 0!==e[t]},i.prototype.getTraitService=function(t){var e=this.traitServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitService=function(t,e){var i=this.traitServices;null===i&&(i={},this.traitServices=i);var o=i[t];void 0!==o&&this.isMounted()&&o.detach(),null!==e?(i[t]=e,this.isMounted()&&e.attach()):delete i[t]},i.prototype.attachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].attach()}},i.prototype.detachTraitServices=function(){var t=this.traitServices;for(var e in t){t[e].detach()}},i.prototype.hasModelProperty=function(t){var e=this.model;return null!==e&&e.hasModelProperty(t)},i.prototype.getModelProperty=function(t){var e=this.model;return null!==e?e.getModelProperty(t):null},i.prototype.setModelProperty=function(t,e){var i=this.model;if(null===i)throw new Error("no model");i.setModelProperty(t,e)},i.prototype.hasTraitProperty=function(t){var e=this.traitProperties;return null!==e&&void 0!==e[t]},i.prototype.getTraitProperty=function(t){var e=this.traitProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitProperty=function(t,e){var i=this.traitProperties;null===i&&(i={},this.traitProperties=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mutateTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].onMutate()}},i.prototype.mountTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].mount()}},i.prototype.unmountTraitProperties=function(){var t=this.traitProperties;for(var e in t){t[e].unmount()}},i.prototype.hasTraitModel=function(t){var e=this.traitModels;return null!==e&&void 0!==e[t]},i.prototype.getTraitModel=function(t){var e=this.traitModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitModel=function(t,e){var i=this.traitModels;null===i&&(i={},this.traitModels=i);var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.child)){var n=this.getChildModel(e.name);null!==n&&e.doSetModel(n,null)}}else delete i[t]},i.prototype.mountTraitModels=function(){var t=this.traitModels;for(var e in t){var i=t[e];if(i.mount(),!0===i.child){var o=this.getChildModel(i.name);null!==o&&i.doSetModel(o,null)}}},i.prototype.unmountTraitModels=function(){var t=this.traitModels;for(var e in t){t[e].unmount()}},i.prototype.insertTraitModel=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitModel(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeTraitModel=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitModel(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasTraitFastener=function(t){var e=this.traitFasteners;return null!==e&&void 0!==e[t]},i.prototype.getTraitFastener=function(t){var e=this.traitFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setTraitFastener=function(t,e){var i=this.traitFasteners;null===i&&(i={},this.traitFasteners=i);var o=i[t];if(void 0!==o&&this.isMounted()&&o.unmount(),null!==e){if(i[t]=e,this.isMounted()&&(e.mount(),!0===e.sibling)){var n=this.getTrait(e.name);null!==n&&e.doSetTrait(n,null)}}else delete i[t]},i.prototype.mountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){var i=t[e];if(i.mount(),!0===i.sibling){var o=this.getTrait(i.name);null!==o&&i.doSetTrait(o,null)}}},i.prototype.unmountTraitFasteners=function(){var t=this.traitFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertTraitFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyTraitFastener(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeTraitFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getTraitFastener(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.traitDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.traitDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.traitDownlinks;null===i&&(i={},this.traitDownlinks=i);var o=i[t];void 0!==o&&this.isMounted()&&(this.isConsuming()&&!0===o.consume&&o.removeDownlinkConsumer(this),o.unmount()),null!==e?(i[t]=e,this.isMounted()&&(e.mount(),this.isConsuming()&&!0===e.consume&&e.addDownlinkConsumer(this))):delete i[t]},i.prototype.mountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].mount()}c.initModelDownlinks(this)},i.prototype.unmountTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){t[e].reconcile()}},i.prototype.startConsumingTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.addDownlinkConsumer(this)}},i.prototype.stopConsumingTraitDownlinks=function(){var t=this.traitDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.removeDownlinkConsumer(this)}},i}(v);R({type:Object,inherit:!0,state:null,updateFlags:f.NeedsReconcile})(v.prototype,"warpRef");var ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.attachDriver=function(t){t.isConsuming()&&this.addTraitConsumer(t)},e.prototype.detachDriver=function(t){t.isConsuming()&&this.removeTraitConsumer(t)},e.prototype.driverDidStartConsuming=function(t){this.addTraitConsumer(t)},e.prototype.driverWillStopConsuming=function(t){this.removeTraitConsumer(t)},m([_({type:v,observe:!0,onSetTrait:function(t,e){null!==e&&this.owner.detachDriver(e),null!==t&&this.owner.attachDriver(t)},traitDidStartConsuming:function(t){this.owner.driverDidStartConsuming(t)},traitWillStopConsuming:function(t){this.owner.driverWillStopConsuming(t)}})],e.prototype,"driver",void 0),e}(ht),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidSet=function(t,e){},m([lt({consume:!0,didSet:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidSet(t,e)}})],e.prototype,"downlink",void 0),e}(ut),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.downlinkDidUpdate=function(t,e,i){},e.prototype.downlinkDidRemove=function(t,e){},m([nt({consume:!0,didUpdate:function(t,e,i){this.owner.isConsuming()&&this.owner.downlinkDidUpdate(t,e,i)},didRemove:function(t,e){this.owner.isConsuming()&&this.owner.downlinkDidRemove(t,e)}})],e.prototype,"downlink",void 0),e}(ut),ct=function(t){function i(){var i=t.call(this)||this;return i.key=void 0,i.parentModel=null,i.modelConsumers=e.Arrays.empty,i.modelServices=null,i.modelProperties=null,i.modelFasteners=null,i.modelTraits=null,i.modelDownlinks=null,i}return w(i,t),i.prototype.willObserve=function(t){for(var e,i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.modelObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){this.key=t},i.prototype.setParentModel=function(t,e){this.willSetParentModel(t,e),null!==e&&this.detachParentModel(e),this.parentModel=t,null!==t&&this.attachParentModel(t),this.onSetParentModel(t,e),this.didSetParentModel(t,e)},i.prototype.remove=function(){var t=this.parentModel;null!==t&&(0==(this.modelFlags&f.TraversingFlag)?t.removeChildModel(this):this.setModelFlags(this.modelFlags|f.RemovingFlag))},i.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.insertModelFastener(e,i)},i.prototype.cascadeInsert=function(t,e){},i.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.removeModelFastener(e)},i.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i),this.insertModelTrait(e,i)},i.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e),this.removeModelTrait(e)},i.prototype.cascadeMount=function(){if(0!=(this.modelFlags&f.MountedFlag))throw new Error("already mounted");this.setModelFlags(this.modelFlags|f.MountedFlag|f.TraversingFlag);try{this.willMount(),this.onMount(),this.mountTraits(),this.mountChildModels(),this.didMount()}finally{this.setModelFlags(this.modelFlags&~f.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountModelServices(),this.mountModelProperties(),this.mountModelFasteners(),this.mountModelTraits(),this.mountModelDownlinks(),0!==this.modelConsumers.length&&this.startConsuming()},i.prototype.mountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].mountTrait()},i.prototype.mountChildModels=function(){this.forEachChildModel((function(t){t.cascadeMount(),0!=(t.modelFlags&f.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~f.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.modelFlags&f.MountedFlag))throw new Error("already unmounted");this.setModelFlags(this.modelFlags&~f.MountedFlag|f.TraversingFlag);try{this.willUnmount(),this.unmountChildModels(),this.unmountTraits(),this.onUnmount(),this.didUnmount()}finally{this.setModelFlags(this.modelFlags&~f.TraversingFlag)}},i.prototype.onUnmount=function(){this.stopConsuming(),this.unmountModelDownlinks(),this.unmountModelTraits(),this.unmountModelFasteners(),this.unmountModelProperties(),this.unmountModelServices(),this.setModelFlags(this.modelFlags&(~f.ModelFlagMask|f.RemovingFlag))},i.prototype.unmountTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].unmountTrait()},i.prototype.unmountChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnmount(),0!=(t.modelFlags&f.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~f.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.modelFlags&f.PoweredFlag))throw new Error("already powered");this.setModelFlags(this.modelFlags|f.PoweredFlag|f.TraversingFlag);try{this.willPower(),this.onPower(),this.powerTraits(),this.powerChildModels(),this.didPower()}finally{this.setModelFlags(this.modelFlags&~f.TraversingFlag)}},i.prototype.powerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].powerTrait()},i.prototype.powerChildModels=function(){this.forEachChildModel((function(t){t.cascadePower(),0!=(t.modelFlags&f.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~f.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.modelFlags&f.PoweredFlag))throw new Error("already unpowered");this.setModelFlags(this.modelFlags&~f.PoweredFlag|f.TraversingFlag);try{this.willUnpower(),this.unpowerChildModels(),this.unpowerTraits(),this.onUnpower(),this.didUnpower()}finally{this.setModelFlags(this.modelFlags&~f.TraversingFlag)}},i.prototype.unpowerTraits=function(){for(var t=this.traits,e=0,i=t.length;e<i;e+=1)t[e].unpowerTrait()},i.prototype.unpowerChildModels=function(){this.forEachChildModel((function(t){t.cascadeUnpower(),0!=(t.modelFlags&f.RemovingFlag)&&(t.setModelFlags(t.modelFlags&~f.RemovingFlag),this.removeChildModel(t))}),this)},i.prototype.cascadeAnalyze=function(t,e){var i=this.extendModelContext(e);if(t&=~f.NeedsAnalyze,t|=this.modelFlags&f.UpdateMask,0!=((t=this.needsAnalyze(t,i))&f.AnalyzeMask)){var o=t;this.setModelFlags(this.modelFlags&~f.NeedsAnalyze|f.TraversingFlag|f.AnalyzingFlag);try{this.willAnalyze(o,i),0!=((this.modelFlags|t)&f.NeedsMutate)&&(o|=f.NeedsMutate,this.setModelFlags(this.modelFlags&~f.NeedsMutate),this.willMutate(i)),0!=((this.modelFlags|t)&f.NeedsAggregate)&&(o|=f.NeedsAggregate,this.setModelFlags(this.modelFlags&~f.NeedsAggregate),this.willAggregate(i)),0!=((this.modelFlags|t)&f.NeedsCorrelate)&&(o|=f.NeedsCorrelate,this.setModelFlags(this.modelFlags&~f.NeedsCorrelate),this.willCorrelate(i)),this.onAnalyze(o,i),0!=(o&f.NeedsMutate)&&this.onMutate(i),0!=(o&f.NeedsAggregate)&&this.onAggregate(i),0!=(o&f.NeedsCorrelate)&&this.onCorrelate(i),0!=(o&f.AnalyzeMask)&&this.analyzeChildModels(o,i,this.analyzeChildModel),0!=(o&f.NeedsCorrelate)&&this.didCorrelate(i),0!=(o&f.NeedsAggregate)&&this.didAggregate(i),0!=(o&f.NeedsMutate)&&this.didMutate(i),this.didAnalyze(o,i)}finally{this.setModelFlags(this.modelFlags&~(f.TraversingFlag|f.AnalyzingFlag))}}},i.prototype.onMutate=function(e){t.prototype.onMutate.call(this,e),this.mutateModelProperties()},i.prototype.analyzeTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].analyzeChildModels(i,o,n,this.analyzeTraitChildModels.bind(this,t,e+1)):this.analyzeOwnChildModels(i,o,n)},i.prototype.analyzeChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.analyzeTraitChildModels(o,0,t,e,i):this.analyzeOwnChildModels(t,e,i)},i.prototype.cascadeRefresh=function(t,e){var i=this.extendModelContext(e);if(t&=~f.NeedsRefresh,t|=this.modelFlags&f.UpdateMask,0!=((t=this.needsRefresh(t,i))&f.RefreshMask)){var o=t;this.setModelFlags(this.modelFlags&~f.NeedsRefresh|f.TraversingFlag|f.RefreshingFlag);try{this.willRefresh(o,i),0!=((this.modelFlags|t)&f.NeedsValidate)&&(o|=f.NeedsValidate,this.setModelFlags(this.modelFlags&~f.NeedsValidate),this.willValidate(i)),0!=((this.modelFlags|t)&f.NeedsReconcile)&&(o|=f.NeedsReconcile,this.setModelFlags(this.modelFlags&~f.NeedsReconcile),this.willReconcile(i)),this.onRefresh(o,i),0!=(o&f.NeedsValidate)&&this.onValidate(i),0!=(o&f.NeedsReconcile)&&this.onReconcile(i),o&f.RefreshMask&&this.refreshChildModels(o,i,this.refreshChildModel),0!=(o&f.NeedsReconcile)&&this.didReconcile(i),0!=(o&f.NeedsValidate)&&this.didValidate(i),this.didRefresh(o,i)}finally{this.setModelFlags(this.modelFlags&~(f.TraversingFlag|f.RefreshingFlag))}}},i.prototype.refreshTraitChildModels=function(t,e,i,o,n){e<t.length?t[e].refreshChildModels(i,o,n,this.refreshTraitChildModels.bind(this,t,e+1)):this.refreshOwnChildModels(i,o,n)},i.prototype.refreshChildModels=function(t,e,i){var o=this.traits;0!==o.length?this.refreshTraitChildModels(o,0,t,e,i):this.refreshOwnChildModels(t,e,i)},i.prototype.onReconcile=function(e){t.prototype.onReconcile.call(this,e),this.reconcileModelDownlinks()},i.prototype.addModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddModelConsumer(t),this.modelConsumers=o,this.onAddModelConsumer(t),this.didAddModelConsumer(t),0===i.length&&this.isMounted()&&this.startConsuming())},i.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingModelDownlinks()},i.prototype.removeModelConsumer=function(t){var i=this.modelConsumers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveModelConsumer(t),this.modelConsumers=o,this.onRemoveModelConsumer(t),this.didRemoveModelConsumer(t),0===o.length&&this.stopConsuming())},i.prototype.onStopConsuming=function(){this.stopConsumingModelDownlinks(),t.prototype.onStopConsuming.call(this)},i.prototype.hasModelService=function(t){var e=this.modelServices;return null!==e&&void 0!==e[t]},i.prototype.getModelService=function(t){var e=this.modelServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelService=function(t,e){var i=this.modelServices;null===i&&(i={},this.modelServices=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].mount()}},i.prototype.unmountModelServices=function(){var t=this.modelServices;for(var e in t){t[e].unmount()}},i.prototype.hasModelProperty=function(t){var e=this.modelProperties;return null!==e&&void 0!==e[t]},i.prototype.getModelProperty=function(t){var e=this.modelProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelProperty=function(t,e){var i=this.modelProperties;null===i&&(i={},this.modelProperties=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mutateModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].onMutate()}},i.prototype.mountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].mount()}},i.prototype.unmountModelProperties=function(){var t=this.modelProperties;for(var e in t){t[e].unmount()}},i.prototype.hasModelFastener=function(t){var e=this.modelFasteners;return null!==e&&void 0!==e[t]},i.prototype.getModelFastener=function(t){var e=this.modelFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelFastener=function(t,e){var i=this.modelFasteners;null===i&&(i={},this.modelFasteners=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountModelFasteners=function(){var t=this.modelFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertModelFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelFastener(i);null!==o&&!0===o.child&&o.doSetModel(t,e)}},i.prototype.removeModelFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getModelFastener(e);null!==i&&!0===i.child&&i.doSetModel(null,null)}},i.prototype.hasModelTrait=function(t){var e=this.modelTraits;return null!==e&&void 0!==e[t]},i.prototype.getModelTrait=function(t){var e=this.modelTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelTrait=function(t,e){var i=this.modelTraits;null===i&&(i={},this.modelTraits=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].mount()}},i.prototype.unmountModelTraits=function(){var t=this.modelTraits;for(var e in t){t[e].unmount()}},i.prototype.insertModelTrait=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyModelTrait(i);null!==o&&!0===o.sibling&&o.doSetTrait(t,null)}},i.prototype.removeModelTrait=function(t){var e=t.key;if(void 0!==e){var i=this.getModelTrait(e);null!==i&&!0===i.sibling&&i.doSetTrait(null,null)}},i.prototype.hasModelDownlink=function(t){var e=this.modelDownlinks;return null!==e&&void 0!==e[t]},i.prototype.getModelDownlink=function(t){var e=this.modelDownlinks;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setModelDownlink=function(t,e){var i=this.modelDownlinks;null===i&&(i={},this.modelDownlinks=i);var o=i[t];void 0!==o&&this.isMounted()&&(this.isConsuming()&&!0===o.consume&&o.removeDownlinkConsumer(this),o.unmount()),null!==e?(i[t]=e,this.isMounted()&&(e.mount(),this.isConsuming()&&!0===e.consume&&e.addDownlinkConsumer(this))):delete i[t]},i.prototype.mountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].mount()}c.initModelDownlinks(this)},i.prototype.unmountModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].unmount()}},i.prototype.reconcileModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){t[e].reconcile()}},i.prototype.startConsumingModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.addDownlinkConsumer(this)}},i.prototype.stopConsumingModelDownlinks=function(){var t=this.modelDownlinks;for(var e in t){var i=t[e];!0===i.consume&&i.removeDownlinkConsumer(this)}},i}(f);R({type:Object,inherit:!0,state:null,updateFlags:f.NeedsReconcile})(f.prototype,"warpRef");var ft=function(t){function e(){var e=t.call(this)||this;return e.childModels=[],e.childModelMap=null,e}return w(e,t),Object.defineProperty(e.prototype,"childModelCount",{get:function(){return this.childModels.length},enumerable:!1,configurable:!0}),e.prototype.firstChildModel=function(){var t=this.childModels;return 0!==t.length?t[0]:null},e.prototype.lastChildModel=function(){var t=this.childModels;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildModel=function(t){var e=this.childModels,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildModel=function(t,e){for(var i,o=this.childModels,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildModel=function(t){var e=this.childModelMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildModel=function(t,e){var i=null,o=this.childModels;null!==e&&(e.parentModel===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildModel(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildModel(r),r.setParentModel(null,this),this.removeChildModelMap(r),o.splice(n,1),this.onRemoveChildModel(r),this.didRemoveChildModel(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildModel(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildModelMap(e),e.setParentModel(this,null),this.onInsertChildModel(e,i),this.didInsertChildModel(e,i),e.cascadeInsert()),r},e.prototype.insertChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null===i&&(i={},this.childModelMap=i),i[e]=t}},e.prototype.removeChildModelMap=function(t){var e=t.key;if(void 0!==e){var i=this.childModelMap;null!==i&&delete i[e]}},e.prototype.appendChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e)),this.willInsertChildModel(t,null),this.childModels.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,null),this.didInsertChildModel(t,null),t.cascadeInsert()},e.prototype.prependChildModel=function(t,e){t.remove(),void 0!==e&&(this.removeChildModel(e),t.setKey(e));var i=this.childModels,o=0!==i.length?i[0]:null;this.willInsertChildModel(t,o),i.unshift(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,o),this.didInsertChildModel(t,o),t.cascadeInsert()},e.prototype.insertChildModel=function(t,e,i){if(null!==e&&e.parentModel!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildModel(i),t.setKey(i)),this.willInsertChildModel(t,e);var o=this.childModels,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildModelMap(t),t.setParentModel(this,null),this.onInsertChildModel(t,e),this.didInsertChildModel(t,e),t.cascadeInsert()},e.prototype.removeChildModel=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildModel(t)))return null}else e=t;if(e.parentModel!==this)throw new Error("not a child model");this.willRemoveChildModel(e),e.setParentModel(null,this),this.removeChildModelMap(e);var i=this.childModels,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildModel(e),this.didRemoveChildModel(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childModels;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildModel(i),i.setParentModel(null,this),this.removeChildModelMap(i),t.pop(),this.onRemoveChildModel(i),this.didRemoveChildModel(i),i.setKey(void 0)}},e.prototype.mountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.modelFlags&f.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~f.RemovingFlag),this.removeChildModel(i))}},e.prototype.unmountChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.modelFlags&f.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~f.RemovingFlag),this.removeChildModel(i))}},e.prototype.powerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.modelFlags&f.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~f.RemovingFlag),this.removeChildModel(i))}},e.prototype.unpowerChildModels=function(){for(var t=this.childModels,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.modelFlags&f.RemovingFlag)?e+=1:(i.setModelFlags(i.modelFlags&~f.RemovingFlag),this.removeChildModel(i))}},e.prototype.analyzeOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&f.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~f.RemovingFlag),this.removeChildModel(r))}},e.prototype.refreshOwnChildModels=function(t,e,i){for(var o=this.childModels,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.modelFlags&f.RemovingFlag)?n+=1:(r.setModelFlags(r.modelFlags&~f.RemovingFlag),this.removeChildModel(r))}},e}(ct),vt=function(t){function e(){var e=t.call(this)||this;return e.selected=!1,e}return w(e,t),e.prototype.isSelected=function(){return this.selected},e.prototype.select=function(t){if(!this.selected&&(this.selected=!0,this.isMounted())){var e=this.selectionService.manager;null!=e&&e.select(this.model,t)}},e.prototype.willSelect=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitWillSelect&&n.traitWillSelect(t,this)}},e.prototype.onSelect=function(t){this.selected=!0},e.prototype.didSelect=function(t){for(var e=this.traitObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.traitDidSelect&&n.traitDidSelect(t,this)}},e.prototype.unselect=function(){if(this.selected&&(this.selected=!1,this.isMounted())){var t=this.selectionService.manager;null!=t&&t.unselect(this.model)}},e.prototype.willUnselect=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitWillUnselect&&o.traitWillUnselect(this)}},e.prototype.onUnselect=function(){this.selected=!1},e.prototype.didUnselect=function(){for(var t=this.traitObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.traitDidUnselect&&o.traitDidUnselect(this)}},e.prototype.unselectAll=function(){var t=this.selectionService.manager;null!=t&&t.unselectAll()},e.prototype.toggle=function(t){this.selected?this.unselect():this.select(t)},e.prototype.didMount=function(){if(this.selected){var e=this.selectionService.manager;null!=e&&e.select(this.model)}t.prototype.didMount.call(this)},e.prototype.willUnmount=function(){t.prototype.willUnmount.call(this);var e=this.selectionService.manager;null!=e&&e.unselect(this.model)},m([x({type:b,observe:!1,manager:null,modelService:{extends:D,type:b,observe:!1,manager:null}})],e.prototype,"selectionService",void 0),e}(ht),yt={fromAny:function(t){return"string"!=typeof t||"large"!==t&&"larger"!==t&&"medium"!==t&&"small"!==t&&"smaller"!==t&&"x-large"!==t&&"x-small"!==t&&"xx-large"!==t&&"xx-small"!==t?r.Length.fromAny(t):t},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return yt.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},gt={fromAny:function(t){return"string"==typeof t&&"normal"===t?t:r.Length.fromAny(t)},fromValue:function(t){var e=t.stringValue(null);if(null!==e)return gt.fromAny(e);var i=r.Length.form().cast(t);return void 0!==i?i:null}},wt={fromValue:function(t){var e=null;return t.forEach((function(t){if(t instanceof o.Value){var i=t.stringValue(void 0);void 0!==i&&(null===e?e=i:"string"==typeof e?e=[e,i]:e.push(i))}})),e},format:function(t){var e,i=t.length;if(i>0){e=s.Unicode.isAlpha(t.charCodeAt(0));for(var o=t.offsetByCodePoints(0,1);e&&o<i;o=t.offsetByCodePoints(o,1)){var n=t.charCodeAt(o);e=s.Unicode.isAlpha(n)||45===n}}else e=!1;if(e)return t;var r=s.Unicode.stringOutput();r=r.write(34);for(o=0;o<i;o=t.offsetByCodePoints(o,1)){if(10===(n=t.charCodeAt(o))||34===n||39===n)r=r.write(92).write(n);else if(n>=32)r=r.write(n);else{var l=s.Base16.uppercase;r=r.write(92).write(l.encodeDigit(n>>>20&15)).write(l.encodeDigit(n>>>16&15)).write(l.encodeDigit(n>>>12&15)).write(l.encodeDigit(n>>>8&15)).write(l.encodeDigit(n>>>4&15)).write(l.encodeDigit(15&n))}}return(r=r.write(34)).toString()}},mt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.output=e,r.quote=i,r.code=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.output,this.quote,this.code,this.step)},e.parse=function(t,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1);var l=0;if(1===r){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont())if(s.Unicode.isAlpha(l)||45===l)i=i||s.Unicode.stringOutput(),r=2;else{if(34!==l&&(39!==l||o!==l&&0!==o))return s.Parser.error(s.Diagnostic.expected("font family",t));t=t.step(),i=i||s.Unicode.stringOutput(),o=l,r=3}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected("font family",t))}if(2===r){for(;t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l)||45===l);)t=t.step(),i.write(l);if(!t.isEmpty())return s.Parser.done(i.bind())}t:for(;;){if(3===r){for(;t.isCont()&&(l=t.head())>=32&&l!==o&&92!==l;)t=t.step(),i.write(l);if(t.isCont()){if(l===o)return t=t.step(),s.Parser.done(i.bind());if(92!==l)return s.Parser.error(s.Diagnostic.expected(o,t));t=t.step(),r=4}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected(o,t))}if(4===r)if(t.isCont()){if(l=t.head(),!s.Base16.isDigit(l)){if(10===l){t.step(),r=3;continue}t.step(),i.write(l),r=3;continue}r=5}else if(t.isDone())return s.Parser.error(s.Diagnostic.expected("escape character",t));if(r>=5)for(;;){if(t.isCont()&&(l=t.head(),s.Base16.isDigit(l))){if(t=t.step(),n=16*n+s.Base16.decodeDigit(l),r<=11){r+=1;continue}if(0===n)return s.Parser.error(s.Diagnostic.message("zero escape",t));i.write(n),n=0,r=3;continue t}if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));break}break}return new e(i,o,n,r)},e}(s.Parser),St=function(){function t(t,e,i,o,n,r,s){this.style=t,this.variant=e,this.weight=i,this.stretch=o,this.size=n,this.height=r,this.family=s,this.stringValue=void 0}return t.prototype.withStyle=function(e){return e===this.style?this:new t(e,this.variant,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withVariant=function(e){return e===this.variant?this:new t(this.style,e,this.weight,this.stretch,this.size,this.height,this.family)},t.prototype.withWeight=function(e){return e===this.weight?this:new t(this.style,this.variant,e,this.stretch,this.size,this.height,this.family)},t.prototype.withStretch=function(e){return e===this.stretch?this:new t(this.style,this.variant,this.weight,e,this.size,this.height,this.family)},t.prototype.withSize=function(i){return null!==i&&(i=yt.fromAny(i)),e.Values.equal(i,this.size)?this:new t(this.style,this.variant,this.weight,this.stretch,i,this.height,this.family)},t.prototype.withHeight=function(i){return null!==i&&(i=gt.fromAny(i)),e.Values.equal(i,this.height)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,i,this.family)},t.prototype.withFamily=function(i){return Array.isArray(i)&&1===i.length&&(i=i[0]),e.Values.equal(i,this.family)?this:new t(this.style,this.variant,this.weight,this.stretch,this.size,this.height,i)},t.prototype.toAny=function(){return{style:this.style,variant:this.variant,weight:this.weight,stretch:this.stretch,size:this.size,height:this.height,family:Array.isArray(this.family)?this.family.slice(0):this.family}},t.prototype.interpolateTo=function(e){return e instanceof t?Ct(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equivalent(this.size,i.size,o)&&e.Values.equivalent(this.height,i.height,o)&&e.Values.equivalent(this.family,i.family,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.style===i.style&&this.variant===i.variant&&this.weight===i.weight&&this.stretch===i.stretch&&e.Values.equal(this.size,i.size)&&e.Values.equal(this.height,i.height)&&e.Values.equal(this.family,i.family))},t.prototype.debug=function(t){if(t=t.write("Font").write(46).write("family").write(40),"string"==typeof this.family)t=t.debug(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){t=t.debug(this.family[0]);for(var e=1;e<this.family.length;e+=1)t=t.write(", ").debug(this.family[e])}return t=t.write(41),void 0!==this.style&&(t=t.write(46).write("style").write(40).debug(this.style).write(41)),void 0!==this.variant&&(t=t.write(46).write("variant").write(40).debug(this.variant).write(41)),void 0!==this.weight&&(t=t.write(46).write("weight").write(40).debug(this.weight).write(41)),void 0!==this.stretch&&(t=t.write(46).write("stretch").write(40).debug(this.stretch).write(41)),void 0!==this.size&&(t=t.write(46).write("size").write(40).debug(this.size).write(41)),void 0!==this.height&&(t=t.write(46).write("height").write(40).debug(this.height).write(41)),t},t.prototype.toString=function(){var t,e,i,o=this.stringValue;if(void 0===o){if(o="",void 0===this.style&&"normal"!==this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(o+=null!==(t=this.style)&&void 0!==t?t:"normal"),void 0===this.variant&&"normal"!==this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(e=this.variant)&&void 0!==e?e:"normal"),void 0===this.weight&&"normal"!==this.stretch||(0!==o.length&&(o+=" "),o+=null!==(i=this.weight)&&void 0!==i?i:"normal"),void 0!==this.stretch&&(0!==o.length&&(o+=" "),o+=this.stretch),null!==this.size&&(0!==o.length&&(o+=" "),o+=this.size.toString(),null!==this.height&&(o+="/",o+=this.height.toString())),"string"==typeof this.family)0!==o.length&&(o+=" "),o+=wt.format(this.family);else if(Array.isArray(this.family)&&0!==this.family.length){0!==o.length&&(o+=" "),o+=wt.format(this.family[0]);for(var n=1;n<this.family.length;n+=1)o+=", ",o+=wt.format(this.family[n])}this.stringValue=o}return o},t.style=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(e,void 0,void 0,void 0,null,null,i)},t.variant=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,e,void 0,void 0,null,null,i)},t.weight=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,e,void 0,null,null,i)},t.stretch=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,e,null,null,i)},t.size=function(e,i){return e=null!==e?yt.fromAny(e):null,Array.isArray(i)&&1===i.length&&(i=i[0]),new t(void 0,void 0,void 0,void 0,e,null,i)},t.family=function(e){return Array.isArray(e)&&1===e.length&&(e=e[0]),new t(void 0,void 0,void 0,void 0,null,null,e)},t.create=function(e,i,o,n,r,s,l){return r=null!=r?yt.fromAny(r):null,s=null!=s?gt.fromAny(s):null,Array.isArray(l)&&1===l.length&&(l=l[0]),new t(e,i,o,n,r,s,l)},t.fromInit=function(e){return t.create(e.style,e.variant,e.weight,e.stretch,e.size,e.height,e.family)},t.fromValue=function(e){var i=e.header("font");if(i.isDefined()){var o=i.get("style").stringValue(void 0),n=i.get("variant").stringValue(void 0),r=i.get("weight").stringValue(void 0),s=i.get("stretch").stringValue(void 0),l=yt.fromValue(i.get("size")),a=gt.fromValue(i.get("height")),h=wt.fromValue(i.get("family"));if(null!==h)return t.create(o,n,r,s,l,a,h)}return null},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Vt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.family},t.isAny=function(e){return e instanceof t||t.isInit(e)},t.form=function(t){return new bt(void 0)},m([e.Lazy],t,"form",null),t}();function Ct(t,e){var i=function(t){var e=i.styleInterpolator(t),o=i.variantInterpolator(t),n=i.weightInterpolator(t),r=i.stretchInterpolator(t),s=i.sizeInterpolator(t),l=i.heightInterpolator(t),a=i.familyInterpolator(t);return new St(e,o,n,r,s,l,a)};return Object.setPrototypeOf(i,Ct.prototype),i.styleInterpolator=l.Interpolator(t.style,e.style),i.variantInterpolator=l.Interpolator(t.variant,e.variant),i.weightInterpolator=l.Interpolator(t.weight,e.weight),i.stretchInterpolator=l.Interpolator(t.stretch,e.stretch),i.sizeInterpolator=l.Interpolator(t.size,e.size),i.heightInterpolator=l.Interpolator(t.height,e.height),i.familyInterpolator=l.Interpolator(t.family,e.family),i}w(Ct,l.Interpolator),Object.defineProperty(Ct.prototype,0,{get:function(){var t=this.styleInterpolator[0],e=this.variantInterpolator[0],i=this.weightInterpolator[0],o=this.stretchInterpolator[0],n=this.sizeInterpolator[0],r=this.heightInterpolator[0],s=this.familyInterpolator[0];return new St(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Object.defineProperty(Ct.prototype,1,{get:function(){var t=this.styleInterpolator[1],e=this.variantInterpolator[1],i=this.weightInterpolator[1],o=this.stretchInterpolator[1],n=this.sizeInterpolator[1],r=this.heightInterpolator[1],s=this.familyInterpolator[1];return new St(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Ct.prototype.equals=function(t){return this===t||t instanceof Ct&&(this.styleInterpolator.equals(t.styleInterpolator)&&this.variantInterpolator.equals(t.variantInterpolator)&&this.weightInterpolator.equals(t.weightInterpolator)&&this.stretchInterpolator.equals(t.stretchInterpolator)&&this.sizeInterpolator.equals(t.sizeInterpolator)&&this.heightInterpolator.equals(t.heightInterpolator)&&this.familyInterpolator.equals(t.familyInterpolator))};var bt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){t=St.fromAny(t);var e=o.Record.create(7);if(void 0!==t.style&&e.slot("style",t.style),void 0!==t.variant&&e.slot("variant",t.variant),void 0!==t.weight&&e.slot("weight",t.weight),void 0!==t.stretch&&e.slot("stretch",t.stretch),t.size instanceof r.Length?e.slot("size",r.Length.form().mold(t.size)):void 0!==t.size&&e.slot("size",t.size),t.height instanceof r.Length?e.slot("height",r.Length.form().mold(t.height)):void 0!==t.height&&e.slot("height",t.height),Array.isArray(t.family)){for(var i=o.Record.create(t.family.length),n=0;n<t.family.length;n+=1)i.push(t.family[n]);e.slot("family",i)}else e.slot("family",t.family);return o.Record.of(o.Attr.of("font",e))},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(null===(i=St.fromValue(e))){var o=e.stringValue();void 0!==o&&(i=St.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),Vt=function(t){function e(e,i,o,n,r,s,l,a,h,u,p){var d=t.call(this)||this;return d.style=e,d.variant=i,d.weight=o,d.stretch=n,d.size=r,d.height=s,d.family=l,d.identOutput=a,d.lengthParser=h,d.familyParser=u,d.step=p,d}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.style,this.variant,this.weight,this.stretch,this.size,this.height,this.family,this.identOutput,this.lengthParser,this.familyParser,this.step)},e.parse=function(t,i,o,n,l,a,h,u,p,d,c,f){void 0===f&&(f=1);for(var v=0;;){if(1===f){for(;t.isCont()&&(v=t.head(),s.Unicode.isSpace(v));)t.step();if(t.isCont())f=s.Unicode.isAlpha(v)?2:34===v||39===v?11:4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===f){for(p=p||s.Unicode.stringOutput();t.isCont()&&(v=t.head(),s.Unicode.isAlpha(v)||45===v);)t=t.step(),p.write(v);if(!t.isEmpty()){var y=p.bind();switch(p=void 0,y){case"italic":case"oblique":if(void 0!==i)return s.Parser.error(s.Diagnostic.message("reapeated font style: "+y,t));i=y,f=3;break;case"small-caps":if(void 0!==o)return s.Parser.error(s.Diagnostic.message("reapeated font variant: "+y,t));o=y,f=3;break;case"bold":case"bolder":case"lighter":if(void 0!==n)return s.Parser.error(s.Diagnostic.message("reapeated font weight: "+y,t));n=y,f=3;break;case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":if(void 0!==l)return s.Parser.error(s.Diagnostic.message("reapeated font stretch: "+y,t));l=y,f=3;break;case"normal":if(void 0===i)i=y;else if(void 0===o)o=y;else if(void 0===n)n=y;else{if(void 0!==l)return s.Parser.error(s.Diagnostic.message("reapeated font property: "+y,t));l=y}f=3;break;case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":a=y,f=5;break;default:u=y,f=12}}}if(3===f){if(t.isCont()){if(v=t.head(),s.Unicode.isSpace(v)){t.step(),f=1;continue}return s.Parser.error(s.Diagnostic.expected("font property, size, or family",t))}if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(4===f)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone()){var g=d.bind();if(""===g.units){var w=g.value;switch(w){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:if(void 0!==n)return s.Parser.error(s.Diagnostic.message("reapeated font weight: "+w,t));n=String(w);break;default:return s.Parser.error(s.Diagnostic.message("unknown font property: "+w,t))}f=3;continue}a=g,d=void 0,f=5}else if(d.isError())return d.asError();if(5===f)if(t.isCont())if(v=t.head(),s.Unicode.isSpace(v))t.step(),f=6;else{if(47!==v)return s.Parser.error(s.Diagnostic.expected("font family",t));t.step(),f=7}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(6===f){for(;t.isCont()&&(v=t.head(),s.Unicode.isSpace(v));)t.step();if(t.isCont())47===v?(t.step(),f=7):f=11;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(7===f){for(;t.isCont()&&(v=t.head(),s.Unicode.isSpace(v));)t.step();if(t.isCont())f=s.Unicode.isAlpha(v)?8:9;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===f){for(p=p||s.Unicode.stringOutput();t.isCont()&&(v=t.head(),s.Unicode.isAlpha(v));)t=t.step(),p.write(v);if(!t.isEmpty()){y=p.bind();if(p=void 0,"normal"!==y)return s.Parser.error(s.Diagnostic.message("unknown line height: "+y,t));h=y,f=10}}if(9===f)if((d=void 0===d?r.LengthParser.parse(t):d.feed(t)).isDone())h=d.bind(),d=void 0,f=10;else if(d.isError())return d.asError();if(10===f)if(t.isCont()){if(v=t.head(),!s.Unicode.isSpace(v))return s.Parser.error(s.Diagnostic.expected("font family",t));t.step(),f=11}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(11===f)if((c=void 0===c?mt.parse(t):c.feed(t)).isDone())Array.isArray(u)?u.push(c.bind()):u=void 0!==u?[u,c.bind()]:c.bind(),c=void 0,f=12;else if(c.isError())return c.asError();if(12===f){for(;t.isCont()&&(v=t.head(),s.Unicode.isSpace(v));)t.step();if(t.isCont()&&44===v){t.step(),f=11;continue}if(!t.isEmpty())return s.Parser.done(St.create(i,o,n,l,a,h,u))}break}return new e(i,o,n,l,a,h,u,p,d,c,f)},e.parseRest=function(t,i,o,n,r,s,l,a){var h=void 0!==a?12:void 0!==s?5:3;return e.parse(t,i,o,n,r,s,l,a,void 0,void 0,void 0,h)},e}(s.Parser),Tt=function(){function t(){}return t.prototype.contrast=function(t){return this.lightness<.67?this.lighter(t):this.darker(t)},t.prototype.interpolateTo=function(e){return e instanceof t?Lt(this.rgb(),e.rgb()):null},t.transparent=function(){return xt.transparent()},t.black=function(t){return xt.black(t)},t.white=function(t){return xt.white(t)},t.rgb=function(t,e,i,o){return new xt(t,e,i,o)},t.hsl=function(t,e,i,o){return"number"!=typeof t&&(t=r.Angle.fromAny(t).degValue()),new Rt(t,e,i,o)},t.forName=function(e){switch(e){case"transparent":return t.transparent();case"black":return t.black();case"white":return t.white();default:return null}},t.fromInit=function(t){if(xt.isInit(t))return xt.fromInit(t);if(Rt.isInit(t))return Rt.fromInit(t);throw new TypeError(""+t)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(xt.isInit(e))return xt.fromInit(e);if(Rt.isInit(e))return Rt.fromInit(e);throw new TypeError(""+e)},t.fromValue=function(t){var e;return void 0===(e=xt.fromValue(t))&&(e=Rt.fromValue(t)),e},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Pt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return xt.isInit(t)||Rt.isInit(t)},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t.form=function(){return new Ft(t.transparent())},t.Darker=.7,t.Brighter=1/t.Darker,m([e.Lazy],t,"form",null),t}(),Ft=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){return t=Tt.fromAny(t),o.Text.from(t.toString())},e.prototype.cast=function(t){var e=t.toValue(),i=null;try{if(void 0===(i=Tt.fromValue(e))){var o=e.stringValue(void 0);void 0!==o&&(i=Tt.parse(o))}}catch(t){}return null!==i?i:void 0},e}(o.Form),Pt=function(t){function e(e,i){var o=t.call(this)||this;return o.identOutput=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.step)},e.parse=function(t,i,o){void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()){if(35===t.head())return At.parse(t);o=2}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(2===o){for(i=i||s.Unicode.stringOutput();t.isCont()&&(n=t.head(),s.Unicode.isAlpha(n));)t=t.step(),i.write(n);if(!t.isEmpty()){var r=i.bind();switch(r){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return kt.parseRest(t);default:var l=Tt.forName(r);return null!==l?s.Parser.done(l):s.Parser.error(s.Diagnostic.message("unknown color: "+r,t))}}}return new e(i,o)},e}(s.Parser),Mt=function(){function t(t,e){this.value=t,this.units=void 0!==e?e:""}return t.prototype.scale=function(t){return"%"===this.units?this.value*t/100:this.value},t}(),Dt=function(t){function e(e,i){var o=t.call(this)||this;return o.valueParser=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.valueParser,this.step)},e.parse=function(t,i,o){if(void 0===o&&(o=1),1===o)if((i=void 0===i?s.Base10.parseNumber(t):i.feed(t)).isDone())o=2;else if(i.isError())return i.asError();if(2===o){if(t.isCont()&&37===t.head())return t=t.step(),s.Parser.done(new Mt(i.bind(),"%"));if(!t.isEmpty())return s.Parser.done(new Mt(i.bind()))}return new e(i,o)},e}(s.Parser),xt=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return r.r=e,r.g=i,r.b=o,r.a=n,r.stringValue=void 0,r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.r)&&isFinite(this.g)&&isFinite(this.b)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.r,this.g,this.b,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i);return(Math.max(t,e,i)+o)/2},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=Tt.fromAny(t).rgb(),new i(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},i.prototype.times=function(t){return new i(this.r*t,this.g*t,this.b*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=Tt.fromAny(t).rgb(),new i(this.r+t.r*e,this.g+t.g*e,this.b+t.b*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?Tt.Brighter:Math.pow(Tt.Brighter,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?Tt.Darker:Math.pow(Tt.Darker,t))?new i(this.r*t,this.g*t,this.b*t,this.a):this},i.prototype.rgb=function(){return this},i.prototype.hsl=function(){var t=this.r/255,e=this.g/255,i=this.b/255,o=Math.min(t,e,i),n=Math.max(t,e,i),r=NaN,s=n-o,l=(n+o)/2;return 0!==s?(r=t===n?(e-i)/s+6*+(e<i):e===n?(i-t)/s+2:(t-e)/s+4,s/=l<.5?n+o:2-(n+o),r*=60):s=l>0&&l<1?0:r,new Rt(r,s,l,this.a)},i.prototype.interpolateTo=function(e){return e instanceof i?Lt(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof Tt&&(t=t.rgb(),e.Numbers.equivalent(this.r,t.r,i)&&e.Numbers.equivalent(this.g,t.g,i)&&e.Numbers.equivalent(this.b,t.b,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.r)),e.Numbers.hash(this.g)),e.Numbers.hash(this.b)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){return t=t.write("Color").write(46).write("rgb").write(40).debug(this.r).write(", ").debug(this.g).write(", ").debug(this.b),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){var t=Math.min(Math.max(0,Math.round(this.r||0)),255),e=Math.min(Math.max(0,Math.round(this.g||0)),255),i=Math.min(Math.max(0,Math.round(this.b||0)),255),o="#",n=s.Base16.lowercase.alphabet;return o+=n.charAt(t>>>4&15),o+=n.charAt(15&t),o+=n.charAt(e>>>4&15),o+=n.charAt(15&e),o+=n.charAt(i>>>4&15),o+=n.charAt(15&i)},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?t=this.toHexString():(t=1===e?"rgb":"rgba",t+="(",t+=Math.max(0,Math.min(Math.round(this.r)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.g)||0,255)),t+=",",t+=Math.max(0,Math.min(Math.round(this.b)||0,255)),1!==e&&(t+=",",t+=e),t+=")"),this.stringValue=t}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(255,255,255,t)},i.fromInit=function(t){return new i(t.r,t.g,t.b,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,r,s,l,a=t.tag;return"rgb"===a||"rgba"===a?(t=t.header(a),e=!0):e=!1,t.forEach((function(t,i){var a=t.key.stringValue();void 0!==a?"r"===a?n=t.toValue().numberValue(n):"g"===a?r=t.toValue().numberValue(r):"b"===a?s=t.toValue().numberValue(s):"a"===a&&(l=t.toValue().numberValue(l)):t instanceof o.Value&&e&&(0===i?n=t.numberValue(n):1===i?r=t.numberValue(r):2===i?s=t.numberValue(s):3===i&&(l=t.numberValue(l)))})),void 0!==n&&void 0!==r&&void 0!==s?new i(n,r,s,l):null},i.parse=function(t){return Tt.parse(t).rgb()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(Tt),Lt=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.r+t*(o.r-e.r),r=e.g+t*(o.g-e.g),s=e.b+t*(o.b-e.b),l=e.a+t*(o.a-e.a);return new xt(n,r,s,l)};return Object.setPrototypeOf(i,Lt.prototype),i[0]=t,i[1]=e,i};Lt.prototype=Object.create(l.Interpolator.prototype);var At=function(t){function e(e,i){var o=t.call(this)||this;return o.value=e,o.step=i,o}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.value,this.step)},e.parse=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var n=0;if(1===o)if(t.isCont()&&35===t.head())t=t.step(),o=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("#",t));if(o>=2){for(;o<=9&&t.isCont()&&(n=t.head(),s.Base16.isDigit(n));)t=t.step(),i=i<<4|s.Base16.decodeDigit(n),o+=1;if(!t.isEmpty())return 5===o?s.Parser.done(new xt(i>>8&15|i>>4&240,i>>4&15|240&i,i<<4&240|15&i)):6===o?s.Parser.done(new xt(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,(i<<4&240|15&i)/255)):8===o?s.Parser.done(new xt(i>>16&255,i>>8&255,255&i)):10===o?s.Parser.done(new xt(i>>24&255,i>>16&255,i>>8&255,(255&i)/255)):s.Parser.error(s.Diagnostic.unexpected(t))}return new e(i,o)},e}(s.Parser),Ot=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.rParser=e,s.gParser=i,s.bParser=o,s.aParser=n,s.step=r,s}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.rParser,this.gParser,this.bParser,this.aParser,this.step)},e.parse=function(t,i,o,n,r,l){var a=0;if(1===l)if(t.isCont()&&114===t.head())t=t.step(),l=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("r",t));if(2===l)if(t.isCont()&&103===t.head())t=t.step(),l=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("g",t));if(3===l)if(t.isCont()&&98===t.head())t=t.step(),l=4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("b",t));if(4===l&&(t.isCont()&&97===t.head()?(t=t.step(),l=5):t.isEmpty()||(l=5)),5===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t=t.step(),l=6;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(6===l){if(void 0===i){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=Dt.parse(t))}else i=i.feed(t);if(void 0!==i)if(i.isDone())l=7;else if(i.isError())return i.asError()}if(7===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont())44===a&&(t=t.step()),l=8;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===l){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Dt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())l=9;else if(o.isError())return o.asError()}if(9===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont())44===a&&(t=t.step()),l=10;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(10===l){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(n=Dt.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())l=11;else if(n.isError())return n.asError()}if(11===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()){if(41===a)return t=t.step(),s.Parser.done(new xt(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255)));44!==a&&47!==a||(t=t.step()),l=12}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(12===l){if(void 0===r){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(r=Dt.parse(t))}else r=r.feed(t);if(void 0!==r)if(r.isDone())l=13;else if(r.isError())return r.asError()}if(13===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&41===a)return t=t.step(),s.Parser.done(new xt(i.bind().scale(255),o.bind().scale(255),n.bind().scale(255),r.bind().scale(1)));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,r,l)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(s.Parser),Rt=function(t){function i(e,i,o,n){void 0===n&&(n=1);var r=t.call(this)||this;return r.h=e,r.s=i,r.l=o,r.a=n,r.stringValue=void 0,r}return w(i,t),i.prototype.isDefined=function(){return isFinite(this.h)&&isFinite(this.s)&&isFinite(this.l)&&isFinite(this.a)},i.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new i(this.h,this.s,this.l,t):this},Object.defineProperty(i.prototype,"lightness",{get:function(){return this.l},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return t=Tt.fromAny(t).hsl(),new i(this.h+t.h,this.s+t.s,this.l+t.l,this.a+t.a)},i.prototype.times=function(t){return new i(this.h*t,this.s*t,this.l*t,this.a*t)},i.prototype.combine=function(t,e){return void 0===e&&(e=1),t=Tt.fromAny(t).hsl(),new i(this.h+t.h*e,this.s+t.s*e,this.l+t.l*e,this.a+t.a*e)},i.prototype.lighter=function(t){return 1!==(t=void 0===t?Tt.Brighter:Math.pow(Tt.Brighter,t))?new i(this.h,this.s,this.l*t,this.a):this},i.prototype.darker=function(t){return 1!==(t=void 0===t?Tt.Darker:Math.pow(Tt.Darker,t))?new i(this.h,this.s,this.l*t,this.a):this},i.toRgb=function(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)},i.prototype.rgb=function(){var t=this.h%360+360*+(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,n=o+(o<.5?o:1-o)*e,r=2*o-n;return new xt(i.toRgb(t>=240?t-240:t+120,r,n),i.toRgb(t,r,n),i.toRgb(t<120?t+240:t-120,r,n),this.a)},i.prototype.hsl=function(){return this},i.prototype.interpolateTo=function(e){return e instanceof i?It(this,e):t.prototype.interpolateTo.call(this,e)},i.prototype.equivalentTo=function(t,i){return this===t||t instanceof Tt&&(t=t.hsl(),e.Numbers.equivalent(this.h,t.h,i)&&e.Numbers.equivalent(this.s,t.s,i)&&e.Numbers.equivalent(this.l,t.l,i)&&e.Numbers.equivalent(this.a,t.a,i))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.h===t.h&&this.s===t.s&&this.l===t.l&&this.a===t.a)},i.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(i),e.Numbers.hash(this.h)),e.Numbers.hash(this.s)),e.Numbers.hash(this.l)),e.Numbers.hash(this.a)))},i.prototype.debug=function(t){return t=t.write("Color").write(46).write("hsl").write(40).debug(this.h).write(", ").debug(this.s).write(", ").debug(this.l),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},i.prototype.toHexString=function(){return this.rgb().toHexString()},i.prototype.toString=function(){var t=this.stringValue;if(void 0===t){var e=this.a;t=1===(e=isNaN(e)?1:Math.max(0,Math.min(this.a,1)))?"hsl":"hsla",t+="(",t+=Math.max(0,Math.min(Math.round(this.h)||0,360)),t+=",",t+=Math.max(0,Math.min(100*Math.round(this.s)||0,100))+"%",t+=",",t+=Math.max(0,Math.min(100*Math.round(this.l)||0,100))+"%",1!==e&&(t+=",",t+=e),t+=")",this.stringValue=t}return t},i.transparent=function(){return new i(0,0,0,0)},i.black=function(t){return void 0===t&&(t=1),new i(0,0,0,t)},i.white=function(t){return void 0===t&&(t=1),new i(0,1,1,t)},i.fromInit=function(t){return new i("number"==typeof t.h?t.h:r.Angle.fromAny(t.h).degValue(),t.s,t.l,t.a)},i.fromAny=function(t){if(null==t||t instanceof i)return t;if("string"==typeof t)return i.parse(t);if(i.isInit(t))return i.fromInit(t);throw new TypeError(""+t)},i.fromValue=function(t){var e,n,s,l,a,h=t.tag;return"hsl"===h||"hsla"===h?(t=t.header(h),e=!0):e=!1,t.forEach((function(t,i){var h=t.key.stringValue();void 0!==h?"h"===h?n=t.toValue().cast(r.Angle.form(),n):"s"===h?s=t.toValue().numberValue(s):"l"===h?l=t.toValue().numberValue(l):"a"===h&&(a=t.toValue().numberValue(a)):t instanceof o.Value&&e&&(0===i?n=t.cast(r.Angle.form(),n):1===i?s=t.numberValue(s):2===i?l=t.numberValue(l):3===i&&(a=t.numberValue(a)))})),void 0!==n&&void 0!==s&&void 0!==l?new i(n.degValue(),s,l,a):null},i.parse=function(t){return Tt.parse(t).hsl()},i.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return r.Angle.isAny(e.h)&&"number"==typeof e.s&&"number"==typeof e.l&&("number"==typeof e.a||void 0===e.a)}return!1},i.isAny=function(t){return t instanceof i||i.isInit(t)||"string"==typeof t},m([e.Lazy],i,"transparent",null),i}(Tt),It=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.h+t*(o.h-e.h),r=e.s+t*(o.s-e.s),s=e.l+t*(o.l-e.l),l=e.a+t*(o.a-e.a);return new Rt(n,r,s,l)};return Object.setPrototypeOf(i,It.prototype),i[0]=t,i[1]=e,i};It.prototype=Object.create(l.Interpolator.prototype);var kt=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.hParser=e,s.sParser=i,s.lParser=o,s.aParser=n,s.step=r,s}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.hParser,this.sParser,this.lParser,this.aParser,this.step)},e.parse=function(t,i,o,n,l,a){var h=0;if(1===a)if(t.isCont()&&104===t.head())t=t.step(),a=2;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("h",t));if(2===a)if(t.isCont()&&115===t.head())t=t.step(),a=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("s",t));if(3===a)if(t.isCont()&&108===t.head())t=t.step(),a=4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("l",t));if(4===a&&(t.isCont()&&97===t.head()?(t=t.step(),a=5):t.isEmpty()||(a=5)),5===a){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t=t.step();if(t.isCont()&&40===h)t=t.step(),a=6;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(6===a){if(void 0===i){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(i=r.AngleParser.parse(t,"deg"))}else i=i.feed(t);if(void 0!==i)if(i.isDone())a=7;else if(i.isError())return i.asError()}if(7===a){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t=t.step();if(t.isCont())44===h&&(t=t.step()),a=8;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(8===a){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=Dt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone()){if("%"!==o.bind().units)return s.Parser.error(s.Diagnostic.expected("%",t));a=9}else if(o.isError())return o.asError()}if(9===a){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t=t.step();if(t.isCont())44===h&&(t=t.step()),a=10;else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(10===a){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isCont()&&(n=Dt.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone()){if("%"!==n.bind().units)return s.Parser.error(s.Diagnostic.expected("%",t));a=11}else if(n.isError())return n.asError()}if(11===a){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t=t.step();if(t.isCont()){if(41===h)return t=t.step(),s.Parser.done(new Rt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1)));44!==h&&47!==h||(t=t.step()),a=12}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(12===a){if(void 0===l){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(l=Dt.parse(t))}else l=l.feed(t);if(void 0!==l)if(l.isDone())a=13;else if(l.isError())return l.asError()}if(13===a){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t=t.step();if(t.isCont()&&41===h)return t=t.step(),s.Parser.done(new Rt(i.bind().degValue(),o.bind().scale(1),n.bind().scale(1),l.bind().scale(1)));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,l,a)},e.parseRest=function(t){return e.parse(t,void 0,void 0,void 0,void 0,5)},e}(s.Parser),Wt=function(){function t(t,e,i){this.color=t,this.stop=e,this.hint=i}return t.prototype.withColor=function(e){return new t(e=Tt.fromAny(e),this.stop,this.hint)},t.prototype.withStop=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,e,this.hint)},t.prototype.withHint=function(e){return null!==e&&(e=r.Length.fromAny(e,"%")),new t(this.color,this.stop,e)},t.prototype.interpolateTo=function(e){return e instanceof t?Et(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Equivalent(this.color,i.color,o)&&e.Equivalent(this.stop,i.stop,o)&&e.Equivalent(this.hint,i.hint,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.color.equals(i.color)&&e.Equals(this.stop,i.stop)&&e.Equals(this.hint,i.hint))},t.prototype.toString=function(){var t="";return null!==this.hint&&(t+=this.hint.toString(),t+=", "),t+=this.color.toString(),null!==this.stop&&(t+=" ",t+=this.stop.toString()),t},t.create=function(e,i,o){return void 0===i&&(i=null),void 0===o&&(o=null),e=Tt.fromAny(e),null!==i&&(i=r.Length.fromAny(i,"%")),null!==o&&(o=r.Length.fromAny(o,"%")),new t(e,i,o)},t.fromInit=function(e){return new t(Tt.fromAny(e.color),void 0!==e.stop?r.Length.fromAny(e.stop,"%"):null,void 0!==e.hint?r.Length.fromAny(e.hint,"%"):null)},t.fromTuple=function(e){return new t(Tt.fromAny(e[0]),null!==e[1]?r.Length.fromAny(e[1],"%"):null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(t.isInit(e))return t.fromInit(e);if(t.isTuple(e))return t.fromTuple(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Nt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseHint=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Nt.parseHint(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseList=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Ut.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.color},t.isTuple=function(t){return Array.isArray(t)&&2===t.length&&Tt.isAny(t[0])&&(null===t[1]||r.Length.isAny(t[1]))},t.isAny=function(e){return e instanceof t||t.isInit(e)||t.isTuple(e)||"string"==typeof e},t}(),Et=function(t,e){var i=function(t){var e=i.colorInterpolator(t),o=i.stopInterpolator(t),n=i.hintInterpolator(t);return new Wt(e,o,n)};return Object.setPrototypeOf(i,Et.prototype),i.colorInterpolator=t.color.interpolateTo(e.color),i.stopInterpolator=l.Interpolator(t.stop,e.stop),i.hintInterpolator=l.Interpolator(t.hint,e.hint),i};Et.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(Et.prototype,0,{get:function(){var t=this.colorInterpolator[0],e=this.stopInterpolator[0],i=this.hintInterpolator[0];return new Wt(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(Et.prototype,1,{get:function(){var t=this.colorInterpolator[1],e=this.stopInterpolator[1],i=this.hintInterpolator[1];return new Wt(t,e,i)},enumerable:!0,configurable:!0}),Et.prototype.equals=function(t){return this===t||t instanceof Et&&(this.colorInterpolator.equals(t.colorInterpolator)&&this.stopInterpolator.equals(t.stopInterpolator)&&this.hintInterpolator.equals(t.hintInterpolator))};var Nt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.colorParser=e,r.stopParser=i,r.hintParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.colorParser,this.stopParser,this.hintParser,this.step)},e.parse=function(t,i,o,n,l){void 0===l&&(l=4);var a=0;if(1===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t.step();if(t.isCont())l=45===a||46===a||a>=48&&a<=57?2:7;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===l&&void 0!==(n=void 0===n?r.LengthParser.parse(t):n.feed(t)))if(n.isDone())l=3;else if(n.isError())return n.asError();if(3===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t.step();if(t.isCont())44===a?(t.step(),l=4):(o=n,n=void 0,l=7);else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t))}if(4===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t.step();if(t.isCont())l=45===a||46===a||a>=48&&a<=57?5:7;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(5===l&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t)))if(o.isDone())l=6;else if(o.isError())return o.asError();if(6===l)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("color",t));t.step(),l=7}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(7===l&&void 0!==(i=void 0===i?Pt.parse(t):i.feed(t)))if(i.isDone()){if(void 0!==o){var h=void 0!==n?n.bind():null;return s.Parser.done(new Wt(i.bind(),o.bind(),h))}l=8}else if(i.isError())return i.asError();if(8===l)if(t.isCont()&&s.Unicode.isSpace(t.head()))t.step(),l=9;else if(!t.isEmpty()){h=void 0!==n?n.bind():null;return s.Parser.done(new Wt(i.bind(),null,h))}if(9===l&&void 0!==(o=void 0===o?r.LengthParser.parse(t):o.feed(t))){if(o.isDone()){h=void 0!==n?n.bind():null;return s.Parser.done(new Wt(i.bind(),o.bind(),h))}if(o.isError())return o.asError()}return new e(i,o,n,l)},e.parseHint=function(t){return e.parse(t,void 0,void 0,void 0,1)},e}(s.Parser),Ut=function(t){function e(e,i,o){var n=t.call(this)||this;return n.stops=e,n.stopParser=i,n.step=o,n}return w(e,t),e.prototype.feed=function(t){return e.parse(t,void 0!==this.stops?this.stops.slice(0):void 0,this.stopParser,this.step)},e.parse=function(t,i,o,n){void 0===n&&(n=1);var r=0;if(1===n){if(void 0===o){for(;t.isCont()&&(r=t.head(),s.Unicode.isSpace(r));)t.step();t.isEmpty()||(o=Nt.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())void 0===i&&(i=[]),i.push(o.bind()),o=void 0,n=2;else if(o.isError())return o.asError()}for(;;){if(2===n){for(;t.isCont()&&(r=t.head(),s.Unicode.isSpace(r));)t=t.step();if(!t.isCont()||44!==r)return s.Parser.done(i);t=t.step(),n=3}if(3===n){if(void 0===o){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=Nt.parseHint(t))}else o=o.feed(t);if(void 0!==o){if(o.isDone()){i.push(o.bind()),o=void 0,n=2;continue}if(o.isError())return o.asError()}}break}return new e(i,o,n)},e}(s.Parser),Gt=function(){function t(t,e){this.angle=t,this.stops=e,this.stringValue=void 0}return t.prototype.withAngle=function(e){return(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg")),new t(e,this.stops)},t.prototype.withStops=function(e){for(var i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=Wt.fromAny(e[n]);return new t(this.angle,o)},t.prototype.interpolateTo=function(e){return e instanceof t?Bt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Values.equivalent(this.angle,i.angle,o)&&e.Arrays.equivalent(this.stops,i.stops,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Values.equal(this.angle,i.angle)&&e.Arrays.equal(this.stops,i.stops))},t.prototype.toString=function(){var t=this.stringValue;if(void 0===t){if(t="linear-gradient(",this.angle instanceof r.Angle)t+=this.angle.toString();else if(t+="to","string"==typeof this.angle)t+=" ",t+=this.angle;else for(var e=0,i=this.angle.length;e<i;e+=1)t+=" ",t+=this.angle[e];for(e=0,i=this.stops.length;e<i;e+=1)t+=", ",t+=this.stops[e].toString();t+=")",this.stringValue=t}return t},t.create=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];(e instanceof r.Angle||"number"==typeof e)&&(e=r.Angle.fromAny(e,"deg"));for(var n=i.length,s=new Array(n),l=0;l<n;l+=1){var a=i[l];s[l]="string"==typeof a?0===l?Wt.parse(a):Wt.parseHint(a):Wt.fromAny(i[l])}return new t(e,s)},t.fromInit=function(e){var i=e.angle;(i instanceof r.Angle||"number"==typeof i)&&(i=r.Angle.fromAny(i,"deg"));for(var o=e.stops.length,n=new Array(o),s=0;s<o;s+=1)n[s]=Wt.fromAny(e.stops[s]);return new t(i,n)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Ht.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.parseAngle=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=jt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.angle&&void 0!==e.stops}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t}(),Bt=function(t,e){var i=function(t){for(var e=i.angleInterpolator(t),o=i.stopInterpolators,n=o.length,r=new Array(n),s=0;s<n;s+=1)r[s]=o[s](t);return new Gt(e,r)};Object.setPrototypeOf(i,Bt.prototype),i.angleInterpolator=l.Interpolator(t.angle,e.angle);for(var o=t.stops,n=e.stops,r=Math.min(o.length,n.length),s=new Array(r),a=0;a<r;a+=1)s[a]=o[a].interpolateTo(n[a]);return i.stopInterpolators=s,i};Bt.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(Bt.prototype,0,{get:function(){for(var t=this.angleInterpolator[0],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][0];return new Gt(t,o)},enumerable:!0,configurable:!0}),Object.defineProperty(Bt.prototype,1,{get:function(){for(var t=this.angleInterpolator[1],e=this.stopInterpolators,i=e.length,o=new Array(i),n=0;n<i;n+=1)o[n]=e[n][1];return new Gt(t,o)},enumerable:!0,configurable:!0}),Bt.prototype.equals=function(t){if(this===t)return!0;if(t instanceof Bt&&this.angleInterpolator.equals(t.angleInterpolator)){var e=this.stopInterpolators.length;if(e===t.stopInterpolators.length){for(var i=0;i<e;i+=1)if(!this.stopInterpolators[i].equals(t.stopInterpolators[i]))return!1;return!0}}return!1};var jt=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.side=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.side,this.step)},e.parse=function(t,i,o,n,l){void 0===l&&(l=1);var a=0;if(1===l){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t.step();if(t.isCont())l=45===a||46===a||a>=48&&a<=57?2:3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===l&&void 0!==(o=void 0===o?r.AngleParser.parse(t,"deg"):o.feed(t))){if(o.isDone())return o;if(o.isError())return o.asError()}if(3===l){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a));)t=t.step(),i.write(a);if(!t.isEmpty()){if("to"!==(h=i.bind()))return s.Parser.error(s.Diagnostic.message("unexpected "+h,t));i=void 0,l=4}}if(4===l)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("side or corner",t));t.step(),l=5}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(5===l){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a));)t=t.step(),i.write(a);if(!t.isEmpty()){var h=i.bind();switch(i=void 0,h){case"left":case"right":n=h,l=6;break;case"top":case"bottom":n=h,l=7;break;default:return s.Parser.error(s.Diagnostic.message("unknown side: "+h,t))}}}if(6===l){if(void 0===i){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&s.Unicode.isAlpha(a))i=s.Unicode.stringOutput();else if(!t.isEmpty())return s.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a));)t=t.step(),i.write(a);if(!t.isEmpty()){h=i.bind();switch(i=void 0,h){case"top":case"bottom":return s.Parser.done([n,h]);default:return s.Parser.error(s.Diagnostic.message("unknown side: "+h,t))}}}}if(7===l){if(void 0===i){for(;t.isCont()&&(a=t.head(),s.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&s.Unicode.isAlpha(a))i=s.Unicode.stringOutput();else if(!t.isEmpty())return s.Parser.done(n)}if(void 0!==i){for(;t.isCont()&&(a=t.head(),s.Unicode.isAlpha(a));)t=t.step(),i.write(a);if(!t.isEmpty()){h=i.bind();switch(i=void 0,h){case"left":case"right":return s.Parser.done([n,h]);default:return s.Parser.error(s.Diagnostic.message("unknown side: "+h,t))}}}}return new e(i,o,n,l)},e}(s.Parser),Ht=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.angleParser=i,r.stopsParser=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.angleParser,this.stopsParser,this.step)},e.parse=function(t,i,o,n,r){void 0===r&&(r=1);var l=0;if(1===r){for(void 0===i&&(i=s.Unicode.stringOutput());t.isCont()&&(l=t.head(),s.Unicode.isAlpha(l)||45===l);)t=t.step(),i.write(l);if(!t.isEmpty()){var a=i.bind();if("linear-gradient"!==a)return s.Parser.error(s.Diagnostic.message("unexpected "+a,t));i=void 0,r=2}}if(2===r){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(t.isCont()&&40===l)t.step(),r=3;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected("(",t))}if(3===r&&void 0!==(o=void 0===o?jt.parse(t):o.feed(t)))if(o.isDone())r=4;else if(o.isError())return o.asError();if(4===r){for(;t.isCont()&&(l=t.head(),s.Unicode.isSpace(l));)t=t.step();if(!t.isCont()||44!==l)return s.Parser.error(s.Diagnostic.expected("color stops",t));t=t.step(),r=5}if(5===r&&void 0!==(n=void 0===n?Ut.parse(t):n.feed(t)))if(n.isDone())r=6;else if(n.isError())return n.asError();if(6===r){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();if(t.isCont()&&41===t.head())return t.step(),s.Parser.done(new Gt(o.bind(),n.bind()));if(!t.isEmpty())return s.Parser.error(s.Diagnostic.expected(")",t))}return new e(i,o,n,r)},e.parseRest=function(t,i){return e.parse(t,i,void 0,void 0,2)},e}(s.Parser),qt=function(){function t(t,e,i,o,n,r,s){this.inset=t,this.offsetX=e,this.offsetY=i,this.blurRadius=o,this.spreadRadius=n,this.color=r,this.next=s,this.stringValue=void 0}return t.prototype.withInset=function(e){return e===this.inset?this:new t(e,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetX=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetX)?this:new t(this.inset,e,this.offsetY,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withOffsetY=function(e){return(e=r.Length.fromAny(e)).equals(this.offsetY)?this:new t(this.inset,this.offsetX,e,this.blurRadius,this.spreadRadius,this.color,this.next)},t.prototype.withBlurRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.blurRadius)?this:new t(this.inset,this.offsetX,this.offsetY,e,this.spreadRadius,this.color,this.next)},t.prototype.withSpreadRadius=function(e){return(e=r.Length.fromAny(e)).equals(this.spreadRadius)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,e,this.color,this.next)},t.prototype.withColor=function(e){return(e=Tt.fromAny(e)).equals(this.color)?this:new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,e,this.next)},t.prototype.and=function(e,i,o,n,r,s){var l;return l=null!==this.next?this.next.and.apply(this.next,arguments):t.create.apply(t,arguments),new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,l)},t.prototype.interpolateTo=function(e){return e instanceof t?zt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equivalentTo(i.offsetX,o)&&this.offsetY.equivalentTo(i.offsetY,o)&&this.blurRadius.equivalentTo(i.blurRadius,o)&&this.spreadRadius.equivalentTo(i.spreadRadius,o)&&this.color.equivalentTo(i.color,o)&&e.Equivalent(this.next,i.next,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.inset===i.inset&&this.offsetX.equals(i.offsetX)&&this.offsetY.equals(i.offsetY)&&this.blurRadius.equals(i.blurRadius)&&this.spreadRadius.equals(i.spreadRadius)&&this.color.equals(i.color)&&e.Equals(this.next,i.next))},t.prototype.toString=function(){var t=this.stringValue;return void 0===t&&(t="",this.inset&&(t+="inset",t+=" "),t+=this.offsetX.toString(),t+=" ",t+=this.offsetY.toString(),t+=" ",t+=this.blurRadius.toString(),t+=" ",t+=this.spreadRadius.toString(),t+=" ",t+=this.color.toString(),null!==this.next&&(t+=", ",t+=this.next.toString()),this.stringValue=t),t},t.create=function(e,i,o,n,s,l){if(1===arguments.length)return t.fromAny(e);if("boolean"!=typeof e){if(3===arguments.length)l=Tt.fromAny(o),s=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else if(4===arguments.length)l=Tt.fromAny(n),s=r.Length.zero(),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e);else{if(5!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+s+", "+l);l=Tt.fromAny(s),s=r.Length.fromAny(n),n=r.Length.fromAny(o),o=r.Length.fromAny(i),i=r.Length.fromAny(e)}e=!1}else if(4===arguments.length)l=Tt.fromAny(n),s=r.Length.zero(),n=r.Length.zero(),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else if(5===arguments.length)l=Tt.fromAny(s),s=r.Length.zero(),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i);else{if(6!==arguments.length)throw new Error(e+", "+i+", "+o+", "+n+", "+s+", "+l);l=Tt.fromAny(l),s=r.Length.fromAny(s),n=r.Length.fromAny(n),o=r.Length.fromAny(o),i=r.Length.fromAny(i)}return new t(e,i,o,n,s,l,null)},t.fromInit=function(e){return new t(e.inset||!1,void 0!==e.offsetX?r.Length.fromAny(e.offsetX):r.Length.zero(),void 0!==e.offsetY?r.Length.fromAny(e.offsetY):r.Length.zero(),void 0!==e.blurRadius?r.Length.fromAny(e.blurRadius):r.Length.zero(),void 0!==e.spreadRadius?r.Length.fromAny(e.spreadRadius):r.Length.zero(),void 0!==e.color?Tt.fromAny(e.color):Tt.black(),null)},t.fromArray=function(e){for(var i=t.fromAny(e[0]),o=1;o<e.length;o+=1)i=i.and(e[o]);return i},t.fromAny=function(){for(var e,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(0===arguments.length)return null;if(null==(e=1===arguments.length?i[0]:i)||e instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e&&void 0===e.length)return t.fromInit(e);if("object"==typeof e&&null!==e&&e.length>0)return t.fromArray(e);throw new TypeError(""+e)},t.fromValue=function(e){var i=null;return e.forEach((function(e,n){var s=e.header("boxShadow");if(s.isDefined()){var l,a,h,u,p,d;s.forEach((function(t,e){var i=t.key.stringValue();void 0!==i?"inset"===i?l=t.toValue().booleanValue(l):"offsetX"===i?a=t.toValue().cast(r.Length.form(),a):"offsetY"===i?h=t.toValue().cast(r.Length.form(),h):"blurRadius"===i?u=t.toValue().cast(r.Length.form(),u):"spreadRadius"===i?p=t.toValue().cast(r.Length.form(),p):"color"===i&&(d=t.toValue().cast(Tt.form(),d)):t instanceof o.Value&&(0===e&&t instanceof o.Text&&"inset"===t.value?l=!0:0===e||1===e&&void 0!==l?a=t.cast(r.Length.form(),a):1===e||2===e&&void 0!==l?h=t.cast(r.Length.form(),h):2===e||3===e&&void 0!==l?void 0===(u=t.cast(r.Length.form(),u))&&(d=t.cast(Tt.form(),d)):(3===e||4===e&&void 0===l)&&void 0===d?void 0===(p=t.cast(r.Length.form(),p))&&(d=t.cast(Tt.form(),d)):(4===e||5===e&&void 0===l)&&void 0===d&&(d=t.cast(Tt.form(),d)))})),l=void 0!==l&&l,a=void 0!==a?a:r.Length.zero(),h=void 0!==h?h:r.Length.zero(),u=void 0!==u?u:r.Length.zero(),p=void 0!==p?p:r.Length.zero(),d=void 0!==d?d:Tt.black();var c=new t(l||!1,a,h,u,p,d,null);i=null!==i?i.and(c):c}})),i},t.parse=function(t){for(var e=s.Unicode.stringInput(t);e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();var i=Xt.parse(e);if(i.isDone())for(;e.isCont()&&s.Unicode.isWhitespace(e.head());)e=e.step();return e.isCont()&&!i.isError()&&(i=s.Parser.error(s.Diagnostic.unexpected(e))),i.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==e.color}return!1},t.isArray=function(e){if(Array.isArray(e)){var i=e.length;if(0!==i){for(var o=0;o<i;o+=1)if(!t.isAny(e))return!1;return!0}}return!1},t.isAny=function(e){return e instanceof t||t.isArray(e)||t.isInit(e)||"string"==typeof e},t.form=function(){return new Yt(null)},m([e.Lazy],t,"form",null),t}();function zt(t,e){var i=function(t){var e=i.insetInterpolator(t),o=i.offsetXInterpolator(t),n=i.offsetYInterpolator(t),r=i.blurRadiusInterpolator(t),s=i.spreadRadiusInterpolator(t),l=i.colorInterpolator(t),a=i.nextInterpolator(t);return new qt(e,o,n,r,s,l,a)};return Object.setPrototypeOf(i,zt.prototype),i.insetInterpolator=l.Interpolator(t.inset,e.inset),i.offsetXInterpolator=t.offsetX.interpolateTo(e.offsetX),i.offsetYInterpolator=t.offsetY.interpolateTo(e.offsetY),i.blurRadiusInterpolator=t.blurRadius.interpolateTo(e.blurRadius),i.spreadRadiusInterpolator=t.spreadRadius.interpolateTo(e.spreadRadius),i.colorInterpolator=t.color.interpolateTo(e.color),i.nextInterpolator=l.Interpolator(t.next,e.next),i}w(zt,l.Interpolator),Object.defineProperty(zt.prototype,0,{get:function(){var t=this.insetInterpolator[0],e=this.offsetXInterpolator[0],i=this.offsetYInterpolator[0],o=this.blurRadiusInterpolator[0],n=this.spreadRadiusInterpolator[0],r=this.colorInterpolator[0],s=this.nextInterpolator[0];return new qt(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),Object.defineProperty(zt.prototype,1,{get:function(){var t=this.insetInterpolator[1],e=this.offsetXInterpolator[1],i=this.offsetYInterpolator[1],o=this.blurRadiusInterpolator[1],n=this.spreadRadiusInterpolator[1],r=this.colorInterpolator[1],s=this.nextInterpolator[1];return new qt(t,e,i,o,n,r,s)},enumerable:!0,configurable:!0}),zt.prototype.equals=function(t){return this===t||t instanceof zt&&(this.insetInterpolator.equals(t.insetInterpolator)&&this.offsetXInterpolator.equals(t.offsetXInterpolator)&&this.offsetYInterpolator.equals(t.offsetYInterpolator)&&this.blurRadiusInterpolator.equals(t.blurRadiusInterpolator)&&this.spreadRadiusInterpolator.equals(t.spreadRadiusInterpolator)&&this.colorInterpolator.equals(t.colorInterpolator)&&this.nextInterpolator.equals(t.nextInterpolator))};var Yt=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){for(var e=qt.fromAny(t),i=o.Record.create();;){var n=o.Record.create(5);if(e.inset&&n.push("inset"),n.push(r.Length.form().mold(e.offsetX)),n.push(r.Length.form().mold(e.offsetY)),n.push(r.Length.form().mold(e.blurRadius)),n.push(r.Length.form().mold(e.spreadRadius)),n.push(Tt.form().mold(e.color)),i.attr("boxShadow",n),null===e.next)break;e=e.next}return i},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=qt.fromValue(i))){var o=i.stringValue();void 0!==o&&(e=qt.parse(o))}}catch(t){}return e},e}(o.Form),Xt=function(t){function e(e,i,o,n,r,s,l,a){var h=t.call(this)||this;return h.boxShadow=e,h.identOutput=i,h.offsetXParser=o,h.offsetYParser=n,h.blurRadiusParser=r,h.spreadRadiusParser=s,h.colorParser=l,h.step=a,h}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.boxShadow,this.identOutput,this.offsetXParser,this.offsetYParser,this.blurRadiusParser,this.spreadRadiusParser,this.colorParser,this.step)},e.parse=function(t,i,o,n,l,a,h,u,p){void 0===p&&(p=1);for(var d=0;;){if(1===p){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();if(t.isCont())p=s.Unicode.isAlpha(d)?2:4;else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===p){for(o=o||s.Unicode.stringOutput();t.isCont()&&(d=t.head(),s.Unicode.isAlpha(d));)t=t.step(),o.write(d);if(!t.isEmpty()){var c=o.bind();switch(c){case"inset":p=3;break;case"none":return s.Parser.done(null);default:return s.Parser.error(s.Diagnostic.message("unknown box-shadow: "+c,t))}}}if(3===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=4}else if(t.isDone())return s.Parser.error(s.Diagnostic.unexpected(t));if(4===p){if(void 0===n){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=r.LengthParser.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())p=5;else if(n.isError())return n.asError()}if(5===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=6}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(6===p){if(void 0===l){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(l=r.LengthParser.parse(t))}else l=l.feed(t);if(void 0!==l)if(l.isDone())p=7;else if(l.isError())return l.asError()}if(7===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=8}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(8===p){if(void 0===a){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?a=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else a=a.feed(t);if(void 0!==a)if(a.isDone())p=9;else if(a.isError())return a.asError()}if(9===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=10}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(10===p){if(void 0===h){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();t.isCont()&&(45===d||d>=48&&d<=57)?h=r.LengthParser.parse(t):t.isEmpty()||(p=12)}else h=h.feed(t);if(void 0!==h)if(h.isDone())p=11;else if(h.isError())return h.asError()}if(11===p)if(t.isCont()){if(!s.Unicode.isSpace(t.head()))return s.Parser.error(s.Diagnostic.expected("space",t));t.step(),p=12}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t));if(12===p){if(void 0===u){for(;t.isCont()&&s.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(u=Pt.parse(t))}else u=u.feed(t);if(void 0!==u)if(u.isDone()){var f=void 0!==o&&"inset"===o.bind(),v=n.bind(),y=l.bind(),g=void 0!==a?a.bind():r.Length.zero(),w=void 0!==h?h.bind():r.Length.zero(),m=u.bind(),S=new qt(f,v,y,g,w,m,null);i=void 0===i?S:i.and(S),o=void 0,n=void 0,l=void 0,a=void 0,h=void 0,u=void 0,p=13}else if(u.isError())return u.asError()}if(13===p){for(;t.isCont()&&(d=t.head(),s.Unicode.isSpace(d));)t.step();if(t.isCont()&&44===d){t.step(),p=1;continue}if(!t.isEmpty())return s.Parser.done(i)}break}return new e(i,o,n,l,a,h,u,p)},e}(s.Parser),Kt=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.phase+t*(o.phase-e.phase),r=1!==t?e.direction:0;return Zt.create(n,r)};return Object.setPrototypeOf(i,Kt.prototype),i[0]=t,i[1]=e,i};Kt.prototype=Object.create(l.Interpolator.prototype);var Zt=function(){function t(t,e){this.phase=t,this.direction=e}return t.prototype.withPhase=function(e){return e!==this.phase?t.create(e,this.direction):this},t.prototype.withDirection=function(e){return e!==this.direction?t.create(this.phase,e):this},t.prototype.isUnfocused=function(){return 0===this.phase&&0===this.direction},t.prototype.isFocused=function(){return 1===this.phase&&0===this.direction},t.prototype.isFocusing=function(){return this.direction>0},t.prototype.isUnfocusing=function(){return this.direction<0},t.prototype.focusing=function(){return this.isFocusing()?this:t.focusing(this.phase)},t.prototype.unfocusing=function(){return this.isUnfocusing()?this:t.unfocusing(this.phase)},t.prototype.toggling=function(){return this.direction>0||this.phase>=.5?t.unfocusing(this.phase):this.direction<0||this.phase<.5?t.focusing(this.phase):this},t.prototype.toggled=function(){return this.direction>0||this.phase>=.5?t.unfocused():this.direction<0||this.phase<.5?t.focused():this},t.prototype.interpolateTo=function(e){return e instanceof t?Kt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Numbers.equivalent(this.phase,i.phase,o)&&e.Numbers.equivalent(this.direction,i.direction,o))},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.phase===e.phase&&this.direction===e.direction)},t.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(t),e.Numbers.hash(this.phase)),e.Numbers.hash(this.direction)))},t.prototype.debug=function(t){return t=t.write("Focus").write(46),0===this.phase&&0===this.direction?t=t.write("unfocused").write(40):1===this.phase&&0===this.direction?t=t.write("focused").write(40):1===this.direction?(t=t.write("focusing").write(40),0!==this.phase&&(t=t.debug(this.phase))):-1===this.direction?(t=t.write("unfocusing").write(40),1!==this.phase&&(t=t.debug(this.phase))):(t=t.write("create").write(40).debug(this.phase),0!==this.direction&&(t=t.write(", ").debug(this.direction))),t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.unfocused=function(){return new t(0,0)},t.focused=function(){return new t(1,0)},t.focusing=function(e){return void 0===e&&(e=0),new t(e,1)},t.unfocusing=function(e){return void 0===e&&(e=1),new t(e,-1)},t.create=function(e,i){return void 0===i&&(i=0),0===e&&0===i?t.unfocused():1===e&&0===i?t.focused():new t(e,i)},t.fromInit=function(e){return new t(e.phase,e.direction)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(t.isInit(e))return t.fromInit(e);throw new TypeError(""+e)},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.phase&&"number"==typeof e.direction}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)},m([e.Lazy],t,"unfocused",null),m([e.Lazy],t,"focused",null),t}(),_t=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.phase+t*(o.phase-e.phase),r=1!==t?e.direction:0;return Qt.create(n,r)};return Object.setPrototypeOf(i,_t.prototype),i[0]=t,i[1]=e,i};_t.prototype=Object.create(l.Interpolator.prototype);var Qt=function(){function t(t,e){this.phase=t,this.direction=e}return t.prototype.withPhase=function(e){return e!==this.phase?t.create(e,this.direction):this},t.prototype.withDirection=function(e){return e!==this.direction?t.create(this.phase,e):this},Object.defineProperty(t.prototype,"modalState",{get:function(){return 0===this.phase&&0===this.direction?"hidden":1===this.phase&&0===this.direction?"shown":this.direction>0?"showing":this.direction<0?"hiding":void 0},enumerable:!1,configurable:!0}),t.prototype.isDismissed=function(){return 0===this.phase&&0===this.direction},t.prototype.isPresented=function(){return 1===this.phase&&0===this.direction},t.prototype.isPresenting=function(){return this.direction>0},t.prototype.isDismissing=function(){return this.direction<0},t.prototype.presenting=function(){return this.isPresenting()?this:t.presenting(this.phase)},t.prototype.dismissing=function(){return this.isDismissing()?this:t.dismissing(this.phase)},t.prototype.toggling=function(){return this.direction>0||this.phase>=.5?t.dismissing(this.phase):this.direction<0||this.phase<.5?t.presenting(this.phase):this},t.prototype.toggled=function(){return this.direction>0||this.phase>=.5?t.dismissed():this.direction<0||this.phase<.5?t.presented():this},t.prototype.interpolateTo=function(e){return e instanceof t?_t(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Numbers.equivalent(this.phase,i.phase,o)&&e.Numbers.equivalent(this.direction,i.direction,o))},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.phase===e.phase&&this.direction===e.direction)},t.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(t),e.Numbers.hash(this.phase)),e.Numbers.hash(this.direction)))},t.prototype.debug=function(t){return t=t.write("Presence").write(46),0===this.phase&&0===this.direction?t=t.write("dismissed").write(40):1===this.phase&&0===this.direction?t=t.write("presented").write(40):1===this.direction?(t=t.write("presenting").write(40),0!==this.phase&&(t=t.debug(this.phase))):-1===this.direction?(t=t.write("dismissing").write(40),1!==this.phase&&(t=t.debug(this.phase))):(t=t.write("create").write(40).debug(this.phase),0!==this.direction&&(t=t.write(", ").debug(this.direction))),t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.dismissed=function(){return new t(0,0)},t.presented=function(){return new t(1,0)},t.presenting=function(e){return void 0===e&&(e=0),new t(e,1)},t.dismissing=function(e){return void 0===e&&(e=1),new t(e,-1)},t.create=function(e,i){return void 0===i&&(i=0),0===e&&0===i?t.dismissed():1===e&&0===i?t.presented():new t(e,i)},t.fromInit=function(e){return new t(e.phase,e.direction)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(t.isInit(e))return t.fromInit(e);throw new TypeError(""+e)},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.phase&&"number"==typeof e.direction}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)},m([e.Lazy],t,"dismissed",null),m([e.Lazy],t,"presented",null),t}(),Jt=function(t,e){var i=function(t){var e=i[0],o=i[1],n=e.phase+t*(o.phase-e.phase),r=1!==t?e.direction:0;return $t.create(n,r)};return Object.setPrototypeOf(i,Jt.prototype),i[0]=t,i[1]=e,i};Jt.prototype=Object.create(l.Interpolator.prototype);var $t=function(){function t(t,e){this.phase=t,this.direction=e}return t.prototype.withPhase=function(e){return e!==this.phase?t.create(e,this.direction):this},t.prototype.withDirection=function(e){return e!==this.direction?t.create(this.phase,e):this},Object.defineProperty(t.prototype,"modalState",{get:function(){return 0===this.phase&&0===this.direction?"hidden":1===this.phase&&0===this.direction?"shown":this.direction>0?"showing":this.direction<0?"hiding":void 0},enumerable:!1,configurable:!0}),t.prototype.isCollapsed=function(){return 0===this.phase&&0===this.direction},t.prototype.isExpanded=function(){return 1===this.phase&&0===this.direction},t.prototype.isExpanding=function(){return this.direction>0},t.prototype.isCollapsing=function(){return this.direction<0},t.prototype.expanding=function(){return this.isExpanding()?this:t.expanding(this.phase)},t.prototype.collapsing=function(){return this.isCollapsing()?this:t.collapsing(this.phase)},t.prototype.toggling=function(){return this.direction>0||this.phase>=.5?t.collapsing(this.phase):this.direction<0||this.phase<.5?t.expanding(this.phase):this},t.prototype.toggled=function(){return this.direction>0||this.phase>=.5?t.collapsed():this.direction<0||this.phase<.5?t.expanded():this},t.prototype.interpolateTo=function(e){return e instanceof t?Jt(this,e):null},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(e.Numbers.equivalent(this.phase,i.phase,o)&&e.Numbers.equivalent(this.direction,i.direction,o))},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.phase===e.phase&&this.direction===e.direction)},t.prototype.hashCode=function(){return e.Murmur3.mash(e.Murmur3.mix(e.Murmur3.mix(e.Constructors.hash(t),e.Numbers.hash(this.phase)),e.Numbers.hash(this.direction)))},t.prototype.debug=function(t){return t=t.write("Expansion").write(46),0===this.phase&&0===this.direction?t=t.write("collapsed").write(40):1===this.phase&&0===this.direction?t=t.write("expanded").write(40):1===this.direction?(t=t.write("expanding").write(40),0!==this.phase&&(t=t.debug(this.phase))):-1===this.direction?(t=t.write("collapsing").write(40),1!==this.phase&&(t=t.debug(this.phase))):(t=t.write("create").write(40).debug(this.phase),0!==this.direction&&(t=t.write(", ").debug(this.direction))),t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.collapsed=function(){return new t(0,0)},t.expanded=function(){return new t(1,0)},t.expanding=function(e){return void 0===e&&(e=0),new t(e,1)},t.collapsing=function(e){return void 0===e&&(e=1),new t(e,-1)},t.create=function(e,i){return void 0===i&&(i=0),0===e&&0===i?t.collapsed():1===e&&0===i?t.expanded():new t(e,i)},t.fromInit=function(e){return new t(e.phase,e.direction)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(t.isInit(e))return t.fromInit(e);throw new TypeError(""+e)},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.phase&&"number"==typeof e.direction}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)},m([e.Lazy],t,"collapsed",null),m([e.Lazy],t,"expanded",null),t}(),te={fromAny:function(t){if(t instanceof a.DateTime||t instanceof r.Angle||t instanceof r.Length||t instanceof Tt||t instanceof St||t instanceof qt||t instanceof Gt||t instanceof r.Transform||t instanceof l.Interpolator||"number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Date||a.DateTime.isInit(t))return a.DateTime.fromAny(t);if(St.isInit(t))return St.fromAny(t);if(Tt.isInit(t))return Tt.fromAny(t);if(qt.isInit(t))return qt.fromAny(t);if("string"==typeof t)return te.parse(t);throw new TypeError(""+t)},parse:function(t){for("string"==typeof t&&(t=s.Unicode.stringInput(t));t.isCont()&&s.Unicode.isWhitespace(t.head());)t=t.step();var e=ie.parse(t);if(e.isDone())for(;t.isCont()&&s.Unicode.isWhitespace(t.head());)t=t.step();return t.isCont()&&!e.isError()&&(e=s.Parser.error(s.Diagnostic.unexpected(t))),e.bind()}};Object.defineProperty(te,"form",{value:function(){var t=new ee(void 0);return Object.defineProperty(te,"form",{value:function(){return t},enumerable:!0,configurable:!0}),t},enumerable:!0,configurable:!0});var ee=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"unit",{value:e,enumerable:!0}),i}return w(e,t),e.prototype.withUnit=function(t){return t!==this.unit?new e(t):this},e.prototype.mold=function(t){if(void 0!==t){if((t=te.fromAny(t))instanceof a.DateTime)return a.DateTime.form().mold(t);if(t instanceof r.Angle)return r.Angle.form().mold(t);if(t instanceof r.Length)return r.Length.form().mold(t);if(t instanceof St)return St.form().mold(t);if(t instanceof Tt)return Tt.form().mold(t);if(t instanceof qt)return qt.form().mold(t);if(t instanceof r.Transform)return r.Transform.form().mold(t);if("number"==typeof t)return o.Num.from(t);throw new TypeError(""+t)}return o.Item.extant()},e.prototype.cast=function(t){var e=t.toValue();if(e instanceof o.Num)return e.numberValue();if(e instanceof o.Bool)return e.booleanValue();var i=e.stringValue(void 0);if(void 0!==i)try{return te.parse(i)}catch(t){}if(e instanceof o.Record){var n=a.DateTime.fromValue(e);if(null!==n)return n;var s=r.Angle.fromValue(e);if(null!==s)return s;var l=r.Length.fromValue(e);if(null!==l)return l;var h=St.fromValue(e);if(null!==h)return h;var u=Tt.fromValue(e);if(null!==u)return u;var p=qt.fromValue(e);if(null!==p)return p;var d=r.Transform.fromValue(e);if(null!==d)return d}},e}(o.Form),ie=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.identOutput=e,r.valueParser=i,r.unitsOutput=o,r.step=n,r}return w(e,t),e.prototype.feed=function(t){return e.parse(t,this.identOutput,this.valueParser,this.unitsOutput,this.step)},e.parse=function(t,i,o,n,l){void 0===l&&(l=1);var h=0;if(1===l){for(;t.isCont()&&(h=t.head(),s.Unicode.isSpace(h));)t.step();if(t.isCont()){if(35===h)return At.parse(t);l=s.Unicode.isAlpha(h)?2:3}else if(!t.isEmpty())return s.Parser.error(s.Diagnostic.unexpected(t))}if(2===l){for(i=i||s.Unicode.stringOutput();t.isCont()&&(h=t.head(),s.Unicode.isAlpha(h)||s.Unicode.isDigit(h)||45===h);)t=t.step(),i.write(h);if(!t.isEmpty()){var u=i.bind();switch(u){case"rgb":case"rgba":return Ot.parseRest(t);case"hsl":case"hsla":return kt.parseRest(t);case"linear-gradient":return Ht.parseRest(t,i);case"normal":case"italic":case"oblique":return Vt.parseRest(t,u);case"small-caps":return Vt.parseRest(t,void 0,u);case"bold":case"bolder":case"lighter":return Vt.parseRest(t,void 0,void 0,u);case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":return Vt.parseRest(t,void 0,void 0,void 0,u);case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":return Vt.parseRest(t,void 0,void 0,void 0,void 0,u);case"translate3d":case"translateX":case"translateY":case"translate":return r.TranslateTransformParser.parseRest(t,i);case"scaleX":case"scaleY":case"scale":return r.ScaleTransformParser.parseRest(t,i);case"rotate":return r.RotateTransformParser.parseRest(t,i);case"skewX":case"skewY":case"skew":return r.SkewTransformParser.parseRest(t,i);case"matrix":return r.AffineTransformParser.parseRest(t,i);case"none":return s.Parser.done(r.Transform.identity());case"true":return s.Parser.done(!0);case"false":return s.Parser.done(!1);default:var p=Tt.forName(u);return null!==p?s.Parser.done(p):s.Parser.error(s.Diagnostic.message("unknown style value: "+u,t))}}}if(3===l)if((o=void 0===o?s.Base10.parseDecimal(t):o.feed(t)).isDone())l=4;else if(o.isError())return o.asError();if(4===l){if(t.isCont()&&45===(h=t.head())){t.step();var d={};return d.year=o.bind(),a.DateTimeFormat.pattern("%m-%dT%H:%M:%S.%LZ").parseDate(t,d)}t.isEmpty()||(l=5)}if(5===l){for(n=n||s.Unicode.stringOutput();t.isCont()&&(h=t.head(),s.Unicode.isAlpha(h)||37===h);)t.step(),n.push(h);t.isEmpty()||(l=6)}if(6===l&&!t.isEmpty()){var c=o.bind(),f=n.bind(),v=void 0;switch(f){case"deg":v=r.Angle.deg(c);break;case"rad":v=r.Angle.rad(c);break;case"grad":v=r.Angle.grad(c);break;case"turn":v=r.Angle.turn(c);break;case"px":v=r.Length.px(c);break;case"em":v=r.Length.em(c);break;case"rem":v=r.Length.rem(c);break;case"%":v=r.Length.pct(c);break;case"":v=c;break;default:return s.Parser.error(s.Diagnostic.message("unknown style units: "+f,t))}if(t.isCont()&&(h=t.head(),s.Unicode.isSpace(h)||47===h)){if(v instanceof r.Length)return Vt.parseRest(t,void 0,void 0,void 0,void 0,v);if("number"==typeof v)switch(c){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:return Vt.parseRest(t,void 0,void 0,String(c))}}return s.Parser.done(v)}return new e(i,o,n,l)},e}(s.Parser);function oe(t){return"object"==typeof t&&null!==t?"function"==typeof t.toAttributeString?t.toAttributeString():t.toString():""+t}function ne(t){return"object"==typeof t&&null!==t?"function"==typeof t.toStyleString?t.toStyleString():t.toString():""+t}t.ToCssValue=void 0,"undefined"!=typeof CSSStyleValue?t.ToCssValue=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toCssValue?t.toCssValue():"number"==typeof t?new CSSUnitValue(t,"number"):null}:t.ToCssValue=ne;var re=function(){function t(t,e){this.array=t,this.index=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n=this.array,r=this.index,s=Array.isArray(t)?t.length:1,l=0;l<s;l+=1){0!==l||Array.isArray(t)?(o=(i=t[l])[0],e=i[1]):o=t;var a=r[o.name];if(void 0!==e&&void 0!==a){var h=n.slice(0);h[a]=[o,e],n=h}else if(void 0!==e){var u=n.slice(0),p={};for(var d in r)p[d]=r[d];p[o.name]=u.length,u.push([o,e]),n=u,r=p}else if(void 0!==a){for(var c=new Array,f={},v=0,y=0,g=n.length;y<g;y+=1){var w=n[y];w[0]!==o&&(c[v]=w,f[w[0].name]=v,v+=1)}n=c,r=f}}return this},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("LookVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}return t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t(e.Arrays.empty,{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),se=function(){function t(t){this.name=t}return t.prototype.add=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=(u=i[s])[0],h=e.get(a);r[a.name]=n.length,n.push(void 0===h?u:[a,a.combine(this,u[1],h)])}for(s=0,l=o.length;s<l;s+=1){var u;void 0===r[(a=(u=o[s])[0]).name]&&(r[a.name]=n.length,n.push(u))}return this.fromArray(n,r)},t.prototype.negate=function(t){for(var e=t.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],l=r[1];o[n]=[s,s.combine(this,void 0,l,-1)]}return this.fromArray(o,t.index)},t.prototype.subtract=function(t,e){for(var i=t.array,o=e.array,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=i[s],h=a[0],u=e.get(h);r[h.name]=n.length,n.push(void 0===u?a:[h,h.combine(this,a[1],u,-1)])}for(s=0,l=o.length;s<l;s+=1){var p=o[s];h=p[0],u=p[1];void 0===r[h.name]&&(r[h.name]=n.length,n.push([h,h.combine(this,void 0,u,-1)]))}return this.fromArray(n,r)},t.prototype.multiply=function(t,e){for(var i=t.array,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],l=s[0],a=s[1];n[r]=[l,l.combine(this,void 0,a,e)]}return this.fromArray(n,t.index)},t.prototype.dot=function(t,e){for(var i,o=t.array,n=0,r=o.length;n<r;n+=1){var s=o[n],l=s[0],a=s[1],h=e.get(l);void 0!==h&&0!==h&&(i=l.combine(this,i,a,h))}return i},t.prototype.dotOr=function(t,e,i){var o=t.array;if(0!==o.length){for(var n=void 0,r=0,s=o.length;r<s;r+=1){var l=o[r],a=l[0],h=l[1],u=e.get(a);void 0!==u&&0!==u&&(n=a.combine(this,n,h,u))}return n}return i},t.prototype.empty=function(){return re.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n={},r=0;r<i;r+=1){var s=t[r],l=s[0],a=s[1];o[r]=[l,this.coerce(a)],n[l.name]=r}return this.fromArray(o,n)},t.prototype.fromArray=function(t,e){return re.fromArray(t,e)},t.prototype.toString=function(){return"Look."+this.name},t}(),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:(1-i)*t+i*e:void 0!==i&&1!==i?e*i:e},e.prototype.between=function(t,e){return l.NumberInterpolator(t,e)},e.prototype.coerce=function(t){return t},e}(se),ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:r.LengthInterpolator(t,e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return r.LengthInterpolator(t,e)},e.prototype.coerce=function(t){return r.Length.fromAny(t)},e}(se),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0!==t?void 0===i||1===i?e:0===i?t:t.interpolateTo(e)(i):void 0!==i&&1!==i?e.times(i):e},e.prototype.between=function(t,e){return t.interpolateTo(e)},e.prototype.coerce=function(t){return Tt.fromAny(t)},e}(se),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:St.family(e.family)},e.prototype.between=function(t,e){return Ct(t,e)},e.prototype.coerce=function(t){return St.fromAny(t)},e}(se),pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return zt(t,e)},e.prototype.coerce=function(t){return qt.fromAny(t)},e}(se),de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i){return void 0===i||0!==i?e:void 0!==t?t:e},e.prototype.between=function(t,e){return l.Interpolator(t,e)},e.prototype.coerce=function(t){return l.Timing.fromAny(t)},e}(se),ce=function(){function t(t,e){this.array=t,this.index=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n=this.array,r=this.index,s=Array.isArray(t)?t.length:1,l=0;l<s;l+=1){0!==l||Array.isArray(t)?(o=(i=t[l])[0],e=i[1]):o=t;var a=r[o.name];if(void 0!==e&&void 0!==a){var h=n.slice(0);h[a]=[o,e],n=h}else if(void 0!==e){var u=n.slice(0),p={};for(var d in r)p[d]=r[d];p[o.name]=u.length,u.push([o,e]),n=u,r=p}else if(void 0!==a){for(var c=new Array,f={},v=0,y=0,g=n.length;y<g;y+=1){var w=n[y];w[0]!==o&&(c[v]=w,f[w[0].name]=v,v+=1)}n=c,r=f}}return this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var l=(h=e[r])[0],a=t.get(l);n[l.name]=o.length,o.push(void 0===a?h:[l,l.combine(h[1],a)])}for(r=0,s=i.length;r<s;r+=1){var h;void 0===n[(l=(h=i[r])[0]).name]&&(n[l.name]=o.length,o.push(h))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],s=n[1];i[o]=[r,r.combine(void 0,s,-1)]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var l=e[r],a=l[0],h=t.get(a);n[a.name]=o.length,o.push(void 0===h?l:[a,a.combine(l[1],h,-1)])}for(r=0,s=i.length;r<s;r+=1){var u=i[r];a=u[0],h=u[1];void 0===n[a.name]&&(n[a.name]=o.length,o.push([a,a.combine(void 0,h,-1)]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],l=r[1];o[n]=[s,s.combine(void 0,l,t)]}return this.copy(o,this.index)},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.interpolateTo=function(e){return e instanceof t?ve(this,e):null},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("FeelVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}return t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r={},s=0;s<o;s+=1){var l=e[s],a=l[0],h=l[1];n[s]=[a,a.coerce(h)],r[a.name]=s}return new t(n,r)},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.of.apply(t,e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),fe=function(){function t(t){this.name=t}return t.prototype.empty=function(){return ce.empty()},t.prototype.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ce.of.apply(ce,t)},t.prototype.from=function(t,e){return ce.fromArray(t,e)},t.prototype.toString=function(){return"Feel."+this.name},t}();function ve(t,e){var i=function(t){for(var e=i.interpolators,o=e.length,n=new Array(o),r=i.index,s=0;s<o;s+=1){var l=e[s],a=l[0],h=(0,l[1])(t);n[s]=[a,h]}return ce.fromArray(n,r)};Object.setPrototypeOf(i,ve.prototype);var o=new Array,n={};return t.forEach((function(t,i){var r=e.get(i);if(void 0!==r){var s=i.between(t,r);n[i.name]=o.length,o.push([i,s])}})),i.interpolators=o,i.index=n,i}w(ve,l.Interpolator),Object.defineProperty(ve.prototype,0,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],s=r[0],l=r[1][0];i[n]=[s,l]}return ce.fromArray(i,o)},enumerable:!0,configurable:!0}),Object.defineProperty(ve.prototype,1,{get:function(){for(var t=this.interpolators,e=t.length,i=new Array(e),o=this.index,n=0;n<e;n+=1){var r=t[n],s=r[0],l=r[1][1];i[n]=[s,l]}return ce.fromArray(i,o)},enumerable:!0,configurable:!0}),ve.prototype.equals=function(t){if(this===t)return!0;if(t instanceof ve){var i=this.interpolators.length;if(i===t.interpolators.length){for(var o=0;o<i;o+=1)if(!e.Arrays.equal(this.interpolators[o],t.interpolators[o]))return!1;return!0}}return!1};var ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){return t.combine(e,i,o)},e}(fe),ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof Tt&&i instanceof Tt){var n=void 0===o?i.alpha():i.alpha()*o;return n>=0?e.darker(n):e.lighter(-n)}return t.combine(e,i,o)},e}(fe),we=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.combine=function(t,e,i,o){if(e instanceof Tt&&i instanceof Tt){if(void 0===o||1===o)return e.alpha(i.alpha());if(0===o)return e;var n=(1-o)*e.alpha()+o*i.alpha();return e.alpha(n)}return t.combine(e,i,o)},e}(fe),me={},Se=function(){function t(t,e){this.array=t,this.index=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.array.length},t.prototype.has=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.index[t]},t.prototype.get=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var e="number"==typeof t?this.array[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getOr=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.index[t]);var i="number"==typeof t?this.array[t]:void 0;return void 0!==i?i[1]:e},t.prototype.updated=function(t,e){for(var i,o,n,r,s=this.array,l=this.index,a=Array.isArray(t)?t.length:1,h=0;h<a;h+=1){0!==h||Array.isArray(t)?(o=(i=t[h])[0],e=i[1]):o=t;var u=l[o.name];if(void 0!==e&&void 0!==u)r=l,(n=s.slice(0))[u]=[o,e],s=n;else if(void 0!==e){for(var p in n=s.slice(0),r={},l)r[p]=l[p];r[o.name]=n.length,n.push([o,e]),s=n,l=r}else if(void 0!==u){n=new Array,r={};for(var d=0,c=0,f=s.length;c<f;c+=1){var v=s[c];v[0]!==o&&(n[d]=v,r[v[0].name]=d,d+=1)}s=n,l=r}}return void 0!==n&&void 0!==r?this.copy(n,r):this},t.prototype.plus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var l=(h=e[r])[0],a=t.get(l);n[l.name]=o.length,o.push(void 0===a?h:[l,h[1]+a])}for(r=0,s=i.length;r<s;r+=1){var h;void 0===n[(l=(h=i[r])[0]).name]&&(n[l.name]=o.length,o.push(h))}return this.copy(o,n)},t.prototype.negative=function(){for(var t=this.array,e=t.length,i=new Array(e),o=0;o<e;o+=1){var n=t[o],r=n[0],s=n[1];i[o]=[r,-s]}return this.copy(i,this.index)},t.prototype.minus=function(t){for(var e=this.array,i=t.array,o=new Array,n={},r=0,s=e.length;r<s;r+=1){var l=e[r],a=l[0],h=t.get(a);n[a.name]=o.length,o.push(void 0===h?l:[a,l[1]-h])}for(r=0,s=i.length;r<s;r+=1){var u=i[r];a=u[0],h=u[1];void 0===n[a.name]&&(n[a.name]=o.length,o.push([a,-h]))}return this.copy(o,n)},t.prototype.times=function(t){for(var e=this.array,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],l=r[1];o[n]=[s,l*t]}return this.copy(o,this.index)},t.prototype.dot=function(t){for(var e,i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=r[0],l=r[1],a=t.get(s);void 0!==a&&(void 0===e?e=l*a:e+=l*a)}return e},t.prototype.copy=function(e,i){return t.fromArray(e,i)},t.prototype.forEach=function(t,e){for(var i=this.array,o=0,n=i.length;o<n;o+=1){var r=i[o],s=t.call(e,r[1],r[0]);if(void 0!==s)return s}},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.array,i.array)},t.prototype.debug=function(t){var e=this.array,i=e.length;t=t.write("MoodVector").write(46).write(0!==i?"of":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}return t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{})},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new t(e,t.index(e))},t.fromArray=function(e,i){return void 0===i&&(i=t.index(e)),new t(e,i)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if(Array.isArray(e))return t.fromArray(e);throw new TypeError(""+e)},t.index=function(t){for(var e={},i=0,o=t.length;i<o;i+=1){e[t[i][0].name]=i}return e},m([e.Lazy],t,"empty",null),t}(),Ce=function(){function t(t,e,i,o){this.rowArray=t,this.rowIndex=e,this.colArray=i,this.colIndex=o}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=(u=i[s])[0],h=e.getCol(a);r[a.name]=n.length,n.push(void 0===h?u:[a,u[1].plus(h)])}for(s=0,l=o.length;s<l;s+=1){var u;void 0===r[(a=(u=o[s])[0]).name]&&(r[a.name]=n.length,n.push(u))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],l=r[1];o[n]=[s,l.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=i[s],h=a[0],u=e.getCol(h);r[h.name]=n.length,n.push(void 0===u?a:[h,a[1].minus(u)])}for(s=0,l=o.length;s<l;s+=1){var p=o[s];h=p[0],u=p[1];void 0===r[h.name]&&(r[h.name]=n.length,n.push([h,u.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],l=s[0],a=s[1];n[r]=[l,a.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i)return t=i[0],i[1].dot(e)},t.prototype.timesCol=function(t,e){void 0===e&&(e=!1);for(var i=this.rowArray,o=new Array,n={},r=0,s=i.length;r<s;r+=1){var l=i[r],a=l[0],h=l[1].dot(t);void 0!==h&&(n[a.name]=o.length,o.push([a,h]))}if(e){var u=t.array;for(r=0,s=u.length;r<s;r+=1){a=u[r][0];this.hasRow(a)||(n[a.name]=o.length,o.push(u[r]))}}return Se.fromArray(o,n)},t.prototype.timesRow=function(t,e){void 0===e&&(e=!1);for(var i=this.colArray,o=new Array,n={},r=0,s=i.length;r<s;r+=1){var l=i[r],a=l[0],h=l[1],u=t.dot(h);void 0!==u&&(n[a.name]=o.length,o.push([a,u]))}if(e){var p=t.array;for(r=0,s=p.length;r<s;r+=1){a=p[r][0];this.hasCol(a)||(n[a.name]=o.length,o.push(p[r]))}}return Se.fromArray(o,n)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,s={},l=new Array,a={},h=0,u=n.length;h<u;h+=1){var p=n[h][0],d=e.getCol(p);if(void 0===d&&i&&(d=Se.of([p,1])),void 0!==d)for(var c=0,f=o.length;c<f;c+=1){var v=o[c],y=v[0],g=v[1].dot(d);if(void 0!==g){var w=s[y.name];if(void 0!==w){var m=r[w][1];m.index[y.name]=m.array.length,m.array.push([p,g])}else s[y.name]=r.length,r.push([y,Se.of([p,g])]);var S=a[p.name];if(void 0!==S){var C=l[S][1];C.index[p.name]=C.array.length,C.array.push([y,g])}else a[p.name]=l.length,l.push([p,Se.of([y,g])])}}}return new t(r,s,l,a)},t.prototype.identityFor=function(e){for(var i,o,n=this.rowArray,r=e.colArray,s=0,l=r.length;s<l;s+=1){var a=r[s][0];if(!this.hasRow(a)){if(void 0===i&&(i=n.slice(0)),void 0===o)for(var h in o={},this.rowIndex)o[h]=this.rowIndex[h];o[a.name]=i.length,i.push([a,Se.of([a,1])])}}return void 0!==i&&void 0!==o?t.fromRowArray(i,o):this},t.prototype.row=function(e,i){void 0!==i&&(i=Se.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromRowArray(s,n);if(void 0!==i){var s=o.slice(0),l={};for(var a in n)l[a]=n[a];return l[e.name]=s.length,s.push([e,i]),t.fromRowArray(s,l)}if(void 0!==r){s=new Array,l={};for(var h=0,u=0,p=o.length;u<p;u+=1){var d=o[u];d[0]!==e&&(s[h]=d,l[d[0].name]=h,h+=1)}return t.fromRowArray(s,l)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=Se.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromColArray(s,n);if(void 0!==i){var s=o.slice(0),l={};for(var a in n)l[a]=n[a];return l[e.name]=s.length,s.push([e,i]),t.fromColArray(s,l)}if(void 0!==r){s=new Array,l={};for(var h=0,u=0,p=o.length;u<p;u+=1){var d=o[u];d[0]!==e&&(s[h]=d,l[d[0].name]=h,h+=1)}return t.fromColArray(s,l)}return this},t.prototype.updatedRow=function(t,e,i){var o=this.getRow(t),n=o;return void 0===n&&(!0===i?i=Se.of([t,1]):!1===i&&(i=void 0),n=i=void 0!==i?Se.fromAny(i):Se.empty()),(n=n.updated(e)).equals(o)?this:this.row(t,n)},t.prototype.updatedCol=function(t,e,i){var o=this.getCol(t),n=o;return void 0===n&&(!0===i?i=Se.of([t,1]):!1===i&&(i=void 0),n=i=void 0!==i?Se.fromAny(i):Se.empty()),(n=n.updated(e)).equals(o)?this:this.col(t,n)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("MoodMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}return t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],l=r[1];o[n]=[s,Se.fromAny(l)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],l=r[1];o[n]=[s,Se.fromAny(l)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=Se.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var l=0,a=o.length;l<a;l+=1){var h=o[l],u=h[0],p=new Array,d={};for(r=0,s=e.length;r<s;r+=1){var c=e[r],f=c[0],v=c[1].get(u);void 0!==v&&(d[f.name]=p.length,p.push([f,v]))}var y=Se.fromArray(p,d);h[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=Se.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var l=o.length;r<l;r+=1){var a=o[r],h=a[0],u=new Array,p={},d=0;for(s=e.length;d<s;d+=1){var c=e[d],f=c[0],v=c[1].get(h);void 0!==v&&(p[f.name]=u.length,u.push([f,v]))}var y=Se.fromArray(u,p);a[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}(),be={},Ve=function(){function t(t,e,i,o){this.rowArray=t,this.rowIndex=e,this.colArray=i,this.colIndex=o}return Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colArray.length},enumerable:!1,configurable:!0}),t.prototype.hasRow=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.rowIndex[t]},t.prototype.hasCol=function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),void 0!==this.colIndex[t]},t.prototype.getRow=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var e="number"==typeof t?this.rowArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.getCol=function(t){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.colIndex[t]);var e="number"==typeof t?this.colArray[t]:void 0;return void 0!==e?e[1]:void 0},t.prototype.get=function(t,e){return this.dot(t,e)},t.prototype.getOr=function(t,e,i){return this.dotOr(t,e,i)},t.prototype.plus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=(u=i[s])[0],h=e.getCol(a);r[a.name]=n.length,n.push(void 0===h?u:[a,u[1].plus(h)])}for(s=0,l=o.length;s<l;s+=1){var u;void 0===r[(a=(u=o[s])[0]).name]&&(r[a.name]=n.length,n.push(u))}return t.fromColArray(n,r)},t.prototype.negative=function(){for(var e=this.colArray,i=e.length,o=new Array(i),n=0;n<i;n+=1){var r=e[n],s=r[0],l=r[1];o[n]=[s,l.negative()]}return t.fromColArray(o,this.colIndex)},t.prototype.minus=function(e){for(var i=this.colArray,o=e.colArray,n=new Array,r={},s=0,l=i.length;s<l;s+=1){var a=i[s],h=a[0],u=e.getCol(h);r[h.name]=n.length,n.push(void 0===u?a:[h,a[1].minus(u)])}for(s=0,l=o.length;s<l;s+=1){var p=o[s];h=p[0],u=p[1];void 0===r[h.name]&&(r[h.name]=n.length,n.push([h,u.negative()]))}return t.fromColArray(n,r)},t.prototype.times=function(e){for(var i=this.colArray,o=i.length,n=new Array(o),r=0;r<o;r+=1){var s=i[r],l=s[0],a=s[1];n[r]=[l,a.times(e)]}return t.fromColArray(n,this.colIndex)},t.prototype.dot=function(t,e){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var i="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==i){t=i[0];var o=i[1];return t.dot(o,e)}},t.prototype.dotOr=function(t,e,i){("object"==typeof t&&null!==t||"function"==typeof t)&&(t=t.name),"string"==typeof t&&(t=this.rowIndex[t]);var o="number"==typeof t?this.rowArray[t]:void 0;if(void 0!==o){t=o[0];var n=o[1];return t.dotOr(n,e,i)}return i},t.prototype.timesCol=function(t){for(var e=this.rowArray,i=new Array,o={},n=0,r=e.length;n<r;n+=1){var s=e[n],l=s[0],a=s[1],h=l.dot(a,t);void 0!==h&&(o[l.name]=i.length,i.push([l,h]))}return ce.fromArray(i,o)},t.prototype.transform=function(e,i){void 0===i&&(i=!0);for(var o=this.rowArray,n=this.colArray,r=new Array,s={},l=new Array,a={},h=0,u=n.length;h<u;h+=1){var p=n[h][0],d=e.getCol(p);if(void 0===d&&i&&(d=Se.of([p,1])),void 0!==d)for(var c=0,f=o.length;c<f;c+=1){var v=o[c],y=v[0],g=v[1],w=y.dot(g,d);if(void 0!==w){var m=s[y.name];if(void 0!==m){var S=r[m][1];S.index[y.name]=S.array.length,S.array.push([p,w])}else s[y.name]=r.length,r.push([y,re.of([p,w])]);var C=a[p.name];if(void 0!==C){var b=l[C][1];b.index[p.name]=b.array.length,b.array.push([y,w])}else a[p.name]=l.length,l.push([p,ce.of([y,w])])}}}return new t(r,s,l,a)},t.prototype.row=function(e,i){void 0!==i&&(i=re.fromAny(i));var o=this.rowArray,n=this.rowIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromRowArray(s,n);if(void 0!==i){var s=o.slice(0),l={};for(var a in n)l[a]=n[a];return l[e.name]=s.length,s.push([e,i]),t.fromRowArray(s,l)}if(void 0!==r){s=new Array,l={};for(var h=0,u=0,p=o.length;u<p;u+=1){var d=o[u];d[0]!==e&&(s[h]=d,l[d[0].name]=h,h+=1)}return t.fromRowArray(s,l)}return this},t.prototype.col=function(e,i){void 0!==i&&(i=ce.fromAny(i));var o=this.colArray,n=this.colIndex,r=n[e.name];if(void 0!==i&&void 0!==r)return(s=o.slice(0))[r]=[e,i],t.fromColArray(s,n);if(void 0!==i){var s=o.slice(0),l={};for(var a in n)l[a]=n[a];return l[e.name]=s.length,s.push([e,i]),t.fromColArray(s,l)}if(void 0!==r){s=new Array,l={};for(var h=0,u=0,p=o.length;u<p;u+=1){var d=o[u];d[0]!==e&&(s[h]=d,l[d[0].name]=h,h+=1)}return t.fromColArray(s,l)}return this},t.prototype.updatedRow=function(t,e,i){var o=this.getRow(t),n=o;return void 0===n&&(n=i=void 0!==i?re.fromAny(i):re.empty()),(n=n.updated(e)).equals(o)?this:this.row(t,n)},t.prototype.updatedCol=function(t,e,i){var o=this.getCol(t),n=o;return void 0===n&&(n=i=void 0!==i?ce.fromAny(i):ce.empty()),(n=n.updated(e)).equals(o)?this:this.col(t,n)},t.prototype.equals=function(i){return this===i||i instanceof t&&e.Arrays.equal(this.colArray,i.colArray)},t.prototype.debug=function(t){var e=this.colArray,i=e.length;t=t.write("ThemeMatrix").write(46).write(0!==i?"forCols":"empty").write(40);for(var o=0;o<i;o+=1){var n=e[o],r=n[0],s=n[1];0!==o&&(t=t.write(", ")),t=t.write(91).debug(r).write(", ").debug(s).write(93)}return t=t.write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.empty=function(){return new t([],{},[],{})},t.forRows=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],l=r[1];o[n]=[s,re.fromAny(l)]}return this.fromRowArray(o)},t.forCols=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,o=new Array(i),n=0;n<i;n+=1){var r=t[n],s=r[0],l=r[1];o[n]=[s,ce.fromAny(l)]}return this.fromColArray(o)},t.fromRowArray=function(e,i){void 0===i&&(i=ce.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}for(var l=0,a=o.length;l<a;l+=1){var h=o[l],u=h[0],p=new Array,d={};for(r=0,s=e.length;r<s;r+=1){var c=e[r],f=c[0],v=c[1].get(u);void 0!==v&&(d[f.name]=p.length,p.push([f,v]))}var y=ce.fromArray(p,d);h[1]=y}return new t(e,i,o,n)},t.fromColArray=function(e,i){void 0===i&&(i=re.index(e));for(var o=new Array,n={},r=0,s=e.length;r<s;r+=1){e[r][1].forEach((function(t,e){void 0===n[e.name]&&(n[e.name]=o.length,o.push([e,void 0]))}),this)}r=0;for(var l=o.length;r<l;r+=1){var a=o[r],h=a[0],u=new Array,p={},d=0;for(s=e.length;d<s;d+=1){var c=e[d],f=c[0],v=c[1].get(h);void 0!==v&&(p[f.name]=u.length,u.push([f,v]))}var y=re.fromArray(u,p);a[1]=y}return new t(o,n,e,i)},m([e.Lazy],t,"empty",null),t}();se.font=new ue("font"),se.color=new he("color"),se.iconColor=new he("iconColor"),se.statusColor=new he("statusColor"),se.accentColor=new he("accentColor"),se.mutedColor=new he("mutedColor"),se.neutralColor=new he("neutralColor"),se.subduedColor=new he("subduedColor"),se.faintColor=new he("faintColor"),se.highlightColor=new he("highlightColor"),se.backgroundColor=new he("backgroundColor"),se.borderColor=new he("borderColor"),se.opacity=new le("opacity"),se.shadow=new pe("shadow"),se.spacing=new ae("spacing"),se.timing=new de("timing"),fe.ambient=new ye("ambient"),fe.default=new ye("default"),fe.primary=new ye("primary"),fe.secondary=new ye("secondary"),fe.unselected=new ye("unselected"),fe.selected=new ye("selected"),fe.disabled=new ye("disabled"),fe.inactive=new ye("inactive"),fe.warning=new ye("warning"),fe.alert=new ye("alert"),fe.darker=new ge("darker"),fe.lighter=new ge("lighter"),fe.contrasted=new ge("contrasted"),fe.raised=new ye("raised"),fe.covered=new ye("covered"),fe.floating=new ye("floating"),fe.transparent=new ye("transparent"),fe.translucent=new we("translucent"),fe.embossed=new ge("embossed"),fe.nested=new ge("nested"),fe.hovering=new ge("hovering"),fe.navigating=new ye("navigating"),me.ambient=Se.of([fe.ambient,1]),me.default=Se.of([fe.default,1]),me.primary=Se.of([fe.primary,1]),me.secondary=Se.of([fe.secondary,1]),me.selected=Se.of([fe.selected,1]),me.disabled=Se.of([fe.disabled,1]),me.inactive=Se.of([fe.inactive,1]),me.warning=Se.of([fe.warning,1]),me.alert=Se.of([fe.alert,1]),me.darker=Se.of([fe.darker,1]),me.lighter=Se.of([fe.lighter,1]),me.contrasted=Se.of([fe.contrasted,1]),me.raised=Se.of([fe.raised,1]),me.covered=Se.of([fe.covered,1]),me.floating=Se.of([fe.floating,1]),me.transparent=Se.of([fe.transparent,1]),me.translucent=Se.of([fe.translucent,1]),me.embossed=Se.of([fe.embossed,1]),me.nested=Se.of([fe.nested,1]),me.hovering=Se.of([fe.hovering,1]),me.navigating=Se.of([fe.navigating,1]);var Te=St.parse("14px -apple-system, system-ui, sans-serif"),Fe=Tt.parse("#d8d8d8"),Pe=Tt.parse("#d8d8d8"),Me=Tt.parse("#6c6d6e"),De=Tt.parse("#989898"),xe=Tt.parse("#808080"),Le=Tt.parse("#28292a"),Ae=Tt.parse("#1f2123"),Oe=Tt.white(.1),Re=Tt.parse("#161719"),Ie=Re.lighter(2/3),ke=Tt.parse("#18191b"),We=Tt.parse("#1e2022"),Ee=Tt.parse("#66ffdd"),Ne=Tt.parse("#32c5ff"),Ue=Tt.parse("#7b7c7d"),Ge=Tt.parse("#7b7c7d"),Be=Tt.parse("#f9f070"),je=Tt.parse("#f6511d"),He=r.Length.px(10),qe=ce.of([se.font,Te],[se.color,Fe],[se.iconColor,Pe],[se.statusColor,Fe],[se.accentColor,Me],[se.mutedColor,De],[se.neutralColor,xe],[se.subduedColor,Le],[se.faintColor,Ae],[se.highlightColor,Oe],[se.backgroundColor,Re],[se.borderColor,Ie],[se.spacing,He],[se.timing,l.Easing.linear.withDuration(1e3)]),ze=ce.of([se.font,Te],[se.color,Fe],[se.iconColor,Pe],[se.statusColor,Fe],[se.accentColor,Me],[se.mutedColor,De],[se.neutralColor,xe],[se.subduedColor,Le],[se.faintColor,Ae],[se.highlightColor,Oe],[se.backgroundColor,Re],[se.borderColor,Ie],[se.spacing,He],[se.timing,l.Easing.cubicOut.withDuration(250)]),Ye=ce.of([se.accentColor,Ee]),Xe=ce.of([se.accentColor,Ne]),Ke=ce.of([se.color,De],[se.iconColor,De],[se.backgroundColor,Re.darker(1)]),Ze=ce.of([se.color,Fe],[se.iconColor,Pe],[se.backgroundColor,Re.darker(1)]),_e=ce.of([se.color,Ue],[se.iconColor,Ue],[se.statusColor,Ue],[se.accentColor,Ue]),Qe=ce.of([se.statusColor,Ge],[se.accentColor,Ge]),Je=ce.of([se.statusColor,Be],[se.accentColor,Be]),$e=ce.of([se.statusColor,je],[se.accentColor,je]),ti=ce.of([se.mutedColor,De.darker(1/3)],[se.neutralColor,xe.darker(1/3)],[se.backgroundColor,ke]),ei=ce.of([se.mutedColor,De.darker(1/3)],[se.neutralColor,xe.darker(1/3)],[se.backgroundColor,We]),ii=ce.of([se.shadow,qt.create(0,2,4,0,Tt.black(.5))]),oi=ce.of([se.backgroundColor,Re.alpha(0)],[se.borderColor,Ie.alpha(0)]),ni=ce.of([se.iconColor,Tt.black(.8)],[se.statusColor,Tt.black(.8)],[se.accentColor,Tt.black(.8)],[se.backgroundColor,Tt.black(.8)],[se.borderColor,Tt.black(.8)]),ri=ce.of([se.iconColor,Tt.black(1)],[se.statusColor,Tt.black(1)],[se.accentColor,Tt.black(1)]),si=ce.of([se.iconColor,Tt.black(-1)],[se.statusColor,Tt.black(-1)],[se.accentColor,Tt.black(-1)]),li=ce.of([se.iconColor,Tt.black(-1)],[se.statusColor,Tt.black(-1)],[se.accentColor,Tt.black(-1)]),ai=ce.of([se.iconColor,Tt.black(2)],[se.statusColor,Tt.black(2)],[se.accentColor,Tt.black(2)]),hi=ce.of([se.backgroundColor,Tt.black(1/3)],[se.borderColor,Tt.black(1/3)]),ui=ce.of([se.statusColor,Tt.black(1)],[se.accentColor,Tt.black(1)],[se.backgroundColor,Tt.black(-1)]),pi=ce.of([se.timing,l.Easing.cubicOut.withDuration(350)]),di=Ve.forCols([fe.ambient,qe],[fe.default,ze],[fe.primary,Ye],[fe.secondary,Xe],[fe.unselected,Ke],[fe.selected,Ze],[fe.disabled,_e],[fe.inactive,Qe],[fe.warning,Je],[fe.alert,$e],[fe.darker,ri],[fe.lighter,si],[fe.contrasted,li],[fe.raised,ti],[fe.covered,ei],[fe.floating,ii],[fe.transparent,oi],[fe.translucent,ni],[fe.embossed,ai],[fe.nested,hi],[fe.hovering,ui],[fe.navigating,pi]);be.dark=di;var ci=St.parse("14px -apple-system, system-ui, sans-serif"),fi=Tt.parse("#4a4a4a"),vi=Tt.parse("#4a4a4a"),yi=Tt.parse("#5c5d5e"),gi=Tt.parse("#989898"),wi=Tt.parse("#808080"),mi=Tt.parse("#d7d6d5"),Si=Tt.parse("#e0dedc"),Ci=Tt.black(.05),bi=Tt.parse("#f9f8f6"),Vi=bi.darker(.5),Ti=Tt.parse("#f7f6f4"),Fi=Tt.parse("#f1efed"),Pi=Tt.parse("#4fcfb3"),Mi=Tt.parse("#008cc7"),Di=Tt.parse("#7b7c7d"),xi=Tt.parse("#7b7c7d"),Li=Tt.parse("#e6de65"),Ai=Tt.parse("#df4616"),Oi=r.Length.px(10),Ri=ce.of([se.font,ci],[se.color,fi],[se.iconColor,vi],[se.statusColor,fi],[se.accentColor,yi],[se.mutedColor,gi],[se.neutralColor,wi],[se.subduedColor,mi],[se.faintColor,Si],[se.highlightColor,Ci],[se.backgroundColor,bi],[se.borderColor,Vi],[se.spacing,Oi],[se.timing,l.Easing.linear.withDuration(1e3)]),Ii=ce.of([se.font,ci],[se.color,fi],[se.iconColor,vi],[se.statusColor,fi],[se.accentColor,yi],[se.mutedColor,gi],[se.neutralColor,wi],[se.subduedColor,mi],[se.faintColor,Si],[se.highlightColor,Ci],[se.backgroundColor,bi],[se.borderColor,Vi],[se.spacing,Oi],[se.timing,l.Easing.cubicOut.withDuration(250)]),ki=ce.of([se.accentColor,Pi]),Wi=ce.of([se.accentColor,Mi]),Ei=ce.of([se.color,gi],[se.iconColor,gi],[se.backgroundColor,bi.darker(.5)]),Ni=ce.of([se.color,fi],[se.iconColor,vi],[se.backgroundColor,bi.darker(.5)]),Ui=ce.of([se.color,Di],[se.iconColor,Di],[se.statusColor,Di],[se.accentColor,Di]),Gi=ce.of([se.statusColor,xi],[se.accentColor,xi]),Bi=ce.of([se.statusColor,Li],[se.accentColor,Li]),ji=ce.of([se.statusColor,Ai],[se.accentColor,Ai]),Hi=ce.of([se.mutedColor,gi.darker(1/3)],[se.neutralColor,wi.darker(1/3)],[se.backgroundColor,Ti]),qi=ce.of([se.mutedColor,gi.darker(1/3)],[se.neutralColor,wi.darker(1/3)],[se.backgroundColor,Fi]),zi=ce.of([se.shadow,qt.create(0,2,4,0,Tt.black(.5))]),Yi=ce.of([se.backgroundColor,bi.alpha(0)],[se.borderColor,Vi.alpha(0)]),Xi=ce.of([se.iconColor,Tt.black(.8)],[se.statusColor,Tt.black(.8)],[se.accentColor,Tt.black(.8)],[se.backgroundColor,Tt.black(.8)],[se.borderColor,Tt.black(.8)]),Ki=ce.of([se.iconColor,Tt.black(1)],[se.statusColor,Tt.black(1)],[se.accentColor,Tt.black(1)]),Zi=ce.of([se.iconColor,Tt.black(-1)],[se.statusColor,Tt.black(-1)],[se.accentColor,Tt.black(-1)]),_i=ce.of([se.iconColor,Tt.black(1)],[se.statusColor,Tt.black(1)],[se.accentColor,Tt.black(1)]),Qi=ce.of([se.iconColor,Tt.black(1)],[se.statusColor,Tt.black(1)],[se.accentColor,Tt.black(1)]),Ji=ce.of([se.backgroundColor,Tt.black(1/24)],[se.borderColor,Tt.black(1/24)]),$i=ce.of([se.statusColor,Tt.black(1/4)],[se.accentColor,Tt.black(1/4)],[se.backgroundColor,Tt.black(1/4)]),to=ce.of([se.timing,l.Easing.cubicOut.withDuration(350)]),eo=Ve.forCols([fe.ambient,Ri],[fe.default,Ii],[fe.primary,ki],[fe.secondary,Wi],[fe.unselected,Ei],[fe.selected,Ni],[fe.disabled,Ui],[fe.inactive,Gi],[fe.warning,Bi],[fe.alert,ji],[fe.darker,Ki],[fe.lighter,Zi],[fe.contrasted,_i],[fe.raised,Hi],[fe.covered,qi],[fe.floating,zi],[fe.transparent,Yi],[fe.translucent,Xi],[fe.embossed,Qi],[fe.nested,Ji],[fe.hovering,$i],[fe.navigating,to]);be.light=eo;var io={detect:function(){var t=0,e=0,i=0,o=0,n=document.documentElement.style.width,r=document.documentElement.style.height;document.documentElement.style.width="100%",document.documentElement.style.height="100%";var s=document.createElement("div");s.style.setProperty("position","fixed"),s.style.setProperty("top","0"),s.style.setProperty("right","0"),s.style.setProperty("width",window.innerWidth===document.documentElement.offsetWidth?"100%":"100vw"),s.style.setProperty("height",window.innerHeight===document.documentElement.offsetHeight?"100%":"100vh"),s.style.setProperty("box-sizing","border-box"),s.style.setProperty("padding-top","env(safe-area-inset-top)"),s.style.setProperty("padding-right","env(safe-area-inset-right)"),s.style.setProperty("padding-bottom","env(safe-area-inset-bottom)"),s.style.setProperty("padding-left","env(safe-area-inset-left)"),s.style.setProperty("overflow","hidden"),s.style.setProperty("visibility","hidden"),document.body.appendChild(s);var l=window.getComputedStyle(s),a=parseFloat(l.getPropertyValue("width")),h=parseFloat(l.getPropertyValue("height")),u=a,p=h,d=0,c=0,f=0,v=0,y=1;void 0!==window.visualViewport&&(u=window.visualViewport.width,p=window.visualViewport.height,d=window.visualViewport.offsetLeft,c=window.visualViewport.offsetTop,f=window.visualViewport.pageLeft,v=window.visualViewport.pageTop,y=window.visualViewport.scale);var g={width:u,height:p,offsetLeft:d,offsetTop:c,pageLeft:f,pageTop:v,scale:y};"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("padding-top: env(safe-area-inset-top)")&&(t=parseFloat(l.getPropertyValue("padding-top")),e=parseFloat(l.getPropertyValue("padding-right")),i=parseFloat(l.getPropertyValue("padding-bottom")),o=parseFloat(l.getPropertyValue("padding-left"))),document.body.removeChild(s),document.documentElement.style.width=n,document.documentElement.style.height=r;var w={insetTop:t,insetRight:e,insetBottom:i,insetLeft:o},m=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;if(void 0===m)switch(window.orientation){case 0:m="portrait-primary";break;case 180:m="portrait-secondary";break;default:m="landscape-primary";break;case 90:m="landscape-secondary"}return{width:a,height:h,visual:g,safeArea:w,orientation:m,colorScheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"no-preference"}}},oo={default:function(){return{updateTime:performance.now(),viewIdiom:"unspecified",viewport:io.detect()}}},no={initGestures:function(t){var e=Object.getPrototypeOf(t);do{if(Object.prototype.hasOwnProperty.call(e,"gestureConstructors")){var i=e.gestureConstructors;for(var o in i){var n=i[o];if(void 0!==n.prototype.self&&!t.hasGesture(o)){var r=new n(t,o);t.setGesture(o,r)}}}e=Object.getPrototypeOf(e)}while(null!==e)},getGestureConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"gestureConstructors")){var i=e.gestureConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateGesture:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"gestureConstructors")||(o.gestureConstructors={}),o.gestureConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getGesture(i.toString());return null===e&&(e=new t(this,i.toString()),this.setGesture(i.toString(),e)),e},configurable:!0,enumerable:!0})}},ro=function(){function t(){this.viewFlags=0,this.viewObservers=e.Arrays.empty,this.viewObserverCache={},this.animationTracks=e.Arrays.empty}return t.prototype.initView=function(t){},t.prototype.setViewFlags=function(t){this.viewFlags=t},t.prototype.addViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewObserver(t),this.viewObservers=o,this.onAddViewObserver(t),this.didAddViewObserver(t))},t.prototype.willAddViewObserver=function(t){},t.prototype.onAddViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didAddViewObserver=function(t){},t.prototype.removeViewObserver=function(t){var i=this.viewObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewObserver(t),this.viewObservers=o,this.onRemoveViewObserver(t),this.didRemoveViewObserver(t))},t.prototype.willRemoveViewObserver=function(t){},t.prototype.onRemoveViewObserver=function(t){void 0!==t.viewWillResize&&(this.viewObserverCache.viewWillResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillResizeObservers)),void 0!==t.viewDidResize&&(this.viewObserverCache.viewDidResizeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidResizeObservers)),void 0!==t.viewWillScroll&&(this.viewObserverCache.viewWillScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillScrollObservers)),void 0!==t.viewDidScroll&&(this.viewObserverCache.viewDidScrollObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidScrollObservers)),void 0!==t.viewWillChange&&(this.viewObserverCache.viewWillChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillChangeObservers)),void 0!==t.viewDidChange&&(this.viewObserverCache.viewDidChangeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidChangeObservers)),void 0!==t.viewWillAnimate&&(this.viewObserverCache.viewWillAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillAnimateObservers)),void 0!==t.viewDidAnimate&&(this.viewObserverCache.viewDidAnimateObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidAnimateObservers)),void 0!==t.viewWillLayout&&(this.viewObserverCache.viewWillLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillLayoutObservers)),void 0!==t.viewDidLayout&&(this.viewObserverCache.viewDidLayoutObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidLayoutObservers))},t.prototype.didRemoveViewObserver=function(t){},t.prototype.attachParentView=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower(),t.isCulled()&&this.cascadeCull())},t.prototype.detachParentView=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetParentView&&r.viewWillSetParentView(t,e,this)}},t.prototype.onSetParentView=function(t,e){},t.prototype.didSetParentView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetParentView&&r.viewDidSetParentView(t,e,this)}},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillInsertChildView&&r.viewWillInsertChildView(t,e,this)}},t.prototype.onInsertChildView=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildView&&r.viewDidInsertChildView(t,e,this)}},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildView=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillRemoveChildView&&n.viewWillRemoveChildView(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildView=function(t){},t.prototype.didRemoveChildView=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildView&&n.viewDidRemoveChildView(t,this)}},t.prototype.getSuperView=function(t){var e=this.parentView;return null===e?null:e instanceof t?e:e.getSuperView(t)},t.prototype.getBaseView=function(t){var e=this.parentView;if(null===e)return null;var i=e.getBaseView(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.viewFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.willMount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillMount&&o.viewWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.viewFlags&t.UpdateMask,!1),this.requireUpdate(this.mountFlags),0===this.animationTracks.length||this.isCulled()||this.requireUpdate(t.NeedsAnimate)},t.prototype.didMount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMount&&o.viewDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillUnmount&&o.viewWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnmount&&o.viewDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.viewFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillPower&&o.viewWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.viewFlags&t.UpdateMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidPower&&o.viewDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillUnpower&&o.viewWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnpower&&o.viewDidUnpower(this)}},t.prototype.isCulled=function(){return 0!=(this.viewFlags&t.CulledMask)},t.prototype.willCull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillCull&&o.viewWillCull(this)}},t.prototype.onCull=function(){},t.prototype.didCull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidCull&&o.viewDidCull(this)}},Object.defineProperty(t.prototype,"uncullFlags",{get:function(){return this.constructor.uncullFlags},enumerable:!1,configurable:!0}),t.prototype.willUncull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillUncull&&o.viewWillUncull(this)}},t.prototype.onUncull=function(){this.requestUpdate(this,this.viewFlags&t.UpdateMask,!1),this.requireUpdate(this.uncullFlags),0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didUncull=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUncull&&o.viewDidUncull(this)}},t.prototype.isUnbounded=function(){return 0!=(this.viewFlags&t.UnboundedFlag)},t.prototype.setUnbounded=function(e){e!==(0!=(this.viewFlags&t.UnboundedFlag))&&(this.willSetUnbounded(e),e?this.setViewFlags(this.viewFlags|t.UnboundedFlag):this.setViewFlags(this.viewFlags&~t.UnboundedFlag),this.onSetUnbounded(e),this.didSetUnbounded(e))},t.prototype.willSetUnbounded=function(t){},t.prototype.onSetUnbounded=function(t){},t.prototype.didSetUnbounded=function(t){},t.prototype.isIntangible=function(){return 0!=(this.viewFlags&t.IntangibleFlag)},t.prototype.setIntangible=function(e){e!==(0!=(this.viewFlags&t.IntangibleFlag))&&(this.willSetIntangible(e),e?this.setViewFlags(this.viewFlags|t.IntangibleFlag):this.setViewFlags(this.viewFlags&~t.IntangibleFlag),this.onSetIntangible(e),this.didSetIntangible(e))},t.prototype.willSetIntangible=function(t){},t.prototype.onSetIntangible=function(t){},t.prototype.didSetIntangible=function(t){},t.prototype.requireUpdate=function(e,i){void 0===i&&(i=!1);var o=this.viewFlags,n=e&~o&t.UpdateMask;0!==n&&(this.setViewFlags(o|n),this.requestUpdate(this,n,i))},t.prototype.needsUpdate=function(t,e){return t},t.prototype.requestUpdate=function(e,i,o){if((this.viewFlags&t.CulledMask)!==t.CulledFlag){i=this.needsUpdate(i,o);var n=this.viewFlags&~i&t.UpdateMask;if(0!=(i&t.ProcessMask)&&(n|=t.NeedsProcess),0!=(i&t.DisplayMask)&&(n|=t.NeedsDisplay),0!==n||o){this.setViewFlags(this.viewFlags|n);var r=this.parentView;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.displayService.manager;null!=s&&s.requestUpdate(e,i,o)}}}},t.prototype.isTraversing=function(){return 0!=(this.viewFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.viewFlags&t.UpdatingMask)},t.prototype.isProcessing=function(){return 0!=(this.viewFlags&t.ProcessingFlag)},t.prototype.needsProcess=function(t,e){return t},t.prototype.willProcess=function(t,e){},t.prototype.onProcess=function(t,e){},t.prototype.didProcess=function(t,e){},t.prototype.willResize=function(t){var e=this.viewObserverCache.viewWillResizeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewWillResize(t,this)}},t.prototype.onResize=function(t){},t.prototype.didResize=function(t){var e=this.viewObserverCache.viewDidResizeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidResize(t,this)}},t.prototype.willScroll=function(t){var e=this.viewObserverCache.viewWillScrollObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewWillScroll(t,this)}},t.prototype.onScroll=function(t){},t.prototype.didScroll=function(t){var e=this.viewObserverCache.viewDidScrollObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidScroll(t,this)}},t.prototype.willChange=function(t){var e=this.viewObserverCache.viewWillChangeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewWillChange(t,this)}},t.prototype.onChange=function(t){},t.prototype.didChange=function(t){var e=this.viewObserverCache.viewDidChangeObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidChange(t,this)}},t.prototype.willAnimate=function(t){var e=this.viewObserverCache.viewWillAnimateObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewWillAnimate(t,this)}},t.prototype.onAnimate=function(t){this.isCulled()||this.updateAnimations(t.updateTime)},t.prototype.updateAnimations=function(e){for(var i=this.animationTracks,o=0,n=i.length;o<n;o+=1){i[o].onAnimate(e)}0!==this.animationTracks.length&&this.requireUpdate(t.NeedsAnimate)},t.prototype.didAnimate=function(t){var e=this.viewObserverCache.viewDidAnimateObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidAnimate(t,this)}},t.prototype.processChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.processChildView=function(t,e,i){t.cascadeProcess(e,i)},t.prototype.isDisplaying=function(){return 0!=(this.viewFlags&t.DisplayingFlag)},t.prototype.needsDisplay=function(t,e){return t},t.prototype.willDisplay=function(t,e){},t.prototype.onDisplay=function(t,e){},t.prototype.didDisplay=function(t,e){},t.prototype.willLayout=function(t){var e=this.viewObserverCache.viewWillLayoutObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewWillLayout(t,this)}},t.prototype.onLayout=function(t){},t.prototype.didLayout=function(t){var e=this.viewObserverCache.viewDidLayoutObservers;if(void 0!==e)for(var i=0,o=e.length;i<o;i+=1){e[i].viewDidLayout(t,this)}},t.prototype.displayChildViews=function(e,i,o){this.forEachChildView((function(n){o.call(this,n,e,i),0!=(n.viewFlags&t.RemovingFlag)&&(n.setViewFlags(n.viewFlags&~t.RemovingFlag),this.removeChildView(n))}),this)},t.prototype.displayChildView=function(t,e,i){t.cascadeDisplay(e,i)},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(se.timing,me.ambient,!1):l.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},t.prototype.willApplyTheme=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillApplyTheme&&s.viewWillApplyTheme(t,e,i,this)}},t.prototype.onApplyTheme=function(t,e,i){},t.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidApplyTheme&&s.viewDidApplyTheme(t,e,i,this)}},t.prototype.getLazyViewService=function(e){var i=this.getViewService(e);if(null===i){var o=t.getViewServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewService(e,i))}return i},t.prototype.getLazyViewProperty=function(e){var i=this.getViewProperty(e);if(null===i){var o=t.getViewPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewProperty(e,i))}return i},t.prototype.getLazyViewAnimator=function(e){var i=this.getViewAnimator(e);if(null===i){var o=t.getViewAnimatorConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setViewAnimator(e,i))}return i},t.prototype.trackWillStartAnimating=function(i){this.animationTracks=e.Arrays.inserted(i,this.animationTracks),this.isCulled()||this.requireUpdate(t.NeedsAnimate)},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){this.animationTracks=e.Arrays.removed(t,this.animationTracks)},t.prototype.getLazyViewFastener=function(e){var i=this.getViewFastener(e);if(null===i){var o=t.getViewFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setViewFastener(e,i)}return i},t.prototype.getLazyGesture=function(t){var e=this.getGesture(t);if(null===e){var i=no.getGestureConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setGesture(t,e))}return e},t.prototype.constraint=function(t,e,i,o){t=h.ConstraintExpression.fromAny(t),void 0!==i&&(i=h.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?h.ConstraintStrength.Required:h.ConstraintStrength.fromAny(o);var r=new h.Constraint(this,n,e,o);return this.addConstraint(r),r},t.prototype.activateConstraint=function(e){var i=this.layoutService.manager;null!=i&&(i.activateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraint=function(e){var i=this.layoutService.manager;null!=i&&(i.deactivateConstraint(e),this.requireUpdate(t.NeedsLayout))},t.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?h.ConstraintStrength.Strong:h.ConstraintStrength.fromAny(i),new h.ConstraintBinding(this,t,e,i)},t.prototype.activateConstraintVariable=function(e){var i=this.layoutService.manager;null!=i&&(i.activateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.deactivateConstraintVariable=function(e){var i=this.layoutService.manager;null!=i&&(i.deactivateConstraintVariable(e),this.requireUpdate(t.NeedsLayout))},t.prototype.setConstraintVariable=function(t,e){var i=this.layoutService.manager;null!=i&&i.setConstraintVariable(t,e)},t.prototype.setViewMember=function(t,e,i,o){var n=this.getLazyViewProperty(t);if(null===n){var r=this.getLazyViewAnimator(t);null===r||r.setState(e,i,o)}else n.setState(e,o)},t.prototype.setViewState=function(e,i,o){for(var n in"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=t.Extrinsic),e){var r=e[n];this.setViewMember(n,r,i,o)}},t.prototype.extendViewContext=function(t){return t},Object.defineProperty(t.prototype,"superViewContext",{get:function(){var t=this.parentView;if(null!==t)return t.viewContext;var e=this.viewportService.viewContext;return this.displayService.updatedViewContext(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageTransform",{get:function(){var t=this.parentView;return null!==t?t.pageTransform.transform(this.parentTransform):r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBounds",{get:function(){var t=this.clientBounds,e=this.clientTransform;return t.transform(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popoverFrame",{get:function(){return this.pageBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientTransform",{get:function(){var t,e=window.pageXOffset,i=window.pageYOffset;t=0!==e||0!==i?r.Transform.translate(e,i):r.Transform.identity();var o=this.pageTransform;return t.transform(o)},enumerable:!1,configurable:!0}),t.prototype.intersectsViewport=function(){var t=this.clientBounds,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return(t.top<=0&&0<t.bottom||0<=t.top&&t.top<i)&&(t.left<=0&&0<t.right||0<=t.left&&t.left<e)},t.getViewServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewServiceConstructors")){var i=e.viewServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewServiceConstructors")||(o.viewServiceConstructors={}),o.viewServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewService(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewPropertyConstructors")){var i=e.viewPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewPropertyConstructors")||(o.viewPropertyConstructors={}),o.viewPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewProperty(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewAnimatorConstructor=function(t,e){for(null===e&&(e=this.prototype);null!==e;){if(Object.prototype.hasOwnProperty.call(e,"viewAnimatorConstructors")){var i=e.viewAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},t.decorateViewAnimator=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"viewAnimatorConstructors")||(o.viewAnimatorConstructors={}),o.viewAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setViewAnimator(i.toString(),e)),e},enumerable:!0,configurable:!0})},t.getViewFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"viewFastenerConstructors")){var i=e.viewFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateViewFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"viewFastenerConstructors")||(r.viewFastenerConstructors={}),r.viewFastenerConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getViewFastener(o);return null===e&&(e=new t(this,n,o),this.setViewFastener(o,e)),e},enumerable:!0,configurable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.CullFlag=4,t.CulledFlag=8,t.HideFlag=16,t.HiddenFlag=32,t.UnboundedFlag=64,t.IntangibleFlag=128,t.TraversingFlag=256,t.ProcessingFlag=512,t.DisplayingFlag=1024,t.RemovingFlag=2048,t.ImmediateFlag=4096,t.CulledMask=t.CullFlag|t.CulledFlag,t.HiddenMask=t.HideFlag|t.HiddenFlag,t.UpdatingMask=t.ProcessingFlag|t.DisplayingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.CullFlag|t.CulledFlag|t.HiddenFlag|t.UnboundedFlag|t.IntangibleFlag|t.TraversingFlag|t.ProcessingFlag|t.DisplayingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsProcess=8192,t.NeedsResize=16384,t.NeedsScroll=32768,t.NeedsChange=65536,t.NeedsAnimate=1<<17,t.NeedsProject=1<<18,t.ProcessMask=t.NeedsProcess|t.NeedsResize|t.NeedsScroll|t.NeedsChange|t.NeedsAnimate|t.NeedsProject,t.NeedsDisplay=1<<19,t.NeedsLayout=1<<20,t.NeedsRender=1<<21,t.NeedsRasterize=1<<22,t.NeedsComposite=1<<23,t.DisplayMask=t.NeedsDisplay|t.NeedsLayout|t.NeedsRender|t.NeedsRasterize|t.NeedsComposite,t.UpdateMask=t.ProcessMask|t.DisplayMask,t.ViewFlagShift=24,t.ViewFlagMask=(1<<t.ViewFlagShift)-1,t.mountFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.powerFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.uncullFlags=t.NeedsResize|t.NeedsChange|t.NeedsLayout,t.insertChildFlags=t.NeedsLayout,t.removeChildFlags=t.NeedsLayout,t.Intrinsic=0,t.Extrinsic=1,t}();Object.defineProperty(ro.prototype,"viewContext",{get:function(){return this.extendViewContext(this.superViewContext)},enumerable:!0,configurable:!0});var so=function(){function t(){this.rootViews=e.Arrays.empty,this.viewManagerObservers=e.Arrays.empty}return t.prototype.addViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddViewManagerObserver(t),this.viewManagerObservers=o,this.onAddViewManagerObserver(t),this.didAddViewManagerObserver(t))},t.prototype.willAddViewManagerObserver=function(t){},t.prototype.onAddViewManagerObserver=function(t){},t.prototype.didAddViewManagerObserver=function(t){},t.prototype.removeViewManagerObserver=function(t){var i=this.viewManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveViewManagerObserver(t),this.viewManagerObservers=o,this.onRemoveViewManagerObserver(t),this.didRemoveViewManagerObserver(t))},t.prototype.willRemoveViewManagerObserver=function(t){},t.prototype.onRemoveViewManagerObserver=function(t){},t.prototype.didRemoveViewManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootViews.length},t.prototype.willAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillAttach&&o.viewManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidAttach&&o.viewManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerWillDetach&&o.viewManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.viewManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewManagerDidDetach&&o.viewManagerDidDetach(this)}},t.prototype.insertRootView=function(t){var i=this.rootViews,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootView(t),this.rootViews=o,n&&this.onAttach(),this.onInsertRootView(t),this.didInsertRootView(t),n&&this.didAttach()}},t.prototype.willInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillInsertRootView&&n.viewManagerWillInsertRootView(t,this)}},t.prototype.onInsertRootView=function(t){},t.prototype.didInsertRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidInsertRootView&&n.viewManagerDidInsertRootView(t,this)}},t.prototype.removeRootView=function(t){var i=this.rootViews,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootView(t),this.rootViews=o,n&&this.onDetach(),this.onRemoveRootView(t),this.didRemoveRootView(t),n&&this.didDetach()}},t.prototype.willRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerWillRemoveRootView&&n.viewManagerWillRemoveRootView(t,this)}},t.prototype.onRemoveRootView=function(t){},t.prototype.didRemoveRootView=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewManagerDidRemoveRootView&&n.viewManagerDidRemoveRootView(t,this)}},t}(),lo=function(t){function i(){var e=t.call(this)||this;return e.viewContext=e.initViewContext(),e.viewportResizeTimer=0,e.reorientationTimer=0,e.throttleScroll=e.throttleScroll.bind(e),e.throttleResize=e.throttleResize.bind(e),e.debounceViewportResize=e.debounceViewportResize.bind(e),e.throttleViewportResize=e.throttleViewportResize.bind(e),e.debounceReorientation=e.debounceReorientation.bind(e),e.throttleReorientation=e.throttleReorientation.bind(e),e}return w(i,t),i.prototype.initViewContext=function(){return{updateTime:0,viewIdiom:"unspecified",viewport:this.detectViewport()}},Object.defineProperty(i.prototype,"viewport",{get:function(){return this.viewContext.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewIdiom",{get:function(){return this.viewContext.viewIdiom},enumerable:!1,configurable:!0}),i.prototype.detectViewport=function(){return io.detect()},i.prototype.detectViewIdiom=function(t){return t.width<960||t.height<480?"mobile":"desktop"},i.prototype.updateViewIdiom=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==r.detectViewIdiom&&void 0!==(e=r.detectViewIdiom(t,this)))break}void 0===e&&(e=this.detectViewIdiom(t)),void 0!==e&&this.setViewIdiom(e)},i.prototype.setViewIdiom=function(t){var e=this.viewContext,i=e.viewIdiom;i!==t&&(this.willSetViewIdiom(t,i),e.viewIdiom=t,this.onSetViewIdiom(t,i),this.didSetViewIdiom(t,i))},i.prototype.willSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerWillSetViewIdiom&&r.viewportManagerWillSetViewIdiom(t,e,this)}},i.prototype.onSetViewIdiom=function(t,e){for(var i=this.rootViews,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(ro.NeedsLayout)},i.prototype.didSetViewIdiom=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewportManagerDidSetViewIdiom&&r.viewportManagerDidSetViewIdiom(t,e,this)}},i.prototype.willReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerWillReorient&&n.viewportManagerWillReorient(t,this)}},i.prototype.onReorient=function(t){},i.prototype.didReorient=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewportManagerDidReorient&&n.viewportManagerDidReorient(t,this)}},i.prototype.onAddViewManagerObserver=function(e){t.prototype.onAddViewManagerObserver.call(this,e),this.isAttached()&&this.updateViewIdiom(this.viewport)},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents(),this.updateViewIdiom(this.viewport)},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&(window.addEventListener("scroll",this.throttleScroll,{passive:!0}),window.addEventListener("resize",this.throttleResize),window.addEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.addEventListener("resize",this.debounceViewportResize))},i.prototype.detachEvents=function(){"undefined"!=typeof window&&(window.removeEventListener("scroll",this.throttleScroll),window.removeEventListener("resize",this.throttleResize),window.removeEventListener("orientationchange",this.debounceReorientation),void 0!==window.visualViewport&&window.visualViewport.removeEventListener("resize",this.debounceViewportResize))},i.prototype.throttleScroll=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(ro.NeedsScroll)},i.prototype.throttleResize=function(){var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(ro.NeedsResize|ro.NeedsLayout)},i.prototype.debounceViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0),this.viewportResizeTimer=setTimeout(this.throttleViewportResize,i.ViewportResizeDelay)},i.prototype.throttleViewportResize=function(){0!==this.viewportResizeTimer&&(clearTimeout(this.viewportResizeTimer),this.viewportResizeTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.updateViewIdiom(t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(ro.NeedsResize|ro.NeedsScroll|ro.NeedsLayout)},i.prototype.debounceReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0),this.reorientationTimer=setTimeout(this.throttleReorientation,i.ReorientationDelay)},i.prototype.throttleReorientation=function(){0!==this.reorientationTimer&&(clearTimeout(this.reorientationTimer),this.reorientationTimer=0);var t=this.detectViewport();this.viewContext.viewport=t,this.willReorient(t.orientation),this.updateViewIdiom(t),this.onReorient(t.orientation),this.didReorient(t.orientation);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1)e[i].requireUpdate(ro.NeedsResize|ro.NeedsScroll|ro.NeedsLayout)},i.global=function(){return new i},i.ViewportResizeDelay=200,i.ReorientationDelay=100,m([e.Lazy],i,"global",null),i}(so),ao=function(t){function i(){var e=t.call(this)||this;return e.rootFlags=0,e.processTimer=0,e.displayFrame=0,e.updateDelay=i.MinUpdateDelay,e.runProcessPass=e.runProcessPass.bind(e),e.runDisplayPass=e.runDisplayPass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.updatedViewContext=function(t){return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return ro.NeedsResize|ro.NeedsScroll},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootViews()},i.prototype.powerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootView(o)}},i.prototype.powerRootView=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootViews()},i.prototype.unpowerRootViews=function(){for(var t=this.rootViews,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootView(o)}},i.prototype.unpowerRootView=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){this.rootFlags=t},i.prototype.needsUpdate=function(t,e){return t},i.prototype.requestUpdate=function(t,e,o){e=this.needsUpdate(e,o);var n=this.rootFlags&~e&ro.UpdateMask;0!=(e&ro.ProcessMask)&&(n|=ro.NeedsProcess),0!=(e&ro.DisplayMask)&&(n|=ro.NeedsDisplay),(0!==n||o)&&(this.setRootFlags(this.rootFlags|n),o&&this.updateDelay<=i.MaxProcessInterval&&0==(this.rootFlags&(ro.TraversingFlag|ro.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate())},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.processTimer&&0===this.displayFrame&&0==(t&ro.UpdatingMask)&&0!=(t&ro.UpdateMask)&&(this.processTimer=setTimeout(this.runProcessPass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.processTimer&&(clearTimeout(this.processTimer),this.processTimer=0),0!==this.displayFrame&&(cancelAnimationFrame(this.displayFrame),this.displayFrame=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|ro.ImmediateFlag);try{0!=(this.rootFlags&ro.ProcessMask)&&(this.cancelUpdate(),this.runProcessPass(!0)),0!=(this.rootFlags&ro.DisplayMask)&&this.updateDelay<=i.MaxProcessInterval&&(this.cancelUpdate(),this.runDisplayPass(void 0,!0))}finally{this.setRootFlags(this.rootFlags&~ro.ImmediateFlag)}},i.prototype.runProcessPass=function(t){void 0===t&&(t=!1),this.setRootFlags(this.rootFlags&~ro.ProcessMask|ro.TraversingFlag|ro.ProcessingFlag);try{for(var e=performance.now(),o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&ro.ProcessMask)){var s=r.viewportService.viewContext;s.updateTime=e,r.cascadeProcess(0,s)}}var l=performance.now(),a=Math.max(i.MinProcessInterval,this.updateDelay);this.updateDelay=l-e>a?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&ro.DisplayMask)?this.displayFrame=requestAnimationFrame(this.runDisplayPass):0!=(this.rootFlags&ro.ProcessMask)&&(t&&(a=Math.max(i.MaxProcessInterval,a)),this.processTimer=setTimeout(this.runProcessPass,a))}finally{this.setRootFlags(this.rootFlags&~(ro.TraversingFlag|ro.ProcessingFlag))}},i.prototype.runDisplayPass=function(t,e){void 0===e&&(e=!1),this.setRootFlags(this.rootFlags&~ro.DisplayMask|ro.TraversingFlag|ro.DisplayingFlag);try{void 0===t&&(t=performance.now());for(var o=this.rootViews,n=0;n<o.length;n+=1){var r=o[n];if(0!=(r.viewFlags&ro.DisplayMask)){var s=r.viewportService.viewContext;s.updateTime=t,r.cascadeDisplay(0,s)}}if(this.cancelUpdate(),0!=(this.rootFlags&ro.ProcessMask)){var l=this.updateDelay;e&&(l=Math.max(i.MaxProcessInterval,l)),this.processTimer=setTimeout(this.runProcessPass,l)}else 0!=(this.rootFlags&ro.DisplayMask)&&(this.displayFrame=requestAnimationFrame(this.runDisplayPass))}finally{this.setRootFlags(this.rootFlags&~(ro.TraversingFlag|ro.DisplayingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.requestUpdate(e,e.viewFlags&ro.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinProcessInterval=12,i.MaxProcessInterval=33,m([e.Lazy],i,"global",null),i}(so),ho=function(t){function i(){var e=t.call(this)||this;return e.solver=e.createSolver(),e}return w(i,t),i.prototype.createSolver=function(){return new h.ConstraintSolver},i.prototype.activateConstraint=function(t){this.solver.addConstraint(t)},i.prototype.deactivateConstraint=function(t){this.solver.removeConstraint(t)},i.prototype.activateConstraintVariable=function(t){this.solver.addConstraintVariable(t)},i.prototype.deactivateConstraintVariable=function(t){this.solver.removeConstraintVariable(t)},i.prototype.setConstraintVariable=function(t,e){this.solver.setConstraintVariable(t,e)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(so),uo=function(t){function i(){var e=t.call(this)||this;return e.mood=e.initMood(),e.theme=e.initTheme(),e}return w(i,t),i.prototype.initMood=function(){return me.default},i.prototype.setMood=function(t){this.mood=t,this.applyTheme(this.theme,t);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.mood.takesPrecedence(ro.Intrinsic)&&(n.mood.setState(t,ro.Intrinsic),n.requireUpdate(ro.NeedsChange))}},i.prototype.initTheme=function(){return"dark"===io.detect().colorScheme?be.dark:be.light},i.prototype.setTheme=function(t){this.theme=t,this.applyTheme(t,this.mood);for(var e=this.rootViews,i=0,o=e.length;i<o;i+=1){var n=e[i];n.theme.takesPrecedence(ro.Intrinsic)&&(n.theme.setState(t,ro.Intrinsic),n.requireUpdate(ro.NeedsChange))}},i.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(se.timing,me.ambient,!1):l.Timing.fromAny(i),this.willApplyTheme(t,e,i),this.onApplyTheme(t,e,i),this.didApplyTheme(t,e,i)},i.prototype.willApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.themeManagerWillApplyTheme&&s.themeManagerWillApplyTheme(t,e,i,this)}},i.prototype.onApplyTheme=function(t,e,i){},i.prototype.didApplyTheme=function(t,e,i){for(var o=this.viewManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.themeManagerDidApplyTheme&&s.themeManagerDidApplyTheme(t,e,i,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.applyTheme(this.theme,this.mood)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(so),po={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"modalView"in e&&"modalState"in e&&"modality"in e&&"function"==typeof e.showModal&&"function"==typeof e.hideModal}return!1}},co=function(t){function i(){var i=t.call(this)||this;return i.modals=e.Arrays.empty,i.modality=0,i.matteView=null,i.onClick=i.onClick.bind(i),i}return w(i,t),i.prototype.isModal=function(){return 0!==this.modality},i.prototype.setMatteView=function(t){this.matteView=t},i.prototype.insertModalView=function(t){var e=this.matteView;null!==e?e.appendChildView(t):this.constructor.insertModalView(t)},i.prototype.presentModal=function(t,i){void 0===i&&(i={});var o=this.modals,n=e.Arrays.inserted(t,o);if(o!==n){i.multi||this.dismissModals(),this.willPresentModal(t,i),this.modals=n;var r=t.modalView;null===r||r.isMounted()||this.insertModalView(r),t.showModal(i,!0),this.onPresentModal(t,i),this.updateModality(),this.didPresentModal(t,i)}},i.prototype.willPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillPresentModal&&r.modalManagerWillPresentModal(t,e,this)}},i.prototype.onPresentModal=function(t,e){},i.prototype.didPresentModal=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidPresentModal&&r.modalManagerDidPresentModal(t,e,this)}},i.prototype.dismissModal=function(t){var i=this.modals,o=e.Arrays.removed(t,i);i!==o&&(this.willDismissModal(t),this.modals=o,t.hideModal(!0),this.onDismissModal(t),this.updateModality(),this.didDismissModal(t))},i.prototype.willDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerWillDismissModal&&n.modalManagerWillDismissModal(t,this)}},i.prototype.onDismissModal=function(t){},i.prototype.didDismissModal=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDismissModal&&n.modalManagerDidDismissModal(t,this)}},i.prototype.dismissModals=function(){for(var t=0,e=this.modals.length;t<e;t+=1)this.dismissModal(this.modals[t])},i.prototype.toggleModal=function(t,e){var i=t.modalState;"hidden"===i||"hiding"===i?this.presentModal(t,e):"shown"!==i&&"showing"!==i||this.dismissModal(t)},i.prototype.updateModality=function(){for(var t=this.modality,e=0,i=this.modals,o=0,n=i.length;o<n;o+=1){var r=+i[o].modality;e=Math.min(Math.max(e,r),1)}t!==e&&(this.willUpdateModality(e,t),this.modality=e,this.onUpdateModality(e,t),this.didUpdateModality(e,t))},i.prototype.willUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillUpdateModality&&r.modalManagerWillUpdateModality(t,e,this)}},i.prototype.onUpdateModality=function(t,e){},i.prototype.didUpdateModality=function(t,e){for(var i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerDidUpdateModality&&r.modalManagerDidUpdateModality(t,e,this)}},i.prototype.displaceModals=function(t){this.willDisplaceModals(t)||(this.onDisplaceModals(t),this.didDisplaceModals(t))},i.prototype.willDisplaceModals=function(t){for(var e,i=this.viewManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.modalManagerWillDisplaceModals&&(e=r.modalManagerWillDisplaceModals(t,this))}return void 0!==e&&e},i.prototype.onDisplaceModals=function(t){for(var e=this.modals,i=0;i<e.length;){var o=e[i];"shown"===o.modalState?this.dismissModal(o):i+=1}},i.prototype.didDisplaceModals=function(t){for(var e=this.viewManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.modalManagerDidDisplaceModals&&n.modalManagerDidDisplaceModals(t,this)}},i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),this.attachEvents(e)},i.prototype.onRemoveRootView=function(e){t.prototype.onRemoveRootView.call(this,e),this.detachEvents(e)},i.prototype.attachEvents=function(t){t.on("click",this.onClick)},i.prototype.detachEvents=function(t){t.off("click",this.onClick)},i.prototype.onClick=function(t){this.displaceModals(t)},i.insertModalView=function(t){throw new TypeError(""+t)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}(so),fo=function(t,e){return this instanceof fo?vo.call(this,t,e):(i=t,ro.decorateViewService.bind(ro,fo.define(i)));var i};function vo(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!0,this.serviceFlags=0,this.superService=null,this.manager=void 0,this}w(fo,Object),fo.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),this.inherit=t,this.bindSuperService())},fo.prototype.isInherited=function(){return 0!=(this.serviceFlags&fo.InheritedFlag)},fo.prototype.setServiceFlags=function(t){this.serviceFlags=t},Object.defineProperty(fo.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),fo.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentView;if(null!==o){if(null===(n=(e=o).getViewService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyViewService(t))&&(i=n)}break}this.superService=i}void 0!==this.manager&&null!==this.manager||(null!==i?(this.setServiceFlags(this.serviceFlags|fo.InheritedFlag),this.manager=i.manager):(this.setServiceFlags(this.serviceFlags&~fo.InheritedFlag),this.manager=this.initManager()))},fo.prototype.unbindSuperService=function(){this.superService=null,this.setServiceFlags(this.serviceFlags&~fo.InheritedFlag)},Object.defineProperty(fo.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),fo.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},fo.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},fo.prototype.initManager=function(){return this.manager},fo.prototype.isMounted=function(){return 0!=(this.serviceFlags&fo.MountedFlag)},fo.prototype.mount=function(){0==(this.serviceFlags&fo.MountedFlag)&&(this.willMount(),this.setServiceFlags(this.serviceFlags|fo.MountedFlag),this.onMount(),this.didMount())},fo.prototype.willMount=function(){},fo.prototype.onMount=function(){this.bindSuperService()},fo.prototype.didMount=function(){},fo.prototype.unmount=function(){0!=(this.serviceFlags&fo.MountedFlag)&&(this.willUnmount(),this.setServiceFlags(this.serviceFlags&~fo.MountedFlag),this.onUnmount(),this.didUnmount())},fo.prototype.willUnmount=function(){},fo.prototype.onUnmount=function(){this.unbindSuperService()},fo.prototype.didUnmount=function(){},fo.prototype.toString=function(){return this.name},fo.getClass=function(t){return t===lo?go:t===ao?wo:t===ho?mo:t===uo?So:t===co?Co:t===so?yo:null},fo.define=function(t){var e=t.extends,i=t.inherit,o=t.manager;delete t.extends,delete t.inherit,delete t.manager,void 0===e&&(e=fo.getClass(t.type)),null===e&&(e=fo);var n=function(t,n){var r=function(){return r.manager};return Object.setPrototypeOf(r,this),r=e.call(r,t,n)||r,void 0!==o&&(r.manager=o),void 0!==i&&(r.inherit=i),r},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),n},fo.MountedFlag=1,fo.InheritedFlag=2;var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.didMount=function(){var e=this.manager;null!=e&&(this.isInherited()||e.insertRootView(this.owner),!1!==this.observe&&e.addViewManagerObserver(this)),t.prototype.didMount.call(this)},e.prototype.willUnmount=function(){t.prototype.willUnmount.call(this);var e=this.manager;null!=e&&(!1!==this.observe&&e.removeViewManagerObserver(this),this.isInherited()||e.removeRootView(this.owner))},e}(fo),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"viewContext",{get:function(){var t=this.manager;return null==t&&(t=lo.global()),t.viewContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){var t=this.manager;return null==t&&(t=lo.global()),t.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewIdiom",{get:function(){var t=this.manager;return null==t&&(t=lo.global()),t.viewIdiom},enumerable:!1,configurable:!0}),e.prototype.setViewIdiom=function(t){var e=this.manager;null==e&&(e=lo.global()),e.setViewIdiom(t)},e.prototype.initManager=function(){return lo.global()},e}(yo);fo({extends:go,type:lo,observe:!1,manager:lo.global()})(ro.prototype,"viewportService");var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.updatedViewContext=function(t){var e=this.manager;return null==e&&(e=ao.global()),e.updatedViewContext(t)},e.prototype.requestUpdate=function(t,e,i){var o=this.manager;null==o&&(o=ao.global()),o.requestUpdate(t,e,i)},e.prototype.initManager=function(){return ao.global()},e}(yo);fo({extends:wo,type:ao,observe:!1,manager:ao.global()})(ro.prototype,"displayService");var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return ho.global()},e}(yo);fo({extends:mo,type:ho,observe:!1,manager:ho.global()})(ro.prototype,"layoutService");var So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"mood",{get:function(){var t=this.manager;return null==t&&(t=uo.global()),t.mood},enumerable:!1,configurable:!0}),e.prototype.setMood=function(t){var e=this.manager;null==e&&(e=uo.global()),e.setMood(t)},Object.defineProperty(e.prototype,"theme",{get:function(){var t=this.manager;return null==t&&(t=uo.global()),t.theme},enumerable:!1,configurable:!0}),e.prototype.setTheme=function(t){var e=this.manager;null==e&&(e=uo.global()),e.setTheme(t)},e.prototype.initManager=function(){return uo.global()},e}(yo);fo({extends:So,type:uo,observe:!1,manager:uo.global()})(ro.prototype,"themeService");var Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.presentModal=function(t,e){var i=this.manager;null==i&&(i=co.global()),i.presentModal(t,e)},e.prototype.dismissModal=function(t){var e=this.manager;null==e&&(e=co.global()),e.dismissModal(t)},e.prototype.dismissModals=function(){var t=this.manager;null==t&&(t=co.global()),t.dismissModals()},e.prototype.toggleModal=function(t,e){var i=this.manager;null==i&&(i=co.global()),i.toggleModal(t,e)},e.prototype.updateModality=function(){var t=this.manager;null==t&&(t=co.global()),t.updateModality()},e.prototype.displaceModals=function(t){var e=this.manager;null==e&&(e=co.global()),e.displaceModals(t)},e.prototype.initManager=function(){return co.global()},e}(yo);fo({extends:Co,type:co,observe:!1,manager:co.global()})(ro.prototype,"modalService");var bo=function(t,e){return this instanceof bo?Vo.call(this,t,e):(i=t,ro.decorateViewProperty.bind(ro,bo.define(i)));var i};function Vo(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!1,this.superProperty=null,this.subProperties=null,this.precedence=ro.Intrinsic,this.propertyFlags=bo.UpdatedFlag,this.ownState=void 0,this}w(bo,Object),bo.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),this.inherit=t,this.bindSuperProperty())},bo.prototype.isInherited=function(){return 0!=(this.propertyFlags&bo.InheritedFlag)},bo.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&bo.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~bo.OverrideFlag|bo.InheritedFlag),this.setOwnState(e.state),this.change());else if(!t&&0!=(this.propertyFlags&bo.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~bo.InheritedFlag)}},Object.defineProperty(bo.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),bo.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentView;null!==e;){var i=e.getLazyViewProperty(t);if(null!==i){this.superProperty=i,i.addSubProperty(this),0==(this.propertyFlags&bo.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|bo.InheritedFlag),this.setOwnState(i.state),this.change());break}e=e.parentView}},bo.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),this.superProperty=null,this.setPropertyFlags(this.propertyFlags&~bo.InheritedFlag))},bo.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],this.subProperties=e),e.push(t)},bo.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(bo.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),bo.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},bo.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},bo.prototype.setState=function(t,e){void 0===e&&(e=ro.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~bo.InheritedFlag|bo.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},bo.prototype.setOwnState=function(t){t=this.fromAny(t);var e=this.state;this.equalState(t,e)||(this.willSetState(t,e),this.ownState=t,this.setPropertyFlags(this.propertyFlags|bo.UpdatedFlag),this.onSetState(t,e),this.updateSubProperties(t,e),this.didSetState(t,e))},bo.prototype.willSetState=function(t,e){},bo.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},bo.prototype.didSetState=function(t,e){},bo.prototype.takesPrecedence=function(t){return t>=this.precedence},bo.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),this.precedence=t,this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},bo.prototype.willSetPrecedence=function(t,e){},bo.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&bo.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~bo.InheritedFlag)}},bo.prototype.didSetPrecedence=function(t,e){},bo.prototype.setPropertyFlags=function(t){this.propertyFlags=t},bo.prototype.isUpdated=function(){return 0!=(this.propertyFlags&bo.UpdatedFlag)},Object.defineProperty(bo.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&bo.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),bo.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&bo.UpdatedFlag)?(this.setPropertyFlags(t&~bo.UpdatedFlag),this.state):void 0},bo.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~bo.UpdatedFlag),this.state},bo.prototype.change=function(){this.owner.requireUpdate(ro.NeedsChange)},bo.prototype.onChange=function(){this.isInherited()&&this.onChangeInherited()},bo.prototype.onChangeInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},bo.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.change()}},bo.prototype.equalState=function(t,i){return e.Equals(t,i)},bo.prototype.fromAny=function(t){return t},bo.prototype.isMounted=function(){return 0!=(this.propertyFlags&bo.MountedFlag)},bo.prototype.mount=function(){0==(this.propertyFlags&bo.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|bo.MountedFlag),this.onMount(),this.didMount())},bo.prototype.willMount=function(){},bo.prototype.onMount=function(){this.bindSuperProperty()},bo.prototype.didMount=function(){},bo.prototype.unmount=function(){0!=(this.propertyFlags&bo.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~bo.MountedFlag),this.onUnmount(),this.didUnmount())},bo.prototype.willUnmount=function(){},bo.prototype.onUnmount=function(){this.unbindSuperProperty()},bo.prototype.didUnmount=function(){},bo.prototype.toString=function(){return this.name},bo.getClass=function(t){return t===String?Po:t===Boolean?Mo:t===Number?Do:null},bo.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=bo.getClass(t.type)),null===i&&(i=bo,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e){return 0===arguments.length?a.state:(a.setState(t,e),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==n&&(l=a.fromAny(n)),void 0!==l&&(a.ownState=l),void 0!==r&&(a.precedence=r),void 0!==o&&(a.inherit=o),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l},bo.MountedFlag=1,bo.UpdatedFlag=2,bo.OverrideFlag=4,bo.InheritedFlag=8,bo.ConstrainedFlag=16,bo.ConstrainingFlag=32,bo({extends:void 0,type:Se,state:null,inherit:!0})(ro.prototype,"mood"),bo({extends:void 0,type:Ve,state:null,inherit:!0})(ro.prototype,"theme");var To=function(t,e){return this instanceof To?Fo.call(this,t,e):(i=t,ro.decorateViewProperty.bind(ro,To.define(i)));var i};function Fo(t,e){var i=bo.call(this,t,e)||this;return i.id=h.ConstraintKey.nextId(),i.strength=h.ConstraintStrength.Strong,i.conditionCount=0,i}w(To,bo),To.prototype.isExternal=function(){return!0},To.prototype.isDummy=function(){return!1},To.prototype.isInvalid=function(){return!1},To.prototype.isConstant=function(){return!1},To.prototype.onSetState=function(t,e){bo.prototype.onSetState.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,void 0!==t?this.toNumber(t):0)},To.prototype.evaluateConstraintVariable=function(){},To.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&this.setOwnState(t)},Object.defineProperty(To.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(To.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(To.prototype,"terms",{get:function(){var t=new h.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(To.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),To.prototype.plus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.product(2,this):h.ConstraintExpression.sum(this,t)},To.prototype.negative=function(){return h.ConstraintExpression.product(-1,this)},To.prototype.minus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.zero:h.ConstraintExpression.sum(this,t.negative())},To.prototype.times=function(t){return h.ConstraintExpression.product(t,this)},To.prototype.divide=function(t){return h.ConstraintExpression.product(1/t,this)},To.prototype.isConstrained=function(){return 0!=(this.propertyFlags&bo.ConstrainedFlag)},To.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.propertyFlags;return t&&0==(e&bo.ConstrainedFlag)?(this.setPropertyFlags(e|bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&bo.ConstrainedFlag)||(this.setPropertyFlags(e&~bo.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},To.prototype.addConstraintCondition=function(t,e){this.conditionCount+=1,!this.isConstrained()&&1===this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},To.prototype.removeConstraintCondition=function(t,e){this.conditionCount-=1,!this.isConstrained()&&0===this.conditionCount&&this.isMounted()&&this.stopConstraining()},To.prototype.isConstraining=function(){return 0!=(this.propertyFlags&bo.ConstrainingFlag)},To.prototype.startConstraining=function(){0==(this.propertyFlags&bo.ConstrainingFlag)&&(this.willStartConstraining(),this.setPropertyFlags(this.propertyFlags|bo.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},To.prototype.willStartConstraining=function(){},To.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},To.prototype.didStartConstraining=function(){},To.prototype.stopConstraining=function(){0!=(this.propertyFlags&bo.ConstrainingFlag)&&(this.willStopConstraining(),this.setPropertyFlags(this.propertyFlags&~bo.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},To.prototype.willStopConstraining=function(){},To.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},To.prototype.didStopConstraining=function(){},To.prototype.updateConstraintVariable=function(){var t=this.state;void 0!==t&&this.owner.setConstraintVariable(this,this.toNumber(t))},To.prototype.onMount=function(){bo.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},To.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),bo.prototype.onUnmount.call(this)},To.getClass=function(t){return t===Number?xo:t===r.Length?Lo:null},To.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=void 0!==t.strength?h.ConstraintStrength.fromAny(t.strength):void 0,s=t.constrain,l=t.precedence,a=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=To.getClass(t.type)),null===i&&(i=To,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var u=function(t,e){var h,u=function(t,e){return 0===arguments.length?u.state:(u.setState(t,e),u.owner)};return Object.setPrototypeOf(u,this),u=i.call(u,t,e)||u,void 0!==a?h=u.fromAny(a()):void 0!==n&&(h=u.fromAny(n)),void 0!==h&&(u.ownState=h),void 0!==r&&(u.strength=r),void 0!==l&&(u.precedence=l),void 0!==o&&(u.inherit=o),!0===s&&u.constrain(),u},p=t;return Object.setPrototypeOf(u,i),(u.prototype=p).constructor=u,Object.setPrototypeOf(u.prototype,i.prototype),u};var Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}(bo),Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e.prototype.equalState=function(t,e){return t===e},e}(bo),Do=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(bo),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(To),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(To),Ao=function(){function t(){this.ownValue=void 0,this.ownState=void 0,this.ownLook=null,this.timing=null,this.interpolator=null,this.precedence=ro.Intrinsic,this.animatorFlags=t.UpdatedFlag}return t.prototype.isDefined=function(t){return null!=t},Object.defineProperty(t.prototype,"value",{get:function(){return this.ownValue},enumerable:!1,configurable:!0}),t.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" value");return t},t.prototype.getValueOr=function(t){var e=this.value;return null==e&&(e=t),e},t.prototype.setValue=function(e,i){1===arguments.length&&(i=this.value),this.equalState(e,i)||(this.willSetValue(e,i),this.ownValue=e,this.setAnimatorFlags(this.animatorFlags|t.UpdatedFlag),this.onSetValue(e,i),this.didSetValue(e,i))},t.prototype.willSetValue=function(t,e){},t.prototype.onSetValue=function(t,e){},t.prototype.didSetValue=function(t,e){},t.prototype.setIntermediateValue=function(e,i){var o=arguments.length>1?this.state:void 0,n=arguments.length>1&&!this.equalState(i,o);n&&(this.willSetState(i,o),this.ownState=i,this.timing=null,this.interpolator=null,this.onSetState(i,o)),this.setValue(e),n&&(this.didSetState(i,o),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating()))},Object.defineProperty(t.prototype,"state",{get:function(){return this.ownState},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+(this instanceof Function?this.name:"animator")+" state");return t},t.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},t.prototype.setState=function(e,i,o){"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=ro.Extrinsic),o>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~t.InheritedFlag|t.OverrideFlag),this.setPrecedence(o),this.setOwnLook(null,!1),this.setOwnState(e,i))},t.prototype.setOwnState=function(t,e){var i=this.state;this.isDefined(i)?this.equalState(t,i)||(!1===(e=void 0!==e&&!1!==e&&(!0===e?null!==this.timing&&this.timing:l.Timing.fromAny(e)))?this.setImmediateState(t,i):this.setAnimatedState(t,i,e)):this.setImmediateState(t,i)},t.prototype.setImmediateState=function(e,i){this.willSetState(e,i),this.ownState=e,this.timing=null,this.interpolator=null,this.onSetState(e,i),this.setValue(e),this.didSetState(e,i),0!=(this.animatorFlags&t.AnimatingFlag)&&(this.onInterrupt(this.value),this.stopAnimating())},t.prototype.setAnimatedState=function(e,i,o){this.willSetState(e,i),this.ownState=e,this.timing=o,this.interpolator=l.Interpolator(this.value,e),0!=(this.animatorFlags&t.AnimatingFlag)?this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag|t.InterruptFlag):this.setAnimatorFlags(this.animatorFlags|t.DivergedFlag),this.onSetState(e,i),this.didSetState(e,i),this.startAnimating()},t.prototype.willSetState=function(t,e){},t.prototype.onSetState=function(t,e){},t.prototype.didSetState=function(t,e){},Object.defineProperty(t.prototype,"look",{get:function(){return this.ownLook},enumerable:!1,configurable:!0}),t.prototype.setLook=function(e,i,o){"number"==typeof i?(o=i,i=void 0):void 0===o&&(o=ro.Extrinsic),o>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~t.InheritedFlag|t.OverrideFlag),this.setPrecedence(o),this.setOwnLook(e,i))},t.prototype.setOwnLook=function(t,e){var i=this.look;t!==i&&(e=void 0!==e&&l.Timing.fromAny(e),this.willSetLook(t,i,e),this.ownLook=t,this.onSetLook(t,i,e),this.didSetLook(t,i,e))},t.prototype.willSetLook=function(t,e,i){},t.prototype.onSetLook=function(t,e,i){},t.prototype.didSetLook=function(t,e,i){},t.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),this.precedence=t,this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},t.prototype.takesPrecedence=function(t){return t>=this.precedence},t.prototype.willSetPrecedence=function(t,e){},t.prototype.onSetPrecedence=function(t,e){},t.prototype.didSetPrecedence=function(t,e){},t.prototype.setAnimatorFlags=function(t){this.animatorFlags=t},t.prototype.isUpdated=function(){return 0!=(this.animatorFlags&t.UpdatedFlag)},Object.defineProperty(t.prototype,"updatedValue",{get:function(){return 0!=(this.animatorFlags&t.UpdatedFlag)?this.value:void 0},enumerable:!1,configurable:!0}),t.prototype.takeUpdatedValue=function(){var e=this.animatorFlags;return 0!=(e&t.UpdatedFlag)?(this.setAnimatorFlags(e&~t.UpdatedFlag),this.value):void 0},t.prototype.takeValue=function(){return this.setAnimatorFlags(this.animatorFlags&~t.UpdatedFlag),this.value},t.prototype.isAnimating=function(){return 0!=(this.animatorFlags&t.AnimatingFlag)},t.prototype.startAnimating=function(){0==(this.animatorFlags&t.AnimatingFlag)&&(this.willStartAnimating(),this.setAnimatorFlags(this.animatorFlags|t.AnimatingFlag),this.onStartAnimating(),this.didStartAnimating())},t.prototype.willStartAnimating=function(){},t.prototype.onStartAnimating=function(){},t.prototype.didStartAnimating=function(){},t.prototype.stopAnimating=function(){0!=(this.animatorFlags&t.AnimatingFlag)&&(this.willStopAnimating(),this.setAnimatorFlags(this.animatorFlags&~t.AnimatingFlag),this.onStopAnimating(),this.didStopAnimating())},t.prototype.willStopAnimating=function(){},t.prototype.onStopAnimating=function(){},t.prototype.didStopAnimating=function(){},t.prototype.onAnimate=function(e){if(0!=(this.animatorFlags&t.AnimatingFlag)){var i=this.value,o=this.timing;null===o&&(o=l.Easing.linear.withDomain(e,e),this.timing=o);var n=this.interpolator;null===n&&(n=l.Interpolator(i,this.state),this.interpolator=n),0!=(this.animatorFlags&t.InterruptFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.InterruptFlag),this.onInterrupt(i)),0!=(this.animatorFlags&t.DivergedFlag)&&(this.setAnimatorFlags(this.animatorFlags&~t.DivergedFlag),o=this.equalState(this.state,i)?o.withDomain(e-o.duration,e):o.withDomain(e,e+o.duration),this.timing=o,this.onBegin(i));var r=o(e),s=n(r);this.setValue(s),r>=1&&(this.stopAnimating(),this.interpolator=null,this.onEnd(s))}},t.prototype.onBegin=function(t){},t.prototype.onEnd=function(t){},t.prototype.onInterrupt=function(t){},t.prototype.equalState=function(t,i){return e.Equals(t,i)},t.MountedFlag=1,t.UpdatedFlag=2,t.OverrideFlag=4,t.InheritedFlag=8,t.ConstrainedFlag=16,t.ConstrainingFlag=32,t.AnimatingFlag=64,t.DivergedFlag=128,t.InterruptFlag=256,t.AnimatorFlagsShift=12,t}(),Oo=function(t,e){return this instanceof Oo?Ro.call(this,t,e):(i=t,ro.decorateViewAnimator.bind(Oo,Oo.define(i)));var i};function Ro(t,e){var i=Ao.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),i.owner=t,i.inherit=!1,i.superAnimator=null,i.subAnimators=null,i}w(Oo,Ao),Oo.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperAnimator(),this.inherit=t,this.bindSuperAnimator())},Oo.prototype.isInherited=function(){return 0!=(this.animatorFlags&Ao.InheritedFlag)},Oo.prototype.setInherited=function(t){if(t&&0==(this.animatorFlags&Ao.InheritedFlag))null!==(e=this.superAnimator)&&e.precedence>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags&~Ao.OverrideFlag|Ao.InheritedFlag),this.setOwnLook(e.look),null===this.look&&(this.ownState=e.state,this.setValue(e.value,this.value),e.isAnimating()?this.startAnimating():this.stopAnimating()));else if(!t&&0!=(this.animatorFlags&Ao.InheritedFlag)){var e;null!==(e=this.superAnimator)&&e.precedence<this.precedence&&this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag)}},Object.defineProperty(Oo.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),Oo.prototype.bindSuperAnimator=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentView;null!==e;){var i=e.getLazyViewAnimator(t);if(null!==i){this.superAnimator=i,i.addSubAnimator(this),0==(this.animatorFlags&Ao.OverrideFlag)&&i.precedence>=this.precedence&&(this.setAnimatorFlags(this.animatorFlags|Ao.InheritedFlag),this.setOwnLook(i.look),null===this.look&&(this.ownState=i.state,this.setValue(i.value,this.value),i.isAnimating()?this.startAnimating():this.stopAnimating()));break}e=e.parentView}},Oo.prototype.unbindSuperAnimator=function(){var t=this.superAnimator;null!==t&&(t.removeSubAnimator(this),this.superAnimator=null,this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag))},Oo.prototype.addSubAnimator=function(t){var e=this.subAnimators;null===e&&(e=[],this.subAnimators=e),e.push(t)},Oo.prototype.removeSubAnimator=function(t){var e=this.subAnimators;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(Oo.prototype,"superValue",{get:function(){var t=this.superAnimator;return null!==t?t.value:void 0},enumerable:!0,configurable:!0}),Oo.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},Oo.prototype.onSetValue=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},Object.defineProperty(Oo.prototype,"superState",{get:function(){var t=this.superAnimator;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Oo.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},Oo.prototype.setOwnState=function(t,e){t=this.fromAny(t),Ao.prototype.setOwnState.call(this,t,e)},Oo.prototype.setImmediateState=function(t,e){Ao.prototype.setImmediateState.call(this,t,e);var i=this.subAnimators;if(null!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];r.isInherited()&&r.startAnimating()}},Oo.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.animatorFlags&Ao.InheritedFlag)){var i=this.superAnimator;null!==i&&i.precedence<this.precedence&&this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag)}},Object.defineProperty(Oo.prototype,"superLook",{get:function(){var t=this.superAnimator;return null!==t?t.look:null},enumerable:!0,configurable:!0}),Oo.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},Oo.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(se.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(ro.NeedsChange)},Oo.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(se.timing,!0)),this.setOwnState(n,i))}},Oo.prototype.onAnimate=function(t){this.isInherited()?this.onAnimateInherited(t):Ao.prototype.onAnimate.call(this,t)},Oo.prototype.onAnimateInherited=function(t){var e=this.superAnimator;null!==e&&e.precedence>=this.precedence?(this.setOwnLook(e.look),null!==this.look?Ao.prototype.onAnimate.call(this,t):(this.ownState=e.state,this.setValue(e.value,this.value),e.isAnimating()||this.stopAnimating())):this.stopAnimating()},Oo.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this);var t=this.subAnimators;if(null!==t)for(var e=0,i=t.length;e<i;e+=1){var o=t[e];o.isInherited()&&o.startAnimating()}},Oo.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},Oo.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},Oo.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},Oo.prototype.fromAny=function(t){return t},Oo.prototype.isMounted=function(){return 0!=(this.animatorFlags&Ao.MountedFlag)},Oo.prototype.mount=function(){0==(this.animatorFlags&Ao.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|Ao.MountedFlag),this.onMount(),this.didMount())},Oo.prototype.willMount=function(){},Oo.prototype.onMount=function(){this.bindSuperAnimator();var t=this.look;null!==t&&this.applyLook(t,!1)},Oo.prototype.didMount=function(){},Oo.prototype.unmount=function(){0!=(this.animatorFlags&Ao.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~Ao.MountedFlag),this.onUnmount(),this.didUnmount())},Oo.prototype.willUnmount=function(){},Oo.prototype.onUnmount=function(){this.stopAnimating(),this.unbindSuperAnimator()},Oo.prototype.didUnmount=function(){},Oo.prototype.toString=function(){return this.name},Oo.getClass=function(t){return t===String?Wo:t===Boolean?Eo:t===Number?No:t===r.Angle?Go:t===r.Length?Bo:t===Tt?Ho:t===St?qo:t===r.Transform?zo:t===Zt?Yo:t===Qt?Xo:t===$t?Ko:null},Oo.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.look,s=t.precedence,l=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=Oo.getClass(t.type)),null===i&&(i=Oo,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var a=function(t,e){var a,h=function(t,e,i){return 0===arguments.length?h.value:(2===arguments.length?h.setState(t,e):h.setState(t,e,i),h.owner)};return Object.setPrototypeOf(h,this),h=i.call(h,t,e)||h,void 0!==l?a=h.fromAny(l()):void 0!==n&&(a=h.fromAny(n)),void 0!==a&&(h.ownValue=a,h.ownState=a),void 0!==r&&(h.ownLook=r),void 0!==s&&(h.precedence=s),void 0!==o&&(h.inherit=o),h},h=t;return Object.setPrototypeOf(a,i),(a.prototype=h).constructor=a,Object.setPrototypeOf(a.prototype,i.prototype),a};var Io=function(t,e){return this instanceof Io?ko.call(this,t,e):(i=t,ro.decorateViewAnimator.bind(Io,Io.define(i)));var i};function ko(t,e){var i=Oo.call(this,t,e)||this;return i.id=h.ConstraintKey.nextId(),i.strength=h.ConstraintStrength.Strong,i.conditionCount=0,i}w(Io,Oo),Io.prototype.isExternal=function(){return!0},Io.prototype.isDummy=function(){return!1},Io.prototype.isInvalid=function(){return!1},Io.prototype.isConstant=function(){return!1},Io.prototype.onSetValue=function(t,e){Oo.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},Io.prototype.evaluateConstraintVariable=function(){},Io.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&Ao.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(Io.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"terms",{get:function(){var t=new h.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),Io.prototype.plus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.product(2,this):h.ConstraintExpression.sum(this,t)},Io.prototype.negative=function(){return h.ConstraintExpression.product(-1,this)},Io.prototype.minus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.zero:h.ConstraintExpression.sum(this,t.negative())},Io.prototype.times=function(t){return h.ConstraintExpression.product(t,this)},Io.prototype.divide=function(t){return h.ConstraintExpression.product(1/t,this)},Io.prototype.isConstrained=function(){return 0!=(this.animatorFlags&Ao.ConstrainedFlag)},Io.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&Ao.ConstrainedFlag)?(this.setAnimatorFlags(e|Ao.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&Ao.ConstrainedFlag)||(this.setAnimatorFlags(e&~Ao.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},Io.prototype.addConstraintCondition=function(t,e){this.conditionCount+=1,!this.isConstrained()&&1===this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},Io.prototype.removeConstraintCondition=function(t,e){this.conditionCount-=1,!this.isConstrained()&&0===this.conditionCount&&this.isMounted()&&this.stopConstraining()},Io.prototype.isConstraining=function(){return 0!=(this.animatorFlags&Ao.ConstrainingFlag)},Io.prototype.startConstraining=function(){0==(this.animatorFlags&Ao.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|Ao.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},Io.prototype.willStartConstraining=function(){},Io.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},Io.prototype.didStartConstraining=function(){},Io.prototype.stopConstraining=function(){0!=(this.animatorFlags&Ao.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~Ao.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},Io.prototype.willStopConstraining=function(){},Io.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},Io.prototype.didStopConstraining=function(){},Io.prototype.updateConstraintVariable=function(){this.owner.setConstraintVariable(this,this.toNumber(this.value))},Io.prototype.onMount=function(){Oo.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},Io.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),Oo.prototype.onUnmount.call(this)},Io.getClass=function(t){return t===Number?Uo:t===r.Length?jo:null},Io.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.look,s=void 0!==t.strength?h.ConstraintStrength.fromAny(t.strength):void 0,l=t.constrain,a=t.precedence,u=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.look,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=Io.getClass(t.type)),null===i&&(i=Io,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var p=function(t,e){var h,p=function(t,e,i){return 0===arguments.length?p.value:(2===arguments.length?p.setState(t,e):p.setState(t,e,i),p.owner)};return Object.setPrototypeOf(p,this),p=i.call(p,t,e)||p,void 0!==u?h=p.fromAny(u()):void 0!==n&&(h=p.fromAny(n)),void 0!==h&&(p.ownValue=h,p.ownState=h),void 0!==r&&(p.ownLook=r),void 0!==s&&(p.strength=s),void 0!==a&&(p.precedence=a),void 0!==o&&(p.inherit=o),!0===l&&p.constrain(),p},d=t;return Object.setPrototypeOf(p,i),(p.prototype=d).constructor=p,Object.setPrototypeOf(p.prototype,i.prototype),p};var Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}(Oo),Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e.prototype.equalState=function(t,e){return t===e},e}(Oo),No=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(Oo),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(Io),Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Angle.fromAny(t):t},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Oo),Bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Oo),jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.toNumber=function(t){try{return null!=t?t.pxValue():0}catch(t){return 0}},e.prototype.fromAny=function(t){return null!=t?r.Length.fromAny(t):null},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Io),Ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?Tt.fromAny(t):t},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Oo),qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?St.fromAny(t):t},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Oo),zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return null!=t?r.Transform.fromAny(t):null},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Oo),Yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"phase",{get:function(){var t=this.value;return null!=t?t.phase:void 0},enumerable:!1,configurable:!0}),e.prototype.getPhase=function(){return this.getValue().phase},e.prototype.getPhaseOr=function(t){var e=this.value;return null!=e?e.phase:t},e.prototype.setPhase=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withPhase(t),e,i))},Object.defineProperty(e.prototype,"direction",{get:function(){var t=this.value;return null!=t?t.direction:0},enumerable:!1,configurable:!0}),e.prototype.setDirection=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withDirection(t),e,i))},e.prototype.isUnfocused=function(){var t=this.value;return null!=t&&t.isUnfocused()},e.prototype.isFocused=function(){var t=this.value;return null!=t&&t.isFocused()},e.prototype.isFocusing=function(){var t=this.value;return null!=t&&t.isFocusing()},e.prototype.isUnfocusing=function(){var t=this.value;return null!=t&&t.isUnfocusing()},e.prototype.focus=function(t,e){var i=this.value;null!=i&&i.isFocused()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.focusing(),i),this.setState(Zt.focused(),t,e))},e.prototype.unfocus=function(t,e){var i=this.value;null!=i&&i.isUnfocused()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.unfocusing(),i),this.setState(Zt.unfocused(),t,e))},e.prototype.toggle=function(t,e){var i=this.value;null!=i&&("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),this.setValue(i.toggling(),i),this.setState(i.toggled(),t,e))},e.prototype.willFocus=function(){},e.prototype.didFocus=function(){},e.prototype.willUnfocus=function(){},e.prototype.didUnfocus=function(){},e.prototype.onSetValue=function(e,i){t.prototype.onSetValue.call(this,e,i),null!=e&&null!=i&&(e.isFocusing()&&!i.isFocusing()?this.willFocus():e.isFocused()&&!i.isFocused()?this.didFocus():e.isUnfocusing()&&!i.isUnfocusing()?this.willUnfocus():e.isUnfocused()&&!i.isUnfocused()&&this.didUnfocus())},e.prototype.fromAny=function(t){return null!=t?Zt.fromAny(t):t},e}(Oo),Xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"phase",{get:function(){var t=this.value;return null!=t?t.phase:void 0},enumerable:!1,configurable:!0}),e.prototype.getPhase=function(){return this.getValue().phase},e.prototype.getPhaseOr=function(t){var e=this.value;return null!=e?e.phase:t},e.prototype.setPhase=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withPhase(t),e,i))},Object.defineProperty(e.prototype,"direction",{get:function(){var t=this.value;return null!=t?t.direction:0},enumerable:!1,configurable:!0}),e.prototype.setDirection=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withDirection(t),e,i))},Object.defineProperty(e.prototype,"modalState",{get:function(){var t=this.value;return null!=t?t.modalState:void 0},enumerable:!1,configurable:!0}),e.prototype.isDismissed=function(){var t=this.value;return null!=t&&t.isDismissed()},e.prototype.isPresented=function(){var t=this.value;return null!=t&&t.isPresented()},e.prototype.isPresenting=function(){var t=this.value;return null!=t&&t.isPresenting()},e.prototype.isDismissing=function(){var t=this.value;return null!=t&&t.isDismissing()},e.prototype.present=function(t,e){var i=this.value;null!=i&&i.isPresented()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.presenting(),i),this.setState(Qt.presented(),t,e))},e.prototype.dismiss=function(t,e){var i=this.value;null!=i&&i.isDismissed()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.dismissing(),i),this.setState(Qt.dismissed(),t,e))},e.prototype.toggle=function(t,e){var i=this.value;null!=i&&("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),this.setValue(i.toggling(),i),this.setState(i.toggled(),t,e))},e.prototype.willPresent=function(){},e.prototype.didPresent=function(){},e.prototype.willDismiss=function(){},e.prototype.didDismiss=function(){},e.prototype.onSetValue=function(e,i){t.prototype.onSetValue.call(this,e,i),null!=e&&null!=i&&(e.isPresenting()&&!i.isPresenting()?this.willPresent():e.isPresented()&&!i.isPresented()?this.didPresent():e.isDismissing()&&!i.isDismissing()?this.willDismiss():e.isDismissed()&&!i.isDismissed()&&this.didDismiss())},e.prototype.fromAny=function(t){return null!=t?Qt.fromAny(t):t},e}(Oo),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"phase",{get:function(){var t=this.value;return null!=t?t.phase:void 0},enumerable:!1,configurable:!0}),e.prototype.getPhase=function(){return this.getValue().phase},e.prototype.getPhaseOr=function(t){var e=this.value;return null!=e?e.phase:t},e.prototype.setPhase=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withPhase(t),e,i))},Object.defineProperty(e.prototype,"direction",{get:function(){var t=this.value;return null!=t?t.direction:0},enumerable:!1,configurable:!0}),e.prototype.setDirection=function(t,e,i){var o=this.value;null!=o&&("number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),this.setState(o.withDirection(t),e,i))},Object.defineProperty(e.prototype,"modalState",{get:function(){var t=this.value;return null!=t?t.modalState:void 0},enumerable:!1,configurable:!0}),e.prototype.isCollapsed=function(){var t=this.value;return null!=t&&t.isCollapsed()},e.prototype.isExpanded=function(){var t=this.value;return null!=t&&t.isExpanded()},e.prototype.isExpanding=function(){var t=this.value;return null!=t&&t.isExpanding()},e.prototype.isCollapsing=function(){var t=this.value;return null!=t&&t.isCollapsing()},e.prototype.expand=function(t,e){var i=this.value;null!=i&&i.isExpanded()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.expanding(),i),this.setState($t.expanded(),t,e))},e.prototype.collapse=function(t,e){var i=this.value;null!=i&&i.isCollapsed()||("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),null!=i&&this.setValue(i.collapsing(),i),this.setState($t.collapsed(),t,e))},e.prototype.toggle=function(t,e){var i=this.value;null!=i&&("number"==typeof t?(e=t,t=void 0):void 0===e&&(e=ro.Extrinsic),void 0!==t&&!0!==t||(t=this.owner.getLookOr(se.timing,!1)),this.setValue(i.toggling(),i),this.setState(i.toggled(),t,e))},e.prototype.willExpand=function(){},e.prototype.didExpand=function(){},e.prototype.willCollapse=function(){},e.prototype.didCollapse=function(){},e.prototype.onSetValue=function(e,i){t.prototype.onSetValue.call(this,e,i),null!=e&&null!=i&&(e.isExpanding()&&!i.isExpanding()?this.willExpand():e.isExpanded()&&!i.isExpanded()?this.didExpand():e.isCollapsing()&&!i.isCollapsing()?this.willCollapse():e.isCollapsed()&&!i.isCollapsed()&&this.didCollapse())},e.prototype.fromAny=function(t){return null!=t?$t.fromAny(t):t},e}(Oo),Zo=function(t,e,i){return this instanceof Zo?_o.call(this,t,e,i):(o=t,ro.decorateViewFastener.bind(ro,Zo.define(o)));var o};function _o(t,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=i,this.view=null,this.constraints=e.Arrays.empty,this.constraintVariables=e.Arrays.empty,this}w(Zo,Object),Zo.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},Zo.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},Zo.prototype.setView=function(t,e){var i=this.view;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentView===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertView(this.owner,t,e,this.key)),this.doSetView(t,e),i},Zo.prototype.doSetView=function(t,e){var i=this.view;i!==t&&(this.deactivateLayout(),this.willSetView(t,i,e),null!==i&&this.detachView(i),this.view=t,null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e))},Zo.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},Zo.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},Zo.prototype.willSetView=function(t,e,i){},Zo.prototype.onSetView=function(t,e,i){},Zo.prototype.didSetView=function(t,e,i){},Zo.prototype.constraint=function(t,e,i,o){t=h.ConstraintExpression.fromAny(t),void 0!==i&&(i=h.ConstraintExpression.fromAny(i));var n=void 0!==i?t.minus(i):t;o=void 0===o?h.ConstraintStrength.Required:h.ConstraintStrength.fromAny(o);var r=new h.Constraint(this.owner,n,e,o);return this.addConstraint(r),r},Zo.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},Zo.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(this.constraints=o,this.activateConstraint(t))},Zo.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),this.constraints=o)},Zo.prototype.activateConstraint=function(t){this.owner.activateConstraint(t)},Zo.prototype.deactivateConstraint=function(t){this.owner.deactivateConstraint(t)},Zo.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?h.ConstraintStrength.Strong:h.ConstraintStrength.fromAny(i),new h.ConstraintBinding(this,t,e,i)},Zo.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},Zo.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(this.constraintVariables=o,this.activateConstraintVariable(t))},Zo.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),this.constraintVariables=o)},Zo.prototype.activateConstraintVariable=function(t){this.owner.activateConstraintVariable(t)},Zo.prototype.deactivateConstraintVariable=function(t){this.owner.deactivateConstraintVariable(t)},Zo.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},Zo.prototype.activateLayout=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1)this.owner.activateConstraintVariable(t[e]);var o=this.constraints;for(e=0,i=o.length;e<i;e+=1)this.owner.activateConstraint(o[e])},Zo.prototype.deactivateLayout=function(){for(var t=this.constraints,e=0,i=t.length;e<i;e+=1)this.owner.deactivateConstraint(t[e]);var o=this.constraintVariables;for(e=0,i=o.length;e<i;e+=1)this.owner.deactivateConstraintVariable(o[e])},Object.defineProperty(Zo.prototype,"parentView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Zo.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.doSetView(e,i),null!==e&&(null==t&&(t=this.parentView),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.doSetView(e,i)),e},Zo.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},Zo.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},Zo.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},Zo.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof ro?t:null},Zo.prototype.isMounted=function(){return 0!=(this.fastenerFlags&Zo.MountedFlag)},Zo.prototype.mount=function(){0==(this.fastenerFlags&Zo.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|Zo.MountedFlag),this.onMount(),this.didMount())},Zo.prototype.willMount=function(){},Zo.prototype.onMount=function(){this.activateLayout()},Zo.prototype.didMount=function(){},Zo.prototype.unmount=function(){0!=(this.fastenerFlags&Zo.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~Zo.MountedFlag),this.onUnmount(),this.didUnmount())},Zo.prototype.willUnmount=function(){},Zo.prototype.onUnmount=function(){this.deactivateLayout()},Zo.prototype.didUnmount=function(){},Zo.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=Zo);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},Zo.MountedFlag=1;var Qo=function(){function t(t,e,i,o,n,r){this.inputId=t,this.inputType=e,this.isPrimary=i,this.target=null,this.button=0,this.buttons=0,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.twist=0,this.pressure=0,this.tangentialPressure=0,this.x0=o,this.y0=n,this.t0=r,this.dx=0,this.dy=0,this.dt=0,this.x=o,this.y=n,this.t=r,this.detail=void 0,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.pointerInputType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},t}(),Jo=function(t,e){return this instanceof Jo?$o.call(this,t,e):(i=t,no.decorateGesture.bind(ro,Jo.define(i)));var i};function $o(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.gestureFlags=0,this.view=null,this.inputs={},this.inputCount=0,this}w(Jo,Object),Jo.prototype.setGestureFlags=function(t){this.gestureFlags=t},Jo.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},Jo.prototype.setView=function(t,e){var i=this.view;return i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),this.view=t,null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},Jo.prototype.attachView=function(t){this.attachEvents(t),!0===this.observe&&t.addViewObserver(this)},Jo.prototype.detachView=function(t){this.clearInputs(),!0===this.observe&&t.removeViewObserver(this),this.detachEvents(t)},Jo.prototype.willSetView=function(t,e,i){},Jo.prototype.onSetView=function(t,e,i){},Jo.prototype.didSetView=function(t,e,i){},Jo.prototype.attachEvents=function(t){},Jo.prototype.detachEvents=function(t){},Jo.prototype.getInput=function(t){"number"==typeof t&&(t=""+t);var e=this.inputs[t];return void 0!==e?e:null},Jo.prototype.createInput=function(t,e,i,o,n,r){return new Qo(t,e,i,o,n,r)},Jo.prototype.getOrCreateInput=function(t,e,i,o,n,r){"number"==typeof t&&(t=""+t);var s=this.inputs,l=s[t];return void 0===l&&(l=this.createInput(t,e,i,o,n,r),s[t]=l,this.inputCount+=1),l},Jo.prototype.clearInput=function(t){delete this.inputs[t.inputId],this.inputCount-=1},Jo.prototype.clearInputs=function(){this.inputs={},this.inputCount=0},Jo.prototype.viewWillUnmount=function(t){this.clearInputs()},Jo.prototype.isMounted=function(){return 0!=(this.gestureFlags&Jo.MountedFlag)},Jo.prototype.mount=function(){0==(this.gestureFlags&Jo.MountedFlag)&&(this.willMount(),this.setGestureFlags(this.gestureFlags|Jo.MountedFlag),this.onMount(),this.didMount())},Jo.prototype.willMount=function(){},Jo.prototype.onMount=function(){!0===this.self&&this.owner instanceof ro&&this.setView(this.owner)},Jo.prototype.didMount=function(){},Jo.prototype.unmount=function(){0!=(this.gestureFlags&Jo.MountedFlag)&&(this.willUnmount(),this.setGestureFlags(this.gestureFlags&~Jo.MountedFlag),this.onUnmount(),this.didUnmount())},Jo.prototype.willUnmount=function(){},Jo.prototype.onUnmount=function(){},Jo.prototype.didUnmount=function(){},Jo.getClass=function(t){return null},Jo.define=function(t){var e=t.extends,i=t.method;delete t.extends,delete t.method,void 0===i&&(i="auto"),void 0===e&&(e=Jo.getClass(i)),null===e&&(e=Jo);var o=function(t,i){var o=function(t,e){return void 0===t?o.view:(o.setView(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},n=t;return Object.setPrototypeOf(o,e),(o.prototype=n).constructor=o,Object.setPrototypeOf(o.prototype,e.prototype),o},Jo.MountedFlag=1,Jo.PreserveAspectRatioFlag=2,Jo.WheelFlag=4,Jo.NeedsRescale=8;var tn=function(t){function e(e,i,o,n,r,s){var l=t.call(this,e,i,o,n,r,s)||this;return l.hovering=!1,l.pressing=!1,l.holdTimer=0,l.holdDelay=400,l}return w(e,t),e.prototype.isRunaway=function(){var t=this.x-this.x0,e=this.y-this.y0,i=this.t-this.t0;return"mouse"!==this.inputType&&i<100&&t*t+e*e>100},e.prototype.setHoldTimer=function(t){0!==this.holdDelay&&(this.clearHoldTimer(),this.holdTimer=setTimeout(t,this.holdDelay))},e.prototype.clearHoldTimer=function(){0!==this.holdTimer&&(clearTimeout(this.holdTimer),this.holdTimer=0)},e}(Qo),en=function(t,e){return this instanceof en?on.call(this,t,e):(i=t,no.decorateGesture.bind(ro,en.define(i)));var i};function on(t,e){var i=Jo.call(this,t,e)||this;return i.hoverCount=0,i.pressCount=0,i}w(en,Jo),en.prototype.attachEvents=function(t){Jo.prototype.attachEvents.call(this,t),this.attachHoverEvents(t)},en.prototype.detachEvents=function(t){this.detachPressEvents(t),this.detachHoverEvents(t),Jo.prototype.detachEvents.call(this,t)},en.prototype.attachHoverEvents=function(t){},en.prototype.detachHoverEvents=function(t){},en.prototype.attachPressEvents=function(t){},en.prototype.detachPressEvents=function(t){},en.prototype.createInput=function(t,e,i,o,n,r){return new tn(t,e,i,o,n,r)},en.prototype.clearInput=function(t){t.hovering||t.pressing||Jo.prototype.clearInput.call(this,t)},en.prototype.clearInputs=function(){Jo.prototype.clearInputs.call(this),this.hoverCount=0,this.pressCount=0},en.prototype.isHovering=function(){return 0!==this.hoverCount},en.prototype.startHovering=function(){this.willStartHovering(),this.onStartHovering(),this.didStartHovering()},en.prototype.willStartHovering=function(){},en.prototype.onStartHovering=function(){},en.prototype.didStartHovering=function(){},en.prototype.stopHovering=function(){this.willStopHovering(),this.onStopHovering(),this.didStopHovering()},en.prototype.willStopHovering=function(){},en.prototype.onStopHovering=function(){},en.prototype.didStopHovering=function(){},en.prototype.beginHover=function(t,e){t.hovering||(this.willBeginHover(t,e),t.hovering=!0,this.hoverCount+=1,this.onBeginHover(t,e),this.didBeginHover(t,e),1===this.hoverCount&&this.startHovering())},en.prototype.willBeginHover=function(t,e){},en.prototype.onBeginHover=function(t,e){},en.prototype.didBeginHover=function(t,e){},en.prototype.endHover=function(t,e){t.hovering&&(this.willEndHover(t,e),t.hovering=!1,this.hoverCount-=1,this.onEndHover(t,e),this.didEndHover(t,e),0===this.hoverCount&&this.stopHovering(),this.clearInput(t))},en.prototype.willEndHover=function(t,e){},en.prototype.onEndHover=function(t,e){},en.prototype.didEndHover=function(t,e){},en.prototype.isPressing=function(){return 0!==this.pressCount},en.prototype.startPressing=function(){this.willStartPressing(),this.onStartPressing(),this.didStartPressing()},en.prototype.willStartPressing=function(){},en.prototype.onStartPressing=function(){this.attachPressEvents(this.view)},en.prototype.didStartPressing=function(){},en.prototype.stopPressing=function(){this.willStopPressing(),this.onStopPressing(),this.didStopPressing()},en.prototype.willStopPressing=function(){},en.prototype.onStopPressing=function(){this.detachPressEvents(this.view)},en.prototype.didStopPressing=function(){},en.prototype.beginPress=function(t,e){if(!t.pressing){var i=this.willBeginPress(t,e);void 0===i&&(i=!0),i&&(t.pressing=!0,t.defaultPrevented=!1,this.pressCount+=1,this.onBeginPress(t,e),t.setHoldTimer(this.longPress.bind(this,t)),this.didBeginPress(t,e),1===this.pressCount&&this.startPressing())}},en.prototype.willBeginPress=function(t,e){},en.prototype.onBeginPress=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},en.prototype.didBeginPress=function(t,e){},en.prototype.movePress=function(t,e){t.pressing&&(this.willMovePress(t,e),this.onMovePress(t,e),this.didMovePress(t,e))},en.prototype.willMovePress=function(t,e){},en.prototype.onMovePress=function(t,e){},en.prototype.didMovePress=function(t,e){},en.prototype.endPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willEndPress(t,e),t.pressing=!1,this.pressCount-=1,this.onEndPress(t,e),this.didEndPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},en.prototype.willEndPress=function(t,e){},en.prototype.onEndPress=function(t,e){},en.prototype.didEndPress=function(t,e){},en.prototype.cancelPress=function(t,e){t.clearHoldTimer(),t.pressing&&(this.willCancelPress(t,e),t.pressing=!1,this.pressCount-=1,this.onCancelPress(t,e),this.didCancelPress(t,e),0===this.pressCount&&this.stopPressing(),this.clearInput(t))},en.prototype.willCancelPress=function(t,e){},en.prototype.onCancelPress=function(t,e){},en.prototype.didCancelPress=function(t,e){},en.prototype.press=function(t,e){this.willPress(t,e),this.onPress(t,e),this.didPress(t,e)},en.prototype.willPress=function(t,e){},en.prototype.onPress=function(t,e){},en.prototype.didPress=function(t,e){},en.prototype.longPress=function(t){t.clearHoldTimer(),performance.now()-t.t0<1.5*t.holdDelay&&t.pressing&&(this.willLongPress(t),this.onLongPress(t),this.didLongPress(t))},en.prototype.willLongPress=function(t){},en.prototype.onLongPress=function(t){var e=performance.now();t.dt=e-t.t,t.t=e},en.prototype.didLongPress=function(t){},en.getClass=function(t){return"pointer"===t?nn:"touch"===t?rn:"mouse"===t?sn:"undefined"!=typeof PointerEvent?nn:"undefined"!=typeof TouchEvent?rn:sn},en.define=function(t){var e=t.extends,i=t.method;delete t.extends,delete t.method,void 0===i&&(i="auto"),void 0===e&&(e=en.getClass(i));var o=function(t,i){var o=function(t,e){return void 0===t?o.view:(o.setView(t,e),o.owner)};return Object.setPrototypeOf(o,this),o=e.call(o,t,i)||o},n=t;return Object.setPrototypeOf(o,e),(o.prototype=n).constructor=o,Object.setPrototypeOf(o.prototype,e.prototype),o};var nn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(e,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(en),rn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(en),sn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.y,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(en),ln=function(t){function e(e,i,o,n,r,s){var l=t.call(this,e,i,o,n,r,s)||this;return l.vx=0,l.vy=0,l.ax=0,l.ay=0,l.path=[],l.coasting=!1,l}return w(e,t),e.prototype.updatePosition=function(t){var e=this.path,i=this.x,o=this.y,n=this.t;for(e.push({x:i,y:o,t:n});e.length>1&&n-e[0].t>t;)e.shift()},e.prototype.deriveVelocity=function(t){var e=this.path[0],i=this.path[this.path.length-1];if(void 0!==i&&i!==e){var o=i.t-e.t,n=void 0,r=void 0;if(0!==o){var s=(n=(i.x-e.x)/o)*n+(r=(i.y-e.y)/o)*r;if(t*t<s){var l=Math.sqrt(s);n=n*t/l,r=r*t/l}}else n=0,r=0;this.vx=n,this.vy=r}else void 0!==e&&(this.vx=0,this.vy=0)},e.prototype.integrateVelocity=function(t){var e=t-this.t;if(0!==e){var i=this.vx+this.ax*e,o=void 0;i<0==this.vx<0?o=this.x+this.vx*e+this.ax*e*e*.5:(o=this.x-this.vx*this.vx/(2*this.ax),i=0,this.ax=0);var n=this.vy+this.ay*e,r=void 0;n<0==this.vy<0?r=this.y+this.vy*e+this.ay*e*e*.5:(r=this.y-this.vy*this.vy/(2*this.ay),n=0,this.ay=0),this.dx=o-this.x,this.dy=r-this.y,this.dt=e,this.x=o,this.y=r,this.t=t,this.vx=i,this.vy=n}},e}(tn),an=function(t,e){return this instanceof an?hn.call(this,t,e):(i=t,no.decorateGesture.bind(ro,an.define(i)));var i};function hn(t,e){var i=en.call(this,t,e)||this;return i.coastCount=0,i.hysteresis=an.hysteresis,i.acceleration=an.acceleration,i.velocityMax=an.velocityMax,i}w(an,en),Object.defineProperty(an.prototype,"observe",{value:!0,enumerable:!0,configurable:!0}),an.prototype.createInput=function(t,e,i,o,n,r){return new ln(t,e,i,o,n,r)},an.prototype.clearInput=function(t){t.coasting||en.prototype.clearInput.call(this,t)},an.prototype.clearInputs=function(){en.prototype.clearInputs.call(this),this.coastCount=0},an.prototype.viewWillAnimate=function(t){this.doCoast(t.updateTime)},an.prototype.interrupt=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endCoast(o,t)}},an.prototype.cancel=function(t){var e=this.inputs;for(var i in e){var o=e[i];this.endPress(o,t),this.endCoast(o,t)}},an.prototype.startInteracting=function(){this.willStartInteracting(),this.onStartInteracting(),this.didStartInteracting()},an.prototype.willStartInteracting=function(){},an.prototype.onStartInteracting=function(){},an.prototype.didStartInteracting=function(){},an.prototype.stopInteracting=function(){this.willStopInteracting(),this.onStopInteracting(),this.didStopInteracting()},an.prototype.willStopInteracting=function(){},an.prototype.onStopInteracting=function(){},an.prototype.didStopInteracting=function(){},an.prototype.onStartPressing=function(){en.prototype.onStartPressing.call(this),0===this.coastCount&&this.startInteracting()},an.prototype.onStopPressing=function(){en.prototype.onStopPressing.call(this),0===this.coastCount&&this.stopInteracting()},an.prototype.beginPress=function(t,e){en.prototype.beginPress.call(this,t,e),this.interrupt(e)},an.prototype.onBeginPress=function(t,e){en.prototype.onBeginPress.call(this,t,e),t.updatePosition(this.hysteresis),t.deriveVelocity(this.velocityMax)},an.prototype.onMovePress=function(t,e){en.prototype.onMovePress.call(this,t,e),t.updatePosition(this.hysteresis),t.deriveVelocity(this.velocityMax)},an.prototype.willEndPress=function(t,e){en.prototype.willEndPress.call(this,t,e),this.beginCoast(t,e)},an.prototype.onEndPress=function(t,e){en.prototype.onEndPress.call(this,t,e),t.updatePosition(this.hysteresis),t.deriveVelocity(this.velocityMax)},an.prototype.onCancelPress=function(t,e){en.prototype.onCancelPress.call(this,t,e),t.updatePosition(this.hysteresis),t.deriveVelocity(this.velocityMax)},an.prototype.isCoasting=function(){return 0!==this.coastCount},an.prototype.startCoasting=function(){this.willStartCoasting(),this.onStartCoasting(),this.didStartCoasting()},an.prototype.willStartCoasting=function(){},an.prototype.onStartCoasting=function(){0===this.pressCount&&this.startInteracting(),null!==this.view&&this.view.requireUpdate(ro.NeedsAnimate)},an.prototype.didStartCoasting=function(){},an.prototype.stopCoasting=function(){this.willStopCoasting(),this.onStopCoasting(),this.didStopCoasting()},an.prototype.willStopCoasting=function(){},an.prototype.onStopCoasting=function(){0===this.pressCount&&this.stopInteracting()},an.prototype.didStopCoasting=function(){},an.prototype.beginCoast=function(t,e){if(!t.coasting&&(0!==t.vx||0!==t.vy)){var i=Math.atan2(Math.abs(t.vy),Math.abs(t.vx)),o=this.acceleration,n=(t.vx<0?o:t.vx>0?-o:0)*Math.cos(i),r=(t.vy<0?o:t.vy>0?-o:0)*Math.sin(i);if(0!==n||0!==r){t.ax=n,t.ay=r;var s=this.willBeginCoast(t,e);void 0===s&&(s=!0),s&&(t.coasting=!0,this.coastCount+=1,this.onBeginCoast(t,e),this.didBeginCoast(t,e),1===this.coastCount&&this.startCoasting())}}},an.prototype.willBeginCoast=function(t,e){},an.prototype.onBeginCoast=function(t,e){t.x0=t.x,t.y0=t.y,t.t0=t.t,t.dx=0,t.dy=0,t.dt=0},an.prototype.didBeginCoast=function(t,e){},an.prototype.endCoast=function(t,e){t.coasting&&(this.willEndCoast(t,e),t.coasting=!1,this.coastCount-=1,this.onEndCoast(t,e),this.didEndCoast(t,e),0===this.coastCount&&this.stopCoasting(),this.clearInput(t))},an.prototype.willEndCoast=function(t,e){},an.prototype.onEndCoast=function(t,e){},an.prototype.didEndCoast=function(t,e){},an.prototype.doCoast=function(t){if(0!==this.coastCount){this.willCoast(),this.integrate(t),this.onCoast();var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&0===o.ax&&0===o.ay&&this.endCoast(o,null)}this.didCoast(),0!==this.coastCount&&null!==this.view&&this.view.requireUpdate(ro.NeedsAnimate)}},an.prototype.willCoast=function(){},an.prototype.onCoast=function(){},an.prototype.didCoast=function(){},an.prototype.integrate=function(t){var e=this.inputs;for(var i in e){var o=e[i];o.coasting&&o.integrateVelocity(t)}},an.getClass=function(t){return"pointer"===t?un:"touch"===t?pn:"mouse"===t?dn:"undefined"!=typeof PointerEvent?un:"undefined"!=typeof TouchEvent?pn:dn},an.define=function(t){var e=t.extends,i=t.method,o=t.hysteresis,n=t.hysteresis,r=t.hysteresis;delete t.extends,delete t.method,delete t.hysteresis,delete t.acceleration,delete t.velocityMax,void 0===i&&(i="auto"),void 0===e&&(e=an.getClass(i));var s=function(t,i){var s=function(t,e){return void 0===t?s.view:(s.setView(t,e),s.owner)};return Object.setPrototypeOf(s,this),s=e.call(s,t,i)||s,void 0!==o&&(s.hysteresis=o),void 0!==n&&(s.acceleration=n),void 0!==r&&(s.velocityMax=r),s},l=t;return Object.setPrototypeOf(s,e),(s.prototype=l).constructor=s,Object.setPrototypeOf(s.prototype,e.prototype),s},an.hysteresis=67,an.acceleration=.00175,an.velocityMax=1.75;var un=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(e,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(an),pn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(an),dn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e}(an),cn=function(t){function e(e,i,o,n,r,s){var l=t.call(this,e,i,o,n,r,s)||this;return l.xCoord=void 0,l.yCoord=void 0,l.disableX=!1,l.disableY=!1,l}return w(e,t),e}(ln),fn=function(t,e){return this instanceof fn?vn.call(this,t,e):(i=t,no.decorateGesture.bind(ro,fn.define(i)));var i};function vn(t,e){var i=an.call(this,t,e)||this;return i.distanceMin=fn.distanceMin,i.setGestureFlags(i.gestureFlags|Jo.WheelFlag),i}w(fn,an),Object.defineProperty(fn.prototype,"observe",{value:!0,enumerable:!0,configurable:!0}),fn.prototype.createInput=function(t,e,i,o,n,r){return new cn(t,e,i,o,n,r)},fn.prototype.clearInputs=function(){an.prototype.clearInputs.call(this),this.setGestureFlags(this.gestureFlags&~Jo.NeedsRescale)},Object.defineProperty(fn.prototype,"preserveAspectRatio",{get:function(){return 0!=(this.gestureFlags&Jo.PreserveAspectRatioFlag)},set:function(t){t?this.setGestureFlags(this.gestureFlags|Jo.PreserveAspectRatioFlag):this.setGestureFlags(this.gestureFlags&~Jo.PreserveAspectRatioFlag)},enumerable:!0,configurable:!0}),Object.defineProperty(fn.prototype,"wheel",{get:function(){return 0!=(this.gestureFlags&Jo.WheelFlag)},set:function(t){t?this.setGestureFlags(this.gestureFlags|Jo.WheelFlag):this.setGestureFlags(this.gestureFlags&~Jo.WheelFlag)},enumerable:!0,configurable:!0}),fn.prototype.getXScale=function(){return null},fn.prototype.setXScale=function(t,e){},fn.prototype.getYScale=function(){return null},fn.prototype.setYScale=function(t,e){},fn.prototype.clientToRangeX=function(t,e,i){var o=t-i.xMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.xMax+o-n[0]},fn.prototype.clientToRangeY=function(t,e,i){var o=t-i.yMin,n=e.range;return n[0]<=n[1]?n[0]+o:i.yMax+o-n[0]},fn.prototype.unscaleX=function(t,e,i){return e.inverse(this.clientToRangeX(t,e,i))},fn.prototype.unscaleY=function(t,e,i){return e.inverse(this.clientToRangeY(t,e,i))},fn.prototype.viewWillAnimate=function(t){an.prototype.viewWillAnimate.call(this,t),0!=(this.gestureFlags&Jo.NeedsRescale)&&this.rescale()},fn.prototype.onBeginPress=function(t,e){an.prototype.onBeginPress.call(this,t,e),this.updateInputDomain(t),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.onMovePress=function(t,e){an.prototype.onMovePress.call(this,t,e),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.onEndPress=function(t,e){an.prototype.onEndPress.call(this,t,e),this.updateInputDomain(t),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.onCancelPress=function(t,e){an.prototype.onCancelPress.call(this,t,e),this.updateInputDomain(t),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.beginCoast=function(t,e){this.coastCount<2&&an.prototype.beginCoast.call(this,t,e)},fn.prototype.onBeginCoast=function(t,e){an.prototype.onBeginCoast.call(this,t,e),this.updateInputDomain(t),this.conserveMomentum(t),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.onEndCoast=function(t,e){an.prototype.onEndCoast.call(this,t,e),t.disableX=!1,t.disableY=!1,this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.onCoast=function(){an.prototype.onCoast.call(this),this.view.requireUpdate(ro.NeedsAnimate),this.setGestureFlags(this.gestureFlags|Jo.NeedsRescale)},fn.prototype.updateInputDomain=function(t,e,i,o){void 0===e&&(e=this.getXScale()),null!==e&&(void 0===o&&(o=this.view.clientBounds),t.xCoord=this.unscaleX(t.x0,e,o)),void 0===i&&(i=this.getYScale()),null!==i&&(void 0===o&&(o=this.view.clientBounds),t.yCoord=this.unscaleY(t.y0,i,o))},fn.prototype.neutralizeX=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableX=!0,i.vx=0,i.ax=0)}},fn.prototype.neutralizeY=function(){var t=this.inputs;for(var e in t){var i=t[e];i.coasting&&(i.disableY=!0,i.vy=0,i.ay=0)}},fn.prototype.rescale=function(){var t,e,i=this.inputs;for(var o in i){var n=i[o];(n.pressing||n.coasting)&&(void 0===t?t=n:void 0===e?e=n:n.t0<t.t0?t=n:n.t0<e.t0&&(e=n))}if(void 0!==t){var r=this.view.clientBounds,s=this.getXScale(),l=this.getYScale();null!==s&&null!==l?void 0!==e&&this.preserveAspectRatio?this.rescaleRadial(s,l,t,e,r):this.rescaleXY(s,l,t,e,r):null!==s?this.rescaleX(s,t,e,r):null!==l&&this.rescaleY(l,t,e,r)}this.setGestureFlags(this.gestureFlags&~Jo.NeedsRescale)},fn.prototype.rescaleRadial=function(t,e,i,o,n){var r=i.xCoord,s=i.yCoord,l=this.clientToRangeX(i.x0,t,n),a=this.clientToRangeY(i.y0,e,n),h=this.clientToRangeX(i.x,t,n),u=this.clientToRangeY(i.y,e,n),p=i.vx,d=i.vy,c=i.ax,f=i.ay,v=o.xCoord,y=o.yCoord,g=this.clientToRangeX(o.x0,t,n),w=this.clientToRangeY(o.y0,e,n),m=this.clientToRangeX(o.x,t,n),S=this.clientToRangeY(o.y,e,n),C=o.vx,b=o.vy,V=o.ax,T=o.ay,F=g-l,P=w-a,M=Math.max(this.distanceMin,Math.sqrt(F*F+P*P)),D=F/M,x=P/M,L=h-l,A=u-a,O=m-g,R=S-w,I=L*D+A*x,k=O*D+R*x,W=L*x+A*-D,E=O*x+R*-D,N=(W*x+E*x)/2,U=(W*-D+E*-D)/2,G=l+I*D+N,B=a+I*x+U,j=g+k*D+N,H=w+k*x+U,q=p*D+d*x,z=C*D+b*x,Y=p*x+d*-D,X=C*x+b*-D,K=(Y*x+X*x)/2,Z=(Y*-D+X*-D)/2,_=q*D+K,Q=q*x+Z,J=z*D+K,$=z*x+Z,tt=Math.sqrt(_*_+Q*Q),et=Math.sqrt(J*J+$*$),it=0!==tt?_/tt:0,ot=0!==tt?Q/tt:0,nt=0!==et?J/et:0,rt=0!==et?$/et:0;_=it*tt,Q=ot*tt,J=nt*et,$=rt*et;var st=Math.sqrt(c*c+f*f),lt=Math.sqrt(V*V+T*T),at=st*-it,ht=st*-ot,ut=lt*-nt,pt=lt*-rt,dt=null,ct=t.solveDomain(r,G,v,j);ct.equals(t)||(dt=ct,this.setXScale(dt));var ft=null,vt=e.solveDomain(s,B,y,H);if(vt.equals(e)||(ft=vt,this.setYScale(ft)),(null!==dt||null!==ft)&&(null!==dt&&(i.x0=i.x,i.dx=0,i.vx=_,i.ax=at,i.xCoord=this.unscaleX(i.x0,dt,n),o.x0=o.x,o.dx=0,o.vx=J,o.ax=ut,o.xCoord=this.unscaleX(o.x0,dt,n)),null!==ft&&(i.y0=i.y,i.dy=0,i.vy=Q,i.ay=ht,i.yCoord=this.unscaleY(i.y0,ft,n),o.y0=o.y,o.dy=0,o.vy=$,o.ay=pt,o.yCoord=this.unscaleY(o.y0,ft,n)),this.inputCount>2)){var yt=this.inputs;for(var gt in yt){var wt=yt[gt];wt!==i&&wt!==o&&(null!==dt&&(wt.x0=wt.x,wt.dx=0,wt.xCoord=this.unscaleX(wt.x0,dt,n)),null!==ft&&(wt.y0=wt.y,wt.dy=0,wt.yCoord=this.unscaleY(wt.y0,ft,n)))}}},fn.prototype.rescaleXY=function(t,e,i,o,n){var r,s,l,a,h=i.xCoord,u=i.yCoord,p=this.clientToRangeX(i.x,t,n),d=this.clientToRangeY(i.y,e,n),c=i.disableX,f=i.disableY;if(void 0!==o){r=o.xCoord,s=o.yCoord,l=this.clientToRangeX(o.x,t,n),a=this.clientToRangeY(o.y,e,n),c=c||o.disableX,f=f||o.disableY;var v=Math.abs(l-p),y=Math.abs(a-d),g=this.distanceMin;if(v<g){var w=(g-v)/2;p<=l?(p-=w,l+=w):(p+=w,l-=w)}if(y<g){var m=(g-y)/2;d<=a?(d-=m,a+=m):(d+=m,a-=m)}}var S=null;c||(S=t.solveDomain(h,p,r,l)).equals(t)||this.setXScale(S);var C=null;if(f||(C=e.solveDomain(u,d,s,a)).equals(e)||this.setYScale(C),(null!==S||null!==C)&&this.preserveAspectRatio){var b=this.inputs;for(var V in b){var T=b[V];null!==S&&(T.x0=T.x,T.dx=0,T.xCoord=this.unscaleX(T.x0,S,n)),null!==C&&(T.y0=T.y,T.dy=0,T.yCoord=this.unscaleY(T.y0,C,n))}}},fn.prototype.rescaleX=function(t,e,i,o){var n,r,s=e.xCoord,l=this.clientToRangeX(e.x,t,o),a=e.disableX;if(void 0!==i){r=i.xCoord,n=this.clientToRangeX(i.x,t,o),a=a||i.disableX;var h=Math.abs(n-l),u=this.distanceMin;if(h<u){var p=(u-h)/2;l<=n?(l-=p,n+=p):(l+=p,n-=p)}}if(!a){var d=t.solveDomain(s,l,r,n);d.equals(t)||this.setXScale(d)}},fn.prototype.rescaleY=function(t,e,i,o){var n,r,s=e.yCoord,l=this.clientToRangeY(e.y,t,o),a=e.disableY;if(void 0!==i){r=i.yCoord,n=this.clientToRangeY(i.y,t,o),a=a||i.disableY;var h=Math.abs(n-l),u=this.distanceMin;if(h<u){var p=(u-h)/2;l<=n?(l-=p,n+=p):(l+=p,n-=p)}}if(!a){var d=t.solveDomain(s,l,r,n);d.equals(t)||this.setYScale(d)}},fn.prototype.conserveMomentum=function(t){var e,i=this.inputs;for(var o in i){var n=i[o];n.coasting&&(void 0===e||n.t0<e.t0)&&(e=n)}if(void 0!==e){var r=this.getXScale(),s=this.getYScale();null!==r&&null!==s?this.distributeXYMomentum(t,e):null!==r?this.distributeXMomentum(t,e):null!==s&&this.distributeYMomentum(t,e)}},fn.prototype.distributeXYMomentum=function(t,e){var i=t.vx,o=t.vy,n=e.vx,r=e.vy,s=Math.sqrt(i*i+o*o),l=Math.sqrt(n*n+r*r),a=0!==s?i/s:0,h=0!==s?o/s:0,u=0!==l?n/l:0,p=0!==l?r/l:0,d=(s+l)/2;t.vx=a*d,t.vy=h*d,e.vx=u*d,e.vy=p*d;var c=t.ax,f=t.ay,v=e.ax,y=e.ay,g=Math.sqrt(c*c+f*f),w=Math.sqrt(v*v+y*y),m=0!==g?c/g:0,S=0!==g?f/g:0,C=0!==w?v/w:0,b=0!==w?y/w:0,V=(g+w)/2;t.ax=m*V,t.ay=S*V,e.ax=C*V,e.ay=b*V},fn.prototype.distributeXMomentum=function(t,e){var i=t.vx,o=e.vx,n=Math.abs(i),r=Math.abs(o),s=0!==n?i/n:0,l=0!==r?o/r:0,a=(n+r)/2;t.vx=s*a,e.vx=l*a;var h=t.ax,u=e.ax,p=Math.abs(h),d=Math.abs(u),c=0!==p?h/p:0,f=0!==d?u/d:0,v=(p+d)/2;t.ax=c*v,e.ax=f*v},fn.prototype.distributeYMomentum=function(t,e){var i=t.vy,o=e.vy,n=Math.sqrt(i),r=Math.sqrt(o),s=0!==n?i/n:0,l=0!==r?o/r:0,a=(n+r)/2;t.vy=s*a,e.vy=l*a;var h=t.ay,u=e.ay,p=Math.sqrt(h),d=Math.sqrt(u),c=0!==p?h/p:0,f=0!==d?u/d:0,v=(p+d)/2;t.ay=c*v,e.ay=f*v},fn.prototype.integrate=function(t){var e,i,o=this.inputs;for(var n in o){var r=o[n];if(r.coasting)if(void 0===e)e=r;else if(void 0===i){var s=(i=r).x-e.x,l=i.y-e.y,a=Math.sqrt(s*s+l*l);e.integrateVelocity(t),i.integrateVelocity(t);var h=i.x-e.x,u=i.y-e.y,p=Math.sqrt(h*h+u*u)/a;e.vx*=p,e.vy*=p,e.ax*=p,e.ay*=p,i.vx*=p,i.vy*=p,i.ax*=p,i.ay*=p}else r.integrateVelocity(t)}void 0!==e&&void 0===i&&e.integrateVelocity(t)},fn.prototype.zoom=function(t,e,i,o){if(0!==i){var n=null!==o?o.timeStamp:performance.now(),r=this.acceleration,s=r*Math.cos(Math.PI/4),l=r*Math.sin(Math.PI/4),a=this.velocityMax,h=.5*a*Math.cos(Math.PI/4),u=.5*a*Math.sin(Math.PI/4),p=4*h*h/s,d=4*u*u/l,c=this.inputs,f=c.zoom0,v=c.zoom1;if(void 0!==f&&void 0!==v){var y=n-f.t;if(y>0){var g=Math.abs(v.x-f.x)/2,w=Math.abs(v.y-f.y)/2,m=(i=Math.min(Math.max(-a*y,i),a*y))*g*Math.cos(Math.PI/4)/p,S=i*w*Math.sin(Math.PI/4)/d;s=s*g/p,l=l*w/d,f.x+=m,f.y+=S,f.t=n,f.dx=m,f.dy=S,f.dt=y,f.vx=m/y,f.vy=S/y,f.ax=f.vx<0?s:f.vx>0?-s:0,f.ay=f.vy<0?l:f.vy>0?-l:0,v.x-=m,v.y-=S,v.t=n,f.dx=-m,f.dy=-S,f.dt=y,v.vx=-m/y,v.vy=-S/y,v.ax=v.vx<0?s:v.vx>0?-s:0,v.ay=v.vy<0?l:v.vy>0?-l:0}}else this.interrupt(o),i<0?((f=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=-h,f.vy=-u,f.ax=s,f.ay=l,(v=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=h,v.vy=u,v.ax=-s,v.ay=-l):((f=this.createInput("zoom0","unknown",!1,t-p,e-d,n)).vx=h,f.vy=u,f.ax=-s,f.ay=-l,(v=this.createInput("zoom1","unknown",!1,t+p,e+d,n)).vx=-h,v.vy=-u,v.ax=s,v.ay=l),c.zoom0=f,c.zoom1=v,this.inputCount+=2,this.beginCoast(f,o),this.beginCoast(v,o)}},fn.getClass=function(t){return"pointer"===t?yn:"touch"===t?gn:"mouse"===t?wn:"undefined"!=typeof PointerEvent?yn:"undefined"!=typeof TouchEvent?gn:wn},fn.define=function(t){var e=t.extends,i=t.method,o=t.hysteresis,n=t.hysteresis,r=t.hysteresis,s=t.distanceMin,l=t.preserveAspectRatio,a=t.wheel;delete t.extends,delete t.method,delete t.hysteresis,delete t.acceleration,delete t.velocityMax,delete t.distanceMin,delete t.wheel,void 0===i&&(i="auto"),void 0===e&&(e=fn.getClass(i));var h=function(t,i){var h=function(t,e){return void 0===t?h.view:(h.setView(t,e),h.owner)};return Object.setPrototypeOf(h,this),h=e.call(h,t,i)||h,void 0!==o&&(h.hysteresis=o),void 0!==n&&(h.acceleration=n),void 0!==r&&(h.velocityMax=r),void 0!==s&&(h.distanceMin=s),void 0!==l&&(h.preserveAspectRatio=l),void 0!==a&&(h.wheel=a),h},u=t;return Object.setPrototypeOf(h,e),(h.prototype=u).constructor=h,Object.setPrototypeOf(h.prototype,e.prototype),h},fn.distanceMin=10;var yn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onPointerLeaveDocument=o.onPointerLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("pointerenter",this.onPointerEnter),t.on("pointerleave",this.onPointerLeave),t.on("pointerdown",this.onPointerDown),t.on("wheel",this.onWheel)},e.prototype.detachHoverEvents=function(t){t.off("pointerenter",this.onPointerEnter),t.off("pointerleave",this.onPointerLeave),t.off("pointerdown",this.onPointerDown),t.off("wheel",this.onWheel)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onPointerLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);e.coasting||this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=this.getInput(t.pointerId);null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))}},e.prototype.onPointerDown=function(t){var e=this.getOrCreateInput(t.pointerId,Qo.pointerInputType(t.pointerType),t.isPrimary,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelPress(e,t)},e.prototype.onPointerMove=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onPointerUp=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onPointerCancel=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t))},e.prototype.onPointerLeaveDocument=function(t){var e=this.getInput(t.pointerId);null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){this.wheel&&(t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t))},e}(fn),gn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("touchstart",this.onTouchStart)},e.prototype.detachHoverEvents=function(t){t.off("touchstart",this.onTouchStart)},e.prototype.attachPressEvents=function(t){t.on("touchmove",this.onTouchMove),t.on("touchend",this.onTouchEnd),t.on("touchcancel",this.onTouchCancel)},e.prototype.detachPressEvents=function(t){t.off("touchmove",this.onTouchMove),t.off("touchend",this.onTouchEnd),t.off("touchcancel",this.onTouchCancel)},e.prototype.updateInput=function(t,e,i){t.target=i.target,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=i.clientX-t.x,t.dy=i.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=i.clientX,t.y=i.clientY,t.t=e.timeStamp},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getOrCreateInput(o.identifier,"touch",!1,o.clientX,o.clientY,t.timeStamp);this.updateInput(n,t,o),n.pressing||this.beginPress(n,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.movePress(n,t))}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.endPress(n,t),n.defaultPrevented||this.press(n,t),this.endHover(n,t))}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var o=e[i],n=this.getInput(o.identifier);null!==n&&(this.updateInput(n,t,o),this.cancelPress(n,t),this.endHover(n,t))}},e}(fn),wn=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onMouseLeaveDocument=o.onMouseLeaveDocument.bind(o),o.onWheel=o.onWheel.bind(o),o}return w(e,t),e.prototype.attachHoverEvents=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave),t.on("mousedown",this.onMouseDown),t.on("wheel",this.onWheel)},e.prototype.detachHoverEvents=function(t){t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown),t.off("wheel",this.onWheel)},e.prototype.attachPressEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.detachPressEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseLeaveDocument)},e.prototype.updateInput=function(t,e){t.target=e.target,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.dx=e.clientX-t.x,t.dy=e.clientY-t.y,t.dt=e.timeStamp-t.t,t.x=e.clientX,t.y=e.clientY,t.t=e.timeStamp},e.prototype.onMouseEnter=function(t){if(0===t.buttons){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);e.coasting||this.updateInput(e,t),e.hovering||this.beginHover(e,t)}},e.prototype.onMouseLeave=function(t){var e=this.getInput("mouse");null!==e&&(e.coasting||this.updateInput(e,t),this.endHover(e,t))},e.prototype.onMouseDown=function(t){var e=this.getOrCreateInput("mouse","mouse",!0,t.clientX,t.clientY,t.timeStamp);this.updateInput(e,t),e.pressing||this.beginPress(e,t),0!==t.button&&this.cancelPress(e,t)},e.prototype.onMouseMove=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.movePress(e,t))},e.prototype.onMouseUp=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.endPress(e,t),e.defaultPrevented||0!==t.button||this.press(e,t))},e.prototype.onMouseLeaveDocument=function(t){var e=this.getInput("mouse");null!==e&&(this.updateInput(e,t),this.cancelPress(e,t),this.endHover(e,t))},e.prototype.onWheel=function(t){this.wheel&&(t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t))},e}(fn),mn={getStyleAnimatorConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"styleAnimatorConstructors")){var i=e.styleAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateStyleAnimator:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"styleAnimatorConstructors")||(o.styleAnimatorConstructors={}),o.styleAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getStyleAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setStyleAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})}},Sn=function(t,e){return this instanceof Sn?Cn.call(this,t,e):(i=t,mn.decorateStyleAnimator.bind(mn,Sn.define(i)));var i};function Cn(t,e){var i=Ao.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),i.owner=t,i.priority=void 0,i}w(Sn,Ao),Object.defineProperty(Sn.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty(Sn.prototype,"propertyValue",{get:function(){var t,e=this.owner.getStyle(this.propertyNames);if("undefined"!=typeof CSSStyleValue&&e instanceof CSSStyleValue){try{t=this.fromCssValue(e)}catch(t){}void 0===t&&(e=e.toString())}if("string"==typeof e&&""!==e)try{t=this.parse(e)}catch(t){}return t},enumerable:!0,configurable:!0}),Sn.prototype.setPriority=function(t){this.priority=t;var e=this.value;if(this.isDefined(e)){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,e,t);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],e,t)}},Object.defineProperty(Sn.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.propertyValue;void 0!==e&&(t=e,this.setPrecedence(ro.Extrinsic))}return t},enumerable:!0,configurable:!0}),Sn.prototype.getValue=function(){var t=this.value;if(null==t)throw new TypeError(t+" "+this.name+" value");return t},Sn.prototype.onSetValue=function(t,e){var i=this.propertyNames;if("string"==typeof i)this.owner.setStyle(i,t,this.priority);else for(var o=0,n=i.length;o<n;o+=1)this.owner.setStyle(i[o],t,this.priority);var r=this.updateFlags;void 0!==r&&this.owner.requireUpdate(r)},Sn.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},Sn.prototype.setOwnState=function(t,e){t=this.fromAny(t),Ao.prototype.setOwnState.call(this,t,e)},Sn.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},Sn.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(se.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(ro.NeedsChange)},Sn.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(se.timing,!0)),this.setOwnState(n,i))}},Sn.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},Sn.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},Sn.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},Sn.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},Sn.prototype.parse=function(t){throw new Error},Sn.prototype.fromCssValue=function(t){throw new Error},Sn.prototype.fromAny=function(t){return t},Sn.prototype.isMounted=function(){return 0!=(this.animatorFlags&Ao.MountedFlag)},Sn.prototype.mount=function(){0==(this.animatorFlags&Ao.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|Ao.MountedFlag),this.onMount(),this.didMount())},Sn.prototype.willMount=function(){},Sn.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},Sn.prototype.didMount=function(){},Sn.prototype.unmount=function(){0!=(this.animatorFlags&Ao.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~Ao.MountedFlag),this.onUnmount(),this.didUnmount())},Sn.prototype.willUnmount=function(){},Sn.prototype.onUnmount=function(){this.stopAnimating()},Sn.prototype.didUnmount=function(){},Sn.prototype.toString=function(){return this.name},Sn.getClass=function(t){return t===String?Tn:t===Number?Fn:t===r.Length?Mn:t===Tt?xn:t===wt?Ln:t===qt?An:t===r.Transform?On:null},Sn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.precedence,s=t.initState;delete t.extends,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=Sn.getClass(t.type)),null===i&&(i=Sn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e,i){return 0===arguments.length?a.value:(2===arguments.length?a.setState(t,e):a.setState(t,e,i),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==o&&(l=a.fromAny(o)),void 0!==l&&(a.ownValue=l,a.ownState=l),void 0!==n&&(a.ownLook=n),void 0!==r&&(a.precedence=r),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l};var bn=function(t,e){return this instanceof bn?Vn.call(this,t,e):(i=t,mn.decorateStyleAnimator.bind(mn,bn.define(i)));var i};function Vn(t,e){var i=Sn.call(this,t,e)||this;return i.id=h.ConstraintKey.nextId(),i.strength=h.ConstraintStrength.Strong,i.conditionCount=0,i}w(bn,Sn),bn.prototype.isExternal=function(){return!0},bn.prototype.isDummy=function(){return!1},bn.prototype.isInvalid=function(){return!1},bn.prototype.isConstant=function(){return!1},Object.defineProperty(bn.prototype,"computedValue",{get:function(){},enumerable:!0,configurable:!0}),bn.prototype.onSetValue=function(t,e){Sn.prototype.onSetValue.call(this,t,e),this.isConstraining()&&this.owner.setConstraintVariable(this,this.toNumber(t))},bn.prototype.evaluateConstraintVariable=function(){if(!this.isConstrained()&&this.isConstraining()&&!this.isDefined(this.ownValue)){var t=this.computedValue;this.isDefined(t)&&this.owner.setConstraintVariable(this,this.toNumber(t))}},bn.prototype.updateConstraintSolution=function(t){this.isConstrained()&&this.toNumber(this.state)!==t&&Ao.prototype.setState.call(this,this.fromAny(t))},Object.defineProperty(bn.prototype,"coefficient",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"variable",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"terms",{get:function(){var t=new h.ConstraintMap;return t.set(this,1),t},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"constant",{get:function(){return 0},enumerable:!0,configurable:!0}),bn.prototype.plus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.product(2,this):h.ConstraintExpression.sum(this,t)},bn.prototype.negative=function(){return h.ConstraintExpression.product(-1,this)},bn.prototype.minus=function(t){return this===(t=h.ConstraintExpression.fromAny(t))?h.ConstraintExpression.zero:h.ConstraintExpression.sum(this,t.negative())},bn.prototype.times=function(t){return h.ConstraintExpression.product(t,this)},bn.prototype.divide=function(t){return h.ConstraintExpression.product(1/t,this)},bn.prototype.isConstrained=function(){return 0!=(this.animatorFlags&Ao.ConstrainedFlag)},bn.prototype.constrain=function(t){void 0===t&&(t=!0);var e=this.animatorFlags;return t&&0==(e&Ao.ConstrainedFlag)?(this.setAnimatorFlags(e|Ao.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&this.stopConstraining()):t||0==(e&Ao.ConstrainedFlag)||(this.setAnimatorFlags(e&~Ao.ConstrainedFlag),0!==this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())),this},bn.prototype.addConstraintCondition=function(t,e){this.conditionCount+=1,!this.isConstrained()&&1===this.conditionCount&&this.isMounted()&&(this.startConstraining(),this.updateConstraintVariable())},bn.prototype.removeConstraintCondition=function(t,e){this.conditionCount-=1,!this.isConstrained()&&0===this.conditionCount&&this.isMounted()&&this.stopConstraining()},bn.prototype.isConstraining=function(){return 0!=(this.animatorFlags&Ao.ConstrainingFlag)},bn.prototype.startConstraining=function(){0==(this.animatorFlags&Ao.ConstrainingFlag)&&(this.willStartConstraining(),this.setAnimatorFlags(this.animatorFlags|Ao.ConstrainingFlag),this.onStartConstraining(),this.didStartConstraining())},bn.prototype.willStartConstraining=function(){},bn.prototype.onStartConstraining=function(){this.owner.addConstraintVariable(this)},bn.prototype.didStartConstraining=function(){},bn.prototype.stopConstraining=function(){0!=(this.animatorFlags&Ao.ConstrainingFlag)&&(this.willStopConstraining(),this.setAnimatorFlags(this.animatorFlags&~Ao.ConstrainingFlag),this.onStopConstraining(),this.didStopConstraining())},bn.prototype.willStopConstraining=function(){},bn.prototype.onStopConstraining=function(){this.owner.removeConstraintVariable(this)},bn.prototype.didStopConstraining=function(){},bn.prototype.updateConstraintVariable=function(){var t=this.ownValue;this.isDefined(t)||(t=this.computedValue),this.owner.setConstraintVariable(this,this.toNumber(t))},bn.prototype.onMount=function(){Sn.prototype.onMount.call(this),this.isConstrained()||0===this.conditionCount||this.startConstraining()},bn.prototype.onUnmount=function(){this.isConstrained()||0===this.conditionCount||this.stopConstraining(),Sn.prototype.onUnmount.call(this)},bn.getClass=function(t){return t===Number?Pn:t===r.Length?Dn:null},bn.define=function(t){var i=t.extends,o=t.state,n=t.look,r=void 0!==t.strength?h.ConstraintStrength.fromAny(t.strength):void 0,s=t.constrain,l=t.precedence,a=t.initState;delete t.extends,delete t.state,delete t.look,delete t.strength,delete t.constrain,delete t.precedence,delete t.initState,void 0===i&&(i=bn.getClass(t.type)),null===i&&(i=bn,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var u=function(t,e){var h,u=function(t,e,i){return 0===arguments.length?u.value:(2===arguments.length?u.setState(t,e):u.setState(t,e,i),u.owner)};return Object.setPrototypeOf(u,this),u=i.call(u,t,e)||u,void 0!==a?h=u.fromAny(a()):void 0!==o&&(h=u.fromAny(o)),void 0!==h&&(u.ownValue=h,u.ownState=h),void 0!==n&&(u.ownLook=n),void 0!==r&&(u.strength=r),void 0!==l&&(u.precedence=l),!0===s&&u.constrain(),u},p=t;return Object.setPrototypeOf(u,i),(u.prototype=p).constructor=u,Object.setPrototypeOf(u.prototype,i.prototype),u};var Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromCssValue=function(t){return t.toString()},e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}(Sn),Fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e.prototype.equalState=function(t,e){return t===e},e}(Sn),Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.toNumber=function(t){return"number"==typeof t?t:0},e.prototype.fromCssValue=function(t){return t instanceof CSSNumericValue?t.to("number").value:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e.prototype.equalState=function(t,e){return t===e},e}(bn),Mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Sn),Dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.toNumber=function(t){try{return t.pxValue()}catch(t){return 0}},e.prototype.fromCssValue=function(t){return r.Length.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(bn),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return Tt.parse(t)},e.prototype.fromAny=function(t){try{return Tt.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Sn),Ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return St.parse(t).family},e.prototype.fromAny=function(t){return St.family(t).family},e}(Sn),An=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return qt.parse(t)},e.prototype.fromAny=function(t){return qt.fromAny(t)},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Sn),On=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromCssValue=function(t){return r.Transform.fromCssValue(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}(Sn),Rn={};function In(t,i,o){if(void 0===t){var n=this.borderTopColor.value,r=this.borderRightColor.value,s=this.borderBottomColor.value,l=this.borderLeftColor.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,l)?n:[n,r,s,l]}return Array.isArray(t)?(t.length>=1&&this.borderTopColor.setState(t[0],i,o),t.length>=2&&this.borderRightColor.setState(t[1],i,o),t.length>=3&&this.borderBottomColor.setState(t[2],i,o),t.length>=4&&this.borderLeftColor.setState(t[3],i,o)):(this.borderTopColor.setState(t,i,o),this.borderRightColor.setState(t,i,o),this.borderBottomColor.setState(t,i,o),this.borderLeftColor.setState(t,i,o)),this}function kn(t,i,o){if(void 0===t){var n=this.borderTopLeftRadius.value,r=this.borderTopRightRadius.value,s=this.borderBottomRightRadius.value,l=this.borderBottomLeftRadius.value;return e.Equals(n,r)&&e.Equals(r,s)&&e.Equals(s,l)?n:[n,r,s,l]}return Array.isArray(t)?(t.length>=1&&this.borderTopLeftRadius.setState(t[0],i,o),t.length>=2&&this.borderTopRightRadius.setState(t[1],i,o),t.length>=3&&this.borderBottomRightRadius.setState(t[2],i,o),t.length>=4&&this.borderBottomLeftRadius.setState(t[3],i,o)):(this.borderTopLeftRadius.setState(t,i,o),this.borderTopRightRadius.setState(t,i,o),this.borderBottomRightRadius.setState(t,i,o),this.borderBottomLeftRadius.setState(t,i,o)),this}function Wn(t,e,i){if(void 0===t){var o=this.borderTopStyle.value,n=this.borderRightStyle.value,r=this.borderBottomStyle.value,s=this.borderLeftStyle.value;return o===n&&n===r&&r===s?o:[o,n,r,s]}return Array.isArray(t)?(t.length>=1&&this.borderTopStyle.setState(t[0],e,i),t.length>=2&&this.borderRightStyle.setState(t[1],e,i),t.length>=3&&this.borderBottomStyle.setState(t[2],e,i),t.length>=4&&this.borderLeftStyle.setState(t[3],e,i)):(this.borderTopStyle.setState(t,e,i),this.borderRightStyle.setState(t,e,i),this.borderBottomStyle.setState(t,e,i),this.borderLeftStyle.setState(t,e,i)),this}function En(t,i,o){if(void 0===t){var n=this.borderTopWidth.value,r=this.borderRightWidth.value,s=this.borderBottomWidth.value,l=this.borderLeftWidth.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,l)?n:[n,r,s,l]}return Array.isArray(t)?(t.length>=1&&this.borderTopWidth.setState(t[0],i,o),t.length>=2&&this.borderRightWidth.setState(t[1],i,o),t.length>=3&&this.borderBottomWidth.setState(t[2],i,o),t.length>=4&&this.borderLeftWidth.setState(t[3],i,o)):(this.borderTopWidth.setState(t,i,o),this.borderRightWidth.setState(t,i,o),this.borderBottomWidth.setState(t,i,o),this.borderLeftWidth.setState(t,i,o)),this}function Nn(t,e,i){if(void 0===t){var o=this.fontStyle.value,n=this.fontVariant.value,r=this.fontWeight.value,s=this.fontStretch.value,l=this.fontSize.value,a=this.lineHeight.value,h=this.fontFamily.value;return void 0!==h?St.create(o,n,r,s,l,a,h):null}return null!==t?(void 0!==(t=St.fromAny(t)).style&&this.fontStyle.setState(t.style,e,i),void 0!==t.variant&&this.fontVariant.setState(t.variant,e,i),void 0!==t.weight&&this.fontWeight.setState(t.weight,e,i),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e,i),void 0!==t.size&&this.fontSize.setState(t.size,e,i),void 0!==t.height&&this.lineHeight.setState(t.height,e,i),this.fontFamily.setState(t.family,e,i)):(this.fontStyle.setState(void 0,e,i),this.fontVariant.setState(void 0,e,i),this.fontWeight.setState(void 0,e,i),this.fontStretch.setState(void 0,e,i),this.fontSize.setState(null,e,i),this.lineHeight.setState(null,e,i),this.fontFamily.setState(void 0,e,i)),this}function Un(t,i,o){if(void 0===t){var n=this.marginTop.value,r=this.marginRight.value,s=this.marginBottom.value,l=this.marginLeft.value;return e.Values.equal(n,r)&&e.Values.equal(r,s)&&e.Values.equal(s,l)?n:[n,r,s,l]}return Array.isArray(t)?(t.length>=1&&this.marginTop.setState(t[0],i,o),t.length>=2&&this.marginRight.setState(t[1],i,o),t.length>=3&&this.marginBottom.setState(t[2],i,o),t.length>=4&&this.marginLeft.setState(t[3],i,o)):(this.marginTop.setState(t,i,o),this.marginRight.setState(t,i,o),this.marginBottom.setState(t,i,o),this.marginLeft.setState(t,i,o)),this}function Gn(t,e,i){if(void 0===t){var o=this.overflowX.value,n=this.overflowY.value;return o===n?o:[o,n]}return Array.isArray(t)?(t.length>=1&&this.overflowX.setState(t[0],e,i),t.length>=2&&this.overflowY.setState(t[1],e,i)):(this.overflowX.setState(t,e,i),this.overflowY.setState(t,e,i)),this}function Bn(t,e,i){if(void 0===t){var o=this.overscrollBehaviorX.value,n=this.overscrollBehaviorY.value;return o===n?o:[o,n]}return Array.isArray(t)?(t.length>=1&&this.overscrollBehaviorX.setState(t[0],e,i),t.length>=2&&this.overscrollBehaviorY.setState(t[1],e,i)):(this.overscrollBehaviorX.setState(t,e,i),this.overscrollBehaviorY.setState(t,e,i)),this}function jn(t,i,o){if(void 0===t){var n=this.paddingTop.value,r=this.paddingRight.value,s=this.paddingBottom.value,l=this.paddingLeft.value;return e.Equals(n,r)&&e.Equals(r,s)&&e.Equals(s,l)?n:[n,r,s,l]}return Array.isArray(t)?(t.length>=1&&this.paddingTop.setState(t[0],i,o),t.length>=2&&this.paddingRight.setState(t[1],i,o),t.length>=3&&this.paddingBottom.setState(t[2],i,o),t.length>=4&&this.paddingLeft.setState(t[3],i,o)):(this.paddingTop.setState(t,i,o),this.paddingRight.setState(t,i,o),this.paddingBottom.setState(t,i,o),this.paddingLeft.setState(t,i,o)),this}Rn.init=function(t,e){void 0!==e.alignContent&&t.alignContent(e.alignContent),void 0!==e.alignItems&&t.alignItems(e.alignItems),void 0!==e.alignSelf&&t.alignSelf(e.alignSelf),void 0!==e.appearance&&t.appearance(e.appearance),void 0!==e.backdropFilter&&t.backdropFilter(e.backdropFilter),void 0!==e.backgroundClip&&t.backgroundClip(e.backgroundClip),void 0!==e.backgroundColor&&t.backgroundColor(e.backgroundColor),void 0!==e.backgroundImage&&t.backgroundImage(e.backgroundImage),void 0!==e.borderCollapse&&t.borderCollapse(e.borderCollapse),void 0!==e.borderColor&&t.borderColor(e.borderColor),void 0!==e.borderTopColor&&t.borderTopColor(e.borderTopColor),void 0!==e.borderRightColor&&t.borderRightColor(e.borderRightColor),void 0!==e.borderBottomColor&&t.borderBottomColor(e.borderBottomColor),void 0!==e.borderLeftColor&&t.borderLeftColor(e.borderLeftColor),void 0!==e.borderRadius&&t.borderRadius(e.borderRadius),void 0!==e.borderTopLeftRadius&&t.borderTopLeftRadius(e.borderTopLeftRadius),void 0!==e.borderTopRightRadius&&t.borderTopRightRadius(e.borderTopRightRadius),void 0!==e.borderBottomRightRadius&&t.borderBottomRightRadius(e.borderBottomRightRadius),void 0!==e.borderBottomLeftRadius&&t.borderBottomLeftRadius(e.borderBottomLeftRadius),void 0!==e.borderSpacing&&t.borderSpacing(e.borderSpacing),void 0!==e.borderStyle&&t.borderStyle(e.borderStyle),void 0!==e.borderTopStyle&&t.borderTopStyle(e.borderTopStyle),void 0!==e.borderRightStyle&&t.borderRightStyle(e.borderRightStyle),void 0!==e.borderBottomStyle&&t.borderBottomStyle(e.borderBottomStyle),void 0!==e.borderLeftStyle&&t.borderLeftStyle(e.borderLeftStyle),void 0!==e.borderWidth&&t.borderWidth(e.borderWidth),void 0!==e.borderTopWidth&&t.borderTopWidth(e.borderTopWidth),void 0!==e.borderRightWidth&&t.borderRightWidth(e.borderRightWidth),void 0!==e.borderBottomWidth&&t.borderBottomWidth(e.borderBottomWidth),void 0!==e.borderLeftWidth&&t.borderLeftWidth(e.borderLeftWidth),void 0!==e.bottom&&t.bottom(e.bottom),void 0!==e.boxShadow&&t.boxShadow(e.boxShadow),void 0!==e.boxSizing&&t.boxSizing(e.boxSizing),void 0!==e.color&&t.color(e.color),void 0!==e.cursor&&t.cursor(e.cursor),void 0!==e.display&&t.display(e.display),void 0!==e.filter&&t.filter(e.filter),void 0!==e.flexBasis&&t.flexBasis(e.flexBasis),void 0!==e.flexDirection&&t.flexDirection(e.flexDirection),void 0!==e.flexGrow&&t.flexGrow(e.flexGrow),void 0!==e.flexShrink&&t.flexShrink(e.flexShrink),void 0!==e.flexWrap&&t.flexWrap(e.flexWrap),void 0!==e.font&&t.font(e.font),void 0!==e.fontFamily&&t.fontFamily(e.fontFamily),void 0!==e.fontSize&&t.fontSize(e.fontSize),void 0!==e.fontStretch&&t.fontStretch(e.fontStretch),void 0!==e.fontStyle&&t.fontStyle(e.fontStyle),void 0!==e.fontVariant&&t.fontVariant(e.fontVariant),void 0!==e.fontWeight&&t.fontWeight(e.fontWeight),void 0!==e.height&&t.height(e.height),void 0!==e.justifyContent&&t.justifyContent(e.justifyContent),void 0!==e.left&&t.left(e.left),void 0!==e.lineHeight&&t.lineHeight(e.lineHeight),void 0!==e.margin&&t.margin(e.margin),void 0!==e.marginTop&&t.marginTop(e.marginTop),void 0!==e.marginRight&&t.marginRight(e.marginRight),void 0!==e.marginBottom&&t.marginBottom(e.marginBottom),void 0!==e.marginLeft&&t.marginLeft(e.marginLeft),void 0!==e.maxHeight&&t.maxHeight(e.maxHeight),void 0!==e.maxWidth&&t.maxWidth(e.maxWidth),void 0!==e.minHeight&&t.minHeight(e.minHeight),void 0!==e.minWidth&&t.minWidth(e.minWidth),void 0!==e.opacity&&t.opacity(e.opacity),void 0!==e.order&&t.order(e.order),void 0!==e.outlineColor&&t.outlineColor(e.outlineColor),void 0!==e.outlineStyle&&t.outlineStyle(e.outlineStyle),void 0!==e.outlineWidth&&t.outlineWidth(e.outlineWidth),void 0!==e.overflow&&t.overflow(e.overflow),void 0!==e.overflowX&&t.overflowX(e.overflowX),void 0!==e.overflowY&&t.overflowY(e.overflowY),void 0!==e.overflowScrolling&&t.overflowScrolling(e.overflowScrolling),void 0!==e.overscrollBehavior&&t.overscrollBehavior(e.overscrollBehavior),void 0!==e.overscrollBehaviorX&&t.overscrollBehaviorX(e.overscrollBehaviorX),void 0!==e.overscrollBehaviorY&&t.overscrollBehaviorY(e.overscrollBehaviorY),void 0!==e.padding&&t.padding(e.padding),void 0!==e.paddingTop&&t.paddingTop(e.paddingTop),void 0!==e.paddingRight&&t.paddingRight(e.paddingRight),void 0!==e.paddingBottom&&t.paddingBottom(e.paddingBottom),void 0!==e.paddingLeft&&t.paddingLeft(e.paddingLeft),void 0!==e.pointerEvents&&t.pointerEvents(e.pointerEvents),void 0!==e.position&&t.position(e.position),void 0!==e.right&&t.right(e.right),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textDecorationColor&&t.textDecorationColor(e.textDecorationColor),void 0!==e.textDecorationLine&&t.textDecorationLine(e.textDecorationLine),void 0!==e.textDecorationStyle&&t.textDecorationStyle(e.textDecorationStyle),void 0!==e.textOverflow&&t.textOverflow(e.textOverflow),void 0!==e.textTransform&&t.textTransform(e.textTransform),void 0!==e.top&&t.top(e.top),void 0!==e.touchAction&&t.touchAction(e.touchAction),void 0!==e.transform&&t.transform(e.transform),void 0!==e.userSelect&&t.userSelect(e.userSelect),void 0!==e.verticalAlign&&t.verticalAlign(e.verticalAlign),void 0!==e.visibility&&t.visibility(e.visibility),void 0!==e.whiteSpace&&t.whiteSpace(e.whiteSpace),void 0!==e.width&&t.width(e.width),void 0!==e.zIndex&&t.zIndex(e.zIndex)},Rn.define=function(t){Sn({propertyNames:"align-content",type:String})(t,"alignContent"),Sn({propertyNames:"align-items",type:String})(t,"alignItems"),Sn({propertyNames:"align-self",type:String})(t,"alignSelf"),Sn({propertyNames:["appearance","-webkit-appearance"],type:String})(t,"appearance"),Sn({propertyNames:["backdrop-filter","-webkit-backdrop-filter"],type:String})(t,"backdropFilter"),Sn({propertyNames:["background-clip","-webkit-background-clip"],type:String})(t,"backgroundClip"),Sn({propertyNames:"background-color",type:Tt,state:null})(t,"backgroundColor"),Sn({propertyNames:"background-image",type:Tt,state:null,parse:function(t){try{return Gt.parse(t)}catch(e){return t}},fromAny:function(t){if("string"!=typeof t)return Gt.fromAny(t);try{return Gt.parse(t)}catch(e){return t}}})(t,"backgroundImage"),Sn({propertyNames:"border-collapse",type:String})(t,"borderCollapse"),t.borderColor=In,Sn({propertyNames:"border-top-color",type:Tt,state:null})(t,"borderTopColor"),Sn({propertyNames:"border-right-color",type:Tt,state:null})(t,"borderRightColor"),Sn({propertyNames:"border-bottom-color",type:Tt,state:null})(t,"borderBottomColor"),Sn({propertyNames:"border-left-color",type:Tt,state:null})(t,"borderLeftColor"),t.borderRadius=kn,Sn({propertyNames:"border-top-left-radius",type:r.Length,state:null})(t,"borderTopLeftRadius"),Sn({propertyNames:"border-top-right-radius",type:r.Length,state:null})(t,"borderTopRightRadius"),Sn({propertyNames:"border-bottom-right-radius",type:r.Length,state:null})(t,"borderBottomRightRadius"),Sn({propertyNames:"border-bottom-left-radius",type:r.Length,state:null})(t,"borderBottomLeftRadius"),Sn({propertyNames:"border-spacing",type:String})(t,"borderSpacing"),t.borderStyle=Wn,Sn({propertyNames:"border-top-style",type:String})(t,"borderTopStyle"),Sn({propertyNames:"border-right-style",type:String})(t,"borderRightStyle"),Sn({propertyNames:"border-bottom-style",type:String})(t,"borderBottomStyle"),Sn({propertyNames:"border-left-style",type:String})(t,"borderLeftStyle"),t.borderWidth=En,Sn({propertyNames:"border-top-width",type:r.Length,state:null})(t,"borderTopWidth"),Sn({propertyNames:"border-right-width",type:r.Length,state:null})(t,"borderRightWidth"),Sn({propertyNames:"border-bottom-width",type:r.Length,state:null})(t,"borderBottomWidth"),Sn({propertyNames:"border-left-width",type:r.Length,state:null})(t,"borderLeftWidth"),bn({propertyNames:"bottom",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.bottom-i.bottom)}}return null}})(t,"bottom"),Sn({propertyNames:"box-shadow",type:qt,state:null})(t,"boxShadow"),Sn({propertyNames:"box-sizing",type:String})(t,"boxSizing"),Sn({propertyNames:"color",type:Tt,state:null})(t,"color"),Sn({propertyNames:"cursor",type:String})(t,"cursor"),Sn({propertyNames:"display",type:String})(t,"display"),Sn({propertyNames:"filter",type:String})(t,"filter"),Sn({propertyNames:"flex-basis",type:r.Length,state:null})(t,"flexBasis"),Sn({propertyNames:"flex-direction",type:String})(t,"flexDirection"),Sn({propertyNames:"flex-grow",type:Number})(t,"flexGrow"),Sn({propertyNames:"flex-shrink",type:Number})(t,"flexShrink"),Sn({propertyNames:"flex-wrap",type:String})(t,"flexWrap"),t.font=Nn,Sn({propertyNames:"font-family",type:wt})(t,"fontFamily"),Sn({propertyNames:"font-size",type:r.Length,state:null})(t,"fontSize"),Sn({propertyNames:"font-stretch",type:String})(t,"fontStretch"),Sn({propertyNames:"font-style",type:String})(t,"fontStyle"),Sn({propertyNames:"font-variant",type:String})(t,"fontVariant"),Sn({propertyNames:"font-weight",type:String})(t,"fontWeight"),bn({propertyNames:"height",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetHeight):null}})(t,"height"),Sn({propertyNames:"justify-content",type:String})(t,"justifyContent"),bn({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null}})(t,"left"),Sn({propertyNames:"line-height",type:r.Length,state:null})(t,"lineHeight"),t.margin=Un,bn({propertyNames:"margin-top",type:r.Length,state:null})(t,"marginTop"),bn({propertyNames:"margin-right",type:r.Length,state:null})(t,"marginRight"),bn({propertyNames:"margin-bottom",type:r.Length,state:null})(t,"marginBottom"),bn({propertyNames:"margin-left",type:r.Length,state:null})(t,"marginLeft"),Sn({propertyNames:"max-height",type:r.Length,state:null})(t,"maxHeight"),Sn({propertyNames:"max-width",type:r.Length,state:null})(t,"maxWidth"),Sn({propertyNames:"min-height",type:r.Length,state:null})(t,"minHeight"),Sn({propertyNames:"min-width",type:r.Length,state:null})(t,"minWidth"),Sn({propertyNames:"opacity",type:Number})(t,"opacity"),Sn({propertyNames:"order",type:Number})(t,"order"),Sn({propertyNames:"outline-color",type:Tt,state:null})(t,"outlineColor"),Sn({propertyNames:"outline-style",type:String})(t,"outlineStyle"),Sn({propertyNames:"outline-width",type:r.Length,state:null})(t,"outlineWidth"),t.overflow=Gn,Sn({propertyNames:"overflow-x",type:String})(t,"overflowX"),Sn({propertyNames:"overflow-y",type:String})(t,"overflowY"),Sn({propertyNames:"-webkit-overflow-scrolling",type:String})(t,"overflowScrolling"),t.overscrollBehavior=Bn,Sn({propertyNames:"overscroll-behavior-x",type:String})(t,"overscrollBehaviorX"),Sn({propertyNames:"overscroll-behavior-y",type:String})(t,"overscrollBehaviorY"),t.padding=jn,bn({propertyNames:"padding-top",type:r.Length,state:null})(t,"paddingTop"),bn({propertyNames:"padding-right",type:r.Length,state:null})(t,"paddingRight"),bn({propertyNames:"padding-bottom",type:r.Length,state:null})(t,"paddingBottom"),bn({propertyNames:"padding-left",type:r.Length,state:null})(t,"paddingLeft"),Sn({propertyNames:"pointer-events",type:String})(t,"pointerEvents"),Sn({propertyNames:"position",type:String})(t,"position"),bn({propertyNames:"right",type:r.Length,state:null,get computedValue(){var t=this.owner.node;if(t instanceof HTMLElement){var e=t.offsetParent,i=null!==e?e.getBoundingClientRect():t===document.body?t.getBoundingClientRect():null;if(null!==i){var o=t.getBoundingClientRect();return r.Length.px(o.right-i.right)}}return null}})(t,"right"),Sn({propertyNames:"text-align",type:String})(t,"textAlign"),Sn({propertyNames:"text-decoration-color",type:Tt,state:null})(t,"textDecorationColor"),Sn({propertyNames:"text-decoration-line",type:String})(t,"textDecorationLine"),Sn({propertyNames:"text-decoration-style",type:String})(t,"textDecorationStyle"),Sn({propertyNames:"text-overflow",type:String})(t,"textOverflow"),Sn({propertyNames:"text-transform",type:String})(t,"textTransform"),bn({propertyNames:"top",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetTop):null}})(t,"top"),Sn({propertyNames:"touch-action",type:String})(t,"touchAction"),Sn({propertyNames:"transform",type:r.Transform,state:null})(t,"transform"),Sn({propertyNames:["user-select","-webkit-user-select","-moz-user-select","-ms-user-select"],type:String})(t,"userSelect"),Sn({propertyNames:"vertical-align",type:String})(t,"verticalAlign"),Sn({propertyNames:"visibility",type:String})(t,"visibility"),Sn({propertyNames:"white-space",type:String})(t,"whiteSpace"),bn({propertyNames:"width",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetWidth):null}})(t,"width"),Sn({propertyNames:"z-index",type:Number})(t,"zIndex")};var Hn={getCssRuleConstructor:function(t,e){for(;null!==e;){if(Object.prototype.hasOwnProperty.call(e,"cssRuleConstructors")){var i=e.cssRuleConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},decorateCssRule:function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"cssRuleConstructors")||(o.cssRuleConstructors={}),o.cssRuleConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getCssRule(i.toString());return null===e&&(e=new t(this,i.toString()),this.setCssRule(i.toString(),e)),e},configurable:!0,enumerable:!0})}},qn=function(t,e){return this instanceof qn?zn.call(this,t,e):(i=t,Hn.decorateCssRule.bind(Hn,qn.define(i)));var i};function zn(t,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.animationTracks=e.Arrays.empty,this}w(qn,Object),qn.prototype.onAnimate=function(t){this.updateAnimations(t)},qn.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},qn.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(this.animationTracks=o,0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},qn.prototype.trackDidStartAnimating=function(t){},qn.prototype.trackWillStopAnimating=function(t){},qn.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(this.animationTracks=o,0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},qn.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},qn.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},qn.prototype.addConstraint=function(t){this.owner.addConstraint(t)},qn.prototype.removeConstraint=function(t){this.owner.removeConstraint(t)},qn.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},qn.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},qn.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},qn.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},qn.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},qn.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},qn.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},qn.prototype.applyTheme=function(t,e,i){},qn.prototype.mount=function(){},qn.prototype.unmount=function(){},qn.prototype.createRule=function(t){if(void 0!==t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSRule)return i;throw new TypeError(""+i)}throw new Error("undefined css rule")},qn.define=function(t){var e=t.type;if(delete t.type,void 0===e||"style"===e)return Yn.define(t);if("media"===e)return Kn.define(t);var i=t.extends,o=t.css;delete t.extends,delete t.css,void 0===i&&(i=qn);var n=function(t,e){var n,r=i.call(this,t,e)||this;void 0!==o?n=o:void 0!==r.initCss&&(n=r.initCss());var s=r.createRule(n);return void 0!==r.initRule&&(s=r.initRule(s)),r.rule=s,r},r=t;return Object.setPrototypeOf(n,i),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,i.prototype),"function"==typeof o&&(r.initCss=o,o=void 0),n};var Yn=function(t,e){return this instanceof Yn?Xn.call(this,t,e):(i=t,Hn.decorateCssRule.bind(Hn,Yn.define(i)));var i};function Xn(t,e){var i=qn.call(this,t,e)||this;return i.styleAnimators={},i}w(Yn,qn),Rn.define(Yn.prototype),Object.defineProperty(Yn.prototype,"node",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"selector",{get:function(){return this.rule.selectorText},enumerable:!0,configurable:!0}),Yn.prototype.setSelector=function(t){this.rule.selectorText=t},Yn.prototype.getStyle=function(t){if("undefined"!=typeof CSSStyleValue){var e=this.rule.styleMap;if("string"==typeof t)return e.get(t);for(var i=0,o=t.length;i<o;i+=1){if(""!==(n=e.get(t[i])))return n}return""}e=this.rule.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.getPropertyValue(t[i])))return n}return""},Yn.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.rule.styleMap.set(e,n)}catch(t){}else this.rule.style.setProperty(e,ne(i),o)}else this.rule.styleMap.delete(e);else null!=i?this.rule.style.setProperty(e,ne(i),o):this.rule.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},Yn.prototype.willSetStyle=function(t,e,i){},Yn.prototype.onSetStyle=function(t,e,i){},Yn.prototype.didSetStyle=function(t,e,i){},Yn.prototype.hasStyleAnimator=function(t){return void 0!==this.styleAnimators[t]},Yn.prototype.getStyleAnimator=function(t){var e=this.styleAnimators[t];return void 0!==e?e:null},Yn.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null!==e?i[t]=e:delete i[t]},Yn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(se.timing,me.ambient,!1):l.Timing.fromAny(i);var o=this.styleAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},Yn.prototype.mount=function(){qn.prototype.mount.call(this);var t=this.styleAnimators;for(var e in t){t[e].mount()}},Yn.prototype.unmount=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}qn.prototype.unmount.call(this)},Yn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSStyleRule)return i;throw new TypeError(""+i)},Yn.define=function(t){var e=t.extends,i=t.css,o=t.style;delete t.extends,delete t.css,delete t.style,void 0===e&&(e=Yn);var n=function(t,n){var r,s=function(t,e){return void 0===e?s.getStyle(t):(s.setStyle(t,e),s.owner)};if(Object.setPrototypeOf(s,this),s=e.call(s,t,n)||s,void 0!==i)r=i;else{if(void 0===s.initCss)throw new Error("undefined css");r=s.initCss()}var l=s.createRule(r);return void 0!==s.initRule&&(l=s.initRule(l)),s.rule=l,void 0!==o&&Rn.init(s,o),s},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),"function"==typeof i&&(r.initCss=i,i=void 0),n};var Kn=function(t,e){return this instanceof Kn?Zn.call(this,t,e):(i=t,Hn.decorateCssRule.bind(Hn,Kn.define(i)));var i};function Zn(t,e){var i=qn.call(this,t,e)||this;return i.cssRules={},i}w(Kn,qn),Kn.prototype.getRule=function(t){return this.rule.cssRules.item(t)},Kn.prototype.insertRule=function(t,e){return this.rule.insertRule(t,e)},Kn.prototype.removeRule=function(t){this.rule.deleteRule(t)},Kn.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},Kn.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},Kn.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},Kn.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(se.timing,me.ambient,!1):l.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},Kn.prototype.mount=function(){qn.prototype.mount.call(this);var t=this.cssRules;for(var e in t){t[e].mount()}},Kn.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}qn.prototype.unmount.call(this)},Kn.prototype.createRule=function(t){var e=this.owner.insertRule(t),i=this.owner.getRule(e);if(i instanceof CSSMediaRule)return i;throw new TypeError(""+i)},Kn.define=function(t){var e=t.extends,i=t.css;delete t.extends,delete t.css,void 0===e&&(e=Kn);var o=function(t,o){var n,r=e.call(this,t,o)||this;if(void 0!==i)n=i;else{if(void 0===r.initCss)throw new Error("undefined css");n=r.initCss()}var s=r.createRule(n);return void 0!==r.initRule&&(s=r.initRule(s)),r.rule=s,r},n=t;return Object.setPrototypeOf(o,e),(o.prototype=n).constructor=o,Object.setPrototypeOf(o.prototype,e.prototype),"function"==typeof i&&(n.initCss=i,i=void 0),o};var _n=function(){function t(t,i){this.owner=t,this.stylesheet=void 0!==i?i:this.createStylesheet(),this.cssRules={},this.animationTracks=e.Arrays.empty}return t.prototype.createStylesheet=function(){return new CSSStyleSheet},t.prototype.getRule=function(t){return this.stylesheet.cssRules.item(t)},t.prototype.insertRule=function(t,e){return this.stylesheet.insertRule(t,e)},t.prototype.removeRule=function(t){this.stylesheet.deleteRule(t)},t.prototype.hasCssRule=function(t){return void 0!==this.cssRules[t]},t.prototype.getCssRule=function(t){var e=this.cssRules[t];return void 0!==e?e:null},t.prototype.setCssRule=function(t,e){null!==e?this.cssRules[t]=e:delete this.cssRules[t]},t.prototype.getLazyCssRule=function(t){var e=this.getCssRule(t);if(null===e){var i=Hn.getCssRuleConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setCssRule(t,e))}return e},t.prototype.getLook=function(t,e){return this.owner.getLook(t,e)},t.prototype.getLookOr=function(t,e,i){return 2===arguments.length?this.owner.getLookOr(t,e):this.owner.getLookOr(t,e,i)},t.prototype.applyTheme=function(t,e,i){i=void 0===i||!0===i?t.getOr(se.timing,me.ambient,!1):l.Timing.fromAny(i);var o=this.cssRules;for(var n in o){o[n].applyTheme(t,e,i)}},t.prototype.onAnimate=function(t){this.updateAnimations(t)},t.prototype.updateAnimations=function(t){for(var e=this.animationTracks,i=0,o=e.length;i<o;i+=1){e[i].onAnimate(t)}},t.prototype.trackWillStartAnimating=function(t){var i=this.animationTracks,o=e.Arrays.inserted(t,i);i!==o&&(this.animationTracks=o,0===i.length&&(this.owner.trackWillStartAnimating(this),this.owner.trackDidStartAnimating(this)))},t.prototype.trackDidStartAnimating=function(t){},t.prototype.trackWillStopAnimating=function(t){},t.prototype.trackDidStopAnimating=function(t){var i=this.animationTracks,o=e.Arrays.removed(t,i);i!==o&&(this.animationTracks=o,0===o.length&&(this.owner.trackWillStopAnimating(this),this.owner.trackDidStopAnimating(this)))},t.prototype.constraint=function(t,e,i,o){return this.owner.constraint(t,e,i,o)},t.prototype.hasConstraint=function(t){return this.owner.hasConstraint(t)},t.prototype.addConstraint=function(t){return this.owner.addConstraint(t)},t.prototype.removeConstraint=function(t){return this.owner.removeConstraint(t)},t.prototype.constraintVariable=function(t,e,i){return this.owner.constraintVariable(t,e,i)},t.prototype.hasConstraintVariable=function(t){return this.owner.hasConstraintVariable(t)},t.prototype.addConstraintVariable=function(t){this.owner.addConstraintVariable(t)},t.prototype.removeConstraintVariable=function(t){this.owner.removeConstraintVariable(t)},t.prototype.setConstraintVariable=function(t,e){this.owner.setConstraintVariable(t,e)},t.prototype.requireUpdate=function(t){"function"==typeof this.owner.requireUpdate&&this.owner.requireUpdate(t)},t.prototype.mount=function(){var t=this.cssRules;for(var e in t){t[e].mount()}},t.prototype.unmount=function(){var t=this.cssRules;for(var e in t){t[e].unmount()}},t}(),Qn=function(t){function i(i){var o=t.call(this)||this;return o.node=i,o.key=void 0,o.childViewMap=null,o.viewServices=null,o.viewProperties=null,o.viewAnimators=null,o.viewFasteners=null,o.gestures=null,o.constraints=e.Arrays.empty,o.constraintVariables=e.Arrays.empty,i.view=o,o}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.text&&this.text(e.text)},i.prototype.willObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){this.key=t},Object.defineProperty(i.prototype,"parentView",{get:function(){var t=this.node.parentNode;if(null!==t){var e=t.view;if(e instanceof ro)return e}return null},enumerable:!1,configurable:!0}),i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.node,e=t.parentNode;if(null!==e){var i=e.view;void 0!==i?0==(this.viewFlags&ro.TraversingFlag)?i.removeChildView(this):this.setViewFlags(this.viewFlags|ro.RemovingFlag):(e.removeChild(t),this.setParentView(null,this),this.setKey(void 0))}},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}return null},i.prototype.lastChildView=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;if(void 0!==i)return i}return null},i.prototype.nextChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.nextSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof i&&t.parentView===this)for(var e=t.node;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n],s=r.view;if(void 0!==s&&void 0!==(i=t.call(e,s)))break;o[n]===r&&(n+=1)}return i},i.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setChildView=function(t,e){var o=null;if(null!==e){if(!(e instanceof i))throw new TypeError(""+e);e.parentView===this&&(o=e.node.nextSibling),e.remove()}var n=this.getChildView(t);if(null!==n){if(!(n instanceof i))throw new TypeError(""+n);var r=n.node;o=r.nextSibling,this.willRemoveChildView(n),this.willRemoveChildNode(r),n.setParentView(null,this),this.removeChildViewMap(n),this.node.removeChild(r),this.onRemoveChildNode(r),this.onRemoveChildView(n),this.didRemoveChildNode(r),this.didRemoveChildView(n),n.setKey(void 0)}if(null!==e){var s=e.node,l=null;null!==o&&void 0===(l=o.view)&&(l=null),e.setKey(t),this.willInsertChildView(e,l),this.willInsertChildNode(s,o),this.node.insertBefore(s,o),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildNode(s,o),this.onInsertChildView(e,l),this.didInsertChildNode(s,o),this.didInsertChildView(e,l),e.cascadeInsert()}return n},i.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},this.childViewMap=i),i[e]=t}},i.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},i.prototype.appendChild=function(t,e){if(t instanceof ro)this.appendChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.appendChildNode(t,e)}},i.prototype.appendChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node;this.willInsertChildView(t,null),this.willInsertChildNode(o,null),this.node.appendChild(o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,null),this.onInsertChildView(t,null),this.didInsertChildNode(o,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.appendChildNode=function(t,e){var i=t.view;void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,null)),this.willInsertChildNode(t,null),this.node.appendChild(t),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,null),void 0!==i&&this.onInsertChildView(i,null),this.didInsertChildNode(t,null),void 0!==i&&(this.didInsertChildView(i,null),i.cascadeInsert())},i.prototype.prependChild=function(t,e){if(t instanceof ro)this.prependChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.prependChildNode(t,e)}},i.prototype.prependChildView=function(t,e){if(!(t instanceof i))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var o=t.node,n=this.node.firstChild,r=null;null!==n&&void 0===(r=n.view)&&(r=null),this.willInsertChildView(t,r),this.willInsertChildNode(o,n),this.node.insertBefore(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,r),this.didInsertChildNode(o,n),this.didInsertChildView(t,r),t.cascadeInsert()},i.prototype.prependChildNode=function(t,e){var i=t.view,o=this.node.firstChild,n=null;null!==o&&void 0===(n=o.view)&&(n=null),void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,n)),this.willInsertChildNode(t,o),this.node.insertBefore(t,o),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,o),void 0!==i&&this.onInsertChildView(i,n),this.didInsertChildNode(t,o),void 0!==i&&(this.didInsertChildView(i,n),i.cascadeInsert())},i.prototype.insertChild=function(t,e,o){if(t instanceof i)if(e instanceof ro)this.insertChildView(t,e,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t.node,e,o)}else{if(!(t instanceof Node))throw new TypeError(""+t);if(e instanceof i)this.insertChildNode(t,e.node,o);else{if(!(e instanceof Node||null===e))throw new TypeError(""+e);this.insertChildNode(t,e,o)}}},i.prototype.insertChildView=function(t,e,o){if(!(t instanceof i))throw new TypeError(""+t);if(null!==e&&!(e instanceof i))throw new TypeError(""+e);t.remove(),void 0!==o&&(this.removeChildView(o),t.setKey(o));var n=t.node,r=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(n,r),this.node.insertBefore(n,r),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(n,r),this.onInsertChildView(t,e),this.didInsertChildNode(n,r),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i),this.insertGesture(e,i)},i.prototype.insertChildNode=function(t,e,i){var o=t.view,n=null;null!==e&&void 0===(n=e.view)&&(n=null),void 0!==o&&(o.remove(),void 0!==i&&(this.removeChildView(i),o.setKey(i)),this.willInsertChildView(o,n)),this.willInsertChildNode(t,e),this.node.insertBefore(t,e),void 0!==o&&(this.insertChildViewMap(o),o.setParentView(this,null)),this.onInsertChildNode(t,e),void 0!==o&&this.onInsertChildView(o,n),this.didInsertChildNode(t,e),void 0!==o&&(this.didInsertChildView(o,n),o.cascadeInsert())},i.prototype.injectChildView=function(t,e,i){void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.node,n=null!==e?e.node:null;this.willInsertChildView(t,e),this.willInsertChildNode(o,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(o,n),this.onInsertChildView(t,e),this.didInsertChildNode(o,n),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.willInsertChildNode=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillInsertChildNode&&r.viewWillInsertChildNode(t,e,this)}},i.prototype.onInsertChildNode=function(t,e){this.requireUpdate(this.insertChildFlags)},i.prototype.didInsertChildNode=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidInsertChildNode&&r.viewDidInsertChildNode(t,e,this)}},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(ro.MountedFlag|ro.PoweredFlag))==(ro.MountedFlag|ro.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&ro.UpdateMask)&ro.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.removeChild=function(t){if(t instanceof ro)this.removeChildView(t);else{if(!(t instanceof Node))throw new TypeError(""+t);this.removeChildNode(t)}},i.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof i))throw new TypeError(""+e);var o=e.node;if(o.parentNode!==this.node)throw new Error("not a child view");if(this.willRemoveChildView(e),this.willRemoveChildNode(o),e.setParentView(null,this),this.removeChildViewMap(e),this.node.removeChild(o),this.onRemoveChildNode(o),this.onRemoveChildView(e),this.didRemoveChildNode(o),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeGesture(e),this.removeViewFastener(e)},i.prototype.removeChildNode=function(t){if(t.parentNode!==this.node)throw new Error("not a child node");var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))},i.prototype.removeAll=function(){for(;;){var t=this.node.lastChild;if(null===t)break;var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this.node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(void 0))}},i.prototype.willRemoveChildNode=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillRemoveChildNode&&n.viewWillRemoveChildNode(t,this)}},i.prototype.onRemoveChildNode=function(t){this.requireUpdate(this.removeChildFlags)},i.prototype.didRemoveChildNode=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidRemoveChildNode&&n.viewDidRemoveChildNode(t,this)}},i.prototype.text=function(t){return 0===arguments.length?(null===(t=this.node.textContent)&&(t=void 0),t):(void 0===t&&(t=null),this.node.textContent=t,this)},i.isRootView=function(t){for(;;){var e=t.parentNode;if(null===e)break;if(e.view instanceof ro)return!1;t=e}return!0},i.isNodeMounted=function(t){var e=t.isConnected;if("boolean"!=typeof e){var i=t.ownerDocument;if(null!==i)e=0==(i.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED);else e=!1}return e},i.prototype.mount=function(){!this.isMounted()&&i.isNodeMounted(this.node)&&i.isRootView(this.node)&&(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&ro.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|ro.MountedFlag|ro.TraversingFlag);try{this.willMount(),this.onMount(),this.mountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners(),this.mountGestures()},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.mountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeMount(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&ro.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~ro.MountedFlag|ro.TraversingFlag);try{this.willUnmount(),this.unmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountGestures(),this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~ro.ViewFlagMask|ro.RemovingFlag))},i.prototype.unmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnmount(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&ro.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|ro.PoweredFlag|ro.TraversingFlag);try{this.willPower(),this.onPower(),this.powerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.powerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadePower(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&ro.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~ro.PoweredFlag|ro.TraversingFlag);try{this.willUnpower(),this.unpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.unpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUnpower(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&ro.CulledFlag)?(this.setViewFlags(e|ro.CulledFlag),0==(e&ro.CullFlag)&&this.cullView()):t||0==(e&ro.CulledFlag)||(this.setViewFlags(e&~ro.CulledFlag),0==(e&ro.CullFlag)&&this.uncullView())},i.prototype.cascadeCull=function(){0==(this.viewFlags&ro.CullFlag)&&(this.setViewFlags(this.viewFlags|ro.CullFlag),0==(this.viewFlags&ro.CulledFlag)&&this.cullView())},i.prototype.cullView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willCull(),this.onCull(),this.cullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.cullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeCull(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&ro.CullFlag)&&(this.setViewFlags(this.viewFlags&~ro.CullFlag),0==(this.viewFlags&ro.CulledFlag)&&this.uncullView())},i.prototype.uncullView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willUncull(),this.uncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.uncullChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){var i=t[e].view;void 0===i||(i.cascadeUncull(),0==(i.viewFlags&ro.RemovingFlag))?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsProcess,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsProcess(t,i))&ro.ProcessMask)){var o=t;this.setViewFlags(this.viewFlags&~(ro.NeedsProcess|ro.NeedsProject)|ro.TraversingFlag|ro.ProcessingFlag);try{this.willProcess(o,i),0!=((this.viewFlags|t)&ro.NeedsResize)&&(o|=ro.NeedsResize,this.setViewFlags(this.viewFlags&~ro.NeedsResize),this.willResize(i)),0!=((this.viewFlags|t)&ro.NeedsScroll)&&(o|=ro.NeedsScroll,this.setViewFlags(this.viewFlags&~ro.NeedsScroll),this.willScroll(i)),0!=((this.viewFlags|t)&ro.NeedsChange)&&(o|=ro.NeedsChange,this.setViewFlags(this.viewFlags&~ro.NeedsChange),this.willChange(i)),0!=((this.viewFlags|t)&ro.NeedsAnimate)&&(o|=ro.NeedsAnimate,this.setViewFlags(this.viewFlags&~ro.NeedsAnimate),this.willAnimate(i)),this.onProcess(o,i),0!=(o&ro.NeedsResize)&&this.onResize(i),0!=(o&ro.NeedsScroll)&&this.onScroll(i),0!=(o&ro.NeedsChange)&&this.onChange(i),0!=(o&ro.NeedsAnimate)&&this.onAnimate(i),0!=(o&ro.ProcessMask)&&this.processChildViews(o,i,this.processChildView),0!=(o&ro.NeedsAnimate)&&this.didAnimate(i),0!=(o&ro.NeedsChange)&&this.didChange(i),0!=(o&ro.NeedsScroll)&&this.didScroll(i),0!=(o&ro.NeedsResize)&&this.didResize(i),this.didProcess(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.ProcessingFlag))}}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties()},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsDisplay,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsDisplay(t,i))&ro.DisplayMask)){var o=t;this.setViewFlags(this.viewFlags&~(ro.NeedsDisplay|ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite)|ro.TraversingFlag|ro.DisplayingFlag);try{this.willDisplay(o,i),0!=((this.viewFlags|t)&ro.NeedsLayout)&&(o|=ro.NeedsLayout,this.setViewFlags(this.viewFlags&~ro.NeedsLayout),this.willLayout(i)),this.onDisplay(o,i),0!=(o&ro.NeedsLayout)&&this.onLayout(i),0==(o&ro.DisplayMask)||this.isCulled()||this.displayChildViews(o,i,this.displayChildView),0!=(o&ro.NeedsLayout)&&this.didLayout(i),this.didDisplay(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.DisplayingFlag))}}},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){var r=o[n].view;void 0===r||(i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag))?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},i.prototype.getLook=function(t,e){},i.prototype.getLookOr=function(t,e,i){return 2===arguments.length&&(i=e,e=null),i},i.prototype.modifyMood=function(t,e,i){},i.prototype.modifyTheme=function(t,e,i){},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},this.viewServices=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},this.viewProperties=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},this.viewAnimators=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},this.viewFasteners=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasGesture=function(t){var e=this.gestures;return null!==e&&void 0!==e[t]},i.prototype.getGesture=function(t){var e=this.gestures;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setGesture=function(t,e){var i=this.gestures;null===i&&(i={},this.gestures=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountGestures=function(){var t=this.gestures;for(var e in t){t[e].mount()}no.initGestures(this)},i.prototype.unmountGestures=function(){var t=this.gestures;for(var e in t){t[e].unmount()}},i.prototype.insertGesture=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyGesture(i);null!==o&&!0===o.child&&o.setView(t,e)}},i.prototype.removeGesture=function(t){var e=t.key;if(void 0!==e){var i=this.getGesture(e);null!==i&&!0===i.child&&i.setView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(this.constraints=o,this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),this.constraints=o)},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(this.constraintVariables=o,this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),this.constraintVariables=o)},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(null!=t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(null!=t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();return t.detach(),new r.R2Box(e.left,e.top,e.right,e.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageBounds",{get:function(){var t=document.createRange();t.selectNode(this.node);var e=t.getBoundingClientRect();t.detach();var i=window.pageXOffset,o=window.pageYOffset;return new r.R2Box(e.left+i,e.top+o,e.right+i,e.bottom+o)},enumerable:!1,configurable:!0}),i.prototype.dispatchEvent=function(t){return this.node.dispatchEvent(t)},i.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},i.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},i.mount=function(t){var e=t.parentView;null!==e?(t.setParentView(e,null),t.cascadeInsert()):t.mount()},i.fromNode=function(t){if(t.view instanceof this)return t.view;if(t instanceof Element)return lr.fromNode(t);if(t instanceof Text)return Jn.fromNode(t);var e=new i(t);return this.mount(e),e},i.fromConstructor=function(t){if(t.prototype instanceof lr)return lr.fromConstructor(t);if(t.prototype instanceof Jn)return Jn.fromConstructor(t);if(t.prototype instanceof ro)return new t;throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if(t instanceof Node)return this.fromNode(t);throw new TypeError(""+t)},i}(ro);co.insertModalView=function(t){var e=document.body,i=e.view;if(void 0!==i)i.appendChildView(t);else{if(!(t instanceof Qn))throw new TypeError(""+t);e.appendChild(t.node),t.mount()}};var Jn=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.create=function(t){return void 0===t&&(t=""),new e(document.createTextNode(t))},e.fromConstructor=function(i){return i.prototype instanceof e?new i(document.createTextNode("")):t.fromConstructor.call(this,i)},e}(Qn),$n=function(t,e){return this instanceof $n?tr.call(this,t,e):(i=t,lr.decorateAttributeAnimator.bind(lr,$n.define(i)));var i};function tr(t,e){var i=Ao.call(this)||this;return void 0!==e&&Object.defineProperty(i,"name",{value:e,enumerable:!0,configurable:!0}),i.owner=t,i}w($n,Ao),Object.defineProperty($n.prototype,"node",{get:function(){return this.owner.node},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"attributeValue",{get:function(){var t=this.owner.getAttribute(this.attributeName);if(null!==t)try{return this.parse(t)}catch(t){}},enumerable:!0,configurable:!0}),Object.defineProperty($n.prototype,"value",{get:function(){var t=this.ownValue;if(!this.isDefined(t)){var e=this.attributeValue;void 0!==e&&(t=e,this.setPrecedence(ro.Extrinsic))}return t},enumerable:!0,configurable:!0}),$n.prototype.getValue=function(){var t=this.value;if(void 0===t)throw new TypeError(t+" "+this.name+" value");return t},$n.prototype.onSetValue=function(t,e){this.owner.setAttribute(this.attributeName,t);var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},$n.prototype.getState=function(){var t=this.state;if(void 0===t)throw new TypeError(t+" "+this.name+" state");return t},$n.prototype.setOwnState=function(t,e){t=this.fromAny(t),Ao.prototype.setOwnState.call(this,t,e)},$n.prototype.onSetLook=function(t,e,i){null!==t&&this.applyLook(t,i)},$n.prototype.applyLook=function(t,e){if(this.owner.isMounted()){var i=this.owner.getLook(t);void 0!==i&&(!0===e&&(e=this.owner.getLookOr(se.timing,!0)),this.setOwnState(i,e))}else this.owner.requireUpdate(ro.NeedsChange)},$n.prototype.applyTheme=function(t,e,i){var o=this.look;if(null!==o){var n=t.get(o,e);void 0!==n&&(!0===i&&(i=this.owner.getLookOr(se.timing,!0)),this.setOwnState(n,i))}},$n.prototype.willStartAnimating=function(){this.owner.trackWillStartAnimating(this)},$n.prototype.didStartAnimating=function(){this.owner.trackDidStartAnimating(this)},$n.prototype.willStopAnimating=function(){this.owner.trackWillStopAnimating(this)},$n.prototype.didStopAnimating=function(){this.owner.trackDidStopAnimating(this)},$n.prototype.parse=function(){throw new Error},$n.prototype.fromAny=function(t){return t},$n.prototype.isMounted=function(){return 0!=(this.animatorFlags&Ao.MountedFlag)},$n.prototype.mount=function(){0==(this.animatorFlags&Ao.MountedFlag)&&(this.willMount(),this.setAnimatorFlags(this.animatorFlags|Ao.MountedFlag),this.onMount(),this.didMount())},$n.prototype.willMount=function(){},$n.prototype.onMount=function(){var t=this.look;null!==t&&this.applyLook(t,!1)},$n.prototype.didMount=function(){},$n.prototype.unmount=function(){0!=(this.animatorFlags&Ao.MountedFlag)&&(this.willUnmount(),this.setAnimatorFlags(this.animatorFlags&~Ao.MountedFlag),this.onUnmount(),this.didUnmount())},$n.prototype.willUnmount=function(){},$n.prototype.onUnmount=function(){this.stopAnimating()},$n.prototype.didUnmount=function(){},$n.prototype.toString=function(){return this.name},$n.getClass=function(t){return t===String?er:t===Boolean?ir:t===Number?or:t===r.Length?nr:t===Tt?rr:t===r.Transform?sr:null},$n.define=function(t){var i=t.extends,o=t.state,n=t.look,r=t.precedence,s=t.initState;delete t.extends,delete t.state,delete t.look,delete t.precedence,delete t.initState,void 0===i&&(i=$n.getClass(t.type)),null===i&&(i=$n,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e,i){return 0===arguments.length?a.value:(2===arguments.length?a.setState(t,e):a.setState(t,e,i),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==o&&(l=a.fromAny(o)),void 0!==l&&(a.ownValue=l,a.ownState=l),void 0!==n&&(a.ownLook=n),void 0!==r&&(a.precedence=r),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l};var er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return t},e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}($n),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return!!t},e.prototype.fromAny=function(t){return!!t},e.prototype.equalState=function(t,e){return t===e},e}($n),or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:void 0},e.prototype.fromAny=function(t){if("number"==typeof t)return t;var e=+t;return isFinite(e)?e:void 0},e.prototype.equalState=function(t,e){return t===e},e}($n),nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Length.parse(t)},e.prototype.fromAny=function(t){try{return r.Length.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}($n),rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return Tt.parse(t)},e.prototype.fromAny=function(t){try{return Tt.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}($n),sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.parse=function(t){return r.Transform.parse(t)},e.prototype.fromAny=function(t){try{return r.Transform.fromAny(t)}catch(t){return null}},e.prototype.equalState=function(t,e){return null!=t?t.equals(e):t===e},e}($n),lr=function(i){function o(t){var e=i.call(this,t)||this;return e.attributeAnimators=null,e.styleAnimators=null,e.initElement(t),e}return w(o,i),o.prototype.initElement=function(t){var e=t.getAttribute("swim-theme");if(null!==e&&""!==e){var i=void 0;if("auto"===e)i="dark"===io.detect().colorScheme?be.dark:be.light;else i=e.indexOf(".")<0?be[e]:pr.eval(e);if(!(i instanceof Ve))throw new TypeError("unknown swim-theme: "+e);this.theme.setState(i,ro.Extrinsic)}},o.prototype.initView=function(t){i.prototype.initView.call(this,t),void 0!==t.id&&this.id(t.id),void 0!==t.classList&&this.addClass.apply(this,t.classList),void 0!==t.mood&&this.mood(t.mood),void 0!==t.moodModifier&&this.moodModifier(t.moodModifier),void 0!==t.theme&&this.theme(t.theme),void 0!==t.themeModifier&&this.themeModifier(t.themeModifier)},o.prototype.onAddViewObserver=function(t){i.prototype.onAddViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.inserted(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onRemoveViewObserver=function(t){i.prototype.onRemoveViewObserver.call(this,t),void 0!==t.viewWillSetAttribute&&(this.viewObserverCache.viewWillSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetAttributeObservers)),void 0!==t.viewDidSetAttribute&&(this.viewObserverCache.viewDidSetAttributeObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetAttributeObservers)),void 0!==t.viewWillSetStyle&&(this.viewObserverCache.viewWillSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewWillSetStyleObservers)),void 0!==t.viewDidSetStyle&&(this.viewObserverCache.viewDidSetStyleObservers=e.Arrays.removed(t,this.viewObserverCache.viewDidSetStyleObservers))},o.prototype.onMount=function(){i.prototype.onMount.call(this),this.mountTheme(),this.updateTheme(!1)},o.prototype.onChange=function(t){i.prototype.onChange.call(this,t),this.updateTheme()},o.prototype.onUncull=function(){i.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},o.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},o.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},o.prototype.modifyMood=function(t,e,i){if(this.moodModifier.takesPrecedence(ro.Intrinsic)){var o=this.moodModifier.getStateOr(Ce.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.moodModifier.setState(n,ro.Intrinsic),this.changeMood(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(se.timing,s,!1):l.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(ro.NeedsChange)}},o.prototype.modifyTheme=function(t,e,i){if(this.themeModifier.takesPrecedence(ro.Intrinsic)){var o=this.themeModifier.getStateOr(Ce.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.themeModifier.setState(n,ro.Intrinsic),this.changeTheme(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(se.timing,s,!1):l.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(ro.NeedsChange)}},o.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.takesPrecedence(ro.Intrinsic)){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;null!=o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setState(n,ro.Intrinsic)}}else this.mood.setInherited(!0)}},o.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.takesPrecedence(ro.Intrinsic)){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;null!=o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setState(n,ro.Intrinsic)}}else this.theme.setInherited(!0)}},o.prototype.updateTheme=function(t){this.changeMood(),this.changeTheme();var e=this.theme.state,i=this.mood.state;null!==e&&null!==i&&this.applyTheme(e,i,t)},o.prototype.onApplyTheme=function(t,e,o){i.prototype.onApplyTheme.call(this,t,e,o),this.themeViewAnimators(t,e,o)},o.prototype.mountTheme=function(){if(Qn.isRootView(this.node)){var t=this.themeService.manager;null!=t&&(this.mood.takesPrecedence(ro.Intrinsic)&&null===this.mood.state&&this.mood.setState(t.mood,ro.Intrinsic),this.theme.takesPrecedence(ro.Intrinsic)&&null===this.theme.state&&this.theme.setState(t.theme,ro.Intrinsic))}},o.prototype.getAttribute=function(t){return this.node.getAttribute(t)},o.prototype.setAttribute=function(t,e){return this.willSetAttribute(t,e),null!=e?this.node.setAttribute(t,oe(e)):this.node.removeAttribute(t),this.onSetAttribute(t,e),this.didSetAttribute(t,e),this},o.prototype.willSetAttribute=function(t,e){var i=this.viewObserverCache.viewWillSetAttributeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewWillSetAttribute(t,e,this)}},o.prototype.onSetAttribute=function(t,e){},o.prototype.didSetAttribute=function(t,e){var i=this.viewObserverCache.viewDidSetAttributeObservers;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){i[o].viewDidSetAttribute(t,e,this)}},o.prototype.hasAttributeAnimator=function(t){var e=this.attributeAnimators;return null!==e&&void 0!==e[t]},o.prototype.getAttributeAnimator=function(t){var e=this.attributeAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setAttributeAnimator=function(t,e){var i=this.attributeAnimators;null===i&&(i={},this.attributeAnimators=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.getLazyAttributeAnimator=function(t){var e=this.getAttributeAnimator(t);if(null===e){var i=o.getAttributeAnimatorConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setAttributeAnimator(t,e))}return e},o.prototype.getStyle=function(t){if("undefined"==typeof CSSStyleValue){e=this.node.style;if("string"==typeof t)return e.getPropertyValue(t);for(i=0,o=t.length;i<o;i+=1){if(""!==(n=e.getPropertyValue(t[i])))return n}return""}var e=this.node.attributeStyleMap;if("string"!=typeof t){for(var i=0,o=t.length;i<o;i+=1){var n;if(""!==(n=e.get(t[i])))return n}return""}try{return e.get(t)}catch(t){return}},o.prototype.setStyle=function(e,i,o){if(this.willSetStyle(e,i,o),"undefined"!=typeof CSSStyleValue)if(null!=i){var n=t.ToCssValue(i);if(null!==n)try{this.node.attributeStyleMap.set(e,n)}catch(t){}else this.node.style.setProperty(e,ne(i),o)}else this.node.attributeStyleMap.delete(e);else null!=i?this.node.style.setProperty(e,ne(i),o):this.node.style.removeProperty(e);return this.onSetStyle(e,i,o),this.didSetStyle(e,i,o),this},o.prototype.willSetStyle=function(t,e,i){var o=this.viewObserverCache.viewWillSetStyleObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewWillSetStyle(t,e,i,this)}},o.prototype.onSetStyle=function(t,e,i){},o.prototype.didSetStyle=function(t,e,i){var o=this.viewObserverCache.viewDidSetStyleObservers;if(void 0!==o)for(var n=0,r=o.length;n<r;n+=1){o[n].viewDidSetStyle(t,e,i,this)}},o.prototype.hasStyleAnimator=function(t){var e=this.styleAnimators;return null!==e&&void 0!==e[t]},o.prototype.getStyleAnimator=function(t){var e=this.styleAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},o.prototype.setStyleAnimator=function(t,e){var i=this.styleAnimators;null===i&&(i={},this.styleAnimators=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},o.prototype.getLazyStyleAnimator=function(t){var e=this.getStyleAnimator(t);if(null===e){var i=mn.getStyleAnimatorConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setStyleAnimator(t,e))}return e},o.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}var r=this.attributeAnimators;for(var n in r){r[n].applyTheme(t,e,i)}var s=this.styleAnimators;for(var n in s){s[n].applyTheme(t,e,i)}},o.prototype.mountViewAnimators=function(){i.prototype.mountViewAnimators.call(this);var t=this.attributeAnimators;for(var e in t){t[e].mount()}var o=this.styleAnimators;for(var e in o){o[e].mount()}},o.prototype.unmountViewAnimators=function(){var t=this.styleAnimators;for(var e in t){t[e].unmount()}var o=this.attributeAnimators;for(var e in o){o[e].unmount()}i.prototype.unmountViewAnimators.call(this)},o.prototype.id=function(t){if(0==arguments.length){var e=this.getAttribute("id");return null!==e?e:void 0}return this.setAttribute("id",t),this},o.prototype.className=function(t){if(0===arguments.length){var e=this.getAttribute("class");return null!==e?e:void 0}return this.setAttribute("class",t),this},Object.defineProperty(o.prototype,"classList",{get:function(){return this.node.classList},enumerable:!1,configurable:!0}),o.prototype.hasClass=function(t){return this.node.classList.contains(t)},o.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.add(t[o]);return this},o.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.node.classList,o=0,n=t.length;o<n;o+=1)i.remove(t[o]);return this},o.prototype.toggleClass=function(t,e){var i=this.node.classList;return void 0===e?i.toggle(t):!0===e?i.add(t):!1===e&&i.remove(t),this},o.prototype.setViewMember=function(t,e,i,o){var n=this.getLazyViewProperty(t);if(null===n){var r=this.getLazyViewAnimator(t);if(null===r){var s=this.getLazyStyleAnimator(t);if(null===s){var l=this.getLazyAttributeAnimator(t);null===l||l.setState(e,i,o)}else s.setState(e,i,o)}else r.setState(e,i,o)}else n.setState(e,o)},o.prototype.setViewState=function(t,e,i){for(var o in"number"==typeof e?(i=e,e=void 0):void 0===i&&(i=ro.Extrinsic),t){var n=t[o];this.setViewMember(o,n,e,i)}},Object.defineProperty(o.prototype,"clientBounds",{get:function(){var t=this.node.getBoundingClientRect();return new r.R2Box(t.left,t.top,t.right,t.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageBounds",{get:function(){var t=this.node.getBoundingClientRect(),e=window.pageXOffset,i=window.pageYOffset;return new r.R2Box(t.left+e,t.top+i,t.right+e,t.bottom+i)},enumerable:!1,configurable:!0}),o.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},o.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},o.fromTag=function(t){var e;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this);var i=e.namespace;return new e(void 0!==i?document.createElementNS(i,t):document.createElement(t))},o.fromNode=function(t){if(t.view instanceof this)return t.view;var e=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t.tagName]),void 0===e&&(e=this);var i=new e(t);return this.mount(i),i},o.fromConstructor=function(t){if(t.prototype instanceof o){var e=t.tag;if("string"==typeof e){var n=t.namespace;return new t(void 0!==n?document.createElementNS(n,e):document.createElement(e))}throw new TypeError(""+t)}return i.fromConstructor.call(this,t)},o.fromAny=function(t){if(t instanceof o)return t;if(t instanceof Element)return this.fromNode(t);throw new TypeError(""+t)},o.getAttributeAnimatorConstructor=function(t,e){for(null===e&&(e=this.prototype);null!==e;){if(Object.prototype.hasOwnProperty.call(e,"attributeAnimatorConstructors")){var i=e.attributeAnimatorConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}return null},o.decorateAttributeAnimator=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"attributeAnimatorConstructors")||(o.attributeAnimatorConstructors={}),o.attributeAnimatorConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getAttributeAnimator(i.toString());return null===e&&(e=new t(this,i.toString()),this.setAttributeAnimator(i.toString(),e)),e},configurable:!0,enumerable:!0})},o.tags={},m([bo({type:Ce,state:null})],o.prototype,"moodModifier",void 0),m([bo({type:Ce,state:null})],o.prototype,"themeModifier",void 0),o}(Qn),ar=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.autocomplete&&this.autocomplete(t.autocomplete),void 0!==t.checked&&this.checked(t.checked),void 0!==t.colspan&&this.colspan(t.colspan),void 0!==t.disabled&&this.disabled(t.disabled),void 0!==t.placeholder&&this.placeholder(t.placeholder),void 0!==t.rowspan&&this.rowspan(t.rowspan),void 0!==t.selected&&this.selected(t.selected),void 0!==t.title&&this.title(t.title),void 0!==t.type&&this.type(t.type),void 0!==t.value&&this.value(t.value)},e.prototype.initStyle=function(t){Rn.init(this,t)},e.prototype.append=function(t,i){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.node.hasAttribute("swim-theme")&&this.applyRootTheme(e,i,o)},e.prototype.applyRootTheme=function(t,e,i){var o=t.getOr(se.font,me.ambient,null);null!==o&&(void 0!==o.style&&this.fontStyle.setState(o.style,void 0,0),void 0!==o.variant&&this.fontVariant.setState(o.variant,void 0,0),void 0!==o.weight&&this.fontWeight.setState(o.weight,void 0,0),void 0!==o.stretch&&this.fontStretch.setState(o.stretch,void 0,0),null!==o.size&&this.fontSize.setState(o.size,void 0,0),null!==o.height&&this.lineHeight.setState(o.height,void 0,0),this.fontFamily.setState(o.family,void 0,0)),this.backgroundColor.setState(t.getOr(se.backgroundColor,me.ambient,null),i,ro.Intrinsic),this.color.setState(t.getOr(se.color,me.ambient,null),i,ro.Intrinsic)},e.isPositioned=function(t){var e=window.getComputedStyle(t);return"relative"===e.position||"absolute"===e.position},e.prototype.isPositioned=function(){return e.isPositioned(this.node)},e.parentTransform=function(t){if(e.isPositioned(t)){var i=t.offsetLeft,o=t.offsetTop;if(0!==i||0!==o)return r.Transform.translate(-i,-o)}return r.Transform.identity()},e.pageTransform=function(t){var i=t.parentNode;return i instanceof HTMLElement?e.pageTransform(i).transform(e.parentTransform(t)):r.Transform.identity()},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;if(null!==t)return t;if(this.isPositioned()){var e=this.node.offsetLeft,i=this.node.offsetTop;if(0!==e||0!==i)return r.Transform.translate(-e,-i)}return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageTransform",{get:function(){var t=this.parentView;if(null!==t)return t.pageTransform.transform(this.parentTransform);var i=this.node.parentNode;return i instanceof HTMLElement?e.pageTransform(i).transform(this.parentTransform):r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElement(t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof HTMLElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in lr.tags||(lr.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="div",m([$n({attributeName:"autocomplete",type:String})],e.prototype,"autocomplete",void 0),m([$n({attributeName:"checked",type:Boolean})],e.prototype,"checked",void 0),m([$n({attributeName:"colspan",type:Number})],e.prototype,"colspan",void 0),m([$n({attributeName:"disabled",type:Boolean})],e.prototype,"disabled",void 0),m([$n({attributeName:"placeholder",type:String})],e.prototype,"placeholder",void 0),m([$n({attributeName:"rowspan",type:Number})],e.prototype,"rowspan",void 0),m([$n({attributeName:"selected",type:Boolean})],e.prototype,"selected",void 0),m([$n({attributeName:"title",type:String})],e.prototype,"title",void 0),m([$n({attributeName:"type",type:String})],e.prototype,"type",void 0),m([$n({attributeName:"value",type:String})],e.prototype,"value",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("abbr")],e,"abbr",void 0),m([e.Tag("address")],e,"address",void 0),m([e.Tag("area")],e,"area",void 0),m([e.Tag("article")],e,"article",void 0),m([e.Tag("aside")],e,"aside",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("b")],e,"b",void 0),m([e.Tag("base")],e,"base",void 0),m([e.Tag("bdi")],e,"bdi",void 0),m([e.Tag("bdo")],e,"bdo",void 0),m([e.Tag("blockquote")],e,"blockquote",void 0),m([e.Tag("body")],e,"body",void 0),m([e.Tag("br")],e,"br",void 0),m([e.Tag("button")],e,"button",void 0),m([e.Tag("caption")],e,"caption",void 0),m([e.Tag("cite")],e,"cite",void 0),m([e.Tag("code")],e,"code",void 0),m([e.Tag("col")],e,"col",void 0),m([e.Tag("colgroup")],e,"colgroup",void 0),m([e.Tag("data")],e,"data",void 0),m([e.Tag("datalist")],e,"datalist",void 0),m([e.Tag("dd")],e,"dd",void 0),m([e.Tag("del")],e,"del",void 0),m([e.Tag("details")],e,"details",void 0),m([e.Tag("dfn")],e,"dfn",void 0),m([e.Tag("dialog")],e,"dialog",void 0),m([e.Tag("div")],e,"div",void 0),m([e.Tag("dl")],e,"dl",void 0),m([e.Tag("dt")],e,"dt",void 0),m([e.Tag("em")],e,"em",void 0),m([e.Tag("embed")],e,"embed",void 0),m([e.Tag("fieldset")],e,"fieldset",void 0),m([e.Tag("figcaption")],e,"figcaption",void 0),m([e.Tag("figure")],e,"figure",void 0),m([e.Tag("footer")],e,"footer",void 0),m([e.Tag("form")],e,"form",void 0),m([e.Tag("h1")],e,"h1",void 0),m([e.Tag("h2")],e,"h2",void 0),m([e.Tag("h3")],e,"h3",void 0),m([e.Tag("h4")],e,"h4",void 0),m([e.Tag("h5")],e,"h5",void 0),m([e.Tag("h6")],e,"h6",void 0),m([e.Tag("head")],e,"head",void 0),m([e.Tag("header")],e,"header",void 0),m([e.Tag("hr")],e,"hr",void 0),m([e.Tag("html")],e,"html",void 0),m([e.Tag("i")],e,"i",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("img")],e,"img",void 0),m([e.Tag("input")],e,"input",void 0),m([e.Tag("ins")],e,"ins",void 0),m([e.Tag("kbd")],e,"kbd",void 0),m([e.Tag("label")],e,"label",void 0),m([e.Tag("legend")],e,"legend",void 0),m([e.Tag("li")],e,"li",void 0),m([e.Tag("link")],e,"link",void 0),m([e.Tag("main")],e,"main",void 0),m([e.Tag("map")],e,"map",void 0),m([e.Tag("mark")],e,"mark",void 0),m([e.Tag("meta")],e,"meta",void 0),m([e.Tag("meter")],e,"meter",void 0),m([e.Tag("nav")],e,"nav",void 0),m([e.Tag("noscript")],e,"noscript",void 0),m([e.Tag("object")],e,"object",void 0),m([e.Tag("ol")],e,"ol",void 0),m([e.Tag("optgroup")],e,"optgroup",void 0),m([e.Tag("option")],e,"option",void 0),m([e.Tag("output")],e,"output",void 0),m([e.Tag("p")],e,"p",void 0),m([e.Tag("param")],e,"param",void 0),m([e.Tag("picture")],e,"picture",void 0),m([e.Tag("pre")],e,"pre",void 0),m([e.Tag("progress")],e,"progress",void 0),m([e.Tag("q")],e,"q",void 0),m([e.Tag("rb")],e,"rb",void 0),m([e.Tag("rp")],e,"rp",void 0),m([e.Tag("rt")],e,"rt",void 0),m([e.Tag("rtc")],e,"rtc",void 0),m([e.Tag("ruby")],e,"ruby",void 0),m([e.Tag("s")],e,"s",void 0),m([e.Tag("samp")],e,"samp",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("section")],e,"section",void 0),m([e.Tag("select")],e,"select",void 0),m([e.Tag("small")],e,"small",void 0),m([e.Tag("slot")],e,"slot",void 0),m([e.Tag("source")],e,"source",void 0),m([e.Tag("span")],e,"span",void 0),m([e.Tag("strong")],e,"strong",void 0),m([e.Tag("sub")],e,"sub",void 0),m([e.Tag("summary")],e,"summary",void 0),m([e.Tag("sup")],e,"sup",void 0),m([e.Tag("table")],e,"table",void 0),m([e.Tag("tbody")],e,"tbody",void 0),m([e.Tag("td")],e,"td",void 0),m([e.Tag("template")],e,"template",void 0),m([e.Tag("textarea")],e,"textarea",void 0),m([e.Tag("tfoot")],e,"tfoot",void 0),m([e.Tag("th")],e,"th",void 0),m([e.Tag("thead")],e,"thead",void 0),m([e.Tag("time")],e,"time",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tr")],e,"tr",void 0),m([e.Tag("track")],e,"track",void 0),m([e.Tag("u")],e,"u",void 0),m([e.Tag("ul")],e,"ul",void 0),m([e.Tag("var")],e,"var",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("wbr")],e,"wbr",void 0),e}(lr);Rn.define(ar.prototype);var hr=function(t){function e(e){var i=t.call(this,e)||this;return i.sheet=null,i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.createSheet=function(){var t=this.node.sheet;return null!==t?new _n(this,t):null},e.prototype.hasCssRule=function(t){var e=this.sheet;return null!==e&&e.hasCssRule(t)},e.prototype.getCssRule=function(t){var e=this.sheet;return null!==e?e.getCssRule(t):null},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.sheet;null!==n&&n.applyTheme(e,i,o)},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.createSheet();this.sheet=e,null!==e&&e.mount()},e.prototype.onUnmount=function(){var e=this.sheet;null!==e&&e.unmount(),this.sheet=null,t.prototype.onUnmount.call(this)},e.tag="style",e}(ar);ar.Tag("style")(hr,"style");var ur=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.attributes&&this.initAttributes(e.attributes),void 0!==e.style&&this.initStyle(e.style)},e.prototype.initAttributes=function(t){void 0!==t.alignmentBaseline&&this.alignmentBaseline(t.alignmentBaseline),void 0!==t.clipPath&&this.clipPath(t.clipPath),void 0!==t.cursor&&this.cursor(t.cursor),void 0!==t.cx&&this.cx(t.cx),void 0!==t.cy&&this.cy(t.cy),void 0!==t.cy&&this.cy(t.cy),void 0!==t.d&&this.d(t.d),void 0!==t.dx&&this.dx(t.dx),void 0!==t.dy&&this.dy(t.dy),void 0!==t.edgeMode&&this.edgeMode(t.edgeMode),void 0!==t.fill&&this.fill(t.fill),void 0!==t.fillRule&&this.fillRule(t.fillRule),void 0!==t.floodColor&&this.floodColor(t.floodColor),void 0!==t.floodOpacity&&this.floodOpacity(t.floodOpacity),void 0!==t.height&&this.height(t.height),void 0!==t.in&&this.in(t.in),void 0!==t.in2&&this.in2(t.in2),void 0!==t.lengthAdjust&&this.lengthAdjust(t.lengthAdjust),void 0!==t.mode&&this.mode(t.mode),void 0!==t.opacity&&this.opacity(t.opacity),void 0!==t.pointerEvents&&this.pointerEvents(t.pointerEvents),void 0!==t.points&&this.points(t.points),void 0!==t.preserveAspectRatio&&this.preserveAspectRatio(t.preserveAspectRatio),void 0!==t.r&&this.r(t.r),void 0!==t.result&&this.result(t.result),void 0!==t.stdDeviation&&this.stdDeviation(t.stdDeviation),void 0!==t.stroke&&this.stroke(t.stroke),void 0!==t.strokeDasharray&&this.strokeDasharray(t.strokeDasharray),void 0!==t.strokeLinecap&&this.strokeLinecap(t.strokeLinecap),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth),void 0!==t.textAnchor&&this.textAnchor(t.textAnchor),void 0!==t.textLength&&this.textLength(t.textLength),void 0!==t.transform&&this.transform(t.transform),void 0!==t.type&&this.type(t.type),void 0!==t.values&&this.values(t.values),void 0!==t.viewBox&&this.viewBox(t.viewBox),void 0!==t.width&&this.width(t.width),void 0!==t.x&&this.x(t.x),void 0!==t.x1&&this.x1(t.x1),void 0!==t.x2&&this.x2(t.x2),void 0!==t.y&&this.y(t.y),void 0!==t.y1&&this.y1(t.y1),void 0!==t.y2&&this.y2(t.y2)},e.prototype.initStyle=function(t){void 0!==t.cssTransform&&this.cssTransform(t.cssTransform),void 0!==t.filter&&this.filter(t.filter),void 0!==t.fontFamily&&this.fontFamily(t.fontFamily),void 0!==t.fontSize&&this.fontSize(t.fontSize),void 0!==t.fontStretch&&this.fontStretch(t.fontStretch),void 0!==t.fontStyle&&this.fontStyle(t.fontStyle),void 0!==t.fontVariant&&this.fontVariant(t.fontVariant),void 0!==t.fontWeight&&this.fontWeight(t.fontWeight),void 0!==t.lineHeight&&this.lineHeight(t.lineHeight),void 0!==t.touchAction&&this.touchAction(t.touchAction)},e.prototype.append=function(t,i){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,o){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=e.fromTag(t)),this.insertChild(t,i,o),t},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;return null!==t?t:r.Transform.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this.node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this.node.removeEventListener(t,e,i),this},e.prototype.font=function(t,e){if(void 0===t){var i=this.fontStyle.value,o=this.fontVariant.value,n=this.fontWeight.value,r=this.fontStretch.value,s=this.fontSize.value,l=this.lineHeight.value,a=this.fontFamily.value;return void 0!==a?St.create(i,o,n,r,s,l,a):null}return null!==t?(void 0!==(t=St.fromAny(t)).style&&this.fontStyle.setState(t.style,e),void 0!==t.variant&&this.fontVariant.setState(t.variant,e),void 0!==t.weight&&this.fontWeight.setState(t.weight,e),void 0!==t.stretch&&this.fontStretch.setState(t.stretch,e),void 0!==t.size&&this.fontSize.setState(t.size,e),void 0!==t.height&&this.lineHeight.setState(t.height,e),this.fontFamily.setState(t.family,e)):(this.fontStyle.setState(void 0,e),this.fontVariant.setState(void 0,e),this.fontWeight.setState(void 0,e),this.fontStretch.setState(void 0,e),this.fontSize.setState(null,e),this.lineHeight.setState(null,e),this.fontFamily.setState(void 0,e)),this},e.forTag=function(t){if(t===this.tag)return this;var e=this,i=function(t){return e.call(this,t)||this};return w(i,e),i.tag=t,i},e.create=function(t){return void 0===t&&(t=this.tag),this.fromTag(t)},e.fromTag=function(t){var e;return Object.prototype.hasOwnProperty.call(this,"tags")&&(e=this.tags[t]),void 0===e&&(e=this),new e(document.createElementNS(e.namespace,t))},e.fromNode=function(t){if(t.view instanceof this)return t.view;var i=void 0;Object.prototype.hasOwnProperty.call(this,"tags")&&(i=this.tags[t.tagName]),void 0===i&&(i=this);var o=new i(t);return e.mount(o),o},e.fromAny=function(t){if(t instanceof this)return t;if(t instanceof SVGElement)return this.fromNode(t);throw new TypeError(""+t)},e.decorateTag=function(t,i,o){var n=i.forTag(t);Object.defineProperty(e,o,{value:n,configurable:!0,enumerable:!0}),t in e.tags||(e.tags[t]=n),t in lr.tags||(lr.tags[t]=n)},e.Tag=function(t){return this.decorateTag.bind(void 0,t)},e.tags={},e.tag="svg",e.namespace="http://www.w3.org/2000/svg",m([$n({attributeName:"alignment-baseline",type:String})],e.prototype,"alignmentBaseline",void 0),m([$n({attributeName:"clip-path",type:String})],e.prototype,"clipPath",void 0),m([$n({attributeName:"cursor",type:String})],e.prototype,"cursor",void 0),m([$n({attributeName:"cx",type:Number})],e.prototype,"cx",void 0),m([$n({attributeName:"cy",type:Number})],e.prototype,"cy",void 0),m([$n({attributeName:"d",type:String})],e.prototype,"d",void 0),m([$n({attributeName:"dx",type:r.Length,state:null})],e.prototype,"dx",void 0),m([$n({attributeName:"dy",type:r.Length,state:null})],e.prototype,"dy",void 0),m([$n({attributeName:"edgeMode",type:String})],e.prototype,"edgeMode",void 0),m([$n({attributeName:"fill",type:Tt,state:null})],e.prototype,"fill",void 0),m([$n({attributeName:"fill-rule",type:String})],e.prototype,"fillRule",void 0),m([$n({attributeName:"flood-color",type:Tt,state:null})],e.prototype,"floodColor",void 0),m([$n({attributeName:"flood-opacity",type:Number})],e.prototype,"floodOpacity",void 0),m([$n({attributeName:"height",type:r.Length,state:null})],e.prototype,"height",void 0),m([$n({attributeName:"in",type:String})],e.prototype,"in",void 0),m([$n({attributeName:"in2",type:String})],e.prototype,"in2",void 0),m([$n({attributeName:"lengthAdjust",type:String})],e.prototype,"lengthAdjust",void 0),m([$n({attributeName:"mode",type:String})],e.prototype,"mode",void 0),m([$n({attributeName:"opacity",type:Number})],e.prototype,"opacity",void 0),m([$n({attributeName:"pointer-events",type:String})],e.prototype,"pointerEvents",void 0),m([$n({attributeName:"points",type:String})],e.prototype,"points",void 0),m([$n({attributeName:"preserveAspectRatio",type:Boolean})],e.prototype,"preserveAspectRatio",void 0),m([$n({attributeName:"r",type:Number})],e.prototype,"r",void 0),m([$n({attributeName:"result",type:String})],e.prototype,"result",void 0),m([$n({attributeName:"stdDeviation",type:Number})],e.prototype,"stdDeviation",void 0),m([$n({attributeName:"stroke",type:Tt,state:null})],e.prototype,"stroke",void 0),m([$n({attributeName:"stroke-dasharray",type:String})],e.prototype,"strokeDasharray",void 0),m([$n({attributeName:"stroke-linecap",type:String})],e.prototype,"strokeLinecap",void 0),m([$n({attributeName:"stroke-width",type:Number})],e.prototype,"strokeWidth",void 0),m([$n({attributeName:"text-anchor",type:String})],e.prototype,"textAnchor",void 0),m([$n({attributeName:"textLength",type:r.Length,state:null})],e.prototype,"textLength",void 0),m([$n({attributeName:"transform",type:r.Transform,state:null})],e.prototype,"transform",void 0),m([$n({attributeName:"type",type:String})],e.prototype,"type",void 0),m([$n({attributeName:"values",type:String})],e.prototype,"values",void 0),m([$n({attributeName:"viewBox",type:String})],e.prototype,"viewBox",void 0),m([$n({attributeName:"width",type:r.Length,state:null})],e.prototype,"width",void 0),m([$n({attributeName:"x",type:Number})],e.prototype,"x",void 0),m([$n({attributeName:"x1",type:Number})],e.prototype,"x1",void 0),m([$n({attributeName:"x2",type:Number})],e.prototype,"x2",void 0),m([$n({attributeName:"y",type:Number})],e.prototype,"y",void 0),m([$n({attributeName:"y1",type:Number})],e.prototype,"y1",void 0),m([$n({attributeName:"y2",type:Number})],e.prototype,"y2",void 0),m([Sn({propertyNames:"transform",type:r.Transform,state:null})],e.prototype,"cssTransform",void 0),m([Sn({propertyNames:"filter",type:String})],e.prototype,"filter",void 0),m([Sn({propertyNames:"font-family",type:wt})],e.prototype,"fontFamily",void 0),m([Sn({propertyNames:"font-size",type:r.Length,state:null})],e.prototype,"fontSize",void 0),m([Sn({propertyNames:"font-stretch",type:String})],e.prototype,"fontStretch",void 0),m([Sn({propertyNames:"font-style",type:String})],e.prototype,"fontStyle",void 0),m([Sn({propertyNames:"font-variant",type:String})],e.prototype,"fontVariant",void 0),m([Sn({propertyNames:"font-weight",type:String})],e.prototype,"fontWeight",void 0),m([Sn({propertyNames:"line-height",type:r.Length,state:null})],e.prototype,"lineHeight",void 0),m([Sn({propertyNames:"touch-action",type:String})],e.prototype,"touchAction",void 0),m([e.Tag("a")],e,"a",void 0),m([e.Tag("animate")],e,"animate",void 0),m([e.Tag("animateMotion")],e,"animateMotion",void 0),m([e.Tag("animateTransform")],e,"animateTransform",void 0),m([e.Tag("audio")],e,"audio",void 0),m([e.Tag("canvas")],e,"canvas",void 0),m([e.Tag("circle")],e,"circle",void 0),m([e.Tag("clipPath")],e,"clipPath",void 0),m([e.Tag("defs")],e,"defs",void 0),m([e.Tag("desc")],e,"desc",void 0),m([e.Tag("discard")],e,"discard",void 0),m([e.Tag("ellipse")],e,"ellipse",void 0),m([e.Tag("feBlend")],e,"feBlend",void 0),m([e.Tag("feColorMatrix")],e,"feColorMatrix",void 0),m([e.Tag("feComponentTransfer")],e,"feComponentTransfer",void 0),m([e.Tag("feComposite")],e,"feComposite",void 0),m([e.Tag("feConvolveMatrix")],e,"feConvolveMatrix",void 0),m([e.Tag("feDiffuseLighting")],e,"feDiffuseLighting",void 0),m([e.Tag("feDisplacementMap")],e,"feDisplacementMap",void 0),m([e.Tag("feDistantLight")],e,"feDistantLight",void 0),m([e.Tag("feDropShadow")],e,"feDropShadow",void 0),m([e.Tag("feFlood")],e,"feFlood",void 0),m([e.Tag("feFuncA")],e,"feFuncA",void 0),m([e.Tag("feFuncB")],e,"feFuncB",void 0),m([e.Tag("feFuncG")],e,"feFuncG",void 0),m([e.Tag("feFuncR")],e,"feFuncR",void 0),m([e.Tag("feGaussianBlur")],e,"feGaussianBlur",void 0),m([e.Tag("feImage")],e,"feImage",void 0),m([e.Tag("feMerge")],e,"feMerge",void 0),m([e.Tag("feMergeNode")],e,"feMergeNode",void 0),m([e.Tag("feMorphology")],e,"feMorphology",void 0),m([e.Tag("feOffset")],e,"feOffset",void 0),m([e.Tag("fePointLight")],e,"fePointLight",void 0),m([e.Tag("feSpecularLighting")],e,"feSpecularLighting",void 0),m([e.Tag("feSpotLight")],e,"feSpotLight",void 0),m([e.Tag("feTile")],e,"feTile",void 0),m([e.Tag("feTurbulence")],e,"feTurbulence",void 0),m([e.Tag("filter")],e,"filter",void 0),m([e.Tag("foreignObject")],e,"foreignObject",void 0),m([e.Tag("g")],e,"g",void 0),m([e.Tag("iframe")],e,"iframe",void 0),m([e.Tag("image")],e,"image",void 0),m([e.Tag("line")],e,"line",void 0),m([e.Tag("linearGradient")],e,"linearGradient",void 0),m([e.Tag("marker")],e,"marker",void 0),m([e.Tag("mask")],e,"mask",void 0),m([e.Tag("metadata")],e,"metadata",void 0),m([e.Tag("mpath")],e,"mpath",void 0),m([e.Tag("path")],e,"path",void 0),m([e.Tag("pattern")],e,"pattern",void 0),m([e.Tag("polygon")],e,"polygon",void 0),m([e.Tag("polyline")],e,"polyline",void 0),m([e.Tag("radialGradient")],e,"radialGradient",void 0),m([e.Tag("rect")],e,"rect",void 0),m([e.Tag("script")],e,"script",void 0),m([e.Tag("set")],e,"set",void 0),m([e.Tag("stop")],e,"stop",void 0),m([e.Tag("style")],e,"style",void 0),m([e.Tag("svg")],e,"svg",void 0),m([e.Tag("switch")],e,"switch",void 0),m([e.Tag("symbol")],e,"symbol",void 0),m([e.Tag("text")],e,"text",void 0),m([e.Tag("textPath")],e,"textPath",void 0),m([e.Tag("title")],e,"title",void 0),m([e.Tag("tspan")],e,"tspan",void 0),m([e.Tag("unknown")],e,"unknown",void 0),m([e.Tag("use")],e,"use",void 0),m([e.Tag("video")],e,"video",void 0),m([e.Tag("view")],e,"view",void 0),e}(lr),pr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.onInsertRootView=function(e){t.prototype.onInsertRootView.call(this,e),e instanceof lr&&e.node.hasAttribute("swim-app")&&this.materializeView(e)},i.prototype.materializeView=function(t){for(var e=t.node.childNodes,i=0;i<e.length;i+=1){var o=e[i],n=this.materializeNode(t,o);null!==n&&this.materializeView(n)}},i.prototype.materializeNode=function(t,e){return void 0!==e.view?e.view:e instanceof Element?this.materializeElement(t,e):e instanceof Text?this.materializeText(t,e):null},i.prototype.materializeElement=function(t,e){var o,n=e.getAttribute("swim-view");if(null!==n&&"function"!=typeof(o=i.eval(n)))throw new TypeError(n);void 0===o&&(o=e instanceof HTMLElement?ar:e instanceof SVGElement?ur:lr);var r=new o(e),s=e.getAttribute("key");return t.injectChildView(r,null,null!==s?s:void 0),r},i.prototype.materializeText=function(t,e){return null},i.global=function(){return new i},i.boot=function(){for(var t=[],e=document.querySelectorAll("[swim-app]"),o=0;o<e.length;o+=1){var n=e[o];if(n instanceof HTMLElement){var r=i.bootElement(n);t.push(r)}}return t},i.bootElement=function(t){var e=t.view;if(void 0===e){var o=void 0,n=t.getAttribute("swim-app");if(null!==n&&""!==n&&"function"!=typeof(o=i.eval(n)))throw new TypeError(n);if(void 0===o&&(o=t instanceof HTMLElement?ar:t instanceof SVGElement?ur:lr),e=new o(t),o.mount(e),void 0===e.domService)throw new Error("DomService not available")}return e},i.eval=function(t){for(var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,i=t.split("."),o=0,n=i.length;"object"==typeof e&&null!==e&&o<n;o+=1){e=e[i[o]]}return e},m([e.Lazy],i,"global",null),i}(so),dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initManager=function(){return pr.global()},e}(yo);fo({extends:dr,type:pr,observe:!1,manager:null})(Qn.prototype,"domService");var cr=function(){},fr=function(t){function i(){var i=t.call(this)||this;return i.key=void 0,i.parentView=null,i.viewServices=null,i.viewProperties=null,i.viewAnimators=null,i.viewFasteners=null,i.gestures=null,i.constraints=e.Arrays.empty,i.constraintVariables=e.Arrays.empty,i.ownViewFrame=null,i.eventHandlers=null,i.hoverSet=null,i}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.mood&&this.mood(e.mood),void 0!==e.moodModifier&&this.moodModifier(e.moodModifier),void 0!==e.theme&&this.theme(e.theme),void 0!==e.themeModifier&&this.themeModifier(e.themeModifier),void 0!==e.hidden&&this.setHidden(e.hidden)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.willObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.didObserve=function(t){for(var e,i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},i.prototype.setKey=function(t){this.key=t},i.prototype.setParentView=function(t,e){this.willSetParentView(t,e),null!==e&&this.detachParentView(e),this.parentView=t,null!==t&&this.attachParentView(t),this.onSetParentView(t,e),this.didSetParentView(t,e)},i.prototype.remove=function(){var t=this.parentView;null!==t&&(0==(this.viewFlags&ro.TraversingFlag)?t.removeChildView(this):this.setViewFlags(this.viewFlags|ro.RemovingFlag))},i.prototype.append=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.appendChildView(t,e),t},i.prototype.prepend=function(t,e){return"function"==typeof t&&(t=i.fromConstructor(t)),this.prependChildView(t,e),t},i.prototype.insert=function(t,e,o){return"function"==typeof t&&(t=i.fromConstructor(t)),this.insertChildView(t,e,o),t},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),this.insertViewFastener(e,i),this.insertGesture(e,i)},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(ro.MountedFlag|ro.PoweredFlag))==(ro.MountedFlag|ro.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&ro.UpdateMask)&ro.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e),this.removeGesture(e),this.removeViewFastener(e)},i.prototype.cascadeMount=function(){if(0!=(this.viewFlags&ro.MountedFlag))throw new Error("already mounted");this.setViewFlags(this.viewFlags|ro.MountedFlag|ro.TraversingFlag);try{this.willMount(),this.onMount(),this.mountChildViews(),this.didMount()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountViewServices(),this.mountViewProperties(),this.mountViewAnimators(),this.mountViewFasteners(),this.mountGestures(),this.mountTheme(),this.updateTheme(!1)},i.prototype.didMount=function(){this.activateLayout(),t.prototype.didMount.call(this)},i.prototype.mountChildViews=function(){this.forEachChildView((function(t){t.cascadeMount(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnmount=function(){if(0==(this.viewFlags&ro.MountedFlag))throw new Error("already unmounted");this.setViewFlags(this.viewFlags&~ro.MountedFlag|ro.TraversingFlag);try{this.willUnmount(),this.unmountChildViews(),this.onUnmount(),this.didUnmount()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.willUnmount=function(){t.prototype.willUnmount.call(this),this.deactivateLayout()},i.prototype.onUnmount=function(){this.unmountGestures(),this.unmountViewFasteners(),this.unmountViewAnimators(),this.unmountViewProperties(),this.unmountViewServices(),this.setViewFlags(this.viewFlags&(~ro.ViewFlagMask|ro.RemovingFlag))},i.prototype.unmountChildViews=function(){this.forEachChildView((function(t){t.cascadeUnmount(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadePower=function(){if(0!=(this.viewFlags&ro.PoweredFlag))throw new Error("already powered");this.setViewFlags(this.viewFlags|ro.PoweredFlag|ro.TraversingFlag);try{this.willPower(),this.onPower(),this.powerChildViews(),this.didPower()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.powerChildViews=function(){this.forEachChildView((function(t){t.cascadePower(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUnpower=function(){if(0==(this.viewFlags&ro.PoweredFlag))throw new Error("already unpowered");this.setViewFlags(this.viewFlags&~ro.PoweredFlag|ro.TraversingFlag);try{this.willUnpower(),this.unpowerChildViews(),this.onUnpower(),this.didUnpower()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.unpowerChildViews=function(){this.forEachChildView((function(t){t.cascadeUnpower(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.setCulled=function(t){var e=this.viewFlags;t&&0==(e&ro.CulledFlag)?(this.setViewFlags(e|ro.CulledFlag),0==(e&ro.CullFlag)&&this.cullView()):t||0==(e&ro.CulledFlag)||(this.setViewFlags(e&~ro.CulledFlag),0==(e&ro.CullFlag)&&this.uncullView())},i.prototype.cascadeCull=function(){0==(this.viewFlags&ro.CullFlag)&&(this.setViewFlags(this.viewFlags|ro.CullFlag),0==(this.viewFlags&ro.CulledFlag)&&this.cullView())},i.prototype.cullView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willCull(),this.onCull(),this.cullChildViews(),this.didCull()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.cullChildViews=function(){this.forEachChildView((function(t){t.cascadeCull(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.cascadeUncull=function(){0!=(this.viewFlags&ro.CullFlag)&&(this.setViewFlags(this.viewFlags&~ro.CullFlag),0==(this.viewFlags&ro.CulledFlag)&&this.uncullView())},i.prototype.uncullView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willUncull(),this.uncullChildViews(),this.onUncull(),this.didUncull()}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.uncullChildViews=function(){this.forEachChildView((function(t){t.cascadeUncull(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t))}),this)},i.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.mood.isInherited()&&this.mood.change(),this.theme.isInherited()&&this.theme.change()},i.prototype.cullViewFrame=function(t){void 0===t&&(t=this.viewFrame),this.setCulled(!t.intersects(this.viewBounds))},i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&ro.NeedsAnimate)&&(t&=~ro.NeedsAnimate),t},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsProcess,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsProcess(t,i))&ro.ProcessMask)){var o=t;this.setViewFlags(this.viewFlags&~(ro.NeedsProcess|ro.NeedsProject)|ro.TraversingFlag|ro.ProcessingFlag);try{this.willProcess(o,i),0!=((this.viewFlags|t)&ro.NeedsResize)&&(o|=ro.NeedsResize,this.setViewFlags(this.viewFlags&~ro.NeedsResize),this.willResize(i)),0!=((this.viewFlags|t)&ro.NeedsScroll)&&(o|=ro.NeedsScroll,this.setViewFlags(this.viewFlags&~ro.NeedsScroll),this.willScroll(i)),0!=((this.viewFlags|t)&ro.NeedsChange)&&(o|=ro.NeedsChange,this.setViewFlags(this.viewFlags&~ro.NeedsChange),this.willChange(i)),0!=((this.viewFlags|t)&ro.NeedsAnimate)&&(o|=ro.NeedsAnimate,this.setViewFlags(this.viewFlags&~ro.NeedsAnimate),this.willAnimate(i)),this.onProcess(o,i),0!=(o&ro.NeedsResize)&&this.onResize(i),0!=(o&ro.NeedsScroll)&&this.onScroll(i),0!=(o&ro.NeedsChange)&&this.onChange(i),0!=(o&ro.NeedsAnimate)&&this.onAnimate(i),0!=(o&ro.ProcessMask)&&this.processChildViews(o,i,this.processChildView),0!=(o&ro.NeedsAnimate)&&this.didAnimate(i),0!=(o&ro.NeedsChange)&&this.didChange(i),0!=(o&ro.NeedsScroll)&&this.didScroll(i),0!=(o&ro.NeedsResize)&&this.didResize(i),this.didProcess(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.ProcessingFlag))}}},i.prototype.willResize=function(e){t.prototype.willResize.call(this,e),this.evaluateConstraintVariables()},i.prototype.onChange=function(e){t.prototype.onChange.call(this,e),this.changeViewProperties(),this.updateTheme()},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsDisplay,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsDisplay(t,i))&ro.DisplayMask)){var o=t;this.setViewFlags(this.viewFlags&~ro.NeedsDisplay|ro.TraversingFlag|ro.DisplayingFlag);try{this.willDisplay(o,i),0!=((this.viewFlags|t)&ro.NeedsLayout)&&(o|=ro.NeedsLayout,this.setViewFlags(this.viewFlags&~ro.NeedsLayout),this.willLayout(i)),0!=((this.viewFlags|t)&ro.NeedsRender)&&(o|=ro.NeedsRender,this.setViewFlags(this.viewFlags&~ro.NeedsRender),this.willRender(i)),0!=((this.viewFlags|t)&ro.NeedsRasterize)&&(o|=ro.NeedsRasterize,this.setViewFlags(this.viewFlags&~ro.NeedsRasterize),this.willRasterize(i)),0!=((this.viewFlags|t)&ro.NeedsComposite)&&(o|=ro.NeedsComposite,this.setViewFlags(this.viewFlags&~ro.NeedsComposite),this.willComposite(i)),this.onDisplay(o,i),0!=(o&ro.NeedsLayout)&&this.onLayout(i),0!=(o&ro.NeedsRender)&&this.onRender(i),0!=(o&ro.NeedsRasterize)&&this.onRasterize(i),0!=(o&ro.NeedsComposite)&&this.onComposite(i),0==(o&ro.DisplayMask)||this.isHidden()||this.isCulled()||this.displayChildViews(o,i,this.displayChildView),0!=(o&ro.NeedsComposite)&&this.didComposite(i),0!=(o&ro.NeedsRasterize)&&this.didRasterize(i),0!=(o&ro.NeedsRender)&&this.didRender(i),0!=(o&ro.NeedsLayout)&&this.didLayout(i),this.didDisplay(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.DisplayingFlag))}}},i.prototype.willRender=function(t){var e=this.viewObserverCache.viewWillRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillRender(t,this)}},i.prototype.onRender=function(t){},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}},i.prototype.willRasterize=function(t){var e=this.viewObserverCache.viewWillRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillRasterize(t,this)}},i.prototype.onRasterize=function(t){},i.prototype.didRasterize=function(t){var e=this.viewObserverCache.viewDidRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRasterize(t,this)}},i.prototype.willComposite=function(t){var e=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}},i.prototype.renderViewOutline=function(t,e,i,o){t.isDefined()&&(e.beginPath(),e.moveTo(t.xMin,t.yMin),e.lineTo(t.xMin,t.yMax),e.lineTo(t.xMax,t.yMax),e.lineTo(t.xMax,t.yMin),e.closePath(),e.lineWidth=o,e.strokeStyle=i.toString(),e.stroke())},i.prototype.getLook=function(t,e){var i,o=this.theme.state;return null!==o&&(null==e&&(e=this.mood.state),null!==e&&(i=o.get(t,e))),i},i.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme.state;return null!==n?(null==e&&(e=this.mood.state),o=null!==e?n.getOr(t,e,i):i):o=i,o},i.prototype.modifyMood=function(t,e,i){if(this.moodModifier.takesPrecedence(ro.Intrinsic)){var o=this.moodModifier.getStateOr(Ce.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.moodModifier.setState(n,ro.Intrinsic),this.changeMood(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(se.timing,s,!1):l.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(ro.NeedsChange)}},i.prototype.modifyTheme=function(t,e,i){if(this.themeModifier.takesPrecedence(ro.Intrinsic)){var o=this.themeModifier.getStateOr(Ce.empty()),n=o.updatedCol(t,e,!0);if(!n.equals(o))if(this.themeModifier.setState(n,ro.Intrinsic),this.changeTheme(),void 0!==i){var r=this.theme.state,s=this.mood.state;null!==r&&null!==s&&(i=!0===i?r.getOr(se.timing,s,!1):l.Timing.fromAny(i),this.applyTheme(r,s,i))}else this.requireUpdate(ro.NeedsChange)}},i.prototype.changeMood=function(){var t=this.getViewProperty("moodModifier");if(null!==t&&this.mood.takesPrecedence(ro.Intrinsic)){var e=t.state;if(null!==e){var i=this.mood.superState;if(null==i){var o=this.themeService.manager;null!=o&&(i=o.mood)}if(null!=i){var n=e.timesCol(i,!0);this.mood.setState(n,ro.Intrinsic)}}else this.mood.setInherited(!0)}},i.prototype.changeTheme=function(){var t=this.getViewProperty("themeModifier");if(null!==t&&this.theme.takesPrecedence(ro.Intrinsic)){var e=t.state;if(null!==e){var i=this.theme.superState;if(null==i){var o=this.themeService.manager;null!=o&&(i=o.theme)}if(null!=i){var n=i.transform(e,!0);this.theme.setState(n,ro.Intrinsic)}}else this.theme.setInherited(!0)}},i.prototype.updateTheme=function(t){this.changeMood(),this.changeTheme();var e=this.theme.state,i=this.mood.state;null!==e&&null!==i&&this.applyTheme(e,i,t)},i.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.themeViewAnimators(e,i,o)},i.prototype.mountTheme=function(){},i.prototype.isHidden=function(){return 0!=(this.viewFlags&ro.HiddenMask)},i.prototype.setHidden=function(t){var e=this.viewFlags;t&&0==(e&ro.HiddenFlag)?(this.setViewFlags(e|ro.HiddenFlag),0==(e&ro.HideFlag)&&this.hideView()):t||0==(e&ro.HiddenFlag)||(this.setViewFlags(e&~ro.HiddenFlag),0==(e&ro.HideFlag)&&this.unhideView())},i.prototype.cascadeHide=function(){0==(this.viewFlags&ro.HideFlag)&&(this.setViewFlags(this.viewFlags|ro.HideFlag),0==(this.viewFlags&ro.HiddenFlag)&&this.hideView())},i.prototype.hideView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willSetHidden(!0),this.onSetHidden(!0),this.hideChildViews(),this.didSetHidden(!0)}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.hideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeHide(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.cascadeUnhide=function(){0!=(this.viewFlags&ro.HideFlag)&&(this.setViewFlags(this.viewFlags&~ro.HideFlag),0==(this.viewFlags&ro.HiddenFlag)&&this.unhideView())},i.prototype.unhideView=function(){this.setViewFlags(this.viewFlags|ro.TraversingFlag);try{this.willSetHidden(!1),this.unhideChildViews(),this.onSetHidden(!1),this.didSetHidden(!1)}finally{this.setViewFlags(this.viewFlags&~ro.TraversingFlag)}},i.prototype.unhideChildViews=function(){this.forEachChildView((function(t){t instanceof i&&(t.cascadeUnhide(),0!=(t.viewFlags&ro.RemovingFlag)&&(t.setViewFlags(t.viewFlags&~ro.RemovingFlag),this.removeChildView(t)))}),this)},i.prototype.willSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillSetHidden&&n.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(ro.NeedsRender)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}},i.prototype.hasViewService=function(t){var e=this.viewServices;return null!==e&&void 0!==e[t]},i.prototype.getViewService=function(t){var e=this.viewServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewService=function(t,e){var i=this.viewServices;null===i&&(i={},this.viewServices=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].mount()}},i.prototype.unmountViewServices=function(){var t=this.viewServices;for(var e in t){t[e].unmount()}},i.prototype.hasViewProperty=function(t){var e=this.viewProperties;return null!==e&&void 0!==e[t]},i.prototype.getViewProperty=function(t){var e=this.viewProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewProperty=function(t,e){var i=this.viewProperties;null===i&&(i={},this.viewProperties=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.changeViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].onChange()}},i.prototype.mountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].mount()}},i.prototype.unmountViewProperties=function(){var t=this.viewProperties;for(var e in t){t[e].unmount()}},i.prototype.hasViewAnimator=function(t){var e=this.viewAnimators;return null!==e&&void 0!==e[t]},i.prototype.getViewAnimator=function(t){var e=this.viewAnimators;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewAnimator=function(t,e){var i=this.viewAnimators;null===i&&(i={},this.viewAnimators=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.themeViewAnimators=function(t,e,i){var o=this.viewAnimators;for(var n in o){o[n].applyTheme(t,e,i)}},i.prototype.mountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].mount()}},i.prototype.unmountViewAnimators=function(){var t=this.viewAnimators;for(var e in t){t[e].unmount()}},i.prototype.hasViewFastener=function(t){var e=this.viewFasteners;return null!==e&&void 0!==e[t]},i.prototype.getViewFastener=function(t){var e=this.viewFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setViewFastener=function(t,e){var i=this.viewFasteners;null===i&&(i={},this.viewFasteners=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].mount()}},i.prototype.unmountViewFasteners=function(){var t=this.viewFasteners;for(var e in t){t[e].unmount()}},i.prototype.insertViewFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyViewFastener(i);null!==o&&!0===o.child&&o.doSetView(t,e)}},i.prototype.removeViewFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getViewFastener(e);null!==i&&!0===i.child&&i.doSetView(null,null)}},i.prototype.hasGesture=function(t){var e=this.gestures;return null!==e&&void 0!==e[t]},i.prototype.getGesture=function(t){var e=this.gestures;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},i.prototype.setGesture=function(t,e){var i=this.gestures;null===i&&(i={},this.gestures=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},i.prototype.mountGestures=function(){var t=this.gestures;for(var e in t){t[e].mount()}no.initGestures(this)},i.prototype.unmountGestures=function(){var t=this.gestures;for(var e in t){t[e].unmount()}},i.prototype.insertGesture=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyGesture(i);null!==o&&!0===o.child&&o.setView(t,e)}},i.prototype.removeGesture=function(t){var e=t.key;if(void 0!==e){var i=this.getGesture(e);null!==i&&!0===i.child&&i.setView(null,null)}},i.prototype.hasConstraint=function(t){return this.constraints.indexOf(t)>=0},i.prototype.addConstraint=function(t){var i=this.constraints,o=e.Arrays.inserted(t,i);i!==o&&(this.constraints=o,this.activateConstraint(t))},i.prototype.removeConstraint=function(t){var i=this.constraints,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraint(t),this.constraints=o)},i.prototype.hasConstraintVariable=function(t){return this.constraintVariables.indexOf(t)>=0},i.prototype.addConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.inserted(t,i);i!==o&&(this.constraintVariables=o,this.activateConstraintVariable(t))},i.prototype.removeConstraintVariable=function(t){var i=this.constraintVariables,o=e.Arrays.removed(t,i);i!==o&&(this.deactivateConstraintVariable(t),this.constraintVariables=o)},i.prototype.evaluateConstraintVariables=function(){for(var t=this.constraintVariables,e=0,i=t.length;e<i;e+=1){t[e].evaluateConstraintVariable()}},i.prototype.activateLayout=function(){var t=this.layoutService.manager;if(null!=t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.activateConstraint(e[i])},i.prototype.deactivateLayout=function(){var t=this.layoutService.manager;if(null!=t)for(var e=this.constraints,i=0,o=e.length;i<o;i+=1)t.deactivateConstraint(e[i])},Object.defineProperty(i.prototype,"viewFrame",{get:function(){var t=this.ownViewFrame;return null===t&&(t=this.deriveViewFrame()),t},enumerable:!1,configurable:!0}),i.prototype.setViewFrame=function(t){this.ownViewFrame=t},i.prototype.deriveViewFrame=function(){var t=this.parentView;return t instanceof i||t instanceof Tr?t.viewFrame:r.R2Box.undefined()},Object.defineProperty(i.prototype,"ownViewBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.deriveViewBounds=function(){var t=this.ownViewBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()&&!e.isUnbounded()){var o=e.viewBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.viewFrame),t},Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),i.prototype.deriveHitBounds=function(){var t;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()&&!e.isIntangible()){var o=e.hitBounds;t=void 0===t?o:t.union(o)}}),this),void 0===t&&(t=this.viewBounds),t},i.prototype.cascadeHitTest=function(t,e,i){if(!this.isHidden()&&!this.isCulled()&&!this.isIntangible()&&this.hitBounds.contains(t,e)){var o=this.extendViewContext(i),n=this.hitTestChildViews(t,e,o);return null===n&&(n=this.hitTest(t,e,o)),n}return null},i.prototype.hitTest=function(t,e,i){return null},i.prototype.hitTestChildViews=function(t,e,o){var n=this.forEachChildView((function(n){if(n instanceof i){var r=this.hitTestChildView(n,t,e,o);if(null!==r)return r}}),this);return void 0!==n?n:null},i.prototype.hitTestChildView=function(t,e,i,o){return t.cascadeHitTest(e,i,o)},Object.defineProperty(i.prototype,"parentTransform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientBounds",{get:function(){var t=this.clientTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),i.prototype.on=function(t,e,i){var o=this.eventHandlers;null===o&&(o={},this.eventHandlers=o);var n,r=o[t],s="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,l=i&&"object"==typeof i&&i.passive||!1,a=i&&"object"==typeof i&&i.once||!1;if(void 0===r)r=[n={listener:e,capture:s,passive:l,once:a}],o[t]=r;else{for(var h=r.length,u=0;u<h&&((n=r[u]).listener!==e||n.capture!==s);)u+=1;u<h?(n.passive=l,n.once=a):(n={listener:e,capture:s,passive:l,once:a},r.push(n))}return this},i.prototype.off=function(t,e,i){var o=this.eventHandlers;if(null!==o){var n=o[t];if(void 0!==n)for(var r="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,s=n.length,l=0;l<s;){var a=n[l];if(a.listener===e&&a.capture===r){n.splice(l,1),0===n.length&&delete o[t];break}l+=1}}return this},i.prototype.handleEvent=function(t){var e=t.type,i=this.eventHandlers;if(null!==i){var o=i[e];if(void 0!==o){for(var n=0;n<o.length;){var r=o[n];if(!r.capture){var s=r.listener;if("function"==typeof s?s.call(this,t):"object"==typeof s&&null!==s&&s.handleEvent(t),r.once){o.splice(n,1);continue}}n+=1}0===o.length&&delete i[e]}}"mouseover"===e?this.onMouseOver(t):"mouseout"===e?this.onMouseOut(t):"pointerover"===e?this.onPointerOver(t):"pointerout"===e&&this.onPointerOut(t)},i.prototype.bubbleEvent=function(t){var e;if(this.handleEvent(t),t.bubbles&&!t.cancelBubble){var o=this.parentView;e=o instanceof i||o instanceof Tr?o.bubbleEvent(t):o}else e=null;return e},i.prototype.dispatchEvent=function(t){t.targetView=this;var e=this.bubbleEvent(t);return null!==e?e.dispatchEvent(t):!t.cancelBubble},i.prototype.isHovering=function(){var t=this.hoverSet;return null!==t&&0!==Object.keys(t).length},i.prototype.onMouseOver=function(t){var e=this.hoverSet;if(null===e&&(e={},this.hoverSet=e),void 0===e.mouse){e.mouse=null;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseenter){var o=new MouseEvent("mouseenter",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onMouseOut=function(t){var e=this.hoverSet;if(null!==e&&void 0!==e.mouse){delete e.mouse;var i=this.eventHandlers;if(null!==i&&void 0!==i.mouseleave){var o=new MouseEvent("mouseleave",{bubbles:!1,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});o.targetView=this,o.relatedTargetView=t.relatedTargetView,this.handleEvent(o)}}},i.prototype.onPointerOver=function(t){var e=this.hoverSet;null===e&&(e={},this.hoverSet=e);var i=""+t.pointerId;if(void 0===e[i]){e[i]=null;var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerenter){var n=new PointerEvent("pointerenter",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}},i.prototype.onPointerOut=function(t){var e=this.hoverSet;if(null!==e){var i=""+t.pointerId;if(void 0!==e[i]){delete e[i];var o=this.eventHandlers;if(null!==o&&void 0!==o.pointerleave){var n=new PointerEvent("pointerleave",{bubbles:!1,pointerId:t.pointerId,pointerType:t.pointerType,isPrimary:t.isPrimary,button:t.button,buttons:t.buttons,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,view:t.view,detail:t.detail,relatedTarget:t.relatedTarget});n.targetView=this,n.relatedTargetView=t.relatedTargetView,this.handleEvent(n)}}}},i.fromConstructor=function(t){if(t.prototype instanceof ro)return new t;throw new TypeError(""+t)},i.uncullFlags=ro.uncullFlags|ro.NeedsRender,i.insertChildFlags=ro.insertChildFlags|ro.NeedsRender,i.removeChildFlags=ro.removeChildFlags|ro.NeedsRender,m([bo({type:Ce,state:null})],i.prototype,"moodModifier",void 0),m([bo({type:Ce,state:null})],i.prototype,"themeModifier",void 0),i}(ro);Object.defineProperty(fr.prototype,"renderer",{get:function(){var t=this.parentView;return t instanceof fr||t instanceof Tr?t.renderer:null},enumerable:!0,configurable:!0}),Object.defineProperty(fr.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!0,configurable:!0});var vr=function(t){function e(){var e=t.call(this)||this;return e.childViews=[],e.childViewMap=null,e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof fr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},this.childViewMap=i),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof fr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof fr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof fr))throw new TypeError(""+t);if(null!==e&&!(e instanceof fr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof fr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.mountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.unmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.powerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.unpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.deriveViewBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof fr&&!n.isHidden()&&!n.isUnbounded()){var r=n.viewBounds;r.isDefined()&&(t=void 0!==t?t.union(r):r)}}return void 0===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof fr&&!n.isHidden()&&!n.isIntangible()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.hitTestChildViews=function(t,e,i){for(var o=this.childViews,n=o.length-1;n>=0;n-=1){var r=o[n];if(r instanceof fr){var s=r.cascadeHitTest(t,e,i);if(null!==s)return s}}return null},e.create=function(){return new e},e}(fr),yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(cr),gr=function(){function t(){this.precision=-1,this.x0=NaN,this.y0=NaN,this.x1=NaN,this.y1=NaN,this.d=""}return t.prototype.setPrecision=function(t){this.precision=t},Object.defineProperty(t.prototype,"anglePrecision",{get:function(){var t=this.precision;return t>0?Math.max(5,t):t},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(t,e){this.d+="M"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision),this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.lineTo=function(t,e){this.d+="L"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision),this.x1=t,this.y1=e},t.prototype.quadraticCurveTo=function(t,e,i,o){this.d+="Q"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision),this.x1=i,this.y1=o},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.d+="C"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision)+","+s.Format.decimal(n,this.precision)+","+s.Format.decimal(r,this.precision),this.x1=n,this.y1=r},t.prototype.arcTo=function(e,i,o,n,r){var l=this.x1,a=this.y1,h=o-e,u=n-i,p=l-e,d=a-i,c=p*p+d*d;if(r<0)throw new Error("negative radius: "+r);if(isNaN(this.x1))this.d+="M"+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else if(c>t.Epsilon)if(Math.abs(d*h-u*p)>t.Epsilon&&0!==r){var f=o-l,v=n-a,y=h*h+u*u,g=f*f+v*v,w=Math.sqrt(y),m=Math.sqrt(c),S=r*Math.tan((Math.PI-Math.acos((y+c-g)/(2*w*m)))/2),C=S/m,b=S/w;Math.abs(C-1)>t.Epsilon&&(this.d+="L"+s.Format.decimal(e+C*p,this.precision)+","+s.Format.decimal(i+C*d,this.precision)),e+=b*h,i+=b*u;var V=s.Format.decimal(r,this.precision);this.d+="A"+V+","+V+",0,0,"+(d*f>p*v?"1":"0")+","+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i}else this.d+="L"+s.Format.decimal(e,this.precision)+","+s.Format.decimal(i,this.precision),this.x1=e,this.y1=i;else;},t.prototype.arc=function(e,i,o,n,r,l){void 0===l&&(l=!1);var a=o*Math.cos(n),h=o*Math.sin(n),u=e+a,p=i+h,d=1^+l,c=l?n-r:r-n;if(o<0)throw new Error("negative radius: "+o);if(isNaN(this.x1)?this.d+="M"+s.Format.decimal(u,this.precision)+","+s.Format.decimal(p,this.precision):(Math.abs(this.x1-u)>t.Epsilon||Math.abs(this.y1-p)>t.Epsilon)&&(this.d+="L"+s.Format.decimal(u,this.precision)+","+s.Format.decimal(p,this.precision)),0!==o){c<0&&(c=c%(2*Math.PI)+2*Math.PI);var f=s.Format.decimal(o,this.precision);if(c>2*Math.PI-t.Epsilon)this.d+="A"+f+","+f+",0,1,"+(d?"1":"0")+","+s.Format.decimal(e-a,this.precision)+","+s.Format.decimal(i-h,this.precision),this.d+="A"+s.Format.decimal(o,this.precision)+","+s.Format.decimal(o,this.precision)+",0,1,"+(d?"1":"0")+","+s.Format.decimal(u,this.precision)+","+s.Format.decimal(p,this.precision),this.x1=u,this.y1=p;else if(c>t.Epsilon){var v=e+o*Math.cos(r),y=i+o*Math.sin(r);this.d+="A"+f+","+f+",0,"+(c>=Math.PI?"1":"0")+","+(d?"1":"0")+","+s.Format.decimal(v,this.precision)+","+s.Format.decimal(y,this.precision),this.x1=v,this.y1=y}}},t.prototype.rect=function(t,e,i,o){this.d+="M"+s.Format.decimal(t,this.precision)+","+s.Format.decimal(e,this.precision)+"h"+s.Format.decimal(i,this.precision)+"v"+s.Format.decimal(o,this.precision)+"h"+s.Format.decimal(-i,this.precision)+"Z",this.x0=t,this.y0=e,this.x1=t,this.y1=e},t.prototype.ellipse=function(t,e,i,o,n,r,l,a){var h=l-r;!0===a&&h>0?h-=2*Math.PI:!1===a&&h<0&&(h+=2*Math.PI);var u=Math.cos(n),p=Math.sin(n),d=Math.cos(l),c=Math.sin(l),f=u*i*d-p*o*c+t,v=p*i*d+u*o*c+e;Math.abs(h),Math.PI;this.d+="A"+s.Format.decimal(i,this.precision)+","+s.Format.decimal(o,this.precision)+","+s.Format.decimal(n,this.anglePrecision),s.Format.decimal(f,this.precision),s.Format.decimal(v,this.precision),this.x1=f,this.y1=v},t.prototype.closePath=function(){isNaN(this.x1)||(this.d+="Z",this.x1=this.x0,this.y1=this.y0)},t.prototype.toString=function(){return this.d},t.Epsilon=1e-6,t}(),wr=function(t){function e(e){var i=t.call(this)||this;return i.context=e,i}return w(e,t),Object.defineProperty(e.prototype,"transform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(yr),mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.getLook=function(t,e){var i,o=this.theme;return null!==o&&(null==e&&(e=this.mood),null!==e&&(i=o.get(t,e))),i},e.prototype.getLookOr=function(t,e,i){2===arguments.length&&(i=e,e=null);var o,n=this.theme;return null!==n?(null==e&&(e=this.mood),o=null!==e?n.getOr(t,e,i):i):o=i,o},e}(yr),Sr=function(){function t(t){this.view=t,this.precision=-1,this.pathContext=null,this.pathView=null,this.pathFlags=0,this.fillStyle="",this.strokeStyle=""}return t.prototype.setPrecision=function(t){this.precision=t},t.prototype.getPathContext=function(){var t=this.pathContext;if(null==t)throw new Error("no path");return t},t.prototype.getOrCreatePathContext=function(){var t=this.pathContext;if(null===t){if(t=this.createPathContext(),this.pathContext=t,null===this.pathView||0!==this.pathFlags){this.finalizePath();var e=this.nextPathView();this.setPathView(e)}this.setPathFlags(0)}return t},t.prototype.createPathContext=function(){var t=new gr;return t.setPrecision(this.precision),t},t.prototype.setPathView=function(t){this.pathView=t},t.prototype.nextPathView=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(t=null;null!==e;){if(e instanceof SVGPathElement){t=ur.fromNode(e);break}e=e.nextSibling}}return t},t.prototype.finalizePath=function(){var e=this.pathView;if(null!==e){var i=this.pathFlags;if(0==(i&t.FillFlag)){var o=e.getAttributeAnimator("fill");null!==o&&o.setState(null,ro.Intrinsic)}if(0==(i&t.FillRuleFlag)){var n=e.getAttributeAnimator("fillRule");null!==n&&n.setState(void 0,ro.Intrinsic)}if(0==(i&t.StrokeFlag)){var r=e.getAttributeAnimator("stroke");null!==r&&r.setState(null,ro.Intrinsic)}if(0==(i&t.PathFlag)){var s=e.getAttributeAnimator("d");null!==s&&s.setState(void 0,ro.Intrinsic)}}},t.prototype.setPathFlags=function(t){this.pathFlags=t},t.prototype.beginPath=function(){this.pathContext=null},t.prototype.moveTo=function(t,e){this.getOrCreatePathContext().moveTo(t,e)},t.prototype.lineTo=function(t,e){this.getPathContext().lineTo(t,e)},t.prototype.quadraticCurveTo=function(t,e,i,o){this.getPathContext().quadraticCurveTo(t,e,i,o)},t.prototype.bezierCurveTo=function(t,e,i,o,n,r){this.getPathContext().bezierCurveTo(t,e,i,o,n,r)},t.prototype.arcTo=function(t,e,i,o,n){this.getPathContext().arcTo(t,e,i,o,n)},t.prototype.arc=function(t,e,i,o,n,r){this.getOrCreatePathContext().arc(t,e,i,o,n,r)},t.prototype.ellipse=function(t,e,i,o,n,r,s,l){this.getOrCreatePathContext().ellipse(t,e,i,o,n,r,s,l)},t.prototype.rect=function(t,e,i,o){this.getOrCreatePathContext().rect(t,e,i,o)},t.prototype.closePath=function(){var t=this.pathContext;null!==t&&t.closePath()},t.prototype.fill=function(e){var i=this.fillStyle;if("string"!=typeof i)throw new Error("unsupported fill style: "+i);var o=this.pathView;null!==o&&0!=(this.pathFlags&t.FillFlag)&&(this.finalizePath(),o=this.nextPathView(),this.setPathView(o));var n=!1;if(null===o&&(o=ur.path.create(),this.setPathView(o),n=!0),o.fill.setState(i,ro.Intrinsic),this.setPathFlags(this.pathFlags|t.FillFlag),void 0!==e&&(o.fillRule.setState(e,ro.Intrinsic),this.setPathFlags(this.pathFlags|t.FillRuleFlag)),0==(this.pathFlags&t.PathFlag)){var r=this.getPathContext().toString();o.d.setState(r,ro.Intrinsic),this.setPathFlags(this.pathFlags|t.PathFlag)}n&&this.view.appendChildView(o)},t.prototype.stroke=function(){var e=this.strokeStyle;if("string"!=typeof e)throw new Error("unsupported stroke style: "+e);var i=this.pathView;null!==i&&0!=(this.pathFlags&t.StrokeFlag)&&(this.finalizePath(),i=this.nextPathView(),this.setPathView(i));var o=!1;if(null===i&&(i=ur.path.create(),this.setPathView(i),o=!0),i.stroke.setState(e,ro.Intrinsic),this.setPathFlags(this.pathFlags|t.StrokeFlag),0==(this.pathFlags&t.PathFlag)){var n=this.getPathContext().toString();i.d.setState(n,ro.Intrinsic),this.setPathFlags(this.pathFlags|t.PathFlag)}o&&this.view.appendChildView(i)},t.prototype.beginSvg=function(){for(var t=null,e=this.view.node.firstChild;null!==e;){if(e instanceof SVGPathElement){t=ur.fromNode(e);break}e=e.nextSibling}this.setPathView(t),this.setPathFlags(0)},t.prototype.finalizeSvg=function(){var t=this.pathView;if(null!==t){var e=t.node.nextSibling;for(null===t.fill.state&&null===t.stroke.state&&(this.pathView=null,t.remove()),t=null;null!==e;){var i=e.view;e=e.nextSibling,void 0!==i&&i.remove()}}},t.FillFlag=1,t.FillRuleFlag=2,t.StrokeFlag=4,t.PathFlag=8,t}(),Cr=function(t){function e(e,i,o){var n=t.call(this)||this;return n.context=e,n.theme=i,n.mood=o,n}return w(e,t),Object.defineProperty(e.prototype,"transform",{get:function(){return r.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(mr),br=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.context=e,s.transform=i,s.pixelRatio=o,s.theme=n,s.mood=r,s}return w(e,t),e.prototype.setTransform=function(t){this.transform=t},e}(mr),Vr=function(t){function e(e,i){var o=t.call(this)||this;return o.context=e,o.pixelRatio=void 0!==i?i:window.devicePixelRatio||1,o}return w(e,t),e}(cr),Tr=function(t){function i(e){var o=t.call(this,e)||this;return o.graphicsViews=[],Object.defineProperty(o,"renderer",{value:o.createRenderer(),writable:!0,enumerable:!0,configurable:!0}),o.viewFrame=r.R2Box.undefined(),o.canvasFlags=i.ClickEventsFlag,o.eventNode=e,o.mouse=null,o.pointers=null,o.touches=null,o.onClick=o.onClick.bind(o),o.onDblClick=o.onDblClick.bind(o),o.onContextMenu=o.onContextMenu.bind(o),o.onWheel=o.onWheel.bind(o),o.onMouseEnter=o.onMouseEnter.bind(o),o.onMouseLeave=o.onMouseLeave.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.onPointerEnter=o.onPointerEnter.bind(o),o.onPointerLeave=o.onPointerLeave.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.onTouchStart=o.onTouchStart.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.onTouchCancel=o.onTouchCancel.bind(o),o.initCanvas(),o}return w(i,t),i.prototype.initCanvas=function(){this.position.setState("absolute",ro.Intrinsic)},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.renderer&&this.setRenderer(e.renderer),void 0!==e.clickEventsEnabled&&this.clickEventsEnabled(e.clickEventsEnabled),void 0!==e.wheelEventsEnabled&&this.wheelEventsEnabled(e.wheelEventsEnabled),void 0!==e.mouseEventsEnabled&&this.mouseEventsEnabled(e.mouseEventsEnabled),void 0!==e.pointerEventsEnabled&&this.pointerEventsEnabled(e.pointerEventsEnabled),void 0!==e.touchEventsEnabled&&this.touchEventsEnabled(e.touchEventsEnabled)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidCompositeObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillRender&&(this.viewObserverCache.viewWillRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRenderObservers)),void 0!==i.viewDidRender&&(this.viewObserverCache.viewDidRenderObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRenderObservers)),void 0!==i.viewWillRasterize&&(this.viewObserverCache.viewWillRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillRasterizeObservers)),void 0!==i.viewDidRasterize&&(this.viewObserverCache.viewDidRasterizeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidRasterizeObservers)),void 0!==i.viewWillComposite&&(this.viewObserverCache.viewWillCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillCompositeObservers)),void 0!==i.viewDidComposite&&(this.viewObserverCache.viewDidCompositeObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidCompositeObservers))},Object.defineProperty(i.prototype,"childViewCount",{get:function(){for(var t=0,e=this.node.childNodes,i=0,o=e.length;i<o;i+=1){void 0!==e[i].view&&(t+=1)}return t+=this.graphicsViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e.push.apply(e,this.graphicsViews),e},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){for(var t=this.node.childNodes,e=0,i=t.length;e<i;e+=1){var o=t[e].view;if(void 0!==o)return o}var n=this.graphicsViews;return 0!==n.length?n[0]:null},i.prototype.lastChildView=function(){var t=this.graphicsViews;if(0!==t.length)return t[t.length-1];for(var e=this.node.childNodes,i=e.length-1;i>=0;i-=1){var o=e[i].view;if(void 0!==o)return o}return null},i.prototype.nextChildView=function(t){var e=this.graphicsViews;if(t instanceof Qn&&t.parentView===this){for(var i=t.node;;){if(null===(i=i.nextSibling))break;if(void 0!==i.view)return i.view}if(0!==e.length)return e[0]}else if(t instanceof fr){var o=e.indexOf(t);if(o>=0&&o+1<e.length)return e[o+1]}return null},i.prototype.previousChildView=function(t){var e=null;if(t instanceof fr){var i=this.graphicsViews,o=i.indexOf(t);if(o-1>=0)return i[o-1];if(0===o&&null!==(e=this.node.lastChild)&&void 0!==e.view)return e.view}else t instanceof Qn&&t.parentView===this&&(e=t.node);if(null!==e)for(;;){if(null===(e=e.previousSibling))break;if(void 0!==e.view)return e.view}return null},i.prototype.forEachChildView=function(t,e){for(var i,o=this.node.childNodes,n=0;n<o.length;){var r=o[n];if(void 0!==(l=r.view)&&void 0!==(i=t.call(e,l)))break;o[n]===r&&(n+=1)}var s=this.graphicsViews;for(n=0;n<s.length;){var l=s[n];if(void 0!==(i=t.call(e,l)))break;s[n]===l&&(n+=1)}return i},i.prototype.setChildView=function(e,i){return i instanceof fr?this.setGraphicsView(e,i):t.prototype.setChildView.call(this,e,i)},i.prototype.setGraphicsView=function(t,e){var i=null,o=this.graphicsViews;null!==e&&(e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildView(t);if(r instanceof fr)n=o.indexOf(r),i=o[n+1],this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0);else if(r instanceof Qn){var s=r.node,l=s.nextSibling;i=null!==l&&l.view||null,this.willRemoveChildView(r),this.willRemoveChildNode(s),r.setParentView(null,this),this.removeChildViewMap(r),this.node.removeChild(s),this.onRemoveChildNode(s),this.onRemoveChildView(r),this.didRemoveChildNode(s),this.didRemoveChildView(r),r.setKey(void 0)}else if(null!==r)throw new TypeError(""+r);return null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},i.prototype.append=function(t,e){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=ar.fromTag(t)),this.appendChildView(t,e),t},i.prototype.appendChildView=function(e,i){e instanceof fr?this.appendGraphicsView(e,i):t.prototype.appendChildView.call(this,e,i)},i.prototype.appendGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.graphicsViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},i.prototype.prepend=function(t,e){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=ar.fromTag(t)),this.prependChildView(t,e),t},i.prototype.prependChildView=function(e,i){e instanceof fr?this.prependGraphicsView(e):t.prototype.prependChildView.call(this,e)},i.prototype.prependGraphicsView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.graphicsViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},i.prototype.insert=function(t,e,i){return t instanceof Node?t=Qn.fromNode(t):"function"==typeof t?t=Qn.fromConstructor(t):"string"==typeof t&&(t=ar.fromTag(t)),this.insertChild(t,e,i),t},i.prototype.insertChildView=function(e,i,o){e instanceof fr?this.insertGraphicsView(e,i,o):t.prototype.insertChildView.call(this,e,i,o)},i.prototype.insertGraphicsView=function(t,e,i){if(null!==e&&!(e instanceof fr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.graphicsViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},i.prototype.removeChildView=function(e){var i;if("string"==typeof e){if(null===(i=this.getChildView(e)))return null}else i=e;if(i instanceof fr?this.removeGraphicsView(i):t.prototype.removeChildView.call(this,i),"string"==typeof e)return i},i.prototype.removeGraphicsView=function(t){if(t.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(t),t.setParentView(null,this),this.removeChildViewMap(t);var e=this.graphicsViews,i=e.indexOf(t);i>=0&&e.splice(i,1),this.onRemoveChildView(t),this.didRemoveChildView(t),t.setKey(void 0)},i.prototype.removeAll=function(){t.prototype.removeAll.call(this);for(var e=this.graphicsViews;;){var i=e.length;if(!(i>0))break;var o=e[i-1];this.willRemoveChildView(o),o.setParentView(null,this),this.removeChildViewMap(o),e.pop(),this.onRemoveChildView(o),this.didRemoveChildView(o),o.setKey(void 0)}},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),i.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),this.renderer=t,this.resetRenderer()},i.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(i=this.node.getContext("2d"))){var e=this.pixelRatio;return new br(i,r.Transform.affine(e,0,0,e,0,0),e,this.theme.state,this.mood.state)}throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var i;if(null!==(i=this.node.getContext("webgl")))return new Vr(i,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},i.prototype.setCanvasFlags=function(t){this.canvasFlags=t},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents(this.eventNode)},i.prototype.mountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeMount(),0==(o.viewFlags&ro.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeMount(),0==(o.viewFlags&ro.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}},i.prototype.onUnmount=function(){this.detachEvents(this.eventNode),t.prototype.onUnmount.call(this)},i.prototype.unmountChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnmount(),0==(o.viewFlags&ro.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnmount(),0==(o.viewFlags&ro.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}},i.prototype.powerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadePower(),0==(o.viewFlags&ro.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadePower(),0==(o.viewFlags&ro.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}},i.prototype.unpowerChildViews=function(){for(var t=this.node.childNodes,e=0;e<t.length;){void 0===(o=t[e].view)||(o.cascadeUnpower(),0==(o.viewFlags&ro.RemovingFlag))?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}var i=this.graphicsViews;for(e=0;e<i.length;){var o;(o=i[e]).cascadeUnpower(),0==(o.viewFlags&ro.RemovingFlag)?e+=1:(o.setViewFlags(o.viewFlags&~ro.RemovingFlag),this.removeChildView(o))}},i.prototype.cascadeInsert=function(t,e){(this.viewFlags&(ro.MountedFlag|ro.PoweredFlag))==(ro.MountedFlag|ro.PoweredFlag)&&(void 0===t&&(t=0),0!=((t|=this.viewFlags&ro.UpdateMask)&ro.ProcessMask)&&(void 0===e&&(e=this.superViewContext),this.cascadeProcess(t,e)))},i.prototype.needsUpdate=function(e,i){return e=t.prototype.needsUpdate.call(this,e,i),e|=ro.NeedsRender|ro.NeedsComposite,this.setViewFlags(this.viewFlags|ro.NeedsRender|ro.NeedsComposite),e},i.prototype.needsProcess=function(t,e){return 0!=(t&ro.ProcessMask)&&this.requireUpdate(ro.NeedsRender|ro.NeedsComposite),t},i.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeCanvas(this.node),this.resetRenderer(),this.requireUpdate(ro.NeedsLayout|ro.NeedsRender|ro.NeedsComposite)},i.prototype.onScroll=function(e){t.prototype.onScroll.call(this,e),this.setCulled(!this.intersectsViewport())},i.prototype.processChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(s=o[n].view)||(i.call(this,s,t,e),0==(s.viewFlags&ro.RemovingFlag))?n+=1:(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}var r=this.graphicsViews;for(n=0;n<r.length;){var s=r[n];i.call(this,s,t,e),0==(s.viewFlags&ro.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}},i.prototype.needsDisplay=function(t,e){return t|=ro.NeedsRender|ro.NeedsComposite},i.prototype.cascadeDisplay=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsDisplay,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsDisplay(t,i))&ro.DisplayMask)){var o=t;this.setViewFlags(this.viewFlags&~ro.NeedsDisplay|ro.TraversingFlag|ro.DisplayingFlag);try{this.willDisplay(o,i),0!=((this.viewFlags|t)&ro.NeedsLayout)&&(o|=ro.NeedsLayout,this.setViewFlags(this.viewFlags&~ro.NeedsLayout),this.willLayout(i)),0!=((this.viewFlags|t)&ro.NeedsRender)&&(o|=ro.NeedsRender,this.setViewFlags(this.viewFlags&~ro.NeedsRender),this.willRender(i)),0!=((this.viewFlags|t)&ro.NeedsRasterize)&&(o|=ro.NeedsRasterize,this.setViewFlags(this.viewFlags&~ro.NeedsRasterize),this.willRasterize(i)),0!=((this.viewFlags|t)&ro.NeedsComposite)&&(o|=ro.NeedsComposite,this.setViewFlags(this.viewFlags&~ro.NeedsComposite),this.willComposite(i)),this.onDisplay(o,i),0!=(o&ro.NeedsLayout)&&this.onLayout(i),0!=(o&ro.NeedsRender)&&this.onRender(i),0!=(o&ro.NeedsRasterize)&&this.onRasterize(i),0!=(o&ro.NeedsComposite)&&this.onComposite(i),0==(o&ro.DisplayMask)||this.isHidden()||this.isCulled()||this.displayChildViews(o,i,this.displayChildView),0!=(o&ro.NeedsComposite)&&this.didComposite(i),0!=(o&ro.NeedsRasterize)&&this.didRasterize(i),0!=(o&ro.NeedsRender)&&this.didRender(i),0!=(o&ro.NeedsLayout)&&this.didLayout(i),this.didDisplay(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.DisplayingFlag))}}},i.prototype.didDisplay=function(e,i){this.detectHitTargets(),t.prototype.didDisplay.call(this,e,i)},i.prototype.willRender=function(t){var e=this.viewObserverCache.viewWillRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillRender(t,this)}},i.prototype.onRender=function(t){this.clearCanvas()},i.prototype.didRender=function(t){var e=this.viewObserverCache.viewDidRenderObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRender(t,this)}},i.prototype.willRasterize=function(t){var e=this.viewObserverCache.viewWillRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillRasterize(t,this)}},i.prototype.onRasterize=function(t){},i.prototype.didRasterize=function(t){var e=this.viewObserverCache.viewDidRasterizeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidRasterize(t,this)}},i.prototype.willComposite=function(t){var e=this.viewObserverCache.viewWillCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillComposite(t,this)}},i.prototype.onComposite=function(t){},i.prototype.didComposite=function(t){var e=this.viewObserverCache.viewDidCompositeObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidComposite(t,this)}},i.prototype.displayChildViews=function(t,e,i){for(var o=this.node.childNodes,n=0;n<o.length;){void 0===(s=o[n].view)||(i.call(this,s,t,e),0==(s.viewFlags&ro.RemovingFlag))?n+=1:(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}var r=this.graphicsViews;for(n=0;n<r.length;){var s=r[n];i.call(this,s,t,e),0==(s.viewFlags&ro.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}},i.prototype.isHidden=function(){return 0!=(this.viewFlags&ro.HiddenFlag)},i.prototype.setHidden=function(t){0!=(this.viewFlags&ro.HiddenFlag)!==t&&(this.willSetHidden(t),t?this.setViewFlags(this.viewFlags|ro.HiddenFlag):this.setViewFlags(this.viewFlags&~ro.HiddenFlag),this.onSetHidden(t),this.didSetHidden(t))},i.prototype.willSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillSetHidden&&n.viewWillSetHidden(t,this)}},i.prototype.onSetHidden=function(t){t||this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},i.prototype.didSetHidden=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidSetHidden&&n.viewDidSetHidden(t,this)}},i.prototype.extendViewContext=function(t){var e=Object.create(t);return e.renderer=this.renderer,e},i.prototype.setViewFrame=function(t){},Object.defineProperty(i.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hitBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),i.prototype.cascadeHitTest=function(t,e,i){if(!this.isHidden()&&!this.isCulled()&&!this.isIntangible()&&this.hitBounds.contains(t,e)){void 0===i&&(i=this.superViewContext);var o=this.extendViewContext(i),n=this.hitTestChildViews(t,e,o);return null===n&&(n=this.hitTest(t,e,o)),n}return null},i.prototype.hitTest=function(t,e,i){return null},i.prototype.hitTestChildViews=function(t,e,i){for(var o=this.graphicsViews,n=o.length-1;n>=0;n-=1){var r=o[n],s=this.hitTestChildView(r,t,e,i);if(null!==s)return s}return null},i.prototype.hitTestChildView=function(t,e,i,o){return t.cascadeHitTest(e,i,o)},i.prototype.detectHitTargets=function(t){if(0!=(this.canvasFlags&i.MouseEventsFlag)){var e=this.mouse;null!==e&&(void 0===t&&(t=this.clientBounds),this.detectMouseTarget(e,this.clientBounds))}if(0!=(this.canvasFlags&i.PointerEventsFlag)){var o=this.pointers;for(var n in o){var r=o[n];void 0===t&&(t=this.clientBounds),this.detectPointerTarget(r,t)}}},i.prototype.setEventNode=function(t){null===t&&(t=this.node);var e=this.eventNode;e!==t&&(this.detachEvents(e),this.eventNode=t,this.attachEvents(t))},i.prototype.clickEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.ClickEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.ClickEventsFlag),this.attachClickEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.ClickEventsFlag),this.detachClickEvents(this.eventNode)),this)},i.prototype.wheelEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.WheelEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.WheelEventsFlag),this.attachWheelEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.WheelEventsFlag),this.detachWheelEvents(this.eventNode)),this)},i.prototype.mouseEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.MouseEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.MouseEventsFlag),this.attachPassiveMouseEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.MouseEventsFlag),this.detachPassiveMouseEvents(this.eventNode)),this)},i.prototype.pointerEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.PointerEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.PointerEventsFlag),this.attachPassivePointerEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.PointerEventsFlag),this.detachPassivePointerEvents(this.eventNode)),this)},i.prototype.touchEventsEnabled=function(t){var e=0!=(this.canvasFlags&i.TouchEventsFlag);return void 0===t?e:(t&&!e?(this.setCanvasFlags(this.canvasFlags|i.TouchEventsFlag),this.attachPassiveTouchEvents(this.eventNode)):!t&&e&&(this.setCanvasFlags(this.canvasFlags&~i.TouchEventsFlag),this.detachPassiveTouchEvents(this.eventNode)),this)},i.prototype.handleEvent=function(t){},i.prototype.bubbleEvent=function(t){return this.handleEvent(t),this},i.prototype.attachEvents=function(t){0!=(this.canvasFlags&i.ClickEventsFlag)&&this.attachClickEvents(t),0!=(this.canvasFlags&i.WheelEventsFlag)&&this.attachWheelEvents(t),0!=(this.canvasFlags&i.MouseEventsFlag)&&this.attachPassiveMouseEvents(t),0!=(this.canvasFlags&i.PointerEventsFlag)&&this.attachPassivePointerEvents(t),0!=(this.canvasFlags&i.TouchEventsFlag)&&this.attachPassiveTouchEvents(t)},i.prototype.detachEvents=function(t){this.detachClickEvents(t),this.detachWheelEvents(t),this.detachPassiveMouseEvents(t),this.detachActiveMouseEvents(t),this.detachPassivePointerEvents(t),this.detachActivePointerEvents(t),this.detachPassiveTouchEvents(t),this.detachActiveTouchEvents(t)},i.prototype.fireEvent=function(t,e,i){var o=this.clientBounds;if(o.contains(e,i)){var n=e-o.x,r=i-o.y,s=this.cascadeHitTest(n,r);if(null!==s)return t.targetView=s,s.bubbleEvent(t),s}return null},i.prototype.attachClickEvents=function(t){t.addEventListener("click",this.onClick),t.addEventListener("dblclick",this.onDblClick),t.addEventListener("contextmenu",this.onContextMenu)},i.prototype.detachClickEvents=function(t){t.removeEventListener("click",this.onClick),t.removeEventListener("dblclick",this.onDblClick),t.removeEventListener("contextmenu",this.onContextMenu)},i.prototype.attachWheelEvents=function(t){t.addEventListener("wheel",this.onWheel)},i.prototype.detachWheelEvents=function(t){t.removeEventListener("wheel",this.onWheel)},i.prototype.attachPassiveMouseEvents=function(t){t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave),t.addEventListener("mousedown",this.onMouseDown)},i.prototype.detachPassiveMouseEvents=function(t){t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),t.removeEventListener("mousedown",this.onMouseDown)},i.prototype.attachActiveMouseEvents=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},i.prototype.detachActiveMouseEvents=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp)},i.prototype.updateMouse=function(t,e){t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.fireMouseEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onDblClick=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onContextMenu=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onWheel=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseEnter=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},this.mouse=e),this.updateMouse(e,t)},i.prototype.onMouseLeave=function(t){null!==this.mouse&&(this.mouse=null,this.detachActiveMouseEvents(this.eventNode))},i.prototype.onMouseDown=function(t){var e=this.mouse;null===e&&(this.attachActiveMouseEvents(this.eventNode),e={},this.mouse=e),this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseMove=function(t){var e=this.mouse;null===e&&(e={},this.mouse=e),this.updateMouse(e,t);var i=e.targetView,o=this.fireMouseEvent(t);null===o&&(o=void 0),o!==i&&this.onMouseTargetChange(e,o,i)},i.prototype.onMouseUp=function(t){var e=this.mouse;null!==e&&this.updateMouse(e,t),this.fireMouseEvent(t)},i.prototype.onMouseTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new MouseEvent("mouseout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new MouseEvent("mouseover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectMouseTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,s=t.targetView,l=this.cascadeHitTest(n,r);null===l&&(l=void 0),l!==s&&this.onMouseTargetChange(t,l,s)}},i.prototype.attachPassivePointerEvents=function(t){t.addEventListener("pointerenter",this.onPointerEnter),t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerdown",this.onPointerDown)},i.prototype.detachPassivePointerEvents=function(t){t.removeEventListener("pointerenter",this.onPointerEnter),t.removeEventListener("pointerleave",this.onPointerLeave),t.removeEventListener("pointerdown",this.onPointerDown)},i.prototype.attachActivePointerEvents=function(t){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel)},i.prototype.detachActivePointerEvents=function(t){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel)},i.prototype.updatePointer=function(t,e){t.pointerId=e.pointerId,t.pointerType=e.pointerType,t.isPrimary=e.isPrimary,t.button=e.button,t.buttons=e.buttons,t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.movementX=e.movementX,t.movementY=e.movementY,t.width=e.width,t.height=e.height,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.view=e.view,t.detail=e.detail,t.relatedTarget=e.relatedTarget},i.prototype.firePointerEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},i.prototype.onPointerEnter=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t)},i.prototype.onPointerLeave=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0!==o&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerDown=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t),this.firePointerEvent(t)},i.prototype.onPointerMove=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0===o&&(0===Object.keys(i).length&&this.attachActivePointerEvents(this.eventNode),o={},i[e]=o),this.updatePointer(o,t);var n=o.targetView,r=this.firePointerEvent(t);null===r&&(r=void 0),r!==n&&this.onPointerTargetChange(o,r,n)},i.prototype.onPointerUp=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerCancel=function(t){var e=""+t.pointerId,i=this.pointers;null===i&&(i={},this.pointers=i);var o=i[e];void 0!==o&&this.updatePointer(o,t),this.firePointerEvent(t),void 0!==o&&"mouse"!==t.pointerType&&(void 0!==o.targetView&&this.onPointerTargetChange(o,void 0,o.targetView),delete i[e],0===Object.keys(i).length&&this.detachActivePointerEvents(this.eventNode))},i.prototype.onPointerTargetChange=function(t,e,i){if(t.bubbles=!0,void 0!==i){var o=new PointerEvent("pointerout",t);o.targetView=i,o.relatedTargetView=e,i.bubbleEvent(o)}if(t.targetView=e,void 0!==e){var n=new PointerEvent("pointerover",t);n.targetView=e,n.relatedTargetView=i,e.bubbleEvent(n)}},i.prototype.detectPointerTarget=function(t,e){var i=t.clientX,o=t.clientY;if(e.contains(i,o)){var n=i-e.x,r=o-e.y,s=t.targetView,l=this.cascadeHitTest(n,r);null===l&&(l=void 0),l!==s&&this.onPointerTargetChange(t,l,s)}},i.prototype.attachPassiveTouchEvents=function(t){t.addEventListener("touchstart",this.onTouchStart)},i.prototype.detachPassiveTouchEvents=function(t){t.removeEventListener("touchstart",this.onTouchStart)},i.prototype.attachActiveTouchEvents=function(t){t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchCancel)},i.prototype.detachActiveTouchEvents=function(t){t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel)},i.prototype.updateTouch=function(t,e){t.clientX=e.clientX,t.clientY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.pageX=e.pageX,t.pageY=e.pageY,t.radiusX=e.radiusX,t.radiusY=e.radiusY,t.rotationAngle=e.rotationAngle,t.force=e.force},i.prototype.fireTouchEvent=function(t,e){for(var i=e.changedTouches,o=[],n=function(n,r){var s=i[n],l=s.targetView;if(void 0!==l&&o.indexOf(l)<0){var a=new TouchEvent(t,{changedTouches:i,targetTouches:e.targetTouches,touches:e.touches,bubbles:!0});a.targetView=l;for(var h=[s],u=n+1;u<r;u+=1){var p=i[u];p.targetView===l&&h.push(p)}void 0!==document.createTouchList?a.targetViewTouches=document.createTouchList.apply(document,h):(h.item=function(t){return h[t]},a.targetViewTouches=h),l.bubbleEvent(a),o.push(l)}},r=0,s=i.length;r<s;r+=1)n(r,s)},i.prototype.onTouchStart=function(t){var e,i=this.touches;null===i&&(i={},this.touches=i);for(var o=t.changedTouches,n=0,r=o.length;n<r;n+=1){var s=o[n],l=""+s.identifier,a=i[l];void 0===a&&(0===Object.keys(i).length&&this.attachActiveTouchEvents(this.eventNode),a={identifier:s.identifier,target:s.target},i[l]=a),this.updateTouch(a,s);var h=a.clientX,u=a.clientY;if(void 0===e&&(e=this.clientBounds),e.contains(h,u)){var p=h-e.x,d=u-e.y,c=this.cascadeHitTest(p,d);null!==c&&(a.targetView=c,s.targetView=c)}}this.fireTouchEvent("touchstart",t)},i.prototype.onTouchMove=function(t){var e=this.touches;null===e&&(e={},this.touches=e);for(var i=t.changedTouches,o=0,n=i.length;o<n;o+=1){var r=i[o],s=""+r.identifier,l=e[s];void 0===l&&(l={identifier:r.identifier,target:r.target},e[s]=l),this.updateTouch(l,r),r.targetView=l.targetView}this.fireTouchEvent("touchmove",t)},i.prototype.onTouchEnd=function(t){var e=this.touches;null===e&&(e={},this.touches=e);for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[l=""+(s=i[n]).identifier];void 0===r&&(r={identifier:s.identifier,target:s.target},e[l]=r),this.updateTouch(r,s),s.targetView=r.targetView}this.fireTouchEvent("touchend",t);for(n=0;n<o;n+=1){var s,l;delete e[l=""+(s=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.onTouchCancel=function(t){var e=this.touches;null===e&&(e={},this.touches=e);for(var i=t.changedTouches,o=i.length,n=0;n<o;n+=1){var r=e[l=""+(s=i[n]).identifier];void 0===r&&(r={identifier:s.identifier,target:s.target},e[l]=r),this.updateTouch(r,s),s.targetView=r.targetView}this.fireTouchEvent("touchcancel",t);for(n=0;n<o;n+=1){var s,l;delete e[l=""+(s=i[n]).identifier],0===Object.keys(e).length&&this.detachActiveTouchEvents(this.eventNode)}},i.prototype.resizeCanvas=function(t){var e,i,o,n=t.parentNode;if(n instanceof HTMLElement){do{if(e=Math.floor(n.offsetWidth),i=Math.floor(n.offsetHeight),0!==e&&0!==i)break;0!==e&&0!==i||!ar.isPositioned(n)||this.requireUpdate(ro.NeedsResize),n=n.parentNode}while(n instanceof HTMLElement);o=this.pixelRatio,t.width=e*o,t.height=i*o,t.style.width=e+"px",t.style.height=i+"px"}else e=Math.floor(t.width),i=Math.floor(t.height),o=1;this.viewFrame=new r.R2Box(0,0,e,i)},i.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof br){var e=this.viewFrame;t.context.clearRect(0,0,e.width,e.height)}else if(t instanceof Vr){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},i.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof br){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof Vr){var i=this.viewFrame;t.context.viewport(0,0,i.width,i.height)}},i.tag="canvas",i.ClickEventsFlag=1,i.WheelEventsFlag=2,i.MouseEventsFlag=4,i.PointerEventsFlag=8,i.TouchEventsFlag=16,i.EventsMask=i.ClickEventsFlag|i.WheelEventsFlag|i.MouseEventsFlag|i.PointerEventsFlag|i.TouchEventsFlag,i.powerFlags=ar.powerFlags|ro.NeedsRender|ro.NeedsComposite,i.uncullFlags=ar.uncullFlags|ro.NeedsRender|ro.NeedsComposite,i}(ar);ar.Tag("canvas")(Tr,"canvas");var Fr=function(t){function e(){var e=t.call(this)||this;return e.canvas=e.createCanvas(),Object.defineProperty(e,"renderer",{value:e.createRenderer(),writable:!0,enumerable:!0,configurable:!0}),e.ownRasterFrame=null,e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof fr||t instanceof Tr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),this.renderer=t,this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new br(e,r.Transform.identity(),this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new Vr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.needsUpdate=function(e,i){var o=(e=t.prototype.needsUpdate.call(this,e,i))&(ro.NeedsRender|ro.NeedsComposite);return 0!==o&&(e|=ro.NeedsComposite,this.setViewFlags(this.viewFlags|ro.NeedsDisplay|ro.NeedsComposite|o)),e},e.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&ro.ProcessMask)&&0==(t&ro.NeedsResize)&&(t=0),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&ro.DisplayMask)?t|=ro.NeedsComposite:t=0!=(t&ro.NeedsComposite)?ro.NeedsDisplay|ro.NeedsComposite:0,t},e.prototype.onRender=function(e){var i=this.rasterFrame;this.resizeCanvas(this.canvas,i),this.resetRenderer(i),this.clearCanvas(i),t.prototype.onRender.call(this,e)},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"rasterFrame",{get:function(){var t=this.ownRasterFrame;return null===t&&(t=this.deriveRasterFrame()),t},enumerable:!1,configurable:!0}),e.prototype.setRasterFrame=function(t){this.ownRasterFrame=t},e.prototype.deriveRasterFrame=function(){return this.viewBounds},e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t,e){var i=this.pixelRatio,o=e.width,n=e.height,r=o*i,s=n*i,l=t.width,a=t.height;r===l&&s===a||(t.width=r,t.height=s,t.style.width=o+"px",t.style.height=n+"px")},e.prototype.clearCanvas=function(t){var e=this.renderer;if(e instanceof br)e.context.clearRect(0,0,t.xMax,t.yMax);else if(e instanceof Vr){var i=e.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(t){var e=this.renderer;if(e instanceof br){var i=this.pixelRatio,o=t.xMin*i,n=t.yMin*i;e.context.setTransform(i,0,0,i,-o,-n),e.setTransform(r.Transform.affine(i,0,0,i,-o,-n))}else e instanceof Vr&&e.context.viewport(t.x,t.y,t.xMax,t.yMax)},e.prototype.compositeImage=function(t){var e=t.compositor;if(e instanceof br){var i=e.context,o=this.rasterFrame,n=this.canvas;if(o.isDefined()&&0!==o.width&&0!==o.height&&0!==n.width&&0!==n.height){var r=i.globalAlpha,s=i.globalCompositeOperation;i.globalAlpha=this.opacity.getValue(),i.globalCompositeOperation=this.compositeOperation.getValue(),i.drawImage(n,o.x,o.y,o.width,o.height),i.globalAlpha=r,i.globalCompositeOperation=s}}},e.create=function(){return new e},e.mountFlags=vr.mountFlags|ro.NeedsRender|ro.NeedsComposite,e.powerFlags=vr.powerFlags|ro.NeedsRender|ro.NeedsComposite,e.uncullFlags=vr.uncullFlags|ro.NeedsRender|ro.NeedsComposite,m([Oo({type:Number,state:1,updateFlags:ro.NeedsComposite})],e.prototype,"opacity",void 0),m([Oo({type:String,state:"source-over",updateFlags:ro.NeedsComposite})],e.prototype,"compositeOperation",void 0),e}(vr);Object.defineProperty(Fr.prototype,"viewBounds",{get:function(){return this.deriveViewBounds()},enumerable:!0,configurable:!0});var Pr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof fr&&"fill"in t}return!1},initView:function(t,e){void 0!==e.fill&&t.fill(e.fill)}},Mr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof fr&&"stroke"in t&&"strokeWidth"in t}return!1},initView:function(t,e){void 0!==e.stroke&&t.stroke(e.stroke),void 0!==e.strokeWidth&&t.strokeWidth(e.strokeWidth)}},Dr=function(){function t(t,e,i,o){this.x=t,this.y=e,this.width=i,this.height=o}return t.prototype.withX=function(t){return t=r.Length.fromAny(t),this.x.equals(t)?this:this.copy(t,this.y,this.width,this.height)},t.prototype.withY=function(t){return t=r.Length.fromAny(t),this.y.equals(t)?this:this.copy(this.x,t,this.width,this.height)},t.prototype.withWidth=function(t){return t=r.Length.fromAny(t),this.width.equals(t)?this:this.copy(this.x,this.y,t,this.height)},t.prototype.withHeight=function(t){return t=r.Length.fromAny(t),this.height.equals(t)?this:this.copy(this.x,this.y,this.width,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new gr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof wr&&this.draw(t.context,e)},t.prototype.draw=function(t,e){void 0===e&&(e=null),this.renderRect(t,e)},t.prototype.renderRect=function(t,e){t.rect(this.x.pxValue(),this.y.pxValue(),this.width.pxValue(),this.height.pxValue())},t.prototype.copy=function(e,i,o,n){return new t(e,i,o,n)},t.prototype.toAny=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.x.equals(e.x)&&this.y.equals(e.y)&&this.width.equals(e.width)&&this.height.equals(e.height))},t.prototype.debug=function(t){return t=t.write("Rect").write(46).write("create").write(40).debug(this.x).write(", ").debug(this.y).write(", ").debug(this.width).write(", ").debug(this.height).write(41)},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n){return new t(e=r.Length.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Length.fromAny(n))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.x,e.y,e.width,e.height);throw new TypeError(""+e)},t}(),xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Dr(this.x.getValue(),this.y.getValue(),this.width.getValue(),this.height.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Dr(this.x.getState(),this.y.getState(),this.width.getState(),this.height.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof Dr&&(t=t.toAny()),void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.width&&this.width(t.width,e),void 0!==t.height&&this.height(t.height,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderRect(o,this.viewFrame),o.restore()}},e.prototype.renderRect=function(t,e){var i=this.x.getValue().pxValue(e.width),o=this.y.getValue().pxValue(e.height),n=this.width.getValue().pxValue(e.width),r=this.height.getValue().pxValue(e.height);t.beginPath(),t.rect(i,o,n,r);var s=this.fill.value;null!==s&&(t.fillStyle=s.toString(),t.fill());var l=this.stroke.value;if(null!==l){var a=this.strokeWidth.value;if(null!==a){var h=Math.min(e.width,e.height);t.lineWidth=a.pxValue(h)}t.strokeStyle=l.toString(),t.stroke()}},e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestRect(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestRect=function(t,e,i,o){var n=this.x.getValue().pxValue(o.width),r=this.y.getValue().pxValue(o.height),s=this.width.getValue().pxValue(o.width),l=this.height.getValue().pxValue(o.height);if(i.beginPath(),i.rect(n,r,s,l),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var a=this.strokeWidth.value;if(null!==a){var h=Math.min(o.width,o.height);if(i.lineWidth=a.pxValue(h),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromRect=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Dr)return this.fromRect(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"x",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"y",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"width",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"height",void 0),m([Oo({type:Tt,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"strokeWidth",void 0),e}(vr);Object.defineProperty(xr.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=this.x.getValue().pxValue(t.width),i=this.y.getValue().pxValue(t.height),o=this.width.getValue().pxValue(t.width),n=this.height.getValue().pxValue(t.height);return new r.R2Box(e,i,e+o,i+n)},enumerable:!0,configurable:!0});var Lr=function(){function t(t,e,i,o,n,r,s,l){this.center=t,this.innerRadius=e,this.outerRadius=i,this.startAngle=o,this.sweepAngle=n,this.padAngle=r,this.padRadius=s,this.cornerRadius=l}return t.prototype.withCenter=function(t){return t=r.R2Point.fromAny(t),this.center.equals(t)?this:this.copy(t,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withInnerRadius=function(t){return t=r.Length.fromAny(t),this.innerRadius.equals(t)?this:this.copy(this.center,t,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withOuterRadius=function(t){return t=r.Length.fromAny(t),this.outerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,t,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withStartAngle=function(t){return t=r.Angle.fromAny(t),this.startAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,t,this.sweepAngle,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withSweepAngle=function(t){return t=r.Angle.fromAny(t),this.sweepAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,t,this.padAngle,this.padRadius,this.cornerRadius)},t.prototype.withPadAngle=function(t){return t=r.Angle.fromAny(t),this.padAngle.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,t,this.padRadius,this.cornerRadius)},t.prototype.withPadRadius=function(t){return null!==t&&(t=r.Length.fromAny(t)),e.Equals(this.padRadius,t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,t,this.cornerRadius)},t.prototype.withCornerRadius=function(t){return t=r.Length.fromAny(t),this.cornerRadius.equals(t)?this:this.copy(this.center,this.innerRadius,this.outerRadius,this.startAngle,this.sweepAngle,this.padAngle,this.padRadius,t)},t.prototype.render=function(t,e){if(void 0===t){var i=new gr;return i.setPrecision(3),this.draw(i,e),i.toString()}t instanceof wr&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderArc(t,e)},t.prototype.renderArc=function(e,i){var o;void 0!==i&&(o=Math.min(i.width,i.height));var n=this.center,r=n.x,s=n.y,l=this.innerRadius.pxValue(o),a=this.outerRadius.pxValue(o),h=this.startAngle.radValue(),u=this.sweepAngle.radValue(),p=h+u,d=u>=0;if(a<l){var c=a;a=l,l=c}if(a>t.Epsilon)if(u>2*Math.PI-t.Epsilon)e.moveTo(r+a*Math.cos(h),s+a*Math.sin(h)),e.arc(r,s,a,h,p,!d),l>t.Epsilon&&(e.moveTo(r+l*Math.cos(p),s+l*Math.sin(p)),e.arc(r,s,l,p,h,d));else{var f=h,v=p,y=h,g=p,w=u,m=u,S=this.padAngle.radValue()/2,C=+(S>t.Epsilon)&&(null!==this.padRadius?this.padRadius.pxValue(o):Math.sqrt(l*l+a*a)),b=Math.min(Math.abs(a-l)/2,this.cornerRadius.pxValue(o)),V=b,T=b;if(C>t.Epsilon){var F=Math.asin(C/l*Math.sin(S)),P=Math.asin(C/a*Math.sin(S));(w-=2*F)>t.Epsilon?(y+=F*=d?1:-1,g-=F):(w=0,y=g=(h+p)/2),(m-=2*P)>t.Epsilon?(f+=P*=d?1:-1,v-=P):(m=0,f=v=(h+p)/2)}var M=void 0,D=void 0,x=a*Math.cos(f),L=a*Math.sin(f),A=l*Math.cos(g),O=l*Math.sin(g),R=void 0,I=void 0;if(b>t.Epsilon&&(R=a*Math.cos(v),I=a*Math.sin(v),M=l*Math.cos(y),D=l*Math.sin(y),u<Math.PI)){var k=w>t.Epsilon?t.intersect(x,L,M,D,R,I,A,O):[A,O],W=x-k[0],E=L-k[1],N=R-k[0],U=I-k[1],G=1/Math.sin(.5*Math.acos((W*N+E*U)/(Math.sqrt(W*W+E*E)*Math.sqrt(N*N+U*U)))),B=Math.sqrt(k[0]*k[0]+k[1]*k[1]);V=Math.min(b,(l-B)/(G-1)),T=Math.min(b,(a-B)/(G+1))}if(m>t.Epsilon)if(T>t.Epsilon){var j=t.cornerTangents(M,D,x,L,a,T,d),H=t.cornerTangents(R,I,A,O,a,T,d);e.moveTo(r+j.cx+j.x01,s+j.cy+j.y01),T<b?e.arc(r+j.cx,s+j.cy,T,Math.atan2(j.y01,j.x01),Math.atan2(H.y01,H.x01),!d):(e.arc(r+j.cx,s+j.cy,T,Math.atan2(j.y01,j.x01),Math.atan2(j.y11,j.x11),!d),e.arc(r,s,a,Math.atan2(j.cy+j.y11,j.cx+j.x11),Math.atan2(H.cy+H.y11,H.cx+H.x11),!d),e.arc(r+H.cx,s+H.cy,T,Math.atan2(H.y11,H.x11),Math.atan2(H.y01,H.x01),!d))}else e.moveTo(r+x,s+L),e.arc(r,s,a,f,v,!d);else e.moveTo(r+x,s+L);if(l>t.Epsilon&&w>t.Epsilon)if(V>t.Epsilon){j=t.cornerTangents(A,O,R,I,l,-V,d),H=t.cornerTangents(x,L,M,D,l,-V,d);e.lineTo(r+j.cx+j.x01,s+j.cy+j.y01),V<b?e.arc(r+j.cx,s+j.cy,V,Math.atan2(j.y01,j.x01),Math.atan2(H.y01,H.x01),!d):(e.arc(r+j.cx,s+j.cy,V,Math.atan2(j.y01,j.x01),Math.atan2(j.y11,j.x11),!d),e.arc(r,s,l,Math.atan2(j.cy+j.y11,j.cx+j.x11),Math.atan2(H.cy+H.y11,H.cx+H.x11),d),e.arc(r+H.cx,s+H.cy,V,Math.atan2(H.y11,H.x11),Math.atan2(H.y01,H.x01),!d))}else e.arc(r,s,l,g,y,d);else e.lineTo(r+A,s+O)}else e.moveTo(r,s);e.closePath()},t.prototype.copy=function(e,i,o,n,r,s,l,a){return new t(e,i,o,n,r,s,l,a)},t.prototype.toAny=function(){return{center:this.center,innerRadius:this.innerRadius,outerRadius:this.outerRadius,startAngle:this.startAngle,sweepAngle:this.sweepAngle,padAngle:this.padAngle,padRadius:this.padRadius,cornerRadius:this.cornerRadius}},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.center.equals(i.center)&&this.innerRadius.equals(i.innerRadius)&&this.outerRadius.equals(i.outerRadius)&&this.startAngle.equals(i.startAngle)&&this.sweepAngle.equals(i.sweepAngle)&&this.padAngle.equals(i.padAngle)&&e.Equals(this.padRadius,i.padRadius)&&this.cornerRadius.equals(i.cornerRadius))},t.prototype.debug=function(t){return t=t.write("Arc").write(46).write("create").write(40).write(41),this.center.isDefined()&&(t=t.write(46).write("center").write(40).debug(this.center).write(41)),this.innerRadius.isDefined()&&(t=t.write(46).write("innerRadius").write(40).debug(this.innerRadius).write(41)),this.outerRadius.isDefined()&&(t=t.write(46).write("outerRadius").write(40).debug(this.outerRadius).write(41)),this.startAngle.isDefined()&&(t=t.write(46).write("startAngle").write(40).debug(this.startAngle).write(41)),this.sweepAngle.isDefined()&&(t=t.write(46).write("sweepAngle").write(40).debug(this.sweepAngle).write(41)),this.padAngle.isDefined()&&(t=t.write(46).write("padAngle").write(40).debug(this.padAngle).write(41)),null!==this.padRadius&&(t=t.write(46).write("padRadius").write(40).debug(this.padRadius).write(41)),this.cornerRadius.isDefined()&&(t=t.write(46).write("cornerRadius").write(40).debug(this.cornerRadius).write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,l,a,h){return void 0===e&&(e=r.R2Point.origin()),void 0===i&&(i=r.Length.zero()),void 0===o&&(o=r.Length.zero()),void 0===n&&(n=r.Angle.zero()),void 0===s&&(s=r.Angle.zero()),void 0===l&&(l=r.Angle.zero()),void 0===a&&(a=null),void 0===h&&(h=r.Length.zero()),new t(e=r.R2Point.fromAny(e),i=r.Length.fromAny(i),o=r.Length.fromAny(o),n=r.Angle.fromAny(n),s=r.Angle.fromAny(s),l=r.Angle.fromAny(l),a=null!==a?r.Length.fromAny(a):null,h=r.Length.fromAny(h))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.create(e.center,e.innerRadius,e.outerRadius,e.startAngle,e.sweepAngle,e.padAngle,e.padRadius,e.cornerRadius);throw new TypeError(""+e)},t.intersect=function(t,e,i,o,n,r,s,l){var a=i-t,h=o-e,u=s-n,p=l-r,d=(u*(e-r)-p*(t-n))/(p*a-u*h);return[t+d*a,e+d*h]},t.cornerTangents=function(t,e,i,o,n,r,s){var l=t-i,a=e-o,h=(s?r:-r)/Math.sqrt(l*l+a*a),u=h*a,p=-h*l,d=t+u,c=e+p,f=i+u,v=o+p,y=(d+f)/2,g=(c+v)/2,w=f-d,m=v-c,S=w*w+m*m,C=n-r,b=d*v-f*c,V=(m<0?-1:1)*Math.sqrt(Math.max(0,C*C*S-b*b)),T=(b*m-w*V)/S,F=(-b*w-m*V)/S,P=(b*m+w*V)/S,M=(-b*w+m*V)/S,D=T-y,x=F-g,L=P-y,A=M-g;return D*D+x*x>L*L+A*A&&(T=P,F=M),{cx:T,cy:F,x01:-u,y01:-p,x11:T*(n/C-1),y11:F*(n/C-1)}},t.Epsilon=1e-12,t}(),Ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Lr(this.center.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Lr(this.center.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof Lr&&(t=t.toAny()),void 0!==t.center&&this.center(t.center,e),void 0!==t.innerRadius&&this.innerRadius(t.innerRadius,e),void 0!==t.outerRadius&&this.outerRadius(t.outerRadius,e),void 0!==t.startAngle&&this.startAngle(t.startAngle,e),void 0!==t.sweepAngle&&this.sweepAngle(t.sweepAngle,e),void 0!==t.padAngle&&this.padAngle(t.padAngle,e),void 0!==t.padRadius&&this.padRadius(t.padRadius,e),void 0!==t.cornerRadius&&this.cornerRadius(t.cornerRadius,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e)},e.prototype.layoutArc=function(){if(this.center.takesPrecedence(ro.Intrinsic)){var t=this.viewFrame,e=t.xMin+t.width*this.xAlign.getValue(),i=t.yMin+t.height*this.yAlign.getValue();this.center.setState(new r.R2Point(e,i),ro.Intrinsic)}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.layoutArc(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){var i=this.value;t.beginPath(),i.draw(t,e);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value;if(null!==n){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s)}t.strokeStyle=n.toString(),t.stroke()}},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),o=this.center.getValue(),n=i.transformX(o.x,o.y),s=i.transformY(o.x,o.y),l=(this.innerRadius.getValue().pxValue(e)+this.outerRadius.getValue().pxValue(e))/2,a=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,h=n+l*Math.cos(a),u=s+l*Math.sin(a);return new r.R2Box(h,u,h,u)},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e);this.layoutArc();var s=this.hitTestArc(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestArc=function(t,e,i,o){var n=this.value;if(i.beginPath(),n.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(s),i.isPointInStroke(t,e))return this}}return null},e.create=function(){return new e},e.fromArc=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Lr)return this.fromArc(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender})],e.prototype,"yAlign",void 0),m([Oo({type:r.R2Point,state:r.R2Point.origin(),updateFlags:ro.NeedsRender})],e.prototype,"center",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"innerRadius",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,state:r.Angle.zero(),updateFlags:ro.NeedsRender})],e.prototype,"startAngle",void 0),m([Oo({type:r.Angle,state:r.Angle.zero(),updateFlags:ro.NeedsRender})],e.prototype,"sweepAngle",void 0),m([Oo({type:r.Angle,state:r.Angle.zero(),updateFlags:ro.NeedsRender})],e.prototype,"padAngle",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsRender})],e.prototype,"padRadius",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsRender})],e.prototype,"cornerRadius",void 0),m([Oo({type:Tt,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"strokeWidth",void 0),e}(vr);Object.defineProperty(Ar.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.center.getValue(),o=this.outerRadius.getValue().pxValue(e);return new r.R2Box(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!0,configurable:!0});var Or={is:function(t){if("object"==typeof t&&null!==t){return t instanceof fr&&"font"in t&&"textAlign"in t&&"textBaseline"in t&&"textOrigin"in t&&"textColor"in t}return!1},initView:function(t,e){void 0!==e.font&&t.font(e.font),void 0!==e.textAlign&&t.textAlign(e.textAlign),void 0!==e.textBaseline&&t.textBaseline(e.textBaseline),void 0!==e.textOrigin&&t.textOrigin(e.textOrigin),void 0!==e.textColor&&t.textColor(e.textColor)}},Rr=function(){function t(t,e,i,o,n,r){this.text=t,this.font=e,this.textAlign=i,this.textBaseline=o,this.textOrigin=n,this.textColor=r}return t.prototype.withText=function(t){return this.text===t?this:this.copy(t,this.font,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withFont=function(t){return null!==t&&(t=St.fromAny(t)),this.font===t?this:this.copy(this.text,t,this.textAlign,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextAlign=function(t){return this.textAlign===t?this:this.copy(this.text,this.font,t,this.textBaseline,this.textOrigin,this.textColor)},t.prototype.withTextBaseline=function(t){return this.textBaseline===t?this:this.copy(this.text,this.font,this.textAlign,t,this.textOrigin,this.textColor)},t.prototype.withTextOrigin=function(t){return null!==t&&(t=r.R2Point.fromAny(t)),e.Equals(this.textOrigin,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,t,this.textColor)},t.prototype.withTextColor=function(t){return null!==t&&(t=Tt.fromAny(t)),e.Equals(this.textColor,t)?this:this.copy(this.text,this.font,this.textAlign,this.textBaseline,this.textOrigin,t)},t.prototype.render=function(t,e){t instanceof br&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderText(t,e)},t.prototype.renderText=function(t,e){t.save(),null!==this.font&&(t.font=this.font.toString()),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline);var i=this.textOrigin;null===i&&(i=r.R2Point.origin()),null!==this.textColor&&(t.fillStyle=this.textColor.toString()),t.fillText(this.text,i.x,i.y),t.restore()},t.prototype.copy=function(e,i,o,n,r,s){return new t(e,i,o,n,r,s)},t.prototype.toAny=function(){var t={text:this.text};return t.text=this.text,null!==this.font&&(t.font=this.font),null!==this.font&&(t.font=this.font),null!==this.textAlign&&(t.textAlign=this.textAlign),null!==this.textBaseline&&(t.textBaseline=this.textBaseline),null!==this.textOrigin&&(t.textOrigin=this.textOrigin),null!==this.textColor&&(t.textColor=this.textColor),t},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.text===i.text&&e.Equals(this.font,i.font)&&this.textAlign===i.textAlign&&this.textBaseline===i.textBaseline&&e.Equals(this.textOrigin,i.textOrigin)&&e.Equals(this.textColor,i.textColor))},t.prototype.debug=function(t){return t=t.write("TextRun").write(46).write("create").write(40).debug(this.text).write(41),null!==this.font&&(t=t.write(46).write("font").write(40).debug(this.font).write(41)),null!==this.textAlign&&(t=t.write(46).write("textAlign").write(40).debug(this.textAlign).write(41)),null!==this.textBaseline&&(t=t.write(46).write("textBaseline").write(40).debug(this.textBaseline).write(41)),null!==this.textOrigin&&(t=t.write(46).write("textOrigin").write(40).debug(this.textOrigin).write(41)),null!==this.textColor&&(t=t.write(46).write("textColor").write(40).debug(this.textColor).write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,l){return void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===s&&(s=null),void 0===l&&(l=null),null!==i&&(i=St.fromAny(i)),null!==s&&(s=r.R2Point.fromAny(s)),null!==l&&(l=Tt.fromAny(l)),new t(e,i,o,n,s,l)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.create(e);if("object"==typeof e&&null!==e)return t.create(e.text,e.font,e.textAlign,e.textBaseline,e.textOrigin,e.textColor);throw new TypeError(""+e)},t}(),Ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},Object.defineProperty(e.prototype,"value",{get:function(){return new Rr(this.text.getValue(),this.font.getValue(),this.textAlign.getValue(),this.textBaseline.getValue(),this.textOrigin.getValue(),this.textColor.getValue())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new Rr(this.text.getState(),this.font.getState(),this.textAlign.getState(),this.textBaseline.getState(),this.textOrigin.getState(),this.textColor.getState())},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){"string"==typeof t?this.text(t,e):(t instanceof Rr&&(t=t.toAny()),void 0!==t.text&&this.text(t.text,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textAlign&&this.textAlign(t.textAlign,e),void 0!==t.textBaseline&&this.textBaseline(t.textBaseline,e),void 0!==t.textOrigin&&this.textOrigin(t.textOrigin,e),void 0!==t.textColor&&this.textColor(t.textColor,e))},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderText(o),o.restore()}},e.prototype.renderText=function(t){var e=this.font.value;null!==e&&(t.font=e.toString());var i=this.textAlign.value;void 0!==i&&(t.textAlign=i);var o=this.textBaseline.value;void 0!==o&&(t.textBaseline=o);var n=this.textOrigin.value;null===n&&(n=r.R2Point.origin());var s=this.textColor.value;null!==s&&(t.fillStyle=s.toString()),t.fillText(this.text.getValue(),n.x,n.y)},e.create=function(){return new e},e.fromText=function(t){var i=new e;return i.text(t),i},e.fromTextRun=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Rr)return this.fromTextRun(t);if("object"==typeof t&&null!==t)return this.fromInit(t);if("string"==typeof t)return this.fromText(t);throw new TypeError(""+t)},m([Oo({type:String,state:"",updateFlags:ro.NeedsRender})],e.prototype,"text",void 0),m([Oo({type:St,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"font",void 0),m([Oo({type:String,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"textAlign",void 0),m([Oo({type:String,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"textBaseline",void 0),m([Oo({type:r.R2Point,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"textOrigin",void 0),m([Oo({type:Tt,state:null,inherit:!0,updateFlags:ro.NeedsRender})],e.prototype,"textColor",void 0),e}(vr),kr={fromAny:function(t){return null==t?t:{iconWidth:r.Length.fromAny(t.iconWidth),iconHeight:r.Length.fromAny(t.iconHeight),xAlign:t.xAlign,yAlign:t.yAlign}},is:function(t){if(null!=t){return"iconWidth"in t&&"iconHeight"in t}return!1}},Wr=function(){},Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(Wr),Nr=function(t){function i(e,i,o,n,r){var s=t.call(this)||this;return s.path=e,s.fillRule=i,s.fillColor=o,s.fillLook=n,s.moodModifier=r,s}return w(i,t),i.prototype.withFillRule=function(t){return e.Equals(this.fillRule,t)?this:this.copy(this.path,t,this.fillColor,this.fillLook,this.moodModifier)},i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.path,this.fillRule,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.path,this.fillRule,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.path,this.fillRule,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof mr?this.paint(t.context,e):t instanceof yr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill(this.fillRule)},i.prototype.draw=function(t,e){this.path.transformDraw(t,r.Transform.scale(e.width,e.height).translate(e.x,e.y))},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Ur(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.path.equivalentTo(t.path,o)&&this.fillRule===t.fillRule&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){return t=t.write("new").write(32).write("VectorIcon").write(40).debug(this.path).write(", ").debug(this.fillRule).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e,o,n){return o=r.R2Path.fromAny(o),1===t&&1===e||(o=o.transform(r.Transform.scale(1/t,1/e))),void 0===n&&(n="nonzero"),new i(o,n,null,se.iconColor,null)},i}(Er),Ur=function(t,e){var i=function(t){var e=i.path,o=i.fillRule,n=i.fillColorInterpolator(t),r=i.fillLook,s=i.moodModifier;return new Nr(e,o,n,r,s)};return Object.setPrototypeOf(i,Ur.prototype),i.path=e.path,i.fillRule=e.fillRule,i.fillColorInterpolator=l.Interpolator(t.fillColor,e.fillColor),i.fillLook=e.fillLook,i.moodModifier=e.moodModifier,i};Ur.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(Ur.prototype,0,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new Nr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,1,{get:function(){var t=this.path,e=this.fillRule,i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new Nr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Ur.prototype.equals=function(t){return this===t||t instanceof Ur&&(this.path.equals(t.path)&&this.fillRule===t.fillRule&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var Gr=function(t){function i(e,i,o){var n=t.call(this)||this;return n.fillColor=e,n.fillLook=i,n.moodModifier=o,n}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof mr?this.paint(t.context,e):t instanceof yr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=(e.xMin+e.xMax)/2,o=(e.yMin+e.yMax)/2,n=e.width,r=e.height,s=Math.min(n,r)/2;t.arc(i,o,s,0,2*Math.PI),t.closePath()},i.prototype.copy=function(t,e,o){return new i(t,e,o)},i.prototype.interpolateTo=function(t){return t instanceof i?Br(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){return t=t.write("new").write(32).write("CircleIcon").write(40).debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(){return new i(null,se.accentColor,null)},m([e.Lazy],i,"create",null),i}(Er),Br=function(t,e){var i=function(t){var e=i.fillColorInterpolator(t),o=i.fillLook,n=i.moodModifier;return new Gr(e,o,n)};return Object.setPrototypeOf(i,Br.prototype),i.fillColorInterpolator=l.Interpolator(t.fillColor,e.fillColor),i.fillLook=e.fillLook,i.moodModifier=e.moodModifier,i};Br.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(Br.prototype,0,{get:function(){var t=this.fillColorInterpolator[0],e=this.fillLook,i=this.moodModifier;return new Gr(t,e,i)},enumerable:!0,configurable:!0}),Object.defineProperty(Br.prototype,1,{get:function(){var t=this.fillColorInterpolator[1],e=this.fillLook,i=this.moodModifier;return new Gr(t,e,i)},enumerable:!0,configurable:!0}),Br.prototype.equals=function(t){return this===t||t instanceof Br&&(this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var jr=function(t){function i(e,i,o,n,r){var s=t.call(this)||this;return s.sides=e,s.rotation=i,s.fillColor=o,s.fillLook=n,s.moodModifier=r,s}return w(i,t),i.prototype.withFillColor=function(t){return e.Equals(this.fillColor,t)?this:this.copy(this.sides,this.rotation,t,this.fillLook,this.moodModifier)},i.prototype.withFillLook=function(t){return this.fillLook===t?this:this.copy(this.sides,this.rotation,this.fillColor,t,this.moodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.sides,this.rotation,this.fillColor,this.fillLook,t)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.isThemed=function(){return null!==this.fillColor},i.prototype.withTheme=function(t,e){var i=this.fillLook;if(null!==i){var o=this.moodModifier;return null!==o&&(e=o.timesCol(e,!0)),this.withFillColor(t.getOr(i,e,null))}return this},i.prototype.render=function(t,e){t instanceof mr?this.paint(t.context,e):t instanceof yr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){t.beginPath(),this.draw(t,e),null!==this.fillColor&&(t.fillStyle=this.fillColor.toString()),t.fill()},i.prototype.draw=function(t,e){var i=this.sides;if(i>=3){var o=(e.xMin+e.xMax)/2,n=(e.yMin+e.yMax)/2,r=e.width,s=e.height,l=Math.min(r,s)/2,a=2*Math.PI/i,h=this.rotation.radValue();t.moveTo(o+l*Math.cos(h),n+l*Math.sin(h)),h+=a;for(var u=1;u<i;u+=1)t.lineTo(o+l*Math.cos(h),n+l*Math.sin(h)),h+=a;t.closePath()}},i.prototype.copy=function(t,e,o,n,r){return new i(t,e,o,n,r)},i.prototype.interpolateTo=function(t){return t instanceof i?Hr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equivalentTo(t.rotation,o)&&e.Equivalent(this.fillColor,t.fillColor,o)&&this.fillLook===t.fillLook&&e.Equivalent(this.moodModifier,t.moodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(this.sides===t.sides&&this.rotation.equals(t.rotation)&&e.Equals(this.fillColor,t.fillColor)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))},i.prototype.debug=function(t){return t=t.write("new").write(32).write("PolygonIcon").write(40).debug(this.sides).write(", ").debug(this.rotation).write(", ").debug(this.fillColor).write(", ").debug(this.fillLook).write(", ").debug(this.moodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e){return new i(t,e=void 0!==e?r.Angle.fromAny(e):r.Angle.zero(),null,se.accentColor,null)},i}(Er),Hr=function(t,e){var i=function(t){var e=i.sides,o=i.rotationInterpolator(t),n=i.fillColorInterpolator(t),r=i.fillLook,s=i.moodModifier;return new jr(e,o,n,r,s)};return Object.setPrototypeOf(i,Hr.prototype),i.sides=e.sides,i.rotationInterpolator=t.rotation.interpolateTo(e.rotation),i.fillColorInterpolator=l.Interpolator(t.fillColor,e.fillColor),i.fillLook=e.fillLook,i.moodModifier=e.moodModifier,i};Hr.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(Hr.prototype,0,{get:function(){var t=this.sides,e=this.rotationInterpolator[0],i=this.fillColorInterpolator[0],o=this.fillLook,n=this.moodModifier;return new jr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(Hr.prototype,1,{get:function(){var t=this.sides,e=this.rotationInterpolator[1],i=this.fillColorInterpolator[1],o=this.fillLook,n=this.moodModifier;return new jr(t,e,i,o,n)},enumerable:!0,configurable:!0}),Hr.prototype.equals=function(t){return this===t||t instanceof Hr&&(this.sides===t.sides&&this.rotationInterpolator.equals(t.rotationInterpolator)&&this.fillColorInterpolator.equals(t.fillColorInterpolator)&&this.fillLook===t.fillLook&&e.Equals(this.moodModifier,t.moodModifier))};var qr=function(t){function i(e,i,o,n,r,s){var l=t.call(this)||this;return l.outer=e,l.inner=i,l.innerScale=o,l.moodModifier=n,l.outerMoodModifier=r,l.innerMoodModifier=s,l}return w(i,t),i.prototype.withOuter=function(t){return this.outer===t?this:this.copy(t,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInner=function(t){return this.inner===t?this:this.copy(this.outer,t,this.innerScale,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withInnerScale=function(t){return this.innerScale===t?this:this.copy(this.outer,this.inner,t,this.moodModifier,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.withMoodModifier=function(t){return e.Equals(this.moodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,t,this.outerMoodModifier,this.innerMoodModifier)},i.prototype.modifyMood=function(t,e){var i=this.moodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withMoodModifier(o)},i.prototype.withOuterMoodModifier=function(t){return e.Equals(this.outerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,t,this.innerMoodModifier)},i.prototype.modifyOuterMood=function(t,e){var i=this.outerMoodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withOuterMoodModifier(o)},i.prototype.withInnerMoodModifier=function(t){return e.Equals(this.innerMoodModifier,t)?this:this.copy(this.outer,this.inner,this.innerScale,this.moodModifier,this.outerMoodModifier,t)},i.prototype.modifyInnerMood=function(t,e){var i=this.innerMoodModifier;null===i&&(i=Ce.empty());var o=i.updatedCol(t,e,!0);return o.equals(i)?this:this.withInnerMoodModifier(o)},i.prototype.isThemed=function(){var t=this.outer,e=this.inner;return(null===t||t.isThemed())&&(null===e||e.isThemed())},i.prototype.withTheme=function(t,e){var i=this.moodModifier,o=this.outerMoodModifier,n=this.innerMoodModifier,r=e;null!==i&&(r=i.timesCol(r,!0));var s,l=this.outer;if(null!==l){var a=r;null!==o&&(a=o.timesCol(a,!0)),s=l.withTheme(t,a)}else s=null;var h,u=this.inner;if(null!==u){var p=r;null!==n&&(p=n.timesCol(p,!0)),h=u.withTheme(t,p)}else h=null;return l!==s||u!==h?this.copy(s,h,this.innerScale,i,o,n):this},i.prototype.render=function(t,e){t instanceof mr?this.paint(t.context,e):t instanceof yr&&this.draw(t.context,e)},i.prototype.paint=function(t,e){var i=this.outer;null!==i&&i.paint(t,this.outerFrame(e));var o=this.inner;null!==o&&o.paint(t,this.innerFrame(e))},i.prototype.draw=function(t,e){var i=this.outer;null!==i&&i.draw(t,this.outerFrame(e));var o=this.inner;null!==o&&o.draw(t,this.innerFrame(e))},i.prototype.outerFrame=function(t){return t},i.prototype.innerFrame=function(t){var e=t.xMin,i=t.xMax,o=t.yMin,n=t.yMax,s=i-e,l=n-o,a=this.innerScale;if(1!==a){var h=(e+i)/2,u=(o+n)/2;e=h-(s*=a)/2,o=u-(l*=a)/2,i=h+s/2,n=u+l/2}if(s>l){var p=(s-l)/2;e+=p,i-=p}else if(s<l){var d=(l-s)/2;o+=d,n-=d}return s!==l||1!==a?new r.R2Box(e,o,i,n):t},i.prototype.copy=function(t,e,o,n,r,s){return new i(t,e,o,n,r,s)},i.prototype.interpolateTo=function(t){return t instanceof i?zr(this,t):null},i.prototype.equivalentTo=function(t,o){return this===t||t instanceof i&&(e.Equivalent(this.outer,t.outer,o)&&e.Equivalent(this.inner,t.inner,o)&&e.Equivalent(this.innerScale,t.innerScale,o)&&e.Equivalent(this.moodModifier,t.moodModifier,o)&&e.Equivalent(this.outerMoodModifier,t.outerMoodModifier,o)&&e.Equivalent(this.innerMoodModifier,t.innerMoodModifier,o))},i.prototype.equals=function(t){return this===t||t instanceof i&&(e.Equals(this.outer,t.outer)&&e.Equals(this.inner,t.inner)&&e.Equals(this.innerScale,t.innerScale)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))},i.prototype.debug=function(t){return t=t.write("new").write(32).write("EnclosedIcon").write(40).debug(this.outer).write(", ").debug(this.inner).write(", ").debug(this.innerScale).write(", ").debug(this.moodModifier).write(", ").debug(this.outerMoodModifier).write(", ").debug(this.innerMoodModifier).write(41)},i.prototype.toString=function(){return s.Format.debug(this)},i.create=function(t,e){return new i(t,e,1,null,null,null)},i.embossed=function(t,e){return new i(t,e,1,null,null,i.embossedMoodModifier)},Object.defineProperty(i,"embossedMoodModifier",{get:function(){return Ce.empty().updatedCol(fe.default,[[fe.embossed,1]],!0)},enumerable:!1,configurable:!0}),m([e.Lazy],i,"embossedMoodModifier",null),i}(Wr),zr=function(t,e){var i=function(t){var e=i.outerInterpolator(t),o=i.innerInterpolator(t),n=i.innerScaleInterpolator(t),r=i.moodModifier,s=i.outerMoodModifier,l=i.innerMoodModifier;return new qr(e,o,n,r,s,l)};return Object.setPrototypeOf(i,zr.prototype),i.outerInterpolator=l.Interpolator(t.outer,e.outer),i.innerInterpolator=l.Interpolator(t.inner,e.inner),i.innerScaleInterpolator=l.Interpolator(t.innerScale,e.innerScale),i.moodModifier=e.moodModifier,i.outerMoodModifier=e.outerMoodModifier,i.innerMoodModifier=e.innerMoodModifier,i};zr.prototype=Object.create(l.Interpolator.prototype),Object.defineProperty(zr.prototype,0,{get:function(){var t=this.outerInterpolator[0],e=this.innerInterpolator[0],i=this.innerScaleInterpolator[0],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new qr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),Object.defineProperty(zr.prototype,1,{get:function(){var t=this.outerInterpolator[1],e=this.innerInterpolator[1],i=this.innerScaleInterpolator[1],o=this.moodModifier,n=this.outerMoodModifier,r=this.innerMoodModifier;return new qr(t,e,i,o,n,r)},enumerable:!0,configurable:!0}),zr.prototype.equals=function(t){return this===t||t instanceof zr&&(this.outerInterpolator.equals(t.outerInterpolator)&&this.innerInterpolator.equals(t.innerInterpolator)&&this.innerScaleInterpolator.equals(t.innerScaleInterpolator)&&e.Equals(this.moodModifier,t.moodModifier)&&e.Equals(this.outerMoodModifier,t.outerMoodModifier)&&e.Equals(this.innerMoodModifier,t.innerMoodModifier))};var Yr={is:function(t){if("object"==typeof t&&null!==t){return t instanceof Kr||t instanceof Zr||t instanceof _r||t instanceof ro&&"xAlign"in t&&"yAlign"in t&&"iconWidth"in t&&"iconHeight"in t&&"iconColor"in t&&"graphics"in t}return!1},initView:function(t,e){void 0!==e.xAlign&&t.xAlign(e.xAlign),void 0!==e.yAlign&&t.yAlign(e.yAlign),void 0!==e.iconWidth&&t.iconWidth(e.iconWidth),void 0!==e.iconHeight&&t.iconHeight(e.iconHeight),void 0!==e.iconColor&&t.iconColor(e.iconColor),void 0!==e.graphics&&t.graphics(e.graphics)}},Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if(t instanceof Wr){var e=this.owner.iconColor.state;if(null!==e&&t instanceof Er)t=t.withFillColor(e);else{var i=this.owner.theme.state,o=this.owner.mood.state;null!==i&&null!==o&&(t=t.withTheme(i,o))}}return t},e}(Oo),Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Yr.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Wr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderIcon(i,this.viewBounds),o.restore()}},e.prototype.renderIcon=function(t,e){var i=this.graphics.value;null!==i&&(t.context.beginPath(),i.render(t,e))},e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=this.hitTestIcon(t,e,o,this.viewBounds);return n.restore(),r}return null},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.create=function(){return new e},m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsRender})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsRender})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsRender,didSetValue:function(t,e){if(null!==t){var i=this.owner.graphics.value;if(i instanceof Er){var o=i.withFillColor(t);this.owner.graphics.setOwnState(o)}}}})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,type:Object,state:null,updateFlags:ro.NeedsRender})],e.prototype,"graphics",void 0),e}(vr);Object.defineProperty(Kr.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=t.width,i=t.height,o=Math.min(e,i),n=this.iconWidth.value;n=n instanceof r.Length?n.pxValue(o):o;var s=this.iconHeight.value;s=s instanceof r.Length?s.pxValue(o):o;var l=t.x+(e-n)*this.xAlign.getValue(),a=t.y+(i-s)*this.yAlign.getValue();return new r.R2Box(l,a,l+n,a+s)},enumerable:!0,configurable:!0});var Zr=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Yr.initView(this,e)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Wr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.renderIcon()},e.prototype.renderIcon=function(){var t=new Sr(this);t.setPrecision(3),t.beginSvg();var e=this.graphics.takeValue();if(null!==e){var i=this.iconBounds;if(i.isDefined()&&i.width>0&&i.height>0){t.beginPath();var o=new Cr(t,this.theme.state,this.mood.state);e.render(o,i)}}t.finalizeSvg()},Object.defineProperty(e.prototype,"iconBounds",{get:function(){var t=this.node.viewportElement;if(null===t&&(t=this.node),t instanceof SVGSVGElement){var e=t.viewBox.animVal,i=e.width,o=e.height,n=Math.min(i,o),s=this.iconWidth.value;s=s instanceof r.Length?s.pxValue(n):n;var l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(n):n;var a=e.x+(i-s)*this.xAlign.getValue(),h=e.y+(o-l)*this.yAlign.getValue();return new r.R2Box(a,h,a+s,h+l)}return r.R2Box.undefined()},enumerable:!1,configurable:!0}),e.mountFlags=ur.mountFlags|ro.NeedsAnimate,m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsLayout,didSetValue:function(t,e){if(null!==t){var i=this.owner.graphics.value;if(i instanceof Er){var o=i.withFillColor(t);this.owner.graphics.setOwnState(o)}}}})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,type:Object,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"graphics",void 0),e}(ur),_r=function(t){function e(e){var i=t.call(this,e)||this;return i.initIcon(),i}return w(e,t),e.prototype.initIcon=function(){this.position.setState("relative",ro.Intrinsic);var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),Yr.initView(this,e)},e.prototype.createSvgView=function(){return Zr.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Zr?t:null},enumerable:!1,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Zr&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Wr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(ro.NeedsLayout)},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&ro.NeedsLayout)&&(t&=~ro.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.takesPrecedence(ro.Intrinsic)||t.height.takesPrecedence(ro.Intrinsic)||t.viewBox.takesPrecedence(ro.Intrinsic))){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setState(e,ro.Intrinsic),t.height.setState(i,ro.Intrinsic),t.viewBox.setState("0 0 "+e+" "+i,ro.Intrinsic)}},m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsLayout,didSetValue:function(t,e){if(null!==t){var i=this.owner.graphics.value;if(i instanceof Er){var o=i.withFillColor(t);this.owner.graphics.setOwnState(o)}}}})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,type:Object,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"graphics",void 0),e}(ar),Qr={default:function(){return{updateTime:performance.now()}}},Jr=function(){function t(){this.controllerFlags=0,this.controllerObservers=e.Arrays.empty}return t.prototype.initController=function(t){},t.prototype.setControllerFlags=function(t){this.controllerFlags=t},t.prototype.addControllerObserver=function(t){var i=this.controllerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddControllerObserver(t),this.controllerObservers=o,this.onAddControllerObserver(t),this.didAddControllerObserver(t))},t.prototype.willAddControllerObserver=function(t){},t.prototype.onAddControllerObserver=function(t){},t.prototype.didAddControllerObserver=function(t){},t.prototype.removeControllerObserver=function(t){var i=this.controllerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveControllerObserver(t),this.controllerObservers=o,this.onRemoveControllerObserver(t),this.didRemoveControllerObserver(t))},t.prototype.willRemoveControllerObserver=function(t){},t.prototype.onRemoveControllerObserver=function(t){},t.prototype.didRemoveControllerObserver=function(t){},t.prototype.attachParentController=function(t){t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower())},t.prototype.detachParentController=function(t){if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.willSetParentController=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetParentController&&r.controllerWillSetParentController(t,e,this)}},t.prototype.onSetParentController=function(t,e){},t.prototype.didSetParentController=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetParentController&&r.controllerDidSetParentController(t,e,this)}},Object.defineProperty(t.prototype,"insertChildFlags",{get:function(){return this.constructor.insertChildFlags},enumerable:!1,configurable:!0}),t.prototype.willInsertChildController=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillInsertChildController&&r.controllerWillInsertChildController(t,e,this)}},t.prototype.onInsertChildController=function(t,e){this.requireUpdate(this.insertChildFlags)},t.prototype.didInsertChildController=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidInsertChildController&&r.controllerDidInsertChildController(t,e,this)}},Object.defineProperty(t.prototype,"removeChildFlags",{get:function(){return this.constructor.removeChildFlags},enumerable:!1,configurable:!0}),t.prototype.willRemoveChildController=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillRemoveChildController&&n.controllerWillRemoveChildController(t,this)}this.requireUpdate(this.removeChildFlags)},t.prototype.onRemoveChildController=function(t){},t.prototype.didRemoveChildController=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidRemoveChildController&&n.controllerDidRemoveChildController(t,this)}},t.prototype.getSuperController=function(t){var e=this.parentController;return null===e?null:e instanceof t?e:e.getSuperController(t)},t.prototype.getBaseController=function(t){var e=this.parentController;if(null===e)return null;var i=e.getBaseController(t);return null!==i?i:e instanceof t?e:null},t.prototype.isMounted=function(){return 0!=(this.controllerFlags&t.MountedFlag)},Object.defineProperty(t.prototype,"mountFlags",{get:function(){return this.constructor.mountFlags},enumerable:!1,configurable:!0}),t.prototype.mount=function(){this.isMounted()||null!==this.parentController||(this.cascadeMount(),this.isPowered()||"visible"!==document.visibilityState||this.cascadePower(),this.cascadeInsert())},t.prototype.willMount=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerWillMount&&o.controllerWillMount(this)}},t.prototype.onMount=function(){this.requestUpdate(this,this.controllerFlags&t.UpdateMask,!1),this.requireUpdate(this.mountFlags)},t.prototype.didMount=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerDidMount&&o.controllerDidMount(this)}},t.prototype.willUnmount=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerWillUnmount&&o.controllerWillUnmount(this)}},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerDidUnmount&&o.controllerDidUnmount(this)}},t.prototype.isPowered=function(){return 0!=(this.controllerFlags&t.PoweredFlag)},Object.defineProperty(t.prototype,"powerFlags",{get:function(){return this.constructor.powerFlags},enumerable:!1,configurable:!0}),t.prototype.willPower=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerWillPower&&o.controllerWillPower(this)}},t.prototype.onPower=function(){this.requestUpdate(this,this.controllerFlags&t.UpdateMask,!1),this.requireUpdate(this.powerFlags)},t.prototype.didPower=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerDidPower&&o.controllerDidPower(this)}},t.prototype.willUnpower=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerWillUnpower&&o.controllerWillUnpower(this)}},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){for(var t=this.controllerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerDidUnpower&&o.controllerDidUnpower(this)}},t.prototype.requireUpdate=function(e,i){void 0===i&&(i=!1);var o=this.controllerFlags,n=e&~o&t.UpdateMask;0!==n&&(this.setControllerFlags(o|n),this.requestUpdate(this,n,i))},t.prototype.needsUpdate=function(t,e){return t},t.prototype.requestUpdate=function(e,i,o){i=this.needsUpdate(i,o);var n=this.controllerFlags&~i&t.UpdateMask;if(0!=(i&t.CompileMask)&&(n|=t.NeedsCompile),0!=(i&t.ExecuteMask)&&(n|=t.NeedsExecute),0!==n||o){this.setControllerFlags(this.controllerFlags|n);var r=this.parentController;if(null!==r)r.requestUpdate(e,i,o);else if(this.isMounted()){var s=this.executeService.manager;null!=s&&s.requestUpdate(e,i,o)}}},t.prototype.isTraversing=function(){return 0!=(this.controllerFlags&t.TraversingFlag)},t.prototype.isUpdating=function(){return 0!=(this.controllerFlags&t.UpdatingMask)},t.prototype.isCompiling=function(){return 0!=(this.controllerFlags&t.CompilingFlag)},t.prototype.needsCompile=function(t,e){return t},t.prototype.willCompile=function(t,e){},t.prototype.onCompile=function(t,e){},t.prototype.didCompile=function(t,e){},t.prototype.willResolve=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillResolve&&n.controllerWillResolve(t,this)}},t.prototype.onResolve=function(t){},t.prototype.didResolve=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidResolve&&n.controllerDidResolve(t,this)}},t.prototype.willGenerate=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillGenerate&&n.controllerWillGenerate(t,this)}},t.prototype.onGenerate=function(t){},t.prototype.didGenerate=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidGenerate&&n.controllerDidGenerate(t,this)}},t.prototype.willAssemble=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillAssemble&&n.controllerWillAssemble(t,this)}},t.prototype.onAssemble=function(t){},t.prototype.didAssemble=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidAssemble&&n.controllerDidAssemble(t,this)}},t.prototype.compileChildControllers=function(e,i,o){this.forEachChildController((function(n){o.call(this,n,e,i),0!=(n.controllerFlags&t.RemovingFlag)&&(n.setControllerFlags(n.controllerFlags&~t.RemovingFlag),this.removeChildController(n))}),this)},t.prototype.compileChildController=function(t,e,i){t.cascadeCompile(e,i)},t.prototype.isExecuting=function(){return 0!=(this.controllerFlags&t.ExecutingFlag)},t.prototype.needsExecute=function(t,e){return t},t.prototype.willExecute=function(t,e){},t.prototype.onExecute=function(t,e){},t.prototype.didExecute=function(t,e){},t.prototype.willRevise=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillRevise&&n.controllerWillRevise(t,this)}},t.prototype.onRevise=function(t){},t.prototype.didRevise=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidRevise&&n.controllerDidRevise(t,this)}},t.prototype.willCompute=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillCompute&&n.controllerWillCompute(t,this)}},t.prototype.onCompute=function(t){},t.prototype.didCompute=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidCompute&&n.controllerDidCompute(t,this)}},t.prototype.executeChildControllers=function(e,i,o){this.forEachChildController((function(n){o.call(this,n,e,i),0!=(n.controllerFlags&t.RemovingFlag)&&(n.setControllerFlags(n.controllerFlags&~t.RemovingFlag),this.removeChildController(n))}),this)},t.prototype.executeChildController=function(t,e,i){t.cascadeExecute(e,i)},t.prototype.getLazyControllerService=function(e){var i=this.getControllerService(e);if(null===i){var o=t.getControllerServiceConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setControllerService(e,i))}return i},t.prototype.getLazyControllerProperty=function(e){var i=this.getControllerProperty(e);if(null===i){var o=t.getControllerPropertyConstructor(e,Object.getPrototypeOf(this));null!==o&&(i=new o(this,e),this.setControllerProperty(e,i))}return i},t.prototype.getLazyControllerModel=function(e){var i=this.getControllerModel(e);if(null===i){var o=t.getControllerModelConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setControllerModel(e,i)}return i},t.prototype.getLazyControllerTrait=function(e){var i=this.getControllerTrait(e);if(null===i){var o=t.getControllerTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setControllerTrait(e,i)}return i},t.prototype.getLazyControllerView=function(e){var i=this.getControllerView(e);if(null===i){var o=t.getControllerViewConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setControllerView(e,i)}return i},t.prototype.getLazyControllerViewTrait=function(e){var i=this.getControllerViewTrait(e);if(null===i){var o=t.getControllerViewTraitConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.viewKey?e:!1===o.prototype.viewKey?void 0:o.prototype.viewKey,!0===o.prototype.traitKey?e:!1===o.prototype.traitKey?void 0:o.prototype.traitKey,e),this.setControllerViewTrait(e,i)}return i},t.prototype.getLazyControllerFastener=function(e){var i=this.getControllerFastener(e);if(null===i){var o=t.getControllerFastenerConstructor(e,Object.getPrototypeOf(this));if(null!==o)i=new o(this,!0===o.prototype.key?e:!1===o.prototype.key?void 0:o.prototype.key,e),this.setControllerFastener(e,i)}return i},t.prototype.getLazyGesture=function(t){var e=this.getGesture(t);if(null===e){var i=no.getGestureConstructor(t,Object.getPrototypeOf(this));null!==i&&(e=new i(this,t),this.setGesture(t,e))}return e},t.prototype.extendControllerContext=function(t){return t},Object.defineProperty(t.prototype,"superControllerContext",{get:function(){var t=this.parentController;return null!==t?t.controllerContext:this.executeService.updatedControllerContext()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerContext",{get:function(){return this.extendControllerContext(this.superControllerContext)},enumerable:!1,configurable:!0}),t.getControllerServiceConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerServiceConstructors")){var i=e.controllerServiceConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerService=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"controllerServiceConstructors")||(o.controllerServiceConstructors={}),o.controllerServiceConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerService(i.toString());return null===e&&(e=new t(this,i.toString()),this.setControllerService(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getControllerPropertyConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerPropertyConstructors")){var i=e.controllerPropertyConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerProperty=function(t,e,i){var o=e;Object.prototype.hasOwnProperty.call(o,"controllerPropertyConstructors")||(o.controllerPropertyConstructors={}),o.controllerPropertyConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerProperty(i.toString());return null===e&&(e=new t(this,i.toString()),this.setControllerProperty(i.toString(),e)),e},configurable:!0,enumerable:!0})},t.getControllerModelConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerModelConstructors")){var i=e.controllerModelConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerModel=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"controllerModelConstructors")||(r.controllerModelConstructors={}),r.controllerModelConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerModel(o);return null===e&&(e=new t(this,n,o),this.setControllerModel(o,e)),e},configurable:!0,enumerable:!0})},t.getControllerTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerTraitConstructors")){var i=e.controllerTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"controllerTraitConstructors")||(r.controllerTraitConstructors={}),r.controllerTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerTrait(o);return null===e&&(e=new t(this,n,o),this.setControllerTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getControllerViewConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerViewConstructors")){var i=e.controllerViewConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerView=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"controllerViewConstructors")||(r.controllerViewConstructors={}),r.controllerViewConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerView(o);return null===e&&(e=new t(this,n,o),this.setControllerView(o,e)),e},configurable:!0,enumerable:!0})},t.getControllerViewTraitConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerViewTraitConstructors")){var i=e.controllerViewTraitConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerViewTrait=function(t,e,i){var o=i.toString(),n=!0===t.prototype.viewKey?o:!1===t.prototype.viewKey?void 0:t.prototype.viewKey,r=!0===t.prototype.traitKey?o:!1===t.prototype.traitKey?void 0:t.prototype.traitKey,s=e;Object.prototype.hasOwnProperty.call(s,"controllerViewTraitConstructors")||(s.controllerViewTraitConstructors={}),s.controllerViewTraitConstructors[o]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerViewTrait(o);return null===e&&(e=new t(this,n,r,o),this.setControllerViewTrait(o,e)),e},configurable:!0,enumerable:!0})},t.getControllerFastenerConstructor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(Object.prototype.hasOwnProperty.call(e,"controllerFastenerConstructors")){var i=e.controllerFastenerConstructors[t];if(void 0!==i)return i}e=Object.getPrototypeOf(e)}while(null!==e);return null},t.decorateControllerFastener=function(t,e,i){var o=i.toString(),n=!0===t.prototype.key?o:!1===t.prototype.key?void 0:t.prototype.key,r=e;Object.prototype.hasOwnProperty.call(r,"controllerFastenerConstructors")||(r.controllerFastenerConstructors={}),r.controllerFastenerConstructors[i.toString()]=t,Object.defineProperty(e,i,{get:function(){var e=this.getControllerFastener(o);return null===e&&(e=new t(this,n,o),this.setControllerFastener(o,e)),e},configurable:!0,enumerable:!0})},t.MountedFlag=1,t.PoweredFlag=2,t.TraversingFlag=4,t.CompilingFlag=8,t.ExecutingFlag=16,t.RemovingFlag=32,t.ImmediateFlag=64,t.UpdatingMask=t.CompilingFlag|t.ExecutingFlag,t.StatusMask=t.MountedFlag|t.PoweredFlag|t.TraversingFlag|t.CompilingFlag|t.ExecutingFlag|t.RemovingFlag|t.ImmediateFlag,t.NeedsCompile=128,t.NeedsResolve=256,t.NeedsGenerate=512,t.NeedsAssemble=1024,t.CompileMask=t.NeedsCompile|t.NeedsResolve|t.NeedsGenerate|t.NeedsAssemble,t.NeedsExecute=2048,t.NeedsRevise=4096,t.NeedsCompute=8192,t.ExecuteMask=t.NeedsExecute|t.NeedsRevise|t.NeedsCompute,t.UpdateMask=t.CompileMask|t.ExecuteMask,t.ControllerFlagShift=24,t.ControllerFlagMask=(1<<t.ControllerFlagShift)-1,t.mountFlags=0,t.powerFlags=0,t.insertChildFlags=0,t.removeChildFlags=0,t.Intrinsic=0,t.Extrinsic=1,t}(),$r=function(){function t(){this.rootControllers=e.Arrays.empty,this.controllerManagerObservers=e.Arrays.empty}return t.prototype.addControllerManagerObserver=function(t){var i=this.controllerManagerObservers,o=e.Arrays.inserted(t,i);i!==o&&(this.willAddControllerManagerObserver(t),this.controllerManagerObservers=o,this.onAddControllerManagerObserver(t),this.didAddControllerManagerObserver(t))},t.prototype.willAddControllerManagerObserver=function(t){},t.prototype.onAddControllerManagerObserver=function(t){},t.prototype.didAddControllerManagerObserver=function(t){},t.prototype.removeControllerManagerObserver=function(t){var i=this.controllerManagerObservers,o=e.Arrays.removed(t,i);i!==o&&(this.willRemoveControllerManagerObserver(t),this.controllerManagerObservers=o,this.onRemoveControllerManagerObserver(t),this.didRemoveControllerManagerObserver(t))},t.prototype.willRemoveControllerManagerObserver=function(t){},t.prototype.onRemoveControllerManagerObserver=function(t){},t.prototype.didRemoveControllerManagerObserver=function(t){},t.prototype.willObserve=function(t){for(var e,i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.didObserve=function(t){for(var e,i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},t.prototype.isAttached=function(){return 0!==this.rootControllers.length},t.prototype.willAttach=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerManagerWillAttach&&o.controllerManagerWillAttach(this)}},t.prototype.onAttach=function(){},t.prototype.didAttach=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerManagerDidAttach&&o.controllerManagerDidAttach(this)}},t.prototype.willDetach=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerManagerWillDetach&&o.controllerManagerWillDetach(this)}},t.prototype.onDetach=function(){},t.prototype.didDetach=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.controllerManagerDidDetach&&o.controllerManagerDidDetach(this)}},t.prototype.insertRootController=function(t){var i=this.rootControllers,o=e.Arrays.inserted(t,i);if(i!==o){var n=0===i.length;n&&this.willAttach(),this.willInsertRootController(t),this.rootControllers=o,n&&this.onAttach(),this.onInsertRootController(t),this.didInsertRootController(t),n&&this.didAttach()}},t.prototype.willInsertRootController=function(t){for(var e=this.controllerManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerManagerWillInsertRootController&&n.controllerManagerWillInsertRootController(t,this)}},t.prototype.onInsertRootController=function(t){},t.prototype.didInsertRootController=function(t){for(var e=this.controllerManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerManagerDidInsertRootController&&n.controllerManagerDidInsertRootController(t,this)}},t.prototype.removeRootController=function(t){var i=this.rootControllers,o=e.Arrays.removed(t,i);if(i!==o){var n=1===i.length;n&&this.willDetach(),this.willRemoveRootController(t),this.rootControllers=o,n&&this.onDetach(),this.onRemoveRootController(t),this.didRemoveRootController(t),n&&this.didDetach()}},t.prototype.willRemoveRootController=function(t){for(var e=this.controllerManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerManagerWillRemoveRootController&&n.controllerManagerWillRemoveRootController(t,this)}},t.prototype.onRemoveRootController=function(t){},t.prototype.didRemoveRootController=function(t){this.didObserve((function(e){void 0!==e.controllerManagerDidRemoveRootController&&e.controllerManagerDidRemoveRootController(t,this)}));for(var e=this.controllerManagerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerManagerDidRemoveRootController&&n.controllerManagerDidRemoveRootController(t,this)}},t}(),ts=function(t){function i(){var e=t.call(this)||this;return e.controllerContext=e.initControllerContext(),e.rootFlags=0,e.compileTimer=0,e.executeTimer=0,e.updateDelay=i.MinUpdateDelay,e.runCompilePass=e.runCompilePass.bind(e),e.runExecutePass=e.runExecutePass.bind(e),e.onVisibilityChange=e.onVisibilityChange.bind(e),e}return w(i,t),i.prototype.initControllerContext=function(){return{updateTime:0}},i.prototype.updatedControllerContext=function(){var t=this.controllerContext;return t.updateTime=performance.now(),t},Object.defineProperty(i.prototype,"powerFlags",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.onPower=function(){this.powerRootControllers()},i.prototype.powerRootControllers=function(){for(var t=this.rootControllers,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()||this.powerRootController(o)}},i.prototype.powerRootController=function(t){t.cascadePower(),t.requireUpdate(this.powerFlags)},i.prototype.onUnpower=function(){this.cancelUpdate(),this.updateDelay=i.MinUpdateDelay,this.unpowerRootControllers()},i.prototype.unpowerRootControllers=function(){for(var t=this.rootControllers,e=0,i=t.length;e<i;e+=1){var o=t[e];o.isPowered()&&this.unpowerRootController(o)}},i.prototype.unpowerRootController=function(t){t.cascadeUnpower()},i.prototype.setRootFlags=function(t){this.rootFlags=t},i.prototype.needsUpdate=function(t,e){return t},i.prototype.requestUpdate=function(t,e,o){e=this.needsUpdate(e,o);var n=this.rootFlags&~e&Jr.UpdateMask;0!=(e&Jr.CompileMask)&&(n|=Jr.NeedsCompile),0!=(e&Jr.ExecuteMask)&&(n|=Jr.NeedsExecute),(0!==n||o)&&(this.setRootFlags(this.rootFlags|n),o&&this.updateDelay<=i.MaxCompileInterval&&0==(this.rootFlags&(Jr.TraversingFlag|Jr.ImmediateFlag))?this.runImmediatePass():this.scheduleUpdate())},i.prototype.scheduleUpdate=function(){var t=this.rootFlags;0===this.compileTimer&&0===this.executeTimer&&0==(t&Jr.UpdatingMask)&&0!=(t&Jr.UpdateMask)&&(this.compileTimer=setTimeout(this.runCompilePass,this.updateDelay))},i.prototype.cancelUpdate=function(){0!==this.compileTimer&&(clearTimeout(this.compileTimer),this.compileTimer=0),0!==this.executeTimer&&(clearTimeout(this.executeTimer),this.executeTimer=0)},i.prototype.runImmediatePass=function(){this.setRootFlags(this.rootFlags|Jr.ImmediateFlag);try{0!=(this.rootFlags&Jr.CompileMask)&&(this.cancelUpdate(),this.runCompilePass(!0)),0!=(this.rootFlags&Jr.ExecuteMask)&&this.updateDelay<=i.MaxCompileInterval&&(this.cancelUpdate(),this.runExecutePass(!0))}finally{this.setRootFlags(this.rootFlags&~Jr.ImmediateFlag)}},i.prototype.runCompilePass=function(t){void 0===t&&(t=!1);var e=this.rootControllers;this.setRootFlags(this.rootFlags&~Jr.CompileMask|Jr.TraversingFlag|Jr.CompilingFlag);try{var o=performance.now(),n=this.controllerContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.controllerFlags&Jr.CompileMask)&&s.cascadeCompile(0,n)}var l=performance.now(),a=Math.max(i.MinCompileInterval,this.updateDelay);this.updateDelay=l-o>a?Math.min(Math.max(2,2*this.updateDelay),i.MaxUpdateDelay):Math.min(i.MinUpdateDelay,this.updateDelay/2),this.cancelUpdate(),0!=(this.rootFlags&Jr.ExecuteMask)?this.executeTimer=setTimeout(this.runExecutePass,i.MinExecuteInterval):0!=(this.rootFlags&Jr.CompileMask)&&(t&&(a=Math.max(i.MaxCompileInterval,a)),this.compileTimer=setTimeout(this.runCompilePass,a))}finally{this.setRootFlags(this.rootFlags&~(Jr.TraversingFlag|Jr.CompilingFlag))}},i.prototype.runExecutePass=function(t){void 0===t&&(t=!1);var e=this.rootControllers;this.setRootFlags(this.rootFlags&~Jr.ExecuteMask|Jr.TraversingFlag|Jr.ExecutingFlag);try{var o=performance.now(),n=this.controllerContext;n.updateTime=o;for(var r=0;r<e.length;r+=1){var s=e[r];0!=(s.controllerFlags&Jr.ExecuteMask)&&s.cascadeExecute(0,n)}if(this.cancelUpdate(),0!=(this.rootFlags&Jr.CompileMask)){var l=this.updateDelay;t&&(l=Math.max(i.MaxCompileInterval,l)),this.compileTimer=setTimeout(this.runCompilePass,l)}else 0!=(this.rootFlags&Jr.ExecuteMask)&&(this.executeTimer=setTimeout(this.runExecutePass,i.MaxExecuteInterval))}finally{this.setRootFlags(this.rootFlags&~(Jr.TraversingFlag|Jr.ExecutingFlag))}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.detachEvents=function(){"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.onInsertRootController=function(e){t.prototype.onInsertRootController.call(this,e),this.requestUpdate(e,e.controllerFlags&Jr.UpdateMask,!1)},i.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onPower():this.onUnpower()},i.global=function(){return new i},i.MinUpdateDelay=0,i.MaxUpdateDelay=167,i.MinCompileInterval=12,i.MaxCompileInterval=33,i.MinExecuteInterval=4,i.MaxExecuteInterval=16,m([e.Lazy],i,"global",null),i}($r),es={empty:function(){return{fragment:void 0,permanent:{},ephemeral:{}}},current:function(){try{return es.fromUri(window.location.href)}catch(t){return console.error(t),{fragment:void 0,permanent:{},ephemeral:{}}}},updated:function(t,e){for(var i in void 0===e&&(e=es.current()),"fragment"in t&&(e.fragment=t.fragment),t.permanent){void 0!==(o=t.permanent[i])?e.permanent[i]=o:delete e.permanent[i]}for(var i in t.ephemeral){var o;void 0!==(o=t.ephemeral[i])?e.ephemeral[i]=o:delete e.ephemeral[i]}return e},cloned:function(t){var e={fragment:t.fragment,permanent:{},ephemeral:{}};for(var i in t.permanent)e.permanent[i]=t.permanent[i];for(var i in t.ephemeral)e.ephemeral[i]=t.ephemeral[i];return e},fromUri:function(t){var e=(t=n.Uri.fromAny(t)).fragment;return e.isDefined()?es.fromUriFragment(e):es.empty()},fromUriFragment:function(t){for(var e=void 0!==(t=n.UriFragment.fromAny(t)).identifier?n.UriQuery.parse(t.identifier):n.UriQuery.undefined(),i={fragment:void 0,permanent:{},ephemeral:{}};!e.isEmpty();){var o=e.key,r=e.value;void 0!==o?i.permanent[o]=r:i.fragment=r,e=e.tail()}return i},toUri:function(t){var e=n.UriQuery.builder();for(var i in void 0!==t.fragment&&e.add(void 0,t.fragment),t.permanent){var o=t.permanent[i];e.add(i,o)}return n.Uri.fragment(n.UriFragment.create(e.bind().toString()))}},is=function(t){function i(){var e=t.call(this)||this;return e.historyState=es.current(),e.popHistory=e.popHistory.bind(e),e}return w(i,t),Object.defineProperty(i.prototype,"historyUri",{get:function(){return es.toUri(this.historyState)},enumerable:!1,configurable:!0}),i.prototype.pushHistory=function(t){var e=this.historyState,i=es.updated(t,es.cloned(e)),o=es.toUri(i);this.willPushHistory(i,e),this.historyState=i,window.history.pushState(i.ephemeral,"",o.toString()),this.onPushHistory(i,e),this.didPushHistory(i,e)},i.prototype.willPushHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPushHistory&&r.historyManagerWillPushHistory(t,e,this)}},i.prototype.onPushHistory=function(t,e){for(var i=this.rootControllers,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(Jr.NeedsRevise)},i.prototype.didPushHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPushHistory&&r.historyManagerDidPushHistory(t,e,this)}},i.prototype.replaceHistory=function(t){var i=this.historyState,o=es.updated(t,es.cloned(i));if(!e.Objects.equal(i,o)){var n=es.toUri(o);this.willReplaceHistory(o,i),this.historyState=o,window.history.replaceState(o.ephemeral,"",n.toString()),this.onReplaceHistory(o,i),this.didReplaceHistory(o,i)}},i.prototype.willReplaceHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillReplaceHistory&&r.historyManagerWillReplaceHistory(t,e,this)}},i.prototype.onReplaceHistory=function(t,e){for(var i=this.rootControllers,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(Jr.NeedsRevise)},i.prototype.didReplaceHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidReplaceHistory&&r.historyManagerDidReplaceHistory(t,e,this)}},i.prototype.popHistory=function(t){var e={};"object"==typeof t.state&&null!==t.state&&(e.ephemeral=t.state);var i=es.current(),o=es.updated(e,i);this.willPopHistory(o,i),this.historyState=o,this.onPopHistory(o,i),this.didPopHistory(o,i)},i.prototype.willPopHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerWillPopHistory&&r.historyManagerWillPopHistory(t,e,this)}},i.prototype.onPopHistory=function(t,e){for(var i=this.rootControllers,o=0,n=i.length;o<n;o+=1)i[o].requireUpdate(Jr.NeedsRevise)},i.prototype.didPopHistory=function(t,e){for(var i=this.controllerManagerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.historyManagerDidPopHistory&&r.historyManagerDidPopHistory(t,e,this)}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("popstate",this.popHistory)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("popstate",this.popHistory)},i.global=function(){return new i},m([e.Lazy],i,"global",null),i}($r),os=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.willSet=function(t,e,i){for(var o=this.controllerManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.storageManagerWillSet&&s.storageManagerWillSet(t,e,i,this)}},i.prototype.onSet=function(t,e,i){for(var o=this.rootControllers,n=0,r=o.length;n<r;n+=1)o[n].requireUpdate(Jr.NeedsRevise)},i.prototype.didSet=function(t,e,i){for(var o=this.controllerManagerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.storageManagerDidSet&&s.storageManagerDidSet(t,e,i,this)}},i.prototype.willClear=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerWillClear&&o.storageManagerWillClear(this)}},i.prototype.onClear=function(){for(var t=this.rootControllers,e=0,i=t.length;e<i;e+=1)t[e].requireUpdate(Jr.NeedsRevise)},i.prototype.didClear=function(){for(var t=this.controllerManagerObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.storageManagerDidClear&&o.storageManagerDidClear(this)}},i.global=function(){var t=ns.local();return null===t&&(t=new rs),t},m([e.Lazy],i,"global",null),i}($r),ns=function(t){function i(e){var i=t.call(this)||this;return i.storage=e,i.onStorage=i.onStorage.bind(i),i}return w(i,t),i.prototype.get=function(t){var e=this.storage.getItem(t);return null!==e?e:void 0},i.prototype.set=function(t,e){var i=this.storage.getItem(t);return null===i&&(i=void 0),e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage.setItem(t,e):this.storage.removeItem(t),this.onSet(t,e,i),this.didSet(t,e,i)),i},i.prototype.clear=function(){this.willClear(),this.storage.clear(),this.onClear(),this.didClear()},i.prototype.onStorage=function(t){if(t.storageArea===this.storage){var e=t.key;if(null!==e){var i=t.newValue;null===i&&(i=void 0);var o=t.oldValue;null===o&&(o=void 0),i!==o&&(this.willSet(e,i,o),this.onSet(e,i,o),this.didSet(e,i,o))}else this.willClear(),this.onClear(),this.didClear()}},i.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.attachEvents()},i.prototype.onDetach=function(){this.detachEvents(),t.prototype.onDetach.call(this)},i.prototype.attachEvents=function(){"undefined"!=typeof window&&window.addEventListener("storage",this.onStorage)},i.prototype.detachEvents=function(){"undefined"!=typeof window&&window.removeEventListener("storage",this.onStorage)},i.local=function(){try{return new i(window.localStorage)}catch(t){return null}},i.session=function(){try{return new i(window.sessionStorage)}catch(t){return null}},m([e.Lazy],i,"local",null),m([e.Lazy],i,"session",null),i}(os),rs=function(t){function e(e){var i=t.call(this)||this;return void 0===e&&(e={}),i.storage=e,i}return w(e,t),e.prototype.get=function(t){return this.storage[t]},e.prototype.set=function(t,e){var i=this.storage[t];return e!==i&&(this.willSet(t,e,i),void 0!==e?this.storage[t]=e:delete this.storage[t],this.onSet(t,e,i),this.didSet(t,e,i)),i},e.prototype.clear=function(){this.willClear(),this.storage={},this.onClear(),this.didClear()},e}(os),ss=function(t,e){return this instanceof ss?ls.call(this,t,e):(i=t,Jr.decorateControllerService.bind(Jr,ss.define(i)));var i};function ls(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!0,this.serviceFlags=0,this.superService=null,this.manager=void 0,this}w(ss,Object),ss.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperService(),this.inherit=t,this.bindSuperService())},ss.prototype.isInherited=function(){return 0!=(this.serviceFlags&ss.InheritedFlag)},ss.prototype.setServiceFlags=function(t){this.serviceFlags=t},Object.defineProperty(ss.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),ss.prototype.bindSuperService=function(){var t=this.superName,e=this.owner,i=null;if(void 0!==t&&e.isMounted()){for(;;){var o=e.parentController;if(null!==o){if(null===(n=(e=o).getControllerService(t)))continue;if(i=n,n.isInherited())continue}else if(e!==this.owner){var n;null!==(n=e.getLazyControllerService(t))&&(i=n)}break}this.superService=i}void 0!==this.manager&&null!==this.manager||(null!==i?(this.setServiceFlags(this.serviceFlags|ss.InheritedFlag),this.manager=i.manager):(this.setServiceFlags(this.serviceFlags&~ss.InheritedFlag),this.manager=this.initManager()))},ss.prototype.unbindSuperService=function(){this.superService=null,this.setServiceFlags(this.serviceFlags&~ss.InheritedFlag)},Object.defineProperty(ss.prototype,"superManager",{get:function(){var t=this.superService;return null!==t?t.manager:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(ss.prototype,"ownManager",{get:function(){return this.isInherited()?void 0:this.manager},enumerable:!0,configurable:!0}),ss.prototype.getManager=function(){var t=this.manager;if(null==t)throw new TypeError(t+" "+this.name+" manager");return t},ss.prototype.getManagerOr=function(t){var e=this.manager;return null==e&&(e=t),e},ss.prototype.initManager=function(){return this.manager},ss.prototype.mount=function(){this.bindSuperService()},ss.prototype.unmount=function(){this.unbindSuperService()},ss.prototype.isMounted=function(){return 0!=(this.serviceFlags&ss.MountedFlag)},ss.prototype.mount=function(){0==(this.serviceFlags&ss.MountedFlag)&&(this.willMount(),this.setServiceFlags(this.serviceFlags|ss.MountedFlag),this.onMount(),this.didMount())},ss.prototype.willMount=function(){},ss.prototype.onMount=function(){this.bindSuperService()},ss.prototype.didMount=function(){},ss.prototype.unmount=function(){0!=(this.serviceFlags&ss.MountedFlag)&&(this.willUnmount(),this.setServiceFlags(this.serviceFlags&~ss.MountedFlag),this.onUnmount(),this.didUnmount())},ss.prototype.willUnmount=function(){},ss.prototype.onUnmount=function(){this.unbindSuperService()},ss.prototype.didUnmount=function(){},ss.prototype.toString=function(){return this.name},ss.getClass=function(t){return t===ts?hs:t===is?us:t===os?ps:t===$r?as:null},ss.define=function(t){var e=t.extends,i=t.inherit,o=t.manager;delete t.extends,delete t.inherit,delete t.manager,void 0===e&&(e=ss.getClass(t.type)),null===e&&(e=ss);var n=function(t,n){var r=function(){return r.manager};return Object.setPrototypeOf(r,this),r=e.call(r,t,n)||r,void 0!==o&&(r.manager=o),void 0!==i&&(r.inherit=i),r},r=t;return Object.setPrototypeOf(n,e),(n.prototype=r).constructor=n,Object.setPrototypeOf(n.prototype,e.prototype),n},ss.MountedFlag=1,ss.InheritedFlag=2;var as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.didMount=function(){var e=this.manager;null!=e&&(this.isInherited()||e.insertRootController(this.owner),!1!==this.observe&&e.addControllerManagerObserver(this)),t.prototype.didMount.call(this)},e.prototype.willUnmount=function(){t.prototype.willUnmount.call(this);var e=this.manager;null!=e&&(!1!==this.observe&&e.removeControllerManagerObserver(this),this.isInherited()||e.removeRootController(this.owner))},e}(ss),hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"controllerContext",{get:function(){var t=this.manager;return null==t&&(t=ts.global()),t.controllerContext},enumerable:!1,configurable:!0}),e.prototype.updatedControllerContext=function(){var t=this.manager;return null==t&&(t=ts.global()),t.updatedControllerContext()},e.prototype.requestUpdate=function(t,e,i){var o=this.manager;null==o&&(o=ts.global()),o.requestUpdate(t,e,i)},e.prototype.initManager=function(){return ts.global()},e}(as);ss({extends:hs,type:ts,observe:!1,manager:ts.global()})(Jr.prototype,"executeService");var us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"historyState",{get:function(){var t=this.manager;return null==t&&(t=is.global()),t.historyState},enumerable:!1,configurable:!0}),e.prototype.pushHistory=function(t){var e=this.manager;null==e&&(e=is.global()),e.pushHistory(t)},e.prototype.replaceHistory=function(t){var e=this.manager;null==e&&(e=is.global()),e.replaceHistory(t)},e.prototype.initManager=function(){return is.global()},e}(as);ss({extends:us,type:is,observe:!1,manager:is.global()})(Jr.prototype,"historyService");var ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.get=function(t){var e=this.manager;return null==e&&(e=os.global()),e.get(t)},e.prototype.set=function(t,e){var i=this.manager;return null==i&&(i=os.global()),i.set(t,e)},e.prototype.clear=function(){var t=this.manager;null==t&&(t=os.global()),t.clear()},e.prototype.initManager=function(){return os.global()},e}(as);ss({extends:ps,type:os,observe:!1,manager:os.global()})(Jr.prototype,"storageService");var ds=function(t,e){return this instanceof ds?cs.call(this,t,e):(i=t,Jr.decorateControllerProperty.bind(Jr,ds.define(i)));var i};function cs(t,e){return void 0!==e&&Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this.owner=t,this.inherit=!1,this.superProperty=null,this.subProperties=null,this.precedence=Jr.Intrinsic,this.propertyFlags=ds.UpdatedFlag,this.ownState=void 0,this}w(ds,Object),ds.prototype.setInherit=function(t){this.inherit!==t&&(this.unbindSuperProperty(),this.inherit=t,this.bindSuperProperty())},ds.prototype.isInherited=function(){return 0!=(this.propertyFlags&ds.InheritedFlag)},ds.prototype.setInherited=function(t){if(t&&0==(this.propertyFlags&ds.InheritedFlag))null!==(e=this.superProperty)&&e.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ds.OverrideFlag|ds.InheritedFlag),this.setOwnState(e.state),this.revise());else if(!t&&0!=(this.propertyFlags&ds.InheritedFlag)){var e;null!==(e=this.superProperty)&&e.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ds.InheritedFlag)}},Object.defineProperty(ds.prototype,"superName",{get:function(){var t=this.inherit;return"string"==typeof t?t:!0===t?this.name:void 0},enumerable:!0,configurable:!0}),ds.prototype.bindSuperProperty=function(){var t=this.superName;if(void 0!==t&&this.isMounted())for(var e=this.owner.parentController;null!==e;){var i=e.getLazyControllerProperty(t);if(null!==i){this.superProperty=i,i.addSubProperty(this),0==(this.propertyFlags&ds.OverrideFlag)&&i.precedence>=this.precedence&&(this.setPropertyFlags(this.propertyFlags|ds.InheritedFlag),this.setOwnState(i.state),this.revise());break}e=e.parentController}},ds.prototype.unbindSuperProperty=function(){var t=this.superProperty;null!==t&&(t.removeSubProperty(this),this.superProperty=null,this.setPropertyFlags(this.propertyFlags&~ds.InheritedFlag))},ds.prototype.addSubProperty=function(t){var e=this.subProperties;null===e&&(e=[],this.subProperties=e),e.push(t)},ds.prototype.removeSubProperty=function(t){var e=this.subProperties;if(null!==e){var i=e.indexOf(t);i>=0&&e.splice(i,1)}},Object.defineProperty(ds.prototype,"superState",{get:function(){var t=this.superProperty;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(ds.prototype,"state",{get:function(){return this.ownState},enumerable:!0,configurable:!0}),ds.prototype.getState=function(){var t=this.state;if(null==t)throw new TypeError(t+" "+this.name+" state");return t},ds.prototype.getStateOr=function(t){var e=this.state;return null==e&&(e=t),e},ds.prototype.setState=function(t,e){void 0===e&&(e=Jr.Extrinsic),e>=this.precedence&&(this.setPropertyFlags(this.propertyFlags&~ds.InheritedFlag|ds.OverrideFlag),this.setPrecedence(e),this.setOwnState(t))},ds.prototype.setOwnState=function(t){t=this.fromAny(t);var e=this.state;this.equalState(t,e)||(this.willSetState(t,e),this.ownState=t,this.setPropertyFlags(this.propertyFlags|ds.UpdatedFlag),this.onSetState(t,e),this.updateSubProperties(t,e),this.didSetState(t,e))},ds.prototype.willSetState=function(t,e){},ds.prototype.onSetState=function(t,e){var i=this.updateFlags;void 0!==i&&this.owner.requireUpdate(i)},ds.prototype.didSetState=function(t,e){},ds.prototype.takesPrecedence=function(t){return t>=this.precedence},ds.prototype.setPrecedence=function(t){var e=this.precedence;t!==e&&(this.willSetPrecedence(t,e),this.precedence=t,this.onSetPrecedence(t,e),this.didSetPrecedence(t,e))},ds.prototype.willSetPrecedence=function(t,e){},ds.prototype.onSetPrecedence=function(t,e){if(t>e&&0!=(this.propertyFlags&ds.InheritedFlag)){var i=this.superProperty;null!==i&&i.precedence<this.precedence&&this.setPropertyFlags(this.propertyFlags&~ds.InheritedFlag)}},ds.prototype.didSetPrecedence=function(t,e){},ds.prototype.setPropertyFlags=function(t){this.propertyFlags=t},ds.prototype.isUpdated=function(){return 0!=(this.propertyFlags&ds.UpdatedFlag)},Object.defineProperty(ds.prototype,"updatedState",{get:function(){return 0!=(this.propertyFlags&ds.UpdatedFlag)?this.state:void 0},enumerable:!0,configurable:!0}),ds.prototype.takeUpdatedState=function(){var t=this.propertyFlags;return 0!=(t&ds.UpdatedFlag)?(this.setPropertyFlags(t&~ds.UpdatedFlag),this.state):void 0},ds.prototype.takeState=function(){return this.setPropertyFlags(this.propertyFlags&~ds.UpdatedFlag),this.state},ds.prototype.revise=function(){this.owner.requireUpdate(Jr.NeedsRevise)},ds.prototype.onRevise=function(){this.isInherited()&&this.onReviseInherited()},ds.prototype.onReviseInherited=function(){var t=this.superProperty;null!==t&&t.precedence>=this.precedence&&this.setOwnState(t.state)},ds.prototype.updateSubProperties=function(t,e){for(var i=this.subProperties,o=0,n=null!==i?i.length:0;o<n;o+=1){var r=i[o];r.isInherited()&&r.revise()}},ds.prototype.equalState=function(t,i){return e.Equals(t,i)},ds.prototype.fromAny=function(t){return t},ds.prototype.isMounted=function(){return 0!=(this.propertyFlags&ds.MountedFlag)},ds.prototype.mount=function(){0==(this.propertyFlags&ds.MountedFlag)&&(this.willMount(),this.setPropertyFlags(this.propertyFlags|ds.MountedFlag),this.onMount(),this.didMount())},ds.prototype.willMount=function(){},ds.prototype.onMount=function(){this.bindSuperProperty()},ds.prototype.didMount=function(){},ds.prototype.unmount=function(){0!=(this.propertyFlags&ds.MountedFlag)&&(this.willUnmount(),this.setPropertyFlags(this.propertyFlags&~ds.MountedFlag),this.onUnmount(),this.didUnmount())},ds.prototype.willUnmount=function(){},ds.prototype.onUnmount=function(){this.unbindSuperProperty()},ds.prototype.didUnmount=function(){},ds.prototype.toString=function(){return this.name},ds.getConstructor=function(t){return t===String?fs:t===Boolean?vs:t===Number?ys:null},ds.define=function(t){var i=t.extends,o=t.inherit,n=t.state,r=t.precedence,s=t.initState;delete t.extends,delete t.inherit,delete t.state,delete t.precedence,delete t.initState,void 0===i&&(i=ds.getConstructor(t.type)),null===i&&(i=ds,void 0===t.fromAny&&e.FromAny.is(t.type)&&(t.fromAny=t.type.fromAny));var l=function(t,e){var l,a=function(t,e){return 0===arguments.length?a.state:(a.setState(t,e),a.owner)};return Object.setPrototypeOf(a,this),a=i.call(a,t,e)||a,void 0!==s?l=a.fromAny(s()):void 0!==n&&(l=a.fromAny(n)),void 0!==l&&(a.ownState=l),void 0!==r&&(a.precedence=r),void 0!==o&&(a.inherit=o),a},a=t;return Object.setPrototypeOf(l,i),(l.prototype=a).constructor=l,Object.setPrototypeOf(l.prototype,i.prototype),l},ds.MountedFlag=1,ds.UpdatedFlag=2,ds.OverrideFlag=4,ds.InheritedFlag=8;var fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return t},e.prototype.equalState=function(t,e){return t===e},e}(ds),vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){return!!t},e.prototype.equalState=function(t,e){return t===e},e}(ds),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.fromAny=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e.prototype.equalState=function(t,e){return t===e},e}(ds),gs=function(t,e,i){return this instanceof gs?ws.call(this,t,e,i):(o=t,Jr.decorateControllerModel.bind(Jr,gs.define(o)));var o};function ws(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.model=null,this}w(gs,Object),gs.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},gs.prototype.getModel=function(){var t=this.model;if(null===t)throw new TypeError("null "+this.name+" model");return t},gs.prototype.setModel=function(t,e){var i=this.model;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetModel(t,i,e),null!==i&&this.detachModel(i),this.model=t,null!==t&&this.attachModel(t),this.onSetModel(t,i,e),this.didSetModel(t,i,e)),i},gs.prototype.attachModel=function(t){!0===this.observe&&t.addModelObserver(this)},gs.prototype.detachModel=function(t){!0===this.observe&&t.removeModelObserver(this)},gs.prototype.willSetModel=function(t,e,i){},gs.prototype.onSetModel=function(t,e,i){},gs.prototype.didSetModel=function(t,e,i){},gs.prototype.injectModel=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.model)&&(e=this.createModel()):null!==(e=this.fromAny(e))&&this.setModel(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentModel===t&&e.key===o||this.insertModel(t,e,i,o),null===this.model&&this.setModel(e,i)),e},gs.prototype.createModel=function(){return null},gs.prototype.insertModel=function(t,e,i,o){t.insertChildModel(e,i,o)},gs.prototype.removeModel=function(){var t=this.model;return null!==t&&t.remove(),t},gs.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof f?t:null},gs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&gs.MountedFlag)},gs.prototype.mount=function(){0==(this.fastenerFlags&gs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|gs.MountedFlag),this.onMount(),this.didMount())},gs.prototype.willMount=function(){},gs.prototype.onMount=function(){},gs.prototype.didMount=function(){},gs.prototype.unmount=function(){0!=(this.fastenerFlags&gs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~gs.MountedFlag),this.onUnmount(),this.didUnmount())},gs.prototype.willUnmount=function(){},gs.prototype.onUnmount=function(){},gs.prototype.didUnmount=function(){},gs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=gs);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.model:(n.setModel(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},gs.MountedFlag=1;var ms=function(t,e,i){return this instanceof ms?Ss.call(this,t,e,i):(o=t,Jr.decorateControllerTrait.bind(Jr,ms.define(o)));var o};function Ss(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.trait=null,this}w(ms,Object),ms.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},ms.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},ms.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),this.trait=t,null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},ms.prototype.attachTrait=function(t){!0===this.observe&&t.addTraitObserver(this)},ms.prototype.detachTrait=function(t){!0===this.observe&&t.removeTraitObserver(this)},ms.prototype.willSetTrait=function(t,e,i){},ms.prototype.onSetTrait=function(t,e,i){},ms.prototype.didSetTrait=function(t,e,i){},ms.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAny(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},ms.prototype.createTrait=function(){return null},ms.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},ms.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},ms.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},ms.prototype.isMounted=function(){return 0!=(this.fastenerFlags&ms.MountedFlag)},ms.prototype.mount=function(){0==(this.fastenerFlags&ms.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|ms.MountedFlag),this.onMount(),this.didMount())},ms.prototype.willMount=function(){},ms.prototype.onMount=function(){},ms.prototype.didMount=function(){},ms.prototype.unmount=function(){0!=(this.fastenerFlags&ms.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~ms.MountedFlag),this.onUnmount(),this.didUnmount())},ms.prototype.willUnmount=function(){},ms.prototype.onUnmount=function(){},ms.prototype.didUnmount=function(){},ms.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=ms);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.trait:(n.setTrait(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},ms.MountedFlag=1;var Cs=function(t,e,i){return this instanceof Cs?bs.call(this,t,e,i):(o=t,Jr.decorateControllerView.bind(Jr,Cs.define(o)));var o};function bs(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.view=null,this}w(Cs,Object),Cs.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},Cs.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},Cs.prototype.setView=function(t,e){(t instanceof Qn&&t.isMounted()||t instanceof Node&&Qn.isNodeMounted(t)&&Qn.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAny(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),this.view=t,null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},Cs.prototype.attachView=function(t){!0===this.observe&&t.addViewObserver(this)},Cs.prototype.detachView=function(t){!0===this.observe&&t.removeViewObserver(this)},Cs.prototype.willSetView=function(t,e,i){},Cs.prototype.onSetView=function(t,e,i){},Cs.prototype.didSetView=function(t,e,i){},Cs.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAny(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.key:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},Cs.prototype.createView=function(){var t=this.type;return void 0!==t?t.create():null},Cs.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},Cs.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},Cs.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof ro?t:null},Cs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&Cs.MountedFlag)},Cs.prototype.mount=function(){0==(this.fastenerFlags&Cs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|Cs.MountedFlag),this.onMount(),this.didMount())},Cs.prototype.willMount=function(){},Cs.prototype.onMount=function(){},Cs.prototype.didMount=function(){},Cs.prototype.unmount=function(){0!=(this.fastenerFlags&Cs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~Cs.MountedFlag),this.onUnmount(),this.didUnmount())},Cs.prototype.willUnmount=function(){},Cs.prototype.onUnmount=function(){},Cs.prototype.didUnmount=function(){},Cs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=Cs);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.view:(n.setView(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},Cs.MountedFlag=1;var Vs=function(t,e,i,o){return this instanceof Vs?Ts.call(this,t,e,i,o):(n=t,Jr.decorateControllerViewTrait.bind(Jr,Vs.define(n)));var n};function Ts(t,e,i,o){return void 0!==o&&Object.defineProperty(this,"name",{value:o,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.viewKey=e,this.view=null,this.traitKey=i,this.trait=null,this}w(Vs,Object),Vs.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},Vs.prototype.getView=function(){var t=this.view;if(null===t)throw new TypeError("null "+this.name+" view");return t},Vs.prototype.setView=function(t,e){(t instanceof Qn&&t.isMounted()||t instanceof Node&&Qn.isNodeMounted(t)&&Qn.isRootView(t))&&this.owner.mount();var i=this.view;return null!==t&&(t=this.fromAnyView(t)),i!==t&&(void 0===e&&(e=null),this.willSetView(t,i,e),null!==i&&this.detachView(i),this.view=t,null!==t&&this.attachView(t),this.onSetView(t,i,e),this.didSetView(t,i,e)),i},Vs.prototype.attachView=function(t){!0===this.observeView&&t.addViewObserver(this)},Vs.prototype.detachView=function(t){!0===this.observeView&&t.removeViewObserver(this)},Vs.prototype.willSetView=function(t,e,i){},Vs.prototype.onSetView=function(t,e,i){},Vs.prototype.didSetView=function(t,e,i){},Vs.prototype.injectView=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.view)&&(e=this.createView()):null!==(e=this.fromAnyView(e))&&this.setView(e,i),null!==e&&(void 0===o?o=this.viewKey:null===o&&(o=void 0),e.parentView===t&&e.key===o||this.insertView(t,e,i,o),null===this.view&&this.setView(e,i)),e},Vs.prototype.createView=function(){var t=this.viewType;return void 0!==t?t.create():null},Vs.prototype.insertView=function(t,e,i,o){t.insertChildView(e,i,o)},Vs.prototype.removeView=function(){var t=this.view;return null!==t&&t.remove(),t},Vs.prototype.fromAnyView=function(t){var i=this.viewType;return e.FromAny.is(i)?i.fromAny(t):t instanceof ro?t:null},Vs.prototype.getTrait=function(){var t=this.trait;if(null===t)throw new TypeError("null "+this.name+" trait");return t},Vs.prototype.setTrait=function(t,e){var i=this.trait;return null!==t&&(t=this.fromAnyTrait(t)),i!==t&&(void 0===e&&(e=null),this.willSetTrait(t,i,e),null!==i&&this.detachTrait(i),this.trait=t,null!==t&&this.attachTrait(t),this.onSetTrait(t,i,e),this.didSetTrait(t,i,e)),i},Vs.prototype.attachTrait=function(t){!0===this.observeTrait&&t.addTraitObserver(this)},Vs.prototype.detachTrait=function(t){!0===this.observeTrait&&t.removeTraitObserver(this)},Vs.prototype.willSetTrait=function(t,e,i){},Vs.prototype.onSetTrait=function(t,e,i){},Vs.prototype.didSetTrait=function(t,e,i){},Vs.prototype.injectTrait=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.trait)&&(e=this.createTrait()):null!==(e=this.fromAnyTrait(e))&&this.setTrait(e,i),null!==e&&(void 0===o?o=this.traitKey:null===o&&(o=void 0),e.model===t&&e.key===o||this.insertTrait(t,e,i,o),null===this.trait&&this.setTrait(e,i)),e},Vs.prototype.createTrait=function(){return null},Vs.prototype.insertTrait=function(t,e,i,o){t.insertTrait(e,i,o)},Vs.prototype.removeTrait=function(){var t=this.trait;return null!==t&&t.remove(),t},Vs.prototype.fromAnyTrait=function(t){var i=this.traitType;return e.FromAny.is(i)?i.fromAny(t):t instanceof v?t:null},Vs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&Vs.MountedFlag)},Vs.prototype.mount=function(){0==(this.fastenerFlags&Vs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|Vs.MountedFlag),this.onMount(),this.didMount())},Vs.prototype.willMount=function(){},Vs.prototype.onMount=function(){},Vs.prototype.didMount=function(){},Vs.prototype.unmount=function(){0!=(this.fastenerFlags&Vs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~Vs.MountedFlag),this.onUnmount(),this.didUnmount())},Vs.prototype.willUnmount=function(){},Vs.prototype.onUnmount=function(){},Vs.prototype.didUnmount=function(){},Vs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=Vs);var i=function(t,i,o,n){return e.call(this,t,i,o,n)||this},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),i},Vs.MountedFlag=1;var Fs=function(t,e,i){return this instanceof Fs?Ps.call(this,t,e,i):(o=t,Jr.decorateControllerFastener.bind(Jr,Fs.define(o)));var o};function Ps(t,e,i){return void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this.owner=t,this.fastenerFlags=0,this.key=e,this.controller=null,this}w(Fs,Object),Fs.prototype.setFastenerFlags=function(t){this.fastenerFlags=t},Fs.prototype.getController=function(){var t=this.controller;if(null===t)throw new TypeError("null "+this.name+" controller");return t},Fs.prototype.setController=function(t,e){var i=this.controller;return null!==t&&(t=this.fromAny(t)),void 0===e&&(e=null),!0===this.child&&(null===t||t.parentController===this.owner&&t.key===this.key?null===t&&null!==i&&i.remove():this.insertController(this.owner,t,e,this.key)),this.doSetController(t,e),i},Fs.prototype.doSetController=function(t,e){var i=this.controller;i!==t&&(this.willSetController(t,i,e),null!==i&&this.detachController(i),this.controller=t,null!==t&&this.attachController(t),this.onSetController(t,i,e),this.didSetController(t,i,e))},Fs.prototype.attachController=function(t){!0===this.observe&&t.addControllerObserver(this)},Fs.prototype.detachController=function(t){!0===this.observe&&t.removeControllerObserver(this)},Fs.prototype.willSetController=function(t,e,i){},Fs.prototype.onSetController=function(t,e,i){},Fs.prototype.didSetController=function(t,e,i){},Object.defineProperty(Fs.prototype,"parentController",{get:function(){return this.owner},enumerable:!0,configurable:!0}),Fs.prototype.injectController=function(t,e,i,o){return void 0===i&&(i=null),null==e?null===(e=this.controller)&&(e=this.createController()):null!==(e=this.fromAny(e))&&this.doSetController(e,i),null!==e&&(null==t&&(t=this.parentController),void 0===o?o=this.key:null===o&&(o=void 0),null===t||e.parentController===t&&e.key===o||this.insertController(t,e,i,o),null===this.controller&&this.doSetController(e,i)),e},Fs.prototype.createController=function(){return null},Fs.prototype.insertController=function(t,e,i,o){t.insertChildController(e,i,o)},Fs.prototype.removeController=function(){var t=this.controller;return null!==t&&t.remove(),t},Fs.prototype.fromAny=function(t){var i=this.type;return e.FromAny.is(i)?i.fromAny(t):t instanceof Jr?t:null},Fs.prototype.isMounted=function(){return 0!=(this.fastenerFlags&Fs.MountedFlag)},Fs.prototype.mount=function(){0==(this.fastenerFlags&Fs.MountedFlag)&&(this.willMount(),this.setFastenerFlags(this.fastenerFlags|Fs.MountedFlag),this.onMount(),this.didMount())},Fs.prototype.willMount=function(){},Fs.prototype.onMount=function(){},Fs.prototype.didMount=function(){},Fs.prototype.unmount=function(){0!=(this.fastenerFlags&Fs.MountedFlag)&&(this.willUnmount(),this.setFastenerFlags(this.fastenerFlags&~Fs.MountedFlag),this.onUnmount(),this.didUnmount())},Fs.prototype.willUnmount=function(){},Fs.prototype.onUnmount=function(){},Fs.prototype.didUnmount=function(){},Fs.define=function(t){var e=t.extends;delete t.extends,void 0===e&&(e=Fs);var i=function(t,i,o){var n=function(t,e){return void 0===t?n.controller:(n.setController(t,e),n.owner)};return Object.setPrototypeOf(n,this),n=e.call(n,t,i,o)||n},o=t;return Object.setPrototypeOf(i,e),(i.prototype=o).constructor=i,Object.setPrototypeOf(i.prototype,e.prototype),void 0===o.child&&(o.child=!0),i},Fs.MountedFlag=1;var Ms=function(t){function e(){var e=t.call(this)||this;return e.key=void 0,e.parentController=null,e.controllerServices=null,e.controllerProperties=null,e.controllerModels=null,e.controllerTraits=null,e.controllerViews=null,e.controllerViewTraits=null,e.controllerFasteners=null,e.gestures=null,e}return w(e,t),e.prototype.willObserve=function(t){for(var e,i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.didObserve=function(t){for(var e,i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==(e=t.call(this,r)))return e}return e},e.prototype.setKey=function(t){this.key=t},e.prototype.setParentController=function(t,e){this.willSetParentController(t,e),null!==e&&this.detachParentController(e),this.parentController=t,null!==t&&this.attachParentController(t),this.onSetParentController(t,e),this.didSetParentController(t,e)},e.prototype.remove=function(){var t=this.parentController;null!==t&&(0==(this.controllerFlags&Jr.TraversingFlag)?t.removeChildController(this):this.setControllerFlags(this.controllerFlags|Jr.RemovingFlag))},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i),this.insertControllerFastener(e,i)},e.prototype.cascadeInsert=function(t,e){},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e),this.removeControllerFastener(e)},e.prototype.cascadeMount=function(){if(0!=(this.controllerFlags&Jr.MountedFlag))throw new Error("already mounted");this.setControllerFlags(this.controllerFlags|Jr.MountedFlag|Jr.TraversingFlag);try{this.willMount(),this.onMount(),this.mountChildControllers(),this.didMount()}finally{this.setControllerFlags(this.controllerFlags&~Jr.TraversingFlag)}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.mountControllerServices(),this.mountControllerProperties(),this.mountControllerModels(),this.mountControllerTraits(),this.mountControllerViews(),this.mountControllerViewTraits(),this.mountControllerFasteners(),this.mountGestures()},e.prototype.mountChildControllers=function(){this.forEachChildController((function(t){t.cascadeMount(),0!=(t.controllerFlags&Jr.RemovingFlag)&&(t.setControllerFlags(t.controllerFlags&~Jr.RemovingFlag),this.removeChildController(t))}),this)},e.prototype.cascadeUnmount=function(){if(0==(this.controllerFlags&Jr.MountedFlag))throw new Error("already unmounted");this.setControllerFlags(this.controllerFlags&~Jr.MountedFlag|Jr.TraversingFlag);try{this.willUnmount(),this.unmountChildControllers(),this.onUnmount(),this.didUnmount()}finally{this.setControllerFlags(this.controllerFlags&~Jr.TraversingFlag)}},e.prototype.onUnmount=function(){this.unmountGestures(),this.unmountControllerFasteners(),this.unmountControllerViewTraits(),this.unmountControllerViews(),this.unmountControllerTraits(),this.unmountControllerModels(),this.unmountControllerProperties(),this.unmountControllerServices(),this.setControllerFlags(this.controllerFlags&(~Jr.ControllerFlagMask|Jr.RemovingFlag))},e.prototype.unmountChildControllers=function(){this.forEachChildController((function(t){t.cascadeUnmount(),0!=(t.controllerFlags&Jr.RemovingFlag)&&(t.setControllerFlags(t.controllerFlags&~Jr.RemovingFlag),this.removeChildController(t))}),this)},e.prototype.cascadePower=function(){if(0!=(this.controllerFlags&Jr.PoweredFlag))throw new Error("already powered");this.setControllerFlags(this.controllerFlags|Jr.PoweredFlag|Jr.TraversingFlag);try{this.willPower(),this.onPower(),this.powerChildControllers(),this.didPower()}finally{this.setControllerFlags(this.controllerFlags&~Jr.TraversingFlag)}},e.prototype.powerChildControllers=function(){this.forEachChildController((function(t){t.cascadePower(),0!=(t.controllerFlags&Jr.RemovingFlag)&&(t.setControllerFlags(t.controllerFlags&~Jr.RemovingFlag),this.removeChildController(t))}),this)},e.prototype.cascadeUnpower=function(){if(0==(this.controllerFlags&Jr.PoweredFlag))throw new Error("already unpowered");this.setControllerFlags(this.controllerFlags&~Jr.PoweredFlag|Jr.TraversingFlag);try{this.willUnpower(),this.unpowerChildControllers(),this.onUnpower(),this.didUnpower()}finally{this.setControllerFlags(this.controllerFlags&~Jr.TraversingFlag)}},e.prototype.unpowerChildControllers=function(){this.forEachChildController((function(t){t.cascadeUnpower(),0!=(t.controllerFlags&Jr.RemovingFlag)&&(t.setControllerFlags(t.controllerFlags&~Jr.RemovingFlag),this.removeChildController(t))}),this)},e.prototype.cascadeCompile=function(t,e){var i=this.extendControllerContext(e);if(t&=~Jr.NeedsCompile,t|=this.controllerFlags&Jr.UpdateMask,0!=((t=this.needsCompile(t,i))&Jr.CompileMask)){var o=t;this.setControllerFlags(this.controllerFlags&~Jr.NeedsCompile|Jr.TraversingFlag|Jr.CompilingFlag);try{this.willCompile(o,i),0!=((this.controllerFlags|t)&Jr.NeedsResolve)&&(o|=Jr.NeedsResolve,this.setControllerFlags(this.controllerFlags&~Jr.NeedsResolve),this.willResolve(i)),0!=((this.controllerFlags|t)&Jr.NeedsGenerate)&&(o|=Jr.NeedsGenerate,this.setControllerFlags(this.controllerFlags&~Jr.NeedsGenerate),this.willGenerate(i)),0!=((this.controllerFlags|t)&Jr.NeedsAssemble)&&(o|=Jr.NeedsAssemble,this.setControllerFlags(this.controllerFlags&~Jr.NeedsAssemble),this.willAssemble(i)),this.onCompile(o,i),0!=(o&Jr.NeedsResolve)&&this.onResolve(i),0!=(o&Jr.NeedsGenerate)&&this.onGenerate(i),0!=(o&Jr.NeedsAssemble)&&this.onAssemble(i),0!=(o&Jr.CompileMask)&&this.compileChildControllers(o,i,this.compileChildController),0!=(o&Jr.NeedsAssemble)&&this.didAssemble(i),0!=(o&Jr.NeedsGenerate)&&this.didGenerate(i),0!=(o&Jr.NeedsResolve)&&this.didResolve(i),this.didCompile(o,i)}finally{this.setControllerFlags(this.controllerFlags&~(Jr.TraversingFlag|Jr.CompilingFlag))}}},e.prototype.cascadeExecute=function(t,e){var i=this.extendControllerContext(e);if(t&=~Jr.NeedsExecute,t|=this.controllerFlags&Jr.UpdateMask,0!=((t=this.needsExecute(t,i))&Jr.ExecuteMask)){var o=t;this.setControllerFlags(this.controllerFlags&~Jr.NeedsExecute|Jr.TraversingFlag|Jr.ExecutingFlag);try{this.willExecute(o,i),0!=((this.controllerFlags|t)&Jr.NeedsRevise)&&(o|=Jr.NeedsRevise,this.setControllerFlags(this.controllerFlags&~Jr.NeedsRevise),this.willRevise(i)),0!=((this.controllerFlags|t)&Jr.NeedsCompute)&&(o|=Jr.NeedsCompute,this.setControllerFlags(this.controllerFlags&~Jr.NeedsCompute),this.willCompute(i)),this.onExecute(o,i),0!=(o&Jr.NeedsRevise)&&this.onRevise(i),0!=(o&Jr.NeedsCompute)&&this.onCompute(i),0!=(o&Jr.ExecuteMask)&&this.executeChildControllers(o,i,this.executeChildController),0!=(o&Jr.NeedsCompute)&&this.didCompute(i),0!=(o&Jr.NeedsRevise)&&this.didRevise(i),this.didExecute(o,i)}finally{this.setControllerFlags(this.controllerFlags&~(Jr.TraversingFlag|Jr.ExecutingFlag))}}},e.prototype.onRevise=function(e){t.prototype.onRevise.call(this,e),this.reviseControllerProperties()},e.prototype.hasControllerService=function(t){var e=this.controllerServices;return null!==e&&void 0!==e[t]},e.prototype.getControllerService=function(t){var e=this.controllerServices;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerService=function(t,e){var i=this.controllerServices;null===i&&(i={},this.controllerServices=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerServices=function(){var t=this.controllerServices;for(var e in t){t[e].mount()}},e.prototype.unmountControllerServices=function(){var t=this.controllerServices;for(var e in t){t[e].unmount()}},e.prototype.hasControllerProperty=function(t){var e=this.controllerProperties;return null!==e&&void 0!==e[t]},e.prototype.getControllerProperty=function(t){var e=this.controllerProperties;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerProperty=function(t,e){var i=this.controllerProperties;null===i&&(i={},this.controllerProperties=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.reviseControllerProperties=function(){var t=this.controllerProperties;for(var e in t){t[e].onRevise()}},e.prototype.mountControllerProperties=function(){var t=this.controllerProperties;for(var e in t){t[e].mount()}},e.prototype.unmountControllerProperties=function(){var t=this.controllerProperties;for(var e in t){t[e].unmount()}},e.prototype.hasControllerModel=function(t){var e=this.controllerModels;return null!==e&&void 0!==e[t]},e.prototype.getControllerModel=function(t){var e=this.controllerModels;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerModel=function(t,e){var i=this.controllerModels;null===i&&(i={},this.controllerModels=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerModels=function(){var t=this.controllerModels;for(var e in t){t[e].mount()}},e.prototype.unmountControllerModels=function(){var t=this.controllerModels;for(var e in t){t[e].unmount()}},e.prototype.hasControllerTrait=function(t){var e=this.controllerTraits;return null!==e&&void 0!==e[t]},e.prototype.getControllerTrait=function(t){var e=this.controllerTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerTrait=function(t,e){var i=this.controllerTraits;null===i&&(i={},this.controllerTraits=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerTraits=function(){var t=this.controllerTraits;for(var e in t){t[e].mount()}},e.prototype.unmountControllerTraits=function(){var t=this.controllerTraits;for(var e in t){t[e].unmount()}},e.prototype.hasControllerView=function(t){var e=this.controllerViews;return null!==e&&void 0!==e[t]},e.prototype.getControllerView=function(t){var e=this.controllerViews;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerView=function(t,e){var i=this.controllerViews;null===i&&(i={},this.controllerViews=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerViews=function(){var t=this.controllerViews;for(var e in t){t[e].mount()}},e.prototype.unmountControllerViews=function(){var t=this.controllerViews;for(var e in t){t[e].unmount()}},e.prototype.hasControllerViewTrait=function(t){var e=this.controllerViewTraits;return null!==e&&void 0!==e[t]},e.prototype.getControllerViewTrait=function(t){var e=this.controllerViewTraits;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerViewTrait=function(t,e){var i=this.controllerViewTraits;null===i&&(i={},this.controllerViewTraits=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerViewTraits=function(){var t=this.controllerViewTraits;for(var e in t){t[e].mount()}},e.prototype.unmountControllerViewTraits=function(){var t=this.controllerViewTraits;for(var e in t){t[e].unmount()}},e.prototype.hasControllerFastener=function(t){var e=this.controllerFasteners;return null!==e&&void 0!==e[t]},e.prototype.getControllerFastener=function(t){var e=this.controllerFasteners;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setControllerFastener=function(t,e){var i=this.controllerFasteners;null===i&&(i={},this.controllerFasteners=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountControllerFasteners=function(){var t=this.controllerFasteners;for(var e in t){t[e].mount()}},e.prototype.unmountControllerFasteners=function(){var t=this.controllerFasteners;for(var e in t){t[e].unmount()}},e.prototype.insertControllerFastener=function(t,e){var i=t.key;if(void 0!==i){var o=this.getLazyControllerFastener(i);null!==o&&!0===o.child&&o.doSetController(t,e)}},e.prototype.removeControllerFastener=function(t){var e=t.key;if(void 0!==e){var i=this.getControllerFastener(e);null!==i&&!0===i.child&&i.doSetController(null,null)}},e.prototype.hasGesture=function(t){var e=this.gestures;return null!==e&&void 0!==e[t]},e.prototype.getGesture=function(t){var e=this.gestures;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setGesture=function(t,e){var i=this.gestures;null===i&&(i={},this.gestures=i);var o=i[t];void 0!==o&&this.isMounted()&&o.unmount(),null!==e?(i[t]=e,this.isMounted()&&e.mount()):delete i[t]},e.prototype.mountGestures=function(){var t=this.gestures;for(var e in t){t[e].mount()}no.initGestures(this)},e.prototype.unmountGestures=function(){var t=this.gestures;for(var e in t){t[e].unmount()}},e}(Jr),Ds=function(t){function e(){var e=t.call(this)||this;return e.childControllers=[],e.childControllerMap=null,e}return w(e,t),Object.defineProperty(e.prototype,"childControllerCount",{get:function(){return this.childControllers.length},enumerable:!1,configurable:!0}),e.prototype.forEachChildController=function(t,e){for(var i,o=this.childControllers,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.firstChildController=function(){var t=this.childControllers;return 0!==t.length?t[0]:null},e.prototype.lastChildController=function(){var t=this.childControllers;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildController=function(t){var e=this.childControllers,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildController=function(t){var e=this.childControllers,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.getChildController=function(t){var e=this.childControllerMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildController=function(t,e){var i=null,o=this.childControllers;null!==e&&(e.parentController===this&&(i=o[o.indexOf(e)+1]||null),e.remove());var n=-1,r=this.getChildController(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildController(r),r.setParentController(null,this),this.removeChildControllerMap(r),o.splice(n,1),this.onRemoveChildController(r),this.didRemoveChildController(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildController(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildControllerMap(e),e.setParentController(this,null),this.onInsertChildController(e,i),this.didInsertChildController(e,i),e.cascadeInsert()),r},e.prototype.insertChildControllerMap=function(t){var e=t.key;if(void 0!==e){var i=this.childControllerMap;null===i&&(i={},this.childControllerMap=i),i[e]=t}},e.prototype.removeChildControllerMap=function(t){var e=t.key;if(void 0!==e){var i=this.childControllerMap;null!==i&&delete i[e]}},e.prototype.appendChildController=function(t,e){t.remove(),void 0!==e&&(this.removeChildController(e),t.setKey(e)),this.willInsertChildController(t,null),this.childControllers.push(t),this.insertChildControllerMap(t),t.setParentController(this,null),this.onInsertChildController(t,null),this.didInsertChildController(t,null),t.cascadeInsert()},e.prototype.prependChildController=function(t,e){t.remove(),void 0!==e&&(this.removeChildController(e),t.setKey(e));var i=this.childControllers,o=0!==i.length?i[0]:null;this.willInsertChildController(t,o),i.unshift(t),this.insertChildControllerMap(t),t.setParentController(this,null),this.onInsertChildController(t,o),this.didInsertChildController(t,o),t.cascadeInsert()},e.prototype.insertChildController=function(t,e,i){if(null!==e&&e.parentController!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildController(i),t.setKey(i)),this.willInsertChildController(t,e);var o=this.childControllers,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildControllerMap(t),t.setParentController(this,null),this.onInsertChildController(t,e),this.didInsertChildController(t,e),t.cascadeInsert()},e.prototype.removeChildController=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildController(t)))return null}else e=t;if(e.parentController!==this)throw new Error("not a child controller");this.willRemoveChildController(e),e.setParentController(null,this),this.removeChildControllerMap(e);var i=this.childControllers,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildController(e),this.didRemoveChildController(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this.childControllers;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildController(i),i.setParentController(null,this),this.removeChildControllerMap(i),t.pop(),this.onRemoveChildController(i),this.didRemoveChildController(i),i.setKey(void 0)}},e.prototype.mountChildControllers=function(){for(var t=this.childControllers,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.controllerFlags&Jr.RemovingFlag)?e+=1:(i.setControllerFlags(i.controllerFlags&~Jr.RemovingFlag),this.removeChildController(i))}},e.prototype.unmountChildControllers=function(){for(var t=this.childControllers,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.controllerFlags&Jr.RemovingFlag)?e+=1:(i.setControllerFlags(i.controllerFlags&~Jr.RemovingFlag),this.removeChildController(i))}},e.prototype.powerChildControllers=function(){for(var t=this.childControllers,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.controllerFlags&Jr.RemovingFlag)?e+=1:(i.setControllerFlags(i.controllerFlags&~Jr.RemovingFlag),this.removeChildController(i))}},e.prototype.unpowerChildControllers=function(){for(var t=this.childControllers,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.controllerFlags&Jr.RemovingFlag)?e+=1:(i.setControllerFlags(i.controllerFlags&~Jr.RemovingFlag),this.removeChildController(i))}},e.prototype.compileChildControllers=function(t,e,i){for(var o=this.childControllers,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.controllerFlags&Jr.RemovingFlag)?n+=1:(r.setControllerFlags(r.controllerFlags&~Jr.RemovingFlag),this.removeChildController(r))}},e.prototype.executeChildControllers=function(t,e,i){for(var o=this.childControllers,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.controllerFlags&Jr.RemovingFlag)?n+=1:(r.setControllerFlags(r.controllerFlags&~Jr.RemovingFlag),this.removeChildController(r))}},e}(Ms),xs=function(t){function e(e){var i=t.call(this,e)||this;return i.glowState="ready",i.glowTimer=0,i.initGlow(),i}return w(e,t),e.prototype.initGlow=function(){this.addClass("button-glow"),this.position.setState("absolute",ro.Intrinsic),this.width.setState(r.Length.zero(),ro.Intrinsic),this.height.setState(r.Length.zero(),ro.Intrinsic),this.borderTopLeftRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderTopRightRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderBottomLeftRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderBottomRightRadius.setState(r.Length.pct(50),ro.Intrinsic),this.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.didMount=function(){if(this.backgroundColor.takesPrecedence(ro.Intrinsic)){var e=this.getLookOr(se.highlightColor,null);null!==e&&(e=e.alpha(1)),this.backgroundColor.setState(e,ro.Intrinsic)}t.prototype.didMount.call(this)},e.prototype.onUnmount=function(){this.glowState="ready",this.cancelGlow(),this.remove(),t.prototype.onUnmount.call(this)},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(ro.Intrinsic)){var n=e.getOr(se.highlightColor,i,null);null!==n&&(n=n.alpha(1)),this.backgroundColor.setState(n,ro.Intrinsic)}},e.prototype.glow=function(t,e,i,o){if(void 0===o&&(o=0),"ready"===this.glowState)if(this.cancelGlow(),0!==o){var n=this.glow.bind(this,t,e,i,ro.Intrinsic);this.glowTimer=setTimeout(n,o)}else{i=void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i),this.willGlow();var r=this.node.offsetParent;if(null!==r){var s=r.getBoundingClientRect(),a=t-s.left,h=e-s.top,u=Math.max(a,s.width-a),p=Math.max(h,s.height-h),d=Math.sqrt(u*u+p*p),c=this.getLook(se.highlightColor),f=void 0!==c?c.alpha():.1;this.opacity.setState(f,ro.Intrinsic),!1!==i?(this.left.setState(a,ro.Intrinsic),this.top.setState(h,ro.Intrinsic),this.left.setState(a-d,i,ro.Intrinsic),this.top.setState(h-d,i,ro.Intrinsic),this.width.setState(2*d,i,ro.Intrinsic),this.height.setState(2*d,i,ro.Intrinsic)):(this.left.setState(a-d,ro.Intrinsic),this.top.setState(h-d,ro.Intrinsic),this.width.setState(2*d,ro.Intrinsic),this.height.setState(2*d,ro.Intrinsic),this.didGlow()),this.glowState="glowing"}}},e.prototype.willGlow=function(){},e.prototype.didGlow=function(){},e.prototype.cancelGlow=function(){0!==this.glowTimer&&(clearTimeout(this.glowTimer),this.glowTimer=0)},e.prototype.pulse=function(t,e,i){i=void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i),"ready"===this.glowState&&this.glow(t,e,i),"glowing"===this.glowState&&(this.willPulse(),!1!==i?this.opacity.setState(0,i,ro.Intrinsic):(this.opacity.setState(0,ro.Intrinsic),this.didPulse()),this.glowState="pulsing")},e.prototype.willPulse=function(){},e.prototype.didPulse=function(){this.remove()},e.prototype.fade=function(t,e,i){"ready"===this.glowState?(this.cancelGlow(),this.didFade()):"glowing"===this.glowState&&(i=void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i),this.willFade(),!1!==i?this.opacity.setState(0,i,ro.Intrinsic):(this.opacity.setState(0,ro.Intrinsic),this.didFade())),this.glowState="fading"},e.prototype.willFade=function(){},e.prototype.didFade=function(){this.remove()},m([bn({propertyNames:"left",type:r.Length,state:null,get computedValue(){var t=this.owner.node;return t instanceof HTMLElement?r.Length.px(t.offsetLeft):null},onEnd:function(){this.owner.didGlow()}})],e.prototype,"left",void 0),m([Sn({propertyNames:"opacity",type:Number,onEnd:function(t){"pulsing"===this.owner.glowState&&0===t?this.owner.didPulse():"fading"===this.owner.glowState&&0===t&&this.owner.didFade()}})],e.prototype,"opacity",void 0),e}(ar),Ls=function(t){function e(e){var i=t.call(this,e)||this;return i.initMembrane(e),i}return w(e,t),e.prototype.initMembrane=function(t){this.addClass("membrane")},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.glow=function(t){if(t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0),void 0===t.detail){var e="mouse"===t.inputType?0:100;t.detail=this.prepend(xs),t.detail.glow(t.x,t.y,void 0,e)}},e.Gesture=en.define({didBeginPress:function(t,e){this.owner.glows.state&&this.owner.glow(t)},didMovePress:function(t,e){t.isRunaway()?this.cancelPress(t,e):this.owner.clientBounds.contains(t.x,t.y)||(t.clearHoldTimer(),this.beginHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0))},didEndPress:function(t,e){this.owner.clientBounds.contains(t.x,t.y)?t.detail instanceof xs&&t.detail.pulse(t.x,t.y):(this.endHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0))},didCancelPress:function(t,e){this.owner.clientBounds.contains(t.x,t.y)||this.endHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0)}}),m([bo({type:Boolean,inherit:!0,state:!0})],e.prototype,"glows",void 0),m([en({extends:e.Gesture,self:!0})],e.prototype,"gesture",void 0),e}(ar),As=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonType="regular",i.iconCount=0,i.icon=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("floating-button"),this.position.setState("relative",ro.Intrinsic),"regular"===this.buttonType?(this.width.setState(56,ro.Intrinsic),this.height.setState(56,ro.Intrinsic)):"mini"===this.buttonType&&(this.width.setState(40,ro.Intrinsic),this.height.setState(40,ro.Intrinsic)),this.borderTopLeftRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderTopRightRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderBottomLeftRadius.setState(r.Length.pct(50),ro.Intrinsic),this.borderBottomRightRadius.setState(r.Length.pct(50),ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic)},e.prototype.setButtonType=function(t){this.buttonType!==t&&(this.buttonType=t,"regular"===t?(this.width.setState(56,ro.Intrinsic),this.height.setState(56,ro.Intrinsic)):"mini"===t&&(this.width.setState(40,ro.Intrinsic),this.height.setState(40,ro.Intrinsic)))},e.prototype.pushIcon=function(t,i){i=void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i);var o=this.iconCount,n="icon"+o,s=this.getViewFastener(n),a=null!==s?s.view:null;null!==a&&(!1!==i?(a.opacity.setState(0,i,ro.Intrinsic),a.transform.setState(r.Transform.rotate(r.Angle.deg(90)),i,ro.Intrinsic)):a.remove());var h=o+1,u="icon"+h,p=new e.IconFastener(this,u,u);p.iconIndex=h;var d=_r.create();d.position.setState("absolute",ro.Intrinsic),d.left.setState(0,ro.Intrinsic),d.top.setState(0,ro.Intrinsic),d.width.setState(this.width.state,ro.Intrinsic),d.height.setState(this.height.state,ro.Intrinsic),d.opacity.setState(0,ro.Intrinsic),d.opacity.setState(1,i,ro.Intrinsic),d.transform.setState(r.Transform.rotate(r.Angle.deg(-90)),ro.Intrinsic),d.transform.setState(r.Transform.rotate(r.Angle.deg(0)),i,ro.Intrinsic),d.pointerEvents.setState("none",ro.Intrinsic),d.iconWidth.setState(24,ro.Intrinsic),d.iconHeight.setState(24,ro.Intrinsic),d.iconColor.setPrecedence(ro.Extrinsic),d.graphics.setState(t,ro.Intrinsic),p.setView(d),this.setViewFastener(u,p),this.appendChildView(d,u),this.iconCount=h,this.icon=p},e.prototype.popIcon=function(t){t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t);var e=this.iconCount,i="icon"+e,o=this.getViewFastener(i),n=null!==o?o.view:null;null!==n&&(!1!==t?(n.opacity.setState(0,t,ro.Intrinsic),n.transform.setState(r.Transform.rotate(r.Angle.deg(-90)),t,ro.Intrinsic)):n.remove());var s=e-1,a="icon"+s,h=this.getViewFastener(a),u=null!==h?h.view:null;null!==u&&(u.opacity.setState(1,t,ro.Intrinsic),u.transform.setState(r.Transform.rotate(r.Angle.deg(0)),t,ro.Intrinsic),this.appendChildView(u,a)),this.iconCount=s,this.icon=h},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.setState(e.getOr(se.accentColor,i,null),o,ro.Intrinsic);var n=e.getOr(se.shadow,me.floating,null);if(null!==n){var r=n.color,s=this.disclosure.getPhaseOr(1);n=n.withColor(r.alpha(r.alpha()*s))}this.boxShadow.setState(n,o,ro.Intrinsic)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.getLookOr(se.shadow,me.floating,null);if(null!==i){var o=i.color,n=this.disclosure.getPhaseOr(1);i=i.withColor(o.alpha(o.alpha()*n))}this.boxShadow.setState(i,ro.Intrinsic)},e.Gesture=en.define({extends:Ls.Gesture,didStartHovering:function(){if(this.owner.modifyMood(fe.default,[[fe.hovering,1]]),this.owner.backgroundColor.takesPrecedence(ro.Intrinsic)){var t=this.owner.getLook(se.timing);this.owner.backgroundColor.setState(this.owner.getLookOr(se.accentColor,null),t,ro.Intrinsic)}},didStopHovering:function(){if(this.owner.modifyMood(fe.default,[[fe.hovering,void 0]]),this.owner.backgroundColor.takesPrecedence(ro.Intrinsic)){var t=this.owner.getLook(se.timing);this.owner.backgroundColor.setState(this.owner.getLookOr(se.accentColor,null),t,ro.Intrinsic)}},didMovePress:function(t,e){}}),e.IconFastener=Zo.define({extends:void 0,type:_r,child:!1,observe:!0,iconIndex:0,viewDidApplyTheme:function(t,e,i,o){var n=t.getOr(se.backgroundColor,e,null);o.iconColor.setState(n,i)},viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.key,null))}}),m([en({extends:e.Gesture})],e.prototype,"gesture",void 0),m([Oo({type:$t,inherit:!0})],e.prototype,"disclosure",void 0),e}(Ls),Os=function(t){function e(e){var i=t.call(this,e)||this;return i.initButtonItem(),i}return w(e,t),e.prototype.initButtonItem=function(){this.addClass("button-item"),this.position.setState("relative",ro.Intrinsic);var t=this.createButton();null!==t&&this.setChildView("button",t)},e.prototype.createButton=function(){var t=As.create();return t.setButtonType("mini"),t},Object.defineProperty(e.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof As?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){var t=this.button,e=null!==t?t.icon:null;return null!==e?e.view:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this.getChildView("label");return t instanceof ar?t:null},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.label;null!==n&&n.color.takesPrecedence(ro.Intrinsic)&&n.color.setState(e.getOr(se.mutedColor,i,null),o,ro.Intrinsic)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.disclosure.getPhaseOr(1),o=this.button;null!==o&&(this.width.setState(o.width.state,ro.Intrinsic),this.height.setState(o.height.state,ro.Intrinsic));var n=this.label;null!==n&&n.opacity.setState(i,ro.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=e.key;"button"===o&&e instanceof As?this.onInsertButton(e):"label"===o&&e instanceof ar&&this.onInsertLabel(e)},e.prototype.onRemoveChildView=function(e){var i=e.key;"button"===i&&e instanceof As?this.onRemoveButton(e):"label"===i&&e instanceof ar&&this.onRemoveLabel(e),t.prototype.onRemoveChildView.call(this,e)},e.prototype.onInsertButton=function(t){},e.prototype.onRemoveButton=function(t){},e.prototype.onInsertLabel=function(t){t.display.setState("block",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.right.setState(56,ro.Intrinsic),t.bottom.setState(0,ro.Intrinsic),t.fontSize.setState(17,ro.Intrinsic),t.fontWeight.setState("500",ro.Intrinsic),t.lineHeight.setState(40,ro.Intrinsic),t.whiteSpace.setState("nowrap",ro.Intrinsic),t.opacity.setState(this.disclosure.getPhaseOr(0),ro.Intrinsic)},e.prototype.onRemoveLabel=function(t){},m([Oo({type:$t,inherit:!0})],e.prototype,"disclosure",void 0),e}(ar),Rs=function(t){function i(e){var i=t.call(this,e)||this;return i.stackHeight=0,i.onClick=i.onClick.bind(i),i.onContextMenu=i.onContextMenu.bind(i),i.initButtonStack(),i.initButton(),i}return w(i,t),i.prototype.initButtonStack=function(){this.addClass("button-stack"),this.display.setState("block",ro.Intrinsic),this.position.setState("relative",ro.Intrinsic),this.width.setState(56,ro.Intrinsic),this.height.setState(56,ro.Intrinsic),this.opacity.setState(1,ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic)},i.prototype.initButton=function(){var t=this.createButton();null!==t&&this.append(t,"button")},i.prototype.createButton=function(){return As.create()},Object.defineProperty(i.prototype,"modalView",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){return this.disclosure.modalState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modality",{get:function(){return this.disclosure.phase},enumerable:!1,configurable:!0}),i.prototype.showModal=function(t,e){this.disclosure.expand(e)},i.prototype.hideModal=function(t){this.disclosure.collapse(t)},Object.defineProperty(i.prototype,"button",{get:function(){var t=this.getChildView("button");return t instanceof ar?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){for(var t=this.node.childNodes,e=[],i=0,o=t.length;i<o;i+=1){var n=t[i].view;n instanceof Os&&e.push(n)}return e},enumerable:!1,configurable:!0}),i.prototype.insertItem=function(t,e,i){void 0===e&&(e=this.node.childNodes.length-1),this.insertChildNode(t.node,this.node.childNodes[1+e]||null,i)},i.prototype.removeItems=function(){for(var t=this.node.childNodes,e=t.length-1;e>=0;e-=1){var i=t[e].view;i instanceof Os&&this.removeChild(i)}},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu)},i.prototype.onUnmount=function(){this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),t.prototype.onUnmount.call(this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutStack();var i=this.modalService.manager;null!=i&&i.updateModality()},i.prototype.layoutStack=function(){var t,e=this.disclosure.getPhase(),i=this.node.childNodes,o=i.length,n=this.button,s=o-1,l=0,a=0;if(null!==n){n.zIndex.setState(o,ro.Intrinsic);var h=null!==n?n.height.value:void 0;t=h instanceof r.Length?h.pxValue():n.node.offsetHeight}else t=0;for(var u=this.buttonSpacing.value,p=this.itemSpacing.value,d=0;d<o;d+=1){var c=i[d].view;if(c instanceof Os){0===l?(a+=u,t+=u):(a+=p,t+=p);var f=c.height.value,v=f instanceof r.Length?f.pxValue():c.node.offsetHeight;c.display.setState(0===e?"none":"flex",ro.Intrinsic),c.bottom.setState(e*t,ro.Intrinsic),c.zIndex.setState(s,ro.Intrinsic),t+=v,a+=v,l+=1,s-=1}}this.stackHeight=a},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"button"===e.key&&e instanceof ar?this.onInsertButton(e):e instanceof Os&&this.onInsertItem(e)},i.prototype.onRemoveChildView=function(e){"button"===e.key&&e instanceof ar?this.onRemoveButton(e):e instanceof Os&&this.onRemoveItem(e),t.prototype.onRemoveChildView.call(this,e)},i.prototype.onInsertButton=function(t){this.gesture.setView(t),t instanceof As&&(t.disclosure.setState($t.expanded(),ro.Intrinsic),(this.disclosure.isExpanded()||this.disclosure.isExpanding())&&t.pushIcon(this.closeIcon)),t.zIndex.setState(0,ro.Intrinsic)},i.prototype.onRemoveButton=function(t){this.gesture.setView(null)},i.prototype.onInsertItem=function(t){t.position.setState("absolute",ro.Intrinsic),t.right.setState(8,ro.Intrinsic),t.bottom.setState(8,ro.Intrinsic),t.left.setState(8,ro.Intrinsic),t.zIndex.setState(0,ro.Intrinsic)},i.prototype.onRemoveItem=function(t){},i.prototype.willExpand=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackWillExpand&&o.buttonStackWillExpand(this)}},i.prototype.onExpand=function(){var t=this.button;if(t instanceof As){var e=this.disclosure.timing;t.pushIcon(this.closeIcon,null!==e?e:void 0)}this.modalService.presentModal(this)},i.prototype.didExpand=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidExpand&&o.buttonStackDidExpand(this)}},i.prototype.willCollapse=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackWillCollapse&&o.buttonStackWillCollapse(this)}},i.prototype.onCollapse=function(){this.modalService.dismissModal(this);var t=this.button;if(t instanceof As&&t.iconCount>1){var e=this.disclosure.timing;t.popIcon(null!==e?e:void 0)}},i.prototype.didCollapse=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidCollapse&&o.buttonStackDidCollapse(this)}},i.prototype.show=function(t){1!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.willShow(),!1!==t?this.opacity.setState(1,t,ro.Intrinsic):(this.opacity.setState(1,ro.Intrinsic),this.didShow()))},i.prototype.willShow=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackWillShow&&o.buttonStackWillShow(this)}this.display("block")},i.prototype.didShow=function(){this.requireUpdate(ro.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidShow&&o.buttonStackDidShow(this)}},i.prototype.hide=function(t){0!==this.opacity.state&&(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.willHide(),!1!==t?this.opacity.setState(0,t,ro.Intrinsic):(this.opacity.setState(0,ro.Intrinsic),this.didHide()))},i.prototype.willHide=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackWillHide&&o.buttonStackWillHide(this)}},i.prototype.didHide=function(){this.display("none"),this.requireUpdate(ro.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.buttonStackDidHide&&o.buttonStackDidHide(this)}},i.prototype.onClick=function(t){var e;t.target===(null===(e=this.button)||void 0===e?void 0:e.node)&&t.stopPropagation()},i.prototype.onContextMenu=function(t){t.preventDefault()},Object.defineProperty(i,"closeIcon",{get:function(){return Nr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),i.Gesture=en.define({didMovePress:function(t,e){if(!t.defaultPrevented&&!this.owner.disclosure.isExpanded()){var i=this.owner.stackHeight,o=Math.min(Math.max(0,-(t.y-t.y0)/(.5*i)),1);this.owner.disclosure.setPhase(o),o>.1&&(t.clearHoldTimer(),this.owner.disclosure.isExpanding()||this.owner.disclosure.setState(this.owner.disclosure.value.expanding()))}},didEndPress:function(t,e){if(!t.defaultPrevented){var i=this.owner.disclosure.getPhase();t.t-t.t0<t.holdDelay?i<.1||this.owner.disclosure.isExpanded()?this.owner.disclosure.collapse():this.owner.disclosure.expand():i<.5?this.owner.disclosure.collapse():i>=.5&&this.owner.disclosure.expand()}},didCancelPress:function(t,e){2===t.buttons?this.owner.disclosure.toggle():this.owner.disclosure.getPhase()<.1||this.owner.disclosure.isExpanded()?this.owner.disclosure.collapse():this.owner.disclosure.expand()},didLongPress:function(t){t.preventDefault(),this.owner.disclosure.toggle()}}),m([en({extends:i.Gesture})],i.prototype,"gesture",void 0),m([Oo({type:$t,state:$t.collapsed(),updateFlags:ro.NeedsLayout,willExpand:function(){this.owner.willExpand(),this.owner.onExpand()},didExpand:function(){this.owner.didExpand()},willCollapse:function(){this.owner.willCollapse(),this.owner.onCollapse()},didCollapse:function(){this.owner.didCollapse()}})],i.prototype,"disclosure",void 0),m([Oo({type:Number,state:28,updateFlags:ro.NeedsLayout})],i.prototype,"buttonSpacing",void 0),m([Oo({type:Number,state:20,updateFlags:ro.NeedsLayout})],i.prototype,"itemSpacing",void 0),m([Sn({propertyNames:"opacity",type:Number,onEnd:function(t){1===t?this.owner.didShow():0===t&&this.owner.didHide()}})],i.prototype,"opacity",void 0),m([e.Lazy],i,"closeIcon",null),i}(ar),Is=function(t){function e(e){var i=t.call(this,e)||this;return i.iconCount=0,i.icon=null,i.onClick=i.onClick.bind(i),i.initButton(),i.initTheme(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("icon-button"),this.position.setState("relative",ro.Intrinsic),this.width.setState(44,ro.Intrinsic),this.height.setState(44,ro.Intrinsic),this.display.setState("flex",ro.Intrinsic),this.justifyContent.setState("center",ro.Intrinsic),this.alignItems.setState("center",ro.Intrinsic),this.borderTopLeftRadius.setState(4,ro.Intrinsic),this.borderTopRightRadius.setState(4,ro.Intrinsic),this.borderBottomLeftRadius.setState(4,ro.Intrinsic),this.borderBottomRightRadius.setState(4,ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic)},e.prototype.initTheme=function(){this.modifyTheme(fe.default,[[fe.translucent,1]])},e.prototype.initView=function(e){t.prototype.initView.call(this,e),Yr.initView(this,e)},e.prototype.pushIcon=function(t,i){var o=this.iconCount,n=o+1;this.iconCount=n,i=(void 0!==i||0!==o)&&(void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i));var s="icon"+o,a=this.getViewFastener(s),h=null!==a?a.view:null;null!==h&&(!1!==i?(h.opacity.setState(0,i,ro.Intrinsic),h.cssTransform.setState(r.Transform.rotate(r.Angle.deg(90)),i,ro.Intrinsic)):h.remove());var u="icon"+n,p=new e.IconFastener(this,u,u);p.iconIndex=n,this.icon=p;var d=Zr.create();d.setStyle("position","absolute"),d.setStyle("left","0"),d.setStyle("top","0"),d.opacity.setState(0,ro.Intrinsic),d.opacity.setState(1,i,ro.Intrinsic),d.cssTransform.setState(r.Transform.rotate(r.Angle.deg(-90)),ro.Intrinsic),d.cssTransform.setState(r.Transform.rotate(r.Angle.deg(0)),i,ro.Intrinsic),d.pointerEvents.setState("none",ro.Intrinsic),d.xAlign.setInherit(!0),d.yAlign.setInherit(!0),d.iconWidth.setInherit(!0),d.iconHeight.setInherit(!0),d.iconColor.setInherit(!0),d.graphics.setState(t,ro.Intrinsic),p.setView(d),this.setViewFastener(u,p),this.appendChildView(d,u)},e.prototype.popIcon=function(t){var e=this.iconCount,i=e-1;this.iconCount=i,t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t);var o="icon"+e,n=this.getViewFastener(o),s=null!==n?n.view:null;null!==s&&(!1!==t?(s.opacity.setState(0,t,ro.Intrinsic),s.cssTransform.setState(r.Transform.rotate(r.Angle.deg(-90)),t,ro.Intrinsic)):(s.remove(),this.setViewFastener(o,null)));var a="icon"+i,h=this.getViewFastener(a);this.icon=h;var u=null!==h?h.view:null;return null!==u&&(u.opacity.setState(1,t,ro.Intrinsic),u.cssTransform.setState(r.Transform.rotate(r.Angle.deg(0)),t,ro.Intrinsic),this.appendChildView(u,a)),s},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(ro.Intrinsic)){var n=this.getLookOr(se.backgroundColor,null);!this.gesture.isHovering()&&n instanceof Tt&&(n=n.alpha(0)),this.backgroundColor.setState(n,o,ro.Intrinsic)}if(!this.graphics.isInherited()){var r=this.graphics.value;if(r instanceof Wr){var s=r.withTheme(e,i);this.graphics.setOwnState(s,!!r.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(ro.NeedsLayout)},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&ro.NeedsLayout)&&(t&=~ro.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.viewFasteners;if(null!==t){var i=this.width.value;i=i instanceof r.Length?i.pxValue():this.node.offsetWidth;var o=this.height.value;for(var n in o=o instanceof r.Length?o.pxValue():this.node.offsetHeight,t){var s=t[n];if(s instanceof e.IconFastener){var l=s.view;null!==l&&(l.width.setState(i,ro.Intrinsic),l.height.setState(o,ro.Intrinsic),l.viewBox.setState("0 0 "+i+" "+o,ro.Intrinsic))}}}},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.on("click",this.onClick)},e.prototype.onUnmount=function(){this.off("click",this.onClick),t.prototype.onUnmount.call(this)},Object.defineProperty(e.prototype,"hovers",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setHovers=function(t){this.hovers!==t&&Object.defineProperty(this,"hovers",{value:t,configurable:!0,enumerable:!0})},e.prototype.onClick=function(t){t.stopPropagation();for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.buttonDidPress&&n.buttonDidPress(this)}},e.IconFastener=Zo.define({extends:void 0,type:Zr,child:!1,observe:!0,iconIndex:0,viewDidAnimate:function(t,e){e.opacity.isAnimating()||this.iconIndex===this.owner.iconCount||(e.remove(),this.iconIndex>this.owner.iconCount&&this.owner.setViewFastener(this.name,null))}}),e.Gesture=en.define({extends:Ls.Gesture,didStartHovering:function(){if(this.owner.hovers){this.owner.modifyMood(fe.default,[[fe.hovering,1]]);var t=this.owner.getLook(se.timing);this.owner.backgroundColor.takesPrecedence(ro.Intrinsic)&&this.owner.backgroundColor.setState(this.owner.getLookOr(se.backgroundColor,null),t,ro.Intrinsic)}},didStopHovering:function(){this.owner.modifyMood(fe.default,[[fe.hovering,void 0]]);var t=this.owner.getLook(se.timing);if(this.owner.backgroundColor.takesPrecedence(ro.Intrinsic)){var e=this.owner.getLookOr(se.backgroundColor,null);null!==e&&(e=e.alpha(0)),this.owner.backgroundColor.setState(e,t,ro.Intrinsic)}}}),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:r.Length.px(24),updateFlags:ro.NeedsLayout})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:r.Length.px(24),updateFlags:ro.NeedsLayout})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsLayout,didSetValue:function(t,e){if(null!==t){var i=this.owner.graphics.value;if(i instanceof Er){var o=i.withFillColor(t);this.owner.graphics.setOwnState(o)}}}})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,state:null,type:Object,updateFlags:ro.NeedsLayout})],e.prototype,"graphics",void 0),m([en({extends:e.Gesture})],e.prototype,"gesture",void 0),e}(Ls),ks=function(t){function e(e){var i=t.call(this,e)||this;return i.initDisclosureButton(),i}return w(e,t),e.prototype.initDisclosureButton=function(){this.addClass("disclosure-button"),this.display.setState("flex",ro.Intrinsic),this.justifyContent.setState("center",ro.Intrinsic),this.alignItems.setState("center",ro.Intrinsic),this.flexGrow.setState(1,ro.Intrinsic),this.flexShrink.setState(0,ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic);var t=this.append(ur,"icon");t.width.setState(24,ro.Intrinsic),t.height.setState(24,ro.Intrinsic),t.viewBox.setState("0 0 24 24",ro.Intrinsic);var e=t.append("polygon","arrow");e.points.setState("0 4 -6 -2 -4.59 -3.41 0 1.17 4.59 -3.41 6 -2",ro.Intrinsic),e.transform.setState(r.Transform.translate(12,12).rotate(r.Angle.deg(0)),ro.Intrinsic)},Object.defineProperty(e.prototype,"icon",{get:function(){return this.getChildView("icon")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arrow",{get:function(){return this.icon.getChildView("arrow")},enumerable:!1,configurable:!0}),e.prototype.onAnimate=function(e){if(t.prototype.onAnimate.call(this,e),this.disclosure.isUpdated()||this.collapsedColor.isUpdated()||this.expandedColor.isUpdated()){var i=this.disclosure.takeValue().phase,o=this.collapsedColor.takeValue(),n=this.expandedColor.takeValue();if(null!==o&&null!==n&&this.arrow.fill.takesPrecedence(ro.Intrinsic)){var s=o.interpolateTo(n);this.arrow.fill.setState(s(i),ro.Intrinsic)}var l=r.Transform.translate(12,12).rotate(r.Angle.deg(-180*i));this.arrow.transform.setState(l,ro.Intrinsic)}},e.mountFlags=ar.mountFlags|ro.NeedsAnimate,m([Oo({type:$t,inherit:!0,updateFlags:ro.NeedsAnimate})],e.prototype,"disclosure",void 0),m([Oo({type:Tt,inherit:!0,look:se.color,updateFlags:ro.NeedsAnimate})],e.prototype,"collapsedColor",void 0),m([Oo({type:Tt,inherit:!0,look:se.accentColor,updateFlags:ro.NeedsAnimate})],e.prototype,"expandedColor",void 0),e}(ar),Ws=function(t){function e(e){var i=t.call(this,e)||this;return i.tokenState="expanded",i.onClickHead=i.onClickHead.bind(i),i.onClickBody=i.onClickBody.bind(i),i.onClickFoot=i.onClickFoot.bind(i),i.initToken(),i}return w(e,t),e.prototype.initToken=function(){this.addClass("token"),this.position.setState("relative",ro.Intrinsic),this.height.setState(32,ro.Intrinsic),this.boxSizing.setState("content-box",ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.shape.injectView()},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initShape=function(t){t.addClass("shape"),t.setStyle("position","absolute"),t.setStyle("top","0"),t.setStyle("left","0"),this.head.injectView(t),this.headIcon.setView(this.headIcon.createView()),this.body.injectView(t),this.foot.injectView(t),this.footIcon.setView(this.footIcon.createView())},e.prototype.initHead=function(t){t.addClass("head"),t.fillRule.setState("evenodd",ro.Intrinsic),t.pointerEvents.setState("bounding-box",ro.Intrinsic),t.cursor.setState("pointer",ro.Intrinsic)},e.prototype.initHeadIcon=function(t){t.addClass("head-icon"),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.initBody=function(t){t.addClass("body"),t.pointerEvents.setState("fill",ro.Intrinsic),t.cursor.setState("pointer",ro.Intrinsic)},e.prototype.initFoot=function(t){t.addClass("foot"),t.fillRule.setState("evenodd",ro.Intrinsic),t.pointerEvents.setState("bounding-box",ro.Intrinsic),t.cursor.setState("pointer",ro.Intrinsic)},e.prototype.initFootIcon=function(t){t.addClass("foot-icon"),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.initLabelContainer=function(t){t.addClass("label"),t.display.setState("block",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.overflowX.setState("hidden",ro.Intrinsic),t.overflowY.setState("hidden",ro.Intrinsic),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.initLabel=function(t){t.position.setState("absolute",ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.bottom.setState(0,ro.Intrinsic),t.left.setState(0,ro.Intrinsic)},e.prototype.isExpanded=function(){return"expanded"===this.tokenState||"expanding"===this.tokenState},e.prototype.isCollapsed=function(){return"collapsed"===this.tokenState||"collapsing"===this.tokenState},Object.defineProperty(e.prototype,"fillLook",{get:function(){return se.accentColor},enumerable:!1,configurable:!0}),e.prototype.needsProcess=function(t,e){return 0!=(t&ro.NeedsLayout)&&(t|=ro.NeedsAnimate),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutToken()},e.prototype.layoutToken=function(){var t=this.paddingTop.getStateOr(r.Length.zero()).pxValue(),e=this.paddingRight.getStateOr(r.Length.zero()).pxValue(),i=this.paddingBottom.getStateOr(r.Length.zero()).pxValue(),o=this.paddingLeft.getStateOr(r.Length.zero()).pxValue(),n=this.node.clientHeight,s=n-t-i,l=s/2,a=Math.sqrt(4+2*l*2),h=Math.asin(a/(l+2)),u=l/2,p=l,d=l/2,c=this.expandedPhase.value,f=this.icon.state,v=this.accessory.state,y=0,g=0,w=this.label.view;null!==w&&(g+=u+(y=w.node.clientWidth)+p);var m=0;null!==v&&(m+=2*l+d);var S=s;0!==c&&0!==g&&(S+=2+c*g);var C=S;0!==c&&0!==m&&(S+=2+c*m);var b=S+o+e,V=n;this.width.setState(S,ro.Intrinsic);var T=this.labelContainer.view;null!==T&&(T.display.setState(0!==c?"block":"none",ro.Intrinsic),T.left.setState(o+s+2+u,ro.Intrinsic),T.top.setState(t,ro.Intrinsic),T.width.setState(c*y,ro.Intrinsic),T.height.setState(s,ro.Intrinsic));var F=this.shape.view;null!==F&&(F.width.setState(b,ro.Intrinsic),F.height.setState(V,ro.Intrinsic),F.viewBox.setState("0 0 "+b+" "+V,ro.Intrinsic));var P=this.head.view;if(null!==P){if((I=new gr).setPrecision(3),I.arc(o+l,t+l,l,-Math.PI/2,Math.PI/2*3),I.closePath(),null!==f&&!this.icon.embossed){var M=new wr(I),D=new r.R2Box(o,t,o+s,t+s);f.render(M,D),this.headIcon.removeView()}P.d.setState(I.toString(),ro.Intrinsic)}var x=this.headIcon.view;if(null!==x)if(null!==f&&this.icon.embossed){(I=new gr).setPrecision(3);M=new wr(I),D=new r.R2Box(o,t,o+s,t+s);f.render(M,D),x.d.setState(I.toString(),ro.Intrinsic),this.headIcon.injectView()}else this.headIcon.removeView();var L=this.body.view;if(null!==L){if((I=new gr).setPrecision(3),0!==c){var A=1-c;I.arc(o+l,t+l,l+2,-Math.PI/2+h,Math.PI/2-h),I.arc(o+C-l-2*A,t+l,l+2*A,Math.PI/2-A*h,-Math.PI/2+A*h,!0),I.closePath()}L.d.setState(I.toString(),ro.Intrinsic)}var O=this.foot.view;if(null!==O&&null!==v){if((I=new gr).setPrecision(3),0!==c){A=1-c;if(I.arc(o+C-l,t+l,l+2,-Math.PI/2+h,Math.PI/2-h),I.arc(o+S-l-2*A,t+l,l+2*A,Math.PI/2-A*h,-Math.PI/2+A*h,!0),I.closePath(),null!==v&&!this.accessory.embossed){M=new wr(I),D=new r.R2Box(o+C+2,t,o+C+2+2*l,t+2*l);v.render(M,D),this.headIcon.removeView()}}O.d.setState(I.toString(),ro.Intrinsic)}var R=this.footIcon.view;if(null!==R)if(null!==v&&this.accessory.embossed){var I;if((I=new gr).setPrecision(3),0!==c){M=new wr(I),D=new r.R2Box(o+C+2,t,o+C+2+s,t+s);v.render(M,D)}R.d.setState(I.toString(),ro.Intrinsic),this.footIcon.injectView()}else this.footIcon.removeView()},e.prototype.expand=function(t){"expanded"===this.tokenState&&1===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),"expanding"!==this.tokenState&&(this.willExpand(),this.onExpand()),!1!==t?1!==this.expandedPhase.value?this.expandedPhase.setState(1,t,ro.Intrinsic):setTimeout(this.didExpand.bind(this)):(this.expandedPhase.setState(1,ro.Intrinsic),this.didExpand()))},e.prototype.willExpand=function(){this.tokenState="expanding";var t=this.labelContainer.view;null!==t&&t.display.setState("block",ro.Intrinsic);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenWillExpand&&n.tokenWillExpand(this)}},e.prototype.onExpand=function(){},e.prototype.didExpand=function(){this.tokenState="expanded",this.requireUpdate(ro.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidExpand&&o.tokenDidExpand(this)}},e.prototype.collapse=function(t){"collapsed"===this.tokenState&&0===this.expandedPhase.value||(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),"collapsing"!==this.tokenState&&(this.willCollapse(),this.onCollapse()),!1!==t?0!==this.expandedPhase.value?this.expandedPhase.setState(0,t,ro.Intrinsic):setTimeout(this.didCollapse.bind(this)):(this.expandedPhase.setState(0,ro.Intrinsic),this.didCollapse()))},e.prototype.willCollapse=function(){this.tokenState="collapsing";for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenWillCollapse&&o.tokenWillCollapse(this)}},e.prototype.onCollapse=function(){var t=this.label.view;null!==t&&t.node.blur()},e.prototype.didCollapse=function(){this.tokenState="collapsed",this.requireUpdate(ro.NeedsLayout);for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidCollapse&&o.tokenDidCollapse(this)}},e.prototype.toggle=function(t){var e=this.tokenState;"collapsed"===e||"collapsing"===e?this.expand(t):"expanded"!==e&&"expanding"!==e||this.collapse(t)},e.prototype.onClickHead=function(t){this.toggle();var e=this.label.view;null!==e&&this.isExpanded()&&e.node.focus(),this.didPressHead()},e.prototype.didPressHead=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressHead&&o.tokenDidPressHead(this)}},e.prototype.onClickBody=function(t){this.didPressBody()},e.prototype.didPressBody=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressBody&&o.tokenDidPressBody(this)}},e.prototype.onClickFoot=function(t){this.didPressFoot()},e.prototype.didPressFoot=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.tokenDidPressFoot&&o.tokenDidPressFoot(this)}},e.HeadGesture=en.define({didStartHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,1]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.headIcon.view;if(null!==i&&i.fill.takesPrecedence(ro.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(fe.embossed,1),null);i.fill.setState(o,e,ro.Intrinsic)}},didStopHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,void 0]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.headIcon.view;if(null!==i&&i.fill.takesPrecedence(ro.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(fe.embossed,1),null);i.fill.setState(o,e,ro.Intrinsic)}},didBeginPress:function(t,e){"mouse"!==t.inputType&&this.beginHover(t,e)},didMovePress:function(t,e){t.isRunaway()&&this.cancelPress(t,e)},didEndPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)},didCancelPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)}}),e.BodyGesture=en.define({didStartHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,1]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.label.view;null!==i&&i.color.takesPrecedence(ro.Intrinsic)&&i.color.setState(t.getLookOr(se.backgroundColor,null),e,ro.Intrinsic)},didStopHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,void 0]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.label.view;null!==i&&i.color.takesPrecedence(ro.Intrinsic)&&i.color.setState(t.getLookOr(se.backgroundColor,null),e,ro.Intrinsic)},didBeginPress:function(t,e){"mouse"!==t.inputType&&this.beginHover(t,e)},didMovePress:function(t,e){t.isRunaway()&&this.cancelPress(t,e)},didEndPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)},didCancelPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)}}),e.FootGesture=en.define({didStartHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,1]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.footIcon.view;if(null!==i&&i.fill.takesPrecedence(ro.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(fe.embossed,1),null);i.fill.setState(o,e,ro.Intrinsic)}},didStopHovering:function(){var t=this.view;t.modifyMood(fe.default,[[fe.hovering,void 0]]);var e=t.getLook(se.timing);t.fill.setState(t.getLookOr(this.owner.fillLook,null),e,ro.Intrinsic);var i=this.owner.footIcon.view;if(null!==i&&i.fill.takesPrecedence(ro.Intrinsic)){var o=t.getLookOr(this.owner.fillLook,t.mood.getState().updated(fe.embossed,1),null);i.fill.setState(o,e,ro.Intrinsic)}},didBeginPress:function(t,e){"mouse"!==t.inputType&&this.beginHover(t,e)},didMovePress:function(t,e){t.isRunaway()&&this.cancelPress(t,e)},didEndPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)},didCancelPress:function(t,e){"mouse"===t.inputType&&this.view.clientBounds.contains(t.x,t.y)||this.endHover(t,e)}}),m([Oo({type:Number,state:1,updateFlags:ro.NeedsLayout,onEnd:function(t){var e=this.owner.tokenState;"expanding"===e&&1===t?this.owner.didExpand():"collapsing"===e&&0===t&&this.owner.didCollapse()}})],e.prototype,"expandedPhase",void 0),m([Zo({key:!0,type:ur,onSetView:function(t){null!==t&&this.owner.initShape(t)}})],e.prototype,"shape",void 0),m([Zo({key:!0,type:ur.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initHead(t),this.owner.headGesture.setView(t)},viewDidMount:function(t){t.on("click",this.owner.onClickHead)},viewWillUnmount:function(t){t.off("click",this.owner.onClickHead)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,ro.Intrinsic);var n=this.owner.headIcon.view;if(null!==n&&n.fill.takesPrecedence(ro.Intrinsic)){var r=t.getOr(this.owner.fillLook,e.updated(fe.embossed,1),null);n.fill.setState(r,i,ro.Intrinsic)}}})],e.prototype,"head",void 0),m([en({extends:e.HeadGesture})],e.prototype,"headGesture",void 0),m([Zo({key:!0,type:ur.path,child:!1,onSetView:function(t){null!==t&&this.owner.initHeadIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.insertChildView(e,this.owner.body.view,o)}})],e.prototype,"headIcon",void 0),m([bo({extends:void 0,type:Object,state:null,updateFlags:ro.NeedsLayout,embossed:!0})],e.prototype,"icon",void 0),m([Zo({key:!0,type:ur.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initBody(t),this.owner.bodyGesture.setView(t)},viewDidMount:function(t){t.on("click",this.owner.onClickBody)},viewWillUnmount:function(t){t.off("click",this.owner.onClickBody)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,ro.Intrinsic);var n=this.owner.label.view;null!==n&&n.color.takesPrecedence(ro.Intrinsic)&&n.color.setState(t.getOr(se.backgroundColor,e,null),i,ro.Intrinsic)}})],e.prototype,"body",void 0),m([en({extends:e.BodyGesture})],e.prototype,"bodyGesture",void 0),m([Zo({key:!0,type:ur.path,child:!1,observe:!0,onSetView:function(t){null!==t&&this.owner.initFoot(t),this.owner.footGesture.setView(t)},viewDidMount:function(t){t.on("click",this.owner.onClickFoot)},viewWillUnmount:function(t){t.off("click",this.owner.onClickFoot)},viewDidApplyTheme:function(t,e,i,o){o.fill.setState(t.getOr(this.owner.fillLook,e,null),i,ro.Intrinsic);var n=this.owner.footIcon.view;if(null!==n&&n.fill.takesPrecedence(ro.Intrinsic)){var r=t.getOr(this.owner.fillLook,e.updated(fe.embossed,1),null);n.fill.setState(r,i,ro.Intrinsic)}}})],e.prototype,"foot",void 0),m([en({extends:e.FootGesture})],e.prototype,"footGesture",void 0),m([Zo({key:!0,type:ur.path,child:!1,onSetView:function(t){null!==t&&this.owner.initFootIcon(t)},insertView:function(t,e,i,o){var n=this.owner.shape.view;null!==n&&n.appendChildView(e,o)}})],e.prototype,"footIcon",void 0),m([bo({extends:void 0,type:Object,state:null,updateFlags:ro.NeedsLayout,embossed:!0})],e.prototype,"accessory",void 0),m([Zo({key:!0,type:ar,onSetView:function(t){null!==t&&this.owner.initLabelContainer(t)}})],e.prototype,"labelContainer",void 0),m([Zo({key:!0,child:!1,type:ar,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}}})],e.prototype,"label",void 0),e}(ar),Es=function(t){function e(e){var i=t.call(this,e)||this;return i.onInputUpdate=i.onInputUpdate.bind(i),i.onInputChange=i.onInputChange.bind(i),i.onInputKey=i.onInputKey.bind(i),i}return w(e,t),e.prototype.initToken=function(){this.stylesheet.injectView(),t.prototype.initToken.call(this),this.addClass("input-token"),this.label.setView(this.label.createView())},e.prototype.initView=function(e){t.prototype.initView.call(this,e)},e.prototype.initStylesheet=function(t){var i=t.sheet;if(null!==i){var o=new e.PlaceholderRule(i,"placeholder");i.setCssRule("placeholder",o)}},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.paddingTop.setState(0,ro.Intrinsic),e.paddingRight.setState(0,ro.Intrinsic),e.paddingBottom.setState(0,ro.Intrinsic),e.paddingLeft.setState(0,ro.Intrinsic),e.borderTopStyle.setState("none",ro.Intrinsic),e.borderRightStyle.setState("none",ro.Intrinsic),e.borderBottomStyle.setState("none",ro.Intrinsic),e.borderLeftStyle.setState("none",ro.Intrinsic),e.boxSizing.setState("border-box",ro.Intrinsic),e.backgroundColor.setState(Tt.transparent(),ro.Intrinsic),e.appearance.setState("none",ro.Intrinsic),e.outlineStyle.setState("none",ro.Intrinsic),e.pointerEvents.setState("auto",ro.Intrinsic)},Object.defineProperty(e.prototype,"placeholderLook",{get:function(){return se.neutralColor},enumerable:!1,configurable:!0}),e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o);var n=this.stylesheet.view;if(null!==n){var r=n.getCssRule("placeholder");null!==r&&r.color.setState(e.getOr(this.placeholderLook,i,null),o,ro.Intrinsic)}var s=this.label.view;null!==s&&s.font(e.getOr(se.font,i,null),!1,ro.Intrinsic)},e.prototype.onInputUpdate=function(t){var e=this.label.view;null!==e&&this.didUpdateInput(e)},e.prototype.didUpdateInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidUpdateInput&&n.tokenDidUpdateInput(t,this)}},e.prototype.onInputChange=function(t){var e=this.label.view;null!==e&&this.didChangeInput(e)},e.prototype.didChangeInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidChangeInput&&n.tokenDidChangeInput(t,this)}},e.prototype.onInputKey=function(t){var e=this.label.view;null!==e&&"Enter"===t.key&&this.didAcceptInput(e)},e.prototype.didAcceptInput=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.tokenDidAcceptInput&&n.tokenDidAcceptInput(t,this)}},e.PlaceholderRule=Yn.define({css:"::placeholder {}"}),m([Zo({key:!0,type:ar.style,child:!0,observe:!0,viewDidMount:function(t){this.owner.initStylesheet(t)}})],e.prototype,"stylesheet",void 0),m([Zo({child:!1,type:ar.input,observe:!0,onSetView:function(t){if(null!==t){if(null===t.parentView){this.owner.labelContainer.injectView();var e=this.owner.labelContainer.view;null!==e&&e.appendChildView(t)}this.owner.initLabel(t)}},viewDidMount:function(t){t.on("input",this.owner.onInputUpdate),t.on("change",this.owner.onInputChange),t.on("keydown",this.owner.onInputKey)},viewWillUnmount:function(t){t.off("input",this.owner.onInputUpdate),t.off("change",this.owner.onInputChange),t.off("keydown",this.owner.onInputKey)}})],e.prototype,"label",void 0),e}(Ws),Ns=function(){function t(t,e,i,o,n,r,s,l,a,h,u){this.key=t,this.grow=e,this.shrink=i,this.basis=o,this.optional=n,this.persistent=r,this.textColor=s,this.width=l,this.left=a,this.right=h,this.hidden=u}return t.prototype.withFlex=function(t,e,i){return i=void 0!==i?r.Length.fromAny(i):this.basis,this.copy(this.key,t,e,i,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.asOptional=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,t,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.asPersistent=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,t,this.textColor,this.width,this.left,this.right,this.hidden)},t.prototype.withTextColor=function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,t,this.width,this.left,this.right,this.hidden)},t.prototype.asHidden=function(t){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,t)},t.prototype.resized=function(t,e,i,o){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),void 0===o&&(o=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,t,e,i,o)},t.prototype.copy=function(e,i,o,n,r,s,l,a,h,u,p){return new t(e,i,o,n,r,s,l,a,h,u,p)},t.prototype.equivalentTo=function(i,o){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equivalentTo(i.basis,o)&&this.optional===i.optional&&this.persistent===i.persistent&&e.Equivalent(this.textColor,i.textColor,o))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&this.optional===i.optional&&this.persistent===i.persistent&&e.Equals(this.textColor,i.textColor)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&this.hidden===i.hidden)},t.prototype.debug=function(t){return t=t.write("ColLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),this.optional&&(t=t.write(46).write("asOptional").write(40).debug(this.optional).write(41)),this.persistent&&(t=t.write(46).write("asPersistent").write(40).debug(this.persistent).write(41)),this.textColor&&(t=t.write(46).write("withTextColor").write(40).debug(this.textColor).write(41)),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n,s,l,a){return void 0===i&&(i=0),void 0===o&&(o=1),n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),void 0===s&&(s=!1),void 0===l&&(l=!1),void 0===a&&(a=null),null===a||a instanceof se||(a=Tt.fromAny(a)),new t(e,i,o,n,s,l,a,null,null,null,!1)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var s=e.basis;s=void 0!==s?r.Length.fromAny(s):r.Length.zero();var l=e.optional;void 0===l&&(l=!1);var a=e.persistent;void 0===a&&(a=!1);var h=e.textColor;void 0===h&&(h=null),null===h||h instanceof se||(h=Tt.fromAny(h));var u=e.width;u=null!=u?r.Length.fromAny(u):null;var p=e.left;p=null!=p?r.Length.fromAny(p):null;var d=e.right;d=null!=d?r.Length.fromAny(d):null;var c=e.hidden;return void 0===c&&(c=!1),new t(i,o,n,s,l,a,h,u,p,d,c)},t}(),Us=function(){function t(t,e,i,o,n){this.width=t,this.left=e,this.right=i,this.colSpacing=o,this.cols=n}return t.prototype.getCol=function(t){for(var e=this.cols,i=0,o=e.length;i<o;i+=1){var n=e[i];if(t===n.key)return n}return null},t.prototype.resized=function(i,o,n,s){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===s?s=this.colSpacing:null!==s&&(s=r.Length.fromAny(s)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.colSpacing,s))return this;for(var l=this.cols,a=l.length,h=new Array(a),u=i.pxValue(),p=null!==o?o.pxValue(u):0,d=null!==n?n.pxValue(u):0,c=null!==s?s.pxValue(u):0,f=0,v=0,y=0,g=p+d,w=p,m=0;m<a;m+=1){0!==m&&(g+=c,w+=c);var S=(F=l[m]).basis.pxValue(u);h[m]=F.resized(S,w,u-S-w,!1),f+=F.grow,v+=F.shrink,F.optional&&(y+=1),g+=S,w+=S}if(g>u&&y>0){for(m=a-1;m>=0&&y>0;){S=(F=h[m]).width.pxValue();if(F.optional&&(h[m]=F.resized(0,w,u-w,!0),f-=F.grow,v-=F.shrink,y-=1,g-=S),w-=S,0!==m&&(g-=c,w-=c),g<=u)break;m-=1}for(m+=1;m<a;){if(!(F=h[m]).optional){g+=c,w+=c;S=F.basis.pxValue(u);h[m]=F.resized(S,w,u-S-w),w+=S}m+=1}}if(g<u&&f>0){var C=u-g,b=p,V=0;for(m=0;m<a;m+=1){if((F=h[m]).hidden)h[m]=F.resized(0,b+c,u-b-c);else{0!==V&&(b+=c);S=F.basis.pxValue(u)+C*(F.grow/f);h[m]=F.resized(S,b,u-S-b),b+=S,V+=1}}}else if(g>u&&v>0){C=g-u;var T=p;for(V=0,m=0;m<a;m+=1){var F;if((F=h[m]).hidden)h[m]=F.resized(0,T+c,u-T-c);else{0!==V&&(T+=c);S=F.basis.pxValue(u)-C*(F.shrink/v);h[m]=F.resized(S,T,u-S-T),T+=S,V+=1}}}return new t(i,o,n,s,h)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.cols,n=e.cols,r=o.length;if(r===n.length){for(var s=0;s<r;s+=1)if(!o[s].equivalentTo(n[s],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.colSpacing,i.colSpacing)&&e.Arrays.equal(this.cols,i.cols))},t.prototype.debug=function(t){t=t.write("TableLayout").write(46).write("of").write(40);for(var e=0,i=this.cols.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.cols[e]);return t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.colSpacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.colSpacing).write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=Ns.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var s=e.colSpacing;s=null!=s?r.Length.fromAny(s):null;for(var l=e.cols.length,a=new Array(l),h=0;h<l;h+=1)a[h]=Ns.fromAny(e.cols[h]);return new t(i,o,n,s,a)},t}(),Gs=function(t){function e(e){var i=t.call(this,e)||this;return i.initCell(),i}return w(e,t),e.prototype.initCell=function(){this.addClass("cell"),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic)},e.prototype.onPress=function(t,e){},e.prototype.didPress=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidPress&&r.viewDidPress(t,e,this)}},e.prototype.onLongPress=function(t){},e.prototype.didLongPress=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidLongPress&&n.viewDidLongPress(t,this)}},e}(ar),Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("cell-text")},e.prototype.createContent=function(t){var e=ar.span.create();return e.alignSelf.setState("center",ro.Intrinsic),e.whiteSpace.setState("nowrap",ro.Intrinsic),e.textOverflow.setState("ellipsis",ro.Intrinsic),e.overflowX.setState("hidden",ro.Intrinsic),e.overflowY.setState("hidden",ro.Intrinsic),void 0!==t&&e.text(t),e},e.prototype.initContent=function(t){},e.prototype.attachContent=function(t){},e.prototype.detachContent=function(t){},e.prototype.willSetContent=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetContent&&r.viewWillSetContent(t,e,this)}},e.prototype.onSetContent=function(t,e){null!==e&&this.detachContent(e),null!==t&&(this.attachContent(t),this.initContent(t))},e.prototype.didSetContent=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetContent&&r.viewDidSetContent(t,e,this)}},m([Zo({key:!0,type:ar,willSetView:function(t,e){this.owner.willSetContent(t,e)},onSetView:function(t,e){this.owner.onSetContent(t,e)},didSetView:function(t,e){this.owner.didSetContent(t,e)},fromAny:function(t){return t instanceof ar?t:this.owner.createContent(t)}})],e.prototype,"content",void 0),e}(Gs),js=function(t){function e(e){var i=t.call(this,e)||this;return i.initSvg(),i}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("cell-icon")},e.prototype.initSvg=function(){var t=this.createSvgView();null!==t&&this.setChildView("svg",t)},e.prototype.createSvgView=function(){return Zr.create()},Object.defineProperty(e.prototype,"svgView",{get:function(){var t=this.getChildView("svg");return t instanceof Zr?t:null},enumerable:!1,configurable:!0}),e.prototype.willSetGraphics=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGraphics&&r.viewWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e){this.requireUpdate(ro.NeedsRasterize|ro.NeedsComposite)},e.prototype.didSetGraphics=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGraphics&&r.viewDidSetGraphics(t,e,this)}},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),"svg"===e.key&&e instanceof Zr&&this.onInsertSvg(e)},e.prototype.onInsertSvg=function(t){t.xAlign.setInherit(!0),t.yAlign.setInherit(!0),t.iconWidth.setInherit(!0),t.iconHeight.setInherit(!0),t.iconColor.setInherit(!0),t.graphics.setInherit(!0),t.setStyle("position","absolute")},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Wr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(ro.NeedsLayout)},e.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e);var i=this.iconColor.takeUpdatedValue();if(null!=i){var o=this.graphics.value;if(o instanceof Er){var n=o.withFillColor(i);this.graphics.setOwnState(n)}}},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&ro.NeedsLayout)&&(t&=~ro.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutIcon()},e.prototype.layoutIcon=function(){var t=this.svgView;if(null!==t&&(t.width.takesPrecedence(ro.Intrinsic)||t.height.takesPrecedence(ro.Intrinsic)||t.viewBox.takesPrecedence(ro.Intrinsic))){var e=this.width.value;e=e instanceof r.Length?e.pxValue():this.node.offsetWidth;var i=this.height.value;i=i instanceof r.Length?i.pxValue():this.node.offsetHeight,t.width.setState(e,ro.Intrinsic),t.height.setState(i,ro.Intrinsic),t.viewBox.setState("0 0 "+e+" "+i,ro.Intrinsic)}},m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsLayout})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,type:Object,state:null,updateFlags:ro.NeedsLayout,willSetValue:function(t,e){this.owner.willSetGraphics(t,e)},didSetValue:function(t,e){this.owner.onSetGraphics(t,e),this.owner.didSetGraphics(t,e)}})],e.prototype,"graphics",void 0),e}(Gs),Hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.addClass("cell-disclosure"),this.button.injectView()},e.prototype.initButton=function(t){},e.prototype.attachButton=function(t){},e.prototype.detachButton=function(t){},e.prototype.willSetButton=function(t,e){},e.prototype.onSetButton=function(t,e){null!==e&&this.detachButton(e),null!==t&&(this.attachButton(t),this.initButton(t))},e.prototype.didSetButton=function(t,e){},e.prototype.didPress=function(e,i){e.preventDefault();var o=this.disclosure.superAnimator;o instanceof Ko&&o.toggle(),t.prototype.didPress.call(this,e,i)},m([Oo({type:$t,inherit:!0})],e.prototype,"disclosure",void 0),m([Zo({key:!0,type:ks,willSetView:function(t,e){this.owner.willSetButton(t,e)},onSetView:function(t,e){this.owner.onSetButton(t,e)},didSetView:function(t,e){this.owner.didSetButton(t,e)}})],e.prototype,"button",void 0),e}(Gs),qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(ht),zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetContent&&r.traitWillSetContent(t,e,this)}},e.prototype.onSetContent=function(t,e){},e.prototype.didSetContent=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetContent&&r.traitDidSetContent(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetContent(t,e)},didSetState:function(t,e){this.owner.onSetContent(t,e),this.owner.didSetContent(t,e)}})],e.prototype,"content",void 0),e}(qs),Ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetIcon=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetIcon&&r.traitWillSetIcon(t,e,this)}},e.prototype.onSetIcon=function(t,e){},e.prototype.didSetIcon=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetIcon&&r.traitDidSetIcon(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetIcon(t,e)},didSetState:function(t,e){this.owner.onSetIcon(t,e),this.owner.didSetIcon(t,e)}})],e.prototype,"icon",void 0),e}(qs),Xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initCellTrait=function(t){},e.prototype.attachCellTrait=function(t){},e.prototype.detachCellTrait=function(t){},e.prototype.willSetCellTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetCellTrait&&r.controllerWillSetCellTrait(t,e,this)}},e.prototype.onSetCellTrait=function(t,e){null!==e&&this.detachCellTrait(e),null!==t&&(this.attachCellTrait(t),this.initCellTrait(t))},e.prototype.didSetCellTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetCellTrait&&r.controllerDidSetCellTrait(t,e,this)}},e.prototype.createCellView=function(){return Gs.create()},e.prototype.initCellView=function(t){},e.prototype.attachCellView=function(t){},e.prototype.detachCellView=function(t){},e.prototype.willSetCellView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetCellView&&r.controllerWillSetCellView(t,e,this)}},e.prototype.onSetCellView=function(t,e){null!==e&&this.detachCellView(e),null!==t&&(this.attachCellView(t),this.initCellView(t))},e.prototype.didSetCellView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetCellView&&r.controllerDidSetCellView(t,e,this)}},e.prototype.didPressCellView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidPressCellView&&s.controllerDidPressCellView(t,e,i,this)}},e.prototype.didLongPressCellView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidLongPressCellView&&r.controllerDidLongPressCellView(t,e,this)}},e.createCell=function(t){return t instanceof zs?new Ks:t instanceof Ys?new Zs:new e},e.CellFastener=Vs.define({viewType:Gs,observeView:!0,willSetView:function(t,e){this.owner.willSetCellView(t,e)},onSetView:function(t,e){this.owner.onSetCellView(t,e)},didSetView:function(t,e){this.owner.didSetCellView(t,e)},viewDidPress:function(t,e,i){this.owner.didPressCellView(t,e,i)},viewDidLongPress:function(t,e){this.owner.didLongPressCellView(t,e)},createView:function(){return this.owner.createCellView()},traitType:qs,willSetTrait:function(t,e){this.owner.willSetCellTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetCellTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetCellTrait(t,e)}}),m([Vs({extends:e.CellFastener})],e.prototype,"cell",void 0),e}(Ds),Ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.attachCellTrait=function(e){t.prototype.attachCellTrait.call(this,e),this.setContentView(e.content.state,e)},e.prototype.detachCellTrait=function(e){this.setContentView(null,e),t.prototype.detachCellTrait.call(this,e)},e.prototype.createCellView=function(){return Bs.create()},e.prototype.attachCellView=function(t){this.content.setView(t.content.view);var e=this.cell.trait;null!==e&&this.setContentView(e.content.state,e)},e.prototype.detachCellView=function(t){this.content.setView(null)},e.prototype.createContentView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setContentView=function(t,e){var i=this.cell.view;if(null!==i){var o=null!==t?this.createContentView(t,e):null;i.content.setView(o)}},e.prototype.initContentView=function(t){},e.prototype.attachContentView=function(t){},e.prototype.detachContentView=function(t){},e.prototype.willSetContentView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetCellContentView&&r.controllerWillSetCellContentView(t,e,this)}},e.prototype.onSetContentView=function(t,e){null!==e&&this.detachContentView(e),null!==t&&(this.attachContentView(t),this.initContentView(t))},e.prototype.didSetContentView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetCellContentView&&r.controllerDidSetCellContentView(t,e,this)}},e.CellFastener=Vs.define({extends:Xs.CellFastener,viewType:Bs,observeView:!0,viewDidSetContent:function(t,e){this.owner.content.setView(t)},traitType:zs,observeTrait:!0,traitDidSetContent:function(t,e,i){this.owner.setContentView(t,i)}}),m([Vs({extends:e.CellFastener})],e.prototype,"cell",void 0),m([Cs({type:ar,willSetView:function(t,e){this.owner.willSetContentView(t,e)},onSetView:function(t,e){this.owner.onSetContentView(t,e)},didSetView:function(t,e){this.owner.didSetContentView(t,e)}})],e.prototype,"content",void 0),e}(Xs),Zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.attachCellTrait=function(e){t.prototype.attachCellTrait.call(this,e),this.setIcon(e.icon.state)},e.prototype.detachCellTrait=function(e){this.setIcon(null),t.prototype.detachCellTrait.call(this,e)},e.prototype.createCellView=function(){return js.create()},e.prototype.attachCellView=function(t){var e=this.cell.trait;null!==e&&this.setIcon(e.icon.state)},e.prototype.detachCellView=function(t){},e.prototype.setIcon=function(t){var e=this.cell.view;null!==e&&e.graphics.setState(t)},e.prototype.willSetCellIcon=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCellIcon&&s.controllerWillSetCellIcon(t,e,this)}},e.prototype.onSetCellIcon=function(t,e,i){},e.prototype.didSetCellIcon=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCellIcon&&s.controllerDidSetCellIcon(t,e,this)}},e.CellFastener=Vs.define({extends:Xs.CellFastener,viewType:js,observeView:!0,viewWillSetGraphics:function(t,e,i){this.owner.willSetCellIcon(t,e,i)},viewDidSetGraphics:function(t,e,i){this.owner.onSetCellIcon(t,e,i),this.owner.didSetCellIcon(t,e,i)},traitType:Ys,observeTrait:!0,traitDidSetIcon:function(t,e,i){this.owner.setIcon(t)}}),m([Vs({extends:e.CellFastener})],e.prototype,"cell",void 0),e}(Xs),_s=function(t){function e(e){var i=t.call(this,e)||this;return i.cellFasteners=[],i.initLeaf(),i}return w(e,t),e.prototype.initLeaf=function(){this.addClass("leaf"),this.position.setState("relative",ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic);var t=this.highlight.getPhase(),e=this.hover.getPhase(),i=Math.max(t,e);this.modifyMood(fe.default,[[fe.transparent,1-i],[fe.hovering,e*(1-t)],[fe.selected,t]],!1)},e.prototype.didSetDepth=function(t,e){},e.prototype.didSetHover=function(t,e){var i=this.highlight.getPhase(),o=t.phase,n=Math.max(i,o);this.modifyMood(fe.default,[[fe.transparent,1-n],[fe.hovering,o*(1-i)],[fe.selected,i]],!1),0!==n?this.backgroundColor.setLook(se.backgroundColor,ro.Intrinsic):(this.backgroundColor.setLook(null,ro.Intrinsic),this.backgroundColor.setState(null,ro.Intrinsic))},e.prototype.willHighlight=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillHighlight&&o.viewWillHighlight(this)}},e.prototype.onHighlight=function(){},e.prototype.didHighlight=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidHighlight&&o.viewDidHighlight(this)}},e.prototype.willUnhighlight=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillUnhighlight&&o.viewWillUnhighlight(this)}},e.prototype.onUnhighlight=function(){},e.prototype.didUnhighlight=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidUnhighlight&&o.viewDidUnhighlight(this)}},e.prototype.didSetHighlight=function(t,e){var i=t.phase,o=this.hover.getPhase(),n=Math.max(i,o);this.modifyMood(fe.default,[[fe.transparent,1-n],[fe.hovering,o*(1-i)],[fe.selected,i]],!1),0!==n?this.backgroundColor.setLook(se.backgroundColor,ro.Intrinsic):(this.backgroundColor.setLook(null,ro.Intrinsic),this.backgroundColor.setState(null,ro.Intrinsic))},e.prototype.getCell=function(t,e){void 0===e&&(e=Gs);var i=this.getChildView(t);return i instanceof e?i:null},e.prototype.getOrCreateCell=function(t,e){var i=this.getChildView(t);return i instanceof e||(i=ar.fromConstructor(e),this.setChildView(t,i)),i},e.prototype.setCell=function(t,e){this.setChildView(t,e)},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createCellFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.width.setState(0,ro.Intrinsic),t.height.setState(this.height.state,ro.Intrinsic)},e.prototype.attachCell=function(t,e){},e.prototype.detachCell=function(t,e){},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetCell&&l.viewWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetCell&&l.viewDidSetCell(t,e,i,this)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCell=function(t){return t instanceof Gs?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectCell(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectCell(e);null!==i&&this.removeCell(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutLeaf()},e.prototype.layoutLeaf=function(){var t=this.rowHeight.value;null!==t&&this.height.setState(t,ro.Intrinsic)},e.prototype.displayChildViews=function(e,i,o){0!=(e&ro.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.layout.state,r=this.height.state,s=this.stretch.getPhaseOr(1);t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof Gs){var l=t.key,a=null!==n&&void 0!==l?n.getCol(l):null;if(null!==a){t.display.setState(a.hidden?"none":"flex",ro.Intrinsic),t.left.setState(a.left,ro.Intrinsic),t.width.setState(a.width,ro.Intrinsic),t.height.setState(r,ro.Intrinsic);var h=a.textColor;h instanceof se?t.color.setLook(h,ro.Intrinsic):t.color.setState(h,ro.Intrinsic),a.persistent||t.opacity.setState(s,ro.Intrinsic)}else t.display.setState("none",ro.Intrinsic),t.left.setState(null,ro.Intrinsic),t.width.setState(null,ro.Intrinsic),t.height.setState(null,ro.Intrinsic)}o.call(this,t,e,i)}))},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountViewFasteners.call(this)},e.prototype.glow=function(t){if(t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0),void 0===t.detail){var e="mouse"===t.inputType?0:100;t.detail=this.prepend(xs),t.detail.glow(t.x,t.y,void 0,e)}},e.prototype.onEnter=function(){this.hovers.state&&this.hover.focus(!1)},e.prototype.didEnter=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidEnter&&o.viewDidEnter(this)}},e.prototype.onLeave=function(){this.hovers.state&&this.hover.unfocus()},e.prototype.didLeave=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidLeave&&o.viewDidLeave(this)}},e.prototype.onPress=function(t,e){},e.prototype.didPress=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidPress&&r.viewDidPress(t,e,this)}},e.prototype.onLongPress=function(t){},e.prototype.didLongPress=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidLongPress&&n.viewDidLongPress(t,this)}},e.CellFastener=Zo.define({type:Gs,child:!1,willSetView:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),e.Gesture=en.define({didBeginPress:function(t,e){this.owner.glows.state&&this.owner.glow(t)},didMovePress:function(t,e){t.isRunaway()?this.cancelPress(t,e):this.owner.clientBounds.contains(t.x,t.y)||(t.clearHoldTimer(),this.beginHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0))},didEndPress:function(t,e){this.owner.clientBounds.contains(t.x,t.y)?t.detail instanceof xs&&t.detail.pulse(t.x,t.y):(this.endHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0))},didCancelPress:function(t,e){this.owner.clientBounds.contains(t.x,t.y)||this.endHover(t,e),t.detail instanceof xs&&(t.detail.fade(t.x,t.y),t.detail=void 0)},didStartHovering:function(){this.owner.onEnter(),this.owner.didEnter()},didStopHovering:function(){this.owner.onLeave(),this.owner.didLeave()},didPress:function(t,e){if(this.owner.clientBounds.contains(t.x,t.y)){if(!t.defaultPrevented)for(var i=t.target;null!==i&&i!==this.owner.node;){var o=i.view;if(o instanceof Gs){o.onPress(t,e),o.didPress(t,e);break}i=i instanceof Node?i.parentNode:null}t.defaultPrevented||(this.owner.onPress(t,e),this.owner.didPress(t,e))}},didLongPress:function(t){if(!t.defaultPrevented)for(var e=t.target;null!==e&&e!==this.owner.node;){var i=e.view;if(i instanceof Gs){i.onLongPress(t),i.didLongPress(t);break}e=e instanceof Node?e.parentNode:null}t.defaultPrevented||(this.owner.onLongPress(t),this.owner.didLongPress(t))}}),m([bo({type:Us,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"layout",void 0),m([bo({type:Number,inherit:!0,state:0,updateFlags:ro.NeedsLayout,didSetState:function(t,e){this.owner.didSetDepth(t,e)}})],e.prototype,"depth",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowSpacing",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowHeight",void 0),m([Oo({type:$t,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"stretch",void 0),m([bo({type:Boolean,inherit:!0,state:!1})],e.prototype,"hovers",void 0),m([Oo({type:Zt,state:Zt.unfocused(),didSetValue:function(t,e){this.owner.didSetHover(t,e)}})],e.prototype,"hover",void 0),m([Oo({type:Zt,state:Zt.unfocused(),willFocus:function(){this.owner.willHighlight(),this.owner.onHighlight()},didFocus:function(){this.owner.didHighlight()},willUnfocus:function(){this.owner.willUnhighlight()},didUnfocus:function(){this.owner.onUnhighlight(),this.owner.didUnhighlight()},didSetValue:function(t,e){this.owner.didSetHighlight(t,e)}})],e.prototype,"highlight",void 0),m([bo({type:Boolean,inherit:!0,state:!0})],e.prototype,"glows",void 0),m([en({extends:e.Gesture,self:!0})],e.prototype,"gesture",void 0),e}(ar),Qs=function(t){function e(){var e=t.call(this)||this;return e.cellFasteners=[],e}return w(e,t),e.prototype.getCell=function(t,e){void 0===e&&(e=qs);var i=this.getTrait(t);return i instanceof e?i:null},e.prototype.getOrCreateCell=function(t,e){var i=this.getTrait(t);return i instanceof e||(i=new e,this.setTrait(t,i)),i},e.prototype.setCell=function(t,e){this.setTrait(t,e)},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createCellFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCell=function(t,e){},e.prototype.attachCell=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCell=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetCell&&l.traitWillSetCell(t,e,i,this)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,o),null!==t&&(this.attachCell(t,o),this.initCell(t,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetCell&&l.traitDidSetCell(t,e,i,this)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCells=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectCellModel=function(t){return t.getTrait(qs)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellModel(n);null!==r&&this.insertCell(r)}},e.prototype.detectCellTrait=function(t){return t instanceof qs?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellTrait(n);null!==r&&this.insertCell(r)}},e.prototype.didSetModel=function(e,i){null!==e&&(this.detectTraits(e),this.detectModels(e)),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectCellModel(e);if(null!==o){var n=null!==i?this.detectCellModel(i):null;this.insertCell(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectCellModel(e);null!==i&&this.removeCell(i)},e.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectCellTrait(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectCellTrait(e);null!==i&&this.removeCell(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCells()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingCells()},e.CellFastener=_.define({type:qs,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetCell(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCell(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCell(t,e,i,this)}}),e}(ht),Js=function(t){function e(){var e=t.call(this)||this;return e.cellFasteners=[],e}return w(e,t),e.prototype.initLeafTrait=function(t){},e.prototype.attachLeafTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertCellTrait(n)}},e.prototype.detachLeafTrait=function(t){for(var e=t.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeCellTrait(n)}},e.prototype.willSetLeafTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetLeafTrait&&r.controllerWillSetLeafTrait(t,e,this)}},e.prototype.onSetLeafTrait=function(t,e){null!==e&&this.detachLeafTrait(e),null!==t&&(this.attachLeafTrait(t),this.initLeafTrait(t))},e.prototype.didSetLeafTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetLeafTrait&&r.controllerDidSetLeafTrait(t,e,this)}},e.prototype.createLeafView=function(){return _s.create()},e.prototype.initLeafView=function(t){},e.prototype.attachLeafView=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].controller;if(null!==n){var r=n.cell.view;if(null!==r&&null===r.parentView){var s=n.cell.trait;null!==s&&n.cell.injectView(t,void 0,void 0,s.key)}}}},e.prototype.detachLeafView=function(t){},e.prototype.willSetLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetLeafView&&r.controllerWillSetLeafView(t,e,this)}},e.prototype.onSetLeafView=function(t,e){null!==e&&this.detachLeafView(e),null!==t&&(this.attachLeafView(t),this.initLeafView(t))},e.prototype.didSetLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetLeafView&&r.controllerDidSetLeafView(t,e,this)}},e.prototype.willHighlightLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillHighlightLeafView&&n.controllerWillHighlightLeafView(t,this)}},e.prototype.onHighlightLeafView=function(t){},e.prototype.didHighlightLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidHighlightLeafView&&n.controllerDidHighlightLeafView(t,this)}},e.prototype.willUnhighlightLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillUnhighlightLeafView&&n.controllerWillUnhighlightLeafView(t,this)}},e.prototype.onUnhighlightLeafView=function(t){},e.prototype.didUnhighlightLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidUnhighlightLeafView&&n.controllerDidUnhighlightLeafView(t,this)}},e.prototype.onEnterLeafView=function(t){},e.prototype.didEnterLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidEnterLeafView&&n.controllerDidEnterLeafView(t,this)}},e.prototype.onLeaveLeafView=function(t){},e.prototype.didLeaveLeafView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidLeaveLeafView&&n.controllerDidLeaveLeafView(t,this)}},e.prototype.onPressLeafView=function(t,e,i){},e.prototype.didPressLeafView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidPressLeafView&&s.controllerDidPressLeafView(t,e,i,this)}},e.prototype.onLongPressLeafView=function(t,e){},e.prototype.didLongPressLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidLongPressLeafView&&r.controllerDidLongPressLeafView(t,e,this)}},e.prototype.insertCell=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createCellFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeCell=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCell=function(t){return Xs.createCell(t)},e.prototype.initCell=function(t,e){var i=t.cell.trait;null!==i&&this.initCellTrait(i,e);var o=t.cell.view;null!==o&&this.initCellView(o,e)},e.prototype.attachCell=function(t,e){var i=t.cell.trait;null!==i&&this.attachCellTrait(i,e);var o=t.cell.view;null!==o&&this.attachCellView(o,e)},e.prototype.detachCell=function(t,e){var i=t.cell.view;null!==i&&this.detachCellView(i,e);var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e)},e.prototype.willSetCell=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCell&&s.controllerWillSetCell(t,e,i)}},e.prototype.onSetCell=function(t,e,i){null!==e&&this.detachCell(e,i),null!==t&&(this.attachCell(t,i),this.initCell(t,i))},e.prototype.didSetCell=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCell&&s.controllerDidSetCell(t,e,i)}},e.prototype.getCellTrait=function(t,e){var i=this.leaf.trait;return null!==i?i.getCell(t,e):null},e.prototype.getOrCreateCellTrait=function(t,e){var i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");return i.getOrCreateCell(t,e)},e.prototype.setCellTrait=function(t,e){var i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");i.setCell(t,e)},e.prototype.insertCellTrait=function(t,e){void 0===e&&(e=null);for(var i=this.cellFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.cell.trait===t)return;s.cell.trait===e&&(o=s)}}var l=this.createCell(t);if(null!==l&&(l.cell.setTrait(t),this.insertChildController(l,o,t.key),null===l.cell.view)){var a=this.createCellView(l),h=null;null!==o&&(h=o.cell.view);var u=this.leaf.view;null!==u?l.cell.injectView(u,a,h,t.key):l.cell.setView(a,h)}},e.prototype.removeCellTrait=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.cell.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initCellTrait=function(t,e){},e.prototype.attachCellTrait=function(t,e){},e.prototype.detachCellTrait=function(t,e){},e.prototype.willSetCellTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCellTrait&&s.controllerWillSetCellTrait(t,e,i)}},e.prototype.onSetCellTrait=function(t,e,i){null!==e&&this.detachCellTrait(e,i),null!==t&&(this.attachCellTrait(e,i),this.initCellTrait(t,i))},e.prototype.didSetCellTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCellTrait&&s.controllerDidSetCellTrait(t,e,i)}},e.prototype.getCellView=function(t,e){var i=this.leaf.view;return null!==i?i.getCell(t,e):null},e.prototype.getOrCreateCellView=function(t,e){var i=this.leaf.view;if(null===i){if(null===(i=this.leaf.createView()))throw new Error("no leaf view");this.leaf.setView(i)}return i.getOrCreateCell(t,e)},e.prototype.setCellView=function(t,e){var i=this.leaf.view;if(null===i){if(null===(i=this.leaf.createView()))throw new Error("no leaf view");this.leaf.setView(i)}i.setCell(t,e)},e.prototype.createCellView=function(t){return t.cell.createView()},e.prototype.initCellView=function(t,e){if(t instanceof Bs){var i=t.content.view;null!==i&&this.initCellContentView(i,e)}},e.prototype.attachCellView=function(t,e){if(t instanceof Bs){var i=t.content.view;null!==i&&this.attachCellContentView(i,e)}},e.prototype.detachCellView=function(t,e){if(t instanceof Bs){var i=t.content.view;null!==i&&this.detachCellContentView(i,e)}t.remove()},e.prototype.willSetCellView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCellView&&s.controllerWillSetCellView(t,e,i)}},e.prototype.onSetCellView=function(t,e,i){null!==e&&this.detachCellView(e,i),null!==t&&(this.attachCellView(t,i),this.initCellView(t,i))},e.prototype.didSetCellView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCellView&&s.controllerDidSetCellView(t,e,i)}},e.prototype.didPressCellView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidPressCellView&&l.controllerDidPressCellView(t,e,i,o)}},e.prototype.didLongPressCellView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidLongPressCellView&&s.controllerDidLongPressCellView(t,e,i)}},e.prototype.initCellContentView=function(t,e){},e.prototype.attachCellContentView=function(t,e){},e.prototype.detachCellContentView=function(t,e){},e.prototype.willSetCellContentView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCellContentView&&s.controllerWillSetCellContentView(t,e,i)}},e.prototype.onSetCellContentView=function(t,e,i){null!==e&&this.detachCellContentView(e,i),null!==t&&(this.attachCellContentView(t,i),this.initCellContentView(t,i))},e.prototype.didSetCellContentView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCellContentView&&s.controllerDidSetCellContentView(t,e,i)}},e.prototype.willSetCellIcon=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCellIcon&&s.controllerWillSetCellIcon(t,e,i)}},e.prototype.onSetCellIcon=function(t,e,i){},e.prototype.didSetCellIcon=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCellIcon&&s.controllerDidSetCellIcon(t,e,i)}},e.prototype.createCellFastener=function(t){return new e.CellFastener(this,t.key,"cell")},e.prototype.getCellFastener=function(t){for(var e=this.cellFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.cell.trait===t)return n}return null},e.prototype.mountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountCellFasteners=function(){for(var t=this.cellFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCellController=function(t){return t instanceof Xs?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectCellController(e);null!==o&&this.insertCell(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectCellController(e);null!==i&&this.removeCell(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountCellFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountCellFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.LeafFastener=Vs.define({viewType:_s,observeView:!0,willSetView:function(t,e){this.owner.willSetLeafView(t,e)},onSetView:function(t,e){this.owner.onSetLeafView(t,e)},didSetView:function(t,e){this.owner.didSetLeafView(t,e)},viewWillHighlight:function(t){this.owner.willHighlightLeafView(t),this.owner.onHighlightLeafView(t)},viewDidHighlight:function(t){this.owner.didHighlightLeafView(t)},viewWillUnhighlight:function(t){this.owner.willUnhighlightLeafView(t)},viewDidUnhighlight:function(t){this.owner.onUnhighlightLeafView(t),this.owner.didUnhighlightLeafView(t)},viewDidEnter:function(t){this.owner.onEnterLeafView(t),this.owner.didEnterLeafView(t)},viewDidLeave:function(t){this.owner.onLeaveLeafView(t),this.owner.didLeaveLeafView(t)},viewDidPress:function(t,e,i){this.owner.onPressLeafView(t,e,i),this.owner.didPressLeafView(t,e,i)},viewDidLongPress:function(t,e){this.owner.onLongPressLeafView(t,e),this.owner.didLongPressLeafView(t,e)},createView:function(){return this.owner.createLeafView()},traitType:Qs,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetLeafTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetLeafTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetLeafTrait(t,e)},traitWillSetCell:function(t,e,i){null!==e&&this.owner.removeCellTrait(e)},traitDidSetCell:function(t,e,i){null!==t&&this.owner.insertCellTrait(t,i)}}),e.CellFastener=Fs.define({type:Xs,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetCell(t,e,this)},onSetController:function(t,e){this.owner.onSetCell(t,e,this)},didSetController:function(t,e){this.owner.didSetCell(t,e,this)},controllerWillSetCellTrait:function(t,e){this.owner.willSetCellTrait(t,e,this)},controllerDidSetCellTrait:function(t,e){this.owner.onSetCellTrait(t,e,this),this.owner.didSetCellTrait(t,e,this)},controllerWillSetCellView:function(t,e){this.owner.willSetCellView(t,e,this)},controllerDidSetCellView:function(t,e){this.owner.onSetCellView(t,e,this),this.owner.didSetCellView(t,e,this)},controllerDidPressCellView:function(t,e,i){this.owner.didPressCellView(t,e,i,this)},controllerDidLongPressCellView:function(t,e){this.owner.didLongPressCellView(t,e,this)},controllerWillSetCellContentView:function(t,e){this.owner.willSetCellContentView(t,e,this)},controllerDidSetCellContentView:function(t,e){this.owner.onSetCellContentView(t,e,this),this.owner.didSetCellContentView(t,e,this)},controllerWillSetCellIcon:function(t,e){this.owner.willSetCellIcon(t,e,this)},controllerDidSetCellIcon:function(t,e){this.owner.onSetCellIcon(t,e,this),this.owner.didSetCellIcon(t,e,this)}}),m([Vs({extends:e.LeafFastener})],e.prototype,"leaf",void 0),e}(Ds),$s=function(t){function e(e){var i=t.call(this,e)||this;return i.visibleFrame=new r.R2Box(0,0,window.innerWidth,window.innerHeight),i.initRow(),i}return w(e,t),e.prototype.initRow=function(){this.addClass("row"),this.position.setState("relative",ro.Intrinsic)},e.prototype.didSetDepth=function(t,e){var i=this.tree.view;null!==i&&i.depth.setState(t+1,ro.Intrinsic)},e.prototype.getCell=function(t,e){var i=this.leaf.view;return null!==i?i.getCell(t,e):null},e.prototype.getOrCreateCell=function(t,e){var i=this.leaf.injectView();if(null===i)throw new Error("no leaf view");return i.getOrCreateCell(t,e)},e.prototype.setCell=function(t,e){var i=this.leaf.injectView();if(null===i)throw new Error("no leaf view");i.setCell(t,e)},e.prototype.createLeaf=function(){return _s.create()},e.prototype.initLeaf=function(t){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic);var e=this.layout.state;t.width.setState(null!==e?e.width:null,ro.Intrinsic),t.zIndex.setState(1,ro.Intrinsic)},e.prototype.attachLeaf=function(t){},e.prototype.detachLeaf=function(t){},e.prototype.willSetLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetLeaf&&r.viewWillSetLeaf(t,e,this)}},e.prototype.onSetLeaf=function(t,e){null!==e&&this.detachLeaf(e),null!==t&&(this.attachLeaf(t),this.initLeaf(t))},e.prototype.didSetLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetLeaf&&r.viewDidSetLeaf(t,e,this)}},e.prototype.willHighlightLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillHighlightLeaf&&n.viewWillHighlightLeaf(t,this)}},e.prototype.onHighlightLeaf=function(t){},e.prototype.didHighlightLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidHighlightLeaf&&n.viewDidHighlightLeaf(t,this)}},e.prototype.willUnhighlightLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillUnhighlightLeaf&&n.viewWillUnhighlightLeaf(t,this)}},e.prototype.onUnhighlightLeaf=function(t){},e.prototype.didUnhighlightLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidUnhighlightLeaf&&n.viewDidUnhighlightLeaf(t,this)}},e.prototype.onEnterLeaf=function(t){},e.prototype.didEnterLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidEnterLeaf&&n.viewDidEnterLeaf(t,this)}},e.prototype.onLeaveLeaf=function(t){},e.prototype.didLeaveLeaf=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidLeaveLeaf&&n.viewDidLeaveLeaf(t,this)}},e.prototype.onPressLeaf=function(t,e,i){},e.prototype.didPressLeaf=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidPressLeaf&&s.viewDidPressLeaf(t,e,i,this)}},e.prototype.onLongPressLeaf=function(t,e){},e.prototype.didLongPressLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidLongPressLeaf&&r.viewDidLongPressLeaf(t,e,this)}},e.prototype.initHead=function(t){t.addClass("head"),t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(this.rowHeight.state,ro.Intrinsic);var e=this.layout.state;t.width.setState(null!==e?e.width:null,ro.Intrinsic),t.height.setState(this.rowSpacing.state,ro.Intrinsic),t.backgroundColor.setLook(se.accentColor,ro.Intrinsic),t.opacity.setState(this.disclosing.phase,ro.Intrinsic),t.zIndex.setState(1,ro.Intrinsic)},e.prototype.attachHead=function(t){},e.prototype.detachHead=function(t){},e.prototype.willSetHead=function(t,e){},e.prototype.onSetHead=function(t,e){null!==e&&this.detachHead(e),null!==t&&(this.attachHead(t),this.initHead(t))},e.prototype.didSetHead=function(t,e){},e.prototype.createTree=function(){return al.create()},e.prototype.initTree=function(t){t.addClass("tree"),t.display.setState(this.disclosure.isCollapsed()?"none":"block",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic);var e=this.layout.state;t.width.setState(null!==e?e.width:null,ro.Intrinsic),t.zIndex.setState(0,ro.Intrinsic),t.depth.setState(this.depth.state+1,ro.Intrinsic)},e.prototype.attachTree=function(t){},e.prototype.detachTree=function(t){},e.prototype.willSetTree=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetTree&&r.viewWillSetTree(t,e,this)}},e.prototype.onSetTree=function(t,e){null!==e&&this.detachTree(e),null!==t&&(this.attachTree(t),this.initTree(t))},e.prototype.didSetTree=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetTree&&r.viewDidSetTree(t,e,this)}},e.prototype.initFoot=function(t){t.addClass("foot"),t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(this.rowHeight.state,ro.Intrinsic);var e=this.layout.state;t.width.setState(null!==e?e.width:null,ro.Intrinsic),t.height.setState(this.rowSpacing.state,ro.Intrinsic),t.backgroundColor.setLook(se.borderColor,ro.Intrinsic),t.opacity.setState(this.disclosing.phase,ro.Intrinsic),t.zIndex.setState(1,ro.Intrinsic)},e.prototype.attachFoot=function(t){},e.prototype.detachFoot=function(t){},e.prototype.willSetFoot=function(t,e){},e.prototype.onSetFoot=function(t,e){null!==e&&this.detachFoot(e),null!==t&&(this.attachFoot(t),this.initFoot(t))},e.prototype.didSetFoot=function(t,e){},e.prototype.willExpand=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillExpand&&o.viewWillExpand(this)}var n=this.tree.view;null!==n&&n.display.setState("block",ro.Intrinsic)},e.prototype.onExpand=function(){},e.prototype.didExpand=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidExpand&&o.viewDidExpand(this)}},e.prototype.willCollapse=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillCollapse&&o.viewWillCollapse(this)}},e.prototype.onCollapse=function(){},e.prototype.didCollapse=function(){var t=this.tree.view;null!==t&&t.display.setState("none",ro.Intrinsic);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidCollapse&&n.viewDidCollapse(this)}},e.prototype.didSetDisclosure=function(t,e){0!==t.direction?this.disclosing.setState(t,ro.Intrinsic):(this.disclosing.setState(null,ro.Intrinsic),this.disclosing.setInherited(!0));var i=this.getBaseView(al);null!==i&&i.requireUpdate(ro.NeedsLayout)},e.prototype.detectVisibleFrame=function(t){var e=this.rowHeight.getValueOr(r.Length.zero()).pxValue(),i=t.visibleFrame;if(void 0!==i){var o=this.left.state;o=o instanceof r.Length?o.pxValue():0;var n=this.top.state;return n=n instanceof r.Length?n.pxValue():0,new r.R2Box(i.xMin-o-0,i.yMin-n-e,i.xMax-o+0,i.yMax-n+e)}var s=this.node.getBoundingClientRect(),l=-s.x-0,a=-s.y-e,h=window.innerWidth-s.x+0,u=window.innerHeight-s.y+e;return new r.R2Box(l,a,h,u)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.onProcess=function(e,i){t.prototype.onProcess.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));this.visibleFrame=o,i.visibleFrame=this.visibleFrame},e.prototype.needsProcess=function(t,e){return 0!=(t&ro.NeedsResize)&&(t|=ro.NeedsScroll),t},e.prototype.onDisplay=function(e,i){t.prototype.onDisplay.call(this,e,i);var o=this.detectVisibleFrame(Object.getPrototypeOf(i));this.visibleFrame=o,i.visibleFrame=this.visibleFrame},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeRow();var i=this.leaf.view;null!==i&&this.layoutLeaf(i)},e.prototype.resizeRow=function(){var t=this.layout.isInherited()?null:this.layout.state;if(null!==t){var e=this.layout.superState,i=null;null!=e&&null!==e.width&&(i=e.width.pxValue()),null===i&&(i=(i=this.width.state)instanceof r.Length?i.pxValue():this.node.offsetWidth);var o=t.resized(i,0,0);this.layout.setState(o)}},e.prototype.layoutLeaf=function(t){var e=this.layout.state,i=null!==e?e.width:null,o=this.getLook(se.timing);t.top.setState(0,o,ro.Intrinsic),t.width.setState(i,ro.Intrinsic)},e.prototype.didLayout=function(e){this.layoutRow(),t.prototype.didLayout.call(this,e)},e.prototype.layoutRow=function(){var t=this.layout.state,e=null!==t?t.width:null,i=this.rowSpacing.getValueOr(r.Length.zero()).pxValue(),o=this.disclosure.getValue(),n=this.disclosing.getPhaseOr(1),s=0,l=0,a=this.leaf.view;null!==a&&(a.width.setState(e,ro.Intrinsic),a.display.setState("flex",ro.Intrinsic),s=(s=a.height.value)instanceof r.Length?s.pxValue():a.node.offsetHeight,l=(l=a.height.state)instanceof r.Length?l.pxValue():s);var h=this.head.view;null!==h&&(o.isCollapsed()?h.display.setState("none",ro.Intrinsic):(h.top.setState(s,ro.Intrinsic),h.width.setState(e,ro.Intrinsic),h.height.setState(i*n,ro.Intrinsic),h.opacity.setState(n,ro.Intrinsic),h.display.setState("block",ro.Intrinsic)));var u=0,p=0,d=this.tree.view;null!==d&&(o.isCollapsed()?d.display.setState("none",ro.Intrinsic):(d.top.setState((s+i)*n,ro.Intrinsic),d.width.setState(e,ro.Intrinsic),d.display.setState("block",ro.Intrinsic),u=(u=d.height.value)instanceof r.Length?u.pxValue():d.node.offsetHeight,u+=i,p=(p=d.height.state)instanceof r.Length?p.pxValue():u,p+=i));var c=this.foot.view;if(null!==c&&(o.isCollapsed()?c.display.setState("none",ro.Intrinsic):(c.top.setState(s+u,ro.Intrinsic),c.width.setState(e,ro.Intrinsic),c.height.setState(i*n,ro.Intrinsic),c.opacity.setState(n,ro.Intrinsic),c.display.setState("block",ro.Intrinsic))),this.height.takesPrecedence(ro.Intrinsic)){var f=s+u*n,v=l+p;this.height.setIntermediateValue(r.Length.px(f),r.Length.px(v))}},e.prototype.onCull=function(){t.prototype.onCull.call(this),this.display.setState("none",ro.Intrinsic)},e.prototype.onUncull=function(){t.prototype.onUncull.call(this),this.display.setState("block",ro.Intrinsic)},m([bo({type:Us,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"layout",void 0),m([bo({type:Number,inherit:!0,state:0,updateFlags:ro.NeedsLayout,didSetState:function(t,e){this.owner.didSetDepth(t,e)}})],e.prototype,"depth",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowSpacing",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowHeight",void 0),m([bo({type:Boolean,inherit:!0,state:!1})],e.prototype,"hovers",void 0),m([bo({type:Boolean,inherit:!0,state:!0})],e.prototype,"glows",void 0),m([Zo({key:!0,type:_s,child:!0,observe:!0,willSetView:function(t,e){this.owner.willSetLeaf(t,e)},onSetView:function(t,e){this.owner.onSetLeaf(t,e)},didSetView:function(t,e){this.owner.didSetLeaf(t,e)},viewWillHighlight:function(t){this.owner.willHighlightLeaf(t),this.owner.onHighlightLeaf(t)},viewDidHighlight:function(t){this.owner.didHighlightLeaf(t)},viewWillUnhighlight:function(t){this.owner.willUnhighlightLeaf(t)},viewDidUnhighlight:function(t){this.owner.onUnhighlightLeaf(t),this.owner.didUnhighlightLeaf(t)},viewDidEnter:function(t){this.owner.onEnterLeaf(t),this.owner.didEnterLeaf(t)},viewDidLeave:function(t){this.owner.onLeaveLeaf(t),this.owner.didLeaveLeaf(t)},viewDidPress:function(t,e,i){this.owner.onPressLeaf(t,e,i),this.owner.didPressLeaf(t,e,i)},viewDidLongPress:function(t,e){this.owner.onLongPressLeaf(t,e),this.owner.didLongPressLeaf(t,e)},createView:function(){return this.owner.createLeaf()}})],e.prototype,"leaf",void 0),m([Zo({key:!0,type:ar,child:!0,willSetView:function(t,e){this.owner.willSetHead(t,e)},onSetView:function(t,e){this.owner.onSetHead(t,e)},didSetView:function(t,e){this.owner.didSetHead(t,e)}})],e.prototype,"head",void 0),m([Zo({key:!0,child:!0,willSetView:function(t,e){this.owner.willSetTree(t,e)},onSetView:function(t,e){this.owner.onSetTree(t,e)},didSetView:function(t,e){this.owner.didSetTree(t,e)},createView:function(){return this.owner.createTree()}})],e.prototype,"tree",void 0),m([Zo({key:!0,type:ar,child:!0,willSetView:function(t,e){this.owner.willSetFoot(t,e)},onSetView:function(t,e){this.owner.onSetFoot(t,e)},didSetView:function(t,e){this.owner.didSetFoot(t,e)}})],e.prototype,"foot",void 0),m([Oo({type:$t,state:$t.collapsed(),willExpand:function(){this.owner.willExpand(),this.owner.onExpand()},didExpand:function(){this.owner.didExpand()},willCollapse:function(){this.owner.willCollapse()},didCollapse:function(){this.owner.onCollapse(),this.owner.didCollapse()},didSetValue:function(t,e){this.owner.didSetDisclosure(t,e)}})],e.prototype,"disclosure",void 0),m([Oo({type:$t,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"disclosing",void 0),e}(ar),tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initTree=function(t){},e.prototype.attachTree=function(t){},e.prototype.detachTree=function(t){},e.prototype.willSetTree=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetTree&&s.traitWillSetTree(t,e,i,this)}},e.prototype.onSetTree=function(t,e,i){null!==e&&this.detachTree(e),null!==t&&(this.attachTree(t),this.initTree(t))},e.prototype.didSetTree=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetTree&&s.traitDidSetTree(t,e,i,this)}},e.prototype.detectTreeTrait=function(t){return t instanceof hl?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellTrait(n);if(null!==r&&this.insertCell(r),null===this.tree.trait){var s=this.detectTreeTrait(n);null!==s&&this.tree.setTrait(s)}}},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.tree.trait){var o=this.detectTreeTrait(e);null!==o&&this.tree.setTrait(o,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectTreeTrait(e);null!==i&&this.tree.trait===i&&this.tree.setTrait(null)},m([_({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTree(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetTree(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetTree(t,e,i)}})],e.prototype,"tree",void 0),e}(Qs),el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initRowTrait=function(t){},e.prototype.attachRowTrait=function(t){null===this.leaf.trait&&this.leaf.setTrait(t);var e=t.tree.trait;null!==e&&this.insertTreeTrait(e)},e.prototype.detachRowTrait=function(t){var e=t.tree.trait;null!==e&&this.removeTreeTrait(e),this.leaf.trait===t&&this.leaf.setTrait(null)},e.prototype.willSetRowTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetRowTrait&&r.controllerWillSetRowTrait(t,e,this)}},e.prototype.onSetRowTrait=function(t,e){null!==e&&this.detachRowTrait(e),null!==t&&(this.attachRowTrait(t),this.initRowTrait(t))},e.prototype.didSetRowTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetRowTrait&&r.controllerDidSetRowTrait(t,e,this)}},e.prototype.createRowView=function(){return $s.create()},e.prototype.initRowView=function(t){},e.prototype.attachRowView=function(t){if(null===this.leaf.view){var e=t.leaf.injectView();this.leaf.setView(e)}var i=this.tree.controller;null!==i&&i.table.injectView(t)},e.prototype.detachRowView=function(t){},e.prototype.willSetRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetRowView&&r.controllerWillSetRowView(t,e,this)}},e.prototype.onSetRowView=function(t,e){null!==e&&this.detachRowView(e),null!==t&&(this.attachRowView(t),this.initRowView(t))},e.prototype.didSetRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetRowView&&r.controllerDidSetRowView(t,e,this)}},e.prototype.willExpandRowView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillExpandRowView&&n.controllerWillExpandRowView(t,this)}},e.prototype.onExpandRowView=function(t){},e.prototype.didExpandRowView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidExpandRowView&&n.controllerDidExpandRowView(t,this)}},e.prototype.willCollapseRowView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerWillCollapseRowView&&n.controllerWillCollapseRowView(t,this)}},e.prototype.onCollapseRowView=function(t){},e.prototype.didCollapseRowView=function(t){for(var e=this.controllerObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.controllerDidCollapseRowView&&n.controllerDidCollapseRowView(t,this)}},e.prototype.createTree=function(t){return new ul},e.prototype.initTree=function(t){var e=this.row.trait;if(null!==e){var i=e.tree.trait;null!==i&&t.table.setTrait(i)}var o=t.table.trait;null!==o&&this.initTreeTrait(o);var n=t.table.view;null!==n&&this.initTreeView(n)},e.prototype.attachTree=function(t){var e=t.table.trait;null!==e&&this.attachTreeTrait(e);var i=t.table.view;null!==i&&this.attachTreeView(i)},e.prototype.detachTree=function(t){var e=t.table.trait;null!==e&&this.detachTreeTrait(e);var i=t.table.view;null!==i&&this.detachTreeView(i)},e.prototype.willSetTree=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTree&&r.controllerWillSetTree(t,e,this)}},e.prototype.onSetTree=function(t,e){null!==e&&this.detachTree(e),null!==t&&(this.attachTree(t),this.initTree(t))},e.prototype.didSetTree=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTree&&r.controllerDidSetTree(t,e,this)}},e.prototype.insertTreeTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof ul){if(s.table.trait===t)return;s.table.trait===e&&(o=s)}}var l=this.createTree(t);if(l instanceof ul&&(l.table.setTrait(t),this.tree.setController(l,o),this.insertChildController(l,o),null===l.table.view)){var a=l.table.createView(),h=null;null!==o&&(h=o.table.view);var u=this.row.view;null!==u?l.table.injectView(u,a,h,null):l.table.setView(a,h)}},e.prototype.removeTreeTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof ul&&n.table.trait===t)return this.tree.setController(null),void n.remove()}},e.prototype.initTreeTrait=function(t){},e.prototype.attachTreeTrait=function(t){},e.prototype.detachTreeTrait=function(t){},e.prototype.willSetTreeTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTreeTrait&&r.controllerWillSetTreeTrait(t,e,this)}},e.prototype.onSetTreeTrait=function(t,e){null!==e&&this.detachTreeTrait(e),null!==t&&(this.attachTreeTrait(t),this.initTreeTrait(t))},e.prototype.didSetTreeTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTreeTrait&&r.controllerDidSetTreeTrait(t,e,this)}},e.prototype.initTreeView=function(t){},e.prototype.attachTreeView=function(t){},e.prototype.detachTreeView=function(t){t.remove()},e.prototype.willSetTreeView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTreeView&&r.controllerWillSetTreeView(t,e,this)}},e.prototype.onSetTreeView=function(t,e){null!==e&&this.detachTreeView(e),null!==t&&(this.attachTreeView(t),this.initTreeView(t))},e.prototype.didSetTreeView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTreeView&&r.controllerDidSetTreeView(t,e,this)}},e.prototype.detectTreeController=function(t){return t instanceof ul?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectTreeController(e);null!==o&&this.tree.setController(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e),null!==this.detectTreeController(e)&&this.tree.setController(null)},e.RowFastener=Vs.define({viewType:$s,observeView:!0,willSetView:function(t,e){this.owner.willSetRowView(t,e)},onSetView:function(t,e){this.owner.onSetRowView(t,e)},didSetView:function(t,e){this.owner.didSetRowView(t,e)},viewWillExpand:function(t){this.owner.willExpandRowView(t),this.owner.onExpandRowView(t)},viewDidExpand:function(t){this.owner.didExpandRowView(t)},viewWillCollapse:function(t){this.owner.willCollapseRowView(t)},viewDidCollapse:function(t){this.owner.onCollapseRowView(t),this.owner.didCollapseRowView(t)},viewDidSetTree:function(t,e,i){var o=this.owner.tree.controller;null!==o&&o.table.setView(t)},createView:function(){return this.owner.createRowView()},traitType:tl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetRowTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetRowTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetRowTrait(t,e)},traitWillSetTree:function(t,e,i){null!==e&&this.owner.removeTreeTrait(e)},traitDidSetTree:function(t,e,i){null!==t&&this.owner.insertTreeTrait(t,i)}}),e.TreeFastener=Fs.define({observe:!0,willSetController:function(t,e){this.owner.willSetTree(t,e)},onSetController:function(t,e){this.owner.onSetTree(t,e)},didSetController:function(t,e){this.owner.didSetTree(t,e)},controllerWillSetTableTrait:function(t,e){this.owner.willSetTreeTrait(t,e)},controllerDidSetTableTrait:function(t,e){this.owner.onSetTreeTrait(t,e),this.owner.didSetTreeTrait(t,e)},controllerWillSetTableView:function(t,e){this.owner.willSetTreeView(t,e)},controllerDidSetTableView:function(t,e){this.owner.onSetTreeView(t,e),this.owner.didSetTreeView(t,e)}}),m([Vs({extends:e.RowFastener})],e.prototype,"row",void 0),m([Fs({extends:e.TreeFastener})],e.prototype,"tree",void 0),e}(Js),il=function(t){function e(e){var i=t.call(this,e)||this;return i.initCol(),i}return w(e,t),e.prototype.initCol=function(){this.addClass("col"),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic)},e.prototype.createLabel=function(t){var e=ar.span.create();return e.alignSelf.setState("center",ro.Intrinsic),e.whiteSpace.setState("nowrap",ro.Intrinsic),e.textOverflow.setState("ellipsis",ro.Intrinsic),e.overflowX.setState("hidden",ro.Intrinsic),e.overflowY.setState("hidden",ro.Intrinsic),e.color.setLook(se.neutralColor,ro.Intrinsic),void 0!==t&&e.text(t),e},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetLabel&&r.viewWillSetLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetLabel&&r.viewDidSetLabel(t,e,this)}},m([Zo({key:!0,type:ar,fromAny:function(t){return t instanceof ar?t:this.owner.createLabel(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(ar),ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetLayout&&r.traitWillSetLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetLayout&&r.traitDidSetLayout(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetLabel&&r.traitWillSetLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetLabel&&r.traitDidSetLabel(t,e,this)}},m([N({type:Ns,state:null,willSetState:function(t,e){this.owner.willSetLayout(t,e)},didSetState:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)}})],e.prototype,"layout",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(ht),nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initColTrait=function(t){},e.prototype.attachColTrait=function(t){null!==this.col.view&&this.setLabelView(t.label.state,t)},e.prototype.detachColTrait=function(t){null!==this.col.view&&this.setLabelView(null,t)},e.prototype.willSetColTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetColTrait&&r.controllerWillSetColTrait(t,e,this)}},e.prototype.onSetColTrait=function(t,e){null!==e&&this.detachColTrait(e),null!==t&&(this.attachColTrait(t),this.initColTrait(t))},e.prototype.didSetColTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetColTrait&&r.controllerDidSetColTrait(t,e,this)}},e.prototype.willSetLayout=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetColLayout&&r.controllerWillSetColLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetColLayout&&r.controllerDidSetColLayout(t,e,this)}},e.prototype.createColView=function(){return il.create()},e.prototype.initColView=function(t){},e.prototype.attachColView=function(t){this.label.setView(t.label.view);var e=this.col.trait;null!==e&&this.setLabelView(e.label.state,e)},e.prototype.detachColView=function(t){this.label.setView(null)},e.prototype.willSetColView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetColView&&r.controllerWillSetColView(t,e,this)}},e.prototype.onSetColView=function(t,e){null!==e&&this.detachColView(e),null!==t&&(this.attachColView(t),this.initColView(t))},e.prototype.didSetColView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetColView&&r.controllerDidSetColView(t,e,this)}},e.prototype.createLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLabelView=function(t,e){var i=this.col.view;if(null!==i){var o=null!==t?this.createLabelView(t,e):null;i.label.setView(o)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetColLabelView&&r.controllerWillSetColLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetColLabelView&&r.controllerDidSetColLabelView(t,e,this)}},e.ColFastener=Vs.define({viewType:il,observeView:!0,willSetView:function(t,e){this.owner.willSetColView(t,e)},onSetView:function(t,e){this.owner.onSetColView(t,e)},didSetView:function(t,e){this.owner.didSetColView(t,e)},viewDidSetLabel:function(t,e){this.owner.label.setView(t)},createView:function(){return this.owner.createColView()},traitType:ol,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetColTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetColTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetColTrait(t,e)},traitWillSetLayout:function(t,e){this.owner.willSetLayout(t,e)},traitDidSetLayout:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)},traitDidSetLabel:function(t,e,i){this.owner.setLabelView(t,i)}}),m([Vs({extends:e.ColFastener})],e.prototype,"col",void 0),m([Cs({willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),e}(Ds),rl=function(t){function e(e){var i=t.call(this,e)||this;return i.colFasteners=[],i.initHeader(),i}return w(e,t),e.prototype.initHeader=function(){this.addClass("header"),this.position.setState("relative",ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic)},e.prototype.didSetDepth=function(t,e){},e.prototype.getCol=function(t,e){void 0===e&&(e=il);var i=this.getChildView(t);return i instanceof e?i:null},e.prototype.getOrCreateCol=function(t,e){void 0===e&&(e=il);var i=this.getChildView(t);return i instanceof e||(i=ar.fromConstructor(e),this.setChildView(t,i)),i},e.prototype.setCol=function(t,e){this.setChildView(t,e)},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createColFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCol=function(t,e){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.width.setState(0,ro.Intrinsic),t.height.setState(this.height.state,ro.Intrinsic)},e.prototype.attachCol=function(t,e){},e.prototype.detachCol=function(t,e){},e.prototype.willSetCol=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetCol&&l.viewWillSetCol(t,e,i,this)}},e.prototype.onSetCol=function(t,e,i,o){null!==e&&this.detachCol(e,o),null!==t&&(this.attachCol(t,o),this.initCol(t,o))},e.prototype.didSetCol=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetCol&&l.viewDidSetCol(t,e,i,this)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectCol=function(t){return t instanceof il?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectCol(e);null!==o&&this.insertCol(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectCol(e);null!==i&&this.removeCol(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutHeader()},e.prototype.layoutHeader=function(){var t=this.rowHeight.value;null!==t&&this.height.setState(t,ro.Intrinsic)},e.prototype.displayChildViews=function(e,i,o){0!=(e&ro.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.layout.state,r=this.height.state,s=this.stretch.getPhaseOr(1);t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof il){var l=t.key,a=null!==n&&void 0!==l?n.getCol(l):null;if(null!==a){t.display.setState(a.hidden?"none":"flex",ro.Intrinsic),t.left.setState(a.left,ro.Intrinsic),t.width.setState(a.width,ro.Intrinsic),t.height.setState(r,ro.Intrinsic);var h=a.textColor;h instanceof se?t.color.setLook(h,ro.Intrinsic):t.color.setState(h,ro.Intrinsic),a.persistent||t.opacity.setState(s,ro.Intrinsic)}else t.display.setState("none",ro.Intrinsic),t.left.setState(null,ro.Intrinsic),t.width.setState(null,ro.Intrinsic),t.height.setState(null,ro.Intrinsic)}o.call(this,t,e,i)}))},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountColFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountColFasteners(),t.prototype.unmountViewFasteners.call(this)},e.ColFastener=Zo.define({type:il,child:!1,willSetView:function(t,e,i){this.owner.willSetCol(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetCol(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetCol(t,e,i,this)}}),m([bo({type:Us,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"layout",void 0),m([bo({type:Number,inherit:!0,state:0,updateFlags:ro.NeedsLayout,didSetState:function(t,e){this.owner.didSetDepth(t,e)}})],e.prototype,"depth",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowSpacing",void 0),m([Io({type:r.Length,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"rowHeight",void 0),m([Oo({type:$t,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"stretch",void 0),e}(ar),sl=function(t){function e(){var e=t.call(this)||this;return e.colFasteners=[],e}return w(e,t),e.prototype.getCol=function(t,e){void 0===e&&(e=ol);var i=this.getTrait(t);return i instanceof e?i:null},e.prototype.getOrCreateCol=function(t,e){void 0===e&&(e=ol);var i=this.getTrait(t);return i instanceof e||(i=new e,this.setTrait(t,i)),i},e.prototype.setCol=function(t,e){this.setTrait(t,e)},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createColFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCol=function(t,e){},e.prototype.attachCol=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCol=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetCol&&l.traitWillSetCol(t,e,i,this)}},e.prototype.onSetCol=function(t,e,i,o){null!==e&&this.detachCol(e,o),null!==t&&(this.attachCol(t,o),this.initCol(t,o))},e.prototype.didSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetCol&&l.traitDidSetCol(t,e,i,this)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectCellModel=function(t){return t.getTrait(ol)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectCellModel(n);null!==r&&this.insertCol(r)}},e.prototype.detectColTrait=function(t){return t instanceof ol?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectColTrait(n);null!==r&&this.insertCol(r)}},e.prototype.didSetModel=function(e,i){null!==e&&(this.detectTraits(e),this.detectModels(e)),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectCellModel(e);if(null!==o){var n=null!==i?this.detectCellModel(i):null;this.insertCol(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectCellModel(e);null!==i&&this.removeCol(i)},e.prototype.onInsertTrait=function(e,i){t.prototype.onInsertTrait.call(this,e,i);var o=this.detectColTrait(e);null!==o&&this.insertCol(o,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectColTrait(e);null!==i&&this.removeCol(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountColFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountColFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCols()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingCols()},e.ColFastener=_.define({type:ol,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetCol(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCol(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCol(t,e,i,this)}}),e}(ht),ll=function(t){function e(){var e=t.call(this)||this;return e.colFasteners=[],e}return w(e,t),e.prototype.initHeaderTrait=function(t){},e.prototype.attachHeaderTrait=function(t){for(var e=t.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertColTrait(n)}},e.prototype.detachHeaderTrait=function(t){for(var e=t.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeColTrait(n)}},e.prototype.willSetHeaderTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetHeaderTrait&&r.controllerWillSetHeaderTrait(t,e,this)}},e.prototype.onSetHeaderTrait=function(t,e){null!==e&&this.detachHeaderTrait(e),null!==t&&(this.attachHeaderTrait(t),this.initHeaderTrait(t))},e.prototype.didSetHeaderTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetHeaderTrait&&r.controllerDidSetHeaderTrait(t,e,this)}},e.prototype.createHeaderView=function(){return rl.create()},e.prototype.initHeaderView=function(t){},e.prototype.attachHeaderView=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].controller;if(null!==n){var r=n.col.view;if(null!==r&&null===r.parentView){var s=n.col.trait;null!==s&&n.col.injectView(t,void 0,void 0,s.key)}}}},e.prototype.detachHeaderView=function(t){},e.prototype.willSetHeaderView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetHeaderView&&r.controllerWillSetHeaderView(t,e,this)}},e.prototype.onSetHeaderView=function(t,e){null!==e&&this.detachHeaderView(e),null!==t&&(this.attachHeaderView(t),this.initHeaderView(t))},e.prototype.didSetHeaderView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetHeaderView&&r.controllerDidSetHeaderView(t,e,this)}},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createColFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCol=function(t){return new nl},e.prototype.initCol=function(t,e){var i=t.col.trait;null!==i&&this.initColTrait(i,e);var o=t.col.view;null!==o&&this.initColView(o,e)},e.prototype.attachCol=function(t,e){var i=t.col.trait;null!==i&&this.attachColTrait(i,e);var o=t.col.view;null!==o&&this.attachColView(o,e)},e.prototype.detachCol=function(t,e){var i=t.col.view;null!==i&&this.detachColView(i,e);var o=t.col.trait;null!==o&&this.detachColTrait(o,e)},e.prototype.willSetCol=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCol&&s.controllerWillSetCol(t,e,i)}},e.prototype.onSetCol=function(t,e,i){null!==e&&this.detachCol(e,i),null!==t&&(this.attachCol(t,i),this.initCol(t,i))},e.prototype.didSetCol=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCol&&s.controllerDidSetCol(t,e,i)}},e.prototype.getColTrait=function(t,e){var i=this.header.trait;return null!==i?i.getCol(t,e):null},e.prototype.getOrCreateColTrait=function(t,e){var i=this.header.trait;if(null===i)throw new Error("no header trait");return i.getOrCreateCol(t,e)},e.prototype.setColTrait=function(t,e){var i=this.header.trait;if(null===i)throw new Error("no header trait");i.setCol(t,e)},e.prototype.insertColTrait=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.col.trait===t)return;s.col.trait===e&&(o=s)}}var l=this.createCol(t);if(null!==l&&(l.col.setTrait(t),this.insertChildController(l,o,t.key),null===l.col.view)){var a=this.createColView(l),h=null;null!==o&&(h=o.col.view);var u=this.header.view;null!==u?l.col.injectView(u,a,h,t.key):l.col.setView(a,h)}},e.prototype.removeColTrait=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.col.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initColTrait=function(t,e){},e.prototype.attachColTrait=function(t,e){},e.prototype.detachColTrait=function(t,e){},e.prototype.willSetColTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColTrait&&s.controllerWillSetColTrait(t,e,i)}},e.prototype.onSetColTrait=function(t,e,i){null!==e&&this.detachColTrait(e,i),null!==t&&(this.attachColTrait(e,i),this.initColTrait(t,i))},e.prototype.didSetColTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColTrait&&s.controllerDidSetColTrait(t,e,i)}},e.prototype.getColView=function(t,e){var i=this.header.view;return null!==i?i.getCol(t,e):null},e.prototype.getOrCreateColView=function(t,e){var i=this.header.view;if(null===i){if(null===(i=this.header.createView()))throw new Error("no header view");this.header.setView(i)}return i.getOrCreateCol(t,e)},e.prototype.setColView=function(t,e){var i=this.header.view;if(null===i){if(null===(i=this.header.createView()))throw new Error("no header view");this.header.setView(i)}i.setCol(t,e)},e.prototype.createColView=function(t){return t.col.createView()},e.prototype.initColView=function(t,e){var i=t.label.view;null!==i&&this.initColLabelView(i,e)},e.prototype.attachColView=function(t,e){var i=t.label.view;null!==i&&this.attachColLabelView(i,e)},e.prototype.detachColView=function(t,e){var i=t.label.view;null!==i&&this.detachColLabelView(i,e),t.remove()},e.prototype.willSetColView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColView&&s.controllerWillSetColView(t,e,i)}},e.prototype.onSetColView=function(t,e,i){null!==e&&this.detachColView(e,i),null!==t&&(this.attachColView(t,i),this.initColView(t,i))},e.prototype.didSetColView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColView&&s.controllerDidSetColView(t,e,i)}},e.prototype.willSetColLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColLayout&&s.controllerWillSetColLayout(t,e,i)}},e.prototype.onSetColLayout=function(t,e,i){},e.prototype.didSetColLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColLayout&&s.controllerDidSetColLayout(t,e,i)}},e.prototype.initColLabelView=function(t,e){},e.prototype.attachColLabelView=function(t,e){},e.prototype.detachColLabelView=function(t,e){},e.prototype.willSetColLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColLabelView&&s.controllerWillSetColLabelView(t,e,i)}},e.prototype.onSetColLabelView=function(t,e,i){null!==e&&this.detachColLabelView(e,i),null!==t&&(this.attachColLabelView(t,i),this.initColLabelView(t,i))},e.prototype.didSetColLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColLabelView&&s.controllerDidSetColLabelView(t,e,i)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.getColFastener=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.col.trait===t)return n}return null},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectColController=function(t){return t instanceof nl?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectColController(e);null!==o&&this.insertCol(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectColController(e);null!==i&&this.removeCol(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountColFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountColFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.HeaderFastener=Vs.define({viewType:rl,observeView:!0,willSetView:function(t,e){this.owner.willSetHeaderView(t,e)},onSetView:function(t,e){this.owner.onSetHeaderView(t,e)},didSetView:function(t,e){this.owner.didSetHeaderView(t,e)},createView:function(){return this.owner.createHeaderView()},insertView:function(t,e,i,o){t.prependChildView(e,o)},traitType:sl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetHeaderTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetHeaderTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetHeaderTrait(t,e)},traitWillSetCol:function(t,e,i){null!==e&&this.owner.removeColTrait(e)},traitDidSetCol:function(t,e,i){null!==t&&this.owner.insertColTrait(t,i)}}),e.ColFastener=Fs.define({type:nl,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetCol(t,e,this)},onSetController:function(t,e){this.owner.onSetCol(t,e,this)},didSetController:function(t,e){this.owner.didSetCol(t,e,this)},controllerWillSetColTrait:function(t,e){this.owner.willSetColTrait(t,e,this)},controllerDidSetColTrait:function(t,e){this.owner.onSetColTrait(t,e,this),this.owner.didSetColTrait(t,e,this)},controllerWillSetColView:function(t,e){this.owner.willSetColView(t,e,this)},controllerDidSetColView:function(t,e){this.owner.onSetColView(t,e,this),this.owner.didSetColView(t,e,this)},controllerWillSetColLayout:function(t,e){this.owner.willSetColLayout(t,e,this)},controllerDidSetColLayout:function(t,e){this.owner.onSetColLayout(t,e,this),this.owner.didSetColLayout(t,e,this)},controllerWillSetColLabelView:function(t,e){this.owner.willSetColLabelView(t,e,this)},controllerDidSetColLabelView:function(t,e){this.owner.onSetColLabelView(t,e,this),this.owner.didSetColLabelView(t,e,this)}}),m([Vs({extends:e.HeaderFastener})],e.prototype,"header",void 0),e}(Ds),al=function(t){function e(e){var i=t.call(this,e)||this;return i.rowFasteners=[],i.visibleViews=[],i.visibleFrame=new r.R2Box(0,0,window.innerWidth,window.innerHeight),i.initTable(),i}return w(e,t),e.prototype.initTable=function(){this.addClass("table"),this.position.setState("relative",ro.Intrinsic),this.backgroundColor.setLook(se.backgroundColor,ro.Intrinsic)},e.prototype.didSetDepth=function(t,e){this.modifyTheme(fe.default,[[fe.nested,0!==t?1:void 0]],!1)},e.prototype.createHeader=function(){return rl.create()},e.prototype.initHeader=function(t){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(null,ro.Intrinsic);var e=this.layout.state;t.width.setState(null!==e?e.width:null,ro.Intrinsic),t.setCulled(!0)},e.prototype.attachHeader=function(t){},e.prototype.detachHeader=function(t){},e.prototype.willSetHeader=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetHeader&&r.viewWillSetHeader(t,e,this)}},e.prototype.onSetHeader=function(t,e){null!==e&&this.detachHeader(e),null!==t&&(this.attachHeader(t),this.initHeader(t))},e.prototype.didSetHeader=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetHeader&&r.viewDidSetHeader(t,e,this)}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createRowFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initRow=function(t,e){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(null,ro.Intrinsic);var i=this.layout.state;t.width.setState(null!==i?i.width:null,ro.Intrinsic),t.setCulled(!0)},e.prototype.attachRow=function(t,e){},e.prototype.detachRow=function(t,e){},e.prototype.willSetRow=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetRow&&l.viewWillSetRow(t,e,i,this)}},e.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},e.prototype.didSetRow=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetRow&&l.viewDidSetRow(t,e,i,this)}},e.prototype.willSetLeaf=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetLeaf&&s.viewWillSetLeaf(t,e,i)}},e.prototype.onSetLeaf=function(t,e,i){},e.prototype.didSetLeaf=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidSetLeaf&&s.viewDidSetLeaf(t,e,i)}},e.prototype.willHighlightLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillHighlightLeaf&&r.viewWillHighlightLeaf(t,e)}},e.prototype.didHighlightLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidHighlightLeaf&&r.viewDidHighlightLeaf(t,e)}},e.prototype.willUnhighlightLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillUnhighlightLeaf&&r.viewWillUnhighlightLeaf(t,e)}},e.prototype.didUnhighlightLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidUnhighlightLeaf&&r.viewDidUnhighlightLeaf(t,e)}},e.prototype.onEnterLeaf=function(t,e){},e.prototype.didEnterLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidEnterLeaf&&r.viewDidEnterLeaf(t,e)}},e.prototype.onLeaveLeaf=function(t,e){},e.prototype.didLeaveLeaf=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidLeaveLeaf&&r.viewDidLeaveLeaf(t,e)}},e.prototype.onPressLeaf=function(t,e,i,o){},e.prototype.didPressLeaf=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidPressLeaf&&l.viewDidPressLeaf(t,e,i,o)}},e.prototype.onLongPressLeaf=function(t,e,i){},e.prototype.didLongPressLeaf=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidLongPressLeaf&&s.viewDidLongPressLeaf(t,e,i)}},e.prototype.willSetTree=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewWillSetTree&&s.viewWillSetTree(t,e,i)}},e.prototype.onSetTree=function(t,e,i){},e.prototype.didSetTree=function(t,e,i){for(var o=this.viewObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.viewDidSetTree&&s.viewDidSetTree(t,e,i)}},e.prototype.willExpandRow=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillExpandRow&&n.viewWillExpandRow(t)}},e.prototype.onExpandRow=function(t){},e.prototype.didExpandRow=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidExpandRow&&n.viewDidExpandRow(t)}},e.prototype.willCollapseRow=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillCollapseRow&&n.viewWillCollapseRow(t)}},e.prototype.onCollapseRow=function(t){},e.prototype.didCollapseRow=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewDidCollapseRow&&n.viewDidCollapseRow(t)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectRow=function(t){return t instanceof $s?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectRow(e);null!==o&&this.insertRow(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectRow(e);null!==i&&this.removeRow(i)},e.prototype.detectVisibleFrame=function(t){var e=this.rowHeight.getValueOr(r.Length.zero()).pxValue(),i=t.visibleFrame;if(void 0!==i){var o=this.left.state;o=o instanceof r.Length?o.pxValue():0;var n=this.top.state;return n=n instanceof r.Length?n.pxValue():0,new r.R2Box(i.xMin-o-0,i.yMin-n-e,i.xMax-o+0,i.yMax-n+e)}var s=this.node.getBoundingClientRect(),l=-s.x-0,a=-s.y-e,h=window.innerWidth-s.x+0,u=window.innerHeight-s.y+e;return new r.R2Box(l,a,h,u)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.visibleFrame=this.visibleFrame,e},e.prototype.needsProcess=function(t,e){return 0!=(t&ro.NeedsResize)&&(t|=ro.NeedsScroll),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeTable()},e.prototype.resizeTable=function(){var t=this.layout.isInherited()?null:this.layout.state;if(null!==t){var e=this.layout.superState,i=null;null!=e&&null!==e.width&&(i=e.width.pxValue()),null===i&&(i=(i=this.width.state)instanceof r.Length?i.pxValue():this.node.offsetWidth);var o=this.edgeInsets.state,n=this.paddingLeft.state;n=n instanceof r.Length?n.pxValue(i):0;var s=this.paddingRight.state;s=s instanceof r.Length?s.pxValue(i):0;var l=null!==o?o.insetLeft:0;l+=n;var a=null!==o?o.insetRight:0;a+=s;var h=t.resized(i,l,a);this.layout.setState(h)}},e.prototype.processVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.processChildViews=function(t,e,i){this.isCulled()||(0!=(t&ro.NeedsScroll)?this.scrollChildViews(t,e,i):this.processVisibleViews(t,e,i))},e.prototype.scrollChildViews=function(e,i,o){var n=this.visibleViews;n.length=0;var s=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=s,this.visibleFrame=s,t.prototype.processChildViews.call(this,e,i,(function(t,e,i){var l;if(t instanceof ar){var a=t.top.state,h=t.height.state;if(a instanceof r.Length&&h instanceof r.Length){var u=s.yMin,p=s.yMax,d=a.pxValue();l=u<=d+h.pxValue()&&d<=p,t.display.setState(l?"flex":"none",ro.Intrinsic),t.setCulled(!l)}else l=!0}else l=!0;l&&(n.push(t),o.call(this,t,e,i))}))},e.prototype.displayVisibleViews=function(t,e,i){for(var o=this.visibleViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){0!=(t&ro.NeedsLayout)?this.layoutChildViews(t,e,i):this.displayVisibleViews(t,e,i)},e.prototype.layoutChildViews=function(e,i,o){this.resizeTable();var n=this.layout.state,s=null!==n?n.width:null,l=this.rowHeight.getValue(),a=this.rowSpacing.getValue().pxValue(l.pxValue()),h=this.disclosing.getPhaseOr(1),u=this.visibleViews;u.length=0;var p=this.detectVisibleFrame(Object.getPrototypeOf(i));i.visibleFrame=p,this.visibleFrame=p;var d=0,c=0,f=0;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){var n;if((t instanceof $s||t instanceof rl)&&(0!==f&&(d+=a*h,c+=a),t.top.takesPrecedence(ro.Intrinsic)&&t.top.setIntermediateValue(r.Length.px(d),r.Length.px(c)),t.width.setState(s,ro.Intrinsic)),t instanceof ar){var l=t.top.state,v=t.height.state;if(l instanceof r.Length&&v instanceof r.Length){var y=p.yMin,g=p.yMax,w=l.pxValue();n=y<=w+v.pxValue()&&w<=g}else n=!0;t.display.setState(n?"flex":"none",ro.Intrinsic),t.setCulled(!n)}else n=!0;if(n&&u.push(t),o.call(this,t,e,i),t instanceof $s||t instanceof rl){var m=t.height.value;m=m instanceof r.Length?m.pxValue():t.node.offsetHeight;var S=t.height.state;S=S instanceof r.Length?S.pxValue():m,d+=m*h,c+=S,f+=1}})),this.height.takesPrecedence(ro.Intrinsic)&&this.height.setIntermediateValue(r.Length.px(d),r.Length.px(c));var v=this.disclosure.getPhaseOr(1);this.opacity.setState(v,ro.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountRowFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountRowFasteners(),t.prototype.unmountViewFasteners.call(this)},e.RowFastener=Zo.define({type:$s,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetRow(t,e,i,this)},viewWillSetLeaf:function(t,e){this.owner.willSetLeaf(t,e,this)},viewDidSetLeaf:function(t,e){this.owner.onSetLeaf(t,e,this),this.owner.didSetLeaf(t,e,this)},viewDidEnterLeaf:function(t){this.owner.onEnterLeaf(t,this),this.owner.didEnterLeaf(t,this)},viewDidLeaveLeaf:function(t){this.owner.onLeaveLeaf(t,this),this.owner.didLeaveLeaf(t,this)},viewDidPressLeaf:function(t,e,i){this.owner.onPressLeaf(t,e,i,this),this.owner.didPressLeaf(t,e,i,this)},viewDidLongPressLeaf:function(t,e){this.owner.onLongPressLeaf(t,e,this),this.owner.didLongPressLeaf(t,e,this)},viewWillSetTree:function(t,e){this.owner.willSetTree(t,e,this)},viewDidSetTree:function(t,e){this.owner.didSetTree(t,e,this)},viewWillExpand:function(){this.owner.willExpandRow(this),this.owner.onExpandRow(this)},viewDidExpand:function(){this.owner.didExpandRow(this)},viewWillCollapse:function(){this.owner.willCollapseRow(this)},viewDidCollapse:function(){this.owner.onCollapseRow(this),this.owner.didCollapseRow(this)}}),m([bo({type:Us,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"layout",void 0),m([bo({type:Object,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"edgeInsets",void 0),m([bo({type:Number,inherit:!0,state:0,updateFlags:ro.NeedsLayout,didSetState:function(t,e){this.owner.didSetDepth(t,e)}})],e.prototype,"depth",void 0),m([Io({type:r.Length,inherit:!0,state:r.Length.zero(),updateFlags:ro.NeedsLayout})],e.prototype,"rowSpacing",void 0),m([Io({type:r.Length,inherit:!0,state:r.Length.px(24),updateFlags:ro.NeedsLayout})],e.prototype,"rowHeight",void 0),m([bo({type:Boolean,inherit:!0,state:!1})],e.prototype,"hovers",void 0),m([bo({type:Boolean,inherit:!0,state:!0})],e.prototype,"glows",void 0),m([Oo({type:$t,inherit:!0,state:null})],e.prototype,"disclosure",void 0),m([Oo({type:$t,inherit:!0,state:null})],e.prototype,"disclosing",void 0),m([Oo({type:$t,inherit:!0,state:null,updateFlags:ro.NeedsLayout})],e.prototype,"stretch",void 0),m([Zo({key:!0,type:rl,child:!0,willSetView:function(t,e){this.owner.willSetHeader(t,e)},onSetView:function(t,e){this.owner.onSetHeader(t,e)},didSetView:function(t,e){this.owner.didSetHeader(t,e)},createView:function(){return this.owner.createHeader()},insertView:function(t,e,i,o){t.prependChildView(e,o)}})],e.prototype,"header",void 0),e}(ar),hl=function(t){function e(){var e=t.call(this)||this;return e.colFasteners=[],e.rowFasteners=[],e}return w(e,t),e.prototype.createLayout=function(){for(var t=[],e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;if(null!==n){var r=n.layout.state;null!==r&&t.push(r)}}var s=this.colSpacing.state;return new Us(null,null,null,s,t)},e.prototype.updateLayout=function(){var t=this.createLayout();this.layout.setState(t,f.Intrinsic)},e.prototype.willSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetTableLayout&&r.traitWillSetTableLayout(t,e,this)}},e.prototype.onSetLayout=function(t,e){},e.prototype.didSetLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetTableLayout&&r.traitDidSetTableLayout(t,e,this)}},e.prototype.onSetColSpacing=function(t,e){this.updateLayout()},e.prototype.createHeader=function(){return new sl},e.prototype.initHeader=function(t){},e.prototype.attachHeader=function(t){},e.prototype.detachHeader=function(t){},e.prototype.willSetHeader=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetHeader&&s.traitWillSetHeader(t,e,i,this)}},e.prototype.onSetHeader=function(t,e,i){null!==e&&this.detachHeader(e),null!==t&&(this.attachHeader(t),this.initHeader(t))},e.prototype.didSetHeader=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetHeader&&s.traitDidSetHeader(t,e,i,this)}},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createColFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initCol=function(t,e){},e.prototype.attachCol=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachCol=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetCol&&l.traitWillSetCol(t,e,i,this)}},e.prototype.onSetCol=function(t,e,i,o){null!==e&&this.detachCol(e,o),null!==t&&(this.attachCol(t,o),this.initCol(t,o)),this.updateLayout()},e.prototype.didSetCol=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetCol&&l.traitDidSetCol(t,e,i,this)}},e.prototype.onSetColLayout=function(t,e,i){this.updateLayout()},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingCols=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createRowFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initRow=function(t,e){},e.prototype.attachRow=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachRow=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetRow&&l.traitWillSetRow(t,e,i,this)}},e.prototype.onSetRow=function(t,e,i,o){null!==e&&this.detachRow(e,o),null!==t&&(this.attachRow(t,o),this.initRow(t,o))},e.prototype.didSetRow=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetRow&&l.traitDidSetRow(t,e,i,this)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingRows=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectColModel=function(t){return t.getTrait(ol)},e.prototype.detectRowModel=function(t){return t.getTrait(tl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectColModel(n);null!==r&&this.insertCol(r);var s=this.detectRowModel(n);null!==s&&this.insertRow(s)}},e.prototype.detectHeaderTrait=function(t){return t instanceof sl?t:null},e.prototype.detectColTrait=function(t){return t instanceof ol?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i];if(null===this.header.trait){var r=this.detectHeaderTrait(n);null!==r&&this.header.setTrait(r)}var s=this.detectColTrait(n);null!==s&&this.insertCol(s)}},e.prototype.didSetModel=function(e,i){null!==e&&(this.detectTraits(e),this.detectModels(e)),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectColModel(e);if(null!==o){var n=null!==i?this.detectColModel(i):null;this.insertCol(o,n)}var r=this.detectRowModel(e);if(null!==r){n=null!==i?this.detectRowModel(i):null;this.insertRow(r,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectColModel(e);null!==i&&this.removeCol(i);var o=this.detectRowModel(e);null!==o&&this.removeRow(o)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.header.trait){var o=this.detectHeaderTrait(e);null!==o&&this.header.setTrait(o,i)}var n=this.detectColTrait(e);null!==n&&this.insertCol(n,i)},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectHeaderTrait(e);null!==i&&this.header.trait===i&&this.header.setTrait(null);var o=this.detectColTrait(e);null!==o&&this.removeCol(o)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingCols(),this.startConsumingRows()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingRows(),this.stopConsumingCols()},e.ColFastener=_.define({type:ol,sibling:!1,observe:!0,willSetTrait:function(t,e,i){this.owner.willSetCol(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetCol(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetCol(t,e,i,this)},traitDidSetLayout:function(t,e){this.owner.onSetColLayout(t,e,this)}}),e.RowFastener=_.define({type:tl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetRow(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetRow(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetRow(t,e,i,this)}}),m([N({type:Us,state:null,willSetState:function(t,e){this.owner.willSetLayout(t,e)},didSetState:function(t,e){this.owner.onSetLayout(t,e),this.owner.didSetLayout(t,e)}})],e.prototype,"layout",void 0),m([N({type:r.Length,state:null,didSetState:function(t,e){this.owner.onSetColSpacing(t,e)}})],e.prototype,"colSpacing",void 0),m([_({type:sl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetHeader(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetHeader(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetHeader(t,e,i)},createTrait:function(){return this.owner.createHeader()}})],e.prototype,"header",void 0),e}(ht),ul=function(t){function e(){var e=t.call(this)||this;return e.colFasteners=[],e.rowFasteners=[],e}return w(e,t),e.prototype.layoutTable=function(t,e){e.layout.setState(t,ro.Intrinsic)},e.prototype.initTableTrait=function(t){var e=t.layout.state;if(null!==e){var i=this.table.view;null!==i&&this.layoutTable(e,i)}},e.prototype.attachTableTrait=function(t){var e=t.header.trait;null!==e&&this.insertHeaderTrait(e);for(var i=t.colFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].trait;null!==r&&this.insertColTrait(r)}var s=t.rowFasteners;for(o=0,n=s.length;o<n;o+=1){var l=s[o].trait;null!==l&&this.insertRowTrait(l)}},e.prototype.detachTableTrait=function(t){for(var e=t.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeRowTrait(n)}var r=t.colFasteners;for(i=0,o=r.length;i<o;i+=1){var s=r[i].trait;null!==s&&this.removeColTrait(s)}var l=t.header.trait;null!==l&&this.removeHeaderTrait(l)},e.prototype.willSetTableTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTableTrait&&r.controllerWillSetTableTrait(t,e,this)}},e.prototype.onSetTableTrait=function(t,e){null!==e&&this.detachTableTrait(e),null!==t&&(this.attachTableTrait(t),this.initTableTrait(t))},e.prototype.didSetTableTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTableTrait&&r.controllerDidSetTableTrait(t,e,this)}},e.prototype.willSetTableLayout=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTableLayout&&r.controllerWillSetTableLayout(t,e,this)}},e.prototype.onSetTableLayout=function(t,e){},e.prototype.didSetTableLayout=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTableLayout&&r.controllerDidSetTableLayout(t,e,this)}},e.prototype.createTableView=function(){return al.create()},e.prototype.initTableView=function(t){var e=this.table.trait;if(null!==e){var i=e.layout.state;null!==i&&this.layoutTable(i,t)}},e.prototype.attachTableView=function(t){var e=this.header.controller;null!==e&&(e.header.injectView(t),null===t.header.view&&t.header.setView(e.header.view));for(var i=this.rowFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;if(null!==r){var s=r.row.view;null!==s&&null===s.parentView&&r.row.injectView(t)}}},e.prototype.detachTableView=function(t){},e.prototype.willSetTableView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTableView&&r.controllerWillSetTableView(t,e,this)}},e.prototype.onSetTableView=function(t,e){null!==e&&this.detachTableView(e),null!==t&&(this.attachTableView(t),this.initTableView(t))},e.prototype.didSetTableView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTableView&&r.controllerDidSetTableView(t,e,this)}},e.prototype.createHeader=function(t){return new ll},e.prototype.initHeader=function(t){var e=this.table.trait;if(null!==e){var i=e.header.trait;null!==i&&t.header.setTrait(i)}var o=t.header.trait;null!==o&&this.initHeaderTrait(o);var n=t.header.view;null!==n&&this.initHeaderView(n)},e.prototype.attachHeader=function(t){var e=t.header.trait;null!==e&&this.attachHeaderTrait(e);var i=t.header.view;null!==i&&this.attachHeaderView(i)},e.prototype.detachHeader=function(t){var e=t.header.trait;null!==e&&this.detachHeaderTrait(e);var i=t.header.view;null!==i&&this.detachHeaderView(i)},e.prototype.willSetHeader=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetHeader&&r.controllerWillSetHeader(t,e,this)}},e.prototype.onSetHeader=function(t,e){null!==e&&this.detachHeader(e),null!==t&&(this.attachHeader(t),this.initHeader(t))},e.prototype.didSetHeader=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetHeader&&r.controllerDidSetHeader(t,e,this)}},e.prototype.insertHeaderTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof ll){if(s.header.trait===t)return;s.header.trait===e&&(o=s)}}var l=this.createHeader(t);if(l instanceof ll&&(l.header.setTrait(t),this.header.setController(l,o),this.insertChildController(l,o),null===l.header.view)){var a=l.header.createView(),h=null;null!==o&&(h=o.header.view);var u=this.table.view;null!==u?l.header.injectView(u,a,h,null):l.header.setView(a,h)}},e.prototype.removeHeaderTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof ll&&n.header.trait===t)return this.header.setController(null),void n.remove()}},e.prototype.initHeaderTrait=function(t){},e.prototype.attachHeaderTrait=function(t){},e.prototype.detachHeaderTrait=function(t){},e.prototype.willSetHeaderTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetHeaderTrait&&r.controllerWillSetHeaderTrait(t,e,this)}},e.prototype.onSetHeaderTrait=function(t,e){null!==e&&this.detachHeaderTrait(e),null!==t&&(this.attachHeaderTrait(t),this.initHeaderTrait(t))},e.prototype.didSetHeaderTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetHeaderTrait&&r.controllerDidSetHeaderTrait(t,e,this)}},e.prototype.initHeaderView=function(t){},e.prototype.attachHeaderView=function(t){var e=this.table.view;null!==e&&null===e.header.view&&e.header.setView(t)},e.prototype.detachHeaderView=function(t){t.remove()},e.prototype.willSetHeaderView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetHeaderView&&r.controllerWillSetHeaderView(t,e,this)}},e.prototype.onSetHeaderView=function(t,e){null!==e&&this.detachHeaderView(e),null!==t&&(this.attachHeaderView(t),this.initHeaderView(t))},e.prototype.didSetHeaderView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetHeaderView&&r.controllerDidSetHeaderView(t,e,this)}},e.prototype.insertCol=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createColFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeCol=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createCol=function(t){return new nl},e.prototype.initCol=function(t,e){var i=t.col.trait;null!==i&&this.initColTrait(i,e);var o=t.col.view;null!==o&&this.initColView(o,e)},e.prototype.attachCol=function(t,e){var i=t.col.trait;null!==i&&this.attachColTrait(i,e);var o=t.col.view;null!==o&&this.attachColView(o,e)},e.prototype.detachCol=function(t,e){var i=t.col.trait;null!==i&&this.detachColTrait(i,e);var o=t.col.view;null!==o&&this.detachColView(o,e)},e.prototype.willSetCol=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetCol&&s.controllerWillSetCol(t,e,i)}},e.prototype.onSetCol=function(t,e,i){null!==e&&this.detachCol(e,i),null!==t&&(this.attachCol(t,i),this.initCol(t,i))},e.prototype.didSetCol=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetCol&&s.controllerDidSetCol(t,e,i)}},e.prototype.insertColTrait=function(t,e){void 0===e&&(e=null);for(var i=this.colFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.col.trait===t)return;s.col.trait===e&&(o=s)}}var l=this.createCol(t);null!==l&&(this.insertChildController(l,o),l.col.setTrait(t))},e.prototype.removeColTrait=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.col.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initColTrait=function(t,e){},e.prototype.attachColTrait=function(t,e){},e.prototype.detachColTrait=function(t,e){},e.prototype.willSetColTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColTrait&&s.controllerWillSetColTrait(t,e,i)}},e.prototype.onSetColTrait=function(t,e,i){null!==e&&this.detachColTrait(e,i),null!==t&&(this.attachColTrait(e,i),this.initColTrait(t,i))},e.prototype.didSetColTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColTrait&&s.controllerDidSetColTrait(t,e,i)}},e.prototype.willSetColLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColLayout&&s.controllerWillSetColLayout(t,e,i)}},e.prototype.onSetColLayout=function(t,e,i){},e.prototype.didSetColLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColLayout&&s.controllerDidSetColLayout(t,e,i)}},e.prototype.createColView=function(t){return t.col.createView()},e.prototype.initColView=function(t,e){var i=t.label.view;null!==i&&this.initColLabelView(i,e)},e.prototype.attachColView=function(t,e){var i=t.label.view;null!==i&&this.attachColLabelView(i,e)},e.prototype.detachColView=function(t,e){var i=t.label.view;null!==i&&this.detachColLabelView(i,e),t.remove()},e.prototype.willSetColView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColView&&s.controllerWillSetColView(t,e,i)}},e.prototype.onSetColView=function(t,e,i){null!==e&&this.detachColView(e,i),null!==t&&(this.attachColView(t,i),this.initColView(t,i))},e.prototype.didSetColView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColView&&s.controllerDidSetColView(t,e,i)}},e.prototype.initColLabelView=function(t,e){},e.prototype.attachColLabelView=function(t,e){},e.prototype.detachColLabelView=function(t,e){},e.prototype.willSetColLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetColLabelView&&s.controllerWillSetColLabelView(t,e,i)}},e.prototype.onSetColLabelView=function(t,e,i){null!==e&&this.detachColLabelView(e,i),null!==t&&(this.attachColLabelView(t,i),this.initColLabelView(t,i))},e.prototype.didSetColLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetColLabelView&&s.controllerDidSetColLabelView(t,e,i)}},e.prototype.createColFastener=function(t){return new e.ColFastener(this,t.key,"col")},e.prototype.getColFastener=function(t){for(var e=this.colFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.col.trait===t)return n}return null},e.prototype.mountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountColFasteners=function(){for(var t=this.colFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.insertRow=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createRowFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeRow=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createRow=function(t){return new el},e.prototype.initRow=function(t,e){var i=t.row.trait;null!==i&&this.initRowTrait(i,e);var o=t.row.view;null!==o&&this.initRowView(o,e)},e.prototype.attachRow=function(t,e){var i=t.row.trait;null!==i&&this.attachRowTrait(i,e);var o=t.row.view;null!==o&&this.attachRowView(o,e)},e.prototype.detachRow=function(t,e){var i=t.row.view;null!==i&&this.detachRowView(i,e);var o=t.row.trait;null!==o&&this.detachRowTrait(o,e)},e.prototype.willSetRow=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetRow&&s.controllerWillSetRow(t,e,i)}},e.prototype.onSetRow=function(t,e,i){null!==e&&this.detachRow(e,i),null!==t&&(this.attachRow(t,i),this.initRow(t,i))},e.prototype.didSetRow=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetRow&&s.controllerDidSetRow(t,e,i)}},e.prototype.insertRowTrait=function(t,e){void 0===e&&(e=null);for(var i=this.rowFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.row.trait===t)return;s.row.trait===e&&(o=s)}}var l=this.createRow(t);if(null!==l&&(l.row.setTrait(t),this.insertChildController(l,o),null===l.row.view)){var a=this.createRowView(l),h=null;null!==o&&(h=o.row.view);var u=this.table.view;null!==u?l.row.injectView(u,a,h,null):l.row.setView(a,h)}},e.prototype.removeRowTrait=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.row.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initRowTrait=function(t,e){},e.prototype.attachRowTrait=function(t,e){},e.prototype.detachRowTrait=function(t,e){},e.prototype.willSetRowTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetRowTrait&&s.controllerWillSetRowTrait(t,e,i)}},e.prototype.onSetRowTrait=function(t,e,i){null!==e&&this.detachRowTrait(e,i),null!==t&&(this.attachRowTrait(t,i),this.initRowTrait(t,i))},e.prototype.didSetRowTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetRowTrait&&s.controllerDidSetRowTrait(t,e,i)}},e.prototype.createRowView=function(t){return t.row.createView()},e.prototype.initRowView=function(t,e){},e.prototype.attachRowView=function(t,e){},e.prototype.detachRowView=function(t,e){t.remove()},e.prototype.willSetRowView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetRowView&&s.controllerWillSetRowView(t,e,i)}},e.prototype.onSetRowView=function(t,e,i){null!==e&&this.detachRowView(e,i),null!==t&&(this.attachRowView(t,i),this.initRowView(t,i))},e.prototype.didSetRowView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetRowView&&s.controllerDidSetRowView(t,e,i)}},e.prototype.initLeafTrait=function(t,e){},e.prototype.attachLeafTrait=function(t,e){},e.prototype.detachLeafTrait=function(t,e){},e.prototype.willSetLeafTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLeafTrait&&s.controllerWillSetLeafTrait(t,e,i)}},e.prototype.onSetLeafTrait=function(t,e,i){null!==e&&this.detachLeafTrait(e,i),null!==t&&(this.attachLeafTrait(t,i),this.initLeafTrait(t,i))},e.prototype.didSetLeafTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLeafTrait&&s.controllerDidSetLeafTrait(t,e,i)}},e.prototype.initLeafView=function(t,e){},e.prototype.attachLeafView=function(t,e){},e.prototype.detachLeafView=function(t,e){},e.prototype.willSetLeafView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLeafView&&s.controllerWillSetLeafView(t,e,i)}},e.prototype.onSetLeafView=function(t,e,i){null!==e&&this.detachLeafView(e,i),null!==t&&(this.attachLeafView(t,i),this.initLeafView(t,i))},e.prototype.didSetLeafView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLeafView&&s.controllerDidSetLeafView(t,e,i)}},e.prototype.willHighlightLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillHighlightLeafView&&r.controllerWillHighlightLeafView(t,e)}},e.prototype.onHighlightLeafView=function(t,e){},e.prototype.didHighlightLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidHighlightLeafView&&r.controllerDidHighlightLeafView(t,e)}},e.prototype.willUnhighlightLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillUnhighlightLeafView&&r.controllerWillUnhighlightLeafView(t,e)}},e.prototype.onUnhighlightLeafView=function(t,e){},e.prototype.didUnhighlightLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidUnhighlightLeafView&&r.controllerDidUnhighlightLeafView(t,e)}},e.prototype.onEnterLeafView=function(t,e){},e.prototype.didEnterLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidEnterLeafView&&r.controllerDidEnterLeafView(t,e)}},e.prototype.onLeaveLeafView=function(t,e){},e.prototype.didLeaveLeafView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidLeaveLeafView&&r.controllerDidLeaveLeafView(t,e)}},e.prototype.onPressLeafView=function(t,e,i,o){},e.prototype.didPressLeafView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidPressLeafView&&l.controllerDidPressLeafView(t,e,i,o)}},e.prototype.onLongPressLeafView=function(t,e,i){},e.prototype.didLongPressLeafView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidLongPressLeafView&&s.controllerDidLongPressLeafView(t,e,i)}},e.prototype.initCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.initCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.initCellView(n,e,i)},e.prototype.attachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.attachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.attachCellView(n,e,i)},e.prototype.detachCell=function(t,e,i){var o=t.cell.trait;null!==o&&this.detachCellTrait(o,e,i);var n=t.cell.view;null!==n&&this.detachCellView(n,e,i)},e.prototype.willSetCell=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetCell&&l.controllerWillSetCell(t,e,i,o)}},e.prototype.onSetCell=function(t,e,i,o){null!==e&&this.detachCell(e,i,o),null!==t&&(this.attachCell(t,i,o),this.initCell(t,i,o))},e.prototype.didSetCell=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetCell&&l.controllerDidSetCell(t,e,i,o)}},e.prototype.initCellTrait=function(t,e,i){},e.prototype.attachCellTrait=function(t,e,i){},e.prototype.detachCellTrait=function(t,e,i){},e.prototype.willSetCellTrait=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetCellTrait&&l.controllerWillSetCellTrait(t,e,i,o)}},e.prototype.onSetCellTrait=function(t,e,i,o){null!==e&&this.detachCellTrait(e,i,o),null!==t&&(this.attachCellTrait(e,i,o),this.initCellTrait(t,i,o))},e.prototype.didSetCellTrait=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetCellTrait&&l.controllerDidSetCellTrait(t,e,i,o)}},e.prototype.initCellView=function(t,e,i){if(t instanceof Bs){var o=t.content.view;null!==o&&this.initCellContentView(o,e,i)}},e.prototype.attachCellView=function(t,e,i){if(t instanceof Bs){var o=t.content.view;null!==o&&this.attachCellContentView(o,e,i)}},e.prototype.detachCellView=function(t,e,i){if(t instanceof Bs){var o=t.content.view;null!==o&&this.detachCellContentView(o,e,i)}},e.prototype.willSetCellView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetCellView&&l.controllerWillSetCellView(t,e,i,o)}},e.prototype.onSetCellView=function(t,e,i,o){null!==e&&this.detachCellView(e,i,o),null!==t&&(this.attachCellView(t,i,o),this.initCellView(t,i,o))},e.prototype.didSetCellView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetCellView&&l.controllerDidSetCellView(t,e,i,o)}},e.prototype.initCellContentView=function(t,e,i){},e.prototype.attachCellContentView=function(t,e,i){},e.prototype.detachCellContentView=function(t,e,i){},e.prototype.willSetCellContentView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetCellContentView&&l.controllerWillSetCellContentView(t,e,i,o)}},e.prototype.onSetCellContentView=function(t,e,i,o){null!==e&&this.detachCellContentView(e,i,o),null!==t&&(this.attachCellContentView(t,i,o),this.initCellContentView(t,i,o))},e.prototype.didSetCellContentView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetCellContentView&&l.controllerDidSetCellContentView(t,e,i,o)}},e.prototype.willSetCellIcon=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetCellIcon&&l.controllerWillSetCellIcon(t,e,i,o)}},e.prototype.onSetCellIcon=function(t,e,i,o){},e.prototype.didSetCellIcon=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetCellIcon&&l.controllerDidSetCellIcon(t,e,i,o)}},e.prototype.initTree=function(t,e){var i=t.table.trait;null!==i&&this.initTreeTrait(i,e);var o=t.table.view;null!==o&&this.initTreeView(o,e)},e.prototype.attachTree=function(t,e){var i=t.table.trait;null!==i&&this.attachTreeTrait(i,e);var o=t.table.view;null!==o&&this.attachTreeView(o,e)},e.prototype.detachTree=function(t,e){var i=t.table.trait;null!==i&&this.detachTreeTrait(i,e);var o=t.table.view;null!==o&&this.detachTreeView(o,e)},e.prototype.willSetTree=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTree&&s.controllerWillSetTree(t,e,i)}},e.prototype.onSetTree=function(t,e,i){null!==e&&this.detachTree(e,i),null!==t&&(this.attachTree(t,i),this.initTree(t,i))},e.prototype.didSetTree=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTree&&s.controllerDidSetTree(t,e,i)}},e.prototype.initTreeTrait=function(t,e){},e.prototype.attachTreeTrait=function(t,e){},e.prototype.detachTreeTrait=function(t,e){},e.prototype.willSetTreeTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTreeTrait&&s.controllerWillSetTreeTrait(t,e,i)}},e.prototype.onSetTreeTrait=function(t,e,i){null!==e&&this.detachTreeTrait(e,i),null!==t&&(this.attachTreeTrait(e,i),this.initTreeTrait(t,i))},e.prototype.didSetTreeTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTreeTrait&&s.controllerDidSetTreeTrait(t,e,i)}},e.prototype.initTreeView=function(t,e){},e.prototype.attachTreeView=function(t,e){},e.prototype.detachTreeView=function(t,e){},e.prototype.willSetTreeView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTreeView&&s.controllerWillSetTreeView(t,e,i)}},e.prototype.onSetTreeView=function(t,e,i){null!==e&&this.detachTreeView(e,i),null!==t&&(this.attachTreeView(t,i),this.initTreeView(t,i))},e.prototype.didSetTreeView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTreeView&&s.controllerDidSetTreeView(t,e,i)}},e.prototype.willExpandRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillExpandRowView&&r.controllerWillExpandRowView(t,e)}},e.prototype.onExpandRowView=function(t,e){},e.prototype.didExpandRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidExpandRowView&&r.controllerDidExpandRowView(t,e)}},e.prototype.willCollapseRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillCollapseRowView&&r.controllerWillCollapseRowView(t,e)}},e.prototype.onCollapseRowView=function(t,e){},e.prototype.didCollapseRowView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidCollapseRowView&&r.controllerDidCollapseRowView(t,e)}},e.prototype.createRowFastener=function(t){return new e.RowFastener(this,t.key,"row")},e.prototype.getRowFastener=function(t){for(var e=this.rowFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.row.trait===t)return n}return null},e.prototype.mountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountRowFasteners=function(){for(var t=this.rowFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectHeaderController=function(t){return t instanceof ll?t:null},e.prototype.detectRowController=function(t){return t instanceof el?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectHeaderController(e);null!==o&&this.header.setController(o,i);var n=this.detectRowController(e);null!==n&&this.insertRow(n,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e),null!==this.detectHeaderController(e)&&this.header.setController(null);var i=this.detectRowController(e);null!==i&&this.removeRow(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountColFasteners(),this.mountRowFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountRowFasteners(),this.unmountColFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.TableFastener=Vs.define({viewType:al,observeView:!0,willSetView:function(t,e){this.owner.willSetTableView(t,e)},onSetView:function(t,e){this.owner.onSetTableView(t,e)},didSetView:function(t,e){this.owner.didSetTableView(t,e)},viewDidSetHeader:function(t,e,i){var o=this.owner.header.controller;null!==o&&o.header.setView(t)},createView:function(){return this.owner.createTableView()},traitType:hl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetTableTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetTableTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetTableTrait(t,e)},traitWillSetTableLayout:function(t,e){this.owner.willSetTableLayout(t,e)},traitDidSetTableLayout:function(t,e){this.owner.onSetTableLayout(t,e),this.owner.didSetTableLayout(t,e)},traitWillSetHeader:function(t,e,i){null!==e&&this.owner.removeHeaderTrait(e)},traitDidSetHeader:function(t,e,i){null!==t&&this.owner.insertHeaderTrait(t,i)},traitWillSetCol:function(t,e,i){null!==e&&this.owner.removeColTrait(e)},traitDidSetCol:function(t,e,i){null!==t&&this.owner.insertColTrait(t,i)},traitWillSetRow:function(t,e,i){null!==e&&this.owner.removeRowTrait(e)},traitDidSetRow:function(t,e,i){null!==t&&this.owner.insertRowTrait(t,i)}}),e.HeaderFastener=Fs.define({type:ll,observe:!0,willSetController:function(t,e){this.owner.willSetHeader(t,e)},onSetController:function(t,e){this.owner.onSetHeader(t,e)},didSetController:function(t,e){this.owner.didSetHeader(t,e)},controllerWillSetHeaderTrait:function(t,e){this.owner.willSetHeaderTrait(t,e)},controllerDidSetHeaderTrait:function(t,e){this.owner.onSetHeaderTrait(t,e),this.owner.didSetHeaderTrait(t,e)},controllerWillSetHeaderView:function(t,e){this.owner.willSetHeaderView(t,e)},controllerDidSetHeaderView:function(t,e){this.owner.onSetHeaderView(t,e),this.owner.didSetHeaderView(t,e)}}),e.ColFastener=Fs.define({type:nl,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetCol(t,e,this)},onSetController:function(t,e){this.owner.onSetCol(t,e,this)},didSetController:function(t,e){this.owner.didSetCol(t,e,this)},controllerWillSetColTrait:function(t,e){this.owner.willSetColTrait(t,e,this)},controllerDidSetColTrait:function(t,e){this.owner.onSetColTrait(t,e,this),this.owner.didSetColTrait(t,e,this)},controllerWillSetColLayout:function(t,e){this.owner.willSetColLayout(t,e,this)},controllerDidSetColLayout:function(t,e){this.owner.onSetColLayout(t,e,this),this.owner.didSetColLayout(t,e,this)},controllerWillSetColView:function(t,e){this.owner.willSetColView(t,e,this)},controllerDidSetColView:function(t,e){this.owner.onSetColView(t,e,this),this.owner.didSetColView(t,e,this)},controllerWillSetColLabelView:function(t,e){this.owner.willSetColLabelView(t,e,this)},controllerDidSetColLabelView:function(t,e){this.owner.onSetColLabelView(t,e,this),this.owner.didSetColLabelView(t,e,this)}}),e.RowFastener=Fs.define({type:el,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetRow(t,e,this)},onSetController:function(t,e){this.owner.onSetRow(t,e,this)},didSetController:function(t,e){this.owner.didSetRow(t,e,this)},controllerWillSetRowTrait:function(t,e){this.owner.willSetRowTrait(t,e,this)},controllerDidSetRowTrait:function(t,e){this.owner.onSetRowTrait(t,e,this),this.owner.didSetRowTrait(t,e,this)},controllerWillSetRowView:function(t,e){this.owner.willSetRowView(t,e,this)},controllerDidSetRowView:function(t,e){this.owner.onSetRowView(t,e,this),this.owner.didSetRowView(t,e,this)},controllerWillSetLeafTrait:function(t,e){this.owner.willSetLeafTrait(t,e,this)},controllerDidSetLeafTrait:function(t,e){this.owner.onSetLeafTrait(t,e,this),this.owner.didSetLeafTrait(t,e,this)},controllerWillSetLeafView:function(t,e){this.owner.willSetLeafView(t,e,this)},controllerDidSetLeafView:function(t,e){this.owner.onSetLeafView(t,e,this),this.owner.didSetLeafView(t,e,this)},controllerWillHighlightLeafView:function(t){this.owner.willHighlightLeafView(t,this),this.owner.onHighlightLeafView(t,this)},controllerDidHighlightLeafView:function(t){this.owner.didHighlightLeafView(t,this)},controllerWillUnhighlightLeafView:function(t){this.owner.willUnhighlightLeafView(t,this)},controllerDidUnhighlightLeafView:function(t){this.owner.onUnhighlightLeafView(t,this),this.owner.didUnhighlightLeafView(t,this)},controllerDidEnterLeafView:function(t){this.owner.onEnterLeafView(t,this),this.owner.didEnterLeafView(t,this)},controllerDidLeaveLeafView:function(t){this.owner.onLeaveLeafView(t,this),this.owner.didLeaveLeafView(t,this)},controllerDidPressLeafView:function(t,e,i){this.owner.onPressLeafView(t,e,i,this),this.owner.didPressLeafView(t,e,i,this)},controllerDidLongPressLeafView:function(t,e){this.owner.onLongPressLeafView(t,e,this),this.owner.didLongPressLeafView(t,e,this)},controllerWillSetCell:function(t,e,i){this.owner.willSetCell(t,e,i,this)},controllerDidSetCell:function(t,e,i){this.owner.onSetCell(t,e,i,this),this.owner.didSetCell(t,e,i,this)},controllerWillSetCellTrait:function(t,e,i){this.owner.willSetCellTrait(t,e,i,this)},controllerDidSetCellTrait:function(t,e,i){this.owner.onSetCellTrait(t,e,i,this),this.owner.didSetCellTrait(t,e,i,this)},controllerWillSetCellView:function(t,e,i){this.owner.willSetCellView(t,e,i,this)},controllerDidSetCellView:function(t,e,i){this.owner.onSetCellView(t,e,i,this),this.owner.didSetCellView(t,e,i,this)},controllerWillSetCellContentView:function(t,e,i){this.owner.willSetCellContentView(t,e,i,this)},controllerDidSetCellContentView:function(t,e,i){this.owner.onSetCellContentView(t,e,i,this),this.owner.didSetCellContentView(t,e,i,this)},controllerWillSetCellIcon:function(t,e,i){this.owner.willSetCellIcon(t,e,i,this)},controllerDidSetCellIcon:function(t,e,i){this.owner.onSetCellIcon(t,e,i,this),this.owner.didSetCellIcon(t,e,i,this)},controllerWillSetTree:function(t,e){this.owner.willSetTree(t,e,this)},controllerDidSetTree:function(t,e){this.owner.onSetTree(t,e,this),this.owner.didSetTree(t,e,this)},controllerWillSetTreeTrait:function(t,e){this.owner.willSetTreeTrait(t,e,this)},controllerDidSetTreeTrait:function(t,e){this.owner.onSetTreeTrait(t,e,this),this.owner.didSetTreeTrait(t,e,this)},controllerWillSetTreeView:function(t,e){this.owner.willSetTreeView(t,e,this)},controllerDidSetTreeView:function(t,e){this.owner.onSetTreeView(t,e,this),this.owner.didSetTreeView(t,e,this)},controllerWillExpandRowView:function(t){this.owner.willExpandRowView(t,this),this.owner.onExpandRowView(t,this)},controllerDidExpandRowView:function(t){this.owner.didExpandRowView(t,this)},controllerWillCollapseRowView:function(t){this.owner.willCollapseRowView(t,this)},controllerDidCollapseRowView:function(t){this.owner.onCollapseRowView(t,this),this.owner.didCollapseRowView(t,this)}}),m([Vs({extends:e.TableFastener})],e.prototype,"table",void 0),m([Fs({extends:e.HeaderFastener})],e.prototype,"header",void 0),e}(Ds),pl=function(t){function e(i){var o=t.call(this,i)||this;return o.displayState=e.HiddenState,o.onClick=o.onClick.bind(o),"undefined"!=typeof PointerEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("pointerup",o.onClick),o.on("click",o.onSyntheticClick)):"undefined"!=typeof TouchEvent?(o.onSyntheticClick=o.onSyntheticClick.bind(o),o.on("touchend",o.onClick),o.on("click",o.onSyntheticClick)):o.on("click",o.onClick),o.initScrim(),o}return w(e,t),e.prototype.initScrim=function(){this.addClass("scrim"),this.display.setState("none",ro.Intrinsic),this.position.setState("absolute",ro.Intrinsic),this.top.setState(0,ro.Intrinsic),this.right.setState(0,ro.Intrinsic),this.bottom.setState(0,ro.Intrinsic),this.left.setState(0,ro.Intrinsic),this.pointerEvents.setState("auto",ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic),this.backgroundColor.setState(Tt.black(0),ro.Intrinsic)},e.prototype.setDisplayState=function(t){this.displayState=t},e.prototype.isShown=function(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:return!0;default:return!1}},e.prototype.isHidden=function(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}},e.prototype.show=function(t,i){this.isHidden()&&(i=void 0===i||!0===i?this.getLookOr(se.timing,!1):l.Timing.fromAny(i),this.setDisplayState(e.ShowState),!1!==i?(this.backgroundColor.setState(Tt.black(0),ro.Intrinsic),this.backgroundColor.setState(Tt.black(t),i,ro.Intrinsic)):(this.willShow(),this.backgroundColor.setState(Tt.black(t),ro.Intrinsic),this.didShow()))},e.prototype.willShow=function(){this.setDisplayState(e.ShowingState),this.display.setState("block",ro.Intrinsic)},e.prototype.didShow=function(){this.setDisplayState(e.ShownState)},e.prototype.hide=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.setDisplayState(e.HideState),!1!==t?this.backgroundColor.setState(Tt.black(0),t,ro.Intrinsic):(this.willHide(),this.backgroundColor.setState(Tt.black(0),ro.Intrinsic),this.didHide()))},e.prototype.willHide=function(){this.setDisplayState(e.HidingState)},e.prototype.didHide=function(){this.setDisplayState(e.HiddenState),this.display.setState("none",ro.Intrinsic)},e.prototype.onMount=function(){t.prototype.onMount.call(this);var e=this.modalService.manager;null!=e&&(e.addViewManagerObserver(this),this.modalManagerDidUpdateModality(e.modality,0,e))},e.prototype.onUnmount=function(){var e=this.modalService.manager;null!=e&&e.removeViewManagerObserver(this),this.hide(!1),t.prototype.onUnmount.call(this)},e.prototype.modalManagerDidUpdateModality=function(t,i,o){if(0!==t){var n=.5*t;0===i?this.show(n):(this.backgroundColor.setState(Tt.black(n),ro.Intrinsic),this.displayState===e.ShowingState&&this.didShow())}else this.hide()},e.prototype.onClick=function(t){var e=this.modalService.manager;null!=e&&e.displaceModals(t)},e.prototype.onSyntheticClick=function(t){t.preventDefault(),t.stopPropagation()},e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,m([Sn({propertyNames:"background-color",type:Tt,state:null,onBegin:function(){var t=this.owner.displayState;t===e.ShowState?this.owner.willShow():t===e.HideState&&this.owner.willHide()},onEnd:function(){var t=this.owner.displayState;t===e.ShowingState?this.owner.didShow():t===e.HidingState&&this.owner.didHide()}})],e.prototype,"backgroundColor",void 0),e}(ar),dl=function(t){function i(e){var o=t.call(this,e)||this;return o.sourceFrame=null,o.displayState=i.HiddenState,o.modality=!1,o.allowedPlacement=["top","bottom","right","left"],o.currentPlacement="none",o.onClick=o.onClick.bind(o),o.initArrow(),o}return w(i,t),i.prototype.initArrow=function(){var t=this.createArrow();null!==t&&this.prependChildView(t,"arrow")},i.prototype.createArrow=function(){var t=ar.create("div");return t.addClass("popover-arrow"),t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.width.setState(0,ro.Intrinsic),t.height.setState(0,ro.Intrinsic),t},i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.source&&this.source.setView(e.source),void 0!==e.placement&&this.placement(e.placement),void 0!==e.placementFrame&&this.placementFrame(e.placementFrame),void 0!==e.arrowWidth&&this.arrowWidth(e.arrowWidth),void 0!==e.arrowHeight&&this.arrowHeight(e.arrowHeight)},i.prototype.setDisplayState=function(t){this.displayState=t},i.prototype.initSourceView=function(t){},i.prototype.attachSourceView=function(t){},i.prototype.detachSourceView=function(t){},i.prototype.willSetSourceView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverWillSetSource&&r.popoverWillSetSource(t,e,this)}},i.prototype.onSetSourceView=function(t,e){this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetSourceView=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.popoverDidSetSource&&r.popoverDidSetSource(t,e,this)}},i.prototype.setSource=function(t){this.source.setView(t)},Object.defineProperty(i.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modalState",{get:function(){switch(this.displayState){case i.HiddenState:return"hidden";case i.HidingState:case i.HideState:return"hiding";case i.ShownState:return"shown";case i.ShowingState:case i.ShowState:return"showing";default:throw new Error(""+this.displayState)}},enumerable:!1,configurable:!0}),i.prototype.isShown=function(){switch(this.displayState){case i.ShownState:case i.ShowingState:case i.ShowState:return!0;default:return!1}},i.prototype.isHidden=function(){switch(this.displayState){case i.HiddenState:case i.HidingState:case i.HideState:return!0;default:return!1}},i.prototype.showModal=function(t,e){this.isHidden()&&(e=void 0===e||!0===e?this.getLookOr(se.timing,!1):l.Timing.fromAny(e),void 0!==t.modal&&(this.modality=t.modal),this.setDisplayState(i.ShowState),!1!==e?this.displayPhase.setState(1,e):(this.willShow(),this.didShow()))},i.prototype.willShow=function(){this.setDisplayState(i.ShowingState);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverWillShow&&n.popoverWillShow(this)}this.place(),this.visibility.setState("visible",ro.Intrinsic)},i.prototype.didShow=function(){this.setDisplayState(i.ShownState),this.pointerEvents.setState("auto",ro.Intrinsic),this.marginTop.setState(null,ro.Intrinsic),this.opacity.setState(void 0,ro.Intrinsic);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidShow&&n.popoverDidShow(this)}},i.prototype.hideModal=function(t){this.isShown()&&(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.setDisplayState(i.HideState),!1!==t?this.displayPhase.setState(0,t):(this.willHide(),this.didHide()))},i.prototype.willHide=function(){this.setDisplayState(i.HidingState);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverWillHide&&n.popoverWillHide(this)}this.pointerEvents.setState("none",ro.Intrinsic)},i.prototype.didHide=function(){this.setDisplayState(i.HiddenState),this.visibility.setState("hidden",ro.Intrinsic),this.marginTop.setState(null,ro.Intrinsic),this.opacity.setState(void 0,ro.Intrinsic);for(var t=this.viewObservers,e=0,o=t.length;e<o;e+=1){var n=t[e];void 0!==n.popoverDidHide&&n.popoverDidHide(this)}},i.prototype.placement=function(t){var i;return void 0===t?this.allowedPlacement:(e.Arrays.equal(this.allowedPlacement,t)||(this.allowedPlacement.length=0,(i=this.allowedPlacement).push.apply(i,t),this.place()),this)},i.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachEvents()},i.prototype.onUnmount=function(){t.prototype.onUnmount.call(this),this.detachEvents()},i.prototype.attachEvents=function(){this.on("click",this.onClick)},i.prototype.detachEvents=function(){this.off("click",this.onClick)},i.prototype.needsProcess=function(t,e){return 0!=(t&(ro.NeedsScroll|ro.NeedsAnimate))&&this.requireUpdate(ro.NeedsLayout),t},i.prototype.onAnimate=function(e){t.prototype.onAnimate.call(this,e),void 0!==this.backgroundColor.takeUpdatedValue()&&this.place(!0);var o=this.displayState;o===i.ShowState?this.willShow():o===i.HideState?this.willHide():o!==i.ShowingState||this.displayPhase.isAnimating()?o!==i.HidingState||this.displayPhase.isAnimating()||this.didHide():this.didShow(),(this.displayPhase.isAnimating()||this.displayPhase.isUpdated())&&this.applyDisplayPhase(this.displayPhase.takeValue())},i.prototype.applyDisplayPhase=function(t){var e=this.currentPlacement;"above"===e?(this.opacity.setState(void 0,ro.Intrinsic),this.marginTop.setState((1-t)*-this.node.clientHeight,ro.Intrinsic)):"below"===e?(this.opacity.setState(void 0,ro.Intrinsic),this.marginTop.setState((1-t)*this.node.clientHeight,ro.Intrinsic)):(this.marginTop.setState(null,ro.Intrinsic),this.opacity.setState(t,ro.Intrinsic))},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.place()},i.prototype.place=function(t){void 0===t&&(t=!1);var e=this.source.view,i=this.sourceFrame,o=null!==e?e.popoverFrame:null;if(null===o||0===this.allowedPlacement.length||!t&&o.equals(i))return"none";this.sourceFrame=null;var n=this.placePopover(e,o),r=this.getChildView("arrow");return r instanceof ar&&this.placeArrow(e,o,r,n),n},i.prototype.placePopover=function(t,e){var i=this.node,o=i.offsetParent;if(null===o)return"none";for(var n,s=i.clientWidth,l=i.clientHeight,a=o.getBoundingClientRect(),h=a.left,u=a.top,p=e.left-window.pageXOffset-h,d=e.right-window.pageXOffset-h,c=e.top-window.pageYOffset-u,f=e.bottom-window.pageYOffset-u,v=e.width,y=e.height,g=p+v/2,w=c+y/2,m=this.placementFrame.state,S=null!==m?m.left:0,C=(null!==m?m.right:window.innerWidth)-h,b=null!==m?m.top:0,V=(null!==m?m.bottom:window.innerHeight)-u,T=p-S-window.pageXOffset,F=C-p-v,P=c-b-window.pageYOffset,M=V-c-y,D=this.dropdown.state,x=this.arrowHeight.getValue().pxValue(),L=this.placementGap.getValue().pxValue(),A=this.allowedPlacement,O=0,R=A.length;O<R;O+=1){if("above"===(I=A[O])||"below"===I||"over"===I){n=I;break}if("top"===I&&l+x+L<=P){n=I;break}if("bottom"===I&&l+x+L<=M){n=I;break}if("left"===I&&s+x+L<=T){n=I;break}if("right"===I&&s+x+L<=F){n=I;break}}if(void 0===n){n="none";for(O=0,R=A.length;O<R;O+=1){var I;if("top"===(I=A[O])&&P>=M){n=I;break}if("bottom"===I&&M>=P){n=I;break}if("left"===I&&T>=F){n=I;break}if("right"===I&&F>=T){n=I;break}}}var k=i.offsetLeft,W=i.offsetTop,E=null,N=null,U=this.width.state;U=U instanceof r.Length?U.pxValue():null;var G=this.height.state,B=U,j=G=G instanceof r.Length?G.pxValue():null,H=this.maxWidth.state;H=H instanceof r.Length?H.pxValue():null;var q=this.maxHeight.state,z=H,Y=q=q instanceof r.Length?q.pxValue():null;return"above"===n?(k=Math.round(S),W=Math.round(b),E=Math.round((null!==m?m.width:window.innerWidth)-C),B=Math.round(Math.max(0,C-S)),j=null,z=null,Y=Math.round(Math.max(0,V-b))):"below"===n?(k=Math.round(S),W=Math.round(V-l),E=Math.round(C-(null!==m?m.width:window.innerWidth)),B=Math.round(Math.max(0,C-S)),j=null,z=null,Y=Math.round(Math.max(0,V-b))):"over"===n?(k=Math.round(S),W=Math.round(b),E=Math.round(C-(null!==m?m.width:window.innerWidth)),N=Math.round(V-(null!==m?m.height:window.innerHeight)),B=Math.round(Math.max(0,C-S)),j=Math.round(Math.max(0,V-b)),z=null,Y=null):"top"!==n||D?"bottom"!==n||D?"left"!==n||D?"right"!==n||D?"top"===n&&D?(k=Math.max(S,p),W=Math.round(Math.max(b,c-(l+L))),B=Math.round(Math.max(0,Math.min(v,C-p))),j=null,z=Math.round(Math.max(0,C-S)),Y=Math.round(Math.max(0,f-b))):"bottom"===n&&D?(k=Math.max(S,p),W=Math.round(Math.max(b,f+L)),B=Math.round(Math.max(0,Math.min(v,C-p))),j=null,z=Math.round(Math.max(0,C-S)),Y=Math.round(Math.max(0,V-c))):"left"===n&&D?(k=Math.round(Math.max(S,p-(s+L))),W=Math.max(b,c),B=null,j=Math.round(Math.max(0,Math.min(y,V-c))),z=Math.round(Math.max(0,d-S)),Y=Math.round(Math.max(0,V-b))):"right"===n&&D&&(k=Math.round(Math.max(S,d+L)),W=Math.max(b,c),B=null,j=Math.round(Math.max(0,Math.min(y,V-c))),z=Math.round(Math.max(0,C-p)),Y=Math.round(Math.max(0,V-b))):(k=Math.round(Math.max(S,d+x+L)),W=w-l/2<=b?Math.round(b):w+l/2>=V?Math.round(V-l):Math.round(w-l/2),z=Math.round(Math.max(0,C-p)),Y=Math.round(Math.max(0,V-b))):(k=Math.round(Math.max(S,p-(s+x+L))),W=w-l/2<=b?Math.round(b):w+l/2>=V?Math.round(V-l):Math.round(w-l/2),z=Math.round(Math.max(0,d-S)),Y=Math.round(Math.max(0,V-b))):(k=g-s/2<=S?Math.round(S):g+s/2>=C?Math.round(C-s):Math.round(g-s/2),W=Math.round(Math.max(b,f+x+L)),z=Math.round(Math.max(0,C-S)),Y=Math.round(Math.max(0,V-c))):(k=g-s/2<=S?Math.round(S):g+s/2>=C?Math.round(C-s):Math.round(g-s/2),W=Math.round(Math.max(b,c-(l+x+L))),z=Math.round(Math.max(0,C-S)),Y=Math.round(Math.max(0,f-b))),"none"!==n&&(k!==i.offsetLeft&&this.left.takesPrecedence(ro.Intrinsic)||W!==i.offsetTop&&this.top.takesPrecedence(ro.Intrinsic)||B!==U&&this.width.takesPrecedence(ro.Intrinsic)||j!==G&&this.height.takesPrecedence(ro.Intrinsic)||z!==H&&this.maxWidth.takesPrecedence(ro.Intrinsic)||Y!==q&&this.maxHeight.takesPrecedence(ro.Intrinsic))&&(this.willPlacePopover(n),this.position.setState("absolute",ro.Intrinsic),this.left.setState(k,ro.Intrinsic),this.right.setState(E,ro.Intrinsic),this.top.setState(W,ro.Intrinsic),this.bottom.setState(N,ro.Intrinsic),this.width.setState(B,ro.Intrinsic),this.height.setState(j,ro.Intrinsic),this.maxWidth.setState(z,ro.Intrinsic),this.maxHeight.setState(Y,ro.Intrinsic),this.onPlacePopover(n),this.didPlacePopover(n)),this.currentPlacement=n,n},i.prototype.willPlacePopover=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.popoverWillPlace&&n.popoverWillPlace(t,this)}},i.prototype.onPlacePopover=function(t){},i.prototype.didPlacePopover=function(t){for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.popoverDidPlace&&n.popoverDidPlace(t,this)}},i.prototype.placeArrow=function(t,e,i,o){var n=this.node,s=n.offsetParent;if(null!==s){var l=s.getBoundingClientRect(),a=l.left,h=l.top,u=e.left-window.pageXOffset-a,p=e.top-window.pageYOffset-h,d=u+e.width/2,c=p+e.height/2,f=n.offsetLeft,v=f+n.clientWidth,y=n.offsetTop,g=y+n.clientHeight,w=this.backgroundColor.value;null===w&&(w=Tt.transparent());var m=this.borderRadius(),S=m instanceof r.Length?m.pxValue():0,C=this.arrowWidth.getValue().pxValue(),b=this.arrowHeight.getValue().pxValue(),V=f+S+C/2,T=v-S-C/2,F=y+S+C/2,P=g-S-C/2;i.top.setState(null,ro.Intrinsic),i.right.setState(null,ro.Intrinsic),i.bottom.setState(null,ro.Intrinsic),i.left.setState(null,ro.Intrinsic),i.borderLeftWidth.setState(null,ro.Intrinsic),i.borderLeftStyle.setState(void 0,ro.Intrinsic),i.borderLeftColor.setState(null,ro.Intrinsic),i.borderRightWidth.setState(null,ro.Intrinsic),i.borderRightStyle.setState(void 0,ro.Intrinsic),i.borderRightColor.setState(null,ro.Intrinsic),i.borderTopWidth.setState(null,ro.Intrinsic),i.borderTopStyle.setState(void 0,ro.Intrinsic),i.borderTopColor.setState(null,ro.Intrinsic),i.borderBottomWidth.setState(null,ro.Intrinsic),i.borderBottomStyle.setState(void 0,ro.Intrinsic),i.borderBottomColor.setState(null,ro.Intrinsic),i.zIndex.setState(100,ro.Intrinsic),"none"===o||"above"===o||"below"===o||"over"===o?i.display.setState("none",ro.Intrinsic):Math.round(c)<=Math.round(y-b)&&V<=d&&d<=T?(i.display.setState("block",ro.Intrinsic),i.top.setState(Math.round(-b),ro.Intrinsic),i.left.setState(Math.round(d-f-C/2),ro.Intrinsic),i.borderLeftWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderLeftStyle.setState("solid",ro.Intrinsic),i.borderLeftColor.setState(Tt.transparent(),ro.Intrinsic),i.borderRightWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderRightStyle.setState("solid",ro.Intrinsic),i.borderRightColor.setState(Tt.transparent(),ro.Intrinsic),i.borderBottomWidth.setState(Math.round(b),ro.Intrinsic),i.borderBottomStyle.setState("solid",ro.Intrinsic),i.borderBottomColor.setState(w,ro.Intrinsic)):Math.round(g+b)<=Math.round(c)&&V<=d&&d<=T?(i.display.setState("block",ro.Intrinsic),i.bottom.setState(Math.round(-b),ro.Intrinsic),i.left.setState(Math.round(d-f-C/2),ro.Intrinsic),i.borderLeftWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderLeftStyle.setState("solid",ro.Intrinsic),i.borderLeftColor.setState(Tt.transparent(),ro.Intrinsic),i.borderRightWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderRightStyle.setState("solid",ro.Intrinsic),i.borderRightColor.setState(Tt.transparent(),ro.Intrinsic),i.borderTopWidth.setState(Math.round(b),ro.Intrinsic),i.borderTopStyle.setState("solid",ro.Intrinsic),i.borderTopColor.setState(w,ro.Intrinsic)):Math.round(d)<=Math.round(f-b)&&F<=c&&c<=P?(i.display.setState("block"),i.left.setState(Math.round(-b),ro.Intrinsic),i.top.setState(Math.round(c-y-C/2),ro.Intrinsic),i.borderTopWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderTopStyle.setState("solid",ro.Intrinsic),i.borderTopColor.setState(Tt.transparent(),ro.Intrinsic),i.borderBottomWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderBottomStyle.setState("solid",ro.Intrinsic),i.borderBottomColor.setState(Tt.transparent(),ro.Intrinsic),i.borderRightWidth.setState(Math.round(b),ro.Intrinsic),i.borderRightStyle.setState("solid",ro.Intrinsic),i.borderRightColor.setState(w,ro.Intrinsic)):Math.round(v+b)<=Math.round(d)&&F<=c&&c<=P?(i.display.setState("block",ro.Intrinsic),i.right.setState(Math.round(-b),ro.Intrinsic),i.top.setState(Math.round(c-y-C/2),ro.Intrinsic),i.borderTopWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderTopStyle.setState("solid",ro.Intrinsic),i.borderTopColor.setState(Tt.transparent(),ro.Intrinsic),i.borderBottomWidth.setState(Math.round(C/2),ro.Intrinsic),i.borderBottomStyle.setState("solid",ro.Intrinsic),i.borderBottomColor.setState(Tt.transparent(),ro.Intrinsic),i.borderLeftWidth.setState(Math.round(b),ro.Intrinsic),i.borderLeftStyle.setState("solid",ro.Intrinsic),i.borderLeftColor.setState(w,ro.Intrinsic)):i.display.setState("none",ro.Intrinsic)}},i.prototype.onClick=function(t){t.stopPropagation()},i.SourceFastener=Zo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetSourceView(t,e)},onSetView:function(t,e,i){null!==e&&this.owner.detachSourceView(e),this.owner.onSetSourceView(t,e),null!==t&&(this.owner.attachSourceView(t),this.owner.initSourceView(t))},didSetView:function(t,e,i){this.owner.didSetSourceView(t,e)},viewDidMount:function(t){this.owner.place()},viewDidPower:function(t){this.owner.place()},viewDidResize:function(t,e){this.owner.place()},viewDidScroll:function(t,e){this.owner.place()},viewDidAnimate:function(t,e){this.owner.place()},viewDidLayout:function(t,e){this.owner.place()},viewDidProject:function(t,e){this.owner.place()},viewDidSetAttribute:function(t,e,i){this.owner.place()},viewDidSetStyle:function(t,e,i,o){this.owner.place()}}),i.HiddenState=0,i.HidingState=1,i.HideState=2,i.ShownState=3,i.ShowingState=4,i.ShowState=5,m([Oo({type:Number,state:0})],i.prototype,"displayPhase",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],i.prototype,"placementGap",void 0),m([Oo({type:r.Length,state:r.Length.px(10)})],i.prototype,"arrowWidth",void 0),m([Oo({type:r.Length,state:r.Length.px(8)})],i.prototype,"arrowHeight",void 0),m([Zo({extends:i.SourceFastener})],i.prototype,"source",void 0),m([bo({type:r.R2Box,state:null,didSetState:function(t){this.owner.place()},fromAny:function(t){return null!==t?r.R2Box.fromAny(t):null}})],i.prototype,"placementFrame",void 0),m([bo({type:Boolean,state:!1,didSetState:function(t){this.owner.place()}})],i.prototype,"dropdown",void 0),i}(ar),cl=function(t){function e(e){var i=t.call(this,e)||this;return i.modality=!0,i.initDrawer(),i}return w(e,t),e.prototype.initDrawer=function(){this.addClass("drawer"),this.display.setState("flex",ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("auto",ro.Intrinsic),this.overscrollBehaviorY.setState("contain",ro.Intrinsic),this.overflowScrolling.setState("touch",ro.Intrinsic)},e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.placement&&this.placement(e.placement),void 0!==e.collapsedWidth&&this.collapsedWidth(e.collapsedWidth),void 0!==e.expandedWidth&&this.expandedWidth(e.expandedWidth)},e.prototype.isHorizontal=function(){return"top"===this.placement.state||"bottom"===this.placement.state},e.prototype.isVertical=function(){return"left"===this.placement.state||"right"===this.placement.state},e.prototype.willSetPlacement=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlacement&&r.viewWillSetPlacement(t,e,this)}},e.prototype.onSetPlacement=function(t,e){},e.prototype.didSetPlacement=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlacement&&r.viewDidSetPlacement(t,e,this)}},e.prototype.willPresent=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillPresent&&o.viewWillPresent(this)}},e.prototype.didPresent=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidPresent&&o.viewDidPresent(this)}},e.prototype.willDismiss=function(){var t=this.modalService.manager;null!=t&&t.dismissModal(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillDismiss&&n.viewWillDismiss(this)}},e.prototype.didDismiss=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidDismiss&&o.viewDidDismiss(this)}},e.prototype.willExpand=function(){var t=this.modalService.manager;null!=t&&t.dismissModal(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillExpand&&n.viewWillExpand(this)}},e.prototype.didExpand=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidExpand&&o.viewDidExpand(this)}},e.prototype.willCollapse=function(){var t=this.modalService.manager;null!=t&&t.dismissModal(this);for(var e=this.viewObservers,i=0,o=e.length;i<o;i+=1){var n=e[i];void 0!==n.viewWillCollapse&&n.viewWillCollapse(this)}},e.prototype.didCollapse=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidCollapse&&o.viewDidCollapse(this)}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.display.setState(this.slide.isDismissed()?"none":"flex",ro.Intrinsic),this.layoutDrawer(e),"mobile"===e.viewIdiom?this.boxShadow.setState(this.getLookOr(se.shadow,me.floating,null),ro.Intrinsic):this.boxShadow.setState(this.getLookOr(se.shadow,null),ro.Intrinsic)},e.prototype.layoutDrawer=function(t){var e=this.placement.state;"top"===e?this.layoutDrawerTop(t):"right"===e?this.layoutDrawerRight(t):"bottom"===e?this.layoutDrawerBottom(t):"left"===e&&this.layoutDrawerLeft(t)},e.prototype.layoutDrawerTop=function(t){var e=this.slide.getPhase();this.addClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",ro.Intrinsic),this.width.setState(null,ro.Intrinsic),this.height.setState(null,ro.Intrinsic),this.left.setState(r.Length.zero(),ro.Intrinsic),this.right.setState(r.Length.zero(),ro.Intrinsic),this.bottom.setState(null,ro.Intrinsic);var i=this.height.value;null===i&&(i=r.Length.px(this.node.offsetHeight)),this.top.setState(i.times(e-1),ro.Intrinsic),this.effectiveWidth.setState(this.width.value),this.effectiveHeight.setState(i.times(e),ro.Intrinsic);var o=this.edgeInsets.superState;null==o&&(o=t.viewport.safeArea),this.edgeInsets.setState({insetTop:0,insetRight:o.insetRight,insetBottom:0,insetLeft:o.insetLeft},ro.Intrinsic),this.stretch.isCollapsed()&&this.expand()},e.prototype.layoutDrawerRight=function(t){var e,i=this.stretch.getPhase(),o=this.slide.getPhase();if(this.removeClass("drawer-top").addClass("drawer-right").removeClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",ro.Intrinsic),this.height.setState(null,ro.Intrinsic),this.top.setState(r.Length.zero(),ro.Intrinsic),this.bottom.setState(r.Length.zero(),ro.Intrinsic),this.left.setState(null,ro.Intrinsic),this.width.takesPrecedence(ro.Intrinsic)){var n=this.collapsedWidth.getValue(),s=this.expandedWidth.getValue();e=n.times(1-i).plus(s.times(i))}else null===(e=this.width.value)&&(e=r.Length.px(this.node.offsetWidth));this.width.setState(e,ro.Intrinsic),this.right.setState(e.times(o-1),ro.Intrinsic),this.effectiveWidth.setState(e.times(o),ro.Intrinsic),this.effectiveHeight.setState(this.height.value,ro.Intrinsic);var l=this.edgeInsets.superState;null!=l&&null!==l||(l=t.viewport.safeArea),this.paddingTop.setState(r.Length.px(l.insetTop),ro.Intrinsic),this.paddingBottom.setState(r.Length.px(l.insetBottom),ro.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:l.insetRight,insetBottom:0,insetLeft:0},ro.Intrinsic)},e.prototype.layoutDrawerBottom=function(t){var e=this.slide.getPhase();this.removeClass("drawer-top").removeClass("drawer-right").addClass("drawer-bottom").removeClass("drawer-left"),this.position.setState("fixed",ro.Intrinsic),this.width.setState(null,ro.Intrinsic),this.height.setState(null,ro.Intrinsic),this.left.setState(r.Length.zero(),ro.Intrinsic),this.right.setState(r.Length.zero(),ro.Intrinsic),this.top.setState(null,ro.Intrinsic);var i=this.height.value;null===i&&(i=r.Length.px(this.node.offsetHeight)),this.bottom.setState(i.times(e-1),ro.Intrinsic),this.effectiveWidth.setState(this.width.value,ro.Intrinsic),this.effectiveHeight.setState(i.times(e),ro.Intrinsic);var o=this.edgeInsets.superState;null!=o&&null!==o||(o=t.viewport.safeArea),this.edgeInsets.setState({insetTop:0,insetRight:o.insetRight,insetBottom:0,insetLeft:o.insetLeft},ro.Intrinsic),this.stretch.isCollapsed()&&this.expand()},e.prototype.layoutDrawerLeft=function(t){var e,i=this.stretch.getPhase(),o=this.slide.getPhase();if(this.removeClass("drawer-top").removeClass("drawer-right").removeClass("drawer-bottom").addClass("drawer-left"),this.position.setState("fixed",ro.Intrinsic),this.height.setState(null,ro.Intrinsic),this.top.setState(r.Length.zero(),ro.Intrinsic),this.bottom.setState(r.Length.zero(),ro.Intrinsic),this.right.setState(null,ro.Intrinsic),this.width.takesPrecedence(ro.Intrinsic)){var n=this.collapsedWidth.getValue(),s=this.expandedWidth.getValue();e=n.times(1-i).plus(s.times(i))}else null===(e=this.width.value)&&(e=r.Length.px(this.node.offsetWidth));this.width.setState(e,ro.Intrinsic),this.left.setState(e.times(o-1),ro.Intrinsic),this.effectiveWidth.setState(e.times(o),ro.Intrinsic),this.effectiveHeight.setState(this.height.value,ro.Intrinsic);var l=this.edgeInsets.superState;null!=l&&null!==l||(l=t.viewport.safeArea),this.paddingTop.setState(r.Length.px(l.insetTop),ro.Intrinsic),this.paddingBottom.setState(r.Length.px(l.insetBottom),ro.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:l.insetLeft},ro.Intrinsic)},Object.defineProperty(e.prototype,"modalView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalState",{get:function(){return this.slide.modalState},enumerable:!1,configurable:!0}),e.prototype.showModal=function(t,e){void 0!==t.modal&&(this.modality=t.modal),this.present(e)},e.prototype.hideModal=function(t){this.dismiss(t)},e.prototype.present=function(t){t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.slide.present(t)},e.prototype.dismiss=function(t){t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.slide.dismiss(t)},e.prototype.expand=function(t){t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.stretch.expand(t)},e.prototype.collapse=function(t){t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),this.stretch.collapse(t)},e.prototype.toggle=function(t){if(t=void 0===t||!0===t?this.getLookOr(se.timing,!1):l.Timing.fromAny(t),"mobile"===this.viewIdiom||this.isHorizontal())if(this.slide.isPresented())this.slide.dismiss(t);else{this.stretch.expand(t),this.slide.present(t);var e=this.modalService.manager;null!=e&&e.presentModal(this,{modal:!0})}else this.stretch.toggle(t),this.slide.present(t)},m([Io({type:r.Length,state:r.Length.px(60)})],e.prototype,"collapsedWidth",void 0),m([Io({type:r.Length,state:r.Length.px(200)})],e.prototype,"expandedWidth",void 0),m([To({type:r.Length,state:null})],e.prototype,"effectiveWidth",void 0),m([To({type:r.Length,state:null})],e.prototype,"effectiveHeight",void 0),m([bo({type:String,state:"left",updateFlags:ro.NeedsResize|ro.NeedsLayout,willSetState:function(t,e){this.owner.willSetPlacement(t,e)},didSetState:function(t,e){this.owner.onSetPlacement(t,e),this.owner.didSetPlacement(t,e)}})],e.prototype,"placement",void 0),m([Oo({type:Qt,state:Qt.presented(),updateFlags:ro.NeedsLayout,willPresent:function(){this.owner.willPresent()},didPresent:function(){this.owner.didPresent()},willDismiss:function(){this.owner.willDismiss()},didDismiss:function(){this.owner.didDismiss()}})],e.prototype,"slide",void 0),m([Oo({type:$t,state:$t.expanded(),updateFlags:ro.NeedsResize|ro.NeedsLayout,willExpand:function(){this.owner.willExpand()},didExpand:function(){this.owner.didExpand()},willCollapse:function(){this.owner.willCollapse()},didCollapse:function(){this.owner.didCollapse()}})],e.prototype,"stretch",void 0),m([bo({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),e}(ar),fl=function(t){function i(e){var i=t.call(this,e)||this;return i.drawerView=null,i.initIcon(),i}return w(i,t),i.prototype.initButton=function(){t.prototype.initButton.call(this),this.addClass("drawer-button")},i.prototype.initIcon=function(){this.pushIcon(i.hamburgerIcon)},i.prototype.setDrawerView=function(t){this.drawerView=t},i.prototype.onClick=function(e){t.prototype.onClick.call(this,e);var i=this.drawerView;null!==i&&i.toggle()},Object.defineProperty(i,"hamburgerIcon",{get:function(){return Nr.create(24,24,"M21,17L21,19L3,19L3,17L21,17ZM21,11L21,13L3,13L3,11L21,11ZM3,5L3,7L21,7L21,5L3,5Z")},enumerable:!1,configurable:!0}),m([e.Lazy],i,"hamburgerIcon",null),i}(Is),vl=function(){function t(t,e,i,o,n,r,s){this.key=t,this.grow=e,this.shrink=i,this.basis=o,this.width=n,this.left=r,this.right=s}return t.prototype.withGrow=function(t){return this.copy(this.key,t,this.shrink,this.basis,this.width,this.left,this.right)},t.prototype.withShrink=function(t){return this.copy(this.key,this.grow,t,this.basis,this.width,this.left,this.right)},t.prototype.withBasis=function(t){return t=r.Length.fromAny(t),this.copy(this.key,this.grow,this.shrink,t,this.width,this.left,this.right)},t.prototype.resized=function(t,e,i){return null!==t&&(t=r.Length.fromAny(t)),null!==e&&(e=r.Length.fromAny(e)),null!==i&&(i=r.Length.fromAny(i)),this.copy(this.key,this.grow,this.shrink,this.basis,t,e,i)},t.prototype.copy=function(e,i,o,n,r,s,l){return new t(e,i,o,n,r,s,l)},t.prototype.equivalentTo=function(e,i){return this===e||e instanceof t&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i))},t.prototype.equals=function(i){return this===i||i instanceof t&&(this.key===i.key&&this.grow===i.grow&&this.shrink===i.shrink&&this.basis.equals(i.basis)&&e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right))},t.prototype.debug=function(t){return t=t.write("DeckPost").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),null===this.width&&null===this.left&&null===this.right||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.create=function(e,i,o,n){return void 0===i&&(i=0),void 0===o&&(o=1),new t(e,i,o,n=void 0!==n?r.Length.fromAny(n):r.Length.zero(),null,null,null)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.key;void 0===i&&(i="");var o=e.grow;void 0===o&&(o=0);var n=e.shrink;void 0===n&&(n=1);var s=e.basis;s=void 0!==s?r.Length.fromAny(s):r.Length.zero();var l=e.width;l=null!=l?r.Length.fromAny(l):null;var a=e.left;a=null!=a?r.Length.fromAny(a):null;var h=e.right;return new t(i,o,n,s,l,a,h=null!=h?r.Length.fromAny(h):null)},t}(),yl=function(){function t(t,e,i,o,n){this.width=t,this.left=e,this.right=i,this.spacing=o,this.posts=n}return t.prototype.lookupPost=function(t){for(var e=this.posts,i=0,o=e.length;i<o;i+=1){if(t===e[i].key)return i}},t.prototype.getPost=function(t){var e=this.posts;if("number"==typeof t){if(void 0!==(n=e[t]))return n}else if("string"==typeof t)for(var i=0,o=e.length;i<o;i+=1){var n;if(t===(n=e[i]).key)return n}return null},t.prototype.resized=function(i,o,n,s){if(i=r.Length.fromAny(i),void 0===o?o=this.left:null!==o&&(o=r.Length.fromAny(o)),void 0===n?n=this.right:null!==n&&(n=r.Length.fromAny(n)),void 0===s?s=this.spacing:null!==s&&(s=r.Length.fromAny(s)),e.Equals(this.width,i)&&e.Equals(this.left,o)&&e.Equals(this.right,n)&&e.Equals(this.spacing,s))return this;for(var l=this.posts,a=l.length,h=new Array(a),u=i.pxValue(),p=null!==o?o.pxValue(u):0,d=null!==n?n.pxValue(u):0,c=null!==s?s.pxValue(u):0,f=0,v=0,y=p+d,g=p,w=0;w<a;w+=1){0!==w&&(y+=c,g+=c);var m=(T=l[w]).basis.pxValue(u);h[w]=T.resized(m,g,u-m-g),f+=T.grow,v+=T.shrink,y+=m,g+=m}if(y<u&&f>0){var S=u-y,C=p,b=0;for(w=0;w<a;w+=1){0!==b&&(y+=c,C+=c);m=(T=h[w]).basis.pxValue(u)+S*(T.grow/f);h[w]=T.resized(m,C,u-m-C),C+=m,b+=1}}else if(y>u&&v>0){S=y-u;var V=p;for(b=0,w=0;w<a;w+=1){var T;0!==b&&(y+=c,V+=c);m=(T=h[w]).basis.pxValue(u)-S*(T.shrink/v);h[w]=T.resized(m,V,u-m-V),V+=m,b+=1}}return new t(i,o,n,s,h)},t.prototype.equivalentTo=function(e,i){if(this===e)return!0;if(e instanceof t){var o=this.posts,n=e.posts,r=o.length;if(r===n.length){for(var s=0;s<r;s+=1)if(!o[s].equivalentTo(n[s],i))return!1;return!0}}return!1},t.prototype.equals=function(i){return this===i||i instanceof t&&(e.Equals(this.width,i.width)&&e.Equals(this.left,i.left)&&e.Equals(this.right,i.right)&&e.Equals(this.spacing,i.spacing)&&e.Arrays.equal(this.posts,i.posts))},t.prototype.debug=function(t){t=t.write("DeckRail").write(46).write("of").write(40);for(var e=0,i=this.posts.length;e<i;e+=1)0!==e&&(t=t.write(", ")),t=t.debug(this.posts[e]);return t=t.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(t=t.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41)),t},t.prototype.toString=function(){return s.Format.debug(this)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=e.length,n=new Array(o),r=0;r<o;r+=1)n[r]=vl.fromAny(e[r]);return new t(null,null,null,null,n)},t.create=function(e){return new t(null,null,null,null,e)},t.fromAny=function(e){if(null==e||e instanceof t)return e;if("object"==typeof e&&null!==e)return t.fromInit(e);throw new TypeError(""+e)},t.fromInit=function(e){var i=e.width;i=null!=i?r.Length.fromAny(i):null;var o=e.left;o=null!=o?r.Length.fromAny(o):null;var n=e.right;n=null!=n?r.Length.fromAny(n):null;var s,l=e.spacing;if(l=null!=l?r.Length.fromAny(l):null,void 0!==e.posts){var a=e.posts.length;s=new Array(a);for(var h=0;h<a;h+=1)s[h]=vl.fromAny(e.posts[h])}else s=[];return new t(i,o,n,l,s)},t}(),gl=function(t){function e(e){var i=t.call(this,e)||this;return i.initSlot(),i}return w(e,t),e.prototype.initSlot=function(){this.addClass("deck-slot")},m([bo({type:vl,state:null,inherit:!0})],e.prototype,"post",void 0),m([bo({type:vl,state:null})],e.prototype,"nextPost",void 0),m([bo({type:vl,state:null})],e.prototype,"prevPost",void 0),e}(ar),wl=function(t){function e(e){var i=t.call(this,e)||this;return i.itemCount=0,i.item=null,i.initSlider(),i}return w(e,t),e.prototype.initSlider=function(){this.addClass("deck-slider"),this.position.setState("relative",ro.Intrinsic)},Object.defineProperty(e.prototype,"colorLook",{get:function(){return se.color},enumerable:!1,configurable:!0}),e.prototype.createItem=function(t){var e=ar.span.create();return e.display.setState("flex",ro.Intrinsic),e.alignItems.setState("center",ro.Intrinsic),e.whiteSpace.setState("nowrap",ro.Intrinsic),e.text(t),e},e.prototype.pushItem=function(t,e){"string"==typeof t&&(t=this.createItem(t));var i=this.itemCount,o=i+1;this.itemCount=o;var n="item"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,a="item"+o,h=new Sl(this,a,a);h.itemIndex=o,this.willPushItem(t,s),this.item=h,this.setViewFastener(a,h),h.setView(t),h.injectView(),!1===(e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(e)))&&this.didPushItem(t,s)},e.prototype.willPushItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPushItem&&i.deckSliderWillPushItem(t,e,this)}))},e.prototype.didPushItem=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckSliderDidPushItem&&i.deckSliderDidPushItem(t,e,this)}))},e.prototype.popItem=function(t){var e=this.itemCount,i=e-1;this.itemCount=i;var o="item"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="item"+i,a=this.getViewFastener(s),h=null!==a?a.view:null;this.willPopItem(h,r),this.item=a,null!==a&&a.injectView(),!1===(t=void 0===t||!0===t?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(t))&&this.didPopItem(h,r)}return r},e.prototype.willPopItem=function(t,e){this.willObserve((function(i){void 0!==i.deckSliderWillPopItem&&i.deckSliderWillPopItem(t,e,this)}))},e.prototype.didPopItem=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.itemIndex>this.itemCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckSliderDidPopItem&&i.deckSliderDidPopItem(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="item"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopItem(null!==this.item?this.item.view:null,r);else if(null!==this.item&&null!==this.item.view&&Math.round(i)>0){var s="item"+Math.round(i-1),l=this.getViewFastener(s),a=null!==l?l.view:null;this.didPushItem(this.item.view,a)}}}t.prototype.didLayout.call(this,e)},m([Oo({type:Number,inherit:!0,updateFlags:ro.NeedsLayout})],e.prototype,"deckPhase",void 0),m([Oo({type:Number,state:.5})],e.prototype,"slotAlign",void 0),e}(gl),ml=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.itemIndex=0,n.itemWidth=null,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initItem(t)},e.prototype.insertView=function(t,e,i,o){var n="item"+(this.itemIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.takesPrecedence(ro.Intrinsic)&&o.color.setState(t.getOr(this.owner.colorLook,e,null),i,ro.Intrinsic)},e.prototype.viewDidLayout=function(t,e){this.layoutItem(e)},e.prototype.initItem=function(t){t.position.setState("absolute",ro.Intrinsic)},e.prototype.layoutItem=function(t){var e=this.itemIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var s=this.owner.deckPhase.getValueOr(0),l=Math.max(this.owner.itemCount,Math.ceil(s)),a=l-1,h=s-a,u=t.width.state;this.itemWidth=u,u instanceof r.Length?u=u.pxValue(o):(u=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setState(u,ro.Intrinsic):t.width.setState(this.itemWidth,ro.Intrinsic));var p=o-u;e<a||e===a&&1===h?(t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.height.setState(n,ro.Intrinsic),t.opacity.setState(0,ro.Intrinsic),t.setCulled(!0)):e===a?(t.left.setState(p*i*(1-h),ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.height.setState(n,ro.Intrinsic),t.opacity.setState(1-h,ro.Intrinsic),t.setCulled(!1)):e===l?(t.left.setState(p*(1-h)+p*i*h,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.height.setState(n,ro.Intrinsic),t.opacity.setState(h,ro.Intrinsic),t.setCulled(!1)):(t.left.setState(p,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.height.setState(n,ro.Intrinsic),t.opacity.setState(0,ro.Intrinsic),t.setCulled(!0))},e}(Zo),Sl=Zo.define({extends:ml,type:ar,child:!1,observe:!0}),Cl=function(t){function e(e){var i=t.call(this,e)||this;return i.labelCount=0,i.label=null,i.initButton(),i}return w(e,t),e.prototype.initButton=function(){this.addClass("deck-button"),this.position.setState("relative",ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.cursor.setState("pointer",ro.Intrinsic)},Object.defineProperty(e.prototype,"colorLook",{get:function(){return se.accentColor},enumerable:!1,configurable:!0}),e.prototype.createLabel=function(t){var e=ar.span.create();return e.display.setState("flex",ro.Intrinsic),e.alignItems.setState("center",ro.Intrinsic),e.whiteSpace.setState("nowrap",ro.Intrinsic),e.text(t),e},e.prototype.pushLabel=function(t,e){"string"==typeof t&&(t=this.createLabel(t));var i=this.labelCount,o=i+1;this.labelCount=o;var n="label"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,a="label"+o,h=new Fl(this,a,a);h.labelIndex=o,this.willPushLabel(t,s),this.label=h,this.setViewFastener(a,h),h.setView(t),h.injectView(),!1===(e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(e)))&&this.didPushLabel(t,s)},e.prototype.willPushLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPushLabel&&i.deckButtonWillPushLabel(t,e,this)}))},e.prototype.didPushLabel=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckButtonDidPushLabel&&i.deckButtonDidPushLabel(t,e,this)}))},e.prototype.popLabel=function(t){var e=this.labelCount,i=e-1;this.labelCount=i;var o="label"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="label"+i,a=this.getViewFastener(s),h=null!==a?a.view:null;this.willPopLabel(h,r),this.label=a,null!==a&&a.injectView(),!1===(t=void 0===t||!0===t?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(t))&&this.didPopLabel(h,r)}return r},e.prototype.willPopLabel=function(t,e){this.willObserve((function(i){void 0!==i.deckButtonWillPopLabel&&i.deckButtonWillPopLabel(t,e,this)}))},e.prototype.didPopLabel=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.labelIndex>this.labelCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckButtonDidPopLabel&&i.deckButtonDidPopLabel(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="label"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopLabel(null!==this.label?this.label.view:null,r);else if(null!==this.label&&null!==this.label.view&&Math.round(i)>0){var s="label"+Math.round(i-1),l=this.getViewFastener(s),a=null!==l?l.view:null;this.didPushLabel(this.label.view,a)}}}t.prototype.didLayout.call(this,e)},m([bo({type:r.Length,state:r.Length.px(12)})],e.prototype,"iconPadding",void 0),m([Oo({type:Number,inherit:!0,updateFlags:ro.NeedsLayout})],e.prototype,"deckPhase",void 0),m([Oo({type:Number,state:0})],e.prototype,"slotAlign",void 0),e}(gl),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("close-icon"),t.setStyle("position","absolute"),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),s=t.width.state;s=s instanceof r.Length?s.pxValue():0;var l=t.height.state;l=l instanceof r.Length?l.pxValue():0;var a=this.owner.deckPhase.getValueOr(0),h=Math.min(Math.max(0,a-1),1),u=n+(i-s-n)*e,p=(o-l)/2;t.setStyle("left",u+"px"),t.setStyle("top",p+"px"),t.viewBox.setState("0 0 "+s+" "+l,ro.Intrinsic),t.opacity.setState(1-h,ro.Intrinsic)},e}(Zo);Zo({extends:bl,key:!0,type:Zr,observe:!0})(Cl.prototype,"closeIcon");var Vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initIcon(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidLayout=function(t,e){this.layoutIcon(e)},e.prototype.initIcon=function(t){t.addClass("back-icon"),t.setStyle("position","absolute"),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.layoutIcon=function(t){var e=this.owner.slotAlign.getValue(),i=this.owner.width.state;i=i instanceof r.Length?i.pxValue():this.owner.node.offsetWidth;var o=this.owner.height.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetHeight;var n=this.owner.iconPadding.getState().pxValue(i),s=t.width.state;s=s instanceof r.Length?s.pxValue():0;var l=t.height.state;l=l instanceof r.Length?l.pxValue():0;var a,h=this.owner.deckPhase.getValueOr(0),u=Math.max(this.owner.labelCount,Math.ceil(h)),p="label"+u,d=this.owner.getChildView(p),c=n+(i-s-n)*e,f=(o-l)/2;if(h<=1)a=0,t.iconColor.setState(null,ro.Intrinsic);else if(null!==d&&h<2){var v=this.owner.parentView,y=this.owner.nextPost.state,g=null!==v&&null!==y?v.getChildView(y.key):null,w=void 0,m=void 0;if(g instanceof gl){w=g.slotAlign.value,m=(m=g.width.state)instanceof r.Length?m.pxValue():g.node.offsetWidth;var S=g.left.state;S=S instanceof r.Length?S.pxValue():g.node.offsetLeft;var C=this.owner.left.state;m+=S-((C=C instanceof r.Length?C.pxValue():this.owner.node.offsetLeft)+i)}else w=0,m=0;var b=h-(u-1),V=d.width.state,T=i-c-s+(m-(V=V instanceof r.Length?V.pxValue(i):d.node.offsetWidth))*w;c+=T*(1-b)+T*e*b,a=b;var F=g instanceof gl?g.getLookOr(g.colorLook,null):null,P=this.owner.getLookOr(this.owner.colorLook,null);null!==F&&null!==P?t.iconColor.setState(F.interpolateTo(P)(b),ro.Intrinsic):t.iconColor.setState(P,ro.Intrinsic)}t.setStyle("left",c+"px"),t.setStyle("top",f+"px"),t.viewBox.setState("0 0 "+s+" "+l,ro.Intrinsic),t.opacity.setState(a,ro.Intrinsic)},e}(Zo);Zo({extends:Vl,key:!0,type:Zr,observe:!0})(Cl.prototype,"backIcon");var Tl=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.labelIndex=0,n.labelWidth=null,n.layoutWidth=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initLabel(t)},e.prototype.insertView=function(t,e,i,o){var n="label"+(this.labelIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidApplyTheme=function(t,e,i,o){o.color.takesPrecedence(ro.Intrinsic)&&o.color.setState(t.getOr(this.owner.colorLook,e,null),i,ro.Intrinsic)},e.prototype.viewDidLayout=function(t,e){this.layoutLabel(e)},e.prototype.initLabel=function(t){t.position.setState("absolute",ro.Intrinsic),t.pointerEvents.setState("none",ro.Intrinsic)},e.prototype.layoutLabel=function(t){var e=this.labelIndex,i=this.owner.slotAlign.getValue(),o=this.owner.width.state;o=o instanceof r.Length?o.pxValue():this.owner.node.offsetWidth;var n=this.owner.height.state;n=n instanceof r.Length?n.pxValue():this.owner.node.offsetHeight;var s,l,a=this.owner.parentView,h=this.owner.nextPost.state,u=null!==a&&null!==h?a.getChildView(h.key):null;if(u instanceof gl){s=u.slotAlign.value,l=(l=u.width.state)instanceof r.Length?l.pxValue():u.node.offsetWidth;var p=u.left.state;p=p instanceof r.Length?p.pxValue():u.node.offsetLeft;var d=this.owner.left.state;l+=p-((d=d instanceof r.Length?d.pxValue():this.owner.node.offsetLeft)+o)}else s=0,l=0;var c,f,v=this.owner.iconPadding.getState().pxValue(o),y=this.owner.backIcon.view;null!==y?(c=(c=y.width.state)instanceof r.Length?c.pxValue():0,f=(f=y.height.state)instanceof r.Length?f.pxValue():0):(c=0,f=0);var g=this.owner.deckPhase.getValueOr(0),w=Math.max(this.owner.labelCount,Math.ceil(g)),m=w-1,S=g-m,C=t.width.state;this.labelWidth=C,C instanceof r.Length?C=C.pxValue(o):(C=t.node.offsetWidth,this.owner.deckPhase.isAnimating()?t.width.setState(C,ro.Intrinsic):t.width.setState(this.labelWidth,ro.Intrinsic));var b=v+(o-c-v)*i,V=(n-f)/2,T=o-b-c+(l-C)*s;if(e<m||e===m&&1===S)t.left.setState(b+c,ro.Intrinsic),t.top.setState(V,ro.Intrinsic),t.height.setState(f,ro.Intrinsic),t.opacity.setState(0,ro.Intrinsic),t.setCulled(!0);else if(e===m)t.left.setState(b+c+T*i*(1-S),ro.Intrinsic),t.top.setState(V,ro.Intrinsic),t.height.setState(f,ro.Intrinsic),t.opacity.setState(1-S,ro.Intrinsic),t.setCulled(!1);else if(e===w){t.left.setState(b+c+(T*(1-S)+T*i*S),ro.Intrinsic),t.top.setState(V,ro.Intrinsic),t.height.setState(f,ro.Intrinsic);var F=u instanceof gl?u.getLookOr(u.colorLook,null):null,P=this.owner.getLookOr(this.owner.colorLook,null);null!==F&&null!==P?t.color.setState(F.interpolateTo(P)(S),ro.Intrinsic):t.color.setState(P,ro.Intrinsic),t.opacity.setState(1,ro.Intrinsic),t.setCulled(!1)}else t.left.setState(b+c+T,ro.Intrinsic),t.top.setState(V,ro.Intrinsic),t.height.setState(f,ro.Intrinsic),t.opacity.setState(0,ro.Intrinsic),t.setCulled(!0);this.layoutWidth=b+c+C+v},e}(Zo),Fl=Zo.define({extends:Tl,type:ar,child:!1,observe:!0}),Pl=function(t){function e(e){var i=t.call(this,e)||this;return i.initBar(),i.initTheme(),i}return w(e,t),e.prototype.initBar=function(){this.addClass("deck-bar"),this.position.setState("relative",ro.Intrinsic),this.height.setState(this.barHeight.state,ro.Intrinsic),this.userSelect.setState("none",ro.Intrinsic),this.edgeInsets.setState({insetTop:0,insetRight:0,insetBottom:0,insetLeft:0},ro.Intrinsic)},e.prototype.initTheme=function(){this.modifyTheme(fe.default,[[fe.translucent,1],[fe.primary,1]])},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(ro.Intrinsic)&&this.backgroundColor.setState(e.getOr(se.backgroundColor,i,null),o,ro.Intrinsic)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof gl&&this.onInsertSlot(e)},e.prototype.onInsertSlot=function(t){t.position.setState("absolute",ro.Intrinsic)},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.resizeBar(e)},e.prototype.resizeBar=function(t){var e=this.rail.isInherited()?null:this.rail.ownState;if(null!=e){var i=this.rail.superState,o=null;if(null!=i&&null!==i.width&&(o=i.width.pxValue()),null===o){var n=this.parentView;n instanceof ar&&(o=(o=n.width.state)instanceof r.Length?o.pxValue():n.node.offsetWidth)}null===o&&(o=(o=this.width.state)instanceof r.Length?o.pxValue():this.node.offsetWidth);var s=this.edgeInsets.superState;null==s&&this.edgeInsets.takesPrecedence(ro.Intrinsic)&&(s=t.viewport.safeArea);var l=null!=s?s.insetTop:0,a=null!=s?s.insetLeft:0,h=null!=s?s.insetRight:0,u=this.itemSpacing.getStateOr(r.Length.zero()).pxValue(o),p=e.resized(o,a,h,u);this.rail.setState(p),this.height.setState(this.barHeight.state.plus(l),ro.Intrinsic)}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutBar(e)},e.prototype.layoutBar=function(t){var e=this.edgeInsets.superState;null==e&&this.edgeInsets.takesPrecedence(ro.Intrinsic)&&(e=t.viewport.safeArea);var i=null!=e?e.insetTop:0;this.height.setState(this.barHeight.state.plus(i),ro.Intrinsic)},e.prototype.displayChildViews=function(e,i,o){0!=(e&ro.NeedsLayout)?this.layoutChildViews(e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},e.prototype.layoutChildViews=function(e,i,o){var n=this.rail.state,s=this.edgeInsets.superState;null==s&&this.edgeInsets.takesPrecedence(ro.Intrinsic)&&(s=i.viewport.safeArea);var l=this.height.state;l=l instanceof r.Length?l.pxValue():this.node.offsetHeight;var a=null!=s?s.insetTop:0,h=this.barHeight.state;t.prototype.displayChildViews.call(this,e,i,(function(t,e,i){if(t instanceof gl){var r=t.key,s=null!==n&&void 0!==r?n.lookupPost(r):void 0;if(void 0!==s){var l=n.getPost(s),u=n.getPost(s+1),p=n.getPost(s-1);t.display.setState("flex",ro.Intrinsic),t.left.setState(l.left,ro.Intrinsic),t.top.setState(a,ro.Intrinsic),t.width.setState(l.width,ro.Intrinsic),t.height.setState(h,ro.Intrinsic),t.post.setState(l,ro.Intrinsic),t.nextPost.setState(u,ro.Intrinsic),t.prevPost.setState(p,ro.Intrinsic)}else t.display.setState("none",ro.Intrinsic),t.left.setState(null,ro.Intrinsic),t.top.setState(null,ro.Intrinsic),t.width.setState(null,ro.Intrinsic),t.height.setState(null,ro.Intrinsic),t.post.setState(null,ro.Intrinsic),t.nextPost.setState(null,ro.Intrinsic),t.prevPost.setState(null,ro.Intrinsic)}o.call(this,t,e,i)}))},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressBackButton&&e.deckBarDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckBarDidPressCloseButton&&e.deckBarDidPressCloseButton(t,this)}))},m([bo({type:yl,state:null})],e.prototype,"rail",void 0),m([Oo({type:Number,inherit:!0})],e.prototype,"deckPhase",void 0),m([bo({type:r.Length,state:r.Length.px(48),updateFlags:ro.NeedsLayout})],e.prototype,"barHeight",void 0),m([bo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsResize})],e.prototype,"itemSpacing",void 0),m([bo({type:Object,inherit:!0,state:null,updateFlags:ro.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(ar),Ml=function(t){function e(e){var i=t.call(this,e)||this;return i.initCard(),i}return w(e,t),e.prototype.initCard=function(){this.addClass("deck-card"),this.position.setState("relative",ro.Intrinsic),this.overflowX.setState("auto",ro.Intrinsic),this.overflowY.setState("auto",ro.Intrinsic),this.overflowScrolling.setState("touch",ro.Intrinsic)},e.prototype.onApplyTheme=function(e,i,o){t.prototype.onApplyTheme.call(this,e,i,o),this.backgroundColor.takesPrecedence(ro.Intrinsic)&&this.backgroundColor.setState(e.getOr(se.backgroundColor,i,null),o,ro.Intrinsic)},m([bo({type:Object,inherit:!0,state:null})],e.prototype,"edgeInsets",void 0),m([bo({type:String})],e.prototype,"cardTitle",void 0),m([Zo({type:ar,child:!1})],e.prototype,"backItem",void 0),m([Zo({type:ar,child:!1})],e.prototype,"titleView",void 0),m([Zo({type:ar,child:!1})],e.prototype,"leftItem",void 0),m([Zo({type:ar,child:!1})],e.prototype,"rightItem",void 0),e}(ar),Dl=function(t){function e(e){var i=t.call(this,e)||this;return i.cardCount=0,i.card=null,i.initDeck(),i}return w(e,t),e.prototype.initDeck=function(){this.addClass("deck"),this.position.setState("relative",ro.Intrinsic),this.overflowX.setState("hidden",ro.Intrinsic),this.overflowY.setState("hidden",ro.Intrinsic)},e.prototype.pushCard=function(t,e){if(!this.deckPhase.isAnimating()){var i=this.cardCount,o=i+1;this.cardCount=o;var n="card"+i,r=this.getViewFastener(n),s=null!==r?r.view:null,a="card"+o,h=new Ol(this,a,a);h.cardIndex=o,this.willPushCard(t,s),this.card=h,this.setViewFastener(a,h),h.setView(t),h.injectView(),e=(void 0!==e||0!==i)&&(void 0===e||!0===e?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(e)),this.deckPhase.setState(o,e),this.onPushCard(t,s),!1===e&&this.didPushCard(t,s)}},e.prototype.willPushCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPushCard&&i.deckWillPushCard(t,e,this)}))},e.prototype.onPushCard=function(t,e){},e.prototype.didPushCard=function(t,e){null!==e&&e.parentView===this&&e.remove(),this.didObserve((function(i){void 0!==i.deckDidPushCard&&i.deckDidPushCard(t,e,this)}))},e.prototype.popCard=function(t){if(this.deckPhase.isAnimating())return null;var e=this.cardCount,i=e-1;this.cardCount=i;var o="card"+e,n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r){var s="card"+i,a=this.getViewFastener(s),h=null!==a?a.view:null;this.willPopCard(h,r),this.card=a,null!==a&&a.injectView(),t=void 0===t||!0===t?this.getLookOr(se.timing,me.navigating,!1):l.Timing.fromAny(t),this.deckPhase.setState(i,t),this.onPopCard(h,r),!1===t&&this.didPopCard(h,r)}return r},e.prototype.willPopCard=function(t,e){this.willObserve((function(i){void 0!==i.deckWillPopCard&&i.deckWillPopCard(t,e,this)}))},e.prototype.onPopCard=function(t,e){},e.prototype.didPopCard=function(t,e){var i=e.key;if(e.remove(),void 0!==i){var o=this.getViewFastener(i);null!==o&&o.cardIndex>this.cardCount&&this.setViewFastener(i,null)}this.didObserve((function(i){void 0!==i.deckDidPopCard&&i.deckDidPopCard(t,e,this)}))},e.prototype.didLayout=function(e){if(!this.deckPhase.isAnimating()){var i=this.deckPhase.takeUpdatedValue();if(void 0!==i){var o="card"+Math.round(i+1),n=this.getViewFastener(o),r=null!==n?n.view:null;if(null!==r)this.didPopCard(null!==this.card?this.card.view:null,r);else if(null!==this.card&&null!==this.card.view&&Math.round(i)>0){var s="card"+Math.round(i-1),l=this.getViewFastener(s),a=null!==l?l.view:null;this.didPushCard(this.card.view,a)}}}t.prototype.didLayout.call(this,e)},e.prototype.didPressBackButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressBackButton&&e.deckDidPressBackButton(t,this)}))},e.prototype.didPressCloseButton=function(t){this.didObserve((function(e){void 0!==e.deckDidPressCloseButton&&e.deckDidPressCloseButton(t,this)}))},m([Oo({type:Number,state:0,updateFlags:ro.NeedsLayout})],e.prototype,"deckPhase",void 0),m([bo({type:Number,state:1})],e.prototype,"inAlign",void 0),m([bo({type:Number,state:1/3})],e.prototype,"outAlign",void 0),m([bo({type:Object,inherit:!0,state:null,updateFlags:ro.NeedsResize})],e.prototype,"edgeInsets",void 0),e}(ar),xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initBar(t)},e.prototype.insertView=function(t,e,i,o){t.prependChildView(e,o)},e.prototype.viewDidResize=function(t,e){this.resizeBar(e)},e.prototype.initBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.width.setState(e,ro.Intrinsic),t.zIndex.setState(1,ro.Intrinsic)},e.prototype.resizeBar=function(t){var e=this.owner.width.state;e=e instanceof r.Length?e:r.Length.px(this.owner.node.offsetWidth),t.width.setState(e,ro.Intrinsic)},e.prototype.deckBarDidPressBackButton=function(t,e){this.owner.didPressBackButton(t)},e.prototype.deckBarDidPressCloseButton=function(t,e){this.owner.didPressCloseButton(t)},e}(Zo);Zo({extends:xl,key:!0,type:Pl,observe:!0})(Dl.prototype,"bar");var Ll,Al=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.cardIndex=0,n}return w(e,t),e.prototype.onSetView=function(t){null!==t&&this.initCard(t)},e.prototype.insertView=function(t,e,i,o){var n="card"+(this.cardIndex+1);i=t.getChildView(n),t.insertChildView(e,i,o)},e.prototype.viewDidResize=function(t,e){this.resizeCard(e,t)},e.prototype.viewDidLayout=function(t,e){this.layoutCard(e,t)},e.prototype.initCard=function(t){var e=this.owner.edgeInsets.state;void 0===e&&this.owner.edgeInsets.takesPrecedence(ro.Intrinsic)&&(e=this.owner.viewport.safeArea);var i=this.owner.width.state;i=i instanceof r.Length?i:r.Length.px(this.owner.node.offsetWidth);var o=this.owner.height.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetHeight);var n=null,s=this.owner.bar.view;null!==s&&(n=(n=s.height.state)instanceof r.Length?n:r.Length.px(s.node.offsetHeight),null!==e&&(e={insetTop:0,insetRight:e.insetRight,insetBottom:e.insetBottom,insetLeft:e.insetLeft})),t.edgeInsets.setState(e,ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(i,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.width.setState(i,ro.Intrinsic),t.height.setState(o,ro.Intrinsic),t.paddingTop.setState(n,ro.Intrinsic),t.boxSizing.setState("border-box",ro.Intrinsic),t.zIndex.setState(0,ro.Intrinsic),t.visibility.setState("hidden",ro.Intrinsic)},e.prototype.resizeCard=function(t,e){var i=this.owner.edgeInsets.state;void 0===i&&this.owner.edgeInsets.takesPrecedence(ro.Intrinsic)&&(i=e.viewport.safeArea);var o=this.owner.width.state;o=o instanceof r.Length?o:r.Length.px(this.owner.node.offsetWidth);var n=this.owner.height.state;n=n instanceof r.Length?n:r.Length.px(this.owner.node.offsetHeight);var s=null,l=this.owner.bar.view;null!==l&&(s=(s=l.height.state)instanceof r.Length?s:r.Length.px(l.node.offsetHeight),null!==i&&(i={insetTop:0,insetRight:i.insetRight,insetBottom:i.insetBottom,insetLeft:i.insetLeft})),t.edgeInsets.setState(i,ro.Intrinsic),t.width.setState(o,ro.Intrinsic),t.height.setState(n,ro.Intrinsic),t.paddingTop.setState(s,ro.Intrinsic)},e.prototype.layoutCard=function(t,e){var i=t.width.state;i=i instanceof r.Length?i:r.Length.px(t.node.offsetWidth);var o=this.owner.inAlign.state,n=this.owner.outAlign.state,s=this.owner.deckPhase.getValue(),l=Math.max(this.owner.cardCount,Math.ceil(s)),a=l-1,h=s-a,u=this.cardIndex;u<a||u===a&&1===h?(t.left.setState(-i.pxValue()*n,ro.Intrinsic),t.visibility.setState("hidden",ro.Intrinsic),t.setCulled(!0)):u===a?(t.left.setState(-i.pxValue()*n*h,ro.Intrinsic),t.visibility.setState(void 0,ro.Intrinsic),t.setCulled(!1)):u===l?(t.left.setState(i.pxValue()*o*(1-h),ro.Intrinsic),t.visibility.setState(void 0,ro.Intrinsic),t.setCulled(!1)):(t.left.setState(i.pxValue()*o,ro.Intrinsic),t.visibility.setState("hidden",ro.Intrinsic),t.setCulled(!0))},e}(Zo),Ol=Zo.define({extends:Al,type:Ml,child:!1,observe:!0}),Rl=function(t){function i(e){var i=t.call(this,e)||this;return i.onBackButtonClick=i.onBackButtonClick.bind(i),i.initRail(),i}return w(i,t),i.prototype.initRail=function(){var t=vl.create("backButton",0,0,48),e=vl.create("titleSlider",1,1),i=vl.create("moreSlider",0,0,48),o=yl.create([t,e,i]);this.rail.setState(o,ro.Intrinsic),this.backMembrane.injectView(),this.backButton.injectView(),this.titleSlider.injectView(),this.moreSlider.injectView()},Object.defineProperty(i.prototype,"closeIcon",{get:function(){return i.closeIcon},enumerable:!1,configurable:!0}),i.prototype.createCloseIcon=function(){var t=Zr.create();return t.width.setState(24,ro.Intrinsic),t.height.setState(24,ro.Intrinsic),t.iconWidth.setState(24,ro.Intrinsic),t.iconHeight.setState(24,ro.Intrinsic),t.graphics.setState(this.closeIcon,ro.Intrinsic),t},i.prototype.initBackMembrane=function(t){t.display.setState("none",ro.Intrinsic),t.position.setState("absolute",ro.Intrinsic),t.left.setState(0,ro.Intrinsic),t.top.setState(0,ro.Intrinsic),t.borderTopLeftRadius.setState(4,ro.Intrinsic),t.borderTopRightRadius.setState(4,ro.Intrinsic),t.borderBottomLeftRadius.setState(4,ro.Intrinsic),t.borderBottomRightRadius.setState(4,ro.Intrinsic),t.overflowX.setState("hidden",ro.Intrinsic),t.overflowY.setState("hidden",ro.Intrinsic),t.cursor.setState("pointer",ro.Intrinsic)},Object.defineProperty(i.prototype,"backIcon",{get:function(){return i.backIcon},enumerable:!1,configurable:!0}),i.prototype.createBackIcon=function(){var t=Zr.create();return t.width.setState(24,ro.Intrinsic),t.height.setState(24,ro.Intrinsic),t.iconWidth.setState(24,ro.Intrinsic),t.iconHeight.setState(24,ro.Intrinsic),t.graphics.setState(this.backIcon,ro.Intrinsic),t},i.prototype.createBackButton=function(){var t=Cl.create();return t.backIcon.setView(this.createBackIcon()),t.backIcon.injectView(),t},i.prototype.initBackButton=function(t){t.pointerEvents.setState("none",ro.Intrinsic)},i.prototype.initTitleSlider=function(t){t.pointerEvents.setState("none",ro.Intrinsic)},i.prototype.initMoreSlider=function(t){},i.prototype.pushTitle=function(t,e){var i=this.titleSlider.view,o=this.backButton.view;if(null!==i&&null!==o){var n=i.item,r=null;null!==n&&(r=n.view,n.setView(null),i.item=null),i.pushItem(t,e),null!==r?o.pushLabel(r,e):o.labelCount=i.itemCount}},i.prototype.popTitle=function(t){var e=this.titleSlider.view,i=this.backButton.view;null!==e&&null!==i&&(e.popItem(t),i.popLabel(t))},i.prototype.didPopBackButton=function(t,e,i){var o=i.getViewFastener(e.key);null!==o&&(o.setView(null),i.setViewFastener(o.key,null));var n=this.titleSlider.view;if(null!==n){var r="item"+n.itemCount,s=n.getViewFastener(r);null!==s&&s.setView(e),n.item=s,n.appendChildView(e,r)}},i.prototype.didLayout=function(e){var i=this.backMembrane.view,o=this.backButton.view;if(null!==i&&null!==o){if(i.width.takesPrecedence(ro.Intrinsic)){var n=o.left.state;if(n=n instanceof r.Length?n.pxValue():o.node.offsetLeft,null!==o.label)i.width.setState(n+o.label.layoutWidth,ro.Intrinsic);else{var s=o.height.state;s=s instanceof r.Length?s.pxValue():o.node.offsetWidth,i.width.setState(n+s,ro.Intrinsic)}}if(i.height.takesPrecedence(ro.Intrinsic)){var l=o.top.state;l=l instanceof r.Length?l.pxValue():o.node.offsetTop;var a=o.height.state;a=a instanceof r.Length?a.pxValue():o.node.offsetHeight,i.height.setState(l+a,ro.Intrinsic)}if(null!==o.backIcon.view){var h=o.closeIcon.view,u=o.deckPhase.getValueOr(0),p=Math.min(Math.max(0,u-1),1);i.display.setState(null===h&&0===p?"none":"block",ro.Intrinsic)}}t.prototype.didLayout.call(this,e)},i.prototype.onBackButtonClick=function(t){t.stopPropagation(),this.deckPhase.getStateOr(0)>1?this.didPressBackButton(t):this.didPressCloseButton(t)},Object.defineProperty(i,"closeIcon",{get:function(){return Nr.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")},enumerable:!1,configurable:!0}),Object.defineProperty(i,"backIcon",{get:function(){return Nr.create(24,24,"M11.7,3.9L9.9,2.1L0,12L9.9,21.9L11.7,20.1L3.5,12Z").withFillLook(se.accentColor)},enumerable:!1,configurable:!0}),m([Zo({key:!0,type:Ls,onSetView:function(t,e){null!==e&&e.off("click",this.owner.onBackButtonClick),null!==t&&(this.owner.initBackMembrane(t),t.on("click",this.owner.onBackButtonClick))}})],i.prototype,"backMembrane",void 0),m([Zo({key:!0,type:Cl,observe:!0,onSetView:function(t){null!==t&&this.owner.initBackButton(t)},createView:function(){return this.owner.createBackButton()},deckButtonDidPopLabel:function(t,e,i){this.owner.didPopBackButton(t,e,i)}})],i.prototype,"backButton",void 0),m([Zo({key:!0,type:wl,onSetView:function(t){null!==t&&this.owner.initTitleSlider(t)}})],i.prototype,"titleSlider",void 0),m([Zo({key:!0,type:wl,onSetView:function(t){null!==t&&this.owner.initMoreSlider(t)}})],i.prototype,"moreSlider",void 0),m([e.Lazy],i,"closeIcon",null),m([e.Lazy],i,"backIcon",null),i}(Pl),Il=function(t){function e(e){var i=t.call(this,e)||this;return i.initBar(),i}return w(e,t),e.prototype.initBar=function(){var t=this.bar.view;t instanceof Rl||(t=Rl.create(),this.bar.setView(t))},e.prototype.willPushCard=function(e,i){t.prototype.willPushCard.call(this,e,i);var o=this.bar.view;if(o instanceof Rl){o.pushTitle(e.cardTitle.getStateOr(""));var n=o.backMembrane.view;null!==n&&n.pointerEvents.setState("none",ro.Intrinsic)}},e.prototype.didPushCard=function(e,i){var o=this.bar.view;if(o instanceof Rl){var n=o.backMembrane.view;null!==n&&n.pointerEvents.setState("auto",ro.Intrinsic)}t.prototype.didPushCard.call(this,e,i)},e.prototype.willPopCard=function(e,i){t.prototype.willPopCard.call(this,e,i);var o=this.bar.view;o instanceof Rl&&o.popTitle()},e.prototype.didPressBackButton=function(e){this.deckPhase.isAnimating()||this.popCard(),t.prototype.didPressBackButton.call(this,e)},e}(Dl),kl=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.arrangement&&this.arrangement(e.arrangement),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDialValue&&r.viewWillSetDialValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialValue&&r.viewDidSetDialValue(t,e,this)}},i.prototype.willSetLimit=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDialLimit&&r.viewWillSetDialLimit(t,e,this)}},i.prototype.onSetLimit=function(t,e){},i.prototype.didSetLimit=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLimit&&r.viewDidSetDialLimit(t,e,this)}},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDialLabel&&r.viewWillSetDialLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLabel&&r.viewDidSetDialLabel(t,e,this)}},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDialLegend&&r.viewWillSetDialLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDialLegend&&r.viewDidSetDialLegend(t,e,this)}},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderDial(o,this.viewFrame),o.restore()}},i.prototype.renderDial=function(t,i){var o=i.width,n=i.height,s=Math.min(o,n),l=this.value.getValue(),a=this.limit.getValue(),h=0!==a?l/a:0,u=this.center.getValue(),p=this.innerRadius.getValue().px(s),d=this.outerRadius.getValue().px(s),c=d.value-p.value,f=this.startAngle.getValue().rad(),v=this.sweepAngle.getValue().rad(),y=this.cornerRadius.getValue().px(c),g=new Lr(u,p,d,f,v,r.Angle.zero(),null,y),w=g.withSweepAngle(v.times(h));t.save(),t.beginPath();var m=this.dialColor.value;null!==m&&(t.fillStyle=m.toString()),g.draw(t,i),null!==m&&t.fill(),t.clip();var S=this.meterColor.value;null!==S&&(t.beginPath(),t.fillStyle=S.toString(),w.draw(t,i),t.fill()),t.restore();var C=this.label.view;if(null!==C&&!C.isHidden()){var b=(p.value+d.value)/2,V=b*Math.cos(f.value+e.Equivalent.Epsilon),T=b*Math.sin(f.value+e.Equivalent.Epsilon),F=void 0;F=V>=0?T>=0?"start":"end":T<0?"end":"start";var P=f.value-Math.PI/2,M=this.labelPadding.getValue().pxValue(c),D=M*Math.cos(P),x=M*Math.sin(P);Or.is(C)&&(C.textAlign.setState(F,ro.Intrinsic),C.textBaseline.setState("middle",ro.Intrinsic),C.textOrigin.setState(new r.R2Point(u.x+V+D,u.y+T+x),ro.Intrinsic))}var L=this.legend.view;if(null!==L&&!L.isHidden()){var A=this.tickAlign.getValue(),O=f.value+v.value*h*A,R=this.tickRadius.getValue().pxValue(s),I=this.tickLength.getValue().pxValue(o),k=this.tickWidth.getValue().pxValue(s),W=this.tickColor.value,E=u.x,N=u.y,U=d.value*Math.cos(O+e.Equivalent.Epsilon),G=d.value*Math.sin(O+e.Equivalent.Epsilon),B=R*Math.cos(O+e.Equivalent.Epsilon),j=R*Math.sin(O+e.Equivalent.Epsilon);D=0;null!==W&&(t.beginPath(),t.strokeStyle=W.toString(),t.lineWidth=k,t.moveTo(E+U,N+G),t.lineTo(E+B,N+j),0!==I&&(B>=0?(t.lineTo(E+I,N+j),D=I-B):B<0&&(t.lineTo(E-I,N+j),D=I+B)),t.stroke());F=void 0;if(B>=0?F="end":(D=-D,F="start"),Or.is(L)){var H=this.tickPadding.getValue().pxValue(s);Pr.is(L)&&L.fill.setState(W,ro.Intrinsic),L.textAlign.setState(F,ro.Intrinsic),L.textBaseline.setState("alphabetic",ro.Intrinsic),L.textOrigin.setState(new r.R2Point(E+B+D,N+j-H),ro.Intrinsic)}}},i.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestDial(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},i.prototype.hitTestDial=function(t,e,i,o){var n=Math.min(o.width,o.height),s=this.center.getValue(),l=this.innerRadius.getValue().px(n),a=this.outerRadius.getValue().px(n),h=a.value-l.value,u=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.cornerRadius.getValue().px(h),c=new Lr(s,l,a,u,p,r.Angle.zero(),null,d);return i.beginPath(),c.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return i.fromInit(t);throw new TypeError(""+t)},m([Oo({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},didSetValue:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([Oo({type:Number,state:1,willSetValue:function(t,e){this.owner.willSetLimit(t,e)},didSetValue:function(t,e){this.owner.onSetLimit(t,e),this.owner.didSetLimit(t,e)}})],i.prototype,"limit",void 0),m([Oo({type:r.R2Point,inherit:!0,state:r.R2Point.origin()})],i.prototype,"center",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"innerRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(40)})],i.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,inherit:!0,state:r.Angle.rad(-Math.PI/2)})],i.prototype,"startAngle",void 0),m([Oo({type:r.Angle,inherit:!0,state:r.Angle.rad(2*Math.PI)})],i.prototype,"sweepAngle",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"cornerRadius",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.subduedColor})],i.prototype,"dialColor",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.accentColor})],i.prototype,"meterColor",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"labelPadding",void 0),m([Oo({type:Number,inherit:!0,state:1})],i.prototype,"tickAlign",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(45)})],i.prototype,"tickRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.neutralColor})],i.prototype,"tickColor",void 0),m([Oo({type:St,inherit:!0})],i.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0,look:se.mutedColor})],i.prototype,"textColor",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),m([bo({type:String,state:"auto"})],i.prototype,"arrangement",void 0),i}(vr),Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialValue&&r.traitWillSetDialValue(t,e,this)}},e.prototype.onSetValue=function(t,e){},e.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialValue&&r.traitDidSetDialValue(t,e,this)}},e.prototype.willSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLimit&&r.traitWillSetDialLimit(t,e,this)}},e.prototype.onSetLimit=function(t,e){},e.prototype.didSetLimit=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLimit&&r.traitDidSetDialLimit(t,e,this)}},e.prototype.willSetDialColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialColor&&r.traitWillSetDialColor(t,e,this)}},e.prototype.onSetDialColor=function(t,e){},e.prototype.didSetDialColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialColor&&r.traitDidSetDialColor(t,e,this)}},e.prototype.willSetMeterColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetMeterColor&&r.traitWillSetMeterColor(t,e,this)}},e.prototype.onSetMeterColor=function(t,e){},e.prototype.didSetMeterColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetMeterColor&&r.traitDidSetMeterColor(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLabel&&r.traitWillSetDialLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLabel&&r.traitDidSetDialLabel(t,e,this)}},e.prototype.formatLabel=function(t,e){},e.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDialLegend&&r.traitWillSetDialLegend(t,e,this)}},e.prototype.onSetLegend=function(t,e){},e.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDialLegend&&r.traitDidSetDialLegend(t,e,this)}},e.prototype.formatLegend=function(t,e){},m([N({type:Number,state:0,willSetState:function(t,e){this.owner.willSetValue(t,e)},didSetState:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],e.prototype,"value",void 0),m([N({type:Number,state:1,willSetState:function(t,e){this.owner.willSetLimit(t,e)},didSetState:function(t,e){this.owner.onSetLimit(t,e),this.owner.didSetLimit(t,e)}})],e.prototype,"limit",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetDialColor(t,e)},didSetState:function(t,e){this.owner.onSetDialColor(t,e),this.owner.didSetDialColor(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"dialColor",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetMeterColor(t,e)},didSetState:function(t,e){this.owner.onSetMeterColor(t,e),this.owner.didSetMeterColor(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"meterColor",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLegend(t,e)},didSetState:function(t,e){this.owner.onSetLegend(t,e),this.owner.didSetLegend(t,e)}})],e.prototype,"legend",void 0),e}(ht),El=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDialTrait=function(t){},e.prototype.attachDialTrait=function(t){if(null!==this.dial.view){this.setValue(t.value.state),this.setLimit(t.limit.state);var e=t.dialColor.state;null!==e&&this.setDialColor(e);var i=t.meterColor.state;null!==i&&this.setMeterColor(i),this.setLabelView(t.label.state),this.setLegendView(t.legend.state)}},e.prototype.detachDialTrait=function(t){},e.prototype.willSetDialTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDialTrait&&r.controllerWillSetDialTrait(t,e,this)}},e.prototype.onSetDialTrait=function(t,e){null!==e&&this.detachDialTrait(e),null!==t&&(this.attachDialTrait(t),this.initDialTrait(t))},e.prototype.didSetDialTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDialTrait&&r.controllerDidSetDialTrait(t,e,this)}},e.prototype.updateLabel=function(t,e,i){if(i.label.takesPrecedence(f.Intrinsic)){var o=i.formatLabel(t,e);void 0!==o&&i.label.setState(o,f.Intrinsic)}},e.prototype.updateLegend=function(t,e,i){if(i.legend.takesPrecedence(f.Intrinsic)){var o=i.formatLegend(t,e);void 0!==o&&i.legend.setState(o,f.Intrinsic)}},e.prototype.createDialView=function(){return kl.create()},e.prototype.initDialView=function(t){var e=this.dial.trait;if(null!==e){var i=t.value.value,o=t.limit.value;this.updateLabel(i,o,e),this.updateLegend(i,o,e),this.setValue(e.value.state),this.setLimit(e.limit.state),this.setLabelView(e.label.state),this.setLegendView(e.legend.state)}},e.prototype.attachDialView=function(t){var e=this.dial.trait;if(null!==e){var i=e.dialColor.state;null!==i&&this.setDialColor(i);var o=e.meterColor.state;null!==o&&this.setMeterColor(o)}this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachDialView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetDialView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDialView&&r.controllerWillSetDialView(t,e,this)}},e.prototype.onSetDialView=function(t,e){null!==e&&this.detachDialView(e),null!==t&&(this.attachDialView(t),this.initDialView(t))},e.prototype.didSetDialView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDialView&&r.controllerDidSetDialView(t,e,this)}},e.prototype.setValue=function(t,e){var i=this.dial.view;null!==i&&i.value.takesPrecedence(ro.Intrinsic)&&(void 0===e||!0===e?!0===(e=this.dialTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),i.value.setState(t,e,ro.Intrinsic))},e.prototype.willSetValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialValue&&s.controllerWillSetDialValue(t,e,this)}},e.prototype.onSetValue=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.limit.value;this.updateLabel(t,n,o),this.updateLegend(t,n,o)}},e.prototype.didSetValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialValue&&s.controllerDidSetDialValue(t,e,this)}},e.prototype.setLimit=function(t,e){var i=this.dial.view;null!==i&&i.limit.takesPrecedence(ro.Intrinsic)&&(void 0===e||!0===e?!0===(e=this.dialTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),i.limit.setState(t,e,ro.Intrinsic))},e.prototype.willSetLimit=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialLimit&&s.controllerWillSetDialLimit(t,e,this)}},e.prototype.onSetLimit=function(t,e,i){var o=this.dial.trait;if(null!==o){var n=i.value.value;this.updateLabel(n,t,o),this.updateLegend(n,t,o)}},e.prototype.didSetLimit=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialLimit&&s.controllerDidSetDialLimit(t,e,this)}},e.prototype.setDialColor=function(t,e){var i=this.dial.view;null!==i&&(void 0===e||!0===e?!0===(e=this.dialTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.dialColor.setLook(t,e,ro.Intrinsic):i.dialColor.setState(t,e,ro.Intrinsic))},e.prototype.setMeterColor=function(t,e){var i=this.dial.view;null!==i&&(void 0===e||!0===e?!0===(e=this.dialTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.meterColor.setLook(t,e,ro.Intrinsic):i.meterColor.setState(t,e,ro.Intrinsic))},e.prototype.createLabelView=function(t){return"function"==typeof t?t(this.dial.trait):t},e.prototype.setLabelView=function(t){var e=this.dial.view;if(null!==e){var i=null!==t?this.createLabelView(t):null;e.label.setView(i)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDialLabelView&&r.controllerWillSetDialLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDialLabelView&&r.controllerDidSetDialLabelView(t,e,this)}},e.prototype.createLegendView=function(t){return"function"==typeof t?t(this.dial.trait):t},e.prototype.setLegendView=function(t){var e=this.dial.view;if(null!==e){var i=null!==t?this.createLegendView(t):null;e.legend.setView(i)}},e.prototype.initLegendView=function(t){},e.prototype.attachLegendView=function(t){},e.prototype.detachLegendView=function(t){},e.prototype.willSetLegendView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDialLegendView&&r.controllerWillSetDialLegendView(t,e,this)}},e.prototype.onSetLegendView=function(t,e){null!==e&&this.detachLegendView(e),null!==t&&(this.attachLegendView(t),this.initLegendView(t))},e.prototype.didSetLegendView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDialLegendView&&r.controllerDidSetDialLegendView(t,e,this)}},e.DialFastener=Vs.define({viewType:kl,observeView:!0,willSetView:function(t,e){this.owner.willSetDialView(t,e)},onSetView:function(t,e){this.owner.onSetDialView(t,e)},didSetView:function(t,e){this.owner.didSetDialView(t,e)},viewWillSetDialValue:function(t,e,i){this.owner.willSetValue(t,e,i)},viewDidSetDialValue:function(t,e,i){this.owner.onSetValue(t,e,i),this.owner.didSetValue(t,e,i)},viewWillSetDialLimit:function(t,e,i){this.owner.willSetLimit(t,e,i)},viewDidSetDialLimit:function(t,e,i){this.owner.onSetLimit(t,e,i),this.owner.didSetLimit(t,e,i)},viewDidSetDialLabel:function(t,e){this.owner.label.setView(t)},viewDidSetDialLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createDialView()},traitType:Wl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDialTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDialTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDialTrait(t,e)},traitDidSetDialValue:function(t,e){this.owner.setValue(t)},traitDidSetDialLimit:function(t,e){this.owner.setLimit(t)},traitDidSetDialColor:function(t,e){this.owner.setDialColor(t)},traitDidSetMeterColor:function(t,e){this.owner.setMeterColor(t)},traitDidSetDialLabel:function(t,e){this.owner.setLabelView(t)},traitDidSetDialLegend:function(t,e){this.owner.setLegendView(t)}}),m([ds({type:l.Timing,inherit:!0})],e.prototype,"dialTiming",void 0),m([Vs({extends:e.DialFastener})],e.prototype,"dial",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetLegendView(t,e)},onSetView:function(t,e){this.owner.onSetLegendView(t,e)},didSetView:function(t,e){this.owner.didSetLegendView(t,e)}})],e.prototype,"legend",void 0),e}(Ds),Nl=function(t){function e(){var e=t.call(this)||this;return e.dialFasteners=[],e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.dialSpacing&&this.dialSpacing(e.dialSpacing),void 0!==e.dialColor&&this.dialColor(e.dialColor),void 0!==e.meterColor&&this.meterColor(e.meterColor),void 0!==e.labelPadding&&this.labelPadding(e.labelPadding),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.dials;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(kl.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),t.textBaseline.setState("middle",ro.Intrinsic),t.textOrigin.setState(this.center.state,ro.Intrinsic))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGaugeTitle&&r.viewWillSetGaugeTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGaugeTitle&&r.viewDidSetGaugeTitle(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null),t=kl.fromAny(t);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createDialFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDial=function(t,e){var i=t.label.view;null!==i&&this.initDialLabel(i,e);var o=t.legend.view;null!==o&&this.initDialLegend(o,e)},e.prototype.attachDial=function(t,e){},e.prototype.detachDial=function(t,e){},e.prototype.willSetDial=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetDial&&l.viewWillSetDial(t,e,i,this)}},e.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},e.prototype.didSetDial=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetDial&&l.viewDidSetDial(t,e,i,this)}},e.prototype.onSetDialValue=function(t,e,i){this.requireUpdate(ro.NeedsLayout)},e.prototype.initDialLabel=function(t,e){},e.prototype.onSetDialLabel=function(t,e,i){null!==t&&this.initDialLabel(t,i)},e.prototype.initDialLegend=function(t,e){},e.prototype.onSetDialLegend=function(t,e,i){null!==t&&this.initDialLegend(t,i)},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDial=function(t){return t instanceof kl?t:null},e.prototype.onInsertDial=function(t,e){this.insertDial(t,e)},e.prototype.onRemoveDial=function(t){this.removeDial(t)},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDial(e);null!==o&&this.onInsertDial(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDial(e);null!==i&&this.onRemoveDial(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutGauge(this.viewFrame)},e.prototype.layoutGauge=function(t){if(this.center.takesPrecedence(ro.Intrinsic)){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setState(new r.R2Point(e,i),ro.Intrinsic)}for(var o=this.dialFasteners,n=o.length,s=0,l=0;l<n;l+=1){null!==(y=o[l].view)&&"auto"===y.arrangement.state&&(s+=1)}var a=Math.min(t.width,t.height),h=this.limit.getValue(),u=this.startAngle.getValue(),p=this.sweepAngle.getValue(),d=this.innerRadius.getValue().pxValue(a),c=this.outerRadius.getValue().pxValue(a),f=this.dialSpacing.getValue().pxValue(a),v=s>1?(c-d-f*(s-1))/s:c-d;for(l=0;l<n;l+=1){var y;if(null!==(y=o[l].view)&&"auto"===y.arrangement.state){if(isFinite(h)){var g=y.limit.getValue();y.limit.setState(Math.max(g,h),ro.Intrinsic)}y.startAngle.setState(u,ro.Intrinsic),y.sweepAngle.setState(p,ro.Intrinsic),y.innerRadius.setState(r.Length.px(d),ro.Intrinsic),y.outerRadius.setState(r.Length.px(d+v),ro.Intrinsic),d=d+v+f}}var w=this.title.view;Or.is(w)&&w.textOrigin.setState(this.center.state,ro.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.DialFastener=Zo.define({type:kl,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDial(t,e,i,this)},viewDidSetDialValue:function(t,e){this.owner.onSetDialValue(t,e,this)},viewDidSetDialLabel:function(t,e){this.owner.onSetDialLabel(t,e,this)},viewDidSetDialLegend:function(t,e){this.owner.onSetDialLegend(t,e,this)}}),m([Oo({type:Number,state:0,updateFlags:ro.NeedsLayout})],e.prototype,"limit",void 0),m([Oo({type:r.R2Point,state:r.R2Point.origin(),updateFlags:ro.NeedsLayout})],e.prototype,"center",void 0),m([Oo({type:r.Length,state:r.Length.pct(30),updateFlags:ro.NeedsLayout})],e.prototype,"innerRadius",void 0),m([Oo({type:r.Length,state:r.Length.pct(40),updateFlags:ro.NeedsLayout})],e.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:ro.NeedsLayout})],e.prototype,"startAngle",void 0),m([Oo({type:r.Angle,state:r.Angle.rad(2*Math.PI),updateFlags:ro.NeedsLayout})],e.prototype,"sweepAngle",void 0),m([Oo({type:r.Length,state:r.Length.pct(50)})],e.prototype,"cornerRadius",void 0),m([Oo({type:r.Length,state:r.Length.px(1),updateFlags:ro.NeedsLayout})],e.prototype,"dialSpacing",void 0),m([Oo({type:Tt,state:null,look:se.subduedColor})],e.prototype,"dialColor",void 0),m([Oo({type:Tt,state:null,look:se.accentColor})],e.prototype,"meterColor",void 0),m([Oo({type:r.Length,state:r.Length.pct(25)})],e.prototype,"labelPadding",void 0),m([Oo({type:Number,state:1})],e.prototype,"tickAlign",void 0),m([Oo({type:r.Length,state:r.Length.pct(45)})],e.prototype,"tickRadius",void 0),m([Oo({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([Oo({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([Oo({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([Oo({type:Tt,state:null,look:se.neutralColor})],e.prototype,"tickColor",void 0),m([Oo({type:St,state:null,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,state:null,look:se.mutedColor})],e.prototype,"textColor",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(vr),Ul=function(t){function e(){var e=t.call(this)||this;return e.dialFasteners=[],e}return w(e,t),e.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGaugeTitle&&r.traitWillSetGaugeTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){},e.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGaugeTitle&&r.traitDidSetGaugeTitle(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createDialFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDial=function(t,e){},e.prototype.attachDial=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDial=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetDial&&l.traitWillSetDial(t,e,i,this)}},e.prototype.onSetDial=function(t,e,i,o){null!==e&&this.detachDial(e,o),null!==t&&(this.attachDial(t,o),this.initDial(t,o))},e.prototype.didSetDial=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetDial&&l.traitDidSetDial(t,e,i,this)}},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingDials=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectDialModel=function(t){return t.getTrait(Wl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDialModel(n);null!==r&&this.insertDial(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDialModel(e);if(null!==o){var n=null!==i?this.detectDialModel(i):null;this.insertDial(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDialModel(e);null!==i&&this.removeDial(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDials()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDials()},e.DialFastener=_.define({type:Wl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDial(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDial(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDial(t,e,i,this)}}),m([N({state:null,willSetState:function(t,e){this.owner.willSetTitle(t,e)},didSetState:function(t,e){this.owner.onSetTitle(t,e),this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(ht),Gl=function(t){function e(){var e=t.call(this)||this;return e.dialFasteners=[],e}return w(e,t),e.prototype.initGaugeTrait=function(t){},e.prototype.attachGaugeTrait=function(t){null!==this.gauge.view&&this.setTitleView(t.title.state,t);for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDialTrait(n)}},e.prototype.detachGaugeTrait=function(t){for(var e=t.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDialTrait(n)}null!==this.gauge.view&&this.setTitleView(null,t)},e.prototype.willSetGaugeTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGaugeTrait&&r.controllerWillSetGaugeTrait(t,e,this)}},e.prototype.onSetGaugeTrait=function(t,e){null!==e&&this.detachGaugeTrait(e),null!==t&&(this.attachGaugeTrait(t),this.initGaugeTrait(t))},e.prototype.didSetGaugeTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGaugeTrait&&r.controllerDidSetGaugeTrait(t,e,this)}},e.prototype.createGaugeView=function(){return Nl.create()},e.prototype.initGaugeView=function(t){},e.prototype.attachGaugeView=function(t){this.title.setView(t.title.view);var e=this.gauge.trait;null!==e&&this.setTitleView(e.title.state,e);for(var i=this.dialFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;if(null!==r){var s=r.dial.view;null!==s&&null===s.parentView&&r.dial.injectView(t)}}},e.prototype.detachGaugeView=function(t){this.title.setView(null)},e.prototype.willSetGaugeView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGaugeView&&r.controllerWillSetGaugeView(t,e,this)}},e.prototype.onSetGaugeView=function(t,e){null!==e&&this.detachGaugeView(e),null!==t&&(this.attachGaugeView(t),this.initGaugeView(t))},e.prototype.didSetGaugeView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGaugeView&&r.controllerDidSetGaugeView(t,e,this)}},e.prototype.createTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setTitleView=function(t,e){var i=this.gauge.view;if(null!==i){var o=null!==t?this.createTitleView(t,e):null;i.title.setView(o)}},e.prototype.initTitleView=function(t){},e.prototype.attachTitleView=function(t){},e.prototype.detachTitleView=function(t){},e.prototype.willSetTitleView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGaugeTitleView&&r.controllerWillSetGaugeTitleView(t,e,this)}},e.prototype.onSetTitleView=function(t,e){null!==e&&this.detachTitleView(e),null!==t&&(this.attachTitleView(t),this.initTitleView(t))},e.prototype.didSetTitleView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGaugeTitleView&&r.controllerDidSetGaugeTitleView(t,e,this)}},e.prototype.insertDial=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createDialFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeDial=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDial=function(t){return new El},e.prototype.initDial=function(t,e){var i=t.dial.trait;null!==i&&this.initDialTrait(i,e);var o=t.dial.view;null!==o&&this.initDialView(o,e)},e.prototype.attachDial=function(t,e){var i=t.dial.trait;null!==i&&this.attachDialTrait(i,e);var o=t.dial.view;null!==o&&this.attachDialView(o,e)},e.prototype.detachDial=function(t,e){var i=t.dial.trait;null!==i&&this.detachDialTrait(i,e);var o=t.dial.view;null!==o&&this.detachDialView(o,e)},e.prototype.willSetDial=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDial&&s.controllerWillSetDial(t,e,i)}},e.prototype.onSetDial=function(t,e,i){null!==e&&this.detachDial(e,i),null!==t&&(this.attachDial(t,i),this.initDial(t,i))},e.prototype.didSetDial=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDial&&s.controllerDidSetDial(t,e,i)}},e.prototype.insertDialTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dialFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.dial.trait===t)return;s.dial.trait===e&&(o=s)}}var l=this.createDial(t);if(null!==l&&(l.dial.setTrait(t),this.insertChildController(l,o),null===l.dial.view)){var a=this.createDialView(l),h=null;null!==o&&(h=o.dial.view);var u=this.gauge.view;null!==u?l.dial.injectView(u,a,h,null):l.dial.setView(a,h)}},e.prototype.removeDialTrait=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.dial.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDialTrait=function(t,e){},e.prototype.attachDialTrait=function(t,e){},e.prototype.detachDialTrait=function(t,e){},e.prototype.willSetDialTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialTrait&&s.controllerWillSetDialTrait(t,e,i)}},e.prototype.onSetDialTrait=function(t,e,i){null!==e&&this.detachDialTrait(e,i),null!==t&&(this.attachDialTrait(t,i),this.initDialTrait(t,i))},e.prototype.didSetDialTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialTrait&&s.controllerDidSetDialTrait(t,e,i)}},e.prototype.createDialView=function(t){return t.dial.createView()},e.prototype.initDialView=function(t,e){var i=t.label.view;null!==i&&this.initDialLabelView(i,e);var o=t.legend.view;null!==o&&this.initDialLegendView(o,e)},e.prototype.attachDialView=function(t,e){var i=t.label.view;null!==i&&this.attachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.attachDialLegendView(o,e)},e.prototype.detachDialView=function(t,e){var i=t.label.view;null!==i&&this.detachDialLabelView(i,e);var o=t.legend.view;null!==o&&this.detachDialLegendView(o,e),t.remove()},e.prototype.willSetDialView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialView&&s.controllerWillSetDialView(t,e,i)}},e.prototype.onSetDialView=function(t,e,i){null!==e&&this.detachDialView(e,i),null!==t&&(this.attachDialView(t,i),this.initDialView(t,i))},e.prototype.didSetDialView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialView&&s.controllerDidSetDialView(t,e,i)}},e.prototype.willSetDialValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialValue&&s.controllerWillSetDialValue(t,e,i)}},e.prototype.onSetDialValue=function(t,e,i){},e.prototype.didSetDialValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialValue&&s.controllerDidSetDialValue(t,e,i)}},e.prototype.willSetDialLimit=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialLimit&&s.controllerWillSetDialLimit(t,e,i)}},e.prototype.onSetDialLimit=function(t,e,i){},e.prototype.didSetDialLimit=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialLimit&&s.controllerDidSetDialLimit(t,e,i)}},e.prototype.initDialLabelView=function(t,e){},e.prototype.attachDialLabelView=function(t,e){},e.prototype.detachDialLabelView=function(t,e){},e.prototype.willSetDialLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialLabelView&&s.controllerWillSetDialLabelView(t,e,i)}},e.prototype.onSetDialLabelView=function(t,e,i){null!==e&&this.detachDialLabelView(e,i),null!==t&&(this.attachDialLabelView(t,i),this.initDialLabelView(t,i))},e.prototype.didSetDialLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialLabelView&&s.controllerDidSetDialLabelView(t,e,i)}},e.prototype.initDialLegendView=function(t,e){},e.prototype.attachDialLegendView=function(t,e){},e.prototype.detachDialLegendView=function(t,e){},e.prototype.willSetDialLegendView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDialLegendView&&s.controllerWillSetDialLegendView(t,e,i)}},e.prototype.onSetDialLegendView=function(t,e,i){null!==e&&this.detachDialLegendView(e,i),null!==t&&(this.attachDialLegendView(t,i),this.initDialLegendView(t,i))},e.prototype.didSetDialLegendView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDialLegendView&&s.controllerDidSetDialLegendView(t,e,i)}},e.prototype.createDialFastener=function(t){return new e.DialFastener(this,t.key,"dial")},e.prototype.getDialastener=function(t){for(var e=this.dialFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.dial.trait===t)return n}return null},e.prototype.mountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDialFasteners=function(){for(var t=this.dialFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDialController=function(t){return t instanceof El?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectDialController(e);null!==o&&this.insertDial(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectDialController(e);null!==i&&this.removeDial(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountDialFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountDialFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.GaugeFastener=Vs.define({viewType:Nl,observeView:!0,willSetView:function(t,e){this.owner.willSetGaugeView(t,e)},onSetView:function(t,e){this.owner.onSetGaugeView(t,e)},didSetView:function(t,e){this.owner.didSetGaugeView(t,e)},viewDidSetGaugeTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createGaugeView()},traitType:Ul,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGaugeTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGaugeTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGaugeTrait(t,e)},traitDidSetGaugeTitle:function(t,e,i){this.owner.setTitleView(t,i)},traitWillSetDial:function(t,e,i){null!==e&&this.owner.removeDialTrait(e)},traitDidSetDial:function(t,e,i){null!==t&&this.owner.insertDialTrait(t,i)}}),e.DialFastener=Fs.define({type:El,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetDial(t,e,this)},onSetController:function(t,e){this.owner.onSetDial(t,e,this)},didSetController:function(t,e){this.owner.didSetDial(t,e,this)},controllerWillSetDialTrait:function(t,e){this.owner.willSetDialTrait(t,e,this)},controllerDidSetDialTrait:function(t,e){this.owner.onSetDialTrait(t,e,this),this.owner.didSetDialTrait(t,e,this)},controllerWillSetDialView:function(t,e){this.owner.willSetDialView(t,e,this)},controllerDidSetDialView:function(t,e){this.owner.onSetDialView(t,e,this),this.owner.didSetDialView(t,e,this)},controllerWillSetDialValue:function(t,e){this.owner.willSetDialValue(t,e,this)},controllerDidSetDialValue:function(t,e){this.owner.onSetDialValue(t,e,this),this.owner.didSetDialValue(t,e,this)},controllerWillSetDialLimit:function(t,e){this.owner.willSetDialLimit(t,e,this)},controllerDidSetDialLimit:function(t,e){this.owner.onSetDialLimit(t,e,this),this.owner.didSetDialLimit(t,e,this)},controllerWillSetDialLabelView:function(t,e){this.owner.willSetDialLabelView(t,e,this)},controllerDidSetDialLabelView:function(t,e){this.owner.onSetDialLabelView(t,e,this),this.owner.didSetDialLabelView(t,e,this)},controllerWillSetDialLegendView:function(t,e){this.owner.willSetDialLegendView(t,e,this)},controllerDidSetDialLegendView:function(t,e){this.owner.onSetDialLegendView(t,e,this),this.owner.didSetDialLegendView(t,e,this)}}),m([Vs({extends:e.GaugeFastener})],e.prototype,"gauge",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetTitleView(t,e)},onSetView:function(t,e){this.owner.onSetTitleView(t,e)},didSetView:function(t,e){this.owner.didSetTitleView(t,e)}})],e.prototype,"title",void 0),m([ds({type:l.Timing,state:!0})],e.prototype,"dialTiming",void 0),e}(Ds),Bl=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.value&&this.value(e.value),void 0!==e.total&&this.total(e.total),void 0!==e.center&&this.center(e.center),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.phaseAngle&&this.phaseAngle(e.phaseAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label),void 0!==e.legend&&this.legend(e.legend)},i.prototype.willSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetSliceValue&&r.viewWillSetSliceValue(t,e,this)}},i.prototype.onSetValue=function(t,e){},i.prototype.didSetValue=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceValue&&r.viewDidSetSliceValue(t,e,this)}},i.prototype.initLabel=function(t){},i.prototype.attachLabel=function(t){},i.prototype.detachLabel=function(t){},i.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetSliceLabel&&r.viewWillSetSliceLabel(t,e,this)}},i.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},i.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceLabel&&r.viewDidSetSliceLabel(t,e,this)}},i.prototype.initLegend=function(t){},i.prototype.attachLegend=function(t){},i.prototype.detachLegend=function(t){},i.prototype.willSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetSliceLegend&&r.viewWillSetSliceLegend(t,e,this)}},i.prototype.onSetLegend=function(t,e){null!==e&&this.detachLegend(e),null!==t&&(this.attachLegend(t),this.initLegend(t))},i.prototype.didSetLegend=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetSliceLegend&&r.viewDidSetSliceLegend(t,e,this)}},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.center.onAnimate(e.updateTime)},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderSlice(o,this.viewFrame),o.restore()}},i.prototype.renderSlice=function(t,i){var o=i.width,n=i.height,s=Math.min(o,n),l=this.value.getValue(),a=this.total.getValue(),h=0!==a?l/a:0,u=this.center.getValue(),p=this.innerRadius.getValue().px(s),d=this.outerRadius.getValue().px(s),c=d.value-p.value,f=this.phaseAngle.getValue().rad(),v=r.Angle.rad(2*Math.PI*h),y=this.padAngle.getValue(),g=this.padRadius.getValueOr(null),w=this.cornerRadius.getValue().px(c),m=new Lr(u,p,d,f,v,y,g,w),S=this.sliceColor.value;null!==S&&(t.beginPath(),t.fillStyle=S.toString(),m.draw(t,i),t.fill());var C=this.label.view;if(null!==C&&!C.isHidden()){var b=this.labelRadius.getValue().pxValue(c),V=f.value+v.value/2,T=p.value+b,F=T*Math.cos(V),P=T*Math.sin(V);Or.is(C)&&(C.textAlign.setState("center",ro.Intrinsic),C.textBaseline.setState("middle",ro.Intrinsic),C.textOrigin.setState(new r.R2Point(u.x+F,u.y+P),ro.Intrinsic))}var M=this.legend.view;if(null!==M&&!M.isHidden()){var D=this.tickAlign.getValue(),x=f.value+v.value*D,L=this.tickRadius.getValue().pxValue(s),A=this.tickLength.getValue().pxValue(o),O=this.tickWidth.getValue().pxValue(s),R=this.tickColor.value,I=u.x,k=u.y,W=d.value*Math.cos(x+e.Equivalent.Epsilon),E=d.value*Math.sin(x+e.Equivalent.Epsilon),N=L*Math.cos(x+e.Equivalent.Epsilon),U=L*Math.sin(x+e.Equivalent.Epsilon),G=0;null!==R&&0!==O&&(t.beginPath(),t.strokeStyle=R.toString(),t.lineWidth=O,t.moveTo(I+W,k+E),t.lineTo(I+N,k+U),0!==A&&(N>=0?(t.lineTo(I+A,k+U),G=A-N):N<0&&(t.lineTo(I-A,k+U),G=A+N)),t.stroke());var B=void 0;if(N>=0?B="end":(G=-G,B="start"),Or.is(M)){var j=this.tickPadding.getValue().pxValue(s);Pr.is(M)&&M.fill.setState(R,ro.Intrinsic),M.textAlign.setState(B,ro.Intrinsic),M.textBaseline.setState("alphabetic",ro.Intrinsic),M.textOrigin.setState(new r.R2Point(I+N+G,k+U-j),ro.Intrinsic)}}},i.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestSlice(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},i.prototype.hitTestSlice=function(t,e,i,o){var n=Math.min(o.width,o.height),s=this.value.getValue(),l=this.total.getValue(),a=0!==l?s/l:0,h=this.center.getValue(),u=this.innerRadius.getValue().px(n),p=this.outerRadius.getValue().px(n),d=p.value-u.value,c=this.phaseAngle.getValue().rad(),f=r.Angle.rad(2*Math.PI*a),v=this.padAngle.getValue(),y=this.padRadius.getValueOr(null),g=this.cornerRadius.getValue().px(d),w=new Lr(h,u,p,c,f,v,y,g);return i.beginPath(),w.draw(i,o),i.isPointInPath(t,e)?this:null},i.create=function(){return new i},i.fromInit=function(t){var e=new i;return e.initView(t),e},i.fromAny=function(t){if(t instanceof i)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:Number,state:0,willSetValue:function(t,e){this.owner.willSetValue(t,e)},didSetValue:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],i.prototype,"value",void 0),m([Oo({type:Number,state:1})],i.prototype,"total",void 0),m([Oo({type:r.R2Point,inherit:!0,state:r.R2Point.origin()})],i.prototype,"center",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(3)})],i.prototype,"innerRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(25)})],i.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,state:r.Angle.zero()})],i.prototype,"phaseAngle",void 0),m([Oo({type:r.Angle,inherit:!0,state:r.Angle.deg(2)})],i.prototype,"padAngle",void 0),m([Oo({type:r.Length,inherit:!0,state:null})],i.prototype,"padRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.zero()})],i.prototype,"cornerRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"labelRadius",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.accentColor})],i.prototype,"sliceColor",void 0),m([Oo({type:Number,inherit:!0,state:.5})],i.prototype,"tickAlign",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(30)})],i.prototype,"tickRadius",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.pct(50)})],i.prototype,"tickLength",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.px(1)})],i.prototype,"tickWidth",void 0),m([Oo({type:r.Length,inherit:!0,state:r.Length.px(2)})],i.prototype,"tickPadding",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.neutralColor})],i.prototype,"tickColor",void 0),m([Oo({type:St,inherit:!0,state:null})],i.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0,state:null,look:se.mutedColor})],i.prototype,"textColor",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],i.prototype,"label",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLegend(t,e)},onSetView:function(t,e){this.owner.onSetLegend(t,e)},didSetView:function(t,e){this.owner.didSetLegend(t,e)}})],i.prototype,"legend",void 0),i}(vr),jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceValue&&r.traitWillSetSliceValue(t,e,this)}},e.prototype.onSetValue=function(t,e){},e.prototype.didSetValue=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceValue&&r.traitDidSetSliceValue(t,e,this)}},e.prototype.willSetSliceColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceColor&&r.traitWillSetSliceColor(t,e,this)}},e.prototype.onSetSliceColor=function(t,e){},e.prototype.didSetSliceColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceColor&&r.traitDidSetSliceColor(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceLabel&&r.traitWillSetSliceLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceLabel&&r.traitDidSetSliceLabel(t,e,this)}},e.prototype.formatLabel=function(t){},e.prototype.willSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetSliceLegend&&r.traitWillSetSliceLegend(t,e,this)}},e.prototype.onSetLegend=function(t,e){},e.prototype.didSetLegend=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetSliceLegend&&r.traitDidSetSliceLegend(t,e,this)}},e.prototype.formatLegend=function(t){},m([N({type:Number,state:0,willSetState:function(t,e){this.owner.willSetValue(t,e)},didSetState:function(t,e){this.owner.onSetValue(t,e),this.owner.didSetValue(t,e)}})],e.prototype,"value",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetSliceColor(t,e)},didSetState:function(t,e){this.owner.onSetSliceColor(t,e),this.owner.didSetSliceColor(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"sliceColor",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLegend(t,e)},didSetState:function(t,e){this.owner.onSetLegend(t,e),this.owner.didSetLegend(t,e)}})],e.prototype,"legend",void 0),e}(ht),Hl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initSliceTrait=function(t){},e.prototype.attachSliceTrait=function(t){if(null!==this.slice.view){this.setValue(t.value.state);var e=t.sliceColor.state;null!==e&&this.setSliceColor(e),this.setLabelView(t.label.state),this.setLegendView(t.legend.state)}},e.prototype.detachSliceTrait=function(t){},e.prototype.willSetSliceTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetSliceTrait&&r.controllerWillSetSliceTrait(t,e,this)}},e.prototype.onSetSliceTrait=function(t,e){null!==e&&this.detachSliceTrait(e),null!==t&&(this.attachSliceTrait(t),this.initSliceTrait(t))},e.prototype.didSetSliceTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetSliceTrait&&r.controllerDidSetSliceTrait(t,e,this)}},e.prototype.updateLabel=function(t,e){if(e.label.takesPrecedence(f.Intrinsic)){var i=e.formatLabel(t);void 0!==i&&e.label.setState(i,f.Intrinsic)}},e.prototype.updateLegend=function(t,e){if(e.legend.takesPrecedence(f.Intrinsic)){var i=e.formatLegend(t);void 0!==i&&e.legend.setState(i,f.Intrinsic)}},e.prototype.createSliceView=function(){return Bl.create()},e.prototype.initSliceView=function(t){var e=t.value.value;t.setHidden(0===e);var i=this.slice.trait;null!==i&&(this.updateLabel(e,i),this.updateLegend(e,i),this.setValue(i.value.state),this.setLabelView(i.label.state),this.setLegendView(i.legend.state))},e.prototype.attachSliceView=function(t){var e=this.slice.trait;if(null!==e){var i=e.sliceColor.state;null!==i&&this.setSliceColor(i)}this.label.setView(t.label.view),this.legend.setView(t.legend.view)},e.prototype.detachSliceView=function(t){this.label.setView(null),this.legend.setView(null)},e.prototype.willSetSliceView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetSliceView&&r.controllerWillSetSliceView(t,e,this)}},e.prototype.onSetSliceView=function(t,e){null!==e&&this.detachSliceView(e),null!==t&&(this.attachSliceView(t),this.initSliceView(t))},e.prototype.didSetSliceView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetSliceView&&r.controllerDidSetSliceView(t,e,this)}},e.prototype.setValue=function(t,e){var i=this.slice.view;null!==i&&i.value.takesPrecedence(ro.Intrinsic)&&(void 0===e||!0===e?!0===(e=this.sliceTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),i.value.setState(t,e,ro.Intrinsic))},e.prototype.willSetValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceValue&&s.controllerWillSetSliceValue(t,e,this)}},e.prototype.onSetValue=function(t,e,i){i.setHidden(0===t);var o=this.slice.trait;null!==o&&(this.updateLabel(t,o),this.updateLegend(t,o))},e.prototype.didSetValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceValue&&s.controllerDidSetSliceValue(t,e,this)}},e.prototype.setSliceColor=function(t,e){var i=this.slice.view;null!==i&&(void 0===e||!0===e?!0===(e=this.sliceTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.sliceColor.setLook(t,e,ro.Intrinsic):i.sliceColor.setState(t,e,ro.Intrinsic))},e.prototype.createLabelView=function(t){return"function"==typeof t?t(this.slice.trait):t},e.prototype.setLabelView=function(t){var e=this.slice.view;if(null!==e){var i=null!==t?this.createLabelView(t):null;e.label.setView(i)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetSliceLabelView&&r.controllerWillSetSliceLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetSliceLabelView&&r.controllerDidSetSliceLabelView(t,e,this)}},e.prototype.createLegendView=function(t){return"function"==typeof t?t(this.slice.trait):t},e.prototype.setLegendView=function(t){var e=this.slice.view;if(null!==e){var i=null!==t?this.createLegendView(t):null;e.legend.setView(i)}},e.prototype.initLegendView=function(t){},e.prototype.attachLegendView=function(t){},e.prototype.detachLegendView=function(t){},e.prototype.willSetLegendView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetSliceLegendView&&r.controllerWillSetSliceLegendView(t,e,this)}},e.prototype.onSetLegendView=function(t,e){null!==e&&this.detachLegendView(e),null!==t&&(this.attachLegendView(t),this.initLegendView(t))},e.prototype.didSetLegendView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetSliceLegendView&&r.controllerDidSetSliceLegendView(t,e,this)}},e.SliceFastener=Vs.define({viewType:Bl,observeView:!0,willSetView:function(t,e){this.owner.willSetSliceView(t,e)},onSetView:function(t,e){this.owner.onSetSliceView(t,e)},didSetView:function(t,e){this.owner.didSetSliceView(t,e)},viewWillSetSliceValue:function(t,e,i){this.owner.willSetValue(t,e,i)},viewDidSetSliceValue:function(t,e,i){this.owner.onSetValue(t,e,i),this.owner.didSetValue(t,e,i)},viewDidSetSliceLabel:function(t,e){this.owner.label.setView(t)},viewDidSetSliceLegend:function(t,e){this.owner.legend.setView(t)},createView:function(){return this.owner.createSliceView()},traitType:jl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetSliceTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetSliceTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetSliceTrait(t,e)},traitDidSetSliceValue:function(t,e){this.owner.setValue(t)},traitDidSetSliceColor:function(t,e){this.owner.setSliceColor(t)},traitDidSetSliceLabel:function(t,e){this.owner.setLabelView(t)},traitDidSetSliceLegend:function(t,e){this.owner.setLegendView(t)}}),m([ds({type:l.Timing,inherit:!0})],e.prototype,"sliceTiming",void 0),m([Vs({extends:e.SliceFastener})],e.prototype,"slice",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetLegendView(t,e)},onSetView:function(t,e){this.owner.onSetLegendView(t,e)},didSetView:function(t,e){this.owner.didSetLegendView(t,e)}})],e.prototype,"legend",void 0),e}(Ds),ql=function(t){function e(){var e=t.call(this)||this;return e.sliceFasteners=[],e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.limit&&this.limit(e.limit),void 0!==e.center&&this.center(e.center),void 0!==e.baseAngle&&this.baseAngle(e.baseAngle),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.labelRadius&&this.labelRadius(e.labelRadius),void 0!==e.sliceColor&&this.sliceColor(e.sliceColor),void 0!==e.tickAlign&&this.tickAlign(e.tickAlign),void 0!==e.tickRadius&&this.tickRadius(e.tickRadius),void 0!==e.tickLength&&this.tickLength(e.tickLength),void 0!==e.tickWidth&&this.tickWidth(e.tickWidth),void 0!==e.tickPadding&&this.tickPadding(e.tickPadding),void 0!==e.tickColor&&this.tickColor(e.tickColor),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.title&&this.title(e.title);var i=e.slices;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1){var r=i[o];this.appendChildView(Bl.fromAny(r),r.key)}},e.prototype.initTitle=function(t){Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),t.textBaseline.setState("middle",ro.Intrinsic),t.textOrigin.setState(this.center.state,ro.Intrinsic))},e.prototype.attachTitle=function(t){},e.prototype.detachTitle=function(t){},e.prototype.willSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPieTitle&&r.viewWillSetPieTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){null!==e&&this.detachTitle(e),null!==t&&(this.attachTitle(t),this.initTitle(t))},e.prototype.didSetTitle=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPieTitle&&r.viewDidSetPieTitle(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null),t=Bl.fromAny(t);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createSliceFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initSlice=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabel(i,e);var o=t.legend.view;null!==o&&this.initSliceLegend(o,e)},e.prototype.attachSlice=function(t,e){},e.prototype.detachSlice=function(t,e){},e.prototype.willSetSlice=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetSlice&&l.viewWillSetSlice(t,e,i,this)}},e.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},e.prototype.didSetSlice=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetSlice&&l.viewDidSetSlice(t,e,i,this)}},e.prototype.onSetSliceValue=function(t,e,i){this.requireUpdate(ro.NeedsLayout)},e.prototype.initSliceLabel=function(t,e){},e.prototype.onSetSliceLabel=function(t,e,i){null!==t&&this.initSliceLabel(t,i)},e.prototype.initSliceLegend=function(t,e){},e.prototype.onSetSliceLegend=function(t,e,i){null!==t&&this.initSliceLegend(t,i)},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSlice=function(t){return t instanceof Bl?t:null},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectSlice(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectSlice(e);null!==i&&this.removeSlice(i)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutPie(this.viewFrame)},e.prototype.layoutPie=function(t){if(this.center.takesPrecedence(ro.Intrinsic)){var e=(t.xMin+t.xMax)/2,i=(t.yMin+t.yMax)/2;this.center.setState(new r.R2Point(e,i),ro.Intrinsic)}for(var o=this.sliceFasteners,n=o.length,s=0,l=0;l<n;l+=1){if(null!==(u=o[l].view)){var a=u.value.getValue();isFinite(a)&&(s+=a)}}s=Math.max(s,this.limit.getValue());var h=this.baseAngle.getValue().rad();for(l=0;l<n;l+=1){var u;if(null!==(u=o[l].view)){u.total.setState(s,ro.Intrinsic),u.phaseAngle.setState(h,ro.Intrinsic);a=u.value.getValue();if(isFinite(a)){var p=0!==s?a/s:0;h=r.Angle.rad(h.value+2*Math.PI*p)}}}var d=this.title.view;Or.is(d)&&d.textOrigin.setState(this.center.value,ro.Intrinsic)},e.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountViewFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountViewFasteners.call(this)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.SliceFastener=Zo.define({type:Bl,child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetSlice(t,e,i,this)},viewDidSetSliceValue:function(t,e){this.owner.onSetSliceValue(t,e,this)},viewDidSetSliceLabel:function(t,e){this.owner.onSetSliceLabel(t,e,this)},viewDidSetSliceLegend:function(t,e){this.owner.onSetSliceLegend(t,e,this)}}),m([Oo({type:Number,state:0,updateFlags:ro.NeedsLayout})],e.prototype,"limit",void 0),m([Oo({type:r.R2Point,state:r.R2Point.origin(),updateFlags:ro.NeedsLayout})],e.prototype,"center",void 0),m([Oo({type:r.Angle,state:r.Angle.rad(-Math.PI/2),updateFlags:ro.NeedsLayout})],e.prototype,"baseAngle",void 0),m([Oo({type:r.Length,state:r.Length.pct(3)})],e.prototype,"innerRadius",void 0),m([Oo({type:r.Length,state:r.Length.pct(25)})],e.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,state:r.Angle.deg(2)})],e.prototype,"padAngle",void 0),m([Oo({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([Oo({type:r.Length,state:r.Length.pct(50)})],e.prototype,"labelRadius",void 0),m([Oo({type:Tt,state:null,look:se.accentColor})],e.prototype,"sliceColor",void 0),m([Oo({type:Number,state:.5})],e.prototype,"tickAlign",void 0),m([Oo({type:r.Length,state:r.Length.pct(30)})],e.prototype,"tickRadius",void 0),m([Oo({type:r.Length,state:r.Length.pct(50)})],e.prototype,"tickLength",void 0),m([Oo({type:r.Length,state:r.Length.px(1)})],e.prototype,"tickWidth",void 0),m([Oo({type:r.Length,state:r.Length.px(2)})],e.prototype,"tickPadding",void 0),m([Oo({type:Tt,state:null,look:se.neutralColor})],e.prototype,"tickColor",void 0),m([Oo({type:St,state:null,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,state:null,look:se.mutedColor})],e.prototype,"textColor",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetTitle(t,e)},onSetView:function(t,e){this.owner.onSetTitle(t,e)},didSetView:function(t,e){this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(vr),zl=function(t){function e(){var e=t.call(this)||this;return e.sliceFasteners=[],e}return w(e,t),e.prototype.willSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPieTitle&&r.traitWillSetPieTitle(t,e,this)}},e.prototype.onSetTitle=function(t,e){},e.prototype.didSetTitle=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPieTitle&&r.traitDidSetPieTitle(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createSliceFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initSlice=function(t,e){},e.prototype.attachSlice=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachSlice=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetSlice&&l.traitWillSetSlice(t,e,i,this)}},e.prototype.onSetSlice=function(t,e,i,o){null!==e&&this.detachSlice(e,o),null!==t&&(this.attachSlice(t,o),this.initSlice(t,o))},e.prototype.didSetSlice=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetSlice&&l.traitDidSetSlice(t,e,i,this)}},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingSlices=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectSliceModel=function(t){return t.getTrait(jl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectSliceModel(n);null!==r&&this.insertSlice(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectSliceModel(e);if(null!==o){var n=null!==i?this.detectSliceModel(i):null;this.insertSlice(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectSliceModel(e);null!==i&&this.removeSlice(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingSlices()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingSlices()},e.SliceFastener=_.define({type:jl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetSlice(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetSlice(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetSlice(t,e,i,this)}}),m([N({state:null,willSetState:function(t,e){this.owner.willSetTitle(t,e)},didSetState:function(t,e){this.owner.onSetTitle(t,e),this.owner.didSetTitle(t,e)}})],e.prototype,"title",void 0),e}(ht),Yl=function(t){function e(){var e=t.call(this)||this;return e.sliceFasteners=[],e}return w(e,t),e.prototype.initPieTrait=function(t){},e.prototype.attachPieTrait=function(t){null!==this.pie.view&&this.setTitleView(t.title.state,t);for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertSliceTrait(n)}},e.prototype.detachPieTrait=function(t){for(var e=t.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeSliceTrait(n)}null!==this.pie.view&&this.setTitleView(null,t)},e.prototype.willSetPieTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPieTrait&&r.controllerWillSetPieTrait(t,e,this)}},e.prototype.onSetPieTrait=function(t,e){null!==e&&this.detachPieTrait(e),null!==t&&(this.attachPieTrait(t),this.initPieTrait(t))},e.prototype.didSetPieTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPieTrait&&r.controllerDidSetPieTrait(t,e,this)}},e.prototype.createPieView=function(){return ql.create()},e.prototype.initPieView=function(t){},e.prototype.attachPieView=function(t){this.title.setView(t.title.view);var e=this.pie.trait;null!==e&&this.setTitleView(e.title.state,e);for(var i=this.sliceFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;if(null!==r){var s=r.slice.view;null!==s&&null===s.parentView&&r.slice.injectView(t)}}},e.prototype.detachPieView=function(t){this.title.setView(null)},e.prototype.willSetPieView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPieView&&r.controllerWillSetPieView(t,e,this)}},e.prototype.onSetPieView=function(t,e){null!==e&&this.detachPieView(e),null!==t&&(this.attachPieView(t),this.initPieView(t))},e.prototype.didSetPieView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPieView&&r.controllerDidSetPieView(t,e,this)}},e.prototype.createTitleView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setTitleView=function(t,e){var i=this.pie.view;if(null!==i){var o=null!==t?this.createTitleView(t,e):null;i.title.setView(o)}},e.prototype.initTitleView=function(t){},e.prototype.attachTitleView=function(t){},e.prototype.detachTitleView=function(t){},e.prototype.willSetTitleView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPieTitleView&&r.controllerWillSetPieTitleView(t,e,this)}},e.prototype.onSetTitleView=function(t,e){null!==e&&this.detachTitleView(e),null!==t&&(this.attachTitleView(t),this.initTitleView(t))},e.prototype.didSetTitleView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPieTitleView&&r.controllerDidSetPieTitleView(t,e,this)}},e.prototype.insertSlice=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createSliceFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeSlice=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createSlice=function(t){return new Hl},e.prototype.initSlice=function(t,e){var i=t.slice.trait;null!==i&&this.initSliceTrait(i,e);var o=t.slice.view;null!==o&&this.initSliceView(o,e)},e.prototype.attachSlice=function(t,e){var i=t.slice.trait;null!==i&&this.attachSliceTrait(i,e);var o=t.slice.view;null!==o&&this.attachSliceView(o,e)},e.prototype.detachSlice=function(t,e){var i=t.slice.view;null!==i&&this.detachSliceView(i,e);var o=t.slice.trait;null!==o&&this.detachSliceTrait(o,e)},e.prototype.willSetSlice=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSlice&&s.controllerWillSetSlice(t,e,i)}},e.prototype.onSetSlice=function(t,e,i){null!==e&&this.detachSlice(e,i),null!==t&&(this.attachSlice(t,i),this.initSlice(t,i))},e.prototype.didSetSlice=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSlice&&s.controllerDidSetSlice(t,e,i)}},e.prototype.insertSliceTrait=function(t,e){void 0===e&&(e=null);for(var i=this.sliceFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.slice.trait===t)return;s.slice.trait===e&&(o=s)}}var l=this.createSlice(t);if(null!==l&&(l.slice.setTrait(t),this.insertChildController(l,o),null===l.slice.view)){var a=this.createSliceView(l),h=null;null!==o&&(h=o.slice.view);var u=this.pie.view;null!==u?l.slice.injectView(u,a,h,null):l.slice.setView(a,h)}},e.prototype.removeSliceTrait=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.slice.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initSliceTrait=function(t,e){},e.prototype.attachSliceTrait=function(t,e){},e.prototype.detachSliceTrait=function(t,e){},e.prototype.willSetSliceTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceTrait&&s.controllerWillSetSliceTrait(t,e,i)}},e.prototype.onSetSliceTrait=function(t,e,i){null!==e&&this.detachSliceTrait(e,i),null!==t&&(this.attachSliceTrait(t,i),this.initSliceTrait(t,i))},e.prototype.didSetSliceTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceTrait&&s.controllerDidSetSliceTrait(t,e,i)}},e.prototype.createSliceView=function(t){return t.slice.createView()},e.prototype.initSliceView=function(t,e){var i=t.label.view;null!==i&&this.initSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.initSliceLegendView(o,e)},e.prototype.attachSliceView=function(t,e){var i=t.label.view;null!==i&&this.attachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.attachSliceLegendView(o,e)},e.prototype.detachSliceView=function(t,e){var i=t.label.view;null!==i&&this.detachSliceLabelView(i,e);var o=t.legend.view;null!==o&&this.detachSliceLegendView(o,e),t.remove()},e.prototype.willSetSliceView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceView&&s.controllerWillSetSliceView(t,e,i)}},e.prototype.onSetSliceView=function(t,e,i){null!==e&&this.detachSliceView(e,i),null!==t&&(this.attachSliceView(t,i),this.initSliceView(t,i))},e.prototype.didSetSliceView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceView&&s.controllerDidSetSliceView(t,e,i)}},e.prototype.willSetSliceValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceValue&&s.controllerWillSetSliceValue(t,e,i)}},e.prototype.onSetSliceValue=function(t,e,i){if(0===t){var o=i.controller;if(null!==o){var n=o.slice.trait;null!==n&&this.removeSliceTrait(n)}}},e.prototype.didSetSliceValue=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceValue&&s.controllerDidSetSliceValue(t,e,i)}},e.prototype.initSliceLabelView=function(t,e){},e.prototype.attachSliceLabelView=function(t,e){},e.prototype.detachSliceLabelView=function(t,e){},e.prototype.willSetSliceLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceLabelView&&s.controllerWillSetSliceLabelView(t,e,i)}},e.prototype.onSetSliceLabelView=function(t,e,i){null!==e&&this.detachSliceLabelView(e,i),null!==t&&(this.attachSliceLabelView(t,i),this.initSliceLabelView(t,i))},e.prototype.didSetSliceLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceLabelView&&s.controllerDidSetSliceLabelView(t,e,i)}},e.prototype.initSliceLegendView=function(t,e){},e.prototype.attachSliceLegendView=function(t,e){},e.prototype.detachSliceLegendView=function(t,e){},e.prototype.willSetSliceLegendView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetSliceLegendView&&s.controllerWillSetSliceLegendView(t,e,i)}},e.prototype.onSetSliceLegendView=function(t,e,i){null!==e&&this.detachSliceLegendView(e,i),null!==t&&(this.attachSliceLegendView(t,i),this.initSliceLegendView(t,i))},e.prototype.didSetSliceLegendView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetSliceLegendView&&s.controllerDidSetSliceLegendView(t,e,i)}},e.prototype.createSliceFastener=function(t){return new e.SliceFastener(this,t.key,"slice")},e.prototype.getSliceFastener=function(t){for(var e=this.sliceFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.slice.trait===t)return n}return null},e.prototype.mountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountSliceFasteners=function(){for(var t=this.sliceFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectSliceController=function(t){return t instanceof Hl?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectSliceController(e);null!==o&&this.insertSlice(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectSliceController(e);null!==i&&this.removeSlice(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountSliceFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountSliceFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.PieFastener=Vs.define({viewType:ql,observeView:!0,willSetView:function(t,e){this.owner.willSetPieView(t,e)},onSetView:function(t,e){this.owner.onSetPieView(t,e)},didSetView:function(t,e){this.owner.didSetPieView(t,e)},viewDidSetPieTitle:function(t,e){this.owner.title.setView(t)},createView:function(){return this.owner.createPieView()},traitType:zl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPieTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPieTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPieTrait(t,e)},traitDidSetPieTitle:function(t,e,i){this.owner.setTitleView(t,i)},traitWillSetSlice:function(t,e,i){null!==e&&this.owner.removeSliceTrait(e)},traitDidSetSlice:function(t,e,i){null!==t&&this.owner.insertSliceTrait(t,i)}}),e.SliceFastener=Fs.define({type:Hl,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetSlice(t,e,this)},onSetController:function(t,e){this.owner.onSetSlice(t,e,this)},didSetController:function(t,e){this.owner.didSetSlice(t,e,this)},controllerWillSetSliceTrait:function(t,e){this.owner.willSetSliceTrait(t,e,this)},controllerDidSetSliceTrait:function(t,e){this.owner.onSetSliceTrait(t,e,this),this.owner.didSetSliceTrait(t,e,this)},controllerWillSetSliceView:function(t,e){this.owner.willSetSliceView(t,e,this)},controllerDidSetSliceView:function(t,e){this.owner.onSetSliceView(t,e,this),this.owner.didSetSliceView(t,e,this)},controllerWillSetSliceValue:function(t,e){this.owner.willSetSliceValue(t,e,this)},controllerDidSetSliceValue:function(t,e){this.owner.onSetSliceValue(t,e,this),this.owner.didSetSliceValue(t,e,this)},controllerWillSetSliceLabelView:function(t,e){this.owner.willSetSliceLabelView(t,e,this)},controllerDidSetSliceLabelView:function(t,e){this.owner.onSetSliceLabelView(t,e,this),this.owner.didSetSliceLabelView(t,e,this)},controllerWillSetSliceLegendView:function(t,e){this.owner.willSetSliceLegendView(t,e,this)},controllerDidSetSliceLegendView:function(t,e){this.owner.onSetSliceLegendView(t,e,this),this.owner.didSetSliceLegendView(t,e,this)}}),m([Vs({extends:e.PieFastener})],e.prototype,"pie",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetTitleView(t,e)},onSetView:function(t,e){this.owner.onSetTitleView(t,e)},didSetView:function(t,e){this.owner.didSetTitleView(t,e)}})],e.prototype,"title",void 0),m([ds({type:l.Timing,state:!0})],e.prototype,"sliceTiming",void 0),e}(Ds),Xl=function(t){function e(){var e=t.call(this)||this;return e.xCoord=NaN,e.yCoord=NaN,e.y2Coord=void 0,e.gradientStop=!1,e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.setXCoord=function(t){this.xCoord=t},e.prototype.setYCoord=function(t){this.yCoord=t},e.prototype.setY2Coord=function(t){this.y2Coord=t},e.prototype.willSetX=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointX&&r.viewWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e){},e.prototype.didSetX=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointX&&r.viewDidSetDataPointX(t,e,this)}},e.prototype.willSetY=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointY&&r.viewWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e){},e.prototype.didSetY=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointY&&r.viewDidSetDataPointY(t,e,this)}},e.prototype.willSetY2=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointY2&&r.viewWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e){},e.prototype.didSetY2=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointY2&&r.viewDidSetDataPointY2(t,e,this)}},e.prototype.willSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointRadius&&r.viewWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointRadius&&r.viewDidSetDataPointRadius(t,e,this)}},e.prototype.willSetColor=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointColor&&r.viewWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e){this.updateGradientStop()},e.prototype.didSetColor=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointColor&&r.viewDidSetDataPointColor(t,e,this)}},e.prototype.willSetOpacity=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointOpacity&&r.viewWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e){this.updateGradientStop()},e.prototype.didSetOpacity=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointOpacity&&r.viewDidSetDataPointOpacity(t,e,this)}},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetDataPointLabel&&r.viewWillSetDataPointLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetDataPointLabel&&r.viewDidSetDataPointLabel(t,e,this)}},e.prototype.setState=function(t,e){void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.y2&&this.y2(t.y2,e),void 0!==t.radius&&this.radius(t.radius,e),void 0!==t.hitRadius&&this.hitRadius(t.hitRadius),void 0!==t.color&&this.color(t.color,e),void 0!==t.opacity&&this.opacity(t.opacity,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textColor&&this.textColor(t.textColor,e),void 0!==t.category&&this.category(t.category),void 0!==t.labelPadding&&this.labelPadding(t.labelPadding,e),void 0!==t.labelPlacement&&this.labelPlacement(t.labelPlacement),void 0!==t.label&&this.label(t.label)},e.prototype.isGradientStop=function(){return this.gradientStop},e.prototype.updateGradientStop=function(){this.gradientStop=null!==this.color.value||void 0!==this.opacity.value},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.layoutDataPoint(this.viewFrame)},e.prototype.layoutDataPoint=function(t){var e=this.label.view;null!==e&&this.layoutLabel(e,t)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state;if("above"!==i&&"below"!==i&&"middle"!==i){var o=this.category.state;i="increasing"===o||"maxima"===o?"above":"decreasing"===o||"minima"===o?"below":"above"}var n=this.xCoord,s=this.yCoord;"above"===i?s-=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height)):"below"===i&&(s+=this.labelPadding.getValue().pxValue(Math.min(e.width,e.height))),Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),"above"===i?t.textBaseline.setState("bottom",ro.Intrinsic):"below"===i?t.textBaseline.setState("top",ro.Intrinsic):"middle"===i&&t.textBaseline.setState("middle",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(n,s),ro.Intrinsic))},e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;return this.hitTestPoint(t,e,n,this.viewFrame)}return null},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.hitRadius.state,r=this.radius.value;if(null!==r){var s=Math.min(o.width,o.height);n=Math.max(n,r.pxValue(s))}var l=this.xCoord-t,a=this.yCoord-e;return l*l+a*a<n*n?this:null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({extends:void 0,willSetValue:function(t,e){this.owner.willSetX(t,e)},didSetValue:function(t,e){this.owner.onSetX(t,e),this.owner.didSetX(t,e)}})],e.prototype,"x",void 0),m([Oo({willSetValue:function(t,e){this.owner.willSetY(t,e)},didSetValue:function(t,e){this.owner.onSetY(t,e),this.owner.didSetY(t,e)}})],e.prototype,"y",void 0),m([Oo({willSetValue:function(t,e){this.owner.willSetY2(t,e)},didSetValue:function(t,e){this.owner.onSetY2(t,e),this.owner.didSetY2(t,e)}})],e.prototype,"y2",void 0),m([Oo({type:r.Length,state:null,willSetValue:function(t,e){this.owner.willSetRadius(t,e)},didSetValue:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([bo({type:Number,state:5})],e.prototype,"hitRadius",void 0),m([Oo({type:Tt,state:null,willSetValue:function(t,e){this.owner.willSetColor(t,e)},didSetValue:function(t,e){this.owner.onSetColor(t,e),this.owner.didSetColor(t,e)}})],e.prototype,"color",void 0),m([Oo({type:Number,willSetValue:function(t,e){this.owner.willSetOpacity(t,e)},didSetValue:function(t,e){this.owner.onSetOpacity(t,e),this.owner.didSetOpacity(t,e)}})],e.prototype,"opacity",void 0),m([Oo({type:St,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0})],e.prototype,"textColor",void 0),m([bo({type:String})],e.prototype,"category",void 0),m([Oo({type:r.Length,state:r.Length.zero(),updateFlags:ro.NeedsLayout})],e.prototype,"labelPadding",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([bo({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(vr),Kl=function(t){function e(e,i){var o=t.call(this)||this;return o.x.setState(e),o.y.setState(i),o}return w(e,t),e.prototype.willSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointX&&r.traitWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e){},e.prototype.didSetX=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointX&&r.traitDidSetDataPointX(t,e,this)}},e.prototype.willSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointY&&r.traitWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e){},e.prototype.didSetY=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointY&&r.traitDidSetDataPointY(t,e,this)}},e.prototype.willSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointY2&&r.traitWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e){},e.prototype.didSetY2=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointY2&&r.traitDidSetDataPointY2(t,e,this)}},e.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointRadius&&r.traitWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointRadius&&r.traitDidSetDataPointRadius(t,e,this)}},e.prototype.willSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointColor&&r.traitWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e){},e.prototype.didSetColor=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointColor&&r.traitDidSetDataPointColor(t,e,this)}},e.prototype.willSetOpacity=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointOpacity&&r.traitWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e){},e.prototype.didSetOpacity=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointOpacity&&r.traitDidSetDataPointOpacity(t,e,this)}},e.prototype.willSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetDataPointLabel&&r.traitWillSetDataPointLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){},e.prototype.didSetLabel=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetDataPointLabel&&r.traitDidSetDataPointLabel(t,e,this)}},e.prototype.formatLabel=function(t,e){},m([N({willSetState:function(t,e){this.owner.willSetX(t,e)},didSetState:function(t,e){this.owner.onSetX(t,e),this.owner.didSetX(t,e)}})],e.prototype,"x",void 0),m([N({willSetState:function(t,e){this.owner.willSetY(t,e)},didSetState:function(t,e){this.owner.onSetY(t,e),this.owner.didSetY(t,e)}})],e.prototype,"y",void 0),m([N({willSetState:function(t,e){this.owner.willSetY2(t,e)},didSetState:function(t,e){this.owner.onSetY2(t,e),this.owner.didSetY2(t,e)}})],e.prototype,"y2",void 0),m([N({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetRadius(t,e)},didSetState:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetColor(t,e)},didSetState:function(t,e){this.owner.onSetColor(t,e),this.owner.didSetColor(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"color",void 0),m([N({type:Number,willSetState:function(t,e){this.owner.willSetOpacity(t,e)},didSetState:function(t,e){this.owner.onSetOpacity(t,e),this.owner.didSetOpacity(t,e)}})],e.prototype,"opacity",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetLabel(t,e)},didSetState:function(t,e){this.owner.onSetLabel(t,e),this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(ht),Zl=function(t){function e(){var e=t.call(this)||this;return e.dataPointFasteners=[],e}return w(e,t),e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createDataPointFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initDataPoint=function(t,e){},e.prototype.attachDataPoint=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataPoint=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetDataPoint&&l.traitWillSetDataPoint(t,e,i,this)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetDataPoint&&l.traitDidSetDataPoint(t,e,i,this)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingDataPoints=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.onInsertDataPoint=function(t,e){this.insertDataPoint(t,e)},e.prototype.onRemoveDataPoint=function(t){this.removeDataPoint(t)},e.prototype.detectDataPointModel=function(t){return t.getTrait(Kl)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataPointModel(n);null!==r&&this.insertDataPoint(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectDataPointModel(e);if(null!==o){var n=null!==i?this.detectDataPointModel(i):null;this.onInsertDataPoint(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectDataPointModel(e);null!==i&&this.onRemoveDataPoint(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingDataPoints()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingDataPoints()},e.DataPointFastener=_.define({type:Kl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)}}),e}(ht),_l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDataPointTrait=function(t){},e.prototype.attachDataPointTrait=function(t){null!==this.dataPoint.view&&(this.setX(t.x.state,t),this.setY(t.y.state,t),this.setY2(t.y2.state,t),this.setRadius(t.radius.state,t),this.setColor(t.color.state,t),this.setOpacity(t.opacity.state,t),this.setLabelView(t.label.state,t))},e.prototype.detachDataPointTrait=function(t){null!==this.dataPoint.view&&this.setLabelView(null,t)},e.prototype.willSetDataPointTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDataPointTrait&&r.controllerWillSetDataPointTrait(t,e,this)}},e.prototype.onSetDataPointTrait=function(t,e){null!==e&&this.detachDataPointTrait(e),null!==t&&(this.attachDataPointTrait(t),this.initDataPointTrait(t))},e.prototype.didSetDataPointTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDataPointTrait&&r.controllerDidSetDataPointTrait(t,e,this)}},e.prototype.updateLabel=function(t,e,i){var o=i.formatLabel(t,e);void 0!==o&&i.label.setState(o,f.Intrinsic)},e.prototype.createDataPointView=function(t){var e=Xl.create();return null!==t&&(e.x.setState(t.x.state,ro.Intrinsic),e.y.setState(t.y.state,ro.Intrinsic),e.y2.setState(t.y2.state,ro.Intrinsic),e.radius.setState(t.radius.state,ro.Intrinsic)),e},e.prototype.initDataPointView=function(t){var e=this.dataPoint.trait;if(null!==e){var i=t.x.value,o=t.y.value;this.updateLabel(i,o,e)}},e.prototype.attachDataPointView=function(t){this.label.setView(t.label.view);var e=this.dataPoint.trait;null!==e&&(this.setX(e.x.state,e),this.setY(e.y.state,e),this.setY2(e.y2.state,e),this.setRadius(e.radius.state,e),this.setColor(e.color.state,e),this.setOpacity(e.opacity.state,e),this.setLabelView(e.label.state,e))},e.prototype.detachDataPointView=function(t){this.label.setView(null)},e.prototype.willSetDataPointView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDataPointView&&r.controllerWillSetDataPointView(t,e,this)}},e.prototype.onSetDataPointView=function(t,e){null!==e&&this.detachDataPointView(e),null!==t&&(this.attachDataPointView(t),this.initDataPointView(t))},e.prototype.didSetDataPointView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDataPointView&&r.controllerDidSetDataPointView(t,e,this)}},e.prototype.setX=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.x.setState(t,i,ro.Intrinsic))},e.prototype.willSetX=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointX&&s.controllerWillSetDataPointX(t,e,this)}},e.prototype.onSetX=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.y.value;this.updateLabel(t,n,o)}},e.prototype.didSetX=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointX&&s.controllerDidSetDataPointX(t,e,this)}},e.prototype.setY=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.y.setState(t,i,ro.Intrinsic))},e.prototype.willSetY=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointY&&s.controllerWillSetDataPointY(t,e,this)}},e.prototype.onSetY=function(t,e,i){var o=this.dataPoint.trait;if(null!==o){var n=i.x.value;this.updateLabel(n,t,o)}},e.prototype.didSetY=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointY&&s.controllerDidSetDataPointY(t,e,this)}},e.prototype.setY2=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.y2.setState(t,i,ro.Intrinsic))},e.prototype.willSetY2=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointY2&&s.controllerWillSetDataPointY2(t,e,this)}},e.prototype.onSetY2=function(t,e,i){},e.prototype.didSetY2=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointY2&&s.controllerDidSetDataPointY2(t,e,this)}},e.prototype.setRadius=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.radius.setState(t,i,ro.Intrinsic))},e.prototype.willSetRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointRadius&&s.controllerWillSetDataPointRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e,i){},e.prototype.didSetRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointRadius&&s.controllerDidSetDataPointRadius(t,e,this)}},e.prototype.setColor=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),t instanceof se?o.color.setLook(t,i,ro.Intrinsic):o.color.setState(t,i,ro.Intrinsic))},e.prototype.willSetColor=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointColor&&s.controllerWillSetDataPointColor(t,e,this)}},e.prototype.onSetColor=function(t,e,i){},e.prototype.didSetColor=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointColor&&s.controllerDidSetDataPointColor(t,e,this)}},e.prototype.setOpacity=function(t,e,i){var o=this.dataPoint.view;null!==o&&(void 0===i||!0===i?!0===(i=this.dataPointTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.opacity.setState(t,i,ro.Intrinsic))},e.prototype.willSetOpacity=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointOpacity&&s.controllerWillSetDataPointOpacity(t,e,this)}},e.prototype.onSetOpacity=function(t,e,i){},e.prototype.didSetOpacity=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointOpacity&&s.controllerDidSetDataPointOpacity(t,e,this)}},e.prototype.createLabelView=function(t,e){return"function"==typeof t?t(e):t},e.prototype.setLabelView=function(t,e){var i=this.dataPoint.view;if(null!==i){var o=null!==t?this.createLabelView(t,e):null;i.label.setView(o)}},e.prototype.initLabelView=function(t){},e.prototype.attachLabelView=function(t){},e.prototype.detachLabelView=function(t){},e.prototype.willSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllertWillSetDataPointLabelView&&r.controllertWillSetDataPointLabelView(t,e,this)}},e.prototype.onSetLabelView=function(t,e){null!==e&&this.detachLabelView(e),null!==t&&(this.attachLabelView(t),this.initLabelView(t))},e.prototype.didSetLabelView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDataPointLabelView&&r.controllerDidSetDataPointLabelView(t,e,this)}},e.DataPointFastener=Vs.define({viewType:Xl,observeView:!0,willSetView:function(t,e){this.owner.willSetDataPointView(t,e)},onSetView:function(t,e){this.owner.onSetDataPointView(t,e)},didSetView:function(t,e){this.owner.didSetDataPointView(t,e)},viewWillSetDataPointX:function(t,e,i){this.owner.willSetX(t,e,i)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetX(t,e,i),this.owner.didSetX(t,e,i)},viewWillSetDataPointY:function(t,e,i){this.owner.willSetY(t,e,i)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetY(t,e,i),this.owner.didSetY(t,e,i)},viewWillSetDataPointY2:function(t,e,i){this.owner.willSetY2(t,e,i)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetY2(t,e,i),this.owner.didSetY2(t,e,i)},viewWillSetDataPointRadius:function(t,e,i){this.owner.willSetRadius(t,e,i)},viewDidSetDataPointRadius:function(t,e,i){this.owner.onSetRadius(t,e,i),this.owner.didSetRadius(t,e,i)},viewWillSetDataPointColor:function(t,e,i){this.owner.willSetColor(t,e,i)},viewDidSetDataPointColor:function(t,e,i){this.owner.onSetColor(t,e,i),this.owner.didSetColor(t,e,i)},viewWillSetDataPointOpacity:function(t,e,i){this.owner.willSetOpacity(t,e,i)},viewDidSetDataPointOpacity:function(t,e,i){this.owner.onSetOpacity(t,e,i),this.owner.didSetOpacity(t,e,i)},viewDidSetDataPointLabel:function(t,e){this.owner.label.setView(t)},createView:function(){return this.owner.createDataPointView(this.trait)},traitType:Kl,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetDataPointTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataPointTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataPointTrait(t,e)},traitDidSetDataPointX:function(t,e,i){this.owner.setX(t,i)},traitDidSetDataPointY:function(t,e,i){this.owner.setY(t,i)},traitDidSetDataPointY2:function(t,e,i){this.owner.setY2(t,i)},traitDidSetDataPointRadius:function(t,e,i){this.owner.setRadius(t,i)},traitDidSetDataPointColor:function(t,e,i){this.owner.setColor(t,i)},traitDidSetDataPointOpacity:function(t,e,i){this.owner.setOpacity(t,i)},traitDidSetDataPointLabel:function(t,e,i){this.owner.setLabelView(t,i)}}),m([ds({type:l.Timing,inherit:!0})],e.prototype,"dataPointTiming",void 0),m([Vs({extends:e.DataPointFastener})],e.prototype,"dataPoint",void 0),m([Cs({key:!0,willSetView:function(t,e){this.owner.willSetLabelView(t,e)},onSetView:function(t,e){this.owner.onSetLabelView(t,e)},didSetView:function(t,e){this.owner.didSetLabelView(t,e)}})],e.prototype,"label",void 0),e}(Ds),Ql=function(t){function e(){var e=t.call(this)||this;return e.dataPointFasteners=[],e}return w(e,t),e.prototype.initDataSetTrait=function(t){},e.prototype.attachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertDataPointTrait(n)}},e.prototype.detachDataSetTrait=function(t){for(var e=t.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeDataPointTrait(n)}},e.prototype.willSetDataSetTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetDataSetTrait&&r.controllerWillSetDataSetTrait(t,e,this)}},e.prototype.onSetDataSetTrait=function(t,e){null!==e&&this.detachDataSetTrait(e),null!==t&&(this.attachDataSetTrait(t),this.initDataSetTrait(t))},e.prototype.didSetDataSetTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetDataSetTrait&&r.controllerDidSetDataSetTrait(t,e,this)}},e.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createDataPointFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createDataPoint=function(t){return new _l},e.prototype.initDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.initDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.initDataPointView(o,e)},e.prototype.attachDataPoint=function(t,e){var i=t.dataPoint.trait;null!==i&&this.attachDataPointTrait(i,e);var o=t.dataPoint.view;null!==o&&this.attachDataPointView(o,e)},e.prototype.detachDataPoint=function(t,e){var i=t.dataPoint.view;null!==i&&this.detachDataPointView(i,e);var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e)},e.prototype.willSetDataPoint=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPoint&&s.controllerWillSetDataPoint(t,e,i)}},e.prototype.onSetDataPoint=function(t,e,i){null!==e&&this.detachDataPoint(e,i),null!==t&&(this.attachDataPoint(t,i),this.initDataPoint(t,i))},e.prototype.didSetDataPoint=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPoint&&s.controllerDidSetDataPoint(t,e,i)}},e.prototype.insertDataPointTrait=function(t,e){void 0===e&&(e=null);for(var i=this.dataPointFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.dataPoint.trait===t)return;s.dataPoint.trait===e&&(o=s)}}var l=this.createDataPoint(t);if(null!==l&&(l.dataPoint.setTrait(t),this.insertChildController(l,o),null===l.dataPoint.view)){var a=this.createDataPointView(l),h=null;null!==o&&(h=o.dataPoint.view),l.dataPoint.setView(a,h)}},e.prototype.removeDataPointTrait=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.dataPoint.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initDataPointTrait=function(t,e){},e.prototype.attachDataPointTrait=function(t,e){},e.prototype.detachDataPointTrait=function(t,e){},e.prototype.willSetDataPointTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointTrait&&s.controllerWillSetDataPointTrait(t,e,i)}},e.prototype.onSetDataPointTrait=function(t,e,i){null!==e&&this.detachDataPointTrait(e,i),null!==t&&(this.attachDataPointTrait(t,i),this.initDataPointTrait(t,i))},e.prototype.didSetDataPointTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointTrait&&s.controllerDidSetDataPointTrait(t,e,i)}},e.prototype.createDataPointView=function(t){return t.dataPoint.createView()},e.prototype.initDataPointView=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabelView(i,e)},e.prototype.attachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.attachDataPointLabelView(i,e)},e.prototype.detachDataPointView=function(t,e){var i=t.label.view;null!==i&&this.detachDataPointLabelView(i,e),t.remove()},e.prototype.willSetDataPointView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointView&&s.controllerWillSetDataPointView(t,e,i)}},e.prototype.onSetDataPointView=function(t,e,i){null!==e&&this.detachDataPointView(e,i),null!==t&&(this.attachDataPointView(t,i),this.initDataPointView(t,i))},e.prototype.didSetDataPointView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointView&&s.controllerDidSetDataPointView(t,e,i)}},e.prototype.willSetDataPointX=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointX&&s.controllerWillSetDataPointX(t,e,i)}},e.prototype.onSetDataPointX=function(t,e,i){},e.prototype.didSetDataPointX=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointX&&s.controllerDidSetDataPointX(t,e,i)}},e.prototype.willSetDataPointY=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointY&&s.controllerWillSetDataPointY(t,e,i)}},e.prototype.onSetDataPointY=function(t,e,i){},e.prototype.didSetDataPointY=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointY&&s.controllerDidSetDataPointY(t,e,i)}},e.prototype.willSetDataPointY2=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointY2&&s.controllerWillSetDataPointY2(t,e,i)}},e.prototype.onSetDataPointY2=function(t,e,i){},e.prototype.didSetDataPointY2=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointY2&&s.controllerDidSetDataPointY2(t,e,i)}},e.prototype.willSetDataPointRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointRadius&&s.controllerWillSetDataPointRadius(t,e,i)}},e.prototype.onSetDataPointRadius=function(t,e,i){},e.prototype.didSetDataPointRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointRadius&&s.controllerDidSetDataPointRadius(t,e,i)}},e.prototype.willSetDataPointColor=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointColor&&s.controllerWillSetDataPointColor(t,e,i)}},e.prototype.onSetDataPointColor=function(t,e,i){},e.prototype.didSetDataPointColor=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointColor&&s.controllerDidSetDataPointColor(t,e,i)}},e.prototype.willSetDataPointOpacity=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataPointOpacity&&s.controllerWillSetDataPointOpacity(t,e,i)}},e.prototype.onSetDataPointOpacity=function(t,e,i){},e.prototype.didSetDataPointOpacity=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointOpacity&&s.controllerDidSetDataPointOpacity(t,e,i)}},e.prototype.initDataPointLabelView=function(t,e){},e.prototype.attachDataPointLabelView=function(t,e){},e.prototype.detachDataPointLabelView=function(t,e){},e.prototype.willSetDataPointLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllertWillSetDataPointLabelView&&s.controllertWillSetDataPointLabelView(t,e,i)}},e.prototype.onSetDataPointLabelView=function(t,e,i){null!==e&&this.detachDataPointLabelView(e,i),null!==t&&(this.attachDataPointLabelView(t,i),this.initDataPointLabelView(t,i))},e.prototype.didSetDataPointLabelView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataPointLabelView&&s.controllerDidSetDataPointLabelView(t,e,i)}},e.prototype.createDataPointFastener=function(t){return new e.DataPointFastener(this,t.key,"dataPoint")},e.prototype.getDataPointFastener=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.dataPoint.trait===t)return n}return null},e.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectDataPointController=function(t){return t instanceof _l?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectDataPointController(e);null!==o&&this.insertDataPoint(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectDataPointController(e);null!==i&&this.removeDataPoint(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountDataPointFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.DataSetFastener=ms.define({type:Zl,observe:!0,willSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetDataSetTrait(t,e)},traitWillSetDataPoint:function(t,e,i){null!==e&&this.owner.removeDataPointTrait(e)},traitDidSetDataPoint:function(t,e,i){null!==t&&this.owner.insertDataPointTrait(t,i)}}),e.DataPointFastener=Fs.define({type:_l,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetDataPoint(t,e,this)},onSetController:function(t,e){this.owner.onSetDataPoint(t,e,this)},didSetController:function(t,e){this.owner.didSetDataPoint(t,e,this)},controllerWillSetDataPointTrait:function(t,e){this.owner.willSetDataPointTrait(t,e,this)},controllerDidSetDataPointTrait:function(t,e){this.owner.onSetDataPointTrait(t,e,this),this.owner.didSetDataPointTrait(t,e,this)},controllerWillSetDataPointView:function(t,e){this.owner.willSetDataPointView(t,e,this)},controllerDidSetDataPointView:function(t,e){this.owner.onSetDataPointView(t,e,this),this.owner.didSetDataPointView(t,e,this)},controllerWillSetDataPointX:function(t,e){this.owner.willSetDataPointX(t,e,this)},controllerDidSetDataPointX:function(t,e){this.owner.onSetDataPointX(t,e,this),this.owner.didSetDataPointX(t,e,this)},controllerWillSetDataPointY:function(t,e){this.owner.willSetDataPointY(t,e,this)},controllerDidSetDataPointY:function(t,e){this.owner.onSetDataPointY(t,e,this),this.owner.didSetDataPointY(t,e,this)},controllerWillSetDataPointY2:function(t,e){this.owner.willSetDataPointY2(t,e,this)},controllerDidSetDataPointY2:function(t,e){this.owner.onSetDataPointY2(t,e,this),this.owner.didSetDataPointY2(t,e,this)},controllerWillSetDataPointRadius:function(t,e){this.owner.willSetDataPointRadius(t,e,this)},controllerDidSetDataPointRadius:function(t,e){this.owner.onSetDataPointRadius(t,e,this),this.owner.didSetDataPointRadius(t,e,this)},controllerWillSetDataPointColor:function(t,e){this.owner.willSetDataPointColor(t,e,this)},controllerDidSetDataPointColor:function(t,e){this.owner.onSetDataPointColor(t,e,this),this.owner.didSetDataPointColor(t,e,this)},controllerWillSetDataPointOpacity:function(t,e){this.owner.willSetDataPointOpacity(t,e,this)},controllerDidSetDataPointOpacity:function(t,e){this.owner.onSetDataPointOpacity(t,e,this),this.owner.didSetDataPointOpacity(t,e,this)},controllertWillSetDataPointLabelView:function(t,e){this.owner.willSetDataPointLabelView(t,e,this)},controllerDidSetDataPointLabelView:function(t,e){this.owner.onSetDataPointLabelView(t,e,this),this.owner.didSetDataPointLabelView(t,e,this)}}),m([ms({extends:e.DataSetFastener})],e.prototype,"dataSet",void 0),m([ds({type:l.Timing,state:!0})],e.prototype,"dataPointTiming",void 0),e}(Ds),Jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.setScale=function(t,e,i,o,n){"string"==typeof t&&(t=ia.parseScale(t).domain),t instanceof l.Domain&&(n=i,e instanceof l.Domain&&(o=e[1],i=e[0]),e=t[1],t=t[0]);var r,s=this.state;if(null!==s){if(r=s.withDomain(t,e),void 0!==i&&void 0!==o&&(r=r.overRange(i,o)),(void 0===n||!1===n)&&0!=(this.animatorFlags&Ao.AnimatingFlag)){var a=this.getValue().withDomain(t,e);this.setValue(a),n=!0}}else r=ia.createScale(t,e,i,o);this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag),this.setOwnState(r,n)},e.prototype.setDomain=function(t,e,i){"string"==typeof t&&(t=ia.parseScale(t).domain),t instanceof l.Domain&&(i=e,e=t[1],t=t[0]);var o,n=this.state;if(null!==n){if(o=n.withDomain(t,e),(void 0===i||!1===i)&&0!=(this.animatorFlags&Ao.AnimatingFlag)){var r=this.getValue().withDomain(t,e);this.setValue(r),i=!0}}else o=ia.createScale(t,e,0,1);this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag),this.setOwnState(o,i)},e.prototype.setRange=function(t,e,i){var o=this.state;if(null!==o){t instanceof l.Range&&(i=e,e=t[1],t=t[0]);var n=o.overRange(t,e);if((void 0===i||!1===i)&&0!=(this.animatorFlags&Ao.AnimatingFlag)){var r=this.getValue().overRange(t,e);this.setValue(r),i=!0}this.setAnimatorFlags(this.animatorFlags&~Ao.InheritedFlag),this.setOwnState(n,i)}},e.prototype.setBaseScale=function(t,i,o,n,r){var s;this.isInherited()&&(s=this.superAnimator)instanceof e?s.setBaseScale(t,i,o,n,r):this.setScale(t,i,o,n,r)},e.prototype.setBaseDomain=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseDomain(t,i,o):this.setDomain(t,i,o)},e.prototype.setBaseRange=function(t,i,o){var n;this.isInherited()&&(n=this.superAnimator)instanceof e?n.setBaseRange(t,i,o):this.setRange(t,i,o)},e.prototype.fromAny=function(t){return"string"==typeof t&&(t=ia.parseScale(t)),t},e}(Oo),$l={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ia||t instanceof fr&&"xScale"in t}return!1}},ta={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ia||t instanceof fr&&"yScale"in t}return!1}},ea={is:function(t){if("object"==typeof t&&null!==t){return t instanceof ia||t instanceof fr&&"xScale"in t&&"yScale"in t}return!1}},ia=function(t){function i(){var e=t.call(this)||this;return e.scaledFlags=0,e.scaledFasteners=[],e.xDataDomain=null,e.yDataDomain=null,e.xDataRange=null,e.yDataRange=null,e.xDataDomainPadded=null,e.yDataDomainPadded=null,e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale),void 0!==e.xDomainBounds&&this.xDomainBounds(e.xDomainBounds),void 0!==e.yDomainBounds&&this.yDomainBounds(e.yDomainBounds),void 0!==e.xZoomBounds&&this.xZoomBounds(e.xZoomBounds),void 0!==e.yZoomBounds&&this.yZoomBounds(e.yZoomBounds),void 0!==e.xDomainPadding&&this.xDomainPadding(e.xDomainPadding),void 0!==e.yDomainPadding&&this.yDomainPadding(e.yDomainPadding),void 0!==e.xRangePadding&&this.xRangePadding(e.xRangePadding),void 0!==e.yRangePadding&&this.yRangePadding(e.yRangePadding),void 0!==e.fitAlign&&this.fitAlign(e.fitAlign),void 0!==e.xFitAlign&&this.xFitAlign(e.xFitAlign),void 0!==e.yFitAlign&&this.yFitAlign(e.yFitAlign),void 0!==e.fitAspectRatio&&this.fitAspectRatio(e.fitAspectRatio),void 0!==e.preserveAspectRatio&&this.preserveAspectRatio(e.preserveAspectRatio),void 0!==e.domainTracking&&this.domainTracking(e.domainTracking),void 0!==e.xDomainTracking&&this.xDomainTracking(e.xDomainTracking),void 0!==e.yDomainTracking&&this.yDomainTracking(e.yDomainTracking),void 0!==e.scaleGestures&&this.scaleGestures(e.scaleGestures),void 0!==e.xScaleGestures&&this.xScaleGestures(e.xScaleGestures),void 0!==e.yScaleGestures&&this.yScaleGestures(e.yScaleGestures),void 0!==e.rescaleTransition&&this.rescaleTransition.setState(e.rescaleTransition),void 0!==e.reboundTransition&&this.reboundTransition.setState(e.reboundTransition)},i.prototype.setScaledFlags=function(t){this.scaledFlags=t},i.prototype.willSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXScale&&r.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}},i.prototype.willSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYScale&&r.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}},i.prototype.xDomain=function(t,e,i){if(void 0===t){var o=this.xScale.value;return null!==o?o.domain:null}(t instanceof l.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.xRange();return t instanceof l.Domain||"string"==typeof t?null!==n?this.xScale.setBaseScale(t,n,i):this.xScale.setBaseDomain(t,i):null!==n?this.xScale.setBaseScale(t,e,n[0],n[1],i):this.xScale.setBaseDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(void 0===t){var o=this.yScale.value;return null!==o?o.domain:null}(t instanceof l.Domain||"string"==typeof t)&&(i=e),!0===i&&(i=this.rescaleTransition.state);var n=this.yRange();return t instanceof l.Domain||"string"==typeof t?null!==n?this.yScale.setBaseScale(t,n,i):this.yScale.setBaseDomain(t,i):null!==n?this.yScale.setBaseScale(t,e,n[0],n[1],i):this.yScale.setBaseDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.viewFrame.width;if(isFinite(t)){var e=this.xRangePadding.state,i=e[0],o=t-e[1];return l.LinearRange(i,o)}return null},i.prototype.yRange=function(){var t=this.viewFrame.height;if(isFinite(t)){var e=this.yRangePadding.state,i=e[0],o=t-e[1];return l.LinearRange(o,i)}return null},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),this.xDataDomain=t,this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXDataDomain&&r.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.updateXDataDomainPadded(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}},i.prototype.updateXDataDomain=function(t,i){var o=this.xDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=l.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=l.Domain(o[0],t[1]))),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),this.yDataDomain=t,this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYDataDomain&&r.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.updateYDataDomainPadded(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}},i.prototype.updateYDataDomain=function(t,i){var o=this.yDataDomain;null===o||1===this.scaledFasteners.length?o=t:null!==t&&(e.Values.compare(t[0],o[0])<0&&(o=l.Domain(t[0],o[1])),e.Values.compare(o[1],t[1])<0&&(o=l.Domain(o[0],t[1]))),this.setYDataDomain(o)},i.prototype.setXDataRange=function(t){this.xDataRange=t},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){this.yDataRange=t},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.setXDataDomainPadded=function(t){this.xDataDomainPadded=t},i.prototype.updateXDataDomainPadded=function(){var t,e=this.xDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.xDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=l.Domain(i,o)}else t=null;this.setXDataDomainPadded(t)},i.prototype.setYDataDomainPadded=function(t){this.yDataDomainPadded=t},i.prototype.updateYDataDomainPadded=function(){var t,e=this.yDataDomain;if(null!==e){var i=e[0],o=e[1],n=this.yDomainPadding.state;"boolean"!=typeof n[0]&&(i=+i-+n[0]),"boolean"!=typeof n[1]&&(o=+o+ +n[1]),t=l.Domain(i,o)}else t=null;this.setYDataDomainPadded(t)},i.prototype.willSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXRangePadding&&r.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}},i.prototype.updateXRangePadding=function(t,e){if(this.xRangePadding.takesPrecedence(ro.Intrinsic)){var i=this.xRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.xRangePadding.setState(i,ro.Intrinsic)}},i.prototype.willSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYRangePadding&&r.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}},i.prototype.updateYRangePadding=function(t,e){if(this.yRangePadding.takesPrecedence(ro.Intrinsic)){var i=this.yRangePadding.state;null===i||1===this.scaledFasteners.length?i=t:null!==t&&(i=[Math.max(i[0],t[0]),Math.max(i[1],t[1])]),this.yRangePadding.setState(i,ro.Intrinsic)}},i.prototype.xFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([t,e[1]]),this)},i.prototype.yFitAlign=function(t){var e=this.fitAlign.state;return void 0===t?e[0]:(this.fitAlign.setState([e[0],t]),this)},i.prototype.preserveAspectRatio=function(t){return void 0===t?this.gesture.preserveAspectRatio:(this.gesture.preserveAspectRatio=t,this)},i.prototype.domainTracking=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XDomainTrackingFlag),0!=(this.scaledFlags&i.YDomainTrackingFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),e?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.xDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.XDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.XDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.XDomainTrackingFlag),this)},i.prototype.yDomainTracking=function(t){return void 0===t?0!=(this.scaledFlags&i.YDomainTrackingFlag):(t?this.setScaledFlags(this.scaledFlags|i.YDomainTrackingFlag):this.setScaledFlags(this.scaledFlags&~i.YDomainTrackingFlag),this)},i.prototype.scaleGestures=function(t,e){return void 0===t?[0!=(this.scaledFlags&i.XScaleGesturesFlag),0!=(this.scaledFlags&i.YScaleGesturesFlag)]:(Array.isArray(t)?(e=t[1],t=t[0]):void 0===e&&(e=t),t?this.setScaledFlags(this.scaledFlags|i.XScaleGesturesFlag):this.setScaledFlags(this.scaledFlags&~i.XScaleGesturesFlag),e?this.setScaledFlags(this.scaledFlags|i.YScaleGesturesFlag):this.setScaledFlags(this.scaledFlags&~i.YScaleGesturesFlag),this)},i.prototype.xScaleGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.XScaleGesturesFlag):(t?this.setScaledFlags(this.scaledFlags|i.XScaleGesturesFlag):this.setScaledFlags(this.scaledFlags&~i.XScaleGesturesFlag),this)},i.prototype.yScaleGestures=function(t){return void 0===t?0!=(this.scaledFlags&i.YScaleGesturesFlag):(t?this.setScaledFlags(this.scaledFlags|i.YScaleGesturesFlag):this.setScaledFlags(this.scaledFlags&~i.YScaleGesturesFlag),this)},i.prototype.fitX=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.XFitTweenFlag),this.requireUpdate(ro.NeedsLayout)},i.prototype.fitY=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.YFitTweenFlag),this.requireUpdate(ro.NeedsLayout)},i.prototype.fit=function(t){void 0===t&&(t=!1),this.setScaledFlags(this.scaledFlags|i.XFitFlag|i.YFitFlag),!0===t&&this.setScaledFlags(this.scaledFlags|i.FitTweenMask),this.requireUpdate(ro.NeedsLayout)},i.prototype.insertScaled=function(t,e){void 0===e&&(e=null);for(var i=this.scaledFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createScaledFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},i.prototype.removeScaled=function(t){for(var e=this.scaledFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initScaled=function(t,e){},i.prototype.willSetScaled=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetScaled&&l.viewWillSetScaled(t,e,i,this)}},i.prototype.onSetScaled=function(t,e,i,o){null!==t&&(this.initScaled(t,o),$l.is(t)&&this.updateXDataDomain(t.xDataDomain,o),ta.is(t)&&this.updateYDataDomain(t.yDataDomain,o))},i.prototype.didSetScaled=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetScaled&&l.viewDidSetScaled(t,e,i,this)}},i.prototype.onSetScaledXScale=function(t,e,i){},i.prototype.onSetScaledYScale=function(t,e,i){},i.prototype.onSetScaledXRangePadding=function(t,e,i){this.updateXRangePadding(t,i)},i.prototype.onSetScaledYRangePadding=function(t,e,i){this.updateYRangePadding(t,i)},i.prototype.onSetScaledXDataDomain=function(t,e,i){this.updateXDataDomain(t,i),this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetScaledYDataDomain=function(t,e,i){this.updateYDataDomain(t,i),this.requireUpdate(ro.NeedsLayout)},i.prototype.createScaledFastener=function(t){return new i.ScaledFastener(this,t.key,"scaled")},i.prototype.mountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountScaledFasteners=function(){for(var t=this.scaledFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectScaled=function(t){return $l.is(t)||ta.is(t)?t:null},i.prototype.onInsertScaled=function(t,e){this.insertScaled(t,e)},i.prototype.onRemoveScaled=function(t){this.removeScaled(t)},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectScaled(e);null!==o&&this.onInsertScaled(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectScaled(e);null!==i&&this.onRemoveScaled(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(),this.updateScales()},i.prototype.resizeScales=function(){var t,e,o=this.xRange();if(null!==o)if(null!==(t=this.xScale.isInherited()?null:this.xScale.ownState))t.range.equals(o)||(this.xScale.setRange(o),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.xScale.superAnimator||null===this.xScale.superValue){var n=this.xDataDomainPadded;null!==n&&(t=i.createScale(n[0],n[1],o[0],o[1]),this.xScale.setState(t),this.setScaledFlags(this.scaledFlags|i.XFitFlag))}var r=this.yRange();if(null!==r)if(null!==(e=this.yScale.isInherited()?null:this.yScale.ownState))e.range.equals(r)||(this.yScale.setRange(r),this.setScaledFlags(this.scaledFlags|i.RescaleFlag));else if(null===this.yScale.superAnimator||null===this.yScale.superValue){var s=this.yDataDomainPadded;null!==s&&(e=i.createScale(s[0],s[1],r[0],r[1]),this.yScale.setState(e),this.setScaledFlags(this.scaledFlags|i.YFitFlag))}},i.prototype.updateScales=function(){var t=this.xScale.isInherited()?null:this.xScale.ownState,e=this.yScale.isInherited()?null:this.yScale.ownState;if(null!==t&&null!==e&&!this.gesture.isPressing()){var i=this.gesture.isCoasting();this.boundScales(t,e,i)}},i.prototype.boundScales=function(t,o,n){var r=t.domain,s=o.domain,h=r,u=s,p=this.xDataDomainPadded;null!==p&&0!=(this.scaledFlags&i.XFitFlag)?(h=p,this.setScaledFlags(this.scaledFlags|i.XInRangeMask)):h=r;var d=this.yDataDomainPadded;null!==d&&0!=(this.scaledFlags&i.YFitFlag)?(u=d,this.setScaledFlags(this.scaledFlags|i.YInRangeMask)):u=s;var c=null!==p?p:r,f=this.xDomainBounds.state,v=!1===f[0]?void 0:!0===f[0]?c[0]:f[0],y=!1===f[1]?void 0:!0===f[1]?c[1]:f[1],g=this.xZoomBounds.state,w=g[0],m=g[1];!0===w?w=t instanceof l.LinearScale?i.LinearZoomMin:t instanceof a.TimeScale?i.TimeZoomMin:void 0:!1===w&&(w=void 0),!0===m?m=t instanceof l.LinearScale?i.LinearZoomMax:t instanceof a.TimeScale?i.TimeZoomMax:void 0:!1===m&&(m=void 0),h=t.clampDomain(v,y,w,m).domain;var S=null!==d?d:s,C=this.yDomainBounds.state,b=!1===C[0]?void 0:!0===C[0]?S[0]:C[0],V=!1===C[1]?void 0:!0===C[1]?S[1]:C[1],T=this.yZoomBounds.state,F=T[0],P=T[1];if(!0===F?F=o instanceof l.LinearScale?i.LinearZoomMin:o instanceof a.TimeScale?i.TimeZoomMin:void 0:!1===F&&(F=void 0),!0===P?P=o instanceof l.LinearScale?i.LinearZoomMax:o instanceof a.TimeScale?i.TimeZoomMax:void 0:!1===P&&(P=void 0),u=o.clampDomain(b,V,F,P).domain,null!==p&&!n&&0!=(this.scaledFlags&i.XDomainTrackingFlag)&&0!=(this.scaledFlags&i.XInRangeMask))if((this.scaledFlags&i.XInRangeMask)===i.XInRangeMask)h=p;else{var M=+h[1]-+h[0];h=0!=(this.scaledFlags&i.XMinInRangeFlag)?l.Domain(p[0],+p[0]+ +M):l.Domain(+p[1]-+M,p[1])}if(null!==d&&!n&&0!=(this.scaledFlags&i.YDomainTrackingFlag)&&0!=(this.scaledFlags&i.YInRangeMask))if((this.scaledFlags&i.YInRangeMask)===i.YInRangeMask)u=d;else{var D=+u[1]-+u[0];u=0!=(this.scaledFlags&i.YMinInRangeFlag)?l.Domain(d[0],+d[0]+ +D):l.Domain(+d[1]-+D,d[1])}var x=this.fitAspectRatio.state;if(void 0!==x&&(this.gesture.preserveAspectRatio||0!=(this.scaledFlags&i.FitMask))){var L=t.range,A=o.range,O=+h[1]-+h[0],R=+u[1]-+u[0],I=O/R,k=(L[1]-L[0])/(A[0]-A[1]),W=Math.abs(x*k);if(!e.Equivalent(I,W)){var E=this.fitAlign.state;if(x<0&&I<W||x>0&&I>W){var N=R*W-O;h=l.Domain(+h[0]-N*E[0],+h[1]+N*(1-E[0]))}else{var U=O/W-R;u=l.Domain(+u[0]-U*E[1],+u[1]+U*(1-E[1]))}}}if(0==(this.scaledFlags&i.XBoundingFlag)&&!e.Equivalent(h,r)){var G=void 0;0!=(this.scaledFlags&(i.XFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.XFitTweenFlag)||void 0!==(G=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==G&&this.setScaledFlags(this.scaledFlags|i.XBoundingFlag),this.willReboundX(t),this.xDomain(h,G),void 0===G&&!1!==G&&this.didReboundX(this.xScale.getState()),null!==p&&0!=(this.scaledFlags&i.XFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.XFitFlag)}if(0==(this.scaledFlags&i.YBoundingFlag)&&!e.Equivalent(u,s)){G=void 0;0!=(this.scaledFlags&(i.YFitFlag|i.RescaleFlag))&&0==(this.scaledFlags&i.YFitTweenFlag)||void 0!==(G=0!=(this.scaledFlags&i.InteractingMask)?this.reboundTransition.state:this.rescaleTransition.state)&&!1!==G&&this.setScaledFlags(this.scaledFlags|i.YBoundingFlag),this.willReboundY(o),this.yDomain(u,G),void 0===G&&!1!==G&&this.didReboundY(this.yScale.getState()),null!==d&&0!=(this.scaledFlags&i.YFitFlag)&&this.setScaledFlags(this.scaledFlags&~i.YFitFlag)}this.setScaledFlags(this.scaledFlags&~(i.InteractedFlag|i.RescaleFlag))},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&ro.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var a,h,u,p,d=0,c=0,f=0,v=0,y=0,g=0;t.prototype.displayChildViews.call(this,n,r,(function(t,i,o){if(s.call(this,t,i,o),$l.is(t)&&t.xScale.isInherited()){var n=t.xDataDomain;if(null!==n){0!==y?(e.Values.compare(n[0],a)<0&&(a=n[0]),e.Values.compare(h,n[1])<0&&(h=n[1])):(a=n[0],h=n[1]);var r=t.xRangePadding();d=Math.max(r[0],d),c=Math.max(r[1],c),y+=1}}if(ta.is(t)&&t.yScale.isInherited()){var l=t.yDataDomain;if(null!==l){0!==g?(e.Values.compare(l[0],u)<0&&(u=l[0]),e.Values.compare(p,l[1])<0&&(p=l[1])):(u=l[0],p=l[1]);var w=t.yRangePadding();f=Math.max(w[0],f),v=Math.max(w[1],v),g+=1}}})),this.setXDataDomain(0!==y?l.Domain(a,h):null),this.setYDataDomain(0!==g?l.Domain(u,p):null),this.xRangePadding.setState([d,c],ro.Intrinsic),this.yRangePadding.setState([f,v],ro.Intrinsic)},i.prototype.onBeginBoundingXScale=function(t){},i.prototype.onEndBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onInterruptBoundingXScale=function(t){this.setScaledFlags(this.scaledFlags&~i.XBoundingFlag),this.didReboundX(t)},i.prototype.onBeginBoundingYScale=function(t){},i.prototype.onEndBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.onInterruptBoundingYScale=function(t){this.setScaledFlags(this.scaledFlags&~i.YBoundingFlag),this.didReboundY(t)},i.prototype.willReboundX=function(t){this.gesture.neutralizeX()},i.prototype.didReboundX=function(t){},i.prototype.willReboundY=function(t){this.gesture.neutralizeY()},i.prototype.didReboundY=function(t){},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountScaledFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountScaledFasteners(),t.prototype.unmountViewFasteners.call(this)},i.createScale=function(t,e,i,o){var n;if(n="number"==typeof i&&"number"==typeof o?l.LinearRange(i,o):l.LinearRange(0,1),"number"==typeof t&&"number"==typeof e)return l.LinearScale(l.LinearDomain(t,e),n);if(t instanceof a.DateTime&&e instanceof a.DateTime)return a.TimeScale(a.TimeDomain(t,e),n);throw new TypeError(t+", "+e+", "+i+", "+o)},i.parseScale=function(t){if("linear"===t)return l.LinearScale(l.LinearDomain(0,1),l.LinearRange(0,1));if("time"===t){var e=(r=a.DateTime.current()).withDay(r.day-1);return a.TimeScale(a.TimeDomain(e,r),l.LinearRange(0,1))}var i=t.split("..."),o=+i[0],n=+i[1];if(isFinite(o)&&isFinite(n))return l.LinearScale(l.LinearDomain(o,n),l.LinearRange(0,1));e=a.DateTime.parse(i[0]);var r=a.DateTime.parse(i[1]);return a.TimeScale(a.TimeDomain(e,r),l.LinearRange(0,1))},i.ScaledFastener=Zo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetScaled(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetScaled(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetScaled(t,e,i,this)},viewDidSetXScale:function(t,e){this.owner.onSetScaledXScale(t,e,this)},viewDidSetYScale:function(t,e){this.owner.onSetScaledYScale(t,e,this)},viewDidSetXRangePadding:function(t,e){this.owner.onSetScaledXRangePadding(t,e,this)},viewDidSetYRangePadding:function(t,e){this.owner.onSetScaledYRangePadding(t,e,this)},viewDidSetXDataDomain:function(t,e){this.owner.onSetScaledXDataDomain(t,e,this)},viewDidSetYDataDomain:function(t,e){this.owner.onSetScaledYDataDomain(t,e,this)}}),i.Gesture=fn.define({getXScale:function(){return 0!=(this.owner.scaledFlags&i.XScaleGesturesFlag)?this.owner.xScale():null},setXScale:function(t,e){0!=(this.owner.scaledFlags&i.XScaleGesturesFlag)&&this.owner.xScale(t,e)},getYScale:function(){return 0!=(this.owner.scaledFlags&i.YScaleGesturesFlag)?this.owner.yScale():null},setYScale:function(t,e){0!=(this.owner.scaledFlags&i.YScaleGesturesFlag)&&this.owner.yScale(t,e)},willStartInteracting:function(){this.owner.setScaledFlags(this.owner.scaledFlags&~i.BoundingMask|i.InteractingFlag)},didStopInteracting:function(){var t=this.owner.xScale.value,e=this.owner.xDataDomain;if(null!==t&&null!==e){var o=t.domain;o.contains(e[0])?this.owner.setScaledFlags(this.owner.scaledFlags|i.XMinInRangeFlag):this.owner.setScaledFlags(this.owner.scaledFlags&~i.XMinInRangeFlag),o.contains(e[1])?this.owner.setScaledFlags(this.owner.scaledFlags|i.XMaxInRangeFlag):this.owner.setScaledFlags(this.owner.scaledFlags&~i.XMaxInRangeFlag)}var n=this.owner.yScale.value,r=this.owner.yDataDomain;if(null!==n&&null!==r){var s=n.domain;s.contains(r[0])?this.owner.setScaledFlags(this.owner.scaledFlags|i.YMinInRangeFlag):this.owner.setScaledFlags(this.owner.scaledFlags&~i.YMinInRangeFlag),s.contains(r[1])?this.owner.setScaledFlags(this.owner.scaledFlags|i.YMaxInRangeFlag):this.owner.setScaledFlags(this.owner.scaledFlags&~i.YMaxInRangeFlag)}this.owner.setScaledFlags(this.owner.scaledFlags&~i.InteractingFlag|i.InteractedFlag)},didStopPressing:function(){this.owner.requireUpdate(ro.NeedsLayout)},willBeginCoast:function(t,e){0==(this.owner.scaledFlags&i.XScaleGesturesFlag)&&(t.disableX=!0,t.vx=0,t.ax=0),0==(this.owner.scaledFlags&i.YScaleGesturesFlag)&&(t.disableY=!0,t.vy=0,t.ay=0)}}),i.XDomainTrackingFlag=1,i.YDomainTrackingFlag=2,i.XScaleGesturesFlag=4,i.YScaleGesturesFlag=8,i.XMinInRangeFlag=16,i.XMaxInRangeFlag=32,i.YMinInRangeFlag=64,i.YMaxInRangeFlag=128,i.InteractingFlag=256,i.InteractedFlag=512,i.XBoundingFlag=1024,i.YBoundingFlag=2048,i.XFitFlag=4096,i.YFitFlag=8192,i.XFitTweenFlag=16384,i.YFitTweenFlag=32768,i.RescaleFlag=65536,i.DomainTrackingMask=i.XDomainTrackingFlag|i.YDomainTrackingFlag,i.ScaleGesturesMask=i.XScaleGesturesFlag|i.YScaleGesturesFlag,i.XInRangeMask=i.XMinInRangeFlag|i.XMaxInRangeFlag,i.YInRangeMask=i.YMinInRangeFlag|i.YMaxInRangeFlag,i.InteractingMask=i.InteractingFlag|i.InteractedFlag,i.BoundingMask=i.XBoundingFlag|i.YBoundingFlag,i.FitMask=i.XFitFlag|i.YFitFlag,i.FitTweenMask=i.XFitTweenFlag|i.YFitTweenFlag,i.LinearZoomMin=1e6,i.LinearZoomMax=.001,i.TimeZoomMin=864e5,i.TimeZoomMax=1,i.insertChildFlags=vr.insertChildFlags|ro.NeedsResize,m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onBeginBoundingXScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onEndBoundingXScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.XBoundingFlag)&&this.owner.onInterruptBoundingXScale(t)}})],i.prototype,"xScale",void 0),m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)},onBegin:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onBeginBoundingYScale(t)},onEnd:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onEndBoundingYScale(t)},onInterrupt:function(t){0!=(this.owner.scaledFlags&i.YBoundingFlag)&&this.owner.onInterruptBoundingYScale(t)}})],i.prototype,"yScale",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!0,!0]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"xDomainBounds",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!0,!0]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"yDomainBounds",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!0,!0]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"xZoomBounds",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!0,!0]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"yZoomBounds",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!1,!1]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"xDomainPadding",void 0),m([bo({updateFlags:ro.NeedsLayout,initState:function(){return[!1,!1]},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"yDomainPadding",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"xRangePadding",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)},equalState:function(t,i){return e.Arrays.equal(t,i)}})],i.prototype,"yRangePadding",void 0),m([bo({type:Object,initState:function(){return[1,.5]},equalState:function(t,i){return e.Arrays.equal(t,i)},fromAny:function(t){return"number"==typeof t?[t,t]:t}})],i.prototype,"fitAlign",void 0),m([bo({type:Number})],i.prototype,"fitAspectRatio",void 0),m([bo({type:l.Timing,inherit:!0,initState:function(){return l.Easing.linear.withDuration(250)}})],i.prototype,"rescaleTransition",void 0),m([bo({type:l.Timing,inherit:!0,initState:function(){return l.Easing.cubicOut.withDuration(250)}})],i.prototype,"reboundTransition",void 0),m([fn({extends:i.Gesture,self:!0})],i.prototype,"gesture",void 0),i}(vr),oa={is:function(t){if("object"==typeof t&&null!==t){return t instanceof na||t instanceof ra||t instanceof fr&&"plotType"in t}return!1},fromType:function(t){if("bubble"===t)return new sa;if("line"===t)return new la;if("area"===t)return new aa;throw new TypeError(""+t)},fromInit:function(t){var e=t.plotType;if("bubble"===e)return sa.fromInit(t);if("line"===e)return la.fromInit(t);if("area"===e)return aa.fromInit(t);throw new TypeError(""+t)},fromAny:function(t){if(this.is(t))return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)}},na=function(t){function i(){var e=t.call(this)||this;return e.dataPointFasteners=[],e.xDataDomain=null,e.yDataDomain=null,e.xDataRange=null,e.yDataRange=null,e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},i.prototype.willSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXScale&&r.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}},i.prototype.willSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYScale&&r.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXRangePadding&&r.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}},i.prototype.willSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYRangePadding&&r.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),this.xDataDomain=t,this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXDataDomain&&r.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}},i.prototype.updateXDataDomain=function(t){var i=t.x.getValue(),o=this.xDataDomain;null===o?o=l.Domain(i,i):e.Values.compare(i,o[0])<0?o=l.Domain(i,o[1]):e.Values.compare(o[1],i)<0&&(o=l.Domain(o[0],i)),this.setXDataDomain(o)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),this.yDataDomain=t,this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYDataDomain&&r.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=l.Domain(i,i):(e.Values.compare(i,n[0])<0?n=l.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=l.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=l.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=l.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){this.xDataRange=t},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){this.yDataRange=t},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),t=Xl.fromAny(t);for(var i=this.dataPointFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.view===t)return;s.view===e&&(o=n)}var l=this.createDataPointFastener(t);i.splice(o,0,l),l.setView(t,e),this.isMounted()&&l.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){for(var e=this.dataPointFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.view===t){n.setView(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){},i.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetDataPoint&&l.viewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetDataPoint&&l.viewDidSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.mountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},i.prototype.unmountDataPointFasteners=function(){for(var t=this.dataPointFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},i.prototype.detectDataPoint=function(t){return t instanceof Xl?t:null},i.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i);var o=this.detectDataPoint(e);null!==o&&this.insertDataPoint(o,i)},i.prototype.onRemoveChildView=function(e){t.prototype.onRemoveChildView.call(this,e);var i=this.detectDataPoint(e);null!==i&&this.removeDataPoint(i)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&ro.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var a,h,u,p,d=this.viewFrame,c=Math.min(d.width,d.height),f=0,v=0,y=0,g=0,w=null;t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){if(t instanceof Xl){var l=t.x.getValue(),m=t.y.getValue(),S=t.y2.value,C=t.radius.value,b=i(l),V=o(m);if(t.setXCoord(d.xMin+b),t.setYCoord(d.yMin+V),null!==w?(e.Values.compare(l,a)<0?a=l:e.Values.compare(h,l)<0&&(h=l),e.Values.compare(m,u)<0?u=m:e.Values.compare(p,m)<0&&(p=m),void 0!==S&&(e.Values.compare(S,u)<0?u=S:e.Values.compare(p,S)<0&&(p=S))):(a=l,h=l,u=m,p=m),null!==C){var T=C.pxValue(c);f=Math.max(T,f),v=Math.max(T,v),y=Math.max(T,y),g=Math.max(T,g)}w=t}s.call(this,t,n,r)})),this.setXDataDomain(null!==w?l.Domain(a,h):null),this.setYDataDomain(null!==w?l.Domain(u,p):null),this.xRangePadding.setState([f,v],ro.Intrinsic),this.yRangePadding.setState([y,g],ro.Intrinsic)},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("bubble"===t)return new sa;throw new TypeError(""+t)},i.fromInit=function(t){if("bubble"===t.plotType)return sa.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=Zo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},viewDidSetDataPointLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([Oo({type:St,state:null,inherit:!0})],i.prototype,"font",void 0),m([Oo({type:Tt,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(vr),ra=function(t){function i(){var e=t.call(this)||this;return e.dataPointFasteners=new u.BTree,e.xDataDomain=null,e.yDataDomain=null,e.xDataRange=null,e.yDataRange=null,e.gradientStops=0,e}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.xScale&&this.xScale(e.xScale),void 0!==e.yScale&&this.yScale(e.yScale);var i=e.data;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertDataPoint(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.hitMode&&this.hitMode(e.hitMode)},i.prototype.willSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXScale&&r.viewWillSetXScale(t,e,this)}},i.prototype.onSetXScale=function(t,e){this.updateXDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXScale&&r.viewDidSetXScale(t,e,this)}},i.prototype.willSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYScale&&r.viewWillSetYScale(t,e,this)}},i.prototype.onSetYScale=function(t,e){this.updateYDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYScale=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYScale&&r.viewDidSetYScale(t,e,this)}},i.prototype.xDomain=function(t,e,i){if(0===arguments.length){var o=this.xScale.value;return null!==o?o.domain:null}return this.xScale.setDomain(t,e,i),this},i.prototype.yDomain=function(t,e,i){if(0===arguments.length){var o=this.yScale.value;return null!==o?o.domain:null}return this.yScale.setDomain(t,e,i),this},i.prototype.xRange=function(){var t=this.xScale.value;return null!==t?t.range:null},i.prototype.yRange=function(){var t=this.yScale.value;return null!==t?t.range:null},i.prototype.willSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXRangePadding&&r.viewWillSetXRangePadding(t,e,this)}},i.prototype.onSetXRangePadding=function(t,e){},i.prototype.didSetXRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXRangePadding&&r.viewDidSetXRangePadding(t,e,this)}},i.prototype.willSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYRangePadding&&r.viewWillSetYRangePadding(t,e,this)}},i.prototype.onSetYRangePadding=function(t,e){},i.prototype.didSetYRangePadding=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYRangePadding&&r.viewDidSetYRangePadding(t,e,this)}},i.prototype.setXDataDomain=function(t){var i=this.xDataDomain;e.Equals(t,i)||(this.willSetXDataDomain(t,i),this.xDataDomain=t,this.onSetXDataDomain(t,i),this.didSetXDataDomain(t,i))},i.prototype.willSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetXDataDomain&&r.viewWillSetXDataDomain(t,e,this)}},i.prototype.onSetXDataDomain=function(t,e){this.updateXDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetXDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetXDataDomain&&r.viewDidSetXDataDomain(t,e,this)}},i.prototype.updateXDataDomain=function(t){var e,i=this.dataPointFasteners,o=i.firstKey(),n=i.lastKey();if(void 0!==o&&void 0!==n)e=l.Domain(o,n);else{var r=t.x.getValue();e=l.Domain(r,r)}this.setXDataDomain(e)},i.prototype.setYDataDomain=function(t){var i=this.yDataDomain;e.Equals(t,i)||(this.willSetYDataDomain(t,i),this.yDataDomain=t,this.onSetYDataDomain(t,i),this.didSetYDataDomain(t,i))},i.prototype.willSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetYDataDomain&&r.viewWillSetYDataDomain(t,e,this)}},i.prototype.onSetYDataDomain=function(t,e){this.updateYDataRange(),this.requireUpdate(ro.NeedsLayout)},i.prototype.didSetYDataDomain=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetYDataDomain&&r.viewDidSetYDataDomain(t,e,this)}},i.prototype.updateYDataDomain=function(t){var i=t.y.value,o=t.y2.value,n=this.yDataDomain;null===n?n=l.Domain(i,i):(e.Values.compare(i,n[0])<0?n=l.Domain(i,n[1]):e.Values.compare(n[1],i)<0&&(n=l.Domain(n[0],i)),void 0!==o&&(e.Values.compare(o,n[0])<0?n=l.Domain(o,n[1]):e.Values.compare(n[1],o)<0&&(n=l.Domain(n[0],o)))),this.setYDataDomain(n)},i.prototype.setXDataRange=function(t){this.xDataRange=t},i.prototype.updateXDataRange=function(){var t=this.xDataDomain;if(null!==t){var e=this.xScale.value;null!==e?this.setXDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setXDataRange(null)}},i.prototype.setYDataRange=function(t){this.yDataRange=t},i.prototype.updateYDataRange=function(){var t=this.yDataDomain;if(null!==t){var e=this.yScale.value;null!==e?this.setYDataRange(l.LinearRange(e(t[0]),e(t[1]))):this.setYDataRange(null)}},i.prototype.insertDataPoint=function(t,e){void 0===e&&(e=null),(t=Xl.fromAny(t)).remove();var i=t.x.getState();this.removeDataPoint(i);var o=this.createDataPointFastener(t);this.willInsertChildView(t,null),this.dataPointFasteners.set(i,o),o.setView(t,e),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),this.isMounted()&&o.mount()},i.prototype.insertDataPoints=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t.length;i<o;i+=1)this.insertDataPoint(t[i])},i.prototype.removeDataPoint=function(t){t instanceof Xl&&(t=t.x.getState());var e=this.dataPointFasteners.get(t);if(void 0!==e){var i=e.view;if(i.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}},i.prototype.initDataPoint=function(t,e){var i=t.label.view;null!==i&&this.initDataPointLabel(i,t,e)},i.prototype.attachDataPoint=function(t,e){this.updateXDataDomain(t),this.updateYDataDomain(t)},i.prototype.detachDataPoint=function(t,e){this.updateXDataDomain(t)},i.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewWillSetDataPoint&&l.viewWillSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,o),null!==t&&(this.attachDataPoint(t,o),this.initDataPoint(t,o))},i.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.viewObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.viewDidSetDataPoint&&l.viewDidSetDataPoint(t,e,i,this)}},i.prototype.onSetDataPointX=function(t,e,i,o){this.updateXDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointY=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointY2=function(t,e,i,o){this.updateYDataDomain(i),this.requireUpdate(ro.NeedsLayout)},i.prototype.initDataPointLabel=function(t,e,i){this.requireUpdate(ro.NeedsLayout)},i.prototype.onSetDataPointLabel=function(t,e,i,o){null!==t&&this.initDataPointLabel(t,i,o)},i.prototype.createDataPointFastener=function(t){return new i.DataPointFastener(this,t.key,"dataPoint")},i.prototype.getDataPointFastener=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e:null},i.prototype.getDataPointView=function(t){var e=this.dataPointFasteners.get(t);return void 0!==e?e.view:null},i.prototype.mountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.mount()}),this)},i.prototype.unmountDataPointFasteners=function(){this.dataPointFasteners.forEachValue((function(t){t.unmount()}),this)},Object.defineProperty(i.prototype,"childViewCount",{get:function(){return this.dataPointFasteners.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childViews",{get:function(){var t=[];return this.dataPointFasteners.forEachValue((function(e){t.push(e.view)}),this),t},enumerable:!1,configurable:!0}),i.prototype.firstChildView=function(){var t=this.dataPointFasteners.firstValue();return void 0!==t?t.view:null},i.prototype.lastChildView=function(){var t=this.dataPointFasteners.lastValue();return void 0!==t?t.view:null},i.prototype.nextChildView=function(t){if(t instanceof Xl){var e=this.dataPointFasteners.nextValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.previousChildView=function(t){if(t instanceof Xl){var e=this.dataPointFasteners.previousValue(t.x.getState());if(void 0!==e)return e.view}return null},i.prototype.forEachChildView=function(t,e){return this.dataPointFasteners.forEachValue((function(i){var o=t.call(e,i.view);if(void 0!==o)return o}),e)},i.prototype.getChildView=function(t){return null},i.prototype.setChildView=function(t,e){throw new Error("unsupported")},i.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Xl))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof Xl))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof Xl))throw new TypeError(""+t);this.insertDataPoint(t)},i.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof Xl))throw new TypeError(""+t);this.removeDataPoint(t.x.getState())},i.prototype.removeAll=function(){this.dataPointFasteners.forEach((function(t,e){var i=e.view;this.willRemoveChildView(i),i.setParentView(null,this),this.dataPointFasteners.delete(t),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0),e.setView(null),this.isMounted()&&e.unmount()}),this)},i.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.xScale.onAnimate(e.updateTime),this.yScale.onAnimate(e.updateTime),this.resizeScales(this.viewFrame)},i.prototype.resizeScales=function(t){var e=this.xScale.isInherited()?null:this.xScale.ownValue;null!==e&&e.range[1]!==t.width&&this.xScale.setRange(0,t.width);var i=this.yScale.isInherited()?null:this.yScale.ownValue;null!==i&&i.range[1]!==t.height&&this.yScale.setRange(0,t.height)},i.prototype.displayChildViews=function(e,i,o){var n,r;0!=(e&ro.NeedsLayout)&&null!==(n=this.xScale.value)&&null!==(r=this.yScale.value)?this.layoutChildViews(n,r,e,i,o):t.prototype.displayChildViews.call(this,e,i,o)},i.prototype.layoutChildViews=function(i,o,n,r,s){var a,h,u,p,d,c,f=this.viewFrame,v=0,y=null,g=null;if(t.prototype.displayChildViews.call(this,n,r,(function(t,n,r){var l=t,w=l.x.getValue(),m=l.y.getValue(),S=l.y2.value,C=i(w),b=o(m);l.setXCoord(f.xMin+C),l.setYCoord(f.yMin+b);var V=void 0!==S?o(S):void 0;if(void 0!==V?l.setY2Coord(f.yMin+V):void 0!==l.y2Coord&&l.setY2Coord(void 0),l.isGradientStop()&&(v+=1),null!==g){var T=void 0;T=null!==y?e.Values.compare(d,c)<0&&e.Values.compare(m,c)<0?"maxima":e.Values.compare(c,d)<0&&e.Values.compare(c,m)<0?"minima":e.Values.compare(d,c)<0&&e.Values.compare(c,m)<0?"increasing":e.Values.compare(c,d)<0&&e.Values.compare(m,c)<0?"decreasing":"flat":e.Values.compare(c,m)<0?"increasing":e.Values.compare(m,c)<0?"decreasing":"flat",g.category.setState(T,ro.Intrinsic),e.Values.compare(m,u)<0?u=m:e.Values.compare(p,m)<0&&(p=m),void 0!==S&&(e.Values.compare(S,u)<0?u=S:e.Values.compare(p,S)<0&&(p=S))}else a=w,h=w,u=m,p=m;y=g,g=l,d=c,c=m,h=w,s.call(this,t,n,r)})),null!==g){var w=void 0;w=null!==y?e.Values.compare(d,c)<0?"increasing":e.Values.compare(c,d)<0?"decreasing":"flat":"flat",g.category.setState(w,ro.Intrinsic)}this.setXDataDomain(null!==y?l.Domain(a,h):null),this.setYDataDomain(null!==y?l.Domain(u,p):null),this.gradientStops=v},i.prototype.didRender=function(e){var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;this.renderPlot(o,this.viewFrame)}t.prototype.didRender.call(this,e)},i.prototype.hitTest=function(t,e,i){var o=this.hitMode.state;if("none"!==o){var n=i.renderer;if(n instanceof br){var r=n.context;r.save();var s=void 0;return s="domain"===o?this.hitTestDomain(t,e,n):this.hitTestPlot(t,e,n),r.restore(),s}}return null},i.prototype.hitTestChildViews=function(t,e,i){return null},i.prototype.hitTestDomain=function(t,e,i){var o=this.xScale.value;if(null!==o){var n=o.inverse(t),r=this.dataPointFasteners.previousValue(n),s=this.dataPointFasteners.nextValue(n),l=void 0!==r?r.view.x.value:void 0,a=void 0!==s?s.view.x.value:void 0,h=void 0!==l?+n-+l:NaN,u=void 0!==a?+a-+n:NaN;if(h<=u)return r.view;if(h>u)return s.view;if(void 0!==r)return r.view;if(void 0!==s)return s.view}return null},i.prototype.mountViewFasteners=function(){t.prototype.mountViewFasteners.call(this),this.mountDataPointFasteners()},i.prototype.unmountViewFasteners=function(){this.unmountDataPointFasteners(),t.prototype.unmountViewFasteners.call(this)},i.fromType=function(t){if("line"===t)return new la;if("area"===t)return new aa;throw new TypeError(""+t)},i.fromInit=function(t){var e=t.plotType;if("line"===e)return la.fromInit(t);if("area"===e)return aa.fromInit(t);throw new TypeError(""+t)},i.fromAny=function(t){if(t instanceof i)return t;if("string"==typeof t)return this.fromType(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},i.DataPointFastener=Zo.define({child:!1,observe:!0,willSetView:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},onSetView:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this)},didSetView:function(t,e,i){this.owner.didSetDataPoint(t,e,i,this)},viewDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},viewDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},viewDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},viewDidSetDataPointLabel:function(t,e,i){this.owner.onSetDataPointLabel(t,e,i,this)}}),m([Oo({type:St,state:null,inherit:!0})],i.prototype,"font",void 0),m([Oo({type:Tt,state:null,inherit:!0})],i.prototype,"textColor",void 0),m([bo({type:String,state:"domain"})],i.prototype,"hitMode",void 0),m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetXScale(t,e)},didSetValue:function(t,e){this.owner.onSetXScale(t,e),this.owner.didSetXScale(t,e)}})],i.prototype,"xScale",void 0),m([Oo({extends:Jl,type:l.ContinuousScale,inherit:!0,state:null,willSetValue:function(t,e){this.owner.willSetYScale(t,e)},didSetValue:function(t,e){this.owner.onSetYScale(t,e),this.owner.didSetYScale(t,e)}})],i.prototype,"yScale",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetXRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetXRangePadding(t,e),this.owner.didSetXRangePadding(t,e)}})],i.prototype,"xRangePadding",void 0),m([bo({initState:function(){return[0,0]},willSetState:function(t,e){this.owner.willSetYRangePadding(t,e)},didSetState:function(t,e){this.owner.onSetYRangePadding(t,e),this.owner.didSetYRangePadding(t,e)}})],i.prototype,"yRangePadding",void 0),i}(fr),sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.radius&&this.radius(e.radius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"bubble"},enumerable:!1,configurable:!0}),e.prototype.willSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlotRadius&&r.viewWillSetPlotRadius(t,e,this)}},e.prototype.onSetRadius=function(t,e){},e.prototype.didSetRadius=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotRadius&&r.viewDidSetPlotRadius(t,e,this)}},e.prototype.willSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlotFill&&r.viewWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotFill&&r.viewDidSetPlotFill(t,e,this)}},e.prototype.renderPlot=function(t,e){for(var i=Math.min(e.width,e.height),o=this.radius.getValueOr(r.Length.zero()),n=this.fill.value,s=this.stroke.value,l=this.strokeWidth.value,a=this.dataPointFasteners,h=0,u=a.length;h<u;h+=1){var p=a[h].view;t.beginPath();var d=p.radius.getValueOr(o).pxValue(i);t.arc(p.xCoord,p.yCoord,d,0,2*Math.PI);var c=p.color.getValueOr(n);if(null!==c){var f=p.opacity.value;void 0!==f&&(c=c.alpha(f)),t.fillStyle=c.toString(),t.fill()}null!==s&&(null!==l&&(t.lineWidth=l.pxValue(i)),t.strokeStyle=s.toString(),t.stroke())}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:r.Length,state:r.Length.px(5),willSetValue:function(t,e){this.owner.willSetRadius(t,e)},didSetValue:function(t,e){this.owner.onSetRadius(t,e),this.owner.didSetRadius(t,e)}})],e.prototype,"radius",void 0),m([Oo({type:Tt,state:null,look:se.accentColor,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null})],e.prototype,"strokeWidth",void 0),e}(na),la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"line"},enumerable:!1,configurable:!0}),e.prototype.willSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlotStroke&&r.viewWillSetPlotStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotStroke&&r.viewDidSetPlotStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlotStrokeWidth&&r.viewWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){if(this.xRangePadding.takesPrecedence(ro.Intrinsic)||this.yRangePadding.takesPrecedence(ro.Intrinsic)){var i=this.viewFrame,o=Math.min(i.width,i.height),n=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(o)/2;this.xRangePadding.setState([n,n],ro.Intrinsic),this.yRangePadding.setState([n,n],ro.Intrinsic)}},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotStrokeWidth&&r.viewDidSetPlotStrokeWidth(t,e,this)}},e.prototype.renderPlot=function(t,e){var i,o,n,s=Math.min(e.width,e.height),l=this.stroke.getValueOr(Tt.transparent()),a=this.strokeWidth.getValueOr(r.Length.zero()).pxValue(s),h=this.gradientStops,u=null,p=this.dataPointFasteners;if(p.isEmpty())i=NaN,o=NaN,n=NaN;else{var d=p.firstValue().view,c=p.lastValue().view;i=d.xCoord,o=c.xCoord,n=o-i,0!==h&&(u=t.createLinearGradient(i,0,o,0))}t.beginPath();var f=0;p.forEach((function(e,o){var r=o.view,s=r.xCoord,a=r.yCoord;if(0===f?t.moveTo(s,a):t.lineTo(s,a),null!==u&&r.isGradientStop()){var h=r.color.getValueOr(l),p=r.opacity.value;void 0!==p&&(h=h.alpha(p));var d=(s-i)/(n||1);u.addColorStop(d,h.toString())}f+=1}),this),t.strokeStyle=null!==u?u:l.toString(),t.lineWidth=a,t.stroke()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.hitWidth.state,r=this.strokeWidth.value;if(null!==r){var s=this.viewFrame,l=Math.min(s.width,s.height);n=Math.max(n,r.pxValue(l))}o.beginPath();var a=0;this.dataPointFasteners.forEach((function(t,e){var i=e.view,n=i.xCoord,r=i.yCoord;0===a?o.moveTo(n,r):o.lineTo(n,r),a+=1}),this),o.lineWidth=n;var h=i.transform.transform(t,e);if(o.isPointInStroke(h.x,h.y)){var u=this.hitMode.state;if("plot"===u)return this;if("data"===u)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:Tt,state:null,look:se.accentColor,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:r.Length.px(1),willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([bo({type:Number,state:5})],e.prototype,"hitWidth",void 0),e}(ra),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill)},Object.defineProperty(e.prototype,"plotType",{get:function(){return"area"},enumerable:!1,configurable:!0}),e.prototype.willSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetPlotFill&&r.viewWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetPlotFill&&r.viewDidSetPlotFill(t,e,this)}},e.prototype.renderPlot=function(t,e){var i,o,n,r=this.fill.getValueOr(Tt.transparent()),s=this.gradientStops,l=null;t.beginPath();var a=this.dataPointFasteners;if(a.isEmpty())i=NaN,o=NaN,n=NaN;else{var h=a.firstValue().view,u=a.lastValue().view;if(i=h.xCoord,n=(o=u.xCoord)-i,t.moveTo(h.xCoord,h.yCoord),0!==s&&(l=t.createLinearGradient(i,0,o,0),h.isGradientStop())){var p=h.color.getValueOr(r);void 0!==(f=h.opacity.value)&&(p=p.alpha(f)),l.addColorStop(0,p.toString())}}var d=a.values();for(d.next();d.hasNext();){var c=d.next().value.view;if(t.lineTo(c.xCoord,c.yCoord),null!==l&&c.isGradientStop()){var f;p=c.color.value||r;void 0!==(f=c.opacity.value)&&(p=p.alpha(f));var v=(c.xCoord-i)/(n||1);l.addColorStop(v,p.toString())}}for(;d.hasPrevious();){c=d.previous().value.view;t.lineTo(c.xCoord,c.y2Coord)}a.isEmpty()||t.closePath(),t.fillStyle=null!==l?l:r.toString(),t.fill()},e.prototype.hitTestPlot=function(t,e,i){var o=i.context,n=this.dataPointFasteners;o.beginPath();var r=n.values();if(r.hasNext()){var s=r.next().value.view;o.moveTo(s.xCoord,s.yCoord)}for(;r.hasNext();){var l=r.next().value.view;o.lineTo(l.xCoord,l.yCoord)}for(;r.hasPrevious();){var a=r.previous().value.view;o.lineTo(a.xCoord,a.y2Coord)}n.isEmpty()||o.closePath();var h=i.transform.transform(t,e);if(o.isPointInPath(h.x,h.y)){var u=this.hitMode.state;if("plot"===u)return this;if("data"===u)return this.hitTestDomain(t,e,i)}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:Tt,state:null,look:se.accentColor,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),e}(ra),ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initDataSet=function(t){},e.prototype.attachDataSet=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachDataSet=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetDataSet&&s.traitWillSetDataSet(t,e,i,this)}},e.prototype.onSetDataSet=function(t,e,i){null!==e&&this.detachDataSet(e),null!==t&&(this.attachDataSet(t),this.initDataSet(t))},e.prototype.didSetDataSet=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetDataSet&&s.traitDidSetDataSet(t,e,i,this)}},e.prototype.detectDataSetTrait=function(t){return t instanceof Zl?t:null},e.prototype.detectTraits=function(t){if(null===this.dataSet.trait)for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectDataSetTrait(n);null!==r&&this.dataSet.setTrait(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.dataSet.trait){var o=this.detectDataSetTrait(e);null!==o&&this.dataSet.setTrait(o,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectDataSetTrait(e);null!==i&&this.dataSet.trait===i&&this.dataSet.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.dataSet.trait;null!==e&&e.removeTraitConsumer(this)},m([_({type:Zl,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetDataSet(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetDataSet(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetDataSet(t,e,i)}})],e.prototype,"dataSet",void 0),e}(ht),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(ha),pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(ha),da=function(t){function i(){var e=t.call(this)||this;return e.radius=null,e.fill=null,e}return w(i,t),i.prototype.setRadius=function(t){t=r.Length.fromAny(t);var i=this.radius;e.Equals(t,i)||(this.willSetRadius(t,i),this.radius=t,this.onSetRadius(t,i),this.didSetRadius(t,i))},i.prototype.willSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotRadius&&r.traitWillSetPlotRadius(t,e,this)}},i.prototype.onSetRadius=function(t,e){},i.prototype.didSetRadius=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotRadius&&r.traitDidSetPlotRadius(t,e,this)}},i.prototype.setFill=function(t){null===t||t instanceof se||(t=Tt.fromAny(t));var i=this.fill;e.Equals(t,i)||(this.willSetFill(t,i),this.fill=t,this.onSetFill(t,i),this.didSetFill(t,i))},i.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotFill&&r.traitWillSetPlotFill(t,e,this)}},i.prototype.onSetFill=function(t,e){},i.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotFill&&r.traitDidSetPlotFill(t,e,this)}},i}(ua),ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotStroke&&r.traitWillSetPlotStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotStroke&&r.traitDidSetPlotStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotStrokeWidth&&r.traitWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotStrokeWidth&&r.traitDidSetPlotStrokeWidth(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([N({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(pa),fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetPlotFill&&r.traitWillSetPlotFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetPlotFill&&r.traitDidSetPlotFill(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetFill(t,e)},didSetState:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"fill",void 0),e}(pa),va=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.createPlot=function(t){return t instanceof da?new wa:t instanceof ca?new ma:t instanceof fa?new Sa:null},m([ds({type:l.Timing,inherit:!0})],e.prototype,"plotTiming",void 0),e}(Ql),ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(va),ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(va),wa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(Zl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){null!==this.plot.view&&(this.setPlotRadius(t.radius),this.setPlotFill(t.fill))},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotTrait&&r.controllerWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotTrait&&r.controllerDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return sa.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;null!==e&&(this.setPlotRadius(e.radius),this.setPlotFill(e.fill));for(var i=this.dataPointFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;null!==r&&r.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotView&&r.controllerWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotView&&r.controllerDidSetPlotView(t,e,this)}},e.prototype.setPlotRadius=function(t,e){var i=this.plot.view;null!==i&&(void 0===e||!0===e?!0===(e=this.plotTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),i.radius.setState(t,e,ro.Intrinsic))},e.prototype.willSetPlotRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotRadius&&s.controllerWillSetPlotRadius(t,e,this)}},e.prototype.onSetPlotRadius=function(t,e,i){},e.prototype.didSetPlotRadius=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotRadius&&s.controllerDidSetPlotRadius(t,e,this)}},e.prototype.setPlotFill=function(t,e){var i=this.plot.view;null!==i&&(void 0===e||!0===e?!0===(e=this.plotTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.fill.setLook(t,e,ro.Intrinsic):i.fill.setState(t,e,ro.Intrinsic))},e.prototype.willSetPlotFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotFill&&s.controllerWillSetPlotFill(t,e,this)}},e.prototype.onSetPlotFill=function(t,e,i){},e.prototype.didSetPlotFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotFill&&s.controllerDidSetPlotFill(t,e,this)}},e.PlotFastener=Vs.define({viewType:sa,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewWillSetPlotRadius:function(t,e,i){this.owner.willSetPlotRadius(t,e,i)},viewDidSetPlotRadius:function(t,e,i){this.owner.onSetPlotRadius(t,e,i),this.owner.didSetPlotRadius(t,e,i)},viewWillSetPlotFill:function(t,e,i){this.owner.willSetPlotFill(t,e,i)},viewDidSetPlotFill:function(t,e,i){this.owner.onSetPlotFill(t,e,i),this.owner.didSetPlotFill(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:da,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotRadius:function(t,e){this.owner.setPlotRadius(t)},traitDidSetPlotFill:function(t,e){this.owner.setPlotFill(t)}}),m([Vs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(ya),ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(Zl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=this.plot.view;null!==o&&e.dataPoint.injectView(o)},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){if(null!==this.plot.view){var e=t.stroke.state;null!==e&&this.setPlotStroke(e);var i=t.strokeWidth.state;null!==i&&this.setPlotStrokeWidth(i)}},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotTrait&&r.controllerWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotTrait&&r.controllerDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return la.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;if(null!==e){var i=e.stroke.state;null!==i&&this.setPlotStroke(i);var o=e.strokeWidth.state;null!==o&&this.setPlotStrokeWidth(o)}for(var n=this.dataPointFasteners,r=0,s=n.length;r<s;r+=1){var l=n[r].controller;null!==l&&l.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotView&&r.controllerWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotView&&r.controllerDidSetPlotView(t,e,this)}},e.prototype.setPlotStroke=function(t,e){var i=this.plot.view;null!==i&&(void 0===e||!0===e?!0===(e=this.plotTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.stroke.setLook(t,e,ro.Intrinsic):i.stroke.setState(t,e,ro.Intrinsic))},e.prototype.willSetPlotStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotStroke&&s.controllerWillSetPlotStroke(t,e,this)}},e.prototype.onSetPlotStroke=function(t,e,i){},e.prototype.didSetPlotStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotStroke&&s.controllerDidSetPlotStroke(t,e,this)}},e.prototype.setPlotStrokeWidth=function(t,e){var i=this.plot.view;null!==i&&(void 0===e||!0===e?!0===(e=this.plotTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),i.strokeWidth.setState(t,e,ro.Intrinsic))},e.prototype.willSetPlotStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotStrokeWidth&&s.controllerWillSetPlotStrokeWidth(t,e,this)}},e.prototype.onSetPlotStrokeWidth=function(t,e,i){},e.prototype.didSetPlotStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotStrokeWidth&&s.controllerDidSetPlotStrokeWidth(t,e,this)}},e.PlotFastener=Vs.define({viewType:la,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewWillSetPlotStroke:function(t,e,i){this.owner.willSetPlotStroke(t,e,i)},viewDidSetPlotStroke:function(t,e,i){this.owner.onSetPlotStroke(t,e,i),this.owner.didSetPlotStroke(t,e,i)},viewWillSetPlotStrokeWidth:function(t,e,i){this.owner.willSetPlotStrokeWidth(t,e,i)},viewDidSetPlotStrokeWidth:function(t,e,i){this.owner.onSetPlotStrokeWidth(t,e,i),this.owner.didSetPlotStrokeWidth(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:ca,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotStroke:function(t,e){this.owner.setPlotStroke(t)},traitDidSetPlotStrokeWidth:function(t,e){this.owner.setPlotStrokeWidth(t)}}),m([Vs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(ga),Sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.detectDataSet=function(t){return t.getTrait(Zl)},e.prototype.attachDataPoint=function(e,i){t.prototype.attachDataPoint.call(this,e,i);var o=e.dataPoint.view;if(null!==o&&null===o.parentView){var n=this.plot.view;null!==n&&e.dataPoint.injectView(n)}},e.prototype.initPlotTrait=function(t){if(null===this.dataSet.trait){var e=this.detectDataSet(t);null!==e&&this.dataSet.setTrait(e)}},e.prototype.attachPlotTrait=function(t){if(null!==this.plot.view){var e=t.fill.state;null!==e&&this.setPlotFill(e)}},e.prototype.detachPlotTrait=function(t){},e.prototype.willSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotTrait&&r.controllerWillSetPlotTrait(t,e,this)}},e.prototype.onSetPlotTrait=function(t,e){null!==e&&this.detachPlotTrait(e),null!==t&&(this.attachPlotTrait(t),this.initPlotTrait(t))},e.prototype.didSetPlotTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotTrait&&r.controllerDidSetPlotTrait(t,e,this)}},e.prototype.createPlotView=function(){return aa.create()},e.prototype.initPlotView=function(t){},e.prototype.attachPlotView=function(t){var e=this.plot.trait;if(null!==e){var i=e.fill.state;null!==i&&this.setPlotFill(i)}for(var o=this.dataPointFasteners,n=0,r=o.length;n<r;n+=1){var s=o[n].controller;null!==s&&s.dataPoint.injectView(t)}},e.prototype.detachPlotView=function(t){},e.prototype.willSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetPlotView&&r.controllerWillSetPlotView(t,e,this)}},e.prototype.onSetPlotView=function(t,e){null!==e&&this.detachPlotView(e),null!==t&&(this.attachPlotView(t),this.initPlotView(t))},e.prototype.didSetPlotView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetPlotView&&r.controllerDidSetPlotView(t,e,this)}},e.prototype.setPlotFill=function(t,e){var i=this.plot.view;null!==i&&(void 0===e||!0===e?!0===(e=this.plotTiming.state)&&(e=i.getLook(se.timing,me.ambient)):e=l.Timing.fromAny(e),t instanceof se?i.fill.setLook(t,e,ro.Intrinsic):i.fill.setState(t,e,ro.Intrinsic))},e.prototype.willSetPlotFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotFill&&s.controllerWillSetPlotFill(t,e,this)}},e.prototype.onSetPlotFill=function(t,e,i){},e.prototype.didSetPlotFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotFill&&s.controllerDidSetPlotFill(t,e,this)}},e.PlotFastener=Vs.define({viewType:aa,observeView:!0,willSetView:function(t,e){this.owner.willSetPlotView(t,e)},onSetView:function(t,e){this.owner.onSetPlotView(t,e)},didSetView:function(t,e){this.owner.didSetPlotView(t,e)},viewWillSetPlotFill:function(t,e,i){this.owner.willSetPlotFill(t,e,i)},viewDidSetPlotFill:function(t,e,i){this.owner.onSetPlotFill(t,e,i),this.owner.didSetPlotFill(t,e,i)},createView:function(){return this.owner.createPlotView()},traitType:fa,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetPlotTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetPlotTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetPlotTrait(t,e)},traitDidSetPlotFill:function(t,e){this.owner.setPlotFill(t)}}),m([Vs({extends:e.PlotFastener})],e.prototype,"plot",void 0),e}(ga),Ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e);var i=e.plots;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.addPlot(i[o]);void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.addPlot=function(t,e){t=oa.fromAny(t),this.appendChildView(t)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;if(i instanceof br){var o=i.context;o.save(),this.clipGraph(o,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof br&&i.context.restore();t.prototype.didRender.call(this,e)},e.prototype.clipGraph=function(t,e){t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()},e.prototype.hitTest=function(t,e,i){return this},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:St,inherit:!0,state:null})],e.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(ia),ba=function(t){function e(){var e=t.call(this)||this;return e.plotFasteners=[],e}return w(e,t),e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createPlotFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initPlot=function(t,e){},e.prototype.attachPlot=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachPlot=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetPlot&&l.traitWillSetPlot(t,e,i,this)}},e.prototype.onSetPlot=function(t,e,i,o){null!==e&&this.detachPlot(e,o),null!==t&&(this.attachPlot(t,o),this.initPlot(t,o))},e.prototype.didSetPlot=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetPlot&&l.traitDidSetPlot(t,e,i,this)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingPlots=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectPlotModel=function(t){return t.getTrait(ha)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectPlotModel(n);null!==r&&this.insertPlot(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectPlotModel(e);if(null!==o){var n=null!==i?this.detectPlotModel(i):null;this.insertPlot(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectPlotModel(e);null!==i&&this.removePlot(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingPlots()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingPlots()},e.PlotFastener=_.define({type:ha,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetPlot(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetPlot(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetPlot(t,e,i,this)}}),e}(ht),Va=function(t){function e(){var e=t.call(this)||this;return e.plotFasteners=[],e}return w(e,t),e.prototype.initGraphTrait=function(t){},e.prototype.attachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertPlotTrait(n)}},e.prototype.detachGraphTrait=function(t){for(var e=t.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removePlotTrait(n)}},e.prototype.willSetGraphTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGraphTrait&&r.controllerWillSetGraphTrait(t,e,this)}},e.prototype.onSetGraphTrait=function(t,e){null!==e&&this.detachGraphTrait(e),null!==t&&(this.attachGraphTrait(t),this.initGraphTrait(t))},e.prototype.didSetGraphTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGraphTrait&&r.controllerDidSetGraphTrait(t,e,this)}},e.prototype.createGraphView=function(){return Ca.create()},e.prototype.initGraphView=function(t){},e.prototype.attachGraphView=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].controller;if(null!==n){var r=n.plot.view;null!==r&&null===r.parentView&&n.plot.injectView(t)}}},e.prototype.detachGraphView=function(t){},e.prototype.willSetGraphView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGraphView&&r.controllerWillSetGraphView(t,e,this)}},e.prototype.onSetGraphView=function(t,e){null!==e&&this.detachGraphView(e),null!==t&&(this.attachGraphView(t),this.initGraphView(t))},e.prototype.didSetGraphView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGraphView&&r.controllerDidSetGraphView(t,e,this)}},e.prototype.insertPlot=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createPlotFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removePlot=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createPlot=function(t){return va.createPlot(t)},e.prototype.initPlot=function(t,e){var i=t.plot.trait;null!==i&&this.initPlotTrait(i,e);var o=t.plot.view;null!==o&&this.initPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.initDataSetTrait(n,e)},e.prototype.attachPlot=function(t,e){var i=t.plot.trait;null!==i&&this.attachPlotTrait(i,e);var o=t.plot.view;null!==o&&this.attachPlotView(o,e);var n=t.dataSet.trait;null!==n&&this.attachDataSetTrait(n,e)},e.prototype.detachPlot=function(t,e){var i=t.dataSet.trait;null!==i&&this.detachDataSetTrait(i,e);var o=t.plot.view;null!==o&&this.detachPlotView(o,e);var n=t.plot.trait;null!==n&&this.detachPlotTrait(n,e)},e.prototype.willSetPlot=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlot&&s.controllerWillSetPlot(t,e,i)}},e.prototype.onSetPlot=function(t,e,i){null!==e&&this.detachPlot(e,i),null!==t&&(this.attachPlot(t,i),this.initPlot(t,i))},e.prototype.didSetPlot=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlot&&s.controllerDidSetPlot(t,e,i)}},e.prototype.insertPlotTrait=function(t,e){void 0===e&&(e=null);for(var i=this.plotFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.plot.trait===t)return;s.plot.trait===e&&(o=s)}}var l=this.createPlot(t);if(null!==l&&(l.plot.setTrait(t),this.insertChildController(l,o),null===l.plot.view)){var a=this.createPlotView(l),h=null;null!==o&&(h=o.plot.view);var u=this.graph.view;null!==u?l.plot.injectView(u,a,h,null):l.plot.setView(a,h)}},e.prototype.removePlotTrait=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.plot.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initPlotTrait=function(t,e){},e.prototype.attachPlotTrait=function(t,e){},e.prototype.detachPlotTrait=function(t,e){},e.prototype.willSetPlotTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotTrait&&s.controllerWillSetPlotTrait(t,e,i)}},e.prototype.onSetPlotTrait=function(t,e,i){null!==e&&this.detachPlotTrait(e,i),null!==t&&(this.attachPlotTrait(t,i),this.initPlotTrait(t,i))},e.prototype.didSetPlotTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotTrait&&s.controllerDidSetPlotTrait(t,e,i)}},e.prototype.createPlotView=function(t){return t.plot.createView()},e.prototype.initPlotView=function(t,e){},e.prototype.attachPlotView=function(t,e){},e.prototype.detachPlotView=function(t,e){t.remove()},e.prototype.willSetPlotView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetPlotView&&s.controllerWillSetPlotView(t,e,i)}},e.prototype.onSetPlotView=function(t,e,i){null!==e&&this.detachPlotView(e,i),null!==t&&(this.attachPlotView(t,i),this.initPlotView(t,i))},e.prototype.didSetPlotView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetPlotView&&s.controllerDidSetPlotView(t,e,i)}},e.prototype.initDataSetTrait=function(t,e){},e.prototype.attachDataSetTrait=function(t,e){},e.prototype.detachDataSetTrait=function(t,e){},e.prototype.willSetDataSetTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetDataSetTrait&&s.controllerWillSetDataSetTrait(t,e,i)}},e.prototype.onSetDataSetTrait=function(t,e,i){null!==e&&this.detachDataSetTrait(e,i),null!==t&&(this.attachDataSetTrait(t,i),this.initDataSetTrait(t,i))},e.prototype.didSetDataSetTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetDataSetTrait&&s.controllerDidSetDataSetTrait(t,e,i)}},e.prototype.initDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.initDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.initDataPointView(n,e,i)},e.prototype.attachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.attachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.attachDataPointView(n,e,i)},e.prototype.detachDataPoint=function(t,e,i){var o=t.dataPoint.trait;null!==o&&this.detachDataPointTrait(o,e,i);var n=t.dataPoint.view;null!==n&&this.detachDataPointView(n,e,i)},e.prototype.willSetDataPoint=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetDataPoint&&l.controllerWillSetDataPoint(t,e,i,o)}},e.prototype.onSetDataPoint=function(t,e,i,o){null!==e&&this.detachDataPoint(e,i,o),null!==t&&(this.attachDataPoint(t,i,o),this.initDataPoint(t,i,o))},e.prototype.didSetDataPoint=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetDataPoint&&l.controllerDidSetDataPoint(t,e,i,o)}},e.prototype.initDataPointTrait=function(t,e,i){},e.prototype.attachDataPointTrait=function(t,e,i){},e.prototype.detachDataPointTrait=function(t,e,i){},e.prototype.willSetDataPointTrait=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetDataPointTrait&&l.controllerWillSetDataPointTrait(t,e,i,o)}},e.prototype.onSetDataPointTrait=function(t,e,i,o){null!==e&&this.detachDataPointTrait(e,i,o),null!==t&&(this.attachDataPointTrait(t,i,o),this.initDataPointTrait(t,i,o))},e.prototype.didSetDataPointTrait=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetDataPointTrait&&l.controllerDidSetDataPointTrait(t,e,i,o)}},e.prototype.initDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.initDataPointLabelView(o,e,i)},e.prototype.attachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.attachDataPointLabelView(o,e,i)},e.prototype.detachDataPointView=function(t,e,i){var o=t.label.view;null!==o&&this.detachDataPointLabelView(o,e,i)},e.prototype.willSetDataPointView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerWillSetDataPointView&&l.controllerWillSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointView=function(t,e,i,o){null!==e&&this.detachDataPointView(e,i,o),null!==t&&(this.attachDataPointView(t,i,o),this.initDataPointView(t,i,o))},e.prototype.didSetDataPointView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetDataPointView&&l.controllerDidSetDataPointView(t,e,i,o)}},e.prototype.onSetDataPointX=function(t,e,i,o){},e.prototype.onSetDataPointY=function(t,e,i,o){},e.prototype.onSetDataPointY2=function(t,e,i,o){},e.prototype.onSetDataPointRadius=function(t,e,i,o){},e.prototype.onSetDataPointColor=function(t,e,i,o){},e.prototype.onSetDataPointOpacity=function(t,e,i,o){},e.prototype.initDataPointLabelView=function(t,e,i){},e.prototype.attachDataPointLabelView=function(t,e,i){},e.prototype.detachDataPointLabelView=function(t,e,i){},e.prototype.willSetDataPointLabelView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllertWillSetDataPointLabelView&&l.controllertWillSetDataPointLabelView(t,e,i,o)}},e.prototype.onSetDataPointLabelView=function(t,e,i,o){null!==e&&this.detachDataPointLabelView(e,i,o),null!==t&&(this.attachDataPointLabelView(t,i,o),this.initDataPointLabelView(t,i,o))},e.prototype.didSetDataPointLabelView=function(t,e,i,o){for(var n=this.controllerObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.controllerDidSetDataPointLabelView&&l.controllerDidSetDataPointLabelView(t,e,i,o)}},e.prototype.createPlotFastener=function(t){return new e.PlotFastener(this,t.key,"plot")},e.prototype.getPlotFastener=function(t){for(var e=this.plotFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.plot.trait===t)return n}return null},e.prototype.mountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountPlotFasteners=function(){for(var t=this.plotFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectPlotController=function(t){return t instanceof va?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectPlotController(e);null!==o&&this.insertPlot(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectPlotController(e);null!==i&&this.removePlot(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountPlotFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountPlotFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.GraphFastener=Vs.define({viewType:Ca,willSetView:function(t,e){this.owner.willSetGraphView(t,e)},onSetView:function(t,e){this.owner.onSetGraphView(t,e)},didSetView:function(t,e){this.owner.didSetGraphView(t,e)},createView:function(){return this.owner.createGraphView()},traitType:ba,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGraphTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGraphTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGraphTrait(t,e)},traitWillSetPlot:function(t,e,i){null!==e&&this.owner.removePlotTrait(e)},traitDidSetPlot:function(t,e,i){null!==t&&this.owner.insertPlotTrait(t,i)}}),e.PlotFastener=Fs.define({type:va,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetPlot(t,e,this)},onSetController:function(t,e){this.owner.onSetPlot(t,e,this)},didSetController:function(t,e){this.owner.didSetPlot(t,e,this)},controllerWillSetPlotTrait:function(t,e){this.owner.willSetPlotTrait(t,e,this)},controllerDidSetPlotTrait:function(t,e){this.owner.onSetPlotTrait(t,e,this),this.owner.didSetPlotTrait(t,e,this)},controllerWillSetPlotView:function(t,e){this.owner.willSetPlotView(t,e,this)},controllerDidSetPlotView:function(t,e){this.owner.onSetPlotView(t,e,this),this.owner.didSetPlotView(t,e,this)},controllerWillSetDataSetTrait:function(t,e){this.owner.willSetDataSetTrait(t,e,this)},controllerDidSetDataSetTrait:function(t,e){this.owner.onSetDataSetTrait(t,e,this),this.owner.didSetDataSetTrait(t,e,this)},controllerWillSetDataPoint:function(t,e,i){this.owner.willSetDataPoint(t,e,i,this)},controllerDidSetDataPoint:function(t,e,i){this.owner.onSetDataPoint(t,e,i,this),this.owner.didSetDataPoint(t,e,i,this)},controllerWillSetDataPointTrait:function(t,e,i){this.owner.willSetDataPointTrait(t,e,i,this)},controllerDidSetDataPointTrait:function(t,e,i){this.owner.onSetDataPointTrait(t,e,i,this),this.owner.didSetDataPointTrait(t,e,i,this)},controllerWillSetDataPointView:function(t,e,i){this.owner.willSetDataPointView(t,e,i,this)},controllerDidSetDataPointView:function(t,e,i){this.owner.onSetDataPointView(t,e,i,this),this.owner.didSetDataPointView(t,e,i,this)},controllerDidSetDataPointX:function(t,e,i){this.owner.onSetDataPointX(t,e,i,this)},controllerDidSetDataPointY:function(t,e,i){this.owner.onSetDataPointY(t,e,i,this)},controllerDidSetDataPointY2:function(t,e,i){this.owner.onSetDataPointY2(t,e,i,this)},controllerDidSetDataPointRadius:function(t,e,i){this.owner.onSetDataPointRadius(t,e,i,this)},controllerDidSetDataPointColor:function(t,e,i){this.owner.onSetDataPointColor(t,e,i,this)},controllertWillSetDataPointLabelView:function(t,e,i){this.owner.willSetDataPointLabelView(t,e,i,this)},controllerDidSetDataPointLabelView:function(t,e,i){this.owner.onSetDataPointLabelView(t,e,i,this),this.owner.didSetDataPointLabelView(t,e,i,this)}}),m([Vs({extends:e.GraphFastener})],e.prototype,"graph",void 0),e}(Ds),Ta=Math.sqrt(50),Fa=Math.sqrt(10),Pa=Math.sqrt(2),Ma=1e3,Da=6e4,xa=36e5,La=24*xa,Aa=30*La,Oa=365*La,Ra=(new u.BTree).set(Ma,a.TimeInterval.second).set(5e3,a.TimeInterval.second.every(5)).set(15e3,a.TimeInterval.second.every(15)).set(3e4,a.TimeInterval.second.every(30)).set(Da,a.TimeInterval.minute).set(3e5,a.TimeInterval.minute.every(5)).set(9e5,a.TimeInterval.minute.every(15)).set(18e5,a.TimeInterval.minute.every(30)).set(xa,a.TimeInterval.hour).set(3*xa,a.TimeInterval.hour.every(3)).set(6*xa,a.TimeInterval.hour.every(6)).set(12*xa,a.TimeInterval.hour.every(12)).set(La,a.TimeInterval.day).set(2*La,a.TimeInterval.day.every(2)).set(6048e5,a.TimeInterval.week).set(Aa,a.TimeInterval.month).set(3*Aa,a.TimeInterval.month.every(3)).set(Oa,a.TimeInterval.year),Ia=a.DateTimeFormat.pattern(".%L"),ka=a.DateTimeFormat.pattern(":%S"),Wa=a.DateTimeFormat.pattern("%I:%M"),Ea=a.DateTimeFormat.pattern("%I %p"),Na=a.DateTimeFormat.pattern("%a %d"),Ua=a.DateTimeFormat.pattern("%b %d"),Ga=a.DateTimeFormat.pattern("%B"),Ba=a.DateTimeFormat.pattern("%Y"),ja=function(){function t(){}return t.prototype.format=function(t){return""+t},t.fromScale=function(t,e){if(void 0===e&&(e=10),t instanceof a.TimeScale){var i=t.domain;return new qa(i[0],i[1],e)}if(t instanceof l.LinearScale){i=t.domain;return new Ha(i[0],i[1],e)}throw new TypeError(""+t)},t.step=function(t,e){var i=Math.abs(t)/e,o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),n=i/o;return n>=Ta?o*=10:n>=Fa?o*=5:n>=Pa&&(o*=2),t<0?-o:o},t}(),Ha=function(t){function e(e,i,o){var n=t.call(this)||this;return n.x0=e,n.dx=i-n.x0,n.n=Math.max(0,o),n}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?l.LinearDomain(this.x0,this.x0+this.dx):void 0===e?(this.x0=t[0],this.dx=t[1]-this.x0,this):(this.x0=t,this.dx=e-this.x0,this)},e.prototype.generate=function(){var t,i;this.dx<0?t=(i=this.x0)+this.dx:i=(t=this.x0)+this.dx;var o,n=e.interval(i-t,this.n);if(0===n||!isFinite(n))return[];if(n>0){t=Math.ceil(t/n),i=Math.floor(i/n);var r=Math.ceil(i-t+1);o=new Array(r);for(var s=0;s<r;s+=1)o[s]=(t+s)*n}else{t=Math.floor(t*n),i=Math.ceil(i*n);r=Math.ceil(t-i+1);o=new Array(r);for(s=0;s<r;s+=1)o[s]=(t-s)/n}return this.dx<0&&o.reverse(),o},e.interval=function(t,e){void 0===e&&(e=10);var i=t/e,o=Math.floor(Math.log(i)/Math.LN10),n=Math.pow(10,o),r=i/n,s=r>=Ta?10:r>=Fa?5:r>=Pa?2:1;return o>=0?n*s:-Math.pow(10,-o)/s},e}(ja),qa=function(t){function e(e,i,o,n){var r=t.call(this)||this,s=a.DateTime.fromAny(e),l=a.DateTime.fromAny(i);return r.t0=s.time,r.dt=l.time-r.t0,r.zone=void 0!==n?n:s.zone,r.n=Math.max(0,o),r}return w(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?a.TimeDomain(new a.DateTime(this.t0,this.zone),new a.DateTime(this.t0+this.dt,this.zone)):(void 0===e?(e=t[1],t=t[0]):t=t,t=a.DateTime.fromAny(t),e=a.DateTime.fromAny(e),this.t0=t.time,this.dt=e.time-this.t0,this)},e.prototype.generate=function(t){var i,o;this.dt<0?i=(o=this.t0)+this.dt:o=(i=this.t0)+this.dt,void 0===t&&(t=this.n);var n=(t=e.interval(o-i,t)).range(new a.DateTime(i,this.zone),new a.DateTime(o+1,this.zone));return this.dt<0&&n.reverse(),n},e.prototype.format=function(t){return a.TimeInterval.second.floor(t)<t?Ia.format(t):a.TimeInterval.minute.floor(t)<t?ka.format(t):a.TimeInterval.hour.floor(t)<t?Wa.format(t):a.TimeInterval.day.floor(t)<t?Ea.format(t):a.TimeInterval.month.floor(t)<t?a.TimeInterval.week.floor(t)<t?Na.format(t):Ua.format(t):a.TimeInterval.year.floor(t)<t?Ga.format(t):Ba.format(t)},e.interval=function(t,e){if(void 0===e&&(e=10),"number"==typeof e){var i=Math.abs(t)/e,o=Ra.nextKey(i);if(void 0===o){var n=ja.step(t/Oa,e);e=a.TimeInterval.year.every(n)}else if(o>Ma)e=i/Ra.previousKey(i)<o/i?Ra.previousValue(i):Ra.nextValue(i);else{n=Math.max(1,ja.step(t,e));e=a.TimeInterval.millisecond.every(n)}}return e},e}(ja);t.TickState=void 0,(Ll=t.TickState||(t.TickState={}))[Ll.Excluded=0]="Excluded",Ll[Ll.Entering=1]="Entering",Ll[Ll.Included=2]="Included",Ll[Ll.Leaving=3]="Leaving";var za=function(t){function e(e){var i=t.call(this)||this;return i.value=e,i.offset=0,i.tickState=0,i.preserved=!0,i}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor),void 0!==e.label&&this.label(e.label)},e.prototype.setOffset=function(t){this.offset=t},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetTickLabel&&r.viewWillSetTickLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetTickLabel&&r.viewDidSetTickLabel(t,e,this)}},e.prototype.preserve=function(t){return void 0===t?this.preserved:(this.preserved=t,this)},e.prototype.fadeIn=function(t){0!==this.tickState&&3!==this.tickState||(this.opacity.setState(1,t),this.tickState=1)},e.prototype.fadeOut=function(t){1!==this.tickState&&2!==this.tickState||(this.opacity.setState(0,t),this.tickState=3)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label.view;null!==i&&this.layoutLabel(i)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof br&&i.context.save()},e.prototype.onRender=function(t){var e=t.renderer;if(e instanceof br&&!this.isHidden()&&!this.isCulled()){var i=e.context;i.globalAlpha=this.opacity.getValue(),this.renderTick(i,this.viewFrame)}},e.prototype.didRender=function(e){var i=e.renderer;i instanceof br&&i.context.restore();t.prototype.didRender.call(this,e)},e.top=function(t){return new Ya(t)},e.right=function(t){return new Xa(t)},e.bottom=function(t){return new Ka(t)},e.left=function(t){return new Za(t)},e.from=function(t,e){if("top"===e)return this.top(t);if("right"===e)return this.right(t);if("bottom"===e)return this.bottom(t);if("left"===e)return this.left(t);throw new TypeError(e)},e.fromInit=function(t,e){if(void 0!==t.orientation&&(e=t.orientation),void 0===e)throw new TypeError;var i=this.from(t.value,e);return i.initView(t),i},e.fromAny=function(t,i){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t,i);throw new TypeError(""+t)},m([Oo({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"anchor",void 0),m([Oo({type:Number,state:1})],e.prototype,"opacity",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([Oo({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([Oo({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([Oo({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([Oo({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([Oo({type:St,inherit:!0,state:null})],e.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"textColor",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),e}(vr),Ya=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),t.textBaseline.setState("bottom",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(i,o),ro.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=n-r,l=this.tickMarkColor.value,a=this.tickMarkWidth.getValue();null!==l&&0!==a&&0!==r&&(t.beginPath(),t.strokeStyle=l.toString(),t.lineWidth=a,t.moveTo(o,n),t.lineTo(o,s),t.stroke());var h=this.gridLineColor.value,u=this.gridLineWidth.getValue();null!==h&&0!==u&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=h.toString(),t.lineWidth=u,t.moveTo(o,n),t.lineTo(o,e.yMax),t.stroke())},e}(za),Xa=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Or.is(t)&&(t.textAlign.setState("left",ro.Intrinsic),t.textBaseline.setState("middle",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(n,o),ro.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=o+r,l=this.tickMarkColor.value,a=this.tickMarkWidth.getValue();null!==l&&0!==a&&0!==r&&(t.beginPath(),t.strokeStyle=l.toString(),t.lineWidth=a,t.moveTo(o,n),t.lineTo(s,n),t.stroke());var h=this.gridLineColor.value,u=this.gridLineWidth.getValue();null!==h&&0!==u&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=h.toString(),t.lineWidth=u,t.moveTo(o,n),t.lineTo(e.xMin,n),t.stroke())},e}(za),Ka=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y)+this.tickMarkLength.getValue()+this.tickLabelPadding.getValue();Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),t.textBaseline.setState("top",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(i,o),ro.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=n+r,l=this.tickMarkColor.value,a=this.tickMarkWidth.getValue();null!==l&&0!==a&&0!==r&&(t.beginPath(),t.strokeStyle=l.toString(),t.lineWidth=a,t.moveTo(o,n),t.lineTo(o,s),t.stroke());var h=this.gridLineColor.value,u=this.gridLineWidth.getValue();null!==h&&0!==u&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=h.toString(),t.lineWidth=u,t.moveTo(o,n),t.lineTo(o,e.yMin),t.stroke())},e}(za),Za=function(t){function e(e){return t.call(this,e)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutLabel=function(t){var e=this.anchor.getValue(),i=Math.round(e.x),o=Math.round(e.y),n=i-this.tickMarkLength.getValue()-this.tickLabelPadding.getValue();Or.is(t)&&(t.textAlign.setState("right",ro.Intrinsic),t.textBaseline.setState("middle",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(n,o),ro.Intrinsic))},e.prototype.renderTick=function(t,e){var i=this.anchor.getValue(),o=Math.round(i.x),n=Math.round(i.y),r=this.tickMarkLength.getValue(),s=o-r,l=this.tickMarkColor.value,a=this.tickMarkWidth.getValue();null!==l&&0!==a&&0!==r&&(t.beginPath(),t.strokeStyle=l.toString(),t.lineWidth=a,t.moveTo(o,n),t.lineTo(s,n),t.stroke());var h=this.gridLineColor.value,u=this.gridLineWidth.getValue();null!==h&&0!==u&&e.yMin<n&&n<e.yMax&&(t.beginPath(),t.strokeStyle=h.toString(),t.lineWidth=u,t.moveTo(o,n),t.lineTo(e.xMax,n),t.stroke())},e}(za),_a=function(t){function e(){var e=t.call(this)||this;return e.ticks=new u.BTree,e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.scale&&this.scale(e.scale);var i=e.ticks;if(void 0!==i)for(var o=0,n=i.length;o<n;o+=1)this.insertTick(i[o]);void 0!==e.tickGenerator&&this.tickGenerator(e.tickGenerator),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkSpacing&&this.tickMarkSpacing(e.tickMarkSpacing),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.getTick=function(t){var e=this.ticks.get(t);return void 0!==e?e:null},e.prototype.insertTick=function(t){return(t=za.fromAny(t,this.orientation)).remove(),this.willInsertChildView(t,null),this.ticks.set(t.value,t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert(),t},e.prototype.removeTick=function(t){var e=this.ticks.get(t);if(void 0!==e){if(e.parentView!==this)throw new Error("not a child view");return this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),e}return null},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.ticks.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.ticks.forEachValue((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.ticks.firstValue();return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.ticks.lastValue();return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t instanceof za){var e=this.ticks.nextValue(t.value);if(void 0!==e)return e}return null},e.prototype.previousChildView=function(t){if(t instanceof za){var e=this.ticks.previousValue(t.value);if(void 0!==e)return e}return null},e.prototype.forEachChildView=function(t,e){return this.ticks.forEachValue(t,e)},e.prototype.getChildView=function(t){return null},e.prototype.setChildView=function(t,e){throw new Error("unsupported")},e.prototype.appendChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof za))throw new TypeError(""+t);this.insertTick(t)},e.prototype.prependChildView=function(t,e){if(void 0!==e)throw new Error("unsupported");if(!(t instanceof za))throw new TypeError(""+t);this.insertTick(t)},e.prototype.insertChildView=function(t,e,i){if(void 0!==i)throw new Error("unsupported");if(!(t instanceof za))throw new TypeError(""+t);this.insertTick(t)},e.prototype.removeChildView=function(t){if("string"==typeof t)throw new Error("unsupported");if(!(t instanceof za))throw new TypeError(""+t);this.removeTick(t.value)},e.prototype.removeAll=function(){this.ticks.forEach((function(t,e){this.willRemoveChildView(e),e.setParentView(null,this),this.ticks.delete(t),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0)}),this)},e.prototype.updateTicks=function(){var t=this.scale.value,e=this.tickGenerator.state;if(null!==t&&null!==e){var i=this.tickTransition.state;!0===e&&(e=ja.fromScale(t),this.tickGenerator.setState(e),i=!1),this.generateTicks(e,t,i)}},e.prototype.generateTicks=function(t,e,i){var o=this.tickMarkSpacing.getValue();if(0!==o){var n=e.range,r=Math.abs(n[1]-n[0]),s=Math.max(1,Math.floor(r/o));t.count(s)}t.domain(e.domain);var l=this.ticks.clone(),a=t.generate(),h=0;for(s=a.length;h<s;h+=1){var u=a[h],p=l.get(u);if(void 0!==p)l.delete(u),p.fadeIn(i);else{var d=this.createTickView(u);null!==d&&(this.insertTick(d),d.opacity.setIntermediateValue(0,0),d.fadeIn(i))}}l.forEachValue((function(t){t.preserved||t.fadeOut(i)}),this)},e.prototype.createTickView=function(t){var e=za.from(t,this.orientation);if(null!==e){var i=this.createTickLabel(t,e);null!==i&&(e.label(i),e.preserve(!1))}return e},e.prototype.createTickLabel=function(t,e){for(var i=null,o=this.viewObservers,n=0,r=o.length;n<r&&null==i;n+=1){var s=o[n];void 0!==s.createTickLabel&&(i=s.createTickLabel(t,e,this))}if(null==i){var l=this.tickGenerator.state;i=l instanceof ja?l.format(t):""+t}return"string"==typeof i&&(i=this.formatTickLabel(i,e)),i},e.prototype.formatTickLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];if(void 0!==r.formatTickLabel){var s=r.formatTickLabel(t,e,this);if(void 0!==s)return s}}return t},e.prototype.needsDisplay=function(t,e){return 0==(this.viewFlags&ro.NeedsLayout)&&(t&=~ro.NeedsLayout),t},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.scale.onAnimate(e.updateTime),this.updateTicks()},e.prototype.displayChildView=function(e,i,o){if(0!=(i&ro.NeedsLayout)&&e instanceof za){var n=this.scale.value;null!==n&&this.layoutTick(e,this.origin.getValue(),this.viewFrame,n)}t.prototype.displayChildView.call(this,e,i,o)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e);var i=e.renderer;i instanceof br&&i.context.save()},e.prototype.didRender=function(e){var i=e.renderer;if(i instanceof br){var o=i.context;this.renderDomain(o,this.origin.getValue(),this.viewFrame),o.restore()}t.prototype.didRender.call(this,e)},e.fromInit=function(t){var e=t.orientation;if("top"===e)return Qa.fromInit(t);if("right"===e)return Ja.fromInit(t);if("bottom"===e)return $a.fromInit(t);if("left"===e)return th.fromInit(t);throw new Error("unknown axis orientation: "+e)},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t){var i=t.orientation;if("top"===i)return Qa.fromAny(t);if("right"===i)return Ja.fromAny(t);if("bottom"===i)return $a.fromAny(t);if("left"===i)return th.fromAny(t);throw new Error("unknown axis orientation: "+i)}throw new TypeError(""+t)},m([bo({type:ja,state:!0})],e.prototype,"tickGenerator",void 0),m([Oo({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"origin",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"borderColor",void 0),m([Oo({type:Number,inherit:!0,state:1})],e.prototype,"borderWidth",void 0),m([Oo({type:Number,inherit:!0,state:6})],e.prototype,"borderSerif",void 0),m([Oo({type:Number,state:80})],e.prototype,"tickMarkSpacing",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"tickMarkColor",void 0),m([Oo({type:Number,inherit:!0,state:1})],e.prototype,"tickMarkWidth",void 0),m([Oo({type:Number,inherit:!0,state:6})],e.prototype,"tickMarkLength",void 0),m([Oo({type:Number,inherit:!0,state:2})],e.prototype,"tickLabelPadding",void 0),m([bo({type:l.Timing,inherit:!0,initState:function(){return l.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"gridLineColor",void 0),m([Oo({type:Number,inherit:!0,state:0})],e.prototype,"gridLineWidth",void 0),m([Oo({type:St,inherit:!0,state:null})],e.prototype,"font",void 0),m([Oo({type:Tt,inherit:!0,state:null})],e.prototype,"textColor",void 0),e}(fr),Qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(ro.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(i.xMin+n,e.y),ro.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,s=i.xMax,l=e.y,a=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==a?(t.moveTo(r,l-a),t.lineTo(r,l),t.lineTo(s,l),t.lineTo(s,l-a)):(t.moveTo(r,l),t.lineTo(s,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof _a))return this.fromInit(t);throw new TypeError(""+t)},m([Oo({extends:Jl,type:l.ContinuousScale,inherit:"xScale",state:null,updateFlags:ro.NeedsLayout})],e.prototype,"scale",void 0),e}(_a),Ja=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(ro.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(e.x,i.yMin+n),ro.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,s=this.borderSerif.getValue(),l=i.yMin,a=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==s?(t.moveTo(r+s,l),t.lineTo(r,l),t.lineTo(r,a),t.lineTo(r+s,a)):(t.moveTo(r,l),t.lineTo(r,a)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof _a))return this.fromInit(t);throw new TypeError(""+t)},m([Oo({extends:Jl,type:l.ContinuousScale,inherit:"yScale",state:null,updateFlags:ro.NeedsLayout})],e.prototype,"scale",void 0),e}(_a),$a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(ro.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(i.xMin+n,e.y),ro.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=i.xMin,s=i.xMax,l=e.y,a=this.borderSerif.getValue();t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==a?(t.moveTo(r,l+a),t.lineTo(r,l),t.lineTo(s,l),t.lineTo(s,l+a)):(t.moveTo(r,l),t.lineTo(s,l)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof _a))return this.fromInit(t);throw new TypeError(""+t)},m([Oo({extends:Jl,type:l.ContinuousScale,inherit:"xScale",state:null,updateFlags:ro.NeedsLayout})],e.prototype,"scale",void 0),e}(_a),th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!1,configurable:!0}),e.prototype.layoutTick=function(t,e,i,o){if(t.anchor.takesPrecedence(ro.Intrinsic)){var n=o(t.value);t.setOffset(n),t.anchor.setState(new r.R2Point(e.x,i.yMin+n),ro.Intrinsic)}},e.prototype.renderDomain=function(t,e,i){var o=this.borderColor.value,n=this.borderWidth.getValue();if(null!==o&&0!==n){var r=e.x,s=this.borderSerif.getValue(),l=i.yMin,a=i.yMax;t.beginPath(),t.strokeStyle=o.toString(),t.lineWidth=n,0!==s?(t.moveTo(r-s,l),t.lineTo(r,l),t.lineTo(r,a),t.lineTo(r-s,a)):(t.moveTo(r,l),t.lineTo(r,a)),t.stroke()}},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(!0===t)return new e;if("object"==typeof t&&null!==t&&!(t instanceof _a))return this.fromInit(t);throw new TypeError(""+t)},m([Oo({extends:Jl,type:l.ContinuousScale,inherit:"yScale",state:null,updateFlags:ro.NeedsLayout})],e.prototype,"scale",void 0),e}(_a),eh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(ht),ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(eh),oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(eh),nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(eh),rh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(eh),sh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initAxisTrait=function(t){},e.prototype.attachAxisTrait=function(t){},e.prototype.detachAxisTrait=function(t){},e.prototype.willSetAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetAxisTrait&&r.controllerWillSetAxisTrait(t,e,this)}},e.prototype.onSetAxisTrait=function(t,e){null!==e&&this.detachAxisTrait(e),null!==t&&(this.attachAxisTrait(t),this.initAxisTrait(t))},e.prototype.didSetAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetAxisTrait&&r.controllerDidSetAxisTrait(t,e,this)}},e.prototype.initAxisView=function(t){},e.prototype.attachAxisView=function(t){},e.prototype.detachAxisView=function(t){},e.prototype.willSetAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetAxisView&&r.controllerWillSetAxisView(t,e,this)}},e.prototype.onSetAxisView=function(t,e){null!==e&&this.detachAxisView(e),null!==t&&(this.attachAxisView(t),this.initAxisView(t))},e.prototype.didSetAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetAxisView&&r.controllerDidSetAxisView(t,e,this)}},e.prototype.createAxis=function(t){return t instanceof ih?new lh:t instanceof oh?new ah:t instanceof nh?new hh:t instanceof rh?new uh:null},e.AxisFastener=Vs.define({willSetView:function(t,e){this.owner.willSetAxisView(t,e)},onSetView:function(t,e){this.owner.onSetAxisView(t,e)},didSetView:function(t,e){this.owner.didSetAxisView(t,e)},createView:function(){return this.owner.createAxisView()},traitType:eh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetAxisTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetAxisTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetAxisTrait(t,e)}}),m([Vs({extends:e.AxisFastener})],e.prototype,"axis",void 0),e}(Ds),lh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return Qa.create()},e}(sh),ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return Ja.create()},e}(sh),hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return $a.create()},e}(sh),uh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.createAxisView=function(){return th.create()},e}(sh),ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.graph&&this.graph(e.graph),void 0!==e.topAxis&&this.topAxis(e.topAxis),void 0!==e.rightAxis&&this.rightAxis(e.rightAxis),void 0!==e.bottomAxis&&this.bottomAxis(e.bottomAxis),void 0!==e.leftAxis&&this.leftAxis(e.leftAxis),void 0!==e.gutterTop&&this.gutterTop(e.gutterTop),void 0!==e.gutterRight&&this.gutterRight(e.gutterRight),void 0!==e.gutterBottom&&this.gutterBottom(e.gutterBottom),void 0!==e.gutterLeft&&this.gutterLeft(e.gutterLeft),void 0!==e.borderColor&&this.borderColor(e.borderColor),void 0!==e.borderWidth&&this.borderWidth(e.borderWidth),void 0!==e.borderSerif&&this.borderSerif(e.borderSerif),void 0!==e.tickMarkColor&&this.tickMarkColor(e.tickMarkColor),void 0!==e.tickMarkWidth&&this.tickMarkWidth(e.tickMarkWidth),void 0!==e.tickMarkLength&&this.tickMarkLength(e.tickMarkLength),void 0!==e.tickLabelPadding&&this.tickLabelPadding(e.tickLabelPadding),void 0!==e.tickTransition&&this.tickTransition(e.tickTransition),void 0!==e.gridLineColor&&this.gridLineColor(e.gridLineColor),void 0!==e.gridLineWidth&&this.gridLineWidth(e.gridLineWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor)},e.prototype.xRange=function(){var t=this.viewFrame,e=this.gutterLeft.getValue().pxValue(t.width),i=this.gutterRight.getValue().pxValue(t.width),o=this.xRangePadding.state,n=o[0],r=this.viewFrame.width-i-e-o[1];return l.LinearRange(n,r)},e.prototype.yRange=function(){var t=this.viewFrame,e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterBottom.getValue().pxValue(t.height),o=this.yRangePadding.state,n=o[0],r=this.viewFrame.height-i-e-o[1];return l.LinearRange(r,n)},e.prototype.createGraph=function(){return new Ca},e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){},e.prototype.detachGraph=function(t){},e.prototype.willSetGraph=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGraph&&r.viewWillSetGraph(t,e,this)}},e.prototype.onSetGraph=function(t,e){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGraph&&r.viewDidSetGraph(t,e,this)}},e.prototype.createTopAxis=function(){return new Qa},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){},e.prototype.detachTopAxis=function(t){},e.prototype.willSetTopAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetTopAxis&&r.viewWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetTopAxis&&r.viewDidSetTopAxis(t,e,this)}},e.prototype.createRightAxis=function(){return new Ja},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){},e.prototype.detachRightAxis=function(t){},e.prototype.willSetRightAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetRightAxis&&r.viewWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetRightAxis&&r.viewDidSetRightAxis(t,e,this)}},e.prototype.createBottomAxis=function(){return new $a},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){},e.prototype.detachBottomAxis=function(t){},e.prototype.willSetBottomAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetBottomAxis&&r.viewWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetBottomAxis&&r.viewDidSetBottomAxis(t,e,this)}},e.prototype.createLeftAxis=function(){return new th},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){},e.prototype.detachLeftAxis=function(t){},e.prototype.willSetLeftAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetLeftAxis&&r.viewWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetLeftAxis&&r.viewDidSetLeftAxis(t,e,this)}},e.prototype.detectGraphView=function(t){return t instanceof Ca?t:null},e.prototype.detectTopAxisView=function(t){return t instanceof Qa?t:null},e.prototype.detectRightAxisView=function(t){return t instanceof Ja?t:null},e.prototype.detectBottomAxisView=function(t){return t instanceof $a?t:null},e.prototype.detectLeftAxisView=function(t){return t instanceof th?t:null},e.prototype.onInsertChildView=function(e,i){if(t.prototype.onInsertChildView.call(this,e,i),null===this.graph.view){var o=this.detectGraphView(e);null!==o&&this.graph.setView(o,i)}if(null===this.topAxis.view){var n=this.detectTopAxisView(e);null!==n&&this.topAxis.setView(n,i)}if(null===this.rightAxis.view){var r=this.detectRightAxisView(e);null!==r&&this.rightAxis.setView(r,i)}if(null===this.bottomAxis.view){var s=this.detectBottomAxisView(e);null!==s&&this.bottomAxis.setView(s,i)}if(null===this.leftAxis.view){var l=this.detectLeftAxisView(e);null!==l&&this.leftAxis.setView(l,i)}},e.prototype.onRemoveChildView=function(e){if(t.prototype.onRemoveChildView.call(this,e),null===this.graph.view){var i=this.detectGraphView(e);null!==i&&this.graph.view===i&&this.graph.setView(null)}if(null===this.topAxis.view){var o=this.detectTopAxisView(e);null!==o&&this.topAxis.view===o&&this.topAxis.setView(null)}if(null===this.rightAxis.view){var n=this.detectRightAxisView(e);null!==n&&this.rightAxis.view===n&&this.rightAxis.setView(null)}if(null===this.bottomAxis.view){var r=this.detectBottomAxisView(e);null!==r&&this.bottomAxis.view===r&&this.bottomAxis.setView(null)}if(null===this.leftAxis.view){var s=this.detectLeftAxisView(e);null!==s&&this.leftAxis.view===s&&this.leftAxis.setView(null)}},e.prototype.updateScales=function(){this.layoutChart(this.viewFrame),t.prototype.updateScales.call(this)},e.prototype.layoutChart=function(t){var e=this.gutterTop.getValue().pxValue(t.height),i=this.gutterRight.getValue().pxValue(t.width),o=this.gutterBottom.getValue().pxValue(t.height),n=this.gutterLeft.getValue().pxValue(t.width),s=t.yMin+e,l=t.xMax-i,a=t.yMax-o,h=t.xMin+n,u=this.topAxis.view;null!==u&&(u.setViewFrame(new r.R2Box(h,t.yMin,l,a)),u.origin.setState(new r.R2Point(h,s),ro.Intrinsic));var p=this.rightAxis.view;null!==p&&(p.setViewFrame(new r.R2Box(h,s,t.xMax,a)),p.origin.setState(new r.R2Point(Math.max(h,l),a),ro.Intrinsic));var d=this.bottomAxis.view;null!==d&&(d.setViewFrame(new r.R2Box(h,s,l,t.yMax)),d.origin.setState(new r.R2Point(h,Math.max(s,a)),ro.Intrinsic));var c=this.leftAxis.view;null!==c&&(c.setViewFrame(new r.R2Box(t.xMin,s,l,a)),c.origin.setState(new r.R2Point(h,a),ro.Intrinsic));var f=this.graph.view;null!==f&&f.setViewFrame(new r.R2Box(h,s,l,a))},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterTop",void 0),m([Oo({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterRight",void 0),m([Oo({type:r.Length,state:r.Length.px(20)})],e.prototype,"gutterBottom",void 0),m([Oo({type:r.Length,state:r.Length.px(40)})],e.prototype,"gutterLeft",void 0),m([Oo({type:Tt,state:null,look:se.neutralColor})],e.prototype,"borderColor",void 0),m([Oo({type:Number,state:1})],e.prototype,"borderWidth",void 0),m([Oo({type:Number,state:6})],e.prototype,"borderSerif",void 0),m([Oo({type:Tt,state:null,look:se.neutralColor})],e.prototype,"tickMarkColor",void 0),m([Oo({type:Number,state:1})],e.prototype,"tickMarkWidth",void 0),m([Oo({type:Number,state:6})],e.prototype,"tickMarkLength",void 0),m([Oo({type:Number,state:2})],e.prototype,"tickLabelPadding",void 0),m([bo({type:l.Timing,initState:function(){return l.Easing.cubicOut.withDuration(250)}})],e.prototype,"tickTransition",void 0),m([Oo({type:Tt,state:null,look:se.subduedColor})],e.prototype,"gridLineColor",void 0),m([Oo({type:Number,state:0})],e.prototype,"gridLineWidth",void 0),m([Oo({type:St,state:null,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,state:null,look:se.mutedColor})],e.prototype,"textColor",void 0),m([Zo({key:!0,type:Ca,createView:function(){return this.owner.createGraph()},willSetView:function(t,e){this.owner.willSetGraph(t,e)},onSetView:function(t,e){this.owner.onSetGraph(t,e)},didSetView:function(t,e){this.owner.didSetGraph(t,e)}})],e.prototype,"graph",void 0),m([Zo({key:!0,type:Qa,createView:function(){return this.owner.createTopAxis()},willSetView:function(t,e){this.owner.willSetTopAxis(t,e)},onSetView:function(t,e){this.owner.onSetTopAxis(t,e)},didSetView:function(t,e){this.owner.didSetTopAxis(t,e)}})],e.prototype,"topAxis",void 0),m([Zo({key:!0,type:Ja,createView:function(){return this.owner.createRightAxis()},willSetView:function(t,e){this.owner.willSetRightAxis(t,e)},onSetView:function(t,e){this.owner.onSetRightAxis(t,e)},didSetView:function(t,e){this.owner.didSetRightAxis(t,e)}})],e.prototype,"rightAxis",void 0),m([Zo({key:!0,type:$a,createView:function(){return this.owner.createBottomAxis()},willSetView:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetView:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetView:function(t,e){this.owner.didSetBottomAxis(t,e)}})],e.prototype,"bottomAxis",void 0),m([Zo({key:!0,type:th,createView:function(){return this.owner.createLeftAxis()},willSetView:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetView:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetView:function(t,e){this.owner.didSetLeftAxis(t,e)}})],e.prototype,"leftAxis",void 0),e}(ia),dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGraph=function(t){},e.prototype.attachGraph=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachGraph=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetGraph&&s.traitWillSetGraph(t,e,i,this)}},e.prototype.onSetGraph=function(t,e,i){null!==e&&this.detachGraph(e),null!==t&&(this.attachGraph(t),this.initGraph(t))},e.prototype.didSetGraph=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetGraph&&s.traitDidSetGraph(t,e,i,this)}},e.prototype.initTopAxis=function(t){},e.prototype.attachTopAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachTopAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetTopAxis&&s.traitWillSetTopAxis(t,e,i,this)}},e.prototype.onSetTopAxis=function(t,e,i){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetTopAxis&&s.traitDidSetTopAxis(t,e,i,this)}},e.prototype.initRightAxis=function(t){},e.prototype.attachRightAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachRightAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetRightAxis&&s.traitWillSetRightAxis(t,e,i,this)}},e.prototype.onSetRightAxis=function(t,e,i){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetRightAxis&&s.traitDidSetRightAxis(t,e,i,this)}},e.prototype.initBottomAxis=function(t){},e.prototype.attachBottomAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachBottomAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetBottomAxis&&s.traitWillSetBottomAxis(t,e,i,this)}},e.prototype.onSetBottomAxis=function(t,e,i){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetBottomAxis&&s.traitDidSetBottomAxis(t,e,i,this)}},e.prototype.initLeftAxis=function(t){},e.prototype.attachLeftAxis=function(t){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachLeftAxis=function(t){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitWillSetLeftAxis&&s.traitWillSetLeftAxis(t,e,i,this)}},e.prototype.onSetLeftAxis=function(t,e,i){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e,i){for(var o=this.traitObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.traitDidSetLeftAxis&&s.traitDidSetLeftAxis(t,e,i,this)}},e.prototype.detectGraphTrait=function(t){return t instanceof ba?t:null},e.prototype.detectTopAxisTrait=function(t){return t instanceof ih?t:null},e.prototype.detectRightAxisTrait=function(t){return t instanceof oh?t:null},e.prototype.detectBottomAxisTrait=function(t){return t instanceof nh?t:null},e.prototype.detectLeftAxisTrait=function(t){return t instanceof rh?t:null},e.prototype.detectTraits=function(t){for(var e=t.traits,i=0,o=e.length;i<o;i+=1){var n=e[i];if(null===this.graph.trait){var r=this.detectGraphTrait(n);null!==r&&this.graph.setTrait(r)}if(null===this.topAxis.trait){var s=this.detectTopAxisTrait(n);null!==s&&this.topAxis.setTrait(s)}if(null===this.rightAxis.trait){var l=this.detectRightAxisTrait(n);null!==l&&this.rightAxis.setTrait(l)}if(null===this.bottomAxis.trait){var a=this.detectBottomAxisTrait(n);null!==a&&this.bottomAxis.setTrait(a)}if(null===this.leftAxis.trait){var h=this.detectLeftAxisTrait(n);null!==h&&this.leftAxis.setTrait(h)}}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectTraits(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertTrait=function(e,i){if(t.prototype.onInsertTrait.call(this,e,i),null===this.graph.trait){var o=this.detectGraphTrait(e);null!==o&&this.graph.setTrait(o,i)}if(null===this.topAxis.trait){var n=this.detectTopAxisTrait(e);null!==n&&this.topAxis.setTrait(n,i)}if(null===this.rightAxis.trait){var r=this.detectRightAxisTrait(e);null!==r&&this.rightAxis.setTrait(r,i)}if(null===this.bottomAxis.trait){var s=this.detectBottomAxisTrait(e);null!==s&&this.bottomAxis.setTrait(s,i)}if(null===this.leftAxis.trait){var l=this.detectLeftAxisTrait(e);null!==l&&this.leftAxis.setTrait(l,i)}},e.prototype.onRemoveTrait=function(e){t.prototype.onRemoveTrait.call(this,e);var i=this.detectGraphTrait(e);null!==i&&this.graph.trait===i&&this.graph.setTrait(null);var o=this.detectTopAxisTrait(e);null!==o&&this.topAxis.trait===o&&this.topAxis.setTrait(null);var n=this.detectRightAxisTrait(e);null!==n&&this.rightAxis.trait===n&&this.rightAxis.setTrait(null);var r=this.detectBottomAxisTrait(e);null!==r&&this.bottomAxis.trait===r&&this.bottomAxis.setTrait(null);var s=this.detectLeftAxisTrait(e);null!==s&&this.leftAxis.trait===s&&this.leftAxis.setTrait(null)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this);var e=this.graph.trait;null!==e&&e.addTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.addTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.addTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.addTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.addTraitConsumer(this)},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this);var e=this.graph.trait;null!==e&&e.removeTraitConsumer(this);var i=this.topAxis.trait;null!==i&&i.removeTraitConsumer(this);var o=this.rightAxis.trait;null!==o&&o.removeTraitConsumer(this);var n=this.bottomAxis.trait;null!==n&&n.removeTraitConsumer(this);var r=this.leftAxis.trait;null!==r&&r.removeTraitConsumer(this)},m([_({type:ba,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetGraph(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetGraph(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetGraph(t,e,i)}})],e.prototype,"graph",void 0),m([_({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTopAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetTopAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetTopAxis(t,e,i)}})],e.prototype,"topAxis",void 0),m([_({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetRightAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetRightAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetRightAxis(t,e,i)}})],e.prototype,"rightAxis",void 0),m([_({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetBottomAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetBottomAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetBottomAxis(t,e,i)}})],e.prototype,"bottomAxis",void 0),m([_({sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetLeftAxis(t,e,i)},onSetTrait:function(t,e,i){this.owner.onSetLeftAxis(t,e,i)},didSetTrait:function(t,e,i){this.owner.didSetLeftAxis(t,e,i)}})],e.prototype,"leftAxis",void 0),e}(ht),ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initChartTrait=function(t){},e.prototype.attachChartTrait=function(t){this.graph.setTrait(t.graph.trait);var e=t.topAxis.trait;null!==e&&this.insertTopAxisTrait(e);var i=t.rightAxis.trait;null!==i&&this.insertRightAxisTrait(i);var o=t.bottomAxis.trait;null!==o&&this.insertBottomAxisTrait(o);var n=t.leftAxis.trait;null!==n&&this.insertLeftAxisTrait(n)},e.prototype.detachChartTrait=function(t){var e=t.leftAxis.trait;null!==e&&this.removeLeftAxisTrait(e);var i=t.bottomAxis.trait;null!==i&&this.removeBottomAxisTrait(i);var o=t.rightAxis.trait;null!==o&&this.removeRightAxisTrait(o);var n=t.topAxis.trait;null!==n&&this.removeTopAxisTrait(n),this.graph.setTrait(null)},e.prototype.willSetChartTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetChartTrait&&r.controllerWillSetChartTrait(t,e,this)}},e.prototype.onSetChartTrait=function(t,e){null!==e&&this.detachChartTrait(e),null!==t&&(this.attachChartTrait(t),this.initChartTrait(t))},e.prototype.didSetChartTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetChartTrait&&r.controllerDidSetChartTrait(t,e,this)}},e.prototype.createChartView=function(){return ph.create()},e.prototype.initChartView=function(t){},e.prototype.attachChartView=function(t){var e=this.topAxis.controller;null!==e&&e.axis.injectView(t);var i=this.rightAxis.controller;null!==i&&i.axis.injectView(t);var o=this.bottomAxis.controller;null!==o&&o.axis.injectView(t);var n=this.leftAxis.controller;null!==n&&n.axis.injectView(t),null===this.graph.view&&null===this.graph.trait||this.graph.injectView(t)},e.prototype.detachChartView=function(t){},e.prototype.willSetChartView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetChartView&&r.controllerWillSetChartView(t,e,this)}},e.prototype.onSetChartView=function(t,e){null!==e&&this.detachChartView(e),null!==t&&(this.attachChartView(t),this.initChartView(t))},e.prototype.didSetChartView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetChartView&&r.controllerDidSetChartView(t,e,this)}},e.prototype.attachGraphTrait=function(e){t.prototype.attachGraphTrait.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.attachGraphView=function(e){t.prototype.attachGraphView.call(this,e);var i=this.chart.view;null!==i&&this.graph.injectView(i)},e.prototype.detachGraphView=function(t){t.remove()},e.prototype.createTopAxis=function(t){return new lh},e.prototype.initTopAxis=function(t){var e=t.axis.trait;null!==e&&this.initTopAxisTrait(e);var i=t.axis.view;null!==i&&this.initTopAxisView(i)},e.prototype.attachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.attachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.attachTopAxisView(i)},e.prototype.detachTopAxis=function(t){var e=t.axis.trait;null!==e&&this.detachTopAxisTrait(e);var i=t.axis.view;null!==i&&this.detachTopAxisView(i)},e.prototype.willSetTopAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTopAxis&&r.controllerWillSetTopAxis(t,e,this)}},e.prototype.onSetTopAxis=function(t,e){null!==e&&this.detachTopAxis(e),null!==t&&(this.attachTopAxis(t),this.initTopAxis(t))},e.prototype.didSetTopAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTopAxis&&r.controllerDidSetTopAxis(t,e,this)}},e.prototype.insertTopAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof sh){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var l=this.createTopAxis(t);if(null!==l&&(l.axis.setTrait(t),this.topAxis.setController(l,o),this.insertChildController(l,o),null===l.axis.view)){var a=this.createTopAxisView(l),h=null;null!==o&&(h=o.axis.view);var u=this.chart.view;null!==u?l.axis.injectView(u,a,h,null):l.axis.setView(a,h)}},e.prototype.removeTopAxisTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof sh&&n.axis.trait===t)return this.topAxis.setController(null),void n.remove()}},e.prototype.initTopAxisTrait=function(t){},e.prototype.attachTopAxisTrait=function(t){},e.prototype.detachTopAxisTrait=function(t){},e.prototype.willSetTopAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTopAxisTrait&&r.controllerWillSetTopAxisTrait(t,e,this)}},e.prototype.onSetTopAxisTrait=function(t,e){null!==e&&this.detachTopAxisTrait(e),null!==t&&(this.attachTopAxisTrait(t),this.initTopAxisTrait(t))},e.prototype.didSetTopAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTopAxisTrait&&r.controllerDidSetTopAxisTrait(t,e,this)}},e.prototype.createTopAxisView=function(t){return t.axis.createView()},e.prototype.initTopAxisView=function(t){},e.prototype.attachTopAxisView=function(t){},e.prototype.detachTopAxisView=function(t){t.remove()},e.prototype.willSetTopAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetTopAxisView&&r.controllerWillSetTopAxisView(t,e,this)}},e.prototype.onSetTopAxisView=function(t,e){null!==e&&this.detachTopAxisView(e),null!==t&&(this.attachTopAxisView(t),this.initTopAxisView(t))},e.prototype.didSetTopAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetTopAxisView&&r.controllerDidSetTopAxisView(t,e,this)}},e.prototype.createRightAxis=function(t){return new ah},e.prototype.initRightAxis=function(t){var e=t.axis.trait;null!==e&&this.initRightAxisTrait(e);var i=t.axis.view;null!==i&&this.initRightAxisView(i)},e.prototype.attachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.attachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.attachRightAxisView(i)},e.prototype.detachRightAxis=function(t){var e=t.axis.trait;null!==e&&this.detachRightAxisTrait(e);var i=t.axis.view;null!==i&&this.detachRightAxisView(i)},e.prototype.willSetRightAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetRightAxis&&r.controllerWillSetRightAxis(t,e,this)}},e.prototype.onSetRightAxis=function(t,e){null!==e&&this.detachRightAxis(e),null!==t&&(this.attachRightAxis(t),this.initRightAxis(t))},e.prototype.didSetRightAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetRightAxis&&r.controllerDidSetRightAxis(t,e,this)}},e.prototype.insertRightAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof sh){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var l=this.createRightAxis(t);if(null!==l&&(l.axis.setTrait(t),this.rightAxis.setController(l,o),this.insertChildController(l,o),null===l.axis.view)){var a=this.createRightAxisView(l),h=null;null!==o&&(h=o.axis.view);var u=this.chart.view;null!==u?l.axis.injectView(u,a,h,null):l.axis.setView(a,h)}},e.prototype.removeRightAxisTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof sh&&n.axis.trait===t)return this.rightAxis.setController(null),void n.remove()}},e.prototype.initRightAxisTrait=function(t){},e.prototype.attachRightAxisTrait=function(t){},e.prototype.detachRightAxisTrait=function(t){},e.prototype.willSetRightAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllertWillSetRightAxisTrait&&r.controllertWillSetRightAxisTrait(t,e,this)}},e.prototype.onSetRightAxisTrait=function(t,e){null!==e&&this.detachRightAxisTrait(e),null!==t&&(this.attachRightAxisTrait(t),this.initRightAxisTrait(t))},e.prototype.didSetRightAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetRightAxisTrait&&r.controllerDidSetRightAxisTrait(t,e,this)}},e.prototype.createRightAxisView=function(t){return t.axis.createView()},e.prototype.initRightAxisView=function(t){},e.prototype.attachRightAxisView=function(t){},e.prototype.detachRightAxisView=function(t){t.remove()},e.prototype.willSetRightAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetRightAxisView&&r.controllerWillSetRightAxisView(t,e,this)}},e.prototype.onSetRightAxisView=function(t,e){null!==e&&this.detachRightAxisView(e),null!==t&&(this.attachRightAxisView(t),this.initRightAxisView(t))},e.prototype.didSetRightAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetRightAxisView&&r.controllerDidSetRightAxisView(t,e,this)}},e.prototype.createBottomAxis=function(t){return new hh},e.prototype.initBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.initBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.initBottomAxisView(i)},e.prototype.attachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.attachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.attachBottomAxisView(i)},e.prototype.detachBottomAxis=function(t){var e=t.axis.trait;null!==e&&this.detachBottomAxisTrait(e);var i=t.axis.view;null!==i&&this.detachBottomAxisView(i)},e.prototype.willSetBottomAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetBottomAxis&&r.controllerWillSetBottomAxis(t,e,this)}},e.prototype.onSetBottomAxis=function(t,e){null!==e&&this.detachBottomAxis(e),null!==t&&(this.attachBottomAxis(t),this.initBottomAxis(t))},e.prototype.didSetBottomAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetBottomAxis&&r.controllerDidSetBottomAxis(t,e,this)}},e.prototype.insertBottomAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof sh){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var l=this.createBottomAxis(t);if(null!==l&&(l.axis.setTrait(t),this.bottomAxis.setController(l,o),this.insertChildController(l,o),null===l.axis.view)){var a=this.createBottomAxisView(l),h=null;null!==o&&(h=o.axis.view);var u=this.chart.view;null!==u?l.axis.injectView(u,a,h,null):l.axis.setView(a,h)}},e.prototype.removeBottomAxisTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof sh&&n.axis.trait===t)return this.bottomAxis.setController(null),void n.remove()}},e.prototype.initBottomAxisTrait=function(t){},e.prototype.attachBottomAxisTrait=function(t){},e.prototype.detachBottomAxisTrait=function(t){},e.prototype.willSetBottomAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetBottomAxisTrait&&r.controllerWillSetBottomAxisTrait(t,e,this)}},e.prototype.onSetBottomAxisTrait=function(t,e){null!==e&&this.detachBottomAxisTrait(e),null!==t&&(this.attachBottomAxisTrait(t),this.initBottomAxisTrait(t))},e.prototype.didSetBottomAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetBottomAxisTrait&&r.controllerDidSetBottomAxisTrait(t,e,this)}},e.prototype.createBottomAxisView=function(t){return t.axis.createView()},e.prototype.initBottomAxisView=function(t){},e.prototype.attachBottomAxisView=function(t){},e.prototype.detachBottomAxisView=function(t){t.remove()},e.prototype.willSetBottomAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetBottomAxisView&&r.controllerWillSetBottomAxisView(t,e,this)}},e.prototype.onSetBottomAxisView=function(t,e){null!==e&&this.detachBottomAxisView(e),null!==t&&(this.attachBottomAxisView(t),this.initBottomAxisView(t))},e.prototype.didSetBottomAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetBottomAxisView&&r.controllerDidSetBottomAxisView(t,e,this)}},e.prototype.createLeftAxis=function(t){return new uh},e.prototype.initLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.initLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.initLeftAxisView(i)},e.prototype.attachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.attachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.attachLeftAxisView(i)},e.prototype.detachLeftAxis=function(t){var e=t.axis.trait;null!==e&&this.detachLeftAxisTrait(e);var i=t.axis.view;null!==i&&this.detachLeftAxisView(i)},e.prototype.willSetLeftAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetLeftAxis&&r.controllerWillSetLeftAxis(t,e,this)}},e.prototype.onSetLeftAxis=function(t,e){null!==e&&this.detachLeftAxis(e),null!==t&&(this.attachLeftAxis(t),this.initLeftAxis(t))},e.prototype.didSetLeftAxis=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetLeftAxis&&r.controllerDidSetLeftAxis(t,e,this)}},e.prototype.insertLeftAxisTrait=function(t,e){void 0===e&&(e=null);for(var i=this.childControllers,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s instanceof sh){if(s.axis.trait===t)return;s.axis.trait===e&&(o=s)}}var l=this.createLeftAxis(t);if(null!==l&&(l.axis.setTrait(t),this.leftAxis.setController(l,o),this.insertChildController(l,o),null===l.axis.view)){var a=this.createLeftAxisView(l),h=null;null!==o&&(h=o.axis.view);var u=this.chart.view;null!==u?l.axis.injectView(u,a,h,null):l.axis.setView(a,h)}},e.prototype.removeLeftAxisTrait=function(t){for(var e=this.childControllers,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof sh&&n.axis.trait===t)return this.leftAxis.setController(null),void n.remove()}},e.prototype.initLeftAxisTrait=function(t){},e.prototype.attachLeftAxisTrait=function(t){},e.prototype.detachLeftAxisTrait=function(t){},e.prototype.willSetLeftAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetLeftAxisTrait&&r.controllerWillSetLeftAxisTrait(t,e,this)}},e.prototype.onSetLeftAxisTrait=function(t,e){null!==e&&this.detachLeftAxisTrait(e),null!==t&&(this.attachLeftAxisTrait(t),this.initLeftAxisTrait(t))},e.prototype.didSetLeftAxisTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetLeftAxisTrait&&r.controllerDidSetLeftAxisTrait(t,e,this)}},e.prototype.createLeftAxisView=function(t){return t.axis.createView()},e.prototype.initLeftAxisView=function(t){},e.prototype.attachLeftAxisView=function(t){},e.prototype.detachLeftAxisView=function(t){t.remove()},e.prototype.willSetLeftAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetLeftAxisView&&r.controllerWillSetLeftAxisView(t,e,this)}},e.prototype.onSetLeftAxisView=function(t,e){null!==e&&this.detachLeftAxisView(e),null!==t&&(this.attachLeftAxisView(t),this.initLeftAxisView(t))},e.prototype.didSetLeftAxisView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetLeftAxisView&&r.controllerDidSetLeftAxisView(t,e,this)}},e.prototype.detectTopAxisController=function(t){return t instanceof lh?t:null},e.prototype.detectRightAxisController=function(t){return t instanceof ah?t:null},e.prototype.detectBottomAxisController=function(t){return t instanceof hh?t:null},e.prototype.detectLeftAxisController=function(t){return t instanceof uh?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectTopAxisController(e);null!==o&&this.topAxis.setController(o,i);var n=this.detectRightAxisController(e);null!==n&&this.rightAxis.setController(n,i);var r=this.detectBottomAxisController(e);null!==r&&this.bottomAxis.setController(r,i);var s=this.detectLeftAxisController(e);null!==s&&this.leftAxis.setController(s,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e),null!==this.detectTopAxisController(e)&&this.topAxis.setController(null),null!==this.detectRightAxisController(e)&&this.rightAxis.setController(null),null!==this.detectBottomAxisController(e)&&this.bottomAxis.setController(null),null!==this.detectLeftAxisController(e)&&this.leftAxis.setController(null)},e.ChartFastener=Vs.define({viewType:ph,willSetView:function(t,e){this.owner.willSetChartView(t,e)},onSetView:function(t,e){this.owner.onSetChartView(t,e)},didSetView:function(t,e){this.owner.didSetChartView(t,e)},createView:function(){return this.owner.createChartView()},traitType:dh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetChartTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetChartTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetChartTrait(t,e)},traitWillSetTopAxis:function(t,e,i){null!==e&&this.owner.removeTopAxisTrait(e)},traitDidSetTopAxis:function(t,e,i){null!==t&&this.owner.insertTopAxisTrait(t)},traitWillSetRightAxis:function(t,e,i){null!==e&&this.owner.removeRightAxisTrait(e)},traitDidSetRightAxis:function(t,e,i){null!==t&&this.owner.insertRightAxisTrait(t)},traitWillSetBottomAxis:function(t,e,i){null!==e&&this.owner.removeBottomAxisTrait(e)},traitDidSetBottomAxis:function(t,e,i){null!==t&&this.owner.insertBottomAxisTrait(t)},traitWillSetLeftAxis:function(t,e,i){null!==e&&this.owner.removeLeftAxisTrait(e)},traitDidSetLeftAxis:function(t,e,i){null!==t&&this.owner.insertLeftAxisTrait(t)}}),e.TopAxisFastener=Fs.define({type:lh,observe:!0,willSetController:function(t,e){this.owner.willSetTopAxis(t,e)},onSetController:function(t,e){this.owner.onSetTopAxis(t,e)},didSetController:function(t,e){this.owner.didSetTopAxis(t,e)},controllerWillSetAxisTrait:function(t,e){this.owner.willSetTopAxisTrait(t,e)},controllerDidSetAxisTrait:function(t,e){this.owner.onSetTopAxisTrait(t,e),this.owner.didSetTopAxisTrait(t,e)},controllerWillSetAxisView:function(t,e){this.owner.willSetTopAxisView(t,e)},controllerDidSetAxisView:function(t,e){this.owner.onSetTopAxisView(t,e),this.owner.didSetTopAxisView(t,e)}}),e.RightAxisFastener=Fs.define({type:ah,observe:!0,willSetController:function(t,e){this.owner.willSetRightAxis(t,e)},onSetController:function(t,e){this.owner.onSetRightAxis(t,e)},didSetController:function(t,e){this.owner.didSetRightAxis(t,e)},controllerWillSetAxisTrait:function(t,e){this.owner.willSetRightAxisTrait(t,e)},controllerDidSetAxisTrait:function(t,e){this.owner.onSetRightAxisTrait(t,e),this.owner.didSetRightAxisTrait(t,e)},controllerWillSetAxisView:function(t,e){this.owner.willSetRightAxisView(t,e)},controllerDidSetAxisView:function(t,e){this.owner.onSetRightAxisView(t,e),this.owner.didSetRightAxisView(t,e)}}),e.BottomAxisFastener=Fs.define({type:hh,observe:!0,willSetController:function(t,e){this.owner.willSetBottomAxis(t,e)},onSetController:function(t,e){this.owner.onSetBottomAxis(t,e)},didSetController:function(t,e){this.owner.didSetBottomAxis(t,e)},controllerWillSetAxisTrait:function(t,e){this.owner.willSetBottomAxisTrait(t,e)},controllerDidSetAxisTrait:function(t,e){this.owner.onSetBottomAxisTrait(t,e),this.owner.didSetBottomAxisTrait(t,e)},controllerWillSetAxisView:function(t,e){this.owner.willSetBottomAxisView(t,e)},controllerDidSetAxisView:function(t,e){this.owner.onSetBottomAxisView(t,e),this.owner.didSetBottomAxisView(t,e)}}),e.LeftAxisFastener=Fs.define({type:uh,observe:!0,willSetController:function(t,e){this.owner.willSetLeftAxis(t,e)},onSetController:function(t,e){this.owner.onSetLeftAxis(t,e)},didSetController:function(t,e){this.owner.didSetLeftAxis(t,e)},controllerWillSetAxisTrait:function(t,e){this.owner.willSetLeftAxisTrait(t,e)},controllerDidSetAxisTrait:function(t,e){this.owner.onSetLeftAxisTrait(t,e),this.owner.didSetLeftAxisTrait(t,e)},controllerWillSetAxisView:function(t,e){this.owner.willSetLeftAxisView(t,e)},controllerDidSetAxisView:function(t,e){this.owner.onSetLeftAxisView(t,e),this.owner.didSetLeftAxisView(t,e)}}),m([Vs({extends:e.ChartFastener})],e.prototype,"chart",void 0),m([Fs({extends:e.TopAxisFastener})],e.prototype,"topAxis",void 0),m([Fs({extends:e.RightAxisFastener})],e.prototype,"rightAxis",void 0),m([Fs({extends:e.BottomAxisFastener})],e.prototype,"bottomAxis",void 0),m([Fs({extends:e.LeftAxisFastener})],e.prototype,"leftAxis",void 0),e}(Va),fh={fromAny:function(t){if(null==t)return t;return{geoFrame:void 0!==t.geoFrame&&null!==t.geoFrame?p.GeoBox.fromAny(t.geoFrame):null,geoCenter:void 0!==t.geoCenter&&null!==t.geoCenter?p.GeoPoint.fromAny(t.geoCenter):null,zoom:t.zoom,heading:t.heading,tilt:t.tilt}},is:function(t){if(null!=t){return"geoFrame"in t&&"geoCenter"in t&&"zoom"in t&&"heading"in t&&"tilt"in t}return!1}},vh={is:function(t){return!(!p.GeoProjection.is(t)||!fh.is(t))}},yh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return w(i,t),i.prototype.initView=function(e){t.prototype.initView.call(this,e)},i.prototype.onAddViewObserver=function(i){t.prototype.onAddViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.inserted(i,this.viewObserverCache.viewDidProjectObservers))},i.prototype.onRemoveViewObserver=function(i){t.prototype.onRemoveViewObserver.call(this,i),void 0!==i.viewWillProject&&(this.viewObserverCache.viewWillProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewWillProjectObservers)),void 0!==i.viewDidProject&&(this.viewObserverCache.viewDidProjectObservers=e.Arrays.removed(i,this.viewObserverCache.viewDidProjectObservers))},i.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&ro.NeedsAnimate)&&(t&=~ro.NeedsAnimate),t},i.prototype.cascadeProcess=function(t,e){var i=this.extendViewContext(e);if(t&=~ro.NeedsProcess,t|=this.viewFlags&ro.UpdateMask,0!=((t=this.needsProcess(t,i))&ro.ProcessMask)){var o=t;this.setViewFlags(this.viewFlags&~ro.NeedsProcess|ro.TraversingFlag|ro.ProcessingFlag);try{this.willProcess(o,i),0!=((this.viewFlags|t)&ro.NeedsResize)&&(o|=ro.NeedsResize,this.setViewFlags(this.viewFlags&~ro.NeedsResize),this.willResize(i)),0!=((this.viewFlags|t)&ro.NeedsScroll)&&(o|=ro.NeedsScroll,this.setViewFlags(this.viewFlags&~ro.NeedsScroll),this.willScroll(i)),0!=((this.viewFlags|t)&ro.NeedsChange)&&(o|=ro.NeedsChange,this.setViewFlags(this.viewFlags&~ro.NeedsChange),this.willChange(i)),0!=((this.viewFlags|t)&ro.NeedsAnimate)&&(o|=ro.NeedsAnimate,this.setViewFlags(this.viewFlags&~ro.NeedsAnimate),this.willAnimate(i)),0!=((this.viewFlags|t)&ro.NeedsLayout)&&(o|=ro.NeedsLayout,this.setViewFlags(this.viewFlags&~ro.NeedsLayout),this.willLayout(i)),0!=((this.viewFlags|t)&ro.NeedsProject)&&(o|=ro.NeedsProject,this.setViewFlags(this.viewFlags&~ro.NeedsProject),this.willProject(i)),this.onProcess(o,i),0!=(o&ro.NeedsResize)&&this.onResize(i),0!=(o&ro.NeedsScroll)&&this.onScroll(i),0!=(o&ro.NeedsChange)&&this.onChange(i),0!=(o&ro.NeedsAnimate)&&this.onAnimate(i),0!=(o&ro.NeedsLayout)&&this.onLayout(i),0!=(o&ro.NeedsProject)&&this.onProject(i),0!=(o&ro.ProcessMask)&&this.processChildViews(o,i,this.processChildView),0!=(o&ro.NeedsProject)&&this.didProject(i),0!=(o&ro.NeedsLayout)&&this.didLayout(i),0!=(o&ro.NeedsAnimate)&&this.didAnimate(i),0!=(o&ro.NeedsChange)&&this.didChange(i),0!=(o&ro.NeedsScroll)&&this.didScroll(i),0!=(o&ro.NeedsResize)&&this.didResize(i),this.didProcess(o,i)}finally{this.setViewFlags(this.viewFlags&~(ro.TraversingFlag|ro.ProcessingFlag))}}},i.prototype.willProject=function(t){var e=this.viewObserverCache.viewWillProjectObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewWillProject(t,this)}},i.prototype.onProject=function(t){},i.prototype.didProject=function(t){var e=this.viewObserverCache.viewDidProjectObservers;if(void 0!==e)for(var i=0;i<e.length;i+=1){e[i].viewDidProject(t,this)}},i.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=this.geoBoundsColor.value;null!==i&&this.renderGeoBounds(e,i,1)},i.prototype.renderGeoBounds=function(t,e,i){var o=t.renderer;if(o instanceof br&&!this.isHidden()&&!this.isCulled()&&!this.isUnbounded()){var n=o.context;n.save(),this.renderGeoOutline(this.geoBounds,t.geoViewport,n,e,i),n.restore()}},i.prototype.renderGeoOutline=function(t,e,i,o,n){if(t.isDefined()){var r=e.project(t.southWest.normalized()),s=e.project(t.northWest.normalized()),l=e.project(t.northEast.normalized()),a=e.project(t.southEast.normalized());i.beginPath(),i.moveTo(r.x,r.y),i.lineTo(s.x,s.y),i.lineTo(l.x,l.y),i.lineTo(a.x,a.y),i.closePath(),i.lineWidth=n,i.strokeStyle=o.toString(),i.stroke()}},i.prototype.onSetHidden=function(t){var e=this.parentView;e instanceof i&&e.onSetChildViewHidden(this,t),t||this.requireUpdate(ro.NeedsProject)},i.prototype.onSetChildViewHidden=function(t,e){},i.prototype.onSetChildViewUnbounded=function(t,e){},i.prototype.onSetUnbounded=function(t){var e=this.parentView;e instanceof i&&e.onSetChildViewUnbounded(this,t)},i.prototype.cullGeoFrame=function(t){void 0===t&&(t=this.geoFrame),this.setCulled(!t.intersects(this.geoBounds))},Object.defineProperty(i.prototype,"geoViewport",{get:function(){return this.viewContext.geoViewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"geoFrame",{get:function(){var t=this.parentView;return t instanceof i?t.geoFrame:p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ownGeoBounds",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.willSetGeoBounds=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoBounds&&r.viewWillSetGeoBounds(t,e,this)}},i.prototype.onSetGeoBounds=function(t,e){if(!this.isUnbounded()){var o=this.parentView;o instanceof i&&o.onSetChildViewGeoBounds(this,t,e)}},i.prototype.didSetGeoBounds=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoBounds&&r.viewDidSetGeoBounds(t,e,this)}},i.prototype.onSetChildViewGeoBounds=function(t,e,i){},i.prototype.deriveGeoBounds=function(){var t=this.ownGeoBounds;return this.forEachChildView((function(e){if(e instanceof i&&!e.isHidden()&&!e.isUnbounded()){var o=e.geoBounds;o.isDefined()&&(t=null!==t?t.union(o):o)}}),this),null===t&&(t=this.geoFrame),t},i.mountFlags=fr.mountFlags|ro.NeedsProject,i.uncullFlags=fr.uncullFlags|ro.NeedsProject,m([Oo({type:Tt,state:null,inherit:!0})],i.prototype,"geoBoundsColor",void 0),i}(fr);Object.defineProperty(yh.prototype,"geoBounds",{get:function(){return this.geoFrame},enumerable:!0,configurable:!0});var gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(ht),wh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.fromTrait=function(t){return t instanceof Sh?new Vh:t instanceof Hh?new qh:t instanceof Wh?new Uh:t instanceof kh?new Nh:null},m([ds({type:l.Timing,inherit:!0})],e.prototype,"geoTiming",void 0),e}(Ds),mh=function(t){function e(){var e=t.call(this)||this;return e.childViews=[],e.childViewMap=null,Object.defineProperty(e,"geoBounds",{value:p.GeoBox.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.childViews.length},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.childViews;return 0!==t.length?t[0]:null},e.prototype.lastChildView=function(){var t=this.childViews;return 0!==t.length?t[t.length-1]:null},e.prototype.nextChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i>=0&&i+1<e.length?e[i+1]:null},e.prototype.previousChildView=function(t){var e=this.childViews,i=e.indexOf(t);return i-1>=0?e[i-1]:null},e.prototype.forEachChildView=function(t,e){for(var i,o=this.childViews,n=0;n<o.length;){var r=o[n];if(void 0!==(i=t.call(e,r)))break;o[n]===r&&(n+=1)}return i},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){var i=null,o=this.childViews;if(null!==e){if(!(e instanceof fr))throw new TypeError(""+e);e.parentView===this&&(i=o[o.indexOf(e)+1]||null),e.remove()}var n=-1,r=this.getChildView(t);return null!==r&&(n=o.indexOf(r),i=o[n+1]||null,this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),o.splice(n,1),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(void 0)),null!==e&&(e.setKey(t),this.willInsertChildView(e,i),n>=0?o.splice(n,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,i),this.didInsertChildView(e,i),e.cascadeInsert()),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},this.childViewMap=i),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof fr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this.childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof fr))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=this.childViews,o=0!==i.length?i[0]:null;this.willInsertChildView(t,o),i.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,o),this.didInsertChildView(t,o),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof fr))throw new TypeError(""+t);if(null!==e&&!(e instanceof fr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var o=this.childViews,n=null!==e?o.indexOf(e):-1;n>=0?o.splice(n,0,t):o.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.didInsertChildView=function(e,i){e instanceof yh&&this.onInsertChildViewBounds(e,e.geoBounds),t.prototype.didInsertChildView.call(this,e,i)},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof fr))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this.childViews,o=i.indexOf(e);if(o>=0&&i.splice(o,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.didRemoveChildView=function(e){e instanceof yh&&this.onRemoveChildViewBounds(e,e.geoBounds),t.prototype.didRemoveChildView.call(this,e)},e.prototype.removeAll=function(){for(var t=this.childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}},e.prototype.mountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeMount(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.unmountChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnmount(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.powerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadePower(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.unpowerChildViews=function(){for(var t=this.childViews,e=0;e<t.length;){var i=t[e];i.cascadeUnpower(),0==(i.viewFlags&ro.RemovingFlag)?e+=1:(i.setViewFlags(i.viewFlags&~ro.RemovingFlag),this.removeChildView(i))}},e.prototype.processChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.displayChildViews=function(t,e,i){for(var o=this.childViews,n=0;n<o.length;){var r=o[n];i.call(this,r,t,e),0==(r.viewFlags&ro.RemovingFlag)?n+=1:(r.setViewFlags(r.viewFlags&~ro.RemovingFlag),this.removeChildView(r))}},e.prototype.setGeoBounds=function(t){var e=this.geoBounds;e.equals(t)||(this.willSetGeoBounds(t,e),this.geoBounds=t,this.onSetGeoBounds(t,e),this.didSetGeoBounds(t,e))},e.prototype.updateGeoBounds=function(){this.setGeoBounds(this.deriveGeoBounds())},e.prototype.onInsertChildViewBounds=function(t,e){this.updateGeoBounds()},e.prototype.onRemoveChildViewBounds=function(t,e){this.updateGeoBounds()},e.prototype.onSetChildViewGeoBounds=function(t,e,i){this.updateGeoBounds()},e.prototype.onSetChildViewHidden=function(t,e){this.updateGeoBounds()},e.prototype.onSetChildViewUnbounded=function(t,e){this.updateGeoBounds()},e.prototype.deriveGeoBounds=function(){for(var t=this.ownGeoBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof yh&&!n.isHidden()&&!n.isUnbounded()){var r=n.geoBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.geoFrame),t},e.prototype.deriveViewBounds=function(){for(var t=this.ownViewBounds,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof fr&&!n.isHidden()&&!n.isUnbounded()){var r=n.viewBounds;r.isDefined()&&(t=null!==t?t.union(r):r)}}return null===t&&(t=this.viewFrame),t},e.prototype.deriveHitBounds=function(){for(var t,e=this.childViews,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n instanceof fr&&!n.isHidden()&&!n.isIntangible()){var r=n.hitBounds;t=void 0===t?r:t.union(r)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.hitTestChildViews=function(t,e,i){for(var o=this.childViews,n=o.length-1;n>=0;n-=1){var r=o[n];if(r instanceof fr){var s=r.cascadeHitTest(t,e,i);if(null!==s)return s}}return null},e.create=function(){return new e},e}(yh),Sh=function(t){function e(){var e=t.call(this)||this;return e.geoBounds=p.GeoBox.globe(),e.featureFasteners=[],e}return w(e,t),e.prototype.setGeoBounds=function(t){var e=this.geoBounds;t.equals(e)||(this.willSetGeoBounds(t,e),this.geoBounds=t,this.onSetGeoBounds(t,e),this.didSetGeoBounds(t,e))},e.prototype.willSetGeoBounds=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoBounds&&r.traitWillSetGeoBounds(t,e,this)}},e.prototype.onSetGeoBounds=function(t,e){},e.prototype.didSetGeoBounds=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoBounds&&r.traitDidSetGeoBounds(t,e,this)}},e.prototype.insertFeature=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createFeatureFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeFeature=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initFeature=function(t,e){},e.prototype.attachFeature=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachFeature=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetFeature=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetFeature&&l.traitWillSetFeature(t,e,i,this)}},e.prototype.onSetFeature=function(t,e,i,o){null!==e&&this.detachFeature(e,o),null!==t&&(this.attachFeature(t,o),this.initFeature(t,o))},e.prototype.didSetFeature=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetFeature&&l.traitDidSetFeature(t,e,i,this)}},e.prototype.createFeatureFastener=function(t){return new e.FeatureFastener(this,t.key,"feature")},e.prototype.mountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingFeatures=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingFeatures=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectFeatureModel=function(t){return t.getTrait(gh)},e.prototype.detectChildModel=function(t){var e=this.detectFeatureModel(t);null!==e&&this.insertFeature(e)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i];this.detectChildModel(n)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.detectInsertChildModel=function(t,e){var i=this.detectFeatureModel(t);if(null!==i){var o=null!==e?this.detectFeatureModel(e):null;this.insertFeature(i,o)}},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i),this.detectInsertChildModel(e,i)},e.prototype.detectRemoveChildModel=function(t){var e=this.detectFeatureModel(t);null!==e&&this.removeFeature(e)},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e),this.detectRemoveChildModel(e)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountFeatureFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountFeatureFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingFeatures()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingFeatures()},e.FeatureFastener=_.define({type:gh,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetFeature(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetFeature(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetFeature(t,e,i,this)}}),e}(gh),Ch=function(){function t(t,e,i,o,n,r,s,l,a,h,u,p){this.depth=t,this.maxDepth=e,this.density=i,this.geoFrame=o,this.geoBounds=n,this.geoCenter=r,this.southWest=s,this.northWest=l,this.southEast=a,this.northEast=h,this.views=u,this.size=p}return t.prototype.isEmpty=function(){return 0===this.size},t.prototype.contains=function(t){return this.geoFrame.contains(t)},t.prototype.intersects=function(t){return this.geoFrame.intersects(t)},t.prototype.getTree=function(t){if(this.depth<this.maxDepth&&this.size>this.density){var e=this.geoCenter,i=t.lngMin<=e.lng,o=t.latMin<=e.lat,n=t.lngMax>e.lng,r=t.latMax>e.lat;if(i!==n&&o!==r)if(o&&i){var s=this.southWest;if(null!==s)return s.getTree(t)}else if(r&&i){var l=this.northWest;if(null!==l)return l.getTree(t)}else if(o&&n){var a=this.southEast;if(null!==a)return a.getTree(t)}else if(r&&n){var h=this.northEast;if(null!==h)return h.getTree(t)}}return this},t.prototype.has=function(t,e){if(this.depth<this.maxDepth&&this.size>this.density){var i=this.hasNode(t,e);if(void 0!==i)return i}return this.hasLeaf(t,e)},t.prototype.hasNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s)if(n&&o){var l=this.southWest;if(null!==l)return l.has(t,e)}else if(s&&o){var a=this.northWest;if(null!==a)return a.has(t,e)}else if(n&&r){var h=this.southEast;if(null!==h)return h.has(t,e)}else if(s&&r){var u=this.northEast;if(null!==u)return u.has(t,e)}},t.prototype.hasLeaf=function(t,e){return this.views.indexOf(t)>=0},t.prototype.inserted=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.insertedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density+1&&(i=i.reinsertedNode()),i}return this!==(i=i.insertedLeaf(t,e))&&i.depth<i.maxDepth&&i.size===i.density+1&&(i=i.reinsertedNode()),i},t.prototype.insertedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var l=this.southWest,a=l;return null===a&&(a=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoFrame.latMin,this.geoCenter.lng,this.geoCenter.lat))),l!==(a=a.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,a,this.northWest,this.southEast,this.northEast,this.views,this.size+1):this}if(s&&o){var h=this.northWest,u=h;return null===u&&(u=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoFrame.lngMin,this.geoCenter.lat,this.geoCenter.lng,this.geoFrame.latMax))),h!==(u=u.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,u,this.southEast,this.northEast,this.views,this.size+1):this}if(n&&r){var d=this.southEast,c=d;return null===c&&(c=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoFrame.latMin,this.geoFrame.lngMax,this.geoCenter.lat))),d!==(c=c.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,c,this.northEast,this.views,this.size+1):this}if(s&&r){var f=this.northEast,v=f;return null===v&&(v=this.createTree(this.depth+1,this.maxDepth,this.density,new p.GeoBox(this.geoCenter.lng,this.geoCenter.lat,this.geoFrame.lngMax,this.geoFrame.latMax))),f!==(v=v.inserted(t,e))?this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,v,this.views,this.size+1):this}}return null},t.prototype.insertedLeaf=function(t,e){var i=this.views;if(i.indexOf(t)<0){var o=i.slice(0);return o.push(t),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,o,this.size+1)}return this},t.prototype.removed=function(t,e){var i=this;if(i.depth<i.maxDepth&&i.size>i.density){var o=i.removedNode(t,e);if(null!==o)return this!==(i=o)&&i.size===i.density&&(i=i.reinsertedLeaf()),i}return this!==(i=i.removedLeaf(t,e))&&i.size===i.density&&(i=i.reinsertedLeaf()),i},t.prototype.removedNode=function(t,e){var i=this.geoCenter,o=e.lngMin<=i.lng,n=e.latMin<=i.lat,r=e.lngMax>i.lng,s=e.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var l=this.southWest;if(null!==l){var a=l.removed(t,e);return a.isEmpty()&&(a=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,a,this.northWest,this.southEast,this.northEast,this.views,this.size-1)}return this}if(s&&o){var h=this.northWest;if(null!==h){var u=h.removed(t,e);return u.isEmpty()&&(u=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,u,this.southEast,this.northEast,this.views,this.size-1)}return this}if(n&&r){var p=this.southEast;if(null!==p){var d=p.removed(t,e);return d.isEmpty()&&(d=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,d,this.northEast,this.views,this.size-1)}return this}if(s&&r){var c=this.northEast;if(null!==c){var f=c.removed(t,e);return f.isEmpty()&&(f=null),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,f,this.views,this.size-1)}return this}}return null},t.prototype.removedLeaf=function(t,e){var i=this.views,o=i.indexOf(t);if(o>=0){var n=i.slice(0);return n.splice(o,1),this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,this.northEast,n,this.size-1)}return this},t.prototype.reinsertedNode=function(){var t=this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){var i=e.geoBounds,o=t.insertedNode(e,i);t=null!==o?o:t.insertedLeaf(e,i)}),this),t},t.prototype.reinsertedLeaf=function(){var t=this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter);return this.forEach((function(e){t=t.insertedLeaf(e,e.geoBounds)}),this),t},t.prototype.moved=function(t,e,i){if(this.depth<this.maxDepth&&this.size>this.density){var o=this.geoCenter,n=e.lngMin<=o.lng,r=e.latMin<=o.lat,s=e.lngMax>o.lng,l=e.latMax>o.lat,a=i.lngMin<=o.lng,h=i.latMin<=o.lat,u=i.lngMax>o.lng,p=i.latMax>o.lat;if(n!==a||r!==h||s!==u||l!==p)return this.removed(t,i).inserted(t,e);if(n!==s&&r!==l)if(r&&n){var d=this.southWest,c=d.moved(t,e,i);if(d!==c)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,c,this.northWest,this.southEast,this.northEast,this.views,this.size)}else if(l&&n){var f=this.northWest,v=f.moved(t,e,i);if(f!==v)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,v,this.southEast,this.northEast,this.views,this.size)}else if(r&&s){var y=this.southEast,g=y.moved(t,e,i);if(y!==g)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,g,this.northEast,this.views,this.size)}else if(l&&s){var w=this.northEast,m=w.moved(t,e,i);if(w!==m)return this.createTree(this.depth,this.maxDepth,this.density,this.geoFrame,void 0,this.geoCenter,this.southWest,this.northWest,this.southEast,m,this.views,this.size)}}return this},t.prototype.forEach=function(t,e){if(null!==this.southWest&&void 0!==(n=this.southWest.forEach(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEach(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEach(t,e)))return n;if(null!==this.northEast&&void 0!==(n=this.northEast.forEach(t,e)))return n;for(var i=this.views,o=0;o<i.length;o+=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}},t.prototype.forEachReverse=function(t,e){for(var i=this.views,o=i.length-1;o>=0;o-=1){var n;if(void 0!==(n=t.call(e,i[o])))return n}if(null!==this.northEast&&void 0!==(n=this.northEast.forEachReverse(t,e)))return n;if(null!==this.southEast&&void 0!==(n=this.southEast.forEachReverse(t,e)))return n;if(null!==this.northWest&&void 0!==(n=this.northWest.forEachReverse(t,e)))return n;if(null!==this.southWest&&void 0!==(n=this.southWest.forEachReverse(t,e)))return n},t.prototype.forEachIntersecting=function(t,e,i){if(this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.forEachNonIntersecting=function(t,e,i){if(!this.geoFrame.intersects(t)){if(null!==this.southWest)if(void 0!==(r=this.southWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northWest)if(void 0!==(r=this.northWest.forEachNonIntersecting(t,e,i)))return r;if(null!==this.southEast)if(void 0!==(r=this.southEast.forEachNonIntersecting(t,e,i)))return r;if(null!==this.northEast)if(void 0!==(r=this.northEast.forEachNonIntersecting(t,e,i)))return r;for(var o=this.views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=e.call(i,o[n])))return r}}},t.prototype.createTree=function(i,o,n,r,s,l,a,h,u,p,d,c){if(void 0===a&&(a=null),void 0===h&&(h=null),void 0===u&&(u=null),void 0===p&&(p=null),void 0===d&&(d=e.Arrays.empty),void 0===c&&(c=0),void 0===l&&(l=r.center),void 0===s){null!==a&&(s=a.geoBounds),null!==h&&(s=void 0!==s?s.union(h.geoBounds):h.geoBounds),null!==u&&(s=void 0!==s?s.union(u.geoBounds):u.geoBounds),null!==p&&(s=void 0!==s?s.union(p.geoBounds):p.geoBounds);for(var f=0;f<d.length;f+=1){var v=d[f];s=void 0!==s?s.union(v.geoBounds):v.geoBounds}void 0===s&&(s=r)}return new t(i,o,n,r,s,l,a,h,u,p,d,c)},t.empty=function(i,o,n,r){return void 0===i&&(i=p.GeoBox.globe()),void 0===o&&(o=0),void 0===n&&(n=20),void 0===r&&(r=8),new t(o,n=Math.max(o,n),r,i,i,i.center,null,null,null,null,e.Arrays.empty,0)},t}(),bh=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.root=Ch.empty(e,i,o,n),r.childViewMap=null,r}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoTreeColor&&this.geoTreeColor(e.geoTreeColor)},Object.defineProperty(e.prototype,"childViewCount",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){var t=[];return this.root.forEach((function(e){t.push(e)}),this),t},enumerable:!1,configurable:!0}),e.prototype.firstChildView=function(){var t=this.root.forEach((function(t){return t}),this);return void 0!==t?t:null},e.prototype.lastChildView=function(){var t=this.root.forEachReverse((function(t){return t}),this);return void 0!==t?t:null},e.prototype.nextChildView=function(t){if(t.parentView===this){var e=null,i=this.root.forEachReverse((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.previousChildView=function(t){if(t.parentView===this){var e=null,i=this.root.forEach((function(i){if(i===t)return e;e=i}),this);if(void 0!==i)return i}return null},e.prototype.forEachChildView=function(t,e){return this.root.forEach(t,e)},e.prototype.getChildView=function(t){var e=this.childViewMap;if(null!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){if(null!==e){if(!(e instanceof yh))throw new TypeError(""+e);e.remove()}var i=this.getChildView(t);if(null!==i){var o=i.geoBounds;this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i);var n=this.root.geoBounds;this.root=this.root.removed(i,o),(s=this.root.geoBounds).equals(n)||this.onSetGeoBounds(s,n),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(void 0)}if(null!==e){var r=e.geoBounds;e.setKey(t);var s;n=this.root.geoBounds;this.root=this.root.inserted(e,r),(s=this.root.geoBounds).equals(n)||this.onSetGeoBounds(s,n),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,null),this.didInsertChildView(e,null),e.cascadeInsert()}return i},e.prototype.insertChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null===i&&(i={},this.childViewMap=i),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=t.key;if(void 0!==e){var i=this.childViewMap;null!==i&&delete i[e]}},e.prototype.appendChildView=function(t,e){if(!(t instanceof yh))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.root.geoBounds;this.root=this.root.inserted(t,i);var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.prependChildView=function(t,e){if(!(t instanceof yh))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e));var i=t.geoBounds;this.willInsertChildView(t,null);var o=this.root.geoBounds;this.root=this.root.inserted(t,i);var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null),t.cascadeInsert()},e.prototype.insertChildView=function(t,e,i){if(!(t instanceof yh))throw new TypeError(""+t);if(null!==e&&!(e instanceof fr))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i));var o=t.geoBounds;this.willInsertChildView(t,e);var n=this.root.geoBounds;this.root=this.root.inserted(t,o);var r=this.root.geoBounds;r.equals(n)||this.onSetGeoBounds(r,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e),t.cascadeInsert()},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!(e instanceof yh))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");var i=e.geoBounds;this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var o=this.root.geoBounds;this.root=this.root.removed(e,i);var n=this.root.geoBounds;if(n.equals(o)||this.onSetGeoBounds(n,o),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(void 0),"string"==typeof t)return e},e.prototype.removeAll=function(){this.root.forEach((function(t){this.removeChildView(t)}),this)},e.prototype.processChildViews=function(t,e,i){this.processTree(this.root,t,e,i)},e.prototype.processTree=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.processTree(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var s=n[r];o.call(this,s,e,i),0!=(s.viewFlags&ro.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=this.geoTreeColor.value;null!==i&&this.renderGeoTree(e,i)},e.prototype.renderGeoTree=function(t,e){var i=t.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderGeoTreeOutline(this.root,t.geoViewport,o,e),o.restore()}},e.prototype.renderGeoTreeOutline=function(t,e,i,o){null!==t.southWest&&this.renderGeoTreeOutline(t.southWest,e,i,o),null!==t.northWest&&this.renderGeoTreeOutline(t.northWest,e,i,o),null!==t.southEast&&this.renderGeoTreeOutline(t.southEast,e,i,o),null!==t.northEast&&this.renderGeoTreeOutline(t.northEast,e,i,o);if(t.depth>=2){var n=(t.depth-2)/(t.maxDepth-2),r=4*(1-n)+.5*n;this.renderGeoOutline(t.geoFrame,e,i,o,r)}},e.prototype.displayChildViews=function(t,e,i){this.displayTree(this.root,t,e,i)},e.prototype.displayTree=function(t,e,i,o){null!==t.southWest&&t.southWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.southWest,e,i,o),null!==t.northWest&&t.northWest.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.northWest,e,i,o),null!==t.southEast&&t.southEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.southEast,e,i,o),null!==t.northEast&&t.northEast.geoFrame.intersects(i.geoViewport.geoFrame)&&this.displayTree(t.northEast,e,i,o);for(var n=t.views,r=0;r<n.length;r+=1){var s=n[r];o.call(this,s,e,i),0!=(s.viewFlags&ro.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~ro.RemovingFlag),this.removeChildView(s))}},e.prototype.onSetChildViewGeoBounds=function(t,e,i){var o=this.root.geoBounds;this.root=this.root.moved(t,e,i);var n=this.root.geoBounds;n.equals(o)||this.onSetGeoBounds(n,o)},e.prototype.hitTest=function(t,e,i){var o=i.geoViewport.unproject(t,e);return this.hitTestTree(this.root,t,e,o,i)},e.prototype.hitTestTree=function(t,e,i,o,n){var r=null;if(null!==t.southWest&&t.southWest.geoFrame.contains(o)&&(r=this.hitTestTree(t.southWest,e,i,o,n)),null===r&&null!==t.northWest&&t.northWest.geoFrame.contains(o)&&(r=this.hitTestTree(t.northWest,e,i,o,n)),null===r&&null!==t.southEast&&t.southEast.geoFrame.contains(o)&&(r=this.hitTestTree(t.southEast,e,i,o,n)),null===r&&null!==t.northEast&&t.northEast.geoFrame.contains(o)&&(r=this.hitTestTree(t.northEast,e,i,o,n)),null===r)for(var s=t.views,l=0;l<s.length;l+=1){if(null!==(r=s[l].cascadeHitTest(e,i,n)))break}return r},e.create=function(){return new e},m([Oo({type:Tt,state:null})],e.prototype,"geoTreeColor",void 0),e}(yh);Object.defineProperty(bh.prototype,"geoBounds",{get:function(){return this.root.geoBounds},enumerable:!0,configurable:!0});var Vh=function(t){function e(){var e=t.call(this)||this;return e.featureFasteners=[],e}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){for(var e=t.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertFeatureTrait(n)}},e.prototype.detachGeoTrait=function(t){for(var e=t.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeFeatureTrait(n)}},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoTrait&&r.controllerWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoTrait&&r.controllerDidSetGeoTrait(t,e,this)}},e.prototype.willSetGeoBounds=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoBounds&&r.controllerWillSetGeoBounds(t,e,this)}},e.prototype.onSetGeoBounds=function(t,e){},e.prototype.didSetGeoBounds=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoBounds&&r.controllerDidSetGeoBounds(t,e,this)}},e.prototype.createGeoView=function(){return bh.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].controller;if(null!==n){var r=n.geo.view;null!==r&&null===r.parentView&&n.geo.injectView(t)}}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoView&&r.controllerWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoView&&r.controllerDidSetGeoView(t,e,this)}},e.prototype.projectGeoView=function(t,e){},e.prototype.cullGeoView=function(t){},e.prototype.uncullGeoView=function(t){},e.prototype.insertFeature=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createFeatureFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeFeature=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createFeature=function(t){return wh.fromTrait(t)},e.prototype.initFeature=function(t,e){var i=t.geo.trait;null!==i&&this.initFeatureTrait(i,e);var o=t.geo.view;null!==o&&this.initFeatureView(o,e)},e.prototype.attachFeature=function(t,e){var i=t.geo.trait;null!==i&&this.attachFeatureTrait(i,e);var o=t.geo.view;null!==o&&this.attachFeatureView(o,e)},e.prototype.detachFeature=function(t,e){var i=t.geo.view;null!==i&&this.detachFeatureView(i,e);var o=t.geo.trait;null!==o&&this.detachFeatureTrait(o,e)},e.prototype.willSetFeature=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetFeature&&s.controllerWillSetFeature(t,e,i)}},e.prototype.onSetFeature=function(t,e,i){null!==e&&this.detachFeature(e,i),null!==t&&(this.attachFeature(t,i),this.initFeature(t,i))},e.prototype.didSetFeature=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetFeature&&s.controllerDidSetFeature(t,e,i)}},e.prototype.insertFeatureTrait=function(t,e){void 0===e&&(e=null);for(var i=this.featureFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var l=this.createFeature(t);if(null!==l&&(l.geo.setTrait(t),this.insertChildController(l,o),null===l.geo.view)){var a=this.createFeatureView(l),h=null;null!==o&&(h=o.geo.view);var u=this.geo.view;null!==u?l.geo.injectView(u,a,h,null):l.geo.setView(a,h)}},e.prototype.removeFeatureTrait=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initFeatureTrait=function(t,e){},e.prototype.attachFeatureTrait=function(t,e){},e.prototype.detachFeatureTrait=function(t,e){},e.prototype.willSetFeatureTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetFeatureTrait&&s.controllerWillSetFeatureTrait(t,e,i)}},e.prototype.onSetFeatureTrait=function(t,e,i){null!==e&&this.detachFeatureTrait(e,i),null!==t&&(this.attachFeatureTrait(t,i),this.initFeatureTrait(t,i))},e.prototype.didSetFeatureTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetFeatureTrait&&s.controllerDidSetFeatureTrait(t,e,i)}},e.prototype.createFeatureView=function(t){return t.geo.createView()},e.prototype.initFeatureView=function(t,e){},e.prototype.attachFeatureView=function(t,e){},e.prototype.detachFeatureView=function(t,e){t.remove()},e.prototype.willSetFeatureView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetFeatureView&&s.controllerWillSetFeatureView(t,e,i)}},e.prototype.onSetFeatureView=function(t,e,i){null!==e&&this.detachFeatureView(e,i),null!==t&&(this.attachFeatureView(t,i),this.initFeatureView(t,i))},e.prototype.didSetFeatureView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetFeatureView&&s.controllerDidSetFeatureView(t,e,i)}},e.prototype.willSetFeatureGeoBounds=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetFeatureGeoBounds&&s.controllerWillSetFeatureGeoBounds(t,e,i)}},e.prototype.onSetFeatureGeoBounds=function(t,e,i){},e.prototype.didSetFeatureGeoBounds=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetFeatureGeoBounds&&s.controllerDidSetFeatureGeoBounds(t,e,i)}},e.prototype.createFeatureFastener=function(t){return new e.FeatureFastener(this,t.key,"feature")},e.prototype.getFeatureFastener=function(t){for(var e=this.featureFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountFeatureFasteners=function(){for(var t=this.featureFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectFeatureController=function(t){return t instanceof wh?t:null},e.prototype.detectInsertChildController=function(t,e){var i=this.detectFeatureController(t);null!==i&&this.insertFeature(i,e)},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i),this.detectInsertChildController(e,i)},e.prototype.detectRemoveChildController=function(t){var e=this.detectFeatureController(t);null!==e&&this.removeFeature(e)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e),this.detectRemoveChildController(e)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountFeatureFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountFeatureFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.GeoFastener=Vs.define({observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewWillProject:function(t,e){this.owner.projectGeoView(t,e)},viewDidCull:function(t){this.owner.cullGeoView(t)},viewWillUncull:function(t){this.owner.uncullGeoView(t)},createView:function(){return this.owner.createGeoView()},traitType:Sh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitWillSetGeoBounds:function(t,e){this.owner.willSetGeoBounds(t,e)},traitDidSetGeoBounds:function(t,e){this.owner.onSetGeoBounds(t,e),this.owner.didSetGeoBounds(t,e)},traitWillSetFeature:function(t,e,i){null!==e&&this.owner.removeFeatureTrait(e)},traitDidSetFeature:function(t,e,i){null!==t&&this.owner.insertFeatureTrait(t,i)}}),e.FeatureFastener=Fs.define({type:wh,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetFeature(t,e,this)},onSetController:function(t,e){this.owner.onSetFeature(t,e,this)},didSetController:function(t,e){this.owner.didSetFeature(t,e,this)},controllerWillSetGeoTrait:function(t,e){this.owner.willSetFeatureTrait(t,e,this)},controllerDidSetGeoTrait:function(t,e){this.owner.onSetFeatureTrait(t,e,this),this.owner.didSetFeatureTrait(t,e,this)},controllerWillSetGeoView:function(t,e){this.owner.willSetFeatureView(t,e,this)},controllerDidSetGeoView:function(t,e){this.owner.onSetFeatureView(t,e,this),this.owner.didSetFeatureView(t,e,this)},controllerWillSetGeoBounds:function(t,e){this.owner.willSetFeatureGeoBounds(t,e,this)},controllerDidSetGeoBounds:function(t,e){this.owner.onSetFeatureGeoBounds(t,e,this),this.owner.didSetFeatureGeoBounds(t,e,this)}}),m([Vs({extends:e.GeoFastener})],e.prototype,"geo",void 0),e}(wh),Th=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e.setViewFlags(e.viewFlags|ro.UnboundedFlag),e}return w(e,t),e.prototype.willSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoCenter&&r.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectRipple(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectRipple(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectRipple(e)}},e.prototype.projectRipple=function(t){if(this.viewCenter.takesPrecedence(ro.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderRipple(i.context,this.viewFrame),o.restore()}},e.prototype.renderRipple=function(t,e){var i=this.viewCenter.value;if(null!==i&&i.isDefined()){var o=Math.min(e.width,e.height),n=this.radius.getValue().pxValue(o);t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI);var r=this.stroke.value;if(null!==r){var s=this.strokeWidth.value;null!==s&&(t.lineWidth=s.pxValue(o)),t.strokeStyle=r.toString(),t.stroke()}}},e.prototype.renderGeoBounds=function(t,e,i){},e.prototype.updateGeoBounds=function(){},e.prototype.updateViewBounds=function(){this.viewBounds=this.deriveViewBounds()},e.prototype.deriveViewBounds=function(){var t=this.viewCenter.value;return null!==t&&t.isDefined()?t.bounds:r.R2Box.undefined()},e.prototype.ripple=function(t){var e,i,o,n,s,a;e=void 0===t||void 0===t.source?null:t.source,i=void 0===t||void 0===t.center||null===t.center?null:p.GeoPoint.fromAny(t.center),o=void 0===t||void 0===t.width||null===t.width?null:r.Length.fromAny(t.width),n=void 0===t||void 0===t.radius||null===t.radius?r.Length.pct(12.5):r.Length.fromAny(t.radius),s=void 0===t||void 0===t.color||null===t.color?this.getLookOr(se.accentColor,null):t.color instanceof se?this.getLookOr(t.color,null):Tt.fromAny(t.color),a=void 0===t||void 0===t.timing||!0===t.timing?this.getLookOr(se.timing,me.ambient,!1):"number"==typeof t.timing?l.Easing.linear.withDuration(t.timing):l.Timing.fromAny(t.timing);var h=void 0!==t?t.opacity:void 0;return null!==e&&this.source.setView(e),null!==i&&this.geoCenter.setState(i,ro.Intrinsic),null!==o&&this.strokeWidth.setState(o,ro.Intrinsic),this.radius.setState(n,a),null!==s&&(this.stroke.setState(void 0!==h?s.alpha(h):s),this.stroke.setState(s.alpha(0),a)),this},e.ripple=function(t,i){if(document.hidden||t.isHidden()||t.isCulled()||!t.geoBounds.intersects(t.geoViewport.geoFrame))return null;var o=e.create();o.source.setView(t);var n=t.getBaseView(yh);return null===n&&(n=t),n.appendChildView(o),o.ripple(i),o},e.create=function(){return new e},m([Oo({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([Oo({type:r.R2Point,state:r.R2Point.undefined(),updateFlags:ro.NeedsRender,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"viewCenter",void 0),m([Oo({type:r.Length,state:r.Length.zero(),onEnd:function(){this.owner.source.setView(null),this.owner.remove()}})],e.prototype,"radius",void 0),m([Oo({type:Tt,state:null,look:se.accentColor,inherit:!0})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:r.Length.px(1),inherit:!0})],e.prototype,"strokeWidth",void 0),m([Zo({child:!1,observe:!0,onSetView:function(t,e){null!==t&&this.owner.geoCenter.setState(t.geoBounds.center,ro.Intrinsic)},viewDidUnmount:function(t){this.owner.remove()},viewDidSetGeoBounds:function(t,e,i){this.owner.geoCenter.setState(t.center,ro.Intrinsic)}})],e.prototype,"source",void 0),e}(mh),Fh=function(t){function e(){var e=t.call(this)||this;return e.canvas=e.createCanvas(),Object.defineProperty(e,"renderer",{value:e.createRenderer(),writable:!0,enumerable:!0,configurable:!0}),e.ownRasterFrame=null,e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoAnchor&&this.geoAnchor(e.geoAnchor),void 0!==e.viewAnchor&&this.viewAnchor(e.viewAnchor),void 0!==e.xAlign&&this.xAlign(e.xAlign),void 0!==e.yAlign&&this.yAlign(e.yAlign),void 0!==e.width&&this.width(e.width),void 0!==e.height&&this.height(e.height),void 0!==e.opacity&&this.opacity(e.opacity),void 0!==e.compositeOperation&&this.compositeOperation(e.compositeOperation)},e.prototype.willSetGeoAnchor=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoAnchor&&r.viewWillSetGeoAnchor(t,e,this)}},e.prototype.onSetGeoAnchor=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectRaster(this.viewContext)},e.prototype.didSetGeoAnchor=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoAnchor&&r.viewDidSetGeoAnchor(t,e,this)}},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return t instanceof fr?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),this.renderer=t,this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this.canvas.getContext("2d")))return new br(e,r.Transform.identity(),this.pixelRatio,this.theme.state,this.mood.state);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this.canvas.getContext("webgl")))return new Vr(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.needsUpdate=function(e,i){var o=(e=t.prototype.needsUpdate.call(this,e,i))&(ro.NeedsRender|ro.NeedsComposite);return 0!==o&&(e|=ro.NeedsComposite,this.setViewFlags(this.viewFlags|ro.NeedsDisplay|ro.NeedsComposite|o)),e},e.prototype.needsProcess=function(t,e){return 0==(this.viewFlags&ro.ProcessMask)&&0==(t&(ro.NeedsResize|ro.NeedsProject))&&(t=0),t},e.prototype.onResize=function(e){t.prototype.onResize.call(this,e),this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectRaster(e)},e.prototype.projectGeoAnchor=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewAnchor.setIntermediateValue(this.viewAnchor.value,i),this.projectRaster(e)}},e.prototype.projectRaster=function(t){var e;if(this.viewAnchor.takesPrecedence(ro.Intrinsic)){var i=this.geoAnchor.value;e=null!==i&&i.isDefined()?t.geoViewport.project(i):null,this.viewAnchor.setValue(e)}else e=this.viewAnchor.value;if(null!==e){var o=this.deriveViewFrame(),n=o.width,s=o.height,l=Math.min(n,s),a=this.width.value;a=a instanceof r.Length?a.pxValue(l):n;var h=this.height.value;h=h instanceof r.Length?h.pxValue(l):s;var u=e.x-a*this.xAlign.getValue(),p=e.y-h*this.yAlign.getValue(),d=new r.R2Box(u,p,u+a,p+h);this.setRasterFrame(d),this.setViewFrame(d),this.setCulled(!o.intersects(d))}else this.setCulled(!this.viewFrame.intersects(this.rasterFrame))},e.prototype.needsDisplay=function(t,e){return 0!=(this.viewFlags&ro.DisplayMask)?t|=ro.NeedsComposite:t=0!=(t&ro.NeedsComposite)?ro.NeedsDisplay|ro.NeedsComposite:0,t},e.prototype.onRender=function(e){var i=this.rasterFrame;this.resizeCanvas(this.canvas,i),this.resetRenderer(i),this.clearCanvas(i),t.prototype.onRender.call(this,e)},e.prototype.didComposite=function(e){this.compositeImage(e),t.prototype.didComposite.call(this,e)},e.prototype.onSetHidden=function(t){t||this.requireUpdate(ro.NeedsRender|ro.NeedsComposite)},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"rasterFrame",{get:function(){var t=this.ownRasterFrame;return null===t&&(t=this.deriveRasterFrame()),t},enumerable:!1,configurable:!0}),e.prototype.setRasterFrame=function(t){this.ownRasterFrame=t},e.prototype.deriveRasterFrame=function(){return this.deriveViewBounds()},e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t,e){var i=this.pixelRatio,o=e.width,n=e.height,r=o*i,s=n*i,l=t.width,a=t.height;r===l&&s===a||(t.width=r,t.height=s,t.style.width=o+"px",t.style.height=n+"px")},e.prototype.clearCanvas=function(t){var e=this.renderer;if(e instanceof br)e.context.clearRect(0,0,t.xMax,t.yMax);else if(e instanceof Vr){var i=e.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(t){var e=this.renderer;if(e instanceof br){var i=this.pixelRatio,o=t.xMin*i,n=t.yMin*i;e.context.setTransform(i,0,0,i,-o,-n),e.setTransform(r.Transform.affine(i,0,0,i,-o,-n))}else e instanceof Vr&&e.context.viewport(t.x,t.y,t.xMax,t.yMax)},e.prototype.compositeImage=function(t){var e=t.compositor;if(e instanceof br){var i=e.context,o=this.rasterFrame,n=this.canvas;if(o.isDefined()&&0!==o.width&&0!==o.height&&0!==n.width&&0!==n.height){var r=i.globalAlpha,s=i.globalCompositeOperation;i.globalAlpha=this.opacity.getValue(),i.globalCompositeOperation=this.compositeOperation.getValue(),i.drawImage(n,o.x,o.y,o.width,o.height),i.globalAlpha=r,i.globalCompositeOperation=s}}},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.create=function(){return new e},e.mountFlags=mh.mountFlags|ro.NeedsRender|ro.NeedsComposite,e.powerFlags=mh.powerFlags|ro.NeedsRender|ro.NeedsComposite,e.uncullFlags=mh.uncullFlags|ro.NeedsRender|ro.NeedsComposite,m([Oo({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoAnchor(t)},willSetValue:function(t,e){this.owner.willSetGeoAnchor(t,e)},didSetValue:function(t,e){this.owner.onSetGeoAnchor(t,e),this.owner.didSetGeoAnchor(t,e)}})],e.prototype,"geoAnchor",void 0),m([Oo({type:r.R2Point,state:r.R2Point.undefined()})],e.prototype,"viewAnchor",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsComposite})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsComposite})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsResize|ro.NeedsLayout|ro.NeedsRender|ro.NeedsComposite})],e.prototype,"width",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsResize|ro.NeedsLayout|ro.NeedsRender|ro.NeedsComposite})],e.prototype,"height",void 0),m([Oo({type:Number,state:1,updateFlags:ro.NeedsComposite})],e.prototype,"opacity",void 0),m([Oo({type:String,state:"source-over",updateFlags:ro.NeedsComposite})],e.prototype,"compositeOperation",void 0),e}(mh),Ph=function(t){function e(e){var i=t.call(this)||this;return i.geoTile=e,Object.defineProperty(i,"geoBounds",{value:e.bounds,writable:!0,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.setGeoBounds=function(t){},e.prototype.updateGeoBounds=function(){},e}(mh),Mh=function(t){function e(e){var i=t.call(this)||this;return i.geoTile=e,i.geoBounds=e.bounds,i.tileFasteners=[],i}return w(e,t),e.prototype.setGeoBounds=function(t){},e.prototype.insertTile=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createTileFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeTile=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initTile=function(t,e){},e.prototype.attachTile=function(t,e){},e.prototype.detachTile=function(t,e){},e.prototype.willSetTile=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetTile&&l.traitWillSetTile(t,e,i,this)}},e.prototype.onSetTile=function(t,e,i,o){null!==e&&this.detachTile(e,o),null!==t&&(this.attachTile(t,o),this.initTile(t,o))},e.prototype.didSetTile=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetTile&&l.traitDidSetTile(t,e,i,this)}},e.prototype.createTileFastener=function(t){return new e.TileFastener(this,t.key,"tile")},e.prototype.mountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.createTileTrait=function(t){return new e(t)},e.prototype.createTileModel=function(t){var e=this.createTileTrait(t);if(null!==e){var i=new ft;return i.setTrait("tile",e),i}return null},e.prototype.initTiles=function(){var t=this.getChildModel("southWest");null===t&&null!==(t=this.createTileModel(this.geoTile.southWestTile))&&this.setChildModel("southWest",t);var e=this.getChildModel("northWest");null===e&&null!==(e=this.createTileModel(this.geoTile.northWestTile))&&this.setChildModel("northWest",e);var i=this.getChildModel("southEast");null===i&&null!==(i=this.createTileModel(this.geoTile.southEastTile))&&this.setChildModel("southEast",i);var o=this.getChildModel("northEast");null===o&&null!==(o=this.createTileModel(this.geoTile.northEastTile))&&this.setChildModel("northEast",o)},e.prototype.detectTileModel=function(t){return t.getTrait(e)},e.prototype.detectChildModel=function(e){var i=this.detectTileModel(e);null!==i?this.insertTile(i):t.prototype.detectChildModel.call(this,e)},e.prototype.detectInsertChildModel=function(e,i){var o=this.detectTileModel(e);if(null!==o){var n=null!==i?this.detectTileModel(i):null;this.insertTile(o,n)}else t.prototype.detectInsertChildModel.call(this,e,i)},e.prototype.detectRemoveChildModel=function(e){var i=this.detectTileModel(e);null!==i?this.removeTile(i):t.prototype.detectRemoveChildModel.call(this,e)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountTileFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountTileFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.initTiles()},e.TileFastener=_.define({type:e,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetTile(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetTile(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetTile(t,e,i,this)}}),e}(Sh),Dh=function(t){function e(e){var i=t.call(this)||this;return i.geoTile=e,i.tileFasteners=[],i}return w(e,t),e.prototype.initGeoTrait=function(e){t.prototype.initGeoTrait.call(this,e)},e.prototype.attachGeoTrait=function(e){t.prototype.attachGeoTrait.call(this,e);for(var i=e.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].trait;null!==r&&this.insertTileTrait(r)}var s=this.geo.view;null===s||s.isCulled()||e.addTraitConsumer(this)},e.prototype.detachGeoTrait=function(e){e.removeTraitConsumer(this);for(var i=e.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].trait;null!==r&&this.removeTileTrait(r)}t.prototype.detachGeoTrait.call(this,e)},e.prototype.willSetGeoTrait=function(e,i){t.prototype.willSetGeoTrait.call(this,e,i)},e.prototype.onSetGeoTrait=function(e,i){t.prototype.onSetGeoTrait.call(this,e,i)},e.prototype.didSetGeoTrait=function(e,i){t.prototype.didSetGeoTrait.call(this,e,i)},e.prototype.createGeoView=function(){return new Ph(this.geoTile)},e.prototype.initGeoView=function(e){t.prototype.initGeoView.call(this,e),e.setCulled(!0)},e.prototype.attachGeoView=function(e){t.prototype.attachGeoView.call(this,e);for(var i=this.tileFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;if(null!==r){var s=r.geo.view;null!==s&&null===s.parentView&&r.geo.injectView(e)}}},e.prototype.detachGeoView=function(e){t.prototype.detachGeoView.call(this,e)},e.prototype.projectGeoView=function(e,i){t.prototype.projectGeoView.call(this,e,i),this.autoCullGeoView(e.geoViewport,i),this.autoConsumeGeoView(e.geoViewport,i)},Object.defineProperty(e.prototype,"minCullZoom",{get:function(){return this.geoTile.z},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxCullZoom",{get:function(){return 1/0},enumerable:!1,configurable:!0}),e.prototype.autoCullGeoView=function(t,e){var i=this.minCullZoom<=t.zoom&&t.zoom<this.maxCullZoom&&t.geoFrame.intersects(e.geoBounds);e.setCulled(!i)},Object.defineProperty(e.prototype,"minConsumeZoom",{get:function(){return this.geoTile.z},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxConsumeZoom",{get:function(){return 1/0},enumerable:!1,configurable:!0}),e.prototype.autoConsumeGeoView=function(t,e){var i=this.geo.trait;null!==i&&(this.minConsumeZoom<=t.zoom&&t.zoom<this.maxConsumeZoom&&t.geoFrame.intersects(e.geoBounds)?i.addTraitConsumer(this):i.removeTraitConsumer(this))},e.prototype.insertTile=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createTileFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeTile=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createTile=function(t){return new e(t.geoTile)},e.prototype.initTile=function(t,e){var i=t.geo.trait;null!==i&&this.initTileTrait(i,e);var o=t.geo.view;null!==o&&this.initTileView(o,e)},e.prototype.attachTile=function(t,e){var i=t.geo.trait;null!==i&&this.attachTileTrait(i,e);var o=t.geo.view;null!==o&&this.attachTileView(o,e)},e.prototype.detachTile=function(t,e){var i=t.geo.view;null!==i&&this.detachTileView(i,e);var o=t.geo.trait;null!==o&&this.detachTileTrait(o,e)},e.prototype.willSetTile=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTile&&s.controllerWillSetTile(t,e,i)}},e.prototype.onSetTile=function(t,e,i){null!==e&&this.detachTile(e,i),null!==t&&(this.attachTile(t,i),this.initTile(t,i))},e.prototype.didSetTile=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTile&&s.controllerDidSetTile(t,e,i)}},e.prototype.insertTileTrait=function(t,e){void 0===e&&(e=null);for(var i=this.tileFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var l=this.createTile(t);if(null!==l&&(l.geo.setTrait(t),this.insertChildController(l,o),null===l.geo.view)){var a=this.createTileView(l),h=null;null!==o&&(h=o.geo.view);var u=this.geo.view;null!==u?l.geo.injectView(u,a,h,null):l.geo.setView(a,h)}},e.prototype.removeTileTrait=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initTileTrait=function(t,e){},e.prototype.attachTileTrait=function(t,e){},e.prototype.detachTileTrait=function(t,e){},e.prototype.willSetTileTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTileTrait&&s.controllerWillSetTileTrait(t,e,i)}},e.prototype.onSetTileTrait=function(t,e,i){null!==e&&this.detachTileTrait(e,i),null!==t&&(this.attachTileTrait(t,i),this.initTileTrait(t,i))},e.prototype.didSetTileTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTileTrait&&s.controllerDidSetTileTrait(t,e,i)}},e.prototype.createTileView=function(t){return t.geo.createView()},e.prototype.initTileView=function(t,e){},e.prototype.attachTileView=function(t,e){},e.prototype.detachTileView=function(t,e){t.remove()},e.prototype.willSetTileView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetTileView&&s.controllerWillSetTileView(t,e,i)}},e.prototype.onSetTileView=function(t,e,i){null!==e&&this.detachTileView(e,i),null!==t&&(this.attachTileView(t,i),this.initTileView(t,i))},e.prototype.didSetTileView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetTileView&&s.controllerDidSetTileView(t,e,i)}},e.prototype.createTileFastener=function(t){return new e.TileFastener(this,t.key,"tile")},e.prototype.getTileFastener=function(t){for(var e=this.tileFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountTileFasteners=function(){for(var t=this.tileFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectTileController=function(t){return t instanceof e?t:null},e.prototype.detectInsertChildController=function(e,i){var o=this.detectTileController(e);null!==o?this.insertTile(o,i):t.prototype.detectInsertChildController.call(this,e,i)},e.prototype.detectRemoveChildController=function(e){var i=this.detectTileController(e);null!==i?this.removeTile(i):t.prototype.detectRemoveChildController.call(this,e)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountTileFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountTileFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.GeoFastener=Vs.define({extends:Vh.GeoFastener,traitType:Mh,observeTrait:!0,traitWillSetTile:function(t,e,i){null!==e&&this.owner.removeTileTrait(e)},traitDidSetTile:function(t,e,i){null!==t&&this.owner.insertTileTrait(t,i)}}),e.TileFastener=Fs.define({type:e,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetTile(t,e,this)},onSetController:function(t,e){this.owner.onSetTile(t,e,this)},didSetController:function(t,e){this.owner.didSetTile(t,e,this)},controllerWillSetGeoTrait:function(t,e){this.owner.willSetTileTrait(t,e,this)},controllerDidSetGeoTrait:function(t,e){this.owner.onSetTileTrait(t,e,this),this.owner.didSetTileTrait(t,e,this)},controllerWillSetGeoView:function(t,e){this.owner.willSetTileView(t,e,this)},controllerDidSetGeoView:function(t,e){this.owner.onSetTileView(t,e,this),this.owner.didSetTileView(t,e,this)}}),m([Vs({extends:e.GeoFastener})],e.prototype,"geo",void 0),e}(Vh),xh=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.radius&&this.radius(e.radius),void 0!==e.hitRadius&&this.hitRadius(e.hitRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},e.prototype.willSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoCenter&&r.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectCircle(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectCircle(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectCircle(e)}},e.prototype.projectCircle=function(t){if(this.viewCenter.takesPrecedence(ro.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=Math.min(o.width,o.height),s=this.radius.getValue().pxValue(n),l=this.viewCenter.value,a=this.viewCenter.state;null!==l&&null!==a&&(o.intersectsCircle(new r.R2Circle(l.x,l.y,s))||o.intersectsSegment(new r.R2Segment(l.x,l.y,a.x,a.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderCircle(i.context,this.viewFrame),o.restore()}},e.prototype.renderCircle=function(t,e){var i=this.viewCenter.value;if(null!==i&&i.isDefined()){var o=Math.min(e.width,e.height),n=this.radius.getValue().pxValue(o);t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI);var r=this.fill.value;null!==r&&(t.fillStyle=r.toString(),t.fill());var s=this.stroke.value;if(null!==s){var l=this.strokeWidth.value;null!==l&&(t.lineWidth=l.pxValue(o)),t.strokeStyle=s.toString(),t.stroke()}}},e.prototype.renderGeoBounds=function(t,e,i){},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),l=this.radius.getValue().pxValue(i);return new r.R2Box(n-l,s-l,n+l,s+l)}return this.pageBounds},enumerable:!1,configurable:!0}),e.prototype.updateViewBounds=function(){this.viewBounds=this.deriveViewBounds()},e.prototype.deriveViewBounds=function(){var t=this.viewCenter.value;if(null!==t&&t.isDefined()){var e=this.viewFrame,i=Math.min(e.width,e.height),o=this.radius.getValue().pxValue(i);return new r.R2Box(t.x-o,t.y-o,t.x+o,t.y+o)}return r.R2Box.undefined()},Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()){var i=Math.min(e.width,e.height),o=this.radius.getValue().pxValue(i),n=Math.max(this.hitRadius.getStateOr(o),o);return new r.R2Box(t.x-n,t.y-n,t.x+n,t.y+n)}return this.viewBounds},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;return this.hitTestCircle(t,e,n,this.viewFrame,o.transform)}return null},e.prototype.hitTestCircle=function(t,e,i,o,n){var r=this.viewCenter.value;if(null!==r&&r.isDefined()){var s=Math.min(o.width,o.height),l=this.radius.getValue().pxValue(s);if(null!==this.fill.value){var a=Math.max(this.hitRadius.getStateOr(l),l),h=r.x-t,u=r.y-e;if(h*h+u*u<a*a)return this}var p=this.strokeWidth.value;if(null!==this.stroke.value&&null!==p){var d=n.transform(t,e);if(i.save(),i.beginPath(),i.arc(r.x,r.y,l,0,2*Math.PI),i.lineWidth=p.pxValue(s),i.isPointInStroke(d.x,d.y))return i.restore(),this;i.restore()}}return null},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([Oo({type:r.R2Point,state:r.R2Point.undefined(),updateFlags:ro.NeedsRender,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"viewCenter",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],e.prototype,"radius",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([bo({type:Number})],e.prototype,"hitRadius",void 0),e}(mh),Lh=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter),void 0!==e.innerRadius&&this.innerRadius(e.innerRadius),void 0!==e.outerRadius&&this.outerRadius(e.outerRadius),void 0!==e.startAngle&&this.startAngle(e.startAngle),void 0!==e.sweepAngle&&this.sweepAngle(e.sweepAngle),void 0!==e.padAngle&&this.padAngle(e.padAngle),void 0!==e.padRadius&&this.padRadius(e.padRadius),void 0!==e.cornerRadius&&this.cornerRadius(e.cornerRadius),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth)},e.prototype.willSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoCenter&&r.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectArc(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.viewCenter.value;return null!==t&&t.isDefined()?new Lr(t,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){var t=this.viewCenter.state;return null!==t&&t.isDefined()?new Lr(t,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state):null},enumerable:!1,configurable:!0}),e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectArc(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectArc(e)}},e.prototype.projectArc=function(t){if(this.viewCenter.takesPrecedence(ro.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=Math.min(o.width,o.height),s=this.outerRadius.getValue().pxValue(n),l=this.viewCenter.value,a=this.viewCenter.state;null!==l&&null!==a&&(o.intersectsCircle(new r.R2Circle(l.x,l.y,s))||o.intersectsSegment(new r.R2Segment(l.x,l.y,a.x,a.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},e.prototype.renderArc=function(t,e){var i=this.value;if(null!==i&&e.isDefined()){t.beginPath(),i.draw(t,e);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value;if(null!==n){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s)}t.strokeStyle=n.toString(),t.stroke()}}},e.prototype.renderGeoBounds=function(t,e,i){},e.prototype.updateGeoBounds=function(){},e.prototype.updateViewBounds=function(){this.viewBounds=this.deriveViewBounds()},e.prototype.deriveViewBounds=function(){var t=this.viewCenter.value;if(null!==t&&t.isDefined()){var e=this.viewFrame,i=Math.min(e.width,e.height),o=this.outerRadius.getValue().pxValue(i);return new r.R2Box(t.x-o,t.y-o,t.x+o,t.y+o)}return r.R2Box.undefined()},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),l=(this.innerRadius.getValue().pxValue(i)+this.outerRadius.getValue().pxValue(i))/2,a=this.startAngle.getValue().radValue()+this.sweepAngle.getValue().radValue()/2,h=n+l*Math.cos(a),u=s+l*Math.sin(a);return new r.R2Box(h,u,h,u)}return this.pageBounds},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestArc(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestArc=function(t,e,i,o){var n=this.value;if(null!==n){if(i.beginPath(),n.draw(i,o),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(void 0!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(s),i.isPointInStroke(t,e))return this}}}return null},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([Oo({type:r.R2Point,state:r.R2Point.undefined(),updateFlags:ro.NeedsRender,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"viewCenter",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],e.prototype,"innerRadius",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],e.prototype,"outerRadius",void 0),m([Oo({type:r.Angle,state:r.Angle.zero()})],e.prototype,"startAngle",void 0),m([Oo({type:r.Angle,state:r.Angle.zero()})],e.prototype,"sweepAngle",void 0),m([Oo({type:r.Angle,state:r.Angle.zero()})],e.prototype,"padAngle",void 0),m([Oo({type:r.Length,state:null})],e.prototype,"padRadius",void 0),m([Oo({type:r.Length,state:r.Length.zero()})],e.prototype,"cornerRadius",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),e}(mh),Ah=function(t){function e(){var e=t.call(this)||this;return Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.geoPath&&this.geoPath(e.geoPath)},e.prototype.willSetGeoPath=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoPath&&r.viewWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectPath(this.viewContext)},e.prototype.didSetGeoPath=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoPath&&r.viewDidSetGeoPath(t,e,this)}},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectPath(e)},e.prototype.projectPath=function(t){var e,i=t.geoViewport;if(this.viewPath.takesPrecedence(ro.Intrinsic)){var o=this.geoPath.value;e=null!==o&&o.isDefined()?o.project(i):null,this.viewPath.setState(e,ro.Intrinsic)}else e=this.viewPath.value;if(this.viewCentroid.takesPrecedence(ro.Intrinsic)){var n=this.geoCentroid.value,r=null!==n&&n.isDefined()?i.project(n):null;this.viewCentroid.setState(r,ro.Intrinsic)}this.viewBounds=null!==e?e.bounds:this.viewFrame,this.cullGeoFrame(t.geoViewport.geoFrame)},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse(),e=this.viewCentroid.value;if(null!==e&&e.isDefined()){var i=t.transformX(e.x,e.y),o=t.transformY(e.x,e.y);return new r.R2Box(i,o,i,o)}return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),e.prototype.ripple=function(t){return Th.ripple(this,t)},m([Oo({type:p.GeoPath,state:null,willSetValue:function(t,e){this.owner.willSetGeoPath(t,e)},didSetValue:function(t,e){this.owner.onSetGeoPath(t,e),this.owner.didSetGeoPath(t,e)}})],e.prototype,"geoPath",void 0),m([Oo({type:r.R2Path,state:null})],e.prototype,"viewPath",void 0),m([Oo({type:p.GeoPoint,state:null})],e.prototype,"geoCentroid",void 0),m([Oo({type:r.R2Point,state:null})],e.prototype,"viewCentroid",void 0),e}(mh),Oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth)},e.prototype.willSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetStroke&&r.viewWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){this.requireUpdate(ro.NeedsRender)},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStroke&&r.viewDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetStrokeWidth&&r.viewWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){this.requireUpdate(ro.NeedsRender)},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStrokeWidth&&r.viewDidSetStrokeWidth(t,e,this)}},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.takesPrecedence(ro.Intrinsic)&&this.geoCentroid.setState(e.centroid(),ro.Intrinsic)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderLine(o,this.viewFrame),o.restore()}},e.prototype.renderLine=function(t,e){var i=this.viewPath.value;if(null!==i&&i.isDefined()){t.beginPath(),i.draw(t);var o=this.stroke.value,n=this.strokeWidth.value;if(null!==o&&null!==n){var r=Math.min(e.width,e.height);t.lineWidth=n.pxValue(r),t.strokeStyle=o.toString(),t.stroke()}}},e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestLine(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestLine=function(t,e,i,o){var n=this.viewPath.value;if(null!==n&&n.isDefined()&&(i.beginPath(),n.draw(i),null!==this.stroke.value)){var r=this.hitWidth.getStateOr(0),s=this.strokeWidth.value;if(null!==s){var l=Math.min(o.width,o.height);r=Math.max(r,s.pxValue(l))}if(i.lineWidth=r,i.isPointInStroke(t,e))return this}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([Oo({type:Tt,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([bo({type:Number})],e.prototype,"hitWidth",void 0),e}(Ah),Rh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.fill&&this.fill(e.fill),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.clipViewport&&this.clipViewport(e.clipViewport)},e.prototype.willSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetFill&&r.viewWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e){this.requireUpdate(ro.NeedsRender)},e.prototype.didSetFill=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetFill&&r.viewDidSetFill(t,e,this)}},e.prototype.willSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetStroke&&r.viewWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){this.requireUpdate(ro.NeedsRender)},e.prototype.didSetStroke=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStroke&&r.viewDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetStrokeWidth&&r.viewWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){this.requireUpdate(ro.NeedsRender)},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetStrokeWidth&&r.viewDidSetStrokeWidth(t,e,this)}},e.prototype.onSetGeoPath=function(e,i){t.prototype.onSetGeoPath.call(this,e,i),this.geoCentroid.takesPrecedence(ro.Intrinsic)&&this.geoCentroid.setState(e.centroid(),ro.Intrinsic)},e.prototype.cullGeoFrame=function(t){var e;if(void 0===t&&(t=this.geoFrame),t.intersects(this.geoBounds)){var i=this.viewFrame,o=this.viewBounds;e=!(!this.clipViewport.state||i.xMin-4*i.width<=o.xMin&&o.xMax<=i.xMax+4*i.width&&i.yMin-4*i.height<=o.yMin&&o.yMax<=i.yMax+4*i.height)||!i.intersects(o)}else e=!0;this.setCulled(e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArea(o,this.viewFrame),o.restore()}},e.prototype.renderArea=function(t,e){var i=this.viewPath.value;if(null!==i&&i.isDefined()){t.beginPath(),i.draw(t);var o=this.fill.value;null!==o&&(t.fillStyle=o.toString(),t.fill());var n=this.stroke.value,r=this.strokeWidth.value;if(null!==n&&null!==r){var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s),t.strokeStyle=n.toString(),t.stroke()}}},e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestArea(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestArea=function(t,e,i,o){var n=this.viewPath.value;if(null!==n&&n.isDefined()){if(i.beginPath(),n.draw(i),null!==this.fill.value&&i.isPointInPath(t,e))return this;if(null!==this.stroke.value){var r=this.strokeWidth.value;if(null!==r){var s=Math.min(o.width,o.height);if(i.lineWidth=r.pxValue(s),i.isPointInStroke(t,e))return this}}}return null},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},m([Oo({type:Tt,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetFill(t,e)},didSetValue:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)}})],e.prototype,"fill",void 0),m([Oo({type:Tt,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStroke(t,e)},didSetValue:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)}})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0,willSetValue:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetValue:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),m([bo({type:Boolean,state:!0})],e.prototype,"clipViewport",void 0),e}(Ah),Ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.geoPath.state;return null!==t?t.bounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoPath=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoPath&&r.traitWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e){},e.prototype.didSetGeoPath=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoPath&&r.traitDidSetGeoPath(t,e,this)}},m([N({type:p.GeoPath,state:null,willSetState:function(t,e){this.owner.willSetGeoPath(t,e)},didSetState:function(t,e){this.owner.onSetGeoPath(t,e),this.owner.didSetGeoPath(t,e)}})],e.prototype,"geoPath",void 0),e}(gh),kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStroke&&r.traitWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStroke&&r.traitDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStrokeWidth&&r.traitWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStrokeWidth&&r.traitDidSetStrokeWidth(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([N({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(Ih),Wh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.willSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetFill&&r.traitWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e){},e.prototype.didSetFill=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetFill&&r.traitDidSetFill(t,e,this)}},e.prototype.willSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStroke&&r.traitWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e){},e.prototype.didSetStroke=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStroke&&r.traitDidSetStroke(t,e,this)}},e.prototype.willSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetStrokeWidth&&r.traitWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e){},e.prototype.didSetStrokeWidth=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetStrokeWidth&&r.traitDidSetStrokeWidth(t,e,this)}},m([N({state:null,willSetState:function(t,e){this.owner.willSetFill(t,e)},didSetState:function(t,e){this.owner.onSetFill(t,e),this.owner.didSetFill(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"fill",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetStroke(t,e)},didSetState:function(t,e){this.owner.onSetStroke(t,e),this.owner.didSetStroke(t,e)},fromAny:function(t){return null===t||t instanceof se||(t=Tt.fromAny(t)),t}})],e.prototype,"stroke",void 0),m([N({type:r.Length,state:null,willSetState:function(t,e){this.owner.willSetStrokeWidth(t,e)},didSetState:function(t,e){this.owner.onSetStrokeWidth(t,e),this.owner.didSetStrokeWidth(t,e)}})],e.prototype,"strokeWidth",void 0),e}(Ih),Eh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(wh),Nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){if(null!==this.geo.view){this.setGeoPath(t.geoPath.state,t);var e=t.stroke.state;null!==e&&this.setStroke(e,t);var i=t.strokeWidth.state;null!==i&&this.setStrokeWidth(i,t)}},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoTrait&&r.controllerWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoTrait&&r.controllerDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return Oh.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;if(null!==e){this.setGeoPath(e.geoPath.state,e);var i=e.stroke.state;null!==i&&this.setStroke(i,e);var o=e.strokeWidth.state;null!==o&&this.setStrokeWidth(o,e)}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoView&&r.controllerWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoView&&r.controllerDidSetGeoView(t,e,this)}},e.prototype.setGeoPath=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.geoPath.setState(t,i,ro.Intrinsic))},e.prototype.willSetGeoPath=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetGeoPath&&s.controllerWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e,i){},e.prototype.didSetGeoPath=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetGeoPath&&s.controllerDidSetGeoPath(t,e,this)}},e.prototype.setStroke=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),t instanceof se?o.stroke.setLook(t,i,ro.Intrinsic):o.stroke.setState(t,i,ro.Intrinsic))},e.prototype.willSetStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetStroke&&s.controllerWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e,i){},e.prototype.didSetStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetStroke&&s.controllerDidSetStroke(t,e,this)}},e.prototype.setStrokeWidth=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.strokeWidth.setState(t,i,ro.Intrinsic))},e.prototype.willSetStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetStrokeWidth&&s.controllerWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e,i){},e.prototype.didSetStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetStrokeWidth&&s.controllerDidSetStrokeWidth(t,e,this)}},e.GetFastener=Vs.define({viewType:Oh,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewWillSetGeoPath:function(t,e,i){this.owner.willSetGeoPath(t,e,i)},viewDidSetGeoPath:function(t,e,i){this.owner.onSetGeoPath(t,e,i),this.owner.didSetGeoPath(t,e,i)},viewWillSetStroke:function(t,e,i){this.owner.willSetStroke(t,e,i)},viewDidSetStroke:function(t,e,i){this.owner.onSetStroke(t,e,i),this.owner.didSetStroke(t,e,i)},viewWillSetStrokeWidth:function(t,e,i){this.owner.willSetStrokeWidth(t,e,i)},viewDidSetStrokeWidth:function(t,e,i){this.owner.onSetStrokeWidth(t,e,i),this.owner.didSetStrokeWidth(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:kh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoPath:function(t,e,i){this.owner.setGeoPath(t,i)},traitDidSetStroke:function(t,e,i){this.owner.setStroke(t,i)},traitDidSetStrokeWidth:function(t,e,i){this.owner.setStrokeWidth(t,i)}}),m([Vs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(Eh),Uh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){if(null!==this.geo.view){this.setGeoPath(t.geoPath.state,t);var e=t.fill.state;null!==e&&this.setFill(e,t);var i=t.stroke.state;null!==i&&this.setStroke(i,t);var o=t.strokeWidth.state;null!==o&&this.setStrokeWidth(o,t)}},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoTrait&&r.controllerWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoTrait&&r.controllerDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return Rh.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;if(null!==e){this.setGeoPath(e.geoPath.state,e);var i=e.fill.state;null!==i&&this.setFill(i,e);var o=e.stroke.state;null!==o&&this.setStroke(o,e);var n=e.strokeWidth.state;null!==n&&this.setStrokeWidth(n,e)}},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoView&&r.controllerWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoView&&r.controllerDidSetGeoView(t,e,this)}},e.prototype.setGeoPath=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.geoPath.setState(t,i,ro.Intrinsic))},e.prototype.willSetGeoPath=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetGeoPath&&s.controllerWillSetGeoPath(t,e,this)}},e.prototype.onSetGeoPath=function(t,e,i){},e.prototype.didSetGeoPath=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetGeoPath&&s.controllerDidSetGeoPath(t,e,this)}},e.prototype.setFill=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),t instanceof se?o.fill.setLook(t,i,ro.Intrinsic):o.fill.setState(t,i,ro.Intrinsic))},e.prototype.willSetFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetFill&&s.controllerWillSetFill(t,e,this)}},e.prototype.onSetFill=function(t,e,i){},e.prototype.didSetFill=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetFill&&s.controllerDidSetFill(t,e,this)}},e.prototype.setStroke=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),t instanceof se?o.stroke.setLook(t,i,ro.Intrinsic):o.stroke.setState(t,i,ro.Intrinsic))},e.prototype.willSetStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetStroke&&s.controllerWillSetStroke(t,e,this)}},e.prototype.onSetStroke=function(t,e,i){},e.prototype.didSetStroke=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetStroke&&s.controllerDidSetStroke(t,e,this)}},e.prototype.setStrokeWidth=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.strokeWidth.setState(t,i,ro.Intrinsic))},e.prototype.willSetStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetStrokeWidth&&s.controllerWillSetStrokeWidth(t,e,this)}},e.prototype.onSetStrokeWidth=function(t,e,i){},e.prototype.didSetStrokeWidth=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetStrokeWidth&&s.controllerDidSetStrokeWidth(t,e,this)}},e.GetFastener=Vs.define({viewType:Rh,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewWillSetGeoPath:function(t,e,i){this.owner.willSetGeoPath(t,e,i)},viewDidSetGeoPath:function(t,e,i){this.owner.onSetGeoPath(t,e,i),this.owner.didSetGeoPath(t,e,i)},viewWillSetFill:function(t,e,i){this.owner.willSetFill(t,e,i)},viewDidSetFill:function(t,e,i){this.owner.onSetFill(t,e,i),this.owner.didSetFill(t,e,i)},viewWillSetStroke:function(t,e,i){this.owner.willSetStroke(t,e,i)},viewDidSetStroke:function(t,e,i){this.owner.onSetStroke(t,e,i),this.owner.didSetStroke(t,e,i)},viewWillSetStrokeWidth:function(t,e,i){this.owner.willSetStrokeWidth(t,e,i)},viewDidSetStrokeWidth:function(t,e,i){this.owner.onSetStrokeWidth(t,e,i),this.owner.didSetStrokeWidth(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:Wh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoPath:function(t,e,i){this.owner.setGeoPath(t,i)},traitDidSetFill:function(t,e,i){this.owner.setFill(t,i)},traitDidSetStroke:function(t,e,i){this.owner.setStroke(t,i)},traitDidSetStrokeWidth:function(t,e,i){this.owner.setStrokeWidth(t,i)}}),m([Vs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(Eh),Gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),this.setState(e)},e.prototype.willSetGeoPoint=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoPoint&&r.viewWillSetGeoPoint(t,e,this)}},e.prototype.onSetGeoPoint=function(t,e){this.setGeoBounds(t.bounds),this.requireUpdate(ro.NeedsProject)},e.prototype.didSetGeoPoint=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoPoint&&r.viewDidSetGeoPoint(t,e,this)}},e.prototype.initLabel=function(t){},e.prototype.attachLabel=function(t){},e.prototype.detachLabel=function(t){},e.prototype.willSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoLabel&&r.viewWillSetGeoLabel(t,e,this)}},e.prototype.onSetLabel=function(t,e){null!==e&&this.detachLabel(e),null!==t&&(this.attachLabel(t),this.initLabel(t))},e.prototype.didSetLabel=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoLabel&&r.viewDidSetGeoLabel(t,e,this)}},e.prototype.isGradientStop=function(){return null!==this.color.value||void 0!==this.opacity.value},e.prototype.setState=function(t,i){var o;void 0!==(o=t instanceof e||t instanceof p.GeoPoint?t.toAny():p.GeoPoint.isTuple(t)?{lng:t[0],lat:t[1]}:t).lng&&void 0!==o.lat?this.geoPoint(new p.GeoPoint(o.lng,o.lat),i):void 0!==o.x&&void 0!==o.y&&this.viewPoint(new r.R2Point(o.x,o.y),i),void 0!==o.radius&&this.radius(o.radius,i),void 0!==o.hitRadius&&this.hitRadius(o.hitRadius),void 0!==o.color&&this.color(o.color,i),void 0!==o.opacity&&this.opacity(o.opacity,i),void 0!==o.labelPadding&&this.labelPadding(o.labelPadding,i),void 0!==o.labelPlacement&&this.labelPlacement(o.labelPlacement),void 0!==o.font&&this.font(o.font,i),void 0!==o.textColor&&this.textColor(o.textColor,i),void 0!==o.label&&this.label(o.label)},e.prototype.needsProcess=function(t,e){return 0!=(t&ro.NeedsProject)&&null!==this.label.view&&this.requireUpdate(ro.NeedsLayout),t},e.prototype.onProject=function(e){if(t.prototype.onProject.call(this,e),this.viewPoint.takesPrecedence(ro.Intrinsic)){var i=e.geoViewport.project(this.geoPoint.getValue());this.viewPoint.setIntermediateValue(i,i)}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e);var i=this.label.view;null!==i&&this.layoutLabel(i,this.viewFrame)},e.prototype.layoutLabel=function(t,e){var i=this.labelPlacement.state,o=Math.min(e.width,e.height),n=this.labelPadding.getValue().pxValue(o),s=this.viewPoint.getValue(),l=s.x,a=s.y;"top"===i?a-=n:"bottom"===i&&(a+=n),Or.is(t)&&(t.textAlign.setState("center",ro.Intrinsic),t.textBaseline.setState("bottom",ro.Intrinsic),t.textOrigin.setState(new r.R2Point(l,a),ro.Intrinsic))},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y,o=this.hitRadius.getStateOr(0);return new r.R2Box(e-o,i-o,e+o,i+o)},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;return this.hitTestPoint(t,e,n,this.viewFrame)}return null},e.prototype.hitTestPoint=function(t,e,i,o){var n=this.viewPoint.getValue(),r=n.x,s=n.y,l=this.radius.value,a=this.hitRadius.getStateOr(0);if(null!==l){var h=Math.min(o.width,o.height);a=Math.max(a,l.pxValue(h))}var u=r-t,p=s-e;return u*u+p*p<a*a?this:null},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.prototype.toAny=function(){var t={};return t.lng=this.geoPoint.value.lng,t.lat=this.geoPoint.value.lat,this.viewPoint.takesPrecedence(ro.Intrinsic)||(t.x=this.viewPoint.value.x,t.y=this.viewPoint.value.y),null!==this.radius.value&&(t.radius=this.radius.value),void 0!==this.hitRadius.state&&(t.hitRadius=this.hitRadius.state),null!==this.color.value&&(t.color=this.color.value),void 0!==this.opacity.value&&(t.opacity=this.opacity.value),null!==this.labelPadding.value&&(t.labelPadding=this.labelPadding.value),void 0!==this.labelPlacement.state&&(t.labelPlacement=this.labelPlacement.state),t},e.create=function(){return new e},e.fromGeoPoint=function(t){var i=new e;return i.setState(t),i},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof p.GeoPoint||p.GeoPoint.isTuple(t))return this.fromGeoPoint(t);if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([Oo({type:p.GeoPoint,state:p.GeoPoint.origin(),willSetValue:function(t,e){this.owner.willSetGeoPoint(t,e)},didSetValue:function(t,e){this.owner.onSetGeoPoint(t,e),this.owner.didSetGeoPoint(t,e)}})],e.prototype,"geoPoint",void 0),m([Oo({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"viewPoint",void 0),m([Oo({type:r.Length,state:null})],e.prototype,"radius",void 0),m([Oo({type:Tt,state:null})],e.prototype,"color",void 0),m([Oo({type:Number})],e.prototype,"opacity",void 0),m([Oo({type:r.Length,state:null})],e.prototype,"labelPadding",void 0),m([Oo({type:St,state:null,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([bo({type:Number})],e.prototype,"hitRadius",void 0),m([Zo({key:!0,type:Ir,fromAny:function(t){return t instanceof fr?t:"string"==typeof t&&this.view instanceof Ir?(this.view.text(t),this.view):Ir.fromAny(t)},willSetView:function(t,e){this.owner.willSetLabel(t,e)},onSetView:function(t,e){this.owner.onSetLabel(t,e)},didSetView:function(t,e){this.owner.didSetLabel(t,e)}})],e.prototype,"label",void 0),m([bo({type:String,state:"auto"})],e.prototype,"labelPlacement",void 0),e}(mh);Object.defineProperty(Gh.prototype,"viewBounds",{get:function(){var t=this.viewPoint.getValue(),e=t.x,i=t.y;return new r.R2Box(e,i,e,i)},enumerable:!0,configurable:!0});var Bh=function(t){function e(){var e=t.call(this)||this;return e.gradientStops=0,Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),void 0!==e.stroke&&this.stroke(e.stroke),void 0!==e.strokeWidth&&this.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&this.hitWidth(e.hitWidth),void 0!==e.font&&this.font(e.font),void 0!==e.textColor&&this.textColor(e.textColor);var i=e.points;void 0!==i&&this.points(i)},e.prototype.points=function(t,e){var i=this.childViews;if(void 0===t){for(var o=[],n=0;n<i.length;n+=1){(S=i[n])instanceof Gh&&o.push(S)}return o}for(var r=this.geoBounds,s=1/0,l=1/0,a=-1/0,h=-1/0,u=0,d=0,c=!1,f=(n=0,0);n<i.length&&f<t.length;){if((S=i[n])instanceof Gh){var v=t[f];S.setState(v);var y=S.geoPoint.getValue();u+=g=y.lng,d+=w=y.lat,s=Math.min(s,g),l=Math.min(l,w),a=Math.max(g,a),h=Math.max(w,h),c=c||!isFinite(g)||!isFinite(w),f+=1}n+=1}for(;f<t.length;){v=Gh.fromAny(t[f]);this.appendChildView(v);var g,w,m=v.geoPoint.getValue();u+=g=m.lng,d+=w=m.lat,s=Math.min(s,g),l=Math.min(l,w),a=Math.max(g,a),h=Math.max(w,h),c=c||!isFinite(g)||!isFinite(w),n+=1,f+=1}for(;n<i.length;){var S;(S=i[n])instanceof Gh?this.removeChildView(S):n+=1}c||0===f?(this.geoCentroid.setState(p.GeoPoint.origin(),ro.Intrinsic),this.geoBounds=p.GeoBox.undefined()):(u/=f,d/=f,this.geoCentroid.setState(new p.GeoPoint(u,d),ro.Intrinsic),this.geoBounds=new p.GeoBox(s,l,a,h));var C=this.geoBounds;return r.equals(C)||(this.willSetGeoBounds(C,r),this.onSetGeoBounds(C,r),this.didSetGeoBounds(C,r)),this},e.prototype.appendPoint=function(t,e){return t=Gh.fromAny(t),this.appendChildView(t,e),t},e.prototype.setPoint=function(t,e){return e=Gh.fromAny(e),this.setChildView(t,e),e},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof Gh&&this.onInsertPoint(e)},e.prototype.onInsertPoint=function(t){t.requireUpdate(ro.NeedsAnimate|ro.NeedsProject)},e.prototype.didProject=function(e){for(var i=this.geoBounds,o=1/0,n=1/0,s=-1/0,l=-1/0,a=0,h=0,u=1/0,d=1/0,c=-1/0,f=-1/0,v=0,y=0,g=!1,w=0,m=0,S=this.childViews,C=0;C<S.length;C+=1){var b=S[C];if(b instanceof Gh){var V=b.geoPoint.getValue(),T=V.lng,F=V.lat;a+=T,h+=F,o=Math.min(o,T),n=Math.min(n,F),s=Math.max(T,s),l=Math.max(F,l),g=g||!isFinite(T)||!isFinite(F);var P=b.viewPoint.getValue(),M=P.x,D=P.y;u=Math.min(u,M),d=Math.min(d,D),c=Math.max(M,c),f=Math.max(D,f),v+=M,y+=D,g=g||!isFinite(M)||!isFinite(D),b.isGradientStop()&&(w+=1),m+=1}}g||0===m?(this.geoCentroid.setState(p.GeoPoint.origin(),ro.Intrinsic),this.geoBounds=p.GeoBox.undefined(),this.viewCentroid.setState(r.R2Point.origin(),ro.Intrinsic),this.viewBounds=r.R2Box.undefined(),this.setCulled(!0)):(a/=m,h/=m,this.geoCentroid.setState(new p.GeoPoint(a,h),ro.Intrinsic),this.geoBounds=new p.GeoBox(o,n,s,l),v/=m,y/=m,this.viewCentroid.setState(new r.R2Point(v,y),ro.Intrinsic),this.viewBounds=new r.R2Box(u,d,c,f),this.cullGeoFrame(e.geoViewport.geoFrame)),this.gradientStops=w;var x=this.geoBounds;i.equals(x)||(this.willSetGeoBounds(x,i),this.onSetGeoBounds(x,i),this.didSetGeoBounds(x,i)),t.prototype.didProject.call(this,e)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof br&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),0!==this.gradientStops?this.renderPlotGradient(o,this.viewFrame):this.renderPlotStroke(o,this.viewFrame),o.restore()}},e.prototype.renderPlotStroke=function(t,e){var i=this.childViews,o=i.length,n=0;t.beginPath();for(var r=0;r<o;r+=1){var s=i[r];if(s instanceof Gh){var l=s.viewPoint.getValue(),a=l.x,h=l.y;0===n?t.moveTo(a,h):t.lineTo(a,h),n+=1}}if(0!==n){var u=this.stroke.value;if(null!==u){var p=Math.min(e.width,e.height),d=this.strokeWidth.getValue().pxValue(p);t.strokeStyle=u.toString(),t.lineWidth=d,t.stroke()}}},e.prototype.renderPlotGradient=function(t,e){for(var i,o=this.stroke.getValue(),n=Math.min(e.width,e.height),r=this.strokeWidth.getValue().pxValue(n),s=this.childViews,l=s.length,a=0;a<l;a+=1){var h=s[a];if(h instanceof Gh){if(void 0!==i){var u=i.viewPoint.getValue().x,p=i.viewPoint.getValue().y,d=h.viewPoint.getValue().x,c=h.viewPoint.getValue().y,f=t.createLinearGradient(u,p,d,c),v=i.color.getValueOr(o),y=i.opacity.value;"number"==typeof y&&(v=v.alpha(y)),f.addColorStop(0,v.toString()),v=h.color.getValueOr(o),"number"==typeof(y=h.opacity.value)&&(v=v.alpha(y)),f.addColorStop(1,v.toString()),t.beginPath(),t.moveTo(u,p),t.lineTo(d,c),t.strokeStyle=f,t.lineWidth=r,t.stroke()}i=h}}},e.prototype.updateGeoBounds=function(){},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCentroid.state,e=this.pageTransform.inverse(),i=e.transformX(t.x,t.y),o=e.transformY(t.x,t.y);return new r.R2Box(i,o,i,o)},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=o.transform.transform(t,e),s=this.hitTestPlot(r.x,r.y,n,this.viewFrame);return n.restore(),s}return null},e.prototype.hitTestPlot=function(t,e,i,o){var n=this.childViews.length,r=0;i.beginPath();for(var s=0;s<n;s+=1){var l=this.childViews[s];if(l instanceof Gh){var a=l.viewPoint.getValue(),h=a.x,u=a.y;0===s?i.moveTo(h,u):i.lineTo(h,u),r+=1}}if(0!==r){var p=this.hitWidth.getStateOr(0),d=this.strokeWidth.value;if(null!==d){var c=Math.min(o.width,o.height);p=Math.max(p,d.pxValue(c))}if(i.lineWidth=p,i.isPointInStroke(t,e))return this}return null},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.value=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},m([bo({type:p.GeoPoint,state:p.GeoPoint.origin()})],e.prototype,"geoCentroid",void 0),m([bo({type:r.R2Point,state:r.R2Point.origin()})],e.prototype,"viewCentroid",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"stroke",void 0),m([Oo({type:r.Length,state:null,inherit:!0})],e.prototype,"strokeWidth",void 0),m([Oo({type:St,state:null,inherit:!0})],e.prototype,"font",void 0),m([Oo({type:Tt,state:null,inherit:!0})],e.prototype,"textColor",void 0),m([bo({type:Number})],e.prototype,"hitWidth",void 0),e}(mh),jh=function(t){function e(){var e=t.call(this)||this;return e.canvas=null,Object.defineProperty(e,"viewBounds",{value:r.R2Box.undefined(),writable:!0,enumerable:!0,configurable:!0}),e}return w(e,t),e.prototype.initView=function(e){t.prototype.initView.call(this,e),Yr.initView(this,e),void 0!==e.geoCenter&&this.geoCenter(e.geoCenter),void 0!==e.viewCenter&&this.viewCenter(e.viewCenter)},e.prototype.willSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoCenter&&r.viewWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){this.setGeoBounds(null!==t?t.bounds:p.GeoBox.undefined()),this.isMounted()&&this.projectIcon(this.viewContext)},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoCenter&&r.viewDidSetGeoCenter(t,e,this)}},e.prototype.willSetGraphics=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGraphics&&r.viewWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e){this.requireUpdate(ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite)},e.prototype.didSetGraphics=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGraphics&&r.viewDidSetGraphics(t,e,this)}},e.prototype.onApplyTheme=function(e,i,o){if(t.prototype.onApplyTheme.call(this,e,i,o),!this.graphics.isInherited()){var n=this.graphics.value;if(n instanceof Wr){var r=n.withTheme(e,i);this.graphics.setOwnState(r,!!n.isThemed()&&o)}}},e.prototype.onProject=function(e){t.prototype.onProject.call(this,e),this.projectIcon(e)},e.prototype.projectGeoCenter=function(t){if(this.isMounted()){var e=this.viewContext,i=null!==t&&t.isDefined()?e.geoViewport.project(t):null;this.viewCenter.setIntermediateValue(this.viewCenter.value,i),this.projectIcon(e)}},e.prototype.projectIcon=function(t){if(this.viewCenter.takesPrecedence(ro.Intrinsic)){var e=this.geoCenter.value,i=null!==e&&e.isDefined()?t.geoViewport.project(e):null;this.viewCenter.setValue(i)}var o=this.viewFrame,n=this.viewCenter.value,s=this.viewCenter.state;null!==n&&null!==s&&(o.intersectsBox(this.viewBounds)||o.intersectsSegment(new r.R2Segment(n.x,n.y,s.x,s.y)))?this.setCulled(!1):this.setCulled(!0)},e.prototype.onRasterize=function(e){t.prototype.onRasterize.call(this,e);var i=e.renderer;i instanceof br&&!this.isHidden()&&!this.isCulled()&&this.rasterizeIcon(i,this.viewBounds)},e.prototype.rasterizeIcon=function(t,e){var i=this.graphics.value;if(null!==i&&e.isDefined()){var o=this.canvas;null===o&&(o=document.createElement("canvas"),this.canvas=o);var n=t.pixelRatio,s=e.width,l=e.height,a=o.getContext("2d");o.width===n*s&&o.height===n*l||(o.width=n*s,o.height=n*l,a.setTransform(n,0,0,n,0,0)),a.clearRect(0,0,s,l),a.beginPath();var h=r.Transform.affine(n,0,0,n,0,0),u=new br(a,h,n,this.theme.state,this.mood.state),p=new r.R2Box(0,0,s,l);i.render(u,p)}else this.canvas=null},e.prototype.onComposite=function(e){t.prototype.onComposite.call(this,e);var i=e.renderer;i instanceof br&&!this.isHidden()&&!this.isCulled()&&this.compositeIcon(i,this.viewBounds)},e.prototype.compositeIcon=function(t,e){var i=this.canvas;null!==i&&t.context.drawImage(i,e.x,e.y,e.width,e.height)},e.prototype.renderGeoBounds=function(t,e,i){},e.prototype.updateGeoBounds=function(){},e.prototype.updateViewBounds=function(){this.viewBounds=this.deriveViewBounds()},e.prototype.deriveViewBounds=function(){var t=this.viewCenter.value;if(null!==t&&t.isDefined()){var e=this.viewFrame,i=Math.min(e.width,e.height),o=this.iconWidth.value;o=o instanceof r.Length?o.pxValue(i):i;var n=this.iconWidth.state;n=n instanceof r.Length?n.pxValue(i):i;var s=Math.max(o,n),l=this.iconHeight.value;l=l instanceof r.Length?l.pxValue(i):i;var a=this.iconHeight.state;a=a instanceof r.Length?a.pxValue(i):i;var h=Math.max(l,a),u=t.x-s*this.xAlign.getValue(),p=t.y-h*this.yAlign.getValue();return new r.R2Box(u,p,u+s,p+h)}return r.R2Box.undefined()},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewCenter.value,e=this.viewFrame;if(null!==t&&t.isDefined()){var i=Math.min(e.width,e.height),o=this.pageTransform.inverse(),n=o.transformX(t.x,t.y),s=o.transformY(t.x,t.y),l=this.iconWidth.value;l=l instanceof r.Length?l.pxValue(i):i;var a=this.iconHeight.value;a=a instanceof r.Length?a.pxValue(i):i;var h=n-l*this.xAlign.getValue(),u=s-a*this.yAlign.getValue();return new r.R2Box(h,u,h+l,u+a)}return this.pageBounds},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){var o=i.renderer;if(o instanceof br){var n=o.context;n.save();var r=this.hitTestIcon(t,e,o,this.viewBounds);return n.restore(),r}return null},e.prototype.hitTestIcon=function(t,e,i,o){return this.hitBounds.contains(t,e)?this:null},e.prototype.ripple=function(t){return Th.ripple(this,t)},e.create=function(){return new e},e.fromInit=function(t){var i=new e;return i.initView(t),i},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t)return this.fromInit(t);throw new TypeError(""+t)},e.mountFlags=mh.mountFlags|ro.NeedsRasterize,e.powerFlags=mh.powerFlags|ro.NeedsRasterize,e.uncullFlags=mh.uncullFlags|ro.NeedsRasterize,m([Oo({type:p.GeoPoint,state:null,didSetState:function(t,e){this.owner.projectGeoCenter(t)},willSetValue:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetValue:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([Oo({type:r.R2Point,state:r.R2Point.undefined(),updateFlags:ro.NeedsComposite,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"viewCenter",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"xAlign",void 0),m([Oo({type:Number,state:.5,updateFlags:ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"yAlign",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"iconWidth",void 0),m([Oo({type:r.Length,state:null,updateFlags:ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite,didSetValue:function(t,e){this.owner.updateViewBounds()}})],e.prototype,"iconHeight",void 0),m([Oo({type:Tt,state:null,updateFlags:ro.NeedsRender|ro.NeedsRasterize|ro.NeedsComposite,didSetValue:function(t,e){if(null!==t){var i=this.owner.graphics.value;if(i instanceof Er){var o=i.withFillColor(t);this.owner.graphics.setOwnState(o)}}}})],e.prototype,"iconColor",void 0),m([Oo({extends:Xr,type:Object,willSetValue:function(t,e){this.owner.willSetGraphics(t,e)},didSetValue:function(t,e){this.owner.onSetGraphics(t,e),this.owner.didSetGraphics(t,e)}})],e.prototype,"graphics",void 0),e}(mh),Hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){var t=this.geoCenter.state;return null!==t?t.bounds:p.GeoBox.undefined()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoCenter=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoCenter&&r.traitWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e){},e.prototype.didSetGeoCenter=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoCenter&&r.traitDidSetGeoCenter(t,e,this)}},e.prototype.willSetIconLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetIconLayout&&r.traitWillSetIconLayout(t,e,this)}},e.prototype.onSetIconLayout=function(t,e){},e.prototype.didSetIconLayout=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetIconLayout&&r.traitDidSetIconLayout(t,e,this)}},e.prototype.willSetGraphics=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGraphics&&r.traitWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e){},e.prototype.didSetGraphics=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGraphics&&r.traitDidSetGraphics(t,e,this)}},m([N({type:p.GeoPoint,state:null,willSetState:function(t,e){this.owner.willSetGeoCenter(t,e)},didSetState:function(t,e){this.owner.onSetGeoCenter(t,e),this.owner.didSetGeoCenter(t,e)}})],e.prototype,"geoCenter",void 0),m([N({type:kr,state:null,willSetState:function(t,e){this.owner.willSetIconLayout(t,e)},didSetState:function(t,e){this.owner.onSetIconLayout(t,e),this.owner.didSetIconLayout(t,e)}})],e.prototype,"iconLayout",void 0),m([N({state:null,willSetState:function(t,e){this.owner.willSetGraphics(t,e)},didSetState:function(t,e){this.owner.onSetGraphics(t,e),this.owner.didSetGraphics(t,e)}})],e.prototype,"graphics",void 0),e}(gh),qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.initGeoTrait=function(t){},e.prototype.attachGeoTrait=function(t){null!==this.geo.view&&(this.setGeoCenter(t.geoCenter.state,t),this.setIconLayout(t.iconLayout.state,t),this.setGraphics(t.graphics.state,t))},e.prototype.detachGeoTrait=function(t){},e.prototype.willSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoTrait&&r.controllerWillSetGeoTrait(t,e,this)}},e.prototype.onSetGeoTrait=function(t,e){null!==e&&this.detachGeoTrait(e),null!==t&&(this.attachGeoTrait(t),this.initGeoTrait(t))},e.prototype.didSetGeoTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoTrait&&r.controllerDidSetGeoTrait(t,e,this)}},e.prototype.createGeoView=function(){return jh.create()},e.prototype.initGeoView=function(t){},e.prototype.attachGeoView=function(t){var e=this.geo.trait;null!==e&&(this.setGeoCenter(e.geoCenter.state,e),this.setIconLayout(e.iconLayout.state,e),this.setGraphics(e.graphics.state,e))},e.prototype.detachGeoView=function(t){},e.prototype.willSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetGeoView&&r.controllerWillSetGeoView(t,e,this)}},e.prototype.onSetGeoView=function(t,e){null!==e&&this.detachGeoView(e),null!==t&&(this.attachGeoView(t),this.initGeoView(t))},e.prototype.didSetGeoView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetGeoView&&r.controllerDidSetGeoView(t,e,this)}},e.prototype.setGeoCenter=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.geoCenter.setState(t,i,ro.Intrinsic))},e.prototype.willSetGeoCenter=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetGeoCenter&&s.controllerWillSetGeoCenter(t,e,this)}},e.prototype.onSetGeoCenter=function(t,e,i){},e.prototype.didSetGeoCenter=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetGeoCenter&&s.controllerDidSetGeoCenter(t,e,this)}},e.prototype.setIconLayout=function(t,e,i){var o=this.geo.view;null!==o&&null!==t&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.iconWidth.setState(t.iconWidth,i,ro.Intrinsic),o.iconHeight.setState(t.iconHeight,i,ro.Intrinsic),void 0!==t.xAlign&&o.xAlign.setState(t.xAlign,i,ro.Intrinsic),void 0!==t.yAlign&&o.yAlign.setState(t.yAlign,i,ro.Intrinsic))},e.prototype.willSetIconLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetIconLayout&&s.controllerWillSetIconLayout(t,e,this)}},e.prototype.onSetIconLayout=function(t,e,i){},e.prototype.didSetIconLayout=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetIconLayout&&s.controllerDidSetIconLayout(t,e,this)}},e.prototype.setGraphics=function(t,e,i){var o=this.geo.view;null!==o&&(void 0===i||!0===i?!0===(i=this.geoTiming.state)&&(i=o.getLook(se.timing,me.ambient)):i=l.Timing.fromAny(i),o.graphics.setState(t,i,ro.Intrinsic))},e.prototype.willSetGraphics=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetGraphics&&s.controllerWillSetGraphics(t,e,this)}},e.prototype.onSetGraphics=function(t,e,i){},e.prototype.didSetGraphics=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetGraphics&&s.controllerDidSetGraphics(t,e,this)}},e.GetFastener=Vs.define({viewType:jh,observeView:!0,willSetView:function(t,e){this.owner.willSetGeoView(t,e)},onSetView:function(t,e){this.owner.onSetGeoView(t,e)},didSetView:function(t,e){this.owner.didSetGeoView(t,e)},viewWillSetGeoCenter:function(t,e,i){this.owner.willSetGeoCenter(t,e,i)},viewDidSetGeoCenter:function(t,e,i){this.owner.onSetGeoCenter(t,e,i),this.owner.didSetGeoCenter(t,e,i)},viewWillSetGraphics:function(t,e,i){this.owner.willSetGraphics(t,e,i)},viewDidSetGraphics:function(t,e,i){this.owner.onSetGraphics(t,e,i),this.owner.didSetGraphics(t,e,i)},createView:function(){return this.owner.createGeoView()},traitType:Hh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetGeoTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetGeoTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetGeoTrait(t,e)},traitDidSetGeoCenter:function(t,e,i){this.owner.setGeoCenter(t,i)},traitDidSetIconLayout:function(t,e,i){this.owner.setIconLayout(t,i)},traitDidSetGraphics:function(t,e,i){this.owner.setGraphics(t,i)}}),m([Vs({extends:e.GetFastener})],e.prototype,"geo",void 0),e}(wh),zh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.prototype.needsProcess=function(t,e){return 0!=(t&ro.NeedsResize)&&(t|=ro.NeedsProject),t},e.prototype.extendViewContext=function(t){var e=Object.create(t);return e.geoViewport=this.geoViewport,e},Object.defineProperty(e.prototype,"geoFrame",{get:function(){return this.geoViewport.geoFrame},enumerable:!1,configurable:!0}),e.prototype.initCanvas=function(t){},e.prototype.attachCanvas=function(t){},e.prototype.detachCanvas=function(t){},e.prototype.willSetCanvas=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetMapCanvas&&r.viewWillSetMapCanvas(t,e,this)}},e.prototype.onSetCanvas=function(t,e){null!==e&&this.detachCanvas(e),null!==t&&(this.attachCanvas(t),this.initCanvas(t))},e.prototype.didSetCanvas=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetMapCanvas&&r.viewDidSetMapCanvas(t,e,this)}},e.prototype.initContainer=function(t){},e.prototype.attachContainer=function(t){},e.prototype.detachContainer=function(t){},e.prototype.willSetContainer=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetMapContainer&&r.viewWillSetMapContainer(t,e,this)}},e.prototype.onSetContainer=function(t,e){null!==e&&this.detachContainer(e),null!==t&&(this.attachContainer(t),this.initContainer(t))},e.prototype.didSetContainer=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetMapContainer&&r.viewDidSetMapContainer(t,e,this)}},e.powerFlags=mh.powerFlags|ro.NeedsProject,m([Zo({type:Tr,child:!1,willSetView:function(t,e){this.owner.willSetCanvas(t,e)},onSetView:function(t,e){this.owner.onSetCanvas(t,e)},didSetView:function(t,e){this.owner.didSetCanvas(t,e)}})],e.prototype,"canvas",void 0),m([Zo({type:ar,child:!1,willSetView:function(t,e){this.owner.willSetContainer(t,e)},onSetView:function(t,e){this.owner.onSetContainer(t,e)},didSetView:function(t,e){this.owner.didSetContainer(t,e)}})],e.prototype,"container",void 0),e}(mh),Yh=function(t){function e(){var e=t.call(this)||this;return e.layerFasteners=[],e}return w(e,t),Object.defineProperty(e.prototype,"geoBounds",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),e.prototype.willSetGeoPerspective=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitWillSetGeoPerspective&&r.traitWillSetGeoPerspective(t,e,this)}},e.prototype.onSetGeoPerspective=function(t,e){},e.prototype.didSetGeoPerspective=function(t,e){for(var i=this.traitObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.traitDidSetGeoPerspective&&r.traitDidSetGeoPerspective(t,e,this)}},e.prototype.insertLayer=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.trait===t)return;s.trait===e&&(o=n)}var l=this.createLayerFastener(t);i.splice(o,0,l),l.setTrait(t,e),this.isMounted()&&l.mount()},e.prototype.removeLayer=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.trait===t){n.setTrait(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.initLayer=function(t,e){},e.prototype.attachLayer=function(t,e){this.isConsuming()&&t.addTraitConsumer(this)},e.prototype.detachLayer=function(t,e){this.isConsuming()&&t.removeTraitConsumer(this)},e.prototype.willSetLayer=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitWillSetLayer&&l.traitWillSetLayer(t,e,i,this)}},e.prototype.onSetLayer=function(t,e,i,o){null!==e&&this.detachLayer(e,o),null!==t&&(this.attachLayer(t,o),this.initLayer(t,o))},e.prototype.didSetLayer=function(t,e,i,o){for(var n=this.traitObservers,r=0,s=n.length;r<s;r+=1){var l=n[r];void 0!==l.traitDidSetLayer&&l.traitDidSetLayer(t,e,i,this)}},e.prototype.createLayerFastener=function(t){return new e.LayerFastener(this,t.key,"layer")},e.prototype.mountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.startConsumingLayers=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.addTraitConsumer(this)}},e.prototype.stopConsumingLayers=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){var o=t[e].trait;null!==o&&o.removeTraitConsumer(this)}},e.prototype.detectLayerModel=function(t){return t.getTrait(gh)},e.prototype.detectModels=function(t){for(var e=t.childModels,i=0,o=e.length;i<o;i+=1){var n=e[i],r=this.detectLayerModel(n);null!==r&&this.insertLayer(r)}},e.prototype.didSetModel=function(e,i){null!==e&&this.detectModels(e),t.prototype.didSetModel.call(this,e,i)},e.prototype.onInsertChildModel=function(e,i){t.prototype.onInsertChildModel.call(this,e,i);var o=this.detectLayerModel(e);if(null!==o){var n=null!==i?this.detectLayerModel(i):null;this.insertLayer(o,n)}},e.prototype.onRemoveChildModel=function(e){t.prototype.onRemoveChildModel.call(this,e);var i=this.detectLayerModel(e);null!==i&&this.removeLayer(i)},e.prototype.mountTraitFasteners=function(){t.prototype.mountTraitFasteners.call(this),this.mountLayerFasteners()},e.prototype.unmountTraitFasteners=function(){this.unmountLayerFasteners(),t.prototype.unmountTraitFasteners.call(this)},e.prototype.onStartConsuming=function(){t.prototype.onStartConsuming.call(this),this.startConsumingLayers()},e.prototype.onStopConsuming=function(){t.prototype.onStopConsuming.call(this),this.stopConsumingLayers()},e.LayerFastener=_.define({type:gh,sibling:!1,willSetTrait:function(t,e,i){this.owner.willSetLayer(t,e,i,this)},onSetTrait:function(t,e,i){this.owner.onSetLayer(t,e,i,this)},didSetTrait:function(t,e,i){this.owner.didSetLayer(t,e,i,this)}}),m([N({type:fh,state:null,willSetState:function(t,e){this.owner.willSetGeoPerspective(t,e)},didSetState:function(t,e){this.owner.onSetGeoPerspective(t,e),this.owner.didSetGeoPerspective(t,e)}})],e.prototype,"geoPerspective",void 0),e}(gh),Xh=function(t){function e(){var e=t.call(this)||this;return e.layerFasteners=[],e}return w(e,t),e.prototype.initMapTrait=function(t){},e.prototype.attachMapTrait=function(t){null!==this.map.view&&this.setGeoPerspective(t.geoPerspective.state,t);for(var e=t.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.insertLayerTrait(n)}},e.prototype.detachMapTrait=function(t){for(var e=t.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i].trait;null!==n&&this.removeLayerTrait(n)}},e.prototype.willSetMapTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetMapTrait&&r.controllerWillSetMapTrait(t,e,this)}},e.prototype.onSetMapTrait=function(t,e){null!==e&&this.detachMapTrait(e),null!==t&&(this.attachMapTrait(t),this.initMapTrait(t))},e.prototype.didSetMapTrait=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetMapTrait&&r.controllerDidSetMapTrait(t,e,this)}},e.prototype.initMapView=function(t){},e.prototype.attachMapView=function(t){this.canvas.setView(t.canvas.view),this.container.setView(t.container.view);var e=this.map.trait;null!==e&&this.setGeoPerspective(e.geoPerspective.state,e);for(var i=this.layerFasteners,o=0,n=i.length;o<n;o+=1){var r=i[o].controller;if(null!==r){var s=r.geo.view;null!==s&&null===s.parentView&&r.geo.injectView(t)}}},e.prototype.detachMapView=function(t){this.canvas.setView(null),this.container.setView(null)},e.prototype.willSetMapView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetMapView&&r.controllerWillSetMapView(t,e,this)}},e.prototype.onSetMapView=function(t,e){null!==e&&this.detachMapView(e),null!==t&&(this.attachMapView(t),this.initMapView(t))},e.prototype.didSetMapView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetMapView&&r.controllerDidSetMapView(t,e,this)}},e.prototype.setGeoPerspective=function(t,e){if(null!==t){var i=this.map.view;null!==i&&i.moveTo(t)}},e.prototype.willSetGeoViewport=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetGeoViewport&&s.controllerWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e,i){},e.prototype.didSetGeoViewport=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetGeoViewport&&s.controllerDidSetGeoViewport(t,e,this)}},e.prototype.initCanvasView=function(t){},e.prototype.attachCanvasView=function(t){},e.prototype.detachCanvasView=function(t){},e.prototype.willSetCanvasView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetCanvasView&&r.controllerWillSetCanvasView(t,e,this)}},e.prototype.onSetCanvasView=function(t,e){null!==e&&this.detachCanvasView(e),null!==t&&(this.attachCanvasView(t),this.initCanvasView(t))},e.prototype.didSetCanvasView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetCanvasView&&r.controllerDidSetCanvasView(t,e,this)}},e.prototype.initContainerView=function(t){var e=this.createMapView(t);e.container.setView(t),this.map.setView(e)},e.prototype.attachContainerView=function(t){},e.prototype.detachContainerView=function(t){},e.prototype.willSetContainerView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerWillSetContainerView&&r.controllerWillSetContainerView(t,e,this)}},e.prototype.onSetContainerView=function(t,e){null!==e&&this.detachContainerView(e),null!==t&&(this.attachContainerView(t),this.initContainerView(t))},e.prototype.didSetContainerView=function(t,e){for(var i=this.controllerObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.controllerDidSetContainerView&&r.controllerDidSetContainerView(t,e,this)}},e.prototype.insertLayer=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=i.length,n=0,r=i.length;n<r;n+=1){var s=i[n];if(s.controller===t)return;s.controller===e&&(o=n)}var l=this.createLayerFastener(t);i.splice(o,0,l),l.setController(t,e),this.isMounted()&&l.mount()},e.prototype.removeLayer=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i];if(n.controller===t){n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1);break}}},e.prototype.createLayer=function(t){return wh.fromTrait(t)},e.prototype.initLayer=function(t,e){var i=t.geo.trait;null!==i&&this.initLayerTrait(i,e);var o=t.geo.view;null!==o&&this.initLayerView(o,e)},e.prototype.attachLayer=function(t,e){var i=t.geo.trait;null!==i&&this.attachLayerTrait(i,e);var o=t.geo.view;null!==o&&this.attachLayerView(o,e)},e.prototype.detachLayer=function(t,e){var i=t.geo.view;null!==i&&this.detachLayerView(i,e);var o=t.geo.trait;null!==o&&this.detachLayerTrait(o,e)},e.prototype.willSetLayer=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLayer&&s.controllerWillSetLayer(t,e,i)}},e.prototype.onSetLayer=function(t,e,i){null!==e&&this.detachLayer(e,i),null!==t&&(this.attachLayer(t,i),this.initLayer(t,i))},e.prototype.didSetLayer=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLayer&&s.controllerDidSetLayer(t,e,i)}},e.prototype.insertLayerTrait=function(t,e){void 0===e&&(e=null);for(var i=this.layerFasteners,o=null,n=0,r=i.length;n<r;n+=1){var s=i[n].controller;if(null!==s){if(s.geo.trait===t)return;s.geo.trait===e&&(o=s)}}var l=this.createLayer(t);if(null!==l&&(l.geo.setTrait(t),this.insertChildController(l,o),null===l.geo.view)){var a=this.createLayerView(l),h=null;null!==o&&(h=o.geo.view);var u=this.map.view;null!==u?l.geo.injectView(u,a,h,null):l.geo.setView(a,h)}},e.prototype.removeLayerTrait=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n.setController(null),this.isMounted()&&n.unmount(),e.splice(i,1),void r.remove()}},e.prototype.initLayerTrait=function(t,e){},e.prototype.attachLayerTrait=function(t,e){},e.prototype.detachLayerTrait=function(t,e){},e.prototype.willSetLayerTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLayerTrait&&s.controllerWillSetLayerTrait(t,e,i)}},e.prototype.onSetLayerTrait=function(t,e,i){null!==e&&this.detachLayerTrait(e,i),null!==t&&(this.attachLayerTrait(t,i),this.initLayerTrait(t,i))},e.prototype.didSetLayerTrait=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLayerTrait&&s.controllerDidSetLayerTrait(t,e,i)}},e.prototype.createLayerView=function(t){return t.geo.createView()},e.prototype.initLayerView=function(t,e){},e.prototype.attachLayerView=function(t,e){},e.prototype.detachLayerView=function(t,e){t.remove()},e.prototype.willSetLayerView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLayerView&&s.controllerWillSetLayerView(t,e,i)}},e.prototype.onSetLayerView=function(t,e,i){null!==e&&this.detachLayerView(e,i),null!==t&&(this.attachLayerView(t,i),this.initLayerView(t,i))},e.prototype.didSetLayerView=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLayerView&&s.controllerDidSetLayerView(t,e,i)}},e.prototype.willSetLayerGeoBounds=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerWillSetLayerGeoBounds&&s.controllerWillSetLayerGeoBounds(t,e,i)}},e.prototype.onSetLayerGeoBounds=function(t,e,i){},e.prototype.didSetLayerGeoBounds=function(t,e,i){for(var o=this.controllerObservers,n=0,r=o.length;n<r;n+=1){var s=o[n];void 0!==s.controllerDidSetLayerGeoBounds&&s.controllerDidSetLayerGeoBounds(t,e,i)}},e.prototype.createLayerFastener=function(t){return new e.LayerFastener(this,t.key,"layer")},e.prototype.getLayerFastener=function(t){for(var e=this.layerFasteners,i=0,o=e.length;i<o;i+=1){var n=e[i],r=n.controller;if(null!==r&&r.geo.trait===t)return n}return null},e.prototype.mountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].mount()}},e.prototype.unmountLayerFasteners=function(){for(var t=this.layerFasteners,e=0,i=t.length;e<i;e+=1){t[e].unmount()}},e.prototype.detectLayerController=function(t){return t instanceof wh?t:null},e.prototype.onInsertChildController=function(e,i){t.prototype.onInsertChildController.call(this,e,i);var o=this.detectLayerController(e);null!==o&&this.insertLayer(o,i)},e.prototype.onRemoveChildController=function(e){t.prototype.onRemoveChildController.call(this,e);var i=this.detectLayerController(e);null!==i&&this.removeLayer(i)},e.prototype.mountControllerFasteners=function(){t.prototype.mountControllerFasteners.call(this),this.mountLayerFasteners()},e.prototype.unmountControllerFasteners=function(){this.unmountLayerFasteners(),t.prototype.unmountControllerFasteners.call(this)},e.MapFastener=Vs.define({observeView:!0,willSetView:function(t,e){this.owner.willSetMapView(t,e)},onSetView:function(t,e){this.owner.onSetMapView(t,e)},didSetView:function(t,e){this.owner.didSetMapView(t,e)},viewWillSetGeoViewport:function(t,e,i){this.owner.willSetGeoViewport(t,e,i)},viewDidSetGeoViewport:function(t,e,i){this.owner.onSetGeoViewport(t,e,i),this.owner.didSetGeoViewport(t,e,i)},viewDidSetMapCanvas:function(t,e,i){this.owner.canvas.setView(t)},viewDidSetMapContainer:function(t,e,i){this.owner.container.setView(t)},traitType:Yh,observeTrait:!0,willSetTrait:function(t,e){this.owner.willSetMapTrait(t,e)},onSetTrait:function(t,e){this.owner.onSetMapTrait(t,e)},didSetTrait:function(t,e){this.owner.didSetMapTrait(t,e)},traitDidSetGeoPerspective:function(t,e,i){this.owner.setGeoPerspective(t,i)},traitWillSetLayer:function(t,e,i){null!==e&&this.owner.removeLayerTrait(e)},traitDidSetLayer:function(t,e,i){null!==t&&this.owner.insertLayerTrait(t,i)}}),e.CanvasFastener=Cs.define({type:Tr,willSetView:function(t,e){this.owner.willSetCanvasView(t,e)},onSetView:function(t,e){this.owner.onSetCanvasView(t,e)},didSetView:function(t,e){this.owner.didSetCanvasView(t,e)}}),e.ContainerFastener=Cs.define({type:ar,willSetView:function(t,e){this.owner.willSetContainerView(t,e)},onSetView:function(t,e){this.owner.onSetContainerView(t,e)},didSetView:function(t,e){this.owner.didSetContainerView(t,e)}}),e.LayerFastener=Fs.define({type:wh,child:!1,observe:!0,willSetController:function(t,e){this.owner.willSetLayer(t,e,this)},onSetController:function(t,e){this.owner.onSetLayer(t,e,this)},didSetController:function(t,e){this.owner.didSetLayer(t,e,this)},controllerWillSetGeoTrait:function(t,e){this.owner.willSetLayerTrait(t,e,this)},controllerDidSetGeoTrait:function(t,e){this.owner.onSetLayerTrait(t,e,this),this.owner.didSetLayerTrait(t,e,this)},controllerWillSetGeoView:function(t,e){this.owner.willSetLayerView(t,e,this)},controllerDidSetGeoView:function(t,e){this.owner.onSetLayerView(t,e,this),this.owner.didSetLayerView(t,e,this)},controllerWillSetGeoBounds:function(t,e){this.owner.willSetLayerGeoBounds(t,e,this)},controllerDidSetGeoBounds:function(t,e){this.owner.onSetLayerGeoBounds(t,e,this),this.owner.didSetLayerGeoBounds(t,e,this)}}),m([Vs({extends:e.MapFastener})],e.prototype,"map",void 0),m([Cs({extends:e.CanvasFastener})],e.prototype,"canvas",void 0),m([Cs({extends:e.ContainerFastener})],e.prototype,"container",void 0),m([ds({type:l.Timing,state:!0})],e.prototype,"geoTiming",void 0),e}(Ds),Kh=function(){function t(){}return Object.defineProperty(t.prototype,"geoFrame",{get:function(){return p.GeoBox.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoCenter",{get:function(){return p.GeoPoint.origin()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heading",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilt",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.canEqual=function(e){return e instanceof t&&this.constructor===e.constructor},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this.viewFrame.equals(e.viewFrame))},t}(),Zh=function(t){function e(e){var i=t.call(this)||this;return i.viewFrame=e,i}return w(e,t),e.prototype.withViewFrame=function(t){var i=t.xMin,o=t.yMin,n=t.xMax,s=t.yMax,l=n-i,a=s-o,h=l/a;if(h<2){var u=(a-l/2)/2;o+=u,s-=u,t=new r.R2Box(i,o,n,s)}else if(h>2){var p=(l-2*a)/2;i+=p,n-=p,t=new r.R2Box(i,o,n,s)}return new e(t)},e.prototype.project=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.lat,t=t.lng));var i=this.viewFrame,o=i.xMin+(180+t)/360*i.width,n=i.yMax-(90+e)/180*i.height;return new r.R2Point(o,n)},e.prototype.unproject=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x));var i=this.viewFrame,o=360*(t-i.xMin)/i.width-180,n=180*(i.yMax-e)/i.height-90;return new p.GeoPoint(o,n)},e}(Kh),_h=function(t){function e(e){var i=t.call(this)||this;return Object.defineProperty(i,"geoViewport",{value:e,writable:!0,enumerable:!0,configurable:!0}),i}return w(e,t),e.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e){},e.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},e.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=t.withViewFrame(this.viewFrame);return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},e.prototype.willProcess=function(e,i){0!=(e&ro.NeedsProject)&&(this.updateGeoViewport(),i.geoViewport=this.geoViewport),t.prototype.willProcess.call(this,e,i)},e.prototype.moveTo=function(t,e){},e.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},e.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},e.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e),this.canvas.injectView(e)},e.prototype.detachContainer=function(e){var i=this.canvas.view;null!==i&&i.parentView===e&&e.removeChildView(e),t.prototype.detachContainer.call(this,e)},e.create=function(t){return void 0===t&&(t=new Zh(r.R2Box.undefined())),new e(t)},e}(zh),Qh=function(){function t(t,e,i,o,n,r){this.map=t,this.geoFrame=e,this.geoCenter=i,this.zoom=o,this.heading=n,this.tilt=r}return t.prototype.project=function(t,e){var i;i="number"==typeof t?new mapboxgl.LngLat(t,e):t;var o=this.map.project(i);return new r.R2Point(o.x,o.y)},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?new mapboxgl.Point(t,e):Array.isArray(t)?t:new mapboxgl.Point(t.x,t.y);var o=this.map.unproject(i);return new p.GeoPoint(o.lng,o.lat)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e){var i=e.getBounds(),o=new p.GeoBox(i.getWest(),i.getSouth(),i.getEast(),i.getNorth()),n=e.getCenter(),r=new p.GeoPoint(n.lng,n.lat),s=e.getZoom(),l=e.getBearing(),a=e.getPitch();return new t(e,o,r,s,l,a)},t}(),Jh=function(t){function i(e){var i=t.call(this)||this;return i.map=e,Object.defineProperty(i,"geoViewport",{value:Qh.create(e),writable:!0,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.onMoveStart=i.onMoveStart.bind(i),i.onMoveEnd=i.onMoveEnd.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.on("render",this.onMapRender),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd)},i.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=Qh.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(ro.NeedsProject,t)}},i.prototype.onMoveStart=function(){this.willMoveMap()},i.prototype.onMoveEnd=function(){this.didMoveMap()},i.prototype.moveTo=function(t,i){var o={},n=this.geoViewport,r=t.geoCenter;null!=r&&(r=p.GeoPoint.fromAny(r),n.geoCenter.equivalentTo(r,1e-5)||(o.center=r));var s=t.zoom;void 0===s||e.Equivalent(n.zoom,s,1e-5)||(o.zoom=s);var a=t.heading;void 0===a||e.Equivalent(n.heading,a,1e-5)||(o.bearing=a);var h=t.tilt;void 0===h||e.Equivalent(n.tilt,h,1e-5)||(o.pitch=h),(i=void 0===i||!0===i?this.getLookOr(se.timing,me.ambient,!1):l.Timing.fromAny(i))instanceof l.Timing&&(o.duration=i.duration),this.map.flyTo(o)},i.prototype.willMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillMoveMap&&o.viewWillMoveMap(this)}},i.prototype.didMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMoveMap&&o.viewDidMoveMap(this)}},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.getCanvasContainer()))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e),ar.fromNode(this.map.getContainer()),ar.fromNode(this.map.getCanvasContainer())},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=ar.fromNode(this.map.getCanvasContainer());this.canvas.injectView(i)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=ar.fromNode(this.map.getCanvasContainer());null!==i&&i.parentView===o&&o.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(zh),$h=function(){function t(t,e,i,o,n,r,s){this.map=t,this.geoFrame=e,this.geoCenter=i,this.viewOrigin=o,this.zoom=n,this.heading=r,this.tilt=s}return t.prototype.project=function(t,e){var i,o=this.viewOrigin;i="number"==typeof t?new L.LatLng(e,t):Array.isArray(t)?new L.LatLng(t[1],t[0]):t;var n=this.map.project(i,this.zoom);return new r.R2Point(n.x-o.x,n.y-o.y)},t.prototype.unproject=function(t,e){var i,o=this.viewOrigin;i="number"==typeof t?new L.Point(t+o.x,e+o.y):Array.isArray(t)?new L.Point(t[0]+o.x,t[1]+o.y):new L.Point(t.x+o.x,t.y+o.y);var n=this.map.unproject(i,this.zoom);return new p.GeoPoint(n.lng,n.lat)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.viewOrigin.equals(e.viewOrigin)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e){var i=e.getBounds(),o=new p.GeoBox(i.getWest(),i.getSouth(),i.getEast(),i.getNorth()),n=e.getCenter(),s=new p.GeoPoint(n.lng,n.lat),l=e.getPixelOrigin(),a=l.x,h=l.y;try{var u=r.Transform.parse(e.getPane("mapPane").style.transform);u instanceof r.TranslateTransform&&(a-=u.x.pxValue(),h-=u.y.pxValue())}catch(t){}var d=new r.R2Point(a,h),c=e.getZoom();return new t(e,o,s,d,c,0,0)},t}(),tu=function(t){function e(e){var i=t.call(this)||this;return i.map=e,Object.defineProperty(i,"geoViewport",{value:$h.create(e),writable:!0,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.onMoveStart=i.onMoveStart.bind(i),i.onMoveEnd=i.onMoveEnd.bind(i),i.initMap(e),i}return w(e,t),e.prototype.initMap=function(t){t.on("move",this.onMapRender),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd)},e.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},e.prototype.onSetGeoViewport=function(t,e){},e.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},e.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=$h.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},e.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(ro.NeedsProject,t)}},e.prototype.onMoveStart=function(){this.willMoveMap()},e.prototype.onMoveEnd=function(){this.didMoveMap()},e.prototype.moveTo=function(t,e){var i={},o=this.geoViewport,n=t.geoCenter;n=null!=n?p.GeoPoint.fromAny(n):o.geoCenter;var r=t.zoom;(e=void 0===e||!0===e?this.getLookOr(se.timing,me.ambient,!1):l.Timing.fromAny(e))instanceof l.Timing&&(i.animate=!0,i.duration=e.duration),this.map.flyTo(n,r,i)},e.prototype.willMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewWillMoveMap&&o.viewWillMoveMap(this)}},e.prototype.didMoveMap=function(){for(var t=this.viewObservers,e=0,i=t.length;e<i;e+=1){var o=t[e];void 0!==o.viewDidMoveMap&&o.viewDidMoveMap(this)}},e.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},e.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},e.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e),ar.fromNode(e.node.querySelector(".leaflet-control-container"))},e.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=ar.fromNode(e.node.querySelector(".leaflet-control-container")),o=this.canvas.injectView(e,void 0,i);null!==o&&o.zIndex.setState(500,ro.Intrinsic)},e.prototype.detachContainer=function(e){var i=this.canvas.view;null!==i&&i.parentView===e&&e.removeChildView(e),t.prototype.detachContainer.call(this,e)},e}(zh),eu=function(){function t(t,e,i,o,n,r){this.projection=t,this.geoFrame=e,this.geoCenter=i,this.zoom=o,this.heading=n,this.tilt=r}return t.prototype.project=function(t,e){var i=this.projection;if(null!==i){var o=void 0;o="number"==typeof t?new google.maps.LatLng(e,t):Array.isArray(t)?new google.maps.LatLng(t[1],t[0]):new google.maps.LatLng(t.lat,t.lng);var n=i.fromLatLngToContainerPixel(o);if(null!==n)return new r.R2Point(n.x,n.y)}return r.R2Point.undefined()},t.prototype.unproject=function(t,e){var i=this.projection;if(null!==i){var o=void 0;o="number"==typeof t?new google.maps.Point(t,e):Array.isArray(t)?new google.maps.Point(t[0],t[1]):new google.maps.Point(t.x,t.y);var n=i.fromContainerPixelToLatLng(o);if(null!==n)return new p.GeoPoint(n.lng(),n.lat())}return p.GeoPoint.undefined()},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.projection===e.projection&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.create=function(e,i){void 0===i&&(i=null);var o,n=e.getBounds();if(null!=n){var r=n.getSouthWest(),s=n.getNorthEast();o=new p.GeoBox(r.lng(),r.lat(),s.lng(),s.lat())}else o=p.GeoBox.undefined();var l=e.getCenter(),a=void 0!==l?new p.GeoPoint(l.lng(),l.lat()):p.GeoPoint.origin(),h=e.getZoom();void 0===h&&(h=0);var u=e.getHeading();void 0===u&&(u=0);var d=e.getTilt();return void 0===d&&(d=0),new t(i,o,a,h,u,d)},t}(),iu=function(t){function i(e){var i=t.call(this)||this;return i.map=e,i.mapOverlay=i.createMapOverlay(e),Object.defineProperty(i,"geoViewport",{value:eu.create(i.map,i.mapOverlay.getProjection()),writable:!0,enumerable:!0,configurable:!0}),i.onMapDraw=i.onMapDraw.bind(i),i.onMapIdle=i.onMapIdle.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.addListener("idle",this.onMapIdle)},i.prototype.createMapOverlay=function(t){var e=new i.MapOverlay(this);return e.setMap(t),e},Object.defineProperty(i,"MapOverlay",{get:function(){return function(t){function e(e){var i=t.call(this)||this;return i.owner=e,i}return w(e,t),e.prototype.onAdd=function(){var t=this.owner.container.view;null!==t&&(this.owner.initContainer(t),this.owner.attachContainer(t))},e.prototype.onRemove=function(){this.owner.canvas.removeView()},e.prototype.draw=function(){this.owner.onMapDraw()},e}(google.maps.OverlayView)},enumerable:!1,configurable:!0}),i.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=eu.create(this.map,this.mapOverlay.getProjection());return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.willProcess=function(e,i){0!=(this.viewFlags&ro.NeedsProject)&&this.updateGeoViewport()&&(i.geoViewport=this.geoViewport),t.prototype.willProcess.call(this,e,i)},i.prototype.onMapDraw=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(ro.NeedsProject,t)}},i.prototype.onMapIdle=function(){this.requireUpdate(ro.NeedsProject)},i.prototype.moveTo=function(t,i){var o=this.geoViewport,n=t.geoCenter;null!=n&&(n=p.GeoPoint.fromAny(n),o.geoCenter.equivalentTo(n,1e-5)||this.map.panTo(n));var r=t.zoom;void 0===r||e.Equivalent(o.zoom,r,1e-5)||this.map.setZoom(r);var s=t.heading;void 0===s||e.Equivalent(o.heading,s,1e-5)||this.map.setHeading(s);var l=t.tilt;void 0===l||e.Equivalent(o.tilt,l,1e-5)||this.map.setTilt(l)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&e.appendChildView(this)},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=this.mapOverlay.getPanes();null!=i&&function t(e){var i=e.parentNode;i instanceof HTMLElement&&void 0===i.view&&t(i);return ar.fromNode(e)}(i.overlayMouseTarget)},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=this.mapOverlay.getPanes();if(null!=i){var o=i.overlayMouseTarget.view.parentView.parentView;this.canvas.injectView(o)}else null===this.canvas.view&&this.canvas.setView(this.canvas.createView())},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=this.mapOverlay.getPanes();if(null!=o){var n=o.overlayMouseTarget.view.parentView.parentView;null!==i&&i.parentView===n&&n.removeChildView(e)}t.prototype.detachContainer.call(this,e)},m([e.Lazy],i,"MapOverlay",null),i}(zh),ou=function(){function t(t,e,i,o,n,r){this.map=t,this.geoFrame=e,this.geoCenter=i,this.zoom=o,this.heading=n,this.tilt=r}return t.prototype.equals=function(e){return this===e||e instanceof t&&(this.map===e.map&&this.geoFrame.equals(e.geoFrame)&&this.geoCenter.equals(e.geoCenter)&&this.zoom===e.zoom&&this.heading===e.heading&&this.tilt===e.tilt)},t.init=function(){void 0===t.webMercatorUtils&&window.require(["esri/geometry/support/webMercatorUtils"],(function(e){t.webMercatorUtils=e}))},t.webMercatorUtils=void 0,t}(),nu=function(t){function e(){var e=t.call(this)||this;return ou.init(),e}return w(e,t),e}(zh),ru=function(t){function e(e,i,o,n,r,s){return t.call(this,e,i,o,n,r,s)||this}return w(e,t),e.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.R2Point(o.x,o.y):r.R2Point.origin()},e.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},e.create=function(t){var i,o=t.extent;null!==o?(o=ou.webMercatorUtils.webMercatorToGeographic(o),i=new p.GeoBox(o.xmin,o.ymin,o.xmax,o.ymax)):i=p.GeoBox.undefined();var n=t.center;return new e(t,i,new p.GeoPoint(n.longitude,n.latitude),t.zoom,t.rotation,0)},e}(ou),su=function(t){function i(e){var i=t.call(this)||this;return i.map=e,Object.defineProperty(i,"geoViewport",{value:ru.create(e),writable:!0,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=ru.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(ro.NeedsProject,t)}},i.prototype.moveTo=function(t,i){var o={},n={},r=this.geoViewport,s=t.geoCenter;null!=s&&(s=p.GeoPoint.fromAny(s),r.geoCenter.equivalentTo(s,1e-5)||(o.center=[s.lng,s.lat]));var a=t.zoom;void 0===a||e.Equivalent(r.zoom,a,1e-5)||(o.zoom=a);var h=t.heading;void 0===h||e.Equivalent(r.heading,h,1e-5)||(o.heading=h);var u=t.tilt;void 0===u||e.Equivalent(r.tilt,u,1e-5)||(o.tilt=u),(i=void 0===i||!0===i?this.getLookOr(se.timing,me.ambient,!1):l.Timing.fromAny(i))instanceof l.Timing&&(n.duration=i.duration),this.map.goTo(o,n)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.container.querySelector(".esri-view-root")))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=ar.fromNode(this.map.container),o=ar.fromNode(i.node.querySelector(".esri-view-root"));ar.fromNode(o.node.querySelector(".esri-overlay-surface"))},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=ar.fromNode(this.map.container),o=ar.fromNode(i.node.querySelector(".esri-view-root")),n=ar.fromNode(o.node.querySelector(".esri-overlay-surface"));this.canvas.injectView(n)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=ar.fromNode(this.map.container),n=ar.fromNode(o.node.querySelector(".esri-view-root")),r=ar.fromNode(n.node.querySelector(".esri-overlay-surface"));null!==i&&i.parentView===r&&r.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(nu),lu=function(t){function e(e,i,o,n,r,s){return t.call(this,e,i,o,n,r,s)||this}return w(e,t),e.prototype.project=function(t,e){var i;i="number"==typeof t?{x:t,y:e,spatialReference:{wkid:4326}}:Array.isArray(t)?{x:t[0],y:t[1],spatialReference:{wkid:4326}}:{x:t.lng,y:t.lat,spatialReference:{wkid:4326}};var o=this.map.toScreen(i);return null!==o?new r.R2Point(o.x,o.y):r.R2Point.origin()},e.prototype.unproject=function(t,e){var i;i="number"==typeof t?{x:t,y:e}:Array.isArray(t)?{x:t[0],y:t[1]}:t;var o=this.map.toMap(i);return null!==o?new p.GeoPoint(o.longitude,o.latitude):p.GeoPoint.origin()},e.create=function(t){var i,o=t.extent;null!==o?(o=ou.webMercatorUtils.webMercatorToGeographic(o),i=new p.GeoBox(o.xmin,o.ymin,o.xmax,o.ymax)):i=p.GeoBox.undefined();var n=t.center;return new e(t,i,new p.GeoPoint(n.longitude,n.latitude),t.zoom,t.camera.heading,t.camera.tilt)},e}(ou),au=function(t){function i(e){var i=t.call(this)||this;return i.map=e,Object.defineProperty(i,"geoViewport",{value:lu.create(e),writable:!0,enumerable:!0,configurable:!0}),i.onMapRender=i.onMapRender.bind(i),i.initMap(e),i}return w(i,t),i.prototype.initMap=function(t){t.watch("extent",this.onMapRender)},i.prototype.willSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewWillSetGeoViewport&&r.viewWillSetGeoViewport(t,e,this)}},i.prototype.onSetGeoViewport=function(t,e){},i.prototype.didSetGeoViewport=function(t,e){for(var i=this.viewObservers,o=0,n=i.length;o<n;o+=1){var r=i[o];void 0!==r.viewDidSetGeoViewport&&r.viewDidSetGeoViewport(t,e,this)}},i.prototype.updateGeoViewport=function(){var t=this.geoViewport,e=lu.create(this.map);return!e.equals(t)&&(this.willSetGeoViewport(e,t),this.geoViewport=e,this.onSetGeoViewport(e,t),this.didSetGeoViewport(e,t),!0)},i.prototype.onMapRender=function(){if(this.updateGeoViewport()){var t=!this.isHidden()&&!this.isCulled();this.requireUpdate(ro.NeedsProject,t)}},i.prototype.moveTo=function(t,i){var o={},n={},r=this.geoViewport,s=t.geoCenter;null!=s&&(s=p.GeoPoint.fromAny(s),r.geoCenter.equivalentTo(s,1e-5)||(o.center=[s.lng,s.lat]));var a=t.zoom;void 0===a||e.Equivalent(r.zoom,a,1e-5)||(o.zoom=a);var h=t.heading;void 0===h||e.Equivalent(r.heading,h,1e-5)||(o.heading=h);var u=t.tilt;void 0===u||e.Equivalent(r.tilt,u,1e-5)||(o.tilt=u),(i=void 0===i||!0===i?this.getLookOr(se.timing,me.ambient,!1):l.Timing.fromAny(i))instanceof l.Timing&&(n.duration=i.duration),this.map.goTo(o,n)},i.prototype.attachCanvas=function(e){t.prototype.attachCanvas.call(this,e),null===this.parentView&&(e.appendChildView(this),e.setEventNode(this.map.container.querySelector(".esri-view-root")))},i.prototype.detachCanvas=function(e){this.parentView===e&&e.removeChildView(this),t.prototype.detachCanvas.call(this,e)},i.prototype.initContainer=function(e){t.prototype.initContainer.call(this,e);var i=ar.fromNode(this.map.container),o=ar.fromNode(i.node.querySelector(".esri-view-root"));ar.fromNode(o.node.querySelector(".esri-overlay-surface"))},i.prototype.attachContainer=function(e){t.prototype.attachContainer.call(this,e);var i=ar.fromNode(this.map.container),o=ar.fromNode(i.node.querySelector(".esri-view-root")),n=ar.fromNode(o.node.querySelector(".esri-view-surface"));this.canvas.injectView(n)},i.prototype.detachContainer=function(e){var i=this.canvas.view,o=ar.fromNode(this.map.container),n=ar.fromNode(o.node.querySelector(".esri-view-root")),r=ar.fromNode(n.node.querySelector(".esri-view-surface"));null!==i&&i.parentView===r&&r.removeChildView(e),t.prototype.detachContainer.call(this,e)},i}(nu);t.AngleViewAnimator=Go,t.Animator=Ao,t.Arc=Lr,t.ArcView=Ar,t.AreaPlotController=Sa,t.AreaPlotTrait=fa,t.AreaPlotView=aa,t.AttributeAnimator=$n,t.AxisController=sh,t.AxisTrait=eh,t.AxisView=_a,t.BooleanAttributeAnimator=ir,t.BooleanControllerProperty=vs,t.BooleanModelProperty=W,t.BooleanTraitProperty=B,t.BooleanViewAnimator=Eo,t.BooleanViewProperty=Mo,t.BottomAxisController=hh,t.BottomAxisTrait=nh,t.BottomAxisView=$a,t.BottomTickView=Ka,t.BoxShadow=qt,t.BoxShadowForm=Yt,t.BoxShadowInterpolator=zt,t.BoxShadowParser=Xt,t.BoxShadowStyleAnimator=An,t.BrightnessFeel=ge,t.BubblePlotController=wa,t.BubblePlotTrait=da,t.BubblePlotView=sa,t.ButtonGlow=xs,t.ButtonItem=Os,t.ButtonMembrane=Ls,t.ButtonStack=Rs,t.CanvasRenderer=br,t.CanvasView=Tr,t.CellController=Xs,t.CellTrait=qs,t.CellView=Gs,t.ChartController=ch,t.ChartTrait=dh,t.ChartView=ph,t.CircleIcon=Gr,t.CircleIconInterpolator=Br,t.ColController=nl,t.ColLayout=Ns,t.ColTrait=ol,t.ColView=il,t.Color=Tt,t.ColorAttributeAnimator=rr,t.ColorChannel=Mt,t.ColorChannelParser=Dt,t.ColorForm=Ft,t.ColorLook=he,t.ColorParser=Pt,t.ColorStop=Wt,t.ColorStopInterpolator=Et,t.ColorStopListParser=Ut,t.ColorStopParser=Nt,t.ColorStyleAnimator=xn,t.ColorViewAnimator=Ho,t.CompositeController=Ds,t.CompoundModel=ft,t.ContinuousScaleAnimator=Jl,t.Controller=Jr,t.ControllerContext=Qr,t.ControllerFastener=Fs,t.ControllerManager=$r,t.ControllerManagerService=as,t.ControllerModel=gs,t.ControllerProperty=ds,t.ControllerService=ss,t.ControllerTrait=ms,t.ControllerView=Cs,t.ControllerViewTrait=Vs,t.CssContext=Hn,t.CssRule=qn,t.DataPointController=_l,t.DataPointTrait=Kl,t.DataPointView=Xl,t.DataSetController=Ql,t.DataSetTrait=Zl,t.DeckBar=Pl,t.DeckButton=Cl,t.DeckButtonBackIcon=Vl,t.DeckButtonCloseIcon=bl,t.DeckButtonLabel=Tl,t.DeckCard=Ml,t.DeckPost=vl,t.DeckRail=yl,t.DeckSlider=wl,t.DeckSliderItem=ml,t.DeckSlot=gl,t.DeckView=Dl,t.DeckViewBar=xl,t.DeckViewCard=Al,t.DialController=El,t.DialTrait=Wl,t.DialView=kl,t.DisclosureButton=ks,t.DisclosureCellView=Hs,t.DisplayManager=ao,t.DisplayService=wo,t.DomManager=pr,t.DomService=dr,t.DownlinkTrait=ut,t.DrawerButton=fl,t.DrawerView=cl,t.DrawingRenderer=yr,t.ElementView=lr,t.EnclosedIcon=qr,t.EnclosedIconInterpolator=zr,t.EphemeralStorageManager=rs,t.EquirectangularMapViewport=Zh,t.EsriMapView=su,t.EsriMapViewport=ru,t.EsriSceneView=au,t.EsriSceneViewport=lu,t.EsriView=nu,t.EsriViewport=ou,t.ExecuteManager=ts,t.ExecuteService=hs,t.Expansion=$t,t.ExpansionInterpolator=Jt,t.ExpansionViewAnimator=Ko,t.Feel=fe,t.FeelVector=ce,t.FeelVectorInterpolator=ve,t.FillView=Pr,t.FilledIcon=Er,t.FloatingButton=As,t.Focus=Zt,t.FocusInterpolator=Kt,t.FocusViewAnimator=Yo,t.Font=St,t.FontFamily=wt,t.FontFamilyParser=mt,t.FontFamilyStyleAnimator=Ln,t.FontForm=bt,t.FontInterpolator=Ct,t.FontLook=ue,t.FontParser=Vt,t.FontSize=yt,t.FontViewAnimator=qo,t.GaugeController=Gl,t.GaugeTrait=Ul,t.GaugeView=Nl,t.GenericController=Ms,t.GenericModel=ct,t.GenericTrait=ht,t.GeoArcView=Lh,t.GeoAreaController=Uh,t.GeoAreaTrait=Wh,t.GeoAreaView=Rh,t.GeoCircleView=xh,t.GeoController=wh,t.GeoGridController=Dh,t.GeoGridTrait=Mh,t.GeoGridView=Ph,t.GeoIconController=qh,t.GeoIconTrait=Hh,t.GeoIconView=jh,t.GeoLayerController=Vh,t.GeoLayerTrait=Sh,t.GeoLayerView=mh,t.GeoLineController=Nh,t.GeoLineTrait=kh,t.GeoLineView=Oh,t.GeoPathController=Eh,t.GeoPathTrait=Ih,t.GeoPathView=Ah,t.GeoPerspective=fh,t.GeoPlotView=Bh,t.GeoPointView=Gh,t.GeoRasterView=Fh,t.GeoRippleView=Th,t.GeoTrait=gh,t.GeoTree=Ch,t.GeoTreeView=bh,t.GeoView=yh,t.GeoViewport=vh,t.Gesture=Jo,t.GestureContext=no,t.GestureInput=Qo,t.GoogleMapView=iu,t.GoogleMapViewport=eu,t.GraphController=Va,t.GraphTrait=ba,t.GraphView=Ca,t.GraphicsIconView=Kr,t.GraphicsRenderer=cr,t.GraphicsView=fr,t.HeaderController=ll,t.HeaderTrait=sl,t.HeaderView=rl,t.HexColorParser=At,t.HistoryManager=is,t.HistoryService=us,t.HistoryState=es,t.HslColor=Rt,t.HslColorInterpolator=It,t.HslColorParser=kt,t.HtmlIconView=_r,t.HtmlView=ar,t.Icon=Wr,t.IconButton=Is,t.IconCellController=Zs,t.IconCellTrait=Ys,t.IconCellView=js,t.IconLayout=kr,t.IconView=Yr,t.IconViewAnimator=Xr,t.InputTokenView=Es,t.InterpolatedFeel=ye,t.LayerView=vr,t.LayoutManager=ho,t.LayoutService=mo,t.LeafController=Js,t.LeafTrait=Qs,t.LeafView=_s,t.LeafletView=tu,t.LeafletViewport=$h,t.LeftAxisController=uh,t.LeftAxisTrait=rh,t.LeftAxisView=th,t.LeftTickView=Za,t.LengthAttributeAnimator=nr,t.LengthLook=ae,t.LengthStyleAnimator=Mn,t.LengthStyleAnimatorConstraint=Dn,t.LengthViewAnimator=Bo,t.LengthViewAnimatorConstraint=jo,t.LengthViewPropertyConstraint=Lo,t.LineHeight=gt,t.LinePlotController=ma,t.LinePlotTrait=ca,t.LinePlotView=la,t.LinearGradient=Gt,t.LinearGradientAngleParser=jt,t.LinearGradientInterpolator=Bt,t.LinearGradientParser=Ht,t.Look=se,t.LookVector=re,t.MapController=Xh,t.MapDownlinkTrait=dt,t.MapTrait=Yh,t.MapView=zh,t.MapboxView=Jh,t.MapboxViewport=Qh,t.MediaRule=Kn,t.Modal=po,t.ModalManager=co,t.ModalService=Co,t.Model=f,t.ModelContext=d,t.ModelDownlink=J,t.ModelDownlinkContext=c,t.ModelEventDownlink=tt,t.ModelFastener=H,t.ModelListDownlink=it,t.ModelManager=y,t.ModelManagerService=P,t.ModelMapDownlink=nt,t.ModelProperty=R,t.ModelService=T,t.ModelTrait=z,t.ModelValueDownlink=lt,t.MomentumGesture=an,t.MomentumGestureInput=ln,t.Mood=me,t.MoodMatrix=Ce,t.MoodVector=Se,t.MouseMomentumGesture=dn,t.MousePositionGesture=sn,t.MouseScaleGesture=wn,t.NodeView=Qn,t.NumberAttributeAnimator=or,t.NumberControllerProperty=ys,t.NumberLook=le,t.NumberModelProperty=E,t.NumberStyleAnimator=Fn,t.NumberStyleAnimatorConstraint=Pn,t.NumberTickGenerator=Ha,t.NumberTraitProperty=j,t.NumberViewAnimator=No,t.NumberViewAnimatorConstraint=Uo,t.NumberViewProperty=Do,t.NumberViewPropertyConstraint=xo,t.OpacityFeel=we,t.PaintingRenderer=mr,t.PathContext=gr,t.PathRenderer=wr,t.PieController=Yl,t.PieTrait=zl,t.PieView=ql,t.PlotController=va,t.PlotTrait=ha,t.PlotView=oa,t.PointerMomentumGesture=un,t.PointerPositionGesture=nn,t.PointerScaleGesture=yn,t.PolygonIcon=jr,t.PolygonIconInterpolator=Hr,t.PopoverView=dl,t.PositionGesture=en,t.PositionGestureInput=tn,t.Presence=Qt,t.PresenceInterpolator=_t,t.PresenceViewAnimator=Xo,t.RasterView=Fr,t.Rect=Dr,t.RectView=xr,t.RefreshManager=C,t.RefreshService=M,t.RgbColor=xt,t.RgbColorInterpolator=Lt,t.RgbColorParser=Ot,t.RightAxisController=ah,t.RightAxisTrait=oh,t.RightAxisView=Ja,t.RightTickView=Xa,t.RowController=el,t.RowTrait=tl,t.RowView=$s,t.ScaleGesture=fn,t.ScaleGestureInput=cn,t.ScaledView=ia,t.ScaledXView=$l,t.ScaledXYView=ea,t.ScaledYView=ta,t.ScatterPlotController=ya,t.ScatterPlotTrait=ua,t.ScatterPlotView=na,t.ScrimView=pl,t.SelectableTrait=vt,t.SelectionManager=b,t.SelectionService=D,t.SeriesPlotController=ga,t.SeriesPlotTrait=pa,t.SeriesPlotView=ra,t.ShadowLook=pe,t.SliceController=Hl,t.SliceTrait=jl,t.SliceView=Bl,t.StorageManager=os,t.StorageService=ps,t.StringAttributeAnimator=er,t.StringControllerProperty=fs,t.StringModelProperty=k,t.StringStyleAnimator=Tn,t.StringTraitProperty=G,t.StringViewAnimator=Wo,t.StringViewProperty=Po,t.StrokeView=Mr,t.StyleAnimator=Sn,t.StyleAnimatorConstraint=bn,t.StyleContext=mn,t.StyleMap=Rn,t.StyleRule=Yn,t.StyleSheet=_n,t.StyleValue=te,t.StyleValueForm=ee,t.StyleValueParser=ie,t.StyleView=hr,t.SvgContext=Sr,t.SvgIconView=Zr,t.SvgRenderer=Cr,t.SvgView=ur,t.TableController=ul,t.TableLayout=Us,t.TableTrait=hl,t.TableView=al,t.TextCellController=Ks,t.TextCellTrait=zs,t.TextCellView=Bs,t.TextRun=Rr,t.TextRunView=Ir,t.TextView=Jn,t.Theme=be,t.ThemeManager=uo,t.ThemeMatrix=Ve,t.ThemeService=So,t.TickGenerator=ja,t.TickView=za,t.TimeTickGenerator=qa,t.TimingLook=de,t.TitleDeckBar=Rl,t.TitleDeckView=Il,t.ToAttributeString=oe,t.ToStyleString=ne,t.TokenView=Ws,t.TopAxisController=lh,t.TopAxisTrait=ih,t.TopAxisView=Qa,t.TopTickView=Ya,t.TouchMomentumGesture=pn,t.TouchPositionGesture=rn,t.TouchScaleGesture=gn,t.Trait=v,t.TraitFastener=_,t.TraitModel=X,t.TraitProperty=N,t.TraitService=x,t.TransformAttributeAnimator=sr,t.TransformStyleAnimator=On,t.TransformViewAnimator=zo,t.TypesetView=Or,t.ValueDownlinkTrait=pt,t.VectorIcon=Nr,t.VectorIconInterpolator=Ur,t.View=ro,t.ViewAnimator=Oo,t.ViewAnimatorConstraint=Io,t.ViewContext=oo,t.ViewFastener=Zo,t.ViewManager=so,t.ViewManagerService=yo,t.ViewProperty=bo,t.ViewPropertyConstraint=To,t.ViewService=fo,t.Viewport=io,t.ViewportManager=lo,t.ViewportService=go,t.WarpManager=V,t.WarpService=O,t.WebGLRenderer=Vr,t.WebStorageManager=ns,t.WorldMapView=_h,t.WorldMapViewport=Kh,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-toolkit.min.js.map