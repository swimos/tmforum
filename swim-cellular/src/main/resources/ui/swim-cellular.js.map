{"version":3,"file":"swim-cellular.js","sources":["../../node_modules/tslib/tslib.es6.js","../../node_modules/@swim/googlemap/main/GoogleMapProjection.ts","../../node_modules/@swim/googlemap/main/GoogleMapView.ts","../../node_modules/@swim/googlemap/main/GoogleMapViewController.ts","../../node_modules/@swim/esrimap/main/EsriProjection.ts","../../node_modules/@swim/esrimap/main/EsriView.ts","../../node_modules/@swim/esrimap/main/EsriViewController.ts","../../node_modules/@swim/esrimap/main/EsriMapViewProjection.ts","../../node_modules/@swim/esrimap/main/EsriMapView.ts","../../node_modules/@swim/esrimap/main/EsriMapViewController.ts","../../node_modules/@swim/esrimap/main/EsriSceneViewProjection.ts","../../node_modules/@swim/esrimap/main/EsriSceneView.ts","../../node_modules/@swim/esrimap/main/EsriSceneViewController.ts","../../node_modules/@swim/shadow/main/BoxShadow.ts","../../node_modules/@swim/shadow/main/BoxShadowParser.ts","../../node_modules/@swim/shadow/main/BoxShadowForm.ts","../../node_modules/@swim/theme/main/DarkTheme.ts","../../node_modules/@swim/theme/main/LightTheme.ts","../../node_modules/@swim/theme/main/Theme.ts","../../node_modules/@swim/app/main/visual/ScrimView.ts","../../node_modules/@swim/app/main/visual/IlluminationView.ts","../../node_modules/@swim/app/main/visual/TactileView.ts","../../node_modules/@swim/app/main/popover/PopoverView.ts","../../node_modules/@swim/app/main/popover/PopoverViewController.ts","../../node_modules/@swim/app/main/drawer/DrawerView.ts","../../node_modules/@swim/app/main/drawer/DrawerViewController.ts","../../node_modules/@swim/app/main/drawer/DrawerButton.ts","../../node_modules/@swim/app/main/app/AppView.ts","../../node_modules/@swim/app/main/app/AppViewController.ts","../../node_modules/@swim/controls/main/action/ActionButton.ts","../../node_modules/@swim/controls/main/action/ActionItem.ts","../../node_modules/@swim/controls/main/action/ActionStackGestureController.ts","../../node_modules/@swim/controls/main/action/ActionStack.ts","../../node_modules/@swim/controls/main/action/ActionStackController.ts","../../node_modules/@swim/navigation/main/menu/MenuList.ts","../../node_modules/@swim/navigation/main/menu/MenuItem.ts","../../node_modules/@swim/navigation/main/menu/MenuListController.ts","../../src/main/typescript/map/RegionMapPopoverView.ts","../../src/main/typescript/map/SiteMapPopoverView.ts","../../src/main/typescript/map/SectorMapPopoverView.ts","../../src/main/typescript/map/SectorMapView.ts","../../src/main/typescript/map/SiteMapView.ts","../../src/main/typescript/map/RegionMapView.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox, GeoProjection} from \"@swim/map\";\nimport {GoogleMapView} from \"./GoogleMapView\";\n\nexport class GoogleMapProjection implements GeoProjection {\n  /** @hidden */\n  readonly _mapView: GoogleMapView;\n\n  constructor(mapView: GoogleMapView) {\n    this._mapView = mapView;\n  }\n\n  get map(): google.maps.Map {\n    return this._mapView._map;\n  }\n\n  get bounds(): GeoBox {\n    const bounds = this._mapView._map.getBounds()!;\n    const sw = bounds.getSouthWest();\n    const ne = bounds.getNorthEast();\n    return new GeoBox(sw.lng(), sw.lat(), ne.lng(), ne.lat());\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: google.maps.LatLng;\n    if (typeof lng === \"number\") {\n      geoPoint = new google.maps.LatLng(lat!, lng);\n    } else if (Array.isArray(lng)) {\n      geoPoint = new google.maps.LatLng(lng[1], lng[0]);\n    } else {\n      geoPoint = new google.maps.LatLng(lng.lat, lng.lng);\n    }\n    const projection = this._mapView._mapOverlay!.getProjection()!;\n    const point = projection.fromLatLngToContainerPixel(geoPoint);\n    return new PointR2(point.x, point.y);\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: google.maps.Point;\n    if (typeof x === \"number\") {\n      viewPoint = new google.maps.Point(x, y!);\n    } else if (Array.isArray(x)) {\n      viewPoint = new google.maps.Point(x[0], x[1]);\n    } else {\n      viewPoint = new google.maps.Point(x.x, x.y);\n    }\n    const projection = this._mapView._mapOverlay!.getProjection()!;\n    const point = projection.fromContainerPixelToLatLng(viewPoint);\n    return new GeoPoint(point.lng(), point.lat());\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {ViewFlags, View, RenderedViewContext, RenderedView, ViewHtml, HtmlView, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox, MapViewContext, MapGraphicsView} from \"@swim/map\";\nimport {GoogleMapProjection} from \"./GoogleMapProjection\";\nimport {GoogleMapViewObserver} from \"./GoogleMapViewObserver\";\nimport {GoogleMapViewController} from \"./GoogleMapViewController\";\n\nexport class GoogleMapView extends MapGraphicsView {\n  /** @hidden */\n  readonly _map: google.maps.Map;\n  /** @hidden */\n  _geoProjection: GoogleMapProjection;\n  /** @hidden */\n  _mapOverlay: google.maps.OverlayView | null;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n  /** @hidden */\n  _mapTilt: number;\n\n  constructor(map: google.maps.Map) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new GoogleMapProjection(this);\n    this._mapOverlay = null;\n    this._mapZoom = map.getZoom();\n    this._mapHeading = map.getHeading();\n    this._mapTilt = map.getTilt();\n    this.initMap(map);\n  }\n\n  get map(): google.maps.Map {\n    return this._map;\n  }\n\n  protected initMap(map: google.maps.Map): void {\n    // hook\n  }\n\n  get viewController(): GoogleMapViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): GoogleMapProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  protected willSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.willObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewWillSetGeoProjection !== void 0) {\n        viewObserver.viewWillSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  protected onSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    if (!this.isHidden() && !this.isCulled()) {\n      this.requireUpdate(View.NeedsProject, true);\n    }\n  }\n\n  protected didSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewDidSetGeoProjection !== void 0) {\n        viewObserver.viewDidSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  get mapOverlay(): google.maps.OverlayView | null {\n    return this._mapOverlay;\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  protected willSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewWillSetMapZoom !== void 0) {\n        viewObserver.viewWillSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  protected onSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    // hook\n  }\n\n  protected didSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewDidSetMapZoom !== void 0) {\n        viewObserver.viewDidSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return this._mapTilt;\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  childViewContext(childView: View, viewContext: MapViewContext): MapViewContext {\n    return viewContext;\n  }\n\n  mapViewContext(viewContext: RenderedViewContext): MapViewContext {\n    const mapViewContext = Object.create(viewContext);\n    mapViewContext.geoProjection = this._geoProjection;\n    mapViewContext.geoFrame = this.geoFrame;\n    mapViewContext.mapZoom = this._mapZoom;\n    mapViewContext.mapHeading = this._mapHeading;\n    mapViewContext.mapTilt = this._mapTilt;\n    return mapViewContext;\n  }\n\n  get geoFrame(): GeoBox {\n    const bounds = this._map.getBounds()!;\n    const sw = bounds.getSouthWest();\n    const ne = bounds.getNorthEast();\n    return new GeoBox(sw.lng(), sw.lat(), ne.lng(), ne.lat());\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    viewContext = this.mapViewContext(viewContext);\n    return super.hitTest(x, y, viewContext);\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.getHeading();\n    this._mapTilt = this._map.getTilt();\n    this.setMapZoom(this._map.getZoom());\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      class GoogleMapOverlayView extends google.maps.OverlayView {\n        readonly _mapView: GoogleMapView;\n        _canvasView: CanvasView | null;\n        constructor(mapView: GoogleMapView) {\n          super();\n          this._mapView = mapView;\n          this._canvasView = null;\n        }\n        onAdd(): void {\n          const panes = this.getPanes();\n          const overlayMouseTarget = GoogleMapView.materializeAncestors(panes.overlayMouseTarget as HTMLElement);\n          const overlayContainer = overlayMouseTarget.parentView as HtmlView;\n          const container = overlayContainer.parentView as HtmlView;\n          this._canvasView = container.append(\"canvas\");\n          this._canvasView.append(this._mapView);\n        }\n        onRemove(): void {\n          if (this._canvasView !== null) {\n            this._canvasView.remove();\n            this._canvasView = null;\n          }\n        }\n        draw(): void {\n          this._mapView.onMapRender();\n        }\n      }\n      const mapOverlay = new GoogleMapOverlayView(this);\n      mapOverlay.setMap(this._map);\n      this._mapOverlay = mapOverlay;\n      return mapOverlay._canvasView;\n    }\n  }\n\n  private static materializeAncestors(node: HTMLElement): HtmlView {\n    const parentNode = node.parentNode;\n    if (parentNode instanceof HTMLElement && !(parentNode as ViewHtml).view) {\n      GoogleMapView.materializeAncestors(parentNode);\n    }\n    return View.fromNode(node);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {MapGraphicsViewController} from \"@swim/map\";\nimport {GoogleMapProjection} from \"./GoogleMapProjection\";\nimport {GoogleMapView} from \"./GoogleMapView\";\nimport {GoogleMapViewObserver} from \"./GoogleMapViewObserver\";\n\nexport class GoogleMapViewController<V extends GoogleMapView = GoogleMapView> extends MapGraphicsViewController<V> implements GoogleMapViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: GoogleMapProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: GoogleMapProjection, view: V): void {\n    // hook\n  }\n\n  viewWillSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n\n  viewDidSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {GeoProjection} from \"@swim/map\";\n\nexport interface EsriProjection extends GeoProjection {\n  readonly map: __esri.View;\n}\n\n/** @hidden */\nexport const EsriProjection = {\n  webMercatorUtils: void 0 as __esri.webMercatorUtils | undefined,\n\n  init(): void {\n    if (EsriProjection.webMercatorUtils === void 0) {\n      (window.require as any)([\"esri/geometry/support/webMercatorUtils\"], function (webMercatorUtils: __esri.webMercatorUtils): void {\n        EsriProjection.webMercatorUtils = webMercatorUtils;\n      });\n    }\n  },\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {ViewFlags, View, RenderedViewContext, RenderedView, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, MapViewContext, MapGraphicsView} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriViewObserver} from \"./EsriViewObserver\";\nimport {EsriViewController} from \"./EsriViewController\";\n\nexport abstract class EsriView extends MapGraphicsView {\n  constructor() {\n    super();\n    EsriProjection.init();\n  }\n\n  abstract get map(): __esri.View;\n\n  get viewController(): EsriViewController | null {\n    return this._viewController;\n  }\n\n  abstract project(lnglat: AnyGeoPoint): PointR2;\n  abstract project(lng: number, lat: number): PointR2;\n\n  abstract unproject(point: AnyPointR2): GeoPoint;\n  abstract unproject(x: number, y: number): GeoPoint;\n\n  abstract get geoProjection(): EsriProjection;\n\n  protected willSetGeoProjection(geoProjection: EsriProjection): void {\n    this.willObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewWillSetGeoProjection !== void 0) {\n        viewObserver.viewWillSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  protected onSetGeoProjection(geoProjection: EsriProjection): void {\n    if (!this.isHidden() && !this.isCulled()) {\n      this.requireUpdate(View.NeedsProject, false);\n    }\n  }\n\n  protected didSetGeoProjection(geoProjection: EsriProjection): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewDidSetGeoProjection !== void 0) {\n        viewObserver.viewDidSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  abstract get mapZoom(): number;\n\n  protected willSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewWillSetMapZoom !== void 0) {\n        viewObserver.viewWillSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  protected onSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    // hook\n  }\n\n  protected didSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewDidSetMapZoom !== void 0) {\n        viewObserver.viewDidSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  abstract get mapHeading(): number;\n\n  abstract get mapTilt(): number;\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  childViewContext(childView: View, viewContext: MapViewContext): MapViewContext {\n    return viewContext;\n  }\n\n  mapViewContext(viewContext: RenderedViewContext): MapViewContext {\n    const mapViewContext = Object.create(viewContext);\n    mapViewContext.geoProjection = this.geoProjection;\n    mapViewContext.geoFrame = this.geoFrame;\n    mapViewContext.mapZoom = this.mapZoom;\n    mapViewContext.mapHeading = this.mapHeading;\n    mapViewContext.mapTilt = this.mapTilt;\n    return mapViewContext;\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    viewContext = this.mapViewContext(viewContext);\n    return super.hitTest(x, y, viewContext);\n  }\n\n  abstract overlayCanvas(): CanvasView | null;\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {MapGraphicsViewController} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriViewObserver} from \"./EsriViewObserver\";\n\nexport class EsriViewController<V extends EsriView = EsriView> extends MapGraphicsViewController<V> implements EsriViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriProjection, view: V): void {\n    // hook\n  }\n\n  viewWillSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n\n  viewDidSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\n\nexport class EsriMapViewProjection implements EsriProjection {\n  /** @hidden */\n  readonly _map: __esri.MapView;\n\n  constructor(map: __esri.MapView) {\n    EsriProjection.init();\n    this._map = map;\n  }\n\n  get map(): __esri.MapView {\n    return this._map;\n  }\n\n  get bounds(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: __esri.Point;\n    if (typeof lng === \"number\") {\n      geoPoint = {x: lng, y: lat!, spatialReference: {wkid: 4326}} as __esri.Point;\n    } else if (Array.isArray(lng)) {\n      geoPoint = {x: lng[0], y: lng[1], spatialReference: {wkid: 4326}} as __esri.Point;\n    } else {\n      geoPoint = {x: lng.lng, y: lng.lat, spatialReference: {wkid: 4326}} as __esri.Point;\n    }\n    const point = this._map.toScreen(geoPoint);\n    return point !== null ? new PointR2(point.x, point.y) : PointR2.origin();\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: __esri.ScreenPoint;\n    if (typeof x === \"number\") {\n      viewPoint = {x: x, y: y!};\n    } else if (Array.isArray(x)) {\n      viewPoint = {x: x[0], y: x[1]};\n    } else {\n      viewPoint = x;\n    }\n    const point = this._map.toMap(viewPoint);\n    return point !== null ? new GeoPoint(point.longitude, point.latitude) : GeoPoint.origin();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {View, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriMapViewProjection} from \"./EsriMapViewProjection\";\nimport {EsriMapViewController} from \"./EsriMapViewController\";\n\nexport class EsriMapView extends EsriView {\n  /** @hidden */\n  readonly _map: __esri.MapView;\n  /** @hidden */\n  _geoProjection: EsriMapViewProjection;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n\n  constructor(map: __esri.MapView) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new EsriMapViewProjection(this._map);\n    this._mapZoom = map.zoom;\n    this._mapHeading = map.rotation;\n    this.initMap(this._map);\n  }\n\n  get map(): __esri.MapView {\n    return this._map;\n  }\n\n  protected initMap(map: __esri.MapView): void {\n    map.watch(\"extent\", this.onMapRender);\n  }\n\n  get viewController(): EsriMapViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): EsriMapViewProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: EsriMapViewProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return 0;\n  }\n\n  get geoFrame(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.rotation;\n    this.setMapZoom(this._map.zoom);\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      const map = this._map;\n      const container = View.fromNode(map.container);\n      const esriViewRoot = View.fromNode(container.node.querySelector(\".esri-view-root\") as HTMLDivElement);\n      const esriOverlaySurface = View.fromNode(esriViewRoot.node.querySelector(\".esri-overlay-surface\") as HTMLDivElement);\n      const canvas = esriOverlaySurface.append(\"canvas\");\n      canvas.setEventSurface(esriViewRoot.node);\n      canvas.append(this);\n      return canvas;\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {EsriViewController} from \"./EsriViewController\";\nimport {EsriMapViewProjection} from \"./EsriMapViewProjection\";\nimport {EsriMapView} from \"./EsriMapView\";\nimport {EsriMapViewObserver} from \"./EsriMapViewObserver\";\n\nexport class EsriMapViewController<V extends EsriMapView = EsriMapView> extends EsriViewController<V> implements EsriMapViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriMapViewProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriMapViewProjection, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\n\nexport class EsriSceneViewProjection implements EsriProjection {\n  /** @hidden */\n  readonly _map: __esri.SceneView;\n\n  constructor(map: __esri.SceneView) {\n    EsriProjection.init();\n    this._map = map;\n  }\n\n  get map(): __esri.SceneView {\n    return this._map;\n  }\n\n  get bounds(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: __esri.Point;\n    if (typeof lng === \"number\") {\n      geoPoint = {x: lng, y: lat!, spatialReference: {wkid: 4326}} as __esri.Point;\n    } else if (Array.isArray(lng)) {\n      geoPoint = {x: lng[0], y: lng[1], spatialReference: {wkid: 4326}} as __esri.Point;\n    } else {\n      geoPoint = {x: lng.lng, y: lng.lat, spatialReference: {wkid: 4326}} as __esri.Point;\n    }\n    const point = this._map.toScreen(geoPoint);\n    return point !== null ? new PointR2(point.x, point.y) : PointR2.origin();\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: __esri.ScreenPoint;\n    if (typeof x === \"number\") {\n      viewPoint = {x: x, y: y!};\n    } else if (Array.isArray(x)) {\n      viewPoint = {x: x[0], y: x[1]};\n    } else {\n      viewPoint = x;\n    }\n    const point = this._map.toMap(viewPoint);\n    return point !== null ? new GeoPoint(point.longitude, point.latitude) : GeoPoint.origin();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {View, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriSceneViewProjection} from \"./EsriSceneViewProjection\";\nimport {EsriSceneViewController} from \"./EsriSceneViewController\";\n\nexport class EsriSceneView extends EsriView {\n  /** @hidden */\n  readonly _map: __esri.SceneView;\n  /** @hidden */\n  _geoProjection: EsriSceneViewProjection;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n  /** @hidden */\n  _mapTilt: number;\n\n  constructor(map: __esri.SceneView) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new EsriSceneViewProjection(this._map);\n    this._mapZoom = map.zoom;\n    this._mapHeading = map.camera.heading;\n    this._mapTilt = map.camera.tilt;\n    this.initMap(this._map);\n  }\n\n  get map(): __esri.SceneView {\n    return this._map;\n  }\n\n  protected initMap(map: __esri.SceneView): void {\n    map.watch(\"extent\", this.onMapRender);\n  }\n\n  get viewController(): EsriSceneViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): EsriSceneViewProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: EsriSceneViewProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return this._mapTilt;\n  }\n\n  get geoFrame(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.camera.heading;\n    this._mapTilt = this._map.camera.tilt;\n    this.setMapZoom(this._map.zoom);\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      const map = this._map;\n      const container = View.fromNode(map.container);\n      const esriViewRoot = View.fromNode(container.node.querySelector(\".esri-view-root\") as HTMLDivElement);\n      const esriViewSurface = View.fromNode(esriViewRoot.node.querySelector(\".esri-view-surface\") as HTMLDivElement);\n      const canvas = esriViewSurface.append(\"canvas\");\n      canvas.append(this);\n      return canvas;\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {EsriViewController} from \"./EsriViewController\";\nimport {EsriSceneViewProjection} from \"./EsriSceneViewProjection\";\nimport {EsriSceneView} from \"./EsriSceneView\";\nimport {EsriSceneViewObserver} from \"./EsriSceneViewObserver\";\n\nexport class EsriSceneViewController<V extends EsriSceneView = EsriSceneView> extends EsriViewController<V> implements EsriSceneViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriSceneViewProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriSceneViewProjection, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals, Objects} from \"@swim/util\";\nimport {Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Value, Text, Form} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {BoxShadowParser} from \"./BoxShadowParser\";\nimport {BoxShadowForm} from \"./BoxShadowForm\";\n\nexport type AnyBoxShadow = BoxShadow | BoxShadowInit | string | BoxShadowArray;\n\nexport type BoxShadowArray = {[index: number]: BoxShadow | BoxShadowInit | string, length: number};\n\nexport interface BoxShadowInit {\n  offsetX?: AnyLength;\n  offsetY?: AnyLength;\n  blurRadius?: AnyLength;\n  spreadRadius?: AnyLength;\n  color?: AnyColor;\n  inset?: boolean;\n}\n\nexport class BoxShadow implements Equals {\n  readonly inset: boolean;\n  readonly offsetX: Length;\n  readonly offsetY: Length;\n  readonly blurRadius: Length;\n  readonly spreadRadius: Length;\n  readonly color: Color;\n  readonly next: BoxShadow | null;\n\n  constructor(inset: boolean, offsetX: Length, offsetY: Length, blurRadius: Length,\n              spreadRadius: Length, color: Color, next: BoxShadow | null) {\n    this.inset = inset;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.blurRadius = blurRadius;\n    this.spreadRadius = spreadRadius;\n    this.color = color;\n    this.next = next;\n  }\n\n  isDefined(): boolean {\n    return this.inset || this.offsetX.isDefined() || this.offsetY.isDefined()\n        || this.blurRadius.isDefined() || this.spreadRadius.isDefined()\n        || this.color.isDefined() || (this.next !== null ? this.next.isDefined() : false);\n  }\n\n  and(value: AnyBoxShadow): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: AnyBoxShadow | AnyLength | boolean, offsetX?: AnyLength, offsetY?: AnyColor | AnyLength, blurRadius?: AnyColor | AnyLength, spreadRadius?: AnyColor | AnyLength, color?: AnyColor): BoxShadow {\n    const next = this.next !== null ? this.next.and.apply(this.next, arguments) : BoxShadow.of.apply(null, arguments);\n    return new BoxShadow(this.inset, this.offsetX, this.offsetY, this.blurRadius,\n                         this.spreadRadius, this.color, next);\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BoxShadow) {\n      return this.inset === that.inset && this.offsetX.equals(that.offsetX)\n          && this.offsetY.equals(that.offsetY) && this.blurRadius.equals(that.blurRadius)\n          && this.spreadRadius.equals(that.spreadRadius) && this.color.equals(that.color)\n          && Objects.equal(this.next, that.next);\n    }\n    return false;\n  }\n\n  toString(): string {\n    if (this.isDefined()) {\n      let s = \"\";\n      let boxShadow = this as BoxShadow;\n      do {\n        if (boxShadow.inset) {\n          s += \"inset\";\n          s += \" \";\n        }\n        s += boxShadow.offsetX.toString();\n        s += \" \";\n        s += boxShadow.offsetY.toString();\n        s += \" \";\n        s += boxShadow.blurRadius.toString();\n        s += \" \";\n        s += boxShadow.spreadRadius.toString();\n        s += \" \";\n        s += boxShadow.color.toString();\n        if (boxShadow.next !== null) {\n          s += \", \";\n          boxShadow = boxShadow.next;\n          continue;\n        }\n        break;\n      } while (true);\n      return s;\n    } else {\n      return \"none\";\n    }\n  }\n\n  private static _none?: BoxShadow;\n  static none(): BoxShadow {\n    if (BoxShadow._none === void 0) {\n      BoxShadow._none = new BoxShadow(false, Length.zero(), Length.zero(), Length.zero(), Length.zero(), Color.black(), null);\n    }\n    return BoxShadow._none;\n  }\n\n  static of(value: AnyBoxShadow): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: AnyBoxShadow | AnyLength | boolean, offsetX?: AnyLength, offsetY?: AnyColor | AnyLength, blurRadius?: AnyColor | AnyLength, spreadRadius?: AnyColor | AnyLength, color?: AnyColor): BoxShadow {\n    if (arguments.length === 1) {\n      return BoxShadow.fromAny(arguments[0]);\n    } else if (typeof inset !== \"boolean\") {\n      if (arguments.length === 3) {\n        color = Color.fromAny(arguments[2]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.zero();\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else if (arguments.length === 4) {\n        color = Color.fromAny(arguments[3]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.fromAny(arguments[2]);\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else if (arguments.length === 5) {\n        color = Color.fromAny(arguments[4]);\n        spreadRadius = Length.fromAny(arguments[3]);\n        blurRadius = Length.fromAny(arguments[2]);\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else {\n        throw new TypeError(\"\" + arguments);\n      }\n      inset = false;\n    } else {\n      if (arguments.length === 4) {\n        color = Color.fromAny(arguments[3]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.zero();\n        offsetX = Length.fromAny(arguments[1]);\n        offsetY = Length.fromAny(arguments[2]);\n      } else if (arguments.length === 5) {\n        color = Color.fromAny(arguments[4]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.fromAny(arguments[3]);\n        offsetX = Length.fromAny(arguments[1]);\n        offsetY = Length.fromAny(arguments[2]);\n      } else if (arguments.length === 6) {\n        color = Color.fromAny(arguments[5]);\n        spreadRadius = Length.fromAny(arguments[4]);\n        blurRadius = Length.fromAny(arguments[3]);\n        offsetY = Length.fromAny(arguments[2]);\n        offsetX = Length.fromAny(arguments[1]);\n      } else {\n        throw new TypeError(\"\" + arguments);\n      }\n    }\n    return new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n  }\n\n  static fromAny(...values: AnyBoxShadow[]): BoxShadow {\n    let value: AnyBoxShadow;\n    if (arguments.length === 0) {\n      value = BoxShadow.none();\n    } else if (arguments.length === 1) {\n      value = arguments[0];\n    } else {\n      value = arguments;\n    }\n    if (value instanceof BoxShadow) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return BoxShadow.parse(value);\n    } else if (typeof value === \"object\" && value !== null && (value as any).length === void 0) {\n      value = value as BoxShadowInit;\n      const inset = value.inset || false;\n      const offsetX = value.offsetX !== void 0 ? Length.fromAny(value.offsetX) : Length.zero();\n      const offsetY = value.offsetY !== void 0 ? Length.fromAny(value.offsetY) : Length.zero();\n      const blurRadius = value.blurRadius !== void 0 ? Length.fromAny(value.blurRadius) : Length.zero();\n      const spreadRadius = value.spreadRadius !== void 0 ? Length.fromAny(value.spreadRadius) : Length.zero();\n      const color = value.color !== void 0 ? Color.fromAny(value.color) : Color.black();\n      return new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n    } else if (typeof value === \"object\" && value !== null && (value as any).length > 0) {\n      value = value as BoxShadowArray;\n      let boxShadow = BoxShadow.fromAny(value[0]);\n      for (let i = 1; i < value.length; i += 1) {\n        boxShadow = boxShadow.and(value[i]);\n      }\n      return boxShadow;\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): BoxShadow | undefined {\n    let boxShadow: BoxShadow | undefined;\n    value.forEach(function (item: Item, index: number) {\n      const header = item.header(\"boxShadow\");\n      if (header.isDefined()) {\n        let inset: boolean | undefined;\n        let offsetX: Length | undefined;\n        let offsetY: Length | undefined;\n        let blurRadius: Length | undefined;\n        let spreadRadius: Length | undefined;\n        let color: Color | undefined;\n        header.forEach(function (item: Item, index: number): void {\n          const key = item.key.stringValue();\n          if (key !== void 0) {\n            if (key === \"inset\") {\n              inset = item.toValue().booleanValue(inset);\n            } else if (key === \"offsetX\") {\n              offsetX = item.toValue().cast(Length.form(), offsetX);\n            } else if (key === \"offsetY\") {\n              offsetY = item.toValue().cast(Length.form(), offsetY);\n            } else if (key === \"blurRadius\") {\n              blurRadius = item.toValue().cast(Length.form(), blurRadius);\n            } else if (key === \"spreadRadius\") {\n              spreadRadius = item.toValue().cast(Length.form(), spreadRadius);\n            } else if (key === \"color\") {\n              color = item.toValue().cast(Color.form(), color);\n            }\n          } else if (item instanceof Value) {\n            if (index === 0 && item instanceof Text && item.value === \"inset\") {\n              inset = true;\n            } else if (index === 0 || index === 1 && inset !== void 0) {\n              offsetX = item.cast(Length.form(), offsetX);\n            } else if (index === 1 || index === 2 && inset !== void 0) {\n              offsetY = item.cast(Length.form(), offsetY);\n            } else if (index === 2 || index === 3 && inset !== void 0) {\n              blurRadius = item.cast(Length.form(), blurRadius);\n              if (blurRadius === void 0) {\n                color = item.cast(Color.form(), color);\n              }\n            } else if ((index === 3 || index === 4 && inset === void 0) && color === void 0) {\n              spreadRadius = item.cast(Length.form(), spreadRadius);\n              if (spreadRadius === void 0) {\n                color = item.cast(Color.form(), color);\n              }\n            } else if ((index === 4 || index === 5 && inset === void 0) && color === void 0) {\n              color = item.cast(Color.form(), color);\n            }\n          }\n        });\n        inset = inset !== void 0 ? inset : false;\n        offsetX = offsetX !== void 0 ? offsetX : Length.zero();\n        offsetY = offsetY !== void 0 ? offsetY : Length.zero();\n        blurRadius = blurRadius !== void 0 ? blurRadius : Length.zero();\n        spreadRadius = spreadRadius !== void 0 ? spreadRadius : Length.zero();\n        color = color !== void 0 ? color : Color.black();\n        const next = new BoxShadow(inset || false, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n        if (boxShadow !== void 0) {\n          boxShadow = boxShadow.and(next);\n        } else {\n          boxShadow = next;\n        }\n      }\n    });\n    return boxShadow;\n  }\n\n  static parse(string: string): BoxShadow {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = BoxShadow.Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is BoxShadowInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as BoxShadowInit;\n      return init.offsetX !== void 0 && init.offsetY !== void 0 && init.color !== void 0;\n    }\n    return false;\n  }\n\n  private static _form?: Form<BoxShadow, AnyBoxShadow>;\n  static form(unit?: BoxShadow): Form<BoxShadow, AnyBoxShadow> {\n    if (unit !== void 0) {\n      unit = BoxShadow.fromAny(unit);\n    }\n    if (unit !== BoxShadow.none()) {\n      return new BoxShadow.Form(unit);\n    } else {\n      if (BoxShadow._form === void 0) {\n        BoxShadow._form = new BoxShadow.Form(BoxShadow.none());\n      }\n      return BoxShadow._form;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Parser: typeof BoxShadowParser; // defined by BoxShadowParser\n  /** @hidden */\n  static Form: typeof BoxShadowForm; // defined by BoxShadowForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Length, LengthParser} from \"@swim/length\";\nimport {Color, ColorParser} from \"@swim/color\";\nimport {BoxShadow} from \"./BoxShadow\";\n\n/** @hidden */\nexport class BoxShadowParser extends Parser<BoxShadow> {\n  private readonly boxShadow: BoxShadow | undefined;\n  private readonly identOutput: Output<string> | undefined;\n  private readonly offsetXParser: Parser<Length> | undefined;\n  private readonly offsetYParser: Parser<Length> | undefined;\n  private readonly blurRadiusParser: Parser<Length> | undefined;\n  private readonly spreadRadiusParser: Parser<Length> | undefined;\n  private readonly colorParser: Parser<Color> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(boxShadow?: BoxShadow, identOutput?: Output<string>,\n              offsetXParser?: Parser<Length>, offsetYParser?: Parser<Length>,\n              blurRadiusParser?: Parser<Length>, spreadRadiusParser?: Parser<Length>,\n              colorParser?: Parser<Color>, step?: number) {\n    super();\n    this.boxShadow = boxShadow;\n    this.identOutput = identOutput;\n    this.offsetXParser = offsetXParser;\n    this.offsetYParser = offsetYParser;\n    this.blurRadiusParser = blurRadiusParser;\n    this.spreadRadiusParser = spreadRadiusParser;\n    this.colorParser = colorParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<BoxShadow> {\n    return BoxShadowParser.parse(input, this.boxShadow, this.identOutput, this.offsetXParser,\n                                 this.offsetYParser, this.blurRadiusParser, this.spreadRadiusParser,\n                                 this.colorParser, this.step);\n  }\n\n  static parse(input: Input, boxShadow?: BoxShadow, identOutput?: Output<string>,\n               offsetXParser?: Parser<Length>, offsetYParser?: Parser<Length>,\n               blurRadiusParser?: Parser<Length>, spreadRadiusParser?: Parser<Length>,\n               colorParser?: Parser<Color>, step: number = 1): Parser<BoxShadow> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont()) {\n          if (Unicode.isAlpha(c)) {\n            step = 2;\n          } else {\n            step = 4;\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 2) {\n        identOutput = identOutput || Unicode.stringOutput();\n        while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n          input = input.step();\n          identOutput.write(c);\n        }\n        if (!input.isEmpty()) {\n          const ident = identOutput.bind();\n          switch (ident) {\n            case \"inset\": step = 3; break;\n            case \"none\": return Parser.done(BoxShadow.none());\n            default: return Parser.error(Diagnostic.message(\"unknown box-shadow: \" + ident, input));\n          }\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 4;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 4) {\n        if (offsetXParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            offsetXParser = LengthParser.parse(input);\n          }\n        } else {\n          offsetXParser = offsetXParser.feed(input);\n        }\n        if (offsetXParser !== void 0) {\n          if (offsetXParser.isDone()) {\n            step = 5;\n          } else if (offsetXParser.isError()) {\n            return offsetXParser.asError();\n          }\n        }\n      }\n      if (step === 5) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 6;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 6) {\n        if (offsetYParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            offsetYParser = LengthParser.parse(input);\n          }\n        } else {\n          offsetYParser = offsetYParser.feed(input);\n        }\n        if (offsetYParser !== void 0) {\n          if (offsetYParser.isDone()) {\n            step = 7;\n          } else if (offsetYParser.isError()) {\n            return offsetYParser.asError();\n          }\n        }\n      }\n      if (step === 7) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 8;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 8) {\n        if (blurRadiusParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input.step();\n          }\n          if (input.isCont() && (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n            blurRadiusParser = LengthParser.parse(input);\n          } else if (!input.isEmpty()) {\n            step = 12;\n          }\n        } else {\n          blurRadiusParser = blurRadiusParser.feed(input);\n        }\n        if (blurRadiusParser !== void 0) {\n          if (blurRadiusParser.isDone()) {\n            step = 9;\n          } else if (blurRadiusParser.isError()) {\n            return blurRadiusParser.asError();\n          }\n        }\n      }\n      if (step === 9) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 10;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 10) {\n        if (spreadRadiusParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input.step();\n          }\n          if (input.isCont() && (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n            spreadRadiusParser = LengthParser.parse(input);\n          } else if (!input.isEmpty()) {\n            step = 12;\n          }\n        } else {\n          spreadRadiusParser = spreadRadiusParser.feed(input);\n        }\n        if (spreadRadiusParser !== void 0) {\n          if (spreadRadiusParser.isDone()) {\n            step = 11;\n          } else if (spreadRadiusParser.isError()) {\n            return spreadRadiusParser.asError();\n          }\n        }\n      }\n      if (step === 11) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 12;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 12) {\n        if (colorParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            colorParser = ColorParser.parse(input);\n          }\n        } else {\n          colorParser = colorParser.feed(input);\n        }\n        if (colorParser !== void 0) {\n          if (colorParser.isDone()) {\n            const inset = identOutput !== void 0 ? identOutput.bind() === \"inset\" : false;\n            const offsetX = offsetXParser!.bind();\n            const offsetY = offsetYParser!.bind();\n            const blurRadius = blurRadiusParser !== void 0 ? blurRadiusParser.bind() : Length.zero();\n            const spreadRadius = spreadRadiusParser !== void 0 ? spreadRadiusParser.bind() : Length.zero();\n            const color = colorParser!.bind();\n            const next = new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n            if (boxShadow === void 0) {\n              boxShadow = next;\n            } else {\n              boxShadow = boxShadow.and(next);\n            }\n            identOutput = void 0;\n            offsetXParser = void 0;\n            offsetYParser = void 0;\n            blurRadiusParser = void 0;\n            spreadRadiusParser = void 0;\n            colorParser = void 0;\n            step = 13;\n          } else if (colorParser.isError()) {\n            return colorParser.asError();\n          }\n        }\n      }\n      if (step === 13) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont() && c === 44/*','*/) {\n          input.step();\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.done(boxShadow!);\n        }\n      }\n      break;\n    } while (true);\n    return new BoxShadowParser(boxShadow, identOutput, offsetXParser, offsetYParser,\n                               blurRadiusParser, spreadRadiusParser, colorParser, step);\n  }\n}\nBoxShadow.Parser = BoxShadowParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Record, Form} from \"@swim/structure\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {AnyBoxShadow, BoxShadow} from \"./BoxShadow\";\n\n/** @hidden */\nexport class BoxShadowForm extends Form<BoxShadow, AnyBoxShadow> {\n  private readonly _unit: BoxShadow | undefined;\n\n  constructor(unit?: BoxShadow) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): BoxShadow | undefined;\n  unit(unit: BoxShadow | undefined): Form<BoxShadow, AnyBoxShadow>;\n  unit(unit?: BoxShadow): BoxShadow | undefined | Form<BoxShadow, AnyBoxShadow> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new BoxShadowForm(unit);\n    }\n  }\n\n  mold(boxShadow: AnyBoxShadow): Item {\n    let shadow = BoxShadow.fromAny(boxShadow) as BoxShadow;\n    const record = Record.create();\n    do {\n      const header = Record.create(5);\n      if (shadow.inset) {\n        header.push(\"inset\");\n      }\n      header.push(Length.form().mold(shadow.offsetX));\n      header.push(Length.form().mold(shadow.offsetY));\n      header.push(Length.form().mold(shadow.blurRadius));\n      header.push(Length.form().mold(shadow.spreadRadius));\n      header.push(Color.form().mold(shadow.color));\n      record.attr(\"boxShadow\", header);\n      if (shadow.next !== null) {\n        shadow = shadow.next;\n        continue;\n      }\n      break;\n    } while (true);\n    return record;\n  }\n\n  cast(item: Item): BoxShadow | undefined {\n    const value = item.toValue();\n    let boxShadow: BoxShadow | undefined;\n    try {\n      boxShadow = BoxShadow.fromValue(value);\n      if (boxShadow === void 0) {\n        const string = value.stringValue();\n        if (string !== void 0) {\n          boxShadow = BoxShadow.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return boxShadow;\n  }\n}\nBoxShadow.Form = BoxShadowForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Color} from \"@swim/color\";\nimport {Font} from \"@swim/font\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {View} from \"@swim/view\";\nimport {ViewStyleType, BaseLook, AccentLook, SurfaceLook, Theme} from \"./Theme\";\n\n/** @hidden */\nexport class DarkBase implements BaseLook {\n  font?: Font;\n  color?: Color;\n  backgroundColor?: Color;\n\n  constructor() {\n    this.font = Font.parse(\"14px sans-serif\");\n    this.color = Color.parse(\"#ffffff\");\n    this.backgroundColor = Color.parse(\"#1e2022\");\n  }\n}\n\n/** @hidden */\nexport class DarkPrimary implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#32c5ff\");\n    this.iconColor = Color.parse(\"#1e2022\");\n  }\n}\n\n/** @hidden */\nexport class DarkSecondary implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#44d7b6\");\n    this.iconColor = Color.parse(\"#1e2022\");\n  }\n}\n\n/** @hidden */\nexport class DarkDisabled implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#7b7c7d\");\n    this.iconColor = Color.parse(\"#ffffff\");\n  }\n}\n\n/** @hidden */\nexport class DarkFloating implements SurfaceLook {\n  shadow?: BoxShadow;\n  opacity?: number;\n\n  constructor() {\n    this.shadow = BoxShadow.of(0, 2, 4, 0, Color.black(0.5));\n  }\n}\n\nexport class DarkTheme implements Theme {\n  base: BaseLook;\n\n  primary: AccentLook;\n  secondary: AccentLook;\n  disabled: AccentLook;\n\n  floating: SurfaceLook;\n\n  constructor() {\n    this.base = new DarkBase();\n\n    this.primary = new DarkPrimary();\n    this.secondary = new DarkSecondary();\n    this.disabled = new DarkDisabled();\n\n    this.floating = new DarkFloating();\n  }\n\n  getStyle<V extends View>(view: V): ViewStyleType<V> | null {\n    return null;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Color} from \"@swim/color\";\nimport {Font} from \"@swim/font\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {View} from \"@swim/view\";\nimport {ViewStyleType, BaseLook, AccentLook, SurfaceLook, Theme} from \"./Theme\";\n\n/** @hidden */\nexport class LightBase implements BaseLook {\n  font?: Font;\n  color?: Color;\n  backgroundColor?: Color;\n\n  constructor() {\n    this.font = Font.parse(\"14px sans-serif\");\n    this.color = Color.parse(\"#4a4a4a\");\n    this.backgroundColor = Color.parse(\"#ffffff\");\n  }\n}\n\n/** @hidden */\nexport class LightPrimary implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#32c5ff\");\n    this.iconColor = Color.parse(\"#1e2022\");\n  }\n}\n\n/** @hidden */\nexport class LightSecondary implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#44d7b6\");\n    this.iconColor = Color.parse(\"#1e2022\");\n  }\n}\n\n/** @hidden */\nexport class LightDisabled implements AccentLook {\n  fillColor: Color;\n  iconColor: Color;\n\n  constructor() {\n    this.fillColor = Color.parse(\"#7b7c7d\");\n    this.iconColor = Color.parse(\"#ffffff\");\n  }\n}\n\n/** @hidden */\nexport class LightFloating implements SurfaceLook {\n  shadow?: BoxShadow;\n  opacity?: number;\n\n  constructor() {\n    this.shadow = BoxShadow.of(0, 2, 4, 0, Color.black(0.5));\n  }\n}\n\nexport class LightTheme implements Theme {\n  base: BaseLook;\n\n  primary: AccentLook;\n  secondary: AccentLook;\n  disabled: AccentLook;\n\n  floating: SurfaceLook;\n\n  constructor() {\n    this.base = new LightBase();\n\n    this.primary = new LightPrimary();\n    this.secondary = new LightSecondary();\n    this.disabled = new LightDisabled();\n\n    this.floating = new LightFloating();\n  }\n\n  getStyle<V extends View>(view: V): ViewStyleType<V> | null {\n    return null;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Color} from \"@swim/color\";\nimport {Font} from \"@swim/font\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {View} from \"@swim/view\";\nimport {DarkTheme} from \"./DarkTheme\";\nimport {LightTheme} from \"./LightTheme\";\n\nexport type ViewStyleType<V extends View> = V extends {readonly style: infer S} ? S : unknown;\n\nexport interface BaseLook {\n  readonly font?: Font;\n  readonly color?: Color;\n  readonly backgroundColor?: Color;\n}\n\nexport interface AccentLook {\n  readonly fillColor: Color;\n  readonly iconColor: Color;\n}\n\nexport interface SurfaceLook {\n  readonly shadow?: BoxShadow;\n  readonly opacity?: number;\n}\n\nexport interface Theme {\n  readonly base: BaseLook;\n\n  readonly primary: AccentLook;\n  readonly secondary: AccentLook;\n  readonly disabled: AccentLook;\n\n  readonly floating: SurfaceLook;\n\n  getStyle<V extends View>(view: V): ViewStyleType<V> | null;\n}\n\nexport interface ThemeClass {\n  dark: Theme;\n  light: Theme;\n}\n\nexport const Theme: ThemeClass = {} as ThemeClass;\n\nObject.defineProperty(Theme, \"dark\", {\n  get: function (): Theme {\n    // Lazily initialize theme.\n    const theme = new DarkTheme();\n    Object.defineProperty(Theme, \"dark\", {\n      value: theme,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n    return theme;\n  },\n  set: function (theme: Theme): void {\n    // Overwrite lazy property with writable property.\n    Object.defineProperty(Theme, \"dark\", {\n      value: theme,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n  },\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(Theme, \"light\", {\n  get: function (): Theme {\n    // Lazily initialize theme.\n    const theme = new LightTheme();\n    Object.defineProperty(Theme, \"light\", {\n      value: theme,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n    return theme;\n  },\n  set: function (theme: Theme): void {\n    // Overwrite lazy property with writable property.\n    Object.defineProperty(Theme, \"light\", {\n      value: theme,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n  },\n  enumerable: true,\n  configurable: true,\n});\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Color} from \"@swim/color\";\nimport {Ease, Tween, AnyTransition, Transition} from \"@swim/transition\";\nimport {ModalState, HtmlView, UiView} from \"@swim/view\";\n\nexport class ScrimView extends HtmlView {\n  /** @hidden */\n  _modalState: ModalState;\n  /** @hidden */\n  _transition: Transition<any>;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this._modalState = \"hidden\";\n    this._transition = Transition.duration(250, Ease.cubicOut);\n    this.onClick = this.onClick.bind(this);\n    this.onSyntheticClick = this.onSyntheticClick.bind(this);\n    if (typeof PointerEvent !== \"undefined\") {\n      this.on(\"pointerup\", this.onClick, {passive: true});\n      this.on(\"click\", this.onSyntheticClick);\n    } else if (typeof TouchEvent !== \"undefined\") {\n      this.onSyntheticClick = this.onSyntheticClick.bind(this);\n      this.on(\"touchend\", this.onClick, {passive: true});\n      this.on(\"click\", this.onSyntheticClick);\n    } else {\n      this.on(\"click\", this.onClick);\n    }\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"scrim\")\n        .display(\"none\")\n        .position(\"absolute\")\n        .top(0)\n        .right(0)\n        .bottom(0)\n        .left(0)\n        .pointerEvents(\"auto\")\n        .cursor(\"pointer\");\n    this.backgroundColor.setAutoState(Color.black(0));\n  }\n\n  get modalState(): ModalState {\n    return this._modalState;\n  }\n\n  isShown(): boolean {\n    return this._modalState === \"shown\" || this._modalState === \"showing\";\n  }\n\n  isHidden(): boolean {\n    return this._modalState === \"hidden\" || this._modalState === \"hiding\";\n  }\n\n  transition(): Transition<any>;\n  transition(transition: AnyTransition<any>): this;\n  transition(transition?: AnyTransition<any>): Transition<any> | this {\n    if (transition === void 0) {\n      return this._transition;\n    } else {\n      transition = Transition.fromAny(transition);\n      this._transition = transition;\n      return this;\n    }\n  }\n\n  show(opacity: number, tween?: Tween<any>): void {\n    if (this._modalState === \"hidden\" || this._modalState === \"hiding\") {\n      if (tween === void 0 || tween === true) {\n        tween = this._transition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willShow();\n      this.display(\"block\");\n      if (tween !== null) {\n        this.backgroundColor.setAutoState(Color.black(0));\n        this.backgroundColor.setAutoState(Color.black(opacity), tween.onEnd(this.didShow.bind(this)));\n      } else {\n        this.backgroundColor.setAutoState(Color.black(opacity));\n        this.didShow();\n      }\n    }\n  }\n\n  protected willShow(): void {\n    this._modalState = \"showing\";\n  }\n\n  protected didShow(): void {\n    this._modalState = \"shown\";\n  }\n\n  hide(tween?: Tween<any>): void {\n    if (this._modalState === \"shown\" || this._modalState === \"showing\") {\n      if (tween === void 0 || tween === true) {\n        tween = this._transition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willHide();\n      if (tween !== null) {\n        this.backgroundColor.setAutoState(Color.black(0), tween.onEnd(this.didHide.bind(this)));\n      } else {\n        this.backgroundColor.setAutoState(Color.black(0));\n        this.didHide();\n      }\n    }\n  }\n\n  protected willHide(): void {\n    this._modalState = \"hiding\";\n  }\n\n  protected didHide(): void {\n    this._modalState = \"hidden\";\n    this.display(\"none\");\n  }\n\n  protected onClick(event: Event): void {\n    const rootView = this.rootView;\n    if (rootView instanceof UiView) {\n      event.stopPropagation();\n      rootView.onFallthroughClick(event);\n    }\n  }\n\n  protected onSyntheticClick(event: Event): void {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {HtmlView} from \"@swim/view\";\n\nexport type IlluminationState = \"passivated\" | \"illuminated\" | \"stimulated\" | \"dissipated\";\n\nexport class IlluminationView extends HtmlView {\n  /** @hidden */\n  _illuminationState: IlluminationState;\n  /** @hidden */\n  _illuminationTimer: number;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this._illuminationState = \"passivated\";\n    this._illuminationTimer = 0;\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"illumination\")\n        .position(\"absolute\")\n        .width(Length.zero())\n        .height(Length.zero())\n        .borderRadius(Length.pct(50))\n        .backgroundColor(Color.white())\n        .pointerEvents(\"none\");\n  }\n\n  get illuminationState(): IlluminationState {\n    return this._illuminationState;\n  }\n\n  protected onUnmount(): void {\n    this._illuminationState = \"passivated\";\n    this.cancelIlluminate();\n    super.onUnmount();\n  }\n\n  illuminate(clientX: number, clientY: number, opacity: number,\n             transition: Transition<any> | null, delay: number = 0): void {\n    if (this._illuminationState === \"passivated\") {\n      this.cancelIlluminate();\n      if (delay !== 0) {\n        const illuminate = this.illuminate.bind(this, clientX, clientY, opacity, transition, 0);\n        this._illuminationTimer = setTimeout(illuminate, delay) as any;\n      } else {\n        this.willIlluminate();\n        const clientBounds = this._node.offsetParent!.getBoundingClientRect()\n        const cx = clientX - clientBounds.left;\n        const cy = clientY - clientBounds.top;\n        const rx = Math.max(cx, clientBounds.width - cx);\n        const ry = Math.max(cy, clientBounds.height - cy);\n        const r = Math.sqrt(rx * rx + ry * ry);\n        this.opacity(opacity);\n        if (transition !== null) {\n          this.left(cx)\n              .top(cy)\n              .left(cx - r, transition.onEnd(this.didIlluminate.bind(this)))\n              .top(cy - r, transition)\n              .width(2 * r, transition)\n              .height(2 * r, transition);\n        } else {\n          this.left(cx - r)\n              .top(cy - r)\n              .width(2 * r)\n              .height(2 * r);\n          this.didIlluminate();\n        }\n        this._illuminationState = \"illuminated\";\n      }\n    }\n  }\n\n  protected willIlluminate(): void {\n    // hook\n  }\n\n  protected didIlluminate(): void {\n    // hook\n  }\n\n  cancelIlluminate(): void {\n    if (this._illuminationTimer !== 0) {\n      clearTimeout(this._illuminationTimer);\n      this._illuminationTimer = 0;\n    }\n  }\n\n  stimulate(clientX: number, clientY: number, opacity: number, transition: Transition<any> | null): void {\n    if (this._illuminationState === \"passivated\") {\n      this.illuminate(clientX, clientY, opacity, transition);\n    }\n    if (this._illuminationState === \"illuminated\") {\n      this.willStimulate();\n      if (transition !== null) {\n        this.opacity(0, transition.onEnd(this.didStimulate.bind(this)));\n      } else {\n        this.opacity(0);\n        this.didStimulate();\n      }\n      this._illuminationState = \"stimulated\";\n    }\n  }\n\n  protected willStimulate(): void {\n    // hook\n  }\n\n  protected didStimulate(): void {\n    this.remove();\n  }\n\n  dissipate(clientX: number, clientY: number, transition: Transition<any> | null): void {\n    if (this._illuminationState === \"passivated\") {\n      this.cancelIlluminate();\n      this.didDissipate()\n    } else if (this._illuminationState === \"illuminated\") {\n      this.willDissipate();\n      if (transition !== null) {\n        this.opacity(0, transition.onEnd(this.didDissipate.bind(this)));\n      } else {\n        this.opacity(0);\n        this.didDissipate();\n      }\n    }\n    this._illuminationState = \"dissipated\";\n  }\n\n  protected willDissipate(): void {\n    // hook\n  }\n\n  protected didDissipate(): void {\n    this.remove();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Ease, Transition} from \"@swim/transition\";\nimport {GestureViewTrack, GestureView, GestureViewController} from \"@swim/gesture\";\nimport {IlluminationView} from \"./IlluminationView\";\n\nexport class TactileView extends GestureView {\n  constructor(node: HTMLElement) {\n    super(node);\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"tactile\");\n  }\n\n  get viewController(): GestureViewController<TactileView> | null {\n    return this._viewController;\n  }\n\n  get tactileTransition(): Transition<any> | null {\n    return Transition.duration<any>(250, Ease.cubicOut);\n  }\n\n  protected onBeginTrack(track: GestureViewTrack, event: Event | null): void {\n    if (track.view === void 0) {\n      const delay = track.pointerType === \"mouse\" ? 0 : 100;\n      const illumination = this.prepend(IlluminationView);\n      illumination.illuminate(track.x, track.y, 0.1, this.tactileTransition, delay);\n      track.view = illumination;\n    }\n  }\n\n  protected onMoveTrack(track: GestureViewTrack, event: Event | null): void {\n    super.onMoveTrack(track, event);\n    if (!this.clientBounds.contains(track.x, track.y)) {\n      track.preventDefault();\n      this.beginHover(track.id, track.pointerType, event);\n      if (track.view instanceof IlluminationView) {\n        track.view.dissipate(track.x, track.y, this.tactileTransition);\n      }\n    }\n  }\n\n  protected onEndTrack(track: GestureViewTrack, event: Event | null): void {\n    if (track.view instanceof IlluminationView) {\n      if (this.clientBounds.contains(track.x, track.y)) {\n        track.view.stimulate(track.x, track.y, 0.1, this.tactileTransition);\n      } else {\n        track.view.dissipate(track.x, track.y, this.tactileTransition);\n      }\n    }\n  }\n\n  protected onCancelTrack(track: GestureViewTrack, event: Event | null): void {\n    if (track.view instanceof IlluminationView) {\n      track.view.dissipate(track.x, track.y, this.tactileTransition);\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {BoxR2} from \"@swim/math\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {Ease, Tween, AnyTransition, Transition} from \"@swim/transition\";\nimport {\n  ViewContext,\n  ViewFlags,\n  View,\n  ModalState,\n  Modal,\n  MemberAnimator,\n  RenderedViewObserver,\n  HtmlView,\n  HtmlViewObserver,\n} from \"@swim/view\";\nimport {PopoverViewObserver} from \"./PopoverViewObserver\";\nimport {PopoverViewController} from \"./PopoverViewController\";\n\nexport type PopoverPlacement = \"none\" | \"above\" | \"below\" | \"over\" | \"top\" | \"bottom\" | \"right\" | \"left\";\n\nexport class PopoverView extends HtmlView implements Modal, HtmlViewObserver, RenderedViewObserver {\n  /** @hidden */\n  _source: View | null;\n  /** @hidden */\n  _sourceFrame: BoxR2 | null;\n  /** @hidden */\n  _modalState: ModalState;\n  /** @hidden */\n  readonly _placement: PopoverPlacement[];\n  /** @hidden */\n  _placementFrame: BoxR2 | null;\n  /** @hidden */\n  _popoverTransition: Transition<any> | null;\n\n  constructor(node: HTMLElement = document.createElement(\"div\")) {\n    super(node);\n    this.arrowWidth.setState(Length.fromAny(10));\n    this.arrowHeight.setState(Length.fromAny(8));\n    this._source = null;\n    this._sourceFrame = null;\n    this._modalState = \"shown\";\n    this._placement = [\"top\", \"bottom\", \"right\", \"left\"];\n    this._placementFrame = null;\n    this._popoverTransition = Transition.duration(250, Ease.cubicOut);\n\n    const arrow = this.createArrow();\n    if (arrow !== null) {\n      const arrowView = View.fromNode(arrow);\n      this.prependChildView(arrowView, \"arrow\");\n    }\n  }\n\n  protected createArrow(): HTMLElement | null {\n    const arrow = document.createElement(\"div\");\n    arrow.setAttribute(\"class\", \"popover-arrow\");\n    arrow.style.setProperty(\"display\", \"none\");\n    arrow.style.setProperty(\"position\", \"absolute\");\n    arrow.style.setProperty(\"width\", \"0\");\n    arrow.style.setProperty(\"height\", \"0\");\n    return arrow;\n  }\n\n  get viewController(): PopoverViewController | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Length)\n  arrowWidth: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length)\n  arrowHeight: MemberAnimator<this, Length, AnyLength>;\n\n  get source(): View | null {\n    return this._source;\n  }\n\n  setSource(source: View | null): void {\n    if (this._source !== source) {\n      this.willSetSource(source);\n      if (this._source !== null && this.isMounted()) {\n        this._source.removeViewObserver(this);\n      }\n      this._source = source;\n      this.onSetSource(source);\n      if (this._source !== null && this.isMounted()) {\n        this._source.addViewObserver(this);\n      }\n      this.didSetSource(source);\n    }\n  }\n\n  protected willSetSource(source: View | null): void {\n    this.willObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverWillSetSource !== void 0) {\n        viewObserver.popoverWillSetSource(source, this);\n      }\n    });\n  }\n\n  protected onSetSource(source: View | null): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didSetSource(source: View | null): void {\n    this.didObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverDidSetSource !== void 0) {\n        viewObserver.popoverDidSetSource(source, this);\n      }\n    });\n  }\n\n  get modalState(): ModalState {\n    return this._modalState;\n  }\n\n  get modalView(): View | null {\n    return this;\n  }\n\n  toggleModal(tween?: Tween<any>): void {\n    if (this._modalState === \"hidden\" || this._modalState === \"hiding\") {\n      this.showModal(tween);\n    } else if (this._modalState === \"shown\" || this._modalState === \"showing\") {\n      this.hideModal(tween);\n    }\n  }\n\n  showModal(tween?: Tween<any>): void {\n    if (this._modalState === \"hidden\" || this._modalState === \"hiding\") {\n      if (tween === void 0 || tween === true) {\n        tween = this._popoverTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willShow();\n      const placement = this.place();\n      if (tween !== null) {\n        tween = tween.onEnd(this.didShow.bind(this));\n        if (placement === \"above\") {\n          this.opacity.setState(void 0);\n          if (this.marginTop.value === void 0) {\n            this.marginTop(-this._node.clientHeight);\n          }\n          this.marginTop(0, tween);\n        } else if (placement === \"below\") {\n          this.opacity.setState(void 0);\n          if (this.marginTop.value === void 0) {\n            this.marginTop(this._node.clientHeight);\n          }\n          this.marginTop(0, tween);\n        } else {\n          this.marginTop.setState(void 0);\n          if (this.opacity.value === void 0) {\n            this.opacity(0);\n          }\n          this.opacity(1, tween);\n        }\n      } else {\n        this.didShow();\n      }\n    }\n  }\n\n  protected willShow(): void {\n    this.willObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverWillShow !== void 0) {\n        viewObserver.popoverWillShow(this);\n      }\n    });\n    this.visibility(\"visible\");\n    this._modalState = \"showing\";\n  }\n\n  protected didShow(): void {\n    this._modalState = \"shown\";\n    this.pointerEvents(\"auto\");\n    this.marginTop.setState(void 0);\n    this.opacity.setState(void 0);\n    this.didObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverDidShow !== void 0) {\n        viewObserver.popoverDidShow(this);\n      }\n    });\n  }\n\n  hideModal(tween?: Tween<any>): void {\n    if (this._modalState === \"shown\" || this._modalState === \"showing\") {\n      if (tween === void 0 || tween === true) {\n        tween = this._popoverTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willHide();\n      const placement = this.place();\n      if (tween !== null) {\n        tween = tween.onEnd(this.didHide.bind(this));\n        if (placement === \"above\") {\n          this.opacity.setState(void 0);\n          if (this.marginTop.value === void 0) {\n            this.marginTop(0);\n          }\n          this.marginTop(-this._node.clientHeight, tween);\n        } else if (placement === \"below\") {\n          this.opacity.setState(void 0);\n          if (this.marginTop.value === void 0) {\n            this.marginTop(0);\n          }\n          this.marginTop(this._node.clientHeight, tween);\n        } else {\n          this.marginTop.setState(void 0);\n          if (this.opacity.value === void 0) {\n            this.opacity(1);\n          }\n          this.opacity(0, tween);\n        }\n      } else {\n        this.didHide();\n      }\n    }\n  }\n\n  protected willHide(): void {\n    this.willObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverWillHide !== void 0) {\n        viewObserver.popoverWillHide(this);\n      }\n    });\n    this.pointerEvents(\"none\");\n    this._modalState = \"hiding\";\n  }\n\n  protected didHide(): void {\n    this._modalState = \"hidden\";\n    this.visibility(\"hidden\");\n    this.marginTop.setState(void 0);\n    this.opacity.setState(void 0);\n    this.didObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverDidHide !== void 0) {\n        viewObserver.popoverDidHide(this);\n      }\n    });\n  }\n\n  placement(): ReadonlyArray<PopoverPlacement>;\n  placement(placement: ReadonlyArray<PopoverPlacement>): this;\n  placement(placement?: ReadonlyArray<PopoverPlacement>): ReadonlyArray<PopoverPlacement> | this {\n    if (placement === void 0) {\n      return this._placement;\n    } else {\n      if (!Objects.equalArray(this._placement, placement)) {\n        this._placement.length = 0;\n        for (let i = 0, n = placement.length; i < n; i += 1) {\n          this._placement.push(placement[i]);\n        }\n        this.place();\n      }\n      return this;\n    }\n  }\n\n  placementFrame(): BoxR2 | null;\n  placementFrame(placementFrame: BoxR2 | null): this;\n  placementFrame(placementFrame?: BoxR2 | null): BoxR2 | null | this {\n    if (placementFrame === void 0) {\n      return this._placementFrame;\n    } else {\n      if (!Objects.equal(this._placementFrame, placementFrame)) {\n        this._placementFrame = placementFrame;\n        this.place();\n      }\n      return this;\n    }\n  }\n\n  popoverTransition(): Transition<any> | null;\n  popoverTransition(popoverTransition: AnyTransition<any> | null): this;\n  popoverTransition(popoverTransition?: AnyTransition<any> | null): Transition<any> | null | this {\n    if (popoverTransition === void 0) {\n      return this._popoverTransition;\n    } else {\n      if (popoverTransition !== null) {\n        popoverTransition = Transition.fromAny(popoverTransition);\n      }\n      return this;\n    }\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & (View.NeedsScroll | View.NeedsAnimate)) !== 0) {\n      additionalFlags |= View.NeedsLayout;\n    }\n    additionalFlags |= super.modifyUpdate(updateFlags | additionalFlags);\n    return additionalFlags;\n  }\n\n  protected didMount(): void {\n    if (this._source !== null) {\n      this._source.addViewObserver(this);\n    }\n    super.didMount();\n  }\n\n  protected willUnmount(): void {\n    super.willUnmount();\n    if (this._source !== null) {\n      this._source.removeViewObserver(this);\n    }\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    super.onLayout(viewContext);\n    this.place();\n  }\n\n  place(): PopoverPlacement {\n    const source = this._source;\n    const oldSourceFrame = this._sourceFrame;\n    const newSourceFrame = source !== null ? source.popoverFrame : null;\n    if (newSourceFrame !== null && this._placement.length !== 0 && !newSourceFrame.equals(oldSourceFrame)) {\n      const placement = this.placePopover(source!, newSourceFrame);\n      const arrow = this.getChildView(\"arrow\");\n      if (arrow instanceof HtmlView) {\n        this.placeArrow(source!, newSourceFrame, arrow, placement);\n      }\n      return placement;\n    } else {\n      return \"none\";\n    }\n  }\n\n  /** @hidden */\n  protected placePopover(source: View, sourceFrame: BoxR2): PopoverPlacement {\n    const node = this._node;\n    const parent = node.offsetParent;\n    if (parent === null) {\n      return \"none\";\n    }\n    const popoverWidth = node.clientWidth;\n    const popoverHeight = node.clientHeight;\n\n    // offsetParent bounds in client coordinates\n    const parentBounds = parent.getBoundingClientRect();\n    const parentLeft = parentBounds.left;\n    const parentTop = parentBounds.top;\n\n    // source bounds in offsetParent coordinates (transformed from page coordinates)\n    const sourceLeft = sourceFrame.left - window.pageXOffset - parentLeft;\n    const sourceRight = sourceFrame.right - window.pageXOffset - parentLeft;\n    const sourceTop = sourceFrame.top - window.pageYOffset - parentTop;\n    const sourceBottom = sourceFrame.bottom - window.pageYOffset - parentTop;\n    const sourceWidth = sourceFrame.width;\n    const sourceHeight = sourceFrame.height;\n    const sourceX = sourceLeft + sourceWidth/2;\n    const sourceY = sourceTop + sourceHeight/2;\n\n    // placement frame in offsetParent coordinates (transformed from client coordinates)\n    const placementFrame = this._placementFrame;\n    const placementLeft = (placementFrame !== null ? placementFrame.left : 0);\n    const placementRight = (placementFrame !== null ? placementFrame.right : window.innerWidth) - parentLeft;\n    const placementTop = (placementFrame !== null ? placementFrame.top : 0);\n    const placementBottom = (placementFrame !== null ? placementFrame.bottom : window.innerHeight) - parentTop;\n\n    // source bound margins relative to placement bounds\n    const marginLeft = sourceLeft - placementLeft - window.pageXOffset;\n    const marginRight = placementRight - sourceLeft - sourceWidth;\n    const marginTop = sourceTop - placementTop - window.pageYOffset;\n    const marginBottom = placementBottom - sourceTop - sourceHeight;\n\n    const arrowHeight = this.arrowHeight.value!.pxValue();\n\n    let placement: PopoverPlacement | undefined;\n    for (let i = 0; i < this._placement.length; i += 1) { // first fit\n      const p = this._placement[i];\n      if (p === \"above\" || p === \"below\" || p === \"over\") {\n        placement = p;\n        break;\n      } else if (p === \"top\" && popoverHeight + arrowHeight <= marginTop) {\n        placement = p;\n        break;\n      } else if (p === \"bottom\" && popoverHeight + arrowHeight <= marginBottom) {\n        placement = p;\n        break;\n      } else if (p === \"left\" && popoverWidth + arrowHeight <= marginLeft) {\n        placement = p;\n        break;\n      } else if (p === \"right\" && popoverWidth + arrowHeight <= marginRight) {\n        placement = p;\n        break;\n      }\n    }\n    if (placement === void 0) {\n      placement = \"none\";\n      for (let i = 0, n = this._placement.length; i < n; i += 1) { // best fit\n        const p = this._placement[i];\n        if (p === \"top\" && marginTop >= marginBottom) {\n          placement = p;\n          break;\n        } else if (p === \"bottom\" && marginBottom >= marginTop) {\n          placement = p;\n          break;\n        } else if (p === \"left\" && marginLeft >= marginRight) {\n          placement = p;\n          break;\n        } else if (p === \"right\" && marginRight >= marginLeft) {\n          placement = p;\n          break;\n        }\n      }\n    }\n\n    const maxWidthStyle = node.style.getPropertyValue(\"max-width\");\n    const maxHeightStyle = node.style.getPropertyValue(\"max-height\");\n    const oldMaxWidth = maxWidthStyle ? Length.fromAny(maxWidthStyle).pxValue() : 0;\n    const oldMaxHeight = maxHeightStyle ? Length.fromAny(maxHeightStyle).pxValue() : 0;\n    let maxWidth = oldMaxWidth;\n    let maxHeight = oldMaxHeight;\n    let left = node.offsetLeft;\n    let top = node.offsetTop;\n    let right: number | undefined;\n    let bottom: number | undefined;\n    if (placement === \"above\") {\n      left = placementLeft;\n      top = placementTop;\n      right = (placementFrame !== null ? placementFrame.width : window.innerWidth) - placementRight;\n      maxWidth = Math.max(0, placementRight - placementLeft);\n      maxHeight = Math.max(0, placementBottom - placementTop);\n    } else if (placement === \"below\") {\n      left = placementLeft;\n      top = placementBottom - popoverHeight;\n      right = placementRight - (placementFrame !== null ? placementFrame.width : window.innerWidth);\n      maxWidth = Math.max(0, placementRight - placementLeft);\n      maxHeight = Math.max(0, placementBottom - placementTop);\n    } else if (placement === \"over\") {\n      left = placementLeft;\n      top = placementTop;\n      right = placementRight - (placementFrame !== null ? placementFrame.width : window.innerWidth);\n      bottom = placementBottom - (placementFrame !== null ? placementFrame.height : window.innerHeight);\n      maxWidth = Math.max(0, placementRight - placementLeft);\n      maxHeight = Math.max(0, placementBottom - placementTop);\n    } else if (placement === \"top\") {\n      if (sourceX - popoverWidth/2 <= placementLeft) {\n        left = placementLeft;\n      } else if (sourceX + popoverWidth/2 >= placementRight) {\n        left = placementRight - popoverWidth;\n      } else {\n        left = sourceX - popoverWidth/2;\n      }\n      top = Math.max(placementTop, sourceTop - (popoverHeight + arrowHeight));\n      maxWidth = Math.max(0, placementRight - placementLeft);\n      maxHeight = Math.max(0, sourceBottom - placementTop);\n    } else if (placement === \"bottom\") {\n      if (sourceX - popoverWidth/2 <= placementLeft) {\n        left = placementLeft;\n      } else if (sourceX + popoverWidth/2 >= placementRight) {\n        left = placementRight - popoverWidth;\n      } else {\n        left = sourceX - popoverWidth/2;\n      }\n      top = Math.max(placementTop, sourceBottom + arrowHeight);\n      maxWidth = Math.max(0, placementRight - placementLeft);\n      maxHeight = Math.max(0, placementBottom - sourceTop);\n    } else if (placement === \"left\") {\n      left = Math.max(placementLeft, sourceLeft - (popoverWidth + arrowHeight));\n      if (sourceY - popoverHeight/2 <= placementTop) {\n        top = placementTop;\n      } else if (sourceY + popoverHeight/2 >= placementBottom) {\n        top = placementBottom - popoverHeight;\n      } else {\n        top = sourceY - popoverHeight/2;\n      }\n      maxWidth = Math.max(0, sourceRight - placementLeft);\n      maxHeight = Math.max(0, placementBottom - placementTop);\n    } else if (placement === \"right\") {\n      left = Math.max(placementLeft, sourceRight + arrowHeight);\n      if (sourceY - popoverHeight/2 <= placementTop) {\n        top = placementTop;\n      } else if (sourceY + popoverHeight/2 >= placementBottom) {\n        top = placementBottom - popoverHeight;\n      } else {\n        top = sourceY - popoverHeight/2;\n      }\n      maxWidth = Math.max(0, placementRight - sourceLeft);\n      maxHeight = Math.max(0, placementBottom - placementTop);\n    }\n\n    if (placement !== \"none\" && (left !== node.offsetLeft || top !== node.offsetTop\n                             ||  maxWidth !== oldMaxWidth || maxHeight !== oldMaxHeight)) {\n      this.willPlacePopover(placement!);\n      node.style.setProperty(\"position\", \"absolute\");\n      node.style.setProperty(\"left\", left + \"px\");\n      if (right !== void 0) {\n        node.style.setProperty(\"right\", right + \"px\");\n      } else {\n        node.style.removeProperty(\"right\");\n      }\n      node.style.setProperty(\"top\", top + \"px\");\n      if (bottom !== void 0) {\n        node.style.setProperty(\"bottom\", bottom + \"px\");\n      } else {\n        node.style.removeProperty(\"bottom\");\n      }\n      node.style.setProperty(\"max-width\", maxWidth + \"px\");\n      node.style.setProperty(\"max-height\", maxHeight + \"px\");\n      this.onPlacePopover(placement!);\n      this.didPlacePopover(placement!);\n    }\n\n    return placement;\n  }\n\n  protected willPlacePopover(placement: PopoverPlacement): void {\n    this.willObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverWillPlace !== void 0) {\n        viewObserver.popoverWillPlace(placement, this);\n      }\n    });\n  }\n\n  protected onPlacePopover(placement: PopoverPlacement): void {\n    // hook\n  }\n\n  protected didPlacePopover(placement: PopoverPlacement): void {\n    this.didObserve(function (viewObserver: PopoverViewObserver): void {\n      if (viewObserver.popoverDidPlace !== void 0) {\n        viewObserver.popoverDidPlace(placement, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected placeArrow(source: View, sourceFrame: BoxR2, arrow: HtmlView,\n                       placement: PopoverPlacement): void {\n    const node = this._node;\n    const parent = node.offsetParent;\n    if (parent === null) {\n      return;\n    }\n    const arrowNode = arrow._node;\n\n    // offsetParent bounds in client coordinates\n    const parentBounds = parent.getBoundingClientRect();\n    const parentLeft = parentBounds.left;\n    const parentTop = parentBounds.top;\n\n    // source bounds in offsetParent coordinates (transformed from page coordinates)\n    const sourceLeft = sourceFrame.left - window.pageXOffset - parentLeft;\n    const sourceTop = sourceFrame.top - window.pageYOffset - parentTop;\n    const sourceWidth = sourceFrame.width;\n    const sourceHeight = sourceFrame.height;\n    const sourceX = sourceLeft + sourceWidth/2;\n    const sourceY = sourceTop + sourceHeight/2;\n\n    const offsetLeft = node.offsetLeft;\n    const offsetRight = offsetLeft + node.clientWidth;\n    const offsetTop = node.offsetTop;\n    const offsetBottom = offsetTop + node.clientHeight;\n\n    const backgroundColor = this.backgroundColor() || Color.transparent();\n    const borderRadius = this.borderRadius();\n    const radius = borderRadius instanceof Length ? borderRadius.pxValue() : 0;\n\n    const arrowWidth = this.arrowWidth.value!.pxValue();\n    const arrowHeight = this.arrowHeight.value!.pxValue();\n\n    const arrowXMin = offsetLeft + radius + arrowWidth/2;\n    const arrowXMax = offsetRight - radius - arrowWidth/2;\n    const arrowYMin = offsetTop + radius + arrowWidth/2;\n    const arrowYMax = offsetBottom - radius - arrowWidth/2;\n\n    arrowNode.style.removeProperty(\"top\");\n    arrowNode.style.removeProperty(\"right\");\n    arrowNode.style.removeProperty(\"bottom\");\n    arrowNode.style.removeProperty(\"left\");\n    arrowNode.style.removeProperty(\"border-left-width\");\n    arrowNode.style.removeProperty(\"border-left-style\");\n    arrowNode.style.removeProperty(\"border-left-color\");\n    arrowNode.style.removeProperty(\"border-right-width\");\n    arrowNode.style.removeProperty(\"border-right-style\");\n    arrowNode.style.removeProperty(\"border-right-color\");\n    arrowNode.style.removeProperty(\"border-top-width\");\n    arrowNode.style.removeProperty(\"border-top-style\");\n    arrowNode.style.removeProperty(\"border-top-color\");\n    arrowNode.style.removeProperty(\"border-bottom-width\");\n    arrowNode.style.removeProperty(\"border-bottom-style\");\n    arrowNode.style.removeProperty(\"border-bottom-color\");\n\n    if (placement === \"none\" || placement === \"above\" || placement === \"below\" || placement === \"over\") {\n      // hide arrow\n      arrowNode.style.setProperty(\"display\", \"none\");\n    } else if (offsetTop - arrowHeight >= sourceY // arrow tip below source center\n        && arrowXMin <= sourceX && sourceX <= arrowXMax) { // arrow base on top popover edge\n      // top arrow\n      arrowNode.style.setProperty(\"display\", \"block\");\n      arrowNode.style.setProperty(\"top\", (-arrowHeight) + \"px\");\n      arrowNode.style.setProperty(\"left\", (sourceX - offsetLeft - arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-left-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-left-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-left-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-right-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-right-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-right-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-bottom-width\", arrowHeight + \"px\");\n      arrowNode.style.setProperty(\"border-bottom-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-bottom-color\", backgroundColor.toString());\n    } else if (offsetBottom + arrowHeight <= sourceY // arrow tip above source center\n        && arrowXMin <= sourceX && sourceX <= arrowXMax) { // arrow base on bottom popover edge\n      // bottom arrow\n      arrowNode.style.setProperty(\"display\", \"block\");\n      arrowNode.style.setProperty(\"bottom\", (-arrowHeight) + \"px\");\n      arrowNode.style.setProperty(\"left\", (sourceX - offsetLeft - arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-left-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-left-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-left-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-right-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-right-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-right-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-top-width\", arrowHeight + \"px\");\n      arrowNode.style.setProperty(\"border-top-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-top-color\", backgroundColor.toString());\n    } else if (offsetLeft - arrowHeight >= sourceX // arrow tip right of source center\n        && arrowYMin <= sourceY && sourceY <= arrowYMax) { // arrow base on left popover edge\n      // left arrow\n      arrowNode.style.setProperty(\"display\", \"block\");\n      arrowNode.style.setProperty(\"left\", (-arrowHeight) + \"px\");\n      arrowNode.style.setProperty(\"top\", (sourceY - offsetTop - arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-top-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-top-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-top-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-bottom-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-bottom-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-bottom-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-right-width\", arrowHeight + \"px\");\n      arrowNode.style.setProperty(\"border-right-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-right-color\", backgroundColor.toString());\n    } else if (offsetRight + arrowHeight <= sourceX // arrow tip left of source center\n        && arrowYMin <= sourceY && sourceY <= arrowYMax) { // arrow base on right popover edge\n      // right arrow\n      arrowNode.style.setProperty(\"display\", \"block\");\n      arrowNode.style.setProperty(\"right\", (-arrowHeight) + \"px\");\n      arrowNode.style.setProperty(\"top\", (sourceY - offsetTop - arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-top-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-top-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-top-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-bottom-width\", (arrowWidth/2) + \"px\");\n      arrowNode.style.setProperty(\"border-bottom-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-bottom-color\", \"transparent\");\n      arrowNode.style.setProperty(\"border-left-width\", arrowHeight + \"px\");\n      arrowNode.style.setProperty(\"border-left-style\", \"solid\");\n      arrowNode.style.setProperty(\"border-left-color\", backgroundColor.toString());\n    } else {\n      // no arrow\n      arrowNode.style.setProperty(\"display\", \"none\");\n    }\n  }\n\n  viewDidMount(view: View): void {\n    this.place();\n  }\n\n  viewDidPower(view: View): void {\n    this.place();\n  }\n\n  viewDidScroll(viewContext: ViewContext, view: View): void {\n    this.place();\n  }\n\n  viewDidLayout(viewContext: ViewContext, view: View): void {\n    this.place();\n  }\n\n  viewDidSetAttribute(name: string, value: unknown, view: HtmlView): void {\n    this.place();\n  }\n\n  viewDidSetStyle(name: string, value: unknown, priority: string | undefined, view: HtmlView): void {\n    this.place();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View, HtmlViewController} from \"@swim/view\";\nimport {PopoverPlacement, PopoverView} from \"./PopoverView\";\nimport {PopoverViewObserver} from \"./PopoverViewObserver\";\n\nexport class PopoverViewController<V extends PopoverView = PopoverView> extends HtmlViewController<V> implements PopoverViewObserver<V> {\n  get source(): View | null {\n    const view = this._view;\n    return view !== null ? view.source : null;\n  }\n\n  popoverWillSetSource(source: View | null, view: V): void {\n    // hook\n  }\n\n  popoverDidSetSource(source: View | null, view: V): void {\n    // hook\n  }\n\n  popoverWillPlace(placement: PopoverPlacement, view: V): void {\n    // hook\n  }\n\n  popoverDidPlace(placement: PopoverPlacement, view: V): void {\n    // hook\n  }\n\n  popoverWillShow(view: V): void {\n    // hook\n  }\n\n  popoverDidShow(view: V): void {\n    // hook\n  }\n\n  popoverWillHide(view: V): void {\n    // hook\n  }\n\n  popoverDidHide(view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {Ease, Tween, Transition} from \"@swim/transition\";\nimport {\n  ViewScope,\n  ViewEdgeInsets,\n  ViewContext,\n  View,\n  ModalState,\n  Modal,\n  MemberAnimator,\n  HtmlView,\n} from \"@swim/view\";\nimport {DrawerViewObserver} from \"./DrawerViewObserver\";\nimport {DrawerViewController} from \"./DrawerViewController\";\n\nexport type DrawerPlacement = \"top\" | \"right\" | \"bottom\" | \"left\";\n\nexport type DrawerState = \"shown\" | \"showing\"\n                        | \"hidden\" | \"hiding\"\n                        | \"collapsed\" | \"collapsing\";\n\nexport class DrawerView extends HtmlView implements Modal {\n  /** @hidden */\n  _drawerPlacement: DrawerPlacement;\n  /** @hidden */\n  _drawerState: DrawerState;\n  /** @hidden */\n  _drawerTransition: Transition<any>;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this.collapsedWidth.setAutoState(Length.px(60));\n    this.expandedWidth.setAutoState(Length.px(200));\n    this.drawerSlide.setState(0);\n    this.drawerSlide.update = this.updateDrawerSlide.bind(this);\n    this.drawerStretch.setState(1);\n    this.drawerStretch.update = this.updateDrawerStretch.bind(this);\n    this._drawerPlacement = \"left\";\n    this._drawerState = \"hidden\";\n    this._drawerTransition = Transition.duration(250, Ease.cubicOut);\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"drawer\")\n        .display(\"none\")\n        .flexDirection(\"column\")\n        .overflowX(\"hidden\")\n        .overflowY(\"auto\")\n        .overscrollBehaviorY(\"contain\")\n        .webkitOverflowScrolling(\"touch\")\n        .backgroundColor(\"#26282a\");\n  }\n\n  get viewController(): DrawerViewController | null {\n    return this._viewController;\n  }\n\n  get drawerState(): DrawerState {\n    return this._drawerState;\n  }\n\n  isShown(): boolean {\n    return this._drawerState === \"shown\" || this._drawerState === \"showing\";\n  }\n\n  isHidden(): boolean {\n    return this._drawerState === \"hidden\" || this._drawerState === \"hiding\";\n  }\n\n  isCollapsed(): boolean {\n    return this._drawerState === \"collapsed\" || this._drawerState === \"collapsing\";\n  }\n\n  @MemberAnimator(Length)\n  collapsedWidth: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length)\n  expandedWidth: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Number)\n  drawerSlide: MemberAnimator<this, number>; // 0 = hidden; 1 = shown\n\n  @MemberAnimator(Number)\n  drawerStretch: MemberAnimator<this, number>; // 0 = collapsed; 1 = expanded\n\n  drawerPlacement(): DrawerPlacement;\n  drawerPlacement(drawerPlacement: DrawerPlacement): this;\n  drawerPlacement(newPlacement?: DrawerPlacement): DrawerPlacement | this {\n    const oldPlacement = this._drawerPlacement;\n    if (newPlacement === void 0) {\n      return oldPlacement;\n    } else {\n      if (oldPlacement !== newPlacement) {\n        this.willSetDrawerPlacement(newPlacement, oldPlacement);\n        this._drawerPlacement = newPlacement;\n        this.onSetDrawerPlacement(newPlacement, oldPlacement);\n        this.didSetDrawerPlacement(newPlacement, oldPlacement);\n      }\n      return this;\n    }\n  }\n\n  isHorizontal(): boolean {\n    return this._drawerPlacement === \"top\" || this._drawerPlacement === \"bottom\";\n  }\n\n  isVertical(): boolean {\n    return this._drawerPlacement === \"left\" || this._drawerPlacement === \"right\";\n  }\n\n  @ViewScope\n  edgeInsets: ViewScope<this, ViewEdgeInsets>;\n\n  protected willSetDrawerPlacement(newPlacement: DrawerPlacement, oldPlacement: DrawerPlacement): void {\n    this.willObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerWillSetPlacement !== void 0) {\n        viewObserver.drawerWillSetPlacement(newPlacement, oldPlacement, this);\n      }\n    });\n  }\n\n  protected onSetDrawerPlacement(newPlacement: DrawerPlacement, oldPlacement: DrawerPlacement): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didSetDrawerPlacement(newPlacement: DrawerPlacement, oldPlacement: DrawerPlacement): void {\n    this.didObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerDidSetPlacement !== void 0) {\n        viewObserver.drawerDidSetPlacement(newPlacement, oldPlacement, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected updateDrawerSlide(drawerSlide: number): void {\n    const drawerPlacement = this._drawerPlacement;\n    if (drawerPlacement === \"top\") {\n      this.updateDrawerSlideTop(drawerSlide);\n    } else if (drawerPlacement === \"right\") {\n      this.updateDrawerSlideRight(drawerSlide);\n    } else if (drawerPlacement === \"bottom\") {\n      this.updateDrawerSlideBottom(drawerSlide);\n    } else if (drawerPlacement === \"left\") {\n      this.updateDrawerSlideLeft(drawerSlide);\n    }\n  }\n\n  /** @hidden */\n  protected updateDrawerSlideTop(drawerSlide: number): void {\n    this.top.setAutoState(Length.px((drawerSlide - 1) * this._node.offsetHeight));\n  }\n\n  /** @hidden */\n  protected updateDrawerSlideRight(drawerSlide: number): void {\n    this.right.setAutoState(Length.px((drawerSlide - 1) * this._node.offsetWidth));\n  }\n\n  /** @hidden */\n  protected updateDrawerSlideBottom(drawerSlide: number): void {\n    this.bottom.setAutoState(Length.px((drawerSlide - 1) * this._node.offsetHeight));\n  }\n\n  /** @hidden */\n  protected updateDrawerSlideLeft(drawerSlide: number): void {\n    this.left.setAutoState(Length.px((drawerSlide - 1) * this._node.offsetWidth));\n  }\n\n  /** @hidden */\n  protected updateDrawerStretch(drawerStretch: number): void {\n    if (this.isVertical()) {\n      const collapsedWidth = this.collapsedWidth.value!;\n      const expandedWidth = this.expandedWidth.value!;\n      const width = collapsedWidth.times(1 - drawerStretch).plus(expandedWidth.times(drawerStretch));\n      this.width.setAutoState(width);\n    }\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    super.onLayout(viewContext);\n    this.place(viewContext);\n    if (viewContext.viewIdiom === \"mobile\") {\n      this.borderRightColor(Color.transparent());\n      this.boxShadow.setState(BoxShadow.of(0, 2, 4, 0, Color.black(0.5)));\n    } else {\n      this.borderRightColor(Color.black());\n      this.boxShadow.setState(void 0);\n    }\n  }\n\n  protected place(viewContext: ViewContext): void {\n    const drawerPlacement = this._drawerPlacement;\n    if (drawerPlacement === \"top\") {\n      this.placeTop(viewContext);\n    } else if (drawerPlacement === \"right\") {\n      this.placeRight(viewContext);\n    } else if (drawerPlacement === \"bottom\") {\n      this.placeBottom(viewContext);\n    } else if (drawerPlacement === \"left\") {\n      this.placeLeft(viewContext);\n    }\n  }\n\n  /** @hidden */\n  protected placeTop(viewContext: ViewContext): void {\n    this.addClass(\"drawer-top\")\n        .removeClass(\"drawer-right\")\n        .removeClass(\"drawer-bottom\")\n        .removeClass(\"drawer-left\");\n\n    this.position.setAutoState(\"fixed\");\n    this.width.setAutoState(void 0);\n    this.height.setAutoState(void 0);\n    this.top.setAutoState(void 0);\n    this.right.setAutoState(Length.zero());\n    this.bottom.setAutoState(void 0);\n    this.left.setAutoState(Length.zero());\n    this.updateDrawerSlideTop(this.drawerSlide.value!);\n\n    const safeArea = viewContext.viewport.safeArea;\n    this.edgeInsets.setState({\n      insetTop: 0,\n      insetRight: safeArea.insetRight,\n      insetBottom: 0,\n      insetLeft: safeArea.insetLeft,\n    });\n\n    if (this.isCollapsed()) {\n      this.expand();\n    }\n  }\n\n  /** @hidden */\n  protected placeRight(viewContext: ViewContext): void {\n    this.removeClass(\"drawer-top\")\n        .addClass(\"drawer-right\")\n        .removeClass(\"drawer-bottom\")\n        .removeClass(\"drawer-left\");\n\n    this.position.setAutoState(\"fixed\");\n    this.width.setAutoState(void 0);\n    this.height.setAutoState(void 0);\n    this.top.setAutoState(Length.zero());\n    this.right.setAutoState(void 0);\n    this.bottom.setAutoState(Length.zero());\n    this.left.setAutoState(void 0);\n    this.updateDrawerSlideRight(this.drawerSlide.value!);\n    this.updateDrawerStretch(this.drawerStretch.value!);\n\n    const safeArea = viewContext.viewport.safeArea;\n    this.paddingTop.setAutoState(Length.px(safeArea.insetTop));\n    this.paddingBottom.setAutoState(Length.px(safeArea.insetBottom));\n    this.edgeInsets.setState({\n      insetTop: 0,\n      insetRight: safeArea.insetRight,\n      insetBottom: 0,\n      insetLeft: 0,\n    });\n  }\n\n  /** @hidden */\n  protected placeBottom(viewContext: ViewContext): void {\n    this.removeClass(\"drawer-top\")\n        .removeClass(\"drawer-right\")\n        .addClass(\"drawer-bottom\")\n        .removeClass(\"drawer-left\");\n\n    this.position.setAutoState(\"fixed\");\n    this.width.setAutoState(void 0);\n    this.height.setAutoState(void 0);\n    this.top.setAutoState(void 0);\n    this.right.setAutoState(Length.zero());\n    this.bottom.setAutoState(void 0);\n    this.left.setAutoState(Length.zero());\n    this.updateDrawerSlideBottom(this.drawerSlide.value!);\n\n    const safeArea = viewContext.viewport.safeArea;\n    this.edgeInsets.setState({\n      insetTop: 0,\n      insetRight: safeArea.insetRight,\n      insetBottom: 0,\n      insetLeft: safeArea.insetLeft,\n    });\n\n    if (this.isCollapsed()) {\n      this.expand();\n    }\n  }\n\n  /** @hidden */\n  protected placeLeft(viewContext: ViewContext): void {\n    this.removeClass(\"drawer-top\")\n        .removeClass(\"drawer-right\")\n        .removeClass(\"drawer-bottom\")\n        .addClass(\"drawer-left\");\n\n    this.position.setAutoState(\"fixed\");\n    this.width.setAutoState(void 0);\n    this.height.setAutoState(void 0);\n    this.top.setAutoState(Length.zero());\n    this.right.setAutoState(void 0);\n    this.bottom.setAutoState(Length.zero());\n    this.left.setAutoState(void 0);\n    this.updateDrawerSlideLeft(this.drawerSlide.value!);\n    this.updateDrawerStretch(this.drawerStretch.value!);\n\n    const safeArea = viewContext.viewport.safeArea;\n    this.paddingTop.setAutoState(Length.px(safeArea.insetTop));\n    this.paddingBottom.setAutoState(Length.px(safeArea.insetBottom));\n    this.edgeInsets.setState({\n      insetTop: 0,\n      insetRight: 0,\n      insetBottom: 0,\n      insetLeft: safeArea.insetLeft,\n    });\n  }\n\n  get modalState(): ModalState {\n    const drawerState = this._drawerState;\n    if (drawerState === \"collapsed\" || drawerState === \"collapsing\") {\n      return \"shown\";\n    } else {\n      return drawerState;\n    }\n  }\n\n  get modalView(): View | null {\n    return this;\n  }\n\n  showModal(tween?: Tween<any>): void {\n    this.show(tween);\n  }\n\n  hideModal(tween?: Tween<any>): void {\n    this.hide(tween);\n  }\n\n  show(tween?: Tween<any>): void {\n    if (!this.isShown() || this.drawerSlide.value !== 1 || this.drawerStretch.value !== 1) {\n      if (tween === void 0 || tween === true) {\n        tween = this._drawerTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willShow();\n      if (tween !== null) {\n        this.drawerStretch(1, tween)\n            .drawerSlide(1, tween.onEnd(this.didShow.bind(this)));\n      } else {\n        this.drawerStretch(1)\n            .drawerSlide(1);\n        this.didShow();\n      }\n    }\n  }\n\n  protected willShow(): void {\n    this.willObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerWillShow !== void 0) {\n        viewObserver.drawerWillShow(this);\n      }\n    });\n    this._drawerState = \"showing\";\n    this.display(\"flex\");\n  }\n\n  protected didShow(): void {\n    this._drawerState = \"shown\";\n    this.didObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerDidShow !== void 0) {\n        viewObserver.drawerDidShow(this);\n      }\n    });\n  }\n\n  hide(tween?: Tween<any>): void {\n    if (!this.isHidden() || this.drawerSlide.value !== 0) {\n      if (tween === void 0 || tween === true) {\n        tween = this._drawerTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willHide();\n      if (tween !== null) {\n        this.drawerSlide(0, tween.onEnd(this.didHide.bind(this)));\n      } else {\n        this.drawerSlide(0);\n        this.didHide();\n      }\n    }\n  }\n\n  protected willHide(): void {\n    this.willObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerWillHide !== void 0) {\n        viewObserver.drawerWillHide(this);\n      }\n    });\n    this._drawerState = \"hiding\";\n  }\n\n  protected didHide(): void {\n    this.display(\"none\");\n    this._drawerState = \"hidden\";\n    this.didObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerDidHide !== void 0) {\n        viewObserver.drawerDidHide(this);\n      }\n    });\n  }\n\n  expand(tween?: Tween<any>): void {\n    if (!this.isShown() || this.drawerSlide.value !== 1 || this.drawerStretch.value !== 1) {\n      if (tween === void 0 || tween === true) {\n        tween = this._drawerTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willExpand();\n      if (tween !== null) {\n        this.drawerSlide(1, tween)\n            .drawerStretch(1, tween.onEnd(this.didExpand.bind(this)));\n      } else {\n        this.drawerSlide(1)\n            .drawerStretch(1);\n        this.didExpand();\n      }\n    }\n  }\n\n  protected willExpand(): void {\n    this.willObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerWillExpand !== void 0) {\n        viewObserver.drawerWillExpand(this);\n      }\n    });\n    this._drawerState = \"showing\";\n  }\n\n  protected didExpand(): void {\n    this._drawerState = \"shown\";\n    this.didObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerDidExpand !== void 0) {\n        viewObserver.drawerDidExpand(this);\n      }\n    });\n  }\n\n  collapse(tween?: Tween<any>): void {\n    if (this.isVertical() && (!this.isCollapsed() || this.drawerSlide.value !== 1 || this.drawerStretch.value !== 0)) {\n      if (tween === void 0 || tween === true) {\n        tween = this._drawerTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willCollapse();\n      if (tween !== null) {\n        this.drawerSlide(1, tween)\n            .drawerStretch(0, tween.onEnd(this.didCollapse.bind(this)));\n      } else {\n        this.drawerSlide(1)\n            .drawerStretch(0);\n        this.didCollapse();\n      }\n    }\n  }\n\n  protected willCollapse(): void {\n    this.willObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerWillCollapse !== void 0) {\n        viewObserver.drawerWillCollapse(this);\n      }\n    });\n    this._drawerState = \"collapsing\";\n    this.display(\"flex\");\n  }\n\n  protected didCollapse(): void {\n    this._drawerState = \"collapsed\";\n    this.didObserve(function (viewObserver: DrawerViewObserver): void {\n      if (viewObserver.drawerDidCollapse !== void 0) {\n        viewObserver.drawerDidCollapse(this);\n      }\n    });\n  }\n\n  toggle(tween?: Tween<any>): void {\n    const drawerState = this._drawerState;\n    if (drawerState === \"hidden\" || drawerState === \"hiding\") {\n      this.show(tween);\n    } else if (drawerState === \"collapsed\" || drawerState === \"collapsing\") {\n      this.expand(tween);\n    } else if (this.viewIdiom === \"mobile\") {\n      this.hide(tween);\n    } else {\n      this.collapse(tween);\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HtmlViewController} from \"@swim/view\";\nimport {DrawerPlacement, DrawerView} from \"./DrawerView\";\nimport {DrawerViewObserver} from \"./DrawerViewObserver\";\n\nexport class DrawerViewController<V extends DrawerView = DrawerView> extends HtmlViewController<V> implements DrawerViewObserver<V> {\n  drawerWillSetPlacement(newPlacement: DrawerPlacement, oldPlacement: DrawerPlacement, view: V): void {\n    // hook\n  }\n\n  drawerDidSetPlacement(newPlacement: DrawerPlacement, oldPlacement: DrawerPlacement, view: V): void {\n    // hook\n  }\n\n  drawerWillShow(view: V): void {\n    // hook\n  }\n\n  drawerDidShow(view: V): void {\n    // hook\n  }\n\n  drawerWillHide(view: V): void {\n    // hook\n  }\n\n  drawerDidHide(view: V): void {\n    // hook\n  }\n\n  drawerWillExpand(view: V): void {\n    // hook\n  }\n\n  drawerDidExpand(view: V): void {\n    // hook\n  }\n\n  drawerWillCollapse(view: V): void {\n    // hook\n  }\n\n  drawerDidCollapse(view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View, SvgView, HtmlView, HtmlViewController} from \"@swim/view\";\nimport {DrawerView} from \"./DrawerView\";\n\nexport class DrawerButton extends HtmlView {\n  /** @hidden */\n  _drawerView: DrawerView | null;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onClick = this.onClick.bind(this);\n    this._drawerView = null;\n    this.initChildren();\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"drawer-button\")\n        .display(\"flex\")\n        .justifyContent(\"center\")\n        .alignItems(\"center\")\n        .width(48)\n        .height(48)\n        .userSelect(\"none\")\n        .cursor(\"pointer\");\n  }\n\n  protected initChildren(): void {\n    this.append(this.createIcon(), \"icon\");\n  }\n\n  protected createIcon(): SvgView {\n    const icon = SvgView.create(\"svg\")\n        .width(30)\n        .height(30)\n        .viewBox(\"0 0 30 30\")\n        .stroke(\"#ffffff\")\n        .strokeWidth(2)\n        .strokeLinecap(\"round\");\n    icon.append(\"path\").d(\"M4 7h22M4 15h22M4 23h22\");\n    return icon;\n  }\n\n  get viewController(): HtmlViewController<DrawerButton> | null {\n    return this._viewController;\n  }\n\n  get drawerView(): DrawerView | null {\n    return this._drawerView;\n  }\n\n  setDrawerView(drawerView: DrawerView | null) {\n    this._drawerView = drawerView;\n  }\n\n  get iconView(): HtmlView | null {\n    const childView = this.getChildView(\"icon\");\n    return childView instanceof HtmlView ? childView : null;\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.on(\"click\", this.onClick);\n  }\n\n  protected onUnmount(): void {\n    this.off(\"click\", this.onClick);\n    super.onUnmount();\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    const childKey = childView.key;\n    if (childKey === \"icon\" && (childView instanceof SvgView || childView instanceof HtmlView)) {\n      this.onInsertIcon(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    const childKey = childView.key;\n    if (childKey === \"icon\" && (childView instanceof SvgView || childView instanceof HtmlView)) {\n      this.onRemoveIcon(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertIcon(icon: SvgView | HtmlView): void {\n    // hook\n  }\n\n  protected onRemoveIcon(icon: SvgView | HtmlView): void {\n    // hook\n  }\n\n  protected onClick(event: MouseEvent): void {\n    event.stopPropagation();\n    const drawerView = this._drawerView;\n    if (drawerView !== null) {\n      drawerView.toggle();\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ViewScope, Viewport, UiViewContext, UiView} from \"@swim/view\";\nimport {Theme} from \"@swim/theme\";\nimport {AppViewController} from \"./AppViewController\";\n\nexport class AppView extends UiView {\n  get viewController(): AppViewController | null {\n    return this._viewController;\n  }\n\n  @ViewScope<AppView, Theme>({\n    init: function (this: AppView): Theme {\n      return this.createTheme();\n    },\n  })\n  theme: ViewScope<this, Theme>;\n\n  protected createTheme(): Theme {\n    const colorScheme = this.viewport.colorScheme;\n    if (colorScheme === \"dark\") {\n      return Theme.dark;\n    } else {\n      return Theme.light;\n    }\n  }\n\n  protected onResize(viewContext: UiViewContext): void {\n    super.onResize(viewContext);\n    this.updateViewIdiom(viewContext.viewport);\n  }\n\n  protected updateViewIdiom(viewport: Viewport) {\n    if (viewport.width < 960 || viewport.height < 480) {\n      this.setViewIdiom(\"mobile\");\n    } else {\n      this.setViewIdiom(\"desktop\");\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {UiViewController} from \"@swim/view\";\nimport {AppView} from \"./AppView\";\nimport {AppViewObserver} from \"./AppViewObserver\";\n\nexport class AppViewController<V extends AppView = AppView> extends UiViewController<V> implements AppViewObserver<V> {\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Angle} from \"@swim/angle\";\nimport {Transform} from \"@swim/transform\";\nimport {Tween, Transition} from \"@swim/transition\";\nimport {ViewScope, ViewContext, View, SvgView, HtmlView} from \"@swim/view\";\nimport {GestureViewTrack, GestureViewController} from \"@swim/gesture\";\nimport {Theme} from \"@swim/theme\";\nimport {TactileView} from \"@swim/app\";\n\nexport class ActionButton extends TactileView {\n  constructor(node: HTMLElement) {\n    super(node);\n  }\n\n  protected initNode(node: HTMLElement): void {\n    super.initNode(node);\n    this.addClass(\"action-button\")\n        .position(\"relative\")\n        .display(\"flex\")\n        .justifyContent(\"center\")\n        .alignItems(\"center\")\n        .width(56)\n        .height(56)\n        .borderRadius(\"50%\")\n        .overflow(\"hidden\")\n        .userSelect(\"none\")\n        .cursor(\"pointer\");\n  }\n\n  get viewController(): GestureViewController<ActionButton> | null {\n    return this._viewController;\n  }\n\n  @ViewScope({inherit: true})\n  theme: ViewScope<this, Theme>;\n\n  get iconContainer(): HtmlView | null {\n    const childView = this.getChildView(\"iconContainer\");\n    return childView instanceof HtmlView ? childView : null;\n  }\n\n  get icon(): SvgView | HtmlView | null {\n    const iconContainer = this.iconContainer;\n    const childView = iconContainer !== null ? iconContainer.getChildView(\"icon\") : null;\n    return childView instanceof SvgView || childView instanceof HtmlView ? childView : null;\n  }\n\n  setIcon(icon: SvgView | HtmlView | null, tween: Tween<any> = null, ccw: boolean = false): void {\n    tween = Transition.forTween(tween);\n    const oldIconContainer = this.getChildView(\"iconContainer\");\n    if (oldIconContainer instanceof HtmlView) {\n      this.removeChildViewMap(oldIconContainer);\n      oldIconContainer.setKey(null);\n      if (tween !== null) {\n        oldIconContainer.opacity(0, tween.onEnd(oldIconContainer.remove.bind(oldIconContainer)))\n                        .transform(Transform.rotate(Angle.deg(ccw ? -90 : 90)), tween);\n      } else {\n        oldIconContainer.remove();\n      }\n    }\n    const newIconContainer = this.createIconContainer(icon)\n        .opacity(0)\n        .opacity(1, tween)\n        .transform(Transform.rotate(Angle.deg(ccw ? 90 : -90)))\n        .transform(Transform.rotate(Angle.deg(0)), tween);\n    this.appendChildView(newIconContainer, \"iconContainer\");\n  }\n\n  protected createIconContainer(icon: View | null): HtmlView {\n    const iconContainer = HtmlView.create(\"div\")\n        .addClass(\"action-icon\")\n        .position(\"absolute\")\n        .display(\"flex\")\n        .justifyContent(\"center\")\n        .alignItems(\"center\")\n        .width(56)\n        .height(56)\n        .pointerEvents(\"none\");\n    if (icon !== null) {\n      iconContainer.appendChildView(icon, \"icon\");\n    }\n    return iconContainer;\n  }\n\n  setTheme(theme: Theme): void {\n    this.backgroundColor.setAutoState(theme.primary.fillColor);\n    this.boxShadow.setAutoState(theme.floating.shadow);\n\n    const icon = this.icon;\n    if (icon instanceof SvgView) {\n      icon.fill.setAutoState(theme.primary.iconColor);\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.requireUpdate(View.NeedsDerive);\n  }\n\n  protected onDerive(viewContext: ViewContext): void {\n    super.onDerive(viewContext);\n    const theme = this.theme.state;\n    if (theme !== void 0) {\n      this.setTheme(theme);\n    }\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    const childKey = childView.key;\n    if (childKey === \"iconContainer\" && childView instanceof HtmlView) {\n      this.onInsertIconContainer(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    const childKey = childView.key;\n    if (childKey === \"iconContainer\" && childView instanceof HtmlView) {\n      this.onRemoveIconContainer(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertIconContainer(iconContainer: HtmlView): void {\n    // hook\n  }\n\n  protected onRemoveIconContainer(iconContainer: HtmlView): void {\n    // hook\n  }\n\n  protected onStartHovering(): void {\n    const theme = this.theme.state;\n    if (theme !== void 0) {\n      this.backgroundColor.setAutoState(theme.primary.fillColor.darker(0.5), this.tactileTransition);\n    }\n  }\n\n  protected onStopHovering(): void {\n    const theme = this.theme.state;\n    if (theme !== void 0) {\n      this.backgroundColor.setAutoState(theme.primary.fillColor, this.tactileTransition);\n    }\n  }\n\n  protected onMoveTrack(track: GestureViewTrack, event: Event | null): void {\n    // nop\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyColor, Color} from \"@swim/color\";\nimport {\n  ViewScope,\n  ViewContext,\n  ViewFlags,\n  View,\n  MemberAnimator,\n  SvgView,\n  HtmlView,\n  HtmlViewController,\n} from \"@swim/view\";\nimport {Theme} from \"@swim/theme\";\n\nexport class ActionItem extends HtmlView {\n  constructor(node: HTMLElement) {\n    super(node);\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"action-item\")\n        .position(\"relative\")\n        .display(\"flex\")\n        .justifyContent(\"center\")\n        .alignItems(\"center\")\n        .width(48)\n        .height(48)\n        .borderRadius(\"50%\")\n        .userSelect(\"none\")\n        .cursor(\"pointer\");\n  }\n\n  get viewController(): HtmlViewController<ActionItem> | null {\n    return this._viewController;\n  }\n\n  @ViewScope({inherit: true})\n  theme: ViewScope<this, Theme>;\n\n  @MemberAnimator(Number, {inherit: true})\n  stackPhase: MemberAnimator<this, number>; // 0 = collapsed; 1 = expanded\n\n  @MemberAnimator(Color)\n  hoverColor: MemberAnimator<this, Color, AnyColor>;\n\n  get icon(): SvgView | HtmlView | null {\n    const childView = this.getChildView(\"icon\");\n    return childView instanceof SvgView || childView instanceof HtmlView ? childView : null;\n  }\n\n  get label(): HtmlView | null {\n    const childView = this.getChildView(\"label\");\n    return childView instanceof HtmlView ? childView : null;\n  }\n\n  setTheme(theme: Theme): void {\n    this.backgroundColor.setAutoState(theme.secondary.fillColor);\n    this.boxShadow.setAutoState(theme.floating.shadow);\n    this.hoverColor.setAutoState(theme.secondary.fillColor.darker(0.5));\n\n    const icon = this.icon;\n    if (icon instanceof SvgView) {\n      icon.fill.setAutoState(theme.secondary.iconColor);\n    }\n  }\n\n  protected onMount(): void {\n    this.requireUpdate(View.NeedsDerive);\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & View.NeedsAnimate) !== 0) {\n      additionalFlags |= View.NeedsLayout;\n    }\n    additionalFlags |= super.modifyUpdate(updateFlags | additionalFlags);\n    return additionalFlags;\n  }\n\n  protected onDerive(viewContext: ViewContext): void {\n    super.onDerive(viewContext);\n    const theme = this.theme.state;\n    if (theme !== void 0) {\n      this.setTheme(theme);\n    }\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    super.onLayout(viewContext);\n    const label = this.label;\n    if (label !== null) {\n      label.opacity(this.stackPhase.value!);\n    }\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    const childKey = childView.key;\n    if (childKey === \"icon\" && (childView instanceof SvgView || childView instanceof HtmlView)) {\n      this.onInsertIcon(childView);\n    } else if (childKey === \"label\" && childView instanceof HtmlView) {\n      this.onInsertLabel(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    const childKey = childView.key;\n    if (childKey === \"icon\" && (childView instanceof SvgView || childView instanceof HtmlView)) {\n      this.onRemoveIcon(childView);\n    } else if (childKey === \"label\" && childView instanceof HtmlView) {\n      this.onRemoveLabel(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertIcon(icon: SvgView | HtmlView): void {\n    // hook\n  }\n\n  protected onRemoveIcon(icon: SvgView | HtmlView): void {\n    // hook\n  }\n\n  protected onInsertLabel(label: HtmlView): void {\n    label.display.setAutoState(\"block\");\n    label.position(\"absolute\")\n        .top(0)\n        .right(48 + 12)\n        .bottom(0)\n        .fontSize(17)\n        .fontWeight(\"500\")\n        .lineHeight(\"48px\")\n        .whiteSpace(\"nowrap\")\n        .color(\"#cccccc\");\n  }\n\n  protected onRemoveLabel(label: HtmlView): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View} from \"@swim/view\";\nimport {GestureViewTrack, GestureView, GestureViewObserver} from \"@swim/gesture\";\nimport {ActionStack} from \"./ActionStack\";\n\nexport class ActionStackGestureController<V extends GestureView = GestureView> implements GestureViewObserver<V> {\n  /** @hidden */\n  _actionStack: ActionStack;\n\n  constructor(actionStack: ActionStack) {\n    this._actionStack = actionStack;\n  }\n\n  viewDidBeginTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidHoldTrack(track: GestureViewTrack, view: V): void {\n    this._actionStack.toggle();\n    track.preventDefault();\n  }\n\n  viewDidMoveTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    if (!track.defaultPrevented) {\n      const actionStack = this._actionStack;\n      if (actionStack.isCollapsed()) {\n        const stackPhase = Math.min(Math.max(0, -track.dy / 100), 1);\n        actionStack.stackPhase.setState(stackPhase);\n        actionStack.requireUpdate(View.NeedsLayout);\n        if (stackPhase > 0.1) {\n          track.clearHoldTimer();\n        }\n      }\n    }\n  }\n\n  viewDidEndTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    if (!track.defaultPrevented) {\n      const actionStack = this._actionStack;\n      const stackPhase = actionStack.stackPhase.value!;\n      if (track.dt < track.holdDelay) {\n        if (stackPhase < 0.1 || actionStack.stackState === \"expanded\") {\n          actionStack.collapse();\n        } else {\n          actionStack.expand();\n        }\n      } else {\n        if (stackPhase < 0.5) {\n          actionStack.collapse();\n        } else if (stackPhase >= 0.5) {\n          actionStack.expand();\n        }\n      }\n    }\n  }\n\n  viewDidCancelTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    const actionStack = this._actionStack;\n    if (track.buttons === 2) {\n      actionStack.toggle();\n    } else {\n      const stackPhase = actionStack.stackPhase.value!;\n      if (stackPhase < 0.1 || actionStack.stackState === \"expanded\") {\n        actionStack.collapse();\n      } else {\n        actionStack.expand();\n      }\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Ease, Tween, Transition} from \"@swim/transition\";\nimport {\n  ViewContext,\n  ViewFlags,\n  View,\n  ViewNode,\n  ModalState,\n  Modal,\n  MemberAnimator,\n  SvgView,\n  HtmlView,\n} from \"@swim/view\";\nimport {ActionButton} from \"./ActionButton\";\nimport {ActionItem} from \"./ActionItem\";\nimport {ActionStackObserver} from \"./ActionStackObserver\";\nimport {ActionStackController} from \"./ActionStackController\";\nimport {ActionStackGestureController} from \"./ActionStackGestureController\";\n\nexport type ActionStackState = \"collapsed\" | \"expanding\" | \"expanded\" | \"collapsing\";\n\nexport class ActionStack extends HtmlView implements Modal {\n  /** @hidden */\n  _stackState: ActionStackState;\n  /** @hidden */\n  _stackTransition: Transition<any>;\n  /** @hidden */\n  _buttonIcon: SvgView | HtmlView | null;\n  /** @hidden */\n  _buttonSpacing: number;\n  /** @hidden */\n  _itemSpacing: number;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onClick = this.onClick.bind(this);\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this._stackState = \"collapsed\";\n    this._stackTransition = Transition.duration(250, Ease.cubicOut);\n    this._buttonIcon = null;\n    this._buttonSpacing = 36;\n    this._itemSpacing = 20;\n    this.initChildren();\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"action-stack\")\n        .display(\"block\")\n        .position(\"relative\")\n        .width(56)\n        .height(56)\n        .opacity(1)\n        .userSelect(\"none\")\n        .touchAction(\"none\");\n  }\n\n  protected initChildren(): void {\n    this.append(ActionButton, \"button\");\n  }\n\n  get viewController(): ActionStackController | null {\n    return this._viewController;\n  }\n\n  get stackState(): ActionStackState {\n    return this._stackState;\n  }\n\n  isExpanded(): boolean {\n    return this._stackState === \"expanded\" || this._stackState === \"expanding\";\n  }\n\n  isCollapsed(): boolean {\n    return this._stackState === \"collapsed\" || this._stackState === \"collapsing\";\n  }\n\n  @MemberAnimator(Number, {value: 0})\n  stackPhase: MemberAnimator<this, number>; // 0 = collapsed; 1 = expanded\n\n  get modalState(): ModalState {\n    const stackState = this._stackState;\n    if (stackState === \"collapsed\") {\n      return \"hidden\";\n    } else if (stackState === \"expanding\") {\n      return \"showing\";\n    } else if (stackState === \"expanded\") {\n      return \"shown\";\n    } else if (stackState === \"collapsing\") {\n      return \"hiding\";\n    } else {\n      return void 0 as any; // unreachable\n    }\n  }\n\n  get modalView(): View | null {\n    return null;\n  }\n\n  showModal(tween?: Tween<any>): void {\n    this.expand(tween);\n  }\n\n  hideModal(tween?: Tween<any>): void {\n    this.collapse(tween);\n  }\n\n  get button(): ActionButton | null {\n    const childView = this.getChildView(\"button\");\n    return childView instanceof ActionButton ? childView : null;\n  }\n\n  get buttonIcon(): SvgView | HtmlView | null {\n    return this._buttonIcon;\n  }\n\n  setButtonIcon(buttonIcon: SvgView | HtmlView | null, tween?: Tween<any>, ccw?: boolean): void {\n    this._buttonIcon = buttonIcon;\n    const button = this.button;\n    if (button !== null) {\n      if (tween === void 0 || tween === true) {\n        tween = this._stackTransition;\n      } else if (tween === false) {\n        tween = void 0;\n      }\n      button.setIcon(buttonIcon, tween, ccw);\n    }\n  }\n\n  protected createCloseIcon(): SvgView {\n    const icon = SvgView.create(\"svg\").width(24).height(24).viewBox(\"0 0 24 24\");\n    icon.append(\"path\").d(\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\");\n    return icon;\n  }\n\n  get items(): ReadonlyArray<ActionItem> {\n    const childNodes = this._node.childNodes;\n    const childViews = [];\n    for (let i = 0, n = childNodes.length; i < n; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView instanceof ActionItem) {\n        childViews.push(childView);\n      }\n    }\n    return childViews;\n  }\n\n  insertItem(item: ActionItem, index?: number, key?: string): void {\n    if (index === void 0) {\n      index = this.node.childNodes.length - 1;\n    }\n    this.insertChildNode(item.node, this.node.childNodes[1 + index] || null, key);\n  }\n\n  removeItems(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = childNodes.length - 1; i >= 0; i -= 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView instanceof ActionItem) {\n        this.removeChild(childView);\n      }\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.on(\"click\", this.onClick);\n    this.on(\"contextmenu\", this.onContextMenu);\n  }\n\n  protected onUnmount(): void {\n    this.off(\"click\", this.onClick);\n    this.off(\"contextmenu\", this.onContextMenu);\n    super.onUnmount();\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & View.NeedsAnimate) !== 0) {\n      additionalFlags |= View.NeedsLayout;\n    }\n    additionalFlags |= super.modifyUpdate(updateFlags | additionalFlags);\n    return additionalFlags;\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    super.onLayout(viewContext);\n    const phase = this.stackPhase.value!;\n    const childNodes = this._node.childNodes;\n    const childCount = childNodes.length;\n    const buttonHeight = 56;\n    const itemHeight = 48;\n    let itemIndex = 0;\n    let zIndex = childCount - 1;\n    for (let i = 0; i < childCount; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView instanceof ActionItem) {\n        const bottom = buttonHeight + this._buttonSpacing + itemIndex * (itemHeight + this._itemSpacing);\n        childView.display(phase === 0 ? \"none\" : \"flex\")\n                 .bottom(phase * bottom)\n                 .zIndex(zIndex);\n        itemIndex += 1;\n        zIndex -= 1;\n      }\n      const button = this.button;\n      if (button !== null) {\n        button.zIndex(childCount);\n      }\n    }\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    const childKey = childView.key;\n    if (childKey === \"button\" && childView instanceof ActionButton) {\n      this.onInsertButton(childView);\n    } else if (childView instanceof ActionItem) {\n      this.onInsertItem(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    const childKey = childView.key;\n    if (childKey === \"button\" && childView instanceof ActionButton) {\n      this.onRemoveButton(childView);\n    } else if (childView instanceof ActionItem) {\n      this.onRemoveItem(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertButton(button: ActionButton): void {\n    if (this.isCollapsed && this._buttonIcon !== null) {\n      button.setIcon(this._buttonIcon);\n    } else if (this.isExpanded()) {\n      button.setIcon(this.createCloseIcon());\n    }\n    button.zIndex(0);\n    button.addViewObserver(new ActionStackGestureController(this) as any);\n  }\n\n  protected onRemoveButton(button: ActionButton): void {\n    // hook\n  }\n\n  protected onInsertItem(item: ActionItem): void {\n    item.position(\"absolute\").right(4).bottom(4).left(4).zIndex(0);\n  }\n\n  protected onRemoveItem(item: ActionItem): void {\n    // hook\n  }\n\n  expand(tween?: Tween<any>): void {\n    if (this.isCollapsed() || this.stackPhase.value !== 1) {\n      if (tween === void 0 || tween === true) {\n        tween = this._stackTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willExpand();\n      if (tween !== null) {\n        this.button!.setIcon(this.createCloseIcon(), tween);\n        if (this.stackPhase.value !== 1) {\n          this.stackPhase.setState(1, tween.onEnd(this.didExpand.bind(this)));\n        } else {\n          setTimeout(this.didExpand.bind(this));\n        }\n      } else {\n        this.button!.setIcon(this.createCloseIcon());\n        this.stackPhase.setState(1);\n        this.requireUpdate(View.NeedsLayout);\n        this.didExpand();\n      }\n    }\n  }\n\n  protected willExpand(): void {\n    this.willObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackWillExpand !== void 0) {\n        viewObserver.actionStackWillExpand(this);\n      }\n    });\n    this._stackState = \"expanding\";\n  }\n\n  protected didExpand(): void {\n    this._stackState = \"expanded\";\n    this.didObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackDidExpand !== void 0) {\n        viewObserver.actionStackDidExpand(this);\n      }\n    });\n  }\n\n  collapse(tween?: Tween<any>): void {\n    if (this.isExpanded() || this.stackPhase.value !== 0) {\n      if (tween === void 0 || tween === true) {\n        tween = this._stackTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willCollapse();\n      if (tween !== null) {\n        this.button!.setIcon(this._buttonIcon, tween, true);\n        if (this.stackPhase.value !== 0) {\n          this.stackPhase.setState(0, tween.onEnd(this.didCollapse.bind(this)));\n        } else {\n          setTimeout(this.didCollapse.bind(this));\n        }\n      } else {\n        this.button!.setIcon(this._buttonIcon);\n        this.stackPhase.setState(0);\n        this.requireUpdate(View.NeedsLayout);\n        this.didCollapse();\n      }\n    }\n  }\n\n  protected willCollapse(): void {\n    this.willObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackWillCollapse !== void 0) {\n        viewObserver.actionStackWillCollapse(this);\n      }\n    });\n    this._stackState = \"collapsing\";\n  }\n\n  protected didCollapse(): void {\n    this._stackState = \"collapsed\";\n    this.didObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackDidCollapse !== void 0) {\n        viewObserver.actionStackDidCollapse(this);\n      }\n    });\n  }\n\n  toggle(tween?: Tween<any>): void {\n    const stackState = this._stackState;\n    if (stackState === \"collapsed\" || stackState === \"collapsing\") {\n      this.expand(tween);\n    } else if (stackState === \"expanded\" || stackState === \"expanding\") {\n      this.collapse(tween);\n    }\n  }\n\n  show(tween?: Tween<any>): void {\n    if (this.opacity.state !== 1) {\n      if (tween === void 0 || tween === true) {\n        tween = this._stackTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willShow();\n      if (tween !== null) {\n        this.opacity(1, tween.onEnd(this.didShow.bind(this)));\n      } else {\n        this.opacity(1);\n        this.requireUpdate(View.NeedsLayout);\n        this.didShow();\n      }\n    }\n  }\n\n  protected willShow(): void {\n    this.willObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackWillShow !== void 0) {\n        viewObserver.actionStackWillShow(this);\n      }\n    });\n    this.display(\"block\");\n  }\n\n  protected didShow(): void {\n    this.didObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackDidShow !== void 0) {\n        viewObserver.actionStackDidShow(this);\n      }\n    });\n  }\n\n  hide(tween?: Tween<any>): void {\n    if (this.opacity.state !== 0) {\n      if (tween === void 0 || tween === true) {\n        tween = this._stackTransition;\n      } else {\n        tween = Transition.forTween(tween);\n      }\n      this.willHide();\n      if (tween !== null) {\n        this.opacity(0, tween.onEnd(this.didHide.bind(this)));\n      } else {\n        this.opacity(0);\n        this.requireUpdate(View.NeedsLayout);\n        this.didHide();\n      }\n    }\n  }\n\n  protected willHide(): void {\n    this.willObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackWillHide !== void 0) {\n        viewObserver.actionStackWillHide(this);\n      }\n    });\n  }\n\n  protected didHide(): void {\n    this.display(\"none\");\n    this.didObserve(function (viewObserver: ActionStackObserver): void {\n      if (viewObserver.actionStackDidHide !== void 0) {\n        viewObserver.actionStackDidHide(this);\n      }\n    });\n  }\n\n  protected onClick(event: MouseEvent): void {\n    event.stopPropagation();\n  }\n\n  protected onContextMenu(event: MouseEvent): void {\n    event.preventDefault();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HtmlViewController} from \"@swim/view\";\nimport {ActionButton} from \"./ActionButton\";\nimport {ActionItem} from \"./ActionItem\";\nimport {ActionStackState, ActionStack} from \"./ActionStack\";\nimport {ActionStackObserver} from \"./ActionStackObserver\";\n\nexport class ActionStackController<V extends ActionStack = ActionStack> extends HtmlViewController<V> implements ActionStackObserver<V> {\n  get stackState(): ActionStackState | null {\n    return this._view !== null ? this._view.stackState : null;\n  }\n\n  get button(): ActionButton | null {\n    return this._view !== null ? this._view.button : null;\n  }\n\n  get items(): ReadonlyArray<ActionItem> {\n    return this._view !== null ? this._view.items : [];\n  }\n\n  removeItems(): void {\n    if (this._view !== null) {\n      this._view.removeItems();\n    }\n  }\n\n  actionStackWillExpand(view: V): void {\n    // hook\n  }\n\n  actionStackDidExpand(view: V): void {\n    const rootView = this.rootView;\n    if (rootView !== null) {\n      rootView.presentModal(view, {focus: true});\n    }\n  }\n\n  actionStackWillCollapse(view: V): void {\n    // hook\n  }\n\n  actionStackDidCollapse(view: V): void {\n    const rootView = this.rootView;\n    if (rootView !== null) {\n      rootView.dismissModal(view);\n    }\n  }\n\n  actionStackWillShow(view: V): void {\n    // hook\n  }\n\n  actionStackDidShow(view: V): void {\n    // hook\n  }\n\n  actionStackWillHide(view: V): void {\n    // hook\n  }\n\n  actionStackDidHide(view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View, HtmlView} from \"@swim/view\";\nimport {MenuItem} from \"./MenuItem\";\nimport {MenuListObserver} from \"./MenuListObserver\";\nimport {MenuListController} from \"./MenuListController\";\n\nexport class MenuList extends HtmlView {\n  constructor(node: HTMLElement) {\n    super(node);\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"menu-list\")\n        .flexGrow(1)\n        .flexShrink(0)\n        .marginTop(12)\n        .marginBottom(12);\n  }\n\n  get viewController(): MenuListController | null {\n    return this._viewController;\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    if (childView instanceof MenuItem) {\n      this.onInsertItem(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    if (childView instanceof MenuItem) {\n      this.onRemoveItem(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertItem(item: MenuItem): void {\n    // hook\n  }\n\n  protected onRemoveItem(item: MenuItem): void {\n    // hook\n  }\n\n  /** @hidden */\n  onPressItem(item: MenuItem): void {\n    this.didObserve(function (viewObserver: MenuListObserver): void {\n      if (viewObserver.menuDidPressItem !== void 0) {\n        viewObserver.menuDidPressItem(item, this);\n      }\n    });\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {\n  ViewScope,\n  ViewEdgeInsets,\n  ViewContext,\n  View,\n  MemberAnimator,\n  SvgView,\n  HtmlView,\n} from \"@swim/view\";\nimport {GestureViewController} from \"@swim/gesture\";\nimport {TactileView} from \"@swim/app\";\nimport {MenuList} from \"./MenuList\";\n\nexport class MenuItem extends TactileView {\n  /** @hidden */\n  _highlighted: boolean;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onClick = this.onClick.bind(this);\n    this.normalFillColor.setState(Color.parse(\"#9a9a9a\"));\n    this.highlightFillColor.setState(Color.parse(\"#d8d8d8\"));\n    this.highlightCellColor.setState(Color.parse(\"#0a1215\"));\n    this.hoverColor.setState(Color.rgb(255, 255, 255, 0.05));\n    this.backgroundColor.setAutoState(this.hoverColor.value!.alpha(0));\n    this._highlighted = false;\n  }\n\n  protected initNode(node: HTMLElement): void {\n    this.addClass(\"memu-item\")\n        .position(\"relative\")\n        .display(\"flex\")\n        .flexShrink(0)\n        .height(44)\n        .boxSizing(\"border-box\")\n        .lineHeight(44)\n        .overflow(\"hidden\")\n        .userSelect(\"none\")\n        .cursor(\"pointer\");\n    this.paddingLeft.setAutoState(Length.px(4));\n    this.paddingRight.setAutoState(Length.px(4));\n  }\n\n  get viewController(): GestureViewController<MenuItem> | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Number, {inherit: true})\n  drawerStretch: MemberAnimator<this, number>; // 0 = collapsed; 1 = expanded\n\n  @MemberAnimator(Color)\n  normalFillColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  highlightFillColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  highlightCellColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  hoverColor: MemberAnimator<this, Color, AnyColor>;\n\n  @ViewScope({inherit: true})\n  edgeInsets: ViewScope<this, ViewEdgeInsets>;\n\n  get highlighted(): boolean {\n    return this._highlighted;\n  }\n\n  protected createIconView(icon?: SvgView): HtmlView {\n    const view = HtmlView.create(\"div\")\n        .display(\"flex\")\n        .justifyContent(\"center\")\n        .alignItems(\"center\")\n        .width(36)\n        .height(44);\n    if (icon !== void 0) {\n      icon.fill(this.normalFillColor.value!);\n      view.append(icon, \"icon\");\n    }\n    return view;\n  }\n\n  protected createTitleView(text?: string): HtmlView {\n    const view = HtmlView.create(\"span\")\n        .display(\"block\")\n        .fontFamily(\"system-ui, 'Open Sans', sans-serif\")\n        .fontSize(17)\n        .whiteSpace(\"nowrap\")\n        .textOverflow(\"ellipsis\")\n        .overflow(\"hidden\")\n        .color(this.normalFillColor.value!);\n    if (text !== void 0) {\n      view.text(text);\n    }\n    return view;\n  }\n\n  iconView(): HtmlView | null;\n  iconView(iconView: HtmlView | SvgView | null): this;\n  iconView(newIconView?: HtmlView | SvgView | null): HtmlView | null | this {\n    const childView = this.getChildView(\"icon\");\n    const oldIconView = childView instanceof HtmlView ? childView : null;\n    if (newIconView === void 0) {\n      return oldIconView;\n    } else {\n      if (newIconView instanceof SvgView) {\n        if (oldIconView === null) {\n          newIconView = this.createIconView(newIconView);\n          this.appendChildView(newIconView, \"icon\");\n        } else {\n          oldIconView.removeAll();\n          oldIconView.append(newIconView);\n          newIconView = oldIconView;\n        }\n      } else if (newIconView !== null) {\n        if (oldIconView === null) {\n          this.appendChildView(newIconView, \"icon\");\n        } else {\n          this.setChildView(\"icon\", newIconView);\n        }\n      } else if (oldIconView !== null) {\n        oldIconView.remove();\n      }\n      return this;\n    }\n  }\n\n  titleView(): HtmlView | null;\n  titleView(titleView: HtmlView | string | null): this;\n  titleView(newTitleView?: HtmlView | string | null): HtmlView | null | this {\n    const childView = this.getChildView(\"title\");\n    const oldTitleView = childView instanceof HtmlView ? childView : null;\n    if (newTitleView === void 0) {\n      return oldTitleView;\n    } else {\n      if (typeof newTitleView === \"string\") {\n        if (oldTitleView === null) {\n          newTitleView = this.createTitleView(newTitleView);\n          this.appendChildView(newTitleView, \"title\");\n        } else {\n          oldTitleView.text(newTitleView);\n          newTitleView = oldTitleView;\n        }\n      } else if (newTitleView !== null) {\n        if (oldTitleView === null) {\n          this.appendChildView(newTitleView, \"title\");\n        } else {\n          this.setChildView(\"title\", newTitleView);\n        }\n      } else if (oldTitleView !== null) {\n        oldTitleView.remove();\n      }\n      return this;\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.on(\"click\", this.onClick);\n  }\n\n  protected onUnmount(): void {\n    this.off(\"click\", this.onClick);\n    super.onUnmount();\n  }\n\n  protected onAnimate(viewContext: ViewContext): void {\n    super.onAnimate(viewContext);\n    const drawerStretch = this.drawerStretch.value;\n    if (typeof drawerStretch === \"number\") {\n      const titleView = this.titleView()!;\n      titleView.display(drawerStretch === 0 ? \"none\" : \"block\")\n               .opacity(drawerStretch);\n    }\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    super.onLayout(viewContext);\n    const edgeInsets = this.edgeInsets.state;\n    if (edgeInsets !== void 0) {\n      this.paddingLeft.setAutoState(Length.px(Math.max(4, edgeInsets.insetLeft)));\n      this.paddingRight.setAutoState(Length.px(Math.max(4, edgeInsets.insetRight)));\n    }\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    super.onInsertChildView(childView, targetView);\n    const childKey = childView.key;\n    if (childKey === \"icon\" && childView instanceof HtmlView) {\n      this.onInsertIcon(childView);\n    } else if (childKey === \"title\" && childView instanceof HtmlView) {\n      this.onInsertTitle(childView);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    const childKey = childView.key;\n    if (childKey === \"icon\" && childView instanceof HtmlView) {\n      this.onRemoveIcon(childView);\n    } else if (childKey === \"title\" && childView instanceof HtmlView) {\n      this.onRemoveTitle(childView);\n    }\n    super.onRemoveChildView(childView);\n  }\n\n  protected onInsertIcon(icon: HtmlView): void {\n    icon.flexShrink(0)\n        .marginLeft(8)\n        .marginRight(8);\n  }\n\n  protected onRemoveIcon(icon: HtmlView): void {\n    // hook\n  }\n\n  protected onInsertTitle(title: HtmlView): void {\n    title.flexShrink(0)\n         .marginLeft(4)\n         .marginRight(4);\n  }\n\n  protected onRemoveTitle(title: HtmlView): void {\n    // hook\n  }\n\n  protected onStartHovering(): void {\n    const hoverColor = this.hoverColor.value;\n    if (hoverColor !== void 0 && this.backgroundColor.isAuto()) {\n      if (this.backgroundColor.value === void 0) {\n        this.backgroundColor.setAutoState(hoverColor.alpha(0), false);\n      }\n      this.backgroundColor.setAutoState(hoverColor, this.tactileTransition);\n    }\n  }\n\n  protected onStopHovering(): void {\n    const hoverColor = this.hoverColor.value;\n    if (hoverColor !== void 0 && this.backgroundColor.isAuto()) {\n      this.backgroundColor.setAutoState(hoverColor.alpha(0), this.tactileTransition);\n    }\n  }\n\n  highlight(tween?: Tween<any>): this {\n    if (!this._highlighted) {\n      this._highlighted = true;\n      if (tween === true) {\n        tween = this.tactileTransition;\n      }\n      this.backgroundColor.setAutoState(this.highlightCellColor.value!.alpha(1), tween);\n      const iconView = this.iconView();\n      if (iconView !== null) {\n        const icon = iconView.getChildView(\"icon\");\n        if (icon instanceof SvgView) {\n          icon.fill(this.highlightFillColor.value!, tween);\n        }\n      }\n      const titleView = this.titleView();\n      if (titleView !== null) {\n        titleView.color(this.highlightFillColor.value!, tween);\n      }\n    }\n    return this;\n  }\n\n  unhighlight(tween?: Tween<any>): this {\n    if (this._highlighted) {\n      this._highlighted = false;\n      if (tween === true) {\n        tween = this.tactileTransition;\n      }\n      this.backgroundColor.setAutoState(this.highlightCellColor.value!.alpha(0), tween);\n      const iconView = this.iconView();\n      if (iconView !== null) {\n        const icon = iconView.getChildView(\"icon\");\n        if (icon instanceof SvgView) {\n          icon.fill(this.normalFillColor.value!, tween);\n        }\n      }\n      const titleView = this.titleView();\n      if (titleView !== null) {\n        titleView.color(this.normalFillColor.value!, tween);\n      }\n    }\n    return this;\n  }\n\n  protected onClick(event: MouseEvent): void {\n    event.stopPropagation();\n    const parentView = this.parentView;\n    if (parentView instanceof MenuList) {\n      parentView.onPressItem(this);\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HtmlViewController} from \"@swim/view\";\nimport {MenuItem} from \"./MenuItem\";\nimport {MenuList} from \"./MenuList\";\nimport {MenuListObserver} from \"./MenuListObserver\";\n\nexport class MenuListController<V extends MenuList = MenuList> extends HtmlViewController<V> implements MenuListObserver<V> {\n  /** @hidden */\n  _selectedItem: MenuItem | null;\n\n  constructor() {\n    super();\n    this._selectedItem = null;\n  }\n\n  get selectedItem(): MenuItem | null {\n    return this._selectedItem;\n  }\n\n  selectItem(newItem: MenuItem | null): void {\n    const oldItem = this._selectedItem;\n    if (oldItem !== newItem) {\n      this.willSelectItem(newItem, oldItem);\n      this._selectedItem = newItem;\n      this.onSelectItem(newItem, oldItem);\n      this.didSelectItem(newItem, oldItem);\n    }\n  }\n\n  protected willSelectItem(newItem: MenuItem | null, oldItem: MenuItem | null): void {\n    // hook\n  }\n\n  protected onSelectItem(newItem: MenuItem | null, oldItem: MenuItem | null): void {\n    if (oldItem !== null) {\n      oldItem.unhighlight(true);\n    }\n    if (newItem !== null) {\n      newItem.highlight(false);\n    }\n  }\n\n  protected didSelectItem(newItem: MenuItem | null, oldItem: MenuItem | null): void {\n    // hook\n  }\n\n  menuDidPressItem(item: MenuItem, view: V): void {\n    this.selectItem(item);\n  }\n}\n","import {Item, Value, Record} from \"@swim/core\";\nimport {ValueDownlink, MapDownlink, NodeRef} from \"@swim/mesh\";\nimport {Color, BoxShadow, HtmlView} from \"@swim/ui\";\nimport {PopoverView} from \"@swim/ux\";\nimport {AnyGeoPoint, GeoPoint, MapboxView} from \"@swim/maps\";\n\nexport class RegionMapPopoverView extends PopoverView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _titleView: HtmlView;\n  /** @hidden */\n  _infoTable: HtmlView;\n  /** @hidden */\n  _statusTable: HtmlView;\n  /** @hidden */\n  _alertsTable: HtmlView;\n  /** @hidden */\n  _infoLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _statusLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _alertsLink: MapDownlink<Value, Value> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._infoLink = null;\n    this._statusLink = null;\n    this._alertsLink = null;\n    this.initPopover();\n  }\n\n  protected initPopover(): void {\n    this.width(320)\n        .height(480)\n        .borderRadius(16)\n        .boxShadow(BoxShadow.of(0, 2, 4, 0, Color.rgb(0, 0, 0, 0.5)))\n        .backgroundColor(Color.parse(\"#1e2022\").alpha(0.9));\n\n    const content = this.append(\"div\")\n        .height(\"100%\")\n        .overflowY(\"auto\")\n        .color(\"#ffffff\");\n\n    this._titleView = content.append(\"div\")\n        .marginTop(16)\n        .marginRight(16)\n        .marginBottom(16)\n        .marginLeft(16)\n        .fontSize(20)\n        .fontWeight(\"500\");\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Status\");\n    this._statusTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(16);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Info\");\n    this._infoTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(16);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Alerts\");\n    this._alertsTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(16);\n  }\n\n  didSetInfo(newInfo: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetInfo:\", newInfo.toAny());\n    this._titleView.text(newInfo.get(\"name\").stringValue(null));\n    newInfo.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0 && key !== \"name\") {\n        let tableRow = this._infoTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._infoTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didSetStatus(newStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetStatus:\", newStatus.toAny());\n    newStatus.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0) {\n        let tableRow = this._statusTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._statusTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didUpdateAlert(key: Value, newAlert: Value): void {\n    const siteNodeUri = key.stringValue(void 0);\n    //console.log(this._nodeRef.nodeUri() + \" didUpdateAlert \" + siteNodeUri + \":\", newAlert.toAny());\n    if (siteNodeUri !== void 0) {\n      let tableRow = this._alertsTable.getChildView(siteNodeUri) as HtmlView | null;\n      let valueCell: HtmlView;\n      if (tableRow === null) {\n        tableRow = this._alertsTable.append(\"tr\", siteNodeUri)\n            .color(\"#cccccc\");\n        const coordinates = newAlert.get(\"coordinates\").toAny() as AnyGeoPoint | undefined;\n        if (coordinates !== void 0) {\n          tableRow.cursor(\"pointer\");\n          tableRow.on(\"click\", this.onAlertClick.bind(this, siteNodeUri, GeoPoint.fromAny(coordinates)));\n        }\n        tableRow.append(\"th\", \"key\")\n            .width(\"50%\")\n            .padding([2, 4, 2, 0])\n            .textAlign(\"left\")\n            .text(siteNodeUri);\n        valueCell = tableRow.append(\"td\", \"value\")\n            .width(\"50%\")\n            .padding([2, 0, 2, 4]);\n      } else {\n        valueCell = tableRow.getChildView(\"value\") as HtmlView;\n      }\n      if (newAlert instanceof Record) {\n        const value = newAlert.deleted(\"coordinates\");\n        if (value.length === 1 && value.get(\"severity\").isDefined()) {\n          valueCell.text(value.get(\"severity\").numberValue(0).toFixed(2));\n        } else {\n          valueCell.text(JSON.stringify(value.toAny()));\n        }\n      } else {\n        valueCell.text(newAlert.stringValue(null));\n      }\n    }\n  }\n\n  didRemoveAlert(key: Value, oldAlert: Value): void {\n    const siteNodeUri = key.stringValue(void 0);\n    //console.log(this._nodeRef.nodeUri() + \" didRemoveAlert \" + siteNodeUri);\n    if (siteNodeUri !== void 0) {\n      this._alertsTable.removeChildView(siteNodeUri);\n    }\n  }\n\n  protected onAlertClick(siteNodeUri: string, geoPoint: GeoPoint, event: MouseEvent): void {\n    //console.log(this._nodeRef.nodeUri() + \" onAlertClick \" + siteNodeUri);\n    const mapboxView = this.mapboxView;\n    if (mapboxView !== null) {\n      mapboxView.map.flyTo({\n        center: geoPoint.toAny(),\n        zoom: 12,\n      });\n    }\n  }\n\n  get mapboxView(): MapboxView | null {\n    let view = this.source;\n    while (view !== null) {\n      if (view instanceof MapboxView) {\n        return view;\n      }\n      view = view.parentView;\n    }\n    return null;\n  }\n\n  protected didHide(): void {\n    super.didHide();\n    this.remove();\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.linkInfo();\n    this.linkStatus();\n    this.linkAlerts();\n  }\n\n  protected onUnmount(): void {\n    this.unlinkInfo();\n    this.unlinkStatus();\n    this.unlinkAlerts();\n    super.onUnmount();\n  }\n\n  protected linkInfo(): void {\n    if (this._infoLink === null) {\n      this._infoLink = this._nodeRef.downlinkValue()\n          .laneUri(\"info\")\n          .didSet(this.didSetInfo.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkInfo(): void {\n    if (this._infoLink !== null) {\n      this._infoLink.close();\n      this._infoLink = null;\n    }\n  }\n\n  protected linkStatus(): void {\n    if (this._statusLink === null) {\n      this._statusLink = this._nodeRef.downlinkValue()\n          .laneUri(\"status\")\n          .didSet(this.didSetStatus.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkStatus(): void {\n    if (this._statusLink !== null) {\n      this._statusLink.close();\n      this._statusLink = null;\n    }\n  }\n\n  protected linkAlerts(): void {\n    if (this._alertsLink === null) {\n      this._alertsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"alerts\")\n          .didUpdate(this.didUpdateAlert.bind(this))\n          .didRemove(this.didRemoveAlert.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkAlerts(): void {\n    if (this._alertsLink !== null) {\n      this._alertsLink.close();\n      this._alertsLink = null;\n    }\n  }\n}\n","import {Item, Value, Record, DateTime} from \"@swim/core\";\nimport {ValueDownlink, MapDownlink, NodeRef} from \"@swim/mesh\";\nimport {Color, BoxShadow, ViewMouseEvent, HtmlView, TextRunView} from \"@swim/ui\";\nimport {PopoverView} from \"@swim/ux\";\nimport {ChartView, LineGraphView, DatumView} from \"@swim/vis\";\n\nexport class SiteMapPopoverView extends PopoverView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _titleView: HtmlView;\n  /** @hidden */\n  _kpisTable: HtmlView;\n  /** @hidden */\n  _historyChart: ChartView;\n  /** @hidden */\n  _statusTable: HtmlView;\n  /** @hidden */\n  _infoTable: HtmlView;\n  /** @hidden */\n  _infoLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _statusLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _kpisLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _historyLink: MapDownlink<Value, Value> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._infoLink = null;\n    this._statusLink = null;\n    this._kpisLink = null;\n    this._historyLink = null;\n    this.initPopover();\n  }\n\n  protected initPopover(): void {\n    this.width(320)\n        .height(480)\n        .borderRadius(16)\n        .boxShadow(BoxShadow.of(0, 2, 4, 0, Color.rgb(0, 0, 0, 0.5)))\n        .backgroundColor(Color.parse(\"#1e2022\").alpha(0.9));\n\n    const content = this.append(\"div\")\n        .height(\"100%\")\n        .overflowY(\"auto\")\n        .color(\"#ffffff\");\n\n    this._titleView = content.append(\"div\")\n        .marginTop(16)\n        .marginRight(16)\n        .marginBottom(16)\n        .marginLeft(16)\n        .fontSize(20)\n        .fontWeight(\"500\");\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"KPIs\");\n    this._kpisTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(14);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"History\");\n    const historyContainer = content.append(\"div\")\n        .position(\"relative\")\n        .height(120)\n        .marginBottom(16);\n    const historyCanvas = historyContainer.append(\"canvas\");\n    this._historyChart = new ChartView()\n        .bottomAxis(\"time\")\n        .leftAxis(\"linear\")\n        .topGutter(8)\n        .leftGutter(32)\n        .rightGutter(32)\n        .leftDomainPadding([0.1, 0.1])\n        .bottomGesture(true)\n        .domainColor(\"#cccccc\")\n        .tickMarkColor(\"#cccccc\")\n        .font(\"12px sans-serif\")\n        .textColor(\"#cccccc\");\n    historyCanvas.append(this._historyChart);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Status\");\n    this._statusTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(14);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Info\");\n    this._infoTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(14);\n  }\n\n  didSetInfo(newInfo: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetInfo:\", newInfo.toAny());\n    this._titleView.text(newInfo.get(\"node\").stringValue(null));\n    newInfo.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0 && key !== \"node\" && key !== \"coordinates\") {\n        let tableRow = this._infoTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._infoTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didSetStatus(newStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetStatus:\", newStatus.toAny());\n    newStatus.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0 && key !== \"coordinates\") {\n        let tableRow = this._statusTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._statusTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didSetKpis(newKpis: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetKpis:\", newKpis.toAny());\n    newKpis.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0) {\n        let tableRow = this._kpisTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._kpisTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didUpdateHistory(key: Value, newSample: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didUpdateHistory \" + key.toAny() + \":\", newSample.toAny());\n    const t = new DateTime(key.numberValue(0));\n    newSample.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      const value = item.numberValue(void 0);\n      if (key !== void 0 && key !== \"recorded_time\" && value !== void 0) {\n        let historyPlot = this._historyChart.getChildView(key) as LineGraphView<DateTime, number> | null;\n        if (historyPlot === null) {\n          historyPlot = new LineGraphView<DateTime, number>()\n              .hitMode(\"data\")\n              .stroke(\"#ffffff\")\n              .strokeWidth(2)\n              .on(\"mouseover\", function (event: ViewMouseEvent): void {\n                const datum = event.targetView as DatumView<DateTime, number>;\n                const y = datum.y.value!;\n                datum.label(TextRunView.fromAny({\n                  text: y.toFixed(2) + \"  \" + key,\n                }));\n              })\n              .on(\"mouseout\", function (event: ViewMouseEvent): void {\n                const datum = event.targetView as DatumView<DateTime, number>;\n                datum.label(null);\n              });\n          this._historyChart.setChildView(key, historyPlot);\n        }\n        historyPlot.insertDatum({x: t, y: value});\n\n        const futureKey = key + \"-future\";\n        let futurePlot = this._historyChart.getChildView(futureKey) as LineGraphView<DateTime, number> | null;\n        if (futurePlot === null) {\n          futurePlot = new LineGraphView<DateTime, number>()\n              .hitMode(\"data\")\n              .stroke(\"#ffffff\")\n              .strokeWidth(2);\n          this._historyChart.setChildView(futureKey, futurePlot);\n        }\n        futurePlot.removeAll();\n        const prevDatum = historyPlot._data.previousValue(t);\n        if (prevDatum !== void 0) {\n          futurePlot.insertDatum({x: t, y: value, opacity: 1});\n          const nextValue = (prevDatum.y.value! + value) / 2;\n          futurePlot.insertDatum({x: new DateTime(t.time() + 60000), y: nextValue, opacity: 0});\n        }\n      }\n    }, this);\n  }\n\n  didRemoveHistory(key: Value, oldSample: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didRemoveHistory \" + key.toAny());\n    const t = new DateTime(key.numberValue(0));\n    oldSample.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      const value = item.numberValue(void 0);\n      if (key !== void 0 && key !== \"recorded_time\" && value !== void 0) {\n        let historyPlot = this._historyChart.getChildView(key) as LineGraphView<DateTime, number> | null;\n        if (historyPlot !== null) {\n          historyPlot.removeDatum(t);\n        }\n      }\n    }, this);\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.linkInfo();\n    this.linkStatus();\n    this.linkKpis();\n    this.linkHistory();\n  }\n\n  protected onUnmount(): void {\n    this.unlinkInfo();\n    this.unlinkStatus();\n    this.unlinkKpis();\n    this.unlinkHistory();\n    super.onUnmount();\n  }\n\n  protected didHide(): void {\n    super.didHide();\n    this.remove();\n  }\n\n  protected linkInfo(): void {\n    if (this._infoLink === null) {\n      this._infoLink = this._nodeRef.downlinkValue()\n          .laneUri(\"info\")\n          .didSet(this.didSetInfo.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkInfo(): void {\n    if (this._infoLink !== null) {\n      this._infoLink.close();\n      this._infoLink = null;\n    }\n  }\n\n  protected linkStatus(): void {\n    if (this._statusLink === null) {\n      this._statusLink = this._nodeRef.downlinkValue()\n          .laneUri(\"status\")\n          .didSet(this.didSetStatus.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkStatus(): void {\n    if (this._statusLink !== null) {\n      this._statusLink.close();\n      this._statusLink = null;\n    }\n  }\n\n  protected linkKpis(): void {\n    if (this._kpisLink === null) {\n      this._kpisLink = this._nodeRef.downlinkValue()\n          .laneUri(\"kpis\")\n          .didSet(this.didSetKpis.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkKpis(): void {\n    if (this._kpisLink !== null) {\n      this._kpisLink.close();\n      this._kpisLink = null;\n    }\n  }\n\n  protected linkHistory(): void {\n    if (this._historyLink === null) {\n      this._historyLink = this._nodeRef.downlinkMap()\n          .laneUri(\"ranHistory\")\n          .didUpdate(this.didUpdateHistory.bind(this))\n          .didRemove(this.didRemoveHistory.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkHistory(): void {\n    if (this._historyLink !== null) {\n      this._historyLink.close();\n      this._historyLink = null;\n    }\n  }\n}\n","import {Item, Value, Record} from \"@swim/core\";\nimport {ValueDownlink, NodeRef} from \"@swim/mesh\";\nimport {Color, BoxShadow, HtmlView} from \"@swim/ui\";\nimport {PopoverView} from \"@swim/ux\";\n\nexport class SectorMapPopoverView extends PopoverView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _titleView: HtmlView;\n  /** @hidden */\n  _statusTable: HtmlView;\n  /** @hidden */\n  _infoTable: HtmlView;\n  /** @hidden */\n  _infoLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _statusLink: ValueDownlink<Value> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._infoLink = null;\n    this._statusLink = null;\n    this.initPopover();\n  }\n\n  protected initPopover(): void {\n    this.width(320)\n        .height(480)\n        .borderRadius(16)\n        .boxShadow(BoxShadow.of(0, 2, 4, 0, Color.rgb(0, 0, 0, 0.5)))\n        .backgroundColor(Color.parse(\"#1e2022\").alpha(0.9));\n\n    const content = this.append(\"div\")\n        .height(\"100%\")\n        .overflowY(\"auto\")\n        .color(\"#ffffff\");\n\n    this._titleView = content.append(\"div\")\n        .marginTop(16)\n        .marginRight(16)\n        .marginBottom(16)\n        .marginLeft(16)\n        .fontSize(20)\n        .fontWeight(\"500\")\n        .text(this._nodeRef.nodeUri().toString());\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Status\");\n    this._statusTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(14);\n\n    content.append(\"div\")\n        .marginRight(16)\n        .marginLeft(16)\n        .fontSize(16)\n        .fontWeight(\"bold\")\n        .text(\"Info\");\n    this._infoTable = content.append(\"table\")\n        .width(\"100%\")\n        .marginBottom(16)\n        .paddingRight(16)\n        .paddingLeft(16)\n        .fontSize(14);\n  }\n\n  didSetInfo(newInfo: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetInfo:\", newInfo.toAny());\n    newInfo.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0) {\n        let tableRow = this._infoTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._infoTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  didSetStatus(newStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetStatus:\", newStatus.toAny());\n    newStatus.forEach(function (item: Item): void {\n      const key = item.key.stringValue(void 0);\n      if (key !== void 0 && key !== \"coordinates\") {\n        let tableRow = this._statusTable.getChildView(key) as HtmlView | null;\n        let valueCell: HtmlView;\n        if (tableRow === null) {\n          tableRow = this._statusTable.append(\"tr\", key)\n              .color(\"#cccccc\");\n          tableRow.append(\"th\", \"key\")\n              .width(\"50%\")\n              .padding([2, 4, 2, 0])\n              .textAlign(\"left\")\n              .text(key);\n          valueCell = tableRow.append(\"td\", \"value\")\n              .width(\"50%\")\n              .padding([2, 0, 2, 4]);\n        } else {\n          valueCell = tableRow.getChildView(\"value\") as HtmlView;\n        }\n        const value = item.toValue();\n        if (value instanceof Record) {\n          valueCell.text(JSON.stringify(value.toAny()));\n        } else {\n          valueCell.text(value.stringValue(null));\n        }\n      }\n    }, this);\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.linkInfo();\n    this.linkStatus();\n  }\n\n  protected onUnmount(): void {\n    this.unlinkInfo();\n    this.unlinkStatus();\n    super.onUnmount();\n  }\n\n  protected didHide(): void {\n    super.didHide();\n    this.remove();\n  }\n\n  protected linkInfo(): void {\n    if (this._infoLink === null) {\n      this._infoLink = this._nodeRef.downlinkValue()\n          .laneUri(\"info\")\n          .didSet(this.didSetInfo.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkInfo(): void {\n    if (this._infoLink !== null) {\n      this._infoLink.close();\n      this._infoLink = null;\n    }\n  }\n\n  protected linkStatus(): void {\n    if (this._statusLink === null) {\n      this._statusLink = this._nodeRef.downlinkValue()\n          .laneUri(\"status\")\n          .didSet(this.didSetStatus.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkStatus(): void {\n    if (this._statusLink !== null) {\n      this._statusLink.close();\n      this._statusLink = null;\n    }\n  }\n}\n","import {Value} from \"@swim/core\";\nimport {NodeRef} from \"@swim/mesh\";\nimport {Angle, Ease, Transition, Tween, View} from \"@swim/ui\";\nimport {MapViewContext, MapArcView} from \"@swim/maps\";\nimport {SectorMapPopoverView} from \"./SectorMapPopoverView\";\n\nconst STATUS_TWEEN = Transition.duration<any>(500, Ease.cubicOut);\n\nexport class SectorMapView extends MapArcView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _status: Value;\n  /** @hidden */\n  _popoverView: SectorMapPopoverView | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this._nodeRef = nodeRef;\n    this._status = Value.absent();\n    this._popoverView = null;\n  }\n\n  didSetStatus(newStatus: Value, tween: Tween<any> = STATUS_TWEEN): void {\n    this._status = newStatus;\n    if (this._popoverView !== null) {\n      this._popoverView.backgroundColor(this.fill.value!.darker(2).alpha(0.9), tween);\n    }\n    this.requireUpdate(View.NeedsProject);\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.on(\"click\", this.onClick);\n  }\n\n  protected onUnmount(): void {\n    super.onUnmount();\n    this.off(\"click\", this.onClick);\n  }\n\n  onProject(viewContext: MapViewContext): void {\n    super.onProject(viewContext);\n    const index = this.parentView!.childViews.indexOf(this);\n    const azimuth = this._status.get(\"azimuth\").numberValue()!;\n    const sweep = this._status.get(\"sweep\").numberValue()!;\n    this.startAngle(Angle.deg(azimuth - sweep / 2 - viewContext.mapHeading))\n        .sweepAngle(Angle.deg(sweep))\n        .innerRadius(6 + 6 * index)\n        .outerRadius(6 + 6 * index + 4);\n  }\n\n  protected onClick(event: MouseEvent): void {\n    //console.log(this._nodeRef.nodeUri() + \" onClick\");\n    event.stopPropagation();\n    let popoverView = this._popoverView;\n    if (popoverView === null) {\n      popoverView = new SectorMapPopoverView(this._nodeRef);\n      popoverView.setSource(this);\n      popoverView.hideModal();\n      popoverView.backgroundColor.didUpdate = function () {\n        popoverView!.place();\n      };\n      this._popoverView = popoverView;\n    }\n    popoverView.backgroundColor(this.fill.value!.darker(2).alpha(0.9));\n    this.rootView!.toggleModal(popoverView, {multi: event.altKey});\n  }\n}\n","import {Value} from \"@swim/core\";\nimport {MapDownlink, NodeRef} from \"@swim/mesh\";\nimport {\n  AnyColor,\n  Color,\n  ColorInterpolator,\n  Ease,\n  Tween,\n  Transition,\n  View,\n  MemberAnimator,\n} from \"@swim/ui\";\nimport {\n  AnyGeoPoint,\n  MapViewContext,\n  MapView,\n  MapGroupView,\n  MapCircleView,\n} from \"@swim/maps\";\nimport {SiteMapPopoverView} from \"./SiteMapPopoverView\";\nimport {SectorMapView} from \"./SectorMapView\";\n\nconst INFO_COLOR = Color.parse(\"#44d7b6\");\nconst WARN_COLOR = Color.parse(\"#f9f070\");\nconst ALERT_COLOR = Color.parse(\"#f6511d\");\nconst WARN_INTERPOLATOR = ColorInterpolator.between(INFO_COLOR, WARN_COLOR);\nconst ALERT_INTERPOLATOR = ColorInterpolator.between(WARN_COLOR, ALERT_COLOR);\nconst STATUS_TWEEN = Transition.duration<any>(500, Ease.cubicOut);\n\nconst MIN_SECTOR_ZOOM = 10;\n\nexport class SiteMapView extends MapGroupView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _sectorsLink: MapDownlink<Value, Value> | null;\n  /** @hidden */\n  _statusColor: Color;\n  /** @hidden */\n  _popoverView: SiteMapPopoverView | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this._nodeRef = nodeRef;\n    this._sectorsLink = null;\n    this._statusColor = INFO_COLOR;\n    this._popoverView = null;\n  }\n\n  @MemberAnimator(Color)\n  fill: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  stroke: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Number)\n  strokeWidth: MemberAnimator<this, number>;\n\n  didSetStatus(newStatus: Value, tween: Tween<any> = STATUS_TWEEN): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetStatus:\", newStatus.toAny());\n    let marker = this.getChildView(\"marker\") as MapCircleView | null;\n    if (marker === null) {\n      const coordinates = newStatus.get(\"coordinates\").toAny() as AnyGeoPoint;\n      marker = new MapCircleView().geoCenter(coordinates).radius(4);\n      this.setChildView(\"marker\", marker);\n    }\n    let color: Color;\n    const severity = newStatus.get(\"severity\").numberValue(0);\n    if (severity > 1) {\n      color = ALERT_INTERPOLATOR.interpolate(severity - 1);\n      this.fill(color, tween);\n      if (tween !== false) {\n        this.ripple(color, 2, 5000);\n      }\n    } else if (severity > 0) {\n      color = WARN_INTERPOLATOR.interpolate(severity);\n      this.fill(color, tween);\n      if (tween !== false) {\n        this.ripple(color, 1, 2500);\n      }\n    } else {\n      color = INFO_COLOR;\n      this.fill(INFO_COLOR, tween);\n    }\n    if (this._popoverView !== null) {\n      this._popoverView.backgroundColor(color.darker(2).alpha(0.9), tween);\n    }\n    this._statusColor = color;\n  }\n\n  ripple(color: Color, width: number, duration: number): void {\n    const rootMapView = this.rootMapView;\n    if (!this.isHidden() && !this.isCulled() && !document.hidden && this.geoBounds.intersects(rootMapView.geoFrame)) {\n      const marker = this.getChildView(\"marker\") as MapCircleView;\n      const ripple = new MapCircleView()\n          .geoCenter(marker.geoCenter.value)\n          .radius(0)\n          .stroke(color)\n          .strokeWidth(width);\n      rootMapView.appendChildView(ripple);\n      const frame = rootMapView.viewFrame;\n      const radius = Math.min(frame.width, frame.height) / 8;\n      const tween = Transition.duration<any>(duration);\n      ripple.stroke(color.alpha(0), tween)\n            .radius(radius, tween.onEnd(function () { ripple.remove(); }));\n    }\n  }\n\n  get rootMapView(): MapView {\n    let rootMapView: MapView = this;\n    do {\n      const parentView = rootMapView.parentView;\n      if (MapView.is(parentView)) {\n        rootMapView = parentView;\n        continue;\n      }\n      break;\n    } while (true);\n    return rootMapView;\n  }\n\n  protected didUpdateSector(key: Value, newSectorStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didUpdateSector \" + key.toAny() + \":\", newSectorStatus.toAny());\n    const sectorNodeUri = key.stringValue()!;\n    const azimuth = newSectorStatus.get(\"azimuth\").stringValue()!;\n    let azimuthView = this.getChildView(azimuth) as MapGroupView | null;\n    if (azimuthView === null) {\n      azimuthView = new MapGroupView();\n      this.setChildView(azimuth, azimuthView);\n    }\n    let sectorMapView = azimuthView.getChildView(sectorNodeUri) as SectorMapView | null;\n    if (sectorMapView === null) {\n      const marker = this.getChildView(\"marker\") as MapCircleView;\n      const sectorNodeRef = this._nodeRef.nodeRef(sectorNodeUri);\n      sectorMapView = new SectorMapView(sectorNodeRef)\n          .geoCenter(marker.geoCenter.value);\n      sectorMapView.didSetStatus(newSectorStatus, false);\n      azimuthView.setChildView(sectorNodeUri, sectorMapView);\n    } else {\n      sectorMapView.didSetStatus(newSectorStatus);\n    }\n  }\n\n  protected didRemoveSector(key: Value, oldSectorStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didRemoveSector \" + key.toAny() + \":\", oldSectorStatus.toAny());\n    const sectorNodeUri = key.stringValue()!;\n    const azimuth = oldSectorStatus.get(\"azimuth\").stringValue()!;\n    const azimuthView = this.getChildView(azimuth) as MapGroupView | null;\n    if (azimuthView !== null) {\n      azimuthView.removeChildView(sectorNodeUri);\n      if (azimuthView.childViews.length === 0) {\n        this.removeChildView(azimuthView);\n      }\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n  }\n\n  protected onUnmount(): void {\n    super.onUnmount();\n    this.unlinkSectors();\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null): void {\n    super.onInsertChildView(childView, targetView);\n    if (childView.key === \"marker\") {\n      childView.on(\"click\", this.onClick);\n    }\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    super.onRemoveChildView(childView);\n    if (childView.key === \"marker\") {\n      childView.off(\"click\", this.onClick);\n    }\n  }\n\n  protected didProject(viewContext: MapViewContext): void {\n    if (viewContext.mapZoom >= MIN_SECTOR_ZOOM && this.geoBounds.intersects(viewContext.geoFrame)) {\n      this.linkSectors();\n    } else {\n      if (this._sectorsLink !== null) {\n        this.rootView!.dismissModals();\n      }\n      this.unlinkSectors();\n    }\n    super.didProject(viewContext);\n  }\n\n  protected onClick(event: MouseEvent): void {\n    //console.log(this._nodeRef.nodeUri() + \" onClick\");\n    event.stopPropagation();\n    let popoverView = this._popoverView;\n    if (popoverView === null) {\n      popoverView = new SiteMapPopoverView(this._nodeRef);\n      popoverView.setSource(this.getChildView(\"marker\"));\n      popoverView.hideModal();\n      popoverView.backgroundColor.didUpdate = function () {\n        popoverView!.place();\n      };\n      this._popoverView = popoverView;\n    }\n    popoverView.backgroundColor(this._statusColor.darker(2).alpha(0.9));\n    this.rootView!.toggleModal(popoverView, {multi: event.altKey});\n  }\n\n  protected linkSectors(): void {\n    if (this._sectorsLink === null) {\n      //console.log(this._nodeRef.nodeUri() + \" linkSectors\");\n      this._sectorsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"sectors\")\n          .didUpdate(this.didUpdateSector.bind(this))\n          .didRemove(this.didRemoveSector.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSectors(): void {\n    if (this._sectorsLink !== null) {\n      //console.log(this._nodeRef.nodeUri() + \" unlinkSectors\");\n      this._sectorsLink.close();\n      this._sectorsLink = null;\n      let i = 0;\n      while (i < this._childViews.length) {\n        const childView = this._childViews[i];\n        if (childView instanceof MapGroupView) {\n          childView.remove();\n        } else {\n          i += 1;\n        }\n      }\n    }\n  }\n}\n","import {\n  Value,\n  PointR2,\n  BoxR2,\n} from \"@swim/core\";\nimport {\n  ValueDownlink,\n  MapDownlink,\n  NodeRef,\n} from \"@swim/mesh\";\nimport {\n  AnyLength,\n  Length,\n  AnyColor,\n  Color,\n  ColorInterpolator,\n  Ease,\n  Tween,\n  Transition,\n  View,\n  MemberAnimator,\n  FillView,\n  StrokeView,\n} from \"@swim/ui\";\nimport {\n  AnyGeoPoint,\n  GeoPoint,\n  GeoBox,\n  MapViewContext,\n  MapView,\n  MapLayerView,\n  MapGroupView,\n  MapPolygonView,\n} from \"@swim/maps\";\nimport {RegionMapPopoverView} from \"./RegionMapPopoverView\";\nimport {SiteMapView} from \"./SiteMapView\";\n\nconst INFO_COLOR = Color.parse(\"#44d7b6\");\nconst WARN_COLOR = Color.parse(\"#f9f070\");\nconst ALERT_COLOR = Color.parse(\"#f6511d\");\nconst WARN_INTERPOLATOR = ColorInterpolator.between(INFO_COLOR, WARN_COLOR);\nconst ALERT_INTERPOLATOR = ColorInterpolator.between(WARN_COLOR, ALERT_COLOR);\nconst STATUS_TWEEN = Transition.duration<any>(5000, Ease.cubicOut);\n\nexport class RegionMapView extends MapLayerView implements FillView, StrokeView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _minZoom: number;\n  /** @hidden */\n  _maxZoom: number;\n  /** @hidden */\n  _minSubRegionZoom: number;\n  /** @hidden */\n  _minSiteZoom: number;\n  /** @hidden */\n  _geoCentroid: GeoPoint;\n  /** @hidden */\n  _viewCentroid: PointR2;\n  /** @hidden */\n  _statusColor: Color;\n  /** @hidden */\n  _statusPhase: number;\n  /** @hidden */\n  _popoverView: RegionMapPopoverView | null;\n  /** @hidden */\n  _statusLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _geometryLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _subRegionsLink: MapDownlink<Value, Value> | null;\n  /** @hidden */\n  _sitesLink: MapDownlink<Value, Value> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this._nodeRef = nodeRef;\n    this._minZoom = -Infinity;\n    this._maxZoom = Infinity;\n    this._minSubRegionZoom = Infinity;\n    this._minSiteZoom = Infinity;\n    this._geoCentroid = GeoPoint.origin();\n    this._viewCentroid = PointR2.origin();\n    this._statusColor = INFO_COLOR;\n    this._statusPhase = 1;\n    this._popoverView = null;\n    this._statusLink = null;\n    this._geometryLink = null;\n    this._subRegionsLink = null;\n    this._sitesLink = null;\n  }\n\n  @MemberAnimator(Color)\n  fill: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  stroke: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Length)\n  strokeWidth: MemberAnimator<this, Length, AnyLength>;\n\n  didSetStatus(newStatus: Value, tween: Tween<any> = STATUS_TWEEN): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetStatus:\", newStatus.toAny());\n    const siteCount = newStatus.get(\"siteCount\").numberValue(0);\n    const warnCount = newStatus.get(\"warnCount\").numberValue(0);\n    const alertCount = newStatus.get(\"alertCount\").numberValue(0);\n    const warnRatio = warnCount / siteCount;\n    const alertRatio = alertCount / siteCount;\n    let color: Color;\n    let phase: number;\n    if (alertRatio > 0.015) {\n      phase = Math.min((1 / 0.015) * (alertRatio - 0.015), 1);\n      color = ALERT_INTERPOLATOR.interpolate(phase);\n      this.fill(color.alpha(0.25 + 0.25 * phase), tween)\n          .stroke(color.alpha(0.5 + 0.25 * phase), tween)\n          .strokeWidth(1 + phase, tween);\n    } else if (warnRatio > 0.15) {\n      phase = Math.min((1 / 0.15) * (warnRatio - 0.15), 1);\n      color = WARN_INTERPOLATOR.interpolate(phase);\n      this.fill(color.alpha(0.1 + 0.15 * phase), tween)\n          .stroke(color.alpha(0.2 + 0.3 * phase), tween)\n          .strokeWidth(1, tween);\n    } else {\n      phase = 1;\n      color = INFO_COLOR;\n      this.fill(color.alpha(0.1), tween)\n          .stroke(color.alpha(0.2), tween)\n          .strokeWidth(1, tween);\n    }\n    if (this._popoverView !== null) {\n      this._popoverView.backgroundColor(color.darker(2).alpha(0.9), tween);\n    }\n    this._statusColor = color;\n    this._statusPhase = phase;\n  }\n\n  protected didSetGeometry(newGeometry: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didSetGeometry:\", newGeometry.toAny());\n    const minZoom = newGeometry.get(\"minZoom\").numberValue(void 0);\n    if (minZoom !== void 0) {\n      this._minZoom = minZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const maxZoom = newGeometry.get(\"maxZoom\").numberValue(void 0);\n    if (maxZoom !== void 0) {\n      this._maxZoom = maxZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const minSubRegionZoom = newGeometry.get(\"minSubRegionZoom\").numberValue(void 0);\n    if (minSubRegionZoom !== void 0) {\n      this._minSubRegionZoom = minSubRegionZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const minSiteZoom = newGeometry.get(\"minSiteZoom\").numberValue(void 0);\n    if (minSiteZoom !== void 0) {\n      this._minSiteZoom = minSiteZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n\n    const type = newGeometry.get(\"type\").stringValue(void 0);\n    if (type !== void 0) {\n      let geometryView = this.getChildView(\"geometry\") as MapGroupView | null;\n      if (geometryView === null) {\n        geometryView = new MapGroupView();\n        geometryView.on(\"click\", this.onClick);\n        this.setChildView(\"geometry\", geometryView);\n      } else {\n        geometryView.removeAll();\n      }\n      if (type === \"Polygon\") {\n        const coordinates = newGeometry.get(\"coordinates\").toAny() as AnyGeoPoint[][];\n        geometryView.append(MapPolygonView).points(coordinates[0]);\n      } else if (type === \"MultiPolygon\") {\n        const coordinates = newGeometry.get(\"coordinates\").toAny() as AnyGeoPoint[][][];\n        for (let i = 0; i < coordinates.length; i += 1) {\n          geometryView.append(MapPolygonView).points(coordinates[i][0]);\n        }\n      }\n    }\n    const centroid = newGeometry.get(\"centroid\").toAny() as AnyGeoPoint | undefined;\n    if (centroid !== void 0) {\n      this._geoCentroid = GeoPoint.fromAny(centroid);\n    }\n  }\n\n  protected didUpdateSubRegion(key: Value, newSubRegionStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didUpdateSubRegion \" + key.toAny() + \":\", newSubRegionStatus.toAny());\n    const subRegionNodeUri = key.stringValue()!;\n    let subRegionMapView = this.getChildView(subRegionNodeUri) as RegionMapView | null;\n    if (subRegionMapView === null) {\n      const subRegionNodeRef = this._nodeRef.nodeRef(subRegionNodeUri);\n      subRegionMapView = new RegionMapView(subRegionNodeRef);\n      subRegionMapView.didSetStatus(newSubRegionStatus, false);\n      this.setChildView(subRegionNodeUri, subRegionMapView);\n    } else {\n      subRegionMapView.didSetStatus(newSubRegionStatus);\n    }\n  }\n\n  protected didRemoveSubRegion(key: Value, oldSubRegionStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didRemoveSubRegion \" + key.toAny() + \":\", oldSubRegionStatus.toAny());\n    const subRegionNodeUri = key.stringValue()!;\n    this.removeChildView(subRegionNodeUri);\n  }\n\n  protected didUpdateSite(key: Value, newSiteStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didUpdateSite \" + key.toAny() + \":\", newSiteStatus.toAny());\n    const siteNodeUri = key.stringValue()!;\n    let siteMapView = this.getChildView(siteNodeUri) as SiteMapView | null;\n    if (siteMapView === null) {\n      const siteNodeRef = this._nodeRef.nodeRef(siteNodeUri);\n      siteMapView = new SiteMapView(siteNodeRef);\n      siteMapView.didSetStatus(newSiteStatus, false);\n      this.setChildView(siteNodeUri, siteMapView);\n    } else {\n      siteMapView.didSetStatus(newSiteStatus);\n    }\n  }\n\n  protected didRemoveSite(key: Value, oldSiteStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" didRemoveSite \" + key.toAny() + \":\", oldSiteStatus.toAny());\n    const siteNodeUri = key.stringValue()!;\n    this.removeChildView(siteNodeUri);\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    //this.linkStatus();\n    this.linkGeometry();\n  }\n\n  protected onUnmount(): void {\n    this.unlinkStatus();\n    this.unlinkGeometry();\n    this.unlinkSubRegions();\n    this.unlinkSites();\n    super.onUnmount();\n  }\n\n  protected didProject(viewContext: MapViewContext): void {\n    const geometryView = this.getChildView(\"geometry\") as MapGroupView | null;\n    let geometryBounds: GeoBox;\n    if (geometryView !== null) {\n      geometryView.setHidden(viewContext.mapZoom >= this._maxZoom);\n      geometryBounds = geometryView.geoBounds;\n    } else {\n      geometryBounds = viewContext.geoFrame;\n    }\n    this.setHidden(viewContext.mapZoom < this._minZoom);\n    if (viewContext.mapZoom >= this._minSubRegionZoom && geometryBounds.intersects(viewContext.geoFrame)) {\n      this.linkSubRegions();\n    } else {\n      this.unlinkSubRegions();\n    }\n    if (viewContext.mapZoom >= this._minSiteZoom && geometryBounds.intersects(viewContext.geoFrame)) {\n      this.linkSites();\n    } else {\n      if (this._sitesLink !== null) {\n        this.rootView!.dismissModals();\n      }\n      this.unlinkSites();\n    }\n    this._viewCentroid = viewContext.geoProjection.project(this._geoCentroid);\n    if (viewContext.mapZoom >= this._maxZoom && this._popoverView !== null) {\n      this.rootView!.dismissModal(this._popoverView);\n      this._popoverView.setSource(null);\n      this._popoverView = null;\n    }\n    super.didProject(viewContext);\n  }\n\n  get popoverFrame(): BoxR2 {\n    const inversePageTransform = this.pageTransform.inverse();\n    const centroid = this._viewCentroid;\n    let [px, py] = inversePageTransform.transform(centroid.x, centroid.y);\n    px = Math.round(px);\n    py = Math.round(py);\n    return new BoxR2(px, py, px, py);\n  }\n\n  protected onClick(event: MouseEvent): void {\n    //console.log(this._nodeRef.nodeUri() + \" onClick\");\n    event.stopPropagation();\n    let popoverView = this._popoverView;\n    if (popoverView === null) {\n      popoverView = new RegionMapPopoverView(this._nodeRef);\n      popoverView.setSource(this);\n      popoverView.hideModal();\n      popoverView.backgroundColor.didUpdate = function () {\n        popoverView!.place();\n      };\n      this._popoverView = popoverView;\n    }\n    popoverView.backgroundColor(this._statusColor.darker(2).alpha(0.9));\n    this.rootView!.toggleModal(popoverView, {multi: event.altKey});\n  }\n\n  protected linkStatus(): void {\n    if (this._statusLink === null) {\n      this._statusLink = this._nodeRef.downlinkValue()\n          .laneUri(\"status\")\n          .didSet(this.didSetStatus.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkStatus(): void {\n    if (this._statusLink !== null) {\n      this._statusLink.close();\n      this._statusLink = null;\n    }\n  }\n\n  protected linkGeometry(): void {\n    if (this._geometryLink === null) {\n      this._geometryLink = this._nodeRef.downlinkValue()\n          .laneUri(\"geometry\")\n          .didSet(this.didSetGeometry.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkGeometry(): void {\n    if (this._geometryLink !== null) {\n      this._geometryLink.close();\n      this._geometryLink = null;\n    }\n  }\n\n  protected linkSubRegions(): void {\n    if (this._subRegionsLink === null) {\n      this._subRegionsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"subRegions\")\n          .didUpdate(this.didUpdateSubRegion.bind(this))\n          .didRemove(this.didRemoveSubRegion.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSubRegions(): void {\n    if (this._subRegionsLink !== null) {\n      this._subRegionsLink.close();\n      this._subRegionsLink = null;\n      this._childViews.forEach(function (view: MapView): void {\n        if (view instanceof RegionMapView) {\n          view.remove();\n        }\n      }, this);\n    }\n  }\n\n  protected linkSites(): void {\n    if (this._sitesLink === null) {\n      //console.log(this._nodeRef.nodeUri() + \" linkSites\");\n      //this.tileOutlineColor(\"#cc0000\");\n      this._sitesLink = this._nodeRef.downlinkMap()\n          .laneUri(\"sites\")\n          .didUpdate(this.didUpdateSite.bind(this))\n          .didRemove(this.didRemoveSite.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSites(): void {\n    if (this._sitesLink !== null) {\n      //console.log(this._nodeRef.nodeUri() + \" unlinkSites\");\n      //this.tileOutlineColor(void 0);\n      this._sitesLink.close();\n      this._sitesLink = null;\n      this._childViews.forEach(function (view: MapView): void {\n        if (view instanceof SiteMapView) {\n          view.remove();\n        }\n      }, this);\n    }\n  }\n}\n"],"names":["GeoBox","PointR2","GeoPoint","View","MapGraphicsView","MapGraphicsViewController","Objects","Length","Color","color","Value","Text","Unicode","Parser","Diagnostic","LengthParser","ColorParser","Record","Form","Font","Transition","Ease","transition","UiView","HtmlView","GestureView","MemberAnimator","HtmlViewController","ViewScope","SvgView","UiViewController","Transform","Angle","view","BoxShadow","MapboxView","ChartView","DateTime","LineGraphView","TextRunView","MapArcView","ColorInterpolator","STATUS_TWEEN","MapCircleView","MapView","MapGroupView","INFO_COLOR","WARN_COLOR","ALERT_COLOR","WARN_INTERPOLATOR","ALERT_INTERPOLATOR","MapPolygonView","BoxR2","MapLayerView"],"mappings":";;;;;;IAAA;IACA;AACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA,IAAI,aAAa,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE;IACnC,IAAI,aAAa,GAAG,MAAM,CAAC,cAAc;IACzC,SAAS,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;IACpF,QAAQ,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnF,IAAI,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;AACF;IACO,SAAS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE;IAChC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;IAC3C,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AAwBD;IACO,SAAS,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;IAC1D,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;IACjI,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IACnI,SAAS,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;IACtJ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE;;ICvCA;QAIE,6BAAY,OAAsB;YAChC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;SACzB;QAED,sBAAI,oCAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;aAC3B;;;WAAA;QAED,sBAAI,uCAAM;iBAAV;gBACE,IAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAG,CAAC;gBAC/C,IAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;gBACjC,IAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;gBACjC,OAAO,IAAIA,UAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aAC3D;;;WAAA;QAID,qCAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,IAAI,QAA4B,CAAC;YACjC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;gBAC3B,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAI,EAAE,GAAG,CAAC,CAAC;aAC9C;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBAC7B,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aACnD;iBAAM;gBACL,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;aACrD;YACD,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAY,CAAC,aAAa,EAAG,CAAC;YAC/D,IAAM,KAAK,GAAG,UAAU,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC;YAC9D,OAAO,IAAIC,YAAO,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SACtC;QAID,uCAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,IAAI,SAA4B,CAAC;YACjC,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;gBACzB,SAAS,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAE,CAAC,CAAC;aAC1C;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBAC3B,SAAS,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC/C;iBAAM;gBACL,SAAS,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aAC7C;YACD,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAY,CAAC,aAAa,EAAG,CAAC;YAC/D,IAAM,KAAK,GAAG,UAAU,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;YAC/D,OAAO,IAAIC,YAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;SAC/C;QACH,0BAAC;IAAD,CAAC;;IC/CD;QAAmC,iCAAe;QAchD,uBAAY,GAAoB;YAAhC,YACE,iBAAO,SASR;YARC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC/C,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAChB,KAAI,CAAC,cAAc,GAAG,IAAI,mBAAmB,CAAC,KAAI,CAAC,CAAC;YACpD,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC;YAC9B,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC;YACpC,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC;YAC9B,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;SACnB;QAED,sBAAI,8BAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,IAAI,CAAC;aAClB;;;WAAA;QAES,+BAAO,GAAjB,UAAkB,GAAoB;SAErC;QAED,sBAAI,yCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAID,+BAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC1E;QAID,iCAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC5E;QAED,sBAAI,wCAAa;iBAAjB;gBACE,OAAO,IAAI,CAAC,cAAc,CAAC;aAC5B;;;WAAA;QAED,wCAAgB,GAAhB,UAAiB,aAAkC;YACjD,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;YACvC,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;SACzC;QAES,4CAAoB,GAA9B,UAA+B,aAAkC;YAC/D,IAAI,CAAC,WAAW,CAAC,UAAU,YAAmC;gBAC5D,IAAI,YAAY,CAAC,wBAAwB,KAAK,KAAK,CAAC,EAAE;oBACpD,YAAY,CAAC,wBAAwB,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;iBAC5D;aACF,CAAC,CAAC;SACJ;QAES,0CAAkB,GAA5B,UAA6B,aAAkC;YAC7D,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACxC,IAAI,CAAC,aAAa,CAACC,SAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;aAC7C;SACF;QAES,2CAAmB,GAA7B,UAA8B,aAAkC;YAC9D,IAAI,CAAC,UAAU,CAAC,UAAU,YAAmC;gBAC3D,IAAI,YAAY,CAAC,uBAAuB,KAAK,KAAK,CAAC,EAAE;oBACnD,YAAY,CAAC,uBAAuB,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;iBAC3D;aACF,CAAC,CAAC;SACJ;QAED,sBAAI,qCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,sBAAI,kCAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,kCAAU,GAAV,UAAW,UAAkB;YAC3B,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;YACjC,IAAI,UAAU,KAAK,UAAU,EAAE;gBAC7B,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC5C,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;gBAC3B,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;aAC5C;SACF;QAES,sCAAc,GAAxB,UAAyB,UAAkB,EAAE,UAAkB;YAC7D,IAAI,CAAC,UAAU,CAAC,UAAU,YAAmC;gBAC3D,IAAI,YAAY,CAAC,kBAAkB,KAAK,KAAK,CAAC,EAAE;oBAC9C,YAAY,CAAC,kBAAkB,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;iBAC/D;aACF,CAAC,CAAC;SACJ;QAES,oCAAY,GAAtB,UAAuB,UAAkB,EAAE,UAAkB;SAE5D;QAES,qCAAa,GAAvB,UAAwB,UAAkB,EAAE,UAAkB;YAC5D,IAAI,CAAC,UAAU,CAAC,UAAU,YAAmC;gBAC3D,IAAI,YAAY,CAAC,iBAAiB,KAAK,KAAK,CAAC,EAAE;oBAC7C,YAAY,CAAC,iBAAiB,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;iBAC9D;aACF,CAAC,CAAC;SACJ;QAED,sBAAI,qCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,sBAAI,kCAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,sCAAc,GAAd,UAAe,YAAuB,EAAE,WAAgC;YACtE,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,iBAAM,cAAc,YAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACjD;QAED,sCAAc,GAAd,UAAe,YAAuB,EAAE,WAAgC;YACtE,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,iBAAM,cAAc,YAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACjD;QAED,wCAAgB,GAAhB,UAAiB,SAAe,EAAE,WAA2B;YAC3D,OAAO,WAAW,CAAC;SACpB;QAED,sCAAc,GAAd,UAAe,WAAgC;YAC7C,IAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YAClD,cAAc,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;YACnD,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YACxC,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;YACvC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YAC7C,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;YACvC,OAAO,cAAc,CAAC;SACvB;QAED,sBAAI,mCAAQ;iBAAZ;gBACE,IAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAG,CAAC;gBACtC,IAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;gBACjC,IAAM,EAAE,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;gBACjC,OAAO,IAAIH,UAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;aAC3D;;;WAAA;QAED,+BAAO,GAAP,UAAQ,CAAS,EAAE,CAAS,EAAE,WAAgC;YAC5D,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,OAAO,iBAAM,OAAO,YAAC,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;SACzC;QAES,mCAAW,GAArB;YACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YACrC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC5C;QAED,qCAAa,GAAb;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,OAAO,IAAI,CAAC,UAAU,CAAC;aACxB;iBAAM;gBACL;oBAAmC,wCAAuB;oBAGxD,8BAAY,OAAsB;wBAAlC,YACE,iBAAO,SAGR;wBAFC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;wBACxB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;qBACzB;oBACD,oCAAK,GAAL;wBACE,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;wBAC9B,IAAM,kBAAkB,GAAG,aAAa,CAAC,oBAAoB,CAAC,KAAK,CAAC,kBAAiC,CAAC,CAAC;wBACvG,IAAM,gBAAgB,GAAG,kBAAkB,CAAC,UAAsB,CAAC;wBACnE,IAAM,SAAS,GAAG,gBAAgB,CAAC,UAAsB,CAAC;wBAC1D,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;wBAC9C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;qBACxC;oBACD,uCAAQ,GAAR;wBACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;4BAC7B,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;4BAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;yBACzB;qBACF;oBACD,mCAAI,GAAJ;wBACE,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;qBAC7B;oBACH,2BAAC;iBAAA,CAzBkC,MAAM,CAAC,IAAI,CAAC,WAAW,GAyBzD;gBACD,IAAM,UAAU,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,CAAC;gBAClD,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC7B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;gBAC9B,OAAO,UAAU,CAAC,WAAW,CAAC;aAC/B;SACF;QAEc,kCAAoB,GAAnC,UAAoC,IAAiB;YACnD,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,UAAU,YAAY,WAAW,IAAI,CAAE,UAAuB,CAAC,IAAI,EAAE;gBACvE,aAAa,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;aAChD;YACD,OAAOG,SAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC5B;QACH,oBAAC;IAAD,CAxNA,CAAmCC,mBAAe;;ICFlD;QAAsF,2CAA4B;QAAlH;;SAgBC;QAfC,0DAAwB,GAAxB,UAAyB,aAAkC,EAAE,IAAO;SAEnE;QAED,yDAAuB,GAAvB,UAAwB,aAAkC,EAAE,IAAO;SAElE;QAED,oDAAkB,GAAlB,UAAmB,UAAkB,EAAE,UAAkB,EAAE,IAAO;SAEjE;QAED,mDAAiB,GAAjB,UAAkB,UAAkB,EAAE,UAAkB,EAAE,IAAO;SAEhE;QACH,8BAAC;IAAD,CAhBA,CAAsFC,6BAAyB;;ICExG,IAAM,cAAc,GAAG;QAC5B,gBAAgB,EAAE,KAAK,CAAwC;QAE/D,IAAI,EAAJ;YACE,IAAI,cAAc,CAAC,gBAAgB,KAAK,KAAK,CAAC,EAAE;gBAC7C,MAAM,CAAC,OAAe,CAAC,CAAC,wCAAwC,CAAC,EAAE,UAAU,gBAAyC;oBACrH,cAAc,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;iBACpD,CAAC,CAAC;aACJ;SACF;KACF;;ICVD;QAAuC,4BAAe;QACpD;YAAA,YACE,iBAAO,SAER;YADC,cAAc,CAAC,IAAI,EAAE,CAAC;;SACvB;QAID,sBAAI,oCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAUS,uCAAoB,GAA9B,UAA+B,aAA6B;YAC1D,IAAI,CAAC,WAAW,CAAC,UAAU,YAA8B;gBACvD,IAAI,YAAY,CAAC,wBAAwB,KAAK,KAAK,CAAC,EAAE;oBACpD,YAAY,CAAC,wBAAwB,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;iBAC5D;aACF,CAAC,CAAC;SACJ;QAES,qCAAkB,GAA5B,UAA6B,aAA6B;YACxD,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACxC,IAAI,CAAC,aAAa,CAACF,SAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;aAC9C;SACF;QAES,sCAAmB,GAA7B,UAA8B,aAA6B;YACzD,IAAI,CAAC,UAAU,CAAC,UAAU,YAA8B;gBACtD,IAAI,YAAY,CAAC,uBAAuB,KAAK,KAAK,CAAC,EAAE;oBACnD,YAAY,CAAC,uBAAuB,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;iBAC3D;aACF,CAAC,CAAC;SACJ;QAIS,iCAAc,GAAxB,UAAyB,UAAkB,EAAE,UAAkB;YAC7D,IAAI,CAAC,UAAU,CAAC,UAAU,YAA8B;gBACtD,IAAI,YAAY,CAAC,kBAAkB,KAAK,KAAK,CAAC,EAAE;oBAC9C,YAAY,CAAC,kBAAkB,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;iBAC/D;aACF,CAAC,CAAC;SACJ;QAES,+BAAY,GAAtB,UAAuB,UAAkB,EAAE,UAAkB;SAE5D;QAES,gCAAa,GAAvB,UAAwB,UAAkB,EAAE,UAAkB;YAC5D,IAAI,CAAC,UAAU,CAAC,UAAU,YAA8B;gBACtD,IAAI,YAAY,CAAC,iBAAiB,KAAK,KAAK,CAAC,EAAE;oBAC7C,YAAY,CAAC,iBAAiB,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;iBAC9D;aACF,CAAC,CAAC;SACJ;QAMD,iCAAc,GAAd,UAAe,YAAuB,EAAE,WAAgC;YACtE,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,iBAAM,cAAc,YAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACjD;QAED,iCAAc,GAAd,UAAe,YAAuB,EAAE,WAAgC;YACtE,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,iBAAM,cAAc,YAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACjD;QAED,mCAAgB,GAAhB,UAAiB,SAAe,EAAE,WAA2B;YAC3D,OAAO,WAAW,CAAC;SACpB;QAED,iCAAc,GAAd,UAAe,WAAgC;YAC7C,IAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YAClD,cAAc,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;YAClD,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YACxC,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YACtC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YAC5C,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YACtC,OAAO,cAAc,CAAC;SACvB;QAED,0BAAO,GAAP,UAAQ,CAAS,EAAE,CAAS,EAAE,WAAgC;YAC5D,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC/C,OAAO,iBAAM,OAAO,YAAC,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;SACzC;QAGH,eAAC;IAAD,CAlGA,CAAuCC,mBAAe;;ICFtD;QAAuE,sCAA4B;QAAnG;;SAgBC;QAfC,qDAAwB,GAAxB,UAAyB,aAA6B,EAAE,IAAO;SAE9D;QAED,oDAAuB,GAAvB,UAAwB,aAA6B,EAAE,IAAO;SAE7D;QAED,+CAAkB,GAAlB,UAAmB,UAAkB,EAAE,UAAkB,EAAE,IAAO;SAEjE;QAED,8CAAiB,GAAjB,UAAkB,UAAkB,EAAE,UAAkB,EAAE,IAAO;SAEhE;QACH,yBAAC;IAAD,CAhBA,CAAuEC,6BAAyB;;ICDhG;QAIE,+BAAY,GAAmB;YAC7B,cAAc,CAAC,IAAI,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;SACjB;QAED,sBAAI,sCAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,IAAI,CAAC;aAClB;;;WAAA;QAED,sBAAI,yCAAM;iBAAV;gBACE,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC9B,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,MAAM,GAAG,cAAc,CAAC,gBAAiB,CAAC,uBAAuB,CAAC,MAAM,CAAkB,CAAC;iBAC5F;gBACD,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,OAAO,IAAIL,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;iBACvE;qBAAM;oBACL,OAAOA,UAAM,CAAC,KAAK,EAAE,CAAC;iBACvB;aACF;;;WAAA;QAID,uCAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,IAAI,QAAsB,CAAC;YAC3B,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;gBAC3B,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAI,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aAC9E;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBAC7B,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aACnF;iBAAM;gBACL,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aACrF;YACD,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC3C,OAAO,KAAK,KAAK,IAAI,GAAG,IAAIC,YAAO,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,GAAGA,YAAO,CAAC,MAAM,EAAE,CAAC;SAC1E;QAID,yCAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,IAAI,SAA6B,CAAC;YAClC,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;gBACzB,SAAS,GAAG,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAE,EAAC,CAAC;aAC3B;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBAC3B,SAAS,GAAG,EAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC;aAChC;iBAAM;gBACL,SAAS,GAAG,CAAC,CAAC;aACf;YACD,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACzC,OAAO,KAAK,KAAK,IAAI,GAAG,IAAIC,YAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAGA,YAAQ,CAAC,MAAM,EAAE,CAAC;SAC3F;QACH,4BAAC;IAAD,CAAC;;IClDD;QAAiC,+BAAQ;QAUvC,qBAAY,GAAmB;YAA/B,YACE,iBAAO,SAOR;YANC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC/C,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAChB,KAAI,CAAC,cAAc,GAAG,IAAI,qBAAqB,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;YAC3D,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,QAAQ,CAAC;YAChC,KAAI,CAAC,OAAO,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;;SACzB;QAED,sBAAI,4BAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,IAAI,CAAC;aAClB;;;WAAA;QAES,6BAAO,GAAjB,UAAkB,GAAmB;YACnC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SACvC;QAED,sBAAI,uCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAID,6BAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC1E;QAID,+BAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC5E;QAED,sBAAI,sCAAa;iBAAjB;gBACE,OAAO,IAAI,CAAC,cAAc,CAAC;aAC5B;;;WAAA;QAED,sCAAgB,GAAhB,UAAiB,aAAoC;YACnD,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;YACvC,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;SACzC;QAED,sBAAI,gCAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,gCAAU,GAAV,UAAW,UAAkB;YAC3B,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;YACjC,IAAI,UAAU,KAAK,UAAU,EAAE;gBAC7B,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC5C,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;gBAC3B,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;aAC5C;SACF;QAED,sBAAI,mCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,sBAAI,gCAAO;iBAAX;gBACE,OAAO,CAAC,CAAC;aACV;;;WAAA;QAED,sBAAI,iCAAQ;iBAAZ;gBACE,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC9B,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,MAAM,GAAG,cAAc,CAAC,gBAAiB,CAAC,uBAAuB,CAAC,MAAM,CAAkB,CAAC;iBAC5F;gBACD,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,OAAO,IAAIF,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;iBACvE;qBAAM;oBACL,OAAOA,UAAM,CAAC,KAAK,EAAE,CAAC;iBACvB;aACF;;;WAAA;QAES,iCAAW,GAArB;YACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC5C;QAED,mCAAa,GAAb;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,OAAO,IAAI,CAAC,UAAU,CAAC;aACxB;iBAAM;gBACL,IAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;gBACtB,IAAM,SAAS,GAAGG,SAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC/C,IAAM,YAAY,GAAGA,SAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAmB,CAAC,CAAC;gBACtG,IAAM,kBAAkB,GAAGA,SAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAmB,CAAC,CAAC;gBACrH,IAAM,MAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACnD,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;gBAC1C,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACpB,OAAO,MAAM,CAAC;aACf;SACF;QACH,kBAAC;IAAD,CA7GA,CAAiC,QAAQ;;ICHzC;QAAgF,yCAAqB;QAArG;;SAQC;QAPC,wDAAwB,GAAxB,UAAyB,aAAoC,EAAE,IAAO;SAErE;QAED,uDAAuB,GAAvB,UAAwB,aAAoC,EAAE,IAAO;SAEpE;QACH,4BAAC;IAAD,CARA,CAAgF,kBAAkB;;ICDlG;QAIE,iCAAY,GAAqB;YAC/B,cAAc,CAAC,IAAI,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;SACjB;QAED,sBAAI,wCAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,IAAI,CAAC;aAClB;;;WAAA;QAED,sBAAI,2CAAM;iBAAV;gBACE,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC9B,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,MAAM,GAAG,cAAc,CAAC,gBAAiB,CAAC,uBAAuB,CAAC,MAAM,CAAkB,CAAC;iBAC5F;gBACD,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,OAAO,IAAIH,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;iBACvE;qBAAM;oBACL,OAAOA,UAAM,CAAC,KAAK,EAAE,CAAC;iBACvB;aACF;;;WAAA;QAID,yCAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,IAAI,QAAsB,CAAC;YAC3B,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;gBAC3B,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAI,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aAC9E;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBAC7B,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aACnF;iBAAM;gBACL,QAAQ,GAAG,EAAC,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,gBAAgB,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,EAAiB,CAAC;aACrF;YACD,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC3C,OAAO,KAAK,KAAK,IAAI,GAAG,IAAIC,YAAO,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,GAAGA,YAAO,CAAC,MAAM,EAAE,CAAC;SAC1E;QAID,2CAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,IAAI,SAA6B,CAAC;YAClC,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;gBACzB,SAAS,GAAG,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAE,EAAC,CAAC;aAC3B;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBAC3B,SAAS,GAAG,EAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC;aAChC;iBAAM;gBACL,SAAS,GAAG,CAAC,CAAC;aACf;YACD,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACzC,OAAO,KAAK,KAAK,IAAI,GAAG,IAAIC,YAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAGA,YAAQ,CAAC,MAAM,EAAE,CAAC;SAC3F;QACH,8BAAC;IAAD,CAAC;;IClDD;QAAmC,iCAAQ;QAYzC,uBAAY,GAAqB;YAAjC,YACE,iBAAO,SAQR;YAPC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC/C,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAChB,KAAI,CAAC,cAAc,GAAG,IAAI,uBAAuB,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;YAC7D,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC;YACtC,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;YAChC,KAAI,CAAC,OAAO,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;;SACzB;QAED,sBAAI,8BAAG;iBAAP;gBACE,OAAO,IAAI,CAAC,IAAI,CAAC;aAClB;;;WAAA;QAES,+BAAO,GAAjB,UAAkB,GAAqB;YACrC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SACvC;QAED,sBAAI,yCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAID,+BAAO,GAAP,UAAQ,GAAyB,EAAE,GAAY;YAC7C,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC1E;QAID,iCAAS,GAAT,UAAU,CAAsB,EAAE,CAAU;YAC1C,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;SAC5E;QAED,sBAAI,wCAAa;iBAAjB;gBACE,OAAO,IAAI,CAAC,cAAc,CAAC;aAC5B;;;WAAA;QAED,wCAAgB,GAAhB,UAAiB,aAAsC;YACrD,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC;YACvC,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;SACzC;QAED,sBAAI,kCAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,kCAAU,GAAV,UAAW,UAAkB;YAC3B,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;YACjC,IAAI,UAAU,KAAK,UAAU,EAAE;gBAC7B,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC5C,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;gBAC3B,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;aAC5C;SACF;QAED,sBAAI,qCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,sBAAI,kCAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,sBAAI,mCAAQ;iBAAZ;gBACE,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC9B,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,MAAM,GAAG,cAAc,CAAC,gBAAiB,CAAC,uBAAuB,CAAC,MAAM,CAAkB,CAAC;iBAC5F;gBACD,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,OAAO,IAAIF,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;iBACvE;qBAAM;oBACL,OAAOA,UAAM,CAAC,KAAK,EAAE,CAAC;iBACvB;aACF;;;WAAA;QAES,mCAAW,GAArB;YACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;YAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC5C;QAED,qCAAa,GAAb;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,OAAO,IAAI,CAAC,UAAU,CAAC;aACxB;iBAAM;gBACL,IAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;gBACtB,IAAM,SAAS,GAAGG,SAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC/C,IAAM,YAAY,GAAGA,SAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAmB,CAAC,CAAC;gBACtG,IAAM,eAAe,GAAGA,SAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAmB,CAAC,CAAC;gBAC/G,IAAM,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAChD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACpB,OAAO,MAAM,CAAC;aACf;SACF;QACH,oBAAC;IAAD,CAhHA,CAAmC,QAAQ;;ICH3C;QAAsF,2CAAqB;QAA3G;;SAQC;QAPC,0DAAwB,GAAxB,UAAyB,aAAsC,EAAE,IAAO;SAEvE;QAED,yDAAuB,GAAvB,UAAwB,aAAsC,EAAE,IAAO;SAEtE;QACH,8BAAC;IAAD,CARA,CAAsF,kBAAkB;;ICgBxG;QASE,mBAAY,KAAc,EAAE,OAAe,EAAE,OAAe,EAAE,UAAkB,EACpE,YAAoB,EAAE,KAAY,EAAE,IAAsB;YACpE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;YACjC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClB;QAED,6BAAS,GAAT;YACE,OAAO,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;mBAClE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE;mBAC5D,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,KAAK,CAAC,CAAC;SACvF;QASD,uBAAG,GAAH,UAAI,KAAyC,EAAE,OAAmB,EAAE,OAA8B,EAAE,UAAiC,EAAE,YAAmC,EAAE,KAAgB;YAC1L,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YAClH,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EACvD,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC3D;QAED,0BAAM,GAAN,UAAO,IAAa;YAClB,IAAI,IAAI,KAAK,IAAI,EAAE;gBACjB,OAAO,IAAI,CAAC;aACb;iBAAM,IAAI,IAAI,YAAY,SAAS,EAAE;gBACpC,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;uBAC9D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;uBAC5E,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;uBAC5EG,YAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;aAC5C;YACD,OAAO,KAAK,CAAC;SACd;QAED,4BAAQ,GAAR;YACE,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;gBACpB,IAAI,CAAC,GAAG,EAAE,CAAC;gBACX,IAAI,SAAS,GAAG,IAAiB,CAAC;gBAClC,GAAG;oBACD,IAAI,SAAS,CAAC,KAAK,EAAE;wBACnB,CAAC,IAAI,OAAO,CAAC;wBACb,CAAC,IAAI,GAAG,CAAC;qBACV;oBACD,CAAC,IAAI,SAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;oBAClC,CAAC,IAAI,GAAG,CAAC;oBACT,CAAC,IAAI,SAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;oBAClC,CAAC,IAAI,GAAG,CAAC;oBACT,CAAC,IAAI,SAAS,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;oBACrC,CAAC,IAAI,GAAG,CAAC;oBACT,CAAC,IAAI,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;oBACvC,CAAC,IAAI,GAAG,CAAC;oBACT,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;oBAChC,IAAI,SAAS,CAAC,IAAI,KAAK,IAAI,EAAE;wBAC3B,CAAC,IAAI,IAAI,CAAC;wBACV,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;wBAC3B,SAAS;qBACV;oBACD,MAAM;iBACP,QAAQ,IAAI,EAAE;gBACf,OAAO,CAAC,CAAC;aACV;iBAAM;gBACL,OAAO,MAAM,CAAC;aACf;SACF;QAGM,cAAI,GAAX;YACE,IAAI,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;gBAC9B,SAAS,CAAC,KAAK,GAAG,IAAI,SAAS,CAAC,KAAK,EAAEC,aAAM,CAAC,IAAI,EAAE,EAAEA,aAAM,CAAC,IAAI,EAAE,EAAEA,aAAM,CAAC,IAAI,EAAE,EAAEA,aAAM,CAAC,IAAI,EAAE,EAAEC,WAAK,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,CAAC;aACzH;YACD,OAAO,SAAS,CAAC,KAAK,CAAC;SACxB;QASM,YAAE,GAAT,UAAU,KAAyC,EAAE,OAAmB,EAAE,OAA8B,EAAE,UAAiC,EAAE,YAAmC,EAAEC,OAAgB;YAChM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC1B,OAAO,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;aACxC;iBAAM,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBACrC,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC1BA,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC7B,UAAU,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC3B,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBACjCE,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC7B,UAAU,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBACjCE,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5C,UAAU,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM;oBACL,MAAM,IAAI,SAAS,CAAC,EAAE,GAAG,SAAS,CAAC,CAAC;iBACrC;gBACD,KAAK,GAAG,KAAK,CAAC;aACf;iBAAM;gBACL,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC1BE,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC7B,UAAU,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC3B,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBACjCE,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,IAAI,EAAE,CAAC;oBAC7B,UAAU,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;oBACjCE,OAAK,GAAGD,WAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,YAAY,GAAGD,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5C,UAAU,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,OAAO,GAAGA,aAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxC;qBAAM;oBACL,MAAM,IAAI,SAAS,CAAC,EAAE,GAAG,SAAS,CAAC,CAAC;iBACrC;aACF;YACD,OAAO,IAAI,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,YAAY,EAAEE,OAAK,EAAE,IAAI,CAAC,CAAC;SACtF;QAEM,iBAAO,GAAd;YAAe,gBAAyB;iBAAzB,UAAyB,EAAzB,qBAAyB,EAAzB,IAAyB;gBAAzB,2BAAyB;;YACtC,IAAI,KAAmB,CAAC;YACxB,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC1B,KAAK,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;aAC1B;iBAAM,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBACjC,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;aACtB;iBAAM;gBACL,KAAK,GAAG,SAAS,CAAC;aACnB;YACD,IAAI,KAAK,YAAY,SAAS,EAAE;gBAC9B,OAAO,KAAK,CAAC;aACd;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBACpC,OAAO,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC/B;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,IAAK,KAAa,CAAC,MAAM,KAAK,KAAK,CAAC,EAAE;gBAC1F,KAAK,GAAG,KAAsB,CAAC;gBAC/B,IAAM,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC;gBACnC,IAAM,OAAO,GAAG,KAAK,CAAC,OAAO,KAAK,KAAK,CAAC,GAAGF,aAAM,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;gBACzF,IAAM,OAAO,GAAG,KAAK,CAAC,OAAO,KAAK,KAAK,CAAC,GAAGA,aAAM,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;gBACzF,IAAM,UAAU,GAAG,KAAK,CAAC,UAAU,KAAK,KAAK,CAAC,GAAGA,aAAM,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;gBAClG,IAAM,YAAY,GAAG,KAAK,CAAC,YAAY,KAAK,KAAK,CAAC,GAAGA,aAAM,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;gBACxG,IAAME,OAAK,GAAG,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,GAAGD,WAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAGA,WAAK,CAAC,KAAK,EAAE,CAAC;gBAClF,OAAO,IAAI,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,YAAY,EAAEC,OAAK,EAAE,IAAI,CAAC,CAAC;aACtF;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,IAAK,KAAa,CAAC,MAAM,GAAG,CAAC,EAAE;gBACnF,KAAK,GAAG,KAAuB,CAAC;gBAChC,IAAI,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;oBACxC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBACrC;gBACD,OAAO,SAAS,CAAC;aAClB;YACD,MAAM,IAAI,SAAS,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC;SACjC;QAEM,mBAAS,GAAhB,UAAiB,KAAY;YAC3B,IAAI,SAAgC,CAAC;YACrC,KAAK,CAAC,OAAO,CAAC,UAAU,IAAU,EAAE,KAAa;gBAC/C,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;gBACxC,IAAI,MAAM,CAAC,SAAS,EAAE,EAAE;oBACtB,IAAI,OAA0B,CAAC;oBAC/B,IAAI,SAA2B,CAAC;oBAChC,IAAI,SAA2B,CAAC;oBAChC,IAAI,YAA8B,CAAC;oBACnC,IAAI,cAAgC,CAAC;oBACrC,IAAI,OAAwB,CAAC;oBAC7B,MAAM,CAAC,OAAO,CAAC,UAAU,IAAU,EAAE,KAAa;wBAChD,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;wBACnC,IAAI,GAAG,KAAK,KAAK,CAAC,EAAE;4BAClB,IAAI,GAAG,KAAK,OAAO,EAAE;gCACnB,OAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,YAAY,CAAC,OAAK,CAAC,CAAC;6BAC5C;iCAAM,IAAI,GAAG,KAAK,SAAS,EAAE;gCAC5B,SAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAACF,aAAM,CAAC,IAAI,EAAE,EAAE,SAAO,CAAC,CAAC;6BACvD;iCAAM,IAAI,GAAG,KAAK,SAAS,EAAE;gCAC5B,SAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,EAAE,SAAO,CAAC,CAAC;6BACvD;iCAAM,IAAI,GAAG,KAAK,YAAY,EAAE;gCAC/B,YAAU,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,EAAE,YAAU,CAAC,CAAC;6BAC7D;iCAAM,IAAI,GAAG,KAAK,cAAc,EAAE;gCACjC,cAAY,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,EAAE,cAAY,CAAC,CAAC;6BACjE;iCAAM,IAAI,GAAG,KAAK,OAAO,EAAE;gCAC1B,OAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAACC,WAAK,CAAC,IAAI,EAAE,EAAE,OAAK,CAAC,CAAC;6BAClD;yBACF;6BAAM,IAAI,IAAI,YAAYE,eAAK,EAAE;4BAChC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,YAAYC,cAAI,IAAI,IAAI,CAAC,KAAK,KAAK,OAAO,EAAE;gCACjE,OAAK,GAAG,IAAI,CAAC;6BACd;iCAAM,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,OAAK,KAAK,KAAK,CAAC,EAAE;gCACzD,SAAO,GAAG,IAAI,CAAC,IAAI,CAACJ,aAAM,CAAC,IAAI,EAAE,EAAE,SAAO,CAAC,CAAC;6BAC7C;iCAAM,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,OAAK,KAAK,KAAK,CAAC,EAAE;gCACzD,SAAO,GAAG,IAAI,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,EAAE,SAAO,CAAC,CAAC;6BAC7C;iCAAM,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,OAAK,KAAK,KAAK,CAAC,EAAE;gCACzD,YAAU,GAAG,IAAI,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,EAAE,YAAU,CAAC,CAAC;gCAClD,IAAI,YAAU,KAAK,KAAK,CAAC,EAAE;oCACzB,OAAK,GAAG,IAAI,CAAC,IAAI,CAACC,WAAK,CAAC,IAAI,EAAE,EAAE,OAAK,CAAC,CAAC;iCACxC;6BACF;iCAAM,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,OAAK,KAAK,KAAK,CAAC,KAAK,OAAK,KAAK,KAAK,CAAC,EAAE;gCAC/E,cAAY,GAAG,IAAI,CAAC,IAAI,CAACD,aAAM,CAAC,IAAI,EAAE,EAAE,cAAY,CAAC,CAAC;gCACtD,IAAI,cAAY,KAAK,KAAK,CAAC,EAAE;oCAC3B,OAAK,GAAG,IAAI,CAAC,IAAI,CAACC,WAAK,CAAC,IAAI,EAAE,EAAE,OAAK,CAAC,CAAC;iCACxC;6BACF;iCAAM,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,OAAK,KAAK,KAAK,CAAC,KAAK,OAAK,KAAK,KAAK,CAAC,EAAE;gCAC/E,OAAK,GAAG,IAAI,CAAC,IAAI,CAACA,WAAK,CAAC,IAAI,EAAE,EAAE,OAAK,CAAC,CAAC;6BACxC;yBACF;qBACF,CAAC,CAAC;oBACH,OAAK,GAAG,OAAK,KAAK,KAAK,CAAC,GAAG,OAAK,GAAG,KAAK,CAAC;oBACzC,SAAO,GAAG,SAAO,KAAK,KAAK,CAAC,GAAG,SAAO,GAAGD,aAAM,CAAC,IAAI,EAAE,CAAC;oBACvD,SAAO,GAAG,SAAO,KAAK,KAAK,CAAC,GAAG,SAAO,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;oBACvD,YAAU,GAAG,YAAU,KAAK,KAAK,CAAC,GAAG,YAAU,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;oBAChE,cAAY,GAAG,cAAY,KAAK,KAAK,CAAC,GAAG,cAAY,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;oBACtE,OAAK,GAAG,OAAK,KAAK,KAAK,CAAC,GAAG,OAAK,GAAGC,WAAK,CAAC,KAAK,EAAE,CAAC;oBACjD,IAAM,IAAI,GAAG,IAAI,SAAS,CAAC,OAAK,IAAI,KAAK,EAAE,SAAO,EAAE,SAAO,EAAE,YAAU,EAAE,cAAY,EAAE,OAAK,EAAE,IAAI,CAAC,CAAC;oBACpG,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;wBACxB,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;qBACjC;yBAAM;wBACL,SAAS,GAAG,IAAI,CAAC;qBAClB;iBACF;aACF,CAAC,CAAC;YACH,OAAO,SAAS,CAAC;SAClB;QAEM,eAAK,GAAZ,UAAa,MAAc;YACzB,IAAI,KAAK,GAAGI,aAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,KAAK,CAAC,MAAM,EAAE,IAAIA,aAAO,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;gBAC3D,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;aACtB;YACD,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,MAAM,CAAC,MAAM,EAAE,EAAE;gBACnB,OAAO,KAAK,CAAC,MAAM,EAAE,IAAIA,aAAO,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;oBAC3D,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;iBACtB;aACF;YACD,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;gBACvC,MAAM,GAAGC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;aACrD;YACD,OAAO,MAAM,CAAC,IAAI,EAAE,CAAC;SACtB;QAGM,gBAAM,GAAb,UAAc,KAAc;YAC1B,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,EAAE;gBAC/C,IAAM,IAAI,GAAG,KAAsB,CAAC;gBACpC,OAAO,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC;aACpF;YACD,OAAO,KAAK,CAAC;SACd;QAGM,cAAI,GAAX,UAAY,IAAgB;YAC1B,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;gBACnB,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAChC;YACD,IAAI,IAAI,KAAK,SAAS,CAAC,IAAI,EAAE,EAAE;gBAC7B,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjC;iBAAM;gBACL,IAAI,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;oBAC9B,SAAS,CAAC,KAAK,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;iBACxD;gBACD,OAAO,SAAS,CAAC,KAAK,CAAC;aACxB;SACF;QAOH,gBAAC;IAAD,CAAC;;ICrTD;QAAqC,mCAAiB;QAUpD,yBAAY,SAAqB,EAAE,WAA4B,EACnD,aAA8B,EAAE,aAA8B,EAC9D,gBAAiC,EAAE,kBAAmC,EACtE,WAA2B,EAAE,IAAa;YAHtD,YAIE,iBAAO,SASR;YARC,KAAI,CAAC,SAAS,GAAG,SAAS,CAAC;YAC3B,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,KAAI,CAAC,aAAa,GAAG,aAAa,CAAC;YACnC,KAAI,CAAC,aAAa,GAAG,aAAa,CAAC;YACnC,KAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;YACzC,KAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;YAC7C,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;SAClB;QAED,8BAAI,GAAJ,UAAK,KAAY;YACf,OAAO,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAC3D,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,kBAAkB,EAClE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3D;QAEM,qBAAK,GAAZ,UAAa,KAAY,EAAE,SAAqB,EAAE,WAA4B,EACjE,aAA8B,EAAE,aAA8B,EAC9D,gBAAiC,EAAE,kBAAmC,EACtE,WAA2B,EAAE,IAAgB;YAAhB,qBAAA,EAAA,QAAgB;YACxD,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,GAAG;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAEF,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC/D,KAAK,CAAC,IAAI,EAAE,CAAC;qBACd;oBACD,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIA,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;4BACtB,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM;4BACL,IAAI,GAAG,CAAC,CAAC;yBACV;qBACF;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,WAAW,GAAG,WAAW,IAAIF,aAAO,CAAC,YAAY,EAAE,CAAC;oBACpD,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAEA,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC/D,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;wBACrB,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qBACtB;oBACD,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBACpB,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;wBACjC,QAAQ,KAAK;4BACX,KAAK,OAAO;gCAAE,IAAI,GAAG,CAAC,CAAC;gCAAC,MAAM;4BAC9B,KAAK,MAAM,EAAE,OAAOC,YAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;4BAClD,SAAS,OAAOA,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,OAAO,CAAC,sBAAsB,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;yBACzF;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIF,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACjC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACb,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM;4BACL,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;yBAC1D;qBACF;yBAAM,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBACzB,OAAOD,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,aAAa,KAAK,KAAK,CAAC,EAAE;wBAC5B,OAAO,KAAK,CAAC,MAAM,EAAE,IAAIF,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACtD,KAAK,CAAC,IAAI,EAAE,CAAC;yBACd;wBACD,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;4BACpB,aAAa,GAAGG,mBAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBAC3C;qBACF;yBAAM;wBACL,aAAa,GAAG,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBAC3C;oBACD,IAAI,aAAa,KAAK,KAAK,CAAC,EAAE;wBAC5B,IAAI,aAAa,CAAC,MAAM,EAAE,EAAE;4BAC1B,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM,IAAI,aAAa,CAAC,OAAO,EAAE,EAAE;4BAClC,OAAO,aAAa,CAAC,OAAO,EAAE,CAAC;yBAChC;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIH,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACjC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACb,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM;4BACL,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;yBAC1D;qBACF;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOD,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,aAAa,KAAK,KAAK,CAAC,EAAE;wBAC5B,OAAO,KAAK,CAAC,MAAM,EAAE,IAAIF,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACtD,KAAK,CAAC,IAAI,EAAE,CAAC;yBACd;wBACD,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;4BACpB,aAAa,GAAGG,mBAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBAC3C;qBACF;yBAAM;wBACL,aAAa,GAAG,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBAC3C;oBACD,IAAI,aAAa,KAAK,KAAK,CAAC,EAAE;wBAC5B,IAAI,aAAa,CAAC,MAAM,EAAE,EAAE;4BAC1B,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM,IAAI,aAAa,CAAC,OAAO,EAAE,EAAE;4BAClC,OAAO,aAAa,CAAC,OAAO,EAAE,CAAC;yBAChC;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIH,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACjC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACb,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM;4BACL,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;yBAC1D;qBACF;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOD,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,gBAAgB,KAAK,KAAK,CAAC,EAAE;wBAC/B,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAEF,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;4BAC/D,KAAK,CAAC,IAAI,EAAE,CAAC;yBACd;wBACD,IAAI,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,IAAW,CAAC,IAAI,EAAE,IAAW,CAAC,IAAI,EAAE,CAAQ,EAAE;4BAC3E,gBAAgB,GAAGG,mBAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBAC9C;6BAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;4BAC3B,IAAI,GAAG,EAAE,CAAC;yBACX;qBACF;yBAAM;wBACL,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACjD;oBACD,IAAI,gBAAgB,KAAK,KAAK,CAAC,EAAE;wBAC/B,IAAI,gBAAgB,CAAC,MAAM,EAAE,EAAE;4BAC7B,IAAI,GAAG,CAAC,CAAC;yBACV;6BAAM,IAAI,gBAAgB,CAAC,OAAO,EAAE,EAAE;4BACrC,OAAO,gBAAgB,CAAC,OAAO,EAAE,CAAC;yBACnC;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIH,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACjC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACb,IAAI,GAAG,EAAE,CAAC;yBACX;6BAAM;4BACL,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;yBAC1D;qBACF;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOD,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,EAAE,EAAE;oBACf,IAAI,kBAAkB,KAAK,KAAK,CAAC,EAAE;wBACjC,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAEF,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;4BAC/D,KAAK,CAAC,IAAI,EAAE,CAAC;yBACd;wBACD,IAAI,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,IAAW,CAAC,IAAI,EAAE,IAAW,CAAC,IAAI,EAAE,CAAQ,EAAE;4BAC3E,kBAAkB,GAAGG,mBAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBAChD;6BAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;4BAC3B,IAAI,GAAG,EAAE,CAAC;yBACX;qBACF;yBAAM;wBACL,kBAAkB,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACrD;oBACD,IAAI,kBAAkB,KAAK,KAAK,CAAC,EAAE;wBACjC,IAAI,kBAAkB,CAAC,MAAM,EAAE,EAAE;4BAC/B,IAAI,GAAG,EAAE,CAAC;yBACX;6BAAM,IAAI,kBAAkB,CAAC,OAAO,EAAE,EAAE;4BACvC,OAAO,kBAAkB,CAAC,OAAO,EAAE,CAAC;yBACrC;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,EAAE,EAAE;oBACf,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;wBAClB,IAAIH,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACjC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACb,IAAI,GAAG,EAAE,CAAC;yBACX;6BAAM;4BACL,OAAOC,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;yBAC1D;qBACF;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOD,YAAM,CAAC,KAAK,CAACC,gBAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qBACnD;iBACF;gBACD,IAAI,IAAI,KAAK,EAAE,EAAE;oBACf,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;wBAC1B,OAAO,KAAK,CAAC,MAAM,EAAE,IAAIF,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE;4BACtD,KAAK,CAAC,IAAI,EAAE,CAAC;yBACd;wBACD,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;4BACpB,WAAW,GAAGI,iBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBACxC;qBACF;yBAAM;wBACL,WAAW,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACvC;oBACD,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;wBAC1B,IAAI,WAAW,CAAC,MAAM,EAAE,EAAE;4BACxB,IAAM,KAAK,GAAG,WAAW,KAAK,KAAK,CAAC,GAAG,WAAW,CAAC,IAAI,EAAE,KAAK,OAAO,GAAG,KAAK,CAAC;4BAC9E,IAAM,OAAO,GAAG,aAAc,CAAC,IAAI,EAAE,CAAC;4BACtC,IAAM,OAAO,GAAG,aAAc,CAAC,IAAI,EAAE,CAAC;4BACtC,IAAM,UAAU,GAAG,gBAAgB,KAAK,KAAK,CAAC,GAAG,gBAAgB,CAAC,IAAI,EAAE,GAAGT,aAAM,CAAC,IAAI,EAAE,CAAC;4BACzF,IAAM,YAAY,GAAG,kBAAkB,KAAK,KAAK,CAAC,GAAG,kBAAkB,CAAC,IAAI,EAAE,GAAGA,aAAM,CAAC,IAAI,EAAE,CAAC;4BAC/F,IAAME,OAAK,GAAG,WAAY,CAAC,IAAI,EAAE,CAAC;4BAClC,IAAM,IAAI,GAAG,IAAI,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,YAAY,EAAEA,OAAK,EAAE,IAAI,CAAC,CAAC;4BAC3F,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;gCACxB,SAAS,GAAG,IAAI,CAAC;6BAClB;iCAAM;gCACL,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;6BACjC;4BACD,WAAW,GAAG,KAAK,CAAC,CAAC;4BACrB,aAAa,GAAG,KAAK,CAAC,CAAC;4BACvB,aAAa,GAAG,KAAK,CAAC,CAAC;4BACvB,gBAAgB,GAAG,KAAK,CAAC,CAAC;4BAC1B,kBAAkB,GAAG,KAAK,CAAC,CAAC;4BAC5B,WAAW,GAAG,KAAK,CAAC,CAAC;4BACrB,IAAI,GAAG,EAAE,CAAC;yBACX;6BAAM,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE;4BAChC,OAAO,WAAW,CAAC,OAAO,EAAE,CAAC;yBAC9B;qBACF;iBACF;gBACD,IAAI,IAAI,KAAK,EAAE,EAAE;oBACf,OAAO,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,EAAEG,aAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC/D,KAAK,CAAC,IAAI,EAAE,CAAC;qBACd;oBACD,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,EAAS;wBACrC,KAAK,CAAC,IAAI,EAAE,CAAC;wBACb,IAAI,GAAG,CAAC,CAAC;wBACT,SAAS;qBACV;yBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;wBAC3B,OAAOC,YAAM,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;qBAChC;iBACF;gBACD,MAAM;aACP,QAAQ,IAAI,EAAE;YACf,OAAO,IAAI,eAAe,CAAC,SAAS,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EACpD,gBAAgB,EAAE,kBAAkB,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;SACrF;QACH,sBAAC;IAAD,CApQA,CAAqCA,YAAM,GAoQ1C;IACD,SAAS,CAAC,MAAM,GAAG,eAAe;;ICrQlC;QAAmC,iCAA6B;QAG9D,uBAAY,IAAgB;YAA5B,YACE,iBAAO,SAER;YADC,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;;SACnB;QAID,4BAAI,GAAJ,UAAK,IAAgB;YACnB,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC1B,OAAO,IAAI,CAAC,KAAK,CAAC;aACnB;iBAAM;gBACL,OAAO,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC;aAChC;SACF;QAED,4BAAI,GAAJ,UAAK,SAAuB;YAC1B,IAAI,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,SAAS,CAAc,CAAC;YACvD,IAAM,MAAM,GAAGI,gBAAM,CAAC,MAAM,EAAE,CAAC;YAC/B,GAAG;gBACD,IAAM,MAAM,GAAGA,gBAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAChC,IAAI,MAAM,CAAC,KAAK,EAAE;oBAChB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACtB;gBACD,MAAM,CAAC,IAAI,CAACV,aAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBAChD,MAAM,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBAChD,MAAM,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;gBACnD,MAAM,CAAC,IAAI,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;gBACrD,MAAM,CAAC,IAAI,CAACC,WAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC7C,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;gBACjC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,EAAE;oBACxB,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;oBACrB,SAAS;iBACV;gBACD,MAAM;aACP,QAAQ,IAAI,EAAE;YACf,OAAO,MAAM,CAAC;SACf;QAED,4BAAI,GAAJ,UAAK,IAAU;YACb,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC7B,IAAI,SAAgC,CAAC;YACrC,IAAI;gBACF,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACvC,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;oBACxB,IAAM,MAAM,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;oBACnC,IAAI,MAAM,KAAK,KAAK,CAAC,EAAE;wBACrB,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;qBACrC;iBACF;aACF;YAAC,OAAO,CAAC,EAAE;aAEX;YACD,OAAO,SAAS,CAAC;SAClB;QACH,oBAAC;IAAD,CAzDA,CAAmCU,cAAI,GAyDtC;IACD,SAAS,CAAC,IAAI,GAAG,aAAa;;ICzD9B;QAKE;YACE,IAAI,CAAC,IAAI,GAAGC,SAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;YAC1C,IAAI,CAAC,KAAK,GAAGX,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACpC,IAAI,CAAC,eAAe,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SAC/C;QACH,eAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,kBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,oBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,mBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEA,WAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SAC1D;QACH,mBAAC;IAAD,CAAC,IAAA;IAED;QASE;YACE,IAAI,CAAC,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAC;YAE3B,IAAI,CAAC,OAAO,GAAG,IAAI,WAAW,EAAE,CAAC;YACjC,IAAI,CAAC,SAAS,GAAG,IAAI,aAAa,EAAE,CAAC;YACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,EAAE,CAAC;YAEnC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,EAAE,CAAC;SACpC;QAED,4BAAQ,GAAR,UAAyB,IAAO;YAC9B,OAAO,IAAI,CAAC;SACb;QACH,gBAAC;IAAD,CAAC;;IC7ED;QAKE;YACE,IAAI,CAAC,IAAI,GAAGW,SAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;YAC1C,IAAI,CAAC,KAAK,GAAGX,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACpC,IAAI,CAAC,eAAe,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SAC/C;QACH,gBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,mBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,qBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,SAAS,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACzC;QACH,oBAAC;IAAD,CAAC,IAAA;IAGD;QAIE;YACE,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEA,WAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SAC1D;QACH,oBAAC;IAAD,CAAC,IAAA;IAED;QASE;YACE,IAAI,CAAC,IAAI,GAAG,IAAI,SAAS,EAAE,CAAC;YAE5B,IAAI,CAAC,OAAO,GAAG,IAAI,YAAY,EAAE,CAAC;YAClC,IAAI,CAAC,SAAS,GAAG,IAAI,cAAc,EAAE,CAAC;YACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,aAAa,EAAE,CAAC;YAEpC,IAAI,CAAC,QAAQ,GAAG,IAAI,aAAa,EAAE,CAAC;SACrC;QAED,6BAAQ,GAAR,UAAyB,IAAO;YAC9B,OAAO,IAAI,CAAC;SACb;QACH,iBAAC;IAAD,CAAC;;IC1CM,IAAM,KAAK,GAAe,EAAgB,CAAC;IAElD,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,EAAE;QACnC,GAAG,EAAE;YAEH,IAAM,KAAK,GAAG,IAAI,SAAS,EAAE,CAAC;YAC9B,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,EAAE;gBACnC,KAAK,EAAE,KAAK;gBACZ,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;QACD,GAAG,EAAE,UAAU,KAAY;YAEzB,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,EAAE;gBACnC,KAAK,EAAE,KAAK;gBACZ,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;SACJ;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACnB,CAAC,CAAC;IAEH,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE;QACpC,GAAG,EAAE;YAEH,IAAM,KAAK,GAAG,IAAI,UAAU,EAAE,CAAC;YAC/B,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE;gBACpC,KAAK,EAAE,KAAK;gBACZ,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;SACd;QACD,GAAG,EAAE,UAAU,KAAY;YAEzB,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE;gBACpC,KAAK,EAAE,KAAK;gBACZ,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;SACJ;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACnB,CAAC;;ICxFF;QAA+B,6BAAQ;QAMrC,mBAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SAeZ;YAdC,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;YAC5B,KAAI,CAAC,WAAW,GAAGY,qBAAU,CAAC,QAAQ,CAAC,GAAG,EAAEC,eAAI,CAAC,QAAQ,CAAC,CAAC;YAC3D,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACzD,IAAI,OAAO,YAAY,KAAK,WAAW,EAAE;gBACvC,KAAI,CAAC,EAAE,CAAC,WAAW,EAAE,KAAI,CAAC,OAAO,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;gBACpD,KAAI,CAAC,EAAE,CAAC,OAAO,EAAE,KAAI,CAAC,gBAAgB,CAAC,CAAC;aACzC;iBAAM,IAAI,OAAO,UAAU,KAAK,WAAW,EAAE;gBAC5C,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;gBACzD,KAAI,CAAC,EAAE,CAAC,UAAU,EAAE,KAAI,CAAC,OAAO,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC,CAAC;gBACnD,KAAI,CAAC,EAAE,CAAC,OAAO,EAAE,KAAI,CAAC,gBAAgB,CAAC,CAAC;aACzC;iBAAM;gBACL,KAAI,CAAC,EAAE,CAAC,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;aAChC;;SACF;QAES,4BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;iBACjB,OAAO,CAAC,MAAM,CAAC;iBACf,QAAQ,CAAC,UAAU,CAAC;iBACpB,GAAG,CAAC,CAAC,CAAC;iBACN,KAAK,CAAC,CAAC,CAAC;iBACR,MAAM,CAAC,CAAC,CAAC;iBACT,IAAI,CAAC,CAAC,CAAC;iBACP,aAAa,CAAC,MAAM,CAAC;iBACrB,MAAM,CAAC,SAAS,CAAC,CAAC;YACvB,IAAI,CAAC,eAAe,CAAC,YAAY,CAACb,WAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SACnD;QAED,sBAAI,iCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,2BAAO,GAAP;YACE,OAAO,IAAI,CAAC,WAAW,KAAK,OAAO,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,CAAC;SACvE;QAED,4BAAQ,GAAR;YACE,OAAO,IAAI,CAAC,WAAW,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,CAAC;SACvE;QAID,8BAAU,GAAV,UAAWc,YAA+B;YACxC,IAAIA,YAAU,KAAK,KAAK,CAAC,EAAE;gBACzB,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;iBAAM;gBACLA,YAAU,GAAGF,qBAAU,CAAC,OAAO,CAACE,YAAU,CAAC,CAAC;gBAC5C,IAAI,CAAC,WAAW,GAAGA,YAAU,CAAC;gBAC9B,OAAO,IAAI,CAAC;aACb;SACF;QAED,wBAAI,GAAJ,UAAK,OAAe,EAAE,KAAkB;YACtC,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,EAAE;gBAClE,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;iBAC1B;qBAAM;oBACL,KAAK,GAAGF,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBACtB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,eAAe,CAAC,YAAY,CAACZ,WAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClD,IAAI,CAAC,eAAe,CAAC,YAAY,CAACA,WAAK,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC/F;qBAAM;oBACL,IAAI,CAAC,eAAe,CAAC,YAAY,CAACA,WAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;oBACxD,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,4BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;SAC9B;QAES,2BAAO,GAAjB;YACE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;SAC5B;QAED,wBAAI,GAAJ,UAAK,KAAkB;YACrB,IAAI,IAAI,CAAC,WAAW,KAAK,OAAO,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;gBAClE,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;iBAC1B;qBAAM;oBACL,KAAK,GAAGY,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,eAAe,CAAC,YAAY,CAACZ,WAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACzF;qBAAM;oBACL,IAAI,CAAC,eAAe,CAAC,YAAY,CAACA,WAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClD,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,4BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;SAC7B;QAES,2BAAO,GAAjB;YACE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACtB;QAES,2BAAO,GAAjB,UAAkB,KAAY;YAC5B,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,IAAI,QAAQ,YAAYe,WAAM,EAAE;gBAC9B,KAAK,CAAC,eAAe,EAAE,CAAC;gBACxB,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;aACpC;SACF;QAES,oCAAgB,GAA1B,UAA2B,KAAY;YACrC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;SACzB;QACH,gBAAC;IAAD,CA9HA,CAA+BC,aAAQ;;ICGvC;QAAsC,oCAAQ;QAM5C,0BAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SAGZ;YAFC,KAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC;YACvC,KAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;;SAC7B;QAES,mCAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;iBACxB,QAAQ,CAAC,UAAU,CAAC;iBACpB,KAAK,CAACjB,aAAM,CAAC,IAAI,EAAE,CAAC;iBACpB,MAAM,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC;iBACrB,YAAY,CAACA,aAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;iBAC5B,eAAe,CAACC,WAAK,CAAC,KAAK,EAAE,CAAC;iBAC9B,aAAa,CAAC,MAAM,CAAC,CAAC;SAC5B;QAED,sBAAI,+CAAiB;iBAArB;gBACE,OAAO,IAAI,CAAC,kBAAkB,CAAC;aAChC;;;WAAA;QAES,oCAAS,GAAnB;YACE,IAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC;YACvC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,iBAAM,SAAS,WAAE,CAAC;SACnB;QAED,qCAAU,GAAV,UAAW,OAAe,EAAE,OAAe,EAAE,OAAe,EACjD,UAAkC,EAAE,KAAiB;YAAjB,sBAAA,EAAA,SAAiB;YAC9D,IAAI,IAAI,CAAC,kBAAkB,KAAK,YAAY,EAAE;gBAC5C,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,KAAK,KAAK,CAAC,EAAE;oBACf,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;oBACxF,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC,UAAU,EAAE,KAAK,CAAQ,CAAC;iBAChE;qBAAM;oBACL,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAa,CAAC,qBAAqB,EAAE,CAAA;oBACrE,IAAM,EAAE,GAAG,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC;oBACvC,IAAM,EAAE,GAAG,OAAO,GAAG,YAAY,CAAC,GAAG,CAAC;oBACtC,IAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC;oBACjD,IAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;oBAClD,IAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;oBACvC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBACtB,IAAI,UAAU,KAAK,IAAI,EAAE;wBACvB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;6BACR,GAAG,CAAC,EAAE,CAAC;6BACP,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;6BAC7D,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC;6BACvB,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC;6BACxB,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,CAAC;qBAChC;yBAAM;wBACL,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;6BACZ,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;6BACX,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;6BACZ,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;wBACnB,IAAI,CAAC,aAAa,EAAE,CAAC;qBACtB;oBACD,IAAI,CAAC,kBAAkB,GAAG,aAAa,CAAC;iBACzC;aACF;SACF;QAES,yCAAc,GAAxB;SAEC;QAES,wCAAa,GAAvB;SAEC;QAED,2CAAgB,GAAhB;YACE,IAAI,IAAI,CAAC,kBAAkB,KAAK,CAAC,EAAE;gBACjC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACtC,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;aAC7B;SACF;QAED,oCAAS,GAAT,UAAU,OAAe,EAAE,OAAe,EAAE,OAAe,EAAE,UAAkC;YAC7F,IAAI,IAAI,CAAC,kBAAkB,KAAK,YAAY,EAAE;gBAC5C,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;aACxD;YACD,IAAI,IAAI,CAAC,kBAAkB,KAAK,aAAa,EAAE;gBAC7C,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,UAAU,KAAK,IAAI,EAAE;oBACvB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACjE;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAChB,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;gBACD,IAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC;aACxC;SACF;QAES,wCAAa,GAAvB;SAEC;QAES,uCAAY,GAAtB;YACE,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAED,oCAAS,GAAT,UAAU,OAAe,EAAE,OAAe,EAAE,UAAkC;YAC5E,IAAI,IAAI,CAAC,kBAAkB,KAAK,YAAY,EAAE;gBAC5C,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,CAAC,YAAY,EAAE,CAAA;aACpB;iBAAM,IAAI,IAAI,CAAC,kBAAkB,KAAK,aAAa,EAAE;gBACpD,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,UAAU,KAAK,IAAI,EAAE;oBACvB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACjE;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAChB,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;aACF;YACD,IAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC;SACxC;QAES,wCAAa,GAAvB;SAEC;QAES,uCAAY,GAAtB;YACE,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QACH,uBAAC;IAAD,CAjIA,CAAsCgB,aAAQ;;ICH9C;QAAiC,+BAAW;QAC1C,qBAAY,IAAiB;mBAC3B,kBAAM,IAAI,CAAC;SACZ;QAES,8BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;SAC1B;QAED,sBAAI,uCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAED,sBAAI,0CAAiB;iBAArB;gBACE,OAAOJ,qBAAU,CAAC,QAAQ,CAAM,GAAG,EAAEC,eAAI,CAAC,QAAQ,CAAC,CAAC;aACrD;;;WAAA;QAES,kCAAY,GAAtB,UAAuB,KAAuB,EAAE,KAAmB;YACjE,IAAI,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE;gBACzB,IAAM,KAAK,GAAG,KAAK,CAAC,WAAW,KAAK,OAAO,GAAG,CAAC,GAAG,GAAG,CAAC;gBACtD,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;gBACpD,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;gBAC9E,KAAK,CAAC,IAAI,GAAG,YAAY,CAAC;aAC3B;SACF;QAES,iCAAW,GAArB,UAAsB,KAAuB,EAAE,KAAmB;YAChE,iBAAM,WAAW,YAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE;gBACjD,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;gBACpD,IAAI,KAAK,CAAC,IAAI,YAAY,gBAAgB,EAAE;oBAC1C,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBAChE;aACF;SACF;QAES,gCAAU,GAApB,UAAqB,KAAuB,EAAE,KAAmB;YAC/D,IAAI,KAAK,CAAC,IAAI,YAAY,gBAAgB,EAAE;gBAC1C,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE;oBAChD,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBACrE;qBAAM;oBACL,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBAChE;aACF;SACF;QAES,mCAAa,GAAvB,UAAwB,KAAuB,EAAE,KAAmB;YAClE,IAAI,KAAK,CAAC,IAAI,YAAY,gBAAgB,EAAE;gBAC1C,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAChE;SACF;QACH,kBAAC;IAAD,CApDA,CAAiCI,mBAAW;;ICiB5C;QAAiC,+BAAQ;QAcvC,qBAAY,IAAiD;YAAjD,qBAAA,EAAA,OAAoB,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;YAA7D,YACE,kBAAM,IAAI,CAAC,SAeZ;YAdC,KAAI,CAAC,UAAU,CAAC,QAAQ,CAAClB,aAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7C,KAAI,CAAC,WAAW,CAAC,QAAQ,CAACA,aAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7C,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC;YAC3B,KAAI,CAAC,UAAU,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;YACrD,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,KAAI,CAAC,kBAAkB,GAAGa,qBAAU,CAAC,QAAQ,CAAC,GAAG,EAAEC,eAAI,CAAC,QAAQ,CAAC,CAAC;YAElE,IAAM,KAAK,GAAG,KAAI,CAAC,WAAW,EAAE,CAAC;YACjC,IAAI,KAAK,KAAK,IAAI,EAAE;gBAClB,IAAM,SAAS,GAAGlB,SAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvC,KAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;aAC3C;;SACF;QAES,iCAAW,GAArB;YACE,IAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC5C,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;YAC7C,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YAC3C,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAChD,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACtC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YACvC,OAAO,KAAK,CAAC;SACd;QAED,sBAAI,uCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAQD,sBAAI,+BAAM;iBAAV;gBACE,OAAO,IAAI,CAAC,OAAO,CAAC;aACrB;;;WAAA;QAED,+BAAS,GAAT,UAAU,MAAmB;YAC3B,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM,EAAE;gBAC3B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC3B,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;oBAC7C,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;iBACvC;gBACD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;gBACtB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBACzB,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;oBAC7C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;aAC3B;SACF;QAES,mCAAa,GAAvB,UAAwB,MAAmB;YACzC,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,oBAAoB,KAAK,KAAK,CAAC,EAAE;oBAChD,YAAY,CAAC,oBAAoB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBACjD;aACF,CAAC,CAAC;SACJ;QAES,iCAAW,GAArB,UAAsB,MAAmB;YACvC,IAAI,CAAC,aAAa,CAACA,SAAI,CAAC,WAAW,CAAC,CAAC;SACtC;QAES,kCAAY,GAAtB,UAAuB,MAAmB;YACxC,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,mBAAmB,KAAK,KAAK,CAAC,EAAE;oBAC/C,YAAY,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBAChD;aACF,CAAC,CAAC;SACJ;QAED,sBAAI,mCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,sBAAI,kCAAS;iBAAb;gBACE,OAAO,IAAI,CAAC;aACb;;;WAAA;QAED,iCAAW,GAAX,UAAY,KAAkB;YAC5B,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,EAAE;gBAClE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aACvB;iBAAM,IAAI,IAAI,CAAC,WAAW,KAAK,OAAO,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;gBACzE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aACvB;SACF;QAED,+BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,EAAE;gBAClE,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;iBACjC;qBAAM;oBACL,KAAK,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC/B,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC7C,IAAI,SAAS,KAAK,OAAO,EAAE;wBACzB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC9B,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACnC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;yBAC1C;wBACD,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;qBAC1B;yBAAM,IAAI,SAAS,KAAK,OAAO,EAAE;wBAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC9B,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;yBACzC;wBACD,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;qBAC1B;yBAAM;wBACL,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAChC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACjC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;yBACjB;wBACD,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;qBACxB;iBACF;qBAAM;oBACL,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,8BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,eAAe,KAAK,KAAK,CAAC,EAAE;oBAC3C,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;iBACpC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3B,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;SAC9B;QAES,6BAAO,GAAjB;YACE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;YAC3B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,cAAc,KAAK,KAAK,CAAC,EAAE;oBAC1C,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACnC;aACF,CAAC,CAAC;SACJ;QAED,+BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,IAAI,CAAC,WAAW,KAAK,OAAO,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;gBAClE,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;iBACjC;qBAAM;oBACL,KAAK,GAAGA,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC/B,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC7C,IAAI,SAAS,KAAK,OAAO,EAAE;wBACzB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC9B,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACnC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;yBACnB;wBACD,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;qBACjD;yBAAM,IAAI,SAAS,KAAK,OAAO,EAAE;wBAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC9B,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACnC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;yBACnB;wBACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;qBAChD;yBAAM;wBACL,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;wBAChC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;4BACjC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;yBACjB;wBACD,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;qBACxB;iBACF;qBAAM;oBACL,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,8BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,eAAe,KAAK,KAAK,CAAC,EAAE;oBAC3C,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;iBACpC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;SAC7B;QAES,6BAAO,GAAjB;YACE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,cAAc,KAAK,KAAK,CAAC,EAAE;oBAC1C,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACnC;aACF,CAAC,CAAC;SACJ;QAID,+BAAS,GAAT,UAAU,SAA2C;YACnD,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;gBACxB,OAAO,IAAI,CAAC,UAAU,CAAC;aACxB;iBAAM;gBACL,IAAI,CAACd,YAAO,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE;oBACnD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;oBAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;wBACnD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;qBACpC;oBACD,IAAI,CAAC,KAAK,EAAE,CAAC;iBACd;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAID,oCAAc,GAAd,UAAe,cAA6B;YAC1C,IAAI,cAAc,KAAK,KAAK,CAAC,EAAE;gBAC7B,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;iBAAM;gBACL,IAAI,CAACA,YAAO,CAAC,KAAK,CAAC,IAAI,CAAC,eAAe,EAAE,cAAc,CAAC,EAAE;oBACxD,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;oBACtC,IAAI,CAAC,KAAK,EAAE,CAAC;iBACd;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAID,uCAAiB,GAAjB,UAAkB,iBAA6C;YAC7D,IAAI,iBAAiB,KAAK,KAAK,CAAC,EAAE;gBAChC,OAAO,IAAI,CAAC,kBAAkB,CAAC;aAChC;iBAAM;gBACL,IAAI,iBAAiB,KAAK,IAAI,EAAE;oBAC9B,iBAAiB,GAAGc,qBAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;iBAC3D;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAES,kCAAY,GAAtB,UAAuB,WAAsB;YAC3C,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,IAAI,CAAC,WAAW,IAAIjB,SAAI,CAAC,WAAW,GAAGA,SAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE;gBAChE,eAAe,IAAIA,SAAI,CAAC,WAAW,CAAC;aACrC;YACD,eAAe,IAAI,iBAAM,YAAY,YAAC,WAAW,GAAG,eAAe,CAAC,CAAC;YACrE,OAAO,eAAe,CAAC;SACxB;QAES,8BAAQ,GAAlB;YACE,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EAAE;gBACzB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;aACpC;YACD,iBAAM,QAAQ,WAAE,CAAC;SAClB;QAES,iCAAW,GAArB;YACE,iBAAM,WAAW,WAAE,CAAC;YACpB,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,EAAE;gBACzB,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aACvC;SACF;QAES,8BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,2BAAK,GAAL;YACE,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;YAC5B,IAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC;YACzC,IAAM,cAAc,GAAG,MAAM,KAAK,IAAI,GAAG,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;YACpE,IAAI,cAAc,KAAK,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;gBACrG,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAO,EAAE,cAAc,CAAC,CAAC;gBAC7D,IAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACzC,IAAI,KAAK,YAAYqB,aAAQ,EAAE;oBAC7B,IAAI,CAAC,UAAU,CAAC,MAAO,EAAE,cAAc,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;iBAC5D;gBACD,OAAO,SAAS,CAAC;aAClB;iBAAM;gBACL,OAAO,MAAM,CAAC;aACf;SACF;QAGS,kCAAY,GAAtB,UAAuB,MAAY,EAAE,WAAkB;YACrD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;YACxB,IAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;YACjC,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,OAAO,MAAM,CAAC;aACf;YACD,IAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;YACtC,IAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC;YAGxC,IAAM,YAAY,GAAG,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACpD,IAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC;YACrC,IAAM,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC;YAGnC,IAAM,UAAU,GAAG,WAAW,CAAC,IAAI,GAAG,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC;YACtE,IAAM,WAAW,GAAG,WAAW,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC;YACxE,IAAM,SAAS,GAAG,WAAW,CAAC,GAAG,GAAG,MAAM,CAAC,WAAW,GAAG,SAAS,CAAC;YACnE,IAAM,YAAY,GAAG,WAAW,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,GAAG,SAAS,CAAC;YACzE,IAAM,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC;YACtC,IAAM,YAAY,GAAG,WAAW,CAAC,MAAM,CAAC;YACxC,IAAM,OAAO,GAAG,UAAU,GAAG,WAAW,GAAC,CAAC,CAAC;YAC3C,IAAM,OAAO,GAAG,SAAS,GAAG,YAAY,GAAC,CAAC,CAAC;YAG3C,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;YAC5C,IAAM,aAAa,IAAI,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;YAC1E,IAAM,cAAc,GAAG,CAAC,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,IAAI,UAAU,CAAC;YACzG,IAAM,YAAY,IAAI,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YACxE,IAAM,eAAe,GAAG,CAAC,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,IAAI,SAAS,CAAC;YAG3G,IAAM,UAAU,GAAG,UAAU,GAAG,aAAa,GAAG,MAAM,CAAC,WAAW,CAAC;YACnE,IAAM,WAAW,GAAG,cAAc,GAAG,UAAU,GAAG,WAAW,CAAC;YAC9D,IAAM,SAAS,GAAG,SAAS,GAAG,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC;YAChE,IAAM,YAAY,GAAG,eAAe,GAAG,SAAS,GAAG,YAAY,CAAC;YAEhE,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,OAAO,EAAE,CAAC;YAEtD,IAAI,SAAuC,CAAC;YAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;gBAClD,IAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,KAAK,OAAO,IAAI,CAAC,KAAK,OAAO,IAAI,CAAC,KAAK,MAAM,EAAE;oBAClD,SAAS,GAAG,CAAC,CAAC;oBACd,MAAM;iBACP;qBAAM,IAAI,CAAC,KAAK,KAAK,IAAI,aAAa,GAAG,WAAW,IAAI,SAAS,EAAE;oBAClE,SAAS,GAAG,CAAC,CAAC;oBACd,MAAM;iBACP;qBAAM,IAAI,CAAC,KAAK,QAAQ,IAAI,aAAa,GAAG,WAAW,IAAI,YAAY,EAAE;oBACxE,SAAS,GAAG,CAAC,CAAC;oBACd,MAAM;iBACP;qBAAM,IAAI,CAAC,KAAK,MAAM,IAAI,YAAY,GAAG,WAAW,IAAI,UAAU,EAAE;oBACnE,SAAS,GAAG,CAAC,CAAC;oBACd,MAAM;iBACP;qBAAM,IAAI,CAAC,KAAK,OAAO,IAAI,YAAY,GAAG,WAAW,IAAI,WAAW,EAAE;oBACrE,SAAS,GAAG,CAAC,CAAC;oBACd,MAAM;iBACP;aACF;YACD,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;gBACxB,SAAS,GAAG,MAAM,CAAC;gBACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;oBACzD,IAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC7B,IAAI,CAAC,KAAK,KAAK,IAAI,SAAS,IAAI,YAAY,EAAE;wBAC5C,SAAS,GAAG,CAAC,CAAC;wBACd,MAAM;qBACP;yBAAM,IAAI,CAAC,KAAK,QAAQ,IAAI,YAAY,IAAI,SAAS,EAAE;wBACtD,SAAS,GAAG,CAAC,CAAC;wBACd,MAAM;qBACP;yBAAM,IAAI,CAAC,KAAK,MAAM,IAAI,UAAU,IAAI,WAAW,EAAE;wBACpD,SAAS,GAAG,CAAC,CAAC;wBACd,MAAM;qBACP;yBAAM,IAAI,CAAC,KAAK,OAAO,IAAI,WAAW,IAAI,UAAU,EAAE;wBACrD,SAAS,GAAG,CAAC,CAAC;wBACd,MAAM;qBACP;iBACF;aACF;YAED,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;YAC/D,IAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;YACjE,IAAM,WAAW,GAAG,aAAa,GAAGjB,aAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAChF,IAAM,YAAY,GAAG,cAAc,GAAGA,aAAM,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACnF,IAAI,QAAQ,GAAG,WAAW,CAAC;YAC3B,IAAI,SAAS,GAAG,YAAY,CAAC;YAC7B,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;YAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,IAAI,KAAyB,CAAC;YAC9B,IAAI,MAA0B,CAAC;YAC/B,IAAI,SAAS,KAAK,OAAO,EAAE;gBACzB,IAAI,GAAG,aAAa,CAAC;gBACrB,GAAG,GAAG,YAAY,CAAC;gBACnB,KAAK,GAAG,CAAC,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,IAAI,cAAc,CAAC;gBAC9F,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,aAAa,CAAC,CAAC;gBACvD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,YAAY,CAAC,CAAC;aACzD;iBAAM,IAAI,SAAS,KAAK,OAAO,EAAE;gBAChC,IAAI,GAAG,aAAa,CAAC;gBACrB,GAAG,GAAG,eAAe,GAAG,aAAa,CAAC;gBACtC,KAAK,GAAG,cAAc,IAAI,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;gBAC9F,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,aAAa,CAAC,CAAC;gBACvD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,YAAY,CAAC,CAAC;aACzD;iBAAM,IAAI,SAAS,KAAK,MAAM,EAAE;gBAC/B,IAAI,GAAG,aAAa,CAAC;gBACrB,GAAG,GAAG,YAAY,CAAC;gBACnB,KAAK,GAAG,cAAc,IAAI,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;gBAC9F,MAAM,GAAG,eAAe,IAAI,cAAc,KAAK,IAAI,GAAG,cAAc,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;gBAClG,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,aAAa,CAAC,CAAC;gBACvD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,YAAY,CAAC,CAAC;aACzD;iBAAM,IAAI,SAAS,KAAK,KAAK,EAAE;gBAC9B,IAAI,OAAO,GAAG,YAAY,GAAC,CAAC,IAAI,aAAa,EAAE;oBAC7C,IAAI,GAAG,aAAa,CAAC;iBACtB;qBAAM,IAAI,OAAO,GAAG,YAAY,GAAC,CAAC,IAAI,cAAc,EAAE;oBACrD,IAAI,GAAG,cAAc,GAAG,YAAY,CAAC;iBACtC;qBAAM;oBACL,IAAI,GAAG,OAAO,GAAG,YAAY,GAAC,CAAC,CAAC;iBACjC;gBACD,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,IAAI,aAAa,GAAG,WAAW,CAAC,CAAC,CAAC;gBACxE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,aAAa,CAAC,CAAC;gBACvD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,GAAG,YAAY,CAAC,CAAC;aACtD;iBAAM,IAAI,SAAS,KAAK,QAAQ,EAAE;gBACjC,IAAI,OAAO,GAAG,YAAY,GAAC,CAAC,IAAI,aAAa,EAAE;oBAC7C,IAAI,GAAG,aAAa,CAAC;iBACtB;qBAAM,IAAI,OAAO,GAAG,YAAY,GAAC,CAAC,IAAI,cAAc,EAAE;oBACrD,IAAI,GAAG,cAAc,GAAG,YAAY,CAAC;iBACtC;qBAAM;oBACL,IAAI,GAAG,OAAO,GAAG,YAAY,GAAC,CAAC,CAAC;iBACjC;gBACD,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,YAAY,GAAG,WAAW,CAAC,CAAC;gBACzD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,aAAa,CAAC,CAAC;gBACvD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,SAAS,CAAC,CAAC;aACtD;iBAAM,IAAI,SAAS,KAAK,MAAM,EAAE;gBAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,UAAU,IAAI,YAAY,GAAG,WAAW,CAAC,CAAC,CAAC;gBAC1E,IAAI,OAAO,GAAG,aAAa,GAAC,CAAC,IAAI,YAAY,EAAE;oBAC7C,GAAG,GAAG,YAAY,CAAC;iBACpB;qBAAM,IAAI,OAAO,GAAG,aAAa,GAAC,CAAC,IAAI,eAAe,EAAE;oBACvD,GAAG,GAAG,eAAe,GAAG,aAAa,CAAC;iBACvC;qBAAM;oBACL,GAAG,GAAG,OAAO,GAAG,aAAa,GAAC,CAAC,CAAC;iBACjC;gBACD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,WAAW,GAAG,aAAa,CAAC,CAAC;gBACpD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,YAAY,CAAC,CAAC;aACzD;iBAAM,IAAI,SAAS,KAAK,OAAO,EAAE;gBAChC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,WAAW,GAAG,WAAW,CAAC,CAAC;gBAC1D,IAAI,OAAO,GAAG,aAAa,GAAC,CAAC,IAAI,YAAY,EAAE;oBAC7C,GAAG,GAAG,YAAY,CAAC;iBACpB;qBAAM,IAAI,OAAO,GAAG,aAAa,GAAC,CAAC,IAAI,eAAe,EAAE;oBACvD,GAAG,GAAG,eAAe,GAAG,aAAa,CAAC;iBACvC;qBAAM;oBACL,GAAG,GAAG,OAAO,GAAG,aAAa,GAAC,CAAC,CAAC;iBACjC;gBACD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,GAAG,UAAU,CAAC,CAAC;gBACpD,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,GAAG,YAAY,CAAC,CAAC;aACzD;YAED,IAAI,SAAS,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,CAAC,UAAU,IAAI,GAAG,KAAK,IAAI,CAAC,SAAS;mBAClD,QAAQ,KAAK,WAAW,IAAI,SAAS,KAAK,YAAY,CAAC,EAAE;gBACpF,IAAI,CAAC,gBAAgB,CAAC,SAAU,CAAC,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC/C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;gBAC5C,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;oBACpB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;iBAC/C;qBAAM;oBACL,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;gBAC1C,IAAI,MAAM,KAAK,KAAK,CAAC,EAAE;oBACrB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC,CAAC;iBACjD;qBAAM;oBACL,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;iBACrC;gBACD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,GAAG,IAAI,CAAC,CAAC;gBACrD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,YAAY,EAAE,SAAS,GAAG,IAAI,CAAC,CAAC;gBACvD,IAAI,CAAC,cAAc,CAAC,SAAU,CAAC,CAAC;gBAChC,IAAI,CAAC,eAAe,CAAC,SAAU,CAAC,CAAC;aAClC;YAED,OAAO,SAAS,CAAC;SAClB;QAES,sCAAgB,GAA1B,UAA2B,SAA2B;YACpD,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,gBAAgB,KAAK,KAAK,CAAC,EAAE;oBAC5C,YAAY,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;iBAChD;aACF,CAAC,CAAC;SACJ;QAES,oCAAc,GAAxB,UAAyB,SAA2B;SAEnD;QAES,qCAAe,GAAzB,UAA0B,SAA2B;YACnD,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,eAAe,KAAK,KAAK,CAAC,EAAE;oBAC3C,YAAY,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;iBAC/C;aACF,CAAC,CAAC;SACJ;QAGS,gCAAU,GAApB,UAAqB,MAAY,EAAE,WAAkB,EAAE,KAAe,EACjD,SAA2B;YAC9C,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;YACxB,IAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;YACjC,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,OAAO;aACR;YACD,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC;YAG9B,IAAM,YAAY,GAAG,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACpD,IAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC;YACrC,IAAM,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC;YAGnC,IAAM,UAAU,GAAG,WAAW,CAAC,IAAI,GAAG,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC;YACtE,IAAM,SAAS,GAAG,WAAW,CAAC,GAAG,GAAG,MAAM,CAAC,WAAW,GAAG,SAAS,CAAC;YACnE,IAAM,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC;YACtC,IAAM,YAAY,GAAG,WAAW,CAAC,MAAM,CAAC;YACxC,IAAM,OAAO,GAAG,UAAU,GAAG,WAAW,GAAC,CAAC,CAAC;YAC3C,IAAM,OAAO,GAAG,SAAS,GAAG,YAAY,GAAC,CAAC,CAAC;YAE3C,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAM,WAAW,GAAG,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YAClD,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YACjC,IAAM,YAAY,GAAG,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;YAEnD,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,EAAE,IAAIC,WAAK,CAAC,WAAW,EAAE,CAAC;YACtE,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YACzC,IAAM,MAAM,GAAG,YAAY,YAAYD,aAAM,GAAG,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAE3E,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAM,CAAC,OAAO,EAAE,CAAC;YACpD,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,OAAO,EAAE,CAAC;YAEtD,IAAM,SAAS,GAAG,UAAU,GAAG,MAAM,GAAG,UAAU,GAAC,CAAC,CAAC;YACrD,IAAM,SAAS,GAAG,WAAW,GAAG,MAAM,GAAG,UAAU,GAAC,CAAC,CAAC;YACtD,IAAM,SAAS,GAAG,SAAS,GAAG,MAAM,GAAG,UAAU,GAAC,CAAC,CAAC;YACpD,IAAM,SAAS,GAAG,YAAY,GAAG,MAAM,GAAG,UAAU,GAAC,CAAC,CAAC;YAEvD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YACtC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACxC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YACzC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YACvC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC;YACpD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC;YACpD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC;YACpD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC;YACrD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC;YACrD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC;YACrD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;YACnD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;YACnD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;YACnD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;YACtD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;YACtD,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;YAEtD,IAAI,SAAS,KAAK,MAAM,IAAI,SAAS,KAAK,OAAO,IAAI,SAAS,KAAK,OAAO,IAAI,SAAS,KAAK,MAAM,EAAE;gBAElG,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;aAChD;iBAAM,IAAI,SAAS,GAAG,WAAW,IAAI,OAAO;mBACtC,SAAS,IAAI,OAAO,IAAI,OAAO,IAAI,SAAS,EAAE;gBAEnD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBAChD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC;gBAC1D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,OAAO,GAAG,UAAU,GAAG,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAClF,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACxE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;gBAC1D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;gBAChE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACzE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;gBAC3D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,aAAa,CAAC,CAAC;gBACjE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,WAAW,GAAG,IAAI,CAAC,CAAC;gBACvE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;gBAC5D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;aAChF;iBAAM,IAAI,YAAY,GAAG,WAAW,IAAI,OAAO;mBACzC,SAAS,IAAI,OAAO,IAAI,OAAO,IAAI,SAAS,EAAE;gBAEnD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBAChD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC;gBAC7D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,OAAO,GAAG,UAAU,GAAG,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAClF,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACxE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;gBAC1D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;gBAChE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACzE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;gBAC3D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,aAAa,CAAC,CAAC;gBACjE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,WAAW,GAAG,IAAI,CAAC,CAAC;gBACpE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;gBACzD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;aAC7E;iBAAM,IAAI,UAAU,GAAG,WAAW,IAAI,OAAO;mBACvC,SAAS,IAAI,OAAO,IAAI,OAAO,IAAI,SAAS,EAAE;gBAEnD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBAChD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC;gBAC3D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,OAAO,GAAG,SAAS,GAAG,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAChF,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACvE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;gBACzD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,aAAa,CAAC,CAAC;gBAC/D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAC1E,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;gBAC5D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,aAAa,CAAC,CAAC;gBAClE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,WAAW,GAAG,IAAI,CAAC,CAAC;gBACtE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;gBAC3D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;aAC/E;iBAAM,IAAI,WAAW,GAAG,WAAW,IAAI,OAAO;mBACxC,SAAS,IAAI,OAAO,IAAI,OAAO,IAAI,SAAS,EAAE;gBAEnD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBAChD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC;gBAC5D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,OAAO,GAAG,SAAS,GAAG,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAChF,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBACvE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;gBACzD,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,EAAE,aAAa,CAAC,CAAC;gBAC/D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,CAAC,UAAU,GAAC,CAAC,IAAI,IAAI,CAAC,CAAC;gBAC1E,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;gBAC5D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAqB,EAAE,aAAa,CAAC,CAAC;gBAClE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,WAAW,GAAG,IAAI,CAAC,CAAC;gBACrE,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;gBAC1D,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;aAC9E;iBAAM;gBAEL,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;aAChD;SACF;QAED,kCAAY,GAAZ,UAAa,IAAU;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,kCAAY,GAAZ,UAAa,IAAU;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,mCAAa,GAAb,UAAc,WAAwB,EAAE,IAAU;YAChD,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,mCAAa,GAAb,UAAc,WAAwB,EAAE,IAAU;YAChD,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,yCAAmB,GAAnB,UAAoB,IAAY,EAAE,KAAc,EAAE,IAAc;YAC9D,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QAED,qCAAe,GAAf,UAAgB,IAAY,EAAE,KAAc,EAAE,QAA4B,EAAE,IAAc;YACxF,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;QApmBD;YADCmB,mBAAc,CAACnB,aAAM,CAAC;uDAC6B;QAGpD;YADCmB,mBAAc,CAACnB,aAAM,CAAC;wDAC8B;QAkmBvD,kBAAC;KAAA,CAppBgCiB,aAAQ;;ICjBzC;QAAgF,yCAAqB;QAArG;;SAqCC;QApCC,sBAAI,yCAAM;iBAAV;gBACE,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;gBACxB,OAAO,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aAC3C;;;WAAA;QAED,oDAAoB,GAApB,UAAqB,MAAmB,EAAE,IAAO;SAEhD;QAED,mDAAmB,GAAnB,UAAoB,MAAmB,EAAE,IAAO;SAE/C;QAED,gDAAgB,GAAhB,UAAiB,SAA2B,EAAE,IAAO;SAEpD;QAED,+CAAe,GAAf,UAAgB,SAA2B,EAAE,IAAO;SAEnD;QAED,+CAAe,GAAf,UAAgB,IAAO;SAEtB;QAED,8CAAc,GAAd,UAAe,IAAO;SAErB;QAED,+CAAe,GAAf,UAAgB,IAAO;SAEtB;QAED,8CAAc,GAAd,UAAe,IAAO;SAErB;QACH,4BAAC;IAAD,CArCA,CAAgFG,uBAAkB;;ICmBlG;QAAgC,8BAAQ;QAQtC,oBAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SAUZ;YATC,KAAI,CAAC,cAAc,CAAC,YAAY,CAACpB,aAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAChD,KAAI,CAAC,aAAa,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YAChD,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC7B,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC5D,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC/B,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAChE,KAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;YAC/B,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;YAC7B,KAAI,CAAC,iBAAiB,GAAGa,qBAAU,CAAC,QAAQ,CAAC,GAAG,EAAEC,eAAI,CAAC,QAAQ,CAAC,CAAC;;SAClE;QAES,6BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;iBAClB,OAAO,CAAC,MAAM,CAAC;iBACf,aAAa,CAAC,QAAQ,CAAC;iBACvB,SAAS,CAAC,QAAQ,CAAC;iBACnB,SAAS,CAAC,MAAM,CAAC;iBACjB,mBAAmB,CAAC,SAAS,CAAC;iBAC9B,uBAAuB,CAAC,OAAO,CAAC;iBAChC,eAAe,CAAC,SAAS,CAAC,CAAC;SACjC;QAED,sBAAI,sCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAED,sBAAI,mCAAW;iBAAf;gBACE,OAAO,IAAI,CAAC,YAAY,CAAC;aAC1B;;;WAAA;QAED,4BAAO,GAAP;YACE,OAAO,IAAI,CAAC,YAAY,KAAK,OAAO,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,CAAC;SACzE;QAED,6BAAQ,GAAR;YACE,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,IAAI,IAAI,CAAC,YAAY,KAAK,QAAQ,CAAC;SACzE;QAED,gCAAW,GAAX;YACE,OAAO,IAAI,CAAC,YAAY,KAAK,WAAW,IAAI,IAAI,CAAC,YAAY,KAAK,YAAY,CAAC;SAChF;QAgBD,oCAAe,GAAf,UAAgB,YAA8B;YAC5C,IAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAC3C,IAAI,YAAY,KAAK,KAAK,CAAC,EAAE;gBAC3B,OAAO,YAAY,CAAC;aACrB;iBAAM;gBACL,IAAI,YAAY,KAAK,YAAY,EAAE;oBACjC,IAAI,CAAC,sBAAsB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;oBACxD,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC;oBACrC,IAAI,CAAC,oBAAoB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;oBACtD,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;iBACxD;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAED,iCAAY,GAAZ;YACE,OAAO,IAAI,CAAC,gBAAgB,KAAK,KAAK,IAAI,IAAI,CAAC,gBAAgB,KAAK,QAAQ,CAAC;SAC9E;QAED,+BAAU,GAAV;YACE,OAAO,IAAI,CAAC,gBAAgB,KAAK,MAAM,IAAI,IAAI,CAAC,gBAAgB,KAAK,OAAO,CAAC;SAC9E;QAKS,2CAAsB,GAAhC,UAAiC,YAA6B,EAAE,YAA6B;YAC3F,IAAI,CAAC,WAAW,CAAC,UAAU,YAAgC;gBACzD,IAAI,YAAY,CAAC,sBAAsB,KAAK,KAAK,CAAC,EAAE;oBAClD,YAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;iBACvE;aACF,CAAC,CAAC;SACJ;QAES,yCAAoB,GAA9B,UAA+B,YAA6B,EAAE,YAA6B;YACzF,IAAI,CAAC,aAAa,CAAClB,SAAI,CAAC,WAAW,CAAC,CAAC;SACtC;QAES,0CAAqB,GAA/B,UAAgC,YAA6B,EAAE,YAA6B;YAC1F,IAAI,CAAC,UAAU,CAAC,UAAU,YAAgC;gBACxD,IAAI,YAAY,CAAC,qBAAqB,KAAK,KAAK,CAAC,EAAE;oBACjD,YAAY,CAAC,qBAAqB,CAAC,YAAY,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;iBACtE;aACF,CAAC,CAAC;SACJ;QAGS,sCAAiB,GAA3B,UAA4B,WAAmB;YAC7C,IAAM,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAC9C,IAAI,eAAe,KAAK,KAAK,EAAE;gBAC7B,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;aACxC;iBAAM,IAAI,eAAe,KAAK,OAAO,EAAE;gBACtC,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,CAAC;aAC1C;iBAAM,IAAI,eAAe,KAAK,QAAQ,EAAE;gBACvC,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;aAC3C;iBAAM,IAAI,eAAe,KAAK,MAAM,EAAE;gBACrC,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC;aACzC;SACF;QAGS,yCAAoB,GAA9B,UAA+B,WAAmB;YAChD,IAAI,CAAC,GAAG,CAAC,YAAY,CAACI,aAAM,CAAC,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;SAC/E;QAGS,2CAAsB,GAAhC,UAAiC,WAAmB;YAClD,IAAI,CAAC,KAAK,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;SAChF;QAGS,4CAAuB,GAAjC,UAAkC,WAAmB;YACnD,IAAI,CAAC,MAAM,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;SAClF;QAGS,0CAAqB,GAA/B,UAAgC,WAAmB;YACjD,IAAI,CAAC,IAAI,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;SAC/E;QAGS,wCAAmB,GAA7B,UAA8B,aAAqB;YACjD,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;gBACrB,IAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,KAAM,CAAC;gBAClD,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,KAAM,CAAC;gBAChD,IAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC/F,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;aAChC;SACF;QAES,6BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YACxB,IAAI,WAAW,CAAC,SAAS,KAAK,QAAQ,EAAE;gBACtC,IAAI,CAAC,gBAAgB,CAACC,WAAK,CAAC,WAAW,EAAE,CAAC,CAAC;gBAC3C,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEA,WAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACrE;iBAAM;gBACL,IAAI,CAAC,gBAAgB,CAACA,WAAK,CAAC,KAAK,EAAE,CAAC,CAAC;gBACrC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;aACjC;SACF;QAES,0BAAK,GAAf,UAAgB,WAAwB;YACtC,IAAM,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAC9C,IAAI,eAAe,KAAK,KAAK,EAAE;gBAC7B,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;aAC5B;iBAAM,IAAI,eAAe,KAAK,OAAO,EAAE;gBACtC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;aAC9B;iBAAM,IAAI,eAAe,KAAK,QAAQ,EAAE;gBACvC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;aAC/B;iBAAM,IAAI,eAAe,KAAK,MAAM,EAAE;gBACrC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;aAC7B;SACF;QAGS,6BAAQ,GAAlB,UAAmB,WAAwB;YACzC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;iBACtB,WAAW,CAAC,cAAc,CAAC;iBAC3B,WAAW,CAAC,eAAe,CAAC;iBAC5B,WAAW,CAAC,aAAa,CAAC,CAAC;YAEhC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,YAAY,CAACD,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACtC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,CAAC;YAEnD,IAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACvB,QAAQ,EAAE,CAAC;gBACX,UAAU,EAAE,QAAQ,CAAC,UAAU;gBAC/B,WAAW,EAAE,CAAC;gBACd,SAAS,EAAE,QAAQ,CAAC,SAAS;aAC9B,CAAC,CAAC;YAEH,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;gBACtB,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;SACF;QAGS,+BAAU,GAApB,UAAqB,WAAwB;YAC3C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;iBACzB,QAAQ,CAAC,cAAc,CAAC;iBACxB,WAAW,CAAC,eAAe,CAAC;iBAC5B,WAAW,CAAC,aAAa,CAAC,CAAC;YAEhC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACrC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,CAAC;YACrD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,KAAM,CAAC,CAAC;YAEpD,IAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,aAAa,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACvB,QAAQ,EAAE,CAAC;gBACX,UAAU,EAAE,QAAQ,CAAC,UAAU;gBAC/B,WAAW,EAAE,CAAC;gBACd,SAAS,EAAE,CAAC;aACb,CAAC,CAAC;SACJ;QAGS,gCAAW,GAArB,UAAsB,WAAwB;YAC5C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;iBACzB,WAAW,CAAC,cAAc,CAAC;iBAC3B,QAAQ,CAAC,eAAe,CAAC;iBACzB,WAAW,CAAC,aAAa,CAAC,CAAC;YAEhC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACtC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,CAAC;YAEtD,IAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACvB,QAAQ,EAAE,CAAC;gBACX,UAAU,EAAE,QAAQ,CAAC,UAAU;gBAC/B,WAAW,EAAE,CAAC;gBACd,SAAS,EAAE,QAAQ,CAAC,SAAS;aAC9B,CAAC,CAAC;YAEH,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;gBACtB,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;SACF;QAGS,8BAAS,GAAnB,UAAoB,WAAwB;YAC1C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;iBACzB,WAAW,CAAC,cAAc,CAAC;iBAC3B,WAAW,CAAC,eAAe,CAAC;iBAC5B,QAAQ,CAAC,aAAa,CAAC,CAAC;YAE7B,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACrC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,YAAY,CAACA,aAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,CAAC;YACpD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,KAAM,CAAC,CAAC;YAEpD,IAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,aAAa,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACvB,QAAQ,EAAE,CAAC;gBACX,UAAU,EAAE,CAAC;gBACb,WAAW,EAAE,CAAC;gBACd,SAAS,EAAE,QAAQ,CAAC,SAAS;aAC9B,CAAC,CAAC;SACJ;QAED,sBAAI,kCAAU;iBAAd;gBACE,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;gBACtC,IAAI,WAAW,KAAK,WAAW,IAAI,WAAW,KAAK,YAAY,EAAE;oBAC/D,OAAO,OAAO,CAAC;iBAChB;qBAAM;oBACL,OAAO,WAAW,CAAC;iBACpB;aACF;;;WAAA;QAED,sBAAI,iCAAS;iBAAb;gBACE,OAAO,IAAI,CAAC;aACb;;;WAAA;QAED,8BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAClB;QAED,8BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAClB;QAED,yBAAI,GAAJ,UAAK,KAAkB;YACrB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,CAAC,EAAE;gBACrF,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;qBAAM;oBACL,KAAK,GAAGa,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,KAAK,CAAC;yBACvB,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC3D;qBAAM;oBACL,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;yBAChB,WAAW,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,6BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAgC;gBACzD,IAAI,YAAY,CAAC,cAAc,KAAK,KAAK,CAAC,EAAE;oBAC1C,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACnC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACtB;QAES,4BAAO,GAAjB;YACE,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAgC;gBACxD,IAAI,YAAY,CAAC,aAAa,KAAK,KAAK,CAAC,EAAE;oBACzC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;iBAClC;aACF,CAAC,CAAC;SACJ;QAED,yBAAI,GAAJ,UAAK,KAAkB;YACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,EAAE;gBACpD,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;qBAAM;oBACL,KAAK,GAAGA,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC3D;qBAAM;oBACL,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBACpB,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,6BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAgC;gBACzD,IAAI,YAAY,CAAC,cAAc,KAAK,KAAK,CAAC,EAAE;oBAC1C,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACnC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;SAC9B;QAES,4BAAO,GAAjB;YACE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACrB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;YAC7B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAgC;gBACxD,IAAI,YAAY,CAAC,aAAa,KAAK,KAAK,CAAC,EAAE;oBACzC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;iBAClC;aACF,CAAC,CAAC;SACJ;QAED,2BAAM,GAAN,UAAO,KAAkB;YACvB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,CAAC,EAAE;gBACrF,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;qBAAM;oBACL,KAAK,GAAGA,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC;yBACrB,aAAa,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC/D;qBAAM;oBACL,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;yBACd,aAAa,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;aACF;SACF;QAES,+BAAU,GAApB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAgC;gBACzD,IAAI,YAAY,CAAC,gBAAgB,KAAK,KAAK,CAAC,EAAE;oBAC5C,YAAY,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;iBACrC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;SAC/B;QAES,8BAAS,GAAnB;YACE,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAgC;gBACxD,IAAI,YAAY,CAAC,eAAe,KAAK,KAAK,CAAC,EAAE;oBAC3C,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;iBACpC;aACF,CAAC,CAAC;SACJ;QAED,6BAAQ,GAAR,UAAS,KAAkB;YACzB,IAAI,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChH,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;qBAAM;oBACL,KAAK,GAAGA,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC;yBACrB,aAAa,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACjE;qBAAM;oBACL,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;yBACd,aAAa,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;aACF;SACF;QAES,iCAAY,GAAtB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAgC;gBACzD,IAAI,YAAY,CAAC,kBAAkB,KAAK,KAAK,CAAC,EAAE;oBAC9C,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;iBACvC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;YACjC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACtB;QAES,gCAAW,GAArB;YACE,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;YAChC,IAAI,CAAC,UAAU,CAAC,UAAU,YAAgC;gBACxD,IAAI,YAAY,CAAC,iBAAiB,KAAK,KAAK,CAAC,EAAE;oBAC7C,YAAY,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;iBACtC;aACF,CAAC,CAAC;SACJ;QAED,2BAAM,GAAN,UAAO,KAAkB;YACvB,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACtC,IAAI,WAAW,KAAK,QAAQ,IAAI,WAAW,KAAK,QAAQ,EAAE;gBACxD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAClB;iBAAM,IAAI,WAAW,KAAK,WAAW,IAAI,WAAW,KAAK,YAAY,EAAE;gBACtE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aACpB;iBAAM,IAAI,IAAI,CAAC,SAAS,KAAK,QAAQ,EAAE;gBACtC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAClB;iBAAM;gBACL,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB;SACF;QAvaD;YADCM,mBAAc,CAACnB,aAAM,CAAC;0DACiC;QAGxD;YADCmB,mBAAc,CAACnB,aAAM,CAAC;yDACgC;QAGvD;YADCmB,mBAAc,CAAC,MAAM,CAAC;uDACmB;QAG1C;YADCA,mBAAc,CAAC,MAAM,CAAC;yDACqB;QA4B5C;YADCE,cAAS;sDACkC;QAmY9C,iBAAC;KAAA,CA7d+BJ,aAAQ;;ICnBxC;QAA6E,wCAAqB;QAAlG;;SAwCC;QAvCC,qDAAsB,GAAtB,UAAuB,YAA6B,EAAE,YAA6B,EAAE,IAAO;SAE3F;QAED,oDAAqB,GAArB,UAAsB,YAA6B,EAAE,YAA6B,EAAE,IAAO;SAE1F;QAED,6CAAc,GAAd,UAAe,IAAO;SAErB;QAED,4CAAa,GAAb,UAAc,IAAO;SAEpB;QAED,6CAAc,GAAd,UAAe,IAAO;SAErB;QAED,4CAAa,GAAb,UAAc,IAAO;SAEpB;QAED,+CAAgB,GAAhB,UAAiB,IAAO;SAEvB;QAED,8CAAe,GAAf,UAAgB,IAAO;SAEtB;QAED,iDAAkB,GAAlB,UAAmB,IAAO;SAEzB;QAED,gDAAiB,GAAjB,UAAkB,IAAO;SAExB;QACH,2BAAC;IAAD,CAxCA,CAA6EG,uBAAkB;;ICD/F;QAAkC,gCAAQ;QAIxC,sBAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SAIZ;YAHC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,YAAY,EAAE,CAAC;;SACrB;QAES,+BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;iBACzB,OAAO,CAAC,MAAM,CAAC;iBACf,cAAc,CAAC,QAAQ,CAAC;iBACxB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,UAAU,CAAC,MAAM,CAAC;iBAClB,MAAM,CAAC,SAAS,CAAC,CAAC;SACxB;QAES,mCAAY,GAAtB;YACE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,MAAM,CAAC,CAAC;SACxC;QAES,iCAAU,GAApB;YACE,IAAM,IAAI,GAAGE,YAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC7B,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,OAAO,CAAC,WAAW,CAAC;iBACpB,MAAM,CAAC,SAAS,CAAC;iBACjB,WAAW,CAAC,CAAC,CAAC;iBACd,aAAa,CAAC,OAAO,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC;YACjD,OAAO,IAAI,CAAC;SACb;QAED,sBAAI,wCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAED,sBAAI,oCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,oCAAa,GAAb,UAAc,UAA6B;YACzC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;SAC/B;QAED,sBAAI,kCAAQ;iBAAZ;gBACE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC5C,OAAO,SAAS,YAAYL,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;aACzD;;;WAAA;QAES,8BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QAES,gCAAS,GAAnB;YACE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,wCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,KAAK,SAAS,YAAYK,YAAO,IAAI,SAAS,YAAYL,aAAQ,CAAC,EAAE;gBAC1F,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;SACF;QAES,wCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,KAAK,SAAS,YAAYK,YAAO,IAAI,SAAS,YAAYL,aAAQ,CAAC,EAAE;gBAC1F,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,mCAAY,GAAtB,UAAuB,IAAwB;SAE9C;QAES,mCAAY,GAAtB,UAAuB,IAAwB;SAE9C;QAES,8BAAO,GAAjB,UAAkB,KAAiB;YACjC,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YACpC,IAAI,UAAU,KAAK,IAAI,EAAE;gBACvB,UAAU,CAAC,MAAM,EAAE,CAAC;aACrB;SACF;QACH,mBAAC;IAAD,CAhGA,CAAkCA,aAAQ;;ICC1C;QAA6B,2BAAM;QAAnC;;SAiCC;QAhCC,sBAAI,mCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QASS,6BAAW,GAArB;YACE,IAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;YAC9C,IAAI,WAAW,KAAK,MAAM,EAAE;gBAC1B,OAAO,KAAK,CAAC,IAAI,CAAC;aACnB;iBAAM;gBACL,OAAO,KAAK,CAAC,KAAK,CAAC;aACpB;SACF;QAES,0BAAQ,GAAlB,UAAmB,WAA0B;YAC3C,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;SAC5C;QAES,iCAAe,GAAzB,UAA0B,QAAkB;YAC1C,IAAI,QAAQ,CAAC,KAAK,GAAG,GAAG,IAAI,QAAQ,CAAC,MAAM,GAAG,GAAG,EAAE;gBACjD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;aAC7B;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;SACF;QAtBD;YALCI,cAAS,CAAiB;gBACzB,IAAI,EAAE;oBACJ,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;iBAC3B;aACF,CAAC;8CAC4B;QAuBhC,cAAC;KAAA,CAjC4BL,WAAM;;ICAnC;QAAoE,qCAAmB;QAAvF;;SACC;QAAD,wBAAC;IAAD,CADA,CAAoEO,qBAAgB;;ICIpF;QAAkC,gCAAW;QAC3C,sBAAY,IAAiB;mBAC3B,kBAAM,IAAI,CAAC;SACZ;QAES,+BAAQ,GAAlB,UAAmB,IAAiB;YAClC,iBAAM,QAAQ,YAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;iBACzB,QAAQ,CAAC,UAAU,CAAC;iBACpB,OAAO,CAAC,MAAM,CAAC;iBACf,cAAc,CAAC,QAAQ,CAAC;iBACxB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,YAAY,CAAC,KAAK,CAAC;iBACnB,QAAQ,CAAC,QAAQ,CAAC;iBAClB,UAAU,CAAC,MAAM,CAAC;iBAClB,MAAM,CAAC,SAAS,CAAC,CAAC;SACxB;QAED,sBAAI,wCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAKD,sBAAI,uCAAa;iBAAjB;gBACE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;gBACrD,OAAO,SAAS,YAAYN,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;aACzD;;;WAAA;QAED,sBAAI,8BAAI;iBAAR;gBACE,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;gBACzC,IAAM,SAAS,GAAG,aAAa,KAAK,IAAI,GAAG,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;gBACrF,OAAO,SAAS,YAAYK,YAAO,IAAI,SAAS,YAAYL,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;aACzF;;;WAAA;QAED,8BAAO,GAAP,UAAQ,IAA+B,EAAE,KAAwB,EAAE,GAAoB;YAA9C,sBAAA,EAAA,YAAwB;YAAE,oBAAA,EAAA,WAAoB;YACrF,KAAK,GAAGJ,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACnC,IAAM,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;YAC5D,IAAI,gBAAgB,YAAYI,aAAQ,EAAE;gBACxC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;gBAC1C,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC9B,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,gBAAgB,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;yBACvE,SAAS,CAACO,mBAAS,CAAC,MAAM,CAACC,WAAK,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;iBAChF;qBAAM;oBACL,gBAAgB,CAAC,MAAM,EAAE,CAAC;iBAC3B;aACF;YACD,IAAM,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC;iBAClD,OAAO,CAAC,CAAC,CAAC;iBACV,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC;iBACjB,SAAS,CAACD,mBAAS,CAAC,MAAM,CAACC,WAAK,CAAC,GAAG,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;iBACtD,SAAS,CAACD,mBAAS,CAAC,MAAM,CAACC,WAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,eAAe,CAAC,gBAAgB,EAAE,eAAe,CAAC,CAAC;SACzD;QAES,0CAAmB,GAA7B,UAA8B,IAAiB;YAC7C,IAAM,aAAa,GAAGR,aAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;iBACvC,QAAQ,CAAC,aAAa,CAAC;iBACvB,QAAQ,CAAC,UAAU,CAAC;iBACpB,OAAO,CAAC,MAAM,CAAC;iBACf,cAAc,CAAC,QAAQ,CAAC;iBACxB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,IAAI,KAAK,IAAI,EAAE;gBACjB,aAAa,CAAC,eAAe,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;aAC7C;YACD,OAAO,aAAa,CAAC;SACtB;QAED,+BAAQ,GAAR,UAAS,KAAY;YACnB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC3D,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAEnD,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,IAAI,IAAI,YAAYK,YAAO,EAAE;gBAC3B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;aACjD;SACF;QAES,8BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,aAAa,CAAC1B,SAAI,CAAC,WAAW,CAAC,CAAC;SACtC;QAES,+BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/B,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;gBACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB;SACF;QAES,wCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,eAAe,IAAI,SAAS,YAAYqB,aAAQ,EAAE;gBACjE,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;aACvC;SACF;QAES,wCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,eAAe,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBACjE,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;aACvC;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,4CAAqB,GAA/B,UAAgC,aAAuB;SAEtD;QAES,4CAAqB,GAA/B,UAAgC,aAAuB;SAEtD;QAES,sCAAe,GAAzB;YACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/B,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;gBACpB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAChG;SACF;QAES,qCAAc,GAAxB;YACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/B,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;gBACpB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aACpF;SACF;QAES,kCAAW,GAArB,UAAsB,KAAuB,EAAE,KAAmB;SAEjE;QAjHD;YADCI,cAAS,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;mDACG;QAkHhC,mBAAC;KAAA,CA3IiC,WAAW;;ICK7C;QAAgC,8BAAQ;QACtC,oBAAY,IAAiB;mBAC3B,kBAAM,IAAI,CAAC;SACZ;QAES,6BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;iBACvB,QAAQ,CAAC,UAAU,CAAC;iBACpB,OAAO,CAAC,MAAM,CAAC;iBACf,cAAc,CAAC,QAAQ,CAAC;iBACxB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,YAAY,CAAC,KAAK,CAAC;iBACnB,UAAU,CAAC,MAAM,CAAC;iBAClB,MAAM,CAAC,SAAS,CAAC,CAAC;SACxB;QAED,sBAAI,sCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAWD,sBAAI,4BAAI;iBAAR;gBACE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC5C,OAAO,SAAS,YAAYC,YAAO,IAAI,SAAS,YAAYL,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;aACzF;;;WAAA;QAED,sBAAI,6BAAK;iBAAT;gBACE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAC7C,OAAO,SAAS,YAAYA,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;aACzD;;;WAAA;QAED,6BAAQ,GAAR,UAAS,KAAY;YACnB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAC7D,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACnD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAEpE,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,IAAI,IAAI,YAAYK,YAAO,EAAE;gBAC3B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;aACnD;SACF;QAES,4BAAO,GAAjB;YACE,IAAI,CAAC,aAAa,CAAC1B,SAAI,CAAC,WAAW,CAAC,CAAC;SACtC;QAES,iCAAY,GAAtB,UAAuB,WAAsB;YAC3C,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,IAAI,CAAC,WAAW,GAAGA,SAAI,CAAC,YAAY,MAAM,CAAC,EAAE;gBAC3C,eAAe,IAAIA,SAAI,CAAC,WAAW,CAAC;aACrC;YACD,eAAe,IAAI,iBAAM,YAAY,YAAC,WAAW,GAAG,eAAe,CAAC,CAAC;YACrE,OAAO,eAAe,CAAC;SACxB;QAES,6BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC/B,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;gBACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB;SACF;QAES,6BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,IAAI,KAAK,KAAK,IAAI,EAAE;gBAClB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,KAAM,CAAC,CAAC;aACvC;SACF;QAES,sCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,KAAK,SAAS,YAAY0B,YAAO,IAAI,SAAS,YAAYL,aAAQ,CAAC,EAAE;gBAC1F,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;iBAAM,IAAI,QAAQ,KAAK,OAAO,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBAChE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;aAC/B;SACF;QAES,sCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,KAAK,SAAS,YAAYK,YAAO,IAAI,SAAS,YAAYL,aAAQ,CAAC,EAAE;gBAC1F,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;iBAAM,IAAI,QAAQ,KAAK,OAAO,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBAChE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;aAC/B;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,iCAAY,GAAtB,UAAuB,IAAwB;SAE9C;QAES,iCAAY,GAAtB,UAAuB,IAAwB;SAE9C;QAES,kCAAa,GAAvB,UAAwB,KAAe;YACrC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACpC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;iBACrB,GAAG,CAAC,CAAC,CAAC;iBACN,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC;iBACd,MAAM,CAAC,CAAC,CAAC;iBACT,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,KAAK,CAAC;iBACjB,UAAU,CAAC,MAAM,CAAC;iBAClB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,SAAS,CAAC,CAAC;SACvB;QAES,kCAAa,GAAvB,UAAwB,KAAe;SAEtC;QArGD;YADCI,cAAS,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;iDACG;QAG9B;YADCF,mBAAc,CAAC,MAAM,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;sDACC;QAGzC;YADCA,mBAAc,CAAClB,WAAK,CAAC;sDAC4B;QAgGpD,iBAAC;KAAA,CA7H+BgB,aAAQ;;ICTxC;QAIE,sCAAY,WAAwB;YAClC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;SACjC;QAED,wDAAiB,GAAjB,UAAkB,KAAuB,EAAE,KAAmB,EAAE,IAAO;SAEtE;QAED,uDAAgB,GAAhB,UAAiB,KAAuB,EAAE,IAAO;YAC/C,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;YAC3B,KAAK,CAAC,cAAc,EAAE,CAAC;SACxB;QAED,uDAAgB,GAAhB,UAAiB,KAAuB,EAAE,KAAmB,EAAES,MAAO;YACpE,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;gBAC3B,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;gBACtC,IAAI,WAAW,CAAC,WAAW,EAAE,EAAE;oBAC7B,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC7D,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;oBAC5C,WAAW,CAAC,aAAa,CAAC9B,SAAI,CAAC,WAAW,CAAC,CAAC;oBAC5C,IAAI,UAAU,GAAG,GAAG,EAAE;wBACpB,KAAK,CAAC,cAAc,EAAE,CAAC;qBACxB;iBACF;aACF;SACF;QAED,sDAAe,GAAf,UAAgB,KAAuB,EAAE,KAAmB,EAAE,IAAO;YACnE,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;gBAC3B,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;gBACtC,IAAM,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC,KAAM,CAAC;gBACjD,IAAI,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,SAAS,EAAE;oBAC9B,IAAI,UAAU,GAAG,GAAG,IAAI,WAAW,CAAC,UAAU,KAAK,UAAU,EAAE;wBAC7D,WAAW,CAAC,QAAQ,EAAE,CAAC;qBACxB;yBAAM;wBACL,WAAW,CAAC,MAAM,EAAE,CAAC;qBACtB;iBACF;qBAAM;oBACL,IAAI,UAAU,GAAG,GAAG,EAAE;wBACpB,WAAW,CAAC,QAAQ,EAAE,CAAC;qBACxB;yBAAM,IAAI,UAAU,IAAI,GAAG,EAAE;wBAC5B,WAAW,CAAC,MAAM,EAAE,CAAC;qBACtB;iBACF;aACF;SACF;QAED,yDAAkB,GAAlB,UAAmB,KAAuB,EAAE,KAAmB,EAAE,IAAO;YACtE,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACtC,IAAI,KAAK,CAAC,OAAO,KAAK,CAAC,EAAE;gBACvB,WAAW,CAAC,MAAM,EAAE,CAAC;aACtB;iBAAM;gBACL,IAAM,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC,KAAM,CAAC;gBACjD,IAAI,UAAU,GAAG,GAAG,IAAI,WAAW,CAAC,UAAU,KAAK,UAAU,EAAE;oBAC7D,WAAW,CAAC,QAAQ,EAAE,CAAC;iBACxB;qBAAM;oBACL,WAAW,CAAC,MAAM,EAAE,CAAC;iBACtB;aACF;SACF;QACH,mCAAC;IAAD,CAAC;;IChDD;QAAiC,+BAAQ;QAYvC,qBAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SASZ;YARC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACnD,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,KAAI,CAAC,gBAAgB,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,GAAG,EAAEC,eAAI,CAAC,QAAQ,CAAC,CAAC;YAChE,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,KAAI,CAAC,YAAY,EAAE,CAAC;;SACrB;QAES,8BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;iBACxB,OAAO,CAAC,OAAO,CAAC;iBAChB,QAAQ,CAAC,UAAU,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC;iBACV,OAAO,CAAC,CAAC,CAAC;iBACV,UAAU,CAAC,MAAM,CAAC;iBAClB,WAAW,CAAC,MAAM,CAAC,CAAC;SAC1B;QAES,kCAAY,GAAtB;YACE,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;SACrC;QAED,sBAAI,uCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAED,sBAAI,mCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,gCAAU,GAAV;YACE,OAAO,IAAI,CAAC,WAAW,KAAK,UAAU,IAAI,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC;SAC5E;QAED,iCAAW,GAAX;YACE,OAAO,IAAI,CAAC,WAAW,KAAK,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,YAAY,CAAC;SAC9E;QAKD,sBAAI,mCAAU;iBAAd;gBACE,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;gBACpC,IAAI,UAAU,KAAK,WAAW,EAAE;oBAC9B,OAAO,QAAQ,CAAC;iBACjB;qBAAM,IAAI,UAAU,KAAK,WAAW,EAAE;oBACrC,OAAO,SAAS,CAAC;iBAClB;qBAAM,IAAI,UAAU,KAAK,UAAU,EAAE;oBACpC,OAAO,OAAO,CAAC;iBAChB;qBAAM,IAAI,UAAU,KAAK,YAAY,EAAE;oBACtC,OAAO,QAAQ,CAAC;iBACjB;qBAAM;oBACL,OAAO,KAAK,CAAQ,CAAC;iBACtB;aACF;;;WAAA;QAED,sBAAI,kCAAS;iBAAb;gBACE,OAAO,IAAI,CAAC;aACb;;;WAAA;QAED,+BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SACpB;QAED,+BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SACtB;QAED,sBAAI,+BAAM;iBAAV;gBACE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC9C,OAAO,SAAS,YAAY,YAAY,GAAG,SAAS,GAAG,IAAI,CAAC;aAC7D;;;WAAA;QAED,sBAAI,mCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;WAAA;QAED,mCAAa,GAAb,UAAc,UAAqC,EAAE,KAAkB,EAAE,GAAa;YACpF,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC3B,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;iBAC/B;qBAAM,IAAI,KAAK,KAAK,KAAK,EAAE;oBAC1B,KAAK,GAAG,KAAK,CAAC,CAAC;iBAChB;gBACD,MAAM,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;aACxC;SACF;QAES,qCAAe,GAAzB;YACE,IAAM,IAAI,GAAGQ,YAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAC7E,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,uGAAuG,CAAC,CAAC;YAC/H,OAAO,IAAI,CAAC;SACb;QAED,sBAAI,8BAAK;iBAAT;gBACE,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;gBACzC,IAAM,UAAU,GAAG,EAAE,CAAC;gBACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;oBACpD,IAAM,SAAS,GAAI,UAAU,CAAC,CAAC,CAAc,CAAC,IAAI,CAAC;oBACnD,IAAI,SAAS,YAAY,UAAU,EAAE;wBACnC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBAC5B;iBACF;gBACD,OAAO,UAAU,CAAC;aACnB;;;WAAA;QAED,gCAAU,GAAV,UAAW,IAAgB,EAAE,KAAc,EAAE,GAAY;YACvD,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;gBACpB,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC;SAC/E;QAED,iCAAW,GAAX;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;YACzC,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;gBAClD,IAAM,SAAS,GAAI,UAAU,CAAC,CAAC,CAAc,CAAC,IAAI,CAAC;gBACnD,IAAI,SAAS,YAAY,UAAU,EAAE;oBACnC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;iBAC7B;aACF;SACF;QAES,6BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC/B,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SAC5C;QAES,+BAAS,GAAnB;YACE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC5C,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,kCAAY,GAAtB,UAAuB,WAAsB;YAC3C,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG1B,SAAI,CAAC,YAAY,MAAM,CAAC,EAAE;gBAC3C,eAAe,IAAIA,SAAI,CAAC,WAAW,CAAC;aACrC;YACD,eAAe,IAAI,iBAAM,YAAY,YAAC,WAAW,GAAG,eAAe,CAAC,CAAC;YACrE,OAAO,eAAe,CAAC;SACxB;QAES,8BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,KAAM,CAAC;YACrC,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;YACzC,IAAM,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC;YACrC,IAAM,YAAY,GAAG,EAAE,CAAC;YACxB,IAAM,UAAU,GAAG,EAAE,CAAC;YACtB,IAAI,SAAS,GAAG,CAAC,CAAC;YAClB,IAAI,MAAM,GAAG,UAAU,GAAG,CAAC,CAAC;YAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,IAAI,CAAC,EAAE;gBACtC,IAAM,SAAS,GAAI,UAAU,CAAC,CAAC,CAAc,CAAC,IAAI,CAAC;gBACnD,IAAI,SAAS,YAAY,UAAU,EAAE;oBACnC,IAAM,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,cAAc,GAAG,SAAS,IAAI,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;oBACjG,SAAS,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC,GAAG,MAAM,GAAG,MAAM,CAAC;yBACtC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC;yBACtB,MAAM,CAAC,MAAM,CAAC,CAAC;oBACzB,SAAS,IAAI,CAAC,CAAC;oBACf,MAAM,IAAI,CAAC,CAAC;iBACb;gBACD,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC3B,IAAI,MAAM,KAAK,IAAI,EAAE;oBACnB,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBAC3B;aACF;SACF;QAES,uCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,QAAQ,IAAI,SAAS,YAAY,YAAY,EAAE;gBAC9D,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;aAChC;iBAAM,IAAI,SAAS,YAAY,UAAU,EAAE;gBAC1C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;SACF;QAES,uCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,QAAQ,IAAI,SAAS,YAAY,YAAY,EAAE;gBAC9D,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;aAChC;iBAAM,IAAI,SAAS,YAAY,UAAU,EAAE;gBAC1C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,oCAAc,GAAxB,UAAyB,MAAoB;YAC3C,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBACjD,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAClC;iBAAM,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE;gBAC5B,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;aACxC;YACD,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CAAC,eAAe,CAAC,IAAI,4BAA4B,CAAC,IAAI,CAAQ,CAAC,CAAC;SACvE;QAES,oCAAc,GAAxB,UAAyB,MAAoB;SAE5C;QAES,kCAAY,GAAtB,UAAuB,IAAgB;YACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAChE;QAES,kCAAY,GAAtB,UAAuB,IAAgB;SAEtC;QAED,4BAAM,GAAN,UAAO,KAAkB;YACvB,IAAI,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;gBACrD,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;iBAC/B;qBAAM;oBACL,KAAK,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,KAAK,CAAC,CAAC;oBACpD,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;wBAC/B,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACrE;yBAAM;wBACL,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;qBACvC;iBACF;qBAAM;oBACL,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;oBAC7C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,aAAa,CAACjB,SAAI,CAAC,WAAW,CAAC,CAAC;oBACrC,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;aACF;SACF;QAES,gCAAU,GAApB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,qBAAqB,KAAK,KAAK,CAAC,EAAE;oBACjD,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;iBAC1C;aACF,CAAC,CAAC;YACH,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;SAChC;QAES,+BAAS,GAAnB;YACE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,oBAAoB,KAAK,KAAK,CAAC,EAAE;oBAChD,YAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;iBACzC;aACF,CAAC,CAAC;SACJ;QAED,8BAAQ,GAAR,UAAS,KAAkB;YACzB,IAAI,IAAI,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;gBACpD,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;iBAC/B;qBAAM;oBACL,KAAK,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;oBACpD,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;wBAC/B,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACvE;yBAAM;wBACL,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;qBAAM;oBACL,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBACvC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,aAAa,CAACjB,SAAI,CAAC,WAAW,CAAC,CAAC;oBACrC,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;aACF;SACF;QAES,kCAAY,GAAtB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,uBAAuB,KAAK,KAAK,CAAC,EAAE;oBACnD,YAAY,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;iBAC5C;aACF,CAAC,CAAC;YACH,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;SACjC;QAES,iCAAW,GAArB;YACE,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,sBAAsB,KAAK,KAAK,CAAC,EAAE;oBAClD,YAAY,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;iBAC3C;aACF,CAAC,CAAC;SACJ;QAED,4BAAM,GAAN,UAAO,KAAkB;YACvB,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YACpC,IAAI,UAAU,KAAK,WAAW,IAAI,UAAU,KAAK,YAAY,EAAE;gBAC7D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aACpB;iBAAM,IAAI,UAAU,KAAK,UAAU,IAAI,UAAU,KAAK,WAAW,EAAE;gBAClE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB;SACF;QAED,0BAAI,GAAJ,UAAK,KAAkB;YACrB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC,EAAE;gBAC5B,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;iBAC/B;qBAAM;oBACL,KAAK,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACvD;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAChB,IAAI,CAAC,aAAa,CAACjB,SAAI,CAAC,WAAW,CAAC,CAAC;oBACrC,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,8BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,mBAAmB,KAAK,KAAK,CAAC,EAAE;oBAC/C,YAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;iBACxC;aACF,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SACvB;QAES,6BAAO,GAAjB;YACE,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,kBAAkB,KAAK,KAAK,CAAC,EAAE;oBAC9C,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;iBACvC;aACF,CAAC,CAAC;SACJ;QAED,0BAAI,GAAJ,UAAK,KAAkB;YACrB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC,EAAE;gBAC5B,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,EAAE;oBACtC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;iBAC/B;qBAAM;oBACL,KAAK,GAAGiB,qBAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACpC;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACvD;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAChB,IAAI,CAAC,aAAa,CAACjB,SAAI,CAAC,WAAW,CAAC,CAAC;oBACrC,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;aACF;SACF;QAES,8BAAQ,GAAlB;YACE,IAAI,CAAC,WAAW,CAAC,UAAU,YAAiC;gBAC1D,IAAI,YAAY,CAAC,mBAAmB,KAAK,KAAK,CAAC,EAAE;oBAC/C,YAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;iBACxC;aACF,CAAC,CAAC;SACJ;QAES,6BAAO,GAAjB;YACE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACrB,IAAI,CAAC,UAAU,CAAC,UAAU,YAAiC;gBACzD,IAAI,YAAY,CAAC,kBAAkB,KAAK,KAAK,CAAC,EAAE;oBAC9C,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;iBACvC;aACF,CAAC,CAAC;SACJ;QAES,6BAAO,GAAjB,UAAkB,KAAiB;YACjC,KAAK,CAAC,eAAe,EAAE,CAAC;SACzB;QAES,mCAAa,GAAvB,UAAwB,KAAiB;YACvC,KAAK,CAAC,cAAc,EAAE,CAAC;SACxB;QAxVD;YADCuB,mBAAc,CAAC,MAAM,EAAE,EAAC,KAAK,EAAE,CAAC,EAAC,CAAC;uDACM;QAyV3C,kBAAC;KAAA,CAjZgCF,aAAQ;;ICdzC;QAAgF,yCAAqB;QAArG;;SAwDC;QAvDC,sBAAI,6CAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC;aAC3D;;;WAAA;QAED,sBAAI,yCAAM;iBAAV;gBACE,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;aACvD;;;WAAA;QAED,sBAAI,wCAAK;iBAAT;gBACE,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;aACpD;;;WAAA;QAED,2CAAW,GAAX;YACE,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;gBACvB,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;aAC1B;SACF;QAED,qDAAqB,GAArB,UAAsB,IAAO;SAE5B;QAED,oDAAoB,GAApB,UAAqB,IAAO;YAC1B,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,IAAI,QAAQ,KAAK,IAAI,EAAE;gBACrB,QAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;aAC5C;SACF;QAED,uDAAuB,GAAvB,UAAwB,IAAO;SAE9B;QAED,sDAAsB,GAAtB,UAAuB,IAAO;YAC5B,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,IAAI,QAAQ,KAAK,IAAI,EAAE;gBACrB,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;aAC7B;SACF;QAED,mDAAmB,GAAnB,UAAoB,IAAO;SAE1B;QAED,kDAAkB,GAAlB,UAAmB,IAAO;SAEzB;QAED,mDAAmB,GAAnB,UAAoB,IAAO;SAE1B;QAED,kDAAkB,GAAlB,UAAmB,IAAO;SAEzB;QACH,4BAAC;IAAD,CAxDA,CAAgFG,uBAAkB;;ICDlG;QAA8B,4BAAQ;QACpC,kBAAY,IAAiB;mBAC3B,kBAAM,IAAI,CAAC;SACZ;QAES,2BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;iBACrB,QAAQ,CAAC,CAAC,CAAC;iBACX,UAAU,CAAC,CAAC,CAAC;iBACb,SAAS,CAAC,EAAE,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC,CAAC;SACvB;QAED,sBAAI,oCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAES,oCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAI,SAAS,YAAY,QAAQ,EAAE;gBACjC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;SACF;QAES,oCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAI,SAAS,YAAY,QAAQ,EAAE;gBACjC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,+BAAY,GAAtB,UAAuB,IAAc;SAEpC;QAES,+BAAY,GAAtB,UAAuB,IAAc;SAEpC;QAGD,8BAAW,GAAX,UAAY,IAAc;YACxB,IAAI,CAAC,UAAU,CAAC,UAAU,YAA8B;gBACtD,IAAI,YAAY,CAAC,gBAAgB,KAAK,KAAK,CAAC,EAAE;oBAC5C,YAAY,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;iBAC3C;aACF,CAAC,CAAC;SACJ;QACH,eAAC;IAAD,CA/CA,CAA8BH,aAAQ;;ICWtC;QAA8B,4BAAW;QAIvC,kBAAY,IAAiB;YAA7B,YACE,kBAAM,IAAI,CAAC,SAQZ;YAPC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAChB,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YACtD,KAAI,CAAC,kBAAkB,CAAC,QAAQ,CAACA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YACzD,KAAI,CAAC,kBAAkB,CAAC,QAAQ,CAACA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YACzD,KAAI,CAAC,UAAU,CAAC,QAAQ,CAACA,WAAK,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YACzD,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAI,CAAC,UAAU,CAAC,KAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;;SAC3B;QAES,2BAAQ,GAAlB,UAAmB,IAAiB;YAClC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;iBACrB,QAAQ,CAAC,UAAU,CAAC;iBACpB,OAAO,CAAC,MAAM,CAAC;iBACf,UAAU,CAAC,CAAC,CAAC;iBACb,MAAM,CAAC,EAAE,CAAC;iBACV,SAAS,CAAC,YAAY,CAAC;iBACvB,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,QAAQ,CAAC;iBAClB,UAAU,CAAC,MAAM,CAAC;iBAClB,MAAM,CAAC,SAAS,CAAC,CAAC;YACvB,IAAI,CAAC,WAAW,CAAC,YAAY,CAACD,aAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9C;QAED,sBAAI,oCAAc;iBAAlB;gBACE,OAAO,IAAI,CAAC,eAAe,CAAC;aAC7B;;;WAAA;QAoBD,sBAAI,iCAAW;iBAAf;gBACE,OAAO,IAAI,CAAC,YAAY,CAAC;aAC1B;;;WAAA;QAES,iCAAc,GAAxB,UAAyB,IAAc;YACrC,IAAM0B,MAAI,GAAGT,aAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC9B,OAAO,CAAC,MAAM,CAAC;iBACf,cAAc,CAAC,QAAQ,CAAC;iBACxB,UAAU,CAAC,QAAQ,CAAC;iBACpB,KAAK,CAAC,EAAE,CAAC;iBACT,MAAM,CAAC,EAAE,CAAC,CAAC;YAChB,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;gBACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,KAAM,CAAC,CAAC;gBACvCS,MAAI,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;aAC3B;YACD,OAAOA,MAAI,CAAC;SACb;QAES,kCAAe,GAAzB,UAA0B,IAAa;YACrC,IAAMA,MAAI,GAAGT,aAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;iBAC/B,OAAO,CAAC,OAAO,CAAC;iBAChB,UAAU,CAAC,oCAAoC,CAAC;iBAChD,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,QAAQ,CAAC;iBACpB,YAAY,CAAC,UAAU,CAAC;iBACxB,QAAQ,CAAC,QAAQ,CAAC;iBAClB,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,KAAM,CAAC,CAAC;YACxC,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;gBACnBS,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjB;YACD,OAAOA,MAAI,CAAC;SACb;QAID,2BAAQ,GAAR,UAAS,WAAuC;YAC9C,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAC5C,IAAM,WAAW,GAAG,SAAS,YAAYT,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;YACrE,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;gBAC1B,OAAO,WAAW,CAAC;aACpB;iBAAM;gBACL,IAAI,WAAW,YAAYK,YAAO,EAAE;oBAClC,IAAI,WAAW,KAAK,IAAI,EAAE;wBACxB,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;wBAC/C,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;qBAC3C;yBAAM;wBACL,WAAW,CAAC,SAAS,EAAE,CAAC;wBACxB,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;wBAChC,WAAW,GAAG,WAAW,CAAC;qBAC3B;iBACF;qBAAM,IAAI,WAAW,KAAK,IAAI,EAAE;oBAC/B,IAAI,WAAW,KAAK,IAAI,EAAE;wBACxB,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;qBAC3C;yBAAM;wBACL,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;qBACxC;iBACF;qBAAM,IAAI,WAAW,KAAK,IAAI,EAAE;oBAC/B,WAAW,CAAC,MAAM,EAAE,CAAC;iBACtB;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAID,4BAAS,GAAT,UAAU,YAAuC;YAC/C,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YAC7C,IAAM,YAAY,GAAG,SAAS,YAAYL,aAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;YACtE,IAAI,YAAY,KAAK,KAAK,CAAC,EAAE;gBAC3B,OAAO,YAAY,CAAC;aACrB;iBAAM;gBACL,IAAI,OAAO,YAAY,KAAK,QAAQ,EAAE;oBACpC,IAAI,YAAY,KAAK,IAAI,EAAE;wBACzB,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;wBAClD,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;qBAC7C;yBAAM;wBACL,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;wBAChC,YAAY,GAAG,YAAY,CAAC;qBAC7B;iBACF;qBAAM,IAAI,YAAY,KAAK,IAAI,EAAE;oBAChC,IAAI,YAAY,KAAK,IAAI,EAAE;wBACzB,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;qBAC7C;yBAAM;wBACL,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;qBAC1C;iBACF;qBAAM,IAAI,YAAY,KAAK,IAAI,EAAE;oBAChC,YAAY,CAAC,MAAM,EAAE,CAAC;iBACvB;gBACD,OAAO,IAAI,CAAC;aACb;SACF;QAES,0BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QAES,4BAAS,GAAnB;YACE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,4BAAS,GAAnB,UAAoB,WAAwB;YAC1C,iBAAM,SAAS,YAAC,WAAW,CAAC,CAAC;YAC7B,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;YAC/C,IAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;gBACrC,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAG,CAAC;gBACpC,SAAS,CAAC,OAAO,CAAC,aAAa,KAAK,CAAC,GAAG,MAAM,GAAG,OAAO,CAAC;qBAC/C,OAAO,CAAC,aAAa,CAAC,CAAC;aAClC;SACF;QAES,2BAAQ,GAAlB,UAAmB,WAAwB;YACzC,iBAAM,QAAQ,YAAC,WAAW,CAAC,CAAC;YAC5B,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YACzC,IAAI,UAAU,KAAK,KAAK,CAAC,EAAE;gBACzB,IAAI,CAAC,WAAW,CAAC,YAAY,CAACjB,aAAM,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC5E,IAAI,CAAC,YAAY,CAAC,YAAY,CAACA,aAAM,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAC/E;SACF;QAES,oCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAmC;YAC9E,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,IAAI,SAAS,YAAYiB,aAAQ,EAAE;gBACxD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;iBAAM,IAAI,QAAQ,KAAK,OAAO,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBAChE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;aAC/B;SACF;QAES,oCAAiB,GAA3B,UAA4B,SAAe;YACzC,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC;YAC/B,IAAI,QAAQ,KAAK,MAAM,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBACxD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;aAC9B;iBAAM,IAAI,QAAQ,KAAK,OAAO,IAAI,SAAS,YAAYA,aAAQ,EAAE;gBAChE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;aAC/B;YACD,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;SACpC;QAES,+BAAY,GAAtB,UAAuB,IAAc;YACnC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;iBACb,UAAU,CAAC,CAAC,CAAC;iBACb,WAAW,CAAC,CAAC,CAAC,CAAC;SACrB;QAES,+BAAY,GAAtB,UAAuB,IAAc;SAEpC;QAES,gCAAa,GAAvB,UAAwB,KAAe;YACrC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;iBACb,UAAU,CAAC,CAAC,CAAC;iBACb,WAAW,CAAC,CAAC,CAAC,CAAC;SACtB;QAES,gCAAa,GAAvB,UAAwB,KAAe;SAEtC;QAES,kCAAe,GAAzB;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YACzC,IAAI,UAAU,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,EAAE;gBAC1D,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;oBACzC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;iBAC/D;gBACD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aACvE;SACF;QAES,iCAAc,GAAxB;YACE,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YACzC,IAAI,UAAU,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,EAAE;gBAC1D,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAChF;SACF;QAED,4BAAS,GAAT,UAAU,KAAkB;YAC1B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;gBACD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;gBAClF,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACjC,IAAI,QAAQ,KAAK,IAAI,EAAE;oBACrB,IAAM,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;oBAC3C,IAAI,IAAI,YAAYK,YAAO,EAAE;wBAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAM,EAAE,KAAK,CAAC,CAAC;qBAClD;iBACF;gBACD,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;gBACnC,IAAI,SAAS,KAAK,IAAI,EAAE;oBACtB,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAM,EAAE,KAAK,CAAC,CAAC;iBACxD;aACF;YACD,OAAO,IAAI,CAAC;SACb;QAED,8BAAW,GAAX,UAAY,KAAkB;YAC5B,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC1B,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC;iBAChC;gBACD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;gBAClF,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACjC,IAAI,QAAQ,KAAK,IAAI,EAAE;oBACrB,IAAM,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;oBAC3C,IAAI,IAAI,YAAYA,YAAO,EAAE;wBAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,KAAM,EAAE,KAAK,CAAC,CAAC;qBAC/C;iBACF;gBACD,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;gBACnC,IAAI,SAAS,KAAK,IAAI,EAAE;oBACtB,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,KAAM,EAAE,KAAK,CAAC,CAAC;iBACrD;aACF;YACD,OAAO,IAAI,CAAC;SACb;QAES,0BAAO,GAAjB,UAAkB,KAAiB;YACjC,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,UAAU,YAAY,QAAQ,EAAE;gBAClC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aAC9B;SACF;QArPD;YADCH,mBAAc,CAAC,MAAM,EAAE,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;uDACI;QAG5C;YADCA,mBAAc,CAAClB,WAAK,CAAC;yDACiC;QAGvD;YADCkB,mBAAc,CAAClB,WAAK,CAAC;4DACoC;QAG1D;YADCkB,mBAAc,CAAClB,WAAK,CAAC;4DACoC;QAG1D;YADCkB,mBAAc,CAAClB,WAAK,CAAC;oDAC4B;QAGlD;YADCoB,cAAS,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;oDACiB;QAuO9C,eAAC;KAAA,CAzR6B,WAAW;;ICXzC;QAAuE,sCAAqB;QAI1F;YAAA,YACE,iBAAO,SAER;YADC,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;SAC3B;QAED,sBAAI,4CAAY;iBAAhB;gBACE,OAAO,IAAI,CAAC,aAAa,CAAC;aAC3B;;;WAAA;QAED,uCAAU,GAAV,UAAW,OAAwB;YACjC,IAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC;YACnC,IAAI,OAAO,KAAK,OAAO,EAAE;gBACvB,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACtC,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACpC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;aACtC;SACF;QAES,2CAAc,GAAxB,UAAyB,OAAwB,EAAE,OAAwB;SAE1E;QAES,yCAAY,GAAtB,UAAuB,OAAwB,EAAE,OAAwB;YACvE,IAAI,OAAO,KAAK,IAAI,EAAE;gBACpB,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aAC3B;YACD,IAAI,OAAO,KAAK,IAAI,EAAE;gBACpB,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aAC1B;SACF;QAES,0CAAa,GAAvB,UAAwB,OAAwB,EAAE,OAAwB;SAEzE;QAED,6CAAgB,GAAhB,UAAiB,IAAc,EAAE,IAAO;YACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;SACvB;QACH,yBAAC;IAAD,CA3CA,CAAuED,uBAAkB;;;QCb/C,wCAAW;QAkBnD,8BAAY,OAAgB;YAA5B,YACE,iBAAO,SAMR;YALC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,WAAW,EAAE,CAAC;;SACpB;QAES,0CAAW,GAArB;YACE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;iBACV,MAAM,CAAC,GAAG,CAAC;iBACX,YAAY,CAAC,EAAE,CAAC;iBAChB,SAAS,CAACO,YAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE1B,QAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;iBAC5D,eAAe,CAACA,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAExD,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC7B,MAAM,CAAC,MAAM,CAAC;iBACd,SAAS,CAAC,MAAM,CAAC;iBACjB,KAAK,CAAC,SAAS,CAAC,CAAC;YAEtB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAClC,SAAS,CAAC,EAAE,CAAC;iBACb,WAAW,CAAC,EAAE,CAAC;iBACf,YAAY,CAAC,EAAE,CAAC;iBAChB,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,KAAK,CAAC,CAAC;YAEvB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACtC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;YAElB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACpC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;YAElB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACtC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;SACnB;QAED,yCAAU,GAAV,UAAW,OAAc;YAEvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;YAC5D,OAAO,CAAC,OAAO,CAAC,UAAU,IAAU;gBAClC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,MAAM,EAAE;oBACpC,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACpE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACvC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYS,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,2CAAY,GAAZ,UAAa,SAAgB;YAE3B,SAAS,CAAC,OAAO,CAAC,UAAU,IAAU;gBACpC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,EAAE;oBAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACtE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACzC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYA,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,6CAAc,GAAd,UAAe,GAAU,EAAE,QAAe;YACxC,IAAM,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAE5C,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;gBAC1B,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,WAAW,CAAoB,CAAC;gBAC9E,IAAI,SAAS,SAAU,CAAC;gBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;oBACrB,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,WAAW,CAAC;yBACjD,KAAK,CAAC,SAAS,CAAC,CAAC;oBACtB,IAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,EAA6B,CAAC;oBACnF,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;wBAC1B,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;wBAC3B,QAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAEf,YAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;qBAChG;oBACD,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;yBACvB,KAAK,CAAC,KAAK,CAAC;yBACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;yBACrB,SAAS,CAAC,MAAM,CAAC;yBACjB,IAAI,CAAC,WAAW,CAAC,CAAC;oBACvB,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;yBACrC,KAAK,CAAC,KAAK,CAAC;yBACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBAC5B;qBAAM;oBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;iBACxD;gBACD,IAAI,QAAQ,YAAYe,WAAM,EAAE;oBAC9B,IAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;oBAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,SAAS,EAAE,EAAE;wBAC3D,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;qBACjE;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;iBACF;qBAAM;oBACL,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;iBAC5C;aACF;SACF;QAED,6CAAc,GAAd,UAAe,GAAU,EAAE,QAAe;YACxC,IAAM,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAE5C,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;aAChD;SACF;QAES,2CAAY,GAAtB,UAAuB,WAAmB,EAAE,QAAkB,EAAE,KAAiB;YAE/E,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,UAAU,KAAK,IAAI,EAAE;gBACvB,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC;oBACnB,MAAM,EAAE,QAAQ,CAAC,KAAK,EAAE;oBACxB,IAAI,EAAE,EAAE;iBACT,CAAC,CAAC;aACJ;SACF;QAED,sBAAI,4CAAU;iBAAd;gBACE,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;gBACvB,OAAO,IAAI,KAAK,IAAI,EAAE;oBACpB,IAAI,IAAI,YAAYkB,cAAU,EAAE;wBAC9B,OAAO,IAAI,CAAC;qBACb;oBACD,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;iBACxB;gBACD,OAAO,IAAI,CAAC;aACb;;;WAAA;QAES,sCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAES,sCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB;QAES,wCAAS,GAAnB;YACE,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,uCAAQ,GAAlB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBACzC,OAAO,CAAC,MAAM,CAAC;qBACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAClC,IAAI,EAAE,CAAC;aACb;SACF;QAES,yCAAU,GAApB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;SACF;QAES,yCAAU,GAApB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBAC3C,OAAO,CAAC,QAAQ,CAAC;qBACjB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpC,IAAI,EAAE,CAAC;aACb;SACF;QAES,2CAAY,GAAtB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;QAES,yCAAU,GAApB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;qBACzC,OAAO,CAAC,QAAQ,CAAC;qBACjB,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACzC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACzC,IAAI,EAAE,CAAC;aACb;SACF;QAES,2CAAY,GAAtB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;QACH,2BAAC;IAAD,CA7RA,CAA0C,WAAW;;;QCAb,sCAAW;QAsBjD,4BAAY,OAAgB;YAA5B,YACE,iBAAO,SAOR;YANC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,EAAE,CAAC;;SACpB;QAES,wCAAW,GAArB;YACE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;iBACV,MAAM,CAAC,GAAG,CAAC;iBACX,YAAY,CAAC,EAAE,CAAC;iBAChB,SAAS,CAACD,YAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE1B,QAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;iBAC5D,eAAe,CAACA,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAExD,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC7B,MAAM,CAAC,MAAM,CAAC;iBACd,SAAS,CAAC,MAAM,CAAC;iBACjB,KAAK,CAAC,SAAS,CAAC,CAAC;YAEtB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAClC,SAAS,CAAC,EAAE,CAAC;iBACb,WAAW,CAAC,EAAE,CAAC;iBACf,YAAY,CAAC,EAAE,CAAC;iBAChB,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,KAAK,CAAC,CAAC;YAEvB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACpC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;YAElB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,SAAS,CAAC,CAAC;YACrB,IAAM,gBAAgB,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBACzC,QAAQ,CAAC,UAAU,CAAC;iBACpB,MAAM,CAAC,GAAG,CAAC;iBACX,YAAY,CAAC,EAAE,CAAC,CAAC;YACtB,IAAM,aAAa,GAAG,gBAAgB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACxD,IAAI,CAAC,aAAa,GAAG,IAAI4B,eAAS,EAAE;iBAC/B,UAAU,CAAC,MAAM,CAAC;iBAClB,QAAQ,CAAC,QAAQ,CAAC;iBAClB,SAAS,CAAC,CAAC,CAAC;iBACZ,UAAU,CAAC,EAAE,CAAC;iBACd,WAAW,CAAC,EAAE,CAAC;iBACf,iBAAiB,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;iBAC7B,aAAa,CAAC,IAAI,CAAC;iBACnB,WAAW,CAAC,SAAS,CAAC;iBACtB,aAAa,CAAC,SAAS,CAAC;iBACxB,IAAI,CAAC,iBAAiB,CAAC;iBACvB,SAAS,CAAC,SAAS,CAAC,CAAC;YAC1B,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAEzC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACtC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;YAElB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACpC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;SACnB;QAED,uCAAU,GAAV,UAAW,OAAc;YAEvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;YAC5D,OAAO,CAAC,OAAO,CAAC,UAAU,IAAU;gBAClC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,MAAM,IAAI,GAAG,KAAK,aAAa,EAAE;oBAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACpE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACvC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYnB,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,yCAAY,GAAZ,UAAa,SAAgB;YAE3B,SAAS,CAAC,OAAO,CAAC,UAAU,IAAU;gBACpC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,aAAa,EAAE;oBAC3C,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACtE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACzC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYA,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,uCAAU,GAAV,UAAW,OAAc;YAEvB,OAAO,CAAC,OAAO,CAAC,UAAU,IAAU;gBAClC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,EAAE;oBAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACpE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACvC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYA,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,6CAAgB,GAAhB,UAAiB,GAAU,EAAE,SAAgB;YAE3C,IAAM,CAAC,GAAG,IAAIoB,aAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,SAAS,CAAC,OAAO,CAAC,UAAU,IAAU;gBACpC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACvC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,eAAe,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;oBACjE,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,CAA2C,CAAC;oBACjG,IAAI,WAAW,KAAK,IAAI,EAAE;wBACxB,WAAW,GAAG,IAAIC,mBAAa,EAAoB;6BAC9C,OAAO,CAAC,MAAM,CAAC;6BACf,MAAM,CAAC,SAAS,CAAC;6BACjB,WAAW,CAAC,CAAC,CAAC;6BACd,EAAE,CAAC,WAAW,EAAE,UAAU,KAAqB;4BAC9C,IAAM,KAAK,GAAG,KAAK,CAAC,UAAyC,CAAC;4BAC9D,IAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,KAAM,CAAC;4BACzB,KAAK,CAAC,KAAK,CAACC,cAAW,CAAC,OAAO,CAAC;gCAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG;6BAChC,CAAC,CAAC,CAAC;yBACL,CAAC;6BACD,EAAE,CAAC,UAAU,EAAE,UAAU,KAAqB;4BAC7C,IAAM,KAAK,GAAG,KAAK,CAAC,UAAyC,CAAC;4BAC9D,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;yBACnB,CAAC,CAAC;wBACP,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;qBACnD;oBACD,WAAW,CAAC,WAAW,CAAC,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAC,CAAC,CAAC;oBAE1C,IAAM,SAAS,GAAG,GAAG,GAAG,SAAS,CAAC;oBAClC,IAAI,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAA2C,CAAC;oBACtG,IAAI,UAAU,KAAK,IAAI,EAAE;wBACvB,UAAU,GAAG,IAAID,mBAAa,EAAoB;6BAC7C,OAAO,CAAC,MAAM,CAAC;6BACf,MAAM,CAAC,SAAS,CAAC;6BACjB,WAAW,CAAC,CAAC,CAAC,CAAC;wBACpB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;qBACxD;oBACD,UAAU,CAAC,SAAS,EAAE,CAAC;oBACvB,IAAM,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;oBACrD,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE;wBACxB,UAAU,CAAC,WAAW,CAAC,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;wBACrD,IAAM,SAAS,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,KAAM,GAAG,KAAK,IAAI,CAAC,CAAC;wBACnD,UAAU,CAAC,WAAW,CAAC,EAAC,CAAC,EAAE,IAAID,aAAQ,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;qBACvF;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,6CAAgB,GAAhB,UAAiB,GAAU,EAAE,SAAgB;YAE3C,IAAM,CAAC,GAAG,IAAIA,aAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,SAAS,CAAC,OAAO,CAAC,UAAU,IAAU;gBACpC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACvC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,eAAe,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;oBACjE,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,CAA2C,CAAC;oBACjG,IAAI,WAAW,KAAK,IAAI,EAAE;wBACxB,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;qBAC5B;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAES,oCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAES,sCAAS,GAAnB;YACE,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,oCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAES,qCAAQ,GAAlB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBACzC,OAAO,CAAC,MAAM,CAAC;qBACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAClC,IAAI,EAAE,CAAC;aACb;SACF;QAES,uCAAU,GAApB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;SACF;QAES,uCAAU,GAApB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBAC3C,OAAO,CAAC,QAAQ,CAAC;qBACjB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpC,IAAI,EAAE,CAAC;aACb;SACF;QAES,yCAAY,GAAtB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;QAES,qCAAQ,GAAlB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBACzC,OAAO,CAAC,MAAM,CAAC;qBACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAClC,IAAI,EAAE,CAAC;aACb;SACF;QAES,uCAAU,GAApB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;SACF;QAES,wCAAW,GAArB;YACE,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;qBAC1C,OAAO,CAAC,iBAAiB,CAAC;qBAC1B,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC3C,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC3C,IAAI,EAAE,CAAC;aACb;SACF;QAES,0CAAa,GAAvB;YACE,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC9B,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;gBAC1B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aAC1B;SACF;QACH,yBAAC;IAAD,CAvWA,CAAwC,WAAW;;;QCDT,wCAAW;QAcnD,8BAAY,OAAgB;YAA5B,YACE,iBAAO,SAKR;YAJC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,WAAW,EAAE,CAAC;;SACpB;QAES,0CAAW,GAArB;YACE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;iBACV,MAAM,CAAC,GAAG,CAAC;iBACX,YAAY,CAAC,EAAE,CAAC;iBAChB,SAAS,CAACH,YAAS,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE1B,QAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;iBAC5D,eAAe,CAACA,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAExD,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;iBAC7B,MAAM,CAAC,MAAM,CAAC;iBACd,SAAS,CAAC,MAAM,CAAC;iBACjB,KAAK,CAAC,SAAS,CAAC,CAAC;YAEtB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAClC,SAAS,CAAC,EAAE,CAAC;iBACb,WAAW,CAAC,EAAE,CAAC;iBACf,YAAY,CAAC,EAAE,CAAC;iBAChB,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,KAAK,CAAC;iBACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;YAE9C,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACtC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;YAElB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,UAAU,CAAC,EAAE,CAAC;iBACd,QAAQ,CAAC,EAAE,CAAC;iBACZ,UAAU,CAAC,MAAM,CAAC;iBAClB,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;iBACpC,KAAK,CAAC,MAAM,CAAC;iBACb,YAAY,CAAC,EAAE,CAAC;iBAChB,YAAY,CAAC,EAAE,CAAC;iBAChB,WAAW,CAAC,EAAE,CAAC;iBACf,QAAQ,CAAC,EAAE,CAAC,CAAC;SACnB;QAED,yCAAU,GAAV,UAAW,OAAc;YAEvB,OAAO,CAAC,OAAO,CAAC,UAAU,IAAU;gBAClC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,EAAE;oBAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACpE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACvC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYS,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAED,2CAAY,GAAZ,UAAa,SAAgB;YAE3B,SAAS,CAAC,OAAO,CAAC,UAAU,IAAU;gBACpC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzC,IAAI,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,aAAa,EAAE;oBAC3C,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,CAAoB,CAAC;oBACtE,IAAI,SAAS,SAAU,CAAC;oBACxB,IAAI,QAAQ,KAAK,IAAI,EAAE;wBACrB,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;6BACzC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC;6BACvB,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BACrB,SAAS,CAAC,MAAM,CAAC;6BACjB,IAAI,CAAC,GAAG,CAAC,CAAC;wBACf,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC;6BACrC,KAAK,CAAC,KAAK,CAAC;6BACZ,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC5B;yBAAM;wBACL,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAa,CAAC;qBACxD;oBACD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,IAAI,KAAK,YAAYA,WAAM,EAAE;wBAC3B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC/C;yBAAM;wBACL,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;qBACzC;iBACF;aACF,EAAE,IAAI,CAAC,CAAC;SACV;QAES,sCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB;QAES,wCAAS,GAAnB;YACE,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,sCAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAES,uCAAQ,GAAlB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBACzC,OAAO,CAAC,MAAM,CAAC;qBACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAClC,IAAI,EAAE,CAAC;aACb;SACF;QAES,yCAAU,GAApB;YACE,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;SACF;QAES,yCAAU,GAApB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBAC3C,OAAO,CAAC,QAAQ,CAAC;qBACjB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpC,IAAI,EAAE,CAAC;aACb;SACF;QAES,2CAAY,GAAtB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;QACH,2BAAC;IAAD,CApLA,CAA0C,WAAW;;ICCrD,IAAM,YAAY,GAAGG,aAAU,CAAC,QAAQ,CAAM,GAAG,EAAEC,OAAI,CAAC,QAAQ,CAAC,CAAC;;QAE/B,iCAAU;QAQ3C,uBAAY,OAAgB;YAA5B,YACE,iBAAO,SAKR;YAJC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,OAAO,GAAGX,UAAK,CAAC,MAAM,EAAE,CAAC;YAC9B,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;SAC1B;QAED,oCAAY,GAAZ,UAAa,SAAgB,EAAE,KAAgC;YAAhC,sBAAA,EAAA,oBAAgC;YAC7D,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;YACzB,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC9B,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,KAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;aACjF;YACD,IAAI,CAAC,aAAa,CAACP,OAAI,CAAC,YAAY,CAAC,CAAC;SACvC;QAES,+BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAChB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QAES,iCAAS,GAAnB;YACE,iBAAM,SAAS,WAAE,CAAC;YAClB,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SACjC;QAED,iCAAS,GAAT,UAAU,WAA2B;YACnC,iBAAM,SAAS,YAAC,WAAW,CAAC,CAAC;YAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,UAAW,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACxD,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,WAAW,EAAG,CAAC;YAC3D,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,WAAW,EAAG,CAAC;YACvD,IAAI,CAAC,UAAU,CAAC6B,QAAK,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC;iBACnE,UAAU,CAACA,QAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;iBAC5B,WAAW,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;iBAC1B,WAAW,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;SACrC;QAES,+BAAO,GAAjB,UAAkB,KAAiB;YAEjC,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACpC,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,WAAW,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACtD,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBAC5B,WAAW,CAAC,SAAS,EAAE,CAAC;gBACxB,WAAW,CAAC,eAAe,CAAC,SAAS,GAAG;oBACtC,WAAY,CAAC,KAAK,EAAE,CAAC;iBACtB,CAAC;gBACF,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;aACjC;YACD,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,KAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACnE,IAAI,CAAC,QAAS,CAAC,WAAW,CAAC,WAAW,EAAE,EAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAC,CAAC,CAAC;SAChE;QACH,oBAAC;IAAD,CA7DA,CAAmCQ,cAAU;;ICc7C,IAAM,UAAU,GAAGhC,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC1C,IAAM,UAAU,GAAGA,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC1C,IAAM,WAAW,GAAGA,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC3C,IAAM,iBAAiB,GAAGiC,oBAAiB,CAAC,OAAO,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;IAC5E,IAAM,kBAAkB,GAAGA,oBAAiB,CAAC,OAAO,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;IAC9E,IAAMC,cAAY,GAAGtB,aAAU,CAAC,QAAQ,CAAM,GAAG,EAAEC,OAAI,CAAC,QAAQ,CAAC,CAAC;IAElE,IAAM,eAAe,GAAG,EAAE,CAAC;;QAEM,+BAAY;QAU3C,qBAAY,OAAgB;YAA5B,YACE,iBAAO,SAMR;YALC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,KAAI,CAAC,YAAY,GAAG,UAAU,CAAC;YAC/B,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;SAC1B;QAWD,kCAAY,GAAZ,UAAa,SAAgB,EAAE,KAAgC;YAAhC,sBAAA,EAAA,sBAAgC;YAE7D,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAyB,CAAC;YACjE,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,IAAM,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,EAAiB,CAAC;gBACxE,MAAM,GAAG,IAAIsB,iBAAa,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC9D,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;aACrC;YACD,IAAI,KAAY,CAAC;YACjB,IAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC1D,IAAI,QAAQ,GAAG,CAAC,EAAE;gBAChB,KAAK,GAAG,kBAAkB,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACrD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBACxB,IAAI,KAAK,KAAK,KAAK,EAAE;oBACnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;iBAC7B;aACF;iBAAM,IAAI,QAAQ,GAAG,CAAC,EAAE;gBACvB,KAAK,GAAG,iBAAiB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBAChD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBACxB,IAAI,KAAK,KAAK,KAAK,EAAE;oBACnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;iBAC7B;aACF;iBAAM;gBACL,KAAK,GAAG,UAAU,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;aAC9B;YACD,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC9B,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;aACtE;YACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;SAC3B;QAED,4BAAM,GAAN,UAAO,KAAY,EAAE,KAAa,EAAE,QAAgB;YAClD,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBAC/G,IAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAkB,CAAC;gBAC5D,IAAM,QAAM,GAAG,IAAIA,iBAAa,EAAE;qBAC7B,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;qBACjC,MAAM,CAAC,CAAC,CAAC;qBACT,MAAM,CAAC,KAAK,CAAC;qBACb,WAAW,CAAC,KAAK,CAAC,CAAC;gBACxB,WAAW,CAAC,eAAe,CAAC,QAAM,CAAC,CAAC;gBACpC,IAAM,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC;gBACpC,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACvD,IAAM,KAAK,GAAGvB,aAAU,CAAC,QAAQ,CAAM,QAAQ,CAAC,CAAC;gBACjD,QAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;qBAC7B,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,cAAc,QAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aACtE;SACF;QAED,sBAAI,oCAAW;iBAAf;gBACE,IAAI,WAAW,GAAY,IAAI,CAAC;gBAChC,GAAG;oBACD,IAAM,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC;oBAC1C,IAAIwB,WAAO,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;wBAC1B,WAAW,GAAG,UAAU,CAAC;wBACzB,SAAS;qBACV;oBACD,MAAM;iBACP,QAAQ,IAAI,EAAE;gBACf,OAAO,WAAW,CAAC;aACpB;;;WAAA;QAES,qCAAe,GAAzB,UAA0B,GAAU,EAAE,eAAsB;YAE1D,IAAM,aAAa,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YACzC,IAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,WAAW,EAAG,CAAC;YAC9D,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAwB,CAAC;YACpE,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,WAAW,GAAG,IAAIC,gBAAY,EAAE,CAAC;gBACjC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;aACzC;YACD,IAAI,aAAa,GAAG,WAAW,CAAC,YAAY,CAAC,aAAa,CAAyB,CAAC;YACpF,IAAI,aAAa,KAAK,IAAI,EAAE;gBAC1B,IAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAkB,CAAC;gBAC5D,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;gBAC3D,aAAa,GAAG,IAAI,aAAa,CAAC,aAAa,CAAC;qBAC3C,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACvC,aAAa,CAAC,YAAY,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;gBACnD,WAAW,CAAC,YAAY,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;aACxD;iBAAM;gBACL,aAAa,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;aAC7C;SACF;QAES,qCAAe,GAAzB,UAA0B,GAAU,EAAE,eAAsB;YAE1D,IAAM,aAAa,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YACzC,IAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,WAAW,EAAG,CAAC;YAC9D,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAwB,CAAC;YACtE,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,WAAW,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC;gBAC3C,IAAI,WAAW,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;oBACvC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;iBACnC;aACF;SACF;QAES,6BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;SACjB;QAES,+BAAS,GAAnB;YACE,iBAAM,SAAS,WAAE,CAAC;YAClB,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;QAES,uCAAiB,GAA3B,UAA4B,SAAe,EAAE,UAAuB;YAClE,iBAAM,iBAAiB,YAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC/C,IAAI,SAAS,CAAC,GAAG,KAAK,QAAQ,EAAE;gBAC9B,SAAS,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;aACrC;SACF;QAES,uCAAiB,GAA3B,UAA4B,SAAe;YACzC,iBAAM,iBAAiB,YAAC,SAAS,CAAC,CAAC;YACnC,IAAI,SAAS,CAAC,GAAG,KAAK,QAAQ,EAAE;gBAC9B,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;aACtC;SACF;QAES,gCAAU,GAApB,UAAqB,WAA2B;YAC9C,IAAI,WAAW,CAAC,OAAO,IAAI,eAAe,IAAI,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBAC7F,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;iBAAM;gBACL,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;oBAC9B,IAAI,CAAC,QAAS,CAAC,aAAa,EAAE,CAAC;iBAChC;gBACD,IAAI,CAAC,aAAa,EAAE,CAAC;aACtB;YACD,iBAAM,UAAU,YAAC,WAAW,CAAC,CAAC;SAC/B;QAES,6BAAO,GAAjB,UAAkB,KAAiB;YAEjC,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACpC,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,WAAW,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpD,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnD,WAAW,CAAC,SAAS,EAAE,CAAC;gBACxB,WAAW,CAAC,eAAe,CAAC,SAAS,GAAG;oBACtC,WAAY,CAAC,KAAK,EAAE,CAAC;iBACtB,CAAC;gBACF,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;aACjC;YACD,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,QAAS,CAAC,WAAW,CAAC,WAAW,EAAE,EAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAC,CAAC,CAAC;SAChE;QAES,iCAAW,GAArB;YACE,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAE9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;qBAC1C,OAAO,CAAC,SAAS,CAAC;qBAClB,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC1C,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC1C,IAAI,EAAE,CAAC;aACb;SACF;QAES,mCAAa,GAAvB;YACE,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAE9B,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;gBAC1B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,IAAI,CAAC,GAAG,CAAC,CAAC;gBACV,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;oBAClC,IAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;oBACtC,IAAI,SAAS,YAAYA,gBAAY,EAAE;wBACrC,SAAS,CAAC,MAAM,EAAE,CAAC;qBACpB;yBAAM;wBACL,CAAC,IAAI,CAAC,CAAC;qBACR;iBACF;aACF;SACF;QAxLD;YADCnB,iBAAc,CAAClB,QAAK,CAAC;iDACsB;QAG5C;YADCkB,iBAAc,CAAClB,QAAK,CAAC;mDACwB;QAG9C;YADCkB,iBAAc,CAAC,MAAM,CAAC;wDACmB;QAmL5C,kBAAC;KAAA,CA7MgCmB,gBAAY;;ICM7C,IAAMC,YAAU,GAAGtC,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC1C,IAAMuC,YAAU,GAAGvC,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC1C,IAAMwC,aAAW,GAAGxC,QAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAC3C,IAAMyC,mBAAiB,GAAGR,oBAAiB,CAAC,OAAO,CAACK,YAAU,EAAEC,YAAU,CAAC,CAAC;IAC5E,IAAMG,oBAAkB,GAAGT,oBAAiB,CAAC,OAAO,CAACM,YAAU,EAAEC,aAAW,CAAC,CAAC;IAC9E,IAAMN,cAAY,GAAGtB,aAAU,CAAC,QAAQ,CAAM,IAAI,EAAEC,OAAI,CAAC,QAAQ,CAAC,CAAC;;QAEhC,iCAAY;QA8B7C,uBAAY,OAAgB;YAA5B,YACE,iBAAO,SAgBR;YAfC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvC,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,KAAI,CAAC,QAAQ,GAAG,CAAC,QAAQ,CAAC;YAC1B,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,KAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;YAClC,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;YAC7B,KAAI,CAAC,YAAY,GAAGnB,YAAQ,CAAC,MAAM,EAAE,CAAC;YACtC,KAAI,CAAC,aAAa,GAAGD,YAAO,CAAC,MAAM,EAAE,CAAC;YACtC,KAAI,CAAC,YAAY,GAAG6C,YAAU,CAAC;YAC/B,KAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;SACxB;QAWD,oCAAY,GAAZ,UAAa,SAAgB,EAAE,KAAgC;YAAhC,sBAAA,EAAA,sBAAgC;YAE7D,IAAM,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAM,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAM,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAM,SAAS,GAAG,SAAS,GAAG,SAAS,CAAC;YACxC,IAAM,UAAU,GAAG,UAAU,GAAG,SAAS,CAAC;YAC1C,IAAI,KAAY,CAAC;YACjB,IAAI,KAAa,CAAC;YAClB,IAAI,UAAU,GAAG,KAAK,EAAE;gBACtB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,KAAK,UAAU,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;gBACxD,KAAK,GAAGI,oBAAkB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC9C,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC;qBAC7C,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC;qBAC9C,WAAW,CAAC,CAAC,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC;aACpC;iBAAM,IAAI,SAAS,GAAG,IAAI,EAAE;gBAC3B,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;gBACrD,KAAK,GAAGD,mBAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC7C,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC;qBAC5C,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC;qBAC7C,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;aAC5B;iBAAM;gBACL,KAAK,GAAG,CAAC,CAAC;gBACV,KAAK,GAAGH,YAAU,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC;qBAC7B,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC;qBAC/B,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;aAC5B;YACD,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBAC9B,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;aACtE;YACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;SAC3B;QAES,sCAAc,GAAxB,UAAyB,WAAkB;YAEzC,IAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/D,IAAI,OAAO,KAAK,KAAK,CAAC,EAAE;gBACtB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;gBACxB,IAAI,CAAC,aAAa,CAAC3C,OAAI,CAAC,YAAY,CAAC,CAAC;aACvC;YACD,IAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/D,IAAI,OAAO,KAAK,KAAK,CAAC,EAAE;gBACtB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;gBACxB,IAAI,CAAC,aAAa,CAACA,OAAI,CAAC,YAAY,CAAC,CAAC;aACvC;YACD,IAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YACjF,IAAI,gBAAgB,KAAK,KAAK,CAAC,EAAE;gBAC/B,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAACA,OAAI,CAAC,YAAY,CAAC,CAAC;aACvC;YACD,IAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YACvE,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE;gBAC1B,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;gBAChC,IAAI,CAAC,aAAa,CAACA,OAAI,CAAC,YAAY,CAAC,CAAC;aACvC;YAED,IAAM,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YACzD,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;gBACnB,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAwB,CAAC;gBACxE,IAAI,YAAY,KAAK,IAAI,EAAE;oBACzB,YAAY,GAAG,IAAI0C,gBAAY,EAAE,CAAC;oBAClC,YAAY,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;oBACvC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;iBAC7C;qBAAM;oBACL,YAAY,CAAC,SAAS,EAAE,CAAC;iBAC1B;gBACD,IAAI,IAAI,KAAK,SAAS,EAAE;oBACtB,IAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,EAAqB,CAAC;oBAC9E,YAAY,CAAC,MAAM,CAACM,kBAAc,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC5D;qBAAM,IAAI,IAAI,KAAK,cAAc,EAAE;oBAClC,IAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,EAAuB,CAAC;oBAChF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;wBAC9C,YAAY,CAAC,MAAM,CAACA,kBAAc,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC/D;iBACF;aACF;YACD,IAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,EAA6B,CAAC;YAChF,IAAI,QAAQ,KAAK,KAAK,CAAC,EAAE;gBACvB,IAAI,CAAC,YAAY,GAAGjD,YAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aAChD;SACF;QAES,0CAAkB,GAA5B,UAA6B,GAAU,EAAE,kBAAyB;YAEhE,IAAM,gBAAgB,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YAC5C,IAAI,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAyB,CAAC;YACnF,IAAI,gBAAgB,KAAK,IAAI,EAAE;gBAC7B,IAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;gBACjE,gBAAgB,GAAG,IAAI,aAAa,CAAC,gBAAgB,CAAC,CAAC;gBACvD,gBAAgB,CAAC,YAAY,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;gBACzD,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;aACvD;iBAAM;gBACL,gBAAgB,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;aACnD;SACF;QAES,0CAAkB,GAA5B,UAA6B,GAAU,EAAE,kBAAyB;YAEhE,IAAM,gBAAgB,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YAC5C,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;SACxC;QAES,qCAAa,GAAvB,UAAwB,GAAU,EAAE,aAAoB;YAEtD,IAAM,WAAW,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YACvC,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAuB,CAAC;YACvE,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,IAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBACvD,WAAW,GAAG,IAAI,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC3C,WAAW,CAAC,YAAY,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;gBAC/C,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;aAC7C;iBAAM;gBACL,WAAW,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;aACzC;SACF;QAES,qCAAa,GAAvB,UAAwB,GAAU,EAAE,aAAoB;YAEtD,IAAM,WAAW,GAAG,GAAG,CAAC,WAAW,EAAG,CAAC;YACvC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;SACnC;QAES,+BAAO,GAAjB;YACE,iBAAM,OAAO,WAAE,CAAC;YAEhB,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;QAES,iCAAS,GAAnB;YACE,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,iBAAM,SAAS,WAAE,CAAC;SACnB;QAES,kCAAU,GAApB,UAAqB,WAA2B;YAC9C,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAwB,CAAC;YAC1E,IAAI,cAAsB,CAAC;YAC3B,IAAI,YAAY,KAAK,IAAI,EAAE;gBACzB,YAAY,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7D,cAAc,GAAG,YAAY,CAAC,SAAS,CAAC;aACzC;iBAAM;gBACL,cAAc,GAAG,WAAW,CAAC,QAAQ,CAAC;aACvC;YACD,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpD,IAAI,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,iBAAiB,IAAI,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBACpG,IAAI,CAAC,cAAc,EAAE,CAAC;aACvB;iBAAM;gBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACzB;YACD,IAAI,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,IAAI,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;gBAC/F,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;iBAAM;gBACL,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,EAAE;oBAC5B,IAAI,CAAC,QAAS,CAAC,aAAa,EAAE,CAAC;iBAChC;gBACD,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;YACD,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1E,IAAI,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;gBACtE,IAAI,CAAC,QAAS,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC/C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBAClC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aAC1B;YACD,iBAAM,UAAU,YAAC,WAAW,CAAC,CAAC;SAC/B;QAED,sBAAI,uCAAY;iBAAhB;gBACE,IAAM,oBAAoB,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;gBAC1D,IAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;gBAChC,IAAA,KAAW,oBAAoB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAhE,EAAE,QAAA,EAAE,EAAE,QAA0D,CAAC;gBACtE,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACpB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACpB,OAAO,IAAIkD,UAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;aAClC;;;WAAA;QAES,+BAAO,GAAjB,UAAkB,KAAiB;YAEjC,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACpC,IAAI,WAAW,KAAK,IAAI,EAAE;gBACxB,WAAW,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACtD,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBAC5B,WAAW,CAAC,SAAS,EAAE,CAAC;gBACxB,WAAW,CAAC,eAAe,CAAC,SAAS,GAAG;oBACtC,WAAY,CAAC,KAAK,EAAE,CAAC;iBACtB,CAAC;gBACF,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;aACjC;YACD,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,QAAS,CAAC,WAAW,CAAC,WAAW,EAAE,EAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAC,CAAC,CAAC;SAChE;QAES,kCAAU,GAApB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBAC3C,OAAO,CAAC,QAAQ,CAAC;qBACjB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpC,IAAI,EAAE,CAAC;aACb;SACF;QAES,oCAAY,GAAtB;YACE,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;gBAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;SACF;QAES,oCAAY,GAAtB;YACE,IAAI,IAAI,CAAC,aAAa,KAAK,IAAI,EAAE;gBAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;qBAC7C,OAAO,CAAC,UAAU,CAAC;qBACnB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACtC,IAAI,EAAE,CAAC;aACb;SACF;QAES,sCAAc,GAAxB;YACE,IAAI,IAAI,CAAC,aAAa,KAAK,IAAI,EAAE;gBAC/B,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;gBAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC3B;SACF;QAES,sCAAc,GAAxB;YACE,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,EAAE;gBACjC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;qBAC7C,OAAO,CAAC,YAAY,CAAC;qBACrB,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC7C,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC7C,IAAI,EAAE,CAAC;aACb;SACF;QAES,wCAAgB,GAA1B;YACE,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,EAAE;gBACjC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;gBAC7B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC5B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,IAAa;oBAC9C,IAAI,IAAI,YAAY,aAAa,EAAE;wBACjC,IAAI,CAAC,MAAM,EAAE,CAAC;qBACf;iBACF,EAAE,IAAI,CAAC,CAAC;aACV;SACF;QAES,iCAAS,GAAnB;YACE,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,EAAE;gBAG5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;qBACxC,OAAO,CAAC,OAAO,CAAC;qBAChB,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACxC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACxC,IAAI,EAAE,CAAC;aACb;SACF;QAES,mCAAW,GAArB;YACE,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,EAAE;gBAG5B,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;gBACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,IAAa;oBAC9C,IAAI,IAAI,YAAY,WAAW,EAAE;wBAC/B,IAAI,CAAC,MAAM,EAAE,CAAC;qBACf;iBACF,EAAE,IAAI,CAAC,CAAC;aACV;SACF;QA1RD;YADC1B,iBAAc,CAAClB,QAAK,CAAC;mDACsB;QAG5C;YADCkB,iBAAc,CAAClB,QAAK,CAAC;qDACwB;QAG9C;YADCkB,iBAAc,CAACnB,SAAM,CAAC;0DAC8B;QAqRvD,oBAAC;KAAA,CA7UkC8C,gBAAY;;;;;;;;;;;;;;;;;"}