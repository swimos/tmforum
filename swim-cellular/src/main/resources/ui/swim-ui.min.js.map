{"version":3,"sources":["../../../angle/main/Angle.ts","../../../../../node_modules/tslib/tslib.es6.js","../../../angle/main/DegAngle.ts","../../../angle/main/RadAngle.ts","../../../angle/main/GradAngle.ts","../../../angle/main/TurnAngle.ts","../../../angle/main/AngleParser.ts","../../../angle/main/AngleInterpolator.ts","../../../angle/main/AngleForm.ts","../../../length/main/Length.ts","../../../length/main/PxLength.ts","../../../length/main/EmLength.ts","../../../length/main/RemLength.ts","../../../length/main/PctLength.ts","../../../length/main/UnitlessLength.ts","../../../length/main/LengthParser.ts","../../../length/main/LengthInterpolator.ts","../../../length/main/LengthForm.ts","../../../color/main/Color.ts","../../../color/main/RgbColor.ts","../../../color/main/HslColor.ts","../../../color/main/ColorChannel.ts","../../../color/main/ColorChannelParser.ts","../../../color/main/HexColorParser.ts","../../../color/main/RgbColorParser.ts","../../../color/main/HslColorParser.ts","../../../color/main/ColorParser.ts","../../../color/main/ColorInterpolator.ts","../../../color/main/RgbColorInterpolator.ts","../../../color/main/HslColorInterpolator.ts","../../../color/main/ColorForm.ts","../../../font/main/FontSize.ts","../../../font/main/LineHeight.ts","../../../font/main/FontFamily.ts","../../../font/main/FontFamilyParser.ts","../../../font/main/Font.ts","../../../font/main/FontParser.ts","../../../font/main/FontForm.ts","../../../shadow/main/BoxShadow.ts","../../../shadow/main/BoxShadowParser.ts","../../../shadow/main/BoxShadowForm.ts","../../../transform/main/Transform.ts","../../../transform/main/IdentityTransform.ts","../../../transform/main/TranslateTransform.ts","../../../transform/main/ScaleTransform.ts","../../../transform/main/RotateTransform.ts","../../../transform/main/SkewTransform.ts","../../../transform/main/AffineTransform.ts","../../../transform/main/TransformList.ts","../../../transform/main/TranslateTransformParser.ts","../../../transform/main/ScaleTransformParser.ts","../../../transform/main/RotateTransformParser.ts","../../../transform/main/SkewTransformParser.ts","../../../transform/main/AffineTransformParser.ts","../../../transform/main/TransformListParser.ts","../../../transform/main/TransformParser.ts","../../../transform/main/TransformInterpolator.ts","../../../transform/main/TranslateTransformInterpolator.ts","../../../transform/main/ScaleTransformInterpolator.ts","../../../transform/main/RotateTransformInterpolator.ts","../../../transform/main/SkewTransformInterpolator.ts","../../../transform/main/AffineTransformInterpolator.ts","../../../transform/main/TransformListInterpolator.ts","../../../transform/main/TransformForm.ts","../../../scale/main/Scale.ts","../../../scale/main/ContinuousScale.ts","../../../scale/main/LinearScale.ts","../../../scale/main/TimeScale.ts","../../../scale/main/ScaleInterpolator.ts","../../../scale/main/LinearScaleInterpolator.ts","../../../scale/main/TimeScaleInterpolator.ts","../../../transition/main/Ease.ts","../../../transition/main/EaseForm.ts","../../../animate/main/TweenAnimator.ts","../../../transition/main/TransitionObserver.ts","../../../transition/main/Transition.ts","../../../animate/main/Animator.ts","../../../animate/main/FrameAnimator.ts","../../../animate/main/ChildAnimator.ts","../../../animate/main/TweenFrameAnimator.ts","../../../animate/main/TweenChildAnimator.ts","../../../animate/main/PropertyAnimator.ts","../../../style/main/StyleValue.ts","../../../style/main/StyleValueParser.ts","../../../style/main/StyleValueForm.ts","../../../style/main/StyleInterpolatorForm.ts","../../../style/main/StyleScaleForm.ts","../../../style/main/StyleTransitionForm.ts","../../../style/main/AttributeString.ts","../../../style/main/StyleString.ts","../../../render/main/Renderer.ts","../../../render/main/PathContext.ts","../../../render/main/PathRenderer.ts","../../../render/main/CanvasRenderer.ts","../../../render/main/WebGLRenderer.ts","../../../constraint/main/ConstraintMap.ts","../../../constraint/main/ConstraintSymbol.ts","../../../constraint/main/Constrain.ts","../../../constraint/main/ConstrainSum.ts","../../../constraint/main/ConstrainTerm.ts","../../../constraint/main/ConstrainProduct.ts","../../../constraint/main/ConstrainConstant.ts","../../../constraint/main/ConstrainVariable.ts","../../../constraint/main/ConstraintStrength.ts","../../../constraint/main/ConstrainBinding.ts","../../../constraint/main/Constraint.ts","../../../constraint/main/ConstraintSolver.ts","../../../view/main/View.ts","../../../view/main/ViewController.ts","../../../view/main/layout/LayoutScope.ts","../../../view/main/layout/LayoutManager.ts","../../../view/main/layout/LayoutSolver.ts","../../../view/main/layout/LayoutAnchor.ts","../../../view/main/layout/LayoutView.ts","../../../view/main/root/RootView.ts","../../../view/main/scope/ViewScope.ts","../../../view/main/scope/AtomicViewScope.ts","../../../view/main/animated/AnimatedView.ts","../../../view/main/member/MemberAnimator.ts","../../../view/main/member/AnyMemberAnimator.ts","../../../view/main/member/ObjectMemberAnimator.ts","../../../view/main/member/StringMemberAnimator.ts","../../../view/main/member/BooleanMemberAnimator.ts","../../../view/main/member/NumberMemberAnimator.ts","../../../view/main/member/AngleMemberAnimator.ts","../../../view/main/member/LengthMemberAnimator.ts","../../../view/main/member/ColorMemberAnimator.ts","../../../view/main/member/FontMemberAnimator.ts","../../../view/main/member/TransformMemberAnimator.ts","../../../view/main/node/NodeView.ts","../../../view/main/element/ElementView.ts","../../../view/main/rendered/RenderedView.ts","../../../view/main/rendered/FillView.ts","../../../view/main/rendered/StrokeView.ts","../../../view/main/rendered/TypesetView.ts","../../../view/main/graphics/GraphicsView.ts","../../../view/main/graphics/GraphicsViewController.ts","../../../view/main/composited/CompositedView.ts","../../../view/main/raster/RasterView.ts","../../../view/main/raster/RasterViewController.ts","../../../view/main/node/NodeViewController.ts","../../../view/main/text/TextAnimator.ts","../../../view/main/text/TextView.ts","../../../view/main/text/TextViewController.ts","../../../view/main/attribute/AttributeAnimator.ts","../../../view/main/attribute/StringAttributeAnimator.ts","../../../view/main/attribute/BooleanAttributeAnimator.ts","../../../view/main/attribute/NumberAttributeAnimator.ts","../../../view/main/attribute/LengthAttributeAnimator.ts","../../../view/main/attribute/ColorAttributeAnimator.ts","../../../view/main/attribute/TransformAttributeAnimator.ts","../../../view/main/attribute/NumberOrStringAttributeAnimator.ts","../../../view/main/attribute/LengthOrStringAttributeAnimator.ts","../../../view/main/attribute/ColorOrStringAttributeAnimator.ts","../../../view/main/style/StyleAnimator.ts","../../../view/main/style/StringStyleAnimator.ts","../../../view/main/style/NumberStyleAnimator.ts","../../../view/main/style/LengthStyleAnimator.ts","../../../view/main/style/ColorStyleAnimator.ts","../../../view/main/style/LineHeightStyleAnimator.ts","../../../view/main/style/FontFamilyStyleAnimator.ts","../../../view/main/style/BoxShadowStyleAnimator.ts","../../../view/main/style/TransformStyleAnimator.ts","../../../view/main/style/NumberOrStringStyleAnimator.ts","../../../view/main/style/LengthOrStringStyleAnimator.ts","../../../view/main/style/ColorOrStringStyleAnimator.ts","../../../view/main/element/ElementViewController.ts","../../../view/main/svg/SvgView.ts","../../../view/main/svg/SvgViewController.ts","../../../view/main/html/HtmlView.ts","../../../view/main/html/HtmlViewController.ts","../../../view/main/canvas/CanvasView.ts","../../../view/main/canvas/CanvasViewController.ts","../../../view/main/ui/UiView.ts","../../../view/main/ui/UiViewController.ts","../../../shape/main/Rect.ts","../../../shape/main/RectView.ts","../../../shape/main/Arc.ts","../../../shape/main/ArcView.ts","../../../typeset/main/TextRun.ts","../../../typeset/main/TextRunView.ts","../../../gesture/main/Multitouch.ts","../../../gesture/main/ScaleGesture.ts","../../../gesture/main/GestureView.ts","../../../gesture/main/GestureViewController.ts","../../../view/main/modal/Modal.ts"],"names":["Angle","prototype","isDefined","this","value","plus","that","units","from","toValue","fromAny","opposite","minus","times","scalar","divide","norm","total","deg","degValue","rad","radValue","grad","gradValue","turn","turnValue","Error","to","zero","Deg","Rad","Grad","Turn","defaultUnits","parse","TypeError","fromValue","length","num","getItem","numberValue","isFinite","Attr","Value","extant","key","string","input","Unicode","stringInput","isCont","isWhitespace","head","step","parser","Parser","isDone","isError","error","Diagnostic","unexpected","bind","isAny","form","unit","Form","_form","PI","Math","TAU","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","create","__decorate","decorators","target","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","DegAngle","_this","_super","call","_value","equals","hashCode","_hashSeed","Murmur3","seed","mash","mix","hash","debug","output","write","toString","_zero","RadAngle","GradAngle","TurnAngle","AngleParser","valueParser","unitsOutput","_defaultUnits","_valueParser","_unitsOutput","_step","feed","Base10","parseDecimal","asError","stringOutput","isAlpha","push","isEmpty","done","message","AngleInterpolator","a0","a1","v0","dv","interpolate","u","deinterpolate","a","v","range","between","Interpolator","tryBetween","registerFactory","AngleForm","_unit","mold","angle","Text","cast","item","stringValue","e","Length","emValue","pxValue","emUnit","node","remValue","remUnit","pctValue","px","unitValue","em","rem","pct","Px","Em","Rem","Pct","Unitless","unitless","widthUnit","HTMLElement","offsetParent","offsetWidth","parentNode","Element","fontSize","getComputedStyle","parseFloat","document","documentElement","PxLength","_node","isRelative","EmLength","RemLength","PctLength","UnitlessLength","LengthParser","LengthInterpolator","l0","l1","l","LengthForm","Color","contrast","k","lightness","brighter","darker","transparent","Rgb","black","alpha","white","rgb","g","hsl","h","s","Hsl","fromName","name","fromInit","isInit","color","RgbColor","min","max","pow","NaN","other","toHexString","round","base16Alphabet","Base16","lowercase","alphabet","charAt","isNaN","positional","tag","header","forEach","member","index","str","init","HslColor","toRgb","m1","m2","ColorChannel","scale","ColorChannelParser","parseNumber","HexColorParser","expected","isDigit","decodeDigit","HexParser","RgbColorParser","rParser","gParser","bParser","aParser","isSpace","parseRest","RgbParser","HslColorParser","hParser","sParser","lParser","HslParser","ColorParser","identOutput","ident","ColorInterpolator","tryBetweenAny","c0","c1","RgbColorInterpolator","r0","dr","g0","dg","b0","db","da","cr","cg","cb","ca","dp","lc","sqrt","HslColorInterpolator","h0","dh","s0","ds","dl","ch","cs","cl","ColorForm","FontSize","size","LineHeight","height","FontFamily","family","format","isIdent","n","charCodeAt","offsetByCodePoints","base16","uppercase","encodeDigit","FontFamilyParser","quote","code","Font","style","variant","weight","stretch","_style","_variant","_weight","_stretch","_size","_height","_family","Objects","equal","isArray","slice","toAny","get","FontParser","lengthParser","familyParser","length_1","String","FontForm","font","Record","slot","of","BoxShadow","inset","offsetX","offsetY","blurRadius","spreadRadius","next","and","apply","boxShadow","none","_none","values","_i","inset_1","offsetX_1","offsetY_1","blurRadius_1","spreadRadius_1","color_1","booleanValue","BoxShadowParser","offsetXParser","offsetYParser","blurRadiusParser","spreadRadiusParser","colorParser","BoxShadowForm","shadow","record","attr","Transform","translate","x","y","transform","translateX","translateY","scaleX","scaleY","rotate","skew","skewX","skewY","toAttributeString","identity","_identity","Identity","Translate","Scale","Rotate","Skew","affine","x0","y0","x1","y1","tx","ty","Affine","list","transforms","List","ListParser","IdentityTransform","transformX","transformY","inverse","toAffine","conformsTo","TranslateTransform","_x","_y","Slot","x_1","y_1","TranslateParser","ScaleTransform","ScaleParser","RotateTransform","_a","cosA","cos","sinA","sin","a_1","RotateParser","SkewTransform","tan","SkewParser","AffineTransform","_x0","_y0","_x1","_y1","_tx","_ty","multiply","m00","m10","m01","m11","m02","m12","det","abs","Number","MIN_VALUE","_identityMatrix","x0_1","y0_1","x1_1","y1_1","tx_1","ty_1","AffineParser","TransformList","_transforms","point","inverseTransforms","matrix","TranslateTransformParser","xParser","yParser","ScaleTransformParser","RotateTransformParser","SkewTransformParser","AffineTransformParser","entries","entryParser","TransformListParser","transformParser","TransformParser","TransformInterpolator","TranslateTransformInterpolator","f0","f1","xUnits","dx","yUnits","dy","f","fx","fy","lf","ScaleTransformInterpolator","RotateTransformInterpolator","SkewTransformInterpolator","AffineTransformInterpolator","TransformListInterpolator","transforms0","transforms1","interpolatorCount","interpolators","TransformForm","linear","Linear","time","t0","t1","Time","now","DateTime","current","Date","ContinuousScale","Continuous","LinearScale","unscale","clampScale","domain","interpolator","clampDomain","xMin","xMax","zMin","zMax","epsilon","z","dx_1","xSum","dx_2","solveDomain","x2","y2","m","y3","x3","TimeScale","d0","d1","ft","zone","dt","tMin","tMax","dt_1","tSum","dt_2","t2","t3","ScaleInterpolator","s1","LinearScaleInterpolator","NumberInterpolator","InterpolatorInterpolator","TimeScaleInterpolator","t","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","expoIn","expoOut","expoInOut","circIn","circOut","circInOut","st","backIn","backOut","backInOut","elasticIn","asin","elasticOut","elasticInOut","st1","bounceIn","bounceOut","bounceInOut","invert","type","Ease","EaseForm","ease","Item","TweenState","TransitionObserver","is","object","observer","onBegin","onEnd","onInterrupt","Transition","duration","observers","_duration","_ease","_interpolator","_observers","transition","forTween","tween","isTween","FrameAnimator","_animationFrame","_enabled","setEnabled","enabled","didSetEnabled","animate","cancel","animator","onAnimationFrame","requestAnimationFrame","cancelAnimationFrame","timestamp","onFrame","Animator","ChildAnimator","parent","TweenAnimator","_interrupts","_state","_beginTime","_tweenState","setState","state","interrupts","doInterrupt","oldValue","update","delete","doBegin","doEnd","newValue","interrupt","TweenFrameAnimator","TweenChildAnimator","PropertyAnimator","willUpdate","onUpdate","didUpdate","StyleValue","_interpolatorForm","interpolatorForm","InterpolatorForm","_scaleForm","scaleForm","ScaleForm","_transitionForm","transitionForm","TransitionForm","ISO_8601_REST","DateTimeFormat","pattern","StyleValueParser","date","year","parseDate","styleValue","StyleValueForm","Num","Bool","StyleInterpolatorForm","valueForm","StyleScaleForm","concat","valueForm_1","body","StyleTransitionForm","duration_1","ease_1","AttributeString","StyleString","toStyleString","PathContext","moveTo","closePath","undefined","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","ccw","cw","rect","w","PathRenderer","context","_context","Renderer","CanvasRenderer","pixelRatio","window","devicePixelRatio","_pixelRatio","WebGLRenderer","ConstraintMap","array","_index","_array","has","id","getField","getEntry","set","last","pop","remove","clear","callback","thisArg","result","keys","clone","oldArray","newIndex","newArray","nextId","_nextId","ConstraintSymbol","Invalid","ConstraintSlack","_id","isExternal","isDummy","isInvalid","ConstraintDummy","ConstraintError","ConstraintInvalid","Constrain","sum","args","terms","constant","arg","Term","variable","field","coefficient","subterms","j","Sum","product","Product","Constant","ConstrainSum","_terms","_constant","isConstant","oldTerms","newTerms","Format","ConstrainTerm","ConstrainProduct","_coefficient","_variable","Variable","ConstrainConstant","ConstrainVariable","scope","ConstraintStrength","Required","Strong","Medium","Weak","Unbound","clip","strength","ConstrainBinding","_scope","enumerable","configurable","_strength","updateValue","newState","oldState","removeConstraintVariable","setConstraintVariable","addConstraintVariable","setStrength","newStrength","oldStrength","Binding","Constraint","constrain","relation","_constrain","_relation","hasConstraint","addConstraint","removeConstraint","ConstraintRow","cells","_cells","add","insertSymbol","symbol","insertRow","removeSymbol","negate","entry","solveFor","solveForEx","lhs","rhs","coefficientFor","substitute","row","ConstraintSolver","_constraints","_constraintVariables","_rows","_infeasible","_objective","_artificial","constraint","willAddConstraint","createRow","subject","chooseSubject","marker","addWithArtificialVariable","optimize","didAddConstraint","willRemoveConstraint","removeConstraintEffects","leaving","getMarkerLeavingSymbol","didRemoveConstraint","constraintVariable","hasConstraintVariable","willAddConstraintVariable","binding","didAddConstraintVariable","willRemoveConstraintVariable","didRemoveConstraintVariable","delta","willSetConstraintVariable","dualOptimize","row_1","didSetConstraintVariable","updateConstraintVariables","updateConstraintVariable","willUpdateConstraintVariable","didUpdateConstraintVariable","basic","objective","slack","eplus","eminus","dummy","artificial","success","entering","anyPivotableSymbol","getEnteringSymbol","getLeavingSymbol","getDualEnteringSymbol","ratio","MAX_VALUE","coratio","found","r1","r2","first","second","third","removeMarkerEffects","View","willSetViewController","viewController","onSetViewController","didSetViewController","willAddViewObserver","viewObserver","onAddViewObserver","didAddViewObserver","willRemoveViewObserver","onRemoveViewObserver","didRemoveViewObserver","willObserve","viewObservers","didObserve","willSetParentView","newParentView","oldParentView","viewWillSetParentView","onSetParentView","isMounted","cascadeMount","isPowered","cascadePower","cascadeUnpower","cascadeUnmount","didSetParentView","viewDidSetParentView","willInsertChildView","childView","targetView","viewWillInsertChildView","onInsertChildView","requireUpdate","NeedsLayout","didInsertChildView","viewDidInsertChildView","willRemoveChildView","viewWillRemoveChildView","onRemoveChildView","didRemoveChildView","viewDidRemoveChildView","viewFlags","MountedFlag","willMount","viewWillMount","onMount","didMount","viewDidMount","willUnmount","viewWillUnmount","onUnmount","didUnmount","viewDidUnmount","PoweredFlag","willPower","viewWillPower","onPower","didPower","viewDidPower","willUnpower","viewWillUnpower","onUnpower","didUnpower","viewDidUnpower","parentView","updateTime","performance","updateFlags","immediate","LifecycleMask","willRequireUpdate","oldUpdateFlags","newUpdateFlags","deltaUpdateFlags","setViewFlags","requestUpdate","didRequireUpdate","willRequestUpdate","didRequestUpdate","additionalFlags","modifyUpdate","ProcessMask","NeedsProcess","DisplayMask","NeedsDisplay","isUpdating","UpdatingMask","isProcessing","ProcessingFlag","needsProcess","processFlags","viewContext","willProcess","viewWillProcess","onProcess","didProcess","viewDidProcess","willScroll","viewWillScroll","onScroll","didScroll","viewDidScroll","willDerive","viewWillDerive","onDerive","didDerive","viewDidDerive","doProcessChildViews","childViews","willProcessChildViews","childViewContext","doProcessChildView","didProcessChildViews","cascadeProcess","viewWillProcessChildViews","viewDidProcessChildViews","isDisplaying","DisplayingFlag","needsDisplay","displayFlags","willDisplay","viewWillDisplay","onDisplay","didDisplay","viewDidDisplay","willLayout","viewWillLayout","onLayout","didLayout","viewDidLayout","doDisplayChildViews","willDisplayChildViews","doDisplayChildView","didDisplayChildViews","cascadeDisplay","viewWillDisplayChildViews","viewDidDisplayChildViews","getLazyViewScope","scopeName","viewScope","getViewScope","viewClass","descriptor","getViewScopeDescriptor","scopeType","initViewScope","setViewScope","viewScopeDidSetState","NeedsDerive","viewport","viewIdiom","rootView","pageTransform","parentTransform","clientBounds","clientTransform","pageBounds","scrollX","pageXOffset","scrollY","pageYOffset","intersectsViewport","bounds","viewportWidth","clientWidth","viewportHeight","clientHeight","top","bottom","left","right","_viewScopeDescriptors","ViewScope","view","inherit","decorateViewScope","initLayoutAnchor","LayoutAnchor","anchorName","getState","setValue","layoutAnchor","decorateLayoutAnchor","getLayoutAnchor","setLayoutAnchor","fromTag","Svg","createElementNS","namespace","Canvas","createElement","Html","fromNode","HTMLCanvasElement","SVGElement","Node","setParentView","fromConstructor","viewConstructor","isConstructor","source","HiddenFlag","CulledFlag","HoveringFlag","ImmediateFlag","RemovingFlag","NeedsResize","NeedsScroll","NeedsAnimate","NeedsProject","NeedsRender","NeedsComposite","UpdateMask","ViewFlagShift","ViewFlagMask","ViewController","_view","setView","willSetView","onSetView","didSetView","map","getChildView","getChildViewController","setChildView","newChildView","setChildViewController","newChildViewController","oldChildView","appendChildView","appendChildViewController","childViewController","prependChildView","prependChildViewController","insertChildView","insertChildViewController","targetViewController","removeChildView","removeChildViewController","removeAll","LayoutScope","LayoutManager","LayoutSolver","layoutManager","_layoutManager","LayoutAnchorConstructor","_this_1","LayoutAnchorDecoratorFactory","updateState","LayoutView","Layout","RootView","toggleModal","presentModal","dismissModal","dismissModals","Root","ViewScopeDecorator","Atomic","ViewScopeDecoratorFactory","ViewScopeConstructor","_inherit","superScope","AtomicViewScope","superState","AnimatedView","Graphics","getMemberAnimatorDescriptor","animatorName","_memberAnimatorDescriptors","initMemberAnimator","MemberAnimator","decorateMemberAnimator","getMemberAnimator","setMemberAnimator","Animated","MemberAnimatorConstructor","_auto","valueType","animatorType","Boolean","FromAny","Any","MemberAnimatorDecoratorFactory","setInherit","getLazyMemberAnimator","superAnimator","superValue","isAuto","setAuto","auto","animatorDidSetAuto","setAutoState","AnyMemberAnimator","_type","ObjectMemberAnimator","StringMemberAnimator","BooleanMemberAnimator","NumberMemberAnimator","number","AngleMemberAnimator","LengthMemberAnimator","ColorMemberAnimator","FontMemberAnimator","TransformMemberAnimator","NodeView","_viewController","_viewFlags","initNode","setViewController","newViewController","oldViewController","_viewObservers","addViewObserver","indexOf","removeViewObserver","splice","text","textContent","_key","setKey","childNodes","childViewMap","_childViewMap","targetNode","childNode","nextSibling","willRemoveChildNode","removeChildViewMap","removeChild","onRemoveChildNode","didRemoveChildNode","newChildNode","willInsertChildNode","insertBefore","insertChildViewMap","onInsertChildNode","didInsertChildNode","appendChild","child","appendChildNode","prependChild","prependChildNode","firstChild","insertChild","insertChildNode","injectChildView","viewWillInsertChildNode","viewDidInsertChildNode","removeChildNode","lastChild","viewWillRemoveChildNode","viewDidRemoveChildNode","isNodeMounted","nodeType","DOCUMENT_NODE","doMountChildViews","doUnmountChildViews","cancelAnimators","doPowerChildViews","doUnpowerChildViews","doProcess","cascadeFlags","willAnimate","onAnimate","didAnimate","viewWillAnimate","animateMembers","viewDidAnimate","doDisplay","hasViewScope","viewScopes","_viewScopes","hasLayoutAnchor","layoutAnchors","_layoutAnchors","hasMemberAnimator","memberAnimators","_memberAnimators","memberAnimator","cancelMemberAnimators","createRange","selectNode","getBoundingClientRect","detach","BoxR2","dispatchEvent","event","on","listener","options","addEventListener","off","removeEventListener","ElementView","getAttribute","attributeName","setAttribute","willSetAttribute","removeAttribute","onSetAttribute","didSetAttribute","viewWillSetAttribute","viewDidSetAttribute","hasAttributeAnimator","attributeAnimators","_attributeAnimators","getAttributeAnimator","setAttributeAnimator","getStyle","propertyNames","getPropertyValue","setStyle","propertyName","priority","willSetStyle","setProperty","removeProperty","onSetStyle","didSetStyle","viewWillSetStyle","viewDidSetStyle","hasStyleAnimator","styleAnimators","_styleAnimators","getStyleAnimator","setStyleAnimator","cancelAttributeAnimators","cancelStyleAnimators","className","classList","hasClass","contains","addClass","classNames","removeClass","toggleClass","toggle","initAttributeAnimator","AttributeAnimator","decorateAttributeAnimator","initStyleAnimator","StyleAnimator","decorateStyleAnimator","RenderedView","hitTest","Rendered","FillView","StrokeView","TypesetView","GraphicsView","_parentView","_childViews","canvasView","append","prepend","unshift","insert","count","renderer","willRender","onRender","didRender","viewWillRender","viewDidRender","isHidden","isCulled","setHidden","newHidden","willSetHidden","onSetHidden","didSetHidden","hidden","viewWillSetHidden","viewDidSetHidden","setCulled","newCulled","willSetCulled","onSetCulled","didSetCulled","culled","viewWillSetCulled","viewDidSetCulled","cullViewFrame","viewFrame","intersects","viewBounds","_viewFrame","empty","setViewFrame","deriveViewBounds","childViewBounds","union","deriveHitBounds","hitBounds","childHitBounds","hit","inverseClientTransform","inversePageTransform","eventHandlers","_eventHandlers","handler","handlers","capture","passive","once","handleEvent","onMouseOver","onMouseOut","bubbleEvent","bubbles","cancelBubble","isHovering","mouseenter","enterEvent","MouseEvent","clientX","clientY","screenX","screenY","relatedTargetView","mouseleave","leaveEvent","GraphicsViewController","CompositedView","Raster","Composited","RasterView","_canvas","createCanvas","_renderer","_rasterFrame","createRenderer","setRenderer","resetRenderer","rendererType","getContext","rasterViewContext","willComposite","onComposite","didComposite","resizeCanvas","clearCanvas","compositeImage","compositor","compositeFrame","floor","yMin","ceil","width","yMax","rasterFrame","clearRect","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","setTransform","imageData","getImageData","save","globalAlpha","opacity","globalCompositeOperation","compositeOperation","putImageData","restore","RasterViewController","viewWillComposite","viewDidComposite","NodeViewController","TextAnimator","formatter","nodeValue","innerText","TextView","TextViewController","AttributeAnimatorConstructor","_attributeName","type0","type1","NumberOrString","LengthOrString","ColorOrString","AttributeAnimatorDecoratorFactory","attributeValue","StringAttributeAnimator","BooleanAttributeAnimator","NumberAttributeAnimator","LengthAttributeAnimator","ColorAttributeAnimator","TransformAttributeAnimator","NumberOrStringAttributeAnimator","LengthOrStringAttributeAnimator","swallow","ColorOrStringAttributeAnimator","StyleAnimatorConstructor","_propertyNames","StyleAnimatorDecoratorFactory","_priority","propertyValue","StringStyleAnimator","NumberStyleAnimator","LengthStyleAnimator","ColorStyleAnimator","LineHeightStyleAnimator","FontFamilyStyleAnimator","BoxShadowStyleAnimator","TransformStyleAnimator","NumberOrStringStyleAnimator","LengthOrStringStyleAnimator","ColorOrStringStyleAnimator","ElementViewController","SvgView","fontStyle","fontVariant","fontWeight","fontStretch","lineHeight","fontFamily","SvgViewController","HtmlView","activateLayout","deactivateLayout","updateLayoutStates","constraints","activateConstraint","deactivateConstraint","constraintVariables","activateConstraintVariable","deactivateConstraintVariable","topAnchor","rightAnchor","bottomAnchor","leftAnchor","widthAnchor","heightAnchor","centerXAnchor","centerYAnchor","isPositioned","position","offsetLeft","offsetTop","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderStyle","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","margin","marginTop","marginRight","marginBottom","marginLeft","overflow","overflowX","overflowY","overscrollBehavior","overscrollBehaviorX","overscrollBehaviorY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","offsetBounds","HtmlViewController","CanvasView","onClick","onDblClick","onContextMenu","onMouseDown","onMouseMove","onMouseUp","onWheel","onTouchStart","onTouchMove","onTouchCancel","onTouchEnd","_eventSurface","_renderedViews","_clientX","_clientY","_screenX","_screenY","_hoverView","_touches","setRenderedView","appendRenderedView","prependRenderedView","insertRenderedView","renderedViews","removeRenderedView","addEventListeners","removeEventListeners","canvasViewContext","detectMouseHover","setEventSurface","eventSurface","fireEvent","fireMouseEvent","oldHoverView","newHoverView","onMouseHoverChange","eventInit","outEvent","overEvent","fireTouchEvent","originalEvent","dispatched","changedTouches","changedTouch","startEvent","TouchEvent","targetTouches","touches","targetViewTouches_1","nextTouch","createTouchList","targetViewTouches","identifier","touch","frame","CanvasViewController","UiView","runProcessPass","runDisplayPass","throttleResize","throttleScroll","debounceReorientation","doReorientation","onVisibilityChange","_processTimer","_displayFrame","_updateDelay","MinUpdateDelay","_reorientationTimer","_viewContext","createViewContext","initUi","doRootMount","isRootView","isUiPowered","visibilityState","cancelUpdate","clearTimeout","MaxProcessInterval","runImmediatePass","scheduleUpdate","setTimeout","processDelay","MinProcessInterval","MaxUpdateDelay","willResize","onResize","didResize","safeAreaInsetTop","safeAreaInsetRight","safeAreaInsetBottom","safeAreaInsetLeft","viewWillResize","detectViewport","viewDidResize","layoutSolver","_layoutSolver","modals","_modals","modal","modalState","multi","willPresentModal","modalView","insertModalView","onPresentModal","showModal","didPresentModal","viewWillPresentModal","viewDidPresentModal","willDismissModal","onDismissModal","hideModal","didDismissModal","viewWillDismissModal","viewDidDismissModal","shift","insetTop","insetRight","insetBottom","insetLeft","documentWidth","documentHeight","div","innerWidth","innerHeight","offsetHeight","CSS","supports","safeArea","orientation","screen","msOrientation","mozOrientation","colorScheme","matchMedia","matches","setViewIdiom","newViewIdiom","oldViewIdiom","willSetViewIdiom","onSetViewIdiom","didSetViewIdiom","powered","onFallthroughClick","Ui","UiViewController","Rect","_width","copy","render","draw","renderRect","RectView","fill","stroke","strokeWidth","beginPath","fillStyle","lineWidth","strokeStyle","hitTestRect","hx","hy","isPointInPath","isPointInStroke","Arc","center","innerRadius","outerRadius","startAngle","sweepAngle","padAngle","padRadius","cornerRadius","_center","_innerRadius","_outerRadius","_startAngle","_sweepAngle","_padAngle","_padRadius","_cornerRadius","PointR2","renderArc","cx","cy","a01","a11","a00","a10","da0","da1","ap","rp","rc","rc0","rc1","p0","p1","x00","y00","x10","y10","x11","y11","oc","intersect","ax","ay","bx","by","kc","cornerTangents","atan2","origin","x32","y32","lo","ox","oy","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","ArcView","py","radius","hitTestArc","TextRun","textAlign","textBaseline","textOrigin","textColor","_text","_font","_textAlign","_textBaseline","_textOrigin","_textColor","renderText","fillText","run","TextRunView","COS_PI_4","SIN_PI_4","MultitouchEvent","createEvent","initCustomEvent","cancelable","detail","points","Event","MultitouchTrack","multitouch","path","vx","vy","_hysteresis","v2","vMax","_velocityMax","MultitouchGhost","Multitouch","onGhostFrame","_surface","_tracks","_trackCount","_ghosts","_ghostCount","_ghostFrame","_acceleration","_distanceMin","surface","newSurface","oldSurface","hysteresis","acceleration","velocityMax","distanceMin","wheel","multitouchChange","multitouchEnd","zoom","dz","zoom0","zoom1","dcx","dcy","zx","zy","multitouchStart","updateVelocity","sx","sy","spreadVelocity","track","ghost","coast","composed","multitouchCancel","trackStart","startTracking","trackDidStart","trackMove","trackDidMove","trackEnd","trackDidEnd","endTracking","trackCancel","trackDidCancel","PointerEvent","MultitouchPointer","MultitouchTouch","MultitouchMouse","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","_wheel","attach","pointerId","setPointerCapture","releasePointerCapture","preventDefault","deltaY","ScaleGestureEvent","gesture","ruler","ScaleGesture","onMultitouchStart","onMultitouchChange","onMultitouchCancel","onMultitouchEnd","_multitouch","_ruler","_scale","_xMin","_xMax","_zMin","_zMax","_points","oldScale","zoomBounds","domainMin","domainMax","domainBounds","zoomMin","zoomMax","createPoint","gesturePoint","coords","domainCoord","rangeCoord","updatePoint","scalePoint","updatePoints","gesturePoints","scalePoints","outer","j_1","scalePoint_1","rescale","scaleStart","scaleChange","scaleCancel","scaleEnd","horizontal","HorizontalScaleGesture","vertical","VerticalScaleGesture","isParallel","pointerType","GestureViewTrack","buttons","defaultPrevented","holdTimer","holdDelay","setHoldTimer","clearHoldTimer","BaseGestureView","_hovers","_hoverCount","activate","willActivate","onActivate","didActivate","viewWillActivate","viewDidActivate","attachNode","detachNode","startHovering","willStartHovering","onStartHovering","didStartHovering","viewWillStartHovering","viewDidStartHovering","stopHovering","willStopHovering","onStopHovering","didStopHovering","viewWillStopHovering","viewDidStopHovering","createHover","GestureViewHover","beginHover","hover","willBeginHover","onBeginHover","didBeginHover","viewWillBeginHover","viewDidBeginHover","endHover","willEndHover","onEndHover","didEndHover","viewWillEndHover","viewDidEndHover","willStartTracking","onStartTracking","didStartTracking","viewWillStartTracking","viewDidStartTracking","stopTracking","willStopTracking","onStopTracking","didStopTracking","viewWillStopTracking","viewDidStopTracking","createTrack","beginTrack","willBeginTrack","onBeginTrack","holdTrack","didBeginTrack","viewWillBeginTrack","viewDidBeginTrack","willHoldTrack","onHoldTrack","didHoldTrack","viewWillHoldTrack","viewDidHoldTrack","moveTrack","willMoveTrack","onMoveTrack","didMoveTrack","viewWillMoveTrack","cancelTrack","viewDidMoveTrack","endTrack","willEndTrack","onEndTrack","didEndTrack","viewWillEndTrack","viewDidEndTrack","willCancelTrack","onCancelTrack","didCancelTrack","viewWillCancelTrack","viewDidCancelTrack","PointerGestureView","onPointerEnter","onPointerLeave","onDocumentLeave","button","TouchGestureView","MouseGestureView","onMouseEnter","onMouseLeave","mouse","GestureView","GestureViewController"],"mappings":"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","file":"/Users/c9r/Swim/Code/swim-platform/swim-toolkit-js/swim-ui-js/@swim/ui/dist/main/swim-ui.min.js","sourcesContent":["// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Attr, Value, Form} from \"@swim/structure\";\nimport {DegAngle} from \"./DegAngle\";\nimport {RadAngle} from \"./RadAngle\";\nimport {GradAngle} from \"./GradAngle\";\nimport {TurnAngle} from \"./TurnAngle\";\nimport {AngleParser} from \"./AngleParser\";\nimport {AngleForm} from \"./AngleForm\";\n\nexport type AngleUnits = \"deg\" | \"rad\" | \"grad\" | \"turn\";\n\nexport type AnyAngle = Angle | string | number;\n\nexport abstract class Angle implements HashCode, Debug {\n  isDefined(): boolean {\n    return this.value !== 0;\n  }\n\n  abstract get value(): number;\n\n  abstract get units(): AngleUnits;\n\n  plus(that: AnyAngle, units: AngleUnits = this.units): Angle {\n    return Angle.from(this.toValue(units) + Angle.fromAny(that).toValue(units), units);\n  }\n\n  opposite(units: AngleUnits = this.units): Angle {\n    return Angle.from(-this.toValue(units), units);\n  }\n\n  minus(that: AnyAngle, units: AngleUnits = this.units): Angle {\n    return Angle.from(this.toValue(units) - Angle.fromAny(that).toValue(units), units);\n  }\n\n  times(scalar: number, units: AngleUnits = this.units): Angle {\n    return Angle.from(this.toValue(units) * scalar, units);\n  }\n\n  divide(scalar: number, units: AngleUnits = this.units): Angle {\n    return Angle.from(this.toValue(units) / scalar, units);\n  }\n\n  norm(total: AnyAngle, units: AngleUnits = this.units): Angle {\n    return Angle.from(this.toValue(units) / Angle.fromAny(total).toValue(units), units);\n  }\n\n  abstract degValue(): number;\n\n  abstract gradValue(): number;\n\n  abstract radValue(): number;\n\n  abstract turnValue(): number;\n\n  deg(): DegAngle {\n    return Angle.deg(this.degValue());\n  }\n\n  rad(): RadAngle {\n    return Angle.rad(this.radValue());\n  }\n\n  grad(): GradAngle {\n    return Angle.grad(this.gradValue());\n  }\n\n  turn(): TurnAngle {\n    return Angle.turn(this.turnValue());\n  }\n\n  toValue(units: AngleUnits): number {\n    switch (units) {\n      case \"deg\": return this.degValue();\n      case \"grad\": return this.gradValue();\n      case \"rad\": return this.radValue();\n      case \"turn\": return this.turnValue();\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  to(units: AngleUnits): Angle {\n    switch (units) {\n      case \"deg\": return this.deg();\n      case \"grad\": return this.grad();\n      case \"rad\": return this.rad();\n      case \"turn\": return this.turn();\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  static zero(units: AngleUnits = \"rad\"): Angle {\n    switch (units) {\n      case \"deg\": return Angle.Deg.zero();\n      case \"rad\": return Angle.Rad.zero();\n      case \"grad\": return Angle.Grad.zero();\n      case \"turn\": return Angle.Turn.zero();\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  static deg(value: number): DegAngle {\n    return new Angle.Deg(value);\n  }\n\n  static rad(value: number): RadAngle {\n    return new Angle.Rad(value);\n  }\n\n  static grad(value: number): GradAngle {\n    return new Angle.Grad(value);\n  }\n\n  static turn(value: number): TurnAngle {\n    return new Angle.Turn(value);\n  }\n\n  static from(value: number, units: AngleUnits = \"rad\"): Angle {\n    switch (units) {\n      case \"deg\": return Angle.deg(value);\n      case \"rad\": return Angle.rad(value);\n      case \"grad\": return Angle.grad(value);\n      case \"turn\": return Angle.turn(value);\n      default: throw new Error(\"unknown angle units: \" + units);\n    }\n  }\n\n  static fromAny(value: AnyAngle, defaultUnits?: AngleUnits): Angle {\n    if (value instanceof Angle) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return Angle.from(value, defaultUnits);\n    } else if (typeof value === \"string\") {\n      return Angle.parse(value, defaultUnits);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): Angle | undefined {\n    if (value.length === 2) {\n      const num = value.getItem(0).numberValue();\n      const units = value.getItem(1);\n      if (num !== void 0 && isFinite(num) && units instanceof Attr && units.toValue() === Value.extant()) {\n        switch (units.key.value) {\n          case \"deg\": return Angle.deg(num);\n          case \"rad\": return Angle.rad(num);\n          case \"grad\": return Angle.grad(num);\n          case \"turn\": return Angle.turn(num);\n          default:\n        }\n      }\n    }\n    return void 0;\n  }\n\n  static parse(string: string, defaultUnits?: AngleUnits): Angle {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Angle.Parser.parse(input, defaultUnits);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyAngle {\n    return value instanceof Angle\n        || typeof value === \"number\"\n        || typeof value === \"string\";\n  }\n\n  private static _form: Form<Angle, AnyAngle>;\n  static form(defaultUnits?: AngleUnits, unit?: AnyAngle): Form<Angle, AnyAngle> {\n    if (unit !== void 0) {\n      unit = Angle.fromAny(unit);\n    }\n    if (defaultUnits !== void 0 || unit !== void 0) {\n      return new Angle.Form(defaultUnits, unit);\n    } else {\n      if (Angle._form === void 0) {\n        Angle._form = new Angle.Form();\n      }\n      return Angle._form;\n    }\n  }\n\n  /** @hidden */\n  static readonly PI: number = Math.PI;\n  /** @hidden */\n  static readonly TAU: number = 2 * Angle.PI;\n\n  // Forward type declarations\n  /** @hidden */\n  static Deg: typeof DegAngle; // defined by DegAngle\n  /** @hidden */\n  static Rad: typeof RadAngle; // defined by RadAngle\n  /** @hidden */\n  static Grad: typeof GradAngle; // defined by GradAngle\n  /** @hidden */\n  static Turn: typeof TurnAngle; // defined by TurnAngle\n  /** @hidden */\n  static Parser: typeof AngleParser; // defined by AngleParser\n  /** @hidden */\n  static Form: typeof AngleForm; // defined by AngleForm\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class DegAngle extends Angle {\n  /** @hidden */\n  readonly _value: number;\n\n  constructor(value: number) {\n    super();\n    this._value = value;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): AngleUnits {\n    return \"deg\";\n  }\n\n  degValue(): number {\n    return this._value;\n  }\n\n  gradValue(): number {\n    return this._value * 10 / 9;\n  }\n\n  radValue(): number {\n    return this._value * Angle.PI / 180;\n  }\n\n  turnValue(): number {\n    return this._value / 360;\n  }\n\n  deg(): DegAngle {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof DegAngle) {\n      return this._value === that._value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (DegAngle._hashSeed === void 0) {\n      DegAngle._hashSeed = Murmur3.seed(DegAngle);\n    }\n    return Murmur3.mash(Murmur3.mix(DegAngle._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"deg\").write(40/*'('*/)\n        .debug(this._value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"deg\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero?: DegAngle;\n  static zero(units?: \"deg\"): DegAngle {\n    if (DegAngle._zero === void 0) {\n      DegAngle._zero = new DegAngle(0);\n    }\n    return DegAngle._zero;\n  }\n}\nAngle.Deg = DegAngle;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class RadAngle extends Angle {\n  /** @hidden */\n  readonly _value: number;\n\n  constructor(value: number) {\n    super();\n    this._value = value;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): AngleUnits {\n    return \"rad\";\n  }\n\n  degValue(): number {\n    return this._value * 180 / Angle.PI;\n  }\n\n  gradValue(): number {\n    return this._value * 200 / Angle.PI;\n  }\n\n  radValue(): number {\n    return this._value;\n  }\n\n  turnValue(): number {\n    return this._value / Angle.TAU;\n  }\n\n  rad(): RadAngle {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof RadAngle) {\n      return this._value === that._value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (RadAngle._hashSeed === void 0) {\n      RadAngle._hashSeed = Murmur3.seed(RadAngle);\n    }\n    return Murmur3.mash(Murmur3.mix(RadAngle._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"rad\").write(40/*'('*/)\n        .debug(this._value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"rad\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero?: RadAngle;\n  static zero(units?: \"rad\"): RadAngle {\n    if (RadAngle._zero === void 0) {\n      RadAngle._zero = new RadAngle(0);\n    }\n    return RadAngle._zero;\n  }\n}\nAngle.Rad = RadAngle;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class GradAngle extends Angle {\n  /** @hidden */\n  readonly _value: number;\n\n  constructor(value: number) {\n    super();\n    this._value = value;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): AngleUnits {\n    return \"grad\";\n  }\n\n  degValue(): number {\n    return this._value * 0.9;\n  }\n\n  gradValue(): number {\n    return this._value;\n  }\n\n  radValue(): number {\n    return this._value * Angle.PI / 200;\n  }\n\n  turnValue(): number {\n    return this._value / 400;\n  }\n\n  grad(): GradAngle {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof GradAngle) {\n      return this._value === that._value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (GradAngle._hashSeed === void 0) {\n      GradAngle._hashSeed = Murmur3.seed(GradAngle);\n    }\n    return Murmur3.mash(Murmur3.mix(GradAngle._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"grad\").write(40/*'('*/)\n        .debug(this._value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"grad\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero?: GradAngle;\n  static zero(units?: \"grad\"): GradAngle {\n    if (GradAngle._zero === void 0) {\n      GradAngle._zero = new GradAngle(0);\n    }\n    return GradAngle._zero;\n  }\n}\nAngle.Grad = GradAngle;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\nexport class TurnAngle extends Angle {\n  /** @hidden */\n  readonly _value: number;\n\n  constructor(value: number) {\n    super();\n    this._value = value;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): AngleUnits {\n    return \"turn\";\n  }\n\n  degValue(): number {\n    return this._value * 360;\n  }\n\n  gradValue(): number {\n    return this._value * 400;\n  }\n\n  radValue(): number {\n    return this._value * Angle.TAU;\n  }\n\n  turnValue(): number {\n    return this._value;\n  }\n\n  turn(): TurnAngle {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof TurnAngle) {\n      return this._value === that._value;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (TurnAngle._hashSeed === void 0) {\n      TurnAngle._hashSeed = Murmur3.seed(TurnAngle);\n    }\n    return Murmur3.mash(Murmur3.mix(TurnAngle._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Angle\").write(46/*'.'*/).write(\"turn\").write(40/*'('*/)\n        .debug(this._value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"turn\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero?: TurnAngle;\n  static zero(units?: \"turn\"): TurnAngle {\n    if (TurnAngle._zero === void 0) {\n      TurnAngle._zero = new TurnAngle(0);\n    }\n    return TurnAngle._zero;\n  }\n}\nAngle.Turn = TurnAngle;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {AngleUnits, Angle} from \"./Angle\";\n\n/** @hidden */\nexport class AngleParser extends Parser<Angle> {\n  private readonly _defaultUnits: AngleUnits | undefined;\n  private readonly _valueParser: Parser<number> | undefined;\n  private readonly _unitsOutput: Output<string> | undefined;\n  private readonly _step: number | undefined;\n\n  constructor(defaultUnits?: AngleUnits, valueParser?: Parser<number>,\n              unitsOutput?: Output<string>, step?: number) {\n    super();\n    this._defaultUnits = defaultUnits;\n    this._valueParser = valueParser;\n    this._unitsOutput = unitsOutput;\n    this._step = step;\n  }\n\n  feed(input: Input): Parser<Angle> {\n    return AngleParser.parse(input, this._defaultUnits, this._valueParser,\n                             this._unitsOutput, this._step);\n  }\n\n  static parse(input: Input, defaultUnits?: AngleUnits, valueParser?: Parser<number>,\n               unitsOutput?: Output<string>, step: number = 1): Parser<Angle> {\n    let c = 0;\n    if (step === 1) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseDecimal(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 2;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 2) {\n      unitsOutput = unitsOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        unitsOutput.push(c);\n      }\n      if (!input.isEmpty()) {\n        const value = valueParser!.bind();\n        const units = unitsOutput.bind() || defaultUnits;\n        switch (units) {\n          case \"deg\": return Parser.done(Angle.deg(value));\n          case \"\":\n          case \"rad\": return Parser.done(Angle.rad(value));\n          case \"grad\": return Parser.done(Angle.grad(value));\n          case \"turn\": return Parser.done(Angle.turn(value));\n          default: return Parser.error(Diagnostic.message(\"unknown units: \" + units, input));\n        }\n      }\n    }\n    return new AngleParser(defaultUnits, valueParser, unitsOutput, step);\n  }\n}\nAngle.Parser = AngleParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AngleUnits, AnyAngle, Angle} from \"./Angle\";\n\nexport class AngleInterpolator extends Interpolator<Angle, AnyAngle> {\n  /** @hidden */\n  readonly v0: number;\n  /** @hidden */\n  readonly dv: number;\n  /** @hidden */\n  readonly units: AngleUnits;\n\n  constructor(a0: Angle, a1: Angle) {\n    super();\n    this.units = a1.units;\n    this.v0 = a0.toValue(this.units);\n    this.dv = a1.value - this.v0;\n  }\n\n  interpolate(u: number): Angle {\n    return Angle.from(this.v0 + this.dv * u, this.units);\n  }\n\n  deinterpolate(a: AnyAngle): number {\n    const v = Angle.fromAny(a).toValue(this.units);\n    return this.dv !== 0 ? (v - this.v0) / this.dv : this.dv;\n  }\n\n  range(): ReadonlyArray<Angle>;\n  range(ts: ReadonlyArray<AnyAngle>): AngleInterpolator;\n  range(t0: AnyAngle, t1: AnyAngle): AngleInterpolator;\n  range(a0?: ReadonlyArray<AnyAngle> | AnyAngle, a1?: AnyAngle): ReadonlyArray<Angle> | AngleInterpolator {\n    if (a0 === void 0) {\n      return [Angle.from(this.v0, this.units), Angle.from(this.v0 + this.dv, this.units)];\n    } else if (a1 === void 0) {\n      a0 = a0 as ReadonlyArray<AnyAngle>;\n      return AngleInterpolator.between(a0[0], a0[1]);\n    } else {\n      return AngleInterpolator.between(a0 as AnyAngle, a1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof AngleInterpolator) {\n      return this.v0 === that.v0 && this.dv === that.dv && this.units === that.units;\n    }\n    return false;\n  }\n\n  static between(a0: AnyAngle, a1: AnyAngle): AngleInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof Angle && b instanceof Angle) {\n      return new AngleInterpolator(a, b);\n    } else if (Angle.isAny(a) && Angle.isAny(b)) {\n      return new AngleInterpolator(Angle.fromAny(a), Angle.fromAny(b));\n    }\n    return Interpolator.between(a, b);\n  }\n\n  static tryBetween(a: unknown, b: unknown): AngleInterpolator | null {\n    if (a instanceof Angle && b instanceof Angle) {\n      return new AngleInterpolator(a, b);\n    }\n    return null;\n  }\n}\nInterpolator.registerFactory(AngleInterpolator);\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {AngleUnits, AnyAngle, Angle} from \"./Angle\";\n\n/** @hidden */\nexport class AngleForm extends Form<Angle, AnyAngle> {\n  private readonly _defaultUnits: AngleUnits | undefined;\n  private readonly _unit: Angle | undefined;\n\n  constructor(defaultUnits?: AngleUnits, unit?: Angle) {\n    super();\n    this._defaultUnits = defaultUnits;\n    this._unit = unit;\n  }\n\n  unit(): Angle | undefined;\n  unit(unit: Angle | undefined): Form<Angle, AnyAngle>;\n  unit(unit?: Angle | undefined): Angle | undefined | Form<Angle, AnyAngle> {\n    if (arguments.length === 0) {\n      return this._unit !== void 0 ? this._unit : Angle.zero(this._defaultUnits);\n    } else {\n      return new AngleForm(this._defaultUnits, unit);\n    }\n  }\n\n  mold(angle: AnyAngle): Item {\n    angle = Angle.fromAny(angle, this._defaultUnits);\n    return Text.from(angle.toString());\n  }\n\n  cast(item: Item): Angle | undefined {\n    const value = item.toValue();\n    let angle: Angle | undefined;\n    try {\n      angle = Angle.fromValue(value);\n      if (angle === void 0) {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          angle = Angle.parse(string, this._defaultUnits);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return angle;\n  }\n}\nAngle.Form = AngleForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Attr, Value, Form} from \"@swim/structure\";\nimport {PxLength} from \"./PxLength\";\nimport {EmLength} from \"./EmLength\";\nimport {RemLength} from \"./RemLength\";\nimport {PctLength} from \"./PctLength\";\nimport {UnitlessLength} from \"./UnitlessLength\";\nimport {LengthParser} from \"./LengthParser\";\nimport {LengthForm} from \"./LengthForm\";\n\nexport type LengthUnits = \"px\" | \"em\" | \"rem\" | \"%\" | \"\";\n\nexport type AnyLength = Length | string | number;\n\nexport abstract class Length implements HashCode, Debug {\n  isDefined(): boolean {\n    return this.value !== 0;\n  }\n\n  abstract isRelative(): boolean;\n\n  abstract get value(): number;\n\n  abstract get units(): LengthUnits;\n\n  abstract get node(): Node | null;\n\n  plus(that: AnyLength, units: LengthUnits = this.units): Length {\n    return Length.from(this.toValue(units) + Length.fromAny(that).toValue(units), units);\n  }\n\n  opposite(units: LengthUnits = this.units): Length {\n    return Length.from(-this.toValue(units), units);\n  }\n\n  minus(that: AnyLength, units: LengthUnits = this.units): Length {\n    return Length.from(this.toValue(units) - Length.fromAny(that).toValue(units), units);\n  }\n\n  times(scalar: number, units: LengthUnits = this.units): Length {\n    return Length.from(this.toValue(units) * scalar, units);\n  }\n\n  divide(scalar: number, units: LengthUnits = this.units): Length {\n    return Length.from(this.toValue(units) / scalar, units);\n  }\n\n  /** Returns the base unit value, in pixels. */\n  abstract unitValue(): number;\n\n  abstract pxValue(unitValue?: number): number;\n\n  emValue(): number {\n    return this.pxValue() / Length.emUnit(this.node);\n  }\n\n  remValue(): number {\n    return this.pxValue() / Length.remUnit();\n  }\n\n  pctValue(): number {\n    return this.px().value / this.unitValue();\n  }\n\n  px(unitValue?: number): PxLength {\n    return Length.px(this.pxValue(unitValue), this.node);\n  }\n\n  em(): EmLength {\n    return Length.em(this.emValue(), this.node);\n  }\n\n  rem(): RemLength {\n    return Length.rem(this.remValue(), this.node);\n  }\n\n  pct(): PctLength {\n    return Length.pct(this.pctValue(), this.node);\n  }\n\n  toValue(units: LengthUnits): number {\n    switch (units) {\n      case \"px\": return this.pxValue();\n      case \"em\": return this.emValue();\n      case \"rem\": return this.remValue();\n      case \"%\": return this.pctValue();\n      default: throw new Error(\"unknown length units: \" + units);\n    }\n  }\n\n  to(units: LengthUnits): Length {\n    switch (units) {\n      case \"px\": return this.px();\n      case \"em\": return this.em();\n      case \"rem\": return this.rem();\n      case \"%\": return this.pct();\n      default: throw new Error(\"unknown length units: \" + units);\n    }\n  }\n\n  abstract equals(that: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  static zero(units?: LengthUnits, node?: Node | null): Length;\n  static zero(node?: Node | null): Length;\n  static zero(units?: LengthUnits | Node | null, node?: Node | null): Length {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"px\";\n    }\n    switch (units) {\n      case \"px\": return Length.Px.zero(node);\n      case \"em\": return Length.Em.zero(node);\n      case \"rem\": return Length.Rem.zero(node);\n      case \"%\": return Length.Pct.zero(node);\n      case \"\": return Length.Unitless.zero(node);\n      default: throw new Error(\"unknown length units: \" + units);\n    }\n  }\n\n  static px(value: number, node?: Node | null): PxLength {\n    return new Length.Px(value, node);\n  }\n\n  static em(value: number, node?: Node | null): EmLength {\n    return new Length.Em(value, node);\n  }\n\n  static rem(value: number, node?: Node | null): RemLength {\n    return new Length.Rem(value, node);\n  }\n\n  static pct(value: number, node?: Node | null): PctLength {\n    return new Length.Pct(value, node);\n  }\n\n  static unitless(value: number, node?: Node | null): UnitlessLength {\n    return new Length.Unitless(value, node);\n  }\n\n  static from(value: number, units?: LengthUnits, node?: Node | null): Length;\n  static from(value: number, node?: Node | null): Length;\n  static from(value: number, units?: LengthUnits | Node | null, node?: Node | null): Length {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"px\";\n    }\n    switch (units) {\n      case \"px\": return Length.px(value, node);\n      case \"em\": return Length.em(value, node);\n      case \"rem\": return Length.rem(value, node);\n      case \"%\": return Length.pct(value, node);\n      case \"\": return Length.unitless(value, node);\n      default: throw new Error(\"unknown length units: \" + units);\n    }\n  }\n\n  static fromAny(value: AnyLength, defaultUnits?: LengthUnits, node?: Node | null): Length;\n  static fromAny(value: AnyLength, node?: Node | null): Length;\n  static fromAny(value: AnyLength, defaultUnits?: LengthUnits | Node | null, node?: Node | null): Length {\n    if (typeof defaultUnits !== \"string\") {\n      node = defaultUnits;\n      defaultUnits = void 0;\n    }\n    if (value instanceof Length) {\n      return value;\n    } else if (typeof value === \"number\") {\n      return Length.from(value, defaultUnits, node);\n    } else if (typeof value === \"string\" && typeof defaultUnits !== \"string\") {\n      return Length.parse(value, defaultUnits, node);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value, node?: Node | null): Length | undefined {\n    if (value.length === 2) {\n      const num = value.getItem(0).numberValue(void 0);\n      const units = value.getItem(1);\n      if (num !== void 0 && isFinite(num) && units instanceof Attr && units.toValue() === Value.extant()) {\n        switch (units.key.value) {\n          case \"px\": return Length.px(num, node);\n          case \"em\": return Length.em(num, node);\n          case \"rem\": return Length.rem(num, node);\n          case \"pct\": return Length.pct(num, node);\n          default:\n        }\n      }\n    }\n    return void 0;\n  }\n\n  static parse(string: string, defaultUnits?: LengthUnits, node?: Node | null): Length;\n  static parse(string: string, node?: Node | null): Length;\n  static parse(string: string, defaultUnits?: LengthUnits | Node | null, node?: Node | null): Length {\n    if (typeof defaultUnits !== \"string\") {\n      node = defaultUnits;\n      defaultUnits = void 0;\n    }\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Length.Parser.parse(input, defaultUnits, node);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyLength {\n    return value instanceof Length\n        || typeof value === \"number\"\n        || typeof value === \"string\";\n  }\n\n  private static _form: Form<Length, AnyLength>;\n  static form(defaultUnits?: LengthUnits, node: Node | null = null, unit?: AnyLength): Form<Length, AnyLength> {\n    if (unit !== void 0) {\n      unit = Length.fromAny(unit);\n    }\n    if (defaultUnits !== void 0 || node !== null || unit !== void 0) {\n      return new Length.Form(defaultUnits, node, unit);\n    } else {\n      if (Length._form === void 0) {\n        Length._form = new Length.Form();\n      }\n      return Length._form;\n    }\n  }\n\n  /** @hidden */\n  static widthUnit(node: Node | null): number {\n    while (node !== null) {\n      if (node instanceof HTMLElement && node.offsetParent instanceof HTMLElement) {\n        return node.offsetParent.offsetWidth;\n      }\n      node = node.parentNode;\n    }\n    return 0;\n  }\n\n  /** @hidden */\n  static emUnit(node: Node | null): number {\n    while (node !== null) {\n      if (node instanceof Element) {\n        const fontSize = getComputedStyle(node).fontSize;\n        if (fontSize !== null) {\n          return parseFloat(fontSize);\n        }\n      }\n      node = node.parentNode;\n    }\n    return 0;\n  }\n\n  /** @hidden */\n  static remUnit(): number {\n    const fontSize = getComputedStyle(document.documentElement).fontSize;\n    if (fontSize !== null) {\n      return parseFloat(fontSize);\n    }\n    return 0;\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Px: typeof PxLength; // defined by PxLength\n  /** @hidden */\n  static Em: typeof EmLength; // defined by EmLength\n  /** @hidden */\n  static Rem: typeof RemLength; // defined by RemLength\n  /** @hidden */\n  static Pct: typeof PctLength; // defined by PctLength\n  /** @hidden */\n  static Unitless: typeof UnitlessLength; // defined by UnitlessLength\n  /** @hidden */\n  static Parser: typeof LengthParser; // defined by LengthParser\n  /** @hidden */\n  static Form: typeof LengthForm; // defined by LengthForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\nexport class PxLength extends Length {\n  /** @hidden */\n  readonly _value: number;\n  /** @hidden */\n  readonly _node?: Node;\n\n  constructor(value: number, node: Node | null = null) {\n    super();\n    this._value = value;\n    if (node !== null) {\n      this._node = node;\n    }\n  }\n\n  isRelative(): boolean {\n    return false;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): LengthUnits {\n    return \"px\";\n  }\n\n  get node(): Node | null {\n    const node = this._node;\n    return node !== void 0 ? node : null;\n  }\n\n  unitValue(): number {\n    return 1;\n  }\n\n  pxValue(): number {\n    return this._value;\n  }\n\n  px(): PxLength {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof PxLength) {\n      return this._value === that._value && this._node === that._node;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (PxLength._hashSeed === void 0) {\n      PxLength._hashSeed = Murmur3.seed(PxLength);\n    }\n    return Murmur3.mash(Murmur3.mix(PxLength._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"px\").write(40/*'('*/).debug(this._value);\n    if (this._node !== void 0) {\n      output = output.write(\", \").debug(this._node);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"px\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero: PxLength;\n  static zero(units?: \"px\", node?: Node | null): PxLength;\n  static zero(node?: Node | null): PxLength;\n  static zero(units?: \"px\" | Node | null, node?: Node | null): PxLength {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"px\";\n    }\n    if (node === void 0 || node === null) {\n      if (PxLength._zero === void 0) {\n        PxLength._zero = new PxLength(0);\n      }\n      return PxLength._zero;\n    } else {\n      return new PxLength(0, node);\n    }\n  }\n}\nLength.Px = PxLength;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\nexport class EmLength extends Length {\n  /** @hidden */\n  readonly _value: number;\n  /** @hidden */\n  readonly _node?: Node;\n\n  constructor(value: number, node: Node | null = null) {\n    super();\n    this._value = value;\n    if (node !== null) {\n      this._node = node;\n    }\n  }\n\n  isRelative(): boolean {\n    return false;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): LengthUnits {\n    return \"em\";\n  }\n\n  get node(): Node | null {\n    const node = this._node;\n    return node !== void 0 ? node : null;\n  }\n\n  unitValue(): number {\n    return Length.emUnit(this.node);\n  }\n\n  pxValue(): number {\n    return this.unitValue() * this._value;\n  }\n\n  emValue(): number {\n    return this._value;\n  }\n\n  em(): EmLength {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof EmLength) {\n      return this._value === that._value && this._node === that._node;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (EmLength._hashSeed === void 0) {\n      EmLength._hashSeed = Murmur3.seed(EmLength);\n    }\n    return Murmur3.mash(Murmur3.mix(EmLength._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"em\").write(40/*'('*/).debug(this._value);\n    if (this._node !== void 0) {\n      output = output.write(\", \").debug(this._node);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"em\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero: EmLength;\n  static zero(units?: \"em\", node?: Node | null): EmLength;\n  static zero(node?: Node | null): EmLength;\n  static zero(units?: \"em\" | Node | null, node?: Node | null): EmLength {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"em\";\n    }\n    if (node === void 0 || node === null) {\n      if (EmLength._zero === void 0) {\n        EmLength._zero = new EmLength(0);\n      }\n      return EmLength._zero;\n    } else {\n      return new EmLength(0, node);\n    }\n  }\n}\nLength.Em = EmLength;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\nexport class RemLength extends Length {\n  /** @hidden */\n  readonly _value: number;\n  /** @hidden */\n  readonly _node?: Node;\n\n  constructor(value: number, node: Node | null = null) {\n    super();\n    this._value = value;\n    if (node !== null) {\n      this._node = node;\n    }\n  }\n\n  isRelative(): boolean {\n    return false;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): LengthUnits {\n    return \"rem\";\n  }\n\n  get node(): Node | null {\n    const node = this._node;\n    return node !== void 0 ? node : null;\n  }\n\n  unitValue(): number {\n    return Length.remUnit();\n  }\n\n  pxValue(): number {\n    return this.unitValue() * this._value;\n  }\n\n  remValue(): number {\n    return this._value;\n  }\n\n  rem(): RemLength {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof RemLength) {\n      return this._value === that._value && this._node === that._node;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (RemLength._hashSeed === void 0) {\n      RemLength._hashSeed = Murmur3.seed(RemLength);\n    }\n    return Murmur3.mash(Murmur3.mix(RemLength._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"rem\").write(40/*'('*/).debug(this._value);\n    if (this._node !== void 0) {\n      output = output.write(\", \").debug(this._node);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"rem\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero: RemLength;\n  static zero(units?: \"rem\", node?: Node | null): RemLength;\n  static zero(node?: Node | null): RemLength;\n  static zero(units?: \"rem\" | Node | null, node?: Node | null): RemLength {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"rem\";\n    }\n    if (node === void 0 || node === null) {\n      if (RemLength._zero === void 0) {\n        RemLength._zero = new RemLength(0);\n      }\n      return RemLength._zero;\n    } else {\n      return new RemLength(0, node);\n    }\n  }\n}\nLength.Rem = RemLength;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\nexport class PctLength extends Length {\n  /** @hidden */\n  readonly _value: number;\n  /** @hidden */\n  readonly _node?: Node;\n\n  constructor(value: number, node: Node | null = null) {\n    super();\n    this._value = value;\n    if (node !== null) {\n      this._node = node;\n    }\n  }\n\n  isRelative(): boolean {\n    return true;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): LengthUnits {\n    return \"%\";\n  }\n\n  get node(): Node | null {\n    const node = this._node;\n    return node !== void 0 ? node : null;\n  }\n\n  unitValue(): number {\n    return Length.widthUnit(this.node);\n  }\n\n  pxValue(unitValue: number = this.unitValue()): number {\n    return unitValue * this._value / 100;\n  }\n\n  pctValue(): number {\n    return this._value;\n  }\n\n  pct(): PctLength {\n    return this;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof PctLength) {\n      return this._value === that._value && this._node === that._node;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (PctLength._hashSeed === void 0) {\n      PctLength._hashSeed = Murmur3.seed(PctLength);\n    }\n    return Murmur3.mash(Murmur3.mix(PctLength._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"pct\").write(40/*'('*/).debug(this._value);\n    if (this._node !== void 0) {\n      output = output.write(\", \").debug(this._node);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"%\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero: PctLength;\n  static zero(units?: \"%\", node?: Node | null): PctLength;\n  static zero(node?: Node | null): PctLength;\n  static zero(units?: \"%\" | Node | null, node?: Node | null): PctLength {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"%\";\n    }\n    if (node === void 0 || node === null) {\n      if (PctLength._zero === void 0) {\n        PctLength._zero = new PctLength(0);\n      }\n      return PctLength._zero;\n    } else {\n      return new PctLength(0, node);\n    }\n  }\n}\nLength.Pct = PctLength;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\nexport class UnitlessLength extends Length {\n  /** @hidden */\n  readonly _value: number;\n  /** @hidden */\n  readonly _node?: Node;\n\n  constructor(value: number, node: Node | null = null) {\n    super();\n    this._value = value;\n    if (node !== null) {\n      this._node = node;\n    }\n  }\n\n  isRelative(): boolean {\n    return false;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get units(): LengthUnits {\n    return \"\";\n  }\n\n  get node(): Node | null {\n    const node = this._node;\n    return node !== void 0 ? node : null;\n  }\n\n  unitValue(): number {\n    return 0;\n  }\n\n  pxValue(): number {\n    return this._value;\n  }\n\n  equals(that: unknown): boolean {\n    if (that instanceof UnitlessLength) {\n      return this._value === that._value && this._node === that._node;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (UnitlessLength._hashSeed === void 0) {\n      UnitlessLength._hashSeed = Murmur3.seed(UnitlessLength);\n    }\n    return Murmur3.mash(Murmur3.mix(UnitlessLength._hashSeed, Murmur3.hash(this._value)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Length\").write(46/*'.'*/).write(\"unitless\").write(40/*'('*/).debug(this._value);\n    if (this._node !== void 0) {\n      output = output.write(\", \").debug(this._node);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return this._value + \"\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _zero: UnitlessLength;\n  static zero(units?: \"\", node?: Node | null): UnitlessLength;\n  static zero(node?: Node | null): UnitlessLength;\n  static zero(units?: \"\" | Node | null, node?: Node | null): UnitlessLength {\n    if (typeof units !== \"string\") {\n      node = units;\n      units = \"\";\n    }\n    if (node === void 0 || node === null) {\n      if (UnitlessLength._zero === void 0) {\n        UnitlessLength._zero = new UnitlessLength(0);\n      }\n      return UnitlessLength._zero;\n    } else {\n      return new UnitlessLength(0, node);\n    }\n  }\n}\nLength.Unitless = UnitlessLength;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {LengthUnits, Length} from \"./Length\";\n\n/** @hidden */\nexport class LengthParser extends Parser<Length> {\n  private readonly _defaultUnits: LengthUnits | undefined;\n  private readonly _node: Node | null;\n  private readonly _valueParser: Parser<number> | undefined;\n  private readonly _unitsOutput: Output<string> | undefined;\n  private readonly _step: number | undefined;\n\n  constructor(defaultUnits?: LengthUnits, node: Node | null = null,\n              valueParser?: Parser<number>, unitsOutput?: Output<string>, step?: number) {\n    super();\n    this._defaultUnits = defaultUnits;\n    this._node = node;\n    this._valueParser = valueParser;\n    this._unitsOutput = unitsOutput;\n    this._step = step;\n  }\n\n  feed(input: Input): Parser<Length> {\n    return LengthParser.parse(input, this._defaultUnits, this._node, this._valueParser,\n                              this._unitsOutput, this._step);\n  }\n\n  static parse(input: Input, defaultUnits?: LengthUnits, node: Node | null = null,\n               valueParser?: Parser<number>, unitsOutput?: Output<string>, step: number = 1): Parser<Length> {\n    let c = 0;\n    if (step === 1) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseDecimal(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 2;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 2) {\n      unitsOutput = unitsOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 37/*'%'*/)) {\n        input = input.step();\n        unitsOutput.push(c);\n      }\n      if (!input.isEmpty()) {\n        const value = valueParser!.bind();\n        const units = unitsOutput.bind() || defaultUnits;\n        switch (units) {\n          case \"px\": return Parser.done(Length.px(value, node));\n          case \"em\": return Parser.done(Length.em(value, node));\n          case \"rem\": return Parser.done(Length.rem(value, node));\n          case \"%\": return Parser.done(Length.pct(value, node));\n          case \"\":\n          case void 0: return Parser.done(Length.unitless(value, node));\n          default: return Parser.error(Diagnostic.message(\"unknown units: \" + units, input));\n        }\n      }\n    }\n    return new LengthParser(defaultUnits, node, valueParser, unitsOutput, step);\n  }\n}\nLength.Parser = LengthParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {LengthUnits, AnyLength, Length} from \"./Length\";\n\nexport class LengthInterpolator extends Interpolator<Length, AnyLength> {\n  /** @hidden */\n  readonly v0: number;\n  /** @hidden */\n  readonly dv: number;\n  /** @hidden */\n  readonly units: LengthUnits;\n\n  constructor(l0: Length, l1: Length) {\n    super();\n    this.units = l1.units;\n    this.v0 = l0.toValue(this.units);\n    this.dv = l1.value - this.v0;\n  }\n\n  interpolate(u: number): Length {\n    return Length.from(this.v0 + this.dv * u, this.units);\n  }\n\n  deinterpolate(l: AnyLength): number {\n    const v = Length.fromAny(l).toValue(this.units);\n    return this.dv !== 0 ? (v - this.v0) / this.dv : this.dv;\n  }\n\n  range(): ReadonlyArray<Length>;\n  range(ts: ReadonlyArray<AnyLength>): LengthInterpolator;\n  range(t0: AnyLength, t1: AnyLength): LengthInterpolator;\n  range(l0?: ReadonlyArray<AnyLength> | AnyLength, l1?: AnyLength): ReadonlyArray<Length> | LengthInterpolator {\n    if (l0 === void 0) {\n      return [Length.from(this.v0, this.units), Length.from(this.v0 + this.dv, this.units)];\n    } else if (l1 === void 0) {\n      l0 = l0 as ReadonlyArray<AnyLength>;\n      return LengthInterpolator.between(l0[0], l0[1]);\n    } else {\n      return LengthInterpolator.between(l0 as AnyLength, l1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LengthInterpolator) {\n      return this.v0 === that.v0 && this.dv === that.dv && this.units === that.units;\n    }\n    return false;\n  }\n\n  static between(l0: AnyLength, l1: AnyLength): LengthInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof Length && b instanceof Length) {\n      return new LengthInterpolator(a, b);\n    } else if (Length.isAny(a) && Length.isAny(b)) {\n      return new LengthInterpolator(Length.fromAny(a), Length.fromAny(b));\n    }\n    return Interpolator.between(a, b);\n  }\n\n  static tryBetween(a: unknown, b: unknown): LengthInterpolator | null {\n    if (a instanceof Length && b instanceof Length) {\n      return new LengthInterpolator(a, b);\n    }\n    return null;\n  }\n}\nInterpolator.registerFactory(LengthInterpolator);\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {LengthUnits, AnyLength, Length} from \"./Length\";\n\n/** @hidden */\nexport class LengthForm extends Form<Length, AnyLength> {\n  private readonly _defaultUnits: LengthUnits | undefined;\n  private readonly _node: Node | null;\n  private readonly _unit: Length | undefined;\n\n  constructor(defaultUnits?: LengthUnits, node: Node | null = null, unit?: Length) {\n    super();\n    this._defaultUnits = defaultUnits;\n    this._node = node;\n    this._unit = unit;\n  }\n\n  unit(): Length | undefined;\n  unit(unit: Length | undefined): Form<Length, AnyLength>;\n  unit(unit?: Length | undefined): Length | undefined | Form<Length, AnyLength> {\n    if (arguments.length === 0) {\n      return this._unit !== void 0 ? this._unit : Length.zero(this._defaultUnits, this._node);\n    } else {\n      return new LengthForm(this._defaultUnits, this._node, unit);\n    }\n  }\n\n  mold(length: AnyLength): Item {\n    length = Length.fromAny(length, this._defaultUnits);\n    return Text.from(length.toString());\n  }\n\n  cast(item: Item): Length | undefined {\n    const value = item.toValue();\n    let length: Length | undefined;\n    try {\n      length = Length.fromValue(value, this._node);\n      if (length !== void 0) {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          length = Length.parse(string, this._defaultUnits, this._node);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return length;\n  }\n}\nLength.Form = LengthForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Value, Form} from \"@swim/structure\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {RgbColorInit, RgbColor} from \"./RgbColor\";\nimport {HslColorInit, HslColor} from \"./HslColor\";\nimport {RgbColorParser} from \"./RgbColorParser\";\nimport {HexColorParser} from \"./HexColorParser\";\nimport {HslColorParser} from \"./HslColorParser\";\nimport {ColorParser} from \"./ColorParser\";\nimport {ColorForm} from \"./ColorForm\";\n\n/** @hidden */\nexport const DARKER: number = 0.7;\n/** @hidden */\nexport const BRIGHTER: number = 1 / DARKER;\n\nexport type AnyColor = Color | ColorInit | string;\n\nexport type ColorInit = RgbColorInit | HslColorInit;\n\nexport abstract class Color implements HashCode, Debug {\n  abstract isDefined(): boolean;\n\n  abstract alpha(): number;\n  abstract alpha(a: number): Color;\n\n  abstract lightness(): number;\n\n  abstract brighter(k?: number): Color;\n\n  abstract darker(k?: number): Color;\n\n  contrast(k?: number): Color {\n    return this.lightness() < 0.67 ? this.brighter(k) : this.darker(k);\n  }\n\n  abstract rgb(): RgbColor;\n\n  abstract hsl(): HslColor;\n\n  abstract equals(other: unknown): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toHexString(): string;\n\n  abstract toString(): string;\n\n  static transparent(): Color {\n    return Color.Rgb.transparent();\n  }\n\n  static black(alpha?: number): Color {\n    return Color.Rgb.black(alpha);\n  }\n\n  static white(alpha?: number): Color {\n    return Color.Rgb.white(alpha);\n  }\n\n  static rgb(value: AnyColor): RgbColor;\n  static rgb(r: number, g: number, b: number, a?: number): RgbColor;\n  static rgb(r: AnyColor | number, g?: number, b?: number, a?: number): RgbColor {\n    if (arguments.length === 1) {\n      return Color.fromAny(r as AnyColor).rgb();\n    } else {\n      return new Color.Rgb(r as number, g!, b!, a);\n    }\n  }\n\n  static hsl(value: AnyColor): HslColor;\n  static hsl(h: AnyAngle, s: number, l: number, a?: number): HslColor;\n  static hsl(h: AnyColor | AnyAngle, s?: number, l?: number, a?: number): HslColor {\n    if (arguments.length === 1) {\n      return Color.fromAny(h as AnyColor).hsl();\n    } else {\n      h = typeof h === \"number\" ? h : Angle.fromAny(h as AnyAngle).degValue();\n      return new Color.Hsl(h, s!, l!, a);\n    }\n  }\n\n  static fromName(name: string): Color | undefined {\n    switch (name) {\n      case \"transparent\": return Color.transparent();\n      case \"black\": return Color.black();\n      case \"white\": return Color.white();\n      default: return void 0;\n    }\n  }\n\n  static fromInit(value: ColorInit): Color {\n    if (Color.Rgb.isInit(value)) {\n      return Color.Rgb.fromInit(value);\n    } else if (Color.Hsl.isInit(value)) {\n      return Color.Hsl.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromAny(value: AnyColor): Color {\n    if (value instanceof Color) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return Color.parse(value);\n    } else if (Color.Rgb.isInit(value)) {\n      return Color.Rgb.fromInit(value);\n    } else if (Color.Hsl.isInit(value)) {\n      return Color.Hsl.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): Color | undefined {\n    let color: Color | undefined;\n    color = Color.Rgb.fromValue(value);\n    if (color === void 0) {\n      color = Color.Hsl.fromValue(value);\n    }\n    return color;\n  }\n\n  static parse(string: string): Color {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Color.Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is ColorInit {\n    return Color.Rgb.isInit(value) || Color.Hsl.isInit(value);\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyColor {\n    return value instanceof Color\n        || Color.isInit(value)\n        || typeof value === \"string\";\n  }\n\n  private static _form?: Form<Color, AnyColor>;\n  static form(unit?: AnyColor): Form<Color, AnyColor> {\n    if (unit !== void 0) {\n      unit = Color.fromAny(unit);\n    }\n    if (unit !== Color.transparent()) {\n      return new Color.Form(unit);\n    } else {\n      if (Color._form === void 0) {\n        Color._form = new Color.Form(Color.transparent());\n      }\n      return Color._form;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Rgb: typeof RgbColor; // defined by RgbColor\n  /** @hidden */\n  static Hsl: typeof HslColor; // defined by HslColor\n  /** @hidden */\n  static HexParser: typeof HexColorParser; // defined by HexColorParser\n  /** @hidden */\n  static RgbParser: typeof RgbColorParser; // defined by RgbColorParser\n  /** @hidden */\n  static HslParser: typeof HslColorParser; // defined by HslColorParser\n  /** @hidden */\n  static Parser: typeof ColorParser; // defined by ColorParser\n  /** @hidden */\n  static Form: typeof ColorForm; // defined by ColorForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Base16} from \"@swim/codec\";\nimport {Item, Value} from \"@swim/structure\";\nimport {BRIGHTER, DARKER, Color} from \"./Color\";\nimport {HslColor} from \"./HslColor\";\n\nexport type AnyRgbColor = RgbColor | RgbColorInit | string;\n\nexport interface RgbColorInit {\n  readonly r: number;\n  readonly g: number;\n  readonly b: number;\n  readonly a?: number;\n}\n\nexport class RgbColor extends Color {\n  readonly r: number;\n  readonly g: number;\n  readonly b: number;\n  readonly a: number;\n\n  constructor(r: number, g: number, b: number, a: number = 1) {\n    super();\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n  }\n\n  isDefined(): boolean {\n    return this.r !== 0 || this.g !== 0 || this.b !== 0 || this.a !== 1;\n  }\n\n  alpha(): number;\n  alpha(a: number): RgbColor;\n  alpha(a?: number): number | RgbColor {\n    if (a === void 0) {\n      return this.a;\n    } else if (this.a !== a) {\n      return new RgbColor(this.r, this.g, this.b, a);\n    } else {\n      return this;\n    }\n  }\n\n  lightness(): number {\n    const r = this.r / 255;\n    const g = this.g / 255;\n    const b = this.b / 255;\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    return (max + min) / 2;\n  }\n\n  brighter(k?: number): RgbColor {\n    k = k === void 0 ? BRIGHTER : Math.pow(BRIGHTER, k);\n    return k !== 1 ? new RgbColor(this.r * k, this.g * k, this.b * k, this.a) : this;\n  }\n\n  darker(k?: number): RgbColor {\n    k = k === void 0 ? DARKER : Math.pow(DARKER, k);\n    return k !== 1 ? new RgbColor(this.r * k, this.g * k, this.b * k, this.a) : this;\n  }\n\n  rgb(): RgbColor {\n    return this;\n  }\n\n  hsl(): HslColor {\n    const r = this.r / 255;\n    const g = this.g / 255;\n    const b = this.b / 255;\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    let h = NaN;\n    let s = max - min;\n    const l = (max + min) / 2;\n    if (s !== 0) {\n      if (r === max) {\n        h = (g - b) / s + +(g < b) * 6;\n      } else if (g === max) {\n        h = (b - r) / s + 2;\n      } else {\n        h = (r - g) / s + 4;\n      }\n      s /= l < 0.5 ? max + min : 2 - (max + min);\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Color.Hsl(h, s, l, this.a);\n  }\n\n  equals(other: unknown): boolean {\n    if (other instanceof RgbColor) {\n      return this.r === other.r && this.g === other.g && this.b === other.b && this.a === other.a;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (RgbColor._hashSeed === void 0) {\n      RgbColor._hashSeed = Murmur3.seed(RgbColor);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(RgbColor._hashSeed,\n        Murmur3.hash(this.r)), Murmur3.hash(this.g)), Murmur3.hash(this.b)), Murmur3.hash(this.a)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Color\").write(46/*'.'*/).write(\"rgb\").write(40/*'('*/)\n        .debug(this.r).write(\", \").debug(this.g).write(\", \").debug(this.b);\n    if (this.a !== 1) {\n      output = output.write(\", \").debug(this.a);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toHexString(): string {\n    const r = Math.min(Math.max(0, Math.round(this.r || 0)), 255);\n    const g = Math.min(Math.max(0, Math.round(this.g || 0)), 255);\n    const b = Math.min(Math.max(0, Math.round(this.b || 0)), 255);\n    let s = \"#\";\n    const base16Alphabet = Base16.lowercase().alphabet();\n    s += base16Alphabet.charAt(r >>> 4 & 0xf);\n    s += base16Alphabet.charAt(r & 0xf);\n    s += base16Alphabet.charAt(g >>> 4 & 0xf);\n    s += base16Alphabet.charAt(g & 0xf);\n    s += base16Alphabet.charAt(b >>> 4 & 0xf);\n    s += base16Alphabet.charAt(b & 0xf);\n    return s;\n  }\n\n  toString(): string {\n    let a = this.a;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(this.a, 1));\n    if (a === 1) {\n      return this.toHexString();\n    } else {\n      let s = a === 1 ? \"rgb\" : \"rgba\";\n      s += \"(\";\n      s += Math.max(0, Math.min(Math.round(this.r) || 0, 255));\n      s += \",\";\n      s += Math.max(0, Math.min(Math.round(this.g) || 0, 255));\n      s += \",\";\n      s += Math.max(0, Math.min(Math.round(this.b) || 0, 255));\n      if (a !== 1) {\n        s += \",\";\n        s += a;\n      }\n      s += \")\";\n      return s;\n    }\n  }\n\n  private static _hashSeed?: number;\n\n  static transparent(): RgbColor {\n    return new RgbColor(0, 0, 0, 0);\n  }\n\n  static black(alpha: number = 1): RgbColor {\n    return new RgbColor(0, 0, 0, alpha);\n  }\n\n  static white(alpha: number = 1): RgbColor {\n    return new RgbColor(255, 255, 255, alpha);\n  }\n\n  static fromInit(value: RgbColorInit): RgbColor {\n    return new RgbColor(value.r, value.g, value.b, value.a);\n  }\n\n  static fromAny(value: AnyRgbColor): RgbColor {\n    if (value instanceof RgbColor) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return RgbColor.parse(value);\n    } else if (RgbColor.isInit(value)) {\n      return RgbColor.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): RgbColor | undefined {\n    const tag = value.tag();\n    let positional: boolean;\n    if (tag === \"rgb\" || tag === \"rgba\") {\n      value = value.header(tag);\n      positional = true;\n    } else {\n      positional = false;\n    }\n    let r: number | undefined;\n    let g: number | undefined;\n    let b: number | undefined;\n    let a: number | undefined;\n    value.forEach(function (member: Item, index: number): void {\n      const key = member.key.stringValue();\n      if (key !== void 0) {\n        if (key === \"r\") {\n          r = member.toValue().numberValue(r);\n        } else if (key === \"g\") {\n          g = member.toValue().numberValue(g);\n        } else if (key === \"b\") {\n          b = member.toValue().numberValue(b);\n        } else if (key === \"a\") {\n          a = member.toValue().numberValue(a);\n        }\n      } else if (member instanceof Value && positional) {\n        if (index === 0) {\n          r = member.numberValue(r);\n        } else if (index === 1) {\n          g = member.numberValue(g);\n        } else if (index === 2) {\n          b = member.numberValue(b);\n        } else if (index === 3) {\n          a = member.numberValue(a);\n        }\n      }\n    });\n    if (r !== void 0 && g !== void 0 && b !== void 0) {\n      return Color.rgb(r, g, b, a);\n    }\n    return void 0;\n  }\n\n  static parse(str: string): RgbColor {\n    return Color.parse(str).rgb();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is RgbColorInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as RgbColorInit;\n      return typeof init.r === \"number\"\n          && typeof init.g === \"number\"\n          && typeof init.b === \"number\"\n          && (typeof init.a === \"number\" || typeof init.a === \"undefined\");\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyRgbColor {\n    return value instanceof RgbColor\n        || RgbColor.isInit(value)\n        || typeof value === \"string\";\n  }\n}\nColor.Rgb = RgbColor;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {Item, Value} from \"@swim/structure\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {BRIGHTER, DARKER, Color} from \"./Color\";\nimport {RgbColor} from \"./RgbColor\";\n\nexport type AnyHslColor = HslColor | HslColorInit | string;\n\nexport interface HslColorInit {\n  readonly h: AnyAngle;\n  readonly s: number;\n  readonly l: number;\n  readonly a?: number;\n}\n\nexport class HslColor extends Color {\n  readonly h: number;\n  readonly s: number;\n  readonly l: number;\n  readonly a: number;\n\n  constructor(h: number, s: number, l: number, a: number = 1) {\n    super();\n    this.h = h;\n    this.s = s;\n    this.l = l;\n    this.a = a;\n  }\n\n  isDefined(): boolean {\n    return this.h !== 0 || this.s !== 0 || this.l !== 0 || this.a !== 1;\n  }\n\n  alpha(): number;\n  alpha(a: number): HslColor;\n  alpha(a?: number): number | HslColor {\n    if (a === void 0) {\n      return this.a;\n    } else if (this.a !== a) {\n      return new HslColor(this.h, this.s, this.l, a);\n    } else {\n      return this;\n    }\n  }\n\n  lightness(): number {\n    return this.l;\n  }\n\n  brighter(k?: number): HslColor {\n    k = k === void 0 ? BRIGHTER : Math.pow(BRIGHTER, k);\n    return k !== 1 ? new HslColor(this.h, this.s, this.l * k, this.a) : this;\n  }\n\n  darker(k?: number): HslColor {\n    k = k === void 0 ? DARKER : Math.pow(DARKER, k);\n    return k !== 1 ? new HslColor(this.h, this.s, this.l * k, this.a) : this;\n  }\n\n  private static toRgb(h: number, m1: number, m2: number): number {\n    return 255 * (h < 60 ? m1 + (m2 - m1) * h / 60\n                         : h < 180 ? m2\n                                   : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n                                             : m1);\n  }\n\n  rgb(): RgbColor {\n    const h = this.h % 360 + +(this.h < 0) * 360;\n    const s = isNaN(h) || isNaN(this.s) ? 0 : this.s;\n    const l = this.l;\n    const m2 = l + (l < 0.5 ? l : 1 - l) * s;\n    const m1 = 2 * l - m2;\n    return new Color.Rgb(HslColor.toRgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n                         HslColor.toRgb(h, m1, m2),\n                         HslColor.toRgb(h < 120 ? h + 240 : h - 120, m1, m2),\n                         this.a);\n  }\n\n  hsl(): HslColor {\n    return this;\n  }\n\n  equals(other: unknown): boolean {\n    if (other instanceof HslColor) {\n      return this.h === other.h && this.s === other.s && this.l === other.l && this.a === other.a;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (HslColor._hashSeed === void 0) {\n      HslColor._hashSeed = Murmur3.seed(HslColor);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(HslColor._hashSeed,\n        Murmur3.hash(this.h)), Murmur3.hash(this.s)), Murmur3.hash(this.l)), Murmur3.hash(this.a)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Color\").write(46/*'.'*/).write(\"hsl\").write(40/*'('*/)\n        .debug(this.h).write(\", \").debug(this.s).write(\", \").debug(this.l);\n    if (this.a !== 1) {\n      output = output.write(\", \").debug(this.a);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toHexString(): string {\n    return this.rgb().toHexString();\n  }\n\n  toString(): string {\n    let a = this.a;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(this.a, 1));\n    let s = a === 1 ? \"hsl\" : \"hsla\";\n    s += \"(\";\n    s += Math.max(0, Math.min(Math.round(this.h) || 0, 360));\n    s += \",\";\n    s += Math.max(0, Math.min(100 * Math.round(this.s) || 0, 100)) + \"%\";\n    s += \",\";\n    s += Math.max(0, Math.min(100 * Math.round(this.l) || 0, 100)) + \"%\";\n    if (a !== 1) {\n      s += \",\";\n      s += a;\n    }\n    s += \")\";\n    return s;\n  }\n\n  private static _hashSeed?: number;\n\n  static transparent(): HslColor {\n    return new HslColor(0, 0, 0, 0);\n  }\n\n  static black(alpha: number = 1): HslColor {\n    return new HslColor(0, 0, 0, alpha);\n  }\n\n  static white(alpha: number = 1): HslColor {\n    return new HslColor(0, 1, 1, alpha);\n  }\n\n  static fromInit(value: HslColorInit): HslColor {\n    const h = typeof value.h === \"number\" ? value.h : Angle.fromAny(value.h).degValue();\n    return new HslColor(h, value.s, value.l, value.a);\n  }\n\n  static fromAny(value: AnyHslColor): HslColor {\n    if (value instanceof HslColor) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return HslColor.parse(value);\n    } else if (HslColor.isInit(value)) {\n      return HslColor.fromInit(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): HslColor | undefined {\n    const tag = value.tag();\n    let positional: boolean;\n    if (tag === \"hsl\" || tag === \"hsla\") {\n      value = value.header(tag);\n      positional = true;\n    } else {\n      positional = false;\n    }\n    let h: Angle | undefined;\n    let s: number | undefined;\n    let l: number | undefined;\n    let a: number | undefined;\n    value.forEach(function (member: Item, index: number): void {\n      const key = member.key.stringValue();\n      if (key !== void 0) {\n        if (key === \"h\") {\n          h = member.toValue().cast(Angle.form(), h);\n        } else if (key === \"s\") {\n          s = member.toValue().numberValue(s);\n        } else if (key === \"l\") {\n          l = member.toValue().numberValue(l);\n        } else if (key === \"a\") {\n          a = member.toValue().numberValue(a);\n        }\n      } else if (member instanceof Value && positional) {\n        if (index === 0) {\n          h = member.cast(Angle.form(), h);\n        } else if (index === 1) {\n          s = member.numberValue(s);\n        } else if (index === 2) {\n          l = member.numberValue(l);\n        } else if (index === 3) {\n          a = member.numberValue(a);\n        }\n      }\n    });\n    if (h !== void 0 && s !== void 0 && l !== void 0) {\n      return Color.hsl(h, s, l, a);\n    }\n    return void 0;\n  }\n\n  static parse(str: string): HslColor {\n    return Color.parse(str).hsl();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is HslColorInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as HslColorInit;\n      return Angle.isAny(init.h)\n          && typeof init.s === \"number\"\n          && typeof init.l === \"number\"\n          && (typeof init.a === \"number\" || typeof init.a === \"undefined\");\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyHslColor {\n    return value instanceof HslColor\n        || HslColor.isInit(value)\n        || typeof value === \"string\";\n  }\n}\nColor.Hsl = HslColor;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ColorChannelParser} from \"./ColorChannelParser\";\n\n/** @hidden */\nexport class ColorChannel {\n  readonly value: number;\n  readonly units: string;\n\n  constructor(value: number, units: string = \"\") {\n    this.value = value;\n    this.units = units;\n  }\n\n  scale(k: number): number {\n    if (this.units === \"%\") {\n      return this.value * k / 100;\n    } else {\n      return this.value;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Parser: typeof ColorChannelParser; // defined by ColorChannelParser\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Base10} from \"@swim/codec\";\nimport {ColorChannel} from \"./ColorChannel\";\n\n/** @hidden */\nexport class ColorChannelParser extends Parser<ColorChannel> {\n  private readonly valueParser: Parser<number> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(valueParser?: Parser<number>, step?: number) {\n    super();\n    this.valueParser = valueParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<ColorChannel> {\n    return ColorChannelParser.parse(input, this.valueParser, this.step);\n  }\n\n  static parse(input: Input, valueParser?: Parser<number>, step: number = 1): Parser<ColorChannel> {\n    if (step === 1) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseNumber(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 2;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 2) {\n      if (input.isCont() && input.head() === 37/*'%'*/) {\n        input = input.step();\n        return Parser.done(new ColorChannel(valueParser!.bind(), \"%\"));\n      } else if (!input.isEmpty()) {\n        return Parser.done(new ColorChannel(valueParser!.bind()));\n      }\n    }\n    return new ColorChannelParser(valueParser, step);\n  }\n}\nColorChannel.Parser = ColorChannelParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Base16} from \"@swim/codec\";\nimport {Color} from \"./Color\";\nimport {RgbColor} from \"./RgbColor\";\n\n/** @hidden */\nexport class HexColorParser extends Parser<RgbColor> {\n  private readonly _value: number | undefined;\n  private readonly _step: number | undefined;\n\n  constructor(value?: number, step?: number) {\n    super();\n    this._value = value;\n    this._step = step;\n  }\n\n  feed(input: Input): Parser<RgbColor> {\n    return HexColorParser.parse(input, this._value, this._step);\n  }\n\n  static parse(input: Input, value: number = 0, step: number = 1): Parser<RgbColor> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont() && input.head() === 35/*'#'*/) {\n        input = input.step();\n        step = 2;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"#\", input));\n      }\n    }\n    if (step >= 2) {\n      while (step <= 9 && input.isCont()) {\n        c = input.head();\n        if (Base16.isDigit(c)) {\n          input = input.step();\n          value = (value << 4) | Base16.decodeDigit(c);\n          step += 1;\n        } else {\n          break;\n        }\n      }\n      if (!input.isEmpty()) {\n        if (step === 5) { // #xxx\n          return Parser.done(new RgbColor(value >> 8 & 0x0f | value >> 4 & 0xf0,\n                                          value >> 4 & 0x0f | value & 0xf0,\n                                          value << 4 & 0xf0 | value & 0x0f));\n        } else if (step === 6) { // #xxxx\n          return Parser.done(new RgbColor(value >> 12 & 0x0f | value >> 8 & 0xf0,\n                                          value >> 8 & 0x0f | value >> 4 & 0xf0,\n                                          value >> 4 & 0x0f | value & 0xf0,\n                                          (value << 4 & 0xf0 | value & 0x0f) / 255));\n        } else if (step === 8) { // #xxxxxx\n          return Parser.done(new RgbColor(value >> 16 & 0xff,\n                                          value >> 8 & 0xff,\n                                          value & 0xff));\n        } else if (step === 10) { // #xxxxxxxx\n          return Parser.done(new RgbColor(value >> 24 & 0xff,\n                                          value >> 16 & 0xff,\n                                          value >> 8 & 0xff,\n                                          (value & 0xff) / 255));\n        } else {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n    }\n    return new HexColorParser(value, step);\n  }\n}\nColor.HexParser = HexColorParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Color} from \"./Color\";\nimport {RgbColor} from \"./RgbColor\";\nimport {ColorChannel} from \"./ColorChannel\";\nimport {ColorChannelParser} from \"./ColorChannelParser\";\n\n/** @hidden */\nexport class RgbColorParser extends Parser<RgbColor> {\n  private readonly rParser: Parser<ColorChannel> | undefined;\n  private readonly gParser: Parser<ColorChannel> | undefined;\n  private readonly bParser: Parser<ColorChannel> | undefined;\n  private readonly aParser: Parser<ColorChannel> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(rParser?: Parser<ColorChannel>, gParser?: Parser<ColorChannel>,\n              bParser?: Parser<ColorChannel>, aParser?: Parser<ColorChannel>,\n              step?: number) {\n    super();\n    this.rParser = rParser;\n    this.gParser = gParser;\n    this.bParser = bParser;\n    this.aParser = aParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<RgbColor> {\n    return RgbColorParser.parse(input, this.rParser, this.gParser,\n                                this.bParser, this.aParser, this.step);\n  }\n\n  static parse(input: Input, rParser?: Parser<ColorChannel>, gParser?: Parser<ColorChannel>,\n               bParser?: Parser<ColorChannel>, aParser?: Parser<ColorChannel>,\n               step?: number): Parser<RgbColor> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont() && input.head() === 114/*'r'*/) {\n        input = input.step();\n        step = 2;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"r\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont() && input.head() === 103/*'g'*/) {\n        input = input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"g\", input));\n      }\n    }\n    if (step === 3) {\n      if (input.isCont() && input.head() === 98/*'b'*/) {\n        input = input.step();\n        step = 4;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"b\", input));\n      }\n    }\n    if (step === 4) {\n      if (input.isCont() && input.head() === 97/*'a'*/) {\n        input = input.step();\n        step = 5;\n      } else if (!input.isEmpty()) {\n        step = 5;\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input = input.step();\n        step = 6;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 6) {\n      if (rParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          rParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        rParser = rParser.feed(input);\n      }\n      if (rParser !== void 0) {\n        if (rParser.isDone()) {\n          step = 7;\n        } else if (rParser.isError()) {\n          return rParser.asError();\n        }\n      }\n    }\n    if (step === 7) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 8;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 8) {\n      if (gParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          gParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        gParser = gParser.feed(input);\n      }\n      if (gParser !== void 0) {\n        if (gParser.isDone()) {\n          step = 9;\n        } else if (gParser.isError()) {\n          return gParser.asError();\n        }\n      }\n    }\n    if (step === 9) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 10;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 10) {\n      if (bParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          bParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        bParser = bParser.feed(input);\n      }\n      if (bParser !== void 0) {\n        if (bParser.isDone()) {\n          step = 11;\n        } else if (bParser.isError()) {\n          return bParser.asError();\n        }\n      }\n    }\n    if (step === 11) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 41/*')'*/) {\n          input = input.step();\n          return Parser.done(new RgbColor(rParser!.bind().scale(255),\n                                          gParser!.bind().scale(255),\n                                          bParser!.bind().scale(255)));\n        } else if (c === 44/*','*/ || c === 47/*'/'*/) {\n          input = input.step();\n        }\n        step = 12;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 12) {\n      if (aParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          aParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        aParser = aParser.feed(input);\n      }\n      if (aParser !== void 0) {\n        if (aParser.isDone()) {\n          step = 13;\n        } else if (aParser.isError()) {\n          return aParser.asError();\n        }\n      }\n    }\n    if (step === 13) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 41/*')'*/) {\n        input = input.step();\n        return Parser.done(new RgbColor(rParser!.bind().scale(255),\n                                        gParser!.bind().scale(255),\n                                        bParser!.bind().scale(255),\n                                        aParser!.bind().scale(1)));\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new RgbColorParser(rParser, gParser, bParser, aParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input): Parser<RgbColor> {\n    return RgbColorParser.parse(input, void 0, void 0, void 0, void 0, 5);\n  }\n}\nColor.RgbParser = RgbColorParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Angle, AngleParser} from \"@swim/angle\";\nimport {Color} from \"./Color\";\nimport {HslColor} from \"./HslColor\";\nimport {ColorChannel} from \"./ColorChannel\";\nimport {ColorChannelParser} from \"./ColorChannelParser\";\n\n/** @hidden */\nexport class HslColorParser extends Parser<HslColor> {\n  private readonly hParser: Parser<Angle> | undefined;\n  private readonly sParser: Parser<ColorChannel> | undefined;\n  private readonly lParser: Parser<ColorChannel> | undefined;\n  private readonly aParser: Parser<ColorChannel> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(hParser?: Parser<Angle>, sParser?: Parser<ColorChannel>,\n              lParser?: Parser<ColorChannel>, aParser?: Parser<ColorChannel>,\n              step?: number) {\n    super();\n    this.hParser = hParser;\n    this.sParser = sParser;\n    this.lParser = lParser;\n    this.aParser = aParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<HslColor> {\n    return HslColorParser.parse(input, this.hParser, this.sParser,\n                                this.lParser, this.aParser, this.step);\n  }\n\n  static parse(input: Input, hParser?: Parser<Angle>, sParser?: Parser<ColorChannel>,\n               lParser?: Parser<ColorChannel>, aParser?: Parser<ColorChannel>,\n               step?: number): Parser<HslColor> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont() && input.head() === 104/*'h'*/) {\n        input = input.step();\n        step = 2;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"h\", input));\n      }\n    }\n    if (step === 2) {\n      if (input.isCont() && input.head() === 115/*'s'*/) {\n        input = input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"s\", input));\n      }\n    }\n    if (step === 3) {\n      if (input.isCont() && input.head() === 108/*'l'*/) {\n        input = input.step();\n        step = 4;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"l\", input));\n      }\n    }\n    if (step === 4) {\n      if (input.isCont() && input.head() === 97/*'a'*/) {\n        input = input.step();\n        step = 5;\n      } else if (!input.isEmpty()) {\n        step = 5;\n      }\n    }\n    if (step === 5) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input = input.step();\n        step = 6;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 6) {\n      if (hParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          hParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        hParser = hParser.feed(input);\n      }\n      if (hParser !== void 0) {\n        if (hParser.isDone()) {\n          step = 7;\n        } else if (hParser.isError()) {\n          return hParser.asError();\n        }\n      }\n    }\n    if (step === 7) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 8;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 8) {\n      if (sParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          sParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        sParser = sParser.feed(input);\n      }\n      if (sParser !== void 0) {\n        if (sParser.isDone()) {\n          if (sParser.bind().units === \"%\") {\n            step = 9;\n          } else {\n            return Parser.error(Diagnostic.expected(\"%\", input));\n          }\n        } else if (sParser.isError()) {\n          return sParser.asError();\n        }\n      }\n    }\n    if (step === 9) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 44/*','*/) {\n          input = input.step();\n        }\n        step = 10;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 10) {\n      if (lParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (input.isCont()) {\n          lParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        lParser = lParser.feed(input);\n      }\n      if (lParser !== void 0) {\n        if (lParser.isDone()) {\n          if (lParser.bind().units === \"%\") {\n            step = 11;\n          } else {\n            return Parser.error(Diagnostic.expected(\"%\", input));\n          }\n        } else if (lParser.isError()) {\n          return lParser.asError();\n        }\n      }\n    }\n    if (step === 11) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (c === 41/*')'*/) {\n          input = input.step();\n          return Parser.done(new HslColor(hParser!.bind().degValue(),\n                                          sParser!.bind().scale(1),\n                                          lParser!.bind().scale(1)));\n        } else if (c === 44/*','*/ || c === 47/*'/'*/) {\n          input = input.step();\n        }\n        step = 12;\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 12) {\n      if (aParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input = input.step();\n        }\n        if (!input.isEmpty()) {\n          aParser = ColorChannelParser.parse(input);\n        }\n      } else {\n        aParser = aParser.feed(input);\n      }\n      if (aParser !== void 0) {\n        if (aParser.isDone()) {\n          step = 13;\n        } else if (aParser.isError()) {\n          return aParser.asError();\n        }\n      }\n    }\n    if (step === 13) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 41/*')'*/) {\n        input = input.step();\n        return Parser.done(new HslColor(hParser!.bind().degValue(),\n                                        sParser!.bind().scale(1),\n                                        lParser!.bind().scale(1),\n                                        aParser!.bind().scale(1)));\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new HslColorParser(hParser, sParser, lParser, aParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input): Parser<HslColor> {\n    return HslColorParser.parse(input, void 0, void 0, void 0, void 0, 5);\n  }\n}\nColor.HslParser = HslColorParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Color} from \"./Color\";\nimport {HexColorParser} from \"./HexColorParser\";\nimport {RgbColorParser} from \"./RgbColorParser\";\nimport {HslColorParser} from \"./HslColorParser\";\n\n/** @hidden */\nexport class ColorParser extends Parser<Color> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<Color> {\n    return ColorParser.parse(input, this.identOutput, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, step: number = 1): Parser<Color> {\n    let c = 0;\n    if (step === 1) {\n      if (input.isCont()) {\n        if (input.head() === 35/*'#'*/) {\n          return HexColorParser.parse(input);\n        } else {\n          step = 2;\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"rgb\":\n          case \"rgba\": return RgbColorParser.parseRest(input);\n          case \"hsl\":\n          case \"hsla\": return HslColorParser.parseRest(input);\n          default:\n            const color = Color.fromName(ident);\n            if (color !== void 0) {\n              return Parser.done(color);\n            } else {\n              return Parser.error(Diagnostic.message(\"unknown color: \" + ident, input));\n            }\n        }\n      }\n    }\n    return new ColorParser(identOutput, step);\n  }\n}\nColor.Parser = ColorParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyColor, Color} from \"./Color\";\nimport {RgbColor} from \"./RgbColor\";\nimport {HslColor} from \"./HslColor\";\nimport {RgbColorInterpolator} from \"./RgbColorInterpolator\";\nimport {HslColorInterpolator} from \"./HslColorInterpolator\";\n\nexport abstract class ColorInterpolator<C extends Color = Color> extends Interpolator<C, AnyColor> {\n  abstract range(): ReadonlyArray<C>;\n  abstract range(cs: ReadonlyArray<C>): ColorInterpolator<C>;\n  abstract range(c0: C, c1: C): ColorInterpolator<C>;\n  abstract range(cs: ReadonlyArray<AnyColor>): ColorInterpolator;\n  abstract range(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n\n  static between(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof RgbColor && b instanceof RgbColor) {\n      return new ColorInterpolator.Rgb(a, b);\n    } else if (a instanceof HslColor && b instanceof HslColor) {\n      return new ColorInterpolator.Hsl(a, b);\n    } else if (a instanceof Color && b instanceof Color) {\n      return new ColorInterpolator.Rgb(a.rgb(), b.rgb());\n    } else if (RgbColor.isInit(a) && RgbColor.isInit(b)) {\n      return new ColorInterpolator.Rgb(RgbColor.fromInit(a), RgbColor.fromInit(b));\n    } else if (HslColor.isInit(a) && HslColor.isInit(b)) {\n      return new ColorInterpolator.Hsl(HslColor.fromInit(a), HslColor.fromInit(b));\n    } else if (Color.isAny(a) && Color.isAny(b)) {\n      return ColorInterpolator.between(Color.fromAny(a), Color.fromAny(b));\n    }\n    return Interpolator.between(a, b);\n  }\n\n  static tryBetween(a: unknown, b: unknown): ColorInterpolator | null {\n    if (a instanceof RgbColor && b instanceof RgbColor) {\n      return new ColorInterpolator.Rgb(a, b);\n    } else if (a instanceof HslColor && b instanceof HslColor) {\n      return new ColorInterpolator.Hsl(a, b);\n    }\n    return null;\n  }\n\n  static tryBetweenAny(a: unknown, b: unknown): ColorInterpolator | null {\n    if ((a instanceof Color || Color.isInit(a)) && (b instanceof Color || Color.isInit(b))) {\n      const c0 = Color.fromAny(a);\n      const c1 = Color.fromAny(b);\n      if (c0 instanceof RgbColor && c1 instanceof RgbColor) {\n        return new ColorInterpolator.Rgb(c0, c1);\n      } else if (c0 instanceof HslColor && c1 instanceof HslColor) {\n        return new ColorInterpolator.Hsl(c0, c1);\n      } else if (c0 instanceof Color && c1 instanceof Color) {\n        return new ColorInterpolator.Rgb(c0.rgb(), c1.rgb());\n      }\n    }\n    return null;\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Rgb: typeof RgbColorInterpolator; // defined by RgbColorInterpolator\n  /** @hidden */\n  static Hsl: typeof HslColorInterpolator; // defined by HslColorInterpolator\n}\nInterpolator.registerFactory(ColorInterpolator);\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyColor, Color} from \"./Color\";\nimport {RgbColorInit, RgbColor} from \"./RgbColor\";\nimport {ColorInterpolator} from \"./ColorInterpolator\";\n\nexport class RgbColorInterpolator extends ColorInterpolator<RgbColor> {\n  /** @hidden */\n  readonly r0: number;\n  /** @hidden */\n  readonly dr: number;\n  /** @hidden */\n  readonly g0: number;\n  /** @hidden */\n  readonly dg: number;\n  /** @hidden */\n  readonly b0: number;\n  /** @hidden */\n  readonly db: number;\n  /** @hidden */\n  readonly a0: number;\n  /** @hidden */\n  readonly da: number;\n\n  constructor(c0: RgbColor, c1: RgbColor) {\n    super();\n    this.r0 = c0.r;\n    this.dr = c1.r - this.r0;\n    this.g0 = c0.g;\n    this.dg = c1.g - this.g0;\n    this.b0 = c0.b;\n    this.db = c1.b - this.b0;\n    this.a0 = c0.a;\n    this.da = c1.a - this.a0;\n  }\n\n  interpolate(u: number): RgbColor {\n    const r = this.r0 + this.dr * u;\n    const g = this.g0 + this.dg * u;\n    const b = this.b0 + this.db * u;\n    const a = this.a0 + this.da * u;\n    return new RgbColor(r, g, b, a);\n  }\n\n  deinterpolate(c: AnyColor): number {\n    c = Color.fromAny(c).rgb();\n    const cr = (c as RgbColor).r - this.r0;\n    const cg = (c as RgbColor).g - this.g0;\n    const cb = (c as RgbColor).b - this.b0;\n    const ca = (c as RgbColor).a - this.a0;\n    const dp = cr * this.dr + cg * this.dg + cb * this.db + ca * this.da;\n    const lc = Math.sqrt(cr * cr + cg * cg + cb * cb + ca * ca);\n    return lc !== 0 ? dp / lc : lc;\n  }\n\n  range(): ReadonlyArray<RgbColor>;\n  range(cs: ReadonlyArray<RgbColor | RgbColorInit>): RgbColorInterpolator;\n  range(c0: RgbColor | RgbColorInit, c1: RgbColor | RgbColorInit): RgbColorInterpolator;\n  range(cs: ReadonlyArray<AnyColor>): ColorInterpolator;\n  range(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n  range(c0?: ReadonlyArray<AnyColor> | AnyColor, c1?: AnyColor): ReadonlyArray<RgbColor> | ColorInterpolator {\n    if (c0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (c1 === void 0) {\n      c0 = c0 as ReadonlyArray<AnyColor>\n      return RgbColorInterpolator.between(c0[0], c0[1]);\n    } else {\n      return RgbColorInterpolator.between(c0 as AnyColor, c1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof RgbColorInterpolator) {\n      return this.r0 === that.r0 && this.dr === that.dr\n          && this.g0 === that.g0 && this.dg === that.dg\n          && this.b0 === that.b0 && this.db === that.db\n          && this.a0 === that.a0 && this.da === that.da;\n    }\n    return false;\n  }\n\n  static between(c0: RgbColor | RgbColorInit, c1: RgbColor | RgbColorInit): RgbColorInterpolator;\n  static between(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof RgbColor && b instanceof RgbColor) {\n      return new RgbColorInterpolator(a, b);\n    } else if (RgbColor.isInit(a) && RgbColor.isInit(b)) {\n      return new RgbColorInterpolator(RgbColor.fromInit(a), RgbColor.fromInit(b));\n    }\n    return ColorInterpolator.between(a, b);\n  }\n}\nColorInterpolator.Rgb = RgbColorInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyColor, Color} from \"./Color\";\nimport {HslColorInit, HslColor} from \"./HslColor\";\nimport {ColorInterpolator} from \"./ColorInterpolator\";\n\nexport class HslColorInterpolator extends ColorInterpolator<HslColor> {\n  /** @hidden */\n  readonly h0: number;\n  /** @hidden */\n  readonly dh: number;\n  /** @hidden */\n  readonly s0: number;\n  /** @hidden */\n  readonly ds: number;\n  /** @hidden */\n  readonly l0: number;\n  /** @hidden */\n  readonly dl: number;\n  /** @hidden */\n  readonly a0: number;\n  /** @hidden */\n  readonly da: number;\n\n  constructor(c0: HslColor, c1: HslColor) {\n    super();\n    this.h0 = c0.h;\n    this.dh = c1.h - this.h0;\n    this.s0 = c0.s;\n    this.ds = c1.s - this.s0;\n    this.l0 = c0.l;\n    this.dl = c1.l - this.l0;\n    this.a0 = c0.a;\n    this.da = c1.a - this.a0;\n  }\n\n  interpolate(u: number): HslColor {\n    const h = this.h0 + this.dh * u;\n    const s = this.s0 + this.ds * u;\n    const l = this.l0 + this.dl * u;\n    const a = this.a0 + this.da * u;\n    return new HslColor(h, s, l, a);\n  }\n\n  deinterpolate(c: AnyColor): number {\n    c = Color.fromAny(c).hsl();\n    const ch = (c as HslColor).h - this.h0;\n    const cs = (c as HslColor).s - this.s0;\n    const cl = (c as HslColor).l - this.l0;\n    const ca = (c as HslColor).a - this.a0;\n    const dp = ch * this.dh + cs * this.ds + cl * this.dl + ca * this.da;\n    const lc = Math.sqrt(ch * ch + cs * cs + cl * cl + ca * ca);\n    return lc !== 0 ? dp / lc : lc;\n  }\n\n  range(): ReadonlyArray<HslColor>;\n  range(cs: ReadonlyArray<HslColor | HslColorInit>): HslColorInterpolator;\n  range(c0: HslColor | HslColorInit, c1: HslColor | HslColorInit): HslColorInterpolator;\n  range(cs: ReadonlyArray<AnyColor>): ColorInterpolator;\n  range(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n  range(c0?: ReadonlyArray<AnyColor> | AnyColor, c1?: AnyColor): ReadonlyArray<HslColor> | ColorInterpolator {\n    if (c0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (c1 === void 0) {\n      c0 = c0 as ReadonlyArray<AnyColor>\n      return HslColorInterpolator.between(c0[0], c0[1]);\n    } else {\n      return HslColorInterpolator.between(c0 as AnyColor, c1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof HslColorInterpolator) {\n      return this.h0 === that.h0 && this.dh === that.dh\n          && this.s0 === that.s0 && this.ds === that.ds\n          && this.l0 === that.l0 && this.dl === that.dl\n          && this.a0 === that.a0 && this.da === that.da;\n    }\n    return false;\n  }\n\n  static between(c0: HslColor | HslColorInit, c1: HslColor | HslColorInit): HslColorInterpolator;\n  static between(c0: AnyColor, c1: AnyColor): ColorInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof HslColor && b instanceof HslColor) {\n      return new HslColorInterpolator(a, b);\n    } else if (HslColor.isInit(a) && HslColor.isInit(b)) {\n      return new HslColorInterpolator(HslColor.fromInit(a), HslColor.fromInit(b));\n    }\n    return ColorInterpolator.between(a, b);\n  }\n}\nColorInterpolator.Hsl = HslColorInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {AnyColor, Color} from \"./Color\";\n\n/** @hidden */\nexport class ColorForm extends Form<Color, AnyColor> {\n  private readonly _unit: Color | undefined;\n\n  constructor(unit?: Color) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Color | undefined;\n  unit(unit: Color | undefined): Form<Color, AnyColor>;\n  unit(unit?: Color | undefined): Color | undefined | Form<Color, AnyColor> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new ColorForm(unit);\n    }\n  }\n\n  mold(color: AnyColor): Item {\n    color = Color.fromAny(color);\n    return Text.from(color.toString());\n  }\n\n  cast(item: Item): Color | undefined {\n    const value = item.toValue();\n    let color: Color | undefined;\n    try {\n      color = Color.fromValue(value);\n      if (color === void 0) {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          color = Color.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return color;\n  }\n}\nColor.Form = ColorForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\n\nexport type AnyFontSize = AnyLength | FontSize;\n\nexport type FontSize = Length\n                     | \"large\"\n                     | \"larger\"\n                     | \"medium\"\n                     | \"small\"\n                     | \"smaller\"\n                     | \"x-large\"\n                     | \"x-small\"\n                     | \"xx-large\"\n                     | \"xx-small\";\n\nexport const FontSize = {\n  fromAny(size: AnyFontSize): FontSize {\n    if (typeof size === \"string\" && (size === \"large\" || size === \"larger\" || size === \"medium\"\n          || size === \"small\" || size === \"smaller\"  || size === \"x-large\" || size === \"x-small\"\n          || size === \"xx-large\" || size === \"xx-small\")) {\n      return size;\n    } else {\n      return Length.fromAny(size);\n    }\n  },\n\n  fromValue(value: Value): FontSize | undefined {\n    const string = value.stringValue(void 0);\n    if (string !== void 0) {\n      return FontSize.fromAny(string);\n    } else {\n      return Length.form().cast(value);\n    }\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Value} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\n\nexport type AnyLineHeight = AnyLength | LineHeight;\n\nexport type LineHeight = Length | \"normal\";\n\nexport const LineHeight = {\n  fromAny(height: AnyLineHeight): LineHeight {\n    if (typeof height === \"string\" && height === \"normal\") {\n      return height;\n    } else {\n      return Length.fromAny(height);\n    }\n  },\n\n  fromValue(value: Value): LineHeight | undefined {\n    const string = value.stringValue(void 0);\n    if (string !== void 0) {\n      return LineHeight.fromAny(string);\n    } else {\n      return Length.form().cast(value);\n    }\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Unicode, Base16} from \"@swim/codec\";\nimport {Item, Value} from \"@swim/structure\";\n\nexport type GenericFamily = \"serif\"\n                          | \"sans-serif\"\n                          | \"cursive\"\n                          | \"fantasy\"\n                          | \"monospace\"\n                          | \"system-ui\"\n                          | \"emoji\"\n                          | \"math\"\n                          | \"fangsong\";\n\nexport type FontFamily = string | GenericFamily;\n\nexport const FontFamily = {\n  fromValue(value: Value): FontFamily | FontFamily[] | undefined {\n    let family: FontFamily | FontFamily[] | undefined;\n    value.forEach(function (item: Item): void {\n      if (item instanceof Value) {\n        const string = item.stringValue(void 0);\n        if (string !== void 0) {\n          if (family === void 0) {\n            family = string;\n          } else if (typeof family === \"string\") {\n            family = [family, string];\n          } else {\n            family.push(string);\n          }\n        }\n      }\n    });\n    return family;\n  },\n\n  format(family: FontFamily): string {\n    const n = family.length;\n    let isIdent: boolean;\n    if (n > 0) {\n      isIdent = Unicode.isAlpha(family.charCodeAt(0));\n      for (let i = family.offsetByCodePoints(0, 1); isIdent && i < n; i = family.offsetByCodePoints(i, 1)) {\n        const c = family.charCodeAt(i);\n        isIdent = Unicode.isAlpha(c) || c === 45/*'-'*/;\n      }\n    } else {\n      isIdent = false;\n    }\n    if (isIdent) {\n      return family;\n    } else {\n      const output = Unicode.stringOutput();\n      output.write(34/*'\"'*/);\n      for (let i = 0; i < n; i = family.offsetByCodePoints(i, 1)) {\n        const c = family.charCodeAt(i);\n        if (c === 10/*'\\n'*/ || c === 34/*'\"'*/ || c === 39/*'\\''*/) {\n          output.write(92/*'\\\\'*/).write(c);\n        } else if (c >= 0x20) {\n          output.write(c);\n        } else {\n          const base16 = Base16.uppercase();\n          output.write(92/*'\\\\'*/).write(base16.encodeDigit(c >>> 20 & 0xf))\n                                  .write(base16.encodeDigit(c >>> 16 & 0xf))\n                                  .write(base16.encodeDigit(c >>> 12 & 0xf))\n                                  .write(base16.encodeDigit(c >>>  8 & 0xf))\n                                  .write(base16.encodeDigit(c >>>  4 & 0xf))\n                                  .write(base16.encodeDigit(c        & 0xf));\n        }\n      }\n      output.write(34/*'\"'*/);\n      return output.toString();\n    }\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base16} from \"@swim/codec\";\nimport {FontFamily} from \"./FontFamily\";\n\n/** @hidden */\nexport class FontFamilyParser extends Parser<FontFamily> {\n  private readonly output: Output<string> | undefined;\n  private readonly quote: number | undefined;\n  private readonly code: number | undefined;\n  private readonly step: number | undefined;\n\n  constructor(output?: Output<string>, quote?: number, code?: number, step?: number) {\n    super();\n    this.output = output;\n    this.quote = quote;\n    this.code = code;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<FontFamily> {\n    return FontFamilyParser.parse(input, this.output, this.quote, this.code, this.step);\n  }\n\n  static parse<I, V>(input: Input, output?: Output<string>, quote: number = 0,\n                     code: number = 0, step: number = 1): Parser<FontFamily> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont()) {\n        if (Unicode.isAlpha(c)) {\n          output = output || Unicode.stringOutput();\n          step = 2;\n        } else if (c === 34/*'\"'*/ || c === 39/*'\\''*/ && (quote === c || quote === 0)) {\n          input = input.step();\n          output = output || Unicode.stringOutput();\n          quote = c;\n          step = 3;\n        } else {\n          return Parser.error(Diagnostic.expected(\"font family\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.expected(\"font family\", input));\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 45/*'-'*/)) {\n        input = input.step();\n        output!.write(c);\n      }\n      if (!input.isEmpty()) {\n        return Parser.done(output!.bind());\n      }\n    }\n    string: do {\n      if (step === 3) {\n        while (input.isCont()) {\n          c = input.head();\n          if (c >= 0x20 && c !== quote && c !== 92/*'\\\\'*/) {\n            input = input.step();\n            output!.write(c);\n          } else {\n            break;\n          }\n        }\n        if (input.isCont()) {\n          if (c === quote) {\n            input = input.step();\n            return Parser.done(output!.bind());\n          } else if (c === 92/*'\\\\'*/) {\n            input = input.step();\n            step = 4;\n          } else {\n            return Parser.error(Diagnostic.expected(quote, input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(quote, input));\n        }\n      }\n      if (step === 4) {\n        if (input.isCont()) {\n          c = input.head();\n          if (Base16.isDigit(c)) {\n            step = 5;\n          } else if (c === 10/*'\\n'*/) {\n            input.step();\n            step = 3;\n            continue;\n          } else {\n            input.step();\n            output!.write(c);\n            step = 3;\n            continue;\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.expected(\"escape character\", input));\n        }\n      }\n      if (step >= 5) {\n        do {\n          if (input.isCont() && (c = input.head(), Base16.isDigit(c))) {\n            input = input.step();\n            code = 16 * code + Base16.decodeDigit(c);\n            if (step <= 11) {\n              step += 1;\n              continue;\n            } else {\n              if (code === 0) {\n                return Parser.error(Diagnostic.message(\"zero escape\", input));\n              }\n              output!.write(code);\n              code = 0;\n              step = 3;\n              continue string;\n            }\n          } else if (!input.isEmpty()) {\n            return Parser.error(Diagnostic.unexpected(input));\n          }\n          break;\n        } while (true);\n      }\n      break;\n    } while (true);\n    return new FontFamilyParser(output, quote, code, step);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals, Objects} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Value, Form} from \"@swim/structure\";\nimport {FontStyle} from \"./FontStyle\";\nimport {FontVariant} from \"./FontVariant\";\nimport {FontWeight} from \"./FontWeight\";\nimport {FontStretch} from \"./FontStretch\";\nimport {AnyFontSize, FontSize} from \"./FontSize\";\nimport {AnyLineHeight, LineHeight} from \"./LineHeight\";\nimport {FontFamily} from \"./FontFamily\";\nimport {FontParser} from \"./FontParser\";\nimport {FontForm} from \"./FontForm\";\n\nexport type AnyFont = Font | FontInit | string;\n\nexport interface FontInit {\n  style?: FontStyle | null;\n  variant?: FontVariant | null;\n  weight?: FontWeight | null;\n  stretch?: FontStretch | null;\n  size?: AnyFontSize | null;\n  height?: AnyLineHeight | null;\n  family: FontFamily | FontFamily[];\n}\n\nexport class Font implements Equals, Debug {\n  /** @hidden */\n  readonly _style: FontStyle | null;\n  /** @hidden */\n  readonly _variant: FontVariant | null;\n  /** @hidden */\n  readonly _weight: FontWeight | null;\n  /** @hidden */\n  readonly _stretch: FontStretch | null;\n  /** @hidden */\n  readonly _size: FontSize | null;\n  /** @hidden */\n  readonly _height: LineHeight | null;\n  /** @hidden */\n  readonly _family: FontFamily | ReadonlyArray<FontFamily>;\n\n  constructor(style: FontStyle | null, variant: FontVariant | null,\n              weight: FontWeight | null, stretch: FontStretch | null,\n              size: FontSize | null, height: LineHeight | null,\n              family: FontFamily | ReadonlyArray<FontFamily>) {\n    this._style = style;\n    this._variant = variant;\n    this._weight = weight;\n    this._stretch = stretch;\n    this._size = size;\n    this._height = height;\n    this._family = family;\n  }\n\n  style(): FontStyle | null;\n  style(style: FontStyle | null): Font;\n  style(style?: FontStyle | null): FontStyle | null | Font {\n    if (style === void 0) {\n      return this._style;\n    } else {\n      if (this._style === style) {\n        return this;\n      } else {\n        return new Font(style, this._variant, this._weight, this._stretch,\n                        this._size, this._height, this._family);\n      }\n    }\n  }\n\n  variant(): FontVariant | null;\n  variant(variant: FontVariant | null): Font;\n  variant(variant?: FontVariant | null): FontVariant | null | Font {\n    if (variant === void 0) {\n      return this._variant;\n    } else {\n      if (this._variant === variant) {\n        return this;\n      } else {\n        return new Font(this._style, variant, this._weight, this._stretch,\n                        this._size, this._height, this._family);\n      }\n    }\n  }\n\n  weight(): FontWeight | null;\n  weight(weight: FontWeight | null): Font;\n  weight(weight?: FontWeight | null): FontWeight | null | Font {\n    if (weight === void 0) {\n      return this._weight;\n    } else {\n      if (this._weight === weight) {\n        return this;\n      } else {\n        return new Font(this._style, this._variant, weight, this._stretch,\n                        this._size, this._height, this._family);\n      }\n    }\n  }\n\n  stretch(): FontStretch | null;\n  stretch(stretch: FontStretch | null): Font;\n  stretch(stretch?: FontStretch | null): FontStretch | null | Font {\n    if (stretch === void 0) {\n      return this._stretch;\n    } else {\n      if (this._stretch === stretch) {\n        return this;\n      } else {\n        return new Font(this._style, this._variant, this._weight, stretch,\n                        this._size, this._height, this._family);\n      }\n    }\n  }\n\n  size(): FontSize | null;\n  size(size: AnyFontSize | null): Font;\n  size(size?: AnyFontSize | null): FontSize | null | Font {\n    if (size === void 0) {\n      return this._size;\n    } else {\n      size = size !== null ? FontSize.fromAny(size) : null;\n      if (Objects.equal(this._size, size)) {\n        return this;\n      } else {\n        return new Font(this._style, this._variant, this._weight, this._stretch,\n                        size as FontSize | null, this._height, this._family);\n      }\n    }\n  }\n\n  height(): LineHeight | null;\n  height(height: AnyLineHeight | null): Font;\n  height(height?: AnyLineHeight | null): LineHeight | null | Font {\n    if (height === void 0) {\n      return this._height;\n    } else {\n      height = height !== null ? LineHeight.fromAny(height) : null;\n      if (Objects.equal(this._height, height)) {\n        return this;\n      } else {\n        return new Font(this._style, this._variant, this._weight, this._stretch,\n                        this._size, height as LineHeight | null, this._family);\n      }\n    }\n  }\n\n  family(): FontFamily | FontFamily[];\n  family(family: FontFamily | ReadonlyArray<FontFamily>): Font;\n  family(family?: FontFamily | ReadonlyArray<FontFamily>): FontFamily | FontFamily[] | Font {\n    if (family === void 0) {\n      return (Array.isArray(this._family) ? this._family.slice(0) : this._family) as FontFamily | FontFamily[];\n    } else {\n      if (Objects.equal(this._family, family)) {\n        return this;\n      } else {\n        if (Array.isArray(family) && family.length === 1) {\n          family = family[0];\n        }\n        return new Font(this._style, this._variant, this._weight, this._stretch,\n                        this._size, this._height, family as FontFamily | ReadonlyArray<FontFamily>);\n      }\n    }\n  }\n\n  toAny(): FontInit {\n    return {\n      style: this._style,\n      variant: this._variant,\n      weight: this._weight,\n      stretch: this._stretch,\n      size: this._size,\n      height: this._height,\n      family: (Array.isArray(this._family) ? this._family.slice(0) : this._family) as FontFamily | FontFamily[],\n    };\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Font) {\n      return this._style === that._style && this._variant === that._variant\n          && this._weight === that._weight && this._stretch === that._stretch\n          && Objects.equal(this._size, that._size)\n          && Objects.equal(this._height, that._height)\n          && Objects.equal(this._family, that._family);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Font\").write(46/*'.'*/).write(\"family\").write(40/*'('*/).write(41/*')'*/);\n    if (typeof this._family === \"string\") {\n      output = output.debug(this._family);\n    } else if (Array.isArray(this._family) && this._family.length !== 0) {\n      output = output.debug(this._family[0]);\n      for (let i = 1; i < this._family.length; i += 1) {\n        output = output.write(\", \").debug(this._family[i]);\n      }\n    }\n    output = output.write(41/*')'*/);\n    if (this._style !== null) {\n      output = output.write(46/*'.'*/).write(\"style\").write(40/*'('*/).debug(this._style).write(41/*')'*/);\n    }\n    if (this._variant !== null) {\n      output = output.write(46/*'.'*/).write(\"variant\").write(40/*'('*/).debug(this._variant).write(41/*')'*/);\n    }\n    if (this._weight !== null) {\n      output = output.write(46/*'.'*/).write(\"weight\").write(40/*'('*/).debug(this._weight).write(41/*')'*/);\n    }\n    if (this._stretch !== null) {\n      output = output.write(46/*'.'*/).write(\"stretch\").write(40/*'('*/).debug(this._stretch).write(41/*')'*/);\n    }\n    if (this._size !== null) {\n      output = output.write(46/*'.'*/).write(\"size\").write(40/*'('*/).debug(this._size).write(41/*')'*/);\n    }\n    if (this._height !== null) {\n      output = output.write(46/*'.'*/).write(\"height\").write(40/*'('*/).debug(this._height).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    let s = \"\";\n    if (this._style !== null || this._variant === \"normal\" || this._weight === \"normal\" || this._stretch === \"normal\") {\n      s += this._style || \"normal\";\n    }\n    if (this._variant !== null || this._weight === \"normal\" || this._stretch === \"normal\") {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += this._variant || \"normal\";\n    }\n    if (this._weight !== null || this._stretch === \"normal\") {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += this._weight || \"normal\";\n    }\n    if (this._stretch !== null) {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += this._stretch;\n    }\n    if (this._size !== null) {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += this._size.toString();\n      if (this._height !== null) {\n        s += \"/\";\n        s += this._height.toString();\n      }\n    }\n    if (typeof this._family === \"string\") {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += FontFamily.format(this._family);\n    } else if (Array.isArray(this._family) && this._family.length !== 0) {\n      if (s.length !== 0) {\n        s += \" \";\n      }\n      s += FontFamily.format(this._family[0]);\n      for (let i = 1; i < this._family.length; i += 1) {\n        s += \", \";\n        s += FontFamily.format(this._family[i]);\n      }\n    }\n    return s;\n  }\n\n  static style(style: FontStyle | null, family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(style, null, null, null, null, null, family);\n  }\n\n  static variant(variant: FontVariant | null, family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(null, variant, null, null, null, null, family);\n  }\n\n  static weight(weight: FontWeight | null, family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(null, null, weight, null, null, null, family);\n  }\n\n  static stretch(stretch: FontStretch | null, family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(null, null, null, stretch, null, null, family);\n  }\n\n  static size(size: AnyFontSize | null, family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    size = size !== null ? FontSize.fromAny(size) : null;\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(null, null, null, null, size as FontSize | null, null, family);\n  }\n\n  static family(family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(null, null, null, null, null, null, family);\n  }\n\n  static from(style: FontStyle | null = null, variant: FontVariant | null = null,\n              weight: FontWeight | null = null, stretch: FontStretch | null = null,\n              size: AnyFontSize | null = null, height: AnyLineHeight | null = null,\n              family: FontFamily | ReadonlyArray<FontFamily>): Font {\n    size = size !== null ? FontSize.fromAny(size) : null;\n    height = height !== null ? LineHeight.fromAny(height) : null;\n    if (Array.isArray(family) && family.length === 1) {\n      family = family[0];\n    }\n    return new Font(style, variant, weight, stretch, size as FontSize | null,\n                    height as LineHeight | null, family);\n  }\n\n  static fromAny(value: AnyFont): Font {\n    if (value instanceof Font) {\n      return value;\n    } else if (typeof value === \"object\" && value !== null) {\n      return Font.from(value.style, value.variant, value.weight, value.stretch,\n                       value.size, value.height, value.family);\n    } else if (typeof value === \"string\") {\n      return Font.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): Font | undefined {\n    const header = value.header(\"font\");\n    if (header.isDefined()) {\n      const style = header.get(\"style\").stringValue(null) as FontStyle | null;\n      const variant = header.get(\"variant\").stringValue(null) as FontVariant | null;\n      const weight = header.get(\"weight\").stringValue(null) as FontWeight | null;\n      const stretch = header.get(\"stretch\").stringValue(null) as FontStretch | null;\n      const size = FontSize.fromValue(header.get(\"size\"));\n      const height = LineHeight.fromValue(header.get(\"height\"));\n      const family = FontFamily.fromValue(header.get(\"family\"));\n      if (family !== void 0) {\n        return Font.from(style, variant, weight, stretch, size, height, family);\n      }\n    }\n    return void 0;\n  }\n\n  static parse(string: string): Font {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Font.Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is FontInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as FontInit;\n      return init.family !== void 0;\n    }\n    return false;\n  }\n\n  private static _form?: Form<Font, AnyFont>;\n  static form(unit?: Font): Form<Font, AnyFont> {\n    if (unit !== void 0) {\n      unit = Font.fromAny(unit);\n      return new Font.Form(unit);\n    } else {\n      if (Font._form === void 0) {\n        Font._form = new Font.Form();\n      }\n      return Font._form;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Parser: typeof FontParser; // defined by FontParser\n  /** @hidden */\n  static Form: typeof FontForm; // defined by FontForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Length, LengthParser} from \"@swim/length\";\nimport {FontStyle} from \"./FontStyle\";\nimport {FontVariant} from \"./FontVariant\";\nimport {FontWeight} from \"./FontWeight\";\nimport {FontStretch} from \"./FontStretch\";\nimport {FontSize} from \"./FontSize\";\nimport {LineHeight} from \"./LineHeight\";\nimport {FontFamily} from \"./FontFamily\";\nimport {FontFamilyParser} from \"./FontFamilyParser\";\nimport {Font} from \"./Font\";\n\n/** @hidden */\nexport class FontParser extends Parser<Font> {\n  private readonly style: FontStyle | undefined;\n  private readonly variant: FontVariant | undefined;\n  private readonly weight: FontWeight | undefined;\n  private readonly stretch: FontStretch | undefined;\n  private readonly size: FontSize | undefined;\n  private readonly height: LineHeight | undefined;\n  private readonly family: FontFamily | FontFamily[] | undefined;\n  private readonly identOutput: Output<string> | undefined;\n  private readonly lengthParser: Parser<Length> | undefined;\n  private readonly familyParser: Parser<FontFamily> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(style?: FontStyle, variant?: FontVariant, weight?: FontWeight,\n              stretch?: FontStretch, size?: FontSize, height?: LineHeight,\n              family?: FontFamily | FontFamily[], identOutput?: Output<string>,\n              lengthParser?: Parser<Length>, familyParser?: Parser<FontFamily>,\n              step?: number) {\n    super();\n    this.style = style;\n    this.variant = variant;\n    this.weight = weight;\n    this.stretch = stretch;\n    this.size = size;\n    this.height = height;\n    this.family = family;\n    this.identOutput = identOutput;\n    this.lengthParser = lengthParser;\n    this.familyParser = familyParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<Font> {\n    return FontParser.parse(input, this.style, this.variant, this.weight,\n                            this.stretch, this.size, this.height, this.family,\n                            this.identOutput, this.lengthParser,\n                            this.familyParser, this.step);\n  }\n\n  static parse(input: Input, style?: FontStyle, variant?: FontVariant,\n               weight?: FontWeight, stretch?: FontStretch, size?: FontSize,\n               height?: LineHeight, family?: FontFamily | FontFamily[],\n               identOutput?: Output<string>, lengthParser?: Parser<Length>,\n               familyParser?: Parser<FontFamily>, step: number = 1): Parser<Font> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont()) {\n          if (Unicode.isAlpha(c)) {\n            step = 2;\n          } else if (c === 34/*'\"'*/ || c === 39/*'\\''*/) {\n            step = 11;\n          } else {\n            step = 4;\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 2) {\n        identOutput = identOutput || Unicode.stringOutput();\n        while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 45/*'-'*/)) {\n          input = input.step();\n          identOutput.write(c);\n        }\n        if (!input.isEmpty()) {\n          const ident = identOutput.bind();\n          identOutput = void 0;\n          switch (ident) {\n            case \"italic\":\n            case \"oblique\":\n              if (style === void 0) {\n                style = ident;\n              } else {\n                return Parser.error(Diagnostic.message(\"reapeated font style: \" + ident, input));\n              }\n              step = 3;\n              break;\n            case \"small-caps\":\n              if (variant === void 0) {\n                variant = ident;\n              } else {\n                return Parser.error(Diagnostic.message(\"reapeated font variant: \" + ident, input));\n              }\n              step = 3;\n              break;\n            case \"bold\":\n            case \"bolder\":\n            case \"lighter\":\n              if (weight === void 0) {\n                weight = ident;\n              } else {\n                return Parser.error(Diagnostic.message(\"reapeated font weight: \" + ident, input));\n              }\n              step = 3;\n              break;\n            case \"ultra-condensed\":\n            case \"extra-condensed\":\n            case \"semi-condensed\":\n            case \"condensed\":\n            case \"expanded\":\n            case \"semi-expanded\":\n            case \"extra-expanded\":\n            case \"ultra-expanded\":\n              if (stretch === void 0) {\n                stretch = ident;\n              } else {\n                return Parser.error(Diagnostic.message(\"reapeated font stretch: \" + ident, input));\n              }\n              step = 3;\n              break;\n            case \"normal\":\n              if (style === void 0) {\n                style = ident;\n              } else if (variant === void 0) {\n                variant = ident;\n              } else if (weight === void 0) {\n                weight = ident;\n              } else if (stretch === void 0) {\n                stretch = ident;\n              } else {\n                return Parser.error(Diagnostic.message(\"reapeated font property: \" + ident, input));\n              }\n              step = 3;\n              break;\n            case \"large\":\n            case \"larger\":\n            case \"medium\":\n            case \"small\":\n            case \"smaller\":\n            case \"x-large\":\n            case \"x-small\":\n            case \"xx-large\":\n            case \"xx-small\":\n              size = ident;\n              step = 5;\n              break;\n            default:\n              family = ident;\n              step = 12;\n          }\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          c = input.head();\n          if (Unicode.isSpace(c)) {\n            input.step();\n            step = 1;\n            continue;\n          } else {\n            return Parser.error(Diagnostic.expected(\"font property, size, or family\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 4) {\n        if (lengthParser === void 0) {\n          lengthParser = LengthParser.parse(input);\n        } else {\n          lengthParser = lengthParser.feed(input);\n        }\n        if (lengthParser.isDone()) {\n          const length = lengthParser.bind();\n          if (length.units === \"\") {\n            const value = length.value;\n            switch (value) {\n              case 100:\n              case 200:\n              case 300:\n              case 400:\n              case 500:\n              case 600:\n              case 700:\n              case 800:\n              case 900:\n                if (weight === void 0) {\n                  weight = String(value) as FontWeight;\n                } else {\n                  return Parser.error(Diagnostic.message(\"reapeated font weight: \" + value, input));\n                }\n                break;\n              default:\n                return Parser.error(Diagnostic.message(\"unknown font property: \" + value, input));\n            }\n            step = 3;\n            continue;\n          } else {\n            size = length;\n            lengthParser = void 0;\n            step = 5;\n          }\n        } else if (lengthParser.isError()) {\n          return lengthParser.asError();\n        }\n      }\n      if (step === 5) {\n        if (input.isCont()) {\n          c = input.head();\n          if (Unicode.isSpace(c)) {\n            input.step();\n            step = 6;\n          } else if (c === 47/*'/'*/) {\n            input.step();\n            step = 7;\n          } else {\n            return Parser.error(Diagnostic.expected(\"font family\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 6) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont()) {\n          if (c === 47/*'/'*/) {\n            input.step();\n            step = 7;\n          } else {\n            step = 11;\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 7) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont()) {\n          if (Unicode.isAlpha(c)) {\n            step = 8;\n          } else {\n            step = 9;\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 8) {\n        identOutput = identOutput || Unicode.stringOutput();\n        while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n          input = input.step();\n          identOutput.write(c);\n        }\n        if (!input.isEmpty()) {\n          const ident = identOutput.bind();\n          identOutput = void 0;\n          switch (ident) {\n            case \"normal\":\n              height = ident;\n              step = 10;\n              break;\n            default:\n              return Parser.error(Diagnostic.message(\"unknown line height: \" + ident, input));\n          }\n        }\n      }\n      if (step === 9) {\n        if (lengthParser === void 0) {\n          lengthParser = LengthParser.parse(input);\n        } else {\n          lengthParser = lengthParser.feed(input);\n        }\n        if (lengthParser.isDone()) {\n          height = lengthParser.bind();\n          lengthParser = void 0;\n          step = 10;\n        } else if (lengthParser.isError()) {\n          return lengthParser.asError();\n        }\n      }\n      if (step === 10) {\n        if (input.isCont()) {\n          c = input.head();\n          if (Unicode.isSpace(c)) {\n            input.step();\n            step = 11;\n          } else {\n            return Parser.error(Diagnostic.expected(\"font family\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 11) {\n        if (familyParser === void 0) {\n          familyParser = FontFamilyParser.parse(input);\n        } else {\n          familyParser = familyParser.feed(input);\n        }\n        if (familyParser.isDone()) {\n          if (Array.isArray(family)) {\n            family.push(familyParser.bind());\n          } else if (family !== void 0) {\n            family = [family!, familyParser.bind()];\n          } else {\n            family = familyParser.bind();\n          }\n          familyParser = void 0;\n          step = 12;\n        } else if (familyParser.isError()) {\n          return familyParser.asError();\n        }\n      }\n      if (step === 12) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont() && c === 44/*','*/) {\n          input.step();\n          step = 11;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.done(Font.from(style, variant, weight, stretch, size, height, family!));\n        }\n      }\n      break;\n    } while (true);\n    return new FontParser(style, variant, weight, stretch, size, height, family,\n                          identOutput, lengthParser, familyParser, step);\n  }\n\n  static parseRest(input: Input, style?: FontStyle, variant?: FontVariant,\n                   weight?: FontWeight, stretch?: FontStretch, size?: FontSize,\n                   height?: LineHeight, family?: FontFamily | FontFamily[]): Parser<Font> {\n    const step = family !== void 0 ? 12 : size !== void 0 ? 5 : 3;\n    return FontParser.parse(input, style, variant, weight, stretch, size, height,\n                            family, void 0, void 0, void 0, step);\n  }\n}\nFont.Parser = FontParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Attr, Record, Form} from \"@swim/structure\";\nimport {Length} from \"@swim/length\";\nimport {AnyFont, Font} from \"./Font\";\n\n/** @hidden */\nexport class FontForm extends Form<Font, AnyFont> {\n  private readonly _unit: Font | undefined;\n\n  constructor(unit?: Font) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Font | undefined;\n  unit(unit: Font | undefined): Form<Font, AnyFont>;\n  unit(unit?: Font): Font | undefined | Form<Font, AnyFont> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new FontForm(unit);\n    }\n  }\n\n  mold(font: AnyFont): Item {\n    font = Font.fromAny(font);\n    const header = Record.create(7);\n    if (font._style !== null) {\n      header.slot(\"style\", font._style);\n    }\n    if (font._variant !== null) {\n      header.slot(\"variant\", font._variant);\n    }\n    if (font._weight !== null) {\n      header.slot(\"weight\", font._weight);\n    }\n    if (font._stretch !== null) {\n      header.slot(\"stretch\", font._stretch);\n    }\n    if (font._size instanceof Length) {\n      header.slot(\"size\", Length.form().mold(font._size));\n    } else if (font._size !== null) {\n      header.slot(\"size\", font._size);\n    }\n    if (font._height instanceof Length) {\n      header.slot(\"height\", Length.form().mold(font._height));\n    } else if (font._height !== null) {\n      header.slot(\"height\", font._height);\n    }\n    if (Array.isArray(font._family)) {\n      const family = Record.create(font._family.length);\n      for (let i = 0; i < font._family.length; i += 1) {\n        family.push(font._family[i]);\n      }\n      header.slot(\"family\", family);\n    } else {\n      header.slot(\"family\", font._family);\n    }\n    return Record.of(Attr.of(\"font\", header));\n  }\n\n  cast(item: Item): Font | undefined {\n    const value = item.toValue();\n    let font: Font | undefined;\n    try {\n      font = Font.fromValue(value);\n      if (font === void 0) {\n        const string = value.stringValue();\n        if (string !== void 0) {\n          font = Font.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return font;\n  }\n}\nFont.Form = FontForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals, Objects} from \"@swim/util\";\nimport {Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Value, Text, Form} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {BoxShadowParser} from \"./BoxShadowParser\";\nimport {BoxShadowForm} from \"./BoxShadowForm\";\n\nexport type AnyBoxShadow = BoxShadow | BoxShadowInit | string | BoxShadowArray;\n\nexport type BoxShadowArray = {[index: number]: BoxShadow | BoxShadowInit | string, length: number};\n\nexport interface BoxShadowInit {\n  offsetX?: AnyLength;\n  offsetY?: AnyLength;\n  blurRadius?: AnyLength;\n  spreadRadius?: AnyLength;\n  color?: AnyColor;\n  inset?: boolean;\n}\n\nexport class BoxShadow implements Equals {\n  readonly inset: boolean;\n  readonly offsetX: Length;\n  readonly offsetY: Length;\n  readonly blurRadius: Length;\n  readonly spreadRadius: Length;\n  readonly color: Color;\n  readonly next: BoxShadow | null;\n\n  constructor(inset: boolean, offsetX: Length, offsetY: Length, blurRadius: Length,\n              spreadRadius: Length, color: Color, next: BoxShadow | null) {\n    this.inset = inset;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.blurRadius = blurRadius;\n    this.spreadRadius = spreadRadius;\n    this.color = color;\n    this.next = next;\n  }\n\n  isDefined(): boolean {\n    return this.inset || this.offsetX.isDefined() || this.offsetY.isDefined()\n        || this.blurRadius.isDefined() || this.spreadRadius.isDefined()\n        || this.color.isDefined() || (this.next !== null ? this.next.isDefined() : false);\n  }\n\n  and(value: AnyBoxShadow): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  and(inset: AnyBoxShadow | AnyLength | boolean, offsetX?: AnyLength, offsetY?: AnyColor | AnyLength, blurRadius?: AnyColor | AnyLength, spreadRadius?: AnyColor | AnyLength, color?: AnyColor): BoxShadow {\n    const next = this.next !== null ? this.next.and.apply(this.next, arguments) : BoxShadow.of.apply(null, arguments);\n    return new BoxShadow(this.inset, this.offsetX, this.offsetY, this.blurRadius,\n                         this.spreadRadius, this.color, next);\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof BoxShadow) {\n      return this.inset === that.inset && this.offsetX.equals(that.offsetX)\n          && this.offsetY.equals(that.offsetY) && this.blurRadius.equals(that.blurRadius)\n          && this.spreadRadius.equals(that.spreadRadius) && this.color.equals(that.color)\n          && Objects.equal(this.next, that.next);\n    }\n    return false;\n  }\n\n  toString(): string {\n    if (this.isDefined()) {\n      let s = \"\";\n      let boxShadow = this as BoxShadow;\n      do {\n        if (boxShadow.inset) {\n          s += \"inset\";\n          s += \" \";\n        }\n        s += boxShadow.offsetX.toString();\n        s += \" \";\n        s += boxShadow.offsetY.toString();\n        s += \" \";\n        s += boxShadow.blurRadius.toString();\n        s += \" \";\n        s += boxShadow.spreadRadius.toString();\n        s += \" \";\n        s += boxShadow.color.toString();\n        if (boxShadow.next !== null) {\n          s += \", \";\n          boxShadow = boxShadow.next;\n          continue;\n        }\n        break;\n      } while (true);\n      return s;\n    } else {\n      return \"none\";\n    }\n  }\n\n  private static _none?: BoxShadow;\n  static none(): BoxShadow {\n    if (BoxShadow._none === void 0) {\n      BoxShadow._none = new BoxShadow(false, Length.zero(), Length.zero(), Length.zero(), Length.zero(), Color.black(), null);\n    }\n    return BoxShadow._none;\n  }\n\n  static of(value: AnyBoxShadow): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: boolean, offsetX: AnyLength, offsetY: AnyLength, blurRadius: AnyLength, spreadRadius: AnyLength, color: AnyColor): BoxShadow;\n  static of(inset: AnyBoxShadow | AnyLength | boolean, offsetX?: AnyLength, offsetY?: AnyColor | AnyLength, blurRadius?: AnyColor | AnyLength, spreadRadius?: AnyColor | AnyLength, color?: AnyColor): BoxShadow {\n    if (arguments.length === 1) {\n      return BoxShadow.fromAny(arguments[0]);\n    } else if (typeof inset !== \"boolean\") {\n      if (arguments.length === 3) {\n        color = Color.fromAny(arguments[2]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.zero();\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else if (arguments.length === 4) {\n        color = Color.fromAny(arguments[3]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.fromAny(arguments[2]);\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else if (arguments.length === 5) {\n        color = Color.fromAny(arguments[4]);\n        spreadRadius = Length.fromAny(arguments[3]);\n        blurRadius = Length.fromAny(arguments[2]);\n        offsetY = Length.fromAny(arguments[1]);\n        offsetX = Length.fromAny(arguments[0]);\n      } else {\n        throw new TypeError(\"\" + arguments);\n      }\n      inset = false;\n    } else {\n      if (arguments.length === 4) {\n        color = Color.fromAny(arguments[3]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.zero();\n        offsetX = Length.fromAny(arguments[1]);\n        offsetY = Length.fromAny(arguments[2]);\n      } else if (arguments.length === 5) {\n        color = Color.fromAny(arguments[4]);\n        spreadRadius = Length.zero();\n        blurRadius = Length.fromAny(arguments[3]);\n        offsetX = Length.fromAny(arguments[1]);\n        offsetY = Length.fromAny(arguments[2]);\n      } else if (arguments.length === 6) {\n        color = Color.fromAny(arguments[5]);\n        spreadRadius = Length.fromAny(arguments[4]);\n        blurRadius = Length.fromAny(arguments[3]);\n        offsetY = Length.fromAny(arguments[2]);\n        offsetX = Length.fromAny(arguments[1]);\n      } else {\n        throw new TypeError(\"\" + arguments);\n      }\n    }\n    return new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n  }\n\n  static fromAny(...values: AnyBoxShadow[]): BoxShadow {\n    let value: AnyBoxShadow;\n    if (arguments.length === 0) {\n      value = BoxShadow.none();\n    } else if (arguments.length === 1) {\n      value = arguments[0];\n    } else {\n      value = arguments;\n    }\n    if (value instanceof BoxShadow) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return BoxShadow.parse(value);\n    } else if (typeof value === \"object\" && value !== null && (value as any).length === void 0) {\n      value = value as BoxShadowInit;\n      const inset = value.inset || false;\n      const offsetX = value.offsetX !== void 0 ? Length.fromAny(value.offsetX) : Length.zero();\n      const offsetY = value.offsetY !== void 0 ? Length.fromAny(value.offsetY) : Length.zero();\n      const blurRadius = value.blurRadius !== void 0 ? Length.fromAny(value.blurRadius) : Length.zero();\n      const spreadRadius = value.spreadRadius !== void 0 ? Length.fromAny(value.spreadRadius) : Length.zero();\n      const color = value.color !== void 0 ? Color.fromAny(value.color) : Color.black();\n      return new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n    } else if (typeof value === \"object\" && value !== null && (value as any).length > 0) {\n      value = value as BoxShadowArray;\n      let boxShadow = BoxShadow.fromAny(value[0]);\n      for (let i = 1; i < value.length; i += 1) {\n        boxShadow = boxShadow.and(value[i]);\n      }\n      return boxShadow;\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): BoxShadow | undefined {\n    let boxShadow: BoxShadow | undefined;\n    value.forEach(function (item: Item, index: number) {\n      const header = item.header(\"boxShadow\");\n      if (header.isDefined()) {\n        let inset: boolean | undefined;\n        let offsetX: Length | undefined;\n        let offsetY: Length | undefined;\n        let blurRadius: Length | undefined;\n        let spreadRadius: Length | undefined;\n        let color: Color | undefined;\n        header.forEach(function (item: Item, index: number): void {\n          const key = item.key.stringValue();\n          if (key !== void 0) {\n            if (key === \"inset\") {\n              inset = item.toValue().booleanValue(inset);\n            } else if (key === \"offsetX\") {\n              offsetX = item.toValue().cast(Length.form(), offsetX);\n            } else if (key === \"offsetY\") {\n              offsetY = item.toValue().cast(Length.form(), offsetY);\n            } else if (key === \"blurRadius\") {\n              blurRadius = item.toValue().cast(Length.form(), blurRadius);\n            } else if (key === \"spreadRadius\") {\n              spreadRadius = item.toValue().cast(Length.form(), spreadRadius);\n            } else if (key === \"color\") {\n              color = item.toValue().cast(Color.form(), color);\n            }\n          } else if (item instanceof Value) {\n            if (index === 0 && item instanceof Text && item.value === \"inset\") {\n              inset = true;\n            } else if (index === 0 || index === 1 && inset !== void 0) {\n              offsetX = item.cast(Length.form(), offsetX);\n            } else if (index === 1 || index === 2 && inset !== void 0) {\n              offsetY = item.cast(Length.form(), offsetY);\n            } else if (index === 2 || index === 3 && inset !== void 0) {\n              blurRadius = item.cast(Length.form(), blurRadius);\n              if (blurRadius === void 0) {\n                color = item.cast(Color.form(), color);\n              }\n            } else if ((index === 3 || index === 4 && inset === void 0) && color === void 0) {\n              spreadRadius = item.cast(Length.form(), spreadRadius);\n              if (spreadRadius === void 0) {\n                color = item.cast(Color.form(), color);\n              }\n            } else if ((index === 4 || index === 5 && inset === void 0) && color === void 0) {\n              color = item.cast(Color.form(), color);\n            }\n          }\n        });\n        inset = inset !== void 0 ? inset : false;\n        offsetX = offsetX !== void 0 ? offsetX : Length.zero();\n        offsetY = offsetY !== void 0 ? offsetY : Length.zero();\n        blurRadius = blurRadius !== void 0 ? blurRadius : Length.zero();\n        spreadRadius = spreadRadius !== void 0 ? spreadRadius : Length.zero();\n        color = color !== void 0 ? color : Color.black();\n        const next = new BoxShadow(inset || false, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n        if (boxShadow !== void 0) {\n          boxShadow = boxShadow.and(next);\n        } else {\n          boxShadow = next;\n        }\n      }\n    });\n    return boxShadow;\n  }\n\n  static parse(string: string): BoxShadow {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = BoxShadow.Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is BoxShadowInit {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as BoxShadowInit;\n      return init.offsetX !== void 0 && init.offsetY !== void 0 && init.color !== void 0;\n    }\n    return false;\n  }\n\n  private static _form?: Form<BoxShadow, AnyBoxShadow>;\n  static form(unit?: BoxShadow): Form<BoxShadow, AnyBoxShadow> {\n    if (unit !== void 0) {\n      unit = BoxShadow.fromAny(unit);\n    }\n    if (unit !== BoxShadow.none()) {\n      return new BoxShadow.Form(unit);\n    } else {\n      if (BoxShadow._form === void 0) {\n        BoxShadow._form = new BoxShadow.Form(BoxShadow.none());\n      }\n      return BoxShadow._form;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Parser: typeof BoxShadowParser; // defined by BoxShadowParser\n  /** @hidden */\n  static Form: typeof BoxShadowForm; // defined by BoxShadowForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Length, LengthParser} from \"@swim/length\";\nimport {Color, ColorParser} from \"@swim/color\";\nimport {BoxShadow} from \"./BoxShadow\";\n\n/** @hidden */\nexport class BoxShadowParser extends Parser<BoxShadow> {\n  private readonly boxShadow: BoxShadow | undefined;\n  private readonly identOutput: Output<string> | undefined;\n  private readonly offsetXParser: Parser<Length> | undefined;\n  private readonly offsetYParser: Parser<Length> | undefined;\n  private readonly blurRadiusParser: Parser<Length> | undefined;\n  private readonly spreadRadiusParser: Parser<Length> | undefined;\n  private readonly colorParser: Parser<Color> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(boxShadow?: BoxShadow, identOutput?: Output<string>,\n              offsetXParser?: Parser<Length>, offsetYParser?: Parser<Length>,\n              blurRadiusParser?: Parser<Length>, spreadRadiusParser?: Parser<Length>,\n              colorParser?: Parser<Color>, step?: number) {\n    super();\n    this.boxShadow = boxShadow;\n    this.identOutput = identOutput;\n    this.offsetXParser = offsetXParser;\n    this.offsetYParser = offsetYParser;\n    this.blurRadiusParser = blurRadiusParser;\n    this.spreadRadiusParser = spreadRadiusParser;\n    this.colorParser = colorParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<BoxShadow> {\n    return BoxShadowParser.parse(input, this.boxShadow, this.identOutput, this.offsetXParser,\n                                 this.offsetYParser, this.blurRadiusParser, this.spreadRadiusParser,\n                                 this.colorParser, this.step);\n  }\n\n  static parse(input: Input, boxShadow?: BoxShadow, identOutput?: Output<string>,\n               offsetXParser?: Parser<Length>, offsetYParser?: Parser<Length>,\n               blurRadiusParser?: Parser<Length>, spreadRadiusParser?: Parser<Length>,\n               colorParser?: Parser<Color>, step: number = 1): Parser<BoxShadow> {\n    let c = 0;\n    do {\n      if (step === 1) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont()) {\n          if (Unicode.isAlpha(c)) {\n            step = 2;\n          } else {\n            step = 4;\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 2) {\n        identOutput = identOutput || Unicode.stringOutput();\n        while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n          input = input.step();\n          identOutput.write(c);\n        }\n        if (!input.isEmpty()) {\n          const ident = identOutput.bind();\n          switch (ident) {\n            case \"inset\": step = 3; break;\n            case \"none\": return Parser.done(BoxShadow.none());\n            default: return Parser.error(Diagnostic.message(\"unknown box-shadow: \" + ident, input));\n          }\n        }\n      }\n      if (step === 3) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 4;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 4) {\n        if (offsetXParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            offsetXParser = LengthParser.parse(input);\n          }\n        } else {\n          offsetXParser = offsetXParser.feed(input);\n        }\n        if (offsetXParser !== void 0) {\n          if (offsetXParser.isDone()) {\n            step = 5;\n          } else if (offsetXParser.isError()) {\n            return offsetXParser.asError();\n          }\n        }\n      }\n      if (step === 5) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 6;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 6) {\n        if (offsetYParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            offsetYParser = LengthParser.parse(input);\n          }\n        } else {\n          offsetYParser = offsetYParser.feed(input);\n        }\n        if (offsetYParser !== void 0) {\n          if (offsetYParser.isDone()) {\n            step = 7;\n          } else if (offsetYParser.isError()) {\n            return offsetYParser.asError();\n          }\n        }\n      }\n      if (step === 7) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 8;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 8) {\n        if (blurRadiusParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input.step();\n          }\n          if (input.isCont() && (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n            blurRadiusParser = LengthParser.parse(input);\n          } else if (!input.isEmpty()) {\n            step = 12;\n          }\n        } else {\n          blurRadiusParser = blurRadiusParser.feed(input);\n        }\n        if (blurRadiusParser !== void 0) {\n          if (blurRadiusParser.isDone()) {\n            step = 9;\n          } else if (blurRadiusParser.isError()) {\n            return blurRadiusParser.asError();\n          }\n        }\n      }\n      if (step === 9) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 10;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 10) {\n        if (spreadRadiusParser === void 0) {\n          while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n            input.step();\n          }\n          if (input.isCont() && (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n            spreadRadiusParser = LengthParser.parse(input);\n          } else if (!input.isEmpty()) {\n            step = 12;\n          }\n        } else {\n          spreadRadiusParser = spreadRadiusParser.feed(input);\n        }\n        if (spreadRadiusParser !== void 0) {\n          if (spreadRadiusParser.isDone()) {\n            step = 11;\n          } else if (spreadRadiusParser.isError()) {\n            return spreadRadiusParser.asError();\n          }\n        }\n      }\n      if (step === 11) {\n        if (input.isCont()) {\n          if (Unicode.isSpace(input.head())) {\n            input.step();\n            step = 12;\n          } else {\n            return Parser.error(Diagnostic.expected(\"space\", input));\n          }\n        } else if (!input.isEmpty()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      if (step === 12) {\n        if (colorParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            colorParser = ColorParser.parse(input);\n          }\n        } else {\n          colorParser = colorParser.feed(input);\n        }\n        if (colorParser !== void 0) {\n          if (colorParser.isDone()) {\n            const inset = identOutput !== void 0 ? identOutput.bind() === \"inset\" : false;\n            const offsetX = offsetXParser!.bind();\n            const offsetY = offsetYParser!.bind();\n            const blurRadius = blurRadiusParser !== void 0 ? blurRadiusParser.bind() : Length.zero();\n            const spreadRadius = spreadRadiusParser !== void 0 ? spreadRadiusParser.bind() : Length.zero();\n            const color = colorParser!.bind();\n            const next = new BoxShadow(inset, offsetX, offsetY, blurRadius, spreadRadius, color, null);\n            if (boxShadow === void 0) {\n              boxShadow = next;\n            } else {\n              boxShadow = boxShadow.and(next);\n            }\n            identOutput = void 0;\n            offsetXParser = void 0;\n            offsetYParser = void 0;\n            blurRadiusParser = void 0;\n            spreadRadiusParser = void 0;\n            colorParser = void 0;\n            step = 13;\n          } else if (colorParser.isError()) {\n            return colorParser.asError();\n          }\n        }\n      }\n      if (step === 13) {\n        while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n          input.step();\n        }\n        if (input.isCont() && c === 44/*','*/) {\n          input.step();\n          step = 1;\n          continue;\n        } else if (!input.isEmpty()) {\n          return Parser.done(boxShadow!);\n        }\n      }\n      break;\n    } while (true);\n    return new BoxShadowParser(boxShadow, identOutput, offsetXParser, offsetYParser,\n                               blurRadiusParser, spreadRadiusParser, colorParser, step);\n  }\n}\nBoxShadow.Parser = BoxShadowParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Record, Form} from \"@swim/structure\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {AnyBoxShadow, BoxShadow} from \"./BoxShadow\";\n\n/** @hidden */\nexport class BoxShadowForm extends Form<BoxShadow, AnyBoxShadow> {\n  private readonly _unit: BoxShadow | undefined;\n\n  constructor(unit?: BoxShadow) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): BoxShadow | undefined;\n  unit(unit: BoxShadow | undefined): Form<BoxShadow, AnyBoxShadow>;\n  unit(unit?: BoxShadow): BoxShadow | undefined | Form<BoxShadow, AnyBoxShadow> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new BoxShadowForm(unit);\n    }\n  }\n\n  mold(boxShadow: AnyBoxShadow): Item {\n    let shadow = BoxShadow.fromAny(boxShadow) as BoxShadow;\n    const record = Record.create();\n    do {\n      const header = Record.create(5);\n      if (shadow.inset) {\n        header.push(\"inset\");\n      }\n      header.push(Length.form().mold(shadow.offsetX));\n      header.push(Length.form().mold(shadow.offsetY));\n      header.push(Length.form().mold(shadow.blurRadius));\n      header.push(Length.form().mold(shadow.spreadRadius));\n      header.push(Color.form().mold(shadow.color));\n      record.attr(\"boxShadow\", header);\n      if (shadow.next !== null) {\n        shadow = shadow.next;\n        continue;\n      }\n      break;\n    } while (true);\n    return record;\n  }\n\n  cast(item: Item): BoxShadow | undefined {\n    const value = item.toValue();\n    let boxShadow: BoxShadow | undefined;\n    try {\n      boxShadow = BoxShadow.fromValue(value);\n      if (boxShadow === void 0) {\n        const string = value.stringValue();\n        if (string !== void 0) {\n          boxShadow = BoxShadow.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return boxShadow;\n  }\n}\nBoxShadow.Form = BoxShadowForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HashCode} from \"@swim/util\";\nimport {Output, Parser, Debug, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Value, Form} from \"@swim/structure\";\nimport {R2Operator} from \"@swim/math\";\nimport {AnyAngle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {IdentityTransform} from \"./IdentityTransform\";\nimport {TranslateTransform} from \"./TranslateTransform\";\nimport {ScaleTransform} from \"./ScaleTransform\";\nimport {RotateTransform} from \"./RotateTransform\";\nimport {SkewTransform} from \"./SkewTransform\";\nimport {AffineTransform} from \"./AffineTransform\";\nimport {TransformList} from \"./TransformList\";\nimport {TranslateTransformParser} from \"./TranslateTransformParser\";\nimport {ScaleTransformParser} from \"./ScaleTransformParser\";\nimport {RotateTransformParser} from \"./RotateTransformParser\";\nimport {SkewTransformParser} from \"./SkewTransformParser\";\nimport {AffineTransformParser} from \"./AffineTransformParser\";\nimport {TransformListParser} from \"./TransformListParser\";\nimport {TransformParser} from \"./TransformParser\";\nimport {TransformForm} from \"./TransformForm\";\n\nexport type AnyTransform = Transform | string;\n\nexport interface Transformation {\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n}\n\nexport abstract class Transform implements Transformation, R2Operator, HashCode, Debug {\n  abstract transform(that: Transform): Transform;\n  abstract transform(point: [number, number]): [number, number];\n  abstract transform(x: number, y: number): [number, number];\n  abstract transform(point: [AnyLength, AnyLength]): [Length, Length];\n  abstract transform(x: AnyLength, y: AnyLength): [Length, Length];\n\n  abstract transformX(x: number, y: number): number;\n\n  abstract transformY(x: number, y: number): number;\n\n  abstract inverse(): Transform;\n\n  translate(x: AnyLength, y: AnyLength): Transform {\n    return this.transform(Transform.translate(x, y));\n  }\n\n  translateX(x: AnyLength): Transform {\n    return this.transform(Transform.translateX(x));\n  }\n\n  translateY(y: AnyLength): Transform {\n    return this.transform(Transform.translateY(y));\n  }\n\n  scale(x: string | number, y: string | number): Transform {\n    return this.transform(Transform.scale(x, y));\n  }\n\n  scaleX(x: string | number): Transform {\n    return this.transform(Transform.scaleX(x));\n  }\n\n  scaleY(y: string | number): Transform {\n    return this.transform(Transform.scaleY(y));\n  }\n\n  rotate(a: AnyAngle): Transform {\n    return this.transform(Transform.rotate(a));\n  }\n\n  skew(x: AnyAngle, y: AnyAngle): Transform {\n    return this.transform(Transform.skew(x, y));\n  }\n\n  skewX(x: AnyAngle): Transform {\n    return this.transform(Transform.skewX(x));\n  }\n\n  skewY(y: AnyAngle): Transform {\n    return this.transform(Transform.skewY(y));\n  }\n\n  abstract toAffine(): AffineTransform;\n\n  abstract toValue(): Value;\n\n  abstract conformsTo(that: Transform): boolean;\n\n  abstract equals(that: Transform): boolean;\n\n  abstract hashCode(): number;\n\n  abstract debug(output: Output): void;\n\n  abstract toString(): string;\n\n  toAttributeString(): string {\n    return this.toString();\n  }\n\n  private static _identity?: IdentityTransform;\n  static identity(): IdentityTransform {\n    if (Transform._identity === void 0) {\n      Transform._identity = new Transform.Identity();\n    }\n    return Transform._identity;\n  }\n\n  static translate(x: AnyLength, y: AnyLength): TranslateTransform {\n    return Transform.Translate.from(x, y);\n  }\n\n  static translateX(x: AnyLength): TranslateTransform {\n    return Transform.Translate.from(x, 0);\n  }\n\n  static translateY(y: AnyLength): TranslateTransform {\n    return Transform.Translate.from(0, y);\n  }\n\n  static scale(x: string | number, y: string | number): ScaleTransform {\n    return Transform.Scale.from(x, y);\n  }\n\n  static scaleX(x: string | number): ScaleTransform {\n    return Transform.Scale.from(x, 1);\n  }\n\n  static scaleY(y: string | number): ScaleTransform {\n    return Transform.Scale.from(1, y);\n  }\n\n  static rotate(a: AnyAngle): RotateTransform {\n    return Transform.Rotate.from(a);\n  }\n\n  static skew(x: AnyAngle, y: AnyAngle): SkewTransform {\n    return Transform.Skew.from(x, y);\n  }\n\n  static skewX(x: AnyAngle): SkewTransform {\n    return Transform.Skew.from(x, 0);\n  }\n\n  static skewY(y: AnyAngle): SkewTransform {\n    return Transform.Skew.from(0, y);\n  }\n\n  static affine(x0?: string | number, y0?: string | number,\n                x1?: string | number, y1?: string | number,\n                tx?: string | number, ty?: string | number): AffineTransform {\n    return Transform.Affine.from(x0, y0, x1, y1, tx, ty);\n  }\n\n  static list(...transforms: AnyTransform[]): TransformList {\n    return Transform.List.from(transforms);\n  }\n\n  static fromAny(value: AnyTransform): Transform {\n    if (value instanceof Transform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return Transform.parse(value);\n    } else {\n      throw new TypeError(\"\" + value);\n    }\n  }\n\n  static fromValue(value: Value): Transform | undefined {\n    const tag = value.tag();\n    switch (tag) {\n      case \"identity\": return Transform.Identity.fromValue(value);\n      case \"translate\": return Transform.Translate.fromValue(value);\n      case \"scale\": return Transform.Scale.fromValue(value);\n      case \"rotate\": return Transform.Rotate.fromValue(value);\n      case \"skew\": return Transform.Skew.fromValue(value);\n      case \"matrix\": return Transform.Affine.fromValue(value);\n      default: return Transform.List.fromValue(value);\n    }\n  }\n\n  static parse(string: string): Transform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.ListParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyTransform {\n    return value instanceof Transform\n        || typeof value === \"string\";\n  }\n\n  private static _form?: Form<Transform, AnyTransform>;\n  static form(unit?: AnyTransform): Form<Transform, AnyTransform> {\n    if (unit !== void 0) {\n      return new Transform.Form(Transform.fromAny(unit));\n    } else {\n      if (Transform._form === void 0) {\n        Transform._form = new Transform.Form();\n      }\n      return Transform._form;\n    }\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Identity: typeof IdentityTransform; // defined by IdentityTransform\n  /** @hidden */\n  static Translate: typeof TranslateTransform; // defined by TranslateTransform\n  /** @hidden */\n  static Scale: typeof ScaleTransform; // defined by ScaleTransform\n  /** @hidden */\n  static Rotate: typeof RotateTransform; // defined by RotateTransform\n  /** @hidden */\n  static Skew: typeof SkewTransform; // defined by SkewTransform\n  /** @hidden */\n  static Affine: typeof AffineTransform; // defined by AffineTransform\n  /** @hidden */\n  static List: typeof TransformList; // defined by TransformList\n  /** @hidden */\n  static TranslateParser: typeof TranslateTransformParser; // defined by TranslateTransformParser\n  /** @hidden */\n  static ScaleParser: typeof ScaleTransformParser; // defined by ScaleTransformParser\n  /** @hidden */\n  static RotateParser: typeof RotateTransformParser; // defined by RotateTransformParser\n  /** @hidden */\n  static SkewParser: typeof SkewTransformParser; // defined by SkewTransformParser\n  /** @hidden */\n  static AffineParser: typeof AffineTransformParser; // defined by AffineTransformParser\n  /** @hidden */\n  static ListParser: typeof TransformListParser; // defined by TransformListParser\n  /** @hidden */\n  static Parser: typeof TransformParser; // defined by TransformParser\n  /** @hidden */\n  static Form: typeof TransformForm; // defined by TransformForm\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {Attr, Value, Record} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class IdentityTransform extends Transform {\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      return x;\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x, y];\n      } else {\n        x = Length.fromAny(x);\n        y = Length.fromAny(y!);\n        return [x, y];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x;\n  }\n\n  transformY(x: number, y: number): number {\n    return y;\n  }\n\n  inverse(): Transform {\n    return this;\n  }\n\n  toAffine(): AffineTransform {\n    return new Transform.Affine(1, 0, 0, 1, 0, 0);\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"identity\"));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof IdentityTransform;\n  }\n\n  equals(that: Transform): boolean {\n    return that instanceof IdentityTransform;\n  }\n\n  hashCode(): number {\n    if (IdentityTransform._hashSeed === void 0) {\n      IdentityTransform._hashSeed = Murmur3.seed(IdentityTransform);\n    }\n    return IdentityTransform._hashSeed;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"identity\")\n        .write(40/*'('*/).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return \"none\";\n  }\n\n  private static _hashSeed?: number;\n\n  static fromValue(value: Value): IdentityTransform | undefined {\n    if (value.tag() === \"identity\") {\n      return Transform.identity();\n    }\n    return void 0;\n  }\n}\nTransform.Identity = IdentityTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Attr, Slot, Value, Record} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class TranslateTransform extends Transform {\n  /** @hidden */\n  readonly _x: Length;\n  /** @hidden */\n  readonly _y: Length;\n\n  constructor(x: Length, y: Length) {\n    super();\n    this._x = x;\n    this._y = y;\n  }\n\n  get x(): Length {\n    return this._x;\n  }\n\n  get y(): Length {\n    return this._y;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else if (x instanceof TranslateTransform) {\n        return new TranslateTransform(this._x.plus(x._x), this._y.plus(x._y));\n      } else {\n        return new Transform.List([this, x]);\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x + this._x.pxValue(), y + this._y.pxValue()];\n      } else {\n        x = Length.fromAny(x);\n        y = Length.fromAny(y!);\n        return [x.plus(this._x), y.plus(this._y)];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x + this._x.pxValue();\n  }\n\n  transformY(x: number, y: number): number {\n    return y + this._y.pxValue();\n  }\n\n  inverse(): Transform {\n    return new TranslateTransform(this._x.opposite(), this._y.opposite());\n  }\n\n  toAffine(): AffineTransform {\n    return new Transform.Affine(1, 0, 0, 1, this._x.pxValue(), this._y.pxValue());\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"translate\", Record.of(Slot.of(\"x\", this._x.toString()),\n                                                    Slot.of(\"y\", this._y.toString()))));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof TranslateTransform;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof TranslateTransform) {\n      return this._x.equals(that._x) && this._y.equals(that._y);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (TranslateTransform._hashSeed === void 0) {\n      TranslateTransform._hashSeed = Murmur3.seed(TranslateTransform);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(TranslateTransform._hashSeed,\n        this._x.hashCode()), this._y.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"translate\");\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this._x).write(41/*')'*/);\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this._y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this._x).write(\", \").debug(this._y).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      return \"translate(\" + this._x + \",0)\";\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      return \"translate(0,\" + this._y + \")\";\n    } else {\n      return \"translate(\" + this._x + \",\" + this._y + \")\";\n    }\n  }\n\n  toAttributeString(): string {\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      return \"translate(\" + this._x.pxValue() + \",0)\";\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      return \"translate(0,\" + this._y.pxValue() + \")\";\n    } else {\n      return \"translate(\" + this._x.pxValue() + \",\" + this._y.pxValue() + \")\";\n    }\n  }\n\n  private static _hashSeed?: number;\n\n  static from(x: AnyLength, y: AnyLength): TranslateTransform {\n    x = Length.fromAny(x);\n    y = Length.fromAny(y);\n    return new TranslateTransform(x, y);\n  }\n\n  static fromAny(value: TranslateTransform | string): TranslateTransform {\n    if (value instanceof TranslateTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return TranslateTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): TranslateTransform | undefined {\n    const header = value.header(\"translate\");\n    if (header.isDefined()) {\n      let x = Length.zero();\n      let y = Length.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().cast(Length.form(), x);\n          } else if (key === \"y\") {\n            y = item.toValue().cast(Length.form(), y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.cast(Length.form(), x);\n          } else if (index === 1) {\n            y = item.cast(Length.form(), y);\n          }\n        }\n      }, this);\n      return new TranslateTransform(x, y);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): TranslateTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.TranslateParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\nTransform.Translate = TranslateTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Attr, Slot, Value, Record} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class ScaleTransform extends Transform {\n  /** @hidden */\n  readonly _x: number;\n  /** @hidden */\n  readonly _y: number;\n\n  constructor(x: number, y: number) {\n    super();\n    this._x = x;\n    this._y = y;\n  }\n\n  get x(): number {\n    return this._x;\n  }\n\n  get y(): number {\n    return this._y;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else {\n        return new Transform.List([this, x]);\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x * this._x, y * this._y];\n      } else {\n        x = Length.fromAny(x);\n        y = Length.fromAny(y!);\n        return [x.times(this._x), y.times(this._y)];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x * this._x;\n  }\n\n  transformY(x: number, y: number): number {\n    return y * this._y;\n  }\n\n  inverse(): Transform {\n    return new ScaleTransform(1 / (this._x || 1), 1 / (this._y || 1));\n  }\n\n  toAffine(): AffineTransform {\n    return new Transform.Affine(this._x, 0, 0, this._y, 0, 0);\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"scale\", Record.of(Slot.of(\"x\", this._x),\n                                                Slot.of(\"y\", this._y))));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof ScaleTransform;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof ScaleTransform) {\n      return this._x === that._x && this._y === that._y;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (ScaleTransform._hashSeed === void 0) {\n      ScaleTransform._hashSeed = Murmur3.seed(ScaleTransform);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(ScaleTransform._hashSeed,\n        Murmur3.hash(this._x)), Murmur3.hash(this._y)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"scale\");\n    if (this._x !== 0 && this._y === 0) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this._x).write(41/*')'*/);\n    } else if (this._x === 0 && this._y !== 0) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this._y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this._x).write(\", \").debug(this._y).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    if (this._x !== 0 && this._y === 0) {\n      return \"scaleX(\" + this._x + \")\";\n    } else if (this._x === 0 && this._y !== 0) {\n      return \"scaleY(\" + this._y + \")\";\n    } else {\n      return \"scale(\" + this._x + \",\" + this._y + \")\";\n    }\n  }\n\n  private static _hashSeed?: number;\n\n  static from(x: string | number, y: string | number): ScaleTransform {\n    x = +x;\n    y = +y;\n    return new ScaleTransform(x, y);\n  }\n\n  static fromAny(value: ScaleTransform | string): ScaleTransform {\n    if (value instanceof ScaleTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return ScaleTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): ScaleTransform | undefined {\n    const header = value.header(\"scale\");\n    if (header.isDefined()) {\n      let x = 0;\n      let y = 0;\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().numberValue(x);\n          } else if (key === \"y\") {\n            y = item.toValue().numberValue(y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.numberValue(x);\n          } else if (index === 1) {\n            y = item.numberValue(y);\n          }\n        }\n      }, this);\n      return new ScaleTransform(x, y);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): ScaleTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.ScaleParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\nTransform.Scale = ScaleTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Attr, Value, Record} from \"@swim/structure\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class RotateTransform extends Transform {\n  /** @hidden */\n  readonly _a: Angle;\n\n  constructor(a: Angle) {\n    super();\n    this._a = a;\n  }\n\n  get angle(): Angle {\n    return this._a;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else {\n        return new Transform.List([this, x]);\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      x = Length.fromAny(x);\n      y = Length.fromAny(y!);\n      const a = this._a.radValue();\n      const cosA = Math.cos(a);\n      const sinA = Math.sin(a);\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x * cosA - y * sinA,\n                x * sinA + y * cosA];\n      } else {\n        return [x.times(cosA).minus(y.times(sinA)),\n                x.times(sinA).plus(y.times(cosA))];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    const a = this._a.radValue();\n    return x * Math.cos(a) - y * Math.sin(a);\n  }\n\n  transformY(x: number, y: number): number {\n    const a = this._a.radValue();\n    return x * Math.sin(a) + y * Math.cos(a);\n  }\n\n  inverse(): Transform {\n    return new RotateTransform(this._a.opposite());\n  }\n\n  toAffine(): AffineTransform {\n    const a = this._a.radValue();\n    return new Transform.Affine(Math.cos(a), Math.sin(a), -Math.sin(a), Math.cos(a), 0, 0);\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"rotate\", this._a.toString()));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof RotateTransform;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof RotateTransform) {\n      return this._a.equals(that._a);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (RotateTransform._hashSeed === void 0) {\n      RotateTransform._hashSeed = Murmur3.seed(RotateTransform);\n    }\n    return Murmur3.mash(Murmur3.mix(RotateTransform._hashSeed, this._a.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"rotate\")\n        .write(40/*'('*/).debug(this._a).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return \"rotate(\" + this._a + \")\";\n  }\n\n  toAttributeString(): string {\n    return \"rotate(\" + this._a.degValue() + \")\";\n  }\n\n  private static _hashSeed?: number;\n\n  static from(a: AnyAngle): RotateTransform {\n    a = Angle.fromAny(a, \"deg\");\n    return new RotateTransform(a);\n  }\n\n  static fromAny(value: RotateTransform | string): RotateTransform {\n    if (value instanceof RotateTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return RotateTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): RotateTransform | undefined {\n    const header = value.header(\"rotate\");\n    if (header.isDefined()) {\n      let a = Angle.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key === \"a\") {\n          a = item.toValue().cast(Angle.form(), a);\n        } else if (item instanceof Value && index === 0) {\n          a = item.cast(Angle.form(), a);\n        }\n      }, this);\n      return new RotateTransform(a);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): RotateTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.RotateParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\nTransform.Rotate = RotateTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Attr, Slot, Value, Record} from \"@swim/structure\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class SkewTransform extends Transform {\n  /** @hidden */\n  readonly _x: Angle;\n  /** @hidden */\n  readonly _y: Angle;\n\n  constructor(x: Angle, y: Angle) {\n    super();\n    this._x = x;\n    this._y = y;\n  }\n\n  get x(): Angle {\n    return this._x;\n  }\n\n  get y(): Angle {\n    return this._y;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else {\n        return new Transform.List([this, x]);\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      x = Length.fromAny(x);\n      y = Length.fromAny(y!);\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x + y * Math.tan(this._x.radValue()),\n                x * Math.tan(this._y.radValue()) + y];\n      } else {\n        return [x.plus(y.times(Math.tan(this._x.radValue()))),\n                x.times(Math.tan(this._y.radValue())).plus(y)];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x + y * Math.tan(this._x.radValue());\n  }\n\n  transformY(x: number, y: number): number {\n    return x * Math.tan(this._y.radValue()) + y;\n  }\n\n  inverse(): Transform {\n    return new SkewTransform(this._x.opposite(), this._y.opposite());\n  }\n\n  toAffine(): AffineTransform {\n    const x = this._x.radValue();\n    const y = this._y.radValue();\n    return new Transform.Affine(1, Math.tan(y), Math.tan(x), 1, 0, 0);\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"skew\", Record.of(Slot.of(\"x\", this._x.toString()),\n                                               Slot.of(\"y\", this._y.toString()))));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof SkewTransform;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof SkewTransform) {\n      return this._x.equals(that._x) && this._y.equals(that._y);\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (SkewTransform._hashSeed === void 0) {\n      SkewTransform._hashSeed = Murmur3.seed(SkewTransform);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(SkewTransform._hashSeed,\n        this._x.hashCode()), this._y.hashCode()));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"skew\");\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      output = output.write(\"X\").write(40/*'('*/).debug(this._x).write(41/*')'*/);\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      output = output.write(\"Y\").write(40/*'('*/).debug(this._y).write(41/*')'*/);\n    } else {\n      output = output.write(40/*'('*/).debug(this._x).write(\", \").debug(this._y).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      return \"skewX(\" + this._x + \")\";\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      return \"skewY(\" + this._y + \")\";\n    } else {\n      return \"skew(\" + this._x + \",\" + this._y + \")\";\n    }\n  }\n\n  toAttributeString(): string {\n    if (this._x.isDefined() && !this._y.isDefined()) {\n      return \"skewX(\" + this._x.degValue() + \")\";\n    } else if (!this._x.isDefined() && this._y.isDefined()) {\n      return \"skewY(\" + this._y.degValue() + \")\";\n    } else {\n      return \"skew(\" + this._x.degValue() + \",\" + this._y.degValue() + \")\";\n    }\n  }\n\n  private static _hashSeed?: number;\n\n  static from(x: AnyAngle, y: AnyAngle): SkewTransform {\n    x = Angle.fromAny(x, \"deg\");\n    y = Angle.fromAny(y, \"deg\");\n    return new SkewTransform(x, y);\n  }\n\n  static fromAny(value: SkewTransform | string): SkewTransform {\n    if (value instanceof SkewTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return SkewTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): SkewTransform | undefined {\n    const header = value.header(\"skew\");\n    if (header.isDefined()) {\n      let x = Angle.zero();\n      let y = Angle.zero();\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x\") {\n            x = item.toValue().cast(Angle.form(), x);\n          } else if (key === \"y\") {\n            y = item.toValue().cast(Angle.form(), y);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            x = item.cast(Angle.form(), x);\n          } else if (index === 1) {\n            y = item.cast(Angle.form(), y);\n          }\n        }\n      }, this);\n      return new SkewTransform(x, y);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): SkewTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.SkewParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\nTransform.Skew = SkewTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Item, Attr, Value, Record} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\n\nexport class AffineTransform extends Transform {\n  /** @hidden */\n  readonly _x0: number;\n  /** @hidden */\n  readonly _y0: number;\n  /** @hidden */\n  readonly _x1: number;\n  /** @hidden */\n  readonly _y1: number;\n  /** @hidden */\n  readonly _tx: number;\n  /** @hidden */\n  readonly _ty: number;\n\n  constructor(x0: number, y0: number, x1: number, y1: number, tx: number, ty: number) {\n    super();\n    this._x0 = x0;\n    this._y0 = y0;\n    this._x1 = x1;\n    this._y1 = y1;\n    this._tx = tx;\n    this._ty = ty;\n  }\n\n  get x0(): number {\n    return this._x0;\n  }\n\n  get y0(): number {\n    return this._y0;\n  }\n\n  get x1(): number {\n    return this._x1;\n  }\n\n  get y1(): number {\n    return this._y1;\n  }\n\n  get tx(): number {\n    return this._tx;\n  }\n\n  get ty(): number {\n    return this._ty;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else {\n        return this.multiply(x.toAffine());\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      x = Length.fromAny(x);\n      y = Length.fromAny(y!);\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        return [x * this._x0 + y * this._x1 + this._tx,\n                x * this._y0 + y * this._y1 + this._ty];\n      } else {\n        return [x.times(this._x0).plus(y.times(this._x1)).plus(this._tx),\n                x.times(this._y0).plus(y.times(this._y1)).plus(this._ty)];\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    return x * this._x0 + y * this._x1 + this._tx;\n  }\n\n  transformY(x: number, y: number): number {\n    return x * this._y0 + y * this._y1 + this._ty;\n  }\n\n  inverse(): Transform {\n    const m00 = this._x0;\n    const m10 = this._y0;\n    const m01 = this._x1;\n    const m11 = this._y1;\n    const m02 = this._tx;\n    const m12 = this._ty;\n    const det = m00 * m11 - m01 * m10;\n    if (Math.abs(det) >= Number.MIN_VALUE) {\n      return new AffineTransform( m11 / det, -m10 / det,\n                                 -m01 / det,  m00 / det,\n                                 (m01 * m12 - m11 * m02) / det,\n                                 (m10 * m02 - m00 * m12) / det);\n    } else {\n      throw new Error(\"non-invertible affine transform with determinant \" + det);\n    }\n  }\n\n  multiply(that: AffineTransform): AffineTransform {\n    const x0 = this._x0 * that._x0 + this._x1 * that._y0;\n    const y0 = this._y0 * that._x0 + this._y1 * that._y0;\n    const x1 = this._x0 * that._x1 + this._x1 * that._y1;\n    const y1 = this._y0 * that._x1 + this._y1 * that._y1;\n    const tx = this._x0 * that._tx + this._x1 * that._ty;\n    const ty = this._y0 * that._tx + this._y1 * that._ty;\n    return new AffineTransform(x0, y0, x1, y1, tx, ty);\n  }\n\n  toAffine(): AffineTransform {\n    return this;\n  }\n\n  toValue(): Value {\n    return Record.of(Attr.of(\"matrix\", Record.of(this._x0, this._y0,\n                                                 this._x1, this._y1,\n                                                 this._tx, this._ty)));\n  }\n\n  conformsTo(that: Transform): boolean {\n    return that instanceof AffineTransform;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof AffineTransform) {\n      return this._x0 === that._x0 && this._y0 === that._y0 &&\n             this._x1 === that._x1 && this._y1 === that._y1 &&\n             this._tx === that._tx && this._ty === that._ty;\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (AffineTransform._hashSeed === void 0) {\n      AffineTransform._hashSeed = Murmur3.seed(AffineTransform);\n    }\n    return Murmur3.mash(Murmur3.mix(Murmur3.mix(Murmur3.mix(Murmur3.mix(\n        Murmur3.mix(Murmur3.mix( AffineTransform._hashSeed,\n        Murmur3.hash(this._x0)), Murmur3.hash(this._y0)),\n        Murmur3.hash(this._x1)), Murmur3.hash(this._y1)),\n        Murmur3.hash(this._tx)), Murmur3.hash(this._ty)));\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"affine\").write(40/*'('*/)\n        .debug(this._x0).write(\", \").debug(this._y0).write(\", \")\n        .debug(this._x1).write(\", \").debug(this._y1).write(\", \")\n        .debug(this._tx).write(\", \").debug(this._ty).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return \"matrix(\" + this._x0 + \",\" + this._y0 + \",\"\n                     + this._x1 + \",\" + this._y1 + \",\"\n                     + this._tx + \",\" + this._ty + \")\";\n  }\n\n  private static _hashSeed?: number;\n\n  private static _identityMatrix?: AffineTransform;\n  static identity(): AffineTransform {\n    if (AffineTransform._identityMatrix === void 0) {\n      AffineTransform._identityMatrix = AffineTransform.from();\n    }\n    return AffineTransform._identityMatrix;\n  }\n\n  static from(x0: string | number = 1, y0: string | number = 0,\n              x1: string | number = 0, y1: string | number = 1,\n              tx: string | number = 0, ty: string | number = 0): AffineTransform {\n    x0 = +x0;\n    y0 = +y0;\n    x1 = +x1;\n    y1 = +y1;\n    tx = +tx;\n    ty = +ty;\n    return new AffineTransform(x0, y0, x1, y1, tx, ty);\n  }\n\n  static fromAny(value: AffineTransform | string): AffineTransform {\n    if (value instanceof AffineTransform) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return AffineTransform.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): AffineTransform | undefined {\n    const header = value.header(\"matrix\");\n    if (header.isDefined()) {\n      let x0 = 0;\n      let y0 = 0;\n      let x1 = 0;\n      let y1 = 0;\n      let tx = 0;\n      let ty = 0;\n      header.forEach(function (item: Item, index: number) {\n        const key = item.key.stringValue();\n        if (key !== void 0) {\n          if (key === \"x0\") {\n            x0 = item.toValue().numberValue(x0);\n          } else if (key === \"y0\") {\n            y0 = item.toValue().numberValue(y0);\n          } else if (key === \"x1\") {\n            x1 = item.toValue().numberValue(x1);\n          } else if (key === \"y1\") {\n            y1 = item.toValue().numberValue(y1);\n          } else if (key === \"tx\") {\n            tx = item.toValue().numberValue(tx);\n          } else if (key === \"ty\") {\n            ty = item.toValue().numberValue(ty);\n          }\n        } else if (item instanceof Value) {\n          switch (index) {\n            case 0: x0 = item.numberValue(x0); break;\n            case 1: y0 = item.numberValue(y0); break;\n            case 2: x1 = item.numberValue(x1); break;\n            case 3: y1 = item.numberValue(y1); break;\n            case 4: tx = item.numberValue(tx); break;\n            case 5: ty = item.numberValue(ty); break;\n            default:\n          }\n        }\n      }, this);\n      return new AffineTransform(x0, y0, x1, y1, tx, ty);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): AffineTransform {\n    let input = Unicode.stringInput(string);\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = Transform.AffineParser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  }\n}\nTransform.Affine = AffineTransform;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Murmur3} from \"@swim/util\";\nimport {Output} from \"@swim/codec\";\nimport {Item, Value, Record} from \"@swim/structure\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\nexport class TransformList extends Transform {\n  /** @hidden */\n  readonly _transforms: ReadonlyArray<Transform>;\n\n  constructor(transforms: ReadonlyArray<Transform>) {\n    super();\n    this._transforms = transforms;\n  }\n\n  get transforms(): ReadonlyArray<Transform> {\n    return this._transforms;\n  }\n\n  transform(that: Transform): Transform;\n  transform(point: [number, number]): [number, number];\n  transform(x: number, y: number): [number, number];\n  transform(point: [AnyLength, AnyLength]): [Length, Length];\n  transform(x: AnyLength, y: AnyLength): [Length, Length];\n  transform(x: Transform | [AnyLength, AnyLength] | AnyLength, y?: AnyLength): Transform | [number, number] | [Length, Length] {\n    if (x instanceof Transform) {\n      if (x instanceof Transform.Identity) {\n        return this;\n      } else {\n        return new Transform.List([this, x]);\n      }\n    } else {\n      if (Array.isArray(x)) {\n        y = x[1];\n        x = x[0];\n      }\n      const transforms = this._transforms;\n      if (typeof x === \"number\" && typeof y === \"number\") {\n        let point: [number, number] = [x, y];\n        for (let i = 0, n = transforms.length; i < n; i += 1) {\n          point = transforms[i].transform(point);\n        }\n        return point;\n      } else {\n        let point: [Length, Length] = [Length.fromAny(x), Length.fromAny(y!)];\n        for (let i = 0, n = transforms.length; i < n; i += 1) {\n          point = transforms[i].transform(point);\n        }\n        return point;\n      }\n    }\n  }\n\n  transformX(x: number, y: number): number {\n    const transforms = this._transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      x = transforms[i].transformX(x, y);\n      y = transforms[i].transformX(x, y);\n    }\n    return x;\n  }\n\n  transformY(x: number, y: number): number {\n    const transforms = this._transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      x = transforms[i].transformX(x, y);\n      y = transforms[i].transformX(x, y);\n    }\n    return y;\n  }\n\n  inverse(): Transform {\n    const transforms = this._transforms;\n    const n = transforms.length;\n    const inverseTransforms = new Array<Transform>(n);\n    for (let i = 0; i < n; i += 1) {\n      inverseTransforms[i] = transforms[n - i - 1].inverse();\n    }\n    return new TransformList(inverseTransforms);\n  }\n\n  toAffine(): AffineTransform {\n    let matrix = AffineTransform.identity();\n    const transforms = this._transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      matrix = matrix.multiply(transforms[i].toAffine());\n    }\n    return matrix;\n  }\n\n  toValue(): Value {\n    const transforms = this._transforms;\n    const n = transforms.length;\n    const record = Record.create(n);\n    for (let i = 0; i < n; i += 1) {\n      record.push(transforms[i].toValue());\n    }\n    return record;\n  }\n\n  conformsTo(that: Transform): boolean {\n    if (that instanceof TransformList) {\n      const n = this._transforms.length;\n      if (n === that._transforms.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this._transforms[i].conformsTo(that._transforms[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  equals(that: Transform): boolean {\n    if (that instanceof TransformList) {\n      const n = this._transforms.length;\n      if (n === that._transforms.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this._transforms[i].equals(that._transforms[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  hashCode(): number {\n    if (TransformList._hashSeed === void 0) {\n      TransformList._hashSeed = Murmur3.seed(TransformList);\n    }\n    let code = TransformList._hashSeed;\n    const transforms = this._transforms;\n    for (let i = 0, n = transforms.length; i < n; i += 1) {\n      code = Murmur3.mix(code, transforms[i].hashCode());\n    }\n    return Murmur3.mash(code);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Transform\").write(46/*'.'*/).write(\"list\").write(40/*'('*/);\n    const transforms = this._transforms;\n    const n = transforms.length;\n    if (n > 0) {\n      output = output.debug(transforms[0]);\n      for (let i = 1; i < n; i += 1) {\n        output = output.write(\", \").debug(transforms[i]);\n      }\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    const transforms = this._transforms;\n    const n = transforms.length;\n    if (n > 0) {\n      let s = transforms[0].toString();\n      for (let i = 1; i < n; i += 1) {\n        s = s + \" \" + transforms[i].toString();\n      }\n      return s;\n    } else {\n      return \"\";\n    }\n  }\n\n  toAttributeString(): string {\n    const transforms = this._transforms;\n    const n = transforms.length;\n    if (n > 0) {\n      let s = transforms[0].toAttributeString();\n      for (let i = 1; i < n; i += 1) {\n        s = s + \" \" + transforms[i].toAttributeString();\n      }\n      return s;\n    } else {\n      return \"\";\n    }\n  }\n\n  private static _hashSeed?: number;\n\n  static from(transforms: ReadonlyArray<AnyTransform>): TransformList {\n    const list: Transform[] = [];\n    for (let i = 0; i < transforms.length; i += 1) {\n      const transform = Transform.fromAny(transforms[i]);\n      if (transform instanceof TransformList) {\n        list.push(...transform._transforms);\n      } else if (!(transform instanceof Transform.Identity)) {\n        list.push(transform);\n      }\n    }\n    return new TransformList(list);\n  }\n\n  static fromAny(value: TransformList | string): TransformList {\n    if (value instanceof TransformList) {\n      return value;\n    } else if (typeof value === \"string\") {\n      return TransformList.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  }\n\n  static fromValue(value: Value): TransformList | undefined {\n    const transforms = [] as Transform[];\n    value.forEach(function (item: Item) {\n      const transform = Transform.fromValue(item.toValue());\n      if (transform !== void 0) {\n        transforms.push(transform);\n      }\n    }, this);\n    if (transforms.length !== 0) {\n      return new TransformList(transforms);\n    }\n    return void 0;\n  }\n\n  static parse(string: string): TransformList {\n    const transform = Transform.parse(string);\n    if (transform instanceof TransformList) {\n      return transform;\n    } else {\n      return new TransformList([transform]);\n    }\n  }\n}\nTransform.List = TransformList;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Length, LengthParser} from \"@swim/length\";\nimport {Transform} from \"./Transform\";\nimport {TranslateTransform} from \"./TranslateTransform\";\n\n/** @hidden */\nexport class TranslateTransformParser extends Parser<TranslateTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<Length> | undefined;\n  private readonly yParser: Parser<Length> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<Length>,\n              yParser?: Parser<Length>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<TranslateTransform> {\n    return TranslateTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<Length>,\n               yParser?: Parser<Length>, step: number = 1): Parser<TranslateTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"translateX\":\n          case \"translateY\":\n          case \"translate\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = LengthParser.parse(input, \"px\");\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"translateX\": return Parser.done(Transform.translateX(xParser!.bind()));\n            case \"translateY\": return Parser.done(Transform.translateY(xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = LengthParser.parse(input, \"px\");\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"translate\": return Parser.done(Transform.translate(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new TranslateTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<TranslateTransform> {\n    return TranslateTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\nTransform.TranslateParser = TranslateTransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\nimport {ScaleTransform} from \"./ScaleTransform\";\n\n/** @hidden */\nexport class ScaleTransformParser extends Parser<ScaleTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<number> | undefined;\n  private readonly yParser: Parser<number> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<number>,\n              yParser?: Parser<number>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<ScaleTransform> {\n    return ScaleTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<number>,\n               yParser?: Parser<number>, step: number = 1): Parser<ScaleTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"scaleX\":\n          case \"scaleY\":\n          case \"scale\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = Base10.parseNumber(input);\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser!.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"scaleX\": return Parser.done(Transform.scaleX(xParser!.bind()));\n            case \"scaleY\": return Parser.done(Transform.scaleY(xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = Base10.parseNumber(input);\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"scale\": return Parser.done(Transform.scale(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new ScaleTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<ScaleTransform> {\n    return ScaleTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\nTransform.ScaleParser = ScaleTransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Angle, AngleParser} from \"@swim/angle\";\nimport {Transform} from \"./Transform\";\nimport {RotateTransform} from \"./RotateTransform\";\n\n/** @hidden */\nexport class RotateTransformParser extends Parser<RotateTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly aParser: Parser<Angle> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, aParser?: Parser<Angle>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.aParser = aParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<RotateTransform> {\n    return RotateTransformParser.parse(input, this.identOutput, this.aParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, aParser?: Parser<Angle>,\n               step: number = 1): Parser<RotateTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"rotate\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (aParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          aParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        aParser = aParser.feed(input);\n      }\n      if (aParser !== void 0) {\n        if (aParser.isDone()) {\n          step = 4;\n        } else if (aParser.isError()) {\n          return aParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"rotate\": return Parser.done(Transform.rotate(aParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new RotateTransformParser(identOutput, aParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<RotateTransform> {\n    return RotateTransformParser.parse(input, identOutput, void 0, 2);\n  }\n}\nTransform.RotateParser = RotateTransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Angle, AngleParser} from \"@swim/angle\";\nimport {Transform} from \"./Transform\";\nimport {SkewTransform} from \"./SkewTransform\";\n\n/** @hidden */\nexport class SkewTransformParser extends Parser<SkewTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly xParser: Parser<Angle> | undefined;\n  private readonly yParser: Parser<Angle> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, xParser?: Parser<Angle>,\n              yParser?: Parser<Angle>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.xParser = xParser;\n    this.yParser = yParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<SkewTransform> {\n    return SkewTransformParser.parse(input, this.identOutput, this.xParser, this.yParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, xParser?: Parser<Angle>,\n               yParser?: Parser<Angle>, step: number = 1): Parser<SkewTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"skewX\":\n          case \"skewY\":\n          case \"skew\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    if (step === 3) {\n      if (xParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          xParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        xParser = xParser.feed(input);\n      }\n      if (xParser !== void 0) {\n        if (xParser.isDone()) {\n          step = 4;\n        } else if (xParser.isError()) {\n          return xParser.asError();\n        }\n      }\n    }\n    if (step === 4) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont()) {\n        c = input.head();\n        if (c === 41/*')'*/) {\n          input.step();\n          const ident = identOutput!.bind();\n          switch (ident) {\n            case \"skewX\": return Parser.done(Transform.skewX(xParser!.bind()));\n            case \"skewY\": return Parser.done(Transform.skewY(xParser!.bind()));\n            default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n          }\n        } else if (c === 44/*','*/) {\n          input.step();\n          step = 5;\n        } else {\n          return Parser.error(Diagnostic.expected(\",\", input));\n        }\n      } else if (input.isDone()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 5) {\n      if (yParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (!input.isEmpty()) {\n          yParser = AngleParser.parse(input, \"deg\");\n        }\n      } else {\n        yParser = yParser.feed(input);\n      }\n      if (yParser !== void 0) {\n        if (yParser.isDone()) {\n          step = 6;\n        } else if (yParser.isError()) {\n          return yParser.asError();\n        }\n      }\n    }\n    if (step === 6) {\n      while (input.isCont() && Unicode.isSpace(input.head())) {\n        input.step();\n      }\n      if (input.isCont() && input.head() === 41/*')'*/) {\n        input.step();\n        const ident = identOutput!.bind();\n        switch (ident) {\n          case \"skew\": return Parser.done(Transform.skew(xParser!.bind(), yParser!.bind()));\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\")\", input));\n      }\n    }\n    return new SkewTransformParser(identOutput, xParser, yParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<SkewTransform> {\n    return SkewTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\nTransform.SkewParser = SkewTransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\n\n/** @hidden */\nexport class AffineTransformParser extends Parser<AffineTransform> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly entries: number[] | undefined;\n  private readonly entryParser: Parser<number> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, entries?: number[],\n              entryParser?: Parser<number>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.entries = entries;\n    this.entryParser = entryParser;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<AffineTransform> {\n    return AffineTransformParser.parse(input, this.identOutput, this.entries, this.entryParser, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, entries: number[] = [],\n               entryParser?: Parser<number>, step: number = 1): Parser<AffineTransform> {\n    let c = 0;\n    if (step === 1) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"matrix\": step = 2; break;\n          default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n        }\n      }\n    }\n    if (step === 2) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input = input.step();\n      }\n      if (input.isCont() && c === 40/*'('*/) {\n        input.step();\n        step = 3;\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.expected(\"(\", input));\n      }\n    }\n    do {\n      if (step === 3) {\n        if (entryParser === void 0) {\n          while (input.isCont() && Unicode.isSpace(input.head())) {\n            input.step();\n          }\n          if (!input.isEmpty()) {\n            entryParser = Base10.parseNumber(input);\n          }\n        } else {\n          entryParser = entryParser.feed(input);\n        }\n        if (entryParser !== void 0) {\n          if (entryParser.isDone()) {\n            entries.push(entryParser.bind());\n            entryParser = void 0;\n            step = 4;\n          } else if (entryParser.isError()) {\n            return entryParser.asError();\n          }\n        }\n      }\n      if (step === 4) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (input.isCont()) {\n          c = input.head();\n          if (c === 41/*')'*/) {\n            input.step();\n            const ident = identOutput!.bind();\n            switch (ident) {\n              case \"matrix\": return Parser.done(Transform.affine(...entries));\n              default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n            }\n          } else if (entries.length >= 6) {\n            return Parser.error(Diagnostic.expected(\")\", input));\n          } else if (c === 44/*','*/) {\n            input.step();\n            step = 3;\n            continue;\n          } else {\n            return Parser.error(Diagnostic.expected(\",\", input));\n          }\n        } else if (input.isDone()) {\n          return Parser.error(Diagnostic.unexpected(input));\n        }\n      }\n      break;\n    } while (true);\n    return new AffineTransformParser(identOutput, entries, entryParser, step);\n  }\n\n  /** @hidden */\n  static parseRest(input: Input, identOutput?: Output<string>): Parser<AffineTransform> {\n    return AffineTransformParser.parse(input, identOutput, void 0, void 0, 2);\n  }\n}\nTransform.AffineParser = AffineTransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Unicode} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\n\n/** @hidden */\nexport class TransformListParser extends Parser<Transform> {\n  private readonly transform: Transform | undefined;\n  private readonly transformParser: Parser<Transform> | undefined;\n\n  constructor(transform?: Transform, transformParser?: Parser<Transform>) {\n    super();\n    this.transform = transform;\n    this.transformParser = transformParser;\n  }\n\n  feed(input: Input): Parser<Transform> {\n    return TransformListParser.parse(input, this.transform, this.transformParser);\n  }\n\n  static parse(input: Input, transform: Transform = Transform.identity(),\n               transformParser?: Parser<Transform>): Parser<Transform> {\n    do {\n      if (transformParser === void 0) {\n        while (input.isCont() && Unicode.isSpace(input.head())) {\n          input.step();\n        }\n        if (input.isCont()) {\n          transformParser = Transform.Parser.parse(input);\n        } else if (input.isDone()) {\n          return Parser.done(transform);\n        }\n      }\n      if (transformParser !== void 0) {\n        transformParser = transformParser.feed(input);\n        if (transformParser.isDone()) {\n          transform = transform.transform(transformParser.bind());\n          transformParser = void 0;\n          continue;\n        } else if (transformParser.isError()) {\n          return transformParser.asError();\n        }\n      }\n      break;\n    } while (true);\n    return new TransformListParser(transform, transformParser);\n  }\n}\nTransform.ListParser = TransformListParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Transform} from \"./Transform\";\n\n/** @hidden */\nexport class TransformParser extends Parser<Transform> {\n  private readonly identOutput: Output<string> | undefined;\n\n  constructor(identOutput?: Output<string>) {\n    super();\n    this.identOutput = identOutput;\n  }\n\n  feed(input: Input): Parser<Transform> {\n    return TransformParser.parse(input, this.identOutput);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>): Parser<Transform> {\n    let c = 0;\n    identOutput = identOutput || Unicode.stringOutput();\n    while (input.isCont() && (c = input.head(), Unicode.isAlpha(c))) {\n      input = input.step();\n      identOutput.write(c);\n    }\n    if (!input.isEmpty()) {\n      const ident = identOutput.bind();\n      switch (ident) {\n        case \"translateX\":\n        case \"translateY\":\n        case \"translate\": return Transform.TranslateParser.parseRest(input, identOutput);\n        case \"scaleX\":\n        case \"scaleY\":\n        case \"scale\": return Transform.ScaleParser.parseRest(input, identOutput);\n        case \"rotate\": return Transform.RotateParser.parseRest(input, identOutput);\n        case \"skewX\":\n        case \"skewY\":\n        case \"skew\": return Transform.SkewParser.parseRest(input, identOutput);\n        case \"matrix\": return Transform.AffineParser.parseRest(input, identOutput);\n        case \"none\": return Parser.done(Transform.identity());\n        default: return Parser.error(Diagnostic.message(\"unknown transform function: \" + ident, input));\n      }\n    }\n    return new TransformParser(identOutput);\n  }\n}\nTransform.Parser = TransformParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {TranslateTransform} from \"./TranslateTransform\";\nimport {ScaleTransform} from \"./ScaleTransform\";\nimport {RotateTransform} from \"./RotateTransform\";\nimport {SkewTransform} from \"./SkewTransform\";\nimport {TransformList} from \"./TransformList\";\nimport {TranslateTransformInterpolator} from \"./TranslateTransformInterpolator\";\nimport {ScaleTransformInterpolator} from \"./ScaleTransformInterpolator\";\nimport {RotateTransformInterpolator} from \"./RotateTransformInterpolator\";\nimport {SkewTransformInterpolator} from \"./SkewTransformInterpolator\";\nimport {AffineTransformInterpolator} from \"./AffineTransformInterpolator\";\nimport {TransformListInterpolator} from \"./TransformListInterpolator\";\n\nexport abstract class TransformInterpolator<F extends Transform = Transform> extends Interpolator<F, AnyTransform> {\n  abstract range(): ReadonlyArray<F>;\n  abstract range(fs: ReadonlyArray<F>): TransformInterpolator<F>;\n  abstract range(f0: F, f1: F): TransformInterpolator<F>;\n  abstract range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  abstract range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof TranslateTransform && b instanceof TranslateTransform) {\n      return new TransformInterpolator.Translate(a, b);\n    } else if (a instanceof ScaleTransform && b instanceof ScaleTransform) {\n      return new TransformInterpolator.Scale(a, b);\n    } else if (a instanceof RotateTransform && b instanceof RotateTransform) {\n      return new TransformInterpolator.Rotate(a, b);\n    } else if (a instanceof SkewTransform && b instanceof SkewTransform) {\n      return new TransformInterpolator.Skew(a, b);\n    } else if (a instanceof TransformList && b instanceof TransformList && a.conformsTo(b)) {\n      return new TransformInterpolator.List(a, b);\n    } else if (a instanceof Transform && b instanceof Transform) {\n      return new TransformInterpolator.Affine(a.toAffine(), b.toAffine());\n    } else if (Transform.isAny(a) && Transform.isAny(b)) {\n      return TransformInterpolator.between(Transform.fromAny(a), Transform.fromAny(b));\n    }\n    return Interpolator.between(a, b);\n  }\n\n  static tryBetween(a: unknown, b: unknown): TransformInterpolator | null {\n    if (a instanceof TranslateTransform && b instanceof TranslateTransform) {\n      return new TransformInterpolator.Translate(a, b);\n    } else if (a instanceof ScaleTransform && b instanceof ScaleTransform) {\n      return new TransformInterpolator.Scale(a, b);\n    } else if (a instanceof RotateTransform && b instanceof RotateTransform) {\n      return new TransformInterpolator.Rotate(a, b);\n    } else if (a instanceof SkewTransform && b instanceof SkewTransform) {\n      return new TransformInterpolator.Skew(a, b);\n    } else if (a instanceof TransformList && b instanceof TransformList && a.conformsTo(b)) {\n      return new TransformInterpolator.List(a, b);\n    }\n    return null;\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Translate: typeof TranslateTransformInterpolator; // defined by TranslateTransformInterpolator\n  /** @hidden */\n  static Scale: typeof ScaleTransformInterpolator; // defined by ScaleTransformInterpolator\n  /** @hidden */\n  static Rotate: typeof RotateTransformInterpolator; // defined by RotateTransformInterpolator\n  /** @hidden */\n  static Skew: typeof SkewTransformInterpolator; // defined by SkewTransformInterpolator\n  /** @hidden */\n  static Affine: typeof AffineTransformInterpolator; // defined by AffineTransformInterpolator\n  /** @hidden */\n  static List: typeof TransformListInterpolator; // defined by TransformListInterpolator\n}\nInterpolator.registerFactory(TransformInterpolator);\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {LengthUnits, Length} from \"@swim/length\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {TranslateTransform} from \"./TranslateTransform\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class TranslateTransformInterpolator extends TransformInterpolator<TranslateTransform> {\n  /** @hidden */\n  readonly x0: number;\n  /** @hidden */\n  readonly dx: number;\n  /** @hidden */\n  readonly xUnits: LengthUnits;\n  /** @hidden */\n  readonly y0: number;\n  /** @hidden */\n  readonly dy: number;\n  /** @hidden */\n  readonly yUnits: LengthUnits;\n\n  constructor(f0: TranslateTransform, f1: TranslateTransform) {\n    super();\n    this.xUnits = f1.x.units;\n    this.x0 = f0.x.toValue(this.xUnits);\n    this.dx = f1.x.value - this.x0;\n    this.yUnits = f1.y.units;\n    this.y0 = f0.y.toValue(this.yUnits);\n    this.dy = f1.y.value - this.y0;\n  }\n\n  interpolate(u: number): TranslateTransform {\n    const x = Length.from(this.x0 + this.dx * u, this.xUnits);\n    const y = Length.from(this.y0 + this.dy * u, this.yUnits);\n    return new TranslateTransform(x, y);\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    f = Transform.fromAny(f);\n    if (f instanceof TranslateTransform) {\n      const units = f.x.units;\n      const x0 = Length.fromAny(this.x0, this.xUnits).toValue(units);\n      const y0 = Length.fromAny(this.y0, this.yUnits).toValue(units);\n      const dx = Length.fromAny(this.dx, this.xUnits).toValue(units);\n      const dy = Length.fromAny(this.dy, this.yUnits).toValue(units);\n      const fx = f.x.toValue(units) - x0;\n      const fy = f.y.toValue(units) - y0;\n      const dp = fx * dx + fy * dy;\n      const lf = Math.sqrt(fx * fx + fy * fy);\n      return lf !== 0 ? dp / lf : lf;\n    }\n    return 0;\n  }\n\n  range(): ReadonlyArray<TranslateTransform>;\n  range(fs: ReadonlyArray<TranslateTransform>): TranslateTransformInterpolator;\n  range(f0: TranslateTransform, f1: TranslateTransform): TranslateTransformInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<TranslateTransform> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return TranslateTransformInterpolator.between(f0[0], f0[1]);\n    } else {\n      return TranslateTransformInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TranslateTransformInterpolator) {\n      return this.x0 === that.x0 && this.dx === that.dx && this.xUnits === that.xUnits\n          && this.y0 === that.y0 && this.dy === that.dy && this.yUnits === that.yUnits;\n    }\n    return false;\n  }\n\n  static between(f0: TranslateTransform, f1: TranslateTransform): TranslateTransformInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof TranslateTransform && b instanceof TranslateTransform) {\n      return new TranslateTransformInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.Translate = TranslateTransformInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {ScaleTransform} from \"./ScaleTransform\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class ScaleTransformInterpolator extends TransformInterpolator<ScaleTransform> {\n  /** @hidden */\n  readonly x0: number;\n  /** @hidden */\n  readonly dx: number;\n  /** @hidden */\n  readonly y0: number;\n  /** @hidden */\n  readonly dy: number;\n\n  constructor(f0: ScaleTransform, f1: ScaleTransform) {\n    super();\n    this.x0 = f0.x;\n    this.dx = f1.x - this.x0;\n    this.y0 = f0.y;\n    this.dy = f1.y - this.y0;\n  }\n\n  interpolate(u: number): ScaleTransform {\n    const x = this.x0 + this.dx * u;\n    const y = this.y0 + this.dy * u;\n    return new ScaleTransform(x, y);\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    f = Transform.fromAny(f);\n    if (f instanceof ScaleTransform) {\n      const fx = f.x - this.x0;\n      const fy = f.y - this.y0;\n      const dp = fx * this.dx + fy * this.dy;\n      const lf = Math.sqrt(fx * fx + fy * fy);\n      return lf !== 0 ? dp / lf : lf;\n    }\n    return 0;\n  }\n\n  range(): ReadonlyArray<ScaleTransform>;\n  range(fs: ReadonlyArray<ScaleTransform>): ScaleTransformInterpolator;\n  range(f0: ScaleTransform, f1: ScaleTransform): ScaleTransformInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<ScaleTransform> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return ScaleTransformInterpolator.between(f0[0], f0[1]);\n    } else {\n      return ScaleTransformInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof ScaleTransformInterpolator) {\n      return this.x0 === that.x0 && this.dx === that.dx\n          && this.y0 === that.y0 && this.dy === that.dy;\n    }\n    return false;\n  }\n\n  static between(f0: ScaleTransform, f1: ScaleTransform): ScaleTransformInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof ScaleTransform && b instanceof ScaleTransform) {\n      return new ScaleTransformInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.Scale = ScaleTransformInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AngleUnits, Angle} from \"@swim/angle\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {RotateTransform} from \"./RotateTransform\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class RotateTransformInterpolator extends TransformInterpolator<RotateTransform> {\n  /** @hidden */\n  readonly v0: number;\n  /** @hidden */\n  readonly dv: number;\n  /** @hidden */\n  readonly units: AngleUnits;\n\n  constructor(f0: RotateTransform, f1: RotateTransform) {\n    super();\n    this.units = f1.angle.units;\n    this.v0 = f0.angle.toValue(this.units);\n    this.dv = f1.angle.value - this.v0;\n  }\n\n  interpolate(u: number): RotateTransform {\n    const a = Angle.from(this.v0 + this.dv * u, this.units);\n    return new RotateTransform(a);\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    f = Transform.fromAny(f);\n    if (f instanceof RotateTransform) {\n      const v = f.angle.toValue(this.units);\n      return this.dv !== 0 ? (v - this.v0) / this.dv : this.dv;\n    }\n    return 0;\n  }\n\n  range(): ReadonlyArray<RotateTransform>;\n  range(fs: ReadonlyArray<RotateTransform>): RotateTransformInterpolator;\n  range(f0: RotateTransform, f1: RotateTransform): RotateTransformInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<RotateTransform> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return RotateTransformInterpolator.between(f0[0], f0[1]);\n    } else {\n      return RotateTransformInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof RotateTransformInterpolator) {\n      return this.v0 === that.v0 && this.dv === that.dv && this.units === that.units;\n    }\n    return false;\n  }\n\n  static between(f0: RotateTransform, f1: RotateTransform): RotateTransformInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof RotateTransform && b instanceof RotateTransform) {\n      return new RotateTransformInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.Rotate = RotateTransformInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AngleUnits, Angle} from \"@swim/angle\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {SkewTransform} from \"./SkewTransform\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class SkewTransformInterpolator extends TransformInterpolator<SkewTransform> {\n  /** @hidden */\n  readonly x0: number;\n  /** @hidden */\n  readonly dx: number;\n  /** @hidden */\n  readonly xUnits: AngleUnits;\n  /** @hidden */\n  readonly y0: number;\n  /** @hidden */\n  readonly dy: number;\n  /** @hidden */\n  readonly yUnits: AngleUnits;\n\n  constructor(f0: SkewTransform, f1: SkewTransform) {\n    super();\n    this.xUnits = f1.x.units;\n    this.x0 = f0.x.toValue(this.xUnits);\n    this.dx = f1.x.value - this.x0;\n    this.yUnits = f1.y.units;\n    this.y0 = f0.y.toValue(this.yUnits);\n    this.dy = f1.y.value - this.y0;\n  }\n\n  interpolate(u: number): SkewTransform {\n    const x = Angle.from(this.x0 + this.dx * u, this.xUnits);\n    const y = Angle.from(this.y0 + this.dy * u, this.yUnits);\n    return new SkewTransform(x, y);\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    f = Transform.fromAny(f);\n    if (f instanceof SkewTransform) {\n      const units = f.x.units;\n      const x0 = Angle.fromAny(this.x0, this.xUnits).toValue(units);\n      const y0 = Angle.fromAny(this.y0, this.yUnits).toValue(units);\n      const dx = Angle.fromAny(this.dx, this.xUnits).toValue(units);\n      const dy = Angle.fromAny(this.dy, this.yUnits).toValue(units);\n      const fx = f.x.toValue(units) - x0;\n      const fy = f.y.toValue(units) - y0;\n      const dp = fx * dx + fy * dy;\n      const lf = Math.sqrt(fx * fx + fy * fy);\n      return lf !== 0 ? dp / lf : lf;\n    }\n    return 0;\n  }\n\n  range(): ReadonlyArray<SkewTransform>;\n  range(fs: ReadonlyArray<SkewTransform>): SkewTransformInterpolator;\n  range(f0: SkewTransform, f1: SkewTransform): SkewTransformInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<SkewTransform> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return SkewTransformInterpolator.between(f0[0], f0[1]);\n    } else {\n      return SkewTransformInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof SkewTransformInterpolator) {\n      return this.x0 === that.x0 && this.dx === that.dx && this.xUnits === that.xUnits\n          && this.y0 === that.y0 && this.dy === that.dy && this.yUnits === that.yUnits;\n    }\n    return false;\n  }\n\n  static between(f0: SkewTransform, f1: SkewTransform): SkewTransformInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof SkewTransform && b instanceof SkewTransform) {\n      return new SkewTransformInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.Skew = SkewTransformInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyTransform} from \"./Transform\";\nimport {AffineTransform} from \"./AffineTransform\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class AffineTransformInterpolator extends TransformInterpolator<AffineTransform> {\n  /** @hidden */\n  readonly f0: AffineTransform;\n  /** @hidden */\n  readonly f1: AffineTransform;\n\n  constructor(f0: AffineTransform, f1: AffineTransform) {\n    super();\n    // TODO: decompose matrices\n    this.f0 = f0!;\n    this.f1 = f1!;\n  }\n\n  interpolate(u: number): AffineTransform {\n    // TODO: interpolate and recompose matrices\n    return this.f1;\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    //f = Transform.fromAny(f);\n    return 0; // TODO: interpolate matrices\n  }\n\n  range(): ReadonlyArray<AffineTransform>;\n  range(fs: ReadonlyArray<AffineTransform>): AffineTransformInterpolator;\n  range(f0: AffineTransform, f1: AffineTransform): AffineTransformInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<AffineTransform> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return AffineTransformInterpolator.between(f0[0], f0[1]);\n    } else {\n      return AffineTransformInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof AffineTransformInterpolator) {\n      return this.f0.equals(that.f0) && this.f1.equals(that.f1);\n    }\n    return false;\n  }\n\n  static between(f0: AffineTransform, f1: AffineTransform): AffineTransformInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof AffineTransform && b instanceof AffineTransform) {\n      return new AffineTransformInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.Affine = AffineTransformInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyTransform, Transform} from \"./Transform\";\nimport {TransformList} from \"./TransformList\";\nimport {TransformInterpolator} from \"./TransformInterpolator\";\n\nexport class TransformListInterpolator extends TransformInterpolator<TransformList> {\n  /** @hidden */\n  readonly interpolators: ReadonlyArray<TransformInterpolator>;\n\n  constructor(f0: TransformList, f1: TransformList) {\n    super();\n    const transforms0 = f0.transforms;\n    const transforms1 = f1.transforms;\n    const interpolatorCount = Math.min(transforms0.length, transforms1.length);\n    const interpolators = new Array<TransformInterpolator>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      interpolators[i] = TransformInterpolator.between(transforms0[i], transforms1[i]);\n    }\n    this.interpolators = interpolators;\n  }\n\n  interpolate(u: number): TransformList {\n    const interpolators = this.interpolators;\n    const interpolatorCount = interpolators.length;\n    const transforms = new Array<Transform>(interpolatorCount);\n    for (let i = 0; i < interpolatorCount; i += 1) {\n      transforms[i] = interpolators[i].interpolate(u);\n    }\n    return new TransformList(transforms);\n  }\n\n  deinterpolate(f: AnyTransform): number {\n    return 0; // not implemented\n  }\n\n  range(): ReadonlyArray<TransformList>;\n  range(fs: ReadonlyArray<TransformList>): TransformListInterpolator;\n  range(f0: TransformList, f1: TransformList): TransformListInterpolator;\n  range(fs: ReadonlyArray<AnyTransform>): TransformInterpolator;\n  range(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  range(f0?: ReadonlyArray<AnyTransform> | AnyTransform, f1?: AnyTransform): ReadonlyArray<TransformList> | TransformInterpolator {\n    if (f0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (f1 === void 0) {\n      f0 = f0 as ReadonlyArray<AnyTransform>\n      return TransformListInterpolator.between(f0[0], f0[1]);\n    } else {\n      return TransformListInterpolator.between(f0 as AnyTransform, f1);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TransformListInterpolator) {\n      const n = this.interpolators.length;\n      if (n === that.interpolators.length) {\n        for (let i = 0; i < n; i += 1) {\n          if (!this.interpolators[i].equals(that.interpolators[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static between(f0: TransformList, f1: TransformList): TransformListInterpolator;\n  static between(f0: AnyTransform, f1: AnyTransform): TransformInterpolator;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof TransformList && b instanceof TransformList && a.conformsTo(b)) {\n      return new TransformListInterpolator(a, b);\n    }\n    return TransformInterpolator.between(a, b);\n  }\n}\nTransformInterpolator.List = TransformListInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Record, Form} from \"@swim/structure\";\nimport {AnyTransform, Transform} from \"./Transform\";\n\n/** @hidden */\nexport class TransformForm extends Form<Transform, AnyTransform> {\n  private readonly _unit: Transform | undefined;\n\n  constructor(unit?: Transform) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Transform | undefined;\n  unit(unit: Transform | undefined): Form<Transform, AnyTransform>;\n  unit(unit?: Transform | undefined): Transform | undefined | Form<Transform, AnyTransform> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new TransformForm(unit);\n    }\n  }\n\n  mold(transform: AnyTransform): Item {\n    transform = Transform.fromAny(transform);\n    return transform.toValue();\n  }\n\n  cast(item: Item): Transform | undefined {\n    const value = item.toValue();\n    try {\n      if (value instanceof Record) {\n        return Transform.fromValue(value);\n      } else {\n        const string = value.stringValue(void 0);\n        if (string !== void 0) {\n          return Transform.parse(string);\n        }\n      }\n    } catch (e) {\n      // swallow\n    }\n    return void 0;\n  }\n}\nTransform.Form = TransformForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals} from \"@swim/util\";\nimport {AnyDateTime, DateTime} from \"@swim/time\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {ContinuousScale} from \"./ContinuousScale\";\nimport {LinearScale} from \"./LinearScale\";\nimport {TimeScale} from \"./TimeScale\";\n\nexport type ScaleType = \"linear\" | \"time\";\n\nexport abstract class Scale<D extends DU, R extends RU, DU = D, RU = R> implements Equals {\n  abstract scale(x: DU): R;\n\n  abstract equals(that: unknown): boolean;\n\n  static linear<R extends RU, RU = R>(xs: ReadonlyArray<number>, fx: Interpolator<R, RU>): LinearScale<R, RU>;\n  static linear<R extends RU, RU = R>(xs: ReadonlyArray<number>, ys: ReadonlyArray<RU>): LinearScale<R, RU>;\n  static linear<R extends RU, RU = R>(x0: number, x1: number, fx: Interpolator<R, RU>): LinearScale<R, RU>;\n  static linear<R extends RU, RU = R>(x0: number, x1: number, y0: RU, y1: RU): LinearScale<R, RU>;\n  static linear<R extends RU, RU = R>(x0: ReadonlyArray<number> | number, x1: Interpolator<R, RU> | ReadonlyArray<RU> | number,\n                                      y0?: Interpolator<R, RU> | RU, y1?: RU): LinearScale<R, RU> {\n    if (Array.isArray(x0)) {\n      if (!Array.isArray(x1)) {\n        return new Scale.Linear(x0[0], x0[1], x1 as Interpolator<R, RU>);\n      } else {\n        x1 = x1 as ReadonlyArray<RU>;\n        return new Scale.Linear(x0[0], x0[1], Interpolator.between(x1[0], x1[1]) as Interpolator<R, RU>);\n      }\n    } else {\n      x0 = x0 as number;\n      x1 = x1 as number;\n      if (y1 === void 0) {\n        return new Scale.Linear(x0, x1, y0 as Interpolator<R, RU>);\n      } else {\n        y0 = y0 as RU;\n        y1 = y1 as RU;\n        return new Scale.Linear(x0, x1, Interpolator.between(y0, y1) as Interpolator<R, RU>);\n      }\n    }\n  }\n\n  static time<R extends RU, RU = R>(ts: ReadonlyArray<AnyDateTime>, ft: Interpolator<R, RU>): TimeScale<R, RU>;\n  static time<R extends RU, RU = R>(ts: ReadonlyArray<AnyDateTime>, ys: ReadonlyArray<RU>): TimeScale<R, RU>;\n  static time<R extends RU, RU = R>(t0: AnyDateTime, t1: AnyDateTime, ft: Interpolator<R, RU>): TimeScale<R, RU>;\n  static time<R extends RU, RU = R>(t0: AnyDateTime, t1: AnyDateTime, y0: RU, y1: RU): TimeScale<R, RU>;\n  static time<R extends RU, RU = R>(t0: ReadonlyArray<AnyDateTime> | AnyDateTime, t1: Interpolator<R, RU> | ReadonlyArray<RU> | AnyDateTime,\n                                    y0?: Interpolator<R, RU> | RU, y1?: RU): TimeScale<R, RU> {\n    if (Array.isArray(t0)) {\n      if (!Array.isArray(t1)) {\n        return new Scale.Time(t0[0], t0[1], t1 as Interpolator<R, RU>);\n      } else {\n        t1 = t1 as ReadonlyArray<RU>;\n        return new Scale.Time(t0[0], t0[1], Interpolator.between(t1[0], t1[1]) as Interpolator<R, RU>);\n      }\n    } else {\n      t0 = t0 as AnyDateTime;\n      t1 = t1 as AnyDateTime;\n      if (y1 === void 0) {\n        return new Scale.Time(t0, t1, y0 as Interpolator<R, RU>);\n      } else {\n        y0 = y0 as RU;\n        y1 = y1 as RU;\n        return new Scale.Time(t0, t1, Interpolator.between(y0, y1) as Interpolator<R, RU>);\n      }\n    }\n  }\n\n  static from<D extends DU, R extends RU, DU = D, RU = R>(x0: DU, x1: DU, fx: Interpolator<R, RU>): ContinuousScale<D, R, DU, RU>;\n  static from<D extends DU, R extends RU, DU = D, RU = R>(x0: DU, x1: DU, y0: RU, y1: RU): ContinuousScale<D, R, DU, RU>;\n  static from<D extends DU, R extends RU, DU = D, RU = R>(type: ScaleType, fx: Interpolator<R, RU>): ContinuousScale<D, R, DU, RU>;\n  static from<D extends DU, R extends RU, DU = D, RU = R>(type: ScaleType, y0: RU, y1: RU): ContinuousScale<D, R, DU, RU>;\n  static from<D extends DU, R extends RU, DU = D, RU = R>(x0: DU | ScaleType, x1: DU | Interpolator<R, RU> | RU,\n                                                          y0?: Interpolator<R, RU> | RU, y1?: RU): ContinuousScale<D, R, DU, RU> {\n    if (x0 === \"time\") {\n      y1 = y0 as RU | undefined;\n      y0 = x1 as Interpolator<R, RU> | RU | undefined;\n      const now = DateTime.current();\n      x1 = now as unknown as DU;\n      x0 = now.time(now.time() - 86400000) as unknown as DU;\n    } else if (x0 === \"linear\") {\n      y1 = y0 as RU | undefined;\n      y0 = x1 as Interpolator<R, RU> | RU | undefined;\n      x1 = 1 as unknown as DU;\n      x0 = 0 as unknown as DU;\n    }\n    if (x0 instanceof DateTime || x0 instanceof Date || x1 instanceof DateTime || x1 instanceof Date) {\n      if (y1 === void 0) {\n        return new Scale.Time(x0 as AnyDateTime, x1 as AnyDateTime, y0 as Interpolator<R, RU>) as unknown as ContinuousScale<D, R, DU, RU>;\n      } else {\n        return new Scale.Time(x0 as AnyDateTime, x1 as AnyDateTime, Interpolator.between(y0, y1)) as unknown as ContinuousScale<D, R, DU, RU>;\n      }\n    } else if (typeof x0 === \"number\" && typeof x1 === \"number\") {\n      if (y1 === void 0) {\n        return new Scale.Linear(x0, x1, y0 as Interpolator<R, RU>) as unknown as ContinuousScale<D, R, DU, RU>;\n      } else {\n        return new Scale.Linear(x0, x1, Interpolator.between(y0, y1)) as unknown as ContinuousScale<D, R, DU, RU>;\n      }\n    }\n    throw new TypeError(\"\" + arguments);\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Continuous: typeof ContinuousScale; // defined by ContinuousScale\n  /** @hidden */\n  static Linear: typeof LinearScale; // defined by LinearScale\n  /** @hidden */\n  static Time: typeof TimeScale; // defined by TimeScale\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Scale} from \"./Scale\";\n\nexport abstract class ContinuousScale<D extends DU, R extends RU, DU = D, RU = R> extends Scale<D, R, DU, RU> {\n  abstract norm(x: DU): number;\n\n  abstract unscale(y: RU): D;\n\n  abstract clampScale(x: DU): R;\n\n  abstract domain(): ReadonlyArray<D>;\n  abstract domain(xs: ReadonlyArray<DU>): ContinuousScale<D, R, DU, RU>;\n  abstract domain(x0: DU, x1?: DU): ContinuousScale<D, R, DU, RU>;\n\n  abstract range(): ReadonlyArray<R>;\n  abstract range(ys: ReadonlyArray<RU>): ContinuousScale<D, R, DU, RU>;\n  abstract range(y0: RU, y1?: RU): ContinuousScale<D, R, DU, RU>;\n\n  abstract interpolator(): Interpolator<R, RU>;\n  abstract interpolator(fx: Interpolator<R, RU>): ContinuousScale<D, R, DU, RU>;\n\n  abstract clampDomain(xMin?: DU, xMax?: DU, zMin?: number, zMax?: number, epsilon?: number): ContinuousScale<D, R, DU, RU>;\n\n  abstract solveDomain(x1: DU, y1: RU, x2?: DU, y2?: RU, epsilon?: number): ContinuousScale<D, R, DU, RU>;\n}\nScale.Continuous = ContinuousScale;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Scale} from \"./Scale\";\nimport {ContinuousScale} from \"./ContinuousScale\";\n\nexport class LinearScale<R extends RU, RU = R> extends ContinuousScale<number, R, number, RU> {\n  readonly x0: number;\n  readonly dx: number;\n  readonly fx: Interpolator<R, RU>;\n\n  constructor(x0: number, x1: number, fx: Interpolator<R, RU>) {\n    super();\n    this.x0 = x0;\n    this.dx = x1 - this.x0;\n    this.fx = fx;\n  }\n\n  norm(x: number): number {\n    return this.dx !== 0 ? (x - this.x0) / this.dx : this.dx;\n  }\n\n  scale(x: number): R {\n    const u = this.norm(x);\n    return this.fx.interpolate(u);\n  }\n\n  unscale(y: RU): number {\n    const u = this.fx.deinterpolate(y);\n    return this.x0 + this.dx * u;\n  }\n\n  clampScale(x: number): R {\n    const u = Math.min(Math.max(0, this.norm(x)), 1);\n    return this.fx.interpolate(u);\n  }\n\n  domain(): ReadonlyArray<number>;\n  domain(xs: ReadonlyArray<number>): LinearScale<R, RU>;\n  domain(x0: number, x1?: number): LinearScale<R, RU>;\n  domain(x0?: ReadonlyArray<number> | number, x1?: number): ReadonlyArray<number> | LinearScale<R, RU> {\n    if (x0 === void 0) {\n      return [this.x0, this.x0 + this.dx];\n    } else {\n      if (x1 === void 0) {\n        x1 = (x0 as ReadonlyArray<number>)[1];\n        x0 = (x0 as ReadonlyArray<number>)[0];\n      }\n      const dx = x1 - (x0 as number);\n      if (x0 === this.x0 && dx === this.dx) {\n        return this;\n      } else {\n        return new LinearScale(x0 as number, x1, this.fx);\n      }\n    }\n  }\n\n  range(): ReadonlyArray<R>;\n  range(ys: ReadonlyArray<RU>): LinearScale<R, RU>;\n  range(y0: RU, y1?: RU): LinearScale<R, RU>;\n  range(y0?: ReadonlyArray<RU> | RU, y1?: RU): ReadonlyArray<R> | LinearScale<R, RU> {\n    if (y0 === void 0) {\n      return this.fx.range();\n    } else if (y1 === void 0) {\n      y0 = y0 as ReadonlyArray<RU>;\n      return new LinearScale(this.x0, this.x0 + this.dx, this.fx.range(y0));\n    } else {\n      y0 = y0 as R;\n      return new LinearScale(this.x0, this.x0 + this.dx, this.fx.range(y0, y1));\n    }\n  }\n\n  interpolator(): Interpolator<R, RU>;\n  interpolator(fx: Interpolator<R, RU>): LinearScale<R, RU>;\n  interpolator(fx?: Interpolator<R, RU>): Interpolator<R, RU> | LinearScale<R, RU> {\n    if (fx === void 0) {\n      return this.fx;\n    } else {\n      return new LinearScale(this.x0, this.x0 + this.dx, fx);\n    }\n  }\n\n  clampDomain(xMin?: number, xMax?: number, zMin?: number, zMax?: number, epsilon?: number): LinearScale<R, RU> {\n    let x0 = this.x0;\n    let x1 = this.x0 + this.dx;\n    if (xMin !== void 0) {\n      if (x0 < x1 && x0 < xMin) {\n        x0 = xMin;\n      } else if (x1 < x0 && x1 < xMin) {\n        x1 = xMin;\n      }\n    }\n    if (xMax !== void 0) {\n      if (x0 < x1 && x1 > xMax) {\n        x1 = xMax;\n      } else if (x1 < x0 && x0 > xMax) {\n        x1 = xMax;\n      }\n    }\n\n    const y0 = +this.scale(x0);\n    const y1 = +this.scale(x1);\n    const dy = y1 - y0;\n    const z = Math.abs(dy / (x1 - x0));\n    if (zMin !== void 0 && z < 1/zMin) {\n      const dx = dy * zMin;\n      const xSum = x0 + x1;\n      x0 = (xSum - dx) / 2;\n      x1 = (xSum + dx) / 2;\n    } else if (zMax !== void 0 && z > 1/zMax) {\n      const dx = dy * zMax;\n      const xSum = x0 + x1;\n      x0 = (xSum - dx) / 2;\n      x1 = (xSum + dx) / 2;\n    }\n\n    const dx = x1 - x0;\n    if (epsilon === void 0) {\n      epsilon = 1e-12;\n    }\n    if (Math.abs(x0 - this.x0) < epsilon && Math.abs(dx - this.dx) < epsilon) {\n      return this;\n    } else {\n      return new LinearScale(x0, x1, this.fx);\n    }\n  }\n\n  solveDomain(x1: number, y1: RU, x2?: number, y2?: RU, epsilon?: number): LinearScale<R, RU> {\n    const range = this.fx.range();\n    const y0 = +range[0];\n    const y3 = +range[1];\n    let m;\n    if (x2 === void 0 || y2 === void 0 || x1 === x2 || y1 === y2) {\n      m = (y3 - y0) / (this.dx || 1);\n    } else {\n      m = (+y2 - +y1) / (x2 - x1);\n    }\n    const b = +y1 - m * x1;\n    const x0 = (y0 - b) / m;\n    const x3 = (y3 - b) / m;\n\n    const dx = x3 - x0;\n    if (epsilon === void 0) {\n      epsilon = 1e-12;\n    }\n    if (Math.abs(x0 - this.x0) < epsilon && Math.abs(dx - this.dx) < epsilon) {\n      return this;\n    } else {\n      return new LinearScale(x0, x3, this.fx);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LinearScale) {\n      return this.x0 === that.x0 && this.dx === that.dx && this.fx.equals(that.fx);\n    }\n    return false;\n  }\n}\nScale.Linear = LinearScale;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {TimeZone, AnyDateTime, DateTime} from \"@swim/time\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Scale} from \"./Scale\";\nimport {ContinuousScale} from \"./ContinuousScale\";\n\nexport class TimeScale<R extends RU, RU = R> extends ContinuousScale<DateTime, R, AnyDateTime, RU> {\n  readonly t0: number;\n  readonly dt: number;\n  readonly zone: TimeZone;\n  readonly ft: Interpolator<R, RU>;\n\n  constructor(d0: AnyDateTime, d1: AnyDateTime, ft: Interpolator<R, RU>, zone?: TimeZone) {\n    super();\n    d0 = DateTime.fromAny(d0);\n    d1 = DateTime.fromAny(d1);\n    this.t0 = d0.time();\n    this.dt = d1.time() - this.t0;\n    this.zone = zone || d0.zone();\n    this.ft = ft;\n  }\n\n  norm(d: AnyDateTime): number {\n    d = DateTime.time(d);\n    return this.dt !== 0 ? (d - this.t0) / this.dt : this.dt;\n  }\n\n  scale(d: AnyDateTime): R {\n    const u = this.norm(d);\n    return this.ft.interpolate(u);\n  }\n\n  unscale(y: RU): DateTime {\n    const u = this.ft.deinterpolate(y);\n    return new DateTime(this.t0 + this.dt * u);\n  }\n\n  clampScale(d: AnyDateTime): R {\n    const u = Math.min(Math.max(0, this.norm(d)), 1);\n    return this.ft.interpolate(u);\n  }\n\n  domain(): ReadonlyArray<DateTime>;\n  domain(ts: ReadonlyArray<AnyDateTime>): TimeScale<R, RU>;\n  domain(t0: AnyDateTime, t1?: AnyDateTime): TimeScale<R, RU>;\n  domain(t0?: ReadonlyArray<AnyDateTime> | AnyDateTime, t1?: AnyDateTime): ReadonlyArray<DateTime> | TimeScale<R, RU> {\n    if (t0 === void 0) {\n      return [new DateTime(this.t0, this.zone), new DateTime(this.t0 + this.dt, this.zone)];\n    } else {\n      if (t1 === void 0) {\n        t1 = (t0 as ReadonlyArray<AnyDateTime>)[1];\n        t0 = (t0 as ReadonlyArray<AnyDateTime>)[0];\n      }\n      t0 = DateTime.time(t0 as AnyDateTime);\n      t1 = DateTime.time(t1);\n      const dt = t1 - t0;\n      if (t0 === this.t0 && dt === this.dt) {\n        return this;\n      } else {\n        return new TimeScale(t0, t1, this.ft, this.zone);\n      }\n    }\n  }\n\n  range(): ReadonlyArray<R>;\n  range(ys: ReadonlyArray<RU>): TimeScale<R, RU>;\n  range(y0: RU, y1?: RU): TimeScale<R, RU>;\n  range(y0?: ReadonlyArray<RU> | RU, y1?: RU): ReadonlyArray<R> | TimeScale<R, RU> {\n    if (y0 === void 0) {\n      return this.ft.range();\n    } else if (y1 === void 0) {\n      y0 = y0 as ReadonlyArray<RU>;\n      return new TimeScale(this.t0, this.t0 + this.dt, this.ft.range(y0), this.zone);\n    } else {\n      y0 = y0 as RU;\n      return new TimeScale(this.t0, this.t0 + this.dt, this.ft.range(y0, y1), this.zone);\n    }\n  }\n\n  interpolator(): Interpolator<R, RU>;\n  interpolator(ft: Interpolator<R, RU>): TimeScale<R, RU>;\n  interpolator(ft?: Interpolator<R, RU>): Interpolator<R, RU> | TimeScale<R, RU> {\n    if (ft === void 0) {\n      return this.ft;\n    } else {\n      return new TimeScale(this.t0, this.t0 + this.dt, ft, this.zone);\n    }\n  }\n\n  clampDomain(tMin?: AnyDateTime, tMax?: AnyDateTime, zMin?: number, zMax?: number, epsilon?: number): TimeScale<R, RU> {\n    let t0 = this.t0;\n    let t1 = this.t0 + this.dt;\n    if (tMin !== void 0) {\n      tMin = DateTime.time(tMin);\n      if (t0 < t1 && t0 < tMin) {\n        t0 = tMin;\n      } else if (t1 < t0 && t1 < tMin) {\n        t1 = tMin;\n      }\n    }\n    if (tMax !== void 0) {\n      tMax = DateTime.time(tMax);\n      if (t0 < t1 && t1 > tMax) {\n        t1 = tMax;\n      } else if (t1 < t0 && t0 > tMax) {\n        t1 = tMax;\n      }\n    }\n\n    const y0 = +this.scale(t0);\n    const y1 = +this.scale(t1);\n    const dy = y1 - y0;\n    const z = Math.abs(dy / (t1 - t0));\n    if (zMin !== void 0 && z < 1/zMin) {\n      const dt = dy * zMin;\n      const tSum = t0 + t1;\n      t0 = (tSum - dt) / 2;\n      t1 = (tSum + dt) / 2;\n    } else if (zMax !== void 0 && z > 1/zMax) {\n      const dt = dy * zMax;\n      const tSum = t0 + t1;\n      t0 = (tSum - dt) / 2;\n      t1 = (tSum + dt) / 2;\n    }\n\n    const dt = t1 - t0;\n    if (epsilon === void 0) {\n      epsilon = 1e-12;\n    }\n    if (Math.abs(t0 - this.t0) < epsilon && Math.abs(dt - this.dt) < epsilon) {\n      return this;\n    } else {\n      return new TimeScale(t0, t1, this.ft, this.zone);\n    }\n  }\n\n  solveDomain(t1: AnyDateTime, y1: RU, t2?: AnyDateTime, y2?: RU, epsilon?: number): TimeScale<R, RU> {\n    t1 = DateTime.time(t1);\n    t2 = t2 !== void 0 ? DateTime.time(t2) : t2;\n    const range = this.ft.range();\n    const y0 = +range[0];\n    const y3 = +range[1];\n    let m;\n    if (t2 === void 0 || y2 === void 0 || t1 === t2 || y1 === y2) {\n      m = (y3 - y0) / (this.dt || 1);\n    } else {\n      m = (+y2 - +y1) / (t2 - t1);\n    }\n    const b = +y1 - m * t1;\n    const t0 = (y0 - b) / m;\n    const t3 = (y3 - b) / m;\n\n    const dt = t3 - t0;\n    if (epsilon === void 0) {\n      epsilon = 1e-12;\n    }\n    if (Math.abs(t0 - this.t0) < epsilon && Math.abs(dt - this.dt) < epsilon) {\n      return this;\n    } else {\n      return new TimeScale(t0, t3, this.ft, this.zone);\n    }\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TimeScale) {\n      return this.t0 === that.t0 && this.dt === that.dt && this.ft.equals(that.ft);\n    }\n    return false;\n  }\n}\nScale.Time = TimeScale;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {ContinuousScale} from \"./ContinuousScale\";\nimport {LinearScale} from \"./LinearScale\";\nimport {TimeScale} from \"./TimeScale\";\nimport {LinearScaleInterpolator} from \"./LinearScaleInterpolator\";\nimport {TimeScaleInterpolator} from \"./TimeScaleInterpolator\";\n\nexport abstract class ScaleInterpolator<D extends DU, R extends RU, DU = D, RU = R, S extends ContinuousScale<D, R, DU, RU> = ContinuousScale<D, R, DU, RU>> extends Interpolator<S, ContinuousScale<D, R, DU, RU>> {\n  range(): ReadonlyArray<S>;\n  range(ss: ReadonlyArray<ContinuousScale<D, R, DU, RU>>): ScaleInterpolator<D, R, DU, RU, S>;\n  range(s0: ContinuousScale<D, R, DU, RU>, s1: ContinuousScale<D, R, DU, RU>): ScaleInterpolator<D, R, DU, RU, S>;\n  range(s0?: ReadonlyArray<ContinuousScale<D, R, DU, RU>> | ContinuousScale<D, R, DU, RU>,\n        s1?: ContinuousScale<D, R, DU, RU>): ReadonlyArray<S> | ScaleInterpolator<D, R, DU, RU, S> {\n    if (s0 === void 0) {\n      return [this.interpolate(0), this.interpolate(1)];\n    } else if (s1 === void 0) {\n      s0 = s0 as ReadonlyArray<ContinuousScale<D, R, DU, RU>>;\n      return ScaleInterpolator.between(s0[0], s0[1]) as ScaleInterpolator<D, R, DU, RU, S>;\n    } else {\n      return ScaleInterpolator.between(s0 as ContinuousScale<D, R, DU, RU>, s1) as ScaleInterpolator<D, R, DU, RU, S>;\n    }\n  }\n\n  static between<D extends DU, R extends RU, DU = D, RU = R>(s0: ContinuousScale<D, R, DU, RU>, s1: ContinuousScale<D, R, DU, RU>): ScaleInterpolator<D, R, DU, RU>;\n  static between(a: unknown, b: unknown): Interpolator<unknown>;\n  static between(a: unknown, b: unknown): Interpolator<unknown> {\n    if (a instanceof LinearScale && b instanceof LinearScale) {\n      return new ScaleInterpolator.Linear(a, b);\n    } else if (a instanceof TimeScale && b instanceof TimeScale) {\n      return new ScaleInterpolator.Time(a, b);\n    }\n    return Interpolator.between(a, b);\n  }\n\n  static tryBetween(a: unknown, b: unknown): ScaleInterpolator<any, any> | null {\n    if (a instanceof LinearScale && b instanceof LinearScale) {\n      return new ScaleInterpolator.Linear(a, b);\n    } else if (a instanceof TimeScale && b instanceof TimeScale) {\n      return new ScaleInterpolator.Time(a, b);\n    }\n    return null;\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Linear: typeof LinearScaleInterpolator; // defined by LinearScaleInterpolator\n  /** @hidden */\n  static Time: typeof TimeScaleInterpolator; // defined by TimeScaleInterpolator\n}\nInterpolator.registerFactory(ScaleInterpolator);\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NumberInterpolator, InterpolatorInterpolator} from \"@swim/interpolate\";\nimport {ContinuousScale} from \"./ContinuousScale\";\nimport {LinearScale} from \"./LinearScale\";\nimport {ScaleInterpolator} from \"./ScaleInterpolator\";\n\nexport class LinearScaleInterpolator<R extends RU, RU = R> extends ScaleInterpolator<number, R, number, RU, LinearScale<R, RU>> {\n  /** @hidden */\n  readonly x0: NumberInterpolator;\n  /** @hidden */\n  readonly dx: NumberInterpolator;\n  /** @hidden */\n  readonly fx: InterpolatorInterpolator<R>;\n\n  constructor(s0: LinearScale<R, RU>, s1: LinearScale<R, RU>) {\n    super();\n    this.x0 = new NumberInterpolator(s0.x0, s1.x0);\n    this.dx = new NumberInterpolator(s0.dx, s1.dx);\n    this.fx = new InterpolatorInterpolator(s0.fx, s1.fx);\n  }\n\n  interpolate(u: number): LinearScale<R, RU> {\n    const x0 = this.x0.interpolate(u);\n    const dx = this.dx.interpolate(u);\n    const fx = this.fx.interpolate(u);\n    return new LinearScale(x0, x0 + dx, fx);\n  }\n\n  deinterpolate(s: ContinuousScale<number, R, number, RU>): number {\n    return 0; // not implemented\n  }\n\n  equals(that: any): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof LinearScaleInterpolator) {\n      return this.x0.equals(that.x0) && this.dx.equals(that.dx) && this.fx.equals(that.fx);\n    }\n    return false;\n  }\n}\nScaleInterpolator.Linear = LinearScaleInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyDateTime, DateTime} from \"@swim/time\";\nimport {NumberInterpolator, InterpolatorInterpolator} from \"@swim/interpolate\";\nimport {ContinuousScale} from \"./ContinuousScale\";\nimport {TimeScale} from \"./TimeScale\";\nimport {ScaleInterpolator} from \"./ScaleInterpolator\";\n\nexport class TimeScaleInterpolator<R extends RU, RU = R> extends ScaleInterpolator<DateTime, R, AnyDateTime, RU, TimeScale<R>> {\n  /** @hidden */\n  readonly t0: NumberInterpolator;\n  /** @hidden */\n  readonly dt: NumberInterpolator;\n  /** @hidden */\n  readonly ft: InterpolatorInterpolator<R, RU>;\n\n  constructor(s0: TimeScale<R>, s1: TimeScale<R>) {\n    super();\n    this.t0 = new NumberInterpolator(s0.t0, s1.t0);\n    this.dt = new NumberInterpolator(s0.dt, s1.dt);\n    this.ft = new InterpolatorInterpolator(s0.ft, s1.ft);\n  }\n\n  interpolate(u: number): TimeScale<R> {\n    const t0 = this.t0.interpolate(u);\n    const dt = this.dt.interpolate(u);\n    const ft = this.ft.interpolate(u);\n    return new TimeScale(t0, t0 + dt, ft);\n  }\n\n  deinterpolate(s: ContinuousScale<DateTime, R, AnyDateTime, RU>): number {\n    return 0; // not implemented\n  }\n\n  equals(that: any): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TimeScaleInterpolator) {\n      return this.t0.equals(that.t0) && this.dt.equals(that.dt) && this.ft.equals(that.ft);\n    }\n    return false;\n  }\n}\nScaleInterpolator.Time = TimeScaleInterpolator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Form} from \"@swim/structure\";\nimport {EaseForm} from \"./EaseForm\";\n\nexport type EaseType = \"linear\" | \"quad-in\" | \"quad-out\" | \"quad-in-out\"\n                     | \"cubic-in\" | \"cubic-out\" | \"cubic-in-out\"\n                     | \"quart-in\" | \"quart-out\" | \"quart-in-out\"\n                     | \"expo-in\" | \"expo-out\" | \"expo-in-out\"\n                     | \"circ-in\" | \"circ-out\" | \"circ-in-out\"\n                     | \"back-in\" | \"back-out\" | \"back-in-out\"\n                     | \"elastic-in\" | \"elastic-out\" | \"elastic-in-out\"\n                     | \"bounce-in\" | \"bounce-out\" | \"bounce-in-out\";\n\nexport type AnyEase = Ease | EaseType;\n\nexport interface Ease {\n  (t: number): number;\n  type?: EaseType;\n}\n\nfunction linear(t: number): number {\n  return t;\n}\nlinear.type = \"linear\";\n\nfunction quadIn(t: number): number {\n  return t * t;\n}\nquadIn.type = \"quad-in\";\n\nfunction quadOut(t: number): number {\n  return t * (2 - t);\n}\nquadOut.type = \"quad-out\";\n\nfunction quadInOut(t: number): number {\n  t *= 2;\n  if (t <= 1) {\n    t = t * t;\n  } else {\n    t -= 1;\n    t = t * (2 - t);\n    t += 1;\n  }\n  t /= 2;\n  return t;\n}\nquadInOut.type = \"quad-in-out\";\n\nfunction cubicIn(t: number): number {\n  return t * t * t;\n}\ncubicIn.type = \"cubic-in\";\n\nfunction cubicOut(t: number): number {\n  t -= 1;\n  t = t * t * t;\n  t += 1;\n  return t;\n}\ncubicOut.type = \"cubic-out\";\n\nfunction cubicInOut(t: number): number {\n  t *= 2;\n  if (t <= 1) {\n    t = t * t * t;\n  } else {\n    t -= 2;\n    t = t * t * t;\n    t += 2;\n  }\n  t /= 2;\n  return t;\n}\ncubicInOut.type = \"cubic-in-out\";\n\nfunction quartIn(t: number): number {\n  return t * t * t * t;\n}\nquartIn.type = \"quart-in\";\n\nfunction quartOut(t: number): number {\n  t -= 1;\n  return 1 - t * t * t * t;\n}\nquartOut.type = \"quart-out\";\n\nfunction quartInOut(t: number): number {\n  const t1 = t - 1;\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n}\nquartInOut.type = \"quart-in-out\";\n\nfunction expoIn(t: number): number {\n  if (t === 0) {\n    return 0;\n  }\n  return Math.pow(2, 10 * ( t - 1) );\n}\nexpoIn.type = \"expo-in\";\n\nfunction expoOut(t: number): number {\n  if (t === 1) {\n    return 1;\n  }\n  return (-Math.pow(2, -10 * t) + 1);\n}\nexpoOut.type = \"expo-out\";\n\nfunction expoInOut(t: number): number {\n  if (t === 1 || t === 0) {\n    return t;\n  }\n  t *= 2;\n  if (t < 1) {\n    return 0.5 * Math.pow(2, 10 * (t - 1));\n  }\n  return 0.5 * (-Math.pow(2, -10 * (t - 1)) + 2);\n}\nexpoInOut.type = \"expo-in-out\";\n\nfunction circIn(t: number): number {\n  return -1 * (Math.sqrt(1 - (t / 1) * t) - 1);\n}\ncircIn.type = \"circ-in\";\n\nfunction circOut(t: number): number {\n  t -= 1;\n  return Math.sqrt(1 - t * t);\n}\ncircOut.type = \"circ-out\";\n\nfunction circInOut(t: number): number {\n  t *= 2;\n  if (t < 1) {\n    return -0.5 * (Math.sqrt(1 - t * t) - 1);\n  }\n  const st = t - 2;\n  return 0.5 * (Math.sqrt(1 - st * st) + 1);\n}\ncircInOut.type = \"circ-in-out\";\n\nfunction backIn(t: number): number {\n  const m = 1.70158; // m - Magnitude\n  return t * t * (( m + 1) * t - m);\n}\nbackIn.type = \"back-in\";\n\nfunction backOut(t: number): number {\n  const m = 1.70158;\n  const st = (t / 1) - 1;\n  return (st * st * ((m + 1) * m + m)) + 1;\n}\nbackOut.type = \"back-out\";\n\nfunction backInOut(t: number): number {\n  const m = 1.70158;\n  const s = m * 1.525;\n  if ((t *= 2) < 1) {\n    return 0.5 * t * t * (((s + 1) * t) - s);\n  }\n  const st = t - 2;\n  return 0.5 * (st * st * ((s + 1) * st + s) + 2);\n}\nbackInOut.type = \"back-in-out\";\nfunction elasticIn(t: number): number {\n  if (t === 0 || t === 1) {\n    return t;\n  }\n  const m = 0.7;\n  const st = (t / 1) - 1;\n  const s = (1 - m) / 2 * Math.PI * Math.asin(1);\n  return -(Math.pow(2, 10 * st) * Math.sin((st - s) * 2 * Math.PI / (1 - m)));\n}\nelasticIn.type = \"elastic-in\";\n\nfunction elasticOut(t: number): number {\n  if (t === 0 || t === 1) {\n    return t;\n  }\n  const m = 0.7;\n  const s = (1 -  m) / (2 * Math.PI) * Math.asin(1);\n  t *= 2;\n  return (Math.pow(2, -10 * t) * Math.sin((t - s) * 2 * Math.PI / (1 - m))) + 1;\n}\nelasticOut.type = \"elastic-out\";\n\nfunction elasticInOut(t: number): number {\n  if (t === 0 || t === 1) {\n    return t;\n  }\n  const m = 0.65;\n  const s = (1 - m) / (2 * Math.PI) * Math.asin(1);\n  const st = t * 2;\n  const st1 = st - 1;\n  if(st < 1) {\n    return -0.5 * (Math.pow(2, 10 * st1) * Math.sin((st1 - s) * 2 * Math.PI / (1 - m)));\n  }\n  return (Math.pow(2, -10 * st1) * Math.sin((st1 - s) * 2 * Math.PI / (1 - m)) * 0.5) + 1;\n}\nelasticInOut.type = \"elastic-in-out\";\n\nfunction bounceIn(t: number): number {\n  const p = 7.5625;\n  if ((t = 1 - t) < 1 / 2.75) {\n    return 1 - (p * t * t);\n  } else if (t < 2 / 2.75) {\n    return 1 - (p * (t -= 1.5 / 2.75) * t + 0.75);\n  } else if (t < 2.5 / 2.75) {\n    return 1 - (p * (t -= 2.25 / 2.75) * t + 0.9375);\n  }\n  return 1 - (p * (t -= 2.625 / 2.75) * t + 0.984375);\n}\nbounceIn.type = \"bounce-in\";\n\nfunction bounceOut(t: number): number {\n  const p = 7.5625;\n  if (t < 1 / 2.75) {\n    return p * t * t;\n  } else if (t < 2 / 2.75) {\n    return p * (t -= 1.5 / 2.75) * t + 0.75;\n  } else if (t < 2.5 / 2.75) {\n    return p * (t -= 2.25 / 2.75) * t + 0.9375;\n  }\n  return p * (t -= 2.625 / 2.75) * t + 0.984375;\n}\nbounceOut.type = \"bounce-out\";\n\nfunction bounceInOut(t: number): number {\n  const invert = t < 0.5;\n  t = invert ? 1 - (t * 2) : (t * 2) - 1;\n  const p = 7.5625;\n  if (t < 1 / 2.75) {\n    t = p * t * t;\n  } else if (t < 2 / 2.75) {\n    t = p * (t -= 1.5 / 2.75) * t + 0.75;\n  } else if (t < 2.5 / 2.75) {\n    t = p * (t -= 2.25 / 2.75) * t + 0.9375;\n  } else {\n    t = p * (t -= 2.625 / 2.75) * t + 0.984375;\n  }\n  return invert ? (1 - t) * 0.5 : t * 0.5 + 0.5;\n}\nbounceInOut.type = \"bounce-in-out\";\n\nexport const Ease = {\n  linear: linear as Ease,\n  quadIn: quadIn as Ease,\n  quadOut: quadOut as Ease,\n  quadInOut: quadInOut as Ease,\n  cubicIn: cubicIn as Ease,\n  cubicOut: cubicOut as Ease,\n  cubicInOut: cubicInOut as Ease,\n  quartIn: quartIn as Ease,\n  quartOut: quartOut as Ease,\n  quartInOut: quartInOut as Ease,\n  expoIn: expoIn as Ease,\n  expoOut: expoOut as Ease,\n  expoInOut: expoInOut as Ease,\n  circIn: circIn as Ease,\n  circOut: circOut as Ease,\n  circInOut: circInOut as Ease,\n  backIn: backIn as Ease,\n  backOut: backOut as Ease,\n  backInOut: backInOut as Ease,\n  elasticIn: elasticIn as Ease,\n  elasticOut: elasticOut as Ease,\n  elasticInOut: elasticInOut as Ease,\n  bounceIn: bounceIn as Ease,\n  bounceOut: bounceOut as Ease,\n  bounceInOut: bounceInOut as Ease,\n\n  fromAny(value: AnyEase): Ease {\n    if (typeof value === \"function\") {\n      return value;\n    } else if (typeof value === \"string\") {\n      switch (value) {\n        case \"linear\": return Ease.linear;\n        case \"quad-in\": return Ease.quadIn;\n        case \"quad-out\": return Ease.quadOut;\n        case \"quad-in-out\": return Ease.quadInOut;\n        case \"cubic-in\": return Ease.cubicIn;\n        case \"cubic-out\": return Ease.cubicOut;\n        case \"cubic-in-out\": return Ease.cubicInOut;\n        case \"quart-in\": return Ease.quartIn;\n        case \"quart-out\": return Ease.quartOut;\n        case \"quart-in-out\": return Ease.quartInOut;\n        case \"expo-in\": return Ease.expoIn;\n        case \"expo-out\": return Ease.expoOut;\n        case \"expo-in-out\": return Ease.expoInOut;\n        case \"circ-in\": return Ease.circIn;\n        case \"circ-out\": return Ease.circOut;\n        case \"circ-in-out\": return Ease.circInOut;\n        case \"back-in\": return Ease.backIn;\n        case \"back-out\": return Ease.backOut;\n        case \"back-in-out\": return Ease.backInOut;\n        case \"elastic-in\": return Ease.elasticIn;\n        case \"elastic-out\": return Ease.elasticOut;\n        case \"elastic-in-out\": return Ease.elasticInOut;\n        case \"bounce-in\": return Ease.bounceIn;\n        case \"bounce-out\": return Ease.bounceOut;\n        case \"bounce-in-out\": return Ease.bounceInOut;\n      }\n    }\n    throw new TypeError(\"\" + value);\n  },\n\n  /** @hidden */\n  _form: void 0 as Form<Ease, AnyEase> | undefined,\n  form(unit?: AnyEase): Form<Ease, AnyEase> {\n    if (unit !== void 0) {\n      unit = Ease.fromAny(unit);\n    }\n    if (unit !== Ease.linear) {\n      return new Ease.Form(unit);\n    } else {\n      if (Ease._form === void 0) {\n        Ease._form = new Ease.Form(Ease.linear);\n      }\n      return Ease._form;\n    }\n  },\n\n  // Forward type declarations\n  /** @hidden */\n  Form: void 0 as any as typeof EaseForm, // defined by EaseForm\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Text, Form} from \"@swim/structure\";\nimport {EaseType, AnyEase, Ease} from \"./Ease\";\n\n/** @hidden */\nexport class EaseForm extends Form<Ease, AnyEase> {\n  private readonly _unit: Ease | undefined;\n\n  constructor(unit?: Ease) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Ease | undefined;\n  unit(unit: Ease | undefined): Form<Ease, AnyEase>;\n  unit(unit?: Ease | undefined): Ease | undefined | Form<Ease, AnyEase> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new EaseForm(unit);\n    }\n  }\n\n  mold(ease: AnyEase): Item {\n    ease = Ease.fromAny(ease);\n    if (typeof ease.type === \"string\") {\n      return Text.from(ease.type);\n    } else {\n      return Item.extant();\n    }\n  }\n\n  cast(item: Item): Ease | undefined {\n    const string = item.toValue().stringValue(void 0);\n    if (string !== void 0) {\n      try {\n        return Ease.fromAny(string as EaseType);\n      } catch (e) {\n        // swallow\n      }\n    }\n    return void 0;\n  }\n}\nEase.Form = EaseForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyEase, Ease, Tween, AnyTransition, Transition} from \"@swim/transition\";\nimport {TransitionObserver} from \"@swim/transition\";\nimport {Animator} from \"./Animator\";\n\n/** @hidden */\nexport const enum TweenState {\n  Quiesced,\n  Diverged,\n  Tracking,\n  Converged,\n  Interrupt,\n}\n\nexport abstract class TweenAnimator<T> extends Animator {\n  /** @hidden */\n  _duration: number;\n  /** @hidden */\n  _ease: Ease;\n  /** @hidden */\n  _interpolator: Interpolator<T, unknown> | null;\n  /** @hidden */\n  _observers: TransitionObserver<T>[] | null;\n  /** @hidden */\n  _interrupts: TransitionObserver<T>[] | null;\n  /** @hidden */\n  _value: T | undefined;\n  /** @hidden */\n  _state: T | undefined;\n  /** @hidden */\n  _beginTime: number;\n  /** @hidden */\n  _tweenState: TweenState;\n  /** @hidden */\n  _enabled: boolean;\n\n  constructor(value: T | undefined, transition: Transition<T> | null) {\n    super();\n    if (transition !== null) {\n      this._duration = transition._duration !== void 0 ? transition._duration : 0;\n      this._ease = transition._ease !== void 0 ? transition._ease : Ease.linear;\n      this._interpolator = transition._interpolator !== void 0 ? transition._interpolator : null;\n      this._observers = transition._observers !== void 0 ? transition._observers.slice(0) : null;\n    } else {\n      this._duration = 0;\n      this._ease = Ease.linear;\n      this._interpolator = null;\n      this._observers = null;\n    }\n    this._interrupts = null;\n    this._value = value;\n    this._state = value;\n    this._beginTime = 0;\n    this._tweenState = TweenState.Quiesced;\n    this._enabled = true;\n  }\n\n  get enabled(): boolean {\n    return this._enabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    if (enabled && !this._enabled) {\n      this._enabled = true;\n      this.didSetEnabled(true);\n    } else if (!enabled && this._enabled) {\n      this._enabled = false;\n      this.didSetEnabled(false);\n    }\n  }\n\n  protected didSetEnabled(enabled: boolean): void {\n    if (enabled) {\n      this.animate();\n    } else {\n      this.cancel();\n    }\n  }\n\n  abstract cancel(): void;\n\n  duration(): number;\n  duration(duration: number): this;\n  duration(duration?: number): number | this {\n    if (duration === void 0) {\n      return this._duration;\n    } else {\n      this._duration = Math.max(0, duration);\n      return this;\n    }\n  }\n\n  ease(): Ease;\n  ease(ease: AnyEase): this;\n  ease(ease?: AnyEase): Ease | this {\n    if (ease === void 0) {\n      return this._ease;\n    } else {\n      this._ease = Ease.fromAny(ease);\n      return this;\n    }\n  }\n\n  interpolator(): Interpolator<T, unknown> | null;\n  interpolator(interpolator: Interpolator<T, unknown> | null): this;\n  interpolator(interpolator?: Interpolator<T, unknown> | null): Interpolator<T, unknown> | null | this {\n    if (interpolator === void 0) {\n      return this._interpolator;\n    } else {\n      this._interpolator = interpolator;\n      return this;\n    }\n  }\n\n  transition(): Transition<T>;\n  transition(transition: AnyTransition<T>): this;\n  transition(transition?: AnyTransition<T>): Transition<T> | this {\n    if (transition === void 0) {\n      return new Transition(this._duration, this._ease, this._interpolator, null);\n    } else {\n      transition = Transition.fromAny(transition);\n      if (transition._duration !== void 0) {\n        this._duration = transition._duration;\n      }\n      if (transition._ease !== void 0) {\n        this._ease = transition._ease;\n      }\n      if (transition._interpolator !== void 0) {\n        this._interpolator = transition._interpolator;\n      }\n      if (transition._observers !== void 0) {\n        let observers = this._observers;\n        if (observers === null) {\n          observers = [];\n          this._observers = observers;\n        }\n        Array.prototype.push.apply(observers, transition._observers);\n      }\n      return this;\n    }\n  }\n\n  range(): ReadonlyArray<T> | null;\n  range(ys: ReadonlyArray<T>): this;\n  range(y0: T | undefined, y1: T | undefined): this;\n  range(y0?: ReadonlyArray<T> | T, y1?: T): ReadonlyArray<T> | null | this {\n    const interpolator = this._interpolator;\n    if (arguments.length === 0) {\n      return interpolator !== null ? interpolator.range() : null;\n    } else {\n      if (arguments.length === 1) {\n        y0 = y0 as ReadonlyArray<T>;\n        y1 = y0[1];\n        y0 = y0[0];\n      }\n      if (y1 === void 0) {\n        y1 = y0 as T | undefined;\n      } else if (y0 === void 0) {\n        y0 = y1;\n      }\n      if (y0 !== void 0 && y1 !== void 0) {\n        if (interpolator !== null) {\n          this._interpolator = interpolator.range(y0 as T, y1);\n        } else {\n          this._interpolator = Interpolator.between(y0 as T, y1);\n        }\n      }\n      return this;\n    }\n  }\n\n  observers(): ReadonlyArray<TransitionObserver<T>> | null;\n  observers(observers: ReadonlyArray<TransitionObserver<T>> | null): this;\n  observers(observers?: ReadonlyArray<TransitionObserver<T>> | null): ReadonlyArray<TransitionObserver<T>> | null | this {\n    if (observers === void 0) {\n      return this._observers;\n    } else {\n      this._observers = observers !== null ? observers.slice(0) : null;\n      return this;\n    }\n  }\n\n  get value(): T | undefined {\n    return this._value;\n  }\n\n  get state(): T | undefined {\n    return this._state;\n  }\n\n  setState(state: T | undefined, tween: Tween<T> = null): void {\n    const interrupts = this._observers; // get current transition observers\n    this._observers = null;\n    if (Transition.isAny(tween)) {\n      tween = Transition.fromAny(tween);\n      this.transition(tween); // may update transition observers\n    } else if (tween === false || tween === null) {\n      this._duration = 0;\n    }\n    this._interrupts = interrupts; // stash interrupted transition observers\n\n    if (state === void 0 || !tween) {\n      this._state = state;\n      this._beginTime = 0;\n      if (this._tweenState === TweenState.Tracking) {\n        this.doInterrupt(this._value);\n      }\n      this._tweenState = TweenState.Quiesced;\n      const oldValue = this._value;\n      this._value = state;\n      this._interpolator = null;\n      this.cancel();\n      if (state !== void 0) {\n        this.update(state, oldValue);\n      } else {\n        this.delete();\n      }\n    } else if (this._tweenState !== TweenState.Quiesced || !Objects.equal(this._state, state)) {\n      const value = this.value;\n      this.range(value, state);\n      this._state = state;\n      this._beginTime = 0;\n      if (this._tweenState === TweenState.Tracking) {\n        this._tweenState = TweenState.Interrupt;\n      } else {\n        this._tweenState = TweenState.Diverged;\n      }\n      this.animate();\n    }\n  }\n\n  onFrame(t: number): void {\n    if (this._tweenState === TweenState.Quiesced || !this._enabled) {\n      return;\n    }\n\n    if (this._tweenState === TweenState.Interrupt) {\n      this.doInterrupt(this._value);\n      this._tweenState = TweenState.Diverged;\n    }\n\n    if (this._tweenState === TweenState.Diverged) {\n      if (!Objects.equal(this._value, this._state)) {\n        this._beginTime = t;\n        this.doBegin(this._value);\n        this._tweenState = TweenState.Tracking;\n      } else {\n        this.tween(1);\n      }\n    }\n\n    if (this._tweenState === TweenState.Tracking) {\n      const u = this._duration !== 0 ? Math.min(Math.max(0, (t - this._beginTime) / this._duration), 1) : 1;\n      this.tween(u);\n    }\n\n    if (this._tweenState === TweenState.Converged) {\n      this._interrupts = null;\n      this._beginTime = 0;\n      this._tweenState = TweenState.Quiesced;\n      this.doEnd(this._value);\n    } else {\n      this.animate();\n    }\n  }\n\n  interpolate(u: number): T | undefined {\n    const interpolator = this._interpolator;\n    return interpolator !== null ? interpolator.interpolate(u) : this._state;\n  }\n\n  tween(u: number): void {\n    u = this._ease(u);\n    const oldValue = this._value;\n    const newValue = this.interpolate(u);\n    this._value = newValue;\n    this.update(newValue, oldValue);\n    if (u === 1) {\n      this._tweenState = TweenState.Converged;\n    }\n  }\n\n  abstract update(newValue: T | undefined, oldValue: T | undefined): void;\n\n  abstract delete(): void;\n\n  /** @hidden */\n  protected doBegin(value: T | undefined): void {\n    this.onBegin(value);\n    const observers = this._observers;\n    if (observers !== null) {\n      for (let i = 0, n = observers.length; i < n; i += 1) {\n        const observer = observers[i];\n        if (observer.onBegin !== void 0) {\n          observer.onBegin(value);\n        }\n      }\n    }\n  }\n\n  protected onBegin(value: T | undefined): void {\n    // hook\n  }\n\n  /** @hidden */\n  protected doEnd(value: T | undefined): void {\n    this.onEnd(value);\n    const observers = this._observers;\n    if (observers !== null) {\n      this._observers = null;\n      for (let i = 0, n = observers.length; i < n; i += 1) {\n        const observer = observers[i];\n        if (observer.onEnd !== void 0) {\n          observer.onEnd(value);\n        }\n      }\n    }\n  }\n\n  protected onEnd(value: T | undefined): void {\n    // hook\n  }\n\n  /** @hidden */\n  protected doInterrupt(value: T | undefined): void {\n    this.onInterrupt(value);\n    const interrupts = this._interrupts;\n    if (interrupts !== null) {\n      this._interrupts = null;\n      for (let i = 0, n = interrupts.length; i < n; i += 1) {\n        const interrupt = interrupts[i];\n        if (interrupt.onInterrupt !== void 0) {\n          interrupt.onInterrupt(value);\n        }\n      }\n    }\n  }\n\n  protected onInterrupt(value: T | undefined): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface TransitionObserver<T = unknown> {\n  onBegin?(value: T | undefined): void;\n\n  onEnd?(value: T | undefined): void;\n\n  onInterrupt?(value: T | undefined): void;\n}\n\n/** @hidden */\nexport const TransitionObserver = {\n  is(object: unknown): object is TransitionObserver {\n    if (typeof object === \"object\" && object !== null) {\n      const observer = object as TransitionObserver;\n      return typeof observer.onBegin === \"function\"\n          || typeof observer.onEnd === \"function\"\n          || typeof observer.onInterrupt === \"function\";\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {AnyEase, Ease} from \"./Ease\";\nimport {TransitionObserver} from \"./TransitionObserver\";\n\nexport type TransitionBegin<T> = (value: T | undefined) => void;\nexport type TransitionEnd<T> = (value: T | undefined) => void;\nexport type TransitionInterrupt<T> = (value: T | undefined) => void;\n\nexport type Tween<T> = AnyTransition<T> | boolean | null;\n\nexport type AnyTransition<T> = Transition<T> | TransitionInit<T>;\n\nexport interface TransitionInit<T> extends TransitionObserver<T> {\n  duration?: number | null;\n  ease?: AnyEase | null;\n  interpolator?: Interpolator<T, unknown> | null;\n}\n\nexport class Transition<T> {\n  /** @hidden */\n  readonly _duration?: number;\n  /** @hidden */\n  readonly _ease?: Ease;\n  /** @hidden */\n  readonly _interpolator?: Interpolator<T, unknown>;\n  /** @hidden */\n  readonly _observers?: ReadonlyArray<TransitionObserver<T>>;\n\n  constructor(duration: number | null, ease: Ease | null,\n              interpolator: Interpolator<T, unknown> | null,\n              observers: ReadonlyArray<TransitionObserver<T>> | null) {\n    if (duration !== null) {\n      this._duration = duration;\n    }\n    if (ease !== null) {\n      this._ease = ease;\n    }\n    if (interpolator !== null) {\n      this._interpolator = interpolator;\n    }\n    if (observers !== null) {\n      this._observers = observers;\n    }\n  }\n\n  duration(): number | null;\n  duration(duration: number | null): Transition<T>;\n  duration(duration?: number | null): number | null | Transition<T> {\n    if (duration === void 0) {\n      return this._duration !== void 0 ? this._duration : null;\n    } else {\n      return Transition.from(duration, this._ease, this._interpolator, this._observers);\n    }\n  }\n\n  ease(): Ease | null;\n  ease(ease: AnyEase | null): Transition<T>;\n  ease(ease?: AnyEase | null): Ease | null | Transition<T> {\n    if (ease === void 0) {\n      return this._ease !== void 0 ? this._ease : null;\n    } else {\n      return Transition.from(this._duration, ease, this._interpolator, this._observers);\n    }\n  }\n\n  interpolator(): Interpolator<T, unknown> | null;\n  interpolator(interpolator: Interpolator<T, unknown> | null): Transition<T>;\n  interpolator(interpolator?: Interpolator<T, unknown> | null): Interpolator<T, unknown> | null | Transition<T> {\n    if (interpolator === void 0) {\n      return this._interpolator !== void 0 ? this._interpolator : null;\n    } else {\n      return Transition.from(this._duration, this._ease, interpolator, this._observers);\n    }\n  }\n\n  range(): ReadonlyArray<T> | null;\n  range(ys: ReadonlyArray<T>): Transition<T>;\n  range(y0: T, y1: T): Transition<T>;\n  range(y0?: ReadonlyArray<T> | T, y1?: T): ReadonlyArray<T> | null | Transition<T> {\n    if (y0 === void 0) {\n      return this._interpolator !== void 0 ? this._interpolator.range() : null;\n    } else {\n      let interpolator: Interpolator<T, unknown>;\n      if (this._interpolator !== void 0) {\n        interpolator = this._interpolator.range(y0, y1);\n      } else {\n        interpolator = Interpolator.between(y0 as T, y1!);\n      }\n      return Transition.from(this._duration, this._ease, interpolator, this._observers);\n    }\n  }\n\n  observers(): ReadonlyArray<TransitionObserver<T>> | null;\n  observers(observers: ReadonlyArray<TransitionObserver<T>> | null): Transition<T>;\n  observers(observers?: ReadonlyArray<TransitionObserver<T>> | null): ReadonlyArray<TransitionObserver<T>> | null | Transition<T> {\n    if (observers === void 0) {\n      return this._observers !== void 0 ? this._observers : null;\n    } else {\n      return Transition.from(this._duration, this._ease, this._interpolator, observers);\n    }\n  }\n\n  onBegin(onBegin: TransitionBegin<T>): Transition<T> {\n    const observer: TransitionObserver<T> = {onBegin};\n    const observers = this._observers !== void 0 ? this._observers.slice(0) : [];\n    observers.push(observer);\n    return Transition.from(this._duration, this._ease, this._interpolator, observers);\n  }\n\n  onEnd(onEnd: TransitionEnd<T>): Transition<T> {\n    const observer: TransitionObserver<T> = {onEnd};\n    const observers = this._observers !== void 0 ? this._observers.slice(0) : [];\n    observers.push(observer);\n    return Transition.from(this._duration, this._ease, this._interpolator, observers);\n  }\n\n  onInterrupt(onInterrupt: TransitionInterrupt<T>): Transition<T> {\n    const observer: TransitionObserver<T> = {onInterrupt};\n    const observers = this._observers !== void 0 ? this._observers.slice(0) : [];\n    observers.push(observer);\n    return Transition.from(this._duration, this._ease, this._interpolator, observers);\n  }\n\n  toAny(): TransitionInit<T> {\n    const init: TransitionInit<T> = {};\n    if (this._duration !== void 0) {\n      init.duration = this._duration;\n    }\n    if (this._ease !== void 0) {\n      init.ease = this._ease;\n    }\n    if (this._interpolator !== void 0) {\n      init.interpolator = this._interpolator;\n    }\n    return init;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Transition) {\n      return this._duration === that._duration && this._ease === that._ease\n          && Objects.equal(this._interpolator, that._interpolator);\n    }\n    return false;\n  }\n\n  static duration<T>(duration: number, ease?: AnyEase | null,\n                     interpolator?: Interpolator<T, unknown> | null): Transition<T> {\n    ease = ease !== void 0 && ease !== null ? Ease.fromAny(ease) : null;\n    if (interpolator === void 0) {\n      interpolator = null;\n    }\n    return new Transition(duration, ease, interpolator, null);\n  }\n\n  static ease<T>(ease: AnyEase, interpolator?: Interpolator<T, unknown> | null): Transition<T> {\n    ease = Ease.fromAny(ease);\n    if (interpolator === void 0) {\n      interpolator = null;\n    }\n    return new Transition(null, ease, interpolator, null);\n  }\n\n  static interpolator<T>(interpolator: Interpolator<T, unknown>): Transition<T> {\n    return new Transition(null, null, interpolator, null);\n  }\n\n  static range<T>(y0: ReadonlyArray<T>): Transition<T>;\n  static range<T>(y0: T, y1: T): Transition<T>;\n  static range<T>(y0: ReadonlyArray<T> | T, y1?: T): Transition<T> {\n    let interpolator: Interpolator<T, unknown>;\n    if (y1 === void 0) {\n      y0 = y0 as ReadonlyArray<T>;\n      interpolator = Interpolator.between(y0[0], y0[1]);\n    } else {\n      interpolator = Interpolator.between(y0 as T, y1);\n    }\n    return new Transition(null, null, interpolator, null);\n  }\n\n  static from<T>(duration?: number | null, ease?: AnyEase | null,\n                 interpolator?: Interpolator<T, unknown> | null,\n                 observers?: ReadonlyArray<TransitionObserver<T>> | null): Transition<T> {\n    if (duration === void 0) {\n      duration = null;\n    }\n    ease = ease !== void 0 && ease !== null ? Ease.fromAny(ease) : null;\n    if (interpolator === void 0) {\n      interpolator = null;\n    }\n    if (observers === void 0) {\n      observers = null;\n    }\n    return new Transition(duration, ease, interpolator, observers);\n  }\n\n  static fromInit<T>(transition: TransitionInit<T>): Transition<T> {\n    let observers: ReadonlyArray<TransitionObserver<T>> | undefined;\n    if (TransitionObserver.is(transition)) {\n      const observer: TransitionObserver<T> = {};\n      if (transition.onBegin !== void 0) {\n        observer.onBegin = transition.onBegin;\n      }\n      if (transition.onEnd !== void 0) {\n        observer.onEnd = transition.onEnd;\n      }\n      if (transition.onInterrupt !== void 0) {\n        observer.onInterrupt = transition.onInterrupt;\n      }\n      observers = [observer];\n    }\n    return Transition.from(transition.duration, transition.ease, transition.interpolator, observers);\n  }\n\n  static fromAny<T>(transition: AnyTransition<T>): Transition<T> {\n    if (transition instanceof Transition) {\n      return transition;\n    } else if (Transition.isInit(transition)) {\n      return Transition.fromInit(transition);\n    }\n    throw new TypeError(\"\" + transition);\n  }\n\n  static forTween<T>(tween: Tween<T> | undefined, value?: T,\n                     duration: number | null = null,\n                     ease: AnyEase | null = null): Transition<T> | null {\n    if (tween instanceof Transition) {\n      return tween;\n    } else if (Transition.isInit(tween)) {\n      return Transition.fromInit(tween);\n    } else if (tween === true && value !== void 0) {\n      return Transition.from(duration, ease, Interpolator.between(value, value));\n    }\n    return null;\n  }\n\n  /** @hidden */\n  static isInit(value: unknown): value is TransitionInit<any> {\n    if (typeof value === \"object\" && value !== null) {\n      const init = value as TransitionInit<any>;\n      return init.duration !== void 0\n          || init.ease !== void 0\n          || init.interpolator !== void 0;\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static isAny(value: unknown): value is AnyTransition<any> {\n    return value instanceof Transition\n        || Transition.isInit(value);\n  }\n\n  /** @hidden */\n  static isTween(value: unknown): value is Tween<any> {\n    return Transition.isAny(value)\n        || typeof value === \"boolean\"\n        || value === null;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnimatorContext} from \"./AnimatorContext\";\n\nexport abstract class Animator implements AnimatorContext {\n  abstract animate(animator?: Animator): void;\n\n  abstract onFrame(t: number): void;\n\n  abstract cancel(): void;\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Animator} from \"./Animator\";\n\nexport abstract class FrameAnimator extends Animator {\n  /** @hidden */\n  _animationFrame: number;\n  /** @hidden */\n  _enabled: boolean;\n\n  constructor() {\n    super();\n    this._animationFrame = 0;\n    this._enabled = true;\n  }\n\n  get enabled(): boolean {\n    return this._enabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    if (enabled && !this._enabled) {\n      this._enabled = true;\n      this.didSetEnabled(true);\n    } else if (!enabled && this._enabled) {\n      this._enabled = false;\n      this.didSetEnabled(false);\n    }\n  }\n\n  protected didSetEnabled(enabled: boolean): void {\n    if (enabled) {\n      this.animate();\n    } else {\n      this.cancel();\n    }\n  }\n\n  animate(animator: Animator = this): void {\n    if (this._animationFrame === 0 && this._enabled) {\n      if (!this.hasOwnProperty(\"onAnimationFrame\")) {\n        this.onAnimationFrame = this.onAnimationFrame.bind(this);\n      }\n      this._animationFrame = requestAnimationFrame(this.onAnimationFrame);\n    }\n  }\n\n  cancel(): void {\n    if (this._animationFrame !== 0) {\n      cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = 0;\n    }\n  }\n\n  protected onAnimationFrame(timestamp: number): void {\n    this._animationFrame = 0;\n    this.onFrame(timestamp);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnimatorContext} from \"./AnimatorContext\";\nimport {Animator} from \"./Animator\";\n\nexport abstract class ChildAnimator extends Animator {\n  abstract get parent(): AnimatorContext | null;\n\n  animate(animator: Animator = this): void {\n    const parent = this.parent;\n    if (parent !== null) {\n      parent.animate(animator);\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Transition} from \"@swim/transition\";\nimport {TweenAnimator} from \"./TweenAnimator\";\n\nexport abstract class TweenFrameAnimator<T> extends TweenAnimator<T> {\n  /** @hidden */\n  _animationFrame: number;\n\n  constructor(value: T | undefined, transition: Transition<T> | null) {\n    super(value, transition);\n    this._animationFrame = 0;\n  }\n\n  animate(): void {\n    if (this._animationFrame === 0 && this._enabled) {\n      if (!this.hasOwnProperty(\"onAnimationFrame\")) {\n        this.onAnimationFrame = this.onAnimationFrame.bind(this);\n      }\n      this._animationFrame = requestAnimationFrame(this.onAnimationFrame);\n    }\n  }\n\n  cancel(): void {\n    if (this._animationFrame !== 0) {\n      cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = 0;\n    }\n  }\n\n  protected onAnimationFrame(timestamp: number): void {\n    this._animationFrame = 0;\n    this.onFrame(timestamp);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Transition} from \"@swim/transition\";\nimport {AnimatorContext} from \"./AnimatorContext\";\nimport {Animator} from \"./Animator\";\nimport {TweenAnimator} from \"./TweenAnimator\";\n\nexport class TweenChildAnimator<T> extends TweenAnimator<T> {\n  parent: AnimatorContext | null;\n\n  constructor(parent: AnimatorContext | null, value: T | undefined, transition: Transition<T> | null) {\n    super(value, transition);\n    this.parent = parent;\n  }\n\n  animate(animator: Animator = this): void {\n    const parent = this.parent;\n    if (parent !== null && this._enabled) {\n      parent.animate(animator);\n    }\n  }\n\n  update(newValue: T | undefined, oldValue: T | undefined): void {\n    // hook\n  }\n\n  cancel(): void {\n    // nop\n  }\n\n  delete(): void {\n    // nop\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {Transition} from \"@swim/transition\";\nimport {TweenFrameAnimator} from \"./TweenFrameAnimator\";\n\nexport class PropertyAnimator<O, K extends keyof O> extends TweenFrameAnimator<O[K]> {\n  readonly target: O;\n  readonly key: K;\n\n  constructor(target: O, key: K, value: O[K] | undefined, transition: Transition<O[K]> | null = null) {\n    super(value, transition);\n    this.target = target;\n    this.key = key;\n  }\n\n  update(newValue: O[K] | undefined, oldValue: O[K] | undefined): void {\n    if (!Objects.equal(oldValue, newValue)) {\n      this.willUpdate(newValue, oldValue);\n      this.onUpdate(newValue, oldValue);\n      this.didUpdate(newValue, oldValue);\n    }\n  }\n\n  protected willUpdate(newValue: O[K] | undefined, oldValue: O[K] | undefined): void {\n    // hook\n  }\n\n  protected onUpdate(newValue: O[K] | undefined, oldValue: O[K] | undefined): void {\n    this.target[this.key] = newValue!;\n  }\n\n  protected didUpdate(newValue: O[K] | undefined, oldValue: O[K] | undefined): void {\n    // hook\n  }\n\n  delete(): void {\n    delete this.target[this.key];\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Parser, Diagnostic, Unicode} from \"@swim/codec\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Form} from \"@swim/structure\";\nimport {AnyDateTime, DateTime} from \"@swim/time\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color, RgbColorInit, HslColorInit} from \"@swim/color\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {AnyBoxShadow, BoxShadowInit, BoxShadow} from \"@swim/shadow\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Scale} from \"@swim/scale\";\nimport {AnyTransition, TransitionInit, Transition} from \"@swim/transition\";\nimport {StyleValueParser} from \"./StyleValueParser\";\nimport {StyleValueForm} from \"./StyleValueForm\";\nimport {StyleInterpolatorForm} from \"./StyleInterpolatorForm\";\nimport {StyleScaleForm} from \"./StyleScaleForm\";\nimport {StyleTransitionForm} from \"./StyleTransitionForm\";\n\nexport type AnyStyleValue = AnyDateTime\n                          | AnyAngle\n                          | AnyLength\n                          | AnyColor | RgbColorInit | HslColorInit\n                          | AnyFont\n                          | AnyBoxShadow | BoxShadowInit\n                          | AnyTransform\n                          | Interpolator<any>\n                          | Scale<any, any>\n                          | AnyTransition<any> | TransitionInit<any>\n                          | number\n                          | boolean;\n\nexport type StyleValue = DateTime\n                       | Angle\n                       | Length\n                       | Color\n                       | Font\n                       | BoxShadow\n                       | Transform\n                       | Interpolator<any>\n                       | Scale<any, any>\n                       | Transition<any>\n                       | number\n                       | boolean;\n\nexport const StyleValue = {\n  fromAny(value: AnyStyleValue): StyleValue {\n    if (value instanceof DateTime\n        || value instanceof Angle\n        || value instanceof Length\n        || value instanceof Color\n        || value instanceof Font\n        || value instanceof BoxShadow\n        || value instanceof Transform\n        || value instanceof Interpolator\n        || value instanceof Scale\n        || value instanceof Transition\n        || typeof value === \"number\"\n        || typeof value === \"boolean\") {\n      return value;\n    } else if (value instanceof Date || DateTime.isInit(value)) {\n      return DateTime.fromAny(value);\n    } else if (Color.isInit(value)) {\n      return Color.fromAny(value);\n    } else if (Font.isInit(value)) {\n      return Font.fromAny(value);\n    } else if (BoxShadow.isInit(value)) {\n      return BoxShadow.fromAny(value);\n    } else if (Transition.isInit(value)) {\n      return Transition.fromAny(value);\n    } else if (typeof value === \"string\") {\n      return StyleValue.parse(value);\n    }\n    throw new TypeError(\"\" + value);\n  },\n\n  parse(input: Input | string): StyleValue {\n    if (typeof input === \"string\") {\n      input = Unicode.stringInput(input);\n    }\n    while (input.isCont() && Unicode.isWhitespace(input.head())) {\n      input = input.step();\n    }\n    let parser = StyleValue.Parser.parse(input);\n    if (parser.isDone()) {\n      while (input.isCont() && Unicode.isWhitespace(input.head())) {\n        input = input.step();\n      }\n    }\n    if (input.isCont() && !parser.isError()) {\n      parser = Parser.error(Diagnostic.unexpected(input));\n    }\n    return parser.bind();\n  },\n\n  /** @hidden */\n  _form: void 0 as Form<StyleValue, AnyStyleValue> | undefined,\n  form(unit?: AnyStyleValue): Form<StyleValue, AnyStyleValue> {\n    if (unit !== void 0) {\n      unit = StyleValue.fromAny(unit);\n      return new StyleValue.Form(unit as StyleValue);\n    } else {\n      if (StyleValue._form === void 0) {\n        StyleValue._form = new StyleValue.Form();\n      }\n      return StyleValue._form;\n    }\n  },\n\n  /** @hidden */\n  _interpolatorForm: void 0 as Form<Interpolator<StyleValue, AnyStyleValue>> | undefined,\n  interpolatorForm(unit?: Interpolator<StyleValue, AnyStyleValue>): Form<Interpolator<StyleValue, AnyStyleValue>> {\n    if (unit !== void 0) {\n      return new StyleValue.InterpolatorForm(unit);\n    } else {\n      if (StyleValue._interpolatorForm === void 0) {\n        StyleValue._interpolatorForm = new StyleValue.InterpolatorForm();\n      }\n      return StyleValue._interpolatorForm;\n    }\n  },\n\n  /** @hidden */\n  _scaleForm: void 0 as Form<Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>> | undefined,\n  scaleForm(unit?: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>): Form<Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>> {\n    if (unit !== void 0) {\n      return new StyleValue.ScaleForm(unit);\n    } else {\n      if (StyleValue._scaleForm === void 0) {\n        StyleValue._scaleForm = new StyleValue.ScaleForm();\n      }\n      return StyleValue._scaleForm;\n    }\n  },\n\n  /** @hidden */\n  _transitionForm: void 0 as Form<Transition<StyleValue>, AnyTransition<StyleValue>> | undefined,\n  transitionForm(unit: AnyTransition<StyleValue> | null = null): Form<Transition<StyleValue>, AnyTransition<StyleValue>> {\n    if (unit !== null) {\n      unit = Transition.fromAny(unit);\n      return new StyleValue.TransitionForm(unit || void 0);\n    } else {\n      if (StyleValue._transitionForm === void 0) {\n        StyleValue._transitionForm = new StyleValue.TransitionForm();\n      }\n      return StyleValue._transitionForm;\n    }\n  },\n\n  // Forward type declarations\n  /** @hidden */\n  Parser: void 0 as any as typeof StyleValueParser, // defined by StyleValueParser\n  /** @hidden */\n  Form: void 0 as any as typeof StyleValueForm, // defined by StyleValueForm\n  /** @hidden */\n  InterpolatorForm: void 0 as any as typeof StyleInterpolatorForm, // defined by StyleInterpolatorForm\n  /** @hidden */\n  ScaleForm: void 0 as any as typeof StyleScaleForm, // defined by StyleScaleForm\n  /** @hidden */\n  TransitionForm: void 0 as any as typeof StyleTransitionForm, // defined by StyleTransitionForm\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Input, Output, Parser, Diagnostic, Unicode, Base10} from \"@swim/codec\";\nimport {DateTimeInit, DateTimeFormat} from \"@swim/time\";\nimport {Angle} from \"@swim/angle\";\nimport {Length} from \"@swim/length\";\nimport {Color, HexColorParser, RgbColorParser, HslColorParser} from \"@swim/color\";\nimport {FontWeight, FontParser} from \"@swim/font\";\nimport {\n  Transform,\n  TranslateTransformParser,\n  ScaleTransformParser,\n  RotateTransformParser,\n  SkewTransformParser,\n  AffineTransformParser,\n} from \"@swim/transform\";\nimport {StyleValue} from \"./StyleValue\";\n\nconst ISO_8601_REST = DateTimeFormat.pattern('%m-%dT%H:%M:%S.%LZ');\n\n/** @hidden */\nexport class StyleValueParser extends Parser<StyleValue> {\n  private readonly identOutput: Output<string> | undefined;\n  private readonly valueParser: Parser<number> | undefined;\n  private readonly unitsOutput: Output<String> | undefined;\n  private readonly step: number | undefined;\n\n  constructor(identOutput?: Output<string>, valueParser?: Parser<number>,\n              unitsOutput?: Output<String>, step?: number) {\n    super();\n    this.identOutput = identOutput;\n    this.valueParser = valueParser;\n    this.unitsOutput = unitsOutput;\n    this.step = step;\n  }\n\n  feed(input: Input): Parser<StyleValue> {\n    return StyleValueParser.parse(input, this.identOutput, this.valueParser,\n                                  this.unitsOutput, this.step);\n  }\n\n  static parse(input: Input, identOutput?: Output<string>, valueParser?: Parser<number>,\n               unitsOutput?: Output<String>, step: number = 1): Parser<StyleValue> {\n    let c = 0;\n    if (step === 1) {\n      while (input.isCont() && (c = input.head(), Unicode.isSpace(c))) {\n        input.step();\n      }\n      if (input.isCont()) {\n        if (c === 35/*'#'*/) {\n          return HexColorParser.parse(input);\n        } else if (Unicode.isAlpha(c)) {\n          step = 2;\n        } else {\n          step = 3;\n        }\n      } else if (!input.isEmpty()) {\n        return Parser.error(Diagnostic.unexpected(input));\n      }\n    }\n    if (step === 2) {\n      identOutput = identOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 45/*'-'*/)) {\n        input = input.step();\n        identOutput.write(c);\n      }\n      if (!input.isEmpty()) {\n        const ident = identOutput.bind();\n        switch (ident) {\n          case \"rgb\":\n          case \"rgba\": return RgbColorParser.parseRest(input);\n\n          case \"hsl\":\n          case \"hsla\": return HslColorParser.parseRest(input);\n\n          case \"normal\":\n          case \"italic\":\n          case \"oblique\": return FontParser.parseRest(input, ident);\n          case \"small-caps\": return FontParser.parseRest(input, void 0, ident);\n          case \"bold\":\n          case \"bolder\":\n          case \"lighter\": return FontParser.parseRest(input, void 0, void 0, ident);\n          case \"ultra-condensed\":\n          case \"extra-condensed\":\n          case \"semi-condensed\":\n          case \"condensed\":\n          case \"expanded\":\n          case \"semi-expanded\":\n          case \"extra-expanded\":\n          case \"ultra-expanded\": return FontParser.parseRest(input, void 0, void 0, void 0, ident);\n          case \"large\":\n          case \"larger\":\n          case \"medium\":\n          case \"small\":\n          case \"smaller\":\n          case \"x-large\":\n          case \"x-small\":\n          case \"xx-large\":\n          case \"xx-small\": return FontParser.parseRest(input, void 0, void 0, void 0, void 0, ident);\n\n          case \"translateX\":\n          case \"translateY\":\n          case \"translate\": return TranslateTransformParser.parseRest(input, identOutput);\n          case \"scaleX\":\n          case \"scaleY\":\n          case \"scale\": return ScaleTransformParser.parseRest(input, identOutput);\n          case \"rotate\": return RotateTransformParser.parseRest(input, identOutput);\n          case \"skewX\":\n          case \"skewY\":\n          case \"skew\": return SkewTransformParser.parseRest(input, identOutput);\n          case \"matrix\": return AffineTransformParser.parseRest(input, identOutput);\n          case \"none\": return Parser.done(Transform.identity());\n\n          case \"true\": return Parser.done(true);\n          case \"false\": return Parser.done(false);\n          default:\n            const color = Color.fromName(ident);\n            if (color !== void 0) {\n              return Parser.done(color);\n            }\n            return Parser.error(Diagnostic.message(\"unknown style value: \" + ident, input));\n        }\n      }\n    }\n    if (step === 3) {\n      if (valueParser === void 0) {\n        valueParser = Base10.parseDecimal(input);\n      } else {\n        valueParser = valueParser.feed(input);\n      }\n      if (valueParser.isDone()) {\n        step = 4;\n      } else if (valueParser.isError()) {\n        return valueParser.asError();\n      }\n    }\n    if (step === 4) {\n      if (input.isCont() && (c = input.head(), c === 45/*'-'*/)) {\n        input.step();\n        const date = {} as DateTimeInit;\n        date.year = valueParser!.bind();\n        return ISO_8601_REST.parseDate(input, date);\n      } else if (!input.isEmpty()) {\n        step = 5;\n      }\n    }\n    if (step === 5) {\n      unitsOutput = unitsOutput || Unicode.stringOutput();\n      while (input.isCont() && (c = input.head(), Unicode.isAlpha(c) || c === 37/*'%'*/)) {\n        input.step();\n        unitsOutput.push(c);\n      }\n      if (!input.isEmpty()) {\n        step = 6;\n      }\n    }\n    if (step === 6) {\n      if (!input.isEmpty()) {\n        const value = valueParser!.bind();\n        const units = unitsOutput!.bind();\n        let styleValue: Angle | Length | number;\n        switch (units) {\n          case \"deg\": styleValue = Angle.deg(value); break;\n          case \"rad\": styleValue = Angle.rad(value); break;\n          case \"grad\": styleValue = Angle.grad(value); break;\n          case \"turn\": styleValue = Angle.turn(value); break;\n\n          case \"px\": styleValue = Length.px(value); break;\n          case \"em\": styleValue = Length.em(value); break;\n          case \"rem\": styleValue = Length.rem(value); break;\n          case \"%\": styleValue = Length.pct(value); break;\n\n          case \"\": styleValue = value; break;\n          default: return Parser.error(Diagnostic.message(\"unknown style units: \" + units, input));\n        }\n        if (input.isCont() && (c = input.head(), Unicode.isSpace(c) || c === 47/*'/'*/)) {\n          if (styleValue instanceof Length) {\n            return FontParser.parseRest(input, void 0, void 0, void 0, void 0, styleValue as Length);\n          } else if (typeof styleValue === \"number\") {\n            switch (value) {\n              case 100:\n              case 200:\n              case 300:\n              case 400:\n              case 500:\n              case 600:\n              case 700:\n              case 800:\n              case 900: return FontParser.parseRest(input, void 0, void 0, String(value) as FontWeight);\n            }\n          }\n        }\n        return Parser.done(styleValue);\n      }\n    }\n    return new StyleValueParser(identOutput, valueParser, unitsOutput, step);\n  }\n}\nStyleValue.Parser = StyleValueParser;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Record, Num, Bool, Form} from \"@swim/structure\";\nimport {DateTime} from \"@swim/time\";\nimport {Angle} from \"@swim/angle\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {Font} from \"@swim/font\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {Transform} from \"@swim/transform\";\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Scale} from \"@swim/scale\";\nimport {Transition} from \"@swim/transition\";\nimport {AnyStyleValue, StyleValue} from \"./StyleValue\";\n\n/** @hidden */\nexport class StyleValueForm extends Form<StyleValue, AnyStyleValue> {\n  readonly _unit: StyleValue | undefined;\n\n  constructor(unit?: StyleValue) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): StyleValue | undefined;\n  unit(unit: AnyStyleValue | undefined): Form<StyleValue, AnyStyleValue>;\n  unit(unit?: AnyStyleValue | undefined): StyleValue | undefined | Form<StyleValue, AnyStyleValue> {\n    if (arguments.length === 0) {\n      return this._unit as StyleValue;\n    } else {\n      unit = unit !== void 0 ? StyleValue.fromAny(unit) : void 0;\n      return new StyleValueForm(unit as StyleValue | undefined);\n    }\n  }\n\n  mold(value: AnyStyleValue): Item {\n    if (value !== void 0) {\n      value = StyleValue.fromAny(value);\n      if (value instanceof DateTime) {\n        return DateTime.form().mold(value);\n      } else if (value instanceof Angle) {\n        return Angle.form().mold(value);\n      } else if (value instanceof Length) {\n        return Length.form().mold(value);\n      } else if (value instanceof Color) {\n        return Color.form().mold(value);\n      } else if (value instanceof Font) {\n        return Font.form().mold(value);\n      } else if (value instanceof BoxShadow) {\n        return BoxShadow.form().mold(value);\n      } else if (value instanceof Transform) {\n        return Transform.form().mold(value);\n      } else if (value instanceof Interpolator) {\n        return StyleValue.interpolatorForm().mold(value);\n      } else if (value instanceof Scale) {\n        return StyleValue.scaleForm().mold(value);\n      } else if (value instanceof Transition) {\n        return StyleValue.transitionForm().mold(value);\n      } else if (typeof value === \"number\") {\n        return Num.from(value);\n      }\n      throw new TypeError(\"\" + value);\n    } else {\n      return Item.extant();\n    }\n  }\n\n  cast(item: Item): StyleValue | undefined {\n    const value = item.toValue();\n    if (value instanceof Num) {\n      return value.numberValue();\n    }\n    if (value instanceof Bool) {\n      return value.booleanValue();\n    }\n    const string = value.stringValue(void 0);\n    if (string !== void 0) {\n      try {\n        return StyleValue.parse(string);\n      } catch (e) {\n        // swallow\n      }\n    }\n    if (value instanceof Record) {\n      const date = DateTime.fromValue(value);\n      if (date !== void 0) {\n        return date;\n      }\n      const angle = Angle.fromValue(value);\n      if (angle !== void 0) {\n        return angle;\n      }\n      const length = Length.fromValue(value);\n      if (length !== void 0) {\n        return length;\n      }\n      const color = Color.fromValue(value);\n      if (color !== void 0) {\n        return color;\n      }\n      const font = Font.fromValue(value);\n      if (font !== void 0) {\n        return font;\n      }\n      const boxShadow = BoxShadow.fromValue(value);\n      if (boxShadow !== void 0) {\n        return boxShadow;\n      }\n      const transform = Transform.fromValue(value);\n      if (transform !== void 0) {\n        return transform;\n      }\n      const interpolator = StyleValue.interpolatorForm().cast(value);\n      if (interpolator !== void 0) {\n        return interpolator;\n      }\n      const scale = StyleValue.scaleForm().cast(value);\n      if (scale !== void 0) {\n        return scale;\n      }\n      const transition = StyleValue.transitionForm().cast(value);\n      if (transition !== void 0) {\n        return transition;\n      }\n    }\n    return void 0;\n  }\n}\nStyleValue.Form = StyleValueForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Interpolator} from \"@swim/interpolate\";\nimport {Item, Attr, Record, Form} from \"@swim/structure\";\nimport {AnyStyleValue, StyleValue} from \"./StyleValue\";\n\n/** @hidden */\nexport class StyleInterpolatorForm extends Form<Interpolator<StyleValue, AnyStyleValue>> {\n  /** @hidden */\n  readonly _unit: Interpolator<StyleValue, AnyStyleValue> | undefined;\n\n  constructor(unit?: Interpolator<StyleValue, AnyStyleValue>) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Interpolator<StyleValue, AnyStyleValue> | undefined;\n  unit(unit: Interpolator<StyleValue, AnyStyleValue> | undefined): Form<Interpolator<StyleValue, AnyStyleValue>>;\n  unit(unit?: Interpolator<StyleValue, AnyStyleValue> | undefined): Interpolator<StyleValue, AnyStyleValue> | undefined | Form<Interpolator<StyleValue, AnyStyleValue>> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new StyleInterpolatorForm(unit);\n    }\n  }\n\n  mold(interpolator: Interpolator<StyleValue, AnyStyleValue> | undefined): Item {\n    if (interpolator !== void 0) {\n      const valueForm = StyleValue.form();\n      const a = valueForm.mold(interpolator.interpolate(0));\n      const b = valueForm.mold(interpolator.interpolate(1));\n      if (a.isDefined() && b.isDefined()) {\n        return Record.of(Attr.of(\"interpolate\", Record.of(a, b)));\n      }\n    }\n    return Item.extant();\n  }\n\n  cast(item: Item): Interpolator<StyleValue, AnyStyleValue> | undefined {\n    const value = item.toValue();\n    const header = value.header(\"interpolate\");\n    if (header.length >= 2) {\n      const valueForm = StyleValue.form();\n      const a = valueForm.cast(header.getItem(0).toValue());\n      const b = valueForm.cast(header.getItem(1).toValue());\n      if (a !== void 0 && b !== void 0) {\n        return Interpolator.between(a, b);\n      }\n    }\n    return void 0;\n  }\n}\nStyleValue.InterpolatorForm = StyleInterpolatorForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Attr, Value, Record, Form} from \"@swim/structure\";\nimport {Scale, ContinuousScale} from \"@swim/scale\";\nimport {AnyStyleValue, StyleValue} from \"./StyleValue\";\n\n/** @hidden */\nexport class StyleScaleForm extends Form<Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>> {\n  /** @hidden */\n  readonly _unit: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined;\n\n  constructor(unit?: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined;\n  unit(unit: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined): Form<Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>>;\n  unit(unit?: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined): Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined | Form<Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>> {\n    if (arguments.length === 0) {\n      return this._unit;\n    } else {\n      return new StyleScaleForm(unit);\n    }\n  }\n\n  mold(scale: Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue>): Item {\n    if (scale instanceof ContinuousScale) {\n      const valueForm = StyleValue.form();\n      const domain = scale.domain();\n      const x0 = valueForm.mold(domain[0]);\n      const x1 = valueForm.mold(domain[1]);\n      const header = Record.of(x0, x1);\n      let record = Record.of(Attr.of(\"scale\", header));\n      const f = StyleValue.interpolatorForm().mold(scale.interpolator());\n      if (f.isDefined()) {\n        record = record.concat(f);\n      }\n      return record;\n    } else {\n      return Item.extant();\n    }\n  }\n\n  cast(item: Item): Scale<StyleValue, StyleValue, AnyStyleValue, AnyStyleValue> | undefined {\n    const value = item.toValue();\n    const header = value.header(\"scale\");\n    if (header.length >= 2) {\n      const valueForm = StyleValue.form();\n      let x0: StyleValue | undefined;\n      let x1: StyleValue | undefined;\n      header.forEach(function (item: Item, index: number): void {\n        if (item instanceof Value) {\n          if (index === 0) {\n            x0 = item.cast(valueForm, x0);\n          } else if (index === 1) {\n            x1 = item.cast(valueForm, x1);\n          }\n        }\n      }, this);\n      const fx = StyleValue.interpolatorForm().cast(value.body());\n      if (x0 !== void 0 && x1 !== void 0 && fx !== void 0) {\n        return Scale.from(x0, x1, fx);\n      }\n    }\n    return void 0;\n  }\n}\nStyleValue.ScaleForm = StyleScaleForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, Attr, Value, Record, Form} from \"@swim/structure\";\nimport {Ease, AnyTransition, Transition} from \"@swim/transition\";\nimport {StyleValue} from \"./StyleValue\";\n\n/** @hidden */\nexport class StyleTransitionForm extends Form<Transition<StyleValue>, AnyTransition<StyleValue>> {\n  /** @hidden */\n  readonly _unit: Transition<StyleValue> | undefined;\n\n  constructor(unit?: Transition<StyleValue>) {\n    super();\n    this._unit = unit;\n  }\n\n  unit(): Transition<StyleValue> | undefined;\n  unit(unit: AnyTransition<StyleValue> | undefined): Form<Transition<StyleValue>>;\n  unit(unit?: AnyTransition<StyleValue> | undefined): Transition<StyleValue> | undefined | Form<Transition<StyleValue>> {\n    if (unit === void 0) {\n      return this._unit;\n    } else {\n      unit = Transition.fromAny(unit);\n      return new StyleTransitionForm(unit);\n    }\n  }\n\n  mold(transition: AnyTransition<StyleValue>): Item {\n    if (transition !== void 0) {\n      transition = Transition.fromAny(transition);\n      const header = Record.create();\n      if (transition._duration !== void 0) {\n        header.slot(\"duration\", transition._duration);\n      }\n      if (transition._ease !== void 0) {\n        header.slot(\"ease\", Ease.form().mold(transition._ease));\n      }\n      let record = Record.of(Attr.of(\"transition\", header));\n      if (transition._interpolator !== void 0) {\n        const interpolator = StyleValue.interpolatorForm().mold(transition._interpolator);\n        if (interpolator.isDefined()) {\n          record = record.concat(interpolator);\n        }\n      }\n      return record;\n    } else {\n      return Item.extant();\n    }\n  }\n\n  cast(item: Item): Transition<StyleValue> | undefined {\n    const value = item.toValue();\n    const header = value.header(\"transition\");\n    if (header.length >= 2) {\n      let duration: number | null = null;\n      let ease: Ease | null = null;\n      header.forEach(function (item: Item, index: number): void {\n        const key = item.key.stringValue(void 0);\n        if (key !== void 0) {\n          if (key === \"duration\") {\n            duration = item.toValue().numberValue(duration);\n          } else if (key === \"ease\") {\n            ease = item.toValue().cast(Ease.form(), ease);\n          }\n        } else if (item instanceof Value) {\n          if (index === 0) {\n            duration = item.numberValue(duration);\n          } else if (index === 1) {\n            ease = item.cast(Ease.form(), ease);\n          }\n        }\n      }, this);\n      const interpolator = StyleValue.interpolatorForm().cast(value.body());\n      return Transition.from(duration, ease, interpolator);\n    }\n    return void 0;\n  }\n}\nStyleValue.TransitionForm = StyleTransitionForm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface AttributeString {\n  toAttributeString(): string;\n}\n\nexport function AttributeString(value: unknown): string {\n  if (typeof value === \"object\" && value !== null && typeof (value as AttributeString).toAttributeString === \"function\") {\n    return (value as AttributeString).toAttributeString();\n  } else {\n    return \"\" + value;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface StyleString {\n  toStyleString(): string;\n}\n\nexport function StyleString(value: unknown): string {\n  if (typeof value === \"object\" && value !== null && typeof (value as StyleString).toStyleString === \"function\") {\n    return (value as StyleString).toStyleString();\n  } else {\n    return \"\" + value;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport type AnyRenderer = Renderer | RendererType;\n\nexport type RendererType = \"canvas\" | \"webgl\";\n\nexport abstract class Renderer {\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* tslint:disable: variable-name */\n\nimport {DrawingContext} from \"./DrawingContext\";\n\nconst PI = Math.PI;\nconst TAU = 2 * PI;\nconst EPSILON = 1e-6;\n\nexport class PathContext implements DrawingContext {\n  private x0: number | null;\n  private y0: number | null;\n  private x1: number | null;\n  private y1: number | null;\n  private d: string;\n\n  constructor() {\n    this.x0 = null;\n    this.y0 = null;\n    this.x1 = null;\n    this.y1 = null;\n    this.d = \"\";\n  }\n\n  moveTo(x: number, y: number): void {\n    this.d += \"M\" + (this.x0 = this.x1 = x) + \",\" + (this.y0 = this.y1 = y);\n  }\n\n  closePath(): void {\n    if (this.x1 !== undefined) {\n      this.x1 = this.x0;\n      this.y1 = this.y0;\n      this.d += \"Z\";\n    }\n  }\n\n  lineTo(x: number, y: number): void {\n    this.d += \"L\" + (this.x1 = x) + \",\" + (this.y1 = y);\n  }\n\n  quadraticCurveTo(x1: number, y1: number, x: number, y: number): void {\n    this.d += \"Q\" + x1 + \",\" + y1 + \",\" + (this.x1 = x) + \",\" + (this.y1 = y);\n  }\n\n  bezierCurveTo(x1: number, y1: number, x2: number, y2: number, x: number, y: number): void {\n    this.d += \"C\" + x1 + \",\" + y1 + \",\" + x2 + \",\" + y2 + \",\" + (this.x1 = x) + \",\" + (this.y1 = y);\n  }\n\n  arcTo(x1: number, y1: number, x2: number, y2: number, r: number): void {\n    const x0 = +(this.x1 as any);\n    const y0 = +(this.y1 as any);\n    const x21 = x2 - x1;\n    const y21 = y2 - y1;\n    const x01 = x0 - x1;\n    const y01 = y0 - y1;\n    const l01_2 = x01 * x01 + y01 * y01;\n\n    if (r < 0) {\n      throw new Error(\"negative radius: \" + r);\n    } else if (this.x1 === null) {\n      // empty path\n      this.d += \"M\" + (this.x1 = x1) + \",\" + (this.y1 = y1);\n    } else if (!(l01_2 > EPSILON)) {\n      // coincident endpoints\n    } else if (!(Math.abs(y01 * x21 - y21 * x01) > EPSILON) || r === 0) {\n      // colinear control points\n      this.d += \"L\" + (this.x1 = x1) + \",\" + (this.y1 = y1);\n    } else {\n      const x20 = x2 - x0;\n      const y20 = y2 - y0;\n      const l21_2 = x21 * x21 + y21 * y21;\n      const l20_2 = x20 * x20 + y20 * y20;\n      const l21 = Math.sqrt(l21_2);\n      const l01 = Math.sqrt(l01_2);\n      const l = r * Math.tan((PI - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2);\n      const t01 = l / l01;\n      const t21 = l / l21;\n      if (Math.abs(t01 - 1) > EPSILON) {\n        // line to start tangent\n        this.d += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n      this.d += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" +\n                (this.x1 = x1 + t21 * x21) + \",\" + (this.y1 = y1 + t21 * y21);\n    }\n  }\n\n  arc(x: number, y: number, r: number, a0: number, a1: number, ccw: boolean = false): void {\n    const dx = r * Math.cos(a0);\n    const dy = r * Math.sin(a0);\n    const x0 = x + dx;\n    const y0 = y + dy;\n    const cw = 1 ^ +ccw;\n    let da = ccw ? a0 - a1 : a1 - a0;\n\n    if (r < 0) {\n      throw new Error(\"negative radius: \" + r);\n    } else if (this.x1 === null) {\n      // empty path\n      this.d += \"M\" + x0 + \",\" + y0;\n    } else if (Math.abs(+(this.x1 as any) - x0) > EPSILON || Math.abs(+(this.y1 as any) - y0) > EPSILON) {\n      // line to start point\n      this.d += \"L\" + x0 + \",\" + y0;\n    }\n\n    if (r === 0) {\n      return;\n    } else if (da < 0) {\n      // reverse direction\n      da = da % TAU + TAU;\n    }\n\n    if (da > TAU - EPSILON) {\n      // complete circle\n      this.d += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) +\n                \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this.x1 = x0) + \",\" + (this.y1 = y0);\n    } else if (da > EPSILON) {\n      // non-zero arc angle\n      this.d += \"A\" + r + \",\" + r + \",0,\" + (+(da >= PI)) + \",\" + cw + \",\" +\n                (this.x1 = x + r * Math.cos(a1)) + \",\" + (this.y1 = y + r * Math.sin(a1));\n    }\n  }\n\n  rect(x: number, y: number, w: number, h: number): void {\n    this.d += \"M\" + (this.x0 = this.x1 = x) + \",\" + (this.y0 = this.y1 = y) + \"h\" + w + \"v\" + h + \"h\" + -w + \"Z\";\n  }\n\n  toString(): string {\n    return this.d;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Renderer} from \"./Renderer\";\nimport {PathContext} from \"./PathContext\";\n\nexport class PathRenderer extends Renderer {\n  /** @hidden */\n  readonly _context: PathContext;\n\n  constructor(context: PathContext = new PathContext()) {\n    super();\n    this._context = context;\n  }\n\n  get context(): PathContext {\n    return this._context;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Renderer} from \"./Renderer\";\nimport {CanvasContext} from \"./CanvasContext\";\n\nexport class CanvasRenderer extends Renderer {\n  /** @hidden */\n  readonly _context: CanvasContext;\n  /** @hidden */\n  readonly _pixelRatio: number;\n\n  constructor(context: CanvasContext, pixelRatio: number = window.devicePixelRatio || 1) {\n    super();\n    this._context = context;\n    this._pixelRatio = pixelRatio;\n  }\n\n  get context(): CanvasContext {\n    return this._context;\n  }\n\n  get pixelRatio(): number {\n    return this._pixelRatio;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Renderer} from \"./Renderer\";\nimport {WebGLContext} from \"./WebGLContext\";\n\nexport class WebGLRenderer extends Renderer {\n  /** @hidden */\n  readonly _context: WebGLContext;\n  /** @hidden */\n  readonly _pixelRatio: number;\n\n  constructor(context: WebGLContext, pixelRatio: number = window.devicePixelRatio || 1) {\n    super();\n    this._context = context;\n    this._pixelRatio = pixelRatio;\n  }\n\n  get context(): WebGLContext {\n    return this._context;\n  }\n\n  get pixelRatio(): number {\n    return this._pixelRatio;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Iterator, Map} from \"@swim/util\";\n\n/** @hidden */\nexport interface ConstraintKey {\n  id: number;\n}\n\n/** @hidden */\nexport class ConstraintMap<K extends ConstraintKey, V> implements Map<K, V> {\n  /** @hidden */\n  _index: {[id: number]: number | undefined};\n  /** @hidden */\n  readonly _array: Array<[K, V]>;\n\n  constructor(index: {[id: number]: number | undefined} = {}, array: Array<[K, V]> = []) {\n    this._index = index;\n    this._array = array;\n  }\n\n  get size(): number {\n    return this._array.length;\n  }\n\n  isEmpty(): boolean {\n    return this._array.length === 0;\n  }\n\n  has(key: K): boolean {\n    return this._index[key.id] !== void 0;\n  }\n\n  get(key: K): V | undefined {\n    const index = this._index[key.id];\n    return index !== void 0 ? this._array[index][1] : void 0;\n  }\n\n  getField(key: K): [K, V] | undefined {\n    const index = this._index[key.id];\n    return index !== void 0 ? this._array[index] : void 0;\n  }\n\n  getEntry(index: number): [K, V] | undefined {\n    return this._array[index];\n  }\n\n  set(key: K, newValue: V): this {\n    const index = this._index[key.id];\n    if (index !== void 0) {\n      this._array[index][1] = newValue;\n    } else {\n      this._index[key.id] = this._array.length;\n      this._array.push([key, newValue]);\n    }\n    return this;\n  }\n\n  delete(key: K): boolean {\n    const index = this._index[key.id];\n    if (index !== void 0) {\n      delete this._index[key.id];\n      const item = this._array[index];\n      const last = this._array.pop()!;\n      if (item !== last) {\n        this._array[index] = last;\n        this._index[last[0].id] = index;\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  remove(key: K): V | undefined {\n    const index = this._index[key.id];\n    if (index !== void 0) {\n      delete this._index[key.id];\n      const item = this._array[index];\n      const last = this._array.pop()!;\n      if (item !== last) {\n        this._array[index] = last;\n        this._index[last[0].id] = index;\n      }\n      return item[1];\n    } else {\n      return void 0;\n    }\n  }\n\n  clear(): void {\n    this._index = {};\n    this._array.length = 0;\n  }\n\n  forEach<T, S = unknown>(callback: (this: S, key: K, value: V) => T | void,\n                          thisArg?: S): T | undefined {\n    const array = this._array;\n    for (let i = 0, n = array.length; i < n; i += 1) {\n      const item = array[i];\n      const result = callback.call(thisArg, item[0], item[1]);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n    return void 0;\n  }\n\n  keys(): Iterator<K> {\n    return void 0 as any; // not implemented\n  }\n\n  values(): Iterator<V> {\n    return void 0 as any; // not implemented\n  }\n\n  entries(): Iterator<[K, V]> {\n    return void 0 as any; // not implemented\n  }\n\n  clone(): ConstraintMap<K, V> {\n    const oldArray = this._array;\n    const n = oldArray.length;\n    const newIndex = {} as {[id: number]: number | undefined};\n    const newArray = new Array<[K, V]>(n);\n    for (let i = 0; i < n; i += 1) {\n      const [key, value] = oldArray[i];\n      newArray[i] = [key, value];\n      newIndex[key.id] = i;\n    }\n    return new ConstraintMap(newIndex, newArray);\n  }\n\n  /** @hidden */\n  static _nextId: number = 1;\n\n  static nextId(): number {\n    const nextId = ConstraintMap._nextId;\n    ConstraintMap._nextId = nextId + 1;\n    return nextId;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstraintKey, ConstraintMap} from \"./ConstraintMap\";\n\n/** @hidden */\nexport interface ConstraintSymbol extends ConstraintKey {\n  isExternal(): boolean;\n\n  isDummy(): boolean;\n\n  isInvalid(): boolean;\n}\n\n/** @hidden */\nexport const ConstraintSymbol = {\n  Invalid: void 0 as any as ConstraintInvalid, // defined by ConstraintInvalid\n};\n\n/** @hidden */\nexport class ConstraintSlack implements ConstraintSymbol {\n  /** @hidden */\n  readonly _id: number;\n\n  constructor() {\n    this._id = ConstraintMap.nextId();\n  }\n\n  get id(): number {\n    return this._id;\n  }\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n}\n\n/** @hidden */\nexport class ConstraintDummy implements ConstraintSymbol {\n  /** @hidden */\n  readonly _id: number;\n\n  constructor() {\n    this._id = ConstraintMap.nextId();\n  }\n\n  get id(): number {\n    return this._id;\n  }\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return true;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n}\n\n/** @hidden */\nexport class ConstraintError implements ConstraintSymbol {\n  /** @hidden */\n  readonly _id: number;\n\n  constructor() {\n    this._id = ConstraintMap.nextId();\n  }\n\n  get id(): number {\n    return this._id;\n  }\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return false;\n  }\n}\n\n/** @hidden */\nexport class ConstraintInvalid implements ConstraintSymbol {\n  get id(): number {\n    return -1;\n  }\n\n  isExternal(): boolean {\n    return false;\n  }\n\n  isDummy(): boolean {\n    return false;\n  }\n\n  isInvalid(): boolean {\n    return true;\n  }\n}\nConstraintSymbol.Invalid = new ConstraintInvalid();\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstraintKey, ConstraintMap} from \"./ConstraintMap\";\nimport {ConstrainSum} from \"./ConstrainSum\";\nimport {ConstrainTerm} from \"./ConstrainTerm\";\nimport {ConstrainProduct} from \"./ConstrainProduct\";\nimport {ConstrainConstant} from \"./ConstrainConstant\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\nimport {ConstrainBinding} from \"./ConstrainBinding\";\n\nexport abstract class Constrain implements ConstraintKey {\n  /** @hidden */\n  readonly _id: number;\n\n  constructor() {\n    this._id = ConstraintMap.nextId();\n  }\n\n  /** @hidden */\n  get id(): number {\n    return this._id;\n  }\n\n  abstract isConstant(): boolean;\n\n  abstract get terms(): ConstraintMap<ConstrainVariable, number>;\n\n  abstract get constant(): number;\n\n  abstract plus(that: Constrain | number): Constrain;\n\n  abstract opposite(): Constrain;\n\n  abstract minus(that: Constrain | number): Constrain;\n\n  abstract times(scalar: number): Constrain;\n\n  abstract divide(scalar: number): Constrain;\n\n  static sum(...args: (Constrain | number)[]): ConstrainSum {\n    const terms = new ConstraintMap<ConstrainVariable, number>();\n    let constant = 0;\n    for (let i = 0, n = args.length; i < n; i += 1) {\n      const arg = args[i];\n      if (typeof arg === \"number\") {\n        constant += arg;\n      } else if (arg instanceof Constrain.Term) {\n        const variable = arg.variable;\n        if (variable !== null) {\n          const field = terms.getField(variable);\n          if (field !== void 0) {\n            field[1] += arg.coefficient;\n          } else {\n            terms.set(variable, arg.coefficient);\n          }\n        } else {\n          constant += arg.constant;\n        }\n      } else {\n        const subterms = arg.terms;\n        for (let j = 0, k = subterms.size; j < k; j += 1) {\n          const [variable, coefficient] = subterms.getEntry(j)!;\n          const field = terms.getField(variable);\n          if (field !== void 0) {\n            field[1] += coefficient;\n          } else {\n            terms.set(variable, coefficient);\n          }\n        }\n        constant += arg.constant;\n      }\n    }\n    return new Constrain.Sum(terms, constant);\n  }\n\n  static product(coefficient: number, variable: ConstrainVariable): ConstrainProduct {\n    return new Constrain.Product(coefficient, variable);\n  }\n\n  static constant(value: number): ConstrainConstant {\n    return new Constrain.Constant(value);\n  }\n\n  static zero(): ConstrainConstant {\n    return new Constrain.Constant(0);\n  }\n\n  // Forward type declarations\n  /** @hidden */\n  static Sum: typeof ConstrainSum; // defined by ConstrainSum\n  /** @hidden */\n  static Term: typeof ConstrainTerm; // defined by ConstrainTerm\n  /** @hidden */\n  static Product: typeof ConstrainProduct; // defined by ConstrainProduct\n  /** @hidden */\n  static Constant: typeof ConstrainConstant; // defined by ConstrainConstant\n  /** @hidden */\n  static Variable: typeof ConstrainVariable; // defined by ConstrainVariable\n  /** @hidden */\n  static Binding: typeof ConstrainBinding; // defined by ConstrainBinding\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\n\nexport class ConstrainSum extends Constrain implements Debug {\n  /** @hidden */\n  readonly _terms: ConstraintMap<ConstrainVariable, number>;\n  /** @hidden */\n  readonly _constant: number;\n\n  constructor(terms: ConstraintMap<ConstrainVariable, number>, constant: number) {\n    super();\n    this._terms = terms;\n    this._constant = constant;\n  }\n\n  isConstant(): boolean {\n    return this._terms.isEmpty();\n  }\n\n  get terms(): ConstraintMap<ConstrainVariable, number> {\n    return this._terms;\n  }\n\n  get constant(): number {\n    return this._constant;\n  }\n\n  plus(that: Constrain | number): Constrain {\n    return Constrain.sum(this, that);\n  }\n\n  opposite(): Constrain {\n    const oldTerms = this._terms;\n    const newTerms = new ConstraintMap<ConstrainVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, -coefficient);\n    }\n    return new ConstrainSum(newTerms, -this._constant);\n  }\n\n  minus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    } else {\n      that = that.opposite();\n    }\n    return Constrain.sum(this, that);\n  }\n\n  times(scalar: number): Constrain {\n    const oldTerms = this._terms;\n    const newTerms = new ConstraintMap<ConstrainVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, coefficient * scalar);\n    }\n    return new ConstrainSum(newTerms, this._constant * scalar);\n  }\n\n  divide(scalar: number): Constrain {\n    const oldTerms = this._terms;\n    const newTerms = new ConstraintMap<ConstrainVariable, number>();\n    for (let i = 0, n = oldTerms.size; i < n; i += 1) {\n      const [variable, coefficient] = oldTerms.getEntry(i)!;\n      newTerms.set(variable, coefficient / scalar);\n    }\n    return new ConstrainSum(newTerms, this._constant / scalar);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Constrain\").write(46/*'.'*/).write(\"sum\").write(40/*'('*/);\n    const n = this._terms.size;\n    for (let i = 0; i < n; i += 1) {\n      const [variable, coefficient] = this._terms.getEntry(i)!;\n      if (i > 0) {\n        output = output.write(\", \");\n      }\n      if (coefficient === 1) {\n        output = output.debug(variable);\n      } else {\n        output = output.debug(Constrain.product(coefficient, variable));\n      }\n    }\n    if (this._constant !== 0) {\n      if (n > 0) {\n        output = output.write(\", \");\n      }\n      output = output.debug(this._constant);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\nConstrain.Sum = ConstrainSum;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\n\nexport abstract class ConstrainTerm extends Constrain {\n  abstract get coefficient(): number;\n\n  abstract get variable(): ConstrainVariable | null;\n\n  abstract opposite(): ConstrainTerm;\n}\nConstrain.Term = ConstrainTerm;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainTerm} from \"./ConstrainTerm\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\n\nexport class ConstrainProduct extends ConstrainTerm implements Debug {\n  /** @hidden */\n  readonly _coefficient: number;\n  /** @hidden */\n  readonly _variable: ConstrainVariable;\n\n  constructor(coefficient: number, variable: ConstrainVariable) {\n    super();\n    this._coefficient = coefficient;\n    this._variable = variable;\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n\n  get coefficient(): number {\n    return this._coefficient;\n  }\n\n  get variable(): ConstrainVariable {\n    return this._variable;\n  }\n\n  get terms(): ConstraintMap<ConstrainVariable, number> {\n    const terms = new ConstraintMap<ConstrainVariable, number>();\n    terms.set(this._variable, this._coefficient);\n    return terms;\n  }\n\n  get constant(): number {\n    return 0;\n  }\n\n  plus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (that instanceof ConstrainProduct && this._variable === that._variable) {\n      return Constrain.product(this._coefficient + that._coefficient, this._variable);\n    } else if (that instanceof Constrain.Variable && this._variable === that) {\n      return Constrain.product(this._coefficient + 1, this._variable);\n    } else {\n      return Constrain.sum(this, that);\n    }\n  }\n\n  opposite(): ConstrainTerm {\n    return Constrain.product(-this._coefficient, this._variable);\n  }\n\n  minus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (that instanceof ConstrainProduct && this._variable === that._variable) {\n      return Constrain.product(this._coefficient - that._coefficient, this._variable);\n    } else if (that instanceof Constrain.Variable && this._variable === that) {\n      return Constrain.product(this._coefficient - 1, this._variable);\n    } else {\n      return Constrain.sum(this, that.opposite());\n    }\n  }\n\n  times(scalar: number): Constrain {\n    return Constrain.product(this._coefficient * scalar, this._variable);\n  }\n\n  divide(scalar: number): Constrain {\n    return Constrain.product(this._coefficient / scalar, this._variable);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Constrain\").write(46/*'.'*/).write(\"product\").write(40/*'('*/)\n        .debug(this._coefficient).write(\", \").debug(this._variable).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\nConstrain.Product = ConstrainProduct;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainTerm} from \"./ConstrainTerm\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\n\nexport class ConstrainConstant extends ConstrainTerm implements Debug {\n  /** @hidden */\n  readonly _value: number;\n\n  constructor(value: number) {\n    super();\n    this._value = value;\n  }\n\n  isConstant(): boolean {\n    return true;\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  get coefficient(): number {\n    return 0;\n  }\n\n  get variable(): ConstrainVariable | null {\n    return null;\n  }\n\n  get terms(): ConstraintMap<ConstrainVariable, number> {\n    return new ConstraintMap<ConstrainVariable, number>();\n  }\n\n  get constant(): number {\n    return this._value;\n  }\n\n  plus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (that instanceof ConstrainConstant) {\n      return Constrain.constant(this._value + that._value);\n    } else {\n      return Constrain.sum(this, that);\n    }\n  }\n\n  opposite(): ConstrainTerm {\n    return Constrain.constant(-this._value);\n  }\n\n  minus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (that instanceof ConstrainConstant) {\n      return Constrain.constant(this._value - that._value);\n    } else {\n      return Constrain.sum(this, that.opposite());\n    }\n  }\n\n  times(scalar: number): Constrain {\n    return Constrain.constant(this._value * scalar);\n  }\n\n  divide(scalar: number): Constrain {\n    return Constrain.constant(this._value / scalar);\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Constrain\").write(46/*'.'*/).write(\"constant\").write(40/*'('*/)\n        .debug(this._value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\nConstrain.Constant = ConstrainConstant;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {ConstraintSymbol} from \"./ConstraintSymbol\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainTerm} from \"./ConstrainTerm\";\nimport {AnyConstraintStrength, ConstraintStrength} from \"./ConstraintStrength\";\nimport {ConstraintScope} from \"./ConstraintScope\";\n\nexport abstract class ConstrainVariable extends ConstrainTerm implements ConstraintSymbol, Debug {\n  /** @hidden */\n  isExternal(): boolean {\n    return true;\n  }\n\n  /** @hidden */\n  isDummy(): boolean {\n    return false;\n  }\n\n  /** @hidden */\n  isInvalid(): boolean {\n    return false;\n  }\n\n  isConstant(): boolean {\n    return false;\n  }\n\n  abstract get scope(): ConstraintScope;\n\n  abstract get name(): string;\n\n  abstract get value(): number;\n\n  abstract updateValue(value: number): void;\n\n  abstract get state(): number;\n\n  abstract setState(state: number): void;\n\n  abstract get strength(): ConstraintStrength;\n\n  abstract setStrength(strength: AnyConstraintStrength): void;\n\n  get coefficient(): number {\n    return 1;\n  }\n\n  get variable(): ConstrainVariable {\n    return this;\n  }\n\n  get terms(): ConstraintMap<ConstrainVariable, number> {\n    const terms = new ConstraintMap<ConstrainVariable, number>();\n    terms.set(this, 1);\n    return terms;\n  }\n\n  get constant(): number {\n    return 0;\n  }\n\n  plus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (this === that) {\n      return Constrain.product(2, this);\n    } else {\n      return Constrain.sum(this, that);\n    }\n  }\n\n  opposite(): ConstrainTerm {\n    return Constrain.product(-1, this);\n  }\n\n  minus(that: Constrain | number): Constrain {\n    if (typeof that === \"number\") {\n      that = Constrain.constant(that);\n    }\n    if (this === that) {\n      return Constrain.zero();\n    } else {\n      return Constrain.sum(this, that.opposite());\n    }\n  }\n\n  times(coefficient: number): Constrain {\n    return Constrain.product(coefficient, this);\n  }\n\n  divide(scalar: number): Constrain {\n    return Constrain.product(1 / scalar, this);\n  }\n\n  debug(output: Output): void {\n    output = output.debug(this.scope).write(46/*'.'*/).write(\"variable\").write(40/*'('*/)\n        .debug(this.name).write(\", \").debug(this.value).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\nConstrain.Variable = ConstrainVariable;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport type AnyConstraintStrength = ConstraintStrength | ConstraintStrengthInit;\n\nexport type ConstraintStrengthInit = \"required\" | \"strong\" | \"medium\" | \"weak\";\n\nexport type ConstraintStrength = number;\n\nexport const ConstraintStrength = {\n  Required: 1001001000,\n  Strong: 1000000,\n  Medium: 1000,\n  Weak: 1,\n  Unbound: -1,\n\n  clip(strength: ConstraintStrength): ConstraintStrength {\n    return Math.min(Math.max(0, strength), ConstraintStrength.Required);\n  },\n\n  fromAny(strength: AnyConstraintStrength): ConstraintStrength {\n    if (typeof strength === \"number\") {\n      return ConstraintStrength.clip(strength);\n    } else if (strength === \"required\") {\n      return ConstraintStrength.Required;\n    } else if (strength === \"strong\") {\n      return ConstraintStrength.Strong;\n    } else if (strength === \"medium\") {\n      return ConstraintStrength.Medium;\n    } else if (strength === \"weak\") {\n      return ConstraintStrength.Weak;\n    }\n    throw new TypeError(\"\" + strength);\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\nimport {AnyConstraintStrength, ConstraintStrength} from \"./ConstraintStrength\";\nimport {ConstraintScope} from \"./ConstraintScope\";\n\nexport class ConstrainBinding extends ConstrainVariable {\n  /** @hidden */\n  readonly _scope: ConstraintScope;\n  /** @hidden */\n  _value: number;\n  /** @hidden */\n  _state: number;\n  /** @hidden */\n  _strength: ConstraintStrength;\n\n  constructor(scope: ConstraintScope, name: string, value: number, strength: ConstraintStrength) {\n    super();\n    this._scope = scope;\n    Object.defineProperty(this, \"name\", {\n      value: name,\n      enumerable: true,\n      configurable: true,\n    });\n    this._value = value;\n    this._state = NaN;\n    this._strength = strength;\n  }\n\n  get scope(): ConstraintScope {\n    return this._scope;\n  }\n\n  readonly name: string;\n\n  get value(): number {\n    return this._value;\n  }\n\n  updateValue(value: number): void {\n    this._value = value;\n  }\n\n  get state(): number {\n    return this._state;\n  }\n\n  setState(newState: number): void {\n    const oldState = this._state;\n    if (isFinite(oldState) && !isFinite(newState)) {\n      this._scope.removeConstraintVariable(this);\n    }\n    this._state = newState;\n    if (isFinite(newState)) {\n      if (!isFinite(oldState)) {\n        this._scope.addConstraintVariable(this);\n      } else {\n        this._scope.setConstraintVariable(this, newState);\n      }\n    }\n  }\n\n  get strength(): ConstraintStrength {\n    return this._strength;\n  }\n\n  setStrength(newStrength: AnyConstraintStrength): void {\n    const state = this._state;\n    const oldStrength = this._strength;\n    newStrength = ConstraintStrength.fromAny(newStrength);\n    if (isFinite(state) && oldStrength !== newStrength) {\n      this._scope.removeConstraintVariable(this);\n    }\n    this._strength = newStrength;\n    if (isFinite(state) && oldStrength !== newStrength) {\n      this._scope.addConstraintVariable(this);\n    }\n  }\n}\nConstrain.Binding = ConstrainBinding;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {ConstraintKey, ConstraintMap} from \"./ConstraintMap\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstraintRelation} from \"./ConstraintRelation\";\nimport {ConstraintStrength} from \"./ConstraintStrength\";\nimport {ConstraintScope} from \"./ConstraintScope\";\n\nexport class Constraint implements ConstraintKey, Debug {\n  /** @hidden */\n  readonly _id: number;\n  /** @hidden */\n  readonly _scope: ConstraintScope;\n  /** @hidden */\n  readonly _constrain: Constrain;\n  /** @hidden */\n  readonly _relation: ConstraintRelation;\n  /** @hidden */\n  readonly _strength: ConstraintStrength;\n\n  constructor(scope: ConstraintScope, constrain: Constrain,\n              relation: ConstraintRelation, strength: ConstraintStrength) {\n    this._id = ConstraintMap.nextId();\n    this._scope = scope;\n    this._constrain = constrain;\n    this._relation = relation;\n    this._strength = strength;\n  }\n\n  /** @hidden */\n  get id(): number {\n    return this._id;\n  }\n\n  get scope(): ConstraintScope {\n    return this._scope;\n  }\n\n  get constrain(): Constrain {\n    return this._constrain;\n  }\n\n  get relation(): ConstraintRelation {\n    return this._relation;\n  }\n\n  get strength(): ConstraintStrength {\n    return this._strength;\n  }\n\n  enabled(): boolean;\n  enabled(enabled: boolean): this;\n  enabled(enabled?: boolean): boolean | this {\n    if (enabled === void 0) {\n      return this._scope.hasConstraint(this);\n    } else {\n      if (enabled) {\n        this._scope.addConstraint(this);\n      } else {\n        this._scope.removeConstraint(this);\n      }\n      return this;\n    }\n  }\n\n  debug(output: Output): void {\n    output = output.debug(this._scope).write(46/*'.'*/).write(\"constraint\").write(40/*'('*/)\n        .debug(this._constrain).write(\", \").debug(this._relation).write(\", \").debug(void 0).write(\", \");\n    if (this._strength === ConstraintStrength.Required) {\n      output = output.debug(\"required\");\n    } else if (this._strength === ConstraintStrength.Strong) {\n      output = output.debug(\"strong\");\n    } else if (this._strength === ConstraintStrength.Medium) {\n      output = output.debug(\"medium\");\n    } else if (this._strength === ConstraintStrength.Weak) {\n      output = output.debug(\"weak\");\n    } else {\n      output = output.debug(this._strength);\n    }\n    output = output.write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstraintMap} from \"./ConstraintMap\";\nimport {ConstraintSymbol, ConstraintSlack, ConstraintError, ConstraintDummy} from \"./ConstraintSymbol\";\nimport {Constrain} from \"./Constrain\";\nimport {ConstrainVariable} from \"./ConstrainVariable\";\nimport {ConstrainBinding} from \"./ConstrainBinding\";\nimport {ConstraintRelation} from \"./ConstraintRelation\";\nimport {AnyConstraintStrength, ConstraintStrength} from \"./ConstraintStrength\";\nimport {Constraint} from \"./Constraint\";\nimport {ConstraintScope} from \"./ConstraintScope\";\n\nconst EPSILON = 1.0e-8;\n\n/** @hidden */\nexport interface ConstraintTag {\n  readonly marker: ConstraintSymbol;\n  readonly other: ConstraintSymbol;\n}\n\n/** @hidden */\nexport interface ConstraintBinding {\n  readonly constraint: Constraint;\n  readonly tag: ConstraintTag;\n  state: number;\n}\n\n/** @hidden */\nexport class ConstraintRow {\n  /** @hidden */\n  _cells: ConstraintMap<ConstraintSymbol, number>;\n  /** @hidden */\n  _constant: number;\n\n  constructor(cells: ConstraintMap<ConstraintSymbol, number> = new ConstraintMap(), constant: number = 0) {\n    this._cells = cells;\n    this._constant = constant;\n  }\n\n  isConstant(): boolean {\n    return this._cells.isEmpty();\n  }\n\n  isDummy(): boolean {\n    for (let i = 0, n = this._cells.size; i < n; i += 1) {\n      const symbol = this._cells.getEntry(i)![0];\n      if (!(symbol instanceof ConstraintDummy)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  clone(): ConstraintRow {\n    return new ConstraintRow(this._cells.clone(), this._constant);\n  }\n\n  add(value: number): number {\n    this._constant += value;\n    return this._constant;\n  }\n\n  insertSymbol(symbol: ConstraintSymbol, coefficient: number = 1): void {\n    coefficient += this._cells.get(symbol) || 0;\n    if (Math.abs(coefficient) < EPSILON) {\n      this._cells.remove(symbol);\n    } else {\n      this._cells.set(symbol, coefficient);\n    }\n  }\n\n  insertRow(that: ConstraintRow, coefficient: number): void {\n    this._constant += that._constant * coefficient;\n    for (let i = 0, n = that._cells.size; i < n; i += 1) {\n      const [symbol, value] = that._cells.getEntry(i)!;\n      this.insertSymbol(symbol, value * coefficient);\n    }\n  }\n\n  removeSymbol(symbol: ConstraintSymbol): void {\n    this._cells.remove(symbol);\n  }\n\n  negate(): void {\n    this._constant = -this._constant;\n    for (let i = 0, n = this._cells.size; i < n; i += 1) {\n      const entry = this._cells.getEntry(i)!;\n      entry[1] = -entry[1];\n    }\n  }\n\n  solveFor(symbol: ConstraintSymbol): void {\n    const value = this._cells.remove(symbol);\n    if (value !== void 0) {\n      const coefficient = -1 / value;\n      this._constant *= coefficient;\n      for (let i = 0, n = this._cells.size; i < n; i += 1) {\n        const entry = this._cells.getEntry(i)!;\n        entry[1] *= coefficient;\n      }\n    }\n  }\n\n  solveForEx(lhs: ConstraintSymbol, rhs: ConstraintSymbol): void {\n    this.insertSymbol(lhs, -1.0);\n    this.solveFor(rhs);\n  }\n\n  coefficientFor(symbol: ConstraintSymbol): number {\n    const value = this._cells.get(symbol);\n    return value !== void 0 ? value : 0;\n  }\n\n  substitute(symbol: ConstraintSymbol, row: ConstraintRow): void {\n    const value = this._cells.remove(symbol);\n    if (value !== void 0) {\n      this.insertRow(row, value);\n    }\n  }\n}\n\nexport class ConstraintSolver implements ConstraintScope {\n  /** @hidden */\n  _constraints: ConstraintMap<Constraint, ConstraintTag>;\n  /** @hidden */\n  _constraintVariables: ConstraintMap<ConstrainVariable, ConstraintBinding>;\n  /** @hidden */\n  _rows: ConstraintMap<ConstraintSymbol, ConstraintRow>;\n  /** @hidden */\n  _infeasible: ConstraintSymbol[];\n  /** @hidden */\n  _objective: ConstraintRow;\n  /** @hidden */\n  _artificial: ConstraintRow | null;\n\n  constructor() {\n    this._constraints = new ConstraintMap();\n    this._constraintVariables = new ConstraintMap();\n    this._rows = new ConstraintMap();\n    this._infeasible = [];\n    this._objective = new ConstraintRow();\n    this._artificial = null;\n  }\n\n  constraint(lhs: Constrain | number, relation: ConstraintRelation,\n             rhs?: Constrain | number, strength?: AnyConstraintStrength): Constraint {\n    if (typeof lhs === \"number\") {\n      lhs = Constrain.constant(lhs);\n    }\n    if (typeof rhs === \"number\") {\n      rhs = Constrain.constant(rhs);\n    }\n    const constrain = rhs ? lhs.minus(rhs) : lhs;\n    if (strength === void 0) {\n      strength = ConstraintStrength.Required;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    return new Constraint(this, constrain, relation, strength);\n  }\n\n  hasConstraint(constraint: Constraint): boolean {\n    return this._constraints.has(constraint);\n  }\n\n  addConstraint(constraint: Constraint): void {\n    if (this._constraints.has(constraint)) {\n      return;\n    }\n\n    this.willAddConstraint(constraint);\n\n    // Creating a row causes symbols to be reserved for the variables in the constraint.\n    const {row, tag} = this.createRow(constraint);\n    let subject = this.chooseSubject(row, tag);\n\n    // If chooseSubject couldn't find a valid entering symbol, one last option\n    // is available if the entire row is composed of dummy variables. If the\n    // constant of the row is zero, then this represents redundant constraints\n    // and the new dummy marker can enter the basis. If the constant is\n    // non-zero, then it represents an unsatisfiable constraint.\n    if (subject.isInvalid() && row.isDummy()) {\n      if (Math.abs(row._constant) < EPSILON) {\n        subject = tag.marker;\n      } else {\n        throw new Error(\"unsatisfiable constraint\");\n      }\n    }\n\n    // If an entering symbol still isn't found, then the row must be added\n    // using an artificial variable. If that fails, then the row represents\n    // an unsatisfiable constraint.\n    if (subject.isInvalid()) {\n      if (!this.addWithArtificialVariable(row)) {\n        throw new Error(\"unsatisfiable constraint\");\n      }\n    } else {\n      row.solveFor(subject);\n      this.substitute(subject, row);\n      this._rows.set(subject, row);\n    }\n\n    this._constraints.set(constraint, tag);\n\n    // Optimizing after each constraint is added performs less aggregate work\n    // due to a smaller average system size. It also ensures the solver remains\n    // in a consistent state.\n    this.optimize(this._objective);\n\n    this.didAddConstraint(constraint);\n  }\n\n  protected willAddConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  protected didAddConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  removeConstraint(constraint: Constraint): void {\n    const tag = this._constraints.remove(constraint);\n    if (tag === void 0) {\n      return;\n    }\n\n    this.willRemoveConstraint(constraint);\n\n    // Remove the error effects from the objective function *before* pivoting,\n    // or substitutions into the objective will lead to incorrect solver results.\n    this.removeConstraintEffects(constraint, tag);\n\n    // If the marker is basic, simply drop the row. Otherwise pivot the marker\n    // into the basis and then drop the row.\n    const marker = tag.marker;\n    if (this._rows.remove(marker) === void 0) {\n      const leaving = this.getMarkerLeavingSymbol(marker);\n      if (leaving.isInvalid()) {\n        throw new Error(\"failed to find leaving row\");\n      }\n      const row = this._rows.remove(leaving)!;\n      row.solveForEx(leaving, marker);\n      this.substitute(marker, row);\n    }\n\n    // Optimizing after each constraint is removed ensures that the solver\n    // remains consistent. It makes the solver API easier to use at a small\n    // tradeoff for speed.\n    this.optimize(this._objective);\n\n    this.didRemoveConstraint(constraint);\n  }\n\n  protected willRemoveConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  protected didRemoveConstraint(constraint: Constraint): void {\n    // hook\n  }\n\n  constraintVariable(name: string, value?: number, strength?: AnyConstraintStrength): ConstrainVariable {\n    if (value === void 0) {\n      value = 0;\n    }\n    if (strength === void 0) {\n      strength = ConstraintStrength.Strong;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    return new ConstrainBinding(this, name, value, strength);\n  }\n\n  hasConstraintVariable(variable: ConstrainVariable): boolean {\n    return this._constraintVariables.has(variable);\n  }\n\n  addConstraintVariable(variable: ConstrainVariable): void {\n    if (this._constraintVariables.has(variable)) {\n      return;\n    }\n    const strength = ConstraintStrength.clip(variable.strength);\n    if (strength === ConstraintStrength.Required) {\n      throw new Error(\"invalid variable strength\");\n    }\n    this.willAddConstraintVariable(variable);\n    const constraint = new Constraint(this, variable, \"eq\", strength);\n    this.addConstraint(constraint);\n    const tag = this._constraints.get(constraint)!;\n    const binding = {constraint, tag, state: 0};\n    this._constraintVariables.set(variable, binding);\n    this.didAddConstraintVariable(variable);\n    const state = variable.state;\n    if (isFinite(state)) {\n      this.setConstraintVariable(variable, state);\n    }\n  }\n\n  protected willAddConstraintVariable(variable: ConstrainVariable): void {\n    // hook\n  }\n\n  protected didAddConstraintVariable(variable: ConstrainVariable): void {\n    // hook\n  }\n\n  removeConstraintVariable(variable: ConstrainVariable): void {\n    const binding = this._constraintVariables.remove(variable);\n    if (binding === void 0) {\n      return;\n    }\n    this.willRemoveConstraintVariable(variable);\n    this.removeConstraint(binding.constraint);\n    this.didRemoveConstraintVariable(variable);\n  }\n\n  protected willRemoveConstraintVariable(variable: ConstrainVariable): void {\n    // hook\n  }\n\n  protected didRemoveConstraintVariable(variable: ConstrainVariable): void {\n    // hook\n  }\n\n  setConstraintVariable(variable: ConstrainVariable, newState: number): void {\n    const binding = this._constraintVariables.get(variable);\n    if (binding === void 0) {\n      throw new Error(\"unknown variable\");\n    }\n\n    const oldState = binding.state;\n    binding.state = newState;\n    const delta = newState - oldState;\n\n    this.willSetConstraintVariable(variable, newState, oldState);\n\n    // Check first if the positive error variable is basic.\n    const marker = binding.tag.marker;\n    let row = this._rows.get(marker);\n    if (row !== void 0) {\n      if (row.add(-delta) < 0) {\n        this._infeasible.push(marker);\n      }\n      this.dualOptimize();\n      return;\n    }\n\n    // Check next if the negative error variable is basic.\n    const other = binding.tag.other;\n    row = this._rows.get(other);\n    if (row !== void 0) {\n      if (row.add(delta) < 0) {\n        this._infeasible.push(other);\n      }\n      this.dualOptimize();\n      return;\n    }\n\n    // Otherwise update each row where the error variables exist.\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      const [symbol, row] = this._rows.getEntry(i)!;\n      const coefficient = row.coefficientFor(marker);\n      if (coefficient !== 0 && row.add(delta * coefficient) < 0 && !symbol.isExternal()) {\n        this._infeasible.push(symbol);\n      }\n    }\n    this.dualOptimize();\n\n    this.didSetConstraintVariable(variable, newState, oldState);\n  }\n\n  protected willSetConstraintVariable(variable: ConstrainVariable, newState: number, oldState: number): void {\n    // hook\n  }\n\n  protected didSetConstraintVariable(variable: ConstrainVariable, newState: number, oldState: number): void {\n    // hook\n  }\n\n  updateConstraintVariables(): void {\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      const [symbol, row] = this._rows.getEntry(i)!;\n      if (symbol instanceof ConstrainVariable) {\n        this.updateConstraintVariable(symbol, row._constant);\n      }\n    }\n  }\n\n  updateConstraintVariable(variable: ConstrainVariable, newValue: number): void {\n    const oldValue = variable.value;\n    this.willUpdateConstraintVariable(variable, newValue, oldValue);\n    variable.updateValue(newValue);\n    this.didUpdateConstraintVariable(variable, newValue, oldValue);\n  }\n\n  protected willUpdateConstraintVariable(variable: ConstrainVariable, newValue: number, oldValue: number): void {\n    // hook\n  }\n\n  protected didUpdateConstraintVariable(variable: ConstrainVariable, newValue: number, oldValue: number): void {\n    // hook\n  }\n\n  // Returns a new row for the given constraint.\n  //\n  // The terms in the constraint will be converted to cells in the row.\n  // Any term in the constraint with a coefficient of zero is ignored.\n  // If the symbol for a given cell variable is basic, the cell variable\n  // will be substituted with the basic row.\n  //\n  // The necessary slack and error variables will be added to the row.\n  // If the constant for the row is negative, the sign for the row will\n  // be inverted so the constant becomes positive.\n  private createRow(constraint: Constraint): {row: ConstraintRow, tag: ConstraintTag} {\n    const constrain = constraint.constrain;\n    const row = new ConstraintRow(void 0, constrain.constant);\n\n    // Substitute the current basic variables into the row.\n    const terms = constrain.terms;\n    for (let i = 0, n = terms.size; i < n; i += 1) {\n      const [variable, coefficient] = terms.getEntry(i)!;\n      if (variable !== null && Math.abs(coefficient) >= EPSILON) {\n        const basic = this._rows.get(variable);\n        if (basic !== void 0) {\n          row.insertRow(basic, coefficient);\n        } else {\n          row.insertSymbol(variable, coefficient);\n        }\n      }\n    }\n\n    // Add the necessary slack, error, and dummy variables.\n    const objective = this._objective;\n    const relation = constraint.relation;\n    const strength = constraint.strength;\n    const tag = {marker: ConstraintSymbol.Invalid, other: ConstraintSymbol.Invalid};\n    if (relation === \"le\" || relation === \"ge\") {\n      const coefficient = relation === \"le\" ? 1 : -1;\n      const slack = new ConstraintSlack();\n      tag.marker = slack;\n      row.insertSymbol(slack, coefficient);\n      if (strength < ConstraintStrength.Required) {\n        const error = new ConstraintError();\n        tag.other = error;\n        row.insertSymbol(error, -coefficient);\n        objective.insertSymbol(error, strength);\n      }\n    } else {\n      if (strength < ConstraintStrength.Required) {\n        const eplus = new ConstraintError();\n        const eminus = new ConstraintError();\n        tag.marker = eplus;\n        tag.other = eminus;\n        row.insertSymbol(eplus, -1); // v = eplus - eminus\n        row.insertSymbol(eminus, 1); // v - eplus + eminus = 0\n        objective.insertSymbol(eplus, strength);\n        objective.insertSymbol(eminus, strength);\n      } else {\n        const dummy = new ConstraintDummy();\n        tag.marker = dummy;\n        row.insertSymbol(dummy);\n      }\n    }\n\n    // Ensure the row has a positive constant.\n    if (row._constant < 0) {\n      row.negate();\n    }\n\n    return {row, tag};\n  }\n\n  // Returns the symbol to use for solving for the row.\n  //\n  // This method will choose the best subject to use as the solve target for\n  // the row. An invalid symbol will be returned if there is no valid target.\n  //\n  // The symbols are chosen according to the following precedence:\n  //\n  // 1) The first symbol representing an external variable.\n  // 2) A negative slack or error tag variable.\n  //\n  // If a subject cannot be found, an invalid symbol will be returned.\n  private chooseSubject(row: ConstraintRow, tag: ConstraintTag): ConstraintSymbol {\n    for (let i = 0, n = row._cells.size; i < n; i += 1) {\n      const symbol = row._cells.getEntry(i)![0];\n      if (symbol.isExternal()) {\n        return symbol;\n      }\n    }\n    if (tag.marker instanceof ConstraintSlack || tag.marker instanceof ConstraintError) {\n      if (row.coefficientFor(tag.marker) < 0) {\n        return tag.marker;\n      }\n    }\n    if (tag.other instanceof ConstraintSlack || tag.other instanceof ConstraintError) {\n      if (row.coefficientFor(tag.other) < 0) {\n        return tag.other;\n      }\n    }\n    return ConstraintSymbol.Invalid;\n  }\n\n  // Adds the row to the tableau using an artificial variable; returns `false`\n  // if the constraint cannot be satisfied.\n  private addWithArtificialVariable(row: ConstraintRow): boolean {\n    // Create and add the artificial variable to the tableau.\n    const artificial = new ConstraintSlack();\n    this._rows.set(artificial, row.clone());\n    this._artificial = row.clone();\n\n    // Optimize the artificial objective. This is successful\n    // only if the artificial objective is optimized to zero.\n    this.optimize(this._artificial);\n    const success = Math.abs(this._artificial._constant) < EPSILON;\n    this._artificial = null;\n\n    // If the artificial variable is basic, pivot the row so that\n    // it becomes non-basic. If the row is constant, exit early.\n    const basic = this._rows.remove(artificial);\n    if (basic !== void 0) {\n      if (basic.isConstant()) {\n        return success;\n      }\n      const entering = this.anyPivotableSymbol(basic);\n      if (entering.isInvalid()) {\n        return false; // unsatisfiable (will this ever happen?)\n      }\n      basic.solveForEx(artificial, entering);\n      this.substitute(entering, basic);\n      this._rows.set(entering, basic);\n    }\n\n    // Remove the artificial variable from the tableau.\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      this._rows.getEntry(i)![1].removeSymbol(artificial);\n    }\n    this._objective.removeSymbol(artificial);\n    return success;\n  }\n\n  // Substitutues all instances of the parametric symbol in the tableau\n  // and the objective function with the given row.\n  private substitute(symbol: ConstraintSymbol, row: ConstraintRow): void {\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      const [key, value] = this._rows.getEntry(i)!;\n      value.substitute(symbol, row);\n      if (value._constant < 0 && !key.isExternal()) {\n        this._infeasible.push(key);\n      }\n    }\n    this._objective.substitute(symbol, row);\n    if (this._artificial !== null) {\n      this._artificial.substitute(symbol, row);\n    }\n  }\n\n  // Optimizes the system for the given objective function.\n  //\n  // Performs iterations of Phase 2 of the simplex method until the objective\n  // function reaches a minimum.\n  private optimize(objective: ConstraintRow): void {\n    do {\n      const entering = this.getEnteringSymbol(objective);\n      if (entering.isInvalid()) {\n        return;\n      }\n      const leaving = this.getLeavingSymbol(entering);\n      if (leaving.isInvalid()) {\n        throw new Error(\"objective is unbounded\");\n      }\n      // Pivot the entering symbol into the basis.\n      const row = this._rows.remove(leaving)!;\n      row.solveForEx(leaving, entering);\n      this.substitute(entering, row);\n      this._rows.set(entering, row);\n    } while (true);\n  }\n\n  // Optimizes the system using the dual of the simplex method.\n  //\n  // The current state of the system should be such that the objective\n  // function is optimal, but not feasible. This method will perform\n  // an iteration of the dual simplex method to make the solution both\n  // optimal and feasible.\n  private dualOptimize(): void {\n    let leaving: ConstraintSymbol | undefined;\n    while (leaving = this._infeasible.pop()) {\n      const row = this._rows.get(leaving);\n      if (row !== void 0 && row._constant < 0) {\n        const entering = this.getDualEnteringSymbol(row);\n        if (entering.isInvalid()) {\n          throw new Error(\"dual optimize failed\");\n        }\n        // Pivot the entering symbol into the basis.\n        this._rows.remove(leaving);\n        row.solveForEx(leaving, entering);\n        this.substitute(entering, row);\n        this._rows.set(entering, row);\n      }\n    }\n  }\n\n  // Returns the entering variable for a pivot operation.\n  //\n  // Returns the first symbol in the objective function which is non-dummy and\n  // has a coefficient less than zero. If no symbol meets the criteria then the\n  // objective function is at a minimum, and an invalid symbol is returned.\n  private getEnteringSymbol(objective: ConstraintRow): ConstraintSymbol {\n    for (let i = 0, n = objective._cells.size; i < n; i += 1) {\n      const [symbol, value] = objective._cells.getEntry(i)!;\n      if (value < 0 && !symbol.isDummy()) {\n        return symbol;\n      }\n    }\n    return ConstraintSymbol.Invalid;\n  }\n\n  // Returns the entering symbol for the dual optimize operation.\n  //\n  // Returns the symbol in the row which has a positive coefficient and yields\n  // the minimum ratio for its respective symbol in the objective function.\n  // The provided row *must* be infeasible. If no symbol is found which meets\n  // the criteria, an invalid symbol is returned.\n  private getDualEnteringSymbol(row: ConstraintRow): ConstraintSymbol {\n    let ratio = Number.MAX_VALUE;\n    let entering = ConstraintSymbol.Invalid;\n    for (let i = 0, n = row._cells.size; i < n; i += 1) {\n      const [symbol, value] = row._cells.getEntry(i)!;\n      if (value > 0 && !symbol.isDummy()) {\n        const coefficient = this._objective.coefficientFor(symbol);\n        const coratio = coefficient / value;\n        if (coratio < ratio) {\n          ratio = coratio;\n          entering = symbol;\n        }\n      }\n    }\n    return entering;\n  }\n\n  // Returns the symbol for the pivot exit row. If no appropriate exit symbol\n  // is found, an invalid symbol will be returned, indicating that the\n  // objective function is unbounded.\n  private getLeavingSymbol(entering: ConstraintSymbol): ConstraintSymbol {\n    let ratio = Number.MAX_VALUE;\n    let found = ConstraintSymbol.Invalid;\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      const [symbol, row] = this._rows.getEntry(i)!;\n      if (!symbol.isExternal()) {\n        const coefficient = row.coefficientFor(entering);\n        if (coefficient < 0) {\n          const coratio = -row._constant / coefficient;\n          if (coratio < ratio) {\n            ratio = coratio;\n            found = symbol;\n          }\n        }\n      }\n    }\n    return found;\n  }\n\n  // Returns a symbol corresponding to a basic row which holds the given marker\n  // variable. The row will be chosen according to the following precedence:\n  //\n  // 1) The row with a restricted basic varible and a negative coefficient\n  //    for the marker with the smallest ratio of `-constant / coefficient`.\n  // 2) The row with a restricted basic variable and the smallest ratio of\n  //    `constant / coefficient`.\n  // 3) The last unrestricted row which contains the marker.\n  //\n  // If the marker does not exist in any row, an invalid symbol will be\n  // returned, indicating an internal solver error since the marker *should*\n  // exist somewhere in the tableau.\n  private getMarkerLeavingSymbol(marker: ConstraintSymbol): ConstraintSymbol {\n    let r1 = Number.MAX_VALUE;\n    let r2 = Number.MAX_VALUE;\n    let first = ConstraintSymbol.Invalid;\n    let second = ConstraintSymbol.Invalid;\n    let third = ConstraintSymbol.Invalid;\n    for (let i = 0, n = this._rows.size; i < n; i += 1) {\n      const [symbol, row] = this._rows.getEntry(i)!;\n      const coefficient = row.coefficientFor(marker);\n      if (coefficient === 0) {\n        continue;\n      }\n      if (symbol.isExternal()) {\n        third = symbol;\n      } else if (coefficient < 0) {\n        const ratio = -row._constant / coefficient;\n        if (ratio < r1) {\n          r1 = ratio;\n          first = symbol;\n        }\n      } else {\n        const ratio = row._constant / coefficient;\n        if (ratio < r2) {\n          r2 = ratio;\n          second = symbol;\n        }\n      }\n    }\n    if (!first.isInvalid()) {\n      return first;\n    } else if (!second.isInvalid()) {\n      return second;\n    } else {\n      return third;\n    }\n  }\n\n  // Removes the effects of a constraint on the objective function.\n  private removeConstraintEffects(constraint: Constraint, tag: ConstraintTag): void {\n    if (tag.marker instanceof ConstraintError) {\n      this.removeMarkerEffects(tag.marker, constraint.strength);\n    }\n    if (tag.other instanceof ConstraintError) {\n      this.removeMarkerEffects(tag.other, constraint.strength);\n    }\n  }\n\n  // Removes the effects of an error marker on the objective function.\n  private removeMarkerEffects(marker: ConstraintSymbol, strength: ConstraintStrength): void {\n    const row = this._rows.get(marker);\n    if (row !== void 0) {\n      this._objective.insertRow(row, -strength);\n    } else {\n      this._objective.insertSymbol(marker, -strength);\n    }\n  }\n\n  // Returns the first Slack or Error symbol in the row. If no such symbol\n  // is present, an invalid symbol will be returned.\n  private anyPivotableSymbol(row: ConstraintRow): ConstraintSymbol {\n    for (let i = 0, n = row._cells.size; i < n; i += 1) {\n      const symbol = row._cells.getEntry(i)![0];\n      if (symbol instanceof ConstraintSlack || symbol instanceof ConstraintError) {\n        return symbol;\n      }\n    }\n    return ConstraintSymbol.Invalid;\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Transform} from \"@swim/transform\";\nimport {ConstraintStrength} from \"@swim/constraint\";\nimport {ViewScopeDescriptor, ViewScopeConstructor, ViewScope} from \"./scope/ViewScope\";\nimport {Viewport} from \"./Viewport\";\nimport {ViewIdiom} from \"./ViewIdiom\";\nimport {ViewContext} from \"./ViewContext\";\nimport {ViewObserver} from \"./ViewObserver\";\nimport {ViewController} from \"./ViewController\";\nimport {RootView} from \"./root/RootView\";\nimport {LayoutAnchorDescriptor, LayoutAnchorConstructor, LayoutAnchor} from \"./layout/LayoutAnchor\";\nimport {LayoutView} from \"./layout/LayoutView\";\nimport {AnimatedView} from \"./animated/AnimatedView\";\nimport {RenderedViewConstructor, RenderedView} from \"./rendered/RenderedView\";\nimport {GraphicsView} from \"./graphics/GraphicsView\";\nimport {CompositedView} from \"./composited/CompositedView\";\nimport {RasterView} from \"./raster/RasterView\";\nimport {ViewNode, NodeView} from \"./node/NodeView\";\nimport {TextView} from \"./text/TextView\";\nimport {ElementViewTagMap, ElementViewConstructor, ElementView} from \"./element/ElementView\";\nimport {SvgView} from \"./svg/SvgView\";\nimport {HtmlView} from \"./html/HtmlView\";\nimport {CanvasView} from \"./canvas/CanvasView\";\nimport {UiView} from \"./ui/UiView\";\n\nexport type ViewControllerType<V extends View> = V extends {readonly viewController: infer VC} ? VC : unknown;\n\nexport type ViewFlags = number;\n\nexport interface ViewInit {\n}\n\nexport interface ViewClass {\n  /** @hidden */\n  _viewScopeDescriptors?: {[scopeName: string]: ViewScopeDescriptor<View, unknown> | undefined};\n}\n\nexport abstract class View {\n  abstract get viewController(): ViewController | null;\n\n  abstract setViewController(viewController: ViewControllerType<this> | null): void;\n\n  protected willSetViewController(viewController: ViewControllerType<this> | null): void {\n    // hook\n  }\n\n  protected onSetViewController(viewController: ViewControllerType<this> | null): void {\n    // hook\n  }\n\n  protected didSetViewController(viewController: ViewControllerType<this> | null): void {\n    // hook\n  }\n\n  abstract get viewObservers(): ReadonlyArray<ViewObserver>;\n\n  abstract addViewObserver(viewObserver: ViewObserver): void;\n\n  protected willAddViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  protected onAddViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  protected didAddViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  abstract removeViewObserver(viewObserver: ViewObserver): void;\n\n  protected willRemoveViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  protected onRemoveViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  protected didRemoveViewObserver(viewObserver: ViewObserver): void {\n    // hook\n  }\n\n  protected willObserve(callback: (this: this, viewObserver: ViewObserver) => void): void {\n    const viewController = this.viewController;\n    if (viewController !== null) {\n      callback.call(this, viewController);\n    }\n    const viewObservers = this.viewObservers;\n    for (let i = 0, n = viewObservers.length; i < n; i += 1) {\n      callback.call(this, viewObservers[i]);\n    }\n  }\n\n  protected didObserve(callback: (this: this, viewObserver: ViewObserver) => void): void {\n    const viewObservers = this.viewObservers;\n    for (let i = 0, n = viewObservers.length; i < n; i += 1) {\n      callback.call(this, viewObservers[i]);\n    }\n    const viewController = this.viewController;\n    if (viewController !== null) {\n      callback.call(this, viewController);\n    }\n  }\n\n  abstract get key(): string | null;\n\n  /** @hidden */\n  abstract setKey(key: string | null): void;\n\n  abstract get parentView(): View | null;\n\n  /** @hidden */\n  abstract setParentView(newParentView: View | null, oldParentView: View | null): void;\n\n  protected willSetParentView(newParentView: View | null, oldParentView: View | null): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillSetParentView !== void 0) {\n        viewObserver.viewWillSetParentView(newParentView, oldParentView, this);\n      }\n    });\n  }\n\n  protected onSetParentView(newParentView: View | null, oldParentView: View | null): void {\n    if (newParentView !== null) {\n      if (newParentView.isMounted()) {\n        this.cascadeMount();\n        if (newParentView.isPowered()) {\n          this.cascadePower();\n        }\n      }\n    } else if (this.isMounted()) {\n      try {\n        if (this.isPowered()) {\n          this.cascadeUnpower();\n        }\n      } finally {\n        this.cascadeUnmount();\n      }\n    }\n  }\n\n  protected didSetParentView(newParentView: View | null, oldParentView: View | null): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidSetParentView !== void 0) {\n        viewObserver.viewDidSetParentView(newParentView, oldParentView, this);\n      }\n    });\n  }\n\n  abstract get childViews(): ReadonlyArray<View>;\n\n  abstract getChildView(key: string): View | null;\n\n  abstract setChildView(key: string, newChildView: View | null): View | null;\n\n  abstract appendChildView(childView: View, key?: string): void;\n\n  abstract prependChildView(childView: View, key?: string): void;\n\n  abstract insertChildView(childView: View, targetView: View | null, key?: string): void;\n\n  protected willInsertChildView(childView: View, targetView: View | null | undefined): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillInsertChildView !== void 0) {\n        viewObserver.viewWillInsertChildView(childView, targetView, this);\n      }\n    });\n  }\n\n  protected onInsertChildView(childView: View, targetView: View | null | undefined): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didInsertChildView(childView: View, targetView: View | null | undefined): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidInsertChildView !== void 0) {\n        viewObserver.viewDidInsertChildView(childView, targetView, this);\n      }\n    });\n  }\n\n  abstract removeChildView(key: string): View | null;\n  abstract removeChildView(childView: View): void;\n\n  abstract removeAll(): void;\n\n  abstract remove(): void;\n\n  protected willRemoveChildView(childView: View): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillRemoveChildView !== void 0) {\n        viewObserver.viewWillRemoveChildView(childView, this);\n      }\n    });\n  }\n\n  protected onRemoveChildView(childView: View): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didRemoveChildView(childView: View): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidRemoveChildView !== void 0) {\n        viewObserver.viewDidRemoveChildView(childView, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  abstract get viewFlags(): ViewFlags;\n\n  /** @hidden */\n  abstract setViewFlags(viewFlags: ViewFlags): void;\n\n  isMounted(): boolean {\n    return (this.viewFlags & View.MountedFlag) !== 0;\n  }\n\n  abstract cascadeMount(): void;\n\n  protected willMount(): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillMount !== void 0) {\n        viewObserver.viewWillMount(this);\n      }\n    });\n  }\n\n  protected onMount(): void {\n    // hook\n  }\n\n  protected didMount(): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidMount !== void 0) {\n        viewObserver.viewDidMount(this);\n      }\n    });\n  }\n\n  abstract cascadeUnmount(): void;\n\n  protected willUnmount(): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillUnmount !== void 0) {\n        viewObserver.viewWillUnmount(this);\n      }\n    });\n  }\n\n  protected onUnmount(): void {\n    // hook\n  }\n\n  protected didUnmount(): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidUnmount !== void 0) {\n        viewObserver.viewDidUnmount(this);\n      }\n    });\n  }\n\n  isPowered(): boolean {\n    return (this.viewFlags & View.PoweredFlag) !== 0;\n  }\n\n  abstract cascadePower(): void;\n\n  protected willPower(): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillPower !== void 0) {\n        viewObserver.viewWillPower(this);\n      }\n    });\n  }\n\n  protected onPower(): void {\n    // hook\n  }\n\n  protected didPower(): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidPower !== void 0) {\n        viewObserver.viewDidPower(this);\n      }\n    });\n  }\n\n  abstract cascadeUnpower(): void;\n\n  protected willUnpower(): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillUnpower !== void 0) {\n        viewObserver.viewWillUnpower(this);\n      }\n    });\n  }\n\n  protected onUnpower(): void {\n    // hook\n  }\n\n  protected didUnpower(): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidUnpower !== void 0) {\n        viewObserver.viewDidUnpower(this);\n      }\n    });\n  }\n\n  get updateTime(): number {\n    const parentView = this.parentView;\n    return parentView !== null ? parentView.updateTime : performance.now();\n  }\n\n  requireUpdate(updateFlags: ViewFlags, immediate: boolean = false): void {\n    updateFlags &= ~View.LifecycleMask;\n    this.willRequireUpdate(updateFlags, immediate);\n    const oldUpdateFlags = this.viewFlags;\n    const newUpdateFlags = oldUpdateFlags | updateFlags;\n    const deltaUpdateFlags = newUpdateFlags & ~oldUpdateFlags;\n    if (deltaUpdateFlags !== 0) {\n      this.setViewFlags(newUpdateFlags);\n      this.requestUpdate(deltaUpdateFlags, immediate);\n    }\n    this.didRequireUpdate(updateFlags, immediate);\n  }\n\n  protected willRequireUpdate(updateFlags: ViewFlags, immediate: boolean): void {\n    // hook\n  }\n\n  protected didRequireUpdate(updateFlags: ViewFlags, immediate: boolean): void {\n    // hook\n  }\n\n  requestUpdate(updateFlags: ViewFlags, immediate: boolean): void {\n    updateFlags = this.willRequestUpdate(updateFlags, immediate);\n    const parentView = this.parentView;\n    if (parentView !== null) {\n      parentView.requestUpdate(updateFlags, immediate);\n    }\n    this.didRequestUpdate(updateFlags, immediate);\n  }\n\n  protected willRequestUpdate(updateFlags: ViewFlags, immediate: boolean): ViewFlags {\n    let additionalFlags = this.modifyUpdate(updateFlags);\n    additionalFlags &= ~View.LifecycleMask;\n    if (additionalFlags !== 0) {\n      updateFlags |= additionalFlags;\n      this.setViewFlags(this.viewFlags | additionalFlags);\n    }\n    return updateFlags;\n  }\n\n  protected didRequestUpdate(updateFlags: ViewFlags, immediate: boolean): void {\n    // hook\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & View.ProcessMask) !== 0) {\n      additionalFlags |= View.NeedsProcess;\n    }\n    if ((updateFlags & View.DisplayMask) !== 0) {\n      additionalFlags |= View.NeedsDisplay;\n    }\n    return additionalFlags;\n  }\n\n  isUpdating(): boolean {\n    return (this.viewFlags & View.UpdatingMask) !== 0;\n  }\n\n  isProcessing(): boolean {\n    return (this.viewFlags & View.ProcessingFlag) !== 0;\n  }\n\n  needsProcess(processFlags: ViewFlags, viewContext: ViewContext): ViewFlags {\n    return processFlags;\n  }\n\n  abstract cascadeProcess(processFlags: ViewFlags, viewContext: ViewContext): void;\n\n  /** @hidden */\n  protected abstract doProcess(processFlags: ViewFlags, viewContext: ViewContext): void;\n\n  protected willProcess(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillProcess !== void 0) {\n        viewObserver.viewWillProcess(viewContext, this);\n      }\n    });\n  }\n\n  protected onProcess(viewContext: ViewContext): void {\n    // hook\n  }\n\n  protected didProcess(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidProcess !== void 0) {\n        viewObserver.viewDidProcess(viewContext, this);\n      }\n    });\n  }\n\n  protected willScroll(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillScroll !== void 0) {\n        viewObserver.viewWillScroll(viewContext, this);\n      }\n    });\n  }\n\n  protected onScroll(viewContext: ViewContext): void {\n    // hook\n  }\n\n  protected didScroll(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidScroll !== void 0) {\n        viewObserver.viewDidScroll(viewContext, this);\n      }\n    });\n  }\n\n  protected willDerive(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillDerive !== void 0) {\n        viewObserver.viewWillDerive(viewContext, this);\n      }\n    });\n  }\n\n  protected onDerive(viewContext: ViewContext): void {\n    // hook\n  }\n\n  protected didDerive(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidDerive !== void 0) {\n        viewObserver.viewDidDerive(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doProcessChildViews(processFlags: ViewFlags, viewContext: ViewContext): void {\n    const childViews = this.childViews;\n    if ((processFlags & View.ProcessMask) !== 0 && childViews.length !== 0) {\n      this.willProcessChildViews(viewContext);\n      for (let i = 0; i < childViews.length; i += 1) {\n        const childView = childViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doProcessChildView(childView, processFlags, childViewContext);\n      }\n      this.didProcessChildViews(viewContext);\n    }\n  }\n\n  /** @hidden */\n  protected doProcessChildView(childView: View, processFlags: ViewFlags, viewContext: ViewContext): void {\n    childView.cascadeProcess(processFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected willProcessChildViews(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillProcessChildViews !== void 0) {\n        viewObserver.viewWillProcessChildViews(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected didProcessChildViews(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidProcessChildViews !== void 0) {\n        viewObserver.viewDidProcessChildViews(viewContext, this);\n      }\n    });\n  }\n\n  isDisplaying(): boolean {\n    return (this.viewFlags & View.DisplayingFlag) !== 0;\n  }\n\n  needsDisplay(displayFlags: ViewFlags, viewContext: ViewContext): ViewFlags {\n    return displayFlags;\n  }\n\n  abstract cascadeDisplay(displayFlags: ViewFlags, viewContext: ViewContext): void;\n\n  /** @hidden */\n  protected abstract doDisplay(displayFlags: ViewFlags, viewContext: ViewContext): void;\n\n  protected willDisplay(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillDisplay !== void 0) {\n        viewObserver.viewWillDisplay(viewContext, this);\n      }\n    });\n  }\n\n  protected onDisplay(viewContext: ViewContext): void {\n    // hook\n  }\n\n  protected didDisplay(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidDisplay !== void 0) {\n        viewObserver.viewDidDisplay(viewContext, this);\n      }\n    });\n  }\n\n  protected willLayout(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillLayout !== void 0) {\n        viewObserver.viewWillLayout(viewContext, this);\n      }\n    });\n  }\n\n  protected onLayout(viewContext: ViewContext): void {\n    // hook\n  }\n\n  protected didLayout(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidLayout !== void 0) {\n        viewObserver.viewDidLayout(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doDisplayChildViews(displayFlags: ViewFlags, viewContext: ViewContext): void {\n    const childViews = this.childViews;\n    if ((displayFlags & View.DisplayMask) !== 0 && childViews.length !== 0) {\n      this.willDisplayChildViews(viewContext);\n      for (let i = 0; i < childViews.length; i += 1) {\n        const childView = childViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doDisplayChildView(childView, displayFlags, childViewContext);\n      }\n      this.didDisplayChildViews(viewContext);\n    }\n  }\n\n  /** @hidden */\n  protected doDisplayChildView(childView: View, displayFlags: ViewFlags, viewContext: ViewContext): void {\n    childView.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected willDisplayChildViews(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewWillDisplayChildViews !== void 0) {\n        viewObserver.viewWillDisplayChildViews(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected didDisplayChildViews(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: ViewObserver): void {\n      if (viewObserver.viewDidDisplayChildViews !== void 0) {\n        viewObserver.viewDidDisplayChildViews(viewContext, this);\n      }\n    });\n  }\n\n  childViewContext(childView: View, viewContext: ViewContext): ViewContext {\n    return viewContext;\n  }\n\n  abstract hasViewScope(scopeName: string): boolean;\n\n  abstract getViewScope(scopeName: string): ViewScope<View, unknown> | null;\n\n  abstract setViewScope(scopeName: string, viewScope: ViewScope<View, unknown> | null): void;\n\n  /** @hidden */\n  getLazyViewScope(scopeName: string): ViewScope<View, unknown> | null {\n    let viewScope = this.getViewScope(scopeName);\n    if (viewScope === null) {\n      const viewClass = (this as any).__proto__ as ViewClass;\n      const descriptor = View.getViewScopeDescriptor(scopeName, viewClass);\n      if (descriptor !== null && descriptor.scopeType !== void 0) {\n        viewScope = View.initViewScope(descriptor.scopeType, this, scopeName, descriptor);\n        this.setViewScope(scopeName, viewScope);\n      }\n    }\n    return viewScope\n  }\n\n  /** @hidden */\n  viewScopeDidSetState<T>(viewScope: ViewScope<View, T>, newState: T | undefined, oldState: T | undefined): void {\n    this.requireUpdate(View.NeedsDerive);\n  }\n\n  abstract hasLayoutAnchor(anchorName: string): boolean;\n\n  abstract getLayoutAnchor(anchorName: string): LayoutAnchor<LayoutView> | null;\n\n  abstract setLayoutAnchor(anchorName: string, layoutAnchor: LayoutAnchor<LayoutView> | null): void;\n\n  get viewport(): Viewport | null {\n    const parentView = this.parentView;\n    return parentView !== null ? parentView.viewport : null;\n  }\n\n  get viewIdiom(): ViewIdiom {\n    const parentView = this.parentView;\n    return parentView !== null ? parentView.viewIdiom : \"unspecified\";\n  }\n\n  get rootView(): RootView | null {\n    const parentView = this.parentView;\n    return parentView !== null ? parentView.rootView : null;\n  }\n\n  /**\n   * Returns the transformation from the parent view coordinates to view\n   * coordinates.\n   */\n  abstract get parentTransform(): Transform;\n\n  /**\n   * Returns the transformation from page coordinates to view coordinates.\n   */\n  get pageTransform(): Transform {\n    const parentView = this.parentView;\n    if (parentView !== null) {\n      return parentView.pageTransform.transform(this.parentTransform);\n    } else {\n      return Transform.identity();\n    }\n  }\n\n  get pageBounds(): BoxR2 {\n    const clientBounds = this.clientBounds;\n    const clientTransform = this.clientTransform;\n    return clientBounds.transform(clientTransform);\n  }\n\n  /**\n   * Returns the bounding box, in page coordinates, the edges to which attached\n   * popovers should point.\n   */\n  get popoverFrame(): BoxR2 {\n    return this.pageBounds;\n  }\n\n  /**\n   * Returns the transformation from viewport coordinates to view coordinates.\n   */\n  get clientTransform(): Transform {\n    let clientTransform: Transform;\n    const scrollX = window.pageXOffset;\n    const scrollY = window.pageYOffset;\n    if (scrollX !== 0 || scrollY !== 0) {\n      clientTransform = Transform.translate(scrollX, scrollY);\n    } else {\n      clientTransform = Transform.identity();\n    }\n    const pageTransform = this.pageTransform;\n    return clientTransform.transform(pageTransform);\n  }\n\n  abstract get clientBounds(): BoxR2;\n\n  intersectsViewport(): boolean {\n    const bounds = this.clientBounds;\n    const viewportWidth = document.documentElement.clientWidth;\n    const viewportHeight = document.documentElement.clientHeight;\n    return (bounds.top <= 0 && 0 < bounds.bottom || 0 <= bounds.top && bounds.top < viewportHeight)\n        && (bounds.left <= 0 && 0 < bounds.right || 0 <= bounds.left && bounds.left < viewportWidth);\n  }\n\n  abstract dispatchEvent(event: Event): boolean;\n\n  abstract on(type: string, listener: EventListenerOrEventListenerObject,\n              options?: AddEventListenerOptions | boolean): this;\n\n  abstract off(type: string, listener: EventListenerOrEventListenerObject,\n               options?: EventListenerOptions | boolean): this;\n\n  /** @hidden */\n  static getViewScopeDescriptor(scopeName: string, viewClass: ViewClass | null = null): ViewScopeDescriptor<View, unknown> | null {\n    if (viewClass === null) {\n      viewClass = this.prototype as unknown as ViewClass;\n    }\n    do {\n      if (viewClass.hasOwnProperty(\"_viewScopeDescriptors\")) {\n        const descriptor = viewClass._viewScopeDescriptors![scopeName];\n        if (descriptor !== void 0) {\n          return descriptor;\n        }\n      }\n      viewClass = (viewClass as any).__proto__ as ViewClass | null;\n    } while (viewClass !== null);\n    return null;\n  }\n\n  /** @hidden */\n  static initViewScope<V extends View, T>(ViewScope: ViewScopeConstructor, view: V, scopeName: string,\n                                          descriptor: ViewScopeDescriptor<V, T>): ViewScope<V, T> {\n    let value: T | undefined;\n    let inherit: string | null | undefined;\n    if (descriptor.init !== void 0) {\n      value = descriptor.init.call(view)\n    } else {\n      value = descriptor.value;\n    }\n    if (typeof descriptor.inherit === \"string\") {\n      inherit = descriptor.inherit;\n    } else if (descriptor.inherit === true) {\n      inherit = scopeName;\n    }\n    return new ViewScope<V, T>(view, scopeName, value, inherit);\n  }\n\n  /** @hidden */\n  static decorateViewScope<V extends View, T>(\n      ViewScope: ViewScopeConstructor, descriptor: ViewScopeDescriptor<V, T>,\n      viewClass: ViewClass, scopeName: string): void {\n    if (!viewClass.hasOwnProperty(\"_viewScopeDescriptors\")) {\n      viewClass._viewScopeDescriptors = {};\n    }\n    viewClass._viewScopeDescriptors![scopeName] = descriptor;\n    Object.defineProperty(viewClass, scopeName, {\n      get: function (this: V): ViewScope<V, T> {\n        let viewScope = this.getViewScope(scopeName) as ViewScope<V, T> | null;\n        if (viewScope === null) {\n          viewScope = View.initViewScope(ViewScope, this, scopeName, descriptor);\n          this.setViewScope(scopeName, viewScope);\n        }\n        return viewScope;\n      },\n      configurable: true,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  static initLayoutAnchor<V extends LayoutView>(LayoutAnchor: LayoutAnchorConstructor, view: V, anchorName: string,\n                                                descriptor: LayoutAnchorDescriptor<V> | undefined): LayoutAnchor<V> {\n    let value: number;\n    let strength: ConstraintStrength;\n    if (descriptor !== void 0 && descriptor.value !== void 0) {\n      value = descriptor.value;\n    } else {\n      value = NaN;\n    }\n    if (descriptor !== void 0 && descriptor.strength !== void 0 && descriptor.strength !== null) {\n      strength = ConstraintStrength.fromAny(descriptor.strength);\n    } else {\n      strength = ConstraintStrength.Strong;\n    }\n    const enabled = descriptor !== void 0 ? !!descriptor.enabled : false;\n    const getState = descriptor !== void 0 ? descriptor.get : void 0;\n    const setValue = descriptor !== void 0 ? descriptor.set : void 0;\n    const layoutAnchor =  new LayoutAnchor<V>(view, anchorName, value, strength, enabled);\n    layoutAnchor.getState = getState;\n    layoutAnchor.setValue = setValue;\n    return layoutAnchor;\n  }\n\n  /** @hidden */\n  static decorateLayoutAnchor<V extends LayoutView>(\n      LayoutAnchor: LayoutAnchorConstructor, descriptor: LayoutAnchorDescriptor<V> | undefined,\n      viewClass: unknown, anchorName: string): void {\n    Object.defineProperty(viewClass, anchorName, {\n      get: function (this: V): LayoutAnchor<V> {\n        let layoutAnchor = this.getLayoutAnchor(anchorName) as LayoutAnchor<V> | null;\n        if (layoutAnchor === null) {\n          layoutAnchor = View.initLayoutAnchor(LayoutAnchor, this, anchorName, descriptor);\n          this.setLayoutAnchor(anchorName, layoutAnchor);\n        }\n        return layoutAnchor;\n      },\n      configurable: true,\n      enumerable: true,\n    });\n  }\n\n  static fromTag<T extends keyof ElementViewTagMap>(tag: T): ElementViewTagMap[T];\n  static fromTag(tag: string): ElementView;\n  static fromTag(tag: string): ElementView {\n    if (tag === \"svg\") {\n      return new View.Svg(document.createElementNS(View.Svg.namespace, tag) as SVGElement);\n    } else if (tag === \"canvas\") {\n      return new View.Canvas(document.createElement(tag) as HTMLCanvasElement);\n    } else {\n      return new View.Html(document.createElement(tag));\n    }\n  }\n\n  static fromNode(node: HTMLCanvasElement): CanvasView;\n  static fromNode(node: HTMLElement): HtmlView;\n  static fromNode(node: SVGElement): SvgView;\n  static fromNode(node: Element): ElementView;\n  static fromNode(node: Text): TextView;\n  static fromNode(node: Node): NodeView;\n  static fromNode(node: ViewNode): NodeView {\n    if (node.view instanceof View) {\n      return node.view;\n    } else {\n      let view: NodeView;\n      if (node instanceof Element) {\n        if (node instanceof HTMLElement) {\n          if (node instanceof HTMLCanvasElement) {\n            view = new View.Canvas(node);\n          } else {\n            view = new View.Html(node);\n          }\n        } else if (node instanceof SVGElement) {\n          view = new View.Svg(node);\n        } else {\n          view = new View.Element(node);\n        }\n      } else if (node instanceof Text) {\n        view = new View.Text(node);\n      } else {\n        view = new View.Node(node);\n      }\n      const parentView = view.parentView;\n      if (parentView !== null) {\n        view.setParentView(parentView, null);\n      }\n      return view;\n    }\n  }\n\n  static fromConstructor<C extends ElementViewConstructor | RenderedViewConstructor>(viewConstructor: C): InstanceType<C>;\n  static fromConstructor(viewConstructor: ElementViewConstructor | RenderedViewConstructor): View {\n    if (View.Element.isConstructor(viewConstructor)) {\n      if (viewConstructor.namespace === void 0) {\n        return new viewConstructor(document.createElement(viewConstructor.tag));\n      } else {\n        return new viewConstructor(document.createElementNS(viewConstructor.namespace, viewConstructor.tag));\n      }\n    } else if (typeof viewConstructor === \"function\") {\n      return new viewConstructor();\n    }\n    throw new TypeError(\"\" + viewConstructor);\n  }\n\n  static create<T extends keyof ElementViewTagMap>(tag: T): ElementViewTagMap[T];\n  static create(tag: string): ElementView;\n  static create(node: HTMLElement): HtmlView;\n  static create(node: SVGElement): SvgView;\n  static create(node: Element): ElementView;\n  static create(node: Text): TextView;\n  static create(node: Node): NodeView;\n  static create<C extends ElementViewConstructor>(viewConstructor: C): InstanceType<C>;\n  static create<C extends RenderedViewConstructor>(viewConstructor: C): InstanceType<C>;\n  static create(source: string | Node | ElementViewConstructor | RenderedViewConstructor): View {\n    if (typeof source === \"string\") {\n      return View.fromTag(source);\n    } else if (source instanceof Node) {\n      return View.fromNode(source);\n    } else if (typeof source === \"function\") {\n      return View.fromConstructor(source);\n    }\n    throw new TypeError(\"\" + source);\n  }\n\n  /** @hidden */\n  static readonly MountedFlag: ViewFlags = 1 << 0;\n  /** @hidden */\n  static readonly PoweredFlag: ViewFlags = 1 << 1;\n  /** @hidden */\n  static readonly HiddenFlag: ViewFlags = 1 << 2;\n  /** @hidden */\n  static readonly CulledFlag: ViewFlags = 1 << 3;\n  /** @hidden */\n  static readonly HoveringFlag: ViewFlags = 1 << 4;\n  /** @hidden */\n  static readonly ProcessingFlag: ViewFlags = 1 << 5;\n  /** @hidden */\n  static readonly DisplayingFlag: ViewFlags = 1 << 6;\n  /** @hidden */\n  static readonly ImmediateFlag: ViewFlags = 1 << 7;\n  /** @hidden */\n  static readonly RemovingFlag: ViewFlags = 1 << 8;\n  /** @hidden */\n  static readonly UpdatingMask: ViewFlags = View.ProcessingFlag\n                                          | View.DisplayingFlag;\n  /** @hidden */\n  static readonly LifecycleMask: ViewFlags = View.MountedFlag\n                                           | View.PoweredFlag\n                                           | View.HiddenFlag\n                                           | View.CulledFlag\n                                           | View.HoveringFlag\n                                           | View.ProcessingFlag\n                                           | View.DisplayingFlag\n                                           | View.RemovingFlag;\n\n  static readonly NeedsProcess: ViewFlags = 1 << 9;\n  static readonly NeedsResize: ViewFlags = 1 << 10;\n  static readonly NeedsScroll: ViewFlags = 1 << 11;\n  static readonly NeedsDerive: ViewFlags = 1 << 12;\n  static readonly NeedsAnimate: ViewFlags = 1 << 13;\n  static readonly NeedsProject: ViewFlags = 1 << 14;\n  /** @hidden */\n  static readonly ProcessMask: ViewFlags = View.NeedsProcess\n                                         | View.NeedsResize\n                                         | View.NeedsScroll\n                                         | View.NeedsDerive\n                                         | View.NeedsAnimate\n                                         | View.NeedsProject;\n\n  static readonly NeedsDisplay: ViewFlags = 1 << 15;\n  static readonly NeedsLayout: ViewFlags = 1 << 16;\n  static readonly NeedsRender: ViewFlags = 1 << 17;\n  static readonly NeedsComposite: ViewFlags = 1 << 18;\n  /** @hidden */\n  static readonly DisplayMask: ViewFlags = View.NeedsDisplay\n                                         | View.NeedsLayout\n                                         | View.NeedsRender\n                                         | View.NeedsComposite;\n\n  /** @hidden */\n  static readonly UpdateMask: ViewFlags = View.ProcessMask\n                                        | View.DisplayMask;\n\n  /** @hidden */\n  static readonly ViewFlagShift: ViewFlags = 19;\n  /** @hidden */\n  static readonly ViewFlagMask: ViewFlags = (1 << View.ViewFlagShift) - 1;\n\n  // Forward type declarations\n  /** @hidden */\n  static Root: typeof RootView; // defined by RootView\n  /** @hidden */\n  static Layout: typeof LayoutView; // defined by LayoutView\n  /** @hidden */\n  static Animated: typeof AnimatedView; // defined by AnimatedView\n  /** @hidden */\n  static Rendered: typeof RenderedView; // defined by RenderedView\n  /** @hidden */\n  static Graphics: typeof GraphicsView; // defined by GraphicsView\n  /** @hidden */\n  static Composited: typeof CompositedView; // defined by CompositedView\n  /** @hidden */\n  static Raster: typeof RasterView; // defined by RasterView\n  /** @hidden */\n  static Node: typeof NodeView; // defined by NodeView\n  /** @hidden */\n  static Text: typeof TextView; // defined by TextView\n  /** @hidden */\n  static Element: typeof ElementView; // defined by ElementView\n  /** @hidden */\n  static Svg: typeof SvgView; // defined by SvgView\n  /** @hidden */\n  static Html: typeof HtmlView; // defined by HtmlView\n  /** @hidden */\n  static Canvas: typeof CanvasView; // defined by CanvasView\n  /** @hidden */\n  static Ui: typeof UiView; // defined by UiView\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Viewport} from \"./Viewport\";\nimport {ViewIdiom} from \"./ViewIdiom\";\nimport {ViewContext} from \"./ViewContext\";\nimport {View} from \"./View\";\nimport {ViewObserver} from \"./ViewObserver\";\nimport {RootView} from \"./root/RootView\";\nimport {RootViewController} from \"./root/RootViewController\";\n\nexport class ViewController<V extends View = View> implements ViewObserver<V> {\n  /** @hidden */\n  protected _view: V | null;\n\n  constructor() {\n    this._view = null;\n  }\n\n  get view(): V | null {\n    return this._view;\n  }\n\n  setView(view: V | null): void {\n    this.willSetView(view);\n    this._view = view;\n    this.onSetView(view);\n    this.didSetView(view);\n  }\n\n  protected willSetView(view: V | null): void {\n    // hook\n  }\n\n  protected onSetView(view: V | null): void {\n    // hook\n  }\n\n  protected didSetView(view: V | null): void {\n    // hook\n  }\n\n  get key(): string | null {\n    const view = this._view;\n    return view !== null ? view.key : null;\n  }\n\n  get parentView(): View | null {\n    const view = this._view;\n    return view !== null ? view.parentView : null;\n  }\n\n  get parentViewController(): ViewController | null {\n    const parentView = this.parentView;\n    return parentView !== null ? parentView.viewController : null;\n  }\n\n  viewWillSetParentView(newParentView: View | null, oldParentView: View | null, view: V): void {\n    // hook\n  }\n\n  viewDidSetParentView(newParentView: View | null, oldParentView: View | null, view: V): void {\n    // hook\n  }\n\n  get childViews(): ReadonlyArray<View> {\n    const view = this._view;\n    return view !== null ? view.childViews : [];\n  }\n\n  get childViewControllers(): ReadonlyArray<ViewController | null> {\n    return this.childViews.map(function (view: View): ViewController | null {\n      return view.viewController;\n    });\n  }\n\n  getChildView(key: string): View | null {\n    const view = this._view;\n    return view !== null ? view.getChildView(key) : null;\n  }\n\n  getChildViewController(key: string): ViewController | null {\n    const childView = this.getChildView(key);\n    return childView !== null ? childView.viewController : null;\n  }\n\n  setChildView(key: string, newChildView: View | null): View | null {\n    const view = this._view;\n    if (view !== null) {\n      return view.setChildView(key, newChildView);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  setChildViewController(key: string, newChildViewController: ViewController | null): ViewController | null {\n    const newChildView = newChildViewController !== null ? newChildViewController.view : null;\n    if (newChildView !== null) {\n      const oldChildView = this.setChildView(key, newChildView);\n      return oldChildView !== null ? oldChildView.viewController : null;\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  appendChildView(childView: View, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.appendChildView(childView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  appendChildViewController(childViewController: ViewController, key?: string): void {\n    const view = this._view;\n    const childView = childViewController.view;\n    if (view !== null && childView !== null) {\n      view.appendChildView(childView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  prependChildView(childView: View, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.prependChildView(childView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  prependChildViewController(childViewController: ViewController, key?: string): void {\n    const view = this._view;\n    const childView = childViewController.view;\n    if (view !== null && childView !== null) {\n      view.prependChildView(childView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  insertChildView(childView: View, targetView: View | null, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.insertChildView(childView, targetView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  insertChildViewController(childViewController: ViewController,\n                            targetViewController: ViewController | View | null,\n                            key?: string): void {\n    const view = this._view;\n    const childView = childViewController.view;\n    if (view !== null && childView !== null) {\n      let targetView: View | null;\n      if (targetViewController !== null && !(targetViewController instanceof View)) {\n        targetView = targetViewController.view;\n      } else {\n        targetView = targetViewController;\n      }\n      view.insertChildView(childView, targetView, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  viewWillInsertChildView(childView: View, targetView: View | null | undefined, view: V): void {\n    // hook\n  }\n\n  viewDidInsertChildView(childView: View, targetView: View | null | undefined, view: V): void {\n    // hook\n  }\n\n  removeChildView(key: string): View | null;\n  removeChildView(childView: View): void;\n  removeChildView(key: string | View): View | null | void {\n    const view = this._view;\n    if (view !== null) {\n      if (typeof key === \"string\") {\n        return view.removeChildView(key);\n      } else {\n        view.removeChildView(key);\n      }\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  removeChildViewController(key: string): ViewController | null;\n  removeChildViewController(childViewController: ViewController): void;\n  removeChildViewController(childViewController: string | ViewController): ViewController | null | void {\n    const view = this._view;\n    if (view !== null) {\n      if (typeof childViewController === \"string\") {\n        const childView = view.removeChildView(childViewController);\n        return childView !== null ? childView.viewController : null;\n      } else {\n        const childView = childViewController.view;\n        if (childView !== null) {\n          view.removeChildView(childView);\n        } else {\n          throw new Error(\"no view\");\n        }\n      }\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  removeAll(): void {\n    const view = this._view;\n    if (view !== null) {\n      view.removeAll();\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  remove(): void {\n    const view = this._view;\n    if (view !== null) {\n      view.remove();\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  viewWillRemoveChildView(childView: View, view: V): void {\n    // hook\n  }\n\n  viewDidRemoveChildView(childView: View, view: V): void {\n    // hook\n  }\n\n  isMounted(): boolean {\n    const view = this._view;\n    return view !== null && view.isMounted();\n  }\n\n  viewWillMount(view: V): void {\n    // hook\n  }\n\n  viewDidMount(view: V): void {\n    // hook\n  }\n\n  viewWillUnmount(view: V): void {\n    // hook\n  }\n\n  viewDidUnmount(view: V): void {\n    // hook\n  }\n\n  isPowered(): boolean {\n    const view = this._view;\n    return view !== null && view.isPowered();\n  }\n\n  viewWillPower(view: V): void {\n    // hook\n  }\n\n  viewDidPower(view: V): void {\n    // hook\n  }\n\n  viewWillUnpower(view: V): void {\n    // hook\n  }\n\n  viewDidUnpower(view: V): void {\n    // hook\n  }\n\n  isUpdating(): boolean {\n    const view = this._view;\n    return view !== null && view.isUpdating();\n  }\n\n  isProcessing(): boolean {\n    const view = this._view;\n    return view !== null && view.isProcessing();\n  }\n\n  viewWillProcess(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidProcess(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillScroll(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidScroll(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillDerive(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDerive(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillProcessChildViews(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidProcessChildViews(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  isDisplaying(): boolean {\n    const view = this._view;\n    return view !== null && view.isDisplaying();\n  }\n\n  viewWillDisplay(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDisplay(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillLayout(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidLayout(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillDisplayChildViews(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDisplayChildViews(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  get viewport(): Viewport | null {\n    const view = this._view;\n    return view !== null ? view.viewport : null;\n  }\n\n  get viewIdiom(): ViewIdiom {\n    const view = this._view;\n    return view !== null ? view.viewIdiom : \"unspecified\";\n  }\n\n  get rootView(): RootView | null {\n    const view = this._view;\n    return view !== null ? view.rootView : null;\n  }\n\n  get rootViewController(): RootViewController | null {\n    const rootView = this.rootView;\n    return rootView !== null ? rootView.viewController : null;\n  }\n\n  intersectsViewport(): boolean {\n    const view = this._view;\n    return view !== null && view.intersectsViewport();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstrainVariable, Constraint, ConstraintScope} from \"@swim/constraint\";\n\nexport interface LayoutScope extends ConstraintScope {\n  readonly constraints: ReadonlyArray<Constraint>;\n\n  readonly constraintVariables: ReadonlyArray<ConstrainVariable>;\n\n  /** @hidden */\n  updateConstraintVariables(): void;\n}\n\n/** @hidden */\nexport const LayoutScope = {\n  is(object: unknown): object is LayoutScope {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as LayoutScope;\n      return typeof view.updateConstraintVariables === \"function\";\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstrainVariable, Constraint} from \"@swim/constraint\";\n\n/** @hidden */\nexport interface LayoutManager {\n  /** @hidden */\n  activateConstraint(constraint: Constraint): void;\n\n  /** @hidden */\n  deactivateConstraint(constraint: Constraint): void;\n\n  /** @hidden */\n  didAddConstraint(constraint: Constraint): void;\n\n  /** @hidden */\n  didRemoveConstraint(constraint: Constraint): void;\n\n  /** @hidden */\n  activateConstraintVariable(constraintVariable: ConstrainVariable): void;\n\n  /** @hidden */\n  deactivateConstraintVariable(constraintVariable: ConstrainVariable): void;\n\n  /** @hidden */\n  setConstraintVariable(constraintVariable: ConstrainVariable, state: number): void;\n\n  /** @hidden */\n  didAddConstraintVariable(constraintVariable: ConstrainVariable): void;\n\n  /** @hidden */\n  didRemoveConstraintVariable(constraintVariable: ConstrainVariable): void;\n\n  /** @hidden */\n  didUpdateConstraintVariable(constraintVariable: ConstrainVariable, newValue: number, oldValue: number): void;\n}\n\n/** @hidden */\nexport const LayoutManager = {\n  is(object: unknown): object is LayoutManager {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as LayoutManager;\n      return typeof view.setConstraintVariable === \"function\";\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstrainVariable, Constraint, ConstraintSolver} from \"@swim/constraint\";\nimport {LayoutManager} from \"./LayoutManager\";\n\n/** @hidden */\nexport class LayoutSolver extends ConstraintSolver {\n  /** @hidden */\n  readonly _layoutManager: LayoutManager;\n\n  constructor(layoutManager: LayoutManager) {\n    super();\n    this._layoutManager = layoutManager;\n  }\n\n  get layoutManager(): LayoutManager {\n    return this._layoutManager;\n  }\n\n  protected didAddConstraint(constraint: Constraint): void {\n    this._layoutManager.didAddConstraint(constraint);\n  }\n\n  protected didRemoveConstraint(constraint: Constraint): void {\n    this._layoutManager.didRemoveConstraint(constraint);\n  }\n\n  protected didAddConstraintVariable(constraintVariable: ConstrainVariable): void {\n    this._layoutManager.didAddConstraintVariable(constraintVariable);\n  }\n\n  protected didRemoveConstraintVariable(constraintVariable: ConstrainVariable): void {\n    this._layoutManager.didRemoveConstraintVariable(constraintVariable);\n  }\n\n  protected didUpdateConstraintVariable(constraintVariable: ConstrainVariable, newValue: number, oldValue: number): void {\n    this._layoutManager.didUpdateConstraintVariable(constraintVariable, newValue, oldValue);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {ConstrainBinding, AnyConstraintStrength, ConstraintStrength} from \"@swim/constraint\";\nimport {LayoutScope} from \"./LayoutScope\";\nimport {View} from \"../View\";\n\nexport type LayoutAnchorGetState<S extends LayoutScope> = (this: S, oldState: number) => number;\n\nexport type LayoutAnchorSetValue<S extends LayoutScope> = (this: S, newValue: number) => void;\n\nexport interface LayoutAnchorDescriptor<S extends LayoutScope> {\n  get?: LayoutAnchorGetState<S>;\n  set?: LayoutAnchorSetValue<S>;\n  value?: number;\n  strength?: AnyConstraintStrength;\n  enabled?: boolean;\n}\n\nexport interface LayoutAnchorConstructor {\n  new<S extends LayoutScope>(scope: S, anchorName: string, value: number,\n                             strength: ConstraintStrength, enabled?: boolean): LayoutAnchor<S>;\n}\n\nexport interface LayoutAnchorClass extends LayoutAnchorConstructor {\n  <S extends LayoutScope>(descriptor: LayoutAnchorDescriptor<S>): PropertyDecorator;\n}\n\nexport interface LayoutAnchor<S extends LayoutScope> extends ConstrainBinding {\n  (): number;\n  (state: number): S;\n\n  /** @hidden */\n  _scope: S;\n  /** @hidden */\n  _enabled: boolean;\n\n  readonly scope: S;\n\n  enabled(): boolean;\n  enabled(enabled: boolean): this;\n\n  updateState(): void;\n\n  /** @hidden */\n  getState?: LayoutAnchorGetState<S>;\n\n  /** @hidden */\n  setValue?: LayoutAnchorSetValue<S>;\n}\n\nexport const LayoutAnchor: LayoutAnchorClass = (function (_super: typeof ConstrainBinding): LayoutAnchorClass {\n  function LayoutAnchorDecoratorFactory<S extends LayoutScope>(descriptor: LayoutAnchorDescriptor<S>): PropertyDecorator {\n    return View.decorateLayoutAnchor.bind(void 0, LayoutAnchor, descriptor);\n  }\n\n  function LayoutAnchorConstructor<S extends LayoutScope>(this: LayoutAnchor<S>, scope: S, anchorName: string, value: number,\n                                                          strength: ConstraintStrength, enabled?: boolean): LayoutAnchor<S> {\n    if (enabled === void 0) {\n      enabled = false;\n    }\n    const _this = _super.call(this, scope, anchorName, value, strength) || this;\n    _this._enabled = enabled;\n    return _this;\n  }\n\n  const LayoutAnchor: LayoutAnchorClass = function <S extends LayoutScope>(\n      this: LayoutAnchor<S> | LayoutAnchorClass,\n      scope: S | LayoutAnchorDescriptor<S>,\n      anchorName?: string,\n      value?: number,\n      strength?: ConstraintStrength,\n      enabled?: boolean): LayoutAnchor<S> | PropertyDecorator {\n    if (this instanceof LayoutAnchor) { // constructor\n      let _this: LayoutAnchor<S> = function accessor(state?: number): number | S {\n        if (state === void 0) {\n          return _this.state;\n        } else {\n          _this.enabled(true).setState(state);\n          return _this._scope;\n        }\n      } as LayoutAnchor<S>;\n      (_this as any).__proto__ = this;\n      _this = LayoutAnchorConstructor.call(this, scope, anchorName, value, strength, enabled);\n      return _this;\n    } else { // decorator factory\n      const descriptor = scope as LayoutAnchorDescriptor<S>;\n      return LayoutAnchorDecoratorFactory(descriptor);\n    }\n  } as LayoutAnchorClass;\n  __extends(LayoutAnchor, _super);\n\n  LayoutAnchor.prototype.enabled = function <S extends LayoutScope>(this: LayoutAnchor<S>, enabled?: boolean): boolean | LayoutAnchor<S> {\n    if (enabled === void 0) {\n      return this._enabled;\n    } else {\n      this._enabled = enabled;\n      return this;\n    }\n  };\n\n  LayoutAnchor.prototype.updateValue = function <S extends LayoutScope>(this: LayoutAnchor<S>, newValue: number): void {\n    const oldValue = this._value;\n    if (oldValue !== newValue) {\n      this._value = newValue;\n      if (this._enabled) {\n        const setValue = this.setValue;\n        if (setValue !== void 0) {\n          setValue.call(this._scope, newValue);\n        }\n      }\n    }\n  };\n\n  LayoutAnchor.prototype.updateState = function <S extends LayoutScope>(this: LayoutAnchor<S>): void {\n    if (!this._enabled) {\n      const getState = this.getState;\n      if (getState !== void 0) {\n        const oldState = this._state;\n        const newState = getState.call(this._scope, oldState);\n        this.setState(newState);\n      }\n    }\n  };\n\n  return LayoutAnchor;\n}(ConstrainBinding));\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {LayoutScope} from \"./LayoutScope\";\nimport {View} from \"../View\";\n\nexport interface LayoutView extends View, LayoutScope {\n}\n\n/** @hidden */\nexport const LayoutView = {\n  is(object: unknown): object is LayoutView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as LayoutView;\n      return view instanceof View\n          && typeof view.addConstraint === \"function\"\n          && typeof view.removeConstraint === \"function\"\n          && typeof view.updateConstraintVariables === \"function\";\n    }\n    return false;\n  },\n};\nView.Layout = LayoutView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Viewport} from \"../Viewport\";\nimport {ViewContext} from \"../ViewContext\";\nimport {View} from \"../View\";\nimport {ModalOptions, Modal} from \"../modal/Modal\";\nimport {RootViewController} from \"./RootViewController\";\n\nexport interface RootView extends View {\n  readonly viewController: RootViewController | null;\n\n  readonly rootView: this;\n\n  readonly viewport: Viewport;\n\n  readonly viewContext: ViewContext;\n\n  readonly modals: ReadonlyArray<Modal>;\n\n  toggleModal(popover: Modal, options?: ModalOptions): void;\n\n  presentModal(popover: Modal, options?: ModalOptions): void;\n\n  dismissModal(popover: Modal): void;\n\n  dismissModals(): void;\n}\n\n/** @hidden */\nexport const RootView = {\n  is(object: unknown): object is RootView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as RootView;\n      return view instanceof View\n          && typeof view.toggleModal === \"function\"\n          && typeof view.presentModal === \"function\"\n          && typeof view.dismissModal === \"function\"\n          && typeof view.dismissModals === \"function\";\n    }\n    return false;\n  },\n};\nView.Root = RootView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {ViewClass, View} from \"../View\";\nimport {AtomicViewScope} from \"./AtomicViewScope\";\n\nexport type ViewScopeInit<V extends View, T> = (this: V) => T;\n\nexport interface ViewScopeDescriptor<V extends View, T> {\n  init?: ViewScopeInit<V, T>;\n  value?: T;\n  inherit?: string | boolean | null;\n  /** @hidden */\n  scopeType?: ViewScopeConstructor;\n}\n\nexport interface ViewScopeConstructor {\n  new<V extends View, T>(view: V, scopeName: string, value?: T, inherit?: string | null): ViewScope<V, T>;\n}\n\nexport interface ViewScopeClass extends ViewScopeConstructor, PropertyDecorator {\n  <V extends View, T>(descriptor?: ViewScopeDescriptor<V, T>): PropertyDecorator;\n\n  // Forward type declarations\n  /** @hidden */\n  Atomic: typeof AtomicViewScope; // defined by AtomicViewScope\n}\n\nexport interface ViewScope<V extends View, T> {\n  (): T | undefined;\n  (state: T | undefined): V;\n\n  /** @hidden */\n  _view: V;\n  /** @hidden */\n  _inherit: string | null;\n\n  readonly view: V;\n\n  readonly name: string;\n\n  readonly inherit: string | null;\n\n  readonly superScope: ViewScope<View, T> | null;\n\n  readonly superState: T | undefined;\n\n  readonly state: T | undefined;\n\n  setState(newState: T | undefined): void;\n}\n\nexport const ViewScope: ViewScopeClass = (function (_super: typeof Object): ViewScopeClass {\n  function ViewScopeDecorator(viewClass: ViewClass, scopeName: string): void {\n    const scopeType = ViewScope.Atomic;\n    const descriptor: ViewScopeDescriptor<View, unknown> = {scopeType};\n    View.decorateViewScope(scopeType, descriptor, viewClass, scopeName);\n  }\n\n  function ViewScopeDecoratorFactory<V extends View, T>(descriptor?: ViewScopeDescriptor<V, T>): PropertyDecorator {\n    if (descriptor === void 0) {\n      descriptor = {};\n    }\n    let scopeType = descriptor.scopeType;\n    if (scopeType === void 0) {\n      scopeType = ViewScope.Atomic;\n      descriptor.scopeType = scopeType;\n    }\n    return View.decorateViewScope.bind(void 0, scopeType, descriptor);\n  }\n\n  function ViewScopeConstructor<V extends View, T>(\n      this: ViewScope<V, T>, view: V, scopeName: string,\n      value?: T, inherit?: string | null): ViewScope<V, T> {\n    if (inherit === void 0) {\n      inherit = null;\n    }\n    Object.defineProperty(this, \"name\", {\n      value: scopeName,\n      enumerable: true,\n      configurable: true,\n    });\n    this._view = view;\n    this._inherit = inherit;\n    return this;\n  }\n\n  const ViewScope: ViewScopeClass = function <V extends View, T>(\n      this: ViewScope<V, T> | unknown,\n      view?: V | ViewScopeDescriptor<V, T> | unknown,\n      scopeName?: string,\n      value?: T,\n      inherit?: string | null): ViewScope<V, T> | PropertyDecorator | void {\n    if (this instanceof ViewScope) { // constructor\n      return ViewScopeConstructor.call(this, view, scopeName, value, inherit);\n    } else if (arguments.length === 1) { // decorator factory\n      const descriptor = view as ViewScopeDescriptor<V, T> | undefined;\n      return ViewScopeDecoratorFactory(descriptor);\n    } else { // decorator\n      const viewClass = view as ViewClass;\n      ViewScopeDecorator(viewClass, scopeName!);\n    }\n  } as ViewScopeClass;\n  __extends(ViewScope, _super);\n\n  Object.defineProperty(ViewScope.prototype, \"view\", {\n    get: function <V extends View, T>(this: ViewScope<V, T>): V {\n      return this._view;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(ViewScope.prototype, \"inherit\", {\n    get: function (this: ViewScope<View, unknown>): string | null {\n      return this._inherit;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(ViewScope.prototype, \"superScope\", {\n    get: function <T>(this: ViewScope<View, T>): ViewScope<View, T> | null {\n      const inherit = this._inherit;\n      if (inherit !== null) {\n        let view = this._view.parentView;\n        while (view !== null) {\n          const viewScope = view.getLazyViewScope(inherit) as ViewScope<View, T> | null;\n          if (viewScope !== null) {\n            return viewScope;\n          }\n          view = view.parentView;\n        }\n      }\n      return null;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(ViewScope.prototype, \"superState\", {\n    get: function <T>(this: ViewScope<View, T>): T | undefined {\n      const superScope = this.superScope;\n      return superScope !== null ? superScope.state : void 0;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(ViewScope.prototype, \"state\", {\n    get: function <T>(this: ViewScope<View, T>): T | undefined {\n      throw new Error(); // abstract\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  ViewScope.prototype.setState = function <T>(this: ViewScope<View, T>, newState: T | undefined): void {\n    throw new Error(); // abstract\n  };\n\n  return ViewScope;\n}(Object));\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Objects} from \"@swim/util\";\nimport {View} from \"../View\";\nimport {ViewScopeConstructor, ViewScope} from \"./ViewScope\";\n\n/** @hidden */\nexport interface AtomicViewScope<V extends View, T> extends ViewScope<V, T> {\n  /** @hidden */\n  _state: T | undefined;\n}\n\n/** @hidden */\nexport const AtomicViewScope: ViewScopeConstructor = (function (_super: typeof ViewScope): ViewScopeConstructor {\n  const AtomicViewScope: ViewScopeConstructor = function <V extends View, T>(\n      this: AtomicViewScope<V, T>, view: V, scopeName: string,\n      value?: T, inherit?: string | null): AtomicViewScope<V, T> {\n    let _this: AtomicViewScope<V, T> = function accessor(state?: T): T | undefined | V {\n      if (arguments.length === 0) {\n        return _this.state;\n      } else {\n        _this.setState(state);\n        return _this._view;\n      }\n    } as AtomicViewScope<V, T>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, scopeName, value, inherit) || _this;\n    this._state = value;\n    return _this;\n  } as unknown as ViewScopeConstructor;\n  __extends(AtomicViewScope, _super);\n\n  Object.defineProperty(AtomicViewScope.prototype, \"state\", {\n    get: function <T>(this: AtomicViewScope<View, T>): T | undefined {\n      const state = this._state;\n      return state !== void 0 ? state : this.superState;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  AtomicViewScope.prototype.setState = function <T>(this: AtomicViewScope<View, T>, newState: T | undefined): void {\n    const oldState = this._state;\n    if (!Objects.equal(oldState, newState)) {\n      this._state = newState;\n      this._view.viewScopeDidSetState(this, newState, oldState);\n    }\n  };\n\n  return AtomicViewScope;\n}(ViewScope));\nViewScope.Atomic = AtomicViewScope;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Transition} from \"@swim/transition\";\nimport {AnimatorContext, Animator} from \"@swim/animate\";\nimport {MemberAnimatorDescriptor, MemberAnimatorConstructor, MemberAnimator} from \"../member/MemberAnimator\";\nimport {ViewFlags, View} from \"../View\";\nimport {AnimatedViewContext} from \"./AnimatedViewContext\";\nimport {AnimatedViewController} from \"./AnimatedViewController\";\n\nexport interface AnimatedViewClass {\n  /** @hidden */\n  _memberAnimatorDescriptors?: {[animatorName: string]: MemberAnimatorDescriptor<AnimatedView, unknown> | undefined};\n}\n\nexport interface AnimatedView extends AnimatorContext, View {\n  readonly viewController: AnimatedViewController | null;\n\n  needsProcess(processFlags: ViewFlags, viewContext: AnimatedViewContext): ViewFlags;\n\n  needsDisplay(displayFlags: ViewFlags, viewContext: AnimatedViewContext): ViewFlags;\n\n  hasMemberAnimator(animatorName: string): boolean;\n\n  getMemberAnimator(animatorName: string): Animator | null;\n\n  setMemberAnimator(animatorName: string, animator: Animator | null): void;\n\n  /** @hidden */\n  getLazyMemberAnimator(animatorName: string): Animator | null;\n\n  /** @hidden */\n  animatorDidSetAuto(animator: Animator, auto: boolean): void;\n}\n\n/** @hidden */\nexport const AnimatedView = {\n  is(object: unknown): object is AnimatedView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as AnimatedView;\n      return view instanceof View.Node || view instanceof View.Graphics\n          || view instanceof View && typeof view.animate === \"function\";\n    }\n    return false;\n  },\n\n  /** @hidden */\n  getMemberAnimatorDescriptor(animatorName: string, viewClass: AnimatedViewClass | null): MemberAnimatorDescriptor<AnimatedView, unknown> | null {\n    while (viewClass !== null) {\n      if (viewClass.hasOwnProperty(\"_memberAnimatorDescriptors\")) {\n        const descriptor = viewClass._memberAnimatorDescriptors![animatorName];\n        if (descriptor !== void 0) {\n          return descriptor;\n        }\n      }\n      viewClass = (viewClass as any).__proto__ as AnimatedViewClass | null;\n    }\n    return null;\n  },\n\n  /** @hidden */\n  initMemberAnimator<V extends AnimatedView, T, U>(\n      MemberAnimator: MemberAnimatorConstructor<T, U>, view: V, animatorName: string,\n      descriptor: MemberAnimatorDescriptor<V, T, U> | undefined): MemberAnimator<V, T, U> {\n    let value: T | U | undefined;\n    let transition: Transition<T> | null | undefined;\n    let inherit: string | null | undefined;\n    if (descriptor !== void 0) {\n      if (descriptor.init !== void 0) {\n        value = descriptor.init.call(view)\n      } else {\n        value = descriptor.value;\n      }\n      if (descriptor.transition !== void 0 && descriptor.transition !== null) {\n        transition = Transition.fromAny(descriptor.transition);\n      }\n      if (typeof descriptor.inherit === \"string\") {\n        inherit = descriptor.inherit;\n      } else if (descriptor.inherit === true) {\n        inherit = animatorName;\n      }\n    }\n    return new MemberAnimator<V>(view, animatorName, value, transition, inherit);\n  },\n\n  /** @hidden */\n  decorateMemberAnimator<V extends AnimatedView, T, U>(MemberAnimator: MemberAnimatorConstructor<T, U>,\n                                                       descriptor: MemberAnimatorDescriptor<V, T, U> | undefined,\n                                                       viewClass: AnimatedViewClass, animatorName: string): void {\n    if (!viewClass.hasOwnProperty(\"_memberAnimatorDescriptors\")) {\n      viewClass._memberAnimatorDescriptors = {};\n    }\n    viewClass._memberAnimatorDescriptors![animatorName] = descriptor;\n    Object.defineProperty(viewClass, animatorName, {\n      get: function (this: V): MemberAnimator<V, T, U> {\n        let animator = this.getMemberAnimator(animatorName) as MemberAnimator<V, T, U> | null;\n        if (animator === null) {\n          animator = AnimatedView.initMemberAnimator(MemberAnimator, this, animatorName, descriptor);\n          this.setMemberAnimator(animatorName, animator);\n        }\n        return animator;\n      },\n      configurable: true,\n      enumerable: true,\n    });\n  },\n};\nView.Animated = AnimatedView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Objects, FromAny} from \"@swim/util\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {AnyTransition, Transition, Tween} from \"@swim/transition\";\nimport {Animator, TweenAnimator} from \"@swim/animate\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {AnyMemberAnimator} from \"./AnyMemberAnimator\";\nimport {ObjectMemberAnimator} from \"./ObjectMemberAnimator\";\nimport {StringMemberAnimator} from \"./StringMemberAnimator\";\nimport {BooleanMemberAnimator} from \"./BooleanMemberAnimator\";\nimport {NumberMemberAnimator} from \"./NumberMemberAnimator\";\nimport {AngleMemberAnimator} from \"./AngleMemberAnimator\";\nimport {LengthMemberAnimator} from \"./LengthMemberAnimator\";\nimport {ColorMemberAnimator} from \"./ColorMemberAnimator\";\nimport {FontMemberAnimator} from \"./FontMemberAnimator\";\nimport {TransformMemberAnimator} from \"./TransformMemberAnimator\";\n\nexport type MemberAnimatorInit<V extends AnimatedView, T> = (this: V) => T | undefined;\n\nexport type MemberAnimatorTypeConstructor = FromAny<any>\n                                          | typeof Object\n                                          | typeof String\n                                          | typeof Boolean\n                                          | typeof Number\n                                          | typeof Angle\n                                          | typeof Length\n                                          | typeof Color\n                                          | typeof Font\n                                          | typeof Transform;\n\nexport type MemberAnimatorDescriptorType<V extends AnimatedView, C extends MemberAnimatorTypeConstructor> =\n  C extends typeof Transform ? MemberAnimatorDescriptor<V, Transform | null, AnyTransform | null> :\n  C extends typeof Font ? MemberAnimatorDescriptor<V, Font | null, AnyFont | null> :\n  C extends typeof Color ? MemberAnimatorDescriptor<V, Color | null, AnyColor | null> :\n  C extends typeof Length ? MemberAnimatorDescriptor<V, Length | null, AnyLength | null> :\n  C extends typeof Angle ? MemberAnimatorDescriptor<V, Angle | null, AnyAngle | null> :\n  C extends typeof Number ? MemberAnimatorDescriptor<V, number | null, number | string | null> :\n  C extends typeof Boolean ? MemberAnimatorDescriptor<V, boolean | null, boolean | string | null> :\n  C extends typeof String ? MemberAnimatorDescriptor<V, string | null> :\n  C extends typeof Object ? MemberAnimatorDescriptor<V, Object> :\n  C extends FromAny<any> ? MemberAnimatorDescriptor<V, any> :\n  MemberAnimatorDescriptor<V, any>;\n\nexport interface MemberAnimatorDescriptor<V extends AnimatedView, T, U = T> {\n  init?: MemberAnimatorInit<V, T | U>;\n  value?: T | U;\n  transition?: AnyTransition<T> | null;\n  inherit?: string | boolean | null;\n  /** @hidden */\n  animatorType?: MemberAnimatorConstructor<T, U>;\n}\n\nexport interface MemberAnimatorConstructor<T, U = T> {\n  new<V extends AnimatedView>(view: V, animatorName: string | undefined, value?: T | U,\n                              transition?: Transition<T> | null, inherit?: string | null): MemberAnimator<V, T, U>;\n}\n\nexport interface MemberAnimatorClass {\n  new<V extends AnimatedView, T, U = T>(view: V, animatorName: string | undefined, value?: T | U,\n                                        transition?: Transition<T> | null, inherit?: string | null): MemberAnimator<V, T, U>;\n\n  <V extends AnimatedView, C extends MemberAnimatorTypeConstructor>(valueType: C, descriptor?: MemberAnimatorDescriptorType<V, C>): PropertyDecorator;\n\n  // Forward type declarations\n  /** @hidden */\n  Any: typeof AnyMemberAnimator; // defined by AnyMemberAnimator\n  /** @hidden */\n  Object: typeof ObjectMemberAnimator; // defined by ObjectMemberAnimator\n  /** @hidden */\n  String: typeof StringMemberAnimator; // defined by StringMemberAnimator\n  /** @hidden */\n  Boolean: typeof BooleanMemberAnimator; // defined by BooleanMemberAnimator\n  /** @hidden */\n  Number: typeof NumberMemberAnimator; // defined by NumberMemberAnimator\n  /** @hidden */\n  Angle: typeof AngleMemberAnimator; // defined by AngleMemberAnimator\n  /** @hidden */\n  Length: typeof LengthMemberAnimator; // defined by LengthMemberAnimator\n  /** @hidden */\n  Color: typeof ColorMemberAnimator; // defined by ColorMemberAnimator\n  /** @hidden */\n  Font: typeof FontMemberAnimator; // defined by FontMemberAnimator\n  /** @hidden */\n  Transform: typeof TransformMemberAnimator; // defined by TransformMemberAnimator\n}\n\nexport interface MemberAnimator<V extends AnimatedView, T, U = T> extends TweenAnimator<T> {\n  (): T | undefined;\n  (value: T | U | undefined, tween?: Tween<T>): V;\n\n  /** @hidden */\n  _view: V;\n  /** @hidden */\n  _inherit: string | null;\n  /** @hidden */\n  _auto: boolean;\n\n  readonly view: V;\n\n  readonly name: string;\n\n  readonly inherit: string | null;\n\n  setInherit(inherit: string | null): void;\n\n  readonly superAnimator: MemberAnimator<AnimatedView, T, U> | null;\n\n  readonly superValue: T | undefined;\n\n  readonly superState: T | undefined;\n\n  isAuto(): boolean;\n\n  setAuto(auto: boolean): void;\n\n  setState(state: T | U | undefined, tween?: Tween<T>): void;\n\n  setAutoState(state: T | U | undefined, tween?: Tween<T>): void;\n\n  animate(animator?: Animator): void;\n\n  update(newValue: T | undefined, oldValue: T | undefined): void;\n\n  willUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  onUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  didUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  cancel(): void;\n\n  delete(): void;\n\n  fromAny(value: T | U): T;\n}\n\nexport const MemberAnimator: MemberAnimatorClass = (function (_super: typeof TweenAnimator): MemberAnimatorClass {\n  function MemberAnimatorDecoratorFactory<V extends AnimatedView, C extends MemberAnimatorTypeConstructor>(\n      valueType: C, descriptor?: MemberAnimatorDescriptorType<V, C>): PropertyDecorator {\n    if (descriptor === void 0) {\n      descriptor = {} as MemberAnimatorDescriptorType<V, C>;\n    }\n    let animatorType = descriptor.animatorType;\n    if (animatorType === void 0) {\n      if (valueType === Object) {\n        animatorType = MemberAnimator.Object;\n      } else if (valueType === String) {\n        animatorType = MemberAnimator.String;\n      } else if (valueType === Boolean) {\n        animatorType = MemberAnimator.Boolean;\n      } else if (valueType === Number) {\n        animatorType = MemberAnimator.Number;\n      } else if (valueType === Angle) {\n        animatorType = MemberAnimator.Angle;\n      } else if (valueType === Length) {\n        animatorType = MemberAnimator.Length;\n      } else if (valueType === Color) {\n        animatorType = MemberAnimator.Color;\n      } else if (valueType === Font) {\n        animatorType = MemberAnimator.Font;\n      } else if (valueType === Transform) {\n        animatorType = MemberAnimator.Transform;\n      } else if (FromAny.is(valueType)) {\n        animatorType = MemberAnimator.Any.bind(void 0, valueType);\n      } else {\n        throw new TypeError(\"\" + valueType);\n      }\n      descriptor.animatorType = animatorType;\n    }\n    return AnimatedView.decorateMemberAnimator.bind(void 0, animatorType, descriptor);\n  }\n\n  function MemberAnimatorConstructor<V extends AnimatedView, T, U = T>(\n      this: MemberAnimator<V, T, U>, view: V, animatorName: string | undefined,\n      value?: T | U, transition?: Transition<T> | null, inherit?: string | null): MemberAnimator<V, T, U> {\n    if (transition === void 0) {\n      transition = null;\n    }\n    if (inherit === void 0) {\n      inherit = null;\n    }\n    if (animatorName !== void 0) {\n      Object.defineProperty(this, \"name\", {\n        value: animatorName,\n        enumerable: true,\n        configurable: true,\n      });\n    }\n    this._view = view;\n    this._inherit = inherit;\n    this._auto = true;\n    if (value !== void 0) {\n      value = this.fromAny(value);\n    }\n    const _this = _super.call(this, value, transition) || this;\n    return _this;\n  }\n\n  const MemberAnimator: MemberAnimatorClass = function <V extends AnimatedView, T, U>(\n      this: MemberAnimator<V, T, U> | MemberAnimatorClass,\n      view: V | MemberAnimatorTypeConstructor,\n      animatorName?: string | MemberAnimatorDescriptor<V, T, U>,\n      value?: T | U,\n      transition?: Transition<T> | null,\n      inherit?: string | null): MemberAnimator<V, T, U> | PropertyDecorator {\n    if (this instanceof MemberAnimator) { // constructor\n      return MemberAnimatorConstructor.call(this, view, animatorName, value, transition, inherit);\n    } else { // decorator factory\n      const valueType = view as MemberAnimatorTypeConstructor;\n      const descriptor = animatorName as MemberAnimatorDescriptor<V, T, U> | undefined;\n      return MemberAnimatorDecoratorFactory(valueType, descriptor);\n    }\n  } as MemberAnimatorClass;\n  __extends(MemberAnimator, _super);\n\n  Object.defineProperty(MemberAnimator.prototype, \"view\", {\n    get: function (this: MemberAnimator<AnimatedView, unknown, unknown>): AnimatedView {\n      return this._view;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(MemberAnimator.prototype, \"inherit\", {\n    get: function (this: MemberAnimator<AnimatedView, unknown, unknown>): string | null {\n      return this._inherit;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  MemberAnimator.prototype.setInherit = function (this: MemberAnimator<AnimatedView, unknown, unknown>,\n                                                  inherit: string | null): void {\n    this._inherit = inherit;\n  };\n\n  Object.defineProperty(MemberAnimator.prototype, \"superAnimator\", {\n    get: function <T, U>(this: MemberAnimator<AnimatedView, T, U>): MemberAnimator<AnimatedView, T, U> | null {\n      const inherit = this._inherit;\n      if (inherit !== null) {\n        let view = this._view.parentView;\n        while (view !== null) {\n          if (AnimatedView.is(view)) {\n            const animator = view.getLazyMemberAnimator(inherit);\n            if (animator instanceof MemberAnimator) {\n              return animator;\n            }\n          }\n          view = view.parentView;\n        }\n      }\n      return null;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(MemberAnimator.prototype, \"superValue\", {\n    get: function <T, U>(this: MemberAnimator<AnimatedView, T, U>): T | undefined {\n      const superAnimator = this.superAnimator;\n      return superAnimator !== null ? superAnimator.value : void 0;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(MemberAnimator.prototype, \"superState\", {\n    get: function <T, U>(this: MemberAnimator<AnimatedView, T, U>): T | undefined {\n      const superAnimator = this.superAnimator;\n      return superAnimator !== null ? superAnimator.state : void 0;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(MemberAnimator.prototype, \"value\", {\n    get: function <T, U>(this: MemberAnimator<AnimatedView, T, U>): T | undefined {\n      const value = this._value;\n      return value !== void 0 ? value : this.superValue;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(MemberAnimator.prototype, \"state\", {\n    get: function <T, U>(this: MemberAnimator<AnimatedView, T, U>): T | undefined {\n      const state = this._state;\n      return state !== void 0 ? state : this.superState;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  MemberAnimator.prototype.isAuto = function (this: MemberAnimator<AnimatedView, unknown, unknown>): boolean {\n    return this._auto;\n  };\n\n  MemberAnimator.prototype.setAuto = function (this: MemberAnimator<AnimatedView, unknown, unknown>,\n                                               auto: boolean): void {\n    if (this._auto !== auto) {\n      this._auto = auto;\n      this._view.animatorDidSetAuto(this, auto);\n    }\n  };\n\n  MemberAnimator.prototype.setState = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                      state: T | U | undefined,\n                                                      tween?: Tween<T>): void {\n    if (state !== void 0) {\n      state = this.fromAny(state);\n    }\n    this._auto = false;\n    _super.prototype.setState.call(this, state, tween);\n  };\n\n  MemberAnimator.prototype.setAutoState = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                          state: T | U | undefined,\n                                                          tween?: Tween<T>): void {\n    if (this._auto === true) {\n      if (state !== void 0) {\n        state = this.fromAny(state);\n      }\n      _super.prototype.setState.call(this, state, tween);\n    }\n  };\n\n  MemberAnimator.prototype.animate = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                     animator: Animator = this): void {\n    if (this._enabled || animator !== this) {\n      this._view.animate(animator);\n    }\n  };\n\n  MemberAnimator.prototype.update = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                    newValue: T | undefined, oldValue: T | undefined): void {\n    if (!Objects.equal(oldValue, newValue)) {\n      this.willUpdate(newValue, oldValue);\n      this.onUpdate(newValue, oldValue);\n      this.didUpdate(newValue, oldValue);\n    }\n  };\n\n  MemberAnimator.prototype.willUpdate = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                        newValue: T | undefined,\n                                                        oldValue: T | undefined): void {\n    // hook\n  };\n\n  MemberAnimator.prototype.onUpdate = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                      newValue: T | undefined,\n                                                      oldValue: T | undefined): void {\n    // hook\n  };\n\n  MemberAnimator.prototype.didUpdate = function <T, U>(this: MemberAnimator<AnimatedView, T, U>,\n                                                       newValue: T | undefined,\n                                                       oldValue: T | undefined): void {\n    // hook\n  };\n\n  MemberAnimator.prototype.cancel = function <T, U>(this: MemberAnimator<AnimatedView, T, U>): void {\n    // nop\n  };\n\n  MemberAnimator.prototype.delete = function <T, U>(this: MemberAnimator<AnimatedView, T, U>): void {\n    // nop\n  };\n\n  MemberAnimator.prototype.fromAny = function <T, U>(this: MemberAnimator<AnimatedView, T, U>, value: T | U): T {\n    throw new Error(); // abstract\n  };\n\n  return MemberAnimator;\n}(TweenAnimator));\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {FromAny} from \"@swim/util\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface AnyMemberAnimatorClass {\n  new<V extends AnimatedView, T, U = T>(type: FromAny<T, U>, view: V, animatorName?: string,\n                                        value?: T | U, transition?: Transition<T> | null,\n                                        inherit?: string | null): AnyMemberAnimator<V, T, U>;\n}\n\n/** @hidden */\nexport interface AnyMemberAnimator<V extends AnimatedView, T, U = T> extends MemberAnimator<V, T, U> {\n  /** @hidden */\n  readonly _type: FromAny<T, U>;\n\n  readonly type: FromAny<T, U>;\n}\n\n/** @hidden */\nexport const AnyMemberAnimator: AnyMemberAnimatorClass = (function (_super: typeof MemberAnimator): AnyMemberAnimatorClass {\n  const AnyMemberAnimator: AnyMemberAnimatorClass = function <V extends AnimatedView, T, U>(\n      this: AnyMemberAnimator<V, T, U>, type: FromAny<T, U>, view: V, animatorName?: string, value?: T | U,\n      transition?: Transition<T> | null, inherit?: string | null): AnyMemberAnimator<V, T, U> {\n    let _this: AnyMemberAnimator<V, T, U> = function accessor(value?: T | U, tween?: Tween<T>): T | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value as T | undefined, tween);\n        return _this._view;\n      }\n    } as AnyMemberAnimator<V, T, U>;\n    (_this as any).__proto__ = this;\n    (_this as any)._type = type;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as AnyMemberAnimatorClass;\n  __extends(AnyMemberAnimator, _super);\n\n  Object.defineProperty(AnyMemberAnimator.prototype, \"type\", {\n    get: function <V extends AnimatedView, T, U>(this: AnyMemberAnimator<V, T, U>): FromAny<T, U> {\n      return this._type;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  AnyMemberAnimator.prototype.fromAny = function <T, U>(this: AnyMemberAnimator<AnimatedView, T, U>, value: T | U): T {\n    return this._type.fromAny(value);\n  };\n\n  return AnyMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Any = AnyMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface ObjectMemberAnimatorClass {\n  new<V extends AnimatedView, T>(view: V, animatorName: string, value?: T, transition?: Transition<T> | null,\n                                 inherit?: string | null): ObjectMemberAnimator<V, T>;\n}\n\n/** @hidden */\nexport interface ObjectMemberAnimator<V extends AnimatedView, T> extends MemberAnimator<V, T> {\n}\n\n/** @hidden */\nexport const ObjectMemberAnimator: ObjectMemberAnimatorClass = (function (_super: typeof MemberAnimator): ObjectMemberAnimatorClass {\n  const ObjectMemberAnimator: ObjectMemberAnimatorClass = function <V extends AnimatedView, T>(\n      this: ObjectMemberAnimator<V, T>, view: V, animatorName: string | undefined, value?: T,\n      transition?: Transition<T> | null, inherit?: string | null): ObjectMemberAnimator<V, T> {\n    let _this: ObjectMemberAnimator<V, T> = function accessor(value?: T, tween?: Tween<T>): T | null | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as ObjectMemberAnimator<V, T>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as ObjectMemberAnimatorClass;\n  __extends(ObjectMemberAnimator, _super);\n\n  ObjectMemberAnimator.prototype.fromAny = function <T>(this: ObjectMemberAnimator<AnimatedView, T>, value: T | null): T | null {\n    return value;\n  };\n\n  return ObjectMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Object = ObjectMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween, Transition} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface StringMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, string> {\n}\n\n/** @hidden */\nexport const StringMemberAnimator: MemberAnimatorConstructor<string> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<string> {\n  const StringMemberAnimator: MemberAnimatorConstructor<string> = function <V extends AnimatedView>(\n      this: StringMemberAnimator<V>, view: V, animatorName: string | undefined, value?: string,\n      transition?: Transition<string> | null, inherit?: string | null): StringMemberAnimator<V> {\n    let _this: StringMemberAnimator<V> = function accessor(value?: string, tween?: Tween<string>): string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as StringMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<string>;\n  __extends(StringMemberAnimator, _super);\n\n  StringMemberAnimator.prototype.fromAny = function (this: StringMemberAnimator<AnimatedView>, value: string | null): string | null {\n    return value;\n  };\n\n  return StringMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.String = StringMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface BooleanMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, boolean, boolean | string> {\n}\n\n/** @hidden */\nexport const BooleanMemberAnimator: MemberAnimatorConstructor<boolean, boolean | string> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<boolean, boolean | string> {\n  const BooleanMemberAnimator: MemberAnimatorConstructor<boolean, boolean | string> = function <V extends AnimatedView>(\n      this: BooleanMemberAnimator<V>, view: V, animatorName: string | undefined, value?: boolean | string,\n      transition?: Transition<boolean> | null, inherit?: string | null): BooleanMemberAnimator<V> {\n    let _this: BooleanMemberAnimator<V> = function accessor(value?: boolean | string, tween?: Tween<boolean>): boolean | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as BooleanMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<boolean, boolean | string>;\n  __extends(BooleanMemberAnimator, _super);\n\n  BooleanMemberAnimator.prototype.fromAny = function (this: BooleanMemberAnimator<AnimatedView>, value: boolean | string | null): boolean | null {\n    if (typeof value === \"string\") {\n      return !!value;\n    } else {\n      return value;\n    }\n  };\n\n  return BooleanMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Boolean = BooleanMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface NumberMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, number, number | string> {\n}\n\n/** @hidden */\nexport const NumberMemberAnimator: MemberAnimatorConstructor<number, number | string> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<number, number | string> {\n  const NumberMemberAnimator: MemberAnimatorConstructor<number, number | string> = function <V extends AnimatedView>(\n      this: NumberMemberAnimator<V>, view: V, animatorName: string | undefined, value?: number | string,\n      transition?: Transition<number> | null, inherit?: string | null): NumberMemberAnimator<V> {\n    let _this: NumberMemberAnimator<V> = function accessor(value?: number | string, tween?: Tween<number>): number | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as NumberMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<number, number | string>;\n  __extends(NumberMemberAnimator, _super);\n\n  NumberMemberAnimator.prototype.fromAny = function (this: NumberMemberAnimator<AnimatedView>, value: number | string | null): number | null {\n    if (typeof value === \"string\") {\n      const number = +value;\n      if (isFinite(number)) {\n        return number;\n      } else {\n        throw new Error(value);\n      }\n    } else {\n      return value;\n    }\n  };\n\n  return NumberMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Number = NumberMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface AngleMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, Angle, AnyAngle> {\n}\n\n/** @hidden */\nexport const AngleMemberAnimator: MemberAnimatorConstructor<Angle, AnyAngle> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<Angle, AnyAngle> {\n  const AngleMemberAnimator: MemberAnimatorConstructor<Angle, AnyAngle> = function <V extends AnimatedView>(\n      this: AngleMemberAnimator<V>, view: V, animatorName: string | undefined, value?: AnyAngle,\n      transition?: Transition<Angle> | null, inherit?: string | null): AngleMemberAnimator<V> {\n    let _this: AngleMemberAnimator<V> = function accessor(value?: AnyAngle, tween?: Tween<Angle>): Angle | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as AngleMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<Angle, AnyAngle>;\n  __extends(AngleMemberAnimator, _super);\n\n  AngleMemberAnimator.prototype.fromAny = function (this: AngleMemberAnimator<AnimatedView>, value: AnyAngle | null): Angle | null {\n    return value !== null ? Angle.fromAny(value) : null;\n  };\n\n  return AngleMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Angle = AngleMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface LengthMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, Length, AnyLength> {\n}\n\n/** @hidden */\nexport const LengthMemberAnimator: MemberAnimatorConstructor<Length, AnyLength> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<Length, AnyLength> {\n  const LengthMemberAnimator: MemberAnimatorConstructor<Length, AnyLength> = function <V extends AnimatedView>(\n      this: LengthMemberAnimator<V>, view: V, animatorName: string | undefined, value?: AnyLength,\n      transition?: Transition<Length> | null, inherit?: string | null): LengthMemberAnimator<V> {\n    let _this: LengthMemberAnimator<V> = function accessor(value?: AnyLength, tween?: Tween<Length>): Length | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as LengthMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<Length, AnyLength>;\n  __extends(LengthMemberAnimator, _super);\n\n  LengthMemberAnimator.prototype.fromAny = function (this: LengthMemberAnimator<AnimatedView>, value: AnyLength | null): Length | null {\n    return value !== null ? Length.fromAny(value) : null;\n  };\n\n  return LengthMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Length = LengthMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface ColorMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, Color, AnyColor> {\n}\n\n/** @hidden */\nexport const ColorMemberAnimator: MemberAnimatorConstructor<Color, AnyColor> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<Color, AnyColor> {\n  const ColorMemberAnimator: MemberAnimatorConstructor<Color, AnyColor> = function <V extends AnimatedView>(\n      this: ColorMemberAnimator<V>, view: V, animatorName: string | undefined, value?: AnyColor,\n      transition?: Transition<Color> | null, inherit?: string | null): ColorMemberAnimator<V> {\n    let _this: ColorMemberAnimator<V> = function accessor(value?: AnyColor, tween?: Tween<Color>): Color | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as ColorMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<Color, AnyColor>;\n  __extends(ColorMemberAnimator, _super);\n\n  ColorMemberAnimator.prototype.fromAny = function (this: ColorMemberAnimator<AnimatedView>, value: AnyColor | null): Color | null {\n    return value !== null ? Color.fromAny(value) : null;\n  };\n\n  return ColorMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Color = ColorMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface FontMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, Font, AnyFont> {\n}\n\n/** @hidden */\nexport const FontMemberAnimator: MemberAnimatorConstructor<Font, AnyFont> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<Font, AnyFont> {\n  const FontMemberAnimator: MemberAnimatorConstructor<Font, AnyFont> = function <V extends AnimatedView>(\n      this: FontMemberAnimator<V>, view: V, animatorName: string | undefined, value?: AnyFont,\n      transition?: Transition<Font> | null, inherit?: string | null): FontMemberAnimator<V> {\n    let _this: FontMemberAnimator<V> = function accessor(value?: AnyFont, tween?: Tween<Font>): Font | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as FontMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<Font, AnyFont>;\n  __extends(FontMemberAnimator, _super);\n\n  FontMemberAnimator.prototype.fromAny = function (this: FontMemberAnimator<AnimatedView>, value: AnyFont | null): Font | null {\n    return value !== null ? Font.fromAny(value) : null;\n  };\n\n  return FontMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Font = FontMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Transition, Tween} from \"@swim/transition\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {MemberAnimatorConstructor, MemberAnimator} from \"./MemberAnimator\";\n\n/** @hidden */\nexport interface TransformMemberAnimator<V extends AnimatedView> extends MemberAnimator<V, Transform, AnyTransform> {\n}\n\n/** @hidden */\nexport const TransformMemberAnimator: MemberAnimatorConstructor<Transform, AnyTransform> = (function (_super: typeof MemberAnimator): MemberAnimatorConstructor<Transform, AnyTransform> {\n  const TransformMemberAnimator: MemberAnimatorConstructor<Transform, AnyTransform> = function <V extends AnimatedView>(\n      this: TransformMemberAnimator<V>, view: V, animatorName: string | undefined, value?: AnyTransform,\n      transition?: Transition<Transform> | null, inherit?: string | null): TransformMemberAnimator<V> {\n    let _this: TransformMemberAnimator<V> = function accessor(value?: AnyTransform, tween?: Tween<Transform>): Transform | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as TransformMemberAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, value, transition, inherit) || _this;\n    return _this;\n  } as unknown as MemberAnimatorConstructor<Transform, AnyTransform>;\n  __extends(TransformMemberAnimator, _super);\n\n  TransformMemberAnimator.prototype.fromAny = function (this: TransformMemberAnimator<AnimatedView>, value: AnyTransform | null): Transform | null {\n    return value !== null ? Transform.fromAny(value) : null;\n  };\n\n  return TransformMemberAnimator;\n}(MemberAnimator));\nMemberAnimator.Transform = TransformMemberAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Transform} from \"@swim/transform\";\nimport {Animator} from \"@swim/animate\";\nimport {ViewScope} from \"../scope/ViewScope\";\nimport {ViewContext} from \"../ViewContext\";\nimport {ViewControllerType, ViewFlags, View} from \"../View\";\nimport {ViewObserver} from \"../ViewObserver\";\nimport {LayoutAnchor} from \"../layout/LayoutAnchor\";\nimport {LayoutView} from \"../layout/LayoutView\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {AnimatedViewClass, AnimatedView} from \"../animated/AnimatedView\";\nimport {AnimatedViewObserver} from \"../animated/AnimatedViewObserver\";\nimport {NodeViewObserver} from \"./NodeViewObserver\";\nimport {NodeViewController} from \"./NodeViewController\";\n\nexport interface ViewNode extends Node {\n  view?: NodeView;\n}\n\nexport type ViewNodeType<V extends NodeView> = V extends {readonly node: infer N} ? N : Node;\n\nexport class NodeView extends View implements AnimatedView {\n  /** @hidden */\n  readonly _node: ViewNodeType<this>;\n  /** @hidden */\n  _key?: string;\n  /** @hidden */\n  _childViewMap?: {[key: string]: View | undefined};\n  /** @hidden */\n  _viewController: ViewControllerType<this> | null;\n  /** @hidden */\n  _viewObservers?: ViewObserver[];\n  /** @hidden */\n  _viewFlags: ViewFlags;\n  /** @hidden */\n  _viewScopes?: {[scopeName: string]: ViewScope<View, unknown> | undefined};\n  /** @hidden */\n  _layoutAnchors?: {[anchorName: string]: LayoutAnchor<LayoutView> | undefined};\n  /** @hidden */\n  _memberAnimators?: {[animatorName: string]: Animator | undefined};\n\n  constructor(node: Node) {\n    super();\n    this._node = node as ViewNodeType<this>;\n    this._node.view = this;\n    this._viewController = null;\n    this._viewFlags = 0;\n    this.initNode(this._node);\n  }\n\n  get node(): ViewNode {\n    return this._node;\n  }\n\n  protected initNode(node: ViewNodeType<this>): void {\n    // hook\n  }\n\n  get viewController(): NodeViewController | null {\n    return this._viewController;\n  }\n\n  setViewController(newViewController: ViewControllerType<this> | null): void {\n    const oldViewController = this._viewController;\n    if (oldViewController !== newViewController) {\n      this.willSetViewController(newViewController);\n      if (oldViewController !== null) {\n        oldViewController.setView(null);\n      }\n      this._viewController = newViewController;\n      if (newViewController !== null) {\n        newViewController.setView(this);\n      }\n      this.onSetViewController(newViewController);\n      this.didSetViewController(newViewController);\n    }\n  }\n\n  get viewObservers(): ReadonlyArray<ViewObserver> {\n    let viewObservers = this._viewObservers;\n    if (viewObservers === void 0) {\n      viewObservers = [];\n      this._viewObservers = viewObservers;\n    }\n    return viewObservers;\n  }\n\n  addViewObserver(viewObserver: ViewObserver): void {\n    let viewObservers = this._viewObservers;\n    let index: number;\n    if (viewObservers === void 0) {\n      viewObservers = [];\n      this._viewObservers = viewObservers;\n      index = -1;\n    } else {\n      index = viewObservers.indexOf(viewObserver);\n    }\n    if (index < 0) {\n      this.willAddViewObserver(viewObserver);\n      viewObservers.push(viewObserver);\n      this.onAddViewObserver(viewObserver);\n      this.didAddViewObserver(viewObserver);\n    }\n  }\n\n  removeViewObserver(viewObserver: ViewObserver): void {\n    const viewObservers = this._viewObservers;\n    if (viewObservers !== void 0) {\n      const index = viewObservers.indexOf(viewObserver);\n      if (index >= 0) {\n        this.willRemoveViewObserver(viewObserver);\n        viewObservers.splice(index, 1);\n        this.onRemoveViewObserver(viewObserver);\n        this.didRemoveViewObserver(viewObserver);\n      }\n    }\n  }\n\n  text(): string | null;\n  text(value: string | null): this;\n  text(value?: string | null): string | null | this {\n    if (value === void 0) {\n      return this._node.textContent;\n    } else {\n      this._node.textContent = value;\n      return this;\n    }\n  }\n\n  get key(): string | null {\n    const key = this._key;\n    return key !== void 0 ? key : null;\n  }\n\n  /** @hidden */\n  setKey(key: string | null): void {\n    if (key !== null) {\n      this._key = key;\n    } else if (this._key !== void 0) {\n      this._key = void 0;\n    }\n  }\n\n  get parentView(): View | null {\n    const parentNode: ViewNode | null = this._node.parentNode;\n    if (parentNode !== null) {\n      const parentView = parentNode.view;\n      if (parentView instanceof View) {\n        return parentView;\n      }\n    }\n    return null;\n  }\n\n  /** @hidden */\n  setParentView(newParentView: View | null, oldParentView: View | null): void {\n    this.willSetParentView(newParentView, oldParentView);\n    this.onSetParentView(newParentView, oldParentView);\n    this.didSetParentView(newParentView, oldParentView);\n  }\n\n  get childViews(): ReadonlyArray<View> {\n    const childNodes = this._node.childNodes;\n    const childViews = [];\n    for (let i = 0, n = childNodes.length; i < n; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childViews.push(childView);\n      }\n    }\n    return childViews;\n  }\n\n  getChildView(key: string): View | null {\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const childView = childViewMap[key];\n      if (childView !== void 0) {\n        return childView;\n      }\n    }\n    return null;\n  }\n\n  setChildView(key: string, newChildView: View | null): View | null {\n    if (newChildView !== null) {\n      if (!(newChildView instanceof NodeView)) {\n        throw new TypeError(\"\" + newChildView);\n      }\n      newChildView.remove();\n    }\n    let oldChildView: View | null = null;\n    let targetNode: Node | null = null;\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const childView = childViewMap[key];\n      if (childView !== void 0) {\n        oldChildView = childView;\n        if (!(childView instanceof NodeView)) {\n          throw new TypeError(\"\" + childView);\n        }\n        const childNode = childView._node;\n        targetNode = childNode.nextSibling;\n        this.willRemoveChildView(childView);\n        this.willRemoveChildNode(childNode);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        this._node.removeChild(childNode);\n        this.onRemoveChildNode(childNode);\n        this.onRemoveChildView(childView);\n        this.didRemoveChildNode(childNode);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n      }\n    }\n    if (newChildView !== null) {\n      const newChildNode = newChildView._node;\n      const targetView = targetNode !== null ? (targetNode as ViewNode).view : null;\n      newChildView.setKey(key);\n      this.willInsertChildView(newChildView, targetView);\n      this.willInsertChildNode(newChildNode, targetNode);\n      this._node.insertBefore(newChildNode, targetNode);\n      this.insertChildViewMap(newChildView);\n      newChildView.setParentView(this, null);\n      this.onInsertChildNode(newChildNode, targetNode);\n      this.onInsertChildView(newChildView, targetView);\n      this.didInsertChildNode(newChildNode, targetNode);\n      this.didInsertChildView(newChildView, targetView);\n    }\n    return oldChildView;\n  }\n\n  /** @hidden */\n  protected insertChildViewMap(childView: View): void {\n    const key = childView.key;\n    if (key !== null) {\n      let childViewMap = this._childViewMap;\n      if (childViewMap === void 0) {\n        childViewMap = {};\n        this._childViewMap = childViewMap;\n      }\n      childViewMap[key] = childView;\n    }\n  }\n\n  /** @hidden */\n  protected removeChildViewMap(childView: View): void {\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const key = childView.key;\n      if (key !== null) {\n        delete childViewMap[key];\n      }\n    }\n  }\n\n  appendChild(child: View | Node, key?: string): void {\n    if (child instanceof View) {\n      this.appendChildView(child, key);\n    } else if (child instanceof Node) {\n      this.appendChildNode(child, key);\n    } else {\n      throw new TypeError(\"\" + child);\n    }\n  }\n\n  appendChildView(childView: View, key?: string): void {\n    if (!(childView instanceof NodeView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    const childNode = childView._node;\n    this.willInsertChildView(childView, null);\n    this.willInsertChildNode(childNode, null);\n    this._node.appendChild(childNode);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildNode(childNode, null);\n    this.onInsertChildView(childView, null);\n    this.didInsertChildNode(childNode, null);\n    this.didInsertChildView(childView, null);\n  }\n\n  appendChildNode(childNode: Node, key?: string): void {\n    const childView = (childNode as ViewNode).view;\n    if (childView !== void 0) {\n      childView.remove();\n      if (key !== void 0) {\n        this.removeChildView(key);\n        childView.setKey(key);\n      }\n      this.willInsertChildView(childView, null);\n    }\n    this.willInsertChildNode(childNode, null);\n    this._node.appendChild(childNode);\n    if (childView !== void 0) {\n      this.insertChildViewMap(childView);\n      childView.setParentView(this, null);\n    }\n    this.onInsertChildNode(childNode, null);\n    if (childView !== void 0) {\n      this.onInsertChildView(childView, null);\n    }\n    this.didInsertChildNode(childNode, null);\n    if (childView !== void 0) {\n      this.didInsertChildView(childView, null);\n    }\n  }\n\n  prependChild(child: View | Node, key?: string): void {\n    if (child instanceof View) {\n      this.prependChildView(child, key);\n    } else if (child instanceof Node) {\n      this.prependChildNode(child, key);\n    } else {\n      throw new TypeError(\"\" + child);\n    }\n  }\n\n  prependChildView(childView: View, key?: string): void {\n    if (!(childView instanceof NodeView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    const childNode = childView._node;\n    const targetNode = this._node.firstChild as ViewNode | null;\n    const targetView = targetNode !== null ? targetNode.view : null;\n    this.willInsertChildView(childView, targetView);\n    this.willInsertChildNode(childNode, targetNode);\n    this._node.insertBefore(childNode, targetNode);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildNode(childNode, targetNode);\n    this.onInsertChildView(childView, targetView);\n    this.didInsertChildNode(childNode, targetNode);\n    this.didInsertChildView(childView, targetView);\n  }\n\n  prependChildNode(childNode: Node, key?: string): void {\n    const childView = (childNode as ViewNode).view;\n    const targetNode = this._node.firstChild as ViewNode | null;\n    const targetView = targetNode !== null ? targetNode.view : null;\n    if (childView !== void 0) {\n      childView.remove();\n      if (key !== void 0) {\n        this.removeChildView(key);\n        childView.setKey(key);\n      }\n      this.willInsertChildView(childView, targetView);\n    }\n    this.willInsertChildNode(childNode, targetNode);\n    this._node.insertBefore(childNode, targetNode);\n    if (childView !== void 0) {\n      this.insertChildViewMap(childView);\n      childView.setParentView(this, null);\n    }\n    this.onInsertChildNode(childNode, targetNode);\n    if (childView !== void 0) {\n      this.onInsertChildView(childView, targetView);\n    }\n    this.didInsertChildNode(childNode, targetNode);\n    if (childView !== void 0) {\n      this.didInsertChildView(childView, targetView);\n    }\n  }\n\n  insertChild(child: View | Node, target: View | Node | null, key?: string): void {\n    if (child instanceof NodeView) {\n      if (target instanceof View) {\n        this.insertChildView(child, target, key);\n      } else if (target instanceof Node || target === null) {\n        this.insertChildNode(child._node, target, key);\n      } else {\n        throw new TypeError(\"\" + target);\n      }\n    } else if (child instanceof Node) {\n      if (target instanceof NodeView) {\n        this.insertChildNode(child, target._node, key);\n      } else if (target instanceof Node || target === null) {\n        this.insertChildNode(child, target, key);\n      } else {\n        throw new TypeError(\"\" + target);\n      }\n    } else {\n      throw new TypeError(\"\" + child);\n    }\n  }\n\n  insertChildView(childView: View, targetView: View | null, key?: string): void {\n    if (!(childView instanceof NodeView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    if (targetView !== null && !(targetView instanceof NodeView)) {\n      throw new TypeError(\"\" + targetView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    const childNode = childView._node;\n    const targetNode = targetView !== null ? targetView._node : null;\n    this.willInsertChildView(childView, targetView);\n    this.willInsertChildNode(childNode, targetNode);\n    this._node.insertBefore(childNode, targetNode);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildNode(childNode, targetNode);\n    this.onInsertChildView(childView, targetView);\n    this.didInsertChildNode(childNode, targetNode);\n    this.didInsertChildView(childView, targetView);\n  }\n\n  insertChildNode(childNode: Node, targetNode: Node | null, key?: string): void {\n    const childView = (childNode as ViewNode).view;\n    const targetView = targetNode !== null ? (targetNode as ViewNode).view : null;\n    if (childView !== void 0) {\n      childView.remove();\n      if (key !== void 0) {\n        this.removeChildView(key);\n        childView.setKey(key);\n      }\n      this.willInsertChildView(childView, targetView);\n    }\n    this.willInsertChildNode(childNode, targetNode);\n    this._node.insertBefore(childNode, targetNode);\n    if (childView !== void 0) {\n      this.insertChildViewMap(childView);\n      childView.setParentView(this, null);\n    }\n    this.onInsertChildNode(childNode, targetNode);\n    if (childView !== void 0) {\n      this.onInsertChildView(childView, targetView);\n    }\n    this.didInsertChildNode(childNode, targetNode);\n    if (childView !== void 0) {\n      this.didInsertChildView(childView, targetView);\n    }\n  }\n\n  /** @hidden */\n  injectChildView(childView: NodeView, targetView: NodeView | null, key?: string): void {\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    const childNode = childView._node;\n    const targetNode = targetView !== null ? targetView._node : null;\n    this.willInsertChildView(childView, targetView);\n    this.willInsertChildNode(childNode, targetNode);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildNode(childNode, targetNode);\n    this.onInsertChildView(childView, targetView);\n    this.didInsertChildNode(childNode, targetNode);\n    this.didInsertChildView(childView, targetView);\n  }\n\n  protected willInsertChildNode(childNode: Node, targetNode: Node | null): void {\n    this.willObserve(function (viewObserver: NodeViewObserver): void {\n      if (viewObserver.viewWillInsertChildNode !== void 0) {\n        viewObserver.viewWillInsertChildNode(childNode, targetNode, this);\n      }\n    });\n  }\n\n  protected onInsertChildNode(childNode: Node, targetNode: Node | null): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didInsertChildNode(childNode: Node, targetNode: Node | null): void {\n    this.didObserve(function (viewObserver: NodeViewObserver): void {\n      if (viewObserver.viewDidInsertChildNode !== void 0) {\n        viewObserver.viewDidInsertChildNode(childNode, targetNode, this);\n      }\n    });\n  }\n\n  removeChild(child: View | Node): void {\n    if (child instanceof View) {\n      this.removeChildView(child);\n    } else if (child instanceof Node) {\n      this.removeChildNode(child);\n    } else {\n      throw new TypeError(\"\" + child);\n    }\n  }\n\n  removeChildView(key: string): View | null;\n  removeChildView(childView: View): void;\n  removeChildView(key: string | View): View | null | void {\n    let childView: View | null;\n    if (typeof key === \"string\") {\n      childView = this.getChildView(key);\n      if (childView === null) {\n        return null;\n      }\n    } else {\n      childView = key;\n    }\n    if (!(childView instanceof NodeView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    const childNode = childView._node;\n    if (childNode.parentNode !== this._node) {\n      throw new Error(\"not a child view\");\n    }\n    this.willRemoveChildView(childView);\n    this.willRemoveChildNode(childNode);\n    childView.setParentView(null, this);\n    this.removeChildViewMap(childView);\n    this._node.removeChild(childNode);\n    this.onRemoveChildNode(childNode);\n    this.onRemoveChildView(childView);\n    this.didRemoveChildNode(childNode);\n    this.didRemoveChildView(childView);\n    childView.setKey(null);\n    if (typeof key === \"string\") {\n      return childView;\n    }\n  }\n\n  removeChildNode(childNode: Node): void {\n    if (childNode.parentNode !== this._node) {\n      throw new Error(\"not a child node\")\n    }\n    const childView = (childNode as ViewNode).view;\n    if (childView !== void 0) {\n      this.willRemoveChildView(childView);\n    }\n    this.willRemoveChildNode(childNode);\n    this._node.removeChild(childNode);\n    if (childView !== void 0) {\n      childView.setParentView(null, this);\n      this.removeChildViewMap(childView);\n    }\n    this.onRemoveChildNode(childNode);\n    if (childView !== void 0) {\n      this.onRemoveChildView(childView);\n    }\n    this.didRemoveChildNode(childNode);\n    if (childView !== void 0) {\n      this.didRemoveChildView(childView);\n      childView.setKey(null);\n    }\n  }\n\n  removeAll(): void {\n    do {\n      const childNode = this._node.lastChild as ViewNode | null;\n      if (childNode !== null) {\n        const childView = childNode.view;\n        if (childView !== void 0) {\n          this.willRemoveChildView(childView);\n        }\n        this.willRemoveChildNode(childNode);\n        this._node.removeChild(childNode);\n        if (childView !== void 0) {\n          childView.setParentView(null, this);\n          this.removeChildViewMap(childView);\n        }\n        this.onRemoveChildNode(childNode);\n        if (childView !== void 0) {\n          this.onRemoveChildView(childView);\n        }\n        this.didRemoveChildNode(childNode);\n        if (childView !== void 0) {\n          this.didRemoveChildView(childView);\n          childView.setKey(null);\n        }\n        continue;\n      }\n      break;\n    } while (true);\n  }\n\n  remove(): void {\n    const node = this._node;\n    const parentNode: ViewNode | null = node.parentNode;\n    if (parentNode !== null) {\n      const parentView = parentNode.view;\n      if (parentView !== void 0) {\n        if ((this._viewFlags & View.UpdatingMask) === 0) {\n          parentView.removeChildView(this);\n        } else {\n          this._viewFlags |= View.RemovingFlag;\n        }\n      } else {\n        parentNode.removeChild(node);\n        this.setParentView(null, this);\n        this.setKey(null);\n      }\n    }\n  }\n\n  protected willRemoveChildNode(childNode: Node): void {\n    this.willObserve(function (viewObserver: NodeViewObserver): void {\n      if (viewObserver.viewWillRemoveChildNode !== void 0) {\n        viewObserver.viewWillRemoveChildNode(childNode, this);\n      }\n    });\n  }\n\n  protected onRemoveChildNode(childNode: Node): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didRemoveChildNode(childNode: Node): void {\n    this.didObserve(function (viewObserver: NodeViewObserver): void {\n      if (viewObserver.viewDidRemoveChildNode !== void 0) {\n        viewObserver.viewDidRemoveChildNode(childNode, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  get viewFlags(): ViewFlags {\n    return this._viewFlags;\n  }\n\n  /** @hidden */\n  setViewFlags(viewFlags: ViewFlags): void {\n    this._viewFlags = viewFlags;\n  }\n\n  /** @hidden */\n  isNodeMounted(): boolean {\n    let node: Node = this._node;\n    do {\n      const parentNode = node.parentNode;\n      if (parentNode !== null) {\n        if (parentNode.nodeType === Node.DOCUMENT_NODE) {\n          return true;\n        }\n        node = parentNode;\n        continue;\n      }\n      break;\n    } while (true);\n    return false;\n  }\n\n  cascadeMount(): void {\n    if ((this._viewFlags & View.MountedFlag) === 0) {\n      this._viewFlags |= View.MountedFlag;\n      this.willMount();\n      this.onMount();\n      this.doMountChildViews();\n      this.didMount();\n    } else {\n      throw new Error(\"already mounted\");\n    }\n  }\n\n  /** @hidden */\n  doMountChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeMount();\n      }\n    }\n  }\n\n  cascadeUnmount(): void {\n    if ((this._viewFlags & View.MountedFlag) !== 0) {\n      this._viewFlags &= ~View.MountedFlag\n      this.willUnmount();\n      this.doUnmountChildViews();\n      this.onUnmount();\n      this.didUnmount();\n    } else {\n      throw new Error(\"already unmounted\");\n    }\n  }\n\n  /** @hidden */\n  doUnmountChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeUnmount();\n      }\n    }\n  }\n\n  protected onUnmount(): void {\n    this.cancelAnimators();\n    this._viewFlags = 0;\n  }\n\n  cascadePower(): void {\n    if ((this._viewFlags & View.PoweredFlag) === 0) {\n      this._viewFlags |= View.PoweredFlag;\n      this.willPower();\n      this.onPower();\n      this.doPowerChildViews();\n      this.didPower();\n    } else {\n      throw new Error(\"already powered\");\n    }\n  }\n\n  /** @hidden */\n  doPowerChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadePower();\n      }\n    }\n  }\n\n  cascadeUnpower(): void {\n    if ((this._viewFlags & View.PoweredFlag) !== 0) {\n      this._viewFlags &= ~View.PoweredFlag\n      this.willUnpower();\n      this.doUnpowerChildViews();\n      this.onUnpower();\n      this.didUnpower();\n    } else {\n      throw new Error(\"already unpowered\");\n    }\n  }\n\n  /** @hidden */\n  doUnpowerChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeUnpower();\n      }\n    }\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: ViewContext): void {\n    processFlags = this._viewFlags | processFlags;\n    processFlags = this.needsProcess(processFlags, viewContext);\n    this.doProcess(processFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doProcess(processFlags: ViewFlags, viewContext: ViewContext): void {\n    let cascadeFlags = processFlags;\n    this._viewFlags &= ~(View.NeedsProcess | View.NeedsResize | View.NeedsProject);\n    this.willProcess(viewContext);\n    this._viewFlags |= View.ProcessingFlag;\n    try {\n      if (((this._viewFlags | processFlags) & View.NeedsScroll) !== 0) {\n        cascadeFlags |= View.NeedsScroll;\n        this._viewFlags &= ~View.NeedsScroll;\n        this.willScroll(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsDerive) !== 0) {\n        cascadeFlags |= View.NeedsDerive;\n        this._viewFlags &= ~View.NeedsDerive;\n        this.willDerive(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsAnimate) !== 0) {\n        cascadeFlags |= View.NeedsAnimate;\n        this._viewFlags &= ~View.NeedsAnimate;\n        this.willAnimate(viewContext);\n      }\n\n      this.onProcess(viewContext);\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.onScroll(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.onDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.onAnimate(viewContext);\n      }\n\n      this.doProcessChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.didAnimate(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.didDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.didScroll(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.ProcessingFlag;\n      this.didProcess(viewContext);\n    }\n  }\n\n  protected willAnimate(viewContext: ViewContext): void {\n    this.willObserve(function (viewObserver: AnimatedViewObserver): void {\n      if (viewObserver.viewWillAnimate !== void 0) {\n        viewObserver.viewWillAnimate(viewContext, this);\n      }\n    });\n  }\n\n  protected onAnimate(viewContext: ViewContext): void {\n    this.animateMembers(viewContext.updateTime);\n  }\n\n  protected didAnimate(viewContext: ViewContext): void {\n    this.didObserve(function (viewObserver: AnimatedViewObserver): void {\n      if (viewObserver.viewDidAnimate !== void 0) {\n        viewObserver.viewDidAnimate(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doProcessChildViews(processFlags: ViewFlags, viewContext: ViewContext): void {\n    const childNodes = this._node.childNodes;\n    if ((processFlags & View.ProcessMask) !== 0 && childNodes.length !== 0) {\n      this.willProcessChildViews(viewContext);\n      let i = 0;\n      while (i < childNodes.length) {\n        const childView = (childNodes[i] as ViewNode).view;\n        if (childView !== void 0) {\n          this.doProcessChildView(childView, processFlags, viewContext);\n          if ((childView._viewFlags & View.RemovingFlag) !== 0) {\n            childView._viewFlags &= ~View.RemovingFlag;\n            this.removeChildView(childView);\n            continue;\n          }\n        }\n        i += 1;\n      }\n      this.didProcessChildViews(viewContext);\n    }\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: ViewContext): void {\n    displayFlags = this._viewFlags | displayFlags;\n    displayFlags = this.needsDisplay(displayFlags, viewContext);\n    this.doDisplay(displayFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doDisplay(displayFlags: ViewFlags, viewContext: ViewContext): void {\n    let cascadeFlags = displayFlags;\n    this._viewFlags &= ~(View.NeedsDisplay | View.NeedsRender | View.NeedsComposite);\n    this.willDisplay(viewContext);\n    this._viewFlags |= View.DisplayingFlag;\n    try {\n      if (((this._viewFlags | displayFlags) & View.NeedsLayout) !== 0) {\n        cascadeFlags |= View.NeedsLayout;\n        this._viewFlags &= ~View.NeedsLayout;\n        this.willLayout(viewContext);\n      }\n\n      this.onDisplay(viewContext);\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.onLayout(viewContext);\n      }\n\n      this.doDisplayChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.didLayout(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.DisplayingFlag;\n      this.didDisplay(viewContext);\n    }\n  }\n\n  /** @hidden */\n  protected doDisplayChildViews(displayFlags: ViewFlags, viewContext: ViewContext): void {\n    const childNodes = this._node.childNodes;\n    if ((displayFlags & View.DisplayMask) !== 0 && childNodes.length !== 0) {\n      this.willDisplayChildViews(viewContext);\n      let i = 0;\n      while (i < childNodes.length) {\n        const childView = (childNodes[i] as ViewNode).view;\n        if (childView !== void 0) {\n          this.doDisplayChildView(childView, displayFlags, viewContext);\n          if ((childView._viewFlags & View.RemovingFlag) !== 0) {\n            childView._viewFlags &= ~View.RemovingFlag;\n            this.removeChildView(childView);\n            continue;\n          }\n        }\n        i += 1;\n      }\n      this.didDisplayChildViews(viewContext);\n    }\n  }\n\n  hasViewScope(scopeName: string): boolean {\n    const viewScopes = this._viewScopes;\n    return viewScopes !== void 0 && viewScopes[scopeName] !== void 0;\n  }\n\n  getViewScope(scopeName: string): ViewScope<View, unknown> | null {\n    const viewScopes = this._viewScopes;\n    return viewScopes !== void 0 ? viewScopes[scopeName] || null : null;\n  }\n\n  setViewScope(scopeName: string, viewScope: ViewScope<View, unknown> | null): void {\n    let viewScopes = this._viewScopes;\n    if (viewScopes === void 0) {\n      viewScopes = {};\n      this._viewScopes = viewScopes;\n    }\n    if (viewScope !== null) {\n      viewScopes[scopeName] = viewScope;\n    } else {\n      delete viewScopes[scopeName];\n    }\n  }\n\n  hasLayoutAnchor(anchorName: string): boolean {\n    const layoutAnchors = this._layoutAnchors;\n    return layoutAnchors !== void 0 && layoutAnchors[anchorName] !== void 0;\n  }\n\n  getLayoutAnchor(anchorName: string): LayoutAnchor<LayoutView> | null {\n    const layoutAnchors = this._layoutAnchors;\n    return layoutAnchors !== void 0 ? layoutAnchors[anchorName] || null : null;\n  }\n\n  setLayoutAnchor(anchorName: string, layoutAnchor: LayoutAnchor<LayoutView> | null): void {\n    let layoutAnchors = this._layoutAnchors;\n    if (layoutAnchors === void 0) {\n      layoutAnchors = {};\n      this._layoutAnchors = layoutAnchors;\n    }\n    if (layoutAnchor !== null) {\n      layoutAnchors[anchorName] = layoutAnchor;\n    } else {\n      delete layoutAnchors[anchorName];\n    }\n  }\n\n  hasMemberAnimator(animatorName: string): boolean {\n    const memberAnimators = this._memberAnimators;\n    return memberAnimators !== void 0 && memberAnimators[animatorName] !== void 0;\n  }\n\n  getMemberAnimator(animatorName: string): Animator | null {\n    const memberAnimators = this._memberAnimators;\n    return memberAnimators !== void 0 ? memberAnimators[animatorName] || null : null;\n  }\n\n  setMemberAnimator(animatorName: string, animator: Animator | null): void {\n    let memberAnimators = this._memberAnimators;\n    if (memberAnimators === void 0) {\n      memberAnimators = {};\n      this._memberAnimators = memberAnimators;\n    }\n    if (animator !== null) {\n      memberAnimators[animatorName] = animator;\n    } else {\n      delete memberAnimators[animatorName];\n    }\n  }\n\n  /** @hidden */\n  getLazyMemberAnimator(animatorName: string): Animator | null {\n    let memberAnimator = this.getMemberAnimator(animatorName);\n    if (memberAnimator === null) {\n      const viewClass = (this as any).__proto__ as AnimatedViewClass;\n      const descriptor = AnimatedView.getMemberAnimatorDescriptor(animatorName, viewClass);\n      if (descriptor !== null && descriptor.animatorType !== void 0) {\n        memberAnimator = AnimatedView.initMemberAnimator(descriptor.animatorType, this, animatorName, descriptor);\n        this.setMemberAnimator(animatorName, memberAnimator);\n      }\n    }\n    return memberAnimator;\n  }\n\n  /** @hidden */\n  animatorDidSetAuto(animator: Animator, auto: boolean): void {\n    if (animator instanceof MemberAnimator) {\n      this.requireUpdate(View.NeedsDerive);\n    }\n  }\n\n  /** @hidden */\n  animateMembers(t: number): void {\n    const memberAnimators = this._memberAnimators;\n    if (memberAnimators !== void 0) {\n      for (const animatorName in memberAnimators) {\n        const animator = memberAnimators[animatorName]!;\n        animator.onFrame(t);\n      }\n    }\n  }\n\n  animate(animator: Animator): void {\n    this.requireUpdate(View.NeedsAnimate);\n  }\n\n  /** @hidden */\n  cancelAnimators(): void {\n    this.cancelMemberAnimators();\n  }\n\n  /** @hidden */\n  cancelMemberAnimators(): void {\n    const memberAnimators = this._memberAnimators;\n    if (memberAnimators !== void 0) {\n      for (const animatorName in memberAnimators) {\n        const animator = memberAnimators[animatorName]!;\n        animator.cancel();\n      }\n    }\n  }\n\n  get parentTransform(): Transform {\n    return Transform.identity();\n  }\n\n  get clientBounds(): BoxR2 {\n    const range = document.createRange();\n    range.selectNode(this._node);\n    const bounds = range.getBoundingClientRect();\n    range.detach();\n    return new BoxR2(bounds.left, bounds.top, bounds.right, bounds.bottom);\n  }\n\n  get pageBounds(): BoxR2 {\n    const range = document.createRange();\n    range.selectNode(this._node);\n    const bounds = range.getBoundingClientRect();\n    range.detach();\n    const scrollX = window.pageXOffset;\n    const scrollY = window.pageYOffset;\n    return new BoxR2(bounds.left + scrollX, bounds.top + scrollY,\n                     bounds.right + scrollX, bounds.bottom + scrollY);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    return this._node.dispatchEvent(event);\n  }\n\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this {\n    this._node.addEventListener(type, listener, options);\n    return this;\n  }\n\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this {\n    this._node.removeEventListener(type, listener, options);\n    return this;\n  }\n}\nView.Node = NodeView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Animator} from \"@swim/animate\";\nimport {AttributeString, StyleString, StyledElement} from \"@swim/style\";\nimport {View} from \"../View\";\nimport {NodeView} from \"../node/NodeView\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"../attribute/AttributeAnimator\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"../style/StyleAnimator\";\nimport {ElementViewObserver} from \"./ElementViewObserver\";\nimport {ElementViewController} from \"./ElementViewController\";\nimport {SvgViewTagMap} from \"../svg/SvgView\";\nimport {HtmlViewTagMap} from \"../html/HtmlView\";\n\nexport interface ViewElement extends StyledElement {\n  view?: ElementView;\n}\n\nexport interface ElementViewTagMap extends SvgViewTagMap, HtmlViewTagMap {\n}\n\nexport interface ElementViewConstructor<E extends Element = Element, V extends ElementView = ElementView> {\n  new(node: E): V;\n\n  readonly tag: string;\n  readonly namespace?: string;\n}\n\nexport class ElementView extends NodeView {\n  /** @hidden */\n  _attributeAnimators?: {[animatorName: string]: Animator | undefined};\n  /** @hidden */\n  _styleAnimators?: {[animatorName: string]: Animator | undefined};\n\n  constructor(node: Element) {\n    super(node);\n  }\n\n  get node(): ViewElement {\n    return this._node;\n  }\n\n  get viewController(): ElementViewController | null {\n    return this._viewController;\n  }\n\n  getAttribute(attributeName: string): string | null {\n    return this._node.getAttribute(attributeName);\n  }\n\n  setAttribute(attributeName: string, value: unknown): this {\n    this.willSetAttribute(attributeName, value);\n    if (value !== void 0) {\n      this._node.setAttribute(attributeName, AttributeString(value));\n    } else {\n      this._node.removeAttribute(attributeName);\n    }\n    this.onSetAttribute(attributeName, value);\n    this.didSetAttribute(attributeName, value);\n    return this;\n  }\n\n  protected willSetAttribute(attributeName: string, value: unknown): void {\n    this.willObserve(function (viewObserver: ElementViewObserver): void {\n      if (viewObserver.viewWillSetAttribute !== void 0) {\n        viewObserver.viewWillSetAttribute(attributeName, value, this);\n      }\n    });\n  }\n\n  protected onSetAttribute(attributeName: string, value: unknown): void {\n    // hook\n  }\n\n  protected didSetAttribute(attributeName: string, value: unknown): void {\n    this.didObserve(function (viewObserver: ElementViewObserver): void {\n      if (viewObserver.viewDidSetAttribute !== void 0) {\n        viewObserver.viewDidSetAttribute(attributeName, value, this);\n      }\n    });\n  }\n\n  hasAttributeAnimator(animatorName: string): boolean {\n    const attributeAnimators = this._attributeAnimators;\n    return attributeAnimators !== void 0 && attributeAnimators[animatorName] !== void 0;\n  }\n\n  getAttributeAnimator(animatorName: string): Animator | null {\n    const attributeAnimators = this._attributeAnimators;\n    return attributeAnimators !== void 0 ? attributeAnimators[animatorName] || null : null;\n  }\n\n  setAttributeAnimator(animatorName: string, animator: Animator | null): void {\n    let attributeAnimators = this._attributeAnimators;\n    if (attributeAnimators === void 0) {\n      attributeAnimators = {};\n      this._attributeAnimators = attributeAnimators;\n    }\n    if (animator !== null) {\n      attributeAnimators[animatorName] = animator;\n    } else {\n      delete attributeAnimators[animatorName];\n    }\n  }\n\n  getStyle(propertyNames: string | ReadonlyArray<string>): string {\n    const style = this._node.style;\n    if (typeof propertyNames === \"string\") {\n      return style.getPropertyValue(propertyNames);\n    } else {\n      for (let i = 0, n = propertyNames.length; i < n; i += 1) {\n        const value = style.getPropertyValue(propertyNames[i]);\n        if (value !== \"\") {\n          return value;\n        }\n      }\n      return \"\";\n    }\n  }\n\n  setStyle(propertyName: string, value: unknown, priority?: string): this {\n    this.willSetStyle(propertyName, value, priority);\n    if (value !== void 0) {\n      this._node.style.setProperty(propertyName, StyleString(value), priority);\n    } else {\n      this._node.style.removeProperty(propertyName);\n    }\n    this.onSetStyle(propertyName, value, priority);\n    this.didSetStyle(propertyName, value, priority);\n    return this;\n  }\n\n  protected willSetStyle(propertyName: string, value: unknown, priority: string | undefined): void {\n    this.willObserve(function (viewObserver: ElementViewObserver): void {\n      if (viewObserver.viewWillSetStyle !== void 0) {\n        viewObserver.viewWillSetStyle(propertyName, value, priority, this);\n      }\n    });\n  }\n\n  protected onSetStyle(propertyName: string, value: unknown, priority: string | undefined): void {\n    // hook\n  }\n\n  protected didSetStyle(propertyName: string, value: unknown, priority: string | undefined): void {\n    this.didObserve(function (viewObserver: ElementViewObserver): void {\n      if (viewObserver.viewDidSetStyle !== void 0) {\n        viewObserver.viewDidSetStyle(propertyName, value, priority, this);\n      }\n    });\n  }\n\n  hasStyleAnimator(animatorName: string): boolean {\n    const styleAnimators = this._styleAnimators;\n    return styleAnimators !== void 0 && styleAnimators[animatorName] !== void 0;\n  }\n\n  getStyleAnimator(animatorName: string): Animator | null {\n    const styleAnimators = this._styleAnimators;\n    return styleAnimators !== void 0 ? styleAnimators[animatorName] || null : null;\n  }\n\n  setStyleAnimator(animatorName: string, animator: Animator | null): void {\n    let styleAnimators = this._styleAnimators;\n    if (styleAnimators === void 0) {\n      styleAnimators = {};\n      this._styleAnimators = styleAnimators;\n    }\n    if (animator !== null) {\n      styleAnimators[animatorName] = animator;\n    } else {\n      delete styleAnimators[animatorName];\n    }\n  }\n\n  /** @hidden */\n  cancelAnimators(): void {\n    super.cancelAnimators();\n    this.cancelAttributeAnimators();\n    this.cancelStyleAnimators();\n  }\n\n  /** @hidden */\n  cancelAttributeAnimators(): void {\n    const attributeAnimators = this._attributeAnimators;\n    if (attributeAnimators !== void 0) {\n      for (const animatorName in attributeAnimators) {\n        const animator = attributeAnimators[animatorName]!;\n        animator.cancel();\n      }\n    }\n  }\n\n  /** @hidden */\n  cancelStyleAnimators(): void {\n    const styleAnimators = this._styleAnimators;\n    if (styleAnimators !== void 0) {\n      for (const animatorName in styleAnimators) {\n        const animator = styleAnimators[animatorName]!;\n        animator.cancel();\n      }\n    }\n  }\n\n  id(): string | null;\n  id(value: string | null): this;\n  id(value?: string | null): string | null | this {\n    if (value === void 0) {\n      return this.getAttribute(\"id\");\n    } else {\n      this.setAttribute(\"id\", value);\n      return this;\n    }\n  }\n\n  className(): string | null;\n  className(value: string | null): this;\n  className(value?: string | null): string | null | this {\n    if (value === void 0) {\n      return this.getAttribute(\"class\");\n    } else {\n      this.setAttribute(\"class\", value);\n      return this;\n    }\n  }\n\n  get classList(): DOMTokenList {\n    return this._node.classList;\n  }\n\n  hasClass(className: string): boolean {\n    return this._node.classList.contains(className);\n  }\n\n  addClass(...classNames: string[]): this {\n    const classList = this._node.classList;\n    for (let i = 0, n = classNames.length; i < n; i += 1) {\n      classList.add(classNames[i]);\n    }\n    return this;\n  }\n\n  removeClass(...classNames: string[]): this {\n    const classList = this._node.classList;\n    for (let i = 0, n = classNames.length; i < n; i += 1) {\n      classList.remove(classNames[i]);\n    }\n    return this;\n  }\n\n  toggleClass(className: string, state?: boolean): this {\n    const classList = this._node.classList;\n    if (state === void 0) {\n      classList.toggle(className);\n    } else if (state === true) {\n      classList.add(className);\n    } else if (state === false) {\n      classList.remove(className);\n    }\n    return this;\n  }\n\n  get clientBounds(): BoxR2 {\n    const bounds = this._node.getBoundingClientRect();\n    return new BoxR2(bounds.left, bounds.top, bounds.right, bounds.bottom);\n  }\n\n  get pageBounds(): BoxR2 {\n    const bounds = this._node.getBoundingClientRect();\n    const scrollX = window.pageXOffset;\n    const scrollY = window.pageYOffset;\n    return new BoxR2(bounds.left + scrollX, bounds.top + scrollY,\n                     bounds.right + scrollX, bounds.bottom + scrollY);\n  }\n\n  on<T extends keyof ElementEventMap>(type: T, listener: (this: Element, event: ElementEventMap[T]) => unknown,\n                                      options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this {\n    this._node.addEventListener(type, listener, options);\n    return this;\n  }\n\n  off<T extends keyof ElementEventMap>(type: T, listener: (this: Element, event: ElementEventMap[T]) => unknown,\n                                       options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this {\n    this._node.removeEventListener(type, listener, options);\n    return this;\n  }\n\n  /** @hidden */\n  static isConstructor(object: unknown): object is ElementViewConstructor {\n    if (typeof object === \"function\") {\n      const viewConstructor = object as ElementViewConstructor;\n      return typeof viewConstructor.tag === \"string\";\n    }\n    return false;\n  }\n\n  /** @hidden */\n  static initAttributeAnimator<V extends ElementView, T, U>(\n      AttributeAnimator: AttributeAnimatorConstructor<T, U>, view: V,\n      animatorName: string, attributeName: string): AttributeAnimator<V, T, U> {\n    return new AttributeAnimator<V>(view, animatorName, attributeName);\n  }\n\n  /** @hidden */\n  static decorateAttributeAnimator<V extends ElementView, T, U>(\n      AttributeAnimator: AttributeAnimatorConstructor<T, U>, attributeName: string,\n      viewClass: unknown, animatorName: string): void {\n    Object.defineProperty(viewClass, animatorName, {\n      get: function (this: V): AttributeAnimator<V, T, U> {\n        let animator = this.getAttributeAnimator(animatorName) as AttributeAnimator<V, T, U> | null;\n        if (animator === null) {\n          animator = ElementView.initAttributeAnimator(AttributeAnimator, this, animatorName, attributeName);\n          this.setAttributeAnimator(animatorName, animator);\n        }\n        return animator;\n      },\n      configurable: true,\n      enumerable: true,\n    });\n  }\n\n  /** @hidden */\n  static initStyleAnimator<V extends ElementView, T, U>(\n      StyleAnimator: StyleAnimatorConstructor<T, U>, view: V,\n      animatorName: string, propertyNames: string | ReadonlyArray<string>): StyleAnimator<V, T, U> {\n    return new StyleAnimator<V>(view, animatorName, propertyNames);\n  }\n\n  /** @hidden */\n  static decorateStyleAnimator<V extends ElementView, T, U>(\n      StyleAnimator: StyleAnimatorConstructor<T, U>, propertyNames: string | ReadonlyArray<string>,\n      viewClass: unknown, animatorName: string): void {\n    Object.defineProperty(viewClass, animatorName, {\n      get: function (this: V): StyleAnimator<V, T, U> {\n        let animator = this.getStyleAnimator(animatorName) as StyleAnimator<V, T, U> | null;\n        if (animator === null) {\n          animator = ElementView.initStyleAnimator(StyleAnimator, this, animatorName, propertyNames);\n          this.setStyleAnimator(animatorName, animator);\n        }\n        return animator;\n      },\n      configurable: true,\n      enumerable: true,\n    });\n  }\n}\nView.Element = ElementView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Renderer} from \"@swim/render\";\nimport {ViewEvent} from \"../ViewEvent\";\nimport {ViewFlags, ViewInit, View} from \"../View\";\nimport {AnimatedView} from \"../animated/AnimatedView\";\nimport {RenderedViewContext} from \"./RenderedViewContext\";\nimport {RenderedViewController} from \"./RenderedViewController\";\nimport {ElementViewConstructor, ElementView} from \"../element/ElementView\";\nimport {CanvasView} from \"../canvas/CanvasView\";\n\nexport interface RenderedViewConstructor<V extends RenderedView = RenderedView> {\n  new(): V;\n}\n\nexport interface RenderedViewInit extends ViewInit {\n  hidden?: boolean;\n  culled?: boolean;\n}\n\nexport interface RenderedView extends AnimatedView {\n  readonly viewController: RenderedViewController | null;\n\n  readonly canvasView: CanvasView | null;\n\n  readonly renderer: Renderer | null;\n\n  needsProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): ViewFlags;\n\n  needsDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): ViewFlags;\n\n  /**\n   * Returns `true` if this view is ineligible for rendering and hit testing,\n   * and should be excluded from its parent's layout and hit bounds.\n   */\n  isHidden(): boolean;\n\n  /**\n   * Makes this view ineligible for rendering and hit testing, and excludes\n   * this view from its parent's layout and hit bounds, when `hidden` is `true`.\n   * Makes this view eligible for rendering and hit testing, and includes this\n   * view in its parent's layout and hit bounds, when `hidden` is `false`.\n   */\n  setHidden(hidden: boolean): void;\n\n  /**\n   * Returns `true` if this view should be excluded from rendering and hit testing.\n   */\n  isCulled(): boolean;\n\n  /**\n   * Excludes this view from rendering and hit testing when `culled` is `true`.\n   * Includes this view in rendering and hit testing when `culled` is `false`.\n   */\n  setCulled(culled: boolean): void;\n\n  /**\n   * The parent-specified view-coordinate bounding box in which this view\n   * should layout and render graphics.\n   */\n  readonly viewFrame: BoxR2;\n\n  /**\n   * Sets the view-coordinate bounding box in which this view should layout\n   * and render graphics.  Should only be invoked by the view's parent view.\n   */\n  setViewFrame(viewFrame: BoxR2): void;\n\n  /**\n   * The self-defined view-coordinate bounding box surrounding all graphics\n   * this view could possibly render.  Views with view bounds that don't\n   * overlap their view frames may be culled from rendering and hit testing.\n   */\n  readonly viewBounds: BoxR2;\n\n  /**\n   * The self-defined view-coordinate bounding box surrounding all hit regions\n   * in this view.\n   */\n  readonly hitBounds: BoxR2;\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null;\n\n  /** @hidden */\n  handleEvent(event: ViewEvent): void;\n\n  /**\n   * Invokes event handlers registered with this `View` before propagating the\n   * `event` up the view hierarchy.  Returns a `View`, without invoking any\n   * registered event handlers, on which `dispatchEvent` should be called to\n   * continue event propagation.\n   * @hidden\n   */\n  bubbleEvent(event: ViewEvent): View | null;\n}\n\n/** @hidden */\nexport const RenderedView = {\n  fromConstructor<C extends ElementViewConstructor | RenderedViewConstructor>(viewConstructor: C): InstanceType<C> {\n    if (!ElementView.isConstructor(viewConstructor)) {\n      return new (viewConstructor as RenderedViewConstructor)() as InstanceType<C>;\n    }\n    throw new TypeError(\"\" + viewConstructor);\n  },\n\n  create<C extends RenderedViewConstructor>(source: RenderedViewConstructor): InstanceType<C> {\n    if (typeof source === \"function\") {\n      return RenderedView.fromConstructor(source) as InstanceType<C>;\n    }\n    throw new TypeError(\"\" + source);\n  },\n\n  is(object: unknown): object is RenderedView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as RenderedView;\n      return view instanceof View.Graphics\n          || AnimatedView.is(view) && typeof view.hitTest === \"function\";\n    }\n    return false;\n  },\n};\nView.Rendered = RenderedView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyColor, Color} from \"@swim/color\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {RenderedViewInit, RenderedView} from \"./RenderedView\";\n\nexport interface FillViewInit extends RenderedViewInit {\n  fill?: AnyColor;\n}\n\nexport interface FillView extends RenderedView {\n  readonly fill: MemberAnimator<this, Color, AnyColor>;\n}\n\n/** @hidden */\nexport const FillView = {\n  is(object: unknown): object is FillView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as FillView;\n      return RenderedView.is(view)\n          && \"fill\" in view;\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {RenderedViewInit, RenderedView} from \"./RenderedView\";\n\nexport interface StrokeViewInit extends RenderedViewInit {\n  stroke?: AnyColor;\n  strokeWidth?: AnyLength;\n}\n\nexport interface StrokeView extends RenderedView {\n  readonly stroke: MemberAnimator<this, Color, AnyColor>;\n\n  readonly strokeWidth: MemberAnimator<this, Length, AnyLength>;\n}\n\n/** @hidden */\nexport const StrokeView = {\n  is(object: unknown): object is StrokeView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as StrokeView;\n      return RenderedView.is(view)\n          && \"stroke\" in view\n          && \"strokeWidth\" in view;;\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {RenderedViewInit, RenderedView} from \"./RenderedView\";\n\nexport interface TypesetViewInit extends RenderedViewInit {\n  font?: AnyFont;\n  textAlign?: CanvasTextAlign;\n  textBaseline?: CanvasTextBaseline;\n  textOrigin?: AnyPointR2;\n  textColor?: AnyColor;\n}\n\nexport interface TypesetView extends RenderedView {\n  readonly font: MemberAnimator<this, Font, AnyFont>;\n\n  readonly textAlign: MemberAnimator<this, CanvasTextAlign>;\n\n  readonly textBaseline: MemberAnimator<this, CanvasTextBaseline>;\n\n  readonly textOrigin: MemberAnimator<this, PointR2, AnyPointR2>;\n\n  readonly textColor: MemberAnimator<this, Color, AnyColor>;\n}\n\n/** @hidden */\nexport const TypesetView = {\n  is(object: unknown): object is TypesetView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as TypesetView;\n      return RenderedView.is(view)\n          && \"font\" in view\n          && \"textAlign\" in view\n          && \"textBaseline\" in view\n          && \"textOrigin\" in view\n          && \"textColor\" in view;\n    }\n    return false;\n  },\n};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Transform} from \"@swim/transform\";\nimport {Animator} from \"@swim/animate\";\nimport {Renderer} from \"@swim/render\";\nimport {ViewScope} from \"../scope/ViewScope\";\nimport {ViewEvent, ViewMouseEvent, ViewEventHandler} from \"../ViewEvent\";\nimport {ViewControllerType, ViewFlags, View} from \"../View\";\nimport {ViewObserver} from \"../ViewObserver\";\nimport {LayoutAnchor} from \"../layout/LayoutAnchor\";\nimport {LayoutView} from \"../layout/LayoutView\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {AnimatedViewClass, AnimatedView} from \"../animated/AnimatedView\";\nimport {RenderedViewContext} from \"../rendered/RenderedViewContext\";\nimport {RenderedViewConstructor, RenderedView} from \"../rendered/RenderedView\";\nimport {GraphicsViewObserver} from \"./GraphicsViewObserver\";\nimport {GraphicsViewController} from \"./GraphicsViewController\";\nimport {CanvasView} from \"../canvas/CanvasView\";\n\nexport class GraphicsView extends View implements RenderedView {\n  /** @hidden */\n  _key?: string;\n  /** @hidden */\n  _parentView: View | null;\n  /** @hidden */\n  readonly _childViews: View[];\n  /** @hidden */\n  _childViewMap?: {[key: string]: View | undefined};\n  /** @hidden */\n  _viewController: ViewControllerType<this> | null;\n  /** @hidden */\n  _viewObservers?: ViewObserver[];\n  /** @hidden */\n  _viewFlags: ViewFlags;\n  /** @hidden */\n  _viewScopes?: {[scopeName: string]: ViewScope<View, unknown> | undefined};\n  /** @hidden */\n  _layoutAnchors?: {[anchorName: string]: LayoutAnchor<LayoutView> | undefined};\n  /** @hidden */\n  _memberAnimators?: {[animatorName: string]: Animator | undefined};\n  /** @hidden */\n  _viewFrame?: BoxR2;\n  /** @hidden */\n  _eventHandlers?: {[type: string]: ViewEventHandler[] | undefined};\n\n  constructor() {\n    super();\n    this._parentView = null;\n    this._childViews = [];\n    this._viewController = null;\n    this._viewFlags = 0;\n  }\n\n  get viewController(): GraphicsViewController | null {\n    return this._viewController;\n  }\n\n  setViewController(newViewController: ViewControllerType<this> | null): void {\n    const oldViewController = this._viewController;\n    if (oldViewController !== newViewController) {\n      this.willSetViewController(newViewController);\n      if (oldViewController !== null) {\n        oldViewController.setView(null);\n      }\n      this._viewController = newViewController;\n      if (newViewController !== null) {\n        newViewController.setView(this);\n      }\n      this.onSetViewController(newViewController);\n      this.didSetViewController(newViewController);\n    }\n  }\n\n  get viewObservers(): ReadonlyArray<ViewObserver> {\n    let viewObservers = this._viewObservers;\n    if (viewObservers === void 0) {\n      viewObservers = [];\n      this._viewObservers = viewObservers;\n    }\n    return viewObservers;\n  }\n\n  addViewObserver(viewObserver: ViewObserver): void {\n    let viewObservers = this._viewObservers;\n    let index: number;\n    if (viewObservers === void 0) {\n      viewObservers = [];\n      this._viewObservers = viewObservers;\n      index = -1;\n    } else {\n      index = viewObservers.indexOf(viewObserver);\n    }\n    if (index < 0) {\n      this.willAddViewObserver(viewObserver);\n      viewObservers.push(viewObserver);\n      this.onAddViewObserver(viewObserver);\n      this.didAddViewObserver(viewObserver);\n    }\n  }\n\n  removeViewObserver(viewObserver: ViewObserver): void {\n    const viewObservers = this._viewObservers;\n    if (viewObservers !== void 0) {\n      const index = viewObservers.indexOf(viewObserver);\n      if (index >= 0) {\n        this.willRemoveViewObserver(viewObserver);\n        viewObservers.splice(index, 1);\n        this.onRemoveViewObserver(viewObserver);\n        this.didRemoveViewObserver(viewObserver);\n      }\n    }\n  }\n\n  get canvasView(): CanvasView | null {\n    const parentView = this._parentView;\n    return RenderedView.is(parentView) ? parentView.canvasView : null;\n  }\n\n  get key(): string | null {\n    const key = this._key;\n    return key !== void 0 ? key : null;\n  }\n\n  /** @hidden */\n  setKey(key: string | null): void {\n    if (key !== null) {\n      this._key = key;\n    } else if (this._key !== void 0) {\n      this._key = void 0;\n    }\n  }\n\n  get parentView(): View | null {\n    return this._parentView;\n  }\n\n  /** @hidden */\n  setParentView(newParentView: View | null, oldParentView: View | null) {\n    this.willSetParentView(newParentView, oldParentView);\n    this._parentView = newParentView;\n    this.onSetParentView(newParentView, oldParentView);\n    this.didSetParentView(newParentView, oldParentView);\n  }\n\n  get childViews(): ReadonlyArray<View> {\n    return this._childViews;\n  }\n\n  getChildView(key: string): View | null {\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const childView = childViewMap[key];\n      if (childView !== void 0) {\n        return childView;\n      }\n    }\n    return null;\n  }\n\n  setChildView(key: string, newChildView: View | null): View | null {\n    if (newChildView !== null) {\n      if (!RenderedView.is(newChildView)) {\n        throw new TypeError(\"\" + newChildView);\n      }\n      newChildView.remove();\n    }\n    let index = -1;\n    let oldChildView: View | null = null;\n    let targetView: View | null = null;\n    const childViews = this._childViews;\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const childView = childViewMap[key];\n      if (childView !== void 0) {\n        index = childViews.indexOf(childView);\n        // assert(index >= 0);\n        oldChildView = childView;\n        targetView = childViews[index + 1] || null;\n        this.willRemoveChildView(childView);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        childViews.splice(index, 1);\n        this.onRemoveChildView(childView);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n      }\n    }\n    if (newChildView !== null) {\n      newChildView.setKey(key);\n      this.willInsertChildView(newChildView, targetView);\n      if (index >= 0) {\n        childViews.splice(index, 0, newChildView);\n      } else {\n        childViews.push(newChildView);\n      }\n      this.insertChildViewMap(newChildView);\n      newChildView.setParentView(this, null);\n      this.onInsertChildView(newChildView, targetView);\n      this.didInsertChildView(newChildView, targetView);\n    }\n    return oldChildView;\n  }\n\n  /** @hidden */\n  protected insertChildViewMap(childView: View): void {\n    const key = childView.key;\n    if (key !== null) {\n      let childViewMap = this._childViewMap;\n      if (childViewMap === void 0) {\n        childViewMap = {};\n        this._childViewMap = childViewMap;\n      }\n      childViewMap[key] = childView;\n    }\n  }\n\n  /** @hidden */\n  protected removeChildViewMap(childView: View): void {\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const key = childView.key;\n      if (key !== null) {\n        delete childViewMap[key];\n      }\n    }\n  }\n\n  append<V extends RenderedView>(childView: V, key?: string): V;\n  append<C extends RenderedViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  append(child: RenderedView | RenderedViewConstructor, key?: string): RenderedView {\n    if (typeof child === \"function\") {\n      child = RenderedView.create(child);\n    }\n    this.appendChildView(child, key);\n    return child;\n  }\n\n  appendChildView(childView: View, key?: string): void {\n    if (!RenderedView.is(childView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, null);\n    this._childViews.push(childView);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, null);\n    this.didInsertChildView(childView, null);\n  }\n\n  prepend<V extends RenderedView>(childView: V, key?: string): V;\n  prepend<C extends RenderedViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  prepend(child: RenderedView | RenderedViewConstructor, key?: string): RenderedView {\n    if (typeof child === \"function\") {\n      child = RenderedView.create(child);\n    }\n    this.prependChildView(child, key);\n    return child;\n  }\n\n  prependChildView(childView: View, key?: string): void {\n    if (!RenderedView.is(childView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, null);\n    this._childViews.unshift(childView);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, null);\n    this.didInsertChildView(childView, null);\n  }\n\n  insert<V extends RenderedView>(childView: V, target: View | null, key?: string): V;\n  insert<C extends RenderedViewConstructor>(viewConstructor: C, target: View | null, key?: string): InstanceType<C>;\n  insert(child: RenderedView | RenderedViewConstructor, target: View | null, key?: string): RenderedView {\n    if (typeof child === \"function\") {\n      child = RenderedView.create(child);\n    }\n    this.insertChildView(child, target, key);\n    return child;\n  }\n\n  insertChildView(childView: View, targetView: View | null, key?: string): void {\n    if (!RenderedView.is(childView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    if (targetView !== null && !RenderedView.is(childView)) {\n      throw new TypeError(\"\" + targetView);\n    }\n    if (targetView !== null && targetView.parentView !== this) {\n      throw new TypeError(\"\" + targetView);\n    }\n    childView.remove();\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, targetView);\n    const childViews = this._childViews;\n    const index = targetView !== null ? childViews.indexOf(targetView) : -1;\n    if (index >= 0) {\n      childViews.splice(index, 0, childView);\n    } else {\n      childViews.push(childView);\n    }\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, targetView);\n    this.didInsertChildView(childView, targetView);\n  }\n\n  removeChildView(key: string): View | null;\n  removeChildView(childView: View): void;\n  removeChildView(key: string | View): View | null | void {\n    let childView: View | null;\n    if (typeof key === \"string\") {\n      childView = this.getChildView(key);\n      if (childView === null) {\n        return null;\n      }\n    } else {\n      childView = key;\n    }\n    if (!RenderedView.is(childView)) {\n      throw new TypeError(\"\" + childView);\n    }\n    if (childView.parentView !== this) {\n      throw new Error(\"not a child view\");\n    }\n    this.willRemoveChildView(childView);\n    childView.setParentView(null, this);\n    this.removeChildViewMap(childView);\n    const childViews = this._childViews;\n    const index = childViews.indexOf(childView);\n    if (index >= 0) {\n      childViews.splice(index, 1);\n    }\n    this.onRemoveChildView(childView);\n    this.didRemoveChildView(childView);\n    childView.setKey(null);\n    if (typeof key === \"string\") {\n      return childView;\n    }\n  }\n\n  removeAll(): void {\n    const childViews = this._childViews;\n    do {\n      const count = childViews.length;\n      if (count > 0) {\n        const childView = childViews[count - 1];\n        this.willRemoveChildView(childView);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        childViews.pop();\n        this.onRemoveChildView(childView);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n        continue;\n      }\n      break;\n    } while (true);\n  }\n\n  remove(): void {\n    const parentView = this._parentView;\n    if (parentView !== null) {\n      if ((this._viewFlags & View.UpdatingMask) === 0) {\n        parentView.removeChildView(this);\n      } else {\n        this._viewFlags |= View.RemovingFlag;\n      }\n    }\n  }\n\n  /** @hidden */\n  get viewFlags(): ViewFlags {\n    return this._viewFlags;\n  }\n\n  /** @hidden */\n  setViewFlags(viewFlags: ViewFlags): void {\n    this._viewFlags = viewFlags;\n  }\n\n  cascadeMount(): void {\n    if ((this._viewFlags & View.MountedFlag) === 0) {\n      this._viewFlags |= View.MountedFlag;\n      this.willMount();\n      this.onMount();\n      this.doMountChildViews();\n      this.didMount();\n    } else {\n      throw new Error(\"already mounted\");\n    }\n  }\n\n  /** @hidden */\n  doMountChildViews(): void {\n    const childViews = this._childViews;\n    for (let i = 0; i < childViews.length; i += 1) {\n      const childView = childViews[i];\n      childView.cascadeMount();\n    }\n  }\n\n  cascadeUnmount(): void {\n    if ((this._viewFlags & View.MountedFlag) !== 0) {\n      this._viewFlags &= ~View.MountedFlag\n      this.willUnmount();\n      this.doUnmountChildViews();\n      this.onUnmount();\n      this.didUnmount();\n    } else {\n      throw new Error(\"already unmounted\");\n    }\n  }\n\n  /** @hidden */\n  doUnmountChildViews(): void {\n    const childViews = this._childViews;\n    for (let i = 0; i < childViews.length; i += 1) {\n      const childView = childViews[i];\n      childView.cascadeUnmount();\n    }\n  }\n\n  protected onUnmount(): void {\n    this.cancelAnimators();\n    this._viewFlags = 0;\n  }\n\n  cascadePower(): void {\n    if ((this._viewFlags & View.PoweredFlag) === 0) {\n      this._viewFlags |= View.PoweredFlag;\n      this.willPower();\n      this.onPower();\n      this.doPowerChildViews();\n      this.didPower();\n    } else {\n      throw new Error(\"already powered\");\n    }\n  }\n\n  /** @hidden */\n  doPowerChildViews(): void {\n    const childViews = this._childViews;\n    for (let i = 0; i < childViews.length; i += 1) {\n      const childView = childViews[i];\n      childView.cascadePower();\n    }\n  }\n\n  cascadeUnpower(): void {\n    if ((this._viewFlags & View.PoweredFlag) !== 0) {\n      this._viewFlags &= ~View.PoweredFlag\n      this.willUnpower();\n      this.doUnpowerChildViews();\n      this.onUnpower();\n      this.didUnpower();\n    } else {\n      throw new Error(\"already unpowered\");\n    }\n  }\n\n  /** @hidden */\n  doUnpowerChildViews(): void {\n    const childViews = this._childViews;\n    for (let i = 0; i < childViews.length; i += 1) {\n      const childView = childViews[i];\n      childView.cascadeUnpower();\n    }\n  }\n\n  get renderer(): Renderer | null {\n    const parentView = this._parentView;\n    return RenderedView.is(parentView) ? parentView.renderer : null;\n  }\n\n  needsProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): ViewFlags {\n    if ((this._viewFlags & View.NeedsAnimate) === 0) {\n      processFlags &= ~View.NeedsAnimate;\n    }\n    return processFlags;\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    processFlags = this._viewFlags | processFlags;\n    processFlags = this.needsProcess(processFlags, viewContext);\n    this.doProcess(processFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    let cascadeFlags = processFlags;\n    this._viewFlags &= ~(View.NeedsProcess | View.NeedsResize | View.NeedsProject);\n    this.willProcess(viewContext);\n    this._viewFlags |= View.ProcessingFlag;\n    try {\n      if (((this._viewFlags | processFlags) & View.NeedsScroll) !== 0) {\n        cascadeFlags |= View.NeedsScroll;\n        this._viewFlags &= ~View.NeedsScroll;\n        this.willScroll(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsDerive) !== 0) {\n        cascadeFlags |= View.NeedsDerive;\n        this._viewFlags &= ~View.NeedsDerive;\n        this.willDerive(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsAnimate) !== 0) {\n        cascadeFlags |= View.NeedsAnimate;\n        this._viewFlags &= ~View.NeedsAnimate;\n        this.willAnimate(viewContext);\n      }\n\n      this.onProcess(viewContext);\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.onScroll(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.onDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.onAnimate(viewContext);\n      }\n\n      this.doProcessChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.didAnimate(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.didDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.didScroll(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.ProcessingFlag;\n      this.didProcess(viewContext);\n    }\n  }\n\n  protected willAnimate(viewContext: RenderedViewContext): void {\n    this.willObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewWillAnimate !== void 0) {\n        viewObserver.viewWillAnimate(viewContext, this);\n      }\n    });\n  }\n\n  protected onAnimate(viewContext: RenderedViewContext): void {\n    this.animateMembers(viewContext.updateTime);\n  }\n\n  protected didAnimate(viewContext: RenderedViewContext): void {\n    this.didObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewDidAnimate !== void 0) {\n        viewObserver.viewDidAnimate(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doProcessChildViews(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    const childViews = this._childViews;\n    if ((processFlags & View.ProcessMask) !== 0 && childViews.length !== 0) {\n      this.willProcessChildViews(viewContext);\n      let i = 0;\n      while (i < childViews.length) {\n        const childView = childViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doProcessChildView(childView, processFlags, childViewContext);\n        if ((childView.viewFlags & View.RemovingFlag) !== 0) {\n          childView.setViewFlags(childView.viewFlags & ~View.RemovingFlag);\n          this.removeChildView(childView);\n          continue;\n        }\n        i += 1;\n      }\n      this.didProcessChildViews(viewContext);\n    }\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    displayFlags = this._viewFlags | displayFlags;\n    displayFlags = this.needsDisplay(displayFlags, viewContext);\n    this.doDisplay(displayFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    let cascadeFlags = displayFlags;\n    this._viewFlags &= ~(View.NeedsDisplay | View.NeedsComposite);\n    this.willDisplay(viewContext);\n    this._viewFlags |= View.DisplayingFlag;\n    try {\n      if (((this._viewFlags | displayFlags) & View.NeedsLayout) !== 0) {\n        cascadeFlags |= View.NeedsLayout;\n        this._viewFlags &= ~View.NeedsLayout;\n        this.willLayout(viewContext);\n      }\n      if (((this._viewFlags | displayFlags) & View.NeedsRender) !== 0) {\n        cascadeFlags |= View.NeedsRender;\n        this._viewFlags &= ~View.NeedsRender;\n        this.willRender(viewContext);\n      }\n\n      this.onDisplay(viewContext);\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.onLayout(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.onRender(viewContext);\n      }\n\n      this.doDisplayChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.didRender(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.didLayout(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.DisplayingFlag;\n      this.didDisplay(viewContext);\n    }\n  }\n\n  protected willRender(viewContext: RenderedViewContext): void {\n    this.willObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewWillRender !== void 0) {\n        viewObserver.viewWillRender(viewContext, this);\n      }\n    });\n  }\n\n  protected onRender(viewContext: RenderedViewContext): void {\n    // hook\n  }\n\n  protected didRender(viewContext: RenderedViewContext): void {\n    this.didObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewDidRender !== void 0) {\n        viewObserver.viewDidRender(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doDisplayChildViews(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    const childViews = this._childViews;\n    if ((displayFlags & View.DisplayMask) !== 0 && childViews.length !== 0 && !this.isHidden() && !this.isCulled()) {\n      this.willDisplayChildViews(viewContext);\n      let i = 0;\n      while (i < childViews.length) {\n        const childView = childViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doDisplayChildView(childView, displayFlags, childViewContext);\n        if ((childView.viewFlags & View.RemovingFlag) !== 0) {\n          childView.setViewFlags(childView.viewFlags & ~View.RemovingFlag);\n          this.removeChildView(childView);\n          continue;\n        }\n        i += 1;\n      }\n      this.didDisplayChildViews(viewContext);\n    }\n  }\n\n  childViewContext(childView: View, viewContext: RenderedViewContext): RenderedViewContext {\n    return viewContext;\n  }\n\n  hasViewScope(scopeName: string): boolean {\n    const viewScopes = this._viewScopes;\n    return viewScopes !== void 0 && viewScopes[scopeName] !== void 0;\n  }\n\n  getViewScope(scopeName: string): ViewScope<View, unknown> | null {\n    const viewScopes = this._viewScopes;\n    return viewScopes !== void 0 ? viewScopes[scopeName] || null : null;\n  }\n\n  setViewScope(scopeName: string, viewScope: ViewScope<View, unknown> | null): void {\n    let viewScopes = this._viewScopes;\n    if (viewScopes === void 0) {\n      viewScopes = {};\n      this._viewScopes = viewScopes;\n    }\n    if (viewScope !== null) {\n      viewScopes[scopeName] = viewScope;\n    } else {\n      delete viewScopes[scopeName];\n    }\n  }\n\n  hasLayoutAnchor(anchorName: string): boolean {\n    const layoutAnchors = this._layoutAnchors;\n    return layoutAnchors !== void 0 && layoutAnchors[anchorName] !== void 0;\n  }\n\n  getLayoutAnchor(anchorName: string): LayoutAnchor<LayoutView> | null {\n    const layoutAnchors = this._layoutAnchors;\n    return layoutAnchors !== void 0 ? layoutAnchors[anchorName] || null : null;\n  }\n\n  setLayoutAnchor(anchorName: string, layoutAnchor: LayoutAnchor<LayoutView> | null): void {\n    let layoutAnchors = this._layoutAnchors;\n    if (layoutAnchors === void 0) {\n      layoutAnchors = {};\n      this._layoutAnchors = layoutAnchors;\n    }\n    if (layoutAnchor !== null) {\n      layoutAnchors[anchorName] = layoutAnchor;\n    } else {\n      delete layoutAnchors[anchorName];\n    }\n  }\n\n  hasMemberAnimator(animatorName: string): boolean {\n    const memberAnimators = this._memberAnimators;\n    return memberAnimators !== void 0 && memberAnimators[animatorName] !== void 0;\n  }\n\n  getMemberAnimator(animatorName: string): Animator | null {\n    const memberAnimators = this._memberAnimators;\n    return memberAnimators !== void 0 ? memberAnimators[animatorName] || null : null;\n  }\n\n  setMemberAnimator(animatorName: string, animator: Animator | null): void {\n    let memberAnimators = this._memberAnimators;\n    if (memberAnimators === void 0) {\n      memberAnimators = {};\n      this._memberAnimators = memberAnimators;\n    }\n    if (animator !== null) {\n      memberAnimators[animatorName] = animator;\n    } else {\n      delete memberAnimators[animatorName];\n    }\n  }\n\n  /** @hidden */\n  getLazyMemberAnimator(animatorName: string): Animator | null {\n    let memberAnimator = this.getMemberAnimator(animatorName);\n    if (memberAnimator === null) {\n      const viewClass = (this as any).__proto__ as AnimatedViewClass;\n      const descriptor = AnimatedView.getMemberAnimatorDescriptor(animatorName, viewClass);\n      if (descriptor !== null && descriptor.animatorType !== void 0) {\n        memberAnimator = AnimatedView.initMemberAnimator(descriptor.animatorType, this, animatorName, descriptor);\n        this.setMemberAnimator(animatorName, memberAnimator);\n      }\n    }\n    return memberAnimator;\n  }\n\n  /** @hidden */\n  animatorDidSetAuto(animator: Animator, auto: boolean): void {\n    if (animator instanceof MemberAnimator) {\n      this.requireUpdate(View.NeedsDerive);\n    }\n  }\n\n  /** @hidden */\n  animateMembers(t: number): void {\n    const memberAnimators = this._memberAnimators;\n    if (memberAnimators !== void 0) {\n      for (const animatorName in memberAnimators) {\n        const animator = memberAnimators[animatorName]!;\n        animator.onFrame(t);\n      }\n    }\n  }\n\n  animate(animator: Animator): void {\n    this.requireUpdate(View.NeedsAnimate);\n  }\n\n  /** @hidden */\n  cancelAnimators(): void {\n    this.cancelMemberAnimators();\n  }\n\n  /** @hidden */\n  cancelMemberAnimators(): void {\n    const memberAnimators = this._memberAnimators;\n    if (memberAnimators !== void 0) {\n      for (const animatorName in memberAnimators) {\n        const animator = memberAnimators[animatorName]!;\n        animator.cancel();\n      }\n    }\n  }\n\n  isHidden(): boolean {\n    if ((this._viewFlags & View.HiddenFlag) !== 0) {\n      return true;\n    } else {\n      const parentView = this._parentView;\n      return RenderedView.is(parentView) ? parentView.isHidden() : false;\n    }\n  }\n\n  setHidden(newHidden: boolean): void {\n    const oldHidden = (this._viewFlags & View.HiddenFlag) !== 0;\n    if (oldHidden !== newHidden) {\n      this.willSetHidden(newHidden);\n      if (newHidden) {\n        this._viewFlags |= View.HiddenFlag;\n      } else {\n        this._viewFlags &= ~View.HiddenFlag;\n      }\n      this.onSetHidden(newHidden);\n      this.didSetHidden(newHidden);\n    }\n  }\n\n  protected willSetHidden(hidden: boolean): void {\n    this.willObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewWillSetHidden !== void 0) {\n        viewObserver.viewWillSetHidden(hidden, this);\n      }\n    });\n  }\n\n  protected onSetHidden(hidden: boolean): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didSetHidden(hidden: boolean): void {\n    this.didObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewDidSetHidden !== void 0) {\n        viewObserver.viewDidSetHidden(hidden, this);\n      }\n    });\n  }\n\n  isCulled(): boolean {\n    if ((this._viewFlags & View.CulledFlag) !== 0) {\n      return true;\n    } else {\n      const parentView = this._parentView;\n      return RenderedView.is(parentView) ? parentView.isCulled() : false;\n    }\n  }\n\n  setCulled(newCulled: boolean): void {\n    const oldCulled = (this._viewFlags & View.CulledFlag) !== 0;\n    if (oldCulled !== newCulled) {\n      this.willSetCulled(newCulled);\n      if (newCulled) {\n        this._viewFlags |= View.CulledFlag;\n      } else {\n        this._viewFlags &= ~View.CulledFlag;\n      }\n      this.onSetCulled(newCulled);\n      this.didSetCulled(newCulled);\n    }\n  }\n\n  protected willSetCulled(culled: boolean): void {\n    this.willObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewWillSetCulled !== void 0) {\n        viewObserver.viewWillSetCulled(culled, this);\n      }\n    });\n  }\n\n  protected onSetCulled(culled: boolean): void {\n    if (!culled) {\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  protected didSetCulled(culled: boolean): void {\n    this.didObserve(function (viewObserver: GraphicsViewObserver): void {\n      if (viewObserver.viewDidSetCulled !== void 0) {\n        viewObserver.viewDidSetCulled(culled, this);\n      }\n    });\n  }\n\n  cullViewFrame(viewFrame: BoxR2 = this.viewFrame): void {\n    this.setCulled(!viewFrame.intersects(this.viewBounds));\n  }\n\n  get viewFrame(): BoxR2 {\n    let viewFrame = this._viewFrame;\n    if (viewFrame === void 0) {\n      const parentView = this._parentView;\n      viewFrame = RenderedView.is(parentView) ? parentView.viewFrame : BoxR2.empty();\n    }\n    return viewFrame;\n  }\n\n  setViewFrame(viewFrame: BoxR2 | null): void {\n    if (viewFrame !== null) {\n      this._viewFrame = viewFrame;\n    } else if (this._viewFrame !== void 0) {\n      this._viewFrame = void 0;\n    }\n  }\n\n  get viewBounds(): BoxR2 {\n    return this.viewFrame;\n  }\n\n  deriveViewBounds(): BoxR2 {\n    let viewBounds: BoxR2 | undefined;\n    const childViews = this._childViews;\n    for (let i = 0, n = childViews.length; i < n; i += 1) {\n      const childView = childViews[i];\n      if (RenderedView.is(childView) && !childView.isHidden()) {\n        const childViewBounds = childView.viewBounds;\n        if (viewBounds === void 0) {\n          viewBounds = childViewBounds;\n        } else {\n          viewBounds = viewBounds.union(childViewBounds);\n        }\n      }\n    }\n    if (viewBounds === void 0) {\n      viewBounds = this.viewFrame;\n    }\n    return viewBounds;\n  }\n\n  get hitBounds(): BoxR2 {\n    return this.viewFrame;\n  }\n\n  deriveHitBounds(): BoxR2 {\n    let hitBounds: BoxR2 | undefined;\n    const childViews = this._childViews;\n    for (let i = 0, n = childViews.length; i < n; i += 1) {\n      const childView = childViews[i];\n      if (RenderedView.is(childView) && !childView.isHidden()) {\n        const childHitBounds = childView.hitBounds;\n        if (hitBounds === void 0) {\n          hitBounds = childHitBounds;\n        } else {\n          hitBounds = hitBounds.union(childHitBounds);\n        }\n      }\n    }\n    if (hitBounds === void 0) {\n      hitBounds = this.viewBounds;\n    }\n    return hitBounds;\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    let hit: RenderedView | null = null;\n    const childViews = this._childViews;\n    for (let i = childViews.length - 1; i >= 0; i -= 1) {\n      const childView = childViews[i];\n      if (RenderedView.is(childView) && !childView.isHidden() && !childView.isCulled()) {\n        const hitBounds = childView.hitBounds;\n        if (hitBounds.contains(x, y)) {\n          hit = childView.hitTest(x, y, viewContext);\n          if (hit !== null) {\n            break;\n          }\n        }\n      }\n    }\n    return hit;\n  }\n\n  get parentTransform(): Transform {\n    return Transform.identity();\n  }\n\n  get clientBounds(): BoxR2 {\n    const inverseClientTransform = this.clientTransform.inverse();\n    return this.viewBounds.transform(inverseClientTransform);\n  }\n\n  get popoverFrame(): BoxR2 {\n    const inversePageTransform = this.pageTransform.inverse();\n    return this.viewBounds.transform(inversePageTransform);\n  }\n\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this {\n    let eventHandlers = this._eventHandlers;\n    if (eventHandlers === void 0) {\n      eventHandlers = {};\n      this._eventHandlers = eventHandlers;\n    }\n    let handlers = eventHandlers[type];\n    const capture = typeof options === \"boolean\" ? options : typeof options === \"object\" && options !== null && options.capture || false;\n    const passive = options && typeof options === \"object\" && options.passive || false;\n    const once = options && typeof options === \"object\" && options.once || false;\n    let handler: ViewEventHandler | undefined;\n    if (handlers === void 0) {\n      handler = {listener, capture, passive, once};\n      handlers = [handler];\n      eventHandlers[type] = handlers;\n    } else {\n      const n = handlers.length;\n      let i = 0;\n      while (i < n) {\n        handler = handlers[i];\n        if (handler.listener === listener && handler.capture === capture) {\n          break;\n        }\n        i += 1;\n      }\n      if (i < n) {\n        handler!.passive = passive;\n        handler!.once = once;\n      } else {\n        handler = {listener, capture, passive, once};\n        handlers.push(handler);\n      }\n    }\n    return this;\n  }\n\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this {\n    const eventHandlers = this._eventHandlers;\n    if (eventHandlers !== void 0) {\n      const handlers = eventHandlers[type];\n      if (handlers !== void 0) {\n        const capture = typeof options === \"boolean\" ? options : typeof options === \"object\" && options !== null && options.capture || false;\n        const n = handlers.length;\n        let i = 0;\n        while (i < n) {\n          const handler = handlers[i];\n          if (handler.listener === listener && handler.capture === capture) {\n            handlers.splice(i, 1);\n            if (handlers.length === 0) {\n              delete eventHandlers[type];\n            }\n            break;\n          }\n          i += 1;\n        }\n      }\n    }\n    return this;\n  }\n\n  /** @hidden */\n  handleEvent(event: ViewEvent): void {\n    const type = event.type;\n    const eventHandlers = this._eventHandlers;\n    if (eventHandlers !== void 0) {\n      const handlers = eventHandlers[type];\n      if (handlers !== void 0) {\n        let i = 0;\n        while (i < handlers.length) {\n          const handler = handlers[i];\n          if (!handler.capture) {\n            const listener = handler.listener;\n            if (typeof listener === \"function\") {\n              listener(event);\n            } else if (typeof listener === \"object\" && listener !== null) {\n              listener.handleEvent(event);\n            }\n            if (handler.once) {\n              handlers.splice(i, 1);\n              continue;\n            }\n          }\n          i += 1;\n        }\n        if (handlers.length === 0) {\n          delete eventHandlers[type];\n        }\n      }\n    }\n    if (type === \"mouseover\") {\n      this.onMouseOver(event as MouseEvent);\n    } else if (type === \"mouseout\") {\n      this.onMouseOut(event as MouseEvent);\n    }\n  }\n\n  /** @hidden */\n  bubbleEvent(event: ViewEvent): View | null {\n    this.handleEvent(event);\n    if (event.bubbles && !event.cancelBubble) {\n      const parentView = this._parentView;\n      if (RenderedView.is(parentView)) {\n        return parentView.bubbleEvent(event);\n      } else {\n        return parentView;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  dispatchEvent(event: ViewEvent): boolean {\n    event.targetView = this;\n    const next = this.bubbleEvent(event);\n    if (next !== null) {\n      return next.dispatchEvent(event);\n    } else {\n      return !event.cancelBubble;\n    }\n  }\n\n  isHovering(): boolean {\n    return (this._viewFlags & View.HoveringFlag) !== 0;\n  }\n\n  /** @hidden */\n  protected onMouseOver(event: ViewMouseEvent): void {\n    if ((this._viewFlags & View.HoveringFlag) === 0) {\n      this._viewFlags |= View.HoveringFlag;\n      const eventHandlers = this._eventHandlers;\n      if (eventHandlers !== void 0 && eventHandlers.mouseenter !== void 0) {\n        const enterEvent = new MouseEvent(\"mouseenter\", {\n          clientX: event.clientX,\n          clientY: event.clientY,\n          screenX: event.screenX,\n          screenY: event.screenY,\n          bubbles: false,\n        }) as ViewMouseEvent;\n        enterEvent.targetView = this;\n        enterEvent.relatedTargetView = event.relatedTargetView;\n        this.handleEvent(enterEvent);\n      }\n    }\n  }\n\n  /** @hidden */\n  protected onMouseOut(event: ViewMouseEvent): void {\n    if ((this._viewFlags & View.HoveringFlag) !== 0) {\n      this._viewFlags &= ~View.HoveringFlag;\n      const eventHandlers = this._eventHandlers;\n      if (eventHandlers !== void 0 && eventHandlers.mouseleave !== void 0) {\n        const leaveEvent = new MouseEvent(\"mouseleave\", {\n          clientX: event.clientX,\n          clientY: event.clientY,\n          screenX: event.screenX,\n          screenY: event.screenY,\n          bubbles: false,\n        }) as ViewMouseEvent;\n        leaveEvent.targetView = this;\n        leaveEvent.relatedTargetView = event.relatedTargetView;\n        this.handleEvent(leaveEvent);\n      }\n    }\n  }\n}\nView.Graphics = GraphicsView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {ViewController} from \"../ViewController\";\nimport {RenderedViewContext} from \"../rendered/RenderedViewContext\";\nimport {RenderedViewController} from \"../rendered/RenderedViewController\";\nimport {GraphicsView} from \"./GraphicsView\";\nimport {GraphicsViewObserver} from \"./GraphicsViewObserver\";\nimport {CanvasView} from \"../canvas/CanvasView\";\n\nexport class GraphicsViewController<V extends GraphicsView = GraphicsView> extends ViewController<V> implements RenderedViewController<V>, GraphicsViewObserver<V> {\n  get canvasView(): CanvasView | null {\n    const view = this._view;\n    return view !== null ? view.canvasView : null;\n  }\n\n  viewWillAnimate(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidAnimate(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillRender(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidRender(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  isHidden(): boolean {\n    const view = this._view;\n    return view !== null && view.isHidden();\n  }\n\n  viewWillSetHidden(hidden: boolean, view: V): void {\n    // hook\n  }\n\n  viewDidSetHidden(hidden: boolean, view: V): void {\n    // hook\n  }\n\n  isCulled(): boolean {\n    const view = this._view;\n    return view !== null && view.isCulled();\n  }\n\n  viewWillSetCulled(culled: boolean, view: V): void {\n    // hook\n  }\n\n  viewDidSetCulled(culled: boolean, view: V): void {\n    // hook\n  }\n\n  get viewFrame(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.viewFrame : BoxR2.empty();\n  }\n\n  get viewBounds(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.viewBounds : BoxR2.empty();\n  }\n\n  get hitBounds(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.hitBounds : BoxR2.empty();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Renderer, CanvasCompositeOperation} from \"@swim/render\";\nimport {ViewFlags, View} from \"../View\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {RenderedViewInit, RenderedView} from \"../rendered/RenderedView\";\nimport {CompositedViewContext} from \"./CompositedViewContext\";\nimport {CompositedViewController} from \"./CompositedViewController\";\n\nexport interface CompositedViewInit extends RenderedViewInit {\n  opacity?: number;\n}\n\nexport interface CompositedView extends RenderedView {\n  readonly viewController: CompositedViewController | null;\n\n  readonly compositor: Renderer | null;\n\n  readonly opacity: MemberAnimator<this, number>;\n\n  readonly compositeOperation: MemberAnimator<this, CanvasCompositeOperation>;\n\n  needsProcess(processFlags: ViewFlags, viewContext: CompositedViewContext): ViewFlags;\n\n  needsDisplay(displayFlags: ViewFlags, viewContext: CompositedViewContext): ViewFlags;\n}\n\n/** @hidden */\nexport const CompositedView = {\n  is(object: unknown): object is CompositedView {\n    if (typeof object === \"object\" && object !== null) {\n      const view = object as CompositedView;\n      return view instanceof View.Raster\n          || RenderedView.is(view) && \"compositor\" in view;\n    }\n    return false;\n  },\n};\nView.Composited = CompositedView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {Transform} from \"@swim/transform\";\nimport {\n  AnyRenderer,\n  RendererType,\n  Renderer,\n  CanvasCompositeOperation,\n  CanvasRenderer,\n  WebGLRenderer,\n} from \"@swim/render\";\nimport {ViewFlags, View} from \"../View\";\nimport {MemberAnimator} from \"../member/MemberAnimator\";\nimport {RenderedViewContext} from \"../rendered/RenderedViewContext\";\nimport {RenderedView} from \"../rendered/RenderedView\";\nimport {GraphicsView} from \"../graphics/GraphicsView\";\nimport {CompositedViewContext} from \"../composited/CompositedViewContext\";\nimport {CompositedView} from \"../composited/CompositedView\";\nimport {RasterViewObserver} from \"./RasterViewObserver\";\nimport {RasterViewController} from \"./RasterViewController\";\n\nexport class RasterView extends GraphicsView implements CompositedView {\n  /** @hidden */\n  _canvas: HTMLCanvasElement;\n  /** @hidden */\n  _renderer: Renderer | null | undefined;\n  /** @hidden */\n  _rasterFrame: BoxR2;\n\n  constructor() {\n    super();\n    this._canvas = this.createCanvas();\n    this._renderer = void 0;\n    this._rasterFrame = BoxR2.empty();\n  }\n\n  get viewController(): RasterViewController | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Number, {value: 1})\n  opacity: MemberAnimator<this, number>;\n\n  @MemberAnimator(String, {value: \"source-over\"})\n  compositeOperation: MemberAnimator<this, CanvasCompositeOperation>;\n\n  get pixelRatio(): number {\n    return window.devicePixelRatio || 1;\n  }\n\n  get canvas(): HTMLCanvasElement {\n    return this._canvas;\n  }\n\n  get compositor(): Renderer | null {\n    const parentView = this.parentView;\n    return RenderedView.is(parentView) ? parentView.renderer : null;\n  }\n\n  get renderer(): Renderer | null {\n    let renderer = this._renderer;\n    if (renderer === void 0) {\n      renderer = this.createRenderer();\n      this._renderer = renderer;\n    }\n    return renderer;\n  }\n\n  setRenderer(renderer: AnyRenderer | null): void {\n    if (typeof renderer === \"string\") {\n      renderer = this.createRenderer(renderer as RendererType);\n    }\n    this._renderer = renderer;\n    this.resetRenderer();\n  }\n\n  protected createRenderer(rendererType: RendererType = \"canvas\"): Renderer | null {\n    if (rendererType === \"canvas\") {\n      const context = this._canvas.getContext(\"2d\");\n      if (context !== null) {\n        return new CanvasRenderer(context, this.pixelRatio);\n      } else {\n        throw new Error(\"Failed to create canvas rendering context\");\n      }\n    } else if (rendererType === \"webgl\") {\n      const context = this._canvas.getContext(\"webgl\");\n      if (context !== null) {\n        return new WebGLRenderer(context, this.pixelRatio);\n      } else {\n        throw new Error(\"Failed to create webgl rendering context\");\n      }\n    } else {\n      throw new Error(\"Failed to create \" + rendererType + \" renderer\");\n    }\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & View.UpdateMask) !== 0) {\n      if ((updateFlags & View.ProcessMask) !== 0) {\n        additionalFlags |= View.NeedsProcess;\n      }\n      if ((updateFlags & View.DisplayMask) !== 0) {\n        additionalFlags |= View.NeedsDisplay;\n      }\n      additionalFlags |= View.NeedsRender | View.NeedsComposite;\n    }\n    return additionalFlags;\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.rasterViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.rasterViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doDisplay(displayFlags: ViewFlags, viewContext: CompositedViewContext): void {\n    let cascadeFlags = displayFlags;\n    this.willDisplay(viewContext);\n    this._viewFlags |= View.DisplayingFlag;\n    try {\n      if (((this._viewFlags | displayFlags) & View.NeedsLayout) !== 0) {\n        cascadeFlags |= View.NeedsLayout;\n        this._viewFlags &= ~View.NeedsLayout;\n        this.willLayout(viewContext);\n      }\n      if (((this._viewFlags | displayFlags) & View.NeedsRender) !== 0) {\n        cascadeFlags |= View.NeedsRender;\n        this._viewFlags &= ~View.NeedsRender;\n        this.willRender(viewContext);\n      }\n      if (((this._viewFlags | displayFlags) & View.NeedsComposite) !== 0) {\n        cascadeFlags |= View.NeedsComposite;\n        this._viewFlags &= ~View.NeedsComposite;\n        this.willComposite(viewContext);\n      }\n\n      this.onDisplay(viewContext);\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.onLayout(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.onRender(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsComposite) !== 0) {\n        this.onComposite(viewContext);\n      }\n\n      this.doDisplayChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsComposite) !== 0) {\n        this.didComposite(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.didRender(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.didLayout(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.DisplayingFlag;\n      this.didDisplay(viewContext);\n    }\n  }\n\n  protected onLayout(viewContext: CompositedViewContext): void {\n    super.onLayout(viewContext);\n    this.resizeCanvas(this._canvas);\n    this.resetRenderer();\n  }\n\n  protected onRender(viewContext: CompositedViewContext): void {\n    super.onRender(viewContext);\n    this.clearCanvas();\n  }\n\n  protected willComposite(viewContext: CompositedViewContext): void {\n    this.willObserve(function (viewObserver: RasterViewObserver): void {\n      if (viewObserver.viewWillRender !== void 0) {\n        viewObserver.viewWillRender(viewContext, this);\n      }\n    });\n  }\n\n  protected onComposite(viewContext: CompositedViewContext): void {\n    this.compositeImage(viewContext);\n  }\n\n  protected didComposite(viewContext: CompositedViewContext): void {\n    this.didObserve(function (viewObserver: RasterViewObserver): void {\n      if (viewObserver.viewDidRender !== void 0) {\n        viewObserver.viewDidRender(viewContext, this);\n      }\n    });\n  }\n\n  childViewContext(childView: View, viewContext: CompositedViewContext): CompositedViewContext {\n    return viewContext;\n  }\n\n  rasterViewContext(viewContext: RenderedViewContext): CompositedViewContext {\n    const rasterViewContext = Object.create(viewContext);\n    rasterViewContext.compositor = viewContext.renderer;\n    rasterViewContext.renderer = this.renderer;\n    return rasterViewContext;\n  }\n\n  /** @hidden */\n  get compositeFrame(): BoxR2 {\n    let viewFrame = this._viewFrame;\n    if (viewFrame === void 0) {\n      const parentView = this._parentView;\n      viewFrame = RenderedView.is(parentView) ? parentView.viewFrame : BoxR2.empty();\n    }\n    return viewFrame;\n  }\n\n  get viewFrame(): BoxR2 {\n    return this._rasterFrame;\n  }\n\n  setViewFrame(viewFrame: BoxR2 | null): void {\n    if (viewFrame !== null) {\n      this._viewFrame = viewFrame;\n    } else if (this._viewFrame !== void 0) {\n      this._viewFrame = void 0;\n    }\n  }\n\n  hitTest(x: number, y: number, viewContext: CompositedViewContext): RenderedView | null {\n    const rasterViewContext = this.rasterViewContext(viewContext);\n    const compositeFrame = this.compositeFrame;\n    x -= Math.floor(compositeFrame.xMin);\n    y -= Math.floor(compositeFrame.yMin);\n\n    let hit: RenderedView | null = null;\n    const childViews = this._childViews;\n    for (let i = childViews.length - 1; i >= 0; i -= 1) {\n      const childView = childViews[i];\n      if (RenderedView.is(childView) && !childView.isHidden() && !childView.isCulled()) {\n        const hitBounds = childView.hitBounds;\n        if (hitBounds.contains(x, y)) {\n          hit = childView.hitTest(x, y, rasterViewContext);\n          if (hit !== null) {\n            break;\n          }\n        }\n      }\n    }\n    return hit;\n  }\n\n  get parentTransform(): Transform {\n    const compositeFrame = this.compositeFrame;\n    const dx = Math.floor(compositeFrame.xMin);\n    const dy = Math.floor(compositeFrame.yMin);\n    if (dx !== 0 || dy !== 0) {\n      return Transform.translate(-dx, -dy);\n    }\n    return Transform.identity();\n  }\n\n  protected createCanvas(): HTMLCanvasElement {\n    return document.createElement(\"canvas\");\n  }\n\n  protected resizeCanvas(node: HTMLCanvasElement): void {\n    const compositeFrame = this.compositeFrame;\n    const xMin = compositeFrame.xMin - Math.floor(compositeFrame.xMin);\n    const yMin = compositeFrame.yMin - Math.floor(compositeFrame.yMin);\n    const xMax = Math.ceil(xMin + compositeFrame.width);\n    const yMax = Math.ceil(yMin + compositeFrame.height);\n    const rasterFrame = new BoxR2(xMin, yMin, xMax, yMax);\n    if (!this._rasterFrame.equals(rasterFrame)) {\n      const pixelRatio = this.pixelRatio;\n      node.width = xMax * pixelRatio;\n      node.height = yMax * pixelRatio;\n      node.style.width = xMax + \"px\";\n      node.style.height = yMax + \"px\";\n      this._rasterFrame = rasterFrame;\n    }\n  }\n\n  clearCanvas(): void {\n    const renderer = this.renderer;\n    if (renderer instanceof CanvasRenderer) {\n      const rasterFrame = this._rasterFrame;\n      renderer.context.clearRect(0, 0, rasterFrame.xMax, rasterFrame.yMax);\n    } else if (renderer instanceof WebGLRenderer) {\n      const context = renderer.context;\n      context.clear(context.COLOR_BUFFER_BIT | context.DEPTH_BUFFER_BIT);\n    }\n  }\n\n  resetRenderer(): void {\n    const renderer = this.renderer;\n    if (renderer instanceof CanvasRenderer) {\n      const pixelRatio = this.pixelRatio;\n      renderer.context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    } else if (renderer instanceof WebGLRenderer) {\n      const rasterFrame = this._rasterFrame;\n      renderer.context.viewport(0, 0, rasterFrame.xMax, rasterFrame.yMax);\n    }\n  }\n\n  protected compositeImage(viewContext: CompositedViewContext): void {\n    const compositor = viewContext.compositor;\n    const renderer = viewContext.renderer;\n    if (compositor instanceof CanvasRenderer && renderer instanceof CanvasRenderer) {\n      const imageData = renderer.context.getImageData(0, 0, this._canvas.width, this._canvas.height);\n      const compositeFrame = this.compositeFrame;\n      const pixelRatio = compositor.pixelRatio;\n      const context = compositor.context;\n      context.save();\n      context.globalAlpha = this.opacity.value!;\n      context.globalCompositeOperation = this.compositeOperation.value!;\n      const x = Math.floor(compositeFrame.xMin) * pixelRatio;\n      const y = Math.floor(compositeFrame.yMin) * pixelRatio;\n      context.putImageData(imageData, x, y);\n      context.restore();\n    }\n  }\n}\nView.Raster = RasterView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {GraphicsViewController} from \"../graphics/GraphicsViewController\";\nimport {CompositedViewContext} from \"../composited/CompositedViewContext\";\nimport {CompositedViewController} from \"../composited/CompositedViewController\";\nimport {RasterView} from \"./RasterView\";\nimport {RasterViewObserver} from \"./RasterViewObserver\";\n\nexport class RasterViewController<V extends RasterView = RasterView> extends GraphicsViewController<V> implements CompositedViewController<V>, RasterViewObserver<V> {\n  viewWillComposite(viewContext: CompositedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidComposite(viewContext: CompositedViewContext, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ViewContext} from \"../ViewContext\";\nimport {ViewController} from \"../ViewController\";\nimport {ViewNodeType, NodeView} from \"./NodeView\";\nimport {NodeViewObserver} from \"./NodeViewObserver\";\n\nexport class NodeViewController<V extends NodeView = NodeView> extends ViewController<V> implements NodeViewObserver<V> {\n  get node(): ViewNodeType<V> | null {\n    const view = this._view;\n    return view !== null ? view.node as ViewNodeType<V> : null;\n  }\n\n  appendChildNode(childNode: Node, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.appendChildNode(childNode, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  prependChildNode(childNode: Node, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.prependChildNode(childNode, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  insertChildNode(childNode: Node, targetNode: Node | null, key?: string): void {\n    const view = this._view;\n    if (view !== null) {\n      view.insertChildNode(childNode, targetNode, key);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  viewWillInsertChildNode(childNode: Node, targetNode: Node | null, view: V): void {\n    // hook\n  }\n\n  viewDidInsertChildNode(childNode: Node, targetNode: Node | null, view: V): void {\n    // hook\n  }\n\n  removeChildNode(childNode: Node): void {\n    const view = this._view;\n    if (view !== null) {\n      view.removeChildNode(childNode);\n    } else {\n      throw new Error(\"no view\");\n    }\n  }\n\n  viewWillRemoveChildNode(childNode: Node, view: V): void {\n    // hook\n  }\n\n  viewDidRemoveChildNode(childNode: Node, view: V): void {\n    // hook\n  }\n\n  viewWillAnimate(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidAnimate(viewContext: ViewContext, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Transition} from \"@swim/transition\";\nimport {TweenFrameAnimator} from \"@swim/animate\";\n\nexport class TextAnimator<T = unknown> extends TweenFrameAnimator<T> {\n  readonly target: Node;\n  formatter: ((value: T) => string) | {format(value: T): string} | null;\n\n  constructor(target: Node, value?: T, transition: Transition<T> | null = null,\n              formatter: ((value: T) => string) | {format(value: T): string} | null = null) {\n    super(value, transition);\n    this.target = target;\n    this.formatter = formatter;\n  }\n\n  get textValue(): string | null {\n    const target = this.target;\n    if (target instanceof Text) {\n      return target.nodeValue;\n    } else if (target instanceof HTMLElement) {\n      return target.innerText;\n    } else {\n      return target.textContent;\n    }\n  }\n\n  format(value: T): string {\n    let formatter = this.formatter;\n    if (typeof formatter === \"object\" && formatter !== null) {\n      formatter = formatter.format;\n    }\n    if (typeof formatter === \"function\") {\n      return formatter(value);\n    } else {\n      return \"\" + value;\n    }\n  }\n\n  update(value: T): void {\n    const target = this.target;\n    const text = this.format(value);\n    if (target instanceof Text) {\n      target.nodeValue = text;\n    } else if (target instanceof HTMLElement) {\n      target.innerText = text;\n    } else {\n      target.textContent = text;\n    }\n  }\n\n  delete(): void {\n    const target = this.target;\n    if (target instanceof Text) {\n      target.nodeValue = null;\n    } else if (target instanceof HTMLElement) {\n      target.innerText = \"\";\n    } else {\n      target.textContent = null;\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View} from \"../View\";\nimport {NodeView} from \"../node/NodeView\";\nimport {TextViewController} from \"./TextViewController\";\n\nexport interface ViewText extends Text {\n  view?: TextView;\n}\n\nexport class TextView extends NodeView {\n  constructor(node: Text) {\n    super(node);\n  }\n\n  get node(): ViewText {\n    return this._node;\n  }\n\n  get viewController(): TextViewController | null {\n    return this._viewController;\n  }\n}\nView.Text = TextView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeViewController} from \"../node/NodeViewController\";\nimport {TextView} from \"./TextView\";\nimport {TextViewObserver} from \"./TextViewObserver\";\n\nexport class TextViewController<V extends TextView = TextView> extends NodeViewController<V> implements TextViewObserver<V> {\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Objects} from \"@swim/util\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {TweenFrameAnimator} from \"@swim/animate\";\nimport {StringAttributeAnimator} from \"./StringAttributeAnimator\";\nimport {BooleanAttributeAnimator} from \"./BooleanAttributeAnimator\";\nimport {NumberAttributeAnimator} from \"./NumberAttributeAnimator\";\nimport {LengthAttributeAnimator} from \"./LengthAttributeAnimator\";\nimport {ColorAttributeAnimator} from \"./ColorAttributeAnimator\";\nimport {TransformAttributeAnimator} from \"./TransformAttributeAnimator\";\nimport {NumberOrStringAttributeAnimator} from \"./NumberOrStringAttributeAnimator\";\nimport {LengthOrStringAttributeAnimator} from \"./LengthOrStringAttributeAnimator\";\nimport {ColorOrStringAttributeAnimator} from \"./ColorOrStringAttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\nexport type AttributeAnimatorType = typeof String\n                                  | typeof Boolean\n                                  | typeof Number\n                                  | typeof Length\n                                  | typeof Color\n                                  | typeof Transform\n                                  | [typeof Number, typeof String]\n                                  | [typeof Length, typeof String]\n                                  | [typeof Color, typeof String];\n\nexport interface AttributeAnimatorConstructor<T, U = T> {\n  new<V extends ElementView>(view: V, animatorName: string,\n                             attributeName: string): AttributeAnimator<V, T, U>;\n}\n\nexport interface AttributeAnimatorClass {\n  new<V extends ElementView, T, U = T>(view: V, animatorName: string,\n                                       attributeName: string): AttributeAnimator<V, T, U>;\n\n  (attributeName: string, animatorType: AttributeAnimatorType): PropertyDecorator;\n\n  // Forward type declarations\n  /** @hidden */\n  String: typeof StringAttributeAnimator; // defined by StringAttributeAnimator\n  /** @hidden */\n  Boolean: typeof BooleanAttributeAnimator; // defined by BooleanAttributeAnimator\n  /** @hidden */\n  Number: typeof NumberAttributeAnimator; // defined by NumberAttributeAnimator\n  /** @hidden */\n  Length: typeof LengthAttributeAnimator; // defined by LengthAttributeAnimator\n  /** @hidden */\n  Color: typeof ColorAttributeAnimator; // defined by ColorAttributeAnimator\n  /** @hidden */\n  Transform: typeof TransformAttributeAnimator; // defined by TransformAttributeAnimator\n  /** @hidden */\n  NumberOrString: typeof NumberOrStringAttributeAnimator; // defined by NumberOrStringAttributeAnimator\n  /** @hidden */\n  LengthOrString: typeof LengthOrStringAttributeAnimator; // defined by LengthOrStringAttributeAnimator\n  /** @hidden */\n  ColorOrString: typeof ColorOrStringAttributeAnimator; // defined by ColorOrStringAttributeAnimator\n}\n\nexport interface AttributeAnimator<V extends ElementView, T, U = T> extends TweenFrameAnimator<T> {\n  (): T | undefined;\n  (value: T | U | undefined, tween?: Tween<T>): V;\n\n  /** @hidden */\n  _view: V;\n  /** @hidden */\n  _attributeName: string;\n  /** @hidden */\n  _auto: boolean;\n\n  readonly view: V;\n\n  readonly name: string;\n\n  readonly node: Element;\n\n  readonly attributeName: string;\n\n  readonly attributeValue: T | undefined;\n\n  isAuto(): boolean;\n\n  setAuto(auto: boolean): void;\n\n  setState(state: T | U | undefined, tween?: Tween<T>): void;\n\n  setAutoState(state: T | U | undefined, tween?: Tween<T>): void;\n\n  update(newValue: T | undefined, oldValue: T | undefined): void;\n\n  willUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  onUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  didUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  delete(): void;\n\n  parse(value: string): T;\n\n  fromAny(value: T | U): T;\n}\n\nexport const AttributeAnimator: AttributeAnimatorClass = (function (_super: typeof TweenFrameAnimator): AttributeAnimatorClass {\n  function AttributeAnimatorDecoratorFactory(attributeName: string, animatorType: AttributeAnimatorType): PropertyDecorator {\n    if (animatorType === String) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.String, attributeName);\n    } else if (animatorType === Boolean) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.Boolean, attributeName);\n    } else if (animatorType === Number) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.Number, attributeName);\n    } else if (animatorType === Length) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.Length, attributeName);\n    } else if (animatorType === Color) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.Color, attributeName);\n    } else if (animatorType === Transform) {\n      return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.Transform, attributeName);\n    } else if (Array.isArray(animatorType) && animatorType.length === 2) {\n      const [type0, type1] = animatorType;\n      if (type0 === Number && type1 === String) {\n        return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.NumberOrString, attributeName);\n      } else if (type0 === Length && type1 === String) {\n        return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.LengthOrString, attributeName);\n      } else if (type0 === Color && type1 === String) {\n        return ElementView.decorateAttributeAnimator.bind(void 0, AttributeAnimator.ColorOrString, attributeName);\n      }\n    }\n    throw new TypeError(\"\" + animatorType);\n  }\n\n  function AttributeAnimatorConstructor<V extends ElementView, T, U = T>(\n      this: AttributeAnimator<V, T, U>, view: V, animatorName: string,\n      attributeName: string): AttributeAnimator<V, T, U> {\n    Object.defineProperty(this, \"name\", {\n      value: animatorName,\n      enumerable: true,\n      configurable: true,\n    });\n    this._view = view;\n    this._attributeName = attributeName;\n    this._auto = true;\n    const _this = _super.call(this, void 0, null) || this;\n    return _this;\n  }\n\n  const AttributeAnimator: AttributeAnimatorClass = function <V extends ElementView, T, U>(\n      this: AttributeAnimator<V, T, U> | AttributeAnimatorClass,\n      view: V | string,\n      animatorName: string | AttributeAnimatorType,\n      attributeName: string): AttributeAnimator<V, T, U> | PropertyDecorator {\n    if (this instanceof AttributeAnimator) { // constructor\n      return AttributeAnimatorConstructor.call(this, view, animatorName, attributeName);\n    } else { // decorator factory\n      attributeName = view as string;\n      const animatorType = animatorName as AttributeAnimatorType;\n      return AttributeAnimatorDecoratorFactory(attributeName, animatorType);\n    }\n  } as AttributeAnimatorClass;\n  __extends(AttributeAnimator, _super);\n\n  Object.defineProperty(AttributeAnimator.prototype, \"view\", {\n    get: function (this: AttributeAnimator<ElementView, unknown, unknown>): ElementView {\n      return this._view;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(AttributeAnimator.prototype, \"node\", {\n    get: function (this: AttributeAnimator<ElementView, unknown, unknown>): Element {\n      return this._view._node;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(AttributeAnimator.prototype, \"attributeName\", {\n    get: function (this: AttributeAnimator<ElementView, unknown, unknown>): string {\n      return this._attributeName;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(AttributeAnimator.prototype, \"attributeValue\", {\n    get: function <T, U>(this: AttributeAnimator<ElementView, T, unknown>): T | undefined {\n      const value = this._view.getAttribute(this._attributeName);\n      if (value !== null) {\n        try {\n          return this.parse(value);\n        } catch (e) {\n          // swallow parse errors\n        }\n      }\n      return void 0;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(AttributeAnimator.prototype, \"value\", {\n    get: function <T, U>(this: AttributeAnimator<ElementView, T, U>): T | undefined {\n      let value = this._value;\n      if (value === void 0) {\n        value = this.attributeValue;\n        if (value !== void 0) {\n          this.setAuto(false);\n        }\n      }\n      return value;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  AttributeAnimator.prototype.isAuto = function (this: AttributeAnimator<ElementView, unknown, unknown>): boolean {\n    return this._auto;\n  };\n\n  AttributeAnimator.prototype.setAuto = function (this: AttributeAnimator<ElementView, unknown, unknown>,\n                                                  auto: boolean): void {\n    if (this._auto !== auto) {\n      this._auto = auto;\n      this._view.animatorDidSetAuto(this, auto);\n    }\n  };\n\n  AttributeAnimator.prototype.setState = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                         state: T | U | undefined, tween?: Tween<T>): void {\n    if (state !== void 0) {\n      state = this.fromAny(state);\n    }\n    this._auto = false;\n    _super.prototype.setState.call(this, state, tween);\n  };\n\n  AttributeAnimator.prototype.setAutoState = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                             state: T | U | undefined, tween?: Tween<T>): void {\n    if (this._auto === true) {\n      if (state !== void 0) {\n        state = this.fromAny(state);\n      }\n      _super.prototype.setState.call(this, state, tween);\n    }\n  };\n\n  AttributeAnimator.prototype.update = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                       newValue: T | undefined,\n                                                       oldValue: T | undefined): void {\n    if (!Objects.equal(oldValue, newValue)) {\n      this.willUpdate(newValue, oldValue);\n      this.onUpdate(newValue, oldValue);\n      this.didUpdate(newValue, oldValue);\n    }\n  };\n\n  AttributeAnimator.prototype.willUpdate = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                           newValue: T | undefined,\n                                                           oldValue: T | undefined): void {\n    // hook\n  };\n\n  AttributeAnimator.prototype.onUpdate = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                         newValue: T | undefined,\n                                                         oldValue: T | undefined): void {\n    this._view.setAttribute(this._attributeName, newValue);\n  };\n\n  AttributeAnimator.prototype.didUpdate = function <T, U>(this: AttributeAnimator<ElementView, T, U>,\n                                                          newValue: T | undefined,\n                                                          oldValue: T | undefined): void {\n    // hook\n  };\n\n  AttributeAnimator.prototype.delete = function <T, U>(this: AttributeAnimator<ElementView, T, U>): void {\n    this._view.setAttribute(this._attributeName, void 0);\n  };\n\n  AttributeAnimator.prototype.parse = function <T, U>(this: AttributeAnimator<ElementView, T, U>, value: string): T {\n    throw new Error(); // abstract\n  };\n\n  AttributeAnimator.prototype.fromAny = function <T, U>(this: AttributeAnimator<ElementView, T, U>, value: T | U): T {\n    throw new Error(); // abstract\n  };\n\n  return AttributeAnimator;\n}(TweenFrameAnimator));\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface StringAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, string> {\n}\n\n/** @hidden */\nexport const StringAttributeAnimator: AttributeAnimatorConstructor<string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<string> {\n  const StringAttributeAnimator: AttributeAnimatorConstructor<string> = function <V extends ElementView>(\n      this: StringAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): StringAttributeAnimator<V> {\n    let _this: StringAttributeAnimator<V> = function accessor(value?: string, tween?: Tween<string>): string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as StringAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<string>;\n  __extends(StringAttributeAnimator, _super);\n\n  StringAttributeAnimator.prototype.parse = function (this: StringAttributeAnimator<ElementView>, value: string): string {\n    return value;\n  };\n\n  StringAttributeAnimator.prototype.fromAny = function (this: StringAttributeAnimator<ElementView>, value: string): string {\n    return value;\n  };\n\n  return StringAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.String = StringAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface BooleanAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, boolean, boolean | string> {\n}\n\n/** @hidden */\nexport const BooleanAttributeAnimator: AttributeAnimatorConstructor<boolean, boolean | string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<boolean, boolean | string> {\n  const BooleanAttributeAnimator: AttributeAnimatorConstructor<boolean, boolean | string> = function <V extends ElementView>(\n      this: BooleanAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): BooleanAttributeAnimator<V> {\n    let _this: BooleanAttributeAnimator<V> = function accessor(value?: boolean | string, tween?: Tween<boolean>): boolean | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as BooleanAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<boolean, boolean | string>;\n  __extends(BooleanAttributeAnimator, _super);\n\n  BooleanAttributeAnimator.prototype.parse = function (this: BooleanAttributeAnimator<ElementView>, value: string): boolean {\n    return !!value;\n  };\n\n  BooleanAttributeAnimator.prototype.fromAny = function (this: BooleanAttributeAnimator<ElementView>, value: boolean | string): boolean {\n    if (typeof value === \"string\") {\n      return !!value;\n    } else {\n      return value;\n    }\n  };\n\n  return BooleanAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.Boolean = BooleanAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface NumberAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, number, number | string> {\n}\n\n/** @hidden */\nexport const NumberAttributeAnimator: AttributeAnimatorConstructor<number, number | string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<number, number | string> {\n  const NumberAttributeAnimator: AttributeAnimatorConstructor<number, number | string> = function <V extends ElementView>(\n      this: NumberAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): NumberAttributeAnimator<V> {\n    let _this: NumberAttributeAnimator<V> = function accessor(value?: number | string, tween?: Tween<number>): number | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as NumberAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<number, number | string>;\n  __extends(NumberAttributeAnimator, _super);\n\n  NumberAttributeAnimator.prototype.parse = function (this: NumberAttributeAnimator<ElementView>, value: string): number {\n    const number = +value;\n    if (isFinite(number)) {\n      return number;\n    } else {\n      throw new Error(value);\n    }\n  };\n\n  NumberAttributeAnimator.prototype.fromAny = function (this: NumberAttributeAnimator<ElementView>, value: number | string): number {\n    if (typeof value === \"string\") {\n      const number = +value;\n      if (isFinite(number)) {\n        return number;\n      } else {\n        throw new Error(value);\n      }\n    } else {\n      return value;\n    }\n  };\n\n  return NumberAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.Number = NumberAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface LengthAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, Length, AnyLength> {\n}\n\n/** @hidden */\nexport const LengthAttributeAnimator: AttributeAnimatorConstructor<Length, AnyLength> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<Length, AnyLength> {\n  const LengthAttributeAnimator: AttributeAnimatorConstructor<Length, AnyLength> = function <V extends ElementView>(\n      this: LengthAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): LengthAttributeAnimator<V> {\n    let _this: LengthAttributeAnimator<V> = function accessor(value?: AnyLength, tween?: Tween<Length>): Length | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as LengthAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<Length, AnyLength>;\n  __extends(LengthAttributeAnimator, _super);\n\n  LengthAttributeAnimator.prototype.parse = function (this: LengthAttributeAnimator<ElementView>, value: string): Length {\n    return Length.parse(value, this._view._node);\n  };\n\n  LengthAttributeAnimator.prototype.fromAny = function (this: LengthAttributeAnimator<ElementView>, value: AnyLength): Length {\n    return Length.fromAny(value, this._view._node);\n  };\n\n  return LengthAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.Length = LengthAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface ColorAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, Color, AnyColor> {\n}\n\n/** @hidden */\nexport const ColorAttributeAnimator: AttributeAnimatorConstructor<Color, AnyColor> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<Color, AnyColor> {\n  const ColorAttributeAnimator: AttributeAnimatorConstructor<Color, AnyColor> = function <V extends ElementView>(\n      this: ColorAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): ColorAttributeAnimator<V> {\n    let _this: ColorAttributeAnimator<V> = function accessor(value?: AnyColor, tween?: Tween<Color>): Color | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as ColorAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<Color, AnyColor>;\n  __extends(ColorAttributeAnimator, _super);\n\n  ColorAttributeAnimator.prototype.parse = function (this: ColorAttributeAnimator<ElementView>, value: string): Color {\n    return Color.parse(value);\n  };\n\n  ColorAttributeAnimator.prototype.fromAny = function (this: ColorAttributeAnimator<ElementView>, value: AnyColor): Color {\n    return Color.fromAny(value);\n  };\n\n  return ColorAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.Color = ColorAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface TransformAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, Transform, AnyTransform> {\n}\n\n/** @hidden */\nexport const TransformAttributeAnimator: AttributeAnimatorConstructor<Transform, AnyTransform> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<Transform, AnyTransform> {\n  const TransformAttributeAnimator: AttributeAnimatorConstructor<Transform, AnyTransform> = function <V extends ElementView>(\n      this: TransformAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): TransformAttributeAnimator<V> {\n    let _this: TransformAttributeAnimator<V> = function accessor(value?: AnyTransform, tween?: Tween<Transform>): Transform | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as TransformAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<Transform, AnyTransform>;\n  __extends(TransformAttributeAnimator, _super);\n\n  TransformAttributeAnimator.prototype.parse = function (this: TransformAttributeAnimator<ElementView>, value: string): Transform {\n    return Transform.parse(value);\n  };\n\n  TransformAttributeAnimator.prototype.fromAny = function (this: TransformAttributeAnimator<ElementView>, value: AnyTransform): Transform {\n    return Transform.fromAny(value);\n  };\n\n  return TransformAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.Transform = TransformAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface NumberOrStringAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, number | string, number | string> {\n}\n\n/** @hidden */\nexport const NumberOrStringAttributeAnimator: AttributeAnimatorConstructor<number | string, number | string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<number | string, number | string> {\n  const NumberOrStringAttributeAnimator: AttributeAnimatorConstructor<number | string, number | string> = function <V extends ElementView>(\n      this: NumberOrStringAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): NumberOrStringAttributeAnimator<V> {\n    let _this: NumberOrStringAttributeAnimator<V> = function accessor(value?: number | string, tween?: Tween<number | string>): number | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as NumberOrStringAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<number | string, number | string>;\n  __extends(NumberOrStringAttributeAnimator, _super);\n\n  NumberOrStringAttributeAnimator.prototype.parse = function (this: NumberOrStringAttributeAnimator<ElementView>, value: string): number | string {\n    const number = +value;\n    return isFinite(number) ? number : value;\n  };\n\n  NumberOrStringAttributeAnimator.prototype.fromAny = function (this: NumberOrStringAttributeAnimator<ElementView>, value: number | string): number | string {\n    if (typeof value === \"string\") {\n      const number = +value;\n      return isFinite(number) ? number : value;\n    } else {\n      return value;\n    }\n  };\n\n  return NumberOrStringAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.NumberOrString = NumberOrStringAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface LengthOrStringAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, Length | string, AnyLength | string> {\n}\n\n/** @hidden */\nexport const LengthOrStringAttributeAnimator: AttributeAnimatorConstructor<Length | string, AnyLength | string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<Length | string, AnyLength | string> {\n  const LengthOrStringAttributeAnimator: AttributeAnimatorConstructor<Length | string, AnyLength | string> = function <V extends ElementView>(\n      this: LengthOrStringAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): LengthOrStringAttributeAnimator<V> {\n    let _this: LengthOrStringAttributeAnimator<V> = function accessor(value?: AnyLength | string, tween?: Tween<Length | string>): Length | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as LengthOrStringAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<Length | string, AnyLength | string>;\n  __extends(LengthOrStringAttributeAnimator, _super);\n\n  LengthOrStringAttributeAnimator.prototype.parse = function (this: LengthOrStringAttributeAnimator<ElementView>, value: string): Length | string {\n    try {\n      return Length.parse(value, this._view._node);\n    } catch (swallow) {\n      return value;\n    }\n  };\n\n  LengthOrStringAttributeAnimator.prototype.fromAny = function (this: LengthOrStringAttributeAnimator<ElementView>, value: AnyLength | string): Length | string {\n    if (typeof value === \"string\") {\n      try {\n        return Length.parse(value, this._view._node);\n      } catch (swallow) {\n        return value;\n      }\n    } else {\n      return Length.fromAny(value, this._view._node);\n    }\n  };\n\n  return LengthOrStringAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.LengthOrString = LengthOrStringAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {AttributeAnimatorConstructor, AttributeAnimator} from \"./AttributeAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface ColorOrStringAttributeAnimator<V extends ElementView> extends AttributeAnimator<V, Color | string, AnyColor | string> {\n}\n\n/** @hidden */\nexport const ColorOrStringAttributeAnimator: AttributeAnimatorConstructor<Color | string, AnyColor | string> = (function (_super: typeof AttributeAnimator): AttributeAnimatorConstructor<Color | string, AnyColor | string> {\n  const ColorOrStringAttributeAnimator: AttributeAnimatorConstructor<Color | string, AnyColor | string> = function <V extends ElementView>(\n      this: ColorOrStringAttributeAnimator<V>, view: V, animatorName: string, attributeName: string): ColorOrStringAttributeAnimator<V> {\n    let _this: ColorOrStringAttributeAnimator<V> = function accessor(value?: AnyColor | string, tween?: Tween<Color | string>): Color | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween);\n        return _this._view;\n      }\n    } as ColorOrStringAttributeAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, attributeName) || _this;\n    return _this;\n  } as unknown as AttributeAnimatorConstructor<Color | string, AnyColor | string>;\n  __extends(ColorOrStringAttributeAnimator, _super);\n\n  ColorOrStringAttributeAnimator.prototype.parse = function (this: ColorOrStringAttributeAnimator<ElementView>, value: string): Color | string {\n    try {\n      return Color.parse(value);\n    } catch (swallow) {\n      return value;\n    }\n  };\n\n  ColorOrStringAttributeAnimator.prototype.fromAny = function (this: ColorOrStringAttributeAnimator<ElementView>, value: AnyColor | string): Color | string {\n    if (typeof value === \"string\") {\n      try {\n        return Color.parse(value);\n      } catch (swallow) {\n        return value;\n      }\n    } else {\n      return Color.fromAny(value);\n    }\n  };\n\n  return ColorOrStringAttributeAnimator;\n}(AttributeAnimator));\nAttributeAnimator.ColorOrString = ColorOrStringAttributeAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Objects} from \"@swim/util\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {LineHeight, FontFamily} from \"@swim/font\";\nimport {BoxShadow} from \"@swim/shadow\";\nimport {Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {StyledElement} from \"@swim/style\";\nimport {TweenFrameAnimator} from \"@swim/animate\";\nimport {StringStyleAnimator} from \"./StringStyleAnimator\";\nimport {NumberStyleAnimator} from \"./NumberStyleAnimator\";\nimport {LengthStyleAnimator} from \"./LengthStyleAnimator\";\nimport {ColorStyleAnimator} from \"./ColorStyleAnimator\";\nimport {LineHeightStyleAnimator} from \"./LineHeightStyleAnimator\";\nimport {FontFamilyStyleAnimator} from \"./FontFamilyStyleAnimator\";\nimport {TransformStyleAnimator} from \"./TransformStyleAnimator\";\nimport {BoxShadowStyleAnimator} from \"./BoxShadowStyleAnimator\";\nimport {NumberOrStringStyleAnimator} from \"./NumberOrStringStyleAnimator\";\nimport {LengthOrStringStyleAnimator} from \"./LengthOrStringStyleAnimator\";\nimport {ColorOrStringStyleAnimator} from \"./ColorOrStringStyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\nexport type StyleAnimatorType = typeof String\n                              | typeof Number\n                              | typeof Length\n                              | typeof Color\n                              | typeof LineHeight\n                              | typeof FontFamily\n                              | typeof BoxShadow\n                              | typeof Transform\n                              | [typeof Number, typeof String]\n                              | [typeof Length, typeof String]\n                              | [typeof Color, typeof String];\n\nexport interface StyleAnimatorConstructor<T, U = T> {\n  new<V extends ElementView>(view: V, animatorName: string,\n                             propertyNames: string | ReadonlyArray<string>): StyleAnimator<V, T, U>;\n}\n\nexport interface StyleAnimatorClass {\n  new<V extends ElementView, T, U = T>(view: V, animatorName: string,\n                                       propertyNames: string | ReadonlyArray<string>): StyleAnimator<V, T, U>;\n\n  (propertyNames: string | ReadonlyArray<string>, animatorType: StyleAnimatorType): PropertyDecorator;\n\n  // Forward type declarations\n  /** @hidden */\n  String: typeof StringStyleAnimator; // defined by StringStyleAnimator\n  /** @hidden */\n  Number: typeof NumberStyleAnimator; // defined by NumberStyleAnimator\n  /** @hidden */\n  Length: typeof LengthStyleAnimator; // defined by LengthStyleAnimator\n  /** @hidden */\n  Color: typeof ColorStyleAnimator; // defined by ColorStyleAnimator\n  /** @hidden */\n  LineHeight: typeof LineHeightStyleAnimator; // defined by LineHeightStyleAnimator\n  /** @hidden */\n  FontFamily: typeof FontFamilyStyleAnimator; // defined by FontFamilyStyleAnimator\n  /** @hidden */\n  BoxShadow: typeof BoxShadowStyleAnimator; // defined by BoxShadowStyleAnimator\n  /** @hidden */\n  Transform: typeof TransformStyleAnimator; // defined by TransformStyleAnimator\n  /** @hidden */\n  NumberOrString: typeof NumberOrStringStyleAnimator; // defined by NumberOrStringStyleAnimator\n  /** @hidden */\n  LengthOrString: typeof LengthOrStringStyleAnimator; // defined by LengthOrStringStyleAnimator\n  /** @hidden */\n  ColorOrString: typeof ColorOrStringStyleAnimator; // defined by ColorOrStringStyleAnimator\n}\n\nexport interface StyleAnimator<V extends ElementView, T, U = T> extends TweenFrameAnimator<T> {\n  (): T | undefined;\n  (value: T | U | undefined, tween?: Tween<T>, priority?: string): V;\n\n  /** @hidden */\n  _view: V;\n  /** @hidden */\n  _propertyNames: string | ReadonlyArray<string>;\n  /** @hidden */\n  _priority: string | undefined;\n  /** @hidden */\n  _auto: boolean;\n\n  readonly view: V;\n\n  readonly name: string;\n\n  readonly node: StyledElement;\n\n  readonly propertyNames: string | ReadonlyArray<string>;\n\n  readonly propertyValue: T | undefined;\n\n  readonly priority: string | undefined;\n\n  isAuto(): boolean;\n\n  setAuto(auto: boolean): void;\n\n  setState(state: T | U | undefined, tween?: Tween<T>, priority?: string): void;\n\n  setAutoState(state: T | U | undefined, tween?: Tween<T>, priority?: string): void;\n\n  update(newValue: T | undefined, oldValue: T | undefined): void;\n\n  willUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  onUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  didUpdate(newValue: T | undefined, oldValue: T | undefined): void;\n\n  delete(): void;\n\n  parse(value: string): T;\n\n  fromAny(value: T | U): T;\n}\n\nexport const StyleAnimator: StyleAnimatorClass = (function (_super: typeof TweenFrameAnimator): StyleAnimatorClass {\n  function StyleAnimatorDecoratorFactory(propertyNames: string | ReadonlyArray<string>,\n                                         animatorType: StyleAnimatorType): PropertyDecorator {\n    if (animatorType === String) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.String, propertyNames);\n    } else if (animatorType === Number) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.Number, propertyNames);\n    } else if (animatorType === Length) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.Length, propertyNames);\n    } else if (animatorType === Color) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.Color, propertyNames);\n    } else if (animatorType === LineHeight) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.LineHeight, propertyNames);\n    } else if (animatorType === FontFamily) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.FontFamily, propertyNames);\n    } else if (animatorType === BoxShadow) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.BoxShadow, propertyNames);\n    } else if (animatorType === Transform) {\n      return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.Transform, propertyNames);\n    } else if (Array.isArray(animatorType) && animatorType.length === 2) {\n      const [type0, type1] = animatorType;\n      if (type0 === Number && type1 === String) {\n        return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.NumberOrString, propertyNames);\n      } else if (type0 === Length && type1 === String) {\n        return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.LengthOrString, propertyNames);\n      } else if (type0 === Color && type1 === String) {\n        return ElementView.decorateStyleAnimator.bind(void 0, StyleAnimator.ColorOrString, propertyNames);\n      }\n    }\n    throw new TypeError(\"\" + animatorType);\n  }\n\n  function StyleAnimatorConstructor<V extends ElementView, T, U = T>(\n      this: StyleAnimator<V, T, U>, view: V, animatorName: string,\n      propertyNames: string | ReadonlyArray<string>): StyleAnimator<V, T, U> {\n    Object.defineProperty(this, \"name\", {\n      value: animatorName,\n      enumerable: true,\n      configurable: true,\n    });\n    this._view = view;\n    this._propertyNames = propertyNames;\n    this._auto = true;\n    const _this = _super.call(this, void 0, null) || this;\n    return _this;\n  }\n\n  const StyleAnimator: StyleAnimatorClass = function <V extends ElementView, T, U>(\n      this: StyleAnimator<V, T, U> | StyleAnimatorClass,\n      view: V | string | ReadonlyArray<string>,\n      animatorName: string | StyleAnimatorType,\n      propertyNames: string | ReadonlyArray<string>): StyleAnimator<V, T, U> | PropertyDecorator {\n    if (this instanceof StyleAnimator) { // constructor\n      return StyleAnimatorConstructor.call(this, view, animatorName, propertyNames);\n    } else { // decorator factory\n      propertyNames = view as string | ReadonlyArray<string>;\n      const animatorType = animatorName as StyleAnimatorType;\n      return StyleAnimatorDecoratorFactory(propertyNames, animatorType);\n    }\n  } as StyleAnimatorClass;\n  __extends(StyleAnimator, _super);\n\n  Object.defineProperty(StyleAnimator.prototype, \"view\", {\n    get: function (this: StyleAnimator<ElementView, unknown, unknown>): ElementView {\n      return this._view;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(StyleAnimator.prototype, \"node\", {\n    get: function (this: StyleAnimator<ElementView, unknown, unknown>): StyledElement {\n      return this._view._node;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(StyleAnimator.prototype, \"propertyNames\", {\n    get: function (this: StyleAnimator<ElementView, unknown, unknown>): string | ReadonlyArray<string> {\n      return this._propertyNames;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(StyleAnimator.prototype, \"propertyValue\", {\n    get: function <T, U>(this: StyleAnimator<ElementView, T, U>): T | undefined {\n      const value = this._view.getStyle(this._propertyNames);\n      if (value !== \"\") {\n        try {\n          return this.parse(value);\n        } catch (e) {\n          // swallow parse errors\n        }\n      }\n      return void 0;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(StyleAnimator.prototype, \"priority\", {\n    get: function (this: StyleAnimator<ElementView, unknown, unknown>): string | undefined {\n      return this._priority;\n    },\n    set: function (this: StyleAnimator<ElementView, unknown, unknown>, value: string | undefined): void {\n      this._priority = value;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  Object.defineProperty(StyleAnimator.prototype, \"value\", {\n    get: function <T, U>(this: StyleAnimator<ElementView, T, U>): T | undefined {\n      let value = this._value;\n      if (value === void 0) {\n        value = this.propertyValue;\n        if (value !== void 0) {\n          this.setAuto(false);\n        }\n      }\n      return value;\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  StyleAnimator.prototype.isAuto = function (this: StyleAnimator<ElementView, unknown, unknown>): boolean {\n    return this._auto;\n  };\n\n  StyleAnimator.prototype.setAuto = function (this: StyleAnimator<ElementView, unknown, unknown>,\n                                              auto: boolean): void {\n    if (this._auto !== auto) {\n      this._auto = auto;\n      this._view.animatorDidSetAuto(this, auto);\n    }\n  };\n\n  StyleAnimator.prototype.setState = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                     state: T | U | undefined, tween?: Tween<T>,\n                                                     priority?: string): void {\n    if (state !== void 0) {\n      state = this.fromAny(state);\n    }\n    if (priority !== void 0) {\n      if (priority !== \"\") {\n        this._priority = priority;\n      } else if (this._priority !== void 0) {\n        this._priority = void 0;\n      }\n    }\n    this._auto = false;\n    _super.prototype.setState.call(this, state, tween);\n  };\n\n  StyleAnimator.prototype.setAutoState = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                         state: T | U | undefined, tween?: Tween<T>,\n                                                         priority?: string): void {\n    if (this._auto === true) {\n      if (state !== void 0) {\n        state = this.fromAny(state);\n      }\n      if (priority !== void 0) {\n        if (priority !== \"\") {\n          this._priority = priority;\n        } else if (this._priority !== void 0) {\n          this._priority = void 0;\n        }\n      }\n      _super.prototype.setState.call(this, state, tween);\n    }\n  };\n\n  StyleAnimator.prototype.update = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                   newValue: T | undefined,\n                                                   oldValue: T | undefined): void {\n    if (!Objects.equal(oldValue, newValue)) {\n      this.willUpdate(newValue, oldValue);\n      this.onUpdate(newValue, oldValue);\n      this.didUpdate(newValue, oldValue);\n    }\n  };\n\n  StyleAnimator.prototype.willUpdate = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                       newValue: T | undefined,\n                                                       oldValue: T | undefined): void {\n    // hook\n  };\n\n  StyleAnimator.prototype.onUpdate = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                     newValue: T | undefined,\n                                                     oldValue: T | undefined): void {\n    const propertyNames = this._propertyNames;\n    if (typeof propertyNames === \"string\") {\n      this._view.setStyle(propertyNames, newValue, this._priority);\n    } else {\n      for (let i = 0, n = propertyNames.length; i < n; i += 1) {\n        this._view.setStyle(propertyNames[i], newValue, this._priority);\n      }\n    }\n  };\n\n  StyleAnimator.prototype.didUpdate = function <T, U>(this: StyleAnimator<ElementView, T, U>,\n                                                      newValue: T | undefined,\n                                                      oldValue: T | undefined): void {\n    // hook\n  };\n\n  StyleAnimator.prototype.delete = function <T, U>(this: StyleAnimator<ElementView, T, U>): void {\n    const propertyNames = this._propertyNames;\n    if (typeof propertyNames === \"string\") {\n      this._view.setStyle(propertyNames, void 0);\n    } else {\n      for (let i = 0, n = propertyNames.length; i < n; i += 1) {\n        this._view.setStyle(propertyNames[i], void 0);\n      }\n    }\n  };\n\n  StyleAnimator.prototype.parse = function <T, U>(this: StyleAnimator<ElementView, T, U>, value: string): T {\n    throw new Error(); // abstract\n  };\n\n  StyleAnimator.prototype.fromAny = function <T, U>(this: StyleAnimator<ElementView, T, U>, value: T | U): T {\n    throw new Error(); // abstract\n  };\n\n  return StyleAnimator;\n}(TweenFrameAnimator));\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface StringStyleAnimator<V extends ElementView> extends StyleAnimator<V, string> {\n}\n\n/** @hidden */\nexport const StringStyleAnimator: StyleAnimatorConstructor<string> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<string> {\n  const StringStyleAnimator: StyleAnimatorConstructor<string> = function <V extends ElementView>(\n      this: StringStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): StringStyleAnimator<V> {\n    let _this: StringStyleAnimator<V> = function accessor(value?: string, tween?: Tween<string>, priority?: string): string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as StringStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<string>;\n  __extends(StringStyleAnimator, _super);\n\n  StringStyleAnimator.prototype.parse = function (this: StringStyleAnimator<ElementView>, value: string): string {\n    return value;\n  };\n\n  StringStyleAnimator.prototype.fromAny = function (this: StringStyleAnimator<ElementView>, value: string): string {\n    return value;\n  };\n\n  return StringStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.String = StringStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface NumberStyleAnimator<V extends ElementView> extends StyleAnimator<V, number, number | string> {\n}\n\n/** @hidden */\nexport const NumberStyleAnimator: StyleAnimatorConstructor<number, number | string> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<number, number | string> {\n  const NumberStyleAnimator: StyleAnimatorConstructor<number, number | string> = function <V extends ElementView>(\n      this: NumberStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): NumberStyleAnimator<V> {\n    let _this: NumberStyleAnimator<V> = function accessor(value?: number | string, tween?: Tween<number>, priority?: string): number | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as NumberStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<number, number | string>;\n  __extends(NumberStyleAnimator, _super);\n\n  NumberStyleAnimator.prototype.parse = function (this: NumberStyleAnimator<ElementView>, value: string): number {\n    const number = +value;\n    if (isFinite(number)) {\n      return number;\n    } else {\n      throw new Error(value);\n    }\n  };\n\n  NumberStyleAnimator.prototype.fromAny = function (this: NumberStyleAnimator<ElementView>, value: number | string): number {\n    if (typeof value === \"string\") {\n      const number = +value;\n      if (isFinite(number)) {\n        return number;\n      } else {\n        throw new Error(value);\n      }\n    } else {\n      return value;\n    }\n  };\n\n  return NumberStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.Number = NumberStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface LengthStyleAnimator<V extends ElementView> extends StyleAnimator<V, Length, AnyLength> {\n}\n\n/** @hidden */\nexport const LengthStyleAnimator: StyleAnimatorConstructor<Length, AnyLength> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<Length, AnyLength> {\n  const LengthStyleAnimator: StyleAnimatorConstructor<Length, AnyLength> = function <V extends ElementView>(\n      this: LengthStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): LengthStyleAnimator<V> {\n    let _this: LengthStyleAnimator<V> = function accessor(value?: AnyLength, tween?: Tween<Length>, priority?: string): Length | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as LengthStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<Length, AnyLength>;\n  __extends(LengthStyleAnimator, _super);\n\n  LengthStyleAnimator.prototype.parse = function (this: LengthStyleAnimator<ElementView>, value: string): Length {\n    return Length.parse(value, this._view._node);\n  };\n\n  LengthStyleAnimator.prototype.fromAny = function (this: LengthStyleAnimator<ElementView>, value: AnyLength): Length {\n    return Length.fromAny(value, this._view._node);\n  };\n\n  return LengthStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.Length = LengthStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface ColorStyleAnimator<V extends ElementView> extends StyleAnimator<V, Color, AnyColor> {\n}\n\n/** @hidden */\nexport const ColorStyleAnimator: StyleAnimatorConstructor<Color, AnyColor> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<Color, AnyColor> {\n  const ColorStyleAnimator: StyleAnimatorConstructor<Color, AnyColor> = function <V extends ElementView>(\n      this: ColorStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): ColorStyleAnimator<V> {\n    let _this: ColorStyleAnimator<V> = function accessor(value?: AnyColor, tween?: Tween<Color>, priority?: string): Color | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as ColorStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<Color, AnyColor>;\n  __extends(ColorStyleAnimator, _super);\n\n  ColorStyleAnimator.prototype.parse = function (this: ColorStyleAnimator<ElementView>, value: string): Color {\n    return Color.parse(value);\n  };\n\n  ColorStyleAnimator.prototype.fromAny = function (this: ColorStyleAnimator<ElementView>, value: AnyColor): Color {\n    return Color.fromAny(value);\n  };\n\n  return ColorStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.Color = ColorStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLineHeight, LineHeight} from \"@swim/font\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface LineHeightStyleAnimator<V extends ElementView> extends StyleAnimator<V, LineHeight, AnyLineHeight> {\n}\n\n/** @hidden */\nexport const LineHeightStyleAnimator: StyleAnimatorConstructor<LineHeight, AnyLineHeight> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<LineHeight, AnyLineHeight> {\n  const LineHeightStyleAnimator: StyleAnimatorConstructor<LineHeight, AnyLineHeight> = function <V extends ElementView>(\n      this: LineHeightStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): LineHeightStyleAnimator<V> {\n    let _this: LineHeightStyleAnimator<V> = function accessor(value?: AnyLineHeight, tween?: Tween<LineHeight>, priority?: string): LineHeight | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value as LineHeight, tween, priority);\n        return _this._view;\n      }\n    } as LineHeightStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<LineHeight, AnyLineHeight>;\n  __extends(LineHeightStyleAnimator, _super);\n\n  LineHeightStyleAnimator.prototype.parse = function (this: LineHeightStyleAnimator<ElementView>, value: string): LineHeight {\n    return LineHeight.fromAny(value);\n  };\n\n  LineHeightStyleAnimator.prototype.fromAny = function (this: LineHeightStyleAnimator<ElementView>, value: AnyLineHeight): LineHeight {\n    return LineHeight.fromAny(value);\n  };\n\n  return LineHeightStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.LineHeight = LineHeightStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {FontFamily, Font} from \"@swim/font\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface FontFamilyStyleAnimator<V extends ElementView> extends StyleAnimator<V, FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>> {\n}\n\n/** @hidden */\nexport const FontFamilyStyleAnimator: StyleAnimatorConstructor<FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>> {\n  const FontFamilyStyleAnimator: StyleAnimatorConstructor<FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>> = function <V extends ElementView>(\n      this: FontFamilyStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): FontFamilyStyleAnimator<V> {\n    let _this: FontFamilyStyleAnimator<V> = function accessor(value?: FontFamily | ReadonlyArray<FontFamily>, tween?: Tween<FontFamily | FontFamily[]>, priority?: string): FontFamily | FontFamily[] | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as FontFamilyStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>>;\n  __extends(FontFamilyStyleAnimator, _super);\n\n  FontFamilyStyleAnimator.prototype.parse = function (this: FontFamilyStyleAnimator<ElementView>, value: string): FontFamily | FontFamily[] {\n    return Font.parse(value).family();\n  };\n\n  FontFamilyStyleAnimator.prototype.fromAny = function (this: FontFamilyStyleAnimator<ElementView>, value: FontFamily | ReadonlyArray<FontFamily>): FontFamily | FontFamily[] {\n    return Font.family(value).family();\n  };\n\n  return FontFamilyStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.FontFamily = FontFamilyStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyBoxShadow, BoxShadow} from \"@swim/shadow\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface BoxShadowStyleAnimator<V extends ElementView> extends StyleAnimator<V, BoxShadow, AnyBoxShadow> {\n}\n\n/** @hidden */\nexport const BoxShadowStyleAnimator: StyleAnimatorConstructor<BoxShadow, AnyBoxShadow> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<BoxShadow, AnyBoxShadow> {\n  const BoxShadowStyleAnimator: StyleAnimatorConstructor<BoxShadow, AnyBoxShadow> = function <V extends ElementView>(\n      this: BoxShadowStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): BoxShadowStyleAnimator<V> {\n    let _this: BoxShadowStyleAnimator<V> = function accessor(value?: AnyBoxShadow, tween?: Tween<BoxShadow>, priority?: string): BoxShadow | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as BoxShadowStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<BoxShadow, AnyBoxShadow>;\n  __extends(BoxShadowStyleAnimator, _super);\n\n  BoxShadowStyleAnimator.prototype.parse = function (this: BoxShadowStyleAnimator<ElementView>, value: string): BoxShadow {\n    return BoxShadow.parse(value);\n  };\n\n  BoxShadowStyleAnimator.prototype.fromAny = function (this: BoxShadowStyleAnimator<ElementView>, value: AnyBoxShadow): BoxShadow {\n    return BoxShadow.fromAny(value);\n  };\n\n  return BoxShadowStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.BoxShadow = BoxShadowStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface TransformStyleAnimator<V extends ElementView> extends StyleAnimator<V, Transform, AnyTransform> {\n}\n\n/** @hidden */\nexport const TransformStyleAnimator: StyleAnimatorConstructor<Transform, AnyTransform> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<Transform, AnyTransform> {\n  const TransformStyleAnimator: StyleAnimatorConstructor<Transform, AnyTransform> = function <V extends ElementView>(\n      this: TransformStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): TransformStyleAnimator<V> {\n    let _this: TransformStyleAnimator<V> = function accessor(value?: AnyTransform, tween?: Tween<Transform>, priority?: string): Transform | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as TransformStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<Transform, AnyTransform>;\n  __extends(TransformStyleAnimator, _super);\n\n  TransformStyleAnimator.prototype.parse = function (this: TransformStyleAnimator<ElementView>, value: string): Transform {\n    return Transform.parse(value);\n  };\n\n  TransformStyleAnimator.prototype.fromAny = function (this: TransformStyleAnimator<ElementView>, value: AnyTransform): Transform {\n    return Transform.fromAny(value);\n  };\n\n  return TransformStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.Transform = TransformStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface NumberOrStringStyleAnimator<V extends ElementView> extends StyleAnimator<V, number | string, number | string> {\n}\n\n/** @hidden */\nexport const NumberOrStringStyleAnimator: StyleAnimatorConstructor<number | string, number | string> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<number | string, number | string> {\n  const NumberOrStringStyleAnimator: StyleAnimatorConstructor<number | string, number | string> = function <V extends ElementView>(\n      this: NumberOrStringStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): NumberOrStringStyleAnimator<V> {\n    let _this: NumberOrStringStyleAnimator<V> = function accessor(value?: number | string, tween?: Tween<number | string>, priority?: string): number | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as NumberOrStringStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<number | string, number | string>;\n  __extends(NumberOrStringStyleAnimator, _super);\n\n  NumberOrStringStyleAnimator.prototype.parse = function (this: NumberOrStringStyleAnimator<ElementView>, value: string): number | string {\n    const number = +value;\n    return isFinite(number) ? number : value;\n  };\n\n  NumberOrStringStyleAnimator.prototype.fromAny = function (this: NumberOrStringStyleAnimator<ElementView>, value: number | string): number | string {\n    if (typeof value === \"string\") {\n      const number = +value;\n      return isFinite(number) ? number : value;\n    } else {\n      return value;\n    }\n  };\n\n  return NumberOrStringStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.NumberOrString = NumberOrStringStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface LengthOrStringStyleAnimator<V extends ElementView> extends StyleAnimator<V, Length | string, AnyLength | string> {\n}\n\n/** @hidden */\nexport const LengthOrStringStyleAnimator: StyleAnimatorConstructor<Length | String, AnyLength | String> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<Length | String, AnyLength | String> {\n  const LengthOrStringStyleAnimator: StyleAnimatorConstructor<Length | String, AnyLength | String> = function <V extends ElementView>(\n      this: LengthOrStringStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): LengthOrStringStyleAnimator<V> {\n    let _this: LengthOrStringStyleAnimator<V> = function accessor(value?: AnyLength | string, tween?: Tween<Length | string>, priority?: string): Length | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as LengthOrStringStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<Length | String, AnyLength | String>;\n  __extends(LengthOrStringStyleAnimator, _super);\n\n  LengthOrStringStyleAnimator.prototype.parse = function (this: LengthOrStringStyleAnimator<ElementView>, value: string): Length | string {\n    try {\n      return Length.parse(value, this._view._node);\n    } catch (swallow) {\n      return value;\n    }\n  };\n\n  LengthOrStringStyleAnimator.prototype.fromAny = function (this: LengthOrStringStyleAnimator<ElementView>, value: AnyLength | string): Length | string {\n    if (typeof value === \"string\") {\n      try {\n        return Length.parse(value, this._view._node);\n      } catch (swallow) {\n        return value;\n      }\n    } else {\n      return Length.fromAny(value, this._view._node);\n    }\n  };\n\n  return LengthOrStringStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.LengthOrString = LengthOrStringStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {__extends} from \"tslib\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {StyleAnimatorConstructor, StyleAnimator} from \"./StyleAnimator\";\nimport {ElementView} from \"../element/ElementView\";\n\n/** @hidden */\nexport interface ColorOrStringStyleAnimator<V extends ElementView> extends StyleAnimator<V, Color | string, AnyColor | string> {\n}\n\n/** @hidden */\nexport const ColorOrStringStyleAnimator: StyleAnimatorConstructor<Color | string, AnyColor | string> = (function (_super: typeof StyleAnimator): StyleAnimatorConstructor<Color | string, AnyColor | string> {\n  const ColorOrStringStyleAnimator: StyleAnimatorConstructor<Color | string, AnyColor | string> = function <V extends ElementView>(\n      this: ColorOrStringStyleAnimator<V>, view: V, animatorName: string, propertyNames: string | ReadonlyArray<string>): ColorOrStringStyleAnimator<V> {\n    let _this: ColorOrStringStyleAnimator<V> = function accessor(value?: AnyColor | string, tween?: Tween<Color | string>, priority?: string): Color | string | undefined | V {\n      if (arguments.length === 0) {\n        return _this.value;\n      } else {\n        _this.setState(value, tween, priority);\n        return _this._view;\n      }\n    } as ColorOrStringStyleAnimator<V>;\n    (_this as any).__proto__ = this;\n    _this = _super.call(_this, view, animatorName, propertyNames) || _this;\n    return _this;\n  } as unknown as StyleAnimatorConstructor<Color | string, AnyColor | string>;\n  __extends(ColorOrStringStyleAnimator, _super);\n\n  ColorOrStringStyleAnimator.prototype.parse = function (this: ColorOrStringStyleAnimator<ElementView>, value: string): Color | string {\n    try {\n      return Color.parse(value);\n    } catch (swallow) {\n      return value;\n    }\n  };\n\n  ColorOrStringStyleAnimator.prototype.fromAny = function (this: ColorOrStringStyleAnimator<ElementView>, value: AnyColor | string): Color | string {\n    if (typeof value === \"string\") {\n      try {\n        return Color.parse(value);\n      } catch (swallow) {\n        return value;\n      }\n    } else {\n      return Color.fromAny(value);\n    }\n  };\n\n  return ColorOrStringStyleAnimator;\n}(StyleAnimator));\nStyleAnimator.ColorOrString = ColorOrStringStyleAnimator;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeViewController} from \"../node/NodeViewController\";\nimport {ElementView} from \"./ElementView\";\nimport {ElementViewObserver} from \"./ElementViewObserver\";\n\nexport class ElementViewController<V extends ElementView = ElementView> extends NodeViewController<V> implements ElementViewObserver<V> {\n  viewWillSetAttribute(name: string, value: unknown, view: V): void {\n    // hook\n  }\n\n  viewDidSetAttribute(name: string, value: unknown, view: V): void {\n    // hook\n  }\n\n  viewWillSetStyle(name: string, value: unknown, priority: string | undefined, view: V): void {\n    // hook\n  }\n\n  viewDidSetStyle(name: string, value: unknown, priority: string | undefined, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {\n  FontStyle,\n  FontVariant,\n  FontWeight,\n  FontStretch,\n  AnyFontSize,\n  FontSize,\n  AnyLineHeight,\n  LineHeight,\n  FontFamily,\n  AnyFont,\n  Font,\n} from \"@swim/font\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {\n  AlignmentBaseline,\n  CssCursor,\n  FillRule,\n  Paint,\n  StrokeLinecap,\n  TextAnchor,\n  TouchAction,\n} from \"@swim/style\";\nimport {View} from \"../View\";\nimport {RenderedViewConstructor} from \"../rendered/RenderedView\";\nimport {ViewNode, NodeView} from \"../node/NodeView\";\nimport {TextView} from \"../text/TextView\";\nimport {AttributeAnimator} from \"../attribute/AttributeAnimator\";\nimport {StyleAnimator} from \"../style/StyleAnimator\";\nimport {ElementViewConstructor, ElementView} from \"../element/ElementView\";\nimport {SvgViewController} from \"./SvgViewController\";\nimport {HtmlView} from \"../html/HtmlView\";\nimport {CanvasView} from \"../canvas/CanvasView\";\n\nexport interface ViewSvg extends SVGElement {\n  view?: SvgView;\n}\n\nexport interface SvgViewTagMap {\n  \"svg\": SvgView;\n}\n\nexport interface SvgChildViewTagMap {\n}\n\nexport class SvgView extends ElementView {\n  constructor(node: SVGElement) {\n    super(node);\n  }\n\n  get node(): ViewSvg {\n    return this._node;\n  }\n\n  get viewController(): SvgViewController | null {\n    return this._viewController;\n  }\n\n  append<T extends keyof SvgChildViewTagMap>(tag: T, key?: string): SvgChildViewTagMap[T];\n  append(tag: string, key?: string): SvgView;\n  append(childNode: SVGElement, key?: string): SvgView;\n  append(childNode: Element, key?: string): ElementView;\n  append(childNode: Text, key?: string): TextView;\n  append(childNode: Node, key?: string): NodeView;\n  append<V extends NodeView>(childView: V, key?: string): V;\n  append<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  append(child: string | Node | NodeView | ElementViewConstructor, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = SvgView.fromTag(child);\n    } else if (child instanceof Node) {\n      child = SvgView.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = SvgView.fromConstructor(child);\n    }\n    this.appendChildView(child, key);\n    return child;\n  }\n\n  prepend<T extends keyof SvgChildViewTagMap>(tag: T, key?: string): SvgChildViewTagMap[T];\n  prepend(tag: string, key?: string): SvgView;\n  prepend(childNode: SVGElement, key?: string): SvgView;\n  prepend(childNode: Element, key?: string): ElementView;\n  prepend(childNode: Text, key?: string): TextView;\n  prepend(childNode: Node, key?: string): NodeView;\n  prepend<V extends NodeView>(childView: V, key?: string): V;\n  prepend<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  prepend(child: string | Node | NodeView | ElementViewConstructor, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = SvgView.fromTag(child);\n    } else if (child instanceof Node) {\n      child = SvgView.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = SvgView.fromConstructor(child);\n    }\n    this.prependChildView(child, key);\n    return child;\n  }\n\n  insert<T extends keyof SvgChildViewTagMap>(tag: T, target: View | Node | null, key?: string): SvgChildViewTagMap[T];\n  insert(tag: string, target: View | Node | null, key?: string): SvgView;\n  insert(childNode: SVGElement, target: View | Node | null, key?: string): SvgView;\n  insert(childNode: Element, target: View | Node | null, key?: string): ElementView;\n  insert(childNode: Text, target: View | Node | null, key?: string): TextView;\n  insert(childNode: Node, target: View | Node | null, key?: string): NodeView;\n  insert<V extends NodeView>(childView: V, target: View | Node | null, key?: string): V;\n  insert<C extends ElementViewConstructor>(viewConstructor: C, target: View | Node | null, key?: string): InstanceType<C>;\n  insert(child: string | Node | NodeView | ElementViewConstructor, target: View | Node | null, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = SvgView.fromTag(child);\n    } else if (child instanceof Node) {\n      child = SvgView.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = SvgView.fromConstructor(child);\n    }\n    this.insertChild(child, target, key);\n    return child;\n  }\n\n  get parentTransform(): Transform {\n    const transform = this.transform.value;\n    return transform !== void 0 ? transform : Transform.identity();\n  }\n\n  on<T extends keyof SVGElementEventMap>(type: T, listener: (this: SVGElement, event: SVGElementEventMap[T]) => unknown,\n                                         options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this {\n    this._node.addEventListener(type, listener, options);\n    return this;\n  }\n\n  off<T extends keyof SVGElementEventMap>(type: T, listener: (this: SVGElement, event: SVGElementEventMap[T]) => unknown,\n                                          options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this {\n    this._node.removeEventListener(type, listener, options);\n    return this;\n  }\n\n  @AttributeAnimator(\"alignment-baseline\", String)\n  alignmentBaseline: AttributeAnimator<this, AlignmentBaseline>;\n\n  @AttributeAnimator(\"clip-path\", String)\n  clipPath: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"cursor\", String)\n  cursor: AttributeAnimator<this, CssCursor>;\n\n  @AttributeAnimator(\"cx\", Number)\n  cx: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"cy\", Number)\n  cy: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"d\", String)\n  d: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"dx\", [Number, String]) // list-of-lengths\n  dx: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"dy\", [Number, String]) // list-of-lengths\n  dy: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"edgeMode\", String)\n  edgeMode: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"fill\", [Color, String])\n  fill: AttributeAnimator<this, Paint, AnyColor | Paint>;\n\n  @AttributeAnimator(\"fill-rule\", String)\n  fillRuke: AttributeAnimator<this, FillRule>;\n\n  @AttributeAnimator(\"height\", Length)\n  height: AttributeAnimator<this, Length, AnyLength>;\n\n  @AttributeAnimator(\"in\", String)\n  in: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"in2\", String)\n  in2: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"mode\", String)\n  mode: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"opacity\", Number)\n  opacity: AttributeAnimator<this, number>;\n\n  @AttributeAnimator(\"points\", String)\n  points: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"preserveAspectRatio\", Boolean)\n  preserveAspectRatio: AttributeAnimator<this, boolean, boolean | string>;\n\n  @AttributeAnimator(\"r\", Number)\n  r: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"result\", String)\n  result: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"stdDeviation\", String)\n  stdDeviation: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"stroke\", [Color, String])\n  stroke: AttributeAnimator<this, Paint, AnyColor | Paint>;\n\n  @AttributeAnimator(\"stroke-dasharray\", String)\n  strokeDasharray: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"stroke-linecap\", String)\n  strokeLinecap: AttributeAnimator<this, StrokeLinecap>;\n\n  @AttributeAnimator(\"stroke-width\", Number)\n  strokeWidth: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"text-anchor\", String)\n  textAnchor: AttributeAnimator<this, TextAnchor>;\n\n  @StyleAnimator(\"touch-action\", String)\n  touchAction: StyleAnimator<this, TouchAction>;\n\n  @AttributeAnimator(\"transform\", Transform)\n  transform: AttributeAnimator<this, Transform, AnyTransform>;\n\n  @AttributeAnimator(\"type\", String)\n  type: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"values\", String)\n  values: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"viewBox\", String)\n  viewBox: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"width\", Length)\n  width: AttributeAnimator<this, Length, AnyLength>;\n\n  @AttributeAnimator(\"x\", Number)\n  x: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"x1\", Number)\n  x1: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"x2\", Number)\n  x2: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"y\", Number)\n  y: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"y1\", Number)\n  y1: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"y2\", Number)\n  y2: AttributeAnimator<this, number, number | string>;\n\n  font(): Font | undefined;\n  font(value: AnyFont | undefined, tween?: Tween<any>, priority?: string): this;\n  font(value?: AnyFont | undefined, tween?: Tween<any>, priority?: string): Font | undefined | this {\n    if (value === void 0) {\n      const style = this.fontStyle();\n      const variant = this.fontVariant();\n      const weight = this.fontWeight();\n      const stretch = this.fontStretch();\n      const size = this.fontSize();\n      const height = this.lineHeight();\n      const family = this.fontFamily();\n      if (family !== void 0) {\n        return Font.from(style, variant, weight, stretch, size, height, family);\n      } else {\n        return void 0;\n      }\n    } else {\n      if (value !== void 0) {\n        value = Font.fromAny(value);\n      }\n      if (value === void 0 || value.style() !== null) {\n        this.fontStyle(value !== void 0 ? value.style() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.variant() !== null) {\n        this.fontVariant(value !== void 0 ? value.variant() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.weight() !== null) {\n        this.fontWeight(value !== void 0 ? value.weight() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.stretch() !== null) {\n        this.fontStretch(value !== void 0 ? value.stretch() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.size() !== null) {\n        this.fontSize(value !== void 0 ? value.size() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.height() !== null) {\n        this.lineHeight(value !== void 0 ? value.height() || void 0 : void 0, tween, priority);\n      }\n      this.fontFamily(value !== void 0 ? value.family() : void 0, tween, priority);\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"font-family\", FontFamily)\n  fontFamily: StyleAnimator<this, FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>>;\n\n  @StyleAnimator(\"font-size\", [Length, String])\n  fontSize: StyleAnimator<this, FontSize, AnyFontSize>;\n\n  @StyleAnimator(\"font-stretch\", String)\n  fontStretch: StyleAnimator<this, FontStretch>;\n\n  @StyleAnimator(\"font-style\", String)\n  fontStyle: StyleAnimator<this, FontStyle>;\n\n  @StyleAnimator(\"font-variant\", String)\n  fontVariant: StyleAnimator<this, FontVariant>;\n\n  @StyleAnimator(\"font-weight\", String)\n  fontWeight: StyleAnimator<this, FontWeight>;\n\n  @StyleAnimator(\"line-height\", LineHeight)\n  lineHeight: StyleAnimator<this, LineHeight, AnyLineHeight>;\n\n  static fromTag<T extends keyof SvgViewTagMap>(tag: T): SvgViewTagMap[T];\n  static fromTag(tag: string): SvgView;\n  static fromTag(tag: string): SvgView {\n    return new SvgView(document.createElementNS(SvgView.namespace, tag) as SVGElement);\n  }\n\n  static fromNode(node: HTMLCanvasElement): CanvasView;\n  static fromNode(node: HTMLElement): HtmlView;\n  static fromNode(node: SVGElement): SvgView;\n  static fromNode(node: Element): ElementView;\n  static fromNode(node: Text): TextView;\n  static fromNode(node: Node): NodeView;\n  static fromNode(node: ViewNode): NodeView {\n    if (node.view instanceof View) {\n      return node.view;\n    } else if (node instanceof SVGElement) {\n      return new SvgView(node);\n    }\n    throw new TypeError(\"\" + node);\n  }\n\n  static fromConstructor<C extends ElementViewConstructor | RenderedViewConstructor>(viewConstructor: C): InstanceType<C>;\n  static fromConstructor(viewConstructor: ElementViewConstructor | RenderedViewConstructor): View {\n    if (ElementView.isConstructor(viewConstructor)) {\n      return new viewConstructor(document.createElementNS(SvgView.namespace, viewConstructor.tag));\n    }\n    throw new TypeError(\"\" + viewConstructor);\n  }\n\n  static create<T extends keyof SvgViewTagMap>(tag: T): SvgViewTagMap[T];\n  static create(tag: string): SvgView;\n  static create(node: SVGElement): SvgView;\n  static create<C extends ElementViewConstructor<SVGElement, SvgView>>(viewConstructor: C): InstanceType<C>;\n  static create(source: string | SVGElement | ElementViewConstructor<SVGElement, SvgView>): SvgView {\n    if (typeof source === \"string\") {\n      return SvgView.fromTag(source);\n    } else if (source instanceof SVGElement) {\n      return SvgView.fromNode(source);\n    } else if (typeof source === \"function\") {\n      return SvgView.fromConstructor(source);\n    }\n    throw new TypeError(\"\" + source);\n  }\n\n  /** @hidden */\n  static readonly tag: string = \"svg\";\n\n  /** @hidden */\n  static readonly namespace: string = \"http://www.w3.org/2000/svg\";\n}\nView.Svg = SvgView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ElementViewController} from \"../element/ElementViewController\";\nimport {SvgView} from \"./SvgView\";\nimport {SvgViewObserver} from \"./SvgViewObserver\";\n\nexport class SvgViewController<V extends SvgView = SvgView> extends ElementViewController<V> implements SvgViewObserver<V> {\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {\n  FontStyle,\n  FontVariant,\n  FontWeight,\n  FontStretch,\n  AnyFontSize,\n  FontSize,\n  AnyLineHeight,\n  LineHeight,\n  FontFamily,\n  AnyFont,\n  Font,\n} from \"@swim/font\";\nimport {AnyBoxShadow, BoxShadow} from \"@swim/shadow\";\nimport {AnyTransform, Transform} from \"@swim/transform\";\nimport {Tween} from \"@swim/transition\";\nimport {\n  AlignContent,\n  AlignItems,\n  AlignSelf,\n  Appearance,\n  BorderCollapse,\n  BorderStyle,\n  BorderWidth,\n  BoxSizing,\n  CssCursor,\n  CssDisplay,\n  FlexBasis,\n  FlexDirection,\n  FlexWrap,\n  Height,\n  JustifyContent,\n  MaxHeight,\n  MaxWidth,\n  MinHeight,\n  MinWidth,\n  Overflow,\n  OverscrollBehavior,\n  PointerEvents,\n  Position,\n  TextAlign,\n  TextDecorationStyle,\n  TextTransform,\n  TouchAction,\n  UserSelect,\n  VerticalAlign,\n  Visibility,\n  WhiteSpace,\n  Width,\n} from \"@swim/style\";\nimport {\n  Constrain,\n  ConstrainVariable,\n  ConstrainBinding,\n  ConstraintRelation,\n  AnyConstraintStrength,\n  ConstraintStrength,\n  Constraint,\n} from \"@swim/constraint\";\nimport {ViewContext} from \"../ViewContext\";\nimport {View} from \"../View\";\nimport {LayoutScope} from \"../layout/LayoutScope\";\nimport {LayoutManager} from \"../layout/LayoutManager\";\nimport {LayoutAnchor} from \"../layout/LayoutAnchor\";\nimport {LayoutView} from \"../layout/LayoutView\";\nimport {RenderedViewConstructor} from \"../rendered/RenderedView\";\nimport {ViewNode, NodeView} from \"../node/NodeView\";\nimport {TextView} from \"../text/TextView\";\nimport {AttributeAnimator} from \"../attribute/AttributeAnimator\";\nimport {StyleAnimator} from \"../style/StyleAnimator\";\nimport {ElementViewConstructor, ElementView} from \"../element/ElementView\";\nimport {SvgView} from \"../svg/SvgView\";\nimport {HtmlViewController} from \"./HtmlViewController\";\nimport {CanvasView} from \"../canvas/CanvasView\";\n\nexport interface ViewHtml extends HTMLElement {\n  view?: HtmlView;\n}\n\nexport interface HtmlViewTagMap {\n  \"canvas\": CanvasView;\n}\n\nexport interface HtmlChildViewTagMap extends HtmlViewTagMap {\n  \"svg\": SvgView;\n}\n\nexport class HtmlView extends ElementView implements LayoutView {\n  /** @hidden */\n  _constraints: Constraint[] | undefined;\n  /** @hidden */\n  _constraintVariables: ConstrainVariable[] | undefined;\n\n  constructor(node: HTMLElement) {\n    super(node);\n  }\n\n  get node(): ViewHtml {\n    return this._node;\n  }\n\n  get viewController(): HtmlViewController | null {\n    return this._viewController;\n  }\n\n  append<T extends keyof HtmlChildViewTagMap>(tag: T, key?: string): HtmlChildViewTagMap[T];\n  append(tag: string, key?: string): HtmlView;\n  append(childNode: HTMLElement, key?: string): HtmlView;\n  append(childNode: SVGElement, key?: string): SvgView;\n  append(childNode: Element, key?: string): ElementView;\n  append(childNode: Text, key?: string): TextView;\n  append(childNode: Node, key?: string): NodeView;\n  append<V extends NodeView>(childView: V, key?: string): V;\n  append<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  append(child: string | Node | NodeView | ElementViewConstructor, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.appendChildView(child, key);\n    return child;\n  }\n\n  prepend<T extends keyof HtmlChildViewTagMap>(tag: T, key?: string): HtmlChildViewTagMap[T];\n  prepend(tag: string, key?: string): HtmlView;\n  prepend(childNode: HTMLElement, key?: string): HtmlView;\n  prepend(childNode: SVGElement, key?: string): SvgView;\n  prepend(childNode: Element, key?: string): ElementView;\n  prepend(childNode: Text, key?: string): TextView;\n  prepend(childNode: Node, key?: string): NodeView;\n  prepend<V extends NodeView>(childView: V, key?: string): V;\n  prepend<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  prepend(child: string | Node | NodeView | ElementViewConstructor, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.prependChildView(child, key);\n    return child;\n  }\n\n  insert<T extends keyof HtmlChildViewTagMap>(tag: T, target: View | Node | null, key?: string): HtmlChildViewTagMap[T];\n  insert(tag: string, target: View | Node | null, key?: string): HtmlView;\n  insert(childNode: HTMLElement, target: View | Node | null, key?: string): HtmlView;\n  insert(childNode: SVGElement, target: View | Node | null, key?: string): SvgView;\n  insert(childNode: Element, target: View | Node | null, key?: string): ElementView;\n  insert(childNode: Text, target: View | Node | null, key?: string): TextView;\n  insert(childNode: Node, target: View | Node | null, key?: string): NodeView;\n  insert<V extends NodeView>(childView: V, target: View | Node | null, key?: string): V;\n  insert<C extends ElementViewConstructor>(viewConstructor: C, target: View | Node | null, key?: string): InstanceType<C>;\n  insert(child: string | Node | NodeView | ElementViewConstructor, target: View | Node | null, key?: string): NodeView {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.insertChild(child, target, key);\n    return child;\n  }\n\n  protected didMount(): void {\n    super.didMount();\n    this.activateLayout();\n  }\n\n  protected willUnmount(): void {\n    this.deactivateLayout();\n    super.willUnmount();\n  }\n\n  protected willLayout(viewContext: ViewContext): void {\n    super.willLayout(viewContext);\n    this.updateLayoutStates();\n  }\n\n  protected didLayout(viewContext: ViewContext): void {\n    this.updateConstraintVariables();\n    super.didLayout(viewContext);\n  }\n\n  constraint(lhs: Constrain | number, relation: ConstraintRelation,\n             rhs?: Constrain | number, strength?: AnyConstraintStrength): Constraint {\n    if (typeof lhs === \"number\") {\n      lhs = Constrain.constant(lhs);\n    }\n    if (typeof rhs === \"number\") {\n      rhs = Constrain.constant(rhs);\n    }\n    const constrain = rhs !== void 0 ? lhs.minus(rhs) : lhs;\n    if (strength === void 0) {\n      strength = ConstraintStrength.Required;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    return new Constraint(this, constrain, relation, strength);\n  }\n\n  get constraints(): ReadonlyArray<Constraint> {\n    let constraints = this._constraints;\n    if (constraints === void 0) {\n      constraints = [];\n      this._constraints = constraints;\n    }\n    return constraints;\n  }\n\n  hasConstraint(constraint: Constraint): boolean {\n    const constraints = this._constraints;\n    return constraints !== void 0 && constraints.indexOf(constraint) >= 0;\n  }\n\n  addConstraint(constraint: Constraint): void {\n    let constraints = this._constraints;\n    if (constraints === void 0) {\n      constraints = [];\n      this._constraints = constraints;\n    }\n    if (constraints.indexOf(constraint) < 0) {\n      constraints.push(constraint);\n      this.activateConstraint(constraint);\n    }\n  }\n\n  /** @hidden */\n  activateConstraint(constraint: Constraint): void {\n    const rootView = this.rootView;\n    if (LayoutManager.is(rootView)) {\n      rootView.activateConstraint(constraint);\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  removeConstraint(constraint: Constraint): void {\n    const constraints = this._constraints;\n    if (constraints !== void 0) {\n      const index = constraints.indexOf(constraint);\n      if (index >= 0) {\n        constraints.splice(index, 1);\n        this.deactivateConstraint(constraint);\n      }\n    }\n  }\n\n  /** @hidden */\n  deactivateConstraint(constraint: Constraint): void {\n    const rootView = this.rootView;\n    if (LayoutManager.is(rootView)) {\n      rootView.deactivateConstraint(constraint);\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  constraintVariable(name: string, value?: number, strength?: AnyConstraintStrength): ConstrainVariable {\n    if (value === void 0) {\n      value = 0;\n    }\n    if (strength === void 0) {\n      strength = ConstraintStrength.Strong;\n    } else {\n      strength = ConstraintStrength.fromAny(strength);\n    }\n    return new ConstrainBinding(this, name, value, strength);\n  }\n\n  get constraintVariables(): ReadonlyArray<ConstrainVariable> {\n    let constraintVariables = this._constraintVariables;\n    if (constraintVariables === void 0) {\n      constraintVariables = [];\n      this._constraintVariables = constraintVariables;\n    }\n    return constraintVariables;\n  }\n\n  hasConstraintVariable(constraintVariable: ConstrainVariable): boolean {\n    const constraintVariables = this._constraintVariables;\n    return constraintVariables !== void 0 && constraintVariables.indexOf(constraintVariable) >= 0;\n  }\n\n  addConstraintVariable(constraintVariable: ConstrainVariable): void {\n    let constraintVariables = this._constraintVariables;\n    if (constraintVariables === void 0) {\n      constraintVariables = [];\n      this._constraintVariables = constraintVariables;\n    }\n    if (constraintVariables.indexOf(constraintVariable) < 0) {\n      constraintVariables.push(constraintVariable);\n      this.activateConstraintVariable(constraintVariable);\n    }\n  }\n\n  /** @hidden */\n  activateConstraintVariable(constraintVariable: ConstrainVariable): void {\n    const rootView = this.rootView;\n    if (LayoutManager.is(rootView)) {\n      rootView.activateConstraintVariable(constraintVariable);\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  removeConstraintVariable(constraintVariable: ConstrainVariable): void {\n    const constraintVariables = this._constraintVariables;\n    if (constraintVariables !== void 0) {\n      const index = constraintVariables.indexOf(constraintVariable);\n      if (index >= 0) {\n        this.deactivateConstraintVariable(constraintVariable);\n        constraintVariables.splice(index, 1);\n      }\n    }\n  }\n\n  /** @hidden */\n  deactivateConstraintVariable(constraintVariable: ConstrainVariable): void {\n    const rootView = this.rootView;\n    if (LayoutManager.is(rootView)) {\n      rootView.deactivateConstraintVariable(constraintVariable);\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  /** @hidden */\n  setConstraintVariable(constraintVariable: ConstrainVariable, state: number): void {\n    const rootView = this.rootView;\n    if (LayoutManager.is(rootView)) {\n      rootView.setConstraintVariable(constraintVariable, state);\n    }\n  }\n\n  /** @hidden */\n  updateConstraintVariables(): void {\n    const rootView = this.rootView;\n    if (LayoutScope.is(rootView)) {\n      rootView.updateConstraintVariables();\n    }\n  }\n\n  /** @hidden */\n  activateLayout(): void {\n    const constraints = this._constraints;\n    const constraintVariables = this._constraintVariables;\n    let rootView: View | null;\n    if ((constraints !== void 0 || constraintVariables !== void 0)\n        && (rootView = this.rootView, LayoutManager.is(rootView))) {\n      if (constraintVariables !== void 0) {\n        for (let i = 0, n = constraintVariables.length; i < n; i += 1) {\n          const constraintVariable = constraintVariables[i];\n          if (constraintVariable instanceof LayoutAnchor) {\n            rootView.activateConstraintVariable(constraintVariable);\n            this.requireUpdate(View.NeedsLayout);\n          }\n        }\n      }\n      if (constraints !== void 0) {\n        for (let i = 0, n = constraints.length; i < n; i += 1) {\n          rootView.activateConstraint(constraints[i]);\n          this.requireUpdate(View.NeedsLayout);\n        }\n      }\n    }\n  }\n\n  /** @hidden */\n  deactivateLayout(): void {\n    const constraints = this._constraints;\n    const constraintVariables = this._constraintVariables;\n    let rootView: View | null;\n    if ((constraints !== void 0 || constraintVariables !== void 0)\n        && (rootView = this.rootView, LayoutManager.is(rootView))) {\n      if (constraints !== void 0) {\n        for (let i = 0, n = constraints.length; i < n; i += 1) {\n          rootView.deactivateConstraint(constraints![i]);\n          this.requireUpdate(View.NeedsLayout);\n        }\n      }\n      if (constraintVariables !== void 0) {\n        for (let i = 0, n = constraintVariables.length; i < n; i += 1) {\n          rootView.deactivateConstraintVariable(constraintVariables![i]);\n          this.requireUpdate(View.NeedsLayout);\n        }\n      }\n    }\n  }\n\n  protected updateLayoutStates(): void {\n    const topAnchor = this.getLayoutAnchor(\"topAnchor\");\n    if (topAnchor !== null) {\n      topAnchor.updateState();\n    }\n    const rightAnchor = this.getLayoutAnchor(\"rightAnchor\");\n    if (rightAnchor !== null) {\n      rightAnchor.updateState();\n    }\n    const bottomAnchor = this.getLayoutAnchor(\"bottomAnchor\");\n    if (bottomAnchor !== null) {\n      bottomAnchor.updateState();\n    }\n    const leftAnchor = this.getLayoutAnchor(\"leftAnchor\");\n    if (leftAnchor !== null) {\n      leftAnchor.updateState();\n    }\n    const widthAnchor = this.getLayoutAnchor(\"widthAnchor\");\n    if (widthAnchor !== null) {\n      widthAnchor.updateState();\n    }\n    const heightAnchor = this.getLayoutAnchor(\"heightAnchor\");\n    if (heightAnchor !== null) {\n      heightAnchor.updateState();\n    }\n    const centerXAnchor = this.getLayoutAnchor(\"centerXAnchor\");\n    if (centerXAnchor !== null) {\n      centerXAnchor.updateState();\n    }\n    const centerYAnchor = this.getLayoutAnchor(\"centerYAnchor\");\n    if (centerYAnchor !== null) {\n      centerYAnchor.updateState();\n    }\n  }\n\n  isPositioned(): boolean {\n    const style = window.getComputedStyle(this._node);\n    return style.position === \"relative\" || style.position === \"absolute\";\n  }\n\n  get parentTransform(): Transform {\n    const transform = this.transform.value;\n    if (transform !== void 0) {\n      return transform;\n    } else if (this.isPositioned()) {\n      const dx = this._node.offsetLeft;\n      const dy = this._node.offsetTop;\n      if (dx !== 0 || dy !== 0) {\n        return Transform.translate(-dx, -dy);\n      }\n    }\n    return Transform.identity();\n  }\n\n  on<T extends keyof HTMLElementEventMap>(type: T, listener: (this: HTMLElement, event: HTMLElementEventMap[T]) => unknown,\n                                          options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this;\n  on(type: string, listener: EventListenerOrEventListenerObject, options?: AddEventListenerOptions | boolean): this {\n    this._node.addEventListener(type, listener, options);\n    return this;\n  }\n\n  off<T extends keyof HTMLElementEventMap>(type: T, listener: (this: HTMLElement, event: HTMLElementEventMap[T]) => unknown,\n                                           options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this;\n  off(type: string, listener: EventListenerOrEventListenerObject, options?: EventListenerOptions | boolean): this {\n    this._node.removeEventListener(type, listener, options);\n    return this;\n  }\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.top - offsetBounds.top;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.top.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  topAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = offsetBounds.right + bounds.right;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.right.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  rightAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = offsetBounds.bottom + bounds.bottom;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.bottom.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  bottomAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.left - offsetBounds.left;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.left.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  leftAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.width;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.width.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  widthAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.height;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      this.height.setState(Length.px(newValue));\n      this.requireUpdate(View.NeedsLayout);\n    },\n    strength: \"strong\",\n  })\n  heightAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.left + 0.5 * bounds.width - offsetBounds.left;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      const rightAnchor = this.getLayoutAnchor(\"rightAnchor\");\n      const leftAnchor = this.getLayoutAnchor(\"leftAnchor\");\n      const widthAnchor = this.getLayoutAnchor(\"widthAnchor\");\n      if (leftAnchor !== null && leftAnchor.enabled()) {\n        this.width.setState(Length.px(2 * (newValue - leftAnchor.value)));\n        this.requireUpdate(View.NeedsLayout);\n      } else if (rightAnchor !== null && rightAnchor.enabled()) {\n        this.width.setState(Length.px(2 * (rightAnchor.value - newValue)));\n        this.requireUpdate(View.NeedsLayout);\n      } else if (widthAnchor !== null && widthAnchor.enabled()) {\n        this.left.setState(Length.px(newValue - 0.5 * widthAnchor.value));\n        this.requireUpdate(View.NeedsLayout);\n      }\n    },\n    strength: \"strong\",\n  })\n  centerXAnchor: LayoutAnchor<this>;\n\n  @LayoutAnchor<HtmlView>({\n    get(oldState: number): number {\n      const offsetParent = this._node.offsetParent!;\n      const offsetBounds = offsetParent.getBoundingClientRect();\n      const bounds = this._node.getBoundingClientRect();\n      const newState = bounds.top + 0.5 * bounds.height - offsetBounds.top;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    set(newValue: number): void {\n      const topAnchor = this.getLayoutAnchor(\"topAnchor\");\n      const bottomAnchor = this.getLayoutAnchor(\"bottomAnchor\");\n      const heightAnchor = this.getLayoutAnchor(\"heightAnchor\");\n      if (topAnchor !== null && topAnchor.enabled()) {\n        this.height.setState(Length.px(2 * (newValue - topAnchor.value)));\n        this.requireUpdate(View.NeedsLayout);\n      } else if (bottomAnchor !== null && bottomAnchor.enabled()) {\n        this.height.setState(Length.px(2 * (bottomAnchor.value - newValue)));\n        this.requireUpdate(View.NeedsLayout);\n      } else if (heightAnchor !== null && heightAnchor.enabled()) {\n        this.top.setState(Length.px(newValue - 0.5 * heightAnchor.value));\n        this.requireUpdate(View.NeedsLayout);\n      }\n    },\n    strength: \"strong\",\n  })\n  centerYAnchor: LayoutAnchor<this>;\n\n  @AttributeAnimator(\"autocomplete\", String)\n  autocomplete: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"checked\", Boolean)\n  checked: AttributeAnimator<this, boolean, boolean | string>;\n\n  @AttributeAnimator(\"colspan\", Number)\n  colspan: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"disabled\", Boolean)\n  disabled: AttributeAnimator<this, boolean, boolean | string>;\n\n  @AttributeAnimator(\"placeholder\", String)\n  placeholder: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"rowspan\", Number)\n  rowspan: AttributeAnimator<this, number, number | string>;\n\n  @AttributeAnimator(\"selected\", Boolean)\n  selected: AttributeAnimator<this, boolean, boolean | string>;\n\n  @AttributeAnimator(\"title\", String)\n  title: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"type\", String)\n  type: AttributeAnimator<this, string>;\n\n  @AttributeAnimator(\"value\", String)\n  value: AttributeAnimator<this, string>;\n\n  @StyleAnimator(\"align-content\", String)\n  alignContent: StyleAnimator<this, AlignContent>;\n\n  @StyleAnimator(\"align-items\", String)\n  alignItems: StyleAnimator<this, AlignItems>;\n\n  @StyleAnimator(\"align-self\", String)\n  alignSelf: StyleAnimator<this, AlignSelf>;\n\n  @StyleAnimator(\"appearance\", String)\n  appearance: StyleAnimator<this, Appearance>;\n\n  @StyleAnimator([\"backdrop-filter\", \"-webkit-backdrop-filter\"], String)\n  backdropFilter: StyleAnimator<this, string>;\n\n  @StyleAnimator(\"background-color\", Color)\n  backgroundColor: StyleAnimator<this, Color, AnyColor>;\n\n  @StyleAnimator(\"border-collapse\", String)\n  borderCollapse: StyleAnimator<this, BorderCollapse>;\n\n  borderColor(): [Color | \"currentColor\" | undefined,\n                  Color | \"currentColor\" | undefined,\n                  Color | \"currentColor\" | undefined,\n                  Color | \"currentColor\" | undefined] |\n                 Color | \"currentColor\" | undefined;\n  borderColor(value: [AnyColor | \"currentColor\" | undefined,\n                      AnyColor | \"currentColor\" | undefined,\n                      AnyColor | \"currentColor\" | undefined,\n                      AnyColor | \"currentColor\" | undefined] |\n                     AnyColor | \"currentColor\" | undefined,\n              tween?: Tween<Color | \"currentColor\">,\n              priority?: string): this;\n  borderColor(value?: [AnyColor | \"currentColor\" | undefined,\n                       AnyColor | \"currentColor\" | undefined,\n                       AnyColor | \"currentColor\" | undefined,\n                       AnyColor | \"currentColor\" | undefined] |\n                      AnyColor | \"currentColor\" | undefined,\n              tween?: Tween<Color | \"currentColor\">,\n              priority?: string): [Color | \"currentColor\" | undefined,\n                                   Color | \"currentColor\" | undefined,\n                                   Color | \"currentColor\" | undefined,\n                                   Color | \"currentColor\" | undefined] |\n                                  Color | \"currentColor\" | undefined | this {\n    if (value === void 0) {\n      const borderTopColor = this.borderTopColor();\n      const borderRightColor = this.borderRightColor();\n      const borderBottomColor = this.borderBottomColor();\n      const borderLeftColor = this.borderLeftColor();\n      if (Objects.equal(borderTopColor, borderRightColor)\n          && Objects.equal(borderRightColor, borderBottomColor)\n          && Objects.equal(borderBottomColor, borderLeftColor)) {\n        return borderTopColor;\n      } else {\n        return [borderTopColor, borderRightColor, borderBottomColor, borderLeftColor];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.borderTopColor(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.borderRightColor(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.borderBottomColor(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.borderLeftColor(value[3], tween, priority);\n        }\n      } else {\n        this.borderTopColor(value, tween, priority);\n        this.borderRightColor(value, tween, priority);\n        this.borderBottomColor(value, tween, priority);\n        this.borderLeftColor(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"border-top-color\", [Color, String])\n  borderTopColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"border-right-color\", [Color, String])\n  borderRightColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"border-bottom-color\", [Color, String])\n  borderBottomColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"border-left-color\", [Color, String])\n  borderLeftColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  borderRadius(): [Length | undefined,\n                   Length | undefined,\n                   Length | undefined,\n                   Length | undefined] |\n                  Length | undefined;\n  borderRadius(value: [AnyLength | undefined,\n                       AnyLength | undefined,\n                       AnyLength | undefined,\n                       AnyLength | undefined] |\n                      AnyLength | undefined,\n               tween?: Tween<Length>,\n               priority?: string): this;\n  borderRadius(value?: [AnyLength | undefined,\n                        AnyLength | undefined,\n                        AnyLength | undefined,\n                        AnyLength | undefined] |\n                       AnyLength | undefined,\n               tween?: Tween<Length>,\n               priority?: string): [Length | undefined,\n                                    Length | undefined,\n                                    Length | undefined,\n                                    Length | undefined] |\n                                   Length | undefined | this {\n    if (value === void 0) {\n      const borderTopLeftRadius = this.borderTopLeftRadius();\n      const borderTopRightRadius = this.borderTopRightRadius();\n      const borderBottomRightRadius = this.borderBottomRightRadius();\n      const borderBottomLeftRadius = this.borderBottomLeftRadius();\n      if (Objects.equal(borderTopLeftRadius, borderTopRightRadius)\n          && Objects.equal(borderTopRightRadius, borderBottomRightRadius)\n          && Objects.equal(borderBottomRightRadius, borderBottomLeftRadius)) {\n        return borderTopLeftRadius;\n      } else {\n        return [borderTopLeftRadius, borderTopRightRadius, borderBottomRightRadius, borderBottomLeftRadius];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.borderTopLeftRadius(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.borderTopRightRadius(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.borderBottomRightRadius(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.borderBottomLeftRadius(value[3], tween, priority);\n        }\n      } else {\n        this.borderTopLeftRadius(value, tween, priority);\n        this.borderTopRightRadius(value, tween, priority);\n        this.borderBottomRightRadius(value, tween, priority);\n        this.borderBottomLeftRadius(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"border-top-left-radius\", Length)\n  borderTopLeftRadius: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"border-top-right-radius\", Length)\n  borderTopRightRadius: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"border-bottom-right-radius\", Length)\n  borderBottomRightRadius: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"border-bottom-left-radius\", Length)\n  borderBottomLeftRadius: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"border-spacing\", String)\n  borderSpacing: StyleAnimator<this, string>;\n\n  borderStyle(): [BorderStyle | undefined,\n                  BorderStyle | undefined,\n                  BorderStyle | undefined,\n                  BorderStyle | undefined] |\n                 BorderStyle | undefined;\n  borderStyle(value: [BorderStyle | undefined,\n                      BorderStyle | undefined,\n                      BorderStyle | undefined,\n                      BorderStyle | undefined] |\n                     BorderStyle | undefined,\n              tween?: Tween<BorderStyle>,\n              priority?: string ): this;\n  borderStyle(value?: [BorderStyle | undefined,\n                       BorderStyle | undefined,\n                       BorderStyle | undefined,\n                       BorderStyle | undefined] |\n                      BorderStyle | undefined,\n              tween?: Tween<BorderStyle>,\n              priority?: string): [BorderStyle | undefined,\n                                   BorderStyle | undefined,\n                                   BorderStyle | undefined,\n                                   BorderStyle | undefined] |\n                                  BorderStyle | undefined | this {\n    if (value === void 0) {\n      const borderTopStyle = this.borderTopStyle();\n      const borderRightStyle = this.borderRightStyle();\n      const borderBottomStyle = this.borderBottomStyle();\n      const borderLeftStyle = this.borderLeftStyle();\n      if (Objects.equal(borderTopStyle, borderRightStyle)\n          && Objects.equal(borderRightStyle, borderBottomStyle)\n          && Objects.equal(borderBottomStyle, borderLeftStyle)) {\n        return borderTopStyle;\n      } else {\n        return [borderTopStyle, borderRightStyle, borderBottomStyle, borderLeftStyle];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.borderTopStyle(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.borderRightStyle(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.borderBottomStyle(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.borderLeftStyle(value[3], tween, priority);\n        }\n      } else {\n        this.borderTopStyle(value, tween, priority);\n        this.borderRightStyle(value, tween, priority);\n        this.borderBottomStyle(value, tween, priority);\n        this.borderLeftStyle(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"border-top-style\", String)\n  borderTopStyle: StyleAnimator<this, BorderStyle>;\n\n  @StyleAnimator(\"border-right-style\", String)\n  borderRightStyle: StyleAnimator<this, BorderStyle>;\n\n  @StyleAnimator(\"border-bottom-style\", String)\n  borderBottomStyle: StyleAnimator<this, BorderStyle>;\n\n  @StyleAnimator(\"border-left-style\", String)\n  borderLeftStyle: StyleAnimator<this, BorderStyle>;\n\n  borderWidth(): [BorderWidth | undefined,\n                  BorderWidth | undefined,\n                  BorderWidth | undefined,\n                  BorderWidth | undefined] |\n                 BorderWidth | undefined;\n  borderWidth(value: [BorderWidth | AnyLength | undefined,\n                      BorderWidth | AnyLength | undefined,\n                      BorderWidth | AnyLength | undefined,\n                      BorderWidth | AnyLength | undefined] |\n                     BorderWidth | AnyLength | undefined,\n              tween?: Tween<BorderWidth>,\n              priority?: string): this;\n  borderWidth(value?: [BorderWidth | AnyLength | undefined,\n                       BorderWidth | AnyLength | undefined,\n                       BorderWidth | AnyLength | undefined,\n                       BorderWidth | AnyLength | undefined] |\n                      BorderWidth | AnyLength | undefined,\n              tween?: Tween<BorderWidth>,\n              priority?: string): [BorderWidth | undefined,\n                                   BorderWidth | undefined,\n                                   BorderWidth | undefined,\n                                   BorderWidth | undefined] |\n                                  BorderWidth | undefined | this {\n    if (value === void 0) {\n      const borderTopWidth = this.borderTopWidth();\n      const borderRightWidth = this.borderRightWidth();\n      const borderBottomWidth = this.borderBottomWidth();\n      const borderLeftWidth = this.borderLeftWidth();\n      if (Objects.equal(borderTopWidth, borderRightWidth)\n          && Objects.equal(borderRightWidth, borderBottomWidth)\n          && Objects.equal(borderBottomWidth, borderLeftWidth)) {\n        return borderTopWidth;\n      } else {\n        return [borderTopWidth, borderRightWidth, borderBottomWidth, borderLeftWidth];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.borderTopWidth(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.borderRightWidth(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.borderBottomWidth(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.borderLeftWidth(value[3], tween, priority);\n        }\n      } else {\n        this.borderTopWidth(value, tween, priority);\n        this.borderRightWidth(value, tween, priority);\n        this.borderBottomWidth(value, tween, priority);\n        this.borderLeftWidth(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"border-top-width\", [Length, String])\n  borderTopWidth: StyleAnimator<this, Length | BorderWidth, AnyLength | BorderWidth>;\n\n  @StyleAnimator(\"border-right-width\", [Length, String])\n  borderRightWidth: StyleAnimator<this, Length | BorderWidth, AnyLength | BorderWidth>;\n\n  @StyleAnimator(\"border-bottom-width\", [Length, String])\n  borderBottomWidth: StyleAnimator<this, Length | BorderWidth, AnyLength | BorderWidth>;\n\n  @StyleAnimator(\"border-left-width\", [Length, String])\n  borderLeftWidth: StyleAnimator<this, Length | BorderWidth, AnyLength | BorderWidth>;\n\n  @StyleAnimator(\"bottom\", [Length, String])\n  bottom: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"box-shadow\", BoxShadow)\n  boxShadow: StyleAnimator<this, BoxShadow, AnyBoxShadow>;\n\n  @StyleAnimator(\"box-sizing\", String)\n  boxSizing: StyleAnimator<this, BoxSizing>;\n\n  @StyleAnimator(\"color\", [Color, String])\n  color: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"cursor\", String)\n  cursor: StyleAnimator<this, CssCursor>;\n\n  @StyleAnimator(\"display\", String)\n  display: StyleAnimator<this, CssDisplay>;\n\n  @StyleAnimator(\"filter\", String)\n  filter: StyleAnimator<this, string>;\n\n  @StyleAnimator(\"flex-basis\", [Length, String])\n  flexBasis: StyleAnimator<this, Length | FlexBasis, AnyLength | FlexBasis>;\n\n  @StyleAnimator(\"flex-direction\", String)\n  flexDirection: StyleAnimator<this, FlexDirection>;\n\n  @StyleAnimator(\"flex-grow\", Number)\n  flexGrow: StyleAnimator<this, number, number | string>;\n\n  @StyleAnimator(\"flex-shrink\", Number)\n  flexShrink: StyleAnimator<this, number, number | string>;\n\n  @StyleAnimator(\"flex-wrap\", String)\n  flexWrap: StyleAnimator<this, FlexWrap>;\n\n  font(): Font | undefined;\n  font(value: AnyFont | undefined, tween?: Tween<any>, priority?: string): this;\n  font(value?: AnyFont, tween?: Tween<any>, priority?: string): Font | undefined | this {\n    if (value === void 0) {\n      const style = this.fontStyle();\n      const variant = this.fontVariant();\n      const weight = this.fontWeight();\n      const stretch = this.fontStretch();\n      const size = this.fontSize();\n      const height = this.lineHeight();\n      const family = this.fontFamily();\n      if (family !== void 0) {\n        return Font.from(style, variant, weight, stretch, size, height, family);\n      } else {\n        return void 0;\n      }\n    } else {\n      if (value !== void 0) {\n        value = Font.fromAny(value);\n      }\n      if (value === void 0 || value.style() !== null) {\n        this.fontStyle(value !== void 0 ? value.style() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.variant() !== null) {\n        this.fontVariant(value !== void 0 ? value.variant() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.weight() !== null) {\n        this.fontWeight(value !== void 0 ? value.weight() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.stretch() !== null) {\n        this.fontStretch(value !== void 0 ? value.stretch() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.size() !== null) {\n        this.fontSize(value !== void 0 ? value.size() || void 0 : void 0, tween, priority);\n      }\n      if (value === void 0 || value.height() !== null) {\n        this.lineHeight(value !== void 0 ? value.height() || void 0 : void 0, tween, priority);\n      }\n      this.fontFamily(value !== void 0 ? value.family() : void 0, tween, priority);\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"font-family\", FontFamily)\n  fontFamily: StyleAnimator<this, FontFamily | FontFamily[], FontFamily | ReadonlyArray<FontFamily>>;\n\n  @StyleAnimator(\"font-size\", [Length, String])\n  fontSize: StyleAnimator<this, FontSize, AnyFontSize>;\n\n  @StyleAnimator(\"font-stretch\", String)\n  fontStretch: StyleAnimator<this, FontStretch>;\n\n  @StyleAnimator(\"font-style\", String)\n  fontStyle: StyleAnimator<this, FontStyle>;\n\n  @StyleAnimator(\"font-variant\", String)\n  fontVariant: StyleAnimator<this, FontVariant>;\n\n  @StyleAnimator(\"font-weight\", String)\n  fontWeight: StyleAnimator<this, FontWeight>;\n\n  @StyleAnimator(\"height\", [Length, String])\n  height: StyleAnimator<this, Height, AnyLength | Height>;\n\n  @StyleAnimator(\"justify-content\", String)\n  justifyContent: StyleAnimator<this, JustifyContent>;\n\n  @StyleAnimator(\"left\", [Length, String])\n  left: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"line-height\", LineHeight)\n  lineHeight: StyleAnimator<this, LineHeight, AnyLineHeight>;\n\n  margin(): [Length | \"auto\" | undefined,\n             Length | \"auto\" | undefined,\n             Length | \"auto\" | undefined,\n             Length | \"auto\" | undefined] |\n            Length | \"auto\" | undefined;\n  margin(value: [AnyLength | \"auto\" | undefined,\n                 AnyLength | \"auto\" | undefined,\n                 AnyLength | \"auto\" | undefined,\n                 AnyLength | \"auto\" | undefined] |\n                AnyLength | \"auto\" | undefined,\n         tween?: Tween<Length | \"auto\">,\n         priority?: string): this;\n  margin(value?: [AnyLength | \"auto\" |undefined,\n                  AnyLength | \"auto\" |undefined,\n                  AnyLength | \"auto\" |undefined,\n                  AnyLength | \"auto\" |undefined] |\n                 AnyLength | \"auto\" | undefined,\n         tween?: Tween<Length | \"auto\">,\n         priority?: string): [Length | \"auto\" | undefined,\n                              Length | \"auto\" | undefined,\n                              Length | \"auto\" | undefined,\n                              Length | \"auto\" | undefined] |\n                             Length | \"auto\" | undefined | this {\n    if (value === void 0) {\n      const marginTop = this.marginTop();\n      const marginRight = this.marginRight();\n      const marginBottom = this.marginBottom();\n      const marginLeft = this.marginLeft();\n      if (Objects.equal(marginTop, marginRight)\n          && Objects.equal(marginRight, marginBottom)\n          && Objects.equal(marginBottom, marginLeft)) {\n        return marginTop;\n      } else {\n        return [marginTop, marginRight, marginBottom, marginLeft];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.marginTop(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.marginRight(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.marginBottom(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.marginLeft(value[3], tween, priority);\n        }\n      } else {\n        this.marginTop(value, tween, priority);\n        this.marginRight(value, tween, priority);\n        this.marginBottom(value, tween, priority);\n        this.marginLeft(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"margin-top\", [Length, String])\n  marginTop: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"margin-right\", [Length, String])\n  marginRight: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"margin-bottom\", [Length, String])\n  marginBottom: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"margin-left\", [Length, String])\n  marginLeft: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"max-height\", [Length, String])\n  maxHeight: StyleAnimator<this, MaxHeight, AnyLength | MaxHeight>;\n\n  @StyleAnimator(\"max-width\", [Length, String])\n  maxWidth: StyleAnimator<this, MaxWidth, AnyLength | MaxWidth>;\n\n  @StyleAnimator(\"min-height\", [Length, String])\n  minHeight: StyleAnimator<this, MinHeight, AnyLength | MinHeight>;\n\n  @StyleAnimator(\"min-width\", [Length, String])\n  minWidth: StyleAnimator<this, MinWidth, AnyLength | MinWidth>;\n\n  @StyleAnimator(\"opacity\", Number)\n  opacity: StyleAnimator<this, number, number | string>;\n\n  @StyleAnimator(\"order\", Number)\n  order: StyleAnimator<this, number, number | string>;\n\n  @StyleAnimator(\"outline-color\", [Color, String])\n  outlineColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"outline-style\", String)\n  outlineStyle: StyleAnimator<this, BorderStyle>;\n\n  @StyleAnimator(\"outline-width\", [Length, String])\n  outlineWidth: StyleAnimator<this, Length | BorderWidth, AnyLength | BorderWidth>;\n\n  overflow(): [Overflow | undefined,\n               Overflow | undefined] |\n              Overflow | undefined;\n  overflow(value: [Overflow | undefined,\n                   Overflow | undefined] |\n                  Overflow | undefined,\n          tween?: Tween<Overflow>,\n          priority?: string): this;\n  overflow(value?: [Overflow | undefined,\n                    Overflow | undefined] |\n                   Overflow | undefined,\n          tween?: Tween<Overflow>,\n          priority?: string): [Overflow | undefined,\n                               Overflow | undefined] |\n                              Overflow | undefined | this {\n    if (value === void 0) {\n      const overflowX = this.overflowX();\n      const overflowY = this.overflowY();\n      if (Objects.equal(overflowX, overflowY)) {\n        return overflowX;\n      } else {\n        return [overflowX, overflowY];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.overflowX(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.overflowY(value[1], tween, priority);\n        }\n      } else {\n        this.overflowX(value, tween, priority);\n        this.overflowY(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"overflow-x\", String)\n  overflowX: StyleAnimator<this, Overflow>;\n\n  @StyleAnimator(\"overflow-y\", String)\n  overflowY: StyleAnimator<this, Overflow>;\n\n  overscrollBehavior(): [OverscrollBehavior | undefined,\n                         OverscrollBehavior | undefined] |\n                        OverscrollBehavior | undefined;\n  overscrollBehavior(value: [OverscrollBehavior | undefined,\n                             OverscrollBehavior | undefined] |\n                            OverscrollBehavior | undefined,\n          tween?: Tween<OverscrollBehavior>,\n          priority?: string): this;\n  overscrollBehavior(value?: [OverscrollBehavior | undefined,\n                              OverscrollBehavior | undefined] |\n                             OverscrollBehavior | undefined,\n          tween?: Tween<OverscrollBehavior>,\n          priority?: string): [OverscrollBehavior | undefined,\n                               OverscrollBehavior | undefined] |\n                              OverscrollBehavior | undefined | this {\n    if (value === void 0) {\n      const overscrollBehaviorX = this.overscrollBehaviorX();\n      const overscrollBehaviorY = this.overscrollBehaviorY();\n      if (Objects.equal(overscrollBehaviorX, overscrollBehaviorY)) {\n        return overscrollBehaviorX;\n      } else {\n        return [overscrollBehaviorX, overscrollBehaviorY];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.overscrollBehaviorX(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.overscrollBehaviorY(value[1], tween, priority);\n        }\n      } else {\n        this.overscrollBehaviorX(value, tween, priority);\n        this.overscrollBehaviorY(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"overscroll-behavior-x\", String)\n  overscrollBehaviorX: StyleAnimator<this, OverscrollBehavior>;\n\n  @StyleAnimator(\"overscroll-behavior-y\", String)\n  overscrollBehaviorY: StyleAnimator<this, OverscrollBehavior>;\n\n  padding(): [Length | undefined,\n              Length | undefined,\n              Length | undefined,\n              Length | undefined] |\n             Length | undefined;\n  padding(value: [AnyLength | undefined,\n                  AnyLength | undefined,\n                  AnyLength | undefined,\n                  AnyLength | undefined] |\n                 AnyLength | undefined,\n          tween?: Tween<Length>,\n          priority?: string): this;\n  padding(value?: [AnyLength | undefined,\n                   AnyLength | undefined,\n                   AnyLength | undefined,\n                   AnyLength | undefined] |\n                  AnyLength | undefined,\n          tween?: Tween<Length>,\n          priority?: string): [Length | undefined,\n                               Length | undefined,\n                               Length | undefined,\n                               Length | undefined] |\n                              Length | undefined | this {\n    if (value === void 0) {\n      const paddingTop = this.paddingTop();\n      const paddingRight = this.paddingRight();\n      const paddingBottom = this.paddingBottom();\n      const paddingLeft = this.paddingLeft();\n      if (Objects.equal(paddingTop, paddingRight)\n          && Objects.equal(paddingRight, paddingBottom)\n          && Objects.equal(paddingBottom, paddingLeft)) {\n        return paddingTop;\n      } else {\n        return [paddingTop, paddingRight, paddingBottom, paddingLeft];\n      }\n    } else {\n      if (Array.isArray(value)) {\n        if (value.length >= 1) {\n          this.paddingTop(value[0], tween, priority);\n        }\n        if (value.length >= 2) {\n          this.paddingRight(value[1], tween, priority);\n        }\n        if (value.length >= 3) {\n          this.paddingBottom(value[2], tween, priority);\n        }\n        if (value.length >= 4) {\n          this.paddingLeft(value[3], tween, priority);\n        }\n      } else {\n        this.paddingTop(value, tween, priority);\n        this.paddingRight(value, tween, priority);\n        this.paddingBottom(value, tween, priority);\n        this.paddingLeft(value, tween, priority);\n      }\n      return this;\n    }\n  }\n\n  @StyleAnimator(\"padding-top\", Length)\n  paddingTop: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"padding-right\", Length)\n  paddingRight: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"padding-bottom\", Length)\n  paddingBottom: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"padding-left\", Length)\n  paddingLeft: StyleAnimator<this, Length, AnyLength>;\n\n  @StyleAnimator(\"pointer-events\", String)\n  pointerEvents: StyleAnimator<this, PointerEvents>;\n\n  @StyleAnimator(\"position\", String)\n  position: StyleAnimator<this, Position>;\n\n  @StyleAnimator(\"right\", [Length, String])\n  right: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"text-align\", String)\n  textAlign: StyleAnimator<this, TextAlign>;\n\n  @StyleAnimator(\"text-decoration-color\", [Color, String])\n  textDecorationColor: StyleAnimator<this, Color | \"currentColor\", AnyColor | \"currentColor\">;\n\n  @StyleAnimator(\"text-decoration-line\", String)\n  textDecorationLine: StyleAnimator<this, string>;\n\n  @StyleAnimator(\"text-decoration-style\", String)\n  textDecorationStyle: StyleAnimator<this, TextDecorationStyle>;\n\n  @StyleAnimator(\"text-overflow\", String)\n  textOverflow: StyleAnimator<this, string>;\n\n  @StyleAnimator(\"text-transform\", String)\n  textTransform: StyleAnimator<this, TextTransform>;\n\n  @StyleAnimator(\"top\", [Length, String])\n  top: StyleAnimator<this, Length | \"auto\", AnyLength | \"auto\">;\n\n  @StyleAnimator(\"touch-action\", String)\n  touchAction: StyleAnimator<this, TouchAction>;\n\n  @StyleAnimator(\"transform\", Transform)\n  transform: StyleAnimator<this, Transform, AnyTransform>;\n\n  @StyleAnimator([\"user-select\", \"-webkit-user-select\", \"-moz-user-select\", \"-ms-user-select\"], String)\n  userSelect: StyleAnimator<this, UserSelect>;\n\n  @StyleAnimator(\"vertical-align\", [Length, String])\n  verticalAlign: StyleAnimator<this, VerticalAlign, AnyLength | VerticalAlign>;\n\n  @StyleAnimator(\"visibility\", String)\n  visibility: StyleAnimator<this, Visibility>;\n\n  @StyleAnimator(\"-webkit-overflow-scrolling\", String)\n  webkitOverflowScrolling: StyleAnimator<this, \"auto\" | \"touch\">;\n\n  @StyleAnimator(\"white-space\", String)\n  whiteSpace: StyleAnimator<this, WhiteSpace>;\n\n  @StyleAnimator(\"width\", [Length, String])\n  width: StyleAnimator<this, Width, AnyLength | Width>;\n\n  @StyleAnimator(\"z-index\", [Number, String])\n  zIndex: StyleAnimator<this, number | string>;\n\n  static fromTag<T extends keyof HtmlViewTagMap>(tag: T): HtmlViewTagMap[T];\n  static fromTag(tag: string): HtmlView;\n  static fromTag(tag: string): HtmlView {\n    if (tag === \"canvas\") {\n      return new View.Canvas(document.createElement(tag) as HTMLCanvasElement);\n    } else {\n      return new HtmlView(document.createElement(tag));\n    }\n  }\n\n  static fromNode(node: HTMLCanvasElement): CanvasView;\n  static fromNode(node: HTMLElement): HtmlView;\n  static fromNode(node: SVGElement): SvgView;\n  static fromNode(node: Element): ElementView;\n  static fromNode(node: Text): TextView;\n  static fromNode(node: Node): NodeView;\n  static fromNode(node: ViewNode): NodeView {\n    if (node.view instanceof View) {\n      return node.view;\n    } else if (node instanceof HTMLCanvasElement) {\n      return new View.Canvas(node);\n    } else if (node instanceof HTMLElement) {\n      return new HtmlView(node);\n    }\n    throw new TypeError(\"\" + node);\n  }\n\n  static fromConstructor<C extends ElementViewConstructor | RenderedViewConstructor>(viewConstructor: C): InstanceType<C>;\n  static fromConstructor(viewConstructor: ElementViewConstructor | RenderedViewConstructor): View {\n    if (ElementView.isConstructor(viewConstructor)) {\n      return new viewConstructor(document.createElement(viewConstructor.tag));\n    }\n    throw new TypeError(\"\" + viewConstructor);\n  }\n\n  static create<T extends keyof HtmlViewTagMap>(tag: T): HtmlViewTagMap[T];\n  static create(tag: string): HtmlView;\n  static create(node: HTMLCanvasElement): CanvasView;\n  static create(node: HTMLElement): HtmlView;\n  static create<C extends ElementViewConstructor<HTMLElement, HtmlView>>(viewConstructor: C): InstanceType<C>;\n  static create(source: string | HTMLElement | ElementViewConstructor<HTMLElement, HtmlView>): HtmlView {\n    if (typeof source === \"string\") {\n      return HtmlView.fromTag(source);\n    } else if (source instanceof HTMLElement) {\n      return HtmlView.fromNode(source);\n    } else if (typeof source === \"function\") {\n      return HtmlView.fromConstructor(source);\n    }\n    throw new TypeError(\"\" + source);\n  }\n\n  /** @hidden */\n  static readonly tag: string = \"div\";\n}\nView.Html = HtmlView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ElementViewController} from \"../element/ElementViewController\";\nimport {HtmlView} from \"./HtmlView\";\nimport {HtmlViewObserver} from \"./HtmlViewObserver\";\n\nexport class HtmlViewController<V extends HtmlView = HtmlView> extends ElementViewController<V> implements HtmlViewObserver<V> {\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {AnyRenderer, RendererType, Renderer, CanvasRenderer, WebGLRenderer} from \"@swim/render\";\nimport {ViewEvent, ViewMouseEvent, ViewTouch, ViewTouchEvent} from \"../ViewEvent\";\nimport {ViewContext} from \"../ViewContext\";\nimport {ViewFlags, View} from \"../View\";\nimport {RenderedViewContext} from \"../rendered/RenderedViewContext\";\nimport {RenderedView} from \"../rendered/RenderedView\";\nimport {RenderedViewObserver} from \"../rendered/RenderedViewObserver\";\nimport {ViewNode, ViewNodeType, NodeView} from \"../node/NodeView\";\nimport {TextView} from \"../text/TextView\";\nimport {ElementViewConstructor, ElementView} from \"../element/ElementView\";\nimport {HtmlChildViewTagMap, HtmlView} from \"../html/HtmlView\";\nimport {CanvasViewObserver} from \"./CanvasViewObserver\";\nimport {CanvasViewController} from \"./CanvasViewController\";\n\nexport interface ViewCanvas extends HTMLCanvasElement {\n  view?: CanvasView;\n}\n\nexport class CanvasView extends HtmlView implements RenderedView {\n  /** @hidden */\n  _eventSurface: Node;\n  /** @hidden */\n  readonly _renderedViews: RenderedView[];\n  /** @hidden */\n  _renderer: Renderer | null | undefined;\n  /** @hidden */\n  _viewFrame: BoxR2;\n  /** @hidden */\n  _clientX: number;\n  /** @hidden */\n  _clientY: number;\n  /** @hidden */\n  _screenX: number;\n  /** @hidden */\n  _screenY: number;\n  /**\n   * The `RenderedView` over which the mouse is currently hovering.\n   * @hidden\n   */\n  _hoverView: RenderedView | null;\n  /**\n   * The currently active touches.\n   * @hidden\n   */\n  readonly _touches: {[identifier: string]: ViewTouch | undefined};\n\n  constructor(node: HTMLCanvasElement) {\n    super(node);\n    this.onClick = this.onClick.bind(this);\n    this.onDblClick = this.onDblClick.bind(this);\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchCancel = this.onTouchCancel.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n\n    this._eventSurface = this._node;\n    this._renderedViews = [];\n    this._renderer = void 0;\n    this._viewFrame = BoxR2.empty();\n    this._clientX = 0;\n    this._clientY = 0;\n    this._screenX = 0;\n    this._screenY = 0;\n    this._hoverView = null;\n    this._touches = {};\n  }\n\n  get node(): ViewCanvas {\n    return this._node;\n  }\n\n  protected initNode(node: ViewNodeType<this>): void {\n    node.style.position = \"absolute\";\n  }\n\n  get viewController(): CanvasViewController | null {\n    return this._viewController;\n  }\n\n  get canvasView(): CanvasView | null {\n    return this;\n  }\n\n  get childViews(): ReadonlyArray<View> {\n    const childNodes = this._node.childNodes;\n    const childViews = [];\n    for (let i = 0, n = childNodes.length; i < n; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childViews.push(childView);\n      }\n    }\n    childViews.push.apply(childViews, this._renderedViews);\n    return childViews;\n  }\n\n  setChildView(key: string, newChildView: View | null): View | null {\n    if (RenderedView.is(newChildView)) {\n      return this.setRenderedView(key, newChildView);\n    } else {\n      return super.setChildView(key, newChildView);\n    }\n  }\n\n  setRenderedView(key: string, newChildView: RenderedView | null): View | null {\n    if (newChildView !== null && !RenderedView.is(newChildView)) {\n      throw new TypeError(\"\" + newChildView);\n    }\n    let index = -1;\n    let oldChildView: View | null = null;\n    let targetView: View | null = null;\n    const childViews = this._renderedViews;\n    const childViewMap = this._childViewMap;\n    if (childViewMap !== void 0) {\n      const childView = childViewMap[key];\n      if (RenderedView.is(childView)) {\n        index = childViews.indexOf(childView);\n        // assert(index >= 0);\n        oldChildView = childView;\n        targetView = childViews[index + 1];\n        this.willRemoveChildView(childView);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        childViews.splice(index, 1);\n        this.onRemoveChildView(childView);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n      } else if (childView !== void 0) {\n        oldChildView = childView;\n        if (!(childView instanceof NodeView)) {\n          throw new TypeError(\"\" + childView);\n        }\n        const childNode = childView._node;\n        const targetNode = childNode.nextSibling;\n        targetView = targetNode !== null ? (targetNode as ViewNode).view || null : null;\n        this.willRemoveChildView(childView);\n        this.willRemoveChildNode(childNode);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        this._node.removeChild(childNode);\n        this.onRemoveChildNode(childNode);\n        this.onRemoveChildView(childView);\n        this.didRemoveChildNode(childNode);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n      }\n    }\n    if (newChildView !== null) {\n      newChildView.setKey(key);\n      this.willInsertChildView(newChildView, targetView);\n      if (index >= 0) {\n        childViews.splice(index, 0, newChildView);\n      } else {\n        childViews.push(newChildView);\n      }\n      this.insertChildViewMap(newChildView);\n      newChildView.setParentView(this, null);\n      this.onInsertChildView(newChildView, targetView);\n      this.didInsertChildView(newChildView, targetView);\n    }\n    return oldChildView;\n  }\n\n  get renderedViews(): ReadonlyArray<RenderedView> {\n    return this._renderedViews;\n  }\n\n  append<T extends keyof HtmlChildViewTagMap>(tag: T, key?: string): HtmlChildViewTagMap[T];\n  append(tag: string, key?: string): HtmlView;\n  append(childNode: HTMLElement, key?: string): HtmlView;\n  append(childNode: Element, key?: string): ElementView;\n  append(childNode: Text, key?: string): TextView;\n  append(childNode: Node, key?: string): NodeView;\n  append<V extends NodeView | RenderedView>(childView: V, key?: string): V;\n  append<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  append(child: string | Node | View | ElementViewConstructor, key?: string): View {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.appendChildView(child, key);\n    return child;\n  }\n\n  appendChildView(childView: View, key?: string): void {\n    if (RenderedView.is(childView)) {\n      this.appendRenderedView(childView, key);\n    } else {\n      super.appendChildView(childView, key);\n    }\n  }\n\n  appendRenderedView(childView: RenderedView, key?: string): void {\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, null);\n    this._renderedViews.push(childView);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, null);\n    this.didInsertChildView(childView, null);\n  }\n\n  prepend<T extends keyof HtmlChildViewTagMap>(tag: T, key?: string): HtmlChildViewTagMap[T];\n  prepend(tag: string, key?: string): HtmlView;\n  prepend(childNode: HTMLElement, key?: string): HtmlView;\n  prepend(childNode: Element, key?: string): ElementView;\n  prepend(childNode: Text, key?: string): TextView;\n  prepend(childNode: Node, key?: string): NodeView;\n  prepend<V extends NodeView | RenderedView>(childView: V, key?: string): V;\n  prepend<C extends ElementViewConstructor>(viewConstructor: C, key?: string): InstanceType<C>;\n  prepend(child: string | Node | View | ElementViewConstructor, key?: string): View {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.prependChildView(child, key);\n    return child;\n  }\n\n  prependChildView(childView: View, key?: string): void {\n    if (RenderedView.is(childView)) {\n      this.prependRenderedView(childView);\n    } else {\n      super.prependChildView(childView);\n    }\n  }\n\n  prependRenderedView(childView: RenderedView, key?: string): void {\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, null);\n    this._renderedViews.unshift(childView);\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, null);\n    this.didInsertChildView(childView, null);\n  }\n\n  insert<T extends keyof HtmlChildViewTagMap>(tag: T, target: View | Node | null, key?: string): HtmlChildViewTagMap[T];\n  insert(tag: string, target: View | Node | null, key?: string): HtmlView;\n  insert(childNode: HTMLElement, target: View | Node | null, key?: string): HtmlView;\n  insert(childNode: Element, target: View | Node | null, key?: string): ElementView;\n  insert(childNode: Text, target: View | Node | null, key?: string): TextView;\n  insert(childNode: Node, target: View | Node | null, key?: string): NodeView;\n  insert<V extends NodeView | RenderedView>(childView: V, target: View | Node | null, key?: string): V;\n  insert<C extends ElementViewConstructor>(viewConstructor: C, target: View | Node | null, key?: string): InstanceType<C>;\n  insert(child: string | Node | View | ElementViewConstructor, target: View | Node | null, key?: string): View {\n    if (typeof child === \"string\") {\n      child = View.fromTag(child);\n    } else if (child instanceof Node) {\n      child = View.fromNode(child);\n    } else if (typeof child === \"function\") {\n      child = View.fromConstructor(child);\n    }\n    this.insertChild(child, target);\n    return child;\n  }\n\n  insertChildView(childView: View, targetView: View | null, key?: string): void {\n    if (RenderedView.is(childView) && RenderedView.is(targetView)) {\n      this.insertRenderedView(childView, targetView, key);\n    } else {\n      super.insertChildView(childView, targetView, key);\n    }\n  }\n\n  insertRenderedView(childView: RenderedView, targetView: View | null, key?: string): void {\n    if (targetView !== null && !RenderedView.is(targetView)) {\n      throw new TypeError(\"\" + targetView);\n    }\n    if (targetView !== null && targetView.parentView !== this) {\n      throw new TypeError(\"\" + targetView);\n    }\n    if (key !== void 0) {\n      this.removeChildView(key);\n      childView.setKey(key);\n    }\n    this.willInsertChildView(childView, targetView);\n    const renderedViews = this._renderedViews;\n    const index = targetView !== null ? renderedViews.indexOf(targetView) : -1;\n    if (index >= 0) {\n      renderedViews.splice(index, 0, childView);\n    } else {\n      renderedViews.push(childView);\n    }\n    this.insertChildViewMap(childView);\n    childView.setParentView(this, null);\n    this.onInsertChildView(childView, targetView);\n    this.didInsertChildView(childView, targetView);\n  }\n\n  removeChildView(key: string): View | null;\n  removeChildView(childView: View): void;\n  removeChildView(key: string | View): View | null | void {\n    let childView: View | null;\n    if (typeof key === \"string\") {\n      childView = this.getChildView(key);\n      if (childView === null) {\n        return null;\n      }\n    } else {\n      childView = key;\n    }\n    if (RenderedView.is(childView)) {\n      this.removeRenderedView(childView);\n    } else {\n      super.removeChildView(childView);\n    }\n    if (typeof key === \"string\") {\n      return childView;\n    }\n  }\n\n  removeRenderedView(childView: RenderedView): void {\n    if (childView.parentView !== this) {\n      throw new Error(\"not a child view\");\n    }\n    this.willRemoveChildView(childView);\n    childView.setParentView(null, this);\n    this.removeChildViewMap(childView);\n    const renderedViews = this._renderedViews;\n    const index = renderedViews.indexOf(childView);\n    if (index >= 0) {\n      renderedViews.splice(index, 1);\n    }\n    this.onRemoveChildView(childView);\n    this.didRemoveChildView(childView);\n    childView.setKey(null);\n  }\n\n  removeAll(): void {\n    super.removeAll();\n    const renderedViews = this._renderedViews;\n    do {\n      const count = renderedViews.length;\n      if (count > 0) {\n        const childView = renderedViews[count - 1];\n        this.willRemoveChildView(childView);\n        childView.setParentView(null, this);\n        this.removeChildViewMap(childView);\n        renderedViews.pop();\n        this.onRemoveChildView(childView);\n        this.didRemoveChildView(childView);\n        childView.setKey(null);\n        continue;\n      }\n      break;\n    } while (true);\n  }\n\n  get pixelRatio(): number {\n    return window.devicePixelRatio || 1;\n  }\n\n  get renderer(): Renderer | null {\n    let renderer = this._renderer;\n    if (renderer === void 0) {\n      renderer = this.createRenderer();\n      this._renderer = renderer;\n    }\n    return renderer;\n  }\n\n  setRenderer(renderer: AnyRenderer | null): void {\n    if (typeof renderer === \"string\") {\n      renderer = this.createRenderer(renderer as RendererType);\n    }\n    this._renderer = renderer;\n    this.resetRenderer();\n  }\n\n  protected createRenderer(rendererType: RendererType = \"canvas\"): Renderer | null {\n    if (rendererType === \"canvas\") {\n      const context = this._node.getContext(\"2d\");\n      if (context !== null) {\n        return new CanvasRenderer(context, this.pixelRatio);\n      } else {\n        throw new Error(\"Failed to create canvas rendering context\");\n      }\n    } else if (rendererType === \"webgl\") {\n      const context = this._node.getContext(\"webgl\");\n      if (context !== null) {\n        return new WebGLRenderer(context, this.pixelRatio);\n      } else {\n        throw new Error(\"Failed to create webgl rendering context\");\n      }\n    } else {\n      throw new Error(\"Failed to create \" + rendererType + \" renderer\");\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.addEventListeners(this._eventSurface);\n  }\n\n  /** @hidden */\n  doMountChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeMount();\n      }\n    }\n    const renderedViews = this._renderedViews;\n    for (let i = 0; i < renderedViews.length; i += 1) {\n      const childView = renderedViews[i];\n      childView.cascadeMount();\n    }\n  }\n\n  protected onUnmount(): void {\n    this.removeEventListeners(this._eventSurface);\n    super.onUnmount();\n  }\n\n  /** @hidden */\n  doUnmountChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeUnmount();\n      }\n    }\n    const renderedViews = this._renderedViews;\n    for (let i = 0; i < renderedViews.length; i += 1) {\n      const childView = renderedViews[i];\n      childView.cascadeUnmount();\n    }\n  }\n\n  /** @hidden */\n  doPowerChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadePower();\n      }\n    }\n    const renderedViews = this._renderedViews;\n    for (let i = 0; i < renderedViews.length; i += 1) {\n      const childView = renderedViews[i];\n      childView.cascadePower();\n    }\n  }\n\n  /** @hidden */\n  doUnpowerChildViews(): void {\n    const childNodes = this._node.childNodes;\n    for (let i = 0; i < childNodes.length; i += 1) {\n      const childView = (childNodes[i] as ViewNode).view;\n      if (childView !== void 0) {\n        childView.cascadeUnpower();\n      }\n    }\n    const renderedViews = this._renderedViews;\n    for (let i = 0; i < renderedViews.length; i += 1) {\n      const childView = renderedViews[i];\n      childView.cascadeUnpower();\n    }\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = 0;\n    if ((updateFlags & View.UpdateMask) !== 0) {\n      if ((updateFlags & View.ProcessMask) !== 0) {\n        additionalFlags |= View.NeedsProcess;\n      }\n      if ((updateFlags & View.DisplayMask) !== 0) {\n        additionalFlags |= View.NeedsDisplay;\n      }\n      additionalFlags |= View.NeedsRender;\n    }\n    return additionalFlags;\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.canvasViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  protected onScroll(viewContext: RenderedViewContext): void {\n    super.onScroll(viewContext);\n    this.setCulled(!this.intersectsViewport());\n  }\n\n  /** @hidden */\n  protected doProcessChildViews(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    const childNodes = this._node.childNodes;\n    const renderedViews = this._renderedViews;\n    if ((processFlags & View.ProcessMask) !== 0 && (childNodes.length !== 0 || renderedViews.length !== 0)) {\n      this.willProcessChildViews(viewContext);\n      let i = 0;\n      while (i < childNodes.length) {\n        const childView = (childNodes[i] as ViewNode).view;\n        if (childView !== void 0) {\n          const childViewContext = this.childViewContext(childView, viewContext);\n          this.doProcessChildView(childView, processFlags, childViewContext);\n          if ((childView._viewFlags & View.RemovingFlag) !== 0) {\n            childView._viewFlags &= ~View.RemovingFlag;\n            this.removeChildView(childView);\n            continue;\n          }\n        }\n        i += 1;\n      }\n      i = 0;\n      while (i < renderedViews.length) {\n        const childView = renderedViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doProcessChildView(childView, processFlags, childViewContext);\n        if ((childView.viewFlags & View.RemovingFlag) !== 0) {\n          childView.setViewFlags(childView.viewFlags & ~View.RemovingFlag);\n          this.removeChildView(childView);\n          continue;\n        }\n        i += 1;\n      }\n      this.didProcessChildViews(viewContext);\n    }\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.canvasViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  /** @hidden */\n  protected doDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    let cascadeFlags = displayFlags;\n    this._viewFlags &= ~(View.NeedsDisplay | View.NeedsComposite);\n    this.willDisplay(viewContext);\n    this._viewFlags |= View.DisplayingFlag;\n    try {\n      if (((this._viewFlags | displayFlags) & View.NeedsLayout) !== 0) {\n        cascadeFlags |= View.NeedsLayout;\n        this._viewFlags &= ~View.NeedsLayout;\n        this.willLayout(viewContext);\n      }\n      if (((this._viewFlags | displayFlags) & View.NeedsRender) !== 0) {\n        cascadeFlags |= View.NeedsRender;\n        this._viewFlags &= ~View.NeedsRender;\n        this.willRender(viewContext);\n      }\n\n      this.onDisplay(viewContext);\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.onLayout(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.onRender(viewContext);\n      }\n\n      this.doDisplayChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsRender) !== 0) {\n        this.didRender(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsLayout) !== 0) {\n        this.didLayout(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.DisplayingFlag;\n      this.didDisplay(viewContext);\n    }\n  }\n\n  protected didDisplay(viewContext: RenderedViewContext): void {\n    this.detectMouseHover();\n    super.didDisplay(viewContext);\n  }\n\n  protected onLayout(viewContext: RenderedViewContext): void {\n    super.onLayout(viewContext);\n    this.resizeCanvas(this._node);\n    this.resetRenderer();\n  }\n\n  protected willRender(viewContext: RenderedViewContext): void {\n    this.willObserve(function (viewObserver: RenderedViewObserver): void {\n      if (viewObserver.viewWillRender !== void 0) {\n        viewObserver.viewWillRender(viewContext, this);\n      }\n    });\n  }\n\n  protected onRender(viewContext: RenderedViewContext): void {\n    this.clearCanvas();\n  }\n\n  protected didRender(viewContext: RenderedViewContext): void {\n    this.didObserve(function (viewObserver: RenderedViewObserver): void {\n      if (viewObserver.viewDidRender !== void 0) {\n        viewObserver.viewDidRender(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  protected doDisplayChildViews(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    const childNodes = this._node.childNodes;\n    const renderedViews = this._renderedViews;\n    if ((displayFlags & View.DisplayMask) !== 0 && (childNodes.length !== 0 || renderedViews.length !== 0)) {\n      this.willDisplayChildViews(viewContext);\n      let i = 0;\n      while (i < childNodes.length) {\n        const childView = (childNodes[i] as ViewNode).view;\n        if (childView !== void 0) {\n          const childViewContext = this.childViewContext(childView, viewContext);\n          this.doDisplayChildView(childView, displayFlags, childViewContext);\n          if ((childView._viewFlags & View.RemovingFlag) !== 0) {\n            childView._viewFlags &= ~View.RemovingFlag;\n            this.removeChildView(childView);\n            continue;\n          }\n        }\n        i += 1;\n      }\n      i = 0;\n      while (i < renderedViews.length) {\n        const childView = renderedViews[i];\n        const childViewContext = this.childViewContext(childView, viewContext);\n        this.doDisplayChildView(childView, displayFlags, childViewContext);\n        if ((childView.viewFlags & View.RemovingFlag) !== 0) {\n          childView.setViewFlags(childView.viewFlags & ~View.RemovingFlag);\n          this.removeChildView(childView);\n          continue;\n        }\n        i += 1;\n      }\n      this.didDisplayChildViews(viewContext);\n    }\n  }\n\n  childViewContext(childView: View, viewContext: RenderedViewContext): RenderedViewContext {\n    return viewContext;\n  }\n\n  canvasViewContext(viewContext?: ViewContext): RenderedViewContext {\n    if (viewContext === void 0) {\n      viewContext = this.rootView!.viewContext;\n    }\n    return {\n      updateTime: viewContext.updateTime,\n      viewport: viewContext.viewport,\n      viewIdiom: viewContext.viewIdiom,\n      renderer: this.renderer,\n    };\n  }\n\n  isHidden(): boolean {\n    return (this._viewFlags & View.HiddenFlag) !== 0\n  }\n\n  setHidden(newHidden: boolean): void {\n    const oldHidden = (this._viewFlags & View.HiddenFlag) !== 0;\n    if (oldHidden !== newHidden) {\n      this.willSetHidden(newHidden);\n      if (newHidden) {\n        this._viewFlags |= View.HiddenFlag;\n      } else {\n        this._viewFlags &= ~View.HiddenFlag;\n      }\n      this.onSetHidden(newHidden);\n      this.didSetHidden(newHidden);\n    }\n  }\n\n  protected willSetHidden(hidden: boolean): void {\n    this.willObserve(function (viewObserver: CanvasViewObserver): void {\n      if (viewObserver.viewWillSetHidden !== void 0) {\n        viewObserver.viewWillSetHidden(hidden, this);\n      }\n    });\n  }\n\n  protected onSetHidden(hidden: boolean): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didSetHidden(hidden: boolean): void {\n    this.didObserve(function (viewObserver: CanvasViewObserver): void {\n      if (viewObserver.viewDidSetHidden !== void 0) {\n        viewObserver.viewDidSetHidden(hidden, this);\n      }\n    });\n  }\n\n  isCulled(): boolean {\n    return (this._viewFlags & View.CulledFlag) !== 0;\n  }\n\n  setCulled(newCulled: boolean): void {\n    const oldCulled = (this._viewFlags & View.CulledFlag) !== 0;\n    if (oldCulled !== newCulled) {\n      this.willSetCulled(newCulled);\n      if (newCulled) {\n        this._viewFlags |= View.CulledFlag;\n      } else {\n        this._viewFlags &= ~View.CulledFlag;\n      }\n      this.onSetCulled(newCulled);\n      this.didSetCulled(newCulled);\n    }\n  }\n\n  protected willSetCulled(culled: boolean): void {\n    this.willObserve(function (viewObserver: CanvasViewObserver): void {\n      if (viewObserver.viewWillSetCulled !== void 0) {\n        viewObserver.viewWillSetCulled(culled, this);\n      }\n    });\n  }\n\n  protected onSetCulled(culled: boolean): void {\n    if (!culled) {\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  protected didSetCulled(culled: boolean): void {\n    this.didObserve(function (viewObserver: CanvasViewObserver): void {\n      if (viewObserver.viewDidSetCulled !== void 0) {\n        viewObserver.viewDidSetCulled(culled, this);\n      }\n    });\n  }\n\n  get viewFrame(): BoxR2 {\n    return this._viewFrame;\n  }\n\n  setViewFrame(viewFrame: BoxR2 | null): void {\n    // nop\n  }\n\n  get viewBounds(): BoxR2 {\n    return this._viewFrame;\n  }\n\n  get hitBounds(): BoxR2 {\n    return this._viewFrame;\n  }\n\n  hitTest(x: number, y: number, viewContext?: RenderedViewContext): RenderedView | null {\n    if (viewContext === void 0) {\n      viewContext = this.canvasViewContext();\n    }\n    let hit: RenderedView | null = null;\n    const renderedViews = this._renderedViews;\n    for (let i = renderedViews.length - 1; i >= 0; i -= 1) {\n      const childView = renderedViews[i];\n      if (!childView.isHidden() && !childView.isCulled()) {\n        const hitBounds = childView.hitBounds;\n        if (hitBounds.contains(x, y)) {\n          hit = childView.hitTest(x, y, viewContext);\n          if (hit !== null) {\n            break;\n          }\n        }\n      }\n    }\n    return hit;\n  }\n\n  get eventSurface(): Node {\n    return this._eventSurface;\n  }\n\n  setEventSurface(eventSurface?: Node): void {\n    if (eventSurface === void 0) {\n      eventSurface = this._node;\n    }\n    if (this._eventSurface !== eventSurface) {\n      this.removeEventListeners(this._eventSurface);\n      this._eventSurface = eventSurface;\n      this.addEventListeners(this._eventSurface);\n    }\n  }\n\n  /** @hidden */\n  handleEvent(event: ViewEvent): void {\n    // nop\n  }\n\n  /** @hidden */\n  bubbleEvent(event: ViewEvent): View | null {\n    this.handleEvent(event);\n    return this;\n  }\n\n  /** @hidden */\n  protected addEventListeners(node: Node): void {\n    node.addEventListener(\"click\", this.onClick);\n    node.addEventListener(\"dblclick\", this.onDblClick);\n    node.addEventListener(\"contextmenu\", this.onContextMenu);\n    node.addEventListener(\"mousedown\", this.onMouseDown);\n    window.addEventListener(\"mousemove\", this.onMouseMove);\n    node.addEventListener(\"mouseup\", this.onMouseUp);\n    node.addEventListener(\"wheel\", this.onWheel, {passive: true});\n\n    node.addEventListener(\"touchstart\", this.onTouchStart, {passive: true});\n    node.addEventListener(\"touchmove\", this.onTouchMove, {passive: true});\n    node.addEventListener(\"touchcancel\", this.onTouchCancel);\n    node.addEventListener(\"touchend\", this.onTouchEnd);\n  }\n\n  /** @hidden */\n  protected removeEventListeners(node: Node): void {\n    node.removeEventListener(\"click\", this.onClick);\n    node.removeEventListener(\"dblclick\", this.onDblClick);\n    node.removeEventListener(\"contextmenu\", this.onContextMenu);\n    node.removeEventListener(\"mousedown\", this.onMouseDown);\n    window.removeEventListener(\"mousemove\", this.onMouseMove);\n    node.removeEventListener(\"mouseup\", this.onMouseUp);\n    node.removeEventListener(\"wheel\", this.onWheel);\n\n    node.removeEventListener(\"touchstart\", this.onTouchStart);\n    node.removeEventListener(\"touchmove\", this.onTouchMove);\n    node.removeEventListener(\"touchcancel\", this.onTouchCancel);\n    node.removeEventListener(\"touchend\", this.onTouchEnd);\n  }\n\n  /** @hidden */\n  fireEvent(event: ViewEvent, clientX: number, clientY: number): RenderedView | null {\n    const clientBounds = this.clientBounds;\n    if (clientBounds.contains(clientX, clientY)) {\n      const x = clientX - clientBounds.x;\n      const y = clientY - clientBounds.y;\n      const hit = this.hitTest(x, y);\n      if (hit !== null) {\n        event.targetView = hit;\n        hit.bubbleEvent(event);\n        return hit;\n      }\n    }\n    return null;\n  }\n\n  /** @hidden */\n  private fireMouseEvent(event: MouseEvent): RenderedView | null {\n    return this.fireEvent(event, event.clientX, event.clientY);\n  }\n\n  /** @hidden */\n  protected onClick(event: MouseEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onDblClick(event: MouseEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onContextMenu(event: MouseEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onMouseDown(event: MouseEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onMouseMove(event: MouseEvent): void {\n    this._clientX = event.clientX;\n    this._clientY = event.clientY;\n    this._screenX = event.screenX;\n    this._screenY = event.screenY;\n    const oldHoverView = this._hoverView;\n    const newHoverView = this.fireMouseEvent(event);\n    if (newHoverView !== this._hoverView) {\n      this.onMouseHoverChange(newHoverView, oldHoverView);\n    }\n  }\n\n  /** @hidden */\n  protected onMouseUp(event: MouseEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onWheel(event: WheelEvent): void {\n    this.fireMouseEvent(event);\n  }\n\n  /** @hidden */\n  protected onMouseHoverChange(newHoverView: RenderedView | null, oldHoverView: RenderedView | null): void {\n    const eventInit: MouseEventInit = {\n      clientX: this._clientX,\n      clientY: this._clientY,\n      screenX: this._screenX,\n      screenY: this._screenY,\n      bubbles: true,\n    };\n    if (oldHoverView !== null) {\n      const outEvent = new MouseEvent(\"mouseout\", eventInit) as ViewMouseEvent;\n      outEvent.targetView = oldHoverView;\n      outEvent.relatedTargetView = newHoverView;\n      oldHoverView.bubbleEvent(outEvent);\n    }\n    this._hoverView = newHoverView;\n    if (newHoverView !== null) {\n      const overEvent = new MouseEvent(\"mouseover\", eventInit) as ViewMouseEvent;\n      overEvent.targetView = newHoverView;\n      overEvent.relatedTargetView = oldHoverView;\n      newHoverView.bubbleEvent(overEvent);\n    }\n  }\n\n  /** @hidden */\n  protected detectMouseHover(): void {\n    const clientBounds = this.clientBounds;\n    if (clientBounds.contains(this._clientX, this._clientY)) {\n      const x = this._clientX - clientBounds.x;\n      const y = this._clientY - clientBounds.y;\n      const oldHoverView = this._hoverView;\n      const newHoverView = this.hitTest(x, y);\n      if (newHoverView !== oldHoverView) {\n        this.onMouseHoverChange(newHoverView, oldHoverView);\n      }\n    }\n  }\n\n  /** @hidden */\n  private fireTouchEvent(type: string, originalEvent: TouchEvent, dispatched: RenderedView[]): void {\n    const changedTouches = originalEvent.changedTouches;\n    for (let i = 0, n = changedTouches.length; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      const targetView = changedTouch.targetView as RenderedView | undefined;\n      if (targetView !== void 0 && dispatched.indexOf(targetView) < 0) {\n        const startEvent = new TouchEvent(type, {\n          changedTouches: changedTouches as unknown as Touch[],\n          targetTouches: originalEvent.targetTouches as unknown as Touch[],\n          touches: originalEvent.touches as unknown as Touch[],\n          bubbles: true,\n        }) as ViewTouchEvent;\n        startEvent.targetView = targetView;\n        const targetViewTouches: Touch[] = [changedTouch];\n        for (let j = i + 1; j < n; j += 1) {\n          const nextTouch = changedTouches[j] as ViewTouch;\n          if (nextTouch.targetView === targetView) {\n            targetViewTouches.push(nextTouch);\n          }\n        }\n        if (typeof (document as any).createTouchList) {\n          startEvent.targetViewTouches = (document as any).createTouchList(...targetViewTouches);\n        } else {\n          (targetViewTouches as unknown as TouchList).item = function (index: number): Touch {\n            return targetViewTouches[index];\n          };\n          startEvent.targetViewTouches = targetViewTouches as unknown as TouchList;\n        }\n        targetView.bubbleEvent(startEvent);\n        dispatched.push(targetView);\n      }\n    }\n  }\n\n  /** @hidden */\n  protected onTouchStart(event: TouchEvent): void {\n    const clientBounds = this.clientBounds;\n    const changedTouches = event.changedTouches;\n    for (let i = 0, n = changedTouches.length; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      const clientX = changedTouch.clientX;\n      const clientY = changedTouch.clientY;\n      if (clientBounds.contains(clientX, clientY)) {\n        const x = clientX - clientBounds.x;\n        const y = clientY - clientBounds.y;\n        const hit = this.hitTest(x, y);\n        if (hit !== null) {\n          changedTouch.targetView = hit;\n        }\n      }\n      this._touches[changedTouch.identifier] = changedTouch;\n    }\n    const dispatched: RenderedView[] = [];\n    this.fireTouchEvent(\"touchstart\", event, dispatched);\n  }\n\n  /** @hidden */\n  protected onTouchMove(event: TouchEvent): void {\n    const changedTouches = event.changedTouches;\n    for (let i = 0, n = changedTouches.length; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      const touch = this._touches[changedTouch.identifier];\n      if (touch !== void 0) {\n        changedTouch.targetView = touch.targetView;\n      }\n    }\n    const dispatched: RenderedView[] = [];\n    this.fireTouchEvent(\"touchmove\", event, dispatched);\n  }\n\n  /** @hidden */\n  protected onTouchCancel(event: TouchEvent): void {\n    const changedTouches = event.changedTouches;\n    const n = changedTouches.length;\n    for (let i = 0; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      const touch = this._touches[changedTouch.identifier];\n      if (touch !== void 0) {\n        changedTouch.targetView = touch.targetView;\n      }\n    }\n    const dispatched: RenderedView[] = [];\n    this.fireTouchEvent(\"touchcancel\", event, dispatched);\n    for (let i = 0; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      delete this._touches[changedTouch.identifier];\n    }\n  }\n\n  /** @hidden */\n  protected onTouchEnd(event: TouchEvent): void {\n    const changedTouches = event.changedTouches;\n    const n = changedTouches.length;\n    for (let i = 0; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      const touch = this._touches[changedTouch.identifier];\n      if (touch !== void 0) {\n        changedTouch.targetView = touch.targetView;\n      }\n    }\n    const dispatched: RenderedView[] = [];\n    this.fireTouchEvent(\"touchend\", event, dispatched);\n    for (let i = 0; i < n; i += 1) {\n      const changedTouch = changedTouches[i] as ViewTouch;\n      delete this._touches[changedTouch.identifier];\n    }\n  }\n\n  protected resizeCanvas(node: ViewCanvas): void {\n    let width: number;\n    let height: number;\n    let pixelRatio: number;\n    let parentNode = node.parentNode;\n    if (parentNode instanceof HTMLElement) {\n      let bounds: ClientRect | DOMRect;\n      do {\n        bounds = parentNode.getBoundingClientRect();\n        if (bounds.width !== 0 && bounds.height !== 0) {\n          break;\n        }\n        parentNode = parentNode.parentNode;\n      } while (parentNode instanceof HTMLElement);\n      width = Math.floor(bounds.width);\n      height = Math.floor(bounds.height);\n      pixelRatio = this.pixelRatio;\n      node.width = width * pixelRatio;\n      node.height = height * pixelRatio;\n      node.style.width = width + \"px\";\n      node.style.height = height + \"px\";\n    } else {\n      width = Math.floor(node.width);\n      height = Math.floor(node.height);\n      pixelRatio = 1;\n    }\n    this._viewFrame = new BoxR2(0, 0, width, height);\n  }\n\n  clearCanvas(): void {\n    const renderer = this.renderer;\n    if (renderer instanceof CanvasRenderer) {\n      const frame = this._viewFrame;\n      renderer.context.clearRect(0, 0, frame.width, frame.height);\n    } else if (renderer instanceof WebGLRenderer) {\n      const context = renderer.context;\n      context.clear(context.COLOR_BUFFER_BIT | context.DEPTH_BUFFER_BIT);\n    }\n  }\n\n  resetRenderer(): void {\n    const renderer = this.renderer;\n    if (renderer instanceof CanvasRenderer) {\n      const pixelRatio = this.pixelRatio;\n      renderer.context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    } else if (renderer instanceof WebGLRenderer) {\n      const frame = this._viewFrame;\n      renderer.context.viewport(0, 0, frame.width, frame.height);\n    }\n  }\n\n  /** @hidden */\n  static readonly tag: string = \"canvas\";\n}\nView.Canvas = CanvasView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {RenderedViewContext} from \"../rendered/RenderedViewContext\";\nimport {RenderedViewController} from \"../rendered/RenderedViewController\";\nimport {HtmlViewController} from \"../html/HtmlViewController\";\nimport {CanvasView} from \"./CanvasView\";\nimport {CanvasViewObserver} from \"./CanvasViewObserver\";\n\nexport class CanvasViewController<V extends CanvasView = CanvasView> extends HtmlViewController<V> implements RenderedViewController<V>, CanvasViewObserver<V> {\n  viewWillProcess(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidProcess(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillScroll(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidScroll(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillDerive(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDerive(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillAnimate(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidAnimate(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillProcessChildViews(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidProcessChildViews(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillDisplay(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDisplay(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillLayout(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidLayout(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillRender(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidRender(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewWillDisplayChildViews(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidDisplayChildViews(viewContext: RenderedViewContext, view: V): void {\n    // hook\n  }\n\n  isHidden(): boolean {\n    const view = this._view;\n    return view !== null && view.isHidden();\n  }\n\n  viewWillSetHidden(hidden: boolean, view: V): boolean | void {\n    // hook\n  }\n\n  viewDidSetHidden(hidden: boolean, view: V): void {\n    // hook\n  }\n\n  isCulled(): boolean {\n    const view = this._view;\n    return view !== null && view.isCulled();\n  }\n\n  viewWillSetCulled(culled: boolean, view: V): boolean | void {\n    // hook\n  }\n\n  viewDidSetCulled(culled: boolean, view: V): void {\n    // hook\n  }\n\n  get viewFrame(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.viewFrame : BoxR2.empty();\n  }\n\n  get viewBounds(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.viewBounds : BoxR2.empty();\n  }\n\n  get hitBounds(): BoxR2 {\n    const view = this._view;\n    return view !== null ? view.hitBounds : BoxR2.empty();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ConstrainVariable, Constraint, ConstraintSolver} from \"@swim/constraint\";\nimport {LayoutManager} from \"../layout/LayoutManager\";\nimport {LayoutSolver} from \"../layout/LayoutSolver\";\nimport {LayoutAnchor} from \"../layout/LayoutAnchor\";\nimport {ViewEdgeInsets} from \"../ViewMetrics\";\nimport {ViewportColorScheme, Viewport} from \"../Viewport\";\nimport {ViewIdiom} from \"../ViewIdiom\";\nimport {ViewContext} from \"../ViewContext\";\nimport {ViewFlags, View} from \"../View\";\nimport {ModalOptions, Modal} from \"../modal/Modal\";\nimport {RootView} from \"../root/RootView\";\nimport {RootViewObserver} from \"../root/RootViewObserver\";\nimport {ViewNode} from \"../node/NodeView\";\nimport {HtmlView} from \"../html/HtmlView\";\nimport {UiViewContext} from \"./UiViewContext\";\nimport {UiViewObserver} from \"./UiViewObserver\";\nimport {UiViewController} from \"./UiViewController\";\n\nexport class UiView extends HtmlView implements RootView, LayoutManager {\n  /** @hidden */\n  readonly _viewContext: UiViewContext;\n  /** @hidden */\n  _processTimer: number;\n  /** @hidden */\n  _displayFrame: number;\n  /** @hidden */\n  _updateDelay: number;\n  /** @hidden */\n  _reorientationTimer: number;\n  /** @hidden */\n  _layoutSolver: LayoutSolver | undefined;\n  /** @hidden */\n  _modals: Modal[] | undefined;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this.runProcessPass = this.runProcessPass.bind(this);\n    this.runDisplayPass = this.runDisplayPass.bind(this);\n    this.throttleResize = this.throttleResize.bind(this);\n    this.throttleScroll = this.throttleScroll.bind(this);\n    this.debounceReorientation = this.debounceReorientation.bind(this);\n    this.doReorientation = this.doReorientation.bind(this);\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this._processTimer = 0;\n    this._displayFrame = 0;\n    this._updateDelay = UiView.MinUpdateDelay;\n    this._reorientationTimer = 0;\n    this._viewContext = this.createViewContext();\n    this.initUi();\n  }\n\n  protected initUi(): void {\n    this.doRootMount();\n  }\n\n  get viewController(): UiViewController | null {\n    return this._viewController;\n  }\n\n  @LayoutAnchor<UiView>({\n    get(oldState: number): number {\n      const newState = this.viewport.safeArea.insetTop;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    strength: \"strong\",\n  })\n  safeAreaInsetTop: LayoutAnchor<this>;\n\n  @LayoutAnchor<UiView>({\n    get(oldState: number): number {\n      const newState = this.viewport.safeArea.insetRight;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    strength: \"strong\",\n  })\n  safeAreaInsetRight: LayoutAnchor<this>;\n\n  @LayoutAnchor<UiView>({\n    get(oldState: number): number {\n      const newState = this.viewport.safeArea.insetBottom;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    strength: \"strong\",\n  })\n  safeAreaInsetBottom: LayoutAnchor<this>;\n\n  @LayoutAnchor<UiView>({\n    get(oldState: number): number {\n      const newState = this.viewport.safeArea.insetLeft;\n      if (oldState !== newState) {\n        this.requireUpdate(View.NeedsLayout);\n      }\n      return newState;\n    },\n    strength: \"strong\",\n  })\n  safeAreaInsetLeft: LayoutAnchor<this>;\n\n  /** @hidden */\n  isRootView(): boolean {\n    let node = this._node as Node;\n    do {\n      const parentNode: ViewNode | null = node.parentNode;\n      if (parentNode !== null) {\n        const parentView = parentNode.view;\n        if (parentView instanceof View) {\n          return false;\n        }\n        node = parentNode;\n        continue;\n      }\n      break;\n    } while (true);\n    return true;\n  }\n\n  /** @hidden */\n  protected doRootMount(): void {\n    if (this.isRootView()) {\n      if (!this.isMounted() && this.isNodeMounted()) {\n        this.cascadeMount();\n      }\n      if (this.isMounted() && !this.isPowered() && this.isUiPowered()) {\n        this.cascadePower();\n      }\n    }\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.addEventListeners(this._node);\n  }\n\n  protected onUnmount(): void {\n    this.removeEventListeners(this._node);\n    super.onUnmount();\n  }\n\n  /** @hidden */\n  isUiPowered(): boolean {\n    return document.visibilityState === \"visible\";\n  }\n\n  protected onPower(): void {\n    super.onPower();\n    this.requireUpdate(View.NeedsResize | View.NeedsScroll);\n  }\n\n  protected onUnpower(): void {\n    this.cancelUpdate();\n    if (this._reorientationTimer !== 0) {\n      clearTimeout(this._reorientationTimer);\n      this._reorientationTimer = 0;\n    }\n    this._updateDelay = UiView.MinUpdateDelay;\n    super.onUnpower();\n  }\n\n  protected modifyUpdate(updateFlags: ViewFlags): ViewFlags {\n    let additionalFlags = super.modifyUpdate(updateFlags);\n    if ((updateFlags & View.NeedsResize) !== 0) {\n      additionalFlags |= View.NeedsLayout;\n    }\n    return additionalFlags;\n  }\n\n  requestUpdate(updateFlags: ViewFlags, immediate: boolean): void {\n    updateFlags = this.willRequestUpdate(updateFlags, immediate);\n    if (immediate && this._updateDelay <= UiView.MaxProcessInterval) {\n      this.runImmediatePass();\n    } else {\n      this.scheduleUpdate();\n    }\n    this.didRequestUpdate(updateFlags, immediate);\n  }\n\n  /** @hidden */\n  protected scheduleUpdate(): void {\n    const viewFlags = this._viewFlags;\n    if (this._displayFrame === 0 && this._processTimer === 0\n        && (viewFlags & (View.ProcessingFlag | View.DisplayingFlag)) === 0) {\n      if ((viewFlags & View.ProcessMask) !== 0) {\n        this._processTimer = setTimeout(this.runProcessPass, this._updateDelay) as any;\n      } else if ((viewFlags & View.DisplayMask) !== 0) {\n        this._displayFrame = requestAnimationFrame(this.runDisplayPass);\n      }\n    }\n  }\n\n  /** @hidden */\n  protected cancelUpdate(): void {\n    if (this._processTimer !== 0) {\n      clearTimeout(this._processTimer);\n      this._processTimer = 0;\n    }\n    if (this._displayFrame !== 0) {\n      cancelAnimationFrame(this._displayFrame);\n      this._displayFrame = 0;\n    }\n  }\n\n  protected runImmediatePass(): void {\n    if ((this._viewFlags & View.ProcessMask) !== 0) {\n      this.cancelUpdate();\n      this.runProcessPass(true);\n    }\n    if ((this._viewFlags & View.DisplayMask) !== 0 && this._updateDelay <= UiView.MaxProcessInterval) {\n      this.cancelUpdate();\n      this.runDisplayPass(void 0, true);\n    }\n  }\n\n  /** @hidden */\n  runProcessPass(immediate: boolean = false): void {\n    if (immediate) {\n      this._viewFlags |= View.ImmediateFlag;\n    }\n\n    const viewContext = this._viewContext;\n    const t0 = performance.now();\n    viewContext.updateTime = t0;\n    let processFlags = this._viewFlags;\n    processFlags = this.needsProcess(processFlags, viewContext);\n    this.doProcess(processFlags, viewContext);\n\n    const t1 = performance.now();\n    let processDelay = Math.max(UiView.MinProcessInterval, this._updateDelay);\n    if (t1 - t0 > processDelay) {\n      this._updateDelay = Math.min(Math.max(2, this._updateDelay << 1), UiView.MaxUpdateDelay);\n    } else {\n      this._updateDelay = Math.min(UiView.MinUpdateDelay, this._updateDelay >>> 1);\n    }\n\n    this.cancelUpdate();\n    if ((this._viewFlags & View.DisplayMask) !== 0) {\n      this._displayFrame = requestAnimationFrame(this.runDisplayPass);\n    } else if ((this._viewFlags & View.ProcessMask) !== 0) {\n      if ((this._viewFlags & View.ImmediateFlag) !== 0) {\n        processDelay = Math.max(UiView.MaxProcessInterval, processDelay);\n      }\n      this._processTimer = setTimeout(this.runProcessPass, processDelay) as any;\n    }\n\n    if (!immediate) {\n      this._viewFlags &= ~View.ImmediateFlag;\n    }\n  }\n\n  /** @hidden */\n  runDisplayPass(time?: number, immediate: boolean = false): void {\n    if (immediate) {\n      this._viewFlags |= View.ImmediateFlag;\n    }\n\n    const viewContext = this._viewContext;\n    let displayFlags = this._viewFlags;\n    displayFlags = this.needsDisplay(displayFlags, viewContext);\n    this.doDisplay(displayFlags, viewContext);\n\n    this.cancelUpdate();\n    if ((this._viewFlags & View.ProcessMask) !== 0) {\n      let processDelay = this._updateDelay;\n      if ((this._viewFlags & View.ImmediateFlag) !== 0) {\n        processDelay = Math.max(UiView.MaxProcessInterval, processDelay);\n      }\n      this._processTimer = setTimeout(this.runProcessPass, processDelay) as any;\n    } else if ((this._viewFlags & View.DisplayMask) !== 0) {\n      this._displayFrame = requestAnimationFrame(this.runDisplayPass);\n    }\n\n    if (!immediate) {\n      this._viewFlags &= ~View.ImmediateFlag;\n    }\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: ViewContext): void {\n    // ignore ancestor updates\n  }\n\n  /** @hidden */\n  protected doProcess(processFlags: ViewFlags, viewContext: UiViewContext): void {\n    let cascadeFlags = processFlags;\n    this._viewFlags &= ~(View.NeedsProcess | View.NeedsProject);\n    this.willProcess(viewContext);\n    this._viewFlags |= View.ProcessingFlag;\n    try {\n      if (((this._viewFlags | processFlags) & View.NeedsResize) !== 0) {\n        cascadeFlags |= View.NeedsResize;\n        this._viewFlags &= ~View.NeedsResize;\n        this.willResize(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsScroll) !== 0) {\n        cascadeFlags |= View.NeedsScroll;\n        this._viewFlags &= ~View.NeedsScroll;\n        this.willScroll(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsDerive) !== 0) {\n        cascadeFlags |= View.NeedsDerive;\n        this._viewFlags &= ~View.NeedsDerive;\n        this.willDerive(viewContext);\n      }\n      if (((this._viewFlags | processFlags) & View.NeedsAnimate) !== 0) {\n        cascadeFlags |= View.NeedsAnimate;\n        this._viewFlags &= ~View.NeedsAnimate;\n        this.willAnimate(viewContext);\n      }\n\n      this.onProcess(viewContext);\n      if ((cascadeFlags & View.NeedsResize) !== 0) {\n        this.onResize(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.onScroll(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.onDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.onAnimate(viewContext);\n      }\n\n      this.doProcessChildViews(cascadeFlags, viewContext);\n\n      if ((cascadeFlags & View.NeedsAnimate) !== 0) {\n        this.didAnimate(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsDerive) !== 0) {\n        this.didDerive(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsScroll) !== 0) {\n        this.didScroll(viewContext);\n      }\n      if ((cascadeFlags & View.NeedsResize) !== 0) {\n        this.didResize(viewContext);\n      }\n    } finally {\n      this._viewFlags &= ~View.ProcessingFlag;\n      this.didProcess(viewContext);\n    }\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: ViewContext): void {\n    // ignore ancestor updates\n  }\n\n  protected updateLayoutStates(): void {\n    super.updateLayoutStates();\n    const safeAreaInsetTop = this.getLayoutAnchor(\"safeAreaInsetTop\");\n    if (safeAreaInsetTop !== null) {\n      this.safeAreaInsetTop.updateState();\n    }\n    const safeAreaInsetRight = this.getLayoutAnchor(\"safeAreaInsetRight\");\n    if (safeAreaInsetRight !== null) {\n      safeAreaInsetRight.updateState();\n    }\n    const safeAreaInsetBottom = this.getLayoutAnchor(\"safeAreaInsetBottom\");\n    if (safeAreaInsetBottom !== null) {\n      safeAreaInsetBottom.updateState();\n    }\n    const safeAreaInsetLeft = this.getLayoutAnchor(\"safeAreaInsetLeft\");\n    if (safeAreaInsetLeft !== null) {\n      safeAreaInsetLeft.updateState();\n    }\n  }\n\n  protected willResize(viewContext: UiViewContext): void {\n    this.willObserve(function (viewObserver: UiViewObserver): void {\n      if (viewObserver.viewWillResize !== void 0) {\n        viewObserver.viewWillResize(viewContext, this);\n      }\n    });\n  }\n\n  protected onResize(viewContext: UiViewContext): void {\n    this._viewContext.viewport = this.detectViewport();\n  }\n\n  protected didResize(viewContext: UiViewContext): void {\n    this.didObserve(function (viewObserver: UiViewObserver): void {\n      if (viewObserver.viewDidResize !== void 0) {\n        viewObserver.viewDidResize(viewContext, this);\n      }\n    });\n  }\n\n  /** @hidden */\n  get layoutSolver(): ConstraintSolver | null {\n    const layoutSolver = this._layoutSolver;\n    return layoutSolver !== void 0 ? layoutSolver : null;\n  }\n\n  /** @hidden */\n  activateConstraint(constraint: Constraint): void {\n    let layoutSolver = this._layoutSolver;\n    if (layoutSolver === void 0) {\n      layoutSolver = new LayoutSolver(this);\n      this._layoutSolver = layoutSolver;\n    }\n    layoutSolver.addConstraint(constraint);\n  }\n\n  /** @hidden */\n  deactivateConstraint(constraint: Constraint): void {\n    const layoutSolver = this._layoutSolver;\n    if (layoutSolver !== void 0) {\n      layoutSolver.removeConstraint(constraint);\n    }\n  }\n\n  /** @hidden */\n  activateConstraintVariable(constraintVariable: ConstrainVariable): void {\n    let layoutSolver = this._layoutSolver;\n    if (layoutSolver === void 0) {\n      layoutSolver = new LayoutSolver(this);\n      this._layoutSolver = layoutSolver;\n    }\n    layoutSolver.addConstraintVariable(constraintVariable);\n  }\n\n  /** @hidden */\n  deactivateConstraintVariable(constraintVariable: ConstrainVariable): void {\n    const layoutSolver = this._layoutSolver;\n    if (layoutSolver !== void 0) {\n      layoutSolver.removeConstraintVariable(constraintVariable);\n    }\n  }\n\n  /** @hidden */\n  setConstraintVariable(constraintVariable: ConstrainVariable, state: number): void {\n    const layoutSolver = this._layoutSolver;\n    if (layoutSolver !== void 0) {\n      layoutSolver.setConstraintVariable(constraintVariable, state);\n    }\n  }\n\n  /** @hidden */\n  updateConstraintVariables(): void {\n    const layoutSolver = this._layoutSolver;\n    if (layoutSolver !== void 0) {\n      layoutSolver.updateConstraintVariables();\n    }\n  }\n\n  /** @hidden */\n  didAddConstraint(constraint: Constraint): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  /** @hidden */\n  didRemoveConstraint(constraint: Constraint): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  /** @hidden */\n  didAddConstraintVariable(constraintVariable: ConstrainVariable): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  /** @hidden */\n  didRemoveConstraintVariable(constraintVariable: ConstrainVariable): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  /** @hidden */\n  didUpdateConstraintVariable(constraintVariable: ConstrainVariable, newValue: number, oldValue: number): void {\n    if (oldValue !== newValue) {\n      this.requireUpdate(View.NeedsLayout);\n    }\n  }\n\n  get modals(): ReadonlyArray<Modal> {\n    let modals = this._modals;\n    if (modals === void 0) {\n      modals = [];\n      this._modals = modals;\n    }\n    return modals;\n  }\n\n  toggleModal(modal: Modal, options?: ModalOptions): void {\n    const modalState = modal.modalState;\n    if (modalState === \"hidden\" || modalState === \"hiding\") {\n      this.presentModal(modal, options);\n    } else if (modalState === \"shown\" || modalState === \"showing\") {\n      this.dismissModal(modal);\n    }\n  }\n\n  presentModal(modal: Modal, options: ModalOptions = {}): void {\n    let modals = this._modals;\n    if (modals === void 0) {\n      modals = [];\n      this._modals = modals;\n    }\n    if (modals.indexOf(modal) < 0) {\n      if (!options.multi) {\n        this.dismissModals();\n      }\n      this.willPresentModal(modal, options);\n      modals.push(modal);\n      const modalView = modal.modalView;\n      if (modalView !== null && !modalView.isMounted()) {\n        this.insertModalView(modalView);\n      }\n      this.onPresentModal(modal, options);\n      modal.showModal(true);\n      this.didPresentModal(modal, options);\n    }\n  }\n\n  protected insertModalView(modalView: View): void {\n    // subclasses can override to change modal container\n    this.appendChildView(modalView);\n  }\n\n  protected willPresentModal(modal: Modal, options: ModalOptions): void {\n    this.willObserve(function (viewObserver: RootViewObserver): void {\n      if (viewObserver.viewWillPresentModal !== void 0) {\n        viewObserver.viewWillPresentModal(modal, options, this);\n      }\n    });\n  }\n\n  protected onPresentModal(modal: Modal, options: ModalOptions): void {\n    // hook\n  }\n\n  protected didPresentModal(modal: Modal, options: ModalOptions): void {\n    this.didObserve(function (viewObserver: RootViewObserver): void {\n      if (viewObserver.viewDidPresentModal !== void 0) {\n        viewObserver.viewDidPresentModal(modal, options, this);\n      }\n    });\n  }\n\n  dismissModal(modal: Modal): void {\n    const modals = this._modals;\n    if (modals !== void 0) {\n      const index = modals.indexOf(modal);\n      if (index >= 0) {\n        this.willDismissModal(modal);\n        modals.splice(index, 1);\n        this.onDismissModal(modal);\n        modal.hideModal(true);\n        this.didDismissModal(modal);\n      }\n    }\n  }\n\n  protected willDismissModal(modal: Modal): void {\n    this.willObserve(function (viewObserver: RootViewObserver): void {\n      if (viewObserver.viewWillDismissModal !== void 0) {\n        viewObserver.viewWillDismissModal(modal, this);\n      }\n    });\n  }\n\n  protected onDismissModal(modal: Modal): void {\n    // hook\n  }\n\n  protected didDismissModal(modal: Modal): void {\n    this.didObserve(function (viewObserver: RootViewObserver): void {\n      if (viewObserver.viewDidDismissModal !== void 0) {\n        viewObserver.viewDidDismissModal(modal, this);\n      }\n    });\n  }\n\n  dismissModals(): void {\n    const modals = this._modals;\n    if (modals !== void 0) {\n      while (modals.length !== 0) {\n        const modal = modals[0];\n        this.willDismissModal(modal);\n        modals.shift();\n        this.onDismissModal(modal);\n        modal.hideModal(true);\n        this.didDismissModal(modal);\n      }\n    }\n  }\n\n  get viewport(): Viewport {\n    return this._viewContext.viewport;\n  }\n\n  /** @hidden */\n  protected detectViewport(): Viewport {\n    let insetTop = 0;\n    let insetRight = 0;\n    let insetBottom = 0;\n    let insetLeft = 0;\n    const documentWidth = document.documentElement.style.width;\n    const documentHeight = document.documentElement.style.height;\n    document.documentElement.style.width = \"100%\";\n    document.documentElement.style.height = \"100%\";\n    const div = document.createElement(\"div\");\n    div.style.setProperty(\"position\", \"fixed\");\n    div.style.setProperty(\"top\", \"0\");\n    div.style.setProperty(\"right\", \"0\");\n    div.style.setProperty(\"width\", window.innerWidth === document.documentElement.offsetWidth ? \"100%\" : \"100vw\");\n    div.style.setProperty(\"height\", window.innerHeight === document.documentElement.offsetHeight ? \"100%\" : \"100vh\");\n    div.style.setProperty(\"box-sizing\", \"border-box\");\n    div.style.setProperty(\"padding-top\", \"env(safe-area-inset-top)\");\n    div.style.setProperty(\"padding-right\", \"env(safe-area-inset-right)\");\n    div.style.setProperty(\"padding-bottom\", \"env(safe-area-inset-bottom)\");\n    div.style.setProperty(\"padding-left\", \"env(safe-area-inset-left)\");\n    div.style.setProperty(\"overflow\", \"hidden\");\n    div.style.setProperty(\"visibility\", \"hidden\");\n    document.body.appendChild(div);\n    const style = window.getComputedStyle(div);\n    const width = parseFloat(style.getPropertyValue(\"width\"));\n    const height = parseFloat(style.getPropertyValue(\"height\"));\n    if (typeof CSS !== \"undefined\" && typeof CSS.supports === \"function\"\n        && CSS.supports(\"padding-top: env(safe-area-inset-top)\")) {\n      insetTop = parseFloat(style.getPropertyValue(\"padding-top\"));\n      insetRight = parseFloat(style.getPropertyValue(\"padding-right\"));\n      insetBottom = parseFloat(style.getPropertyValue(\"padding-bottom\"));\n      insetLeft = parseFloat(style.getPropertyValue(\"padding-left\"));\n    }\n    document.body.removeChild(div);\n    document.documentElement.style.width = documentWidth;\n    document.documentElement.style.height = documentHeight;\n    const safeArea: ViewEdgeInsets = {insetTop, insetRight, insetBottom, insetLeft};\n    let orientation: OrientationType | undefined =\n        (screen as any).msOrientation ||\n        (screen as any).mozOrientation ||\n        (screen.orientation || {}).type;\n    if (orientation === void 0) {\n      switch (window.orientation) {\n        case 0: orientation = \"portrait-primary\"; break;\n        case 180: orientation = \"portrait-secondary\"; break;\n        case -90: orientation = \"landscape-primary\"; break;\n        case 90: orientation = \"landscape-secondary\"; break;\n        default: orientation = \"landscape-primary\";\n      }\n    }\n    let colorScheme: ViewportColorScheme;\n    if (window.matchMedia(\"(prefers-color-scheme: dark)\").matches) {\n      colorScheme = \"dark\";\n    } else if (window.matchMedia(\"(prefers-color-scheme: light)\").matches) {\n      colorScheme = \"light\";\n    } else {\n      colorScheme = \"no-preference\";\n    }\n    return {width, height, safeArea, orientation, colorScheme};\n  }\n\n  get viewIdiom(): ViewIdiom {\n    return this._viewContext.viewIdiom;\n  }\n\n  setViewIdiom(newViewIdiom: ViewIdiom): void {\n    const viewContext = this._viewContext;\n    const oldViewIdiom = viewContext.viewIdiom;\n    if (oldViewIdiom !== newViewIdiom) {\n      this.willSetViewIdiom(newViewIdiom, oldViewIdiom);\n      viewContext.viewIdiom = newViewIdiom;\n      this.onSetViewIdiom(newViewIdiom, oldViewIdiom);\n      this.didSetViewIdiom(newViewIdiom, oldViewIdiom);\n    }\n  }\n\n  protected willSetViewIdiom(newViewIdiom: ViewIdiom, oldViewIdiom: ViewIdiom): void {\n    // hook\n  }\n\n  protected onSetViewIdiom(newViewIdiom: ViewIdiom, oldViewIdiom: ViewIdiom): void {\n    this.requireUpdate(View.NeedsLayout);\n  }\n\n  protected didSetViewIdiom(newViewIdiom: ViewIdiom, oldViewIdiom: ViewIdiom): void {\n    // hook\n  }\n\n  get viewContext(): ViewContext {\n    return this._viewContext;\n  }\n\n  protected createViewContext(): UiViewContext {\n    return {\n      updateTime: performance.now(),\n      viewport: this.detectViewport(),\n      viewIdiom: \"unspecified\",\n    };\n  }\n\n  get rootView(): this {\n    return this;\n  }\n\n  /** @hidden */\n  protected addEventListeners(node: Node): void {\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"resize\", this.throttleResize);\n      window.addEventListener(\"scroll\", this.throttleScroll, {passive: true});\n      window.addEventListener(\"orientationchange\", this.debounceReorientation);\n    }\n    if (typeof document !== \"undefined\") {\n      document.addEventListener(\"visibilitychange\", this.onVisibilityChange);\n    }\n    node.addEventListener('click', this.onClick);\n  }\n\n  /** @hidden */\n  protected removeEventListeners(node: Node): void {\n    if (typeof window !== \"undefined\") {\n      window.removeEventListener(\"resize\", this.throttleResize);\n      window.removeEventListener(\"scroll\", this.throttleScroll);\n      window.removeEventListener(\"orientationchange\", this.debounceReorientation);\n    }\n    if (typeof document !== \"undefined\") {\n      document.removeEventListener(\"visibilitychange\", this.onVisibilityChange);\n    }\n    node.removeEventListener('click', this.onClick);\n  }\n\n  /** @hidden */\n  throttleResize(): void {\n    this.requireUpdate(View.NeedsResize | View.NeedsLayout);\n  }\n\n  /** @hidden */\n  throttleScroll(): void {\n    this.requireUpdate(View.NeedsScroll);\n  }\n\n  /** @hidden */\n  protected debounceReorientation(): void {\n    if (this._reorientationTimer !== 0) {\n      clearTimeout(this._reorientationTimer);\n      this._reorientationTimer = 0;\n    }\n    this._reorientationTimer = setTimeout(this.doReorientation, 500) as any;\n  }\n\n  /** @hidden */\n  protected doReorientation(): void {\n    if (this._reorientationTimer !== 0) {\n      clearTimeout(this._reorientationTimer);\n      this._reorientationTimer = 0;\n    }\n    this.throttleResize();\n  }\n\n  /** @hidden */\n  protected onVisibilityChange(): void {\n    if (this.isMounted()) {\n      const powered = this.isPowered();\n      const visibilityState = document.visibilityState;\n      if (!powered && visibilityState === \"visible\") {\n        this.cascadePower();\n      } else if (powered && visibilityState !== \"visible\") {\n        this.cascadeUnpower();\n      }\n    }\n  }\n\n  protected onClick(event: Event): void {\n    this.onFallthroughClick(event);\n  }\n\n  onFallthroughClick(event: Event): void {\n    this.dismissModals();\n  }\n\n  /** @hidden */\n  static MinUpdateDelay: number = 0;\n  /** @hidden */\n  static MaxUpdateDelay: number = 167;\n  /** @hidden */\n  static MinProcessInterval: number = 12;\n  /** @hidden */\n  static MaxProcessInterval: number = 33;\n}\nView.Ui = UiView;\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {ModalOptions, Modal} from \"../modal/Modal\";\nimport {RootViewController} from \"../root/RootViewController\";\nimport {HtmlViewController} from \"../html/HtmlViewController\";\nimport {UiViewContext} from \"./UiViewContext\";\nimport {UiView} from \"./UiView\";\nimport {UiViewObserver} from \"./UiViewObserver\";\n\nexport class UiViewController<V extends UiView = UiView> extends HtmlViewController<V> implements RootViewController<V>, UiViewObserver<V> {\n  viewWillResize(viewContext: UiViewContext, view: V): void {\n    // hook\n  }\n\n  viewDidResize(viewContext: UiViewContext, view: V): void {\n    // hook\n  }\n\n  get modals(): ReadonlyArray<Modal> {\n    const view = this._view;\n    return view !== null ? view.modals : [];\n  }\n\n  viewWillPresentModal(modal: Modal, options: ModalOptions, view: V): void {\n    // hook\n  }\n\n  viewDidPresentModal(modal: Modal, options: ModalOptions, view: V): void {\n    // hook\n  }\n\n  viewWillDismissModal(modal: Modal, view: V): void {\n    // hook\n  }\n\n  viewDidDismissModal(modal: Modal, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals} from \"@swim/util\";\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {BoxR2} from \"@swim/math\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {DrawingContext, Renderer, PathContext, PathRenderer, Graphics} from \"@swim/render\";\n\nexport type AnyRect = Rect | RectInit;\n\nexport interface RectInit {\n  x: AnyLength;\n  y: AnyLength;\n  width: AnyLength;\n  height: AnyLength;\n}\n\nexport class Rect implements Graphics, Equals, Debug {\n  /** @hidden */\n  readonly _x: Length;\n  /** @hidden */\n  readonly _y: Length;\n  /** @hidden */\n  readonly _width: Length;\n  /** @hidden */\n  readonly _height: Length;\n\n  constructor(x: Length, y: Length, width: Length, height: Length) {\n    this._x = x;\n    this._y = y;\n    this._width = width;\n    this._height = height;\n  }\n\n  x(): Length;\n  x(x: AnyLength): Rect;\n  x(x?: AnyLength): Length | Rect {\n    if (x === void 0) {\n      return this._x;\n    } else {\n      x = Length.fromAny(x);\n      if (this._x.equals(x)) {\n        return this;\n      } else {\n        return this.copy(x, this._y, this._width, this._height);\n      }\n    }\n  }\n\n  y(): Length;\n  y(y: AnyLength): Rect;\n  y(y?: AnyLength): Length | Rect {\n    if (y === void 0) {\n      return this._y;\n    } else {\n      y = Length.fromAny(y);\n      if (this._y.equals(y)) {\n        return this;\n      } else {\n        return this.copy(this._x, y, this._width, this._height);\n      }\n    }\n  }\n\n  width(): Length;\n  width(width: AnyLength): Rect;\n  width(width?: AnyLength): Length | Rect {\n    if (width === void 0) {\n      return this._width;\n    } else {\n      width = Length.fromAny(width);\n      if (this._width.equals(width)) {\n        return this;\n      } else {\n        return this.copy(this._x, this._y, width, this._height);\n      }\n    }\n  }\n\n  height(): Length;\n  height(height: AnyLength): Rect;\n  height(height?: AnyLength): Length | Rect {\n    if (height === void 0) {\n      return this._height;\n    } else {\n      height = Length.fromAny(height);\n      if (this._height.equals(height)) {\n        return this;\n      } else {\n        return this.copy(this._x, this._y, this._width, height);\n      }\n    }\n  }\n\n  render(): string;\n  render(renderer: Renderer, frame?: BoxR2): void;\n  render(renderer?: Renderer, frame?: BoxR2): string | void {\n    if (renderer === void 0) {\n      const context = new PathContext();\n      this.draw(context, frame);\n      return context.toString();\n    } else if (renderer instanceof PathRenderer) {\n      this.draw(renderer.context, frame);\n    }\n  }\n\n  draw(context: DrawingContext, frame?: BoxR2): void {\n    this.renderRect(context, frame);\n  }\n\n  protected renderRect(context: DrawingContext, frame: BoxR2 | undefined): void {\n    context.rect(this._x.pxValue(), this._y.pxValue(),\n                 this._width.pxValue(), this._height.pxValue());\n  }\n\n  protected copy(x: Length, y: Length, width: Length, height: Length): Rect {\n    return new Rect(x, y, width, height);\n  }\n\n  toAny(): RectInit {\n    return {\n      x: this._x,\n      y: this._y,\n      width: this._width,\n      height: this._height,\n    };\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Rect) {\n      return this._x.equals(that._x) && this._y.equals(that._y)\n          && this._width.equals(that._width) && this._height.equals(that._height);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Rect\").write(46/*'.'*/).write(\"from\").write(40/*'('*/)\n        .debug(this._x).write(\", \").debug(this._y).write(\", \")\n        .debug(this._width).write(\", \").debug(this._height).write(41/*')'*/);\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static from(x: AnyLength, y: AnyLength, width: AnyLength, height: AnyLength): Rect {\n    x = Length.fromAny(x);\n    y = Length.fromAny(y);\n    width = Length.fromAny(width);\n    height = Length.fromAny(height);\n    return new Rect(x, y, width, height);\n  }\n\n  static fromAny(rect: AnyRect): Rect {\n    if (rect instanceof Rect) {\n      return rect;\n    } else if (typeof rect === \"object\" && rect !== null) {\n      return Rect.from(rect.x, rect.y, rect.width, rect.height);\n    }\n    throw new TypeError(\"\" + rect);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {BoxR2} from \"@swim/math\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {CanvasContext, CanvasRenderer} from \"@swim/render\";\nimport {\n  MemberAnimator,\n  RenderedViewContext,\n  RenderedView,\n  FillViewInit,\n  FillView,\n  StrokeViewInit,\n  StrokeView,\n  GraphicsView,\n  GraphicsViewController,\n} from \"@swim/view\";\nimport {Rect} from \"./Rect\";\n\nexport type AnyRectView = RectView | Rect | RectViewInit;\n\nexport interface RectViewInit extends FillViewInit, StrokeViewInit {\n  x?: AnyLength;\n  y?: AnyLength;\n  width?: AnyLength;\n  height?: AnyLength;\n}\n\nexport class RectView extends GraphicsView implements FillView, StrokeView {\n  get viewController(): GraphicsViewController<RectView> | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  x: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  y: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  width: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  height: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Color, {inherit: true})\n  fill: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, {inherit: true})\n  stroke: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Length, {inherit: true})\n  strokeWidth: MemberAnimator<this, Length, AnyLength>;\n\n  get value(): Rect {\n    return new Rect(this.x.value!, this.y.value!, this.width.value!, this.height.value!);\n  }\n\n  get state(): Rect {\n    return new Rect(this.x.state!, this.y.state!, this.width.state!, this.height.state!);\n  }\n\n  setState(rect: Rect | RectViewInit, tween?: Tween<any>): void {\n    if (rect instanceof Rect) {\n      rect = rect.toAny();\n    }\n    if (rect.x !== void 0) {\n      this.x(rect.x, tween);\n    }\n    if (rect.y !== void 0) {\n      this.y(rect.y, tween);\n    }\n    if (rect.width !== void 0) {\n      this.width(rect.width, tween);\n    }\n    if (rect.height !== void 0) {\n      this.height(rect.height, tween);\n    }\n    if (rect.fill !== void 0) {\n      this.fill(rect.fill, tween);\n    }\n    if (rect.stroke !== void 0) {\n      this.stroke(rect.stroke, tween);\n    }\n    if (rect.strokeWidth !== void 0) {\n      this.strokeWidth(rect.strokeWidth, tween);\n    }\n    if (rect.hidden !== void 0) {\n      this.setHidden(rect.hidden);\n    }\n    if (rect.culled !== void 0) {\n      this.setCulled(rect.culled);\n    }\n  }\n\n  protected onRender(viewContext: RenderedViewContext): void {\n    super.onRender(viewContext);\n    const renderer = viewContext.renderer;\n    if (renderer instanceof CanvasRenderer && !this.isHidden() && !this.isCulled()) {\n      const context = renderer.context;\n      context.save();\n      this.renderRect(context, this.viewFrame);\n      context.restore();\n    }\n  }\n\n  protected renderRect(context: CanvasContext, frame: BoxR2): void {\n    const x = this.x.value!.pxValue(frame.width);\n    const y = this.y.value!.pxValue(frame.height);\n    const width = this.width.value!.pxValue(frame.width);\n    const height = this.height.value!.pxValue(frame.height);\n    context.beginPath();\n    context.rect(x, y, width, height);\n    const fill = this.fill.value;\n    if (fill !== void 0) {\n      context.fillStyle = fill.toString();\n      context.fill();\n    }\n    const stroke = this.stroke.value;\n    if (stroke !== void 0) {\n      const strokeWidth = this.strokeWidth.value;\n      if (strokeWidth !== void 0) {\n        const size = Math.min(frame.width, frame.height);\n        context.lineWidth = strokeWidth.pxValue(size);\n      }\n      context.strokeStyle = stroke.toString();\n      context.stroke();\n    }\n  }\n\n  get viewBounds(): BoxR2 {\n    const frame = this.viewFrame;\n    const x = this.x.value!.pxValue(frame.width);\n    const y = this.y.value!.pxValue(frame.height);\n    const width = this.width.value!.pxValue(frame.width);\n    const height = this.height.value!.pxValue(frame.height);\n    return new BoxR2(x, y, x + width, y + height);\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    let hit = super.hitTest(x, y, viewContext);\n    if (hit === null) {\n      const renderer = viewContext.renderer;\n      if (renderer instanceof CanvasRenderer) {\n        const context = renderer.context;\n        context.save();\n        x *= renderer.pixelRatio;\n        y *= renderer.pixelRatio;\n        hit = this.hitTestRect(x, y, context, this.viewFrame);\n        context.restore();\n      }\n    }\n    return hit;\n  }\n\n  protected hitTestRect(hx: number, hy: number, context: CanvasContext, frame: BoxR2): RenderedView | null {\n    const x = this.x.value!.pxValue(frame.width);\n    const y = this.y.value!.pxValue(frame.height);\n    const width = this.width.value!.pxValue(frame.width);\n    const height = this.height.value!.pxValue(frame.height);\n    context.beginPath();\n    context.rect(x, y, width, height);\n    if (this.fill.value !== void 0 && context.isPointInPath(hx, hy)) {\n      return this;\n    } else if (this.stroke.value !== void 0) {\n      const strokeWidth = this.strokeWidth.value;\n      if (strokeWidth !== void 0) {\n        const size = Math.min(frame.width, frame.height);\n        context.lineWidth = strokeWidth.pxValue(size);\n        if (context.isPointInStroke(hx, hy)) {\n          return this;\n        }\n      }\n    }\n    return null;\n  }\n\n  static fromAny(rect: AnyRectView): RectView {\n    if (rect instanceof RectView) {\n      return rect;\n    } else if (rect instanceof Rect || typeof rect === \"object\" && rect !== null) {\n      const view = new RectView();\n      view.setState(rect);\n      return view;\n    }\n    throw new TypeError(\"\" + rect);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals, Objects} from \"@swim/util\";\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {AnyPointR2, PointR2, BoxR2} from \"@swim/math\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {DrawingContext, Renderer, PathContext, PathRenderer, Graphics} from \"@swim/render\";\n\nconst PI = Math.PI;\nconst TAU = 2 * PI;\nconst EPSILON = 1e-12;\n\nexport type AnyArc = Arc | ArcInit;\n\nexport interface ArcInit {\n  center?: PointR2;\n  innerRadius?: AnyLength;\n  outerRadius?: AnyLength;\n  startAngle?: AnyAngle;\n  sweepAngle?: AnyAngle;\n  padAngle?: AnyAngle;\n  padRadius?: AnyLength | null;\n  cornerRadius?: AnyLength;\n}\n\nexport class Arc implements Graphics, Equals, Debug {\n  /** @hidden */\n  readonly _center: PointR2;\n  /** @hidden */\n  readonly _innerRadius: Length;\n  /** @hidden */\n  readonly _outerRadius: Length;\n  /** @hidden */\n  readonly _startAngle: Angle;\n  /** @hidden */\n  readonly _sweepAngle: Angle;\n  /** @hidden */\n  readonly _padAngle: Angle;\n  /** @hidden */\n  readonly _padRadius: Length | null;\n  /** @hidden */\n  readonly _cornerRadius: Length;\n\n  constructor(center: PointR2, innerRadius: Length, outerRadius: Length, startAngle: Angle,\n              sweepAngle: Angle, padAngle: Angle, padRadius: Length | null, cornerRadius: Length) {\n    this._center = center;\n    this._innerRadius = innerRadius;\n    this._outerRadius = outerRadius;\n    this._startAngle = startAngle;\n    this._sweepAngle = sweepAngle;\n    this._padAngle = padAngle;\n    this._padRadius = padRadius;\n    this._cornerRadius = cornerRadius;\n  }\n\n  center(): PointR2;\n  center(center: AnyPointR2): Arc;\n  center(center?: AnyPointR2): PointR2 | Arc {\n    if (center === void 0) {\n      return this._center;\n    } else {\n      center = PointR2.fromAny(center);\n      if (this._center.equals(center)) {\n        return this;\n      } else {\n        return this.copy(center as PointR2, this._innerRadius, this._outerRadius, this._startAngle,\n                         this._sweepAngle, this._padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  innerRadius(): Length;\n  innerRadius(innerRadius: AnyLength): Arc;\n  innerRadius(innerRadius?: AnyLength): Length | Arc {\n    if (innerRadius === void 0) {\n      return this._innerRadius;\n    } else {\n      innerRadius = Length.fromAny(innerRadius);\n      if (this._innerRadius.equals(innerRadius)) {\n        return this;\n      } else {\n        return this.copy(this._center, innerRadius, this._outerRadius, this._startAngle,\n                         this._sweepAngle, this._padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  outerRadius(): Length;\n  outerRadius(outerRadius: AnyLength): Arc;\n  outerRadius(outerRadius?: AnyLength): Length | Arc {\n    if (outerRadius === void 0) {\n      return this._outerRadius;\n    } else {\n      outerRadius = Length.fromAny(outerRadius);\n      if (this._outerRadius.equals(outerRadius)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, outerRadius, this._startAngle,\n                         this._sweepAngle, this._padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  startAngle(): Angle;\n  startAngle(startAngle: AnyAngle): Arc;\n  startAngle(startAngle?: AnyAngle): Angle | Arc {\n    if (startAngle === void 0) {\n      return this._startAngle;\n    } else {\n      startAngle = Angle.fromAny(startAngle);\n      if (this._startAngle.equals(startAngle)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, this._outerRadius, startAngle,\n                         this._sweepAngle, this._padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  sweepAngle(): Angle;\n  sweepAngle(sweepAngle: AnyAngle): Arc;\n  sweepAngle(sweepAngle?: AnyAngle): Angle | Arc {\n    if (sweepAngle === void 0) {\n      return this._sweepAngle;\n    } else {\n      sweepAngle = Angle.fromAny(sweepAngle);\n      if (this._sweepAngle.equals(sweepAngle)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, this._outerRadius, this._startAngle,\n                         sweepAngle, this._padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  padAngle(): Angle;\n  padAngle(padAngle: AnyAngle): Arc;\n  padAngle(padAngle?: AnyAngle): Angle | Arc {\n    if (padAngle === void 0) {\n      return this._padAngle;\n    } else {\n      padAngle = Angle.fromAny(padAngle);\n      if (this._padAngle.equals(padAngle)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, this._outerRadius, this._startAngle,\n                         this._sweepAngle, padAngle, this._padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  padRadius(): Length | null;\n  padRadius(padRadius: AnyLength | null): Arc;\n  padRadius(padRadius?: AnyLength | null): Length | null | Arc {\n    if (padRadius === void 0) {\n      return this._padRadius;\n    } else {\n      padRadius = padRadius !== null ? Length.fromAny(padRadius) : null;\n      if (Objects.equal(this._padRadius, padRadius)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, this._outerRadius, this._startAngle,\n                         this._sweepAngle, this._padAngle, padRadius, this._cornerRadius);\n      }\n    }\n  }\n\n  cornerRadius(): Length;\n  cornerRadius(cornerRadius: AnyLength): Arc;\n  cornerRadius(cornerRadius?: AnyLength): Length | Arc {\n    if (cornerRadius === void 0) {\n      return this._cornerRadius;\n    } else {\n      cornerRadius = Length.fromAny(cornerRadius);\n      if (this._cornerRadius.equals(cornerRadius)) {\n        return this;\n      } else {\n        return this.copy(this._center, this._innerRadius, this._outerRadius, this._startAngle,\n                         this._sweepAngle, this._padAngle, this._padRadius, cornerRadius);\n      }\n    }\n  }\n\n  render(): string;\n  render(renderer: Renderer, frame?: BoxR2): void;\n  render(renderer?: Renderer, frame?: BoxR2): string | void {\n    if (renderer === void 0) {\n      const context = new PathContext();\n      this.draw(context, frame);\n      return context.toString();\n    } else if (renderer instanceof PathRenderer) {\n      this.draw(renderer.context, frame);\n    }\n  }\n\n  draw(context: DrawingContext, frame?: BoxR2): void {\n    this.renderArc(context, frame);\n  }\n\n  protected renderArc(context: DrawingContext, frame: BoxR2 | undefined): void {\n    let size: number | undefined;\n    if (frame !== void 0) {\n      size = Math.min(frame.width, frame.height);\n    }\n\n    const center = this._center;\n    const cx = center.x;\n    const cy = center.y;\n    let r0 = this._innerRadius.pxValue(size);\n    let r1 = this._outerRadius.pxValue(size);\n    const a0 = this._startAngle.radValue();\n    const da = this._sweepAngle.radValue();\n    const a1 = a0 + da;\n    const cw = da >= 0;\n\n    if (r1 < r0) {\n      // swap inner and outer radii\n      const r = r1;\n      r1 = r0;\n      r0 = r;\n    }\n\n    if (!(r1 > EPSILON)) {\n      // degenerate point\n      context.moveTo(cx, cy);\n    } else if (da > TAU - EPSILON) {\n      // full circle or annulus\n      context.moveTo(cx + r1 * Math.cos(a0), cy + r1 * Math.sin(a0));\n      context.arc(cx, cy, r1, a0, a1, !cw);\n      if (r0 > EPSILON) {\n        context.moveTo(cx + r0 * Math.cos(a1), cy + r0 * Math.sin(a1));\n        context.arc(cx, cy, r0, a1, a0, cw);\n      }\n    } else {\n      // circular or annular sector\n      let a01 = a0;\n      let a11 = a1;\n      let a00 = a0;\n      let a10 = a1;\n      let da0 = da;\n      let da1 = da;\n      const ap = (this._padAngle.radValue()) / 2;\n      const rp = +(ap > EPSILON) && (this._padRadius !== null ? this._padRadius.pxValue(size) : Math.sqrt(r0 * r0 + r1 * r1));\n      const rc = Math.min(Math.abs(r1 - r0) / 2, this._cornerRadius.pxValue(size));\n      let rc0 = rc;\n      let rc1 = rc;\n\n      if (rp > EPSILON) {\n        // apply padding\n        let p0 = Math.asin(rp / r0 * Math.sin(ap));\n        let p1 = Math.asin(rp / r1 * Math.sin(ap));\n        if ((da0 -= p0 * 2) > EPSILON) {\n          p0 *= cw ? 1 : -1;\n          a00 += p0;\n          a10 -= p0;\n        } else {\n          da0 = 0;\n          a00 = a10 = (a0 + a1) / 2;\n        }\n        if ((da1 -= p1 * 2) > EPSILON) {\n          p1 *= cw ? 1 : -1;\n          a01 += p1;\n          a11 -= p1;\n        } else {\n          da1 = 0;\n          a01 = a11 = (a0 + a1) / 2;\n        }\n      }\n\n      let x00: number | undefined;\n      let y00: number | undefined;\n      const x01 = r1 * Math.cos(a01);\n      const y01 = r1 * Math.sin(a01);\n      const x10 = r0 * Math.cos(a10);\n      const y10 = r0 * Math.sin(a10);\n      let x11: number | undefined;\n      let y11: number | undefined;\n\n      if (rc > EPSILON) {\n        // rounded corners\n        x11 = r1 * Math.cos(a11);\n        y11 = r1 * Math.sin(a11);\n        x00 = r0 * Math.cos(a00);\n        y00 = r0 * Math.sin(a00);\n\n        if (da < PI) {\n          // limit corner radius to sector angle\n          const oc = da0 > EPSILON ? Arc.intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10];\n          const ax = x01 - oc[0];\n          const ay = y01 - oc[1];\n          const bx = x11 - oc[0];\n          const by = y11 - oc[1];\n          const kc = 1 / Math.sin(0.5 * Math.acos((ax * bx + ay * by) /\n                                                  (Math.sqrt(ax * ax + ay * ay) *\n                                                   Math.sqrt(bx * bx + by * by))));\n          const lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = Math.min(rc, (r0 - lc) / (kc - 1));\n          rc1 = Math.min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      if (!(da1 > EPSILON)) {\n        // collapsed sector\n        context.moveTo(cx + x01, cy + y01);\n      } else if (rc1 > EPSILON) {\n        // rounded outer corners\n        const t0 = Arc.cornerTangents(x00!, y00!, x01, y01, r1, rc1, cw);\n        const t1 = Arc.cornerTangents(x11!, y11!, x10, y10, r1, rc1, cw);\n\n        context.moveTo(cx + t0.cx + t0.x01, cy + t0.cy + t0.y01);\n\n        if (rc1 < rc) {\n          // draw merged outer corners\n          context.arc(cx + t0.cx, cy + t0.cy, rc1, Math.atan2(t0.y01, t0.x01), Math.atan2(t1.y01, t1.x01), !cw);\n        } else {\n          // draw outer corners and arc\n          context.arc(cx + t0.cx, cy + t0.cy, rc1, Math.atan2(t0.y01, t0.x01), Math.atan2(t0.y11, t0.x11), !cw);\n          context.arc(cx, cy, r1, Math.atan2(t0.cy + t0.y11, t0.cx + t0.x11),\n                      Math.atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(cx + t1.cx, cy + t1.cy, rc1, Math.atan2(t1.y11, t1.x11), Math.atan2(t1.y01, t1.x01), !cw);\n        }\n      } else {\n        // draw outer circular arc\n        context.moveTo(cx + x01, cy + y01);\n        context.arc(cx, cy, r1, a01, a11, !cw);\n      }\n\n      if (!(r0 > EPSILON) || !(da0 > EPSILON)) {\n        // collapsed sector\n        context.lineTo(cx + x10, cy + y10);\n      } else if (rc0 > EPSILON) {\n        // rounded inner corners\n        const t0 = Arc.cornerTangents(x10, y10, x11!, y11!, r0, -rc0, cw);\n        const t1 = Arc.cornerTangents(x01, y01, x00!, y00!, r0, -rc0, cw);\n\n        context.lineTo(cx + t0.cx + t0.x01, cy + t0.cy + t0.y01);\n\n        if (rc0 < rc) {\n          // draw merged inner corners\n          context.arc(cx + t0.cx, cy + t0.cy, rc0, Math.atan2(t0.y01, t0.x01), Math.atan2(t1.y01, t1.x01), !cw);\n        } else {\n          // draw inner corners and arc\n          context.arc(cx + t0.cx, cy + t0.cy, rc0, Math.atan2(t0.y01, t0.x01), Math.atan2(t0.y11, t0.x11), !cw);\n          context.arc(cx, cy, r0, Math.atan2(t0.cy + t0.y11, t0.cx + t0.x11),\n                      Math.atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(cx + t1.cx, cy + t1.cy, rc0, Math.atan2(t1.y11, t1.x11), Math.atan2(t1.y01, t1.x01), !cw);\n        }\n      } else {\n        // draw inner circular arc\n        context.arc(cx, cy, r0, a10, a00, cw);\n      }\n    }\n\n    context.closePath();\n  }\n\n  protected copy(center: PointR2, innerRadius: Length, outerRadius: Length, startAngle: Angle,\n                 sweepAngle: Angle, padAngle: Angle, padRadius: Length | null, cornerRadius: Length): Arc {\n    return new Arc(center, innerRadius, outerRadius, startAngle, sweepAngle, padAngle, padRadius, cornerRadius);\n  }\n\n  toAny(): ArcInit {\n    return {\n      center: this._center,\n      innerRadius: this._innerRadius,\n      outerRadius: this._outerRadius,\n      startAngle: this._startAngle,\n      sweepAngle: this._sweepAngle,\n      padAngle: this._padAngle,\n      padRadius: this._padRadius,\n      cornerRadius: this._cornerRadius,\n    };\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof Arc) {\n      return this._center.equals(that._center)\n          && this._innerRadius.equals(that._innerRadius)\n          && this._outerRadius.equals(that._outerRadius)\n          && this._startAngle.equals(that._startAngle)\n          && this._sweepAngle.equals(that._sweepAngle)\n          && this._padAngle.equals(that._padAngle)\n          && Objects.equal(this._padRadius, that._padRadius)\n          && this._cornerRadius.equals(that._cornerRadius);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"Arc\").write(46/*'.'*/).write(\"from\").write(40/*'('*/).write(41/*')'*/);\n    if (this._center.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"center\").write(40/*'('*/).debug(this._center).write(41/*')'*/);\n    }\n    if (this._innerRadius.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"innerRadius\").write(40/*'('*/).debug(this._innerRadius).write(41/*')'*/);\n    }\n    if (this._outerRadius.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"outerRadius\").write(40/*'('*/).debug(this._outerRadius).write(41/*')'*/);\n    }\n    if (this._startAngle.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"startAngle\").write(40/*'('*/).debug(this._startAngle).write(41/*')'*/);\n    }\n    if (this._sweepAngle.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"sweepAngle\").write(40/*'('*/).debug(this._sweepAngle).write(41/*')'*/);\n    }\n    if (this._padAngle.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"padAngle\").write(40/*'('*/).debug(this._padAngle).write(41/*')'*/);\n    }\n    if (this._padRadius !== null) {\n      output = output.write(46/*'.'*/).write(\"padRadius\").write(40/*'('*/).debug(this._padRadius).write(41/*')'*/);\n    }\n    if (this._cornerRadius.isDefined()) {\n      output = output.write(46/*'.'*/).write(\"cornerRadius\").write(40/*'('*/).debug(this._cornerRadius).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static from(center: AnyPointR2 = PointR2.origin(),\n              innerRadius: AnyLength = Length.zero(),\n              outerRadius: AnyLength = Length.zero(),\n              startAngle: AnyAngle = Angle.zero(),\n              sweepAngle: AnyAngle = Angle.zero(),\n              padAngle: AnyAngle = Angle.zero(),\n              padRadius: AnyLength | null = null,\n              cornerRadius: AnyLength = Length.zero()): Arc {\n    center = PointR2.fromAny(center);\n    innerRadius = Length.fromAny(innerRadius);\n    outerRadius = Length.fromAny(outerRadius);\n    startAngle = Angle.fromAny(startAngle);\n    sweepAngle = Angle.fromAny(sweepAngle);\n    padAngle = Angle.fromAny(padAngle);\n    padRadius = padRadius !== null ? Length.fromAny(padRadius) : null;\n    cornerRadius = Length.fromAny(cornerRadius);\n    return new Arc(center as PointR2, innerRadius, outerRadius, startAngle,\n                   sweepAngle, padAngle, padRadius, cornerRadius);\n  }\n\n  static fromAny(arc: AnyArc): Arc {\n    if (arc instanceof Arc) {\n      return arc;\n    } else if (typeof arc === \"object\" && arc !== null) {\n      return Arc.from(arc.center, arc.innerRadius, arc.outerRadius, arc.startAngle,\n                      arc.sweepAngle, arc.padAngle, arc.padRadius, arc.cornerRadius);\n    }\n    throw new TypeError(\"\" + arc);\n  }\n\n  private static intersect(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number,\n                           x3: number, y3: number): [number, number] {\n    const x10 = x1 - x0;\n    const y10 = y1 - y0;\n    const x32 = x3 - x2;\n    const y32 = y3 - y2;\n    const t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);\n    return [x0 + t * x10, y0 + t * y10];\n  }\n\n  private static cornerTangents(x0: number, y0: number, x1: number, y1: number, r1: number, rc: number, cw: boolean)\n                             : {cx: number, cy: number, x01: number, y01: number, x11: number, y11: number} {\n    // http://mathworld.wolfram.com/Circle-LineIntersection.html\n    const x01 = x0 - x1;\n    const y01 = y0 - y1;\n    const lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01);\n    const ox = lo * y01;\n    const oy = -lo * x01;\n    const x11 = x0 + ox;\n    const y11 = y0 + oy;\n    const x10 = x1 + ox;\n    const y10 = y1 + oy;\n    const x00 = (x11 + x10) / 2;\n    const y00 = (y11 + y10) / 2;\n    const dx = x10 - x11;\n    const dy = y10 - y11;\n    const d2 = dx * dx + dy * dy;\n    const r = r1 - rc;\n    const D = x11 * y10 - x10 * y11;\n    const d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D));\n    let cx0 = (D * dy - dx * d) / d2;\n    let cy0 = (-D * dx - dy * d) / d2;\n    const cx1 = (D * dy + dx * d) / d2;\n    const cy1 = (-D * dx + dy * d) / d2;\n    const dx0 = cx0 - x00;\n    const dy0 = cy0 - y00;\n    const dx1 = cx1 - x00;\n    const dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n      // pick closest intersection\n      cx0 = cx1;\n      cy0 = cy1;\n    }\n    return {\n      cx: cx0,\n      cy: cy0,\n      x01: -ox,\n      y01: -oy,\n      x11: cx0 * (r1 / r - 1),\n      y11: cy0 * (r1 / r - 1),\n    };\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2, BoxR2} from \"@swim/math\";\nimport {AnyAngle, Angle} from \"@swim/angle\";\nimport {AnyLength, Length} from \"@swim/length\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {Tween} from \"@swim/transition\";\nimport {CanvasContext, CanvasRenderer} from \"@swim/render\";\nimport {\n  MemberAnimator,\n  RenderedViewContext,\n  RenderedView,\n  FillViewInit,\n  FillView,\n  StrokeViewInit,\n  StrokeView,\n  GraphicsView,\n  GraphicsViewController,\n} from \"@swim/view\";\nimport {ArcInit, Arc} from \"./Arc\";\n\nexport type AnyArcView = ArcView | Arc | ArcViewInit;\n\nexport interface ArcViewInit extends FillViewInit, StrokeViewInit, ArcInit {\n}\n\nexport class ArcView extends GraphicsView implements FillView, StrokeView {\n  get viewController(): GraphicsViewController<ArcView> | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(PointR2, {value: PointR2.origin()})\n  center: MemberAnimator<this, PointR2, AnyPointR2>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  innerRadius: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  outerRadius: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Angle, {value: Angle.zero()})\n  startAngle: MemberAnimator<this, Angle, AnyAngle>;\n\n  @MemberAnimator(Angle, {value: Angle.zero()})\n  sweepAngle: MemberAnimator<this, Angle, AnyAngle>;\n\n  @MemberAnimator(Angle, {value: Angle.zero()})\n  padAngle: MemberAnimator<this, Angle, AnyAngle>;\n\n  @MemberAnimator(Length, {value: null})\n  padRadius: MemberAnimator<this, Length | null, AnyLength | null>;\n\n  @MemberAnimator(Length, {value: Length.zero()})\n  cornerRadius: MemberAnimator<this, Length, AnyLength>;\n\n  @MemberAnimator(Color, {inherit: true})\n  fill: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, {inherit: true})\n  stroke: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Length, {inherit: true})\n  strokeWidth: MemberAnimator<this, Length, AnyLength>;\n\n  get value(): Arc {\n    return new Arc(this.center.value!, this.innerRadius.value!, this.outerRadius.value!,\n                   this.startAngle.value!, this.sweepAngle.value!, this.padAngle.value!,\n                   this.padRadius.value!, this.cornerRadius.value!);\n  }\n\n  get state(): Arc {\n    return new Arc(this.center.state!, this.innerRadius.state!, this.outerRadius.state!,\n                   this.startAngle.state!, this.sweepAngle.state!, this.padAngle.state!,\n                   this.padRadius.state!, this.cornerRadius.state!);\n  }\n\n  setState(arc: Arc | ArcViewInit, tween?: Tween<any>): void {\n    if (arc instanceof Arc) {\n      arc = arc.toAny();\n    }\n    if (arc.center !== void 0) {\n      this.center(arc.center, tween);\n    }\n    if (arc.innerRadius !== void 0) {\n      this.innerRadius(arc.innerRadius, tween);\n    }\n    if (arc.outerRadius !== void 0) {\n      this.outerRadius(arc.outerRadius, tween);\n    }\n    if (arc.startAngle !== void 0) {\n      this.startAngle(arc.startAngle, tween);\n    }\n    if (arc.sweepAngle !== void 0) {\n      this.sweepAngle(arc.sweepAngle, tween);\n    }\n    if (arc.padAngle !== void 0) {\n      this.padAngle(arc.padAngle, tween);\n    }\n    if (arc.padRadius !== void 0) {\n      this.padRadius(arc.padRadius, tween);\n    }\n    if (arc.cornerRadius !== void 0) {\n      this.cornerRadius(arc.cornerRadius, tween);\n    }\n    if (arc.fill !== void 0) {\n      this.fill(arc.fill, tween);\n    }\n    if (arc.stroke !== void 0) {\n      this.stroke(arc.stroke, tween);\n    }\n    if (arc.strokeWidth !== void 0) {\n      this.strokeWidth(arc.strokeWidth, tween);\n    }\n    if (arc.hidden !== void 0) {\n      this.setHidden(arc.hidden);\n    }\n    if (arc.culled !== void 0) {\n      this.setCulled(arc.culled);\n    }\n  }\n\n  protected onRender(viewContext: RenderedViewContext): void {\n    super.onRender(viewContext);\n    const renderer = viewContext.renderer;\n    if (renderer instanceof CanvasRenderer && !this.isHidden() && !this.isCulled()) {\n      const context = renderer.context;\n      context.save();\n      this.renderArc(renderer.context, this.viewFrame);\n      context.restore();\n    }\n  }\n\n  protected renderArc(context: CanvasContext, frame: BoxR2): void {\n    const arc = this.value;\n    arc.draw(context, frame);\n    const fill = this.fill.value;\n    if (fill !== void 0) {\n      context.fillStyle = fill.toString();\n      context.fill();\n    }\n    const stroke = this.stroke.value;\n    if (stroke !== void 0) {\n      const strokeWidth = this.strokeWidth.value;\n      if (strokeWidth !== void 0) {\n        const size = Math.min(frame.width, frame.height);\n        context.lineWidth = strokeWidth.pxValue(size);\n      }\n      context.strokeStyle = stroke.toString();\n      context.stroke();\n    }\n  }\n\n  get popoverFrame(): BoxR2 {\n    const frame = this.viewFrame;\n    const size = Math.min(frame.width, frame.height);\n    const inversePageTransform = this.pageTransform.inverse();\n    const center = this.center.value!;\n    const [px, py] = inversePageTransform.transform(center.x, center.y);\n    const r = (this.innerRadius.value!.pxValue(size) + this.outerRadius.value!.pxValue(size)) / 2;\n    const a = this.startAngle.value!.radValue() + this.sweepAngle.value!.radValue() / 2;\n    const x = px + r * Math.cos(a);\n    const y = py + r * Math.sin(a);\n    return new BoxR2(x, y, x, y);\n  }\n\n  get viewBounds(): BoxR2 {\n    const frame = this.viewFrame;\n    const size = Math.min(frame.width, frame.height);\n    const center = this.center.value!;\n    const radius = this.outerRadius.value!.pxValue(size);\n    return new BoxR2(center.x - radius, center.y - radius,\n                     center.x + radius, center.y + radius);\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    let hit = super.hitTest(x, y, viewContext);\n    if (hit === null) {\n      const renderer = viewContext.renderer;\n      if (renderer instanceof CanvasRenderer) {\n        const context = renderer.context;\n        context.save();\n        x *= renderer.pixelRatio;\n        y *= renderer.pixelRatio;\n        hit = this.hitTestArc(x, y, context, this.viewFrame);\n        context.restore();\n      }\n    }\n    return hit;\n  }\n\n  protected hitTestArc(x: number, y: number, context: CanvasContext, frame: BoxR2): RenderedView | null {\n    context.beginPath();\n    const arc = this.value;\n    arc.draw(context, frame);\n    if (this.fill.value !== void 0 && context.isPointInPath(x, y)) {\n      return this;\n    } else if (this.stroke.value !== void 0) {\n      const strokeWidth = this.strokeWidth.value;\n      if (strokeWidth !== void 0) {\n        const size = Math.min(frame.width, frame.height);\n        context.lineWidth = strokeWidth.pxValue(size);\n        if (context.isPointInStroke(x, y)) {\n          return this;\n        }\n      }\n    }\n    return null;\n  }\n\n  static fromAny(arc: AnyArcView): ArcView {\n    if (arc instanceof ArcView) {\n      return arc;\n    } else if (arc instanceof Arc || typeof arc === \"object\" && arc !== null) {\n      const view = new ArcView();\n      view.setState(arc);\n      return view;\n    }\n    throw new TypeError(\"\" + arc);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Equals, Objects} from \"@swim/util\";\nimport {Output, Debug, Format} from \"@swim/codec\";\nimport {AnyPointR2, PointR2, BoxR2} from \"@swim/math\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {Renderer, CanvasContext, CanvasRenderer, Graphics} from \"@swim/render\";\n\nexport type AnyTextRun = TextRun | TextRunInit | string;\n\nexport interface TextRunInit {\n  text: string;\n  font?: AnyFont;\n  textAlign?: CanvasTextAlign;\n  textBaseline?: CanvasTextBaseline;\n  textOrigin?: AnyPointR2;\n  textColor?: AnyColor;\n}\n\nexport class TextRun implements Graphics, Equals, Debug {\n  /** @hidden */\n  readonly _text: string;\n  /** @hidden */\n  readonly _font: Font | null;\n  /** @hidden */\n  readonly _textAlign: CanvasTextAlign | null;\n  /** @hidden */\n  readonly _textBaseline: CanvasTextBaseline | null;\n  /** @hidden */\n  readonly _textOrigin: PointR2 | null;\n  /** @hidden */\n  readonly _textColor: Color | null;\n\n  constructor(text: string, font: Font | null, textAlign: CanvasTextAlign | null,\n              textBaseline: CanvasTextBaseline | null, textOrigin: PointR2 | null,\n              textColor: Color | null) {\n    this._text = text;\n    this._font = font;\n    this._textAlign = textAlign;\n    this._textBaseline = textBaseline;\n    this._textOrigin = textOrigin;\n    this._textColor = textColor;\n  }\n\n  text(): string;\n  text(text: string): TextRun;\n  text(text?: string): string | TextRun {\n    if (text === void 0) {\n      return this._text;\n    } else {\n      if (this._text === text) {\n        return this;\n      } else {\n        return this.copy(text, this._font, this._textAlign,\n                         this._textBaseline, this._textOrigin, this._textColor);\n      }\n    }\n  }\n\n  font(): Font | null;\n  font(font: AnyFont | null): TextRun;\n  font(font?: AnyFont | null): Font | null | TextRun {\n    if (font === void 0) {\n      return this._font;\n    } else {\n      if (font !== null) {\n        font = Font.fromAny(font);\n      }\n      if (this._font === font) {\n        return this;\n      } else {\n        return this.copy(this._text, font, this._textAlign,\n                         this._textBaseline, this._textOrigin, this._textColor);\n      }\n    }\n  }\n\n  textAlign(): CanvasTextAlign | null;\n  textAlign(textAlign: CanvasTextAlign | null): TextRun;\n  textAlign(textAlign?: CanvasTextAlign | null): CanvasTextAlign | null | TextRun {\n    if (textAlign === void 0) {\n      return this._textAlign;\n    } else {\n      if (this._textAlign === textAlign) {\n        return this;\n      } else {\n        return this.copy(this._text, this._font, textAlign,\n                         this._textBaseline, this._textOrigin, this._textColor);\n      }\n    }\n  }\n\n  textBaseline(): CanvasTextBaseline | null;\n  textBaseline(textBaseline: CanvasTextBaseline | null): TextRun;\n  textBaseline(textBaseline?: CanvasTextBaseline | null): CanvasTextBaseline | null | TextRun {\n    if (textBaseline === void 0) {\n      return this._textBaseline;\n    } else {\n      if (this._textBaseline === textBaseline) {\n        return this;\n      } else {\n        return this.copy(this._text, this._font, this._textAlign,\n                         textBaseline, this._textOrigin, this._textColor);\n      }\n    }\n  }\n\n  textOrigin(): PointR2 | null;\n  textOrigin(textOrigin: AnyPointR2 | null): TextRun | null;\n  textOrigin(textOrigin?: AnyPointR2 | null): PointR2 | null | TextRun {\n    if (textOrigin === void 0) {\n      return this._textOrigin;\n    } else {\n      if (textOrigin !== null) {\n        textOrigin = PointR2.fromAny(textOrigin);\n      }\n      if (Objects.equal(this._textOrigin, textOrigin)) {\n        return this;\n      } else {\n        return this.copy(this._text, this._font, this._textAlign,\n                         this._textBaseline, textOrigin as PointR2, this._textColor);\n      }\n    }\n  }\n\n  textColor(): Color | null;\n  textColor(textColor: AnyColor | null): TextRun;\n  textColor(textColor?: AnyColor | null): Color | null | TextRun {\n    if (textColor === void 0) {\n      return this._textColor;\n    } else {\n      if (textColor !== null) {\n        textColor = Color.fromAny(textColor);\n      }\n      if (Objects.equal(this._textColor, textColor)) {\n        return this;\n      } else {\n        return this.copy(this._text, this._font, this._textAlign,\n                         this._textBaseline, this._textOrigin, textColor);\n      }\n    }\n  }\n\n  render(renderer: Renderer, frame: BoxR2): void {\n    if (renderer instanceof CanvasRenderer) {\n      this.draw(renderer.context, frame);\n    }\n  }\n\n  draw(context: CanvasContext, frame: BoxR2) {\n    this.renderText(context, frame);\n  }\n\n  protected renderText(context: CanvasContext, frame: BoxR2): void {\n    context.save();\n    if (this._font !== null) {\n      context.font = this._font.toString();\n    }\n    if (this._textAlign !== null) {\n      context.textAlign = this._textAlign;\n    }\n    if (this._textBaseline !== null) {\n      context.textBaseline = this._textBaseline;\n    }\n    let textOrigin = this._textOrigin;\n    if (textOrigin === null) {\n      textOrigin = PointR2.origin();\n    }\n    if (this._textColor !== null) {\n      context.fillStyle = this._textColor.toString();\n    }\n    context.fillText(this._text, textOrigin.x, textOrigin.y);\n    context.restore();\n  }\n\n  protected copy(text: string, font: Font | null, textAlign: CanvasTextAlign | null,\n                 textBaseline: CanvasTextBaseline | null, textOrigin: PointR2 | null,\n                 textColor: Color | null): TextRun {\n    return new TextRun(text, font, textAlign, textBaseline, textOrigin, textColor);\n  }\n\n  toAny(): TextRunInit {\n    const init: TextRunInit = {text: this._text};\n    init.text = this._text;\n    if (this._font !== null) {\n      init.font = this._font;\n    }\n    if (this._font !== null) {\n      init.font = this._font;\n    }\n    if (this._textAlign !== null) {\n      init.textAlign = this._textAlign;\n    }\n    if (this._textBaseline !== null) {\n      init.textBaseline = this._textBaseline;\n    }\n    if (this._textOrigin !== null) {\n      init.textOrigin = this._textOrigin;\n    }\n    if (this._textColor !== null) {\n      init.textColor = this._textColor;\n    }\n    return init;\n  }\n\n  equals(that: unknown): boolean {\n    if (this === that) {\n      return true;\n    } else if (that instanceof TextRun) {\n      return this._text === that._text\n          && Objects.equal(this._font, that._font)\n          && this._textAlign === that._textAlign\n          && this._textBaseline === that._textBaseline\n          && Objects.equal(this._textOrigin, that._textOrigin)\n          && Objects.equal(this._textColor, that._textColor);\n    }\n    return false;\n  }\n\n  debug(output: Output): void {\n    output = output.write(\"TextRun\").write(46/*'.'*/).write(\"from\").write(40/*'('*/)\n        .debug(this._text).write(41/*')'*/);\n    if (this._font !== null) {\n      output = output.write(46/*'.'*/).write(\"font\").write(40/*'('*/).debug(this._font).write(41/*')'*/);\n    }\n    if (this._textAlign !== null) {\n      output = output.write(46/*'.'*/).write(\"textAlign\").write(40/*'('*/).debug(this._textAlign).write(41/*')'*/);\n    }\n    if (this._textBaseline !== null) {\n      output = output.write(46/*'.'*/).write(\"textBaseline\").write(40/*'('*/).debug(this._textBaseline).write(41/*')'*/);\n    }\n    if (this._textOrigin !== null) {\n      output = output.write(46/*'.'*/).write(\"textOrigin\").write(40/*'('*/).debug(this._textOrigin).write(41/*')'*/);\n    }\n    if (this._textColor !== null) {\n      output = output.write(46/*'.'*/).write(\"textColor\").write(40/*'('*/).debug(this._textColor).write(41/*')'*/);\n    }\n  }\n\n  toString(): string {\n    return Format.debug(this);\n  }\n\n  static from(text: string,\n              font: AnyFont | null = null,\n              textAlign: CanvasTextAlign | null = null,\n              textBaseline: CanvasTextBaseline | null = null,\n              textOrigin: AnyPointR2 | null = null,\n              textColor: AnyColor | null = null): TextRun {\n    if (font !== null) {\n      font = Font.fromAny(font);\n    }\n    if (textOrigin !== null) {\n      textOrigin = PointR2.fromAny(textOrigin);\n    }\n    if (textColor !== null) {\n      textColor = Color.fromAny(textColor);\n    }\n    return new TextRun(text, font, textAlign, textBaseline, textOrigin as PointR2, textColor);\n  }\n\n  static fromAny(run: AnyTextRun): TextRun {\n    if (run instanceof TextRun) {\n      return run;\n    } else if (typeof run === \"string\") {\n      return TextRun.from(run);\n    } else if (typeof run === \"object\" && run !== null) {\n      return TextRun.from(run.text, run.font, run.textAlign, run.textBaseline,\n                          run.textOrigin, run.textColor);\n    }\n    throw new TypeError(\"\" + run);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyColor, Color} from \"@swim/color\";\nimport {AnyFont, Font} from \"@swim/font\";\nimport {Tween} from \"@swim/transition\";\nimport {CanvasContext, CanvasRenderer} from \"@swim/render\";\nimport {\n  MemberAnimator,\n  RenderedViewContext,\n  TypesetViewInit,\n  TypesetView,\n  GraphicsView,\n  GraphicsViewController,\n} from \"@swim/view\";\nimport {TextRun} from \"./TextRun\";\n\nexport type AnyTextRunView = TextRunView | TextRun | TextRunViewInit | string;\n\nexport interface TextRunViewInit extends TypesetViewInit {\n  text?: string;\n}\n\nexport class TextRunView extends GraphicsView implements TypesetView {\n  get viewController(): GraphicsViewController<TextRunView> | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(String, {value: \"\"})\n  text: MemberAnimator<this, string>;\n\n  @MemberAnimator(Font, {inherit: true})\n  font: MemberAnimator<this, Font, AnyFont>;\n\n  @MemberAnimator(String, {inherit: true})\n  textAlign: MemberAnimator<this, CanvasTextAlign>;\n\n  @MemberAnimator(String, {inherit: true})\n  textBaseline: MemberAnimator<this, CanvasTextBaseline>;\n\n  @MemberAnimator(PointR2, {inherit: true})\n  textOrigin: MemberAnimator<this, PointR2, AnyPointR2>;\n\n  @MemberAnimator(Color, {inherit: true})\n  textColor: MemberAnimator<this, Color, AnyColor>;\n\n  get value(): TextRun {\n    return new TextRun(this.text.value!, this.font.value!, this.textAlign.value!,\n                       this.textBaseline.value!, this.textOrigin.value!, this.textColor.value!);\n  }\n\n  get state(): TextRun {\n    return new TextRun(this.text.state!, this.font.state!, this.textAlign.state!,\n                       this.textBaseline.state!, this.textOrigin.state!, this.textColor.state!);\n  }\n\n  setState(run: TextRun | TextRunViewInit | string, tween?: Tween<any>): void {\n    if (typeof run === \"string\") {\n      this.text(run, tween);\n    } else {\n      if (run instanceof TextRun) {\n        run = run.toAny();\n      }\n      if (run.text !== void 0) {\n        this.text(run.text, tween);\n      }\n      if (run.font !== void 0) {\n        this.font(run.font, tween);\n      }\n      if (run.textAlign !== void 0) {\n        this.textAlign(run.textAlign, tween);\n      }\n      if (run.textBaseline !== void 0) {\n        this.textBaseline(run.textBaseline, tween);\n      }\n      if (run.textOrigin !== void 0) {\n        this.textOrigin(run.textOrigin, tween);\n      }\n      if (run.textColor !== void 0) {\n        this.textColor(run.textColor, tween);\n      }\n      if (run.hidden !== void 0) {\n        this.setHidden(run.hidden);\n      }\n      if (run.culled !== void 0) {\n        this.setCulled(run.culled);\n      }\n    }\n  }\n\n  protected onRender(viewContext: RenderedViewContext): void {\n    super.onRender(viewContext);\n    const renderer = viewContext.renderer;\n    if (renderer instanceof CanvasRenderer && !this.isHidden() && !this.isCulled()) {\n      const context = renderer.context;\n      context.save();\n      this.renderText(context);\n      context.restore();\n    }\n  }\n\n  protected renderText(context: CanvasContext): void {\n    const font = this.font.value;\n    if (font !== void 0) {\n      context.font = font.toString();\n    }\n    const textAlign = this.textAlign.value;\n    if (textAlign !== void 0) {\n      context.textAlign = textAlign;\n    }\n    const textBaseline = this.textBaseline.value;\n    if (textBaseline !== void 0) {\n      context.textBaseline = textBaseline;\n    }\n    let textOrigin = this.textOrigin.value;\n    if (textOrigin === void 0) {\n      textOrigin = PointR2.origin();\n    }\n    const textColor = this.textColor.value;\n    if (textColor !== void 0) {\n      context.fillStyle = textColor.toString();\n    }\n    context.fillText(this.text.value!, textOrigin.x, textOrigin.y);\n  }\n\n  static fromAny(run: AnyTextRunView): TextRunView {\n    if (run instanceof TextRunView) {\n      return run;\n    } else if (typeof run === \"string\" || typeof run === \"object\" && run !== null) {\n      const view = new TextRunView();\n      view.setState(run);\n      return view;\n    }\n    throw new TypeError(\"\" + run);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View, ElementView} from \"@swim/view\";\n\nconst COS_PI_4 = Math.cos(Math.PI / 4);\nconst SIN_PI_4 = Math.sin(Math.PI / 4);\n\nexport interface MultitouchEventInit extends CustomEventInit {\n  composed?: boolean;\n  points: MultitouchPoint[];\n  originalEvent?: Event | null;\n}\n\nexport interface MultitouchEventClass {\n  new(type: string, init: MultitouchEventInit): MultitouchEvent;\n}\n\nexport interface MultitouchEvent extends CustomEvent {\n  readonly points: ReadonlyArray<MultitouchPoint>;\n  readonly originalEvent: Event | null;\n}\n\nexport const MultitouchEvent: MultitouchEventClass =\n  function (this: MultitouchEvent, type: string, init: MultitouchEventInit): MultitouchEvent {\n    const event = document.createEvent(\"CustomEvent\") as MultitouchEvent;\n    event.initCustomEvent(type, init.bubbles || false, init.cancelable || false, init.detail);\n    (event as any).points = init.points;\n    (event as any).originalEvent = init.originalEvent || null;\n    (event as any).__proto__ = (this as any).__proto__;\n    return event;\n  } as unknown as MultitouchEventClass;\nif (typeof Event !== \"undefined\") {\n  MultitouchEvent.prototype = Event.prototype;\n}\n\nexport interface MultitouchPoint {\n  readonly identifier: string;\n  readonly ghost: boolean;\n  cx: number;\n  cy: number;\n  vx: number;\n  vy: number;\n  ax: number;\n  ay: number;\n  dx: number;\n  dy: number;\n}\n\n/** @hidden */\nexport class MultitouchTrack implements MultitouchPoint {\n  readonly multitouch: Multitouch;\n  readonly identifier: string;\n  readonly path: {t: number; cx: number; cy: number;}[];\n  t: number;\n  cx: number;\n  cy: number;\n  vx: number;\n  vy: number;\n  ax: number;\n  ay: number;\n  dx: number;\n  dy: number;\n\n  constructor(multitouch: Multitouch, identifier: string) {\n    this.multitouch = multitouch;\n    this.identifier = identifier;\n    this.path = [];\n    this.t = NaN;\n    this.cx = NaN;\n    this.cy = NaN;\n    this.vx = NaN;\n    this.vy = NaN;\n    this.ax = NaN;\n    this.ay = NaN;\n    this.dx = NaN;\n    this.dy = NaN;\n  }\n\n  get ghost(): boolean {\n    return false;\n  }\n\n  moveTo(t: number, cx: number, cy: number): void {\n    this.path.push({t: t, cx: cx, cy: cy});\n    while (this.path.length > 1) {\n      if (t - this.path[0].t > this.multitouch._hysteresis) {\n        this.path.splice(0, 1);\n      } else {\n        break;\n      }\n    }\n    this.update();\n  }\n\n  update(): void {\n    const p0 = this.path[0];\n    const p1 = this.path[this.path.length - 1];\n    if (p1 !== void 0 && p1 !== p0) {\n      const dt = p1.t - p0.t;\n      let vx: number;\n      let vy: number;\n      if (dt !== 0) {\n        vx = (p1.cx - p0.cx) / dt;\n        vy = (p1.cy - p0.cy) / dt;\n        const v2 = vx * vx + vy * vy;\n        const vMax = this.multitouch._velocityMax;\n        const vMax2 = vMax * vMax;\n        if (vMax2 < v2) {\n          const v = Math.sqrt(v2);\n          vx = vx * vMax / v;\n          vy = vy * vMax / v;\n        }\n      } else {\n        vx = 0;\n        vy = 0;\n      }\n      this.t = p1.t;\n      this.dx = p1.cx - this.cx;\n      this.dy = p1.cy - this.cy;\n      this.cx = p1.cx;\n      this.cy = p1.cy;\n      this.vx = vx;\n      this.vy = vy;\n    } else if (p0 !== void 0) {\n      this.t = p0.t;\n      this.dx = p0.cx - this.cx;\n      this.dy = p0.cy - this.cy;\n      this.cx = p0.cx;\n      this.cy = p0.cy;\n      this.vx = 0;\n      this.vy = 0;\n    }\n  }\n}\n\n/** @hidden */\nexport class MultitouchGhost implements MultitouchPoint {\n  readonly multitouch: Multitouch;\n  readonly identifier: string;\n  t: number;\n  cx: number;\n  cy: number;\n  vx: number;\n  vy: number;\n  ax: number;\n  ay: number;\n  dx: number;\n  dy: number;\n\n  constructor(multitouch: Multitouch, identifier: string, t: number, cx: number, cy: number,\n              vx: number, vy: number, ax: number, ay: number) {\n    this.multitouch = multitouch;\n    this.identifier = identifier;\n    this.t = t;\n    this.cx = cx;\n    this.cy = cy;\n    this.vx = vx;\n    this.vy = vy;\n    this.ax = ax;\n    this.ay = ay;\n    this.dx = 0;\n    this.dy = 0;\n  }\n\n  get ghost(): boolean {\n    return true;\n  }\n\n  translate(dx: number, dy: number): void {\n    this.cx += dx;\n    this.cy += dy;\n  }\n\n  update(t: number): void {\n    const dt = t - this.t;\n    if (dt !== 0) {\n      let vx = this.vx + this.ax * dt;\n      let cx;\n      if (vx < 0 === this.vx < 0) {\n        cx = this.cx + this.vx * dt + 0.5 * (this.ax * dt * dt);\n      } else {\n        cx = this.cx - (this.vx * this.vx) / (2 * this.ax);\n        vx = 0;\n        this.ax = 0;\n      }\n\n      let vy = this.vy + this.ay * dt;\n      let cy;\n      if (vy < 0 === this.vy < 0) {\n        cy = this.cy + this.vy * dt + 0.5 * (this.ay * dt * dt);\n      } else {\n        cy = this.cy - (this.vy * this.vy) / (2 * this.ay);\n        vy = 0;\n        this.ay = 0;\n      }\n\n      this.dx = cx - this.cx;\n      this.dy = cy - this.cy;\n      this.cx = cx;\n      this.cy = cy;\n      this.vx = vx;\n      this.vy = vy;\n      this.t = t;\n    }\n  }\n}\n\nexport abstract class Multitouch {\n  /** @hidden */\n  protected _surface: View | null;\n  /** @hidden */\n  protected _tracks: {[id: string]: MultitouchTrack | undefined};\n  /** @hidden */\n  protected _trackCount: number;\n  /** @hidden */\n  protected _ghosts: {[id: string]: MultitouchGhost | undefined};\n  /** @hidden */\n  protected _ghostCount: number;\n  /** @hidden */\n  protected _ghostFrame: number;\n  /**\n   * Hysteresis for velocity derivation, in milliseconds.\n   * @hidden\n   */\n  _hysteresis: number;\n  /**\n   * Acceleration on contact points, in pixels/millisecond^2.\n   * @hidden\n   */\n  _acceleration: number;\n  /**\n   * Maximum velocity of contact points, in pixels/millisecond.\n   * @hidden\n   */\n  _velocityMax: number;\n  /**\n   * Minimum distance between contact points, in pixels.\n   * @hidden\n   */\n  _distanceMin: number;\n\n  constructor() {\n    this.onGhostFrame = this.onGhostFrame.bind(this);\n    this._surface = null;\n    this._tracks = {};\n    this._trackCount = 0;\n    this._ghosts = {};\n    this._ghostCount = 0;\n    this._ghostFrame = 0;\n    this._hysteresis = 67;\n    this._acceleration = 0.00175;\n    this._velocityMax = 1.75;\n    this._distanceMin = 10;\n  }\n\n  surface(): View | null;\n  surface(surface: View | null): this;\n  surface(newSurface?: View | null): View | null | this {\n    const oldSurface = this._surface;\n    if (newSurface === void 0) {\n      return oldSurface;\n    } else {\n      if (oldSurface !== null) {\n        this.detach(oldSurface);\n      }\n      this._surface = newSurface;\n      return this;\n    }\n  }\n\n  /** @hidden */\n  target(): ElementView | null {\n    let view = this._surface;\n    while (view !== null) {\n      if (view instanceof ElementView) {\n        return view;\n      }\n      view = view.parentView;\n    }\n    return null;\n  }\n\n  hysteresis(): number;\n  hysteresis(hysteresis: number): this;\n  hysteresis(hysteresis?: number): number | this {\n    if (hysteresis === void 0) {\n      return this._hysteresis;\n    } else {\n      this._hysteresis = hysteresis;\n      return this;\n    }\n  }\n\n  acceleration(): number;\n  acceleration(acceleration: number): this;\n  acceleration(acceleration?: number): number | this {\n    if (acceleration === void 0) {\n      return this._acceleration;\n    } else {\n      this._acceleration = acceleration;\n      return this;\n    }\n  }\n\n  velocityMax(): number;\n  velocityMax(velocityMax: number): this;\n  velocityMax(velocityMax?: number): number | this {\n    if (velocityMax === void 0) {\n      return this._velocityMax;\n    } else {\n      this._velocityMax = velocityMax;\n      return this;\n    }\n  }\n\n  distanceMin(): number;\n  distanceMin(distanceMin: number): this;\n  distanceMin(distanceMin?: number): number | this {\n    if (distanceMin === void 0) {\n      return this._distanceMin;\n    } else {\n      this._distanceMin = distanceMin;\n      return this;\n    }\n  }\n\n  wheel(): boolean;\n  wheel(wheel: boolean): this;\n  wheel(wheel?: boolean): boolean | this {\n    if (wheel === void 0) {\n      return false;\n    } else {\n      return this;\n    }\n  }\n\n  points(): MultitouchPoint[] {\n    const points: MultitouchPoint[] = [];\n    for (const identifier in this._tracks) {\n      points.push(this._tracks[identifier]!);\n    }\n    for (const identifier in this._ghosts) {\n      points.push(this._ghosts[identifier]!);\n    }\n    return points;\n  }\n\n  interrupt(originalEvent: Event | null): void {\n    if (this._ghostFrame !== 0) {\n      cancelAnimationFrame(this._ghostFrame);\n      this._ghostFrame = 0;\n    }\n    if (this._ghostCount !== 0) {\n      this._ghosts = {};\n      this._ghostCount = 0;\n      if (this._trackCount !== 0) {\n        this.multitouchChange(originalEvent);\n      } else {\n        this.multitouchEnd(originalEvent);\n      }\n    }\n  }\n\n  zoom(cx: number, cy: number, dz: number, originalEvent: Event | null): void {\n    if (dz === 0) {\n      return;\n    }\n    const t = Date.now();\n    const a = this._acceleration;\n    let ax = a * COS_PI_4;\n    let ay = a * SIN_PI_4;\n    const vMax = this._velocityMax;\n    const vx = 0.5 * vMax * COS_PI_4;\n    const vy = 0.5 * vMax * SIN_PI_4;\n    const dx = (4 * vx * vx) / ax;\n    const dy = (4 * vy * vy) / ay;\n\n    let zoom0 = this._ghosts.zoom0;\n    let zoom1 = this._ghosts.zoom1;\n    if (zoom0 !== void 0 && zoom1 !== void 0) {\n      const dcx = Math.abs(zoom1.cx - zoom0.cx) / 2;\n      const dcy = Math.abs(zoom1.cy - zoom0.cy) / 2;\n      const dt = t - zoom0.t;\n      dz = Math.min(Math.max(-vMax * dt, dz), vMax * dt);\n      const zx = (dz * dcx * COS_PI_4) / dx;\n      const zy = (dz * dcy * SIN_PI_4) / dy;\n      ax = (ax * dcx) / dx;\n      ay = (ay * dcy) / dy;\n\n      if (dt > 0) {\n        zoom0.t = t;\n        zoom0.cx += zx;\n        zoom0.cy += zy;\n        zoom0.vx = zx / dt;\n        zoom0.vy = zy / dt;\n        zoom0.ax = zoom0.vx < 0 ? ax : zoom0.vx > 0 ? -ax : 0;\n        zoom0.ay = zoom0.vy < 0 ? ay : zoom0.vy > 0 ? -ay : 0;\n        zoom0.dx = zx;\n        zoom0.dy = zy;\n\n        zoom1.t = t;\n        zoom1.cx -= zx;\n        zoom1.cy -= zy;\n        zoom1.vx = -zx / dt;\n        zoom1.vy = -zy / dt;\n        zoom1.ax = zoom1.vx < 0 ? ax : zoom1.vx > 0 ? -ax : 0;\n        zoom1.ay = zoom1.vy < 0 ? ay : zoom1.vy > 0 ? -ay : 0;\n        zoom1.dx = -zx;\n        zoom1.dy = -zy;\n      }\n    } else {\n      this.interrupt(originalEvent);\n      this.multitouchStart(originalEvent);\n\n      if (dz < 0) {\n        zoom0 = new MultitouchGhost(this, \"zoom0\", t, cx - dx, cy - dy, -vx, -vy, ax, ay);\n        zoom1 = new MultitouchGhost(this, \"zoom1\", t, cx + dx, cy + dy, vx, vy, -ax, -ay);\n      } else {\n        zoom0 = new MultitouchGhost(this, \"zoom0\", t, cx - dx, cy - dy, vx, vy, -ax, -ay);\n        zoom1 = new MultitouchGhost(this, \"zoom1\", t, cx + dx, cy + dy, -vx, -vy, ax, ay);\n      }\n\n      this._ghosts.zoom0 = zoom0;\n      this._ghostCount += 1;\n      this._ghosts.zoom1 = zoom1;\n      this._ghostCount += 1;\n    }\n\n    this.multitouchChange(originalEvent);\n    if (this._ghostFrame !== 0) {\n      cancelAnimationFrame(this._ghostFrame);\n    }\n    this._ghostFrame = requestAnimationFrame(this.onGhostFrame);\n  }\n\n  protected updateVelocity(t: number, points: MultitouchPoint[]): void {\n    const p0 = points[0];\n    const p1 = points[1];\n    let i = 0;\n    if (p0 !== void 0 && p1 !== void 0) {\n      i = 2;\n      const dx0 = Math.abs(p1.cx - p0.cx);\n      const dy0 = Math.abs(p1.cy - p0.cy);\n      if (p0 instanceof MultitouchGhost) {\n        p0.update(t);\n      }\n      if (p1 instanceof MultitouchGhost) {\n        p1.update(t);\n      }\n      const dx1 = Math.abs(p1.cx - p0.cx);\n      const dy1 = Math.abs(p1.cy - p0.cy);\n      const sx = dx1 / dx0;\n      const sy = dy1 / dy0;\n\n      p0.vx *= sx;\n      p0.vy *= sy;\n      p0.ax *= sx;\n      p0.ay *= sy;\n\n      p1.vx *= sx;\n      p1.vy *= sy;\n      p1.ax *= sx;\n      p1.ay *= sy;\n    }\n    while (i < points.length) {\n      const p = points[i];\n      if (p instanceof MultitouchGhost) {\n        p.update(t);\n      }\n      i += 1;\n    }\n  }\n\n  protected spreadVelocity(track: MultitouchTrack): void {\n    for (const identifier in this._ghosts) {\n      const ghost = this._ghosts[identifier]!;\n      if (track.vx < 0 === ghost.vx < 0) {\n        track.vx = (track.vx + ghost.vx) / 2;\n        ghost.vx = (track.vx + ghost.vx) / 2;\n      } else {\n        track.vx = (track.vx - ghost.vx) / 2;\n        ghost.vx = (ghost.vx - track.vx) / 2;\n      }\n      if (track.vy < 0 === ghost.vy < 0) {\n        track.vy = (track.vy + ghost.vy) / 2;\n        ghost.vy = (track.vy + ghost.vy) / 2;\n      } else {\n        track.vy = (track.vy - ghost.vy) / 2;\n        ghost.vy = (ghost.vy - track.vy) / 2;\n      }\n    }\n  }\n\n  protected coast(track: MultitouchTrack): void {\n    if (track.vx !== 0 || track.vy !== 0) {\n      this.spreadVelocity(track);\n      const alpha = Math.atan2(Math.abs(track.vy), Math.abs(track.vx));\n      const a = this._acceleration;\n      const ax = (track.vx < 0 ? a : track.vx > 0 ? -a : 0) * Math.cos(alpha);\n      const ay = (track.vy < 0 ? a : track.vy > 0 ? -a : 0) * Math.sin(alpha);\n      if (ax !== 0 || ay !== 0) {\n        const ghost = new MultitouchGhost(this, track.identifier, track.t, track.cx, track.cy,\n                                          track.vx, track.vy, ax, ay);\n        this._ghosts[ghost.identifier] = ghost;\n        this._ghostCount += 1;\n        if (this._ghostFrame === 0) {\n          this._ghostFrame = requestAnimationFrame(this.onGhostFrame);\n        }\n      }\n    }\n  }\n\n  protected translate(dx: number, dy: number): void {\n    dx = dx || 0;\n    dy = dy || 0;\n    for (const identifier in this._ghosts) {\n      this._ghosts[identifier]!.translate(dx, dy);\n    }\n  }\n\n  protected interpolate(t: number): void {\n    for (const identifier in this._tracks) {\n      this._tracks[identifier]!.update();\n    }\n    this.updateVelocity(t, this.points());\n    this.multitouchChange(null);\n\n    for (const identifier in this._ghosts) {\n      const ghost = this._ghosts[identifier]!;\n      if (ghost.ax === 0 && ghost.ay === 0) {\n        this._ghostCount -= 1;\n      }\n    }\n\n    if (this._trackCount === 0 && this._ghostCount === 0) {\n      this.multitouchEnd(null);\n    } else if (this._ghostCount !== 0 && this._ghostFrame === 0) {\n      this._ghostFrame = requestAnimationFrame(this.onGhostFrame);\n    }\n\n    for (const identifier in this._ghosts) {\n      const ghost = this._ghosts[identifier]!;\n      if (ghost.ax === 0 && ghost.ay === 0) {\n        delete this._ghosts[identifier];\n      }\n    }\n  }\n\n  protected onGhostFrame(t: number): void {\n    this._ghostFrame = 0;\n    this.interpolate(Date.now());\n  }\n\n  protected multitouchStart(originalEvent: Event | null): void {\n    const event = new MultitouchEvent(\"multitouchstart\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      points: this.points(),\n      originalEvent: originalEvent,\n    });\n    this._surface!.dispatchEvent(event);\n  }\n\n  protected multitouchChange(originalEvent: Event | null): void {\n    const event = new MultitouchEvent(\"multitouchchange\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      points: this.points(),\n      originalEvent: originalEvent,\n    });\n    this._surface!.dispatchEvent(event);\n  }\n\n  protected multitouchEnd(originalEvent: Event | null): void {\n    const event = new MultitouchEvent(\"multitouchend\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      points: this.points(),\n      originalEvent: originalEvent,\n    });\n    this._surface!.dispatchEvent(event);\n  }\n\n  protected multitouchCancel(originalEvent: Event | null): void {\n    const event = new MultitouchEvent(\"multitouchcancel\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      points: this.points(),\n      originalEvent: originalEvent,\n    });\n    this._surface!.dispatchEvent(event);\n  }\n\n  protected trackStart(identifier: string, clientX: number, clientY: number, event: Event): void {\n    this.interrupt(event);\n\n    const track = new MultitouchTrack(this, identifier);\n    this._tracks[identifier] = track;\n    track.moveTo(Date.now(), clientX, clientY);\n\n    this._trackCount += 1;\n    if (this._trackCount === 1) {\n      const target = this.target();\n      if (target !== null) {\n        this.startTracking(target);\n      }\n    }\n    this.trackDidStart(track, this._surface!, event);\n  }\n\n  protected trackMove(identifier: string, clientX: number, clientY: number, event: Event): void {\n    const track = this._tracks[identifier];\n    if (track !== void 0) {\n      track.moveTo(Date.now(), clientX, clientY);\n      this.trackDidMove(track, this._surface!, event);\n    }\n  }\n\n  protected trackEnd(identifier: string, clientX: number, clientY: number, event: Event): void {\n    const track = this._tracks[identifier];\n    if (track !== void 0) {\n      this._trackCount -= 1;\n      track.update();\n      this.trackDidEnd(track, this._surface!, event);\n      if (this._trackCount === 0) {\n        const target = this.target();\n        if (target !== null) {\n          this.endTracking(target);\n        }\n      }\n      delete this._tracks[identifier];\n    }\n  }\n\n  protected trackCancel(identifier: string, clientX: number, clientY: number, event: Event): void {\n    const track = this._tracks[identifier];\n    if (track !== void 0) {\n      this._trackCount -= 1;\n      track.update();\n      this.trackDidCancel(track, this._surface!, event);\n      if (this._trackCount === 0) {\n        const target = this.target();\n        if (target !== null) {\n          this.endTracking(target);\n        }\n      }\n      delete this._tracks[identifier];\n    }\n  }\n\n  protected trackDidStart(track: MultitouchTrack, surface: View, event: Event): void {\n    if (this._trackCount === 1) {\n      this.multitouchStart(event);\n    }\n  }\n\n  protected trackDidMove(track: MultitouchTrack, surface: View, event: Event): void {\n    this.translate(track.dx, track.dy);\n    this.interpolate(Date.now());\n  }\n\n  protected trackDidEnd(track: MultitouchTrack, surface: View, event: Event): void {\n    this.coast(track);\n    if (this._trackCount === 0 && this._ghostCount === 0) {\n      this.multitouchEnd(event);\n    }\n  }\n\n  protected trackDidCancel(track: MultitouchTrack, surface: View, event: Event): void {\n    if (this._trackCount === 0 && this._ghostCount === 0) {\n      this.multitouchCancel(event);\n    }\n  }\n\n  abstract attach(surface: View): void;\n\n  abstract detach(surface: View): void;\n\n  protected abstract startTracking(surface: View): void;\n\n  protected abstract endTracking(surface: View): void;\n\n  static create(): Multitouch {\n    if (typeof PointerEvent !== \"undefined\") {\n      return new MultitouchPointer();\n    } else if (typeof TouchEvent !== \"undefined\") {\n      return new MultitouchTouch();\n    } else {\n      return new MultitouchMouse();\n    }\n  }\n}\n\nexport class MultitouchPointer extends Multitouch {\n  protected _wheel: boolean;\n\n  constructor() {\n    super();\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.onPointerCancel = this.onPointerCancel.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n    this._wheel = true;\n  }\n\n  wheel(): boolean;\n  wheel(wheel: boolean): this;\n  wheel(wheel?: boolean): boolean | this {\n    if (wheel === void 0) {\n      return this._wheel;\n    } else {\n      if (this._wheel !== wheel) {\n        this._wheel = wheel;\n        const target = this.target();\n        if (target !== null) {\n          if (wheel) {\n            target.on(\"wheel\", this.onWheel);\n          } else {\n            target.off(\"wheel\", this.onWheel);\n          }\n        }\n      }\n      return this;\n    }\n  }\n\n  attach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.on(\"pointerdown\", this.onPointerDown, {passive: true});\n      if (this._wheel) {\n        target.on(\"wheel\", this.onWheel);\n      }\n    }\n  }\n\n  detach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.off(\"pointerdown\", this.onPointerDown);\n      target.off(\"pointermove\", this.onPointerMove);\n      target.off(\"pointerup\", this.onPointerUp);\n      target.off(\"pointercancel\", this.onPointerCancel);\n      target.off(\"wheel\", this.onWheel);\n    }\n  }\n\n  protected startTracking(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.on(\"pointermove\", this.onPointerMove);\n      target.on(\"pointerup\", this.onPointerUp);\n      target.on(\"pointercancel\", this.onPointerCancel);\n    }\n  }\n\n  protected endTracking(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.off(\"pointermove\", this.onPointerMove);\n      target.off(\"pointerup\", this.onPointerUp);\n      target.off(\"pointercancel\", this.onPointerCancel);\n    }\n  }\n\n  protected onPointerDown(event: PointerEvent): void {\n    this.trackStart(\"\" + event.pointerId, event.clientX, event.clientY, event);\n    const target = this.target();\n    if (target !== null && target.node.setPointerCapture !== void 0) {\n      target.node.setPointerCapture(event.pointerId);\n    }\n  }\n\n  protected onPointerMove(event: PointerEvent): void {\n    this.trackMove(\"\" + event.pointerId, event.clientX, event.clientY, event);\n  }\n\n  protected onPointerUp(event: PointerEvent): void {\n    this.trackEnd(\"\" + event.pointerId, event.clientX, event.clientY, event);\n    const target = this.target();\n    if (target !== null && target.node.releasePointerCapture !== void 0) {\n      target.node.releasePointerCapture(event.pointerId);\n    }\n  }\n\n  protected onPointerCancel(event: PointerEvent): void {\n    this.trackCancel(\"\" + event.pointerId, event.clientX, event.clientY, event);\n    const target = this.target();\n    if (target !== null && target.node.releasePointerCapture !== void 0) {\n      target.node.releasePointerCapture(event.pointerId);\n    }\n  }\n\n  protected onWheel(event: WheelEvent): void {\n    event.preventDefault();\n    this.zoom(event.clientX, event.clientY, event.deltaY, event);\n  }\n}\n\nexport class MultitouchTouch extends Multitouch {\n  constructor() {\n    super();\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onTouchCancel = this.onTouchCancel.bind(this);\n  }\n\n  attach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.on(\"touchstart\", this.onTouchStart, {passive: true});\n    }\n  }\n\n  detach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.off(\"touchstart\", this.onTouchStart);\n      target.off(\"touchmove\", this.onTouchMove);\n      target.off(\"touchend\", this.onTouchEnd);\n      target.off(\"touchcancel\", this.onTouchCancel);\n    }\n  }\n\n  protected startTracking(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.on(\"touchmove\", this.onTouchMove, {passive: true});\n      target.on(\"touchend\", this.onTouchEnd);\n      target.on(\"touchcancel\", this.onTouchCancel);\n    }\n  }\n\n  protected endTracking(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.off(\"touchmove\", this.onTouchMove);\n      target.off(\"touchend\", this.onTouchEnd);\n      target.off(\"touchcancel\", this.onTouchCancel);\n    }\n  }\n\n  protected onTouchStart(event: TouchEvent): void {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      this.trackStart(\"\" + touch.identifier, touch.clientX, touch.clientY, event);\n    }\n    if (event.changedTouches.length > 1 || this._trackCount > 1) {\n      event.preventDefault();\n    }\n  }\n\n  protected onTouchMove(event: TouchEvent): void {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      this.trackMove(\"\" + touch.identifier, touch.clientX, touch.clientY, event);\n    }\n  }\n\n  protected onTouchEnd(event: TouchEvent): void {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      this.trackEnd(\"\" + touch.identifier, touch.clientX, touch.clientY, event);\n    }\n  }\n\n  protected onTouchCancel(event: TouchEvent): void {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      this.trackCancel(\"\" + touch.identifier, touch.clientX, touch.clientY, event);\n    }\n  }\n}\n\nexport class MultitouchMouse extends Multitouch {\n  protected _wheel: boolean;\n\n  constructor() {\n    super();\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n    this._wheel = true;\n  }\n\n  wheel(): boolean;\n  wheel(wheel: boolean): this;\n  wheel(wheel?: boolean): boolean | this {\n    if (wheel === void 0) {\n      return this._wheel;\n    } else {\n      if (this._wheel !== wheel) {\n        this._wheel = wheel;\n        const target = this.target();\n        if (target !== null) {\n          if (wheel) {\n            target.on(\"wheel\", this.onWheel);\n          } else {\n            target.off(\"wheel\", this.onWheel);\n          }\n        }\n      }\n      return this;\n    }\n  }\n\n  attach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.on(\"mousedown\", this.onMouseDown);\n      if (this._wheel) {\n        target.on(\"wheel\", this.onWheel);\n      }\n    }\n  }\n\n  detach(surface: View): void {\n    const target = this.target();\n    if (target !== null) {\n      target.off(\"mousedown\", this.onMouseDown);\n      document.body.removeEventListener(\"mousemove\", this.onMouseMove);\n      document.body.removeEventListener(\"mouseup\", this.onMouseUp);\n      target.off(\"wheel\", this.onWheel);\n    }\n  }\n\n  protected startTracking(surface: View): void {\n    document.body.addEventListener(\"mousemove\", this.onMouseMove);\n    document.body.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  protected endTracking(surface: View): void {\n    document.body.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.body.removeEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  protected onMouseDown(event: MouseEvent): void {\n    this.trackStart(\"mouse\", event.clientX, event.clientY, event);\n  }\n\n  protected onMouseMove(event: MouseEvent): void {\n    this.trackMove(\"mouse\", event.clientX, event.clientY, event);\n  }\n\n  protected onMouseUp(event: MouseEvent): void {\n    this.trackEnd(\"mouse\", event.clientX, event.clientY, event);\n  }\n\n  protected onWheel(event: WheelEvent): void {\n    event.preventDefault();\n    this.zoom(event.clientX, event.clientY, event.deltaY, event);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Objects} from \"@swim/util\";\nimport {ContinuousScale, LinearScale, TimeScale} from \"@swim/scale\";\nimport {View, RenderedView, ElementView} from \"@swim/view\";\nimport {MultitouchEvent, MultitouchPoint, Multitouch} from \"./Multitouch\";\n\nexport interface ScaleGestureEventInit<D> extends CustomEventInit {\n  composed?: boolean;\n  gesture: ScaleGesture<D>;\n  multitouch: Multitouch;\n  ruler: View;\n  scale: ContinuousScale<D, number>;\n  originalEvent?: Event | null;\n}\n\nexport interface ScaleGestureEventClass {\n  new<D>(type: string, init: ScaleGestureEventInit<D>): ScaleGestureEvent<D>;\n}\n\nexport interface ScaleGestureEvent<D> extends CustomEvent {\n  gesture: ScaleGesture<D>;\n  multitouch: Multitouch;\n  ruler: View;\n  scale: ContinuousScale<D, number>;\n  readonly originalEvent: Event | null;\n}\n\nexport const ScaleGestureEvent: ScaleGestureEventClass =\n  function <D>(this: ScaleGestureEvent<D>, type: string, init: ScaleGestureEventInit<D>): ScaleGestureEvent<D> {\n    const event = document.createEvent(\"CustomEvent\") as ScaleGestureEvent<D>;\n    event.initCustomEvent(type, init.bubbles || false, init.cancelable || false, init.detail);\n    event.gesture = init.gesture;\n    event.multitouch = init.multitouch;\n    event.ruler = init.ruler;\n    event.scale = init.scale;\n    (event as any).originalEvent = init.originalEvent || null;\n    (event as any).__proto__ = (this as any).__proto__;\n    return event;\n  } as unknown as ScaleGestureEventClass;\nif (typeof Event !== \"undefined\") {\n  ScaleGestureEvent.prototype = Event.prototype;\n}\n\n/** @hidden */\nexport interface ScaleGesturePoint<D> {\n  readonly identifier: string;\n  domainCoord: D;\n  rangeCoord: number;\n}\n\nexport abstract class ScaleGesture<D> {\n  /** @hidden */\n  protected _multitouch: Multitouch | null;\n  /** @hidden */\n  protected _ruler: View | null;\n  /** @hidden */\n  protected _scale: ContinuousScale<D, number> | null;\n  /** @hidden */\n  protected _xMin: D | null;\n  /** @hidden */\n  protected _xMax: D | null;\n  /** @hidden */\n  protected _zMin: number | null;\n  /** @hidden */\n  protected _zMax: number | null;\n  /** @hidden */\n  protected readonly _points: ScaleGesturePoint<D>[];\n\n  constructor() {\n    this.onMultitouchStart = this.onMultitouchStart.bind(this);\n    this.onMultitouchChange = this.onMultitouchChange.bind(this);\n    this.onMultitouchCancel = this.onMultitouchCancel.bind(this);\n    this.onMultitouchEnd = this.onMultitouchEnd.bind(this);\n    this._multitouch = null;\n    this._ruler = null;\n    this._scale = null;\n    this._xMin = null;\n    this._xMax = null;\n    this._zMin = null;\n    this._zMax = null;\n    this._points = [];\n  }\n\n  multitouch(): Multitouch | null;\n  multitouch(multitouch: Multitouch | null): this;\n  multitouch(multitouch?: Multitouch | null): Multitouch | null | this {\n    if (multitouch === void 0) {\n      return this._multitouch;\n    } else {\n      if (this._multitouch !== null) {\n        this.detach(this._multitouch);\n      }\n      this._multitouch = multitouch;\n      return this;\n    }\n  }\n\n  hysteresis(): number;\n  hysteresis(hysteresis: number): this;\n  hysteresis(hysteresis?: number): number | this {\n    if (hysteresis === void 0) {\n      return this._multitouch!.hysteresis();\n    } else {\n      this._multitouch!.hysteresis(hysteresis);\n      return this;\n    }\n  }\n\n  acceleration(): number;\n  acceleration(acceleration: number): this;\n  acceleration(acceleration?: number): number | this {\n    if (acceleration === void 0) {\n      return this._multitouch!.acceleration();\n    } else {\n      this._multitouch!.acceleration(acceleration);\n      return this;\n    }\n  }\n\n  velocityMax(): number;\n  velocityMax(velocityMax: number): this;\n  velocityMax(velocityMax?: number): number | this {\n    if (velocityMax === void 0) {\n      return this._multitouch!.velocityMax();\n    } else {\n      this._multitouch!.velocityMax(velocityMax);\n      return this;\n    }\n  }\n\n  distanceMin(): number;\n  distanceMin(distanceMin: number): this;\n  distanceMin(distanceMin?: number): number | this {\n    if (distanceMin === void 0) {\n      return this._multitouch!.distanceMin();\n    } else {\n      this._multitouch!.distanceMin(distanceMin);\n      return this;\n    }\n  }\n\n  wheel(): boolean;\n  wheel(wheel: boolean): this;\n  wheel(wheel?: boolean): boolean | this {\n    if (wheel === void 0) {\n      return this._multitouch!.wheel();\n    } else {\n      this._multitouch!.wheel(wheel);\n      return this;\n    }\n  }\n\n  ruler(): View | null;\n  ruler(ruler: View | null): this;\n  ruler(ruler?: View | null): View | null | this {\n    if (ruler === void 0) {\n      return this._ruler;\n    } else {\n      this._ruler = ruler;\n      return this;\n    }\n  }\n\n  scale(): ContinuousScale<D, number> | null;\n  scale(scale: ContinuousScale<D, number> | null): this;\n  scale(scale?: ContinuousScale<D, number> | null): ContinuousScale<D, number> | null | this {\n    if (scale === void 0) {\n      return this._scale;\n    } else {\n      const oldScale = this._scale;\n      this._scale = scale;\n      if (oldScale === null) {\n        this.zoomBounds(true);\n      }\n      return this;\n    }\n  }\n\n  domainMin(): D | null;\n  domainMin(xMin: D | null): this;\n  domainMin(xMin?: D | null): D | null | this {\n    if (xMin === void 0) {\n      return this._xMin;\n    } else {\n      this._xMin = xMin;\n      return this;\n    }\n  }\n\n  domainMax(): D | null;\n  domainMax(xMax: D | null): this;\n  domainMax(xMax?: D | null): D | null | this {\n    if (xMax === void 0) {\n      return this._xMax;\n    } else {\n      this._xMax = xMax;\n      return this;\n    }\n  }\n\n  domainBounds(): (D | null)[];\n  domainBounds(xMin: (D | null)[] | D | null, xMax?: D | null): this;\n  domainBounds(xMin?: (D | null)[] | D | null, xMax?: D | null): (D | null)[] | this {\n    if (xMin === void 0) {\n      return [this._xMin, this._xMax];\n    } else if (xMax === void 0) {\n      xMin = xMin as (D | null)[];\n      this._xMin = xMin[0];\n      this._xMax = xMin[1];\n      return this;\n    } else {\n      this._xMin = xMin as D | null;\n      this._xMax = xMax;\n      return this;\n    }\n  }\n\n  zoomMin(): number | null;\n  zoomMin(zMin: number | null): this;\n  zoomMin(zMin?: number | null): number | null | this {\n    if (zMin === void 0) {\n      return this._zMin;\n    } else {\n      this._zMin = zMin;\n      return this;\n    }\n  }\n\n  zoomMax(): number | null;\n  zoomMax(zMax: number | null): this;\n  zoomMax(zMax?: number | null): number | null | this {\n    if (zMax === void 0) {\n      return this._zMax;\n    } else {\n      this._zMax = zMax;\n      return this;\n    }\n  }\n\n  zoomBounds(): (number | null)[];\n  zoomBounds(zMin: boolean | (number | null)[] | number | null, zMax?: number | null): this;\n  zoomBounds(zMin?: boolean | (number | null)[] | number | null, zMax?: number | null): (number | null)[] | this {\n    if (zMin === void 0) {\n      return [this._zMin, this._zMax];\n    } else if (zMax === void 0) {\n      if (typeof zMin === \"boolean\") {\n        if (this._scale instanceof LinearScale) {\n          this._zMin = 1000000;\n          this._zMax = 0.001;\n        } else if (this._scale instanceof TimeScale) {\n          this._zMin = 86400000;\n          this._zMax = 1;\n        }\n      } else {\n        zMin = zMin as (number | null)[];\n        this._zMin = zMin[0];\n        this._zMax = zMin[1];\n      }\n      return this;\n    } else {\n      this._zMin = zMin as number | null;\n      this._zMax = zMax;\n      return this;\n    }\n  }\n\n  attach(multitouch: Multitouch): void {\n    const surface = this._multitouch && this._multitouch.surface();\n    if (surface !== null) {\n      surface.on(\"multitouchstart\", this.onMultitouchStart);\n      surface.on(\"multitouchchange\", this.onMultitouchChange);\n      surface.on(\"multitouchcancel\", this.onMultitouchCancel);\n      surface.on(\"multitouchend\", this.onMultitouchEnd);\n    }\n  }\n\n  detach(multitouch: Multitouch): void {\n    const surface = this._multitouch && this._multitouch.surface();\n    if (surface !== null) {\n      surface.off(\"multitouchstart\", this.onMultitouchStart);\n      surface.off(\"multitouchchange\", this.onMultitouchChange);\n      surface.off(\"multitouchcancel\", this.onMultitouchCancel);\n      surface.off(\"multitouchend\", this.onMultitouchEnd);\n    }\n  }\n\n  protected createPoint(gesturePoint: MultitouchPoint): ScaleGesturePoint<D> {\n    const coords = this.coords(gesturePoint.cx, gesturePoint.cy);\n    return {\n      identifier: gesturePoint.identifier,\n      domainCoord: coords.domainCoord,\n      rangeCoord: coords.rangeCoord,\n    };\n  }\n\n  protected updatePoint(gesturePoint: MultitouchPoint, scalePoint: ScaleGesturePoint<D>): void {\n    scalePoint.rangeCoord = this.rangeCoord(gesturePoint.cx, gesturePoint.cy);\n  }\n\n  updatePoints(gesturePoints: ReadonlyArray<MultitouchPoint>): void {\n    const scalePoints = this._points;\n    outer: for (let i = 0; i < gesturePoints.length; i += 1) {\n      const gesturePoint = gesturePoints[i];\n      for (let j = 0; j < scalePoints.length; j += 1) {\n        const scalePoint = scalePoints[j];\n        if (Objects.equal(gesturePoint.identifier, scalePoint.identifier)) {\n          this.updatePoint(gesturePoint, scalePoint);\n          continue outer;\n        }\n      }\n      const scalePoint = this.createPoint(gesturePoint);\n      scalePoints.push(scalePoint);\n    }\n    let j = 0;\n    outer: while (j < scalePoints.length) {\n      const scalePoint = scalePoints[j];\n      for (let i = 0; i < gesturePoints.length; i += 1) {\n        const gesturePoint = gesturePoints[i];\n        if (Objects.equal(scalePoint.identifier, gesturePoint.identifier)) {\n          j += 1;\n          continue outer;\n        }\n      }\n      scalePoints.splice(j, 1);\n    }\n  }\n\n  protected clampScale(): boolean {\n    const _xMin = this._xMin !== null ? this._xMin : void 0;\n    const _xMax = this._xMax !== null ? this._xMax : void 0;\n    const _zMin = this._zMin !== null ? this._zMin : void 0;\n    const _zMax = this._zMax !== null ? this._zMax : void 0;\n    const scale = this._scale!;\n    this._scale = scale.clampDomain(_xMin, _xMax, _zMin, _zMax);\n    if (this._scale !== scale) {\n      for (let i = 0; i < this._points.length; i += 1) {\n        const scalePoint = this._points[i];\n        scalePoint.domainCoord = this._scale.unscale(scalePoint.rangeCoord);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  protected rescale(): boolean {\n    const p0 = this._points[0];\n    const p1 = this._points[1];\n    const oldScale = this._scale!;\n    if (p0 !== void 0 && p1 !== void 0) {\n      const x0 = p0.domainCoord;\n      const y0 = p0.rangeCoord;\n      const x1 = p1.domainCoord;\n      const y1 = p1.rangeCoord;\n      this._scale = oldScale.solveDomain(x0, y0, x1, y1);\n      this.clampScale();\n    } else if (p0 !== void 0) {\n      const x0 = p0.domainCoord;\n      const y0 = p0.rangeCoord;\n      this._scale = oldScale.solveDomain(x0, y0);\n      this.clampScale();\n    }\n    return !oldScale.equals(this._scale);\n  }\n\n  protected onMultitouchStart(event: MultitouchEvent): void {\n    this.scaleStart(event);\n  }\n\n  protected onMultitouchChange(event: MultitouchEvent): void {\n    this.updatePoints(event.points);\n    const changed = this.rescale();\n    if (changed) {\n      this.scaleChange(event);\n    }\n  }\n\n  protected onMultitouchCancel(event: MultitouchEvent): void {\n    this.scaleCancel(event);\n  }\n\n  protected onMultitouchEnd(event: MultitouchEvent): void {\n    this.scaleEnd(event);\n  }\n\n  protected scaleStart(originalEvent: Event | null): void {\n    const event = new ScaleGestureEvent(\"scalestart\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      gesture: this,\n      multitouch: this._multitouch!,\n      ruler: this._ruler!,\n      scale: this._scale!,\n      originalEvent: originalEvent,\n    });\n    this._ruler!.dispatchEvent(event);\n  }\n\n  protected scaleChange(originalEvent: Event | null): void {\n    const event = new ScaleGestureEvent(\"scalechange\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      gesture: this,\n      multitouch: this._multitouch!,\n      ruler: this._ruler!,\n      scale: this._scale!,\n      originalEvent: originalEvent,\n    });\n    this._ruler!.dispatchEvent(event);\n  }\n\n  protected scaleCancel(originalEvent: Event | null): void {\n    const event = new ScaleGestureEvent(\"scalecancel\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      gesture: this,\n      multitouch: this._multitouch!,\n      ruler: this._ruler!,\n      scale: this._scale!,\n      originalEvent: originalEvent,\n    });\n    this._ruler!.dispatchEvent(event);\n    this._points.length = 0;\n  }\n\n  protected scaleEnd(originalEvent: Event | null): void {\n    const event = new ScaleGestureEvent(\"scaleend\", {\n      bubbles: true,\n      cancelable: true,\n      composed: true,\n      gesture: this,\n      multitouch: this._multitouch!,\n      ruler: this._ruler!,\n      scale: this._scale!,\n      originalEvent: originalEvent,\n    });\n    this._ruler!.dispatchEvent(event);\n    this._points.length = 0;\n  }\n\n  protected abstract coords(clientX: number, clientY: number): {domainCoord: D, rangeCoord: number};\n\n  protected abstract rangeCoord(clientX: number, clientY: number): number;\n\n  protected abstract isParallel(x0: number, y0: number, x1: number, y1: number): boolean;\n\n  static horizontal<D>(): HorizontalScaleGesture<D> {\n    return new HorizontalScaleGesture();\n  }\n\n  static vertical<D>(): VerticalScaleGesture<D> {\n    return new VerticalScaleGesture();\n  }\n}\n\nexport class HorizontalScaleGesture<D> extends ScaleGesture<D> {\n  protected coords(clientX: number, clientY: number): {domainCoord: D, rangeCoord: number} {\n    let ruler = this._ruler;\n    const dx = RenderedView.is(ruler) ? ruler.viewFrame.x : 0;\n    do {\n      if (ruler instanceof ElementView) {\n        const bounds = ruler.node.getBoundingClientRect();\n        const rangeCoord = clientX - bounds.left - dx;\n        const domainCoord = this._scale!.unscale(rangeCoord);\n        return {domainCoord, rangeCoord};\n      } else if (ruler !== null) {\n        ruler = ruler.parentView;\n      } else {\n        break;\n      }\n    } while (true);\n    throw new Error(\"\" + this._ruler);\n  }\n\n  protected rangeCoord(clientX: number, clientY: number): number {\n    let ruler = this._ruler;\n    const dx = RenderedView.is(ruler) ? ruler.viewFrame.x : 0;\n    do {\n      if (ruler instanceof ElementView) {\n        const bounds = ruler.node.getBoundingClientRect();\n        const rangeCoord = clientX - bounds.left - dx;\n        return rangeCoord;\n      } else if (ruler !== null) {\n        ruler = ruler.parentView;\n      } else {\n        break;\n      }\n    } while (true);\n    throw new Error(\"\" + this._ruler);\n  }\n\n  protected isParallel(x0: number, y0: number, x1: number, y1: number): boolean {\n    return Math.abs(x1 - x0) >= Math.abs(y1 - y0);\n  }\n}\n\nexport class VerticalScaleGesture<D> extends ScaleGesture<D> {\n  protected coords(clientX: number, clientY: number): {domainCoord: D, rangeCoord: number} {\n    let ruler = this._ruler;\n    const dy = RenderedView.is(ruler) ? ruler.viewFrame.y : 0;\n    do {\n      if (ruler instanceof ElementView) {\n        const bounds = ruler.node.getBoundingClientRect();\n        const rangeCoord = clientY - bounds.top - dy;\n        const domainCoord = this._scale!.unscale(rangeCoord);\n        return {domainCoord, rangeCoord};\n      } else if (ruler !== null) {\n        ruler = ruler.parentView;\n      } else {\n        break;\n      }\n    } while (true);\n    throw new Error(\"\" + this._ruler);\n  }\n\n  protected rangeCoord(clientX: number, clientY: number): number {\n    let ruler = this._ruler;\n    const dy = RenderedView.is(ruler) ? ruler.viewFrame.y : 0;\n    do {\n      if (ruler instanceof ElementView) {\n        const bounds = ruler.node.getBoundingClientRect();\n        const rangeCoord = clientY - bounds.top - dy;\n        return rangeCoord;\n      } else if (ruler !== null) {\n        ruler = ruler.parentView;\n      } else {\n        break;\n      }\n    } while (true);\n    throw new Error(\"\" + this._ruler);\n  }\n\n  protected isParallel(x0: number, y0: number, x1: number, y1: number): boolean {\n    return Math.abs(y1 - y0) >= Math.abs(x1 - x0);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {View, HtmlView} from \"@swim/view\";\nimport {GestureViewObserver} from \"./GestureViewObserver\";\nimport {GestureViewController} from \"./GestureViewController\";\n\nexport type GestureViewPointerType = \"mouse\" | \"touch\" | \"pen\" | \"unknown\";\n\nexport class GestureViewHover {\n  readonly id: string;\n  readonly pointerType: GestureViewPointerType;\n  t0: number;\n  view?: View;\n\n  constructor(id: string, pointerType: GestureViewPointerType) {\n    this.id = id;\n    this.pointerType = pointerType;\n    this.t0 = performance.now();\n    this.view = void 0;\n  }\n}\n\nexport class GestureViewTrack {\n  readonly id: string;\n  readonly pointerType: GestureViewPointerType;\n  defaultPrevented: boolean;\n  holdTimer: number;\n  holdDelay: number;\n  buttons: number;\n  x0: number;\n  y0: number;\n  t0: number;\n  dx: number;\n  dy: number;\n  dt: number;\n  x: number;\n  y: number;\n  t: number;\n  view?: View;\n\n  constructor(id: string, pointerType: GestureViewPointerType,\n              buttons: number, x: number, y: number) {\n    this.id = id;\n    this.pointerType = pointerType;\n    this.defaultPrevented = false;\n    this.holdTimer = 0;\n    this.holdDelay = 400;\n    this.buttons = buttons;\n    this.x0 = x;\n    this.y0 = y;\n    this.t0 = performance.now();\n    this.dx = 0;\n    this.dy = 0;\n    this.dt = 0;\n    this.x = x;\n    this.y = y;\n    this.t = this.t0;\n    this.view = void 0;\n  }\n\n  preventDefault(): void {\n    this.defaultPrevented = true;\n  }\n\n  setHoldTimer(f: () => void): void {\n    if (this.holdDelay !== 0) {\n      this.clearHoldTimer();\n      this.holdTimer = setTimeout(f, this.holdDelay) as any;\n    }\n  }\n\n  clearHoldTimer(): void {\n    if (this.holdTimer !== 0) {\n      clearTimeout(this.holdTimer);\n      this.holdTimer = 0;\n    }\n  }\n}\n\n/** @hidden */\nexport class BaseGestureView extends HtmlView {\n  /** @hidden */\n  _hovers: {[id: string]: GestureViewHover | undefined};\n  /** @hidden */\n  _hoverCount: number;\n  /** @hidden */\n  _tracks: {[id: string]: GestureViewTrack | undefined};\n  /** @hidden */\n  _trackCount: number;\n\n  constructor(node: HTMLElement) {\n    super(node);\n    this._hovers = {};\n    this._hoverCount = 0;\n    this._tracks = {};\n    this._trackCount = 0;\n  }\n\n  get viewController(): GestureViewController | null {\n    return this._viewController;\n  }\n\n  get hovers(): {readonly [id: string]: GestureViewHover | undefined} {\n    return this._hovers;\n  }\n\n  get tracks(): {readonly [id: string]: GestureViewTrack | undefined} {\n    return this._tracks;\n  }\n\n  activate(event: Event | null): void {\n    this.willActivate(event);\n    this.onActivate(event);\n    this.didActivate(event);\n  }\n\n  protected willActivate(event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillActivate !== void 0) {\n        viewObserver.viewWillActivate(event, this);\n      }\n    });\n  }\n\n  protected onActivate(event: Event | null): void {\n    // hook\n  }\n\n  protected didActivate(event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidActivate !== void 0) {\n        viewObserver.viewDidActivate(event, this);\n      }\n    });\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    this.attachNode(this._node);\n  }\n\n  protected onUnmount(): void {\n    this._hovers = {};\n    this._hoverCount = 0;\n    this._tracks = {};\n    this._trackCount = 0;\n    this.detachNode(this._node);\n    super.onUnmount();\n  }\n\n  protected attachNode(node: Node): void {\n    // hook\n  }\n\n  protected detachNode(node: Node): void {\n    // hook\n  }\n\n  protected startHovering(): void {\n    this.willStartHovering();\n    this.onStartHovering();\n    this.didStartHovering();\n  }\n\n  protected willStartHovering(): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillStartHovering !== void 0) {\n        viewObserver.viewWillStartHovering(this);\n      }\n    });\n  }\n\n  protected onStartHovering(): void {\n    // hook\n  }\n\n  protected didStartHovering(): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidStartHovering !== void 0) {\n        viewObserver.viewDidStartHovering(this);\n      }\n    });\n  }\n\n  protected stopHovering(): void {\n    this.willStopHovering();\n    this.onStopHovering();\n    this.didStopHovering();\n  }\n\n  protected willStopHovering(): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillStopHovering !== void 0) {\n        viewObserver.viewWillStopHovering(this);\n      }\n    });\n  }\n\n  protected onStopHovering(): void {\n    // hook\n  }\n\n  protected didStopHovering(): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidStopHovering !== void 0) {\n        viewObserver.viewDidStopHovering(this);\n      }\n    });\n  }\n\n  protected createHover(id: string, pointerType: GestureViewPointerType): GestureViewHover {\n    return new GestureViewHover(id, pointerType);\n  }\n\n  beginHover(id: string, pointerType: GestureViewPointerType, event: Event | null): GestureViewHover {\n    let hover = this._hovers[id];\n    if (hover === void 0) {\n      hover = this.createHover(id, pointerType);\n      this.willBeginHover(hover, event);\n      this._hovers[id] = hover;\n      this.onBeginHover(hover, event);\n      this._hoverCount += 1;\n      if (this._hoverCount === 1) {\n        this.startHovering();\n      }\n      this.didBeginHover(hover, event);\n    }\n    return hover;\n  }\n\n  protected willBeginHover(hover: GestureViewHover, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillBeginHover !== void 0) {\n        viewObserver.viewWillBeginHover(hover, event, this);\n      }\n    });\n  }\n\n  protected onBeginHover(hover: GestureViewHover, event: Event | null): void {\n    // hook\n  }\n\n  protected didBeginHover(hover: GestureViewHover, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidBeginHover !== void 0) {\n        viewObserver.viewDidBeginHover(hover, event, this);\n      }\n    });\n  }\n\n  endHover(id: string, event: Event | null): GestureViewHover | null {\n    const hover = this._hovers[id];\n    if (hover !== void 0) {\n      this.willEndHover(hover, event);\n      delete this._hovers[id];\n      this._hoverCount -= 1;\n      this.onEndHover(hover, event);\n      if (this._hoverCount === 0) {\n        this.stopHovering();\n      }\n      this.didEndHover(hover, event);\n      return hover;\n    } else {\n      return null;\n    }\n  }\n\n  protected willEndHover(hover: GestureViewHover, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillEndHover !== void 0) {\n        viewObserver.viewWillEndHover(hover, event, this);\n      }\n    });\n  }\n\n  protected onEndHover(hover: GestureViewHover, event: Event | null): void {\n    // hook\n  }\n\n  protected didEndHover(hover: GestureViewHover, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidEndHover !== void 0) {\n        viewObserver.viewDidEndHover(hover, event, this);\n      }\n    });\n  }\n\n  protected startTracking(): void {\n    this.willStartTracking();\n    this.onStartTracking();\n    this.didStartTracking();\n  }\n\n  protected willStartTracking(): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillStartTracking !== void 0) {\n        viewObserver.viewWillStartTracking(this);\n      }\n    });\n  }\n\n  protected onStartTracking(): void {\n    // hook\n  }\n\n  protected didStartTracking(): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidStartTracking !== void 0) {\n        viewObserver.viewDidStartTracking(this);\n      }\n    });\n  }\n\n  protected stopTracking(): void {\n    this.willStopTracking();\n    this.onStopTracking();\n    this.didStopTracking();\n  }\n\n  protected willStopTracking(): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillStopTracking !== void 0) {\n        viewObserver.viewWillStopTracking(this);\n      }\n    });\n  }\n\n  protected onStopTracking(): void {\n    // hook\n  }\n\n  protected didStopTracking(): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidStopTracking !== void 0) {\n        viewObserver.viewDidStopTracking(this);\n      }\n    });\n  }\n\n  protected createTrack(id: string, pointerType: GestureViewPointerType, buttons: number,\n                        clientX: number, clientY: number): GestureViewTrack {\n    return new GestureViewTrack(id, pointerType, buttons, clientX, clientY);\n  }\n\n  beginTrack(id: string, pointerType: GestureViewPointerType, buttons: number,\n             clientX: number, clientY: number, event: Event | null): GestureViewTrack {\n    let track = this._tracks[id];\n    if (track === void 0) {\n      track = this.createTrack(id, pointerType, buttons, clientX, clientY);\n      this.willBeginTrack(track, event);\n      this._tracks[id] = track;\n      this.onBeginTrack(track, event);\n      this._trackCount += 1;\n      track.setHoldTimer(this.holdTrack.bind(this, id));\n      if (this._trackCount === 1) {\n        this.startTracking();\n      }\n      this.didBeginTrack(track, event);\n    }\n    return track;\n  }\n\n  protected willBeginTrack(track: GestureViewTrack, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillBeginTrack !== void 0) {\n        viewObserver.viewWillBeginTrack(track, event, this);\n      }\n    });\n  }\n\n  protected onBeginTrack(track: GestureViewTrack, event: Event | null): void {\n    // hook\n  }\n\n  protected didBeginTrack(track: GestureViewTrack, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidBeginTrack !== void 0) {\n        viewObserver.viewDidBeginTrack(track, event, this);\n      }\n    });\n  }\n\n  holdTrack(id: string): GestureViewTrack | null {\n    const track = this._tracks[id];\n    if (track !== void 0) {\n      const t = performance.now();\n      this.willHoldTrack(track);\n      track.dt = t - track.t0;\n      track.t = t;\n      this.onHoldTrack(track);\n      this.didHoldTrack(track);\n      return track;\n    } else {\n      return null;\n    }\n  }\n\n  protected willHoldTrack(track: GestureViewTrack): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillHoldTrack !== void 0) {\n        viewObserver.viewWillHoldTrack(track, this);\n      }\n    });\n  }\n\n  protected onHoldTrack(track: GestureViewTrack): void {\n    // hook\n  }\n\n  protected didHoldTrack(track: GestureViewTrack): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidHoldTrack !== void 0) {\n        viewObserver.viewDidHoldTrack(track, this);\n      }\n    });\n  }\n\n  moveTrack(id: string, clientX: number, clientY: number,\n            event: Event | null): GestureViewTrack | null {\n    const track = this._tracks[id];\n    if (track !== void 0) {\n      const t = performance.now();\n      this.willMoveTrack(track, event);\n      track.dx = clientX - track.x0;\n      track.dy = clientY - track.y0;\n      track.dt = t - track.t0;\n      track.x = clientX;\n      track.y = clientY;\n      track.t = t;\n      this.onMoveTrack(track, event);\n      this.didMoveTrack(track, event);\n      return track;\n    } else {\n      return null;\n    }\n  }\n\n  protected willMoveTrack(track: GestureViewTrack, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillMoveTrack !== void 0) {\n        viewObserver.viewWillMoveTrack(track, event, this);\n      }\n    });\n  }\n\n  protected onMoveTrack(track: GestureViewTrack, event: Event | null): void {\n    if (track.pointerType !== \"mouse\" && track.dt < 100 &&\n        track.dx * track.dx + track.dy * track.dy > 10 * 10) {\n      this.cancelTrack(track.id, track.x, track.y, event);\n    }\n  }\n\n  protected didMoveTrack(track: GestureViewTrack, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidMoveTrack !== void 0) {\n        viewObserver.viewDidMoveTrack(track, event, this);\n      }\n    });\n  }\n\n  endTrack(id: string, clientX: number, clientY: number,\n           event: Event | null): GestureViewTrack | null {\n    const track = this._tracks[id];\n    if (track !== void 0) {\n      this.willEndTrack(track, event);\n      delete this._tracks[id];\n      this._trackCount -= 1;\n      this.onEndTrack(track, event);\n      track.clearHoldTimer();\n      if (this._trackCount === 0) {\n        this.stopTracking();\n      }\n      this.didEndTrack(track, event);\n      return track;\n    } else {\n      return null;\n    }\n  }\n\n  protected willEndTrack(track: GestureViewTrack, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillEndTrack !== void 0) {\n        viewObserver.viewWillEndTrack(track, event, this);\n      }\n    });\n  }\n\n  protected onEndTrack(track: GestureViewTrack, event: Event | null): void {\n    // hook\n  }\n\n  protected didEndTrack(track: GestureViewTrack, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidEndTrack !== void 0) {\n        viewObserver.viewDidEndTrack(track, event, this);\n      }\n    });\n  }\n\n  cancelTrack(id: string, clientX: number, clientY: number,\n              event: Event | null): GestureViewTrack | null {\n    const track = this._tracks[id];\n    if (track !== void 0) {\n      this.willCancelTrack(track, event);\n      delete this._tracks[id];\n      this._trackCount -= 1;\n      this.onCancelTrack(track, event);\n      track.clearHoldTimer();\n      if (this._trackCount === 0) {\n        this.stopTracking();\n      }\n      this.didCancelTrack(track, event);\n      return track;\n    } else {\n      return null;\n    }\n  }\n\n  protected willCancelTrack(track: GestureViewTrack, event: Event | null): void {\n    this.willObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewWillCancelTrack !== void 0) {\n        viewObserver.viewWillCancelTrack(track, event, this);\n      }\n    });\n  }\n\n  protected onCancelTrack(track: GestureViewTrack, event: Event | null): void {\n    // hook\n  }\n\n  protected didCancelTrack(track: GestureViewTrack, event: Event | null): void {\n    this.didObserve(function (viewObserver: GestureViewObserver): void {\n      if (viewObserver.viewDidCancelTrack !== void 0) {\n        viewObserver.viewDidCancelTrack(track, event, this);\n      }\n    });\n  }\n}\n\n/** @hidden */\nexport class PointerGestureView extends BaseGestureView {\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onPointerEnter = this.onPointerEnter.bind(this);\n    this.onPointerLeave = this.onPointerLeave.bind(this);\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.onPointerCancel = this.onPointerCancel.bind(this);\n    this.onDocumentLeave = this.onDocumentLeave.bind(this);\n  }\n\n  protected attachNode(node: Node): void {\n    node.addEventListener(\"pointerenter\", this.onPointerEnter);\n    node.addEventListener(\"pointerleave\", this.onPointerLeave);\n    node.addEventListener(\"pointerdown\", this.onPointerDown, {passive: true});\n  }\n\n  protected detachNode(node: Node): void {\n    node.removeEventListener(\"pointerenter\", this.onPointerEnter);\n    node.removeEventListener(\"pointerleave\", this.onPointerLeave);\n    node.removeEventListener(\"pointerdown\", this.onPointerDown);\n    document.body.removeEventListener(\"pointermove\", this.onPointerMove);\n    document.body.removeEventListener(\"pointerup\", this.onPointerUp);\n    document.body.removeEventListener(\"pointercancel\", this.onPointerCancel);\n    document.body.removeEventListener(\"pointerleave\", this.onDocumentLeave);\n  }\n\n  protected onStartTracking(): void {\n    document.body.addEventListener(\"pointermove\", this.onPointerMove);\n    document.body.addEventListener(\"pointerup\", this.onPointerUp);\n    document.body.addEventListener(\"pointercancel\", this.onPointerCancel);\n    document.body.addEventListener(\"pointerleave\", this.onDocumentLeave);\n  }\n\n  protected onStopTracking(): void {\n    document.body.removeEventListener(\"pointermove\", this.onPointerMove);\n    document.body.removeEventListener(\"pointerup\", this.onPointerUp);\n    document.body.removeEventListener(\"pointercancel\", this.onPointerCancel);\n    document.body.removeEventListener(\"pointerleave\", this.onDocumentLeave);\n  }\n\n  protected onPointerEnter(event: PointerEvent): void {\n    if (event.pointerType === \"mouse\" && event.buttons === 0) {\n      const id = \"\" + event.pointerId;\n      if (this._tracks[id] === void 0) {\n        const pointerType = PointerGestureView.pointerType(event.pointerType);\n        this.beginHover(id, pointerType, event);\n      }\n    }\n  }\n\n  protected onPointerLeave(event: PointerEvent): void {\n    if (event.pointerType === \"mouse\") {\n      const id = \"\" + event.pointerId;\n      if (this._tracks[id] === void 0) {\n        this.endHover(id, event);\n      }\n    }\n  }\n\n  protected onPointerDown(event: PointerEvent): void {\n    const id = \"\" + event.pointerId;\n    const pointerType = PointerGestureView.pointerType(event.pointerType);\n    this.beginTrack(id, pointerType, event.buttons, event.clientX, event.clientY, event);\n    if (event.pointerType === \"mouse\" && event.button !== 0) {\n      this.cancelTrack(id, event.clientX, event.clientY, event);\n    }\n  }\n\n  protected onPointerMove(event: PointerEvent): void {\n    const id = \"\" + event.pointerId;\n    this.moveTrack(id, event.clientX, event.clientY, event);\n  }\n\n  protected onPointerUp(event: PointerEvent): void {\n    const id = \"\" + event.pointerId;\n    const track = this.endTrack(id, event.clientX, event.clientY, event);\n    if (track !== null && !track.defaultPrevented && event.button === 0) {\n      this.activate(event);\n    }\n    this.endHover(id, event);\n  }\n\n  protected onPointerCancel(event: PointerEvent): void {\n    const id = \"\" + event.pointerId;\n    this.cancelTrack(id, event.clientX, event.clientY, event);\n    this.endHover(id, event);\n  }\n\n  protected onDocumentLeave(event: PointerEvent): void {\n    const id = \"\" + event.pointerId;\n    this.cancelTrack(id, event.clientX, event.clientY, event);\n    this.endHover(id, event);\n  }\n\n  /** @hidden */\n  static pointerType(pointerType: string): GestureViewPointerType {\n    if (pointerType === \"mouse\" || pointerType === \"touch\" || pointerType === \"pen\") {\n      return pointerType;\n    } else {\n      return \"unknown\";\n    }\n  }\n}\n\n/** @hidden */\nexport class TouchGestureView extends BaseGestureView {\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onTouchCancel = this.onTouchCancel.bind(this);\n  }\n\n  protected attachNode(node: Node): void {\n    node.addEventListener(\"touchstart\", this.onTouchStart, {passive: true});\n    node.addEventListener(\"touchmove\", this.onTouchMove);\n    node.addEventListener(\"touchend\", this.onTouchEnd);\n    node.addEventListener(\"touchcancel\", this.onTouchCancel);\n  }\n\n  protected detachNode(node: Node): void {\n    node.removeEventListener(\"touchstart\", this.onTouchStart);\n    node.removeEventListener(\"touchmove\", this.onTouchMove);\n    node.removeEventListener(\"touchend\", this.onTouchEnd);\n    node.removeEventListener(\"touchcancel\", this.onTouchCancel);\n  }\n\n  protected onStartTracking(): void {\n    this.on(\"touchmove\", this.onTouchMove);\n    this.on(\"touchend\", this.onTouchEnd);\n    this.on(\"touchcancel\", this.onTouchCancel);\n  }\n\n  protected onStopTracking(): void {\n    this.off(\"touchmove\", this.onTouchMove);\n    this.off(\"touchend\", this.onTouchEnd);\n    this.off(\"touchcancel\", this.onTouchCancel);\n  }\n\n  protected onTouchStart(event: TouchEvent): void {\n    const touches = event.targetTouches;\n    for (let i = 0; i < touches.length; i += 1) {\n      const touch = touches[i];\n      const id = \"\" + touch.identifier;\n      this.beginTrack(id, \"touch\", 0, touch.clientX, touch.clientY, event);\n    }\n  }\n\n  protected onTouchMove(event: TouchEvent): void {\n    const touches = event.changedTouches;\n    for (let i = 0; i < touches.length; i += 1) {\n      const touch = touches[i];\n      const id = \"\" + touch.identifier;\n      this.moveTrack(id, touch.clientX, touch.clientY, event);\n    }\n  }\n\n  protected onTouchEnd(event: TouchEvent): void {\n    const touches = event.changedTouches;\n    for (let i = 0; i < touches.length; i += 1) {\n      const touch = touches[i];\n      const id = \"\" + touch.identifier;\n      const track = this.endTrack(id, touch.clientX, touch.clientY, event);\n      if (track !== null && !track.defaultPrevented) {\n        this.activate(event);\n      }\n      this.endHover(id, event);\n    }\n  }\n\n  protected onTouchCancel(event: TouchEvent): void {\n    const touches = event.changedTouches;\n    for (let i = 0; i < touches.length; i += 1) {\n      const touch = touches[i];\n      const id = \"\" + touch.identifier;\n      this.cancelTrack(id, touch.clientX, touch.clientY, event);\n      this.endHover(id, event);\n    }\n  }\n}\n\n/** @hidden */\nexport class MouseGestureView extends BaseGestureView {\n  constructor(node: HTMLElement) {\n    super(node);\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onDocumentLeave = this.onDocumentLeave.bind(this);\n  }\n\n  protected attachNode(node: Node): void {\n    node.addEventListener(\"mouseenter\", this.onMouseEnter);\n    node.addEventListener(\"mouseleave\", this.onMouseLeave);\n    node.addEventListener(\"mousedown\", this.onMouseDown);\n  }\n\n  protected detachNode(node: Node): void {\n    node.removeEventListener(\"mouseenter\", this.onMouseEnter);\n    node.removeEventListener(\"mouseleave\", this.onMouseLeave);\n    node.removeEventListener(\"mousedown\", this.onMouseDown);\n    document.body.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.body.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.body.removeEventListener(\"mouseleave\", this.onDocumentLeave);\n  }\n\n  protected onStartTracking(): void {\n    document.body.addEventListener(\"mousemove\", this.onMouseMove);\n    document.body.addEventListener(\"mouseup\", this.onMouseUp);\n    document.body.addEventListener(\"mouseleave\", this.onDocumentLeave);\n  }\n\n  protected onStopTracking(): void {\n    document.body.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.body.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.body.removeEventListener(\"mouseleave\", this.onDocumentLeave);\n  }\n\n  protected onMouseEnter(event: MouseEvent): void {\n    if (event.buttons === 0 && this._tracks.mouse === void 0) {\n      this.beginHover(\"mouse\", \"mouse\", event);\n    }\n  }\n\n  protected onMouseLeave(event: MouseEvent): void {\n    if (this._tracks.mouse === void 0) {\n      this.endHover(\"mouse\", event);\n    }\n  }\n\n  protected onMouseDown(event: MouseEvent): void {\n    this.beginTrack(\"mouse\", \"mouse\", event.buttons || 0, event.clientX, event.clientY, event);\n    if (event.button !== 0) {\n      this.cancelTrack(\"mouse\", event.clientX, event.clientY, event);\n    }\n  }\n\n  protected onMouseMove(event: MouseEvent): void {\n    this.moveTrack(\"mouse\", event.clientX, event.clientY, event);\n  }\n\n  protected onMouseUp(event: MouseEvent): void {\n    const track = this.endTrack(\"mouse\", event.clientX, event.clientY, event);\n    if (track !== null && !track.defaultPrevented && event.button === 0) {\n      this.activate(event);\n    }\n    this.endHover(\"mouse\", event);\n  }\n\n  protected onDocumentLeave(event: MouseEvent): void {\n    this.cancelTrack(\"mouse\", event.clientX, event.clientY, event);\n    this.endHover(\"mouse\", event);\n  }\n}\n\ntype GestureView = BaseGestureView;\nconst GestureView: typeof BaseGestureView =\n    typeof PointerEvent !== \"undefined\" ? PointerGestureView :\n    typeof TouchEvent !== \"undefined\" ? TouchGestureView :\n    MouseGestureView;\nexport {GestureView};\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {HtmlViewController} from \"@swim/view\";\nimport {GestureViewHover, GestureViewTrack, GestureView} from \"./GestureView\";\nimport {GestureViewObserver} from \"./GestureViewObserver\";\n\nexport class GestureViewController<V extends GestureView = GestureView> extends HtmlViewController<V> implements GestureViewObserver<V> {\n  viewWillActivate(event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidActivate(event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillStartHovering(view: V): void {\n    // hook\n  }\n\n  viewDidStartHovering(view: V): void {\n    // hook\n  }\n\n  viewWillStopHovering(view: V): void {\n    // hook\n  }\n\n  viewDidStopHovering(view: V): void {\n    // hook\n  }\n\n  viewWillBeginHover(hover: GestureViewHover, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidBeginHover(hover: GestureViewHover, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillEndHover(hover: GestureViewHover, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidEndHover(hover: GestureViewHover, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillStartTracking(view: V): void {\n    // hook\n  }\n\n  viewDidStartTracking(view: V): void {\n    // hook\n  }\n\n  viewWillStopTracking(view: V): void {\n    // hook\n  }\n\n  viewDidStopTracking(view: V): void {\n    // hook\n  }\n\n  viewWillBeginTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidBeginTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillHoldTrack(track: GestureViewTrack, view: V): void {\n    // hook\n  }\n\n  viewDidHoldTrack(track: GestureViewTrack, view: V): void {\n    // hook\n  }\n\n  viewWillMoveTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidMoveTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillEndTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidEndTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewWillCancelTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n\n  viewDidCancelTrack(track: GestureViewTrack, event: Event | null, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Tween} from \"@swim/transition\";\nimport {View} from \"../View\";\n\nexport type ModalState = \"hidden\" | \"showing\" | \"shown\" | \"hiding\";\n\nexport interface ModalOptions {\n  focus?: boolean;\n  multi?: boolean;\n}\n\nexport interface Modal {\n  readonly modalState: ModalState;\n\n  readonly modalView: View | null;\n\n  showModal(tween?: Tween<any>): void;\n\n  hideModal(tween?: Tween<any>): void;\n}\n\n/** @hidden */\nexport const Modal = {\n  is(object: unknown): object is Modal {\n    if (typeof object === \"object\" && object !== null) {\n      const modal = object as Modal;\n      return modal.modalState !== void 0\n          && modal.modalView !== void 0\n          && typeof modal.showModal === \"function\"\n          && typeof modal.hideModal === \"function\";\n    }\n    return false;\n  },\n};\n"]}